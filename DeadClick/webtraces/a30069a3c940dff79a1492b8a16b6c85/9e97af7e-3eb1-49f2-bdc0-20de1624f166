webpackJsonp([39],{"+5Qw":function(e,t){},"+FQU":function(e,t){},"+V/3":function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"c",function(){return a}),n.d(t,"d",function(){return r}),n.d(t,"a",function(){return s});var i="subscribe_to_channel",a="turbo",r="visit_url",s="broadcaster"},"+WrY":function(e,t,n){"use strict";var i=n("TToO"),a=n("U7vG"),r=n("RH2O"),s=n("2KeS"),o=n("6sO2"),l=n("1F7R"),c=n("O0Qc"),d=n("OLl6"),u=n("uXDg"),p=n("qzJ+"),m=n("m4HT"),h=n("QPF3"),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleWhisperCommand=function(e){var n=Object(c.r)(e),i=n.recipientLogin,a=n.body;if(!i||!a)return{preserveInput:!0,deferred:Promise.resolve({notice:Object(o.d)('Usage: "/w [login] [message]"',"WhisperCommandHandler")})};if(t.props.isEmbedded||t.props.isPopout)return{deferred:Promise.resolve({notice:Object(o.d)("Please use the whisper window for whispers.","WhisperCommandHandler")})};if(i.toLowerCase()===t.props.userLogin)return{deferred:Promise.resolve({notice:Object(o.d)("You cannot whisper to yourself.","WhisperCommandHandler")})};if(t.props.userID)return t.initiateWhisper(i,a)},t}return i.__extends(t,e),t.prototype.render=function(){return a.createElement(l.a,{command:"w",handler:this.handleWhisperCommand})},t.prototype.initiateWhisper=function(e,t){var n=this;return{deferred:new Promise(function(a,r){return i.__awaiter(n,void 0,void 0,function(){var n,s,l,c;return i.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,Object(d.a)(e)];case 1:return n=i.sent(),[3,3];case 2:return s=i.sent(),o.i.warn(s,"Failed to fetch user targeted by whisper command.",{recipientLogin:e}),[2,r(s)];case 3:return n?[3,4]:[2,a({notice:Object(o.d)("No user matching that login.","WhisperCommandHandler")})];case 4:return i.trys.push([4,6,,7]),[4,Object(p.a)({currentUserID:this.props.userID,emotes:this.props.emoteMap||{},message:t,recipientUserID:n})];case 5:return i.sent(),[3,7];case 6:return l=i.sent(),o.i.error(l,"Failed to send whisper using whisper command.",{currentUserID:this.props.userID,recipientUserID:n}),[2,a({notice:Object(o.d)("Unable to send Whisper at this moment.","WhisperCommandHandler")})];case 7:return c=Object(m.a)(this.props.userID,n),this.props.openThread(c),[2,a({})]}})})})}},t}(a.Component),f=Object(r.b)(null,function(e){return Object(s.b)({openThread:function(e){return Object(u.l)({threadID:e,collapsed:!0},Object(h.a)())}},e)})(g);n.d(t,"a",function(){return f})},"+Znq":function(e,t,n){"use strict";var i=n("jetF");n.d(t,"a",function(){return i.a})},"+gWs":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"WhisperThread"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"whisperThread"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userLastMessageRead"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sentAt"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"unreadMessagesCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"messages"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"20"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emoteID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"from"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"to"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"from"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"sentAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"editedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"deletedAt"},arguments:[],directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:264}};n.loc.source={body:"query WhisperThread($id: ID!) {\nwhisperThread(id: $id) {\nid\nuserLastMessageRead {\nid\nsentAt\n}\nunreadMessagesCount\nmessages(first: 20) {\nedges {\ncursor\nnode {\nid\ncontent {\ncontent\nemotes {\nid\nemoteID\nsetID\nfrom\nto\n}\n}\nfrom {\nid\n}\nsentAt\neditedAt\ndeletedAt\n}\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"+xsx":function(e,t){},"/3Lr":function(e,t,n){"use strict";n.d(t,"d",function(){return a}),n.d(t,"c",function(){return r}),n.d(t,"a",function(){return s}),n.d(t,"b",function(){return i}),n.d(t,"e",function(){return o});var i,a={BitsLeaderboardEvents:"leaderboard-events-v1",ChannelBitsEvents:"channel-bits-events-v1",ChannelBitsPinEvents:"channel-bit-events-public",ChannelSubscribeEvents:"channel-subscribe-events-v1",ChatRoom:"chatrooms-room-v1",ChatRoomsChannel:"chatrooms-channel-v1",ChatRoomsUser:"chatrooms-user-v1",Friendship:"friendship",ImageUpload:"user-image-update",ModerationActionsByUserAndChannel:"chat_moderator_actions",OnsiteNotifications:"onsite-notifications",Presence:"presence",Raid:"raid",StreamChange:"stream-change-v1",StreamChatRoom:"stream-chat-room-v1",UploadService:"upload",UserBitsUpdates:"user-bits-updates-v1",UserCommerceEvents:"user-commerce-events",UserCrateEvents:"user-crate-events-v1",UserSubscribeEvents:"user-subscribe-events-v1",VideoPlayback:"video-playback",VideoPlaybackById:"video-playback-by-id",Whispers:"whispers"},r={BitsPinEvent:"bits-pin-event",BitsLeaderboardEvent:"bits-leaderboard-event",ChannelStreamDown:"stream-down",ChannelStreamUp:"stream-up",ChatNotification:"chat-notification",ChatRoomCreated:"created_room",ChatRoomDeleted:"deleted_room",ChatRoomUpdated:"updated_room",ChatRoomsUserModAction:"user_moderation_action",ChatRoomMessageCreated:"created_room_message",ChatRoomMessageEdited:"edited_room_message",ChatRoomMessageDeleted:"deleted_room_message",ChatRoomsRoomViewUpdated:"updated_room_view",ImageUploadSuccess:"imageuploadsuccess",ModerationAction:"moderation_action",OnsiteNotificationCreate:"create-notification",OnsiteNotificationDelete:"delete-notification",OnsiteNotificationsRead:"read-notifications",OnsiteNotificationSummaryUpdate:"update-summary",OnsiteNotificationUpdate:"update-notification",Presence:"presence",PresenceSettings:"settings",PurgeMessageRequest:"purge_messages_request",RaidCancel:"raid_cancel",RaidUpdate:"raid_update",StreamChatRoomChatRichEmbed:"chat_rich_embed",StreamDown:"stream_down",StreamUp:"stream_up",UpdatedChannelChatProperty:"updated_channel_chat_property",UploadService:"upload",UserBitsBalanceUpdate:"balance_update",UserBitsBadgeUpdate:"badge_update",UserCrateEvent:"crate-event",UserGiftEvent:"gift-event",UserMention:"user_mention",ViewCount:"viewcount",Vodcast:"watchparty-vod",WhisperAllThreadsUpdate:"threads",WhisperDeleted:"whisper_deleted",WhisperEdited:"whisper_edited",WhisperReceived:"whisper_received",WhisperSent:"whisper_sent",WhisperThreadUpdate:"thread"},s={Accepted:"accepted",Requested:"requested",Removed:"removed",SelfAccepted:"self_accepted",SelfRemoved:"self_removed",SelfRequested:"self_requested"};!function(e){e.Affiliate="affiliate",e.AutoModEnabled="automod_enabled",e.AutoModRejected="automod_rejected",e.Ban="ban",e.Clear="clear",e.EmoteOnly="emoteonly",e.EmoteOnlyOff="emoteonlyoff",e.FollowersOnly="followers",e.FollowersOnlyOff="followersoff",e.Host="host",e.Mod="mod",e.R9kBeta="r9kbeta",e.R9kBetaOff="r9kbetaoff",e.Slow="slow",e.SlowOff="slowoff",e.SubsBeta="subsbeta",e.SubscribersOnly="subscribers",e.SubscribersOnlyOff="subscribersoff",e.Timeout="timeout",e.Unban="unban",e.Unhost="unhost",e.Unmod="unmod",e.Untimeout="untimeout"}(i||(i={}));var o;!function(e){e.AutoModMessageRejected="automod_message_rejected",e.AutoModMessageApproved="automod_message_approved",e.AutoModMessageDenied="automod_message_denied"}(o||(o={}));var l;!function(e){e.Archive="archive",e.Highlight="highlight",e.Upload="upload",e.Premiere="premiere",e.Rerun="rerun",e.WatchPartyPremiere="watch_party_premiere",e.WatchPartyRerun="watch_party_rerun"}(l||(l={}));var c;!function(e){e.Private="private",e.Public="public"}(c||(c={}))},"/LBW":function(e,t,n){"use strict";t.h=function(e){var t={action_name:e.actionName,action_type:"click",client_time:(new Date).getTime(),displayed_balance:e.displayedBalance,emote_level:e.emoteLevel,emote_type:e.emoteType,bits_location:e.location||s.ChatTooltip};a.m.track(r.SpadeEventType.BitsCardInteraction,t)},n.d(t,"b",function(){return s}),n.d(t,"a",function(){return o}),t.d=function(e){return e&&l[e]?l[e]:(a.i.error(new Error('Buy Bits card contains improperly rendered offers, or offers unknown to Science. Tracking as "buy_100"'),'Buy Bits card contains improperly rendered offers, or offers unknown to Science. Tracking as "buy_100"'),o.Buy100)},t.e=function(e){var t={channel:e.channel,channel_id:e.channelID,available:e.available,host:"twitch.tv"};a.m.track(r.SpadeEventType.BitsAdsAvailability,t)},t.f=function(e){var t={distinct_id:a.n.session.deviceID,host:"twitch.tv",request_id:e.requestID,campaign_id:e.campaignID,adblock:e.adblock};a.m.track(r.SpadeEventType.BitsAdsImpression,t)},n.d(t,"c",function(){return i}),t.g=function(e){var t=a.m.getLastPageview(),n={location:t?t.location||"":"",ad_returned:null,campaign_id:e.campaignID,distinct_id:a.n.session.deviceID,host:"twitch.tv",request_id:e.requestID,request_method:e.requestMethod};a.m.track(r.SpadeEventType.BitsAdsRequest,n)};var i,a=n("6sO2"),r=n("vH/s"),s={ChatTooltip:"card",GetBitsButton:"get_bits_button",BitsLandingPage:"bits_landing_page"},o={BuyMain:"buy_main",Buy100:"buy_100",Buy500:"buy_500",Buy1000:"buy_1000",Buy1500:"buy_1500",Buy5000:"buy_5000",Buy10000:"buy_10000",Buy25000:"buy_25000",CloseCard:"menu_close",OpenCard:"menu_open",PreviewEmote:"emote_preview",WatchAd:"watch_ad",WatchAnotherAd:"watch_another_ad",CheeringInRoom:"cheering_in_room"},l={100:o.Buy100,500:o.Buy500,1e3:o.Buy1000,1500:o.Buy1500,5e3:o.Buy5000,1e4:o.Buy10000,25e3:o.Buy25000};(i||(i={})).ShowAdButton="show_ad_button"},"/UH7":function(e,t,n){"use strict";function i(e){if(0===e.openedIDs.length)return 0;for(var t=0,n=0,i=e.openedIDs;n<i.length;n++){var a=i[n],r=e.byID[a];r.hidden||(t+=r.collapsed?m:h)}return t}function a(e){var t=e.openedIDs.slice(),n=t.pop();return n&&e.focusedID===n&&t.length>0&&(t.pop(),t.push(n)),u(e,function(e){return e.openedIDs},function(){return t})}function r(e,t){var n=e.orderedIDs.filter(function(t){return!e.openedIDs.includes(t)});return n.length>0?s(e,n[0],t):e}function s(e,t,n){var r=n-i(e),s=d.__assign({},e);return s.openedIDs.includes(t)||(r<h&&(s=a(s)),s=u(s,function(e){return e.openedIDs},function(e){return e.push(t),e})),s}function o(e,t,n){if(!e.byID[t])return e;var r=u(e,function(e){return e.byID},function(e){return e[t].collapsed=!1,e});r.focusedID=t;return i(e)>n&&(r=a(r)),r}var l=n("2KeS"),c=n("6sO2"),d=n("TToO"),u=n("LIeg"),p=n("uXDg"),m=234,h=310,g=n("5k1t");t.b=function(e,t){return e.whispers?e.whispers.display.byID[t]:null},t.a=function(e,t){return e.whispers.notifications.byThreadID[t]||[]};var f=Object(l.c)({display:function(e,t){switch(void 0===e&&(e={byID:{},orderedIDs:[],openedIDs:[],focusedID:""}),t.type){case p.f:var n=(c=d.__assign({},e)).byID[t.data.threadID],l=c.openedIDs.includes(t.data.threadID);return n||(c=u(c,function(e){return e.orderedIDs},function(e){return e.push(t.data.threadID),e}),c=u(c,function(e){return e.byID},function(e){return e[t.data.threadID]=t.data,e})),c.openedIDs.includes(t.data.threadID)&&!c.byID[t.data.threadID].hidden||(c.byID[t.data.threadID].hidden=t.data.hidden),t.data.ignoreCollapseIfOpen||t.data.collapsed||(c.focusedID=t.data.threadID),c=s(c,t.data.threadID,t.contentWidth),(!l||l&&!t.data.ignoreCollapseIfOpen)&&(t.data.collapsed||(c=o(c,t.data.threadID,t.contentWidth))),c;case p.b:if(!e.byID[t.threadID])return e;var c=u(e,function(e){return e.byID},function(e){return delete e[t.threadID],e});return c=u(c,function(e){return e.orderedIDs},function(e){return e.filter(function(e){return e!==t.threadID})}),c=u(c,function(e){return e.openedIDs},function(e){return e.filter(function(e){return e!==t.threadID})}),e.focusedID===t.threadID&&(c.focusedID=c.openedIDs[0]),r(c,t.contentWidth);case p.c:return e.byID[t.threadID]?(e.focusedID===t.threadID&&(e.focusedID=""),u(e,function(e){return e.byID},function(e){return e[t.threadID].collapsed=!0,e})):e;case p.d:return o(e,t.threadID,t.contentWidth);case p.e:return u(e,function(e){return e.focusedID},function(){return t.threadID});case p.g:return u(e,function(e){return e.focusedID},function(e){return e===t.threadID?"":e});case p.a:var m=i(e);if(m>t.contentWidth){if(e.openedIDs.length<=1)return e;for(var g=d.__assign({},e);m>t.contentWidth&&g.openedIDs.length>1;)m=i(g=a(g));return g}if(t.contentWidth-m>=h){var f=Math.floor((t.contentWidth-m)/h),b=Math.min(f,e.orderedIDs.length-e.openedIDs.length);if(0===b)return e;g=d.__assign({},e);for(var v=0;v<b;v++)if((g=r(g,t.contentWidth)).openedIDs.length>1)for(var k=g.openedIDs,y=k.length,_=0,C=g.orderedIDs;_<C.length;_++){var S=C[_];if(k[y-1]===S){var E=k.splice(y-2,1);k.push(E[0]);break}if(k[y-2]===S)break}return g}return e;default:return e}},notifications:function(e,t){switch(void 0===e&&(e={byThreadID:{}}),t.type){case g.a:return e.byThreadID[t.threadID]?u(e,function(e){return e.byThreadID[t.threadID]},function(e){return[{threadID:t.threadID,afterMessageID:t.afterMessageID,content:t.content}].concat(e)}):u(e,function(e){return e.byThreadID},function(e){return d.__assign((n={},n[t.threadID]=[{threadID:t.threadID,afterMessageID:t.afterMessageID,content:t.content}],n),e);var n});default:return e}}});c.n.store.registerReducer("whispers",f)},"/eFD":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Chat_ChannelData"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"channel"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"chatSettings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"blockLinks"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"rules"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"chatDelayMs"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isModerator"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:178}};n.loc.source={body:"query Chat_ChannelData($channelLogin: String!) {\nchannel: user(login: $channelLogin) {\nid\nlogin\ndisplayName\nchatSettings {\nblockLinks\nrules\nchatDelayMs\n}\nself {\nisModerator\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"0ImK":function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"embeddedEmote"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"EmbeddedEmote"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"emoteID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"from"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"to"},arguments:[],directives:[]}]}}],loc:{start:0,end:65}};n.loc.source={body:"fragment embeddedEmote on EmbeddedEmote {\nemoteID\nsetID\nfrom\nto\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"0Yyt":function(e,t){},"11M/":function(e,t,n){"use strict";function i(e){return e.currentUserID!==e.channelID||!Object(_e.a)()}function a(e,t,n,i,a,r,s){return void 0===s&&(s=!1),d.__assign({},Object(Ve.a)(t,n,i,a,r,s),{type:e,id:n.id||Object(Be.a)(n.username)})}function r(e,t,n,i){return{type:e,id:Object(Be.a)(t+"-mod"),userLogin:t,reason:n,duration:i}}function s(e,t,n,i,a,r,s,o){var l=r&&s?Object(Ve.a)(r,s,x.a,!1,o):function(e){return{user:{userDisplayName:e,userLogin:e,userID:null,userType:Ae.a.User,color:void 0,isIntl:!1}}}(t);return d.__assign({},l,{type:De.a.Resubscription,id:Object(Be.a)(t+"-sub"),channel:e.slice(1),isPrime:n,months:i,tier:a})}function o(){return{raid_error_self:Object(u.d)("You cannot raid your own channel.","RaidErrorSelfMessage"),raid_error_forbidden:Object(u.d)("You cannot raid this channel.","RaidErrorAlreadyRaidingMessage"),raid_error_already_raiding:Object(u.d)("You already have a raid in progress.","RaidErrorForbiddenMessage"),raid_error_too_many_viewers_to_raid:Object(u.d)("Sorry, raids can only support up to 20,000 viewers right now.","RaidErrorTooManyViewersMessage"),raid_error_unexpected:Object(u.d)("There was a problem starting the raid. Please try again in a minute.","RaidErrorUnexpectedMessage"),unraid_error_unexpected:Object(u.d)("There was a problem stopping the raid. Please try again in a minute.","UnraidErrorUnexpectedMessage"),unraid_error_no_active_raid:Object(u.d)("You do not have an active raid.","UnraidErrorNoActiveRaidMessage"),raid_notice_restricted_chat:Object(u.d)("This channel has follower or subscriber only chat.","RaidNoticeRestrictedChatMessage"),raid_notice_mature:Object(u.d)("This channel is intended for mature audiences.","RaidNoticeMatureMessage"),raid_notice_owner:Object(u.d)("This channel has started a raid, type {unraidCommand} if you want to cancel.",{unraidCommand:"/unraid"},"RaidNoticeOwnerMessage")}}function l(e){switch(e){case 1:return Object(u.d)("Cheer now to be #1!","Bits--PinnedCheerV2");case 2:return Object(u.d)("Cheer to take #2!","Bits--PinnedCheerV2");case 3:return Object(u.d)("Cheer to take #3!","Bits--PinnedCheerV2");default:return Object(u.d)("...","Bits--PinnedCheerV2")}}var c=n("R9op"),d=n("TToO"),u=n("6sO2"),p=n("ass3");u.n.store.registerReducer("viewerCard",function(e,t){switch(void 0===e&&(e={viewerCardOptions:null}),t.type){case p.a:return d.__assign({},e,{viewerCardOptions:null});case p.b:return t.viewerCardOptions?d.__assign({},e,{viewerCardOptions:d.__assign({},t.viewerCardOptions)}):e;default:return e}});var m,h=n("RH2O"),g=n("Aj/L"),f=n("U7vG"),b=n("7vx8"),v=n("3zLD"),k=n("2KeS"),y=n("NXs7"),_=n("QKs+"),C=n("Ldv2"),S=n("NikC"),E=n("ZVME"),N=n("0nzt"),w=n("1F7R"),T=n("J4ib"),D=n("Y5T0");!function(e){e.Recent="RECENT",e.Top="TOP"}(m||(m={}));var I,O,M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.unpinRecentCheer=function(){return{deferred:new Promise(function(e){return d.__awaiter(t,void 0,void 0,function(){return d.__generator(this,function(t){switch(t.label){case 0:return[4,this.props.dismissPinnedCheer({variables:{input:{targetID:this.props.channelID,type:m.Recent}}})];case 1:return t.sent(),e({notice:Object(T.d)("Recent cheer successfully removed","BitsCommandHandler")}),[2]}})})})}},t.resetTopCheer=function(){return{deferred:new Promise(function(e){return d.__awaiter(t,void 0,void 0,function(){return d.__generator(this,function(t){switch(t.label){case 0:return[4,this.props.dismissPinnedCheer({variables:{input:{targetID:this.props.channelID,type:m.Top}}})];case 1:return t.sent(),e({notice:Object(T.d)("Top cheer successfully removed","BitsCommandHandler")}),[2]}})})})}},t}return d.__extends(t,e),t.prototype.render=function(){return f.createElement("span",{style:{display:"none"}},f.createElement(w.a,{command:"unpin",handler:this.unpinRecentCheer}),f.createElement(w.a,{command:"reset",handler:this.resetTopCheer}))},t=d.__decorate([Object(b.a)(D,{name:"dismissPinnedCheer"})],t)}(f.Component),x=n("iydZ"),R=n("bkpq"),L=n("uLsu"),U=n("+WrY"),F=n("HW6M"),j=n("RweG"),B=n("aMxy"),A=n("oIkB"),P=n("HZww"),V=n("vH/s"),W=n("iMOk"),H=n("Odds"),G=(n("y0i/"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={formInputValue:"",sharing:!1},t.hasUnmounted=!1,t.handleShareClick=function(){return d.__awaiter(t,void 0,void 0,function(){return d.__generator(this,function(e){switch(e.label){case 0:this.setState({sharing:!0}),e.label=1;case 1:return e.trys.push([1,,3,4]),[4,this.props.onShare(this.state.formInputValue)];case 2:return e.sent(),[3,4];case 3:return this.hasUnmounted||this.setState({sharing:!1}),[7];case 4:return[2]}})})},t.onInputChange=function(e){t.setState({formInputValue:e.currentTarget.value})},t}return d.__extends(t,e),t.prototype.componentDidMount=function(){this.hasUnmounted=!1},t.prototype.componentWillUnmount=function(){this.hasUnmounted=!0},t.prototype.render=function(){var e=F("share-input",{"share-input--hidden":this.props.hide}),t=this.state.formInputValue.length>255,n=t?"-"+(this.state.formInputValue.length-255):Object(u.d)("Share","ChatResubNotification"),i=Object(u.d)("Close","ChatResubNotification"),a=Object(u.d)("Add a message to the streamer","ChatResubNotification"),r=this.state.sharing?H.y.Loading:H.y.Default;return f.createElement(H._1,{className:e,padding:1,attachTop:!0,attachLeft:!0,attachRight:!0,position:H._8.Absolute},f.createElement(H._24,{className:"share-input__container",position:H._8.Relative,border:!0,background:H.m.Base,padding:1},f.createElement(H._1,{position:H._8.Absolute,attachTop:!0,attachRight:!0},f.createElement(H.v,{ariaLabel:i,onClick:this.props.onClose,type:H.w.Secondary,icon:H._15.Close,"data-a-target":"resub-notification-close-form-btn","data-test-selector":"share-input__close-form-btn"})),f.createElement(H._1,{textAlign:H._35.Center,padding:{top:1,bottom:2}},this.props.children),f.createElement(H._1,{display:H.M.Flex,flexWrap:H.P.NoWrap},f.createElement(H._1,{fullWidth:!0},f.createElement(H.X,{autoFocus:!0,type:H.Y.Text,value:this.state.formInputValue,onChange:this.onInputChange,placeholder:a,"data-a-target":"resub-notification-share-message-input","data-test-selector":"share-input__share-message-input"})),f.createElement(H.u,{disabled:t,onClick:this.handleShareClick,"data-a-target":"resub-notification-send-msg-btn","data-test-selector":"share-input__send-msg-btn",state:r},n))))},t}(f.Component)),q=(n("54rb"),function(e){var t=Object(u.d)("Share","Chat--SharePrompt"),n=Object(u.d)("Close","Chat--SharePrompt"),i=F("chat-share-prompt",{"chat-share-prompt--hidden":e.hide||!e.children});return f.createElement(H._1,{position:H._8.Absolute,fullWidth:!0,className:i,padding:{y:.5,left:.5}},f.createElement(H._1,{display:H.M.Flex,padding:1,justifyContent:H._0.Between,alignItems:H.c.Center,flexWrap:H.P.NoWrap},f.createElement(H._34,{"data-a-target":"resub-notification-months-subbed-text","data-test-selector":"share-prompt__text"},e.children),f.createElement(H._1,{display:H.M.Flex,flexWrap:H.P.NoWrap,alignItems:H.c.Center,flexShrink:0,padding:{left:.5}},f.createElement(H._1,{display:H.M.Inline,padding:{right:.5},flexShrink:0},f.createElement(H.u,{onClick:e.onClickShare,size:H.x.Small,"data-a-target":"resub-notification-share-notification-btn","data-test-selector":"share-prompt__share-btn"},t)),f.createElement(H._1,{flexShrink:0},f.createElement(H.v,{ariaLabel:n,onClick:e.onClickClose,type:H.w.Secondary,icon:H._15.Close,"data-a-target":"resub-notification-close-notification-btn","data-test-selector":"share-prompt__close-btn"})))))}),z=n("Tzcg"),Q=n("xZvS"),$=n("cxe8"),Y=n("QNxL"),K=(n("BTUa"),"chat_dismiss"),J="chat_share",Z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={showMessageInput:!1,sendingMessage:!1},t.dataIsReady=function(e){return e.data&&!e.data.loading&&!e.data.error},t.purchaseTokensExist=function(e){return e.data.user.self&&e.data.user.self.purchaseTokens.length>0},t.manageParentSpace=function(e){t.dataIsReady(e)&&t.purchaseTokensExist(e)?t.props.requestSpace():t.props.dismissSpace()},t.toggleContentShown=function(){t.setState(function(e){return{showMessageInput:!e.showMessageInput}})},t.dismissPurchaseToken=function(){return d.__awaiter(t,void 0,void 0,function(){var e,t;return d.__generator(this,function(n){switch(n.label){case 0:if(this.state.sendingMessage||!this.props.data.user.self||!this.props.data.user.self.purchaseTokens)return[2];this.setState({sendingMessage:!0}),n.label=1;case 1:return n.trys.push([1,,3,4]),e=this.props.data.user.self.purchaseTokens[0],t=function(e){return e.user.self&&(e.user.self.purchaseTokens=e.user.self.purchaseTokens.slice(1)),e},Object(A.d)($,{channelLogin:this.props.channelLogin},t),u.m.track(V.SpadeEventType.FuelSocialShare,{channel_id:this.props.data.user.id,user_id:this.props.currentUserID,asin:e.asin,item_name:e.title,context:K,payout_enabled:this.props.data.user.settings.isCommerceRevShareEnabled}),[4,this.props.dismissPurchaseToken(Object(A.a)({token:e.id,channelID:this.props.data.user.id}))];case 2:return n.sent(),[3,4];case 3:return this.setState({sendingMessage:!1}),[7];case 4:return[2]}})})},t.sharePurchase=function(e){return d.__awaiter(t,void 0,void 0,function(){var t,n;return d.__generator(this,function(i){switch(i.label){case 0:if(this.state.sendingMessage||!this.props.data.user.self||!this.props.data.user.self.purchaseTokens)return[2];this.setState({sendingMessage:!0}),i.label=1;case 1:return i.trys.push([1,,3,4]),t=this.props.data.user.self.purchaseTokens[0],[4,this.props.sharePurchaseTokenInChat(Object(A.a)({token:t.id,channelID:this.props.data.user.id,message:e}))];case 2:return i.sent(),u.m.track(V.SpadeEventType.FuelSocialShare,{channel_id:this.props.data.user.id,user_id:this.props.currentUserID,asin:t.asin,item_name:t.title,context:J,context_details:e,payout_enabled:this.props.data.user.settings.isCommerceRevShareEnabled}),n=function(e){return e.user.self&&(e.user.self.purchaseTokens=e.user.self.purchaseTokens.slice(1)),e},Object(A.d)($,{channelLogin:this.props.channelLogin},n),[3,4];case 3:return this.setState({sendingMessage:!1}),[7];case 4:return[2]}})})},t}return d.__extends(t,e),t.prototype.componentWillMount=function(){this.manageParentSpace(this.props)},t.prototype.componentDidUpdate=function(){this.manageParentSpace(this.props)},t.prototype.componentWillReceiveProps=function(e){if(this.dataIsReady(e)){var t=e.pubsub.messages.userCommerceUpdateEvent,n=this.props.pubsub.messages.userCommerceUpdateEvent,i=!n&&t,a=n&&t&&n.time!==t.time;(i||a)&&this.props.data&&this.props.data.refetch()}},t.prototype.render=function(){return this.dataIsReady(this.props)&&this.purchaseTokensExist(this.props)&&this.props.data.user.self?this.renderPurchaseToken(this.props.data.user.self.purchaseTokens[0]):null},t.prototype.renderPurchaseToken=function(e){var t;t=this.props.data.user.settings.isCommerceRevShareEnabled?Object(u.d)("You bought {product} and supported {channelName}!",{product:f.createElement("strong",null,e.title),channelName:f.createElement("strong",null,this.props.channelDisplayName)},"ShareToChat"):Object(u.d)("You bought {product} while watching {channelName}!",{product:f.createElement("strong",null,e.title),channelName:f.createElement("strong",null,this.props.channelDisplayName)},"ShareToChat");var n,i=e.inGameContents.map(this.renderLootInGameContent),a=e.badges.map(this.renderLootBadge),r=e.emoteSets.map(this.renderLootEmoteSet),s=e.bits.map(this.renderLootBits,this);return(i.length||a.length||r.length||s.length)&&(n=f.createElement(H._1,{"data-test-selector":"share-purchase__loot",padding:{bottom:1},display:H.M.Flex,justifyContent:H._0.Center},i,a,r,s),t=Object(u.d)("You bought {product} and opened a Twitch Crate! Let {channelName} know you shared the love.",{product:f.createElement("strong",null,e.title),channelName:f.createElement("strong",null,this.props.channelDisplayName)},"ShareToChat")),f.createElement(H._1,{className:"chat-resub-notification",padding:0,attachTop:!0,attachLeft:!0,attachRight:!0,position:H._8.Absolute},f.createElement(q,{hide:this.state.showMessageInput,onClickShare:this.toggleContentShown,onClickClose:this.dismissPurchaseToken},t),f.createElement(G,{hide:!this.state.showMessageInput,onShare:this.sharePurchase,onClose:this.toggleContentShown},f.createElement(H._1,{padding:{bottom:1}},f.createElement("figure",{height:40,width:40},f.createElement("img",{src:e.imageThumbnail}))),n,f.createElement(H._34,null,Object(u.d)("Score! Give a shout out to {channelName} in Chat about all your sweet loot!",{channelName:f.createElement("strong",null,this.props.channelDisplayName)},"ShareToChat"))))},t.prototype.renderLootInGameContent=function(e){return f.createElement(H._1,{key:e.id,margin:{top:.5,right:1},"data-test-selector":"share-purchase__igc"},f.createElement("img",{className:"share-to-chat__loot",src:e.imageURL}))},t.prototype.renderLootEmoteSet=function(e){return Object(z.b)(e.emoteSet.emotes).map(function(e){return f.createElement(H._1,{key:e.id,margin:{top:.5,right:1},"data-test-selector":"share-purchase__emoticon"},f.createElement("img",{className:"share-to-chat__loot",srcSet:e.srcSet,alt:e.displayName}))})},t.prototype.renderLootBadge=function(e){return f.createElement(H._1,{key:e.id,margin:{top:.5,right:1},"data-test-selector":"share-purchase__badge"},f.createElement("img",{className:"share-to-chat__loot",src:e.badge.image2x}))},t.prototype.renderLootBits=function(e){if(this.props.bitsConfig)return f.createElement(H._1,{key:e.id,margin:{top:.5,right:1},"data-test-selector":"share-purchase__bits"},f.createElement(W.a,{count:e.quantity,bitsConfig:this.props.bitsConfig,withImage:!0}))},t=d.__decorate([Object(b.a)($,{name:"data",options:function(e){return{variables:{channelLogin:e.channelLogin}}},skip:function(e){return!e.channelLogin}}),Object(j.a)([{topic:function(e){return Object(P.q)(e.currentUserID)},mapMessageTypesToProps:(I={},I[B.PubsubMessageType.ChatNotification]="userCommerceUpdateEvent",I)}])],t)}(f.Component),X=Object(b.a)(Q,{name:"dismissPurchaseToken"})(Object(b.a)(Y,{name:"sharePurchaseTokenInChat"})(Z)),ee=Object(h.b)(function(e){return{currentUserID:e.session.user&&""+e.session.user.id||""}})(X),te=(n("e9ZN"),function(e){var t=F("rare-emote__face",{"rare-emote__face--animate":!!e.animate}),n=F("rare-emote__neck",{"rare-emote__neck--animate":!!e.animate});return f.createElement(H._1,{overflow:H._4.Hidden,className:"rare-emote"},f.createElement(H.V,{zIndex:H._51.Above,position:H._8.Relative},f.createElement("img",{className:t,src:"https://static-cdn.jtvnw.net/emoticons/v1/"+e.emoteID+"/2.0"})),f.createElement(H._1,{position:H._8.Relative,zIndex:H._51.Default,className:n},f.createElement(H._14,{width:28,height:28,asset:H._15.Neck})))}),ne=3,ie=n("nEoF"),ae=n("S20p"),re=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={resubDismissed:!1,showMessageInput:!1,sendingMessage:!1},t.randomEmoteId=t.getRandomEmoteId(),t.dataIsReady=function(e){return e.data&&!e.data.loading&&!e.data.error},t.resubExists=function(e,t){return e.data.user.self&&e.data.user.self.resubNotification&&!t.resubDismissed},t.manageParentSpace=function(){t.dataIsReady(t.props)&&t.resubExists(t.props,t.state)?t.props.requestSpace():t.props.dismissSpace()},t.toggleContentShown=function(){t.setState(function(e){return{showMessageInput:!e.showMessageInput}})},t.dismissResubNotification=function(){t.setState({resubDismissed:!0})},t.shareResub=function(e){return d.__awaiter(t,void 0,void 0,function(){var t,n;return d.__generator(this,function(i){switch(i.label){case 0:if(this.state.sendingMessage||!this.props.data.user.self||!this.props.data.user.self.resubNotification)return[2];this.setState({sendingMessage:!0}),i.label=1;case 1:return i.trys.push([1,4,5,6]),this.props.authToken?[4,function(e,t,n,i){return d.__awaiter(this,void 0,void 0,function(){var a,r,s,o,l;return d.__generator(this,function(c){switch(c.label){case 0:a="https://api.twitch.tv/api/channels/"+e+"/use_chat_notification_token",r=1,c.label=1;case 1:if(!(r<=ne))return[3,7];c.label=2;case 2:return c.trys.push([2,5,,6]),[4,fetch(a,{body:JSON.stringify({token_id:t,custom_message:n}),method:"POST",headers:{"Client-ID":u.n.config.legacyClientID,Accept:"application/json; charset=UTF-8","content-type":"application/json; charset=UTF-8",Authorization:"OAuth "+i}})];case 3:return s=c.sent(),[4,s.json()];case 4:return o=c.sent(),[2,o];case 5:if(l=c.sent(),r===ne)throw l;return[3,6];case 6:return++r,[3,1];case 7:return[2]}})})}(this.props.channelLogin,this.props.data.user.self.resubNotification.token,e,this.props.authToken)]:[3,3];case 2:i.sent(),t=function(e){return e.user.self&&(e.user.self.resubNotification=null),e},Object(A.d)(ae,{channelLogin:this.props.channelLogin},t),this.dismissResubNotification(),i.label=3;case 3:return[3,6];case 4:return n=i.sent(),u.i.error(n,"Failed to post resub message"),[3,6];case 5:return this.setState({sendingMessage:!1}),[7];case 6:return[2]}})})},t}return d.__extends(t,e),t.prototype.componentWillMount=function(){this.manageParentSpace()},t.prototype.componentDidUpdate=function(){this.manageParentSpace()},t.prototype.componentWillReceiveProps=function(e){this.dataIsReady(e)&&e.data.user.self&&e.data.user.self.resubNotification&&!this.randomEmoteId&&(this.randomEmoteId=this.getRandomEmoteId())},t.prototype.render=function(){return this.dataIsReady(this.props)&&this.resubExists(this.props,this.state)&&this.props.data.user.self&&this.props.data.user.self.resubNotification?this.renderResubToken(this.props.data.user.self.resubNotification):null},t.prototype.renderResubToken=function(e){return f.createElement(H._1,{className:"chat-resub-notification",padding:0,attachTop:!0,attachLeft:!0,attachRight:!0,position:H._8.Absolute},f.createElement(q,{hide:this.state.showMessageInput,onClickShare:this.toggleContentShown,onClickClose:this.dismissResubNotification},Object(u.d)("It's your {monthsSubbed, number} month anniversary!",{monthsSubbed:e.months},"ChatResubNotification")),f.createElement(G,{hide:!this.state.showMessageInput,onShare:this.shareResub,onClose:this.toggleContentShown},f.createElement(te,{emoteID:this.randomEmoteId,animate:this.state.showMessageInput}),f.createElement(H._34,null,Object(u.d)("Hooray! Let {channelName} know it's your {monthsSubbed, number} month anniversary.",{channelName:f.createElement("strong",null,this.props.channelDisplayName),monthsSubbed:e.months},"ChatResubNotification"))))},t.prototype.getRandomEmoteId=function(){var e=Math.floor(Math.random()*ie.a.length);return ie.a[e]},t=d.__decorate([Object(b.a)(ae,{options:function(e){return{variables:{channelLogin:e.channelLogin}}},skip:function(e){return!e.channelLogin}})],t)}(f.Component);n("NZkJ");!function(e){e[e.Resub=1]="Resub",e[e.Purchase=2]="Purchase"}(O||(O={}));var se,oe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={requestedSpaces:new Set},t.addSpace=function(e){t.state.requestedSpaces.has(e)||t.setState(function(t){var n=new Set(t.requestedSpaces);return n.add(e),{requestedSpaces:n}})},t.removeSpace=function(e){t.state.requestedSpaces.has(e)&&t.setState(function(t){var n=new Set(t.requestedSpaces);return n.delete(e),{requestedSpaces:n}})},t.requestResubSpace=function(){t.addSpace(O.Resub)},t.dismissResubSpace=function(){t.removeSpace(O.Resub)},t.requestPurchaseSpace=function(){t.addSpace(O.Purchase)},t.dismissPurchaseSpace=function(){t.removeSpace(O.Purchase)},t}return d.__extends(t,e),t.prototype.render=function(){var e=null;this.state.requestedSpaces.size&&(e=Array.from(this.state.requestedSpaces.values()).sort()[0]);var t=F({"share-to-chat__space--hidden":e!==O.Resub}),n=F({"share-to-chat__space--hidden":e!==O.Purchase});return f.createElement(H._1,null,f.createElement(H._1,{className:t},f.createElement(re,{authToken:this.props.authToken,channelDisplayName:this.props.channelDisplayName,channelLogin:this.props.channelLogin,requestSpace:this.requestResubSpace,dismissSpace:this.dismissResubSpace})),f.createElement(H._1,{className:n},f.createElement(ee,{channelDisplayName:this.props.channelDisplayName,channelLogin:this.props.channelLogin,bitsConfig:this.props.bitsConfig,requestSpace:this.requestPurchaseSpace,dismissSpace:this.dismissPurchaseSpace})))},t}(f.Component),le=n("vh75"),ce=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={show:!0},t.dismiss=function(){t.setState({show:!1})},t}return d.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){e.hostedChannelDisplayName!==this.props.hostedChannelDisplayName&&this.setState({show:!0})},t.prototype.render=function(){return this.state.show?f.createElement(H._24,{attachTop:!0,attachLeft:!0,attachRight:!0,background:H.m.AccentAlt2,color:H.I.Overlay,position:H._8.Absolute,className:"hosting-notification",padding:{y:.5,left:.5},"data-a-target":"hosting-notification-container"},f.createElement(H._1,{display:H.M.Flex,padding:1,justifyContent:H._0.Between,alignItems:H.c.Center,flexWrap:H.P.NoWrap},f.createElement(H._1,{display:H.M.Flex,flexWrap:H.P.NoWrap},f.createElement(H._1,{margin:{right:.5},flexShrink:0},f.createElement(H._34,null,Object(u.d)("Hosting","ChatHostingNotification"))),f.createElement(H._1,{ellipsis:!0,flexShrink:1,margin:{right:.5}},f.createElement(H._34,{type:H._39.Strong,"data-test-selector":"hosting-notification__text","data-a-target":"hosting-notification-channel-name"},""+this.props.hostedChannelDisplayName))),f.createElement(H._1,{display:H.M.Flex,flexWrap:H.P.NoWrap,flexShrink:0},f.createElement(H._1,{display:H.M.Inline,padding:{right:.5}},f.createElement(H.u,{linkTo:{pathname:"/"+this.props.hostedChannelLogin,state:{content:"host_channel",medium:"chat_bar_notification"}},size:H.x.Small,"data-a-target":"hosting-notification-gotochannel-button"},Object(u.d)("Go to Channel","ChatHostingNotification"))),f.createElement(H.v,{onClick:this.dismiss,ariaLabel:Object(u.d)("Close","HostingNotification"),size:H.x.Small,overlay:!0,icon:H._15.Close,"data-a-target":"hosting-notification-close-button"})))):null},t}(f.Component),de=n("F8kA"),ue=(n("W266"),"nativeBroadcastNotifDismissed"),pe=[{title:"English",login:"esamarathon"},{title:"Français",login:"LeFrenchRestream"},{title:"Deutsch",login:"GermenchRestream"},{title:"Русский",login:"SpeedrunsRussia"}],me=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isClosed:!1},t.getChannelLinks=function(){var e=T.b.get("native_broadcast_blacklist",[]);return pe.filter(function(t){return e.indexOf(t.login.toLowerCase())<0}).filter(function(e){return e.login.toLowerCase()!==t.props.channelLogin.toLowerCase()}).map(function(e){var t=e.title+" ("+e.login+")";return f.createElement("li",{key:e.login},f.createElement(de.a,{className:"native-broadcast-notification__link",to:"/"+e.login.toLowerCase()},t))})},t.onDismiss=function(){t.setState({isClosed:!0});var e=d.__assign({},u.k.get(ue,{}),(n={},n[t.props.channelLogin.toLowerCase()]=Date.now(),n));u.k.set(ue,e);var n},t.onExpire=function(){t.setState({isClosed:!0})},t}return d.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){e.channelLogin.toLowerCase()!==this.props.channelLogin.toLowerCase()&&this.setState({isClosed:!1})},t.prototype.render=function(){if(this.state.isClosed)return null;if(!this.isEventChannel(this.props.channelLogin))return null;if(this.hasDismissedForChannel(this.props.channelLogin))return null;var e=Date.now();if(e<15191352e5||e>=15195132e5)return null;var t=this.getChannelLinks();return t.length?f.createElement(H._24,{attachLeft:!0,attachRight:!0,attachTop:!0,background:H.m.AccentAlt2,color:H.I.Overlay,padding:1,position:H._8.Absolute},f.createElement(H._1,{margin:{bottom:1}},f.createElement(H._34,{type:H._39.H4},Object(u.d)("ESA Winter 2018","NativeBroadcastNotification"))),f.createElement(H._1,{margin:{bottom:1}},f.createElement(H._34,{color:H.I.OverlayAlt},Object(u.d)("Want to watch ESA in you local language? Try one of these international broadcasts!","NativeBroadcastNotification"))),f.createElement("ul",null,t),f.createElement(H._1,{attachRight:!0,attachTop:!0,margin:1,position:H._8.Absolute},f.createElement(H.v,{ariaLabel:Object(u.d)("Close","NativeBroadcastNotification"),icon:H._15.Close,onClick:this.onDismiss,overlay:!0,size:H.x.Small,"data-a-target":"native-broadcast-notification-close-button"})),f.createElement(H._1,{margin:{top:.5}},f.createElement(H._11,{countdown:30,onCountdownEnd:this.onExpire,size:H._12.ExtraSmall}))):null},t.prototype.isEventChannel=function(e){return pe.map(function(e){return e.login.toLowerCase()}).includes(e.toLowerCase())},t.prototype.hasDismissedForChannel=function(e){var t=u.k.get(ue,{})[e.toLowerCase()];return!!t&&t>=15191352e5},t}(f.Component),he=n("+Znq"),ge=n("9u8h"),fe=(n("q4rf"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={requestFailed:!1},t.logger=u.n.logger.withCategory("orbis"),t.onClickInteraction=function(e){t.props.sendMessage(":act "+e.currentTarget.getAttribute("data-action")),t.toggleBalloonRef.toggleBalloon()},t.setToggleBalloonRef=function(e){return t.toggleBalloonRef=e},t}return d.__extends(t,e),t.prototype.componentDidMount=function(){this.props.isLoggedIn&&this.props.firstPageLoaded&&this.getChatProperties()},t.prototype.componentWillReceiveProps=function(e){this.props.isLoggedIn&&!this.props.firstPageLoaded&&e.firstPageLoaded&&this.getChatProperties()},t.prototype.render=function(){return this.props.isLoggedIn&&!this.state.requestFailed&&this.hasInteractions()?f.createElement(H._24,{className:"orbis",display:H.M.Flex,flexDirection:H.O.Column,alignItems:H.c.Stretch,background:H.m.Base,flexShrink:0,borderBottom:!0},f.createElement(he.a,{ref:this.setToggleBalloonRef},f.createElement("div",{className:"orbis__dropdown-container","data-test-selector":"orbis-dropdown-container"},f.createElement(H._1,{padding:{y:1,x:2},display:H.M.Flex,justifyContent:H._0.Between,flexWrap:H.P.NoWrap},f.createElement(H._1,{ellipsis:!0,padding:{right:1}},f.createElement(H._34,{type:H._39.Span},Object(u.d)("Interactions Available","Orbis"))),f.createElement(H._1,{display:H.M.Flex,justifyContent:H._0.Between,alignItems:H.c.Center,flexShrink:0},f.createElement(H._1,{className:"orbis__dropdown-icon",display:H.M.Flex,justifyContent:H._0.Between,alignItems:H.c.Center},f.createElement(H._14,{asset:H._15.AngleRight}))))),f.createElement(H.p,{offsetY:"1px",noTail:!0},f.createElement(H._1,{className:"orbis__dropdown-content",padding:1},this.renderInteractions())))):null},t.prototype.renderInteractions=function(){return this.state.chatProperties?[this.renderInteraction(this.state.chatProperties.sce_title_preset_text_1),this.renderInteraction(this.state.chatProperties.sce_title_preset_text_2),this.renderInteraction(this.state.chatProperties.sce_title_preset_text_3),this.renderInteraction(this.state.chatProperties.sce_title_preset_text_4),this.renderInteraction(this.state.chatProperties.sce_title_preset_text_5)]:null},t.prototype.renderInteraction=function(e){return e?f.createElement(H.Z,{onClick:this.onClickInteraction,key:e,"data-action":e,"data-test-selector":"orbis-interaction"},f.createElement(H.V,{padding:{y:.5,x:1}},f.createElement(H._34,{ellipsis:!0},e))):null},t.prototype.getChatProperties=function(){return d.__awaiter(this,void 0,void 0,function(){var e,t;return d.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,ge.a.get("/api/channels/"+this.props.channelLogin+"/chat_properties?on_site=1")];case 1:return(e=n.sent()).requestError?(this.logger.error(e.requestError,"Unable to fetch chat properties"),this.setState({requestFailed:!0}),[2]):e.error?(this.logger.error(new Error("Chat Properties Error"),"The API returned a non-200 response",e.error),this.setState({requestFailed:!0}),[2]):e.body?(this.setState({chatProperties:e.body}),[3,3]):(this.logger.error(new Error("Chat Properties Error"),"Body is undefined"),this.setState({requestFailed:!0}),[2]);case 2:return t=n.sent(),this.logger.error(t,"Unable to fetch chat properties"),this.setState({requestFailed:!0}),[3,3];case 3:return[2]}})})},t.prototype.hasInteractions=function(){return!!this.state.chatProperties&&!!(this.state.chatProperties.sce_title_preset_text_1||this.state.chatProperties.sce_title_preset_text_2||this.state.chatProperties.sce_title_preset_text_3||this.state.chatProperties.sce_title_preset_text_4||this.state.chatProperties.sce_title_preset_text_5)},t}(f.Component)),be=Object(h.b)(function(e){return{firstPageLoaded:e.session.firstPageLoaded,isLoggedIn:Object(g.d)(e)}})(fe),ve=n("BMQ2"),ke=n("WIs4"),ye=n("aSvS"),_e=n("rIzn"),Ce=n("J7iJ"),Se=n("KfLc"),Ee=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d.__extends(t,e),t.prototype.render=function(){return f.createElement(H._24,{background:H.m.Base,color:H.I.Alt},f.createElement(H._1,{padding:{bottom:.5,top:1,x:1}},f.createElement(H._1,{margin:{bottom:.5}},f.createElement(H._34,{bold:!0,type:H._39.H5},Object(u.d)("Introducing: New Chatter Announcements!","RitualsOnboardingSticky"))),f.createElement(H._1,{margin:{bottom:.5}},f.createElement(H._34,{type:H._39.Span},Object(u.d)("New chatter announcements are now active in your channel, making it easier to welcome new people.","RitualsOnboardingSticky")),f.createElement(H._34,null,f.createElement(de.a,{onClick:this.props.onClick,to:"/"+this.props.channelLogin+"/dashboard/settings","data-test-selector":"rituals-sticky-link"},Object(u.d)("Manage in Dashboard","RitualsOnboardingSticky"))))),f.createElement(H._24,{alignItems:H.c.Center,background:H.m.Alt2,borderBottom:!0,color:H.I.Alt2,display:H.M.Flex,padding:{x:1,y:.5}},f.createElement(H._14,{asset:H._15.Lock,height:12,width:12}),f.createElement(H._1,{display:H.M.Inline,margin:{left:.5}},f.createElement(H._34,{fontSize:H.Q.Size8,type:H._39.Span},Object(u.d)("You see this because you own this channel","RitualsOnboardingSticky")))),f.createElement(H._24,{attachRight:!0,attachTop:!0,padding:{x:.5,top:1},position:H._8.Absolute},f.createElement(H.v,{ariaLabel:Object(u.d)("Close","RitualsOnboardingSticky"),icon:H._15.Close,onClick:this.props.onDismiss,size:H.x.Small,type:H.w.Secondary,"data-test-selector":"rituals-sticky-dismiss-button"})))},t}(f.PureComponent),Ne="seenNewChatterAnnouncementSticky",we=function(e){function t(){var t=e.call(this)||this;return t.state={isDismissed:!1},t.onClick=function(){Object(Se.c)({action:ye.a.Click,channelID:t.props.channelID})},t.onDismiss=function(){u.k.set(Ne,!0),t.setState({isDismissed:!0}),Object(Se.c)({action:ye.a.Dismiss,channelID:t.props.channelID})},t.state.isDismissed=u.k.get(Ne,!1),t}return d.__extends(t,e),t.prototype.render=function(){return!this.props.data||this.props.data.loading||this.props.data.error?null:this.props.data.channel.settings.isRitualsEnabled?this.state.isDismissed?null:f.createElement(Ee,{channelLogin:this.props.channelLogin,onClick:this.onClick,onDismiss:this.onDismiss}):null},t}(f.Component),Te=Object(v.compose)(Object(h.b)(function(e){var t=Object(g.c)(e);return{currentUserID:t&&t.id}},null),Object(b.a)(Ce,{options:function(e){return{variables:{id:e.channelID}}},skip:i}),Object(ke.a)(function(e){return{query:Ce,variables:{id:e.channelID},topic:Object(P.l)(e.channelID),type:B.PubsubMessageType.UpdatedChannelChatProperty,mutator:function(e,t){return t.channel.settings.isRitualsEnabled=e.data.is_rituals_enabled,t},skip:i(e)}}))(we),De=n("qkCi"),Ie=200,Oe=function(){return function(e){var t=this;this.resetWithChannelID=function(e){t.activeChatterIDs=new Set,t.activeChatters={},t.channelID=e,t.currentUserID=null,t.isDirty=!0},this.getActiveChatters=function(){return t.isDirty=!1,Object.keys(t.activeChatters).map(function(e){return t.activeChatters[e]})},this.setCurrentUserID=function(e){t.currentUserID=e,t.activeChatterIDs.has(e)&&(t.isDirty=!0,t.removeActiveChatter(e))},this.consumeChatEvent=function(e){switch(e.type){case De.a.Action:case De.a.Post:case De.a.PostWithMention:case De.a.Resubscription:case De.a.Subscription:var n=e;t.handleActiveChatter(n.user);break;case De.a.Ritual:var i=e.message;t.handleActiveChatter(i.user)}},this.handleActiveChatter=function(e){e.userID&&e.userID!==t.channelID&&e.userID!==t.currentUserID&&(t.activeChatterIDs.has(e.userID)?(t.activeChatterIDs.delete(e.userID),t.addActiveChatter(e)):(t.addActiveChatter(e),t.trimActiveChatters(),t.isDirty=!0))},this.addActiveChatter=function(e){e.userID&&(t.activeChatterIDs.add(e.userID),t.activeChatters[e.userID]=e)},this.removeActiveChatter=function(e){t.activeChatterIDs.delete(e),delete t.activeChatters[e]},this.trimActiveChatters=function(){if(!(t.activeChatterIDs.size<=Ie))for(var e=t.activeChatterIDs.size-Ie,n=t.activeChatterIDs.values(),i=0;i<e;i++){var a=n.next().value;t.removeActiveChatter(a)}},this.resetWithChannelID(e)}}(),Me=n("mwvJ"),xe=1e3,Re=1e3,Le=250,Ue=0,Fe=200,je=function(){function e(e,t){void 0===e&&(e=Le),void 0===t&&(t=function(){});var n=this;this.maxSize=e,this.onBufferUpdate=t,this.setDelay=function(e){n.delayDuration=e},this.setCurrentUserLogin=function(e){n.currentUserLogin=e},this.consumeChatEvent=function(e){var t=!1;switch(e.type){case De.a.Action:case De.a.Post:case De.a.PostWithMention:n.uncountedMessages++;var i=e;if(i.user.userID&&n.blockedUsers.has(i.user.userID))return;var a=i.messageParts[0];if(a&&a.type===Me.a.Text&&a.content.startsWith(":act "))return;t=!n.isOwnMessage(i);break;case De.a.Resubscription:var r=e;t=!n.isOwnMessage(r)&&void 0!==r.messageParts;break;case De.a.Ban:case De.a.Timeout:var s=e.userLogin;if(n.moderatedUsers.has(s))return;[n.buffer,n.delayedMessageBuffer.map(function(e){return e.event})].forEach(function(e){e.forEach(function(e){switch(e.type){case De.a.Post:case De.a.PostWithMention:case De.a.Action:case De.a.Resubscription:e.user&&s===e.user.userLogin&&e.messageParts&&!e.deleted&&(e.deleted=!0);break;case De.a.Ritual:s!==e.message.user.userLogin||e.message.deleted||(e.message.deleted=!0)}})}),n.moderatedUsers.add(s),setTimeout(n.unmoderateUser(s),xe);break;case De.a.Disconnected:return;case De.a.Reconnect:if(n.buffer.find(function(t){return t.id===e.id})||n.delayedMessageBuffer.find(function(t){return t.event.id===e.id}))return;break;case De.a.Clear:n.clear()}n.delayedMessageBuffer.push({event:e,time:Date.now(),shouldDelay:t})},this.unmoderateUser=function(e){return function(){n.moderatedUsers.delete(e)}},this.isOwnMessage=function(e){var t=e.user;return!(!n.currentUserLogin||!t||t.userLogin!==n.currentUserLogin)},this.currentUserLogin=null,this.delayedMessageBuffer=[],this.buffer=[],this._isDirty=!1,this.moderatedUsers=new Set,this.blockedUsers=new Set,this.delayDuration=Ue,this.throttlingDuration=Fe,this.flushInterval=setInterval(function(){return n.flushRawMessages()},this.throttlingDuration),this.uncountedMessages=0,this.chatRateMeasurements=[],this.chatRateMeasurementInterval=setInterval(function(){return n.measureChatRate()},Re),this.setBlockedUsers=this.setBlockedUsers.bind(this)}return e.prototype.shutdown=function(){this.flushInterval&&(clearInterval(this.flushInterval),clearInterval(this.chatRateMeasurementInterval))},e.prototype.setBlockedUsers=function(e){this.blockedUsers=new Set(e)},e.prototype.toArray=function(){return this.buffer=this.buffer.slice(-this.maxSize),this._isDirty=!1,this.buffer},e.prototype.clear=function(e){if(void 0===e&&(e=0),e<=0)return this.buffer=[],void(this.delayedMessageBuffer=[]);this.buffer=this.buffer.slice(-e)},e.prototype.isDeletable=function(e){return void 0!==e.deleted},e.prototype.flushRawMessages=function(){var e=this,t=[],n=Date.now();this.delayedMessageBuffer.forEach(function(i){var a=i.event,r=i.time,s=i.shouldDelay;r<=n-e.delayDuration||!s?e.isDeletable(a)&&a.deleted||(e.buffer.push(a),e._isDirty=!0,e.onBufferUpdate()):t.push({event:a,time:r,shouldDelay:s})}),this.delayedMessageBuffer=t},e.prototype.measureChatRate=function(){3===this.chatRateMeasurements.length&&this.chatRateMeasurements.shift(),this.chatRateMeasurements.push(this.uncountedMessages),this.uncountedMessages=0},Object.defineProperty(e.prototype,"isDirty",{get:function(){return this._isDirty},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this.buffer.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"moderatedUserCount",{get:function(){return this.moderatedUsers.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chatRate",{get:function(){return 0===this.chatRateMeasurements.length?0:this.chatRateMeasurements.reduce(function(e,t){return e+t})/this.chatRateMeasurements.length},enumerable:!0,configurable:!0}),e}(),Be=n("INp2"),Ae=n("6Agf"),Pe=n("aUOx"),Ve=n("l21v"),We=n("O0Qc"),He=n("YhVV"),Ge=function(){function e(e,t,n){var i=this;this.onJoinedEvent=function(e){return i.postMessage({type:De.a.Connected,id:Object(Be.a)("connected")})},this.onDisconnectedEvent=function(e){return i.postMessage(function(e){return{type:De.a.Disconnected,id:Object(Be.a)("disconnected"),reason:e}}(e.reason))},this.onReconnectingEvent=function(e){return i.postMessage({type:De.a.Reconnect,id:Object(Be.a)("reconnect")})},this.onHostingEvent=function(e){return i.postMessage(function(e){return{type:De.a.Hosting,id:Object(Be.a)("hosting"),hostedChannel:e}}(e.target))},this.onUnhostEvent=function(e){return i.postMessage(function(e){return{type:De.a.Unhost,id:Object(Be.a)("unhost-"+e)}}(e.channel))},this.onChatMessageEvent=function(e){i.postMessage(i.convertMessage(e))},this.onChatActionEvent=function(e){var t=i.bitsConfig||x.a,n=e.message.user.username===i.userLogin?i.selfEmotes:void 0,r=a(De.a.Action,e.action,e.message.user,t,i.shouldBlockLinks(e.message.user),n);i.postMessage(r)},this.onChatNoticeEvent=function(e){var t=function(e,t,n){return{type:De.a.Notice,id:Object(Be.a)("notice"),channel:e,msgid:t,message:n}}(e.channel,e.msgid,e.body);i.postMessage(t)},this.onTimeoutEvent=function(e){i.onModerationEvent(De.a.Timeout,e)},this.onBanEvent=function(e){i.onModerationEvent(De.a.Ban,e)},this.onModerationEvent=function(e,t){i.postMessage(r(e,t.userLogin,t.reason,t.duration))},this.onSubscriptionEvent=function(e){var t;switch(e.methods.plan){case"1000":t=e.methods.prime?"prime":"$4.99";break;case"2000":t="$9.99";break;case"3000":t="$24.99";break;default:t="$4.99"}i.postMessage(function(e,t,n,i,a){var r=Object(Ve.a)("",a,x.a,!1);return d.__assign({},r,{type:De.a.Subscription,id:Object(Be.a)(t+"-sub"),channel:e.slice(1),isPrime:n,userLogin:t,tier:i})}(e.channel,e.user.displayName,e.methods.prime,t,e.user))},this.onSubscriptionGiftEvent=function(e){var t;switch(e.methods.plan){case"1000":t="$4.99";break;case"2000":t="$9.99";break;case"3000":t="$24.99";break;default:t="custom"}i.postMessage(function(e,t,n,i,a){return{type:De.a.SubGift,id:Object(Be.a)(t+"-sub"),channel:e.slice(1),isPrime:n,userLogin:t,tier:i,recipient:a}}(e.channel,e.user.displayName,e.methods.prime,t,e.recipientName))},this.onBitsCharityEvent=function(e){i.postMessage(function(e,t,n,i,a,r){return{type:De.a.BitsCharity,id:Object(Be.a)("charity"),total:e,charityName:t,daysLeft:n,hoursLeft:i,hashtag:a,learnMore:r}}(e.total,e.charityName,e.daysLeft,e.hoursLeft,e.hashtag,e.learnMore))},this.onResubscriptionEvent=function(e){var t;switch(e.methods.plan){case"1000":t=e.methods.prime?"prime":"$4.99";break;case"2000":t="$9.99";break;case"3000":t="$24.99";break;default:t="$4.99"}i.postMessage(s(e.channel,e.user.displayName,e.methods.prime,e.months,t,e.body,e.user))},this.onRoomModsEvent=function(e){return i.postMessage(function(e){return{type:De.a.RoomMods,id:Object(Be.a)("roommods"),moderatorLogins:e}}(e.usernames))},this.onRoomStateEvent=function(e){return i.postMessage(function(e){return{type:De.a.RoomState,id:Object(Be.a)("roomstate"),state:e}}(e.state))},this.onSlowModeEvent=function(e){return i.postMessage(function(e,t){return{type:De.a.SlowMode,id:Object(Be.a)("slowmode"),enabled:e,length:t}}(e.enabled,e.length))},this.onEmoteOnlyModeEvent=function(e){return i.postMessage(function(e){return{type:De.a.EmoteOnlyMode,id:Object(Be.a)("emoteonlymode"),enabled:e}}(e.enabled))},this.onFollowerOnlyModeEvent=function(e){return i.postMessage(function(e,t){return{type:De.a.FollowerOnlyMode,id:Object(Be.a)("follower-only"),enabled:e,length:t}}(e.enabled,e.length))},this.onSubscriberOnlyModeEvent=function(e){return i.postMessage(function(e){return{type:De.a.SubscriberOnlyMode,id:Object(Be.a)("subscriber-only"),enabled:e}}(e.enabled))},this.onClearChatEvent=function(e){return i.postMessage({type:De.a.Clear,id:Object(Be.a)("clear")})},this.onRaidEvent=function(e){return i.postMessage(function(e,t,n){return{type:De.a.Raid,id:Object(Be.a)("raid"),channel:e,userLogin:t,params:n}}(e.channel,e.userLogin,e.params))},this.onUnraidEvent=function(e){return i.postMessage(function(e,t,n){return{type:De.a.Unraid,id:Object(Be.a)("unraid"),channel:e,userLogin:t,message:n}}(e.channel,e.userLogin,e.message))},this.onRitualEvent=function(e){i.postMessage(function(e,t){return{type:De.a.Ritual,id:Object(Be.a)(t.user.userLogin+"-"+e+"-ritual"),ritualType:e,message:t}}(e.type,i.convertMessage(e)))},this.onBadgesUpdatedEvent=function(e){return i.postMessage(function(e,t){return{type:De.a.BadgesUpdated,id:Object(Be.a)("updateBadges"),userName:e,badges:t}}(e.username,e.badges))},this.onPurchaseEvent=function(e){var t=i.bitsConfig||x.a;i.postMessage(function(e,t,n,i){return{bitsConfig:i,message:t,purchase:e,timestamp:n,id:Object(Be.a)(t.user.userLogin+"-purchase"),type:De.a.Purchase}}(e.purchase,i.convertMessage(e),e.timestamp,t))},this.onCrateEvent=function(e){i.postMessage(function(e,t){return{type:De.a.CrateGift,id:Object(Be.a)("crate"),message:e,selectedCount:t}}(i.convertMessage(e),e.selectedCount))},this.convertMessage=function(e){var t=i.bitsConfig||x.a,n=e.message.user.username===i.userLogin?i.selfEmotes:void 0;return a(De.a.Post,e.message.body,e.message.user,t,i.shouldBlockLinks(e.message.user),n)},this.logger=u.i.withCategory("chat-service"),this.logger.debug("Created"),this.userLogin=e,this.channelLogin=t,this.service=u.n.tmi,this.client=u.n.tmi.client,this.postMessage=n,this.disabled=u.n.tmi.disabled}return e.prototype.join=function(){return d.__awaiter(this,void 0,void 0,function(){return d.__generator(this,function(e){switch(e.label){case 0:return this.logger.debug("Joining channel and binding all event listeners"),[4,this.service.awaitParted()];case 1:return e.sent(),this.connectHandlers(),[4,this.service.join(this.channelLogin)];case 2:return e.sent(),[2]}})})},e.prototype.part=function(){return d.__awaiter(this,void 0,void 0,function(){return d.__generator(this,function(e){switch(e.label){case 0:return this.logger.debug("Parting channel and unbinding all event listeners"),this.client.events.removeAll(),[4,this.service.part(this.channelLogin)];case 1:return e.sent(),[2]}})})},e.prototype.sendMessage=function(e){var t=this,n=Object(We.l)(e,this.channelLogin);return n.handled?n.result&&n.result.deferred&&n.result.deferred.then(function(e){var n=e.notice;n&&t.postMessage(Object(Pe.a)(n))}):this.client.sendCommand(this.channelLogin,e).catch(function(e){u.i.warn("Failed to send message, or message timeout",e)}),n.result},e.prototype.updateEmotes=function(e){this.selfEmotes=Object(He.a)(e),this.client.updateEmoteSets(e)},e.prototype.updateChannelBadges=function(e){this.client.updateChannelBadges(this.channelLogin,e)},e.prototype.updateBitsConfig=function(e){this.bitsConfig=e},e.prototype.updateBlockLinks=function(e){this.blockLinks=e},e.prototype.connectHandlers=function(){this.client.events.joined(this.onJoinedEvent),this.client.events.disconnected(this.onDisconnectedEvent),this.client.events.reconnecting(this.onReconnectingEvent),this.client.events.chat(this.onChatMessageEvent),this.client.events.usernotice(this.onChatMessageEvent),this.client.events.notice(this.onChatNoticeEvent),this.client.events.action(this.onChatActionEvent),this.client.events.badgesupdated(this.onBadgesUpdatedEvent),this.client.events.hosting(this.onHostingEvent),this.client.events.unhost(this.onUnhostEvent),this.client.events.badgesupdated(this.onBadgesUpdatedEvent),this.client.events.purchase(this.onPurchaseEvent),this.client.events.crate(this.onCrateEvent),this.client.events.ritual(this.onRitualEvent),this.client.events.subscription(this.onSubscriptionEvent),this.client.events.resub(this.onResubscriptionEvent),this.client.events.subgift(this.onSubscriptionGiftEvent),this.client.events.timeout(this.onTimeoutEvent),this.client.events.ban(this.onBanEvent),this.client.events.clearchat(this.onClearChatEvent),this.client.events.raid(this.onRaidEvent),this.client.events.unraid(this.onUnraidEvent),this.client.events.mods(this.onRoomModsEvent),this.client.events.roomstate(this.onRoomStateEvent),this.client.events.followersonly(this.onFollowerOnlyModeEvent),this.client.events.slowmode(this.onSlowModeEvent),this.client.events.subscribers(this.onSubscriberOnlyModeEvent),this.client.events.emoteonlymode(this.onEmoteOnlyModeEvent),this.client.events.charity(this.onBitsCharityEvent)},e.prototype.shouldBlockLinks=function(e){return e.username!==this.channelLogin&&e.userType!==Ae.a.Staff&&e.userType!==Ae.a.GlobalMod&&e.userType!==Ae.a.Moderator&&this.blockLinks},e}(),qe=function(){return function(e,t,n){this.channelID=e,this.sessionUserID=t,this.unsubscribe=u.j.subscribe({topic:Object(P.h)(this.sessionUserID,this.channelID),onMessage:function(e){switch(e.data.moderation_action){case B.ModerationActions.AutoModRejected:var t=function(e,t,n,i){var a={badges:null,bits:0,color:"",displayName:"",id:"",userID:n,username:n,userType:Ae.a.User,emotes:null},r=Object(Ve.a)(t,a,x.a,!1);return{type:De.a.AutoModRejectedPrompt,id:function(e){return e+"-automod-rejected"}(e),category:i,isAutoModAction:!0,rejectedMessage:d.__assign({},r,{type:De.a.Post,id:e})}}(e.data.msg_id,e.data.args[1],e.data.args[0],e.data.args[2]);n(t);break;case B.TargetedModerationActions.AutoModMessageRejected:n({id:Object(Be.a)("automod-message-rejected"),type:De.a.AutoModMessageRejected,isTargeted:!0,isAutoModAction:!0});break;case B.TargetedModerationActions.AutoModMessageApproved:n({id:Object(Be.a)("automod-message-allowed"),type:De.a.AutoModMessageAllowed,isTargeted:!0,isAutoModAction:!0});break;case B.TargetedModerationActions.AutoModMessageDenied:n({id:Object(Be.a)("automod-message-denied"),type:De.a.AutoModMessageDenied,isTargeted:!0,isAutoModAction:!0})}}})}}(),ze=n("QFW6"),Qe=n("CSlQ"),$e=n("9fnI"),Ye=n("OAwv"),Ke=n("CIox"),Je=n("VAT8"),Ze=function(){function e(){}return e.fetchChannelsList=function(){return d.__awaiter(this,void 0,void 0,function(){var e,t;return d.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,ge.a.get("/kraken/autohost/list")];case 1:return e=n.sent(),[2,this.deserialize(e)];case 2:return t=n.sent(),u.i.error(t,"Couldn't fetch autohost list"),[2,[]];case 3:return[2]}})})},e.setChannelsList=function(e){return d.__awaiter(this,void 0,void 0,function(){var t,n;return d.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,ge.a.put("/kraken/autohost/list",{body:{targets:e.join(",")}})];case 1:return t=i.sent(),[2,this.deserialize(t)];case 2:return n=i.sent(),u.i.error(n,"Couldn't update autohost list"),[2,e];case 3:return[2]}})})},e.deserialize=function(e){return e.body?e.body.targets.map(function(e){return e._id.toString()}):[]},e}(),Xe=(n("7X7f"),n("QMHY")),et="autohost-notifications-dismissed",tt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isDismissed:!1},t.dismiss=function(){t.setState({isDismissed:!0}),t.track(V.SpadeEventType.AutohostChatDismiss);var e=t.getAutohostNotificationsDismissed();e[t.props.data.user.id]={dismissedDate:(new Date).getTime()},t.setAutohostNotificationsDismissed(e)},t.addChannelToAutohost=function(){return d.__awaiter(t,void 0,void 0,function(){var e;return d.__generator(this,function(t){switch(t.label){case 0:return[4,Ze.fetchChannelsList()];case 1:return e=t.sent().concat([this.props.data.user.id]),this.setState({autohostChannels:e}),Ze.setChannelsList(e),this.track(V.SpadeEventType.AutohostChatYes),[2]}})})},t.trackSettingsClick=function(){t.track(V.SpadeEventType.AutohostChatSettings)},t}return d.__extends(t,e),t.prototype.componentDidMount=function(){return d.__awaiter(this,void 0,void 0,function(){var e;return d.__generator(this,function(t){switch(t.label){case 0:return[4,Ze.fetchChannelsList()];case 1:return e=t.sent(),this.setState({autohostChannels:e}),this.isShowing&&this.track(V.SpadeEventType.AutohostChatImpression),[2]}})})},t.prototype.render=function(){if(!this.isShowing)return null;var e=Object(u.d)("You are now hosting {channel}",{channel:this.props.data.user.displayName},"AutohostPrompt"),t=Object(u.d)("Auto host this channel whenever you're offline?","AutohostPrompt"),n=Object(u.d)("Yes","AutohostPrompt"),i=Object(u.d)("Settings","AutohostPrompt");return f.createElement(H._24,{"data-target":"autohost-container",background:H.m.Base,className:"autohost-prompt",margin:{x:2},position:H._8.Relative},f.createElement(H.p,{size:H.r.Medium,direction:H.q.TopLeft,show:!0},f.createElement(H._24,{alignItems:H.c.Center,borderBottom:!0,display:H.M.Flex,flexDirection:H.O.Column,justifyContent:H._0.Around,padding:1},f.createElement(H._1,{position:H._8.Absolute,attachTop:!0,attachRight:!0},f.createElement(H.v,{ariaLabel:Object(u.d)("Close","AutohostPrompt"),size:H.x.Small,type:H.w.Secondary,"data-test-selector":"autohost-dismiss-button",icon:H._15.Close,onClick:this.dismiss})),f.createElement(H.l,{alt:this.props.data.user.displayName,src:this.props.data.user.profileImageURL,size:30}),f.createElement(H._1,{className:"autohost-prompt__hosting-message",display:H.M.Flex,padding:{top:.5}},f.createElement(H._14,{asset:H._15.Check}),f.createElement(H.V,{margin:{left:.5}},f.createElement(H._34,null,e)))),f.createElement(H._1,{className:"autohost-prompt__prompt",justifyContent:H._0.Center,display:H.M.Flex,flexWrap:H.P.Wrap,padding:1},f.createElement(H._34,null,t),f.createElement(H._45,{gutterSize:H._47.ExtraSmall,childWidth:H._46.Large},f.createElement("div",null,f.createElement(H.u,{"data-test-selector":"autohost-yes-button",fullWidth:!0,onClick:this.addChannelToAutohost},n)),f.createElement("div",null,f.createElement(H.u,{"data-test-selector":"autohost-settings-button",fullWidth:!0,onClick:this.trackSettingsClick,type:H.z.Hollow,linkTo:"https://twitch.tv/settings/profile"},i))))))},Object.defineProperty(t.prototype,"isShowing",{get:function(){return!this.state.isDismissed&&!!this.props.hostedChannelLogin&&!this.props.data.loading&&!this.props.data.error&&this.props.data.user&&!!this.state.autohostChannels&&!this.state.autohostChannels.includes(this.props.data.user.id)&&!this.getAutohostNotificationsDismissed()[this.props.data.user.id]},enumerable:!0,configurable:!0}),t.prototype.track=function(e){!function(e,t){u.m.track(e,d.__assign({time:Date.now()},t))}(e,{user_id:this.props.data.currentUser.id,hosting_channel_id:this.props.data.currentUser.id,hosted_channel_id:this.props.data.user.id})},t.prototype.getAutohostNotificationsDismissed=function(){return u.k.get(et,{})},t.prototype.setAutohostNotificationsDismissed=function(e){return u.k.set(et,e)},t=d.__decorate([Object(b.a)(Xe,{skip:function(e){return!e.hostedChannelLogin},options:function(e){return{variables:{login:e.hostedChannelLogin}}}})],t)}(f.Component),nt=n("3T7g"),it=n("RbGx"),at=n("5Nu7"),rt=n("g7wA"),st=n("O9wU"),ot=n("1OO3"),lt=n("KBUQ"),ct=n("JtUK"),dt=n("Kthq"),ut=(n("B88H"),"chat-ban-button"),pt="chat-unban-button",mt="chat-timeout-button",ht="chat-deleted-message-placeholder",gt=600,ft=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={alwaysShowMessage:!1},t.renderModerationIcons=function(){if(!t.props.isCurrentUserModerator||!t.props.showModerationIcons)return null;var e=t.onBanUser,n=H._15.Ban,i=Object(u.d)("Ban","ChatMessageEvent"),a=ut;return t.props.message.deleted&&!t.state.alwaysShowMessage&&(e=t.onUnbanUser,n=H._15.FollowCheck,i=Object(u.d)("Unban","ChatMessageEvent"),a=pt),f.createElement(H._1,{display:H.M.Inline,className:"chat-line__mod-icons"},f.createElement("button",{className:"mod-icon",onClick:e,"data-a-target":a},f.createElement(H._42,{label:i},f.createElement(H._14,{width:16,height:16,type:H._16.Inherit,asset:n}))),f.createElement("button",{className:"mod-icon",onClick:t.timeoutUser,"data-a-target":mt},f.createElement(H._42,{label:Object(u.d)("Timeout","ChatMessageEvent")},f.createElement(H._14,{width:16,height:16,type:H._16.Inherit,asset:H._15.Timeout}))))},t.renderMessageBody=function(){if(t.props.isDeleted&&!t.state.alwaysShowMessage){var e=Object(u.d)("message deleted","ChatLine");return t.props.isCurrentUserModerator?f.createElement("span",{key:"deleted",className:"chat-line__message--deleted","data-a-target":ht},f.createElement("a",{href:"",onClick:t.alwaysShowMessage},"<"+e+">")):f.createElement("span",{key:"deleted",className:"chat-line__message--deleted","data-a-target":ht},"<"+e+">")}return Object(rt.k)(t.props.message.messageParts,t.props.currentUserDisplayName,t.props.currentUserLogin)},t.onBanUser=function(){t.props.banUserMutation(t.props.message.user.userLogin).then(function(e){var n=e.banUserFromChatRoom;if(t.props.onPushMessage)if(n.error){var i=Object(Pe.a)(Object(ct.a)(t.props.message.user.userLogin,n.error.code));t.props.onPushMessage(i)}else{var a=r(De.a.Ban,t.props.message.user.userLogin,null,null);t.props.onPushMessage(a)}}).catch(function(){if(t.props.onPushMessage){var e=Object(Pe.a)(Object(u.d)("Unable to ban user.","ChatMessageEvent"));t.props.onPushMessage(e)}})},t.onUnbanUser=function(){t.props.unbanUserMutation(t.props.message.user.userLogin).then(function(e){var n=e.unbanUserFromChatRoom;if(t.props.onPushMessage)if(n.error){var i=Object(Pe.a)(Object(dt.a)(t.props.message.user.userLogin,n.error.code));t.props.onPushMessage(i)}else{i=Object(Pe.a)(Object(u.d)("{bannedUserLogin} is no longer banned from this room.",{bannedUserLogin:t.props.message.user.userLogin},"ChatMessageEvent"));t.props.onPushMessage(i)}}).catch(function(){if(t.props.onPushMessage){var e=Object(Pe.a)(Object(u.d)("Unable to unban user.","ChatMessageEvent"));t.props.onPushMessage(e)}})},t.timeoutUser=function(){t.props.banUserMutation(t.props.message.user.userLogin,gt).then(function(e){var n=e.banUserFromChatRoom;if(t.props.onPushMessage)if(n.error){var i=Object(Pe.a)(Object(ct.a)(t.props.message.user.userLogin,n.error.code,!0));t.props.onPushMessage(i)}else{var a=r(De.a.Ban,t.props.message.user.userLogin,null,gt);t.props.onPushMessage(a)}}).catch(function(){if(t.props.onPushMessage){var e=Object(Pe.a)(Object(u.d)("Unable to timeout user.","ChatMessageEvent"));t.props.onPushMessage(e)}})},t.alwaysShowMessage=function(e){e&&e.preventDefault(),t.setState({alwaysShowMessage:!0})},t.usernameClickHandler=function(){t.props.onUsernameClick(t.props.message.user.userLogin,st.a.chat_message,t.props.message.id)},t}return d.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.badgeSets,n=e.className,i=e.message,a=e.showTimestamps,r={},s=": ";i.type===De.a.Action&&(r={color:i.user.color},s=" ");var o=null;return a&&(o=Object(rt.t)(i.timestamp)),f.createElement("div",{className:F(n,"chat-line__message"),style:r,"data-a-target":"chat-line-message"},o,this.renderModerationIcons(),f.createElement(nt.b,{badgeSets:t,badgesToRender:i.badges}),f.createElement("button",{onClick:this.usernameClickHandler,className:"chat-line__username"},f.createElement(at.a,{userData:i.user})),f.createElement("span",{key:"separator"},s),this.renderMessageBody())},t}(f.Component),bt=function(e){return{channelID:e.channelID}},vt=Object(v.compose)(Object(h.b)(void 0,function(e){return Object(k.b)({onUsernameClick:p.d},e)}),Object(ot.b)(bt),Object(lt.b)(bt))(ft),kt=n("3LYq"),yt=n("IEOs"),_t={badges:{twitchbot:"1"},bits:0,color:"#6441A5",displayName:"AutoMod",id:"automod",userID:"automod",username:"automod",userType:Ae.a.GlobalMod,emotes:null},Ct={VoHiYo:{displayName:"VoHiYo",id:"81274",srcSet:"https://static-cdn.jtvnw.net/emoticons/v1/81274/1.0 1.0x, https://static-cdn.jtvnw.net/emoticons/v1/81274/2.0 2.0x, https://static-cdn.jtvnw.net/emoticons/v1/81274/3.0 3.0x",token:"VoHiYo"}},St=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isResolved:!1},t.allowAutoModRejectedMessage=function(){t.setState({isResolved:!0}),t.props.allowRejectedChatMessage&&t.props.message.type===De.a.AutoModRejectedPrompt&&t.props.allowRejectedChatMessage(Object(A.a)({id:t.props.message.rejectedMessage.id}))},t.denyAutoModRejectedMessage=function(){t.setState({isResolved:!0}),t.props.denyRejectedChatMessage&&t.props.message.type===De.a.AutoModRejectedPrompt&&t.props.denyRejectedChatMessage(Object(A.a)({id:t.props.message.rejectedMessage.id}))},t}return d.__extends(t,e),t.prototype.render=function(){var e;switch(this.props.message.type){case De.a.AutoModRejectedPrompt:e=function(e){var t;switch(e){case"aggressive":t=Object(u.d)("aggressive","AutoModLine");break;case"sexual":t=Object(u.d)("sexual","AutoModLine");break;case"profanity":t=Object(u.d)("profanity","AutoModLine");break;case"identity":t=Object(u.d)("identity","AutoModLine");break;default:return Object(u.d)("Message is being held for review. Allow will post it to chat.","AutoModLine")}return Object(u.d)("Held a message for reason: {category}. Allow will post it to chat.",{category:t},"AutoModLine")}(this.props.message.category);break;case De.a.AutoModMessageRejected:e=Object(u.d)("Hey! Your message is being checked by mods and has not been sent.","AutoModLine");break;case De.a.AutoModMessageAllowed:e=Object(u.d)("Mods have allowed your message. Happy chatting!","AutoModLine"),e+=" VoHiYo";break;case De.a.AutoModMessageDenied:e=Object(u.d)("Mods have removed your message.","AutoModLine");break;default:throw new Error("Invalid message type")}var t=Object(Ve.a)(e,_t,x.a,!1,Ct);switch(this.props.message.type){case De.a.AutoModRejectedPrompt:if(this.state.isResolved)return f.createElement(H._1,{className:"chat-line__status"},Object(rt.h)());var n=["chat-line__message--alert","chat-line__message--special","chat-line__message--clearfix"];return f.createElement(H._1,{className:"chat-line__message"},f.createElement(it.a,{badgeSets:this.props.badgeSets,badgesToRender:t.badges}),f.createElement(at.a,{userData:t.user}),f.createElement("span",{key:"separator"},": "),Object(rt.k)(t.messageParts,this.props.currentUserDisplayName,this.props.currentUserLogin),f.createElement(H._1,{key:"automod-prompt",className:"chat-line__nested-component--float-right"},f.createElement(H.u,{size:H.x.Small,onClick:this.allowAutoModRejectedMessage,type:H.z.Text},Object(u.d)("Allow","AutoModLine")),f.createElement(H._34,{type:H._39.Span},"•"),f.createElement(H.u,{size:H.x.Small,onClick:this.denyAutoModRejectedMessage,type:H.z.Text},Object(u.d)("Deny","AutoModLine"))),f.createElement(vt,d.__assign({},this.props,{isDeleted:!1,showTimestamps:!1,className:F(n),message:this.props.message.rejectedMessage})));case De.a.AutoModMessageRejected:case De.a.AutoModMessageAllowed:case De.a.AutoModMessageDenied:var i=["chat-line__message","chat-line__message--special","chat-line__message--alert"];return f.createElement(H._1,{className:F(i)},f.createElement(it.a,{badgeSets:this.props.badgeSets,badgesToRender:t.badges}),f.createElement(at.a,{userData:t.user}),f.createElement("span",{key:"separator"},": "),Object(rt.k)(t.messageParts,this.props.currentUserDisplayName,this.props.currentUserLogin));default:throw new Error("Invalid message type")}},t}(f.Component),Et=Object(v.compose)(Object(b.a)(kt,{name:"allowRejectedChatMessage",options:{}}),Object(b.a)(yt,{name:"denyRejectedChatMessage",options:{}}))(St),Nt=n("91zu"),wt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d.__extends(t,e),t.prototype.render=function(){var e=this.props.message.params,t=this.props.data,n=t.channel,i=t.loading,a=t.error;if(i||a)return null;var r=Object(u.d)("{displayName} is raiding with a party of {viewerCount}.",{displayName:f.createElement("strong",null,n.displayName),viewerCount:f.createElement("strong",null,e.viewerCount)},"RaidIncomingMessage");return f.createElement(H._1,{className:"chat-line__raid","data-test-selector":"incoming-raid"},f.createElement(H._1,{display:H.M.Flex,alignItems:H.c.Center},f.createElement(H.l,{alt:n.displayName,src:n.profileImageURL,size:30}),f.createElement(H._24,{color:H.I.Base,margin:{left:1}},r)))},t}(f.Component),Tt=Object(b.a)(Nt,{options:function(e){return{variables:{channelLogin:e.message.params.login}}}})(wt),Dt=function(e){return f.createElement("span",null,o()[e.message.msgid])},It=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.usernameClickHandler=function(){if(!t.props.event.user)return null;t.props.onUsernameClick(t.props.event.user.userLogin,st.a.chat_message,t.props.event.id)},t}return d.__extends(t,e),t.prototype.render=function(){var e=this.props.event;if(e.user){var t=null;e.badges&&(t=f.createElement(nt.b,{badgeSets:this.props.badgeSets,badgesToRender:e.badges}));var n=e.isPrime?Object(rt.a)(e.user.userDisplayName,Object(rt.v)(e.channel)):Object(rt.b)(e.user.userDisplayName,e.tier),i=[f.createElement("span",{key:"chat--resubbed"},n,f.createElement("span",{key:"sub-separator"}," "),Object(u.d)("{userLogin} subscribed for {months} months in a row!",{userLogin:e.user.userDisplayName,months:e.months},"ChatLine"))];if(e.messageParts&&e.user&&!this.props.isDeleted){var a=null;this.props.showTimestamps&&e.timestamp&&(a=Object(rt.t)(e.timestamp)),i.push(f.createElement("div",{key:"resub-message",className:"chat-line__subscribe--message"},a,t,f.createElement("button",{className:"chat-line__username",onClick:this.usernameClickHandler,"data-test-selector":"resub-sender-login"},f.createElement(at.a,{userData:e.user})),f.createElement("span",{key:"separator"},": "),Object(rt.k)(e.messageParts,this.props.currentUserDisplayName,this.props.currentUserLogin)))}return f.createElement(H._1,{className:"chat-line__subscribe"},i)}return null},t}(f.Component),Ot=Object(v.compose)(Object(h.b)(void 0,function(e){return Object(k.b)({onUsernameClick:p.d},e)}))(It);(se||(se={})).NewChatter="new_chatter";var Mt,xt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderSystemText=function(){if(t.props.event.ritualType===se.NewChatter){var e=t.props.event.message,n=e.user.isIntl?e.user.userDisplayName+" ("+e.user.userLogin+")":e.user.userDisplayName;return Object(u.d)("{user} is new here. Say hello!",{user:"@"+n},"NewChatterRitual")}return""},t.usernameClickHandler=function(){var e=t.props.event.message.user.userLogin;t.props.onUsernameClick(e,st.a.chat_message,t.props.event.message.id)},t}return d.__extends(t,e),t.prototype.render=function(){var e=this.props.event.message;if(e.user&&!this.props.isDeleted){var t=null;e.badges&&(t=f.createElement(nt.b,{badgeSets:this.props.badgeSets,badgesToRender:e.badges}));var n=null;return this.props.showTimestamps&&e.timestamp&&(n=Object(rt.t)(e.timestamp)),f.createElement("span",null,this.renderSystemText(),f.createElement("div",{className:"chat-line__ritual--message"},n,t,f.createElement("button",{className:"chat-line__username",onClick:this.usernameClickHandler,"data-test-selector":"ritual-sender-login"},f.createElement(at.a,{userData:e.user})),f.createElement("span",null,": "),Object(rt.k)(e.messageParts,this.props.currentUserDisplayName,this.props.currentUserLogin)))}return null},t}(f.Component),Rt=Object(v.compose)(Object(h.b)(void 0,function(e){return Object(k.b)({onUsernameClick:p.d},e)}))(xt),Lt=n("Cn8s"),Ut=(n("RkXA"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={drawerOpen:!1},t.renderBitsLoot=function(e){return f.createElement(H._1,{key:e.quantity,className:"chat-line__purchase-loot"},f.createElement(W.a,{bitsConfig:t.props.bitsConfig,count:e.quantity,withImage:!0}))},t.toggleDrawer=function(){t.setState(function(e){return{drawerOpen:!e.drawerOpen}})},t}return d.__extends(t,e),t.prototype.render=function(){var e,t=this,n=this.props.purchase,i=n.crateLoot,a=n.numCrates,r=n.purchased;if(a>0){var s=Object(u.d)("{numCrates, plural, one {Plus # Twitch Crate with {lootCount} rewards!} other {Plus # Twitch Crates with {lootCount} rewards!}}",{numCrates:a,lootCount:i.length},"SharePurchaseLineRewardText");e=f.createElement(H._1,{className:"chat-line__purchase-reward-text",margin:{top:.5}},s)}var o,l=i.map(function(e){switch(e.type){case Lt.a.Badge:return t.renderBadgeLoot(e);case Lt.a.Bits:return t.renderBitsLoot(e);case Lt.a.Emote:return t.renderEmoteLoot(e);case Lt.a.InGameContent:return t.renderIGCLoot(e);default:return""}});if(i.length<=2)o=0===i.length?"":f.createElement(H._24,{className:"chat-line__purchase-loot-box",alignItems:H.c.Center,borderLeft:!0,display:H.M.Flex,flexDirection:H.O.Row,flexShrink:0,flexWrap:H.P.NoWrap,justifyContent:H._0.Center,padding:.5},l);else if(this.state.drawerOpen)o=f.createElement("span",{className:"chat-line__purchase-loot-toggle",onClick:this.toggleDrawer,"data-test-selector":"purchase-loot-toggle"},f.createElement(H._24,{className:"chat-line__purchase-loot-box",alignItems:H.c.Center,borderLeft:!0,display:H.M.Flex,flexDirection:H.O.Row,flexShrink:0,flexWrap:H.P.NoWrap,justifyContent:H._0.Center,padding:.5},f.createElement(H._14,{asset:H._15.GlyphArrUp})));else{var c="+"+(i.length-1);o=f.createElement("span",{className:"chat-line__purchase-loot-toggle",onClick:this.toggleDrawer,"data-test-selector":"purchase-loot-toggle"},f.createElement(H._24,{className:"chat-line__purchase-loot-box",alignItems:H.c.Center,borderLeft:!0,display:H.M.Flex,flexDirection:H.O.Row,flexShrink:0,flexWrap:H.P.NoWrap,justifyContent:H._0.Center,padding:.5},l[0],f.createElement(H._5,{label:c,type:H._6.Notification})))}var d=i.length<=2||!this.state.drawerOpen?"":f.createElement(H._24,{className:"chat-line__purchase-loot-drawer",alignItems:H.c.Center,display:H.M.Flex,flexDirection:H.O.Row,flexShrink:0,flexWrap:H.P.NoWrap,justifyContent:H._0.End,padding:.5,"data-test-selector":"purchase-loot-drawer"},l);return f.createElement(H._24,{className:"chat-line__purchase",elevation:1,margin:{bottom:.5,left:2,right:2,top:0}},f.createElement(H._1,{display:H.M.Flex,flexDirection:H.O.Row,flexWrap:H.P.NoWrap},f.createElement(H._1,{flexGrow:0,flexShrink:0,margin:.5},f.createElement("img",{className:"chat-line__purchase-boxart",src:r.boxart})),f.createElement(H._1,{flexGrow:1,margin:.5},f.createElement(H._24,{fontSize:H.Q.Size4},r.title),e),o),d)},t.prototype.renderBadgeLoot=function(e){return f.createElement("img",{key:e.img,className:"chat-line__purchase-loot",src:e.img})},t.prototype.renderEmoteLoot=function(e){var t="//static-cdn.jtvnw.net/emoticons/v1/"+e.id+"/2.0";return f.createElement("img",{key:e.id,className:"chat-line__purchase-loot",src:t})},t.prototype.renderIGCLoot=function(e){return f.createElement("img",{key:e.img,className:"chat-line__purchase-loot",src:e.img})},t}(f.Component)),Ft=(n("+5Qw"),"timeout_success"),jt="ban_success",Bt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d.__extends(t,e),t.prototype.shouldComponentUpdate=function(e){if(!e.doesNotUpdate)return!0;if(e.isCurrentUserModerator!==this.props.isCurrentUserModerator)return!0;if(e.showModerationIcons!==this.props.showModerationIcons)return!0;if(e.showTimestamps!==this.props.showTimestamps)return!0;switch(e.message.type){case De.a.Post:case De.a.PostWithMention:case De.a.Action:case De.a.Resubscription:if(e.message.deleted)return!0;break;case De.a.Ritual:if(e.message.message.deleted)return!0}return!1},t.prototype.render=function(){var e=this.props.message;switch(e.type){case De.a.AutoModMessageRejected:case De.a.AutoModMessageAllowed:case De.a.AutoModMessageDenied:case De.a.AutoModRejectedPrompt:return f.createElement(Et,{channelID:this.props.channelID,message:e,badgeSets:this.props.badgeSets,currentUserDisplayName:this.props.currentUserDisplayName,isCurrentUserModerator:this.props.isCurrentUserModerator,showModerationIcons:this.props.showModerationIcons,currentUserLogin:this.props.currentUserLogin});case De.a.Connected:return f.createElement(H._1,{className:"chat-line__status","data-a-target":"chat-welcome-message"},f.createElement(H._34,{type:H._39.Span},Object(u.d)("Welcome to the chat room!","ChatLine")));case De.a.Disconnected:return e.reason?f.createElement(H._1,{className:"chat-line__status"},f.createElement(H._34,{type:H._39.Span},Object(u.d)("You have been disconnected from chat for the following reason: {reason}",{reason:e.reason},"ChatLine"))):f.createElement(H._1,{className:"chat-line__status"},f.createElement(H._34,{type:H._39.Span},Object(u.d)("Sorry, we were unable to connect to chat. Attempting to reconnect...","ChatLine")));case De.a.Hosting:return f.createElement(H._1,{className:"chat-line__status"},f.createElement(H._34,{type:H._39.Span},Object(u.d)("Now hosting {channel}",{channel:e.hostedChannel},"ChatLine")));case De.a.Unhost:return f.createElement(H._1,{className:"chat-line__status"},f.createElement(H._34,{type:H._39.Span},Object(u.d)("No longer hosting.","ChatLine")));case De.a.Post:case De.a.PostWithMention:case De.a.Action:return function(e){return e.type===De.a.Post||e.type===De.a.PostWithMention||e.type===De.a.Action}(e)?f.createElement(vt,{channelID:this.props.channelID,badgeSets:this.props.badgeSets,message:e,isDeleted:e.deleted,showModerationIcons:this.props.showModerationIcons,showTimestamps:this.props.showTimestamps,isCurrentUserModerator:this.props.isCurrentUserModerator,currentUserDisplayName:this.props.currentUserDisplayName,currentUserLogin:this.props.currentUserLogin,onPushMessage:this.props.onPushMessage}):null;case De.a.Ban:case De.a.Timeout:return this.props.isCurrentUserModerator?f.createElement(H._1,{className:"chat-line__moderation"},Object(rt.l)(e)):null;case De.a.Subscription:return f.createElement(H._1,{className:"chat-line__subscribe"},Object(rt.s)(e));case De.a.SubGift:return f.createElement(H._1,{className:"chat-line__subscribe"},Object(rt.r)(e));case De.a.BitsCharity:return f.createElement(H._1,{className:"chat-line__bits-charity",padding:{right:2,y:.5}},Object(rt.d)(e));case De.a.Resubscription:return f.createElement(Ot,{badgeSets:this.props.badgeSets,currentUserDisplayName:this.props.currentUserDisplayName,currentUserLogin:this.props.currentUserLogin,event:e,isDeleted:e.deleted||!1,showTimestamps:this.props.showTimestamps});case De.a.RoomMods:return f.createElement(H._1,{className:"chat-line__status"},Object(rt.o)(e.moderatorLogins));case De.a.SlowMode:return f.createElement(H._1,{className:"chat-line__status"},Object(rt.p)(e));case De.a.SubscriberOnlyMode:return f.createElement(H._1,{className:"chat-line__status"},Object(rt.q)(e));case De.a.FollowerOnlyMode:return f.createElement(H._1,{className:"chat-line__status"},Object(rt.i)(e));case De.a.EmoteOnlyMode:return f.createElement(H._1,{className:"chat-line__status"},Object(rt.g)(e));case De.a.Clear:return f.createElement(H._1,{className:"chat-line__status"},Object(rt.e)());case De.a.Notice:if(function(e){return e.msgid in o()}(e))return f.createElement(H._1,{className:"chat-line__status"},f.createElement(Dt,{message:e}));if(this.props.isCurrentUserModerator)switch(e.msgid){case Ft:case jt:return null}return f.createElement(H._1,{className:"chat-line__status"},Object(rt.m)(e));case De.a.Info:return f.createElement(H._1,{className:"chat-line__status"},Object(rt.j)(e));case De.a.Purchase:var t=e.message.user.isIntl?e.message.user.userDisplayName+" ("+e.message.user.userLogin+")":e.message.user.userDisplayName;return f.createElement(H._1,{className:"chat-line__message--special"},f.createElement(H._1,{className:"chat-line__status"},Object(rt.n)(t,e.purchase.purchased.title,e.purchase.numCrates)),f.createElement(vt,{channelID:this.props.channelID,badgeSets:this.props.badgeSets,message:e.message,isDeleted:!1,showModerationIcons:this.props.showModerationIcons,showTimestamps:this.props.showTimestamps,isCurrentUserModerator:this.props.isCurrentUserModerator,currentUserDisplayName:this.props.currentUserDisplayName,currentUserLogin:this.props.currentUserLogin,onPushMessage:this.props.onPushMessage}),f.createElement(Ut,{bitsConfig:e.bitsConfig,purchase:e.purchase}));case De.a.Raid:return f.createElement(Tt,{message:e});case De.a.Unraid:return f.createElement(H._1,{className:"chat-line__raid"},Object(rt.w)());case De.a.CrateGift:return Object(rt.f)(e);case De.a.Ritual:return f.createElement(H._1,{className:"chat-line__ritual"},f.createElement(Rt,{badgeSets:this.props.badgeSets,currentUserDisplayName:this.props.currentUserDisplayName,currentUserLogin:this.props.currentUserLogin,event:e,isDeleted:e.message.deleted,showTimestamps:this.props.showTimestamps}));default:return null}},t}(f.Component),At=n("dQj3"),Pt=n("QsiC"),Vt=(n("zbFZ"),"pinned-cheer__rendered-message-inner"),Wt="pinned-cheer--collapse",Ht=/(\d+)$/,Gt=u.i.withCategory("pinned-cheer"),qt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={cheerIsTall:!1,recentCheerID:null,recentCheerExpireTime:null},t.collapseCheer=!0,t.root=null,t.renderedMessage=null,t.recentCheerTimeout=0,t.saveRenderedMessageRef=function(e){t.renderedMessage=e},t.saveRootRef=function(e){t.root=e},t.handleHeadlineClick=function(){t.collapseCheer=!t.collapseCheer,t.root&&t.root.classList.toggle(Wt,t.collapseCheer)},t.handleProgressExpired=function(){Gt.debug("setTimeout expired, forcing re-render"),t.forceUpdate()},t.onProgressAnimationEnd=function(){Gt.debug("Animation end event fired")},t}return d.__extends(t,e),t.prototype.componentWillMount=function(){this.calcRecentCheerExpiry(this.props)},t.prototype.componentWillReceiveProps=function(e){this.calcRecentCheerExpiry(e)},t.prototype.shouldComponentUpdate=function(e,t){var n=this.getDisplayData(this.props,this.state),i=this.getDisplayData(e,t);return(n.displayCheer&&n.displayCheer.id)!==(i.displayCheer&&i.displayCheer.id)},t.prototype.componentDidUpdate=function(){var e=this.getDisplayData(this.props,this.state),t=e.isRecent,n=e.remainingRecentCheerTime;if(t&&(clearTimeout(this.recentCheerTimeout),this.recentCheerTimeout=setTimeout(this.handleProgressExpired,n+100)),this.renderedMessage){var i=this.renderedMessage.getElementsByClassName(Vt);if(i.length){var a=i[0].getBoundingClientRect().height>42;this.state.cheerIsTall!==a&&this.setState({cheerIsTall:a})}}},t.prototype.componentWillUnmount=function(){clearTimeout(this.recentCheerTimeout)},t.prototype.render=function(){var e=this.getDisplayData(this.props,this.state),t=e.isRecent,n=e.remainingRecentCheerTime,i=e.displayCheer,a=e.isExpandable;if(!i)return null;for(var r="",s=0,o=0,l=i.messageParts;o<l.length;o++){var c=l[o];if(c.type===Me.a.Emote&&c.content.cheerAmount&&c.content.alt){var d=c.content.alt.replace(Ht,"").toLowerCase();s+=c.content.cheerAmount,r?r!==d&&(r="cheer"):r=d}}var p,m={"pinned-cheer__rendered-message":!0,"pinned-cheer__rendered-message--recent":t,"pinned-cheer__rendered-message--top":!t},h=f.createElement(at.a,{userData:i.user}),g=f.createElement("div",{ref:this.saveRenderedMessageRef,className:F(m)},f.createElement(H._24,{margin:{x:2},borderTop:!0}),f.createElement(H._1,{padding:{y:.5},className:Vt},f.createElement(Bt,{channelID:this.props.channelID,badgeSets:this.props.badgeData,currentUserDisplayName:this.props.currentUserDisplayName,currentUserLogin:this.props.currentUserLogin,isCurrentUserModerator:!1,message:i,showModerationIcons:!1,showTimestamps:!1}))),b=null;if(t)p=f.createElement(H._34,{type:H._39.Strong},Object(u.d)("Recent Cheer","Bits--PinnedCheer"));else{p=f.createElement(H._34,{type:H._39.Strong},Object(u.d)("Top Cheer by {user}",{user:h},"Bits--PinnedCheer")," :");var v=Object(rt.k)(Object(x.c)(r+s.toString(),this.props.bitsConfig),this.props.currentUserDisplayName,this.props.currentUserLogin);b=f.createElement(H._1,{display:H.M.Inline,margin:{left:.5}},v)}var k=(C={"pinned-cheer__bounding-box":!0},C[Wt]=this.collapseCheer,C),y={"pinned-cheer__headline":!0,"pinned-cheer__headline--clickable":a},_=null;return t&&(_=f.createElement(H._1,{className:"pinned-cheer__progress-bar-placeholder"},f.createElement(H._1,{className:"pinned-cheer__progress-bar",display:H.M.Flex,flexDirection:H.O.Column,justifyContent:H._0.End},f.createElement(H._11,{key:i.id,countdown:n/1e3,size:H._12.ExtraSmall,onCountdownEnd:this.onProgressAnimationEnd})))),Gt.debug("Rendering pinned cheer",{remainingRecentCheerTime:n,isRecent:t,recentCheerExpireTime:this.state.recentCheerExpireTime}),f.createElement(H._1,{className:"pinned-cheer",flexGrow:0,flexShrink:0,zIndex:H._51.Default},f.createElement("div",{className:F(k),ref:this.saveRootRef},f.createElement(H.V,{padding:{x:2,y:1},display:H.M.Flex,flexDirection:H.O.Row,flexWrap:H.P.NoWrap},f.createElement("div",{className:F(y),onClick:a?this.handleHeadlineClick:void 0},f.createElement(H._1,{flexGrow:1,flexShrink:1,display:H.M.Flex,alignItems:H.c.Center},f.createElement(H._14,{asset:t?H._15.HourGlass:H._15.Trophy,height:18,width:18}),f.createElement(H._1,{margin:{left:.5},display:H.M.Inline},p),b),f.createElement(H._1,{className:"pinned-cheer__expand-caret",flexShrink:0,flexGrow:0,display:H.M.Flex,justifyContent:H._0.Between,alignItems:H.c.Center},a?f.createElement(H._14,{asset:H._15.AngleLeft}):null))),g,_));var C},t.prototype.calcRecentCheerExpiry=function(e){var t=e.recentCheer?e.recentCheer.id:null;e.recentTimeoutMs&&this.state.recentCheerID!==t&&this.setState({recentCheerID:t,recentCheerExpireTime:t?Date.now()+e.recentTimeoutMs:null})},t.prototype.getDisplayData=function(e,t){var n=0;t.recentCheerExpireTime&&(n=Math.max(0,t.recentCheerExpireTime-Date.now()));var i=!!e.recentCheer&&!!e.topCheer&&e.recentCheer.id===e.topCheer.id,a=!!n&&!!e.recentCheer&&!i;return{remainingRecentCheerTime:n,isRecent:a,displayCheer:a?e.recentCheer:e.topCheer,isExpandable:!a||t.cheerIsTall}},t=d.__decorate([Object(b.a)(Pt,{props:function(e){var t,n,i;return e.data&&e.data.user&&e.data.user.cheer&&(i=e.data.user.cheer.recentTimeoutMs,e.data.user.cheer.top&&(t=Object(At.a)(e.data.user.cheer.top,e.ownProps.bitsConfig,e.ownProps.blockLinks)),e.data.user.cheer.recent&&(n=Object(At.a)(e.data.user.cheer.recent,e.ownProps.bitsConfig,e.ownProps.blockLinks))),{topCheer:t,recentCheer:n,recentTimeoutMs:i}},options:function(e){return{name:"data",fetchPolicy:"network-only",variables:{channelID:e.channelID}}}}),Object(ke.a)(function(e){return{query:Pt,variables:{channelID:e.channelID},topic:Object(P.b)(e.channelID),type:B.PubsubMessageType.BitsPinEvent,mutator:function(t,n){if(n.user.cheer){var i=JSON.parse(t.msg);if(i.channel_id===e.channelID)return Gt.debug("Received pubsub update",{hasTopCheer:!!i.top&&i.top.has_top_event,hasNewTopCheer:!n.user.cheer.top||null!==i.top.tags&&n.user.cheer.top.id!==i.top.tags.msg_id,hasRecentCheer:!!i.recent&&i.recent.has_recent_event,hasNewRecentCheer:!n.user.cheer.recent||null!==i.recent.tags&&n.user.cheer.recent.id!==i.recent.tags.msg_id}),i.top&&(i.top.has_top_event||"dimiss"===i.action)?(!n.user.cheer.top||null!==i.top.tags&&n.user.cheer.top.id!==i.top.tags.msg_id||"dismiss"===i.action)&&(n.user.cheer.top=Object(At.c)(i.top)):n.user.cheer.top=null,i.recent&&(i.recent.has_recent_event||"dismiss"===i.action)?(!n.user.cheer.recent||null!==i.recent.tags&&n.user.cheer.recent.id!==i.recent.tags.msg_id||"dismiss"===i.action)&&(n.user.cheer.recent=Object(At.c)(i.recent),n.user.cheer.recentTimeoutMs=n.user.cheer.settings.recentTimeoutMs):n.user.cheer.recent=null,n}}}})],t)}(f.Component);n("+FQU");!function(e){e[e.Gold=0]="Gold",e[e.Silver=1]="Silver",e[e.Bronze=2]="Bronze",e[e.Default=3]="Default"}(Mt||(Mt={}));var zt;!function(e){e[e.Big=0]="Big",e[e.Small=1]="Small"}(zt||(zt={}));var Qt,$t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d.__extends(t,e),t.prototype.render=function(){var e=this.renderMedalSVG(this.props.medal,this.props.size),t=F("bits-leaderboard-medal__profile-image",{"bits-leaderboard-medal__profile-image--big":this.props.size===zt.Big},{"bits-leaderboard-medal__profile-image--small":this.props.size===zt.Small}),n=null;return this.props.profileImageUrl&&(n=f.createElement(H.V,{position:H._8.Absolute},f.createElement("img",{className:t,src:this.props.profileImageUrl}))),f.createElement(H._1,{className:"bits-leaderboard-medal",display:H.M.Flex,position:H._8.Relative},e,n)},t.prototype.renderMedalSVG=function(e,t){var n=t===zt.Big?32:20;return e===Mt.Gold?f.createElement("svg",{width:n,height:n,viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},f.createElement("defs",null,f.createElement("linearGradient",{x1:"15.783%",y1:"9.653%",x2:"82.407%",y2:"91.627%",id:"bits-leaderboard-gold-linearGradient-1"},f.createElement("stop",{stopColor:"#D8B258",offset:"0%"}),f.createElement("stop",{stopColor:"#A4770E",offset:"100%"})),f.createElement("path",{id:"bits-leaderboard-gold-path-2",d:"M16 28.9l-2.469 1.895-1.72-2.594-2.95.991-.784-3.012-3.113-.02.237-3.104-2.938-1.03 1.232-2.86L1.05 17.24l2.093-2.304-1.685-2.617 2.728-1.5-.744-3.022 3.066-.533.278-3.1 3.073.492 1.27-2.842 2.747 1.463L16 1l2.123 2.276 2.747-1.463 1.27 2.842 3.073-.492.278 3.1 3.066.533-.744 3.022 2.728 1.5-1.685 2.617 2.093 2.304-2.444 1.928 1.232 2.858-2.938 1.03.237 3.104-3.113.02-.784 3.013-2.95-.991-1.72 2.594z"}),f.createElement("linearGradient",{x1:"17.025%",y1:"7.356%",x2:"84.092%",y2:"91.769%",id:"bits-leaderboard-gold-linearGradient-3"},f.createElement("stop",{stopColor:"#E5B561",offset:"0%"}),f.createElement("stop",{stopColor:"#EEC05F",offset:"12.638%"}),f.createElement("stop",{stopColor:"#FFECB9",offset:"20.419%"}),f.createElement("stop",{stopColor:"#DCB35E",offset:"30.58%"}),f.createElement("stop",{stopColor:"#E0B55B",offset:"45.279%"}),f.createElement("stop",{stopColor:"#CDA148",offset:"62.771%"}),f.createElement("stop",{stopColor:"#E9CC8F",offset:"76.584%"}),f.createElement("stop",{stopColor:"#ECBE5D",offset:"83.038%"}),f.createElement("stop",{stopColor:"#C09A4C",offset:"100%"})),f.createElement("linearGradient",{x1:"83.2%",y1:"89.733%",x2:"12.813%",y2:"3.179%",id:"bits-leaderboard-gold-linearGradient-4"},f.createElement("stop",{stopColor:"#9A790A",offset:"0%"}),f.createElement("stop",{stopColor:"#FFEFB9",offset:"87.642%"}),f.createElement("stop",{stopColor:"#FFF",offset:"100%"})),f.createElement("circle",{id:"bits-leaderboard-gold-path-5",cx:"16",cy:"16",r:"11"})),f.createElement("g",{id:"bits-leaderboard-gold-Symbols",fill:"none",fillRule:"evenodd"},f.createElement("g",{id:"bits-leaderboard-gold-Medal-1-gold-lg"},f.createElement("g",{id:"bits-leaderboard-gold-Star"},f.createElement("use",{fill:"#D6A94C",xlinkHref:"#bits-leaderboard-gold-path-2"}),f.createElement("path",{stroke:"url(#bits-leaderboard-gold-linearGradient-1)",d:"M16 29.53l-2.59 1.988-1.803-2.72-3.095 1.039-.823-3.16-3.264-.021.248-3.256-3.08-1.08 1.29-2.998-2.562-2.023 2.195-2.416-1.768-2.745 2.861-1.573-.78-3.17 3.216-.559.292-3.252L9.56 4.1l1.332-2.98 2.881 1.534L16 .267l2.227 2.387 2.881-1.535L22.44 4.1l3.223-.516.292 3.252 3.216.559-.78 3.17 2.86 1.573-1.767 2.745 2.195 2.416-2.563 2.023 1.292 2.998-3.08 1.08.247 3.256-3.264.021-.823 3.16-3.095-1.04-1.803 2.721L16 29.53z"})),f.createElement("path",{id:"bits-leaderboard-gold-Star",fill:"url(#bits-leaderboard-gold-linearGradient-3)",d:"M16 28.58l-2.469 2.215-1.615-2.897-3.055 1.294-.587-3.265-3.31.232.505-3.279-3.206-.855 1.543-2.937-2.755-1.85 2.413-2.277-2.005-2.643 3.021-1.371-1.037-3.151 3.302-.316.042-3.317 3.226.774 1.117-3.124 2.8 1.78L16 1l2.07 2.592 2.8-1.78 1.117 3.125 3.226-.774.042 3.317 3.302.316-1.037 3.151 3.021 1.37-2.005 2.644 2.413 2.278-2.755 1.849 1.543 2.937-3.206.855.505 3.28-3.31-.233-.587 3.265-3.055-1.294-1.615 2.897z"}),f.createElement("g",{id:"bits-leaderboard-gold-Oval"},f.createElement("use",{fill:"#BE912A",xlinkHref:"#bits-leaderboard-gold-path-5"}),f.createElement("circle",{stroke:"url(#bits-leaderboard-gold-linearGradient-4)",cx:"16",cy:"16",r:"11.5"}))))):e===Mt.Silver?f.createElement("svg",{width:n,height:n,viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},f.createElement("defs",null,f.createElement("linearGradient",{x1:"18.738%",y1:"20.297%",x2:"79.716%",y2:"88.714%",id:"bits-leaderboard-silver-linearGradient-1"},f.createElement("stop",{stopColor:"#D0D8DB",offset:"0%"}),f.createElement("stop",{stopColor:"#7E848A",offset:"100%"})),f.createElement("path",{id:"bits-leaderboard-silver-path-2",d:"M16 28.9l-2.469 1.895-1.72-2.594-2.95.991-.784-3.012-3.113-.02.237-3.104-2.938-1.03 1.232-2.86L1.05 17.24l2.093-2.304-1.685-2.617 2.728-1.5-.744-3.022 3.066-.533.278-3.1 3.073.492 1.27-2.842 2.747 1.463L16 1l2.123 2.276 2.747-1.463 1.27 2.842 3.073-.492.278 3.1 3.066.533-.744 3.022 2.728 1.5-1.685 2.617 2.093 2.304-2.444 1.928 1.232 2.858-2.938 1.03.237 3.104-3.113.02-.784 3.013-2.95-.991-1.72 2.594z"}),f.createElement("linearGradient",{x1:"19.638%",y1:"10.855%",x2:"81.99%",y2:"89.124%",id:"bits-leaderboard-silver-linearGradient-3"},f.createElement("stop",{stopColor:"#202020",offset:"0%"}),f.createElement("stop",{stopColor:"#BCBCBC",offset:"13.369%"}),f.createElement("stop",{stopColor:"#FFF",offset:"20.779%"}),f.createElement("stop",{stopColor:"#313131",offset:"30.58%"}),f.createElement("stop",{stopColor:"#EFEFEF",offset:"45.279%"}),f.createElement("stop",{stopColor:"#B5B5B5",offset:"61.521%"}),f.createElement("stop",{stopColor:"#FFF",offset:"74.572%"}),f.createElement("stop",{stopColor:"#656565",offset:"87.343%"}),f.createElement("stop",{stopColor:"#C4C4C4",offset:"100%"})),f.createElement("linearGradient",{x1:"0%",y1:"0%",x2:"99.438%",y2:"96.312%",id:"bits-leaderboard-silver-linearGradient-4"},f.createElement("stop",{stopColor:"#FFF",offset:"3.677%"}),f.createElement("stop",{offset:"100%"})),f.createElement("linearGradient",{x1:"8.437%",y1:"13.448%",x2:"86.525%",y2:"83.33%",id:"bits-leaderboard-silver-linearGradient-5"},f.createElement("stop",{stopColor:"#FFF",offset:"0%"}),f.createElement("stop",{stopColor:"#EAEEF2",offset:"9.632%"}),f.createElement("stop",{stopColor:"#686C71",offset:"100%"})),f.createElement("circle",{id:"bits-leaderboard-silver-path-6",cx:"16",cy:"16",r:"11"})),f.createElement("g",{id:"bits-leaderboard-silver-Symbols",fill:"none",fillRule:"evenodd"},f.createElement("g",{id:"bits-leaderboard-silver-Medal-2-silver-lg"},f.createElement("g",{id:"bits-leaderboard-silver-Star-Copy-2"},f.createElement("use",{fill:"#CBC8D0",xlinkHref:"#bits-leaderboard-silver-path-2"}),f.createElement("path",{stroke:"url(#bits-leaderboard-silver-linearGradient-1)",d:"M16 29.53l-2.59 1.988-1.803-2.72-3.095 1.039-.823-3.16-3.264-.021.248-3.256-3.08-1.08 1.29-2.998-2.562-2.023 2.195-2.416-1.768-2.745 2.861-1.573-.78-3.17 3.216-.559.292-3.252L9.56 4.1l1.332-2.98 2.881 1.534L16 .267l2.227 2.387 2.881-1.535L22.44 4.1l3.223-.516.292 3.252 3.216.559-.78 3.17 2.86 1.573-1.767 2.745 2.195 2.416-2.563 2.023 1.292 2.998-3.08 1.08.247 3.256-3.264.021-.823 3.16-3.095-1.04-1.803 2.721L16 29.53z"})),f.createElement("path",{id:"bits-leaderboard-silver-Star-Copy-3",fill:"url(#bits-leaderboard-silver-linearGradient-3)",opacity:".6",d:"M16 28.9l-2.469 1.895-1.72-2.594-2.95.991-.784-3.012-3.113-.02.237-3.104-2.938-1.03 1.232-2.86L1.05 17.24l2.093-2.304-1.685-2.617 2.728-1.5-.744-3.022 3.066-.533.278-3.1 3.073.492 1.27-2.842 2.747 1.463L16 1l2.123 2.276 2.747-1.463 1.27 2.842 3.073-.492.278 3.1 3.066.533-.744 3.022 2.728 1.5-1.685 2.617 2.093 2.304-2.444 1.928 1.232 2.858-2.938 1.03.237 3.104-3.113.02-.784 3.013-2.95-.991-1.72 2.594z"}),f.createElement("path",{id:"bits-leaderboard-silver-Star-Copy-4-grad",fill:"url(#bits-leaderboard-silver-linearGradient-4)",opacity:".6",d:"M16 28.9l-2.469 1.895-1.72-2.594-2.95.991-.784-3.012-3.113-.02.237-3.104-2.938-1.03 1.232-2.86L1.05 17.24l2.093-2.304-1.685-2.617 2.728-1.5-.744-3.022 3.066-.533.278-3.1 3.073.492 1.27-2.842 2.747 1.463L16 1l2.123 2.276 2.747-1.463 1.27 2.842 3.073-.492.278 3.1 3.066.533-.744 3.022 2.728 1.5-1.685 2.617 2.093 2.304-2.444 1.928 1.232 2.858-2.938 1.03.237 3.104-3.113.02-.784 3.013-2.95-.991-1.72 2.594z"}),f.createElement("g",{id:"bits-leaderboard-silver-Oval-Copy"},f.createElement("use",{fill:"#A3A7AA",xlinkHref:"#bits-leaderboard-silver-path-6"}),f.createElement("circle",{stroke:"url(#bits-leaderboard-silver-linearGradient-5)",cx:"16",cy:"16",r:"11.5"}))))):e===Mt.Bronze?f.createElement("svg",{width:n,height:n,viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},f.createElement("defs",null,f.createElement("linearGradient",{x1:"14.834%",y1:"10.25%",x2:"82.068%",y2:"89.469%",id:"bits-leaderboard-bronze-linearGradient-1"},f.createElement("stop",{stopColor:"#DF904C",offset:"0%"}),f.createElement("stop",{stopColor:"#A65611",offset:"100%"})),f.createElement("path",{id:"bits-leaderboard-bronze-path-2",d:"M16 28.9l-2.469 1.895-1.72-2.594-2.95.991-.784-3.012-3.113-.02.237-3.104-2.938-1.03 1.232-2.86L1.05 17.24l2.093-2.304-1.685-2.617 2.728-1.5-.744-3.022 3.066-.533.278-3.1 3.073.492 1.27-2.842 2.747 1.463L16 1l2.123 2.276 2.747-1.463 1.27 2.842 3.073-.492.278 3.1 3.066.533-.744 3.022 2.728 1.5-1.685 2.617 2.093 2.304-2.444 1.928 1.232 2.858-2.938 1.03.237 3.104-3.113.02-.784 3.013-2.95-.991-1.72 2.594z"}),f.createElement("linearGradient",{x1:"19.142%",y1:"10.021%",x2:"79.509%",y2:"86.458%",id:"bits-leaderboard-bronze-linearGradient-3"},f.createElement("stop",{offset:"0%"}),f.createElement("stop",{stopColor:"#494949",offset:"9.355%"}),f.createElement("stop",{stopColor:"#BCBCBC",offset:"13.369%"}),f.createElement("stop",{stopColor:"#FFF",offset:"20.419%"}),f.createElement("stop",{stopColor:"#818181",offset:"25.723%"}),f.createElement("stop",{stopColor:"#5D5D5D",offset:"39.965%"}),f.createElement("stop",{stopColor:"#EFEFEF",offset:"45.279%"}),f.createElement("stop",{stopColor:"#7A7A7A",offset:"50.012%"}),f.createElement("stop",{stopColor:"#717171",offset:"57.677%"}),f.createElement("stop",{stopColor:"#B5B5B5",offset:"63.526%"}),f.createElement("stop",{stopColor:"#888",offset:"69.88%"}),f.createElement("stop",{stopColor:"#F1F1F1",offset:"75.215%"}),f.createElement("stop",{stopColor:"#B9B9B9",offset:"79.325%"}),f.createElement("stop",{stopColor:"#545454",offset:"92.875%"}),f.createElement("stop",{offset:"100%"})),f.createElement("linearGradient",{x1:"19.604%",y1:"10.043%",x2:"84.81%",y2:"89.074%",id:"bits-leaderboard-bronze-linearGradient-4"},f.createElement("stop",{stopColor:"#F2C6A5",offset:"0%"}),f.createElement("stop",{stopColor:"#864223",offset:"100%"})),f.createElement("circle",{id:"bits-leaderboard-bronze-path-5",cx:"16",cy:"16",r:"11"})),f.createElement("g",{id:"bits-leaderboard-bronze-Symbols",fill:"none",fillRule:"evenodd"},f.createElement("g",{id:"bits-leaderboard-bronze-Medal-3-bronze-lg"},f.createElement("g",{id:"bits-leaderboard-bronze-Star-Copy-2B"},f.createElement("use",{fill:"#DE9572",xlinkHref:"#bits-leaderboard-bronze-path-2"}),f.createElement("path",{stroke:"url(#bits-leaderboard-bronze-linearGradient-1)",d:"M16 29.53l-2.59 1.988-1.803-2.72-3.095 1.039-.823-3.16-3.264-.021.248-3.256-3.08-1.08 1.29-2.998-2.562-2.023 2.195-2.416-1.768-2.745 2.861-1.573-.78-3.17 3.216-.559.292-3.252L9.56 4.1l1.332-2.98 2.881 1.534L16 .267l2.227 2.387 2.881-1.535L22.44 4.1l3.223-.516.292 3.252 3.216.559-.78 3.17 2.86 1.573-1.767 2.745 2.195 2.416-2.563 2.023 1.292 2.998-3.08 1.08.247 3.256-3.264.021-.823 3.16-3.095-1.04-1.803 2.721L16 29.53z"})),f.createElement("path",{id:"bits-leaderboard-bronze-Star-Copy-3B",fill:"url(#bits-leaderboard-bronze-linearGradient-3)",opacity:".4",d:"M16 28.9l-2.469 1.895-1.72-2.594-2.95.991-.784-3.012-3.113-.02.237-3.104-2.938-1.03 1.232-2.86L1.05 17.24l2.093-2.304-1.685-2.617 2.728-1.5-.744-3.022 3.066-.533.278-3.1 3.073.492 1.27-2.842 2.747 1.463L16 1l2.123 2.276 2.747-1.463 1.27 2.842 3.073-.492.278 3.1 3.066.533-.744 3.022 2.728 1.5-1.685 2.617 2.093 2.304-2.444 1.928 1.232 2.858-2.938 1.03.237 3.104-3.113.02-.784 3.013-2.95-.991-1.72 2.594z"}),f.createElement("g",{id:"bits-leaderboard-bronze-Oval-Copy-B"},f.createElement("use",{fill:"#A96643",xlinkHref:"#bits-leaderboard-bronze-path-5"}),f.createElement("circle",{stroke:"url(#bits-leaderboard-bronze-linearGradient-4)",cx:"16",cy:"16",r:"11.5"}))))):e===Mt.Default?f.createElement("svg",{width:n,height:n,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},f.createElement("defs",null,f.createElement("path",{id:"bits-leaderboard-default-path-1",d:"M10 16.88l-1.31676 1.01089-.91717-1.38367-1.57365.52857-.4182-1.6065-1.66001-.01104.12608-1.65525-1.56648-.54944.65672-1.52462-1.3032-1.0283L3.1435 9.43184l-.8987-1.39573 1.45468-.79978-.39681-1.61193 1.63555-.2841.14808-1.65343 1.63918.26234.67692-1.51576 1.46519.78037L10 2l1.13241 1.21383 1.46519-.78037.67692 1.51576 1.63918-.26234.14808 1.65342 1.63555.28411-.3968 1.61193 1.45467.79978-.8987 1.39573 1.11618 1.22878-1.3032 1.02831.6567 1.52462-1.56647.54944.12608 1.65525-1.66.01104-.41821 1.6065-1.57365-.52857-.91717 1.38367z"})),f.createElement("g",{id:"bits-leaderboard-default-Symbols",fill:"none","fill-rule":"evenodd"},f.createElement("g",{id:"bits-leaderboard-default-bitbadge/blank"},f.createElement("g",{id:"bits-leaderboard-default-Star"},f.createElement("use",{fill:"#D7CCEB",xlinkHref:"#bits-leaderboard-default-path-1"}),f.createElement("path",{stroke:"#D7CCEB",d:"M10 17.51035l-1.4374 1.10351-1.0012-1.51044-1.71783.577-.45652-1.7537-1.8121-.01204.13763-1.8069-1.71-.59979.71688-1.6643-1.4226-1.12253L2.5153 9.3798l-.98104-1.52362 1.58796-.87305-.43317-1.75961 1.7854-.31014.16165-1.80492 1.78937.28638.73894-1.65463 1.59943.85187L10 1.26703l1.23616 1.32505 1.59943-.85187.73894 1.65463 1.78937-.28638.16165 1.80492 1.7854.31014-.43317 1.7596 1.58796.87306-.98104 1.52362 1.21844 1.34136-1.4226 1.12252.71688 1.66431-1.71.59978.13763 1.8069-1.8121.01205-.45652 1.7537-1.71782-.577-1.00121 1.51044L10 17.51036z"})),f.createElement("circle",{id:"bits-leaderboard-default-Oval-2",fill:"#EEE9F6",cx:"10",cy:"10",r:"6"})))):null},t}(f.Component),Yt=n("nrdj"),Kt=n("XFkZ"),Jt=n("CFVp"),Zt=(n("A0Hf"),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d.__extends(t,e),t.prototype.render=function(){if(this.props.data&&this.props.data.loading)return f.createElement(H._1,{display:H.M.InlineFlex,alignItems:H.c.Center,flexGrow:1});if(this.props.data&&!this.props.data.loading&&this.props.data.error)return f.createElement(H._1,{display:H.M.InlineFlex,alignItems:H.c.Center,flexGrow:1},f.createElement(H._1,{padding:{top:1,x:4}},f.createElement(H._14,{asset:H._15.DeadGlitch,height:24,width:24})));var e=this.props.bitsConfig?this.props.bitsConfig:Object(Jt.a)(),t=null,n="";if(this.props.data&&this.props.data.user){n=this.props.data.user.displayName||this.props.data.user.login;var i=f.createElement(H._34,{ellipsis:!0},n);this.props.selfId&&this.props.selfId===this.props.id&&(i=f.createElement(H._34,{ellipsis:!0,color:H.I.Link},n)),t=f.createElement(H._1,{ellipsis:!0,className:"bits-leaderboard-expanded-leaderboard-entry__username",margin:{x:1},display:H.M.InlineBlock},i)}var a=null;a=this.props.selfId&&this.props.selfId===this.props.id?f.createElement(H._5,{label:this.props.rank.toString(),type:H._6.Brand}):f.createElement(H._34,{color:H.I.Link,bold:!0},this.props.rank);var r,s=this.props.data&&this.props.data.user&&this.props.data.user.profileImageURL||u.a.defaultAvatarURL;return r=f.createElement(H._1,{overflow:H._4.Hidden,display:H.M.InlineFlex,flexGrow:1,fullWidth:!0,alignItems:H.c.Center},f.createElement(H._1,{className:"bits-leaderboard-expanded-leaderboard-entry__rank"},a),f.createElement("img",{src:s,className:"bits-leaderboard-expanded-leaderboard-entry__avatar"}),t,f.createElement(H._1,{flexShrink:0,className:"bits-leaderboard-expanded-leaderboard-entry__score",margin:{left:"auto"},display:H.M.InlineBlock},f.createElement(Yt.a,{animated:!1,showImage:!0,showAmount:!0,prefix:"Cheer",bitsConfig:e,size:Yt.b.ExtremelySmall,display:H.M.InlineFlex,amount:this.props.score,formattedNumber:!0,alignItems:H.c.Center}))),f.createElement(H._1,{className:"bits-leaderboard-expanded-leaderboard-entry",display:H.M.Block,alignItems:H.c.Center},r)},t}(f.Component)),Xt=Object(k.d)(Object(b.a)(Kt,{name:"data",skip:function(e){return!e.id},options:function(e){return{variables:{userID:e.id,profileImageWidth:50}}}}))(Zt),en=(n("QgG+"),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d.__extends(t,e),t.prototype.render=function(){if(this.props.data&&this.props.data.loading)return f.createElement(H._1,{display:H.M.InlineFlex,alignItems:H.c.Center,flexGrow:1});if(this.props.data&&!this.props.data.loading&&this.props.data.error)return f.createElement(H._1,{display:H.M.InlineFlex,alignItems:H.c.Center,flexGrow:1},f.createElement(H._1,{padding:{top:1,x:4}},f.createElement(H._14,{asset:H._15.DeadGlitch,height:24,width:24})));var e=this.props.bitsConfig?this.props.bitsConfig:Object(Jt.a)(),t=null,n="";if(this.props.data&&this.props.data.user){n=this.props.data.user.displayName||this.props.data.user.login;var i=f.createElement(H._34,{ellipsis:!0,bold:!0},n);this.props.selfId&&this.props.selfId===this.props.id&&(i=f.createElement(H._34,{ellipsis:!0,color:H.I.Link},n)),t=f.createElement(H._1,{ellipsis:!0,className:"bits-leaderboard-expanded-top-three-entry__username",margin:{x:.5},display:H.M.InlineBlock},i)}var a=null;a=this.props.selfId&&this.props.selfId===this.props.id?f.createElement(H._5,{label:this.props.rank.toString(),type:H._6.Brand}):f.createElement(H._34,{color:H.I.Link,bold:!0},this.props.rank);var r,s=this.props.data&&this.props.data.user&&this.props.data.user.profileImageURL||u.a.defaultAvatarURL;return r=f.createElement(H._1,{overflow:H._4.Hidden,display:H.M.InlineFlex,flexGrow:1,fullWidth:!0,alignItems:H.c.Center},f.createElement(H._1,{className:"bits-leaderboard-expanded-top-three-entry__rank"},a),f.createElement($t,{size:zt.Big,medal:this.props.medal,profileImageUrl:s}),t,f.createElement(H._1,{flexShrink:0,className:"bits-leaderboard-expanded-top-three-entry__score",margin:{left:"auto"},display:H.M.InlineBlock},f.createElement(Yt.a,{animated:!1,showImage:!0,showAmount:!0,prefix:"Cheer",bitsConfig:e,size:Yt.b.ExtremelySmall,display:H.M.InlineFlex,amount:this.props.score,formattedNumber:!0,alignItems:H.c.Center}))),f.createElement(H._1,{className:"bits-leaderboard-expanded-top-three-entry",display:H.M.Block},r)},t}(f.Component)),tn=Object(k.d)(Object(b.a)(Kt,{name:"data",skip:function(e){return!e.id},options:function(e){return{variables:{userID:e.id,profileImageWidth:50}}}}))(en);!function(e){e[e.Weekly=0]="Weekly",e[e.AllTime=1]="AllTime"}(Qt||(Qt={}));n("XpQm");var nn,an=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderExpandArrow=function(){return f.createElement(H._1,{position:H._8.Absolute,attachRight:!0,attachTop:!0,className:"bits-leaderboard-expanded__arrow",display:H.M.Flex,alignItems:H.c.Stretch},f.createElement(H.u,{icon:H._15.AngleUp,size:H.x.Small,onClick:t.props.toggleExpand}))},t}return d.__extends(t,e),t.prototype.render=function(){var e=this.shouldRenderBottomContent(),t=this.renderTopThreeEntries(),n=this.renderTopTenEntries(),i=this.renderExpandArrow(),a=this.renderTopSection(),r=null,s=null;return e&&((r=this.renderUserPlaceEntry())||(s=this.renderBottomSection())),f.createElement(H._24,{background:H.m.Base,padding:{top:1}},a,f.createElement("ul",null,t,n,r),s,i)},t.prototype.renderTopThreeEntries=function(){if(!this.props.topEdges)return null;var e=[];return this.props.topEdges[0]&&e.push(this.renderTopThreeEntry(this.props.topEdges[0],Mt.Gold)),this.props.topEdges[1]&&e.push(this.renderTopThreeEntry(this.props.topEdges[1],Mt.Silver)),this.props.topEdges[2]&&e.push(this.renderTopThreeEntry(this.props.topEdges[2],Mt.Bronze)),e},t.prototype.renderTopSection=function(){var e=Object(u.d)("Weekly Top Cheerers","Bits--PinnedCheerV2"),t=f.createElement(H._34,{type:H._39.Span},Object(u.d)("Resets in {time} days",{time:"5"},"Bits--PinnedCheerV2"));return this.props.leaderboardMode===Qt.AllTime&&(e=Object(u.d)("All-time Top Cheerers","Bits--PinnedCheerV2"),t=null),f.createElement(H._1,{display:H.M.Flex,alignItems:H.c.Center,flexDirection:H.O.Column},f.createElement(H._34,{type:H._39.H5,bold:!0},e),t,f.createElement(H._1,{className:"bits-leaderboard-expanded__section-break",margin:{y:1}}))},t.prototype.renderBottomSection=function(){return f.createElement(H._1,{margin:{top:1}},f.createElement(H._24,{borderTop:!0},f.createElement(H._1,{display:H.M.Flex,flexDirection:H.O.Column,alignItems:H.c.Center,margin:{top:1}},f.createElement(H._14,{asset:H._15.Bits,type:H._16.Brand}),f.createElement(H._34,{type:H._39.Span,bold:!0},Object(u.d)("Cheer your way to the top!","Bits--PinnedCheersV2")),f.createElement(H._34,{type:H._39.Span,color:H.I.Link,bold:!0},Object(u.d)("Learn More","Bits--PinnedCheersV2")))))},t.prototype.renderTopThreeEntry=function(e,t){return f.createElement(H._1,{key:e.node.id,padding:{x:1,top:.5}},f.createElement(tn,{id:e.node.id,score:e.node.score,bitsConfig:this.props.bitsConfig,medal:t,selfId:this.props.selfId,rank:e.node.rank}))},t.prototype.renderTopTenEntries=function(){var e=this;if(!this.props.topEdges)return null;return this.props.topEdges.slice(3,10).map(function(t){return e.renderTopTenEntry(t.node)})},t.prototype.renderTopTenEntry=function(e){return f.createElement(H._1,{key:e.id,padding:{x:1,top:.5}},f.createElement(Xt,{id:e.id,score:e.score,bitsConfig:this.props.bitsConfig,selfId:this.props.selfId,rank:e.rank}))},t.prototype.shouldRenderBottomContent=function(){var e=this;if(!this.props.topEdges)return!1;var t=!0;return this.props.topEdges.forEach(function(n){n.node.id===e.props.selfId&&(t=!1)}),t},t.prototype.renderUserPlaceEntry=function(){if(!this.props.userPlaceEdge)return null;var e=this.renderTopTenEntry(this.props.userPlaceEdge);return f.createElement(H._1,{margin:{top:1}},f.createElement(H._24,{borderTop:!0},f.createElement(H._1,{margin:{top:1}},e)))},t}(f.Component),rn=(n("TlYw"),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d.__extends(t,e),t.prototype.render=function(){if(this.props.data&&this.props.data.loading)return f.createElement(H._1,{display:H.M.InlineBlock,alignItems:H.c.Center,flexGrow:1});if(this.props.data&&!this.props.data.loading&&this.props.data.error)return f.createElement(H._1,{display:H.M.InlineBlock,alignItems:H.c.Center,flexGrow:1},f.createElement(H._1,{padding:{top:1,x:4}},f.createElement(H._14,{asset:H._15.DeadGlitch,height:24,width:24})));var e=this.props.bitsConfig?this.props.bitsConfig:Object(Jt.a)(),t=null,n="";if(this.props.data&&this.props.data.user){n=this.props.data.user.displayName||this.props.data.user.login;var i=f.createElement(H._34,{ellipsis:!0,bold:!0},n);this.props.selfId&&this.props.selfId===this.props.id&&(i=f.createElement(H._5,{label:n,type:H._6.Brand})),t=f.createElement(H._1,{ellipsis:!0,className:"bits-leaderboard-header-first-entry__username"},i)}var a;if(this.props.isEmpty||this.props.data&&!this.props.data.user){var r=l(1);a=f.createElement(H._1,{className:"bits-leaderboard-header-first-entry__text"},f.createElement(H._1,{overflow:H._4.Hidden,display:H.M.InlineFlex,flexGrow:1},f.createElement(H._1,{flexShrink:0},f.createElement($t,{size:zt.Big,medal:Mt.Default})),f.createElement(H._34,{color:H.I.Link,bold:!0},r)))}else{var s=this.props.data&&this.props.data.user&&this.props.data.user.profileImageURL||u.a.defaultAvatarURL;a=f.createElement(H._1,{overflow:H._4.Hidden,display:H.M.InlineFlex,flexGrow:1},f.createElement(H._1,{flexShrink:0},f.createElement($t,{size:zt.Big,medal:Mt.Gold,profileImageUrl:s})),f.createElement(H._1,{className:"bits-leaderboard-header-first-entry__text",margin:{left:.5}},t,f.createElement(H._1,{className:"bits-leaderboard-header-first-entry__score"},f.createElement(Yt.a,{animated:!1,showImage:!0,showAmount:!0,prefix:"Cheer",bitsConfig:e,size:Yt.b.ExtremelySmall,display:H.M.InlineFlex,amount:this.props.score,formattedNumber:!0,alignItems:H.c.Center}))))}return this.props.isEmpty||(a=f.createElement(H._42,{label:n,direction:H._44.Bottom},a)),f.createElement(H._1,{className:"bits-leaderboard-header-first-entry",padding:{x:1,bottom:.5,top:1},flexShrink:0,alignItems:H.c.Center},a)},t}(f.Component)),sn=Object(k.d)(Object(b.a)(Kt,{name:"data",skip:function(e){return!e.id},options:function(e){return{variables:{userID:e.id,profileImageWidth:50}}}}))(rn),on=(n("As4U"),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d.__extends(t,e),t.prototype.render=function(){if(this.props.data&&this.props.data.loading)return f.createElement(H._1,{display:H.M.InlineFlex,alignItems:H.c.Center,flexGrow:1});if(this.props.data&&!this.props.data.loading&&this.props.data.error)return f.createElement(H._1,{display:H.M.InlineFlex,alignItems:H.c.Center,flexGrow:1},f.createElement(H._1,{padding:{top:1,x:4}},f.createElement(H._14,{asset:H._15.DeadGlitch,height:24,width:24})));var e=this.props.bitsConfig?this.props.bitsConfig:Object(Jt.a)(),t=null,n="";if(this.props.data&&this.props.data.user){n=this.props.data.user.displayName||this.props.data.user.login;var i=f.createElement(H._34,{ellipsis:!0,bold:!0},n);this.props.selfId&&this.props.selfId===this.props.id&&(i=f.createElement(H._5,{label:n,type:H._6.Brand})),t=f.createElement(H._1,{ellipsis:!0,className:"bits-leaderboard-header-runner-up-entry__username",margin:{x:.5}},i)}var a;if(this.props.isEmpty||this.props.data&&!this.props.data.user){var r=l(this.props.rank?this.props.rank:0);a=f.createElement(H._1,{overflow:H._4.Hidden,display:H.M.InlineFlex,flexGrow:1,fullWidth:!0},f.createElement(H._1,{flexShrink:0},f.createElement($t,{size:zt.Small,medal:Mt.Default})),f.createElement(H._1,{ellipsis:!0,className:"bits-leaderboard-header-runner-up-entry__username",margin:{x:.5}},f.createElement(H._34,{color:H.I.Link,bold:!0},r)))}else{var s=this.props.data&&this.props.data.user&&this.props.data.user.profileImageURL||u.a.defaultAvatarURL;a=f.createElement(H._1,{overflow:H._4.Hidden,display:H.M.InlineFlex,flexGrow:1,fullWidth:!0},f.createElement(H._1,{flexShrink:0},f.createElement($t,{size:zt.Small,medal:this.props.medal,profileImageUrl:s})),t,f.createElement(H._1,{flexShrink:0,className:"bits-leaderboard-header-runner-up-entry__score",margin:{left:"auto"}},f.createElement(Yt.a,{animated:!1,showImage:!0,showAmount:!0,prefix:"Cheer",bitsConfig:e,size:Yt.b.ExtremelySmall,display:H.M.InlineFlex,amount:this.props.score,formattedNumber:!0,alignItems:H.c.Center})))}return this.props.isEmpty||(a=f.createElement(H._42,{label:n,direction:H._44.Bottom,display:H.M.Block},a)),f.createElement(H._1,{className:"bits-leaderboard-header-runner-up-entry",display:H.M.Block,alignItems:H.c.Center},a)},t}(f.Component)),ln=Object(k.d)(Object(b.a)(Kt,{name:"data",skip:function(e){return!e.id},options:function(e){return{variables:{userID:e.id,profileImageWidth:50}}}}))(on),cn=(n("PJOa"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderFirstPlaceEntry=function(){var e=null;t.props.topEdges&&t.props.topEdges[0]&&(e=t.props.topEdges[0]);var n;return n=e?f.createElement(sn,{selfId:t.props.selfId,id:e.node.id,score:e.node.score,bitsConfig:t.props.bitsConfig}):f.createElement(sn,{isEmpty:!0}),f.createElement(H.V,{key:1},n)},t.renderExpandArrow=function(){return f.createElement(H._1,{className:"pinned-cheer-v2-header--arrow",flexGrow:0,flexShrink:0,justifyContent:H._0.End,alignItems:H.c.Stretch,fullHeight:!0,display:H.M.Flex},f.createElement(H.u,{icon:H._15.AngleDown,size:H.x.Small,onClick:t.props.toggleExpand}))},t}return d.__extends(t,e),t.prototype.render=function(){var e=this.renderFirstPlaceEntry(),t=null,n=null,i=this.renderExpandArrow();if(this.props.topEdges&&this.props.topEdges[0]){t=this.renderRunnerUpEntry(2,Mt.Silver);var a=this.props.topEdges[1]?3:0;n=this.renderRunnerUpEntry(a,Mt.Bronze)}return f.createElement(H._24,{className:"pinned-cheer-v2-header",background:H.m.Base},f.createElement(H._1,{display:H.M.Flex,flexWrap:H.P.NoWrap,justifyContent:H._0.Between,fullHeight:!0,fullWidth:!0},e,f.createElement(H._1,{className:"pinned-cheer-v2-header__runner-up-entries"},t,n),i))},t.prototype.renderRunnerUpEntry=function(e,t){var n=null;e>0&&this.props.topEdges&&this.props.topEdges[e-1]&&(n=this.props.topEdges[e-1]);var i;return i=n?f.createElement(ln,{selfId:this.props.selfId,id:n.node.id,score:n.node.score,medal:t,bitsConfig:this.props.bitsConfig}):f.createElement(ln,{isEmpty:!0,medal:Mt.Default,rank:e}),f.createElement(H.V,{key:e},i)},t}(f.Component)),dn=n("aK1p"),un=(n("PK6A"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isExpanded:!1},t.toggleIsExpanded=function(){t.setState({isExpanded:!t.state.isExpanded})},t}return d.__extends(t,e),t.prototype.render=function(){if(this.props.data.loading||this.props.data.error||!this.props.data.user||null===this.props.data.user.cheer||null===this.props.data.user.cheer.leaderboard)return null;var e=this.props.data.user.cheer.leaderboard.entries.edges.slice(0,10),t=null;this.props.data.user.self&&this.props.data.user.self.bitsLeaderboardEntry&&(t=this.props.data.user.self.bitsLeaderboardEntry);var n=null;this.state.isExpanded&&(n=f.createElement(an,{topEdges:e,userPlaceEdge:t,toggleExpand:this.toggleIsExpanded,selfId:this.props.userID,bitsConfig:this.props.bitsConfig}));var i=null;return this.state.isExpanded||(i=f.createElement(cn,{topEdges:e,toggleExpand:this.toggleIsExpanded,selfId:this.props.userID,bitsConfig:this.props.bitsConfig})),f.createElement(H._1,{className:"pinned-cheer-v2",zIndex:H._51.Default},f.createElement(H._24,{borderBottom:!0},i,n))},t}(f.Component)),pn=Object(k.d)(Object(b.a)(dn,{name:"data",options:function(e){return{variables:{channelID:e.channelID}}}}),Object(ke.a)(function(e){return{topic:e.data.user&&e.data.user.cheer&&e.data.user.cheer.leaderboard?Object(P.a)(e.data.user.cheer.leaderboard):"",mutator:function(t,n){if(n.user&&null!==n.user.cheer&&null!==n.user.cheer.leaderboard){T.j.debug("Received pubsub update from leaderboard");var i=t.top.map(function(e){return Object(R.b)(e)});0!==i.length&&0!==n.user.cheer.leaderboard.entries.edges.length&&i.length===n.user.cheer.leaderboard.entries.edges.length||setTimeout(function(){e&&e.data&&e.data.refetch&&e.data.refetch()});for(var a=0;a<n.user.cheer.leaderboard.entries.edges.length;a++){if(n.user.cheer.leaderboard.entries.edges[a].node.score!==i[a].node.score){setTimeout(function(){e&&e.data&&e.data.refetch&&e.data.refetch()});break}}return n}},skip:e.data.loading||!!e.data.error||!e.data.user||null===e.data.user.cheer||null===e.data.user.cheer.leaderboard,query:dn,variables:{channelID:e.channelID}}}))(un),mn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={cheerIsTall:!1,recentCheerID:null,recentCheerExpireTime:null,pcheersV2Enabled:!1},t}return d.__extends(t,e),t.prototype.componentWillMount=function(){this.getGiftingExperimentAssignment()},t.prototype.render=function(){var e=null;return this.props.bitsConfig&&(e=this.state&&this.state.pcheersV2Enabled&&this.props.isStaff?f.createElement(pn,{channelID:this.props.channelID,userID:this.props.userID,bitsConfig:this.props.bitsConfig}):f.createElement(qt,{badgeData:this.props.badgeData,bitsConfig:this.props.bitsConfig,blockLinks:this.props.blockLinks,channelID:this.props.channelID,currentUserDisplayName:this.props.currentUserDisplayName,currentUserLogin:this.props.currentUserLogin})),e},t.prototype.getGiftingExperimentAssignment=function(){return d.__awaiter(this,void 0,void 0,function(){var e;return d.__generator(this,function(t){switch(t.label){case 0:e="off",t.label=1;case 1:return t.trys.push([1,3,,4]),[4,u.n.experiments.getAssignment("TWILIGHT_LEADERBOARDS")];case 2:return e=t.sent(),[3,4];case 3:return t.sent(),e="off",[3,4];case 4:return this.setState({pcheersV2Enabled:"on"===e}),[2]}})})},t}(f.Component),hn=Object(h.b)(function(e){var t=Object(g.c)(e);return{isStaff:t&&t.roles&&t.roles.isStaff}})(mn);!function(e){e.Bits="bits",e.Leaderboard="bits-leader"}(nn||(nn={}));var gn;!function(e){e.Badge="badge_update",e.Balance="balance_update"}(gn||(gn={}));var fn,bn=n("6BvN"),vn=n("+xm8"),kn=n("HM6l"),yn=n("f2i/"),_n=n("c3pS"),Cn=(n("56e8"),function(e){var t=void 0!==e.progress,n=f.createElement("img",{className:"cheer-badge__image",src:e.badge.image1x,alt:e.badge.title,srcSet:e.badge.image1x+" 1x, "+e.badge.image2x+" 2x, "+e.badge.image4x+" 4x"});if(!t)return n;var i=e.progress?Math.max(Math.round(18*(1-e.progress)),1):18;return f.createElement("div",{className:"cheer-badge__progress-container"},n,f.createElement("div",{className:"cheer-badge__progress-overlay",style:{width:i+"px"},"data-test-selector":"cheer-progress"}))}),Sn=n("3iBR"),En=function(e){var t;e.selfBitsBadge&&(e.selfBitsBadge.current||e.selfBitsBadge.next)&&(t=f.createElement(H._1,{padding:{bottom:.5}},e.selfBitsBadge.current&&f.createElement(H._1,{display:H.M.Inline,margin:{right:.5}},f.createElement(Cn,{badge:e.selfBitsBadge.current})),e.selfBitsBadge.next&&f.createElement(Cn,{badge:e.selfBitsBadge.next,progress:e.selfBitsBadge.progress}),e.selfBitsBadge.nextBits&&Object(u.d)("Next badge unlocks in {bitsToNextBadge} Bits!",{bitsToNextBadge:e.selfBitsBadge.nextBits-e.selfBitsBadge.totalBits},"Bits--BalanceFooter")));var n=Object(u.d)("{bitsGem} Log in to see your Bits balance",{bitsGem:f.createElement(W.a,{count:100,withImage:!0,bitsConfig:e.bitsConfig,themeOverride:y.a.Dark})},"Bits--BalanceFooter");return void 0!==e.balance&&null!==e.balance&&(n=Object(u.d)("You have {currentBits}",{currentBits:f.createElement(W.a,{count:e.balance,withImage:!0,withText:!0,bitsConfig:e.bitsConfig,themeOverride:y.a.Dark})},"Bits--BalanceFooter")),f.createElement(H._1,{flexGrow:1,padding:1,className:"bits-balance-footer"},t,f.createElement(H._1,{display:H.M.Flex,flexGrow:1,alignItems:H.c.Center,justifyContent:H._0.Between},f.createElement("div",null,n),f.createElement(H.u,{disabled:void 0===e.balance||void 0!==e.balance&&e.balance>Sn.i,onClick:e.onClickGetBits,"data-test-selector":"get-bits-button","data-a-target":"get-bits-button"},Object(u.d)("Get Bits","Bits--BalanceFooter"))))},Nn=function(){return f.createElement(H._24,{className:"t-bits-card",display:H.M.Flex,flexDirection:H.O.Column,alignItems:H.c.Center,justifyContent:H._0.Center,textAlign:H._35.Center,padding:1,border:!0,background:H.m.Base,elevation:3,fullWidth:!0},f.createElement(H._34,{italic:!0},Object(u.d)("Have no fear, your Bits inventory is safe! The ability to Cheer will return shortly.","BitsCard")))},wn=n("QRuM"),Tn=n("ySfT"),Dn=function(e){return f.createElement(H._1,{display:H.M.Flex,flexGrow:1,flexDirection:H.O.Column,justifyContent:H._0.Center,alignItems:H.c.Center,padding:1},f.createElement(H._1,{padding:{top:2,bottom:2}},f.createElement(H._34,{type:H._39.H5,color:H.I.Link,bold:!0},Object(u.d)("Cheering Supports Your Streamer!","Bits--CheermoteIntro"))),f.createElement(H._34,null,Object(u.d)("Select a Cheermote to start your Cheer","Bits--CheermoteIntro")),f.createElement(H._1,{padding:{top:2,bottom:1}},f.createElement("a",{href:"#",onClick:e.onClickHelp,"data-test-selector":"help-link"},Object(u.d)("How do I cheer?","Bits--CheermoteIntro"))))},In=function(e){var t=e.headline||e.prefix+(e.tier||"");if(e.tournament&&e.tier<=0){var n=e.tournament.teams.find(function(t){return t.id===e.prefix});n&&(t=n.name+" - "+e.prefix)}var i=e.tier;return e.event&&!e.tier&&(i=1),f.createElement(H._1,{display:H.M.Flex,flexDirection:H.O.Column,alignItems:H.c.Center,padding:1},f.createElement(H._34,{type:H._39.H4,bold:!0},t),f.createElement(Yt.a,{prefix:e.prefix,amount:i,bitsConfig:e.bitsConfig,showImage:!0,showAmount:!(e.event&&!e.tier)}))},On=(n("DVR9"),function(e){var t=null;e.minToCheer>1&&(t=f.createElement(H._34,{color:H.I.Alt2,italic:!0},Object(u.d)("This channel has a Cheer minimum of {minToCheer} Bits",{minToCheer:e.minToCheer},"Bits--CheermoteTierIntro")));var n=null;return e.minToPin>0&&(n=f.createElement(H._34,{color:H.I.Alt2,italic:!0},Object(u.d)("Pinning your Cheer is a minimum of {minToPin} Bits",{minToPin:e.minToPin},"Bits--CheermoteTierIntro"))),f.createElement(H._1,{display:H.M.Flex,flexGrow:1,flexDirection:H.O.Column,alignItems:H.c.Center,justifyContent:H._0.Center,padding:1,className:"cheermote-tier-intro"},f.createElement(H._1,{padding:{x:4},margin:{bottom:1}},f.createElement(H._34,{color:H.I.Alt2},Object(u.d)("Cheermotes have multiple tiers, rollover below to see each one!","Bits--CheermoteTierIntro"))),t,n)}),Mn=n("1bR2"),xn=n.n(Mn),Rn=n("vDGQ"),Ln=(n("CGWe"),function(e){return Object(Rn.d)({action:Rn.a.View,type:Rn.c.BitsIntro,channelId:e.channelID}),f.createElement(H._1,{"data-test-selector":"crate-intro"},f.createElement(H._1,{padding:{x:1,top:2,bottom:1}},f.createElement(H._34,{fontSize:H.Q.Size4,bold:!0},Object(u.d)("Share the Holiday Cheer!","Crates"))),f.createElement(H._24,{className:"crates-holiday-background",background:H.m.Alt,padding:1,margin:{y:1},display:H.M.Flex,justifyContent:H._0.Around,alignItems:H.c.End,borderTop:!0,borderBottom:!0},f.createElement(H.e,{type:H.i.BounceIn,delay:H.f.Long,enabled:!0},f.createElement(H._42,{label:"XmasRaid"},f.createElement("img",{height:"28",width:"28",srcSet:"https://static-cdn.jtvnw.net/emoticons/v1/633161/1.0 1.0x, https://static-cdn.jtvnw.net/emoticons/v1/633161/2.0 2.0x, https://static-cdn.jtvnw.net/emoticons/v1/633161/3.0 3.0x",alt:"XmasRaid"}))),f.createElement(H.e,{type:H.i.BounceIn,delay:H.f.Medium,enabled:!0},f.createElement(H._42,{label:"MerryPurple"},f.createElement("img",{height:"28",width:"28",srcSet:"https://static-cdn.jtvnw.net/emoticons/v1/633177/1.0 1.0x, https://static-cdn.jtvnw.net/emoticons/v1/633177/2.0 2.0x, https://static-cdn.jtvnw.net/emoticons/v1/633177/3.0 3.0x",alt:"MerryPurple"}))),f.createElement(H.e,{type:H.i.BounceIn,delay:H.f.Short,enabled:!0},f.createElement(H._42,{label:"GiftRage"},f.createElement("img",{height:"28",width:"28",srcSet:"https://static-cdn.jtvnw.net/emoticons/v1/634141/1.0 1.0x, https://static-cdn.jtvnw.net/emoticons/v1/634141/2.0 2.0x, https://static-cdn.jtvnw.net/emoticons/v1/634141/3.0 3.0x",alt:"GiftRage"}))),f.createElement("img",{src:xn.a,height:"50",width:"50"}),f.createElement(H.e,{type:H.i.BounceIn,delay:H.f.Short,enabled:!0},f.createElement(H._42,{label:"RudolphWhoa"},f.createElement("img",{height:"28",width:"28",srcSet:"https://static-cdn.jtvnw.net/emoticons/v1/633166/1.0 1.0x, https://static-cdn.jtvnw.net/emoticons/v1/633166/2.0 2.0x, https://static-cdn.jtvnw.net/emoticons/v1/633166/3.0 3.0x",alt:"RudolphWhoa"}))),f.createElement(H.e,{type:H.i.BounceIn,delay:H.f.Medium,enabled:!0},f.createElement(H._42,{label:"FeelsGingerMan"},f.createElement("img",{height:"28",width:"28",srcSet:"https://static-cdn.jtvnw.net/emoticons/v1/633171/1.0 1x,https://static-cdn.jtvnw.net/emoticons/v1/633171/2.0 2x,https://static-cdn.jtvnw.net/emoticons/v1/633171/3.0 4x",alt:"FeelsGingerMan"}))),f.createElement(H.e,{type:H.i.BounceIn,delay:H.f.Long,enabled:!0},f.createElement(H._42,{label:"OrnaMental"},f.createElement("img",{height:"28",width:"28",srcSet:"https://static-cdn.jtvnw.net/emoticons/v1/633170/1.0 1.0x, https://static-cdn.jtvnw.net/emoticons/v1/633170/2.0 2.0x, https://static-cdn.jtvnw.net/emoticons/v1/633170/3.0 3.0x",alt:"OrnaMental"})))),f.createElement(H._1,{padding:1},f.createElement(H._34,{type:H._39.P},Object(u.d)("Cheer any amount to support your streamer, and get a holiday gift! Cheer {minBits, number} Bits or more, and others in chat can get a gift too!",{minBits:250},"Crates")),f.createElement(H._34,{type:H._39.Strong},f.createElement("a",{href:"http://link.twitch.tv/holiday-emotes",target:"_blank",rel:"noreferrer noopener"},Object(u.d)("Details","Crates")))))}),Un=(n("kjfG"),function(){return f.createElement(H._1,{className:"owl-2018-introduction"},f.createElement(H._1,{padding:{top:2,bottom:1}},f.createElement(H._34,{fontSize:H.Q.Size5,bold:!0},Object(u.d)("Cheer with Bits and unlock loot!","OWL2018Introduction"))),f.createElement(H._1,{className:"owl-2018-introduction__banner-background",padding:{top:1}},f.createElement("img",{className:"owl-2018-introduction__banner-image",src:Sn.c+"/owl-2017/overwatch-wide.png"})),f.createElement(H._1,{padding:{x:2,top:1,bottom:.5}},f.createElement(H._34,null,Object(u.d)("Cheer with Bits to encourage your team and unlock exclusive emotes and in-game skins. Cheer 250 Bits or more and unlock an emote for others in chat!","OWL2018Introduction"))),f.createElement(H._1,{padding:{bottom:1}},f.createElement(H._34,{color:H.I.Link,bold:!0},Object(u.d)("Details","OWL2018Introduction"))))});!function(e){e.CratesChristmas="CratesChristmas",e.OWL2018="owl2018"}(fn||(fn={}));var Fn,jn=function(e){switch(e.event){case fn.OWL2018:return f.createElement(Un,null);case fn.CratesChristmas:return f.createElement(Ln,{onClickHelp:e.onClickHelp,channelID:e.channelID});default:return f.createElement(Dn,{onClickHelp:e.onClickHelp})}},Bn=n("N221"),An=n("cv4W"),Pn=n.n(An),Vn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d.__extends(t,e),t.prototype.render=function(){var e="";if(this.props.amount<250){var t=250-this.props.amount;e=Object(u.d)("{bitsToGo, plural, one {Cheer # more Bit to share gifts with chat!} other {Cheer # more Bits to share gifts with chat!}}",{bitsToGo:t},"Crates")}else e=Object(u.d)("Your Cheer will share gifts with chat!","Crates");return f.createElement(H._24,{className:"crate-christmas-2017-reminder",background:H.m.Alt,borderTop:!0,padding:1},f.createElement(H._1,{display:H.M.Inline,margin:{right:.5}},f.createElement("img",{src:Pn.a,height:"22",width:"22"})),f.createElement(H._34,{type:H._39.Strong},e))},t}(f.Component),Wn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d.__extends(t,e),t.prototype.render=function(){switch(this.props.event){case fn.CratesChristmas:return f.createElement(Vn,{amount:this.props.amount});default:return null}},t}(f.Component),Hn=function(e){var t=e.prefixes.map(function(t,n){if(t.alt&&t.cheerAmount)return f.createElement(H.V,{key:n,padding:{x:1}},f.createElement("li",null,f.createElement(Yt.a,{prefix:t.alt,amount:t.cheerAmount>Sn.k?Sn.k:t.cheerAmount,bitsConfig:e.bitsConfig,size:Yt.b.Small,showAmount:!0,showImage:!0})))});return f.createElement(H._1,{display:H.M.Flex,flexDirection:H.O.Row,alignItems:H.c.End,justifyContent:H._0.Center,flexWrap:H.P.Wrap,margin:{top:1},className:"pending-cheer-list"},t)},Gn=(n("KWLn"),function(e){var t;if(e.prefixes&&1===e.prefixes.length){var n=e.prefixes[0].alt;n&&(t=f.createElement(H._1,{padding:{top:2}},f.createElement(Yt.a,{prefix:n,amount:e.amount>Sn.k?Sn.k:e.amount,bitsConfig:e.bitsConfig,showImage:!0,showAmount:!0})))}else if(e.prefixes)t=f.createElement(H._1,{margin:{top:1}},f.createElement(Bn.b,{className:"pending-cheer__scroll-container"},f.createElement(Hn,{prefixes:e.prefixes,bitsConfig:e.bitsConfig})));else{var i=Object(u.d)("You are using a total of {totalBits} Bits to cheer in {channelName}!",{totalBits:f.createElement("strong",null,e.amount),channelName:e.channelDisplayName},"Bits--PendingCheer");t=f.createElement(H._1,{padding:{top:2,x:5}},f.createElement(H._34,{color:H.I.Alt2,"data-a-target":"total-bits-message"},i))}var a=null;e.purchaseMore&&e.purchaseMore>0&&(a=f.createElement(H._34,{"data-a-target":"need-more-bits-error"},Object(u.d)("Please purchase {neededBits} more Bits to Cheer",{neededBits:e.purchaseMore},"Bits--PendingCheer")));var r=null;if(e.largestCheermote>Sn.k){var s=Object(u.d)("{maximumCheerSize} is the largest Cheer emote, add another emote to Cheer louder!",{maximumCheerSize:Sn.k},"Bits--PendingCheer");a=f.createElement(H._34,{"data-a-target":"max-cheer-bits-error"},s)}if(e.amount<e.minToCheer){var o=Object(u.d)("Add {moreBitsAmount} Bits to reach this channel's minimum Cheer.",{moreBitsAmount:e.minToCheer-e.amount},"Bits--PendingCheer");a=f.createElement(H._34,{"data-a-target":"min-cheer-bits-error"},o)}if(e.smallestCheermote<e.minPerEmote){var l=Object(u.d)("This channel has set a minimum of {minPerEmote} Bits to use a Cheer emote in chat.",{minPerEmote:e.minPerEmote},"Bits--PendingCheer");r=f.createElement(H._34,{color:H.I.Alt2,italic:!0,"data-a-target":"min-emote-bits-error"},l)}var c=f.createElement(Yt.a,{amount:e.amount,prefix:Sn.g,bitsConfig:e.bitsConfig,display:H.M.Inline,showImage:!1,showAmount:!0,size:Yt.b.Medium});return f.createElement(H._1,null,f.createElement(H._1,{display:H.M.Flex,flexDirection:H.O.Column,alignItems:H.c.Center,padding:1,className:"pending-cheer"},f.createElement(H._34,{fontSize:H.Q.Size4,bold:!0},Object(u.d)("Cheering {totalBits} Bits",{totalBits:c},"Bits--PendingCheer")),!r&&t,!r&&a&&f.createElement(H._1,{padding:{top:1}},a),r&&f.createElement(H._1,{padding:{top:3,x:3}},r)),!r&&!a&&f.createElement(Wn,{event:e.event,amount:e.amount}))}),qn=n("qe65"),zn=(n("f1ZS"),{themed:!0,dark:{"1x":Sn.b+"/dark/animated/promo/intro.gif"},light:{"1x":Sn.b+"/light/animated/promo/intro.gif"}}),Qn=function(){return f.createElement(H._1,{display:H.M.Flex,flexDirection:H.O.Column,alignItems:H.c.Center,justifyContent:H._0.Center,flexGrow:1,className:"bits-sending"},f.createElement(H._1,{padding:{bottom:1}},f.createElement(qn.a,{sources:zn})),f.createElement(H._34,{italic:!0},Object(u.d)("Your Cheer is currently processing.","Bits--SendingBits")))},$n=(n("ZoRy"),function(e){var t=Object(u.d)("You are using {totalBits} Bits to cheer in {channelName}'s chat.",{totalBits:e.totalBits,channelName:e.channelDisplayName},"Bits--UndoPrompt"),n=null;if(e.prefixes&&e.prefixes.length>1)n=f.createElement(Bn.b,{className:"bits-undo-prompt__scroll-container"},f.createElement(H._1,{margin:{top:1}},f.createElement(Hn,{prefixes:e.prefixes,bitsConfig:e.bitsConfig})));else{var i=e.prefixes[0].alt;i&&(n=f.createElement(H._1,{padding:{bottom:1}},f.createElement(Yt.a,{prefix:i,amount:e.totalBits,bitsConfig:e.bitsConfig,showAmount:!0,showImage:!0})))}return f.createElement(H._1,{display:H.M.Flex,flexDirection:H.O.Column,alignItems:H.c.Center,justifyContent:H._0.Center,flexGrow:1,padding:1,className:"bits-undo-prompt"},n,f.createElement(H._34,null,t))}),Yn=function(e){var t=u.b.get("crate_snowman_launch",wn.a.Off),n=t===wn.a.On||t===wn.a.StaffOnly&&e.isStaff?fn.CratesChristmas:null,i=e.event||n;if(e.isSending)return e.totalBits<Sn.l?f.createElement(Qn,null):f.createElement($n,{bitsConfig:e.bitsConfig,channelDisplayName:e.displayName,prefixes:e.currentCheers,totalBits:e.totalBits});if(e.hoveredCheermote)return f.createElement(In,{event:e.event,tournament:e.tournament,bitsConfig:e.bitsConfig,prefix:e.hoveredCheermote,tier:e.hoveredTier});if(e.totalBits)return f.createElement(Gn,{bitsConfig:e.bitsConfig,prefixes:e.currentCheers,amount:e.totalBits,channelDisplayName:e.displayName,purchaseMore:e.bitsBalance&&e.totalBits-e.bitsBalance,largestCheermote:e.largestCheermote,smallestCheermote:e.smallestCheermote,minPerEmote:e.emoteMinimumBits,minToCheer:e.cheerMinimumBits,event:i});if(e.helpRequested)return f.createElement(Tn.a,null);if(e.chosenCheermote){var a=e.recentMinimumBits,r=e.cheerMinimumBits;return f.createElement(On,{minToPin:a,minToCheer:r})}return i?f.createElement(jn,{event:i,onClickHelp:e.showHelp,channelID:e.channelID}):f.createElement(Dn,{onClickHelp:e.showHelp})},Kn=n("WVx7"),Jn=n("w9tK"),Zn=(n("9uTb"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={startingIndex:0},t.handleCheermoteHover=function(e){var n=e.currentTarget.getAttribute("data-key");n&&t.props.onHover(n)},t.handleCheermoteUnhover=function(){t.props.onHoverLeave()},t.handleCheermoteClick=function(e){var n=e.currentTarget.getAttribute("data-key");n&&t.props.onClick(n)},t}return d.__extends(t,e),t.prototype.render=function(){var e=this;if(this.props.hide)return null;var t=this.props.cheermotes.map(function(t,n){if(!t)return f.createElement("li",{key:"null-cheermote-"+n},f.createElement("button",{className:"cheermote-list__item-button",disabled:!0},f.createElement("div",{className:"cheermote-list__placeholder"})));var i="";t.key&&(i=t.key.replace(":",""));var a=null;e.props.showCheermoteAmount&&t.key&&(a=f.createElement(Yt.a,{bitsConfig:e.props.bitsConfig,prefix:"",amount:+t.key.split(":")[1],showImage:!1,showAmount:!0,size:Yt.b.Small}));var r=f.createElement("li",{key:t.key,className:"cheermote-list__cheermote"},f.createElement("button",{className:"cheermote-list__item-button","data-key":t.key,onMouseEnter:e.handleCheermoteHover,onMouseLeave:e.handleCheermoteUnhover,onClick:e.handleCheermoteClick,"data-a-target":"cheermote-"+i},f.createElement("img",{alt:t.key,src:e.props.darkModeEnabled?t.imgSrcDark:t.imgSrc})),a);return e.props.showCheermoteAmount?r:f.createElement(H.V,{key:t.key,margin:{bottom:1}},r)}),n=null;this.props.showCheermoteAmount&&(n=f.createElement(H._1,{padding:{right:2},fullWidth:!0,className:"cheermote-list__back-button"},f.createElement(H.u,{"data-a-target":"bits-card-back-button",type:H.z.Text,fullWidth:!0,onClick:this.props.onClose},Object(u.d)("Show All Cheermotes","CheermoteCarousel"))));var i=f.createElement(H.V,{className:"cheermote-list__cheermotes",display:H.M.Flex,flexWrap:H.P.Wrap,flexDirection:H.O.Row,justifyContent:this.props.showCheermoteAmount?H._0.Between:H._0.Start,alignItems:H.c.End,padding:{bottom:1}},f.createElement("ul",null,t,n)),a=F("cheermote-list",{"cheermote-list__tier-selection":this.props.showCheermoteAmount},{"cheermote-list__cheermote-selection":!this.props.showCheermoteAmount});return this.props.showCheermoteAmount?f.createElement(H._1,{flexGrow:1,overflow:H._4.Hidden,className:a},i):f.createElement(H._1,{flexGrow:1,overflow:H._4.Hidden,className:a},f.createElement(Bn.b,null,i))},t}(f.Component)),Xn=Object(v.compose)(Object(Qe.d)("CheermoteCarousel",{autoReportInteractive:!0,destination:Jn.a.CheermoteCarousel}))(Zn),ei=Object(h.b)(function(e){return{darkModeEnabled:Object(N.a)(e)===y.a.Dark}})(Xn),ti=function(e){return e.event,f.createElement(En,{bitsConfig:e.bitsConfig,onClickGetBits:e.onClickGetBits,balance:e.balance,selfBitsBadge:e.selfBitsBadge})},ni=function(e){return f.createElement(H._1,{flexGrow:1},f.createElement(H._1,{className:"undo-prompt__footer",padding:1,display:H.M.Flex,justifyContent:H._0.Between},f.createElement(H.u,{onClick:e.onCancel||void 0,type:H.z.Hollow,overlay:!0,"data-test-selector":"cancel-button"},Object(u.d)("Cancel","Bits--UndoPrompt")),f.createElement(H.u,{onClick:e.onConfirm||void 0,"data-test-selector":"confirm-button"},Object(u.d)("Send","Bits--UndoPrompt"))),f.createElement(H._11,{size:H._12.ExtraSmall,countdown:Sn.m.UNDO_PROMPT_DURATION/1e3}))},ii=n("ZJYd"),ai=n("/LBW"),ri=n("iWdz"),si=(n("2B/Z"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={chosenCheermote:null,hoveredCheermote:null,hoveredTier:0,helpRequested:!1,totalBits:0,largestCheermote:0,smallestCheermote:0,buyingBits:!1},t.unhoverTimeout=0,t.lastRefetchTime=0,t.handleTierHover=function(e){clearTimeout(t.unhoverTimeout);var n=e.split(":");n.length<2||(t.setState({hoveredTier:+n[1],hoveredCheermote:n[0]}),t.props.trackBitsCardInteraction(ai.a.PreviewEmote,{emoteType:n[0],emoteLevel:+n[1]}))},t.handleUnhover=function(){t.unhoverTimeout=setTimeout(t.clearHovered,500)},t.clearHovered=function(){t.setState({hoveredTier:0,hoveredCheermote:null})},t.handleTierClick=function(e){t.props.onClickCheermote(e.split(":").join(""))},t.handleCheermoteHover=function(e){clearTimeout(t.unhoverTimeout),t.setState({hoveredCheermote:e,hoveredTier:0}),t.props.trackBitsCardInteraction(ai.a.PreviewEmote,{emoteType:e,emoteLevel:100})},t.handleCheermoteClick=function(e){t.setState({chosenCheermote:e,hoveredCheermote:null,hoveredTier:0})},t.clearChosenCheermote=function(){t.setState({chosenCheermote:null,hoveredCheermote:null,hoveredTier:0})},t.showHelp=function(e){e.preventDefault(),t.setState({helpRequested:!0})},t.closeHelp=function(){return t.setState({helpRequested:!1})},t.handleClickBuy=function(){t.setState({buyingBits:!0}),t.props.trackBitsCardInteraction(ai.a.BuyMain)},t.handleCloseBuy=function(){return t.setState({buyingBits:!1})},t}return d.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){var t=this.props.visible||!!this.props.currentCheers.length,n=e.visible||!!e.currentCheers.length;if(!t&&n){var i=Date.now();i-this.lastRefetchTime>1e3&&this.props.data&&e.data&&!e.data.loading&&(this.lastRefetchTime=i,e.data.refetch())}if(t&&!n&&this.setState({chosenCheermote:null,hoveredCheermote:null,hoveredTier:0,buyingBits:!1}),this.props.currentCheers!==e.currentCheers){var a=Object(ii.a)(e.currentCheers),r=a.total,s=a.largestCheermote,o=a.smallestCheermote;this.setState({totalBits:r,largestCheermote:s,smallestCheermote:o})}},t.prototype.render=function(){var e=this;if(!this.props.visible&&!this.props.currentCheers.length)return null;var t,n={border:!0,background:H.m.Base,elevation:3,fullWidth:!0};if(this.props.currentCheers.length||(t=f.createElement("button",{className:"t-bits-card__close t-bits-card__top-controls",onClick:this.props.onUserClose,"data-test-selector":"cancel-button","data-a-target":"bits-card-close-button"},f.createElement(H._14,{asset:H._15.Close,height:11,width:11}))),!this.props.data||this.props.data.loading)return f.createElement(H._24,d.__assign({className:"t-bits-card",display:H.M.Flex,flexDirection:H.O.Column,alignItems:H.c.Center,justifyContent:H._0.Center},n),f.createElement(H._3,{delay:0}),f.createElement(H._1,{padding:{top:2}},f.createElement(H._34,{italic:!0},Object(u.d)("Fetching Bits","BitsCard"))));if(this.props.data.error||!this.props.bitsConfig)return f.createElement(Nn,null);if(this.props.data.currentUser&&this.props.data.currentUser.login===this.props.channelLogin)return f.createElement(H._24,d.__assign({className:"t-bits-card",display:H.M.Flex,flexDirection:H.O.Column,alignItems:H.c.Center,justifyContent:H._0.Center,textAlign:H._35.Center,padding:{top:2,x:1,bottom:1}},n),t,f.createElement(H._34,{color:H.I.Error,italic:!0},Object(u.d)("You cannot Cheer in your own channel.","BitsCard")));if(this.state.buyingBits)return f.createElement(Kn.a,{bitsConfig:this.props.bitsConfig,channelLogin:this.props.channelLogin,closeAllBits:this.props.onUserClose,onClose:this.handleCloseBuy,trackBitsCardInteraction:this.props.trackBitsCardInteraction,location:ai.b.ChatTooltip});var i=null,a=this.state.helpRequested&&!this.props.currentCheers.length,r=null;if(this.props.data.user.cheer.settings.event&&(r=this.props.data.user.cheer.settings.event.toLowerCase().replace("_","-")),this.state.chosenCheermote){var s=this.props.bitsConfig.indexedActions[this.state.chosenCheermote.toLowerCase()];if(s){var o=s.orderedTiers.filter(function(e){return e.bits<=Sn.k}).map(function(e){return{imgSrc:e.indexedImages.LIGHT.static.get(2),imgSrcDark:e.indexedImages.DARK.static.get(2),key:s.prefix+":"+e.bits}}).reverse();i=f.createElement(ei,{bitsConfig:this.props.bitsConfig,hide:a,cheermotes:o,showCheermoteAmount:!0,event:r,onHover:this.handleTierHover,onHoverLeave:this.handleUnhover,onClick:this.handleTierClick,onClose:this.clearChosenCheermote})}}if(!i){o=this.props.bitsConfig.orderedActions.filter(function(e){return e.type!==Sn.e}).map(function(t){var n=Sn.h;e.props.data&&e.props.data.user.cheer.settings.event&&(n=1);var i=t.indexedTiers.get(n);return i?{imgSrc:i.indexedImages.LIGHT.static.get(2),imgSrcDark:i.indexedImages.DARK.static.get(2),key:t.prefix}:null});i=f.createElement(ei,{bitsConfig:this.props.bitsConfig,hide:a,cheermotes:o,event:r,onHover:this.handleCheermoteHover,onHoverLeave:this.handleUnhover,onClick:this.handleCheermoteClick})}var l=null;this.props.isSending?this.state.totalBits>=Sn.l&&(l=f.createElement(ni,{onCancel:this.props.onCancelSend,onConfirm:this.props.onConfirmSend})):l=r?f.createElement(ti,{event:r,selfBitsBadge:this.props.data.user.self&&this.props.data.user.self.bitsBadge,bitsConfig:this.props.bitsConfig,onClickGetBits:this.handleClickBuy,balance:this.props.data.currentUser&&this.props.data.currentUser.bitsBalance}):f.createElement(En,{selfBitsBadge:this.props.data.user.self&&this.props.data.user.self.bitsBadge,bitsConfig:this.props.bitsConfig,onClickGetBits:this.handleClickBuy,balance:this.props.data.currentUser&&this.props.data.currentUser.bitsBalance});var c;a&&(c=f.createElement("button",{className:"t-bits-card__go-back t-bits-card__top-controls",onClick:this.closeHelp,"data-a-target":"bits-card-back-button"},f.createElement(H._14,{asset:H._15.Play,height:8})," ",Object(u.d)("Back","BitsCard")));var p=F("t-bits-card",{"t-bits-card--tall":!this.props.isSending});return f.createElement(H._24,d.__assign({className:p,display:H.M.Flex,flexDirection:H.O.Column,"data-a-target":"bits-card"},n),!this.props.isSending&&c,t,f.createElement(H._24,{className:"t-bits-card__contents",display:H.M.Flex,flexGrow:0,flexDirection:H.O.Column,alignContent:H.b.Stretch,textAlign:H._35.Center,borderBottom:!this.props.isSending},f.createElement(Yn,{bitsBalance:this.props.data.currentUser&&this.props.data.currentUser.bitsBalance,bitsConfig:this.props.bitsConfig,cheerMinimumBits:this.props.data.user.cheer.settings.cheerMinimumBits,chosenCheermote:this.state.chosenCheermote,currentCheers:this.props.currentCheers,displayName:this.props.data.user.displayName,emoteMinimumBits:this.props.data.user.cheer.settings.emoteMinimumBits,event:r,helpRequested:this.state.helpRequested,hoveredCheermote:this.state.hoveredCheermote,hoveredTier:this.state.hoveredTier,isSending:this.props.isSending,largestCheermote:this.state.largestCheermote,recentMinimumBits:this.props.data.user.cheer.settings.recentMinimumBits,smallestCheermote:this.state.smallestCheermote,totalBits:this.state.totalBits,tournament:this.props.data.user.tournament,channelID:this.props.channelID,showHelp:this.showHelp,isStaff:this.props.isStaff})),!this.props.isSending&&i,l&&f.createElement(H._1,{className:"t-bits-card__footer",display:H.M.Flex},l))},t=d.__decorate([Object(b.a)(ri,{name:"data",skip:function(e){return!e.channelID},options:function(e){return{variables:{name:e.channelID},fetchPolicy:"cache-and-network"}}})],t)}(f.Component)),oi=n("KSGD"),li=n("2emZ"),ci=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.autocompleteType=li.a.Hashtag,t.canBeTriggeredByTab=!1,t.getMatches=function(e){if(!e.startsWith("#"))return null;if(null!==t.props.hashTags.edges){return t.props.hashTags.edges.filter(function(t){return t.node.id.includes(e)}).map(function(n){return{current:e,replacement:n.node.id,element:t.genearateHashtagDisplay(n.node.id)}})}return null},t.genearateHashtagDisplay=function(e){return f.createElement(H._1,{padding:{right:.5},key:"hashtag:"+e},f.createElement(H._34,null,e))},t}return d.__extends(t,e),t.prototype.componentDidMount=function(){this.unregister=this.context.registerAutocompleteProvider(this)},t.prototype.componentWillUnmount=function(){this.unregister()},t.prototype.render=function(){return null},t.contextTypes={registerAutocompleteProvider:oi.func},t}(f.Component),di=n("Lx+S"),ui=n("SZoP"),pi=n("Bir6"),mi=n("e1CU"),hi=5,gi=function(e){function t(t){var n=e.call(this,t)||this;return n.autocompleteType=li.a.Mention,n.canBeTriggeredByTab=!0,n.getMatches=function(e,t){return t||e.startsWith("@")?n.getMentions(e,t):null},n.getMentions=function(e,t){var i=t?e:e.substring(1),a=new RegExp("^"+Object(pi.a)(i),"i");return n.state.sortedChatMembers.filter(function(e){return a.test(e.userLogin)||a.test(e.userDisplayName)}).slice(0,hi).map(function(i){return{current:e,replacement:(t?"":"@")+i.userDisplayName,element:n.renderMention(i)}})},n.renderMention=function(e){return f.createElement("span",null,Object(ui.a)(e.userLogin,e.userDisplayName))},n.sortChatMembers=function(e){var t=[d.__assign({},Object(mi.a)(e.channelDisplayName,e.channelLogin),{userID:e.channelID,userLogin:e.channelLogin,userType:Ae.a.Owner})],n=e.chatMembers;return n.sort(function(e,t){return e.userLogin<t.userLogin?-1:e.userLogin>t.userLogin?1:0}),t.concat(n)},n.state={sortedChatMembers:n.sortChatMembers(t)},n}return d.__extends(t,e),t.prototype.componentDidMount=function(){this.unregister=this.context.registerAutocompleteProvider(this)},t.prototype.componentWillUnmount=function(){this.unregister()},t.prototype.componentWillReceiveProps=function(e){this.props.chatMembers===e.chatMembers&&this.props.channelDisplayName===e.channelDisplayName&&this.props.channelLogin===e.channelLogin&&this.props.channelID===e.channelID||this.setState({sortedChatMembers:this.sortChatMembers(e)})},t.prototype.render=function(){return null},t.contextTypes={registerAutocompleteProvider:oi.func},t}(f.Component),fi=function(){return f.createElement(H.p,{direction:H.q.TopLeft,offsetY:"11px",show:!0},f.createElement(H._1,{padding:1,"data-test-selector":"raids-settings-tooltip"},Object(u.d)("If a raid is offensive, moderate in chat settings.","RaidReportingChat")))},bi=n("QCOJ"),vi=n("hcyD"),ki=n("VB5+"),yi=n("Umoc"),_i=n("ieBa"),Ci=n("ACWz"),Si=n("2I50"),Ei=/\S/,Ni=3;!function(e){e[e.Bits=0]="Bits",e[e.Emotes=1]="Emotes",e[e.None=2]="None"}(Fn||(Fn={}));var wi,Ti=function(e){function t(t){var n=e.call(this,t)||this;return n.cancelDelayedSend=null,n.confirmDelayedSend=null,n.hasConfirmedInEmbed=!1,n.hasSeenConfirmationPrompt=!1,n.syncMembers=function(){n.props.activeChatters.isDirty&&n.setState({chatMembers:n.props.activeChatters.getActiveChatters()})},n.setChatInputRef=function(e){return n.chatInputRef=e},n.setAutocompleteInputRef=function(e){return n.autocompleteInputRef=e},n.onChatSettingsToggle=function(e){n.handleRaidReportingToggle(e),e||Object(yi.b)({channelLogin:n.props.channelLogin,isHostMode:n.props.isHostMode})},n.handleRaidReportingToggle=function(e){n.props.raidReceived&&(n.state.showRaidsSettingsTooltip&&(n.setState({showRaidsSettingsTooltip:!1}),u.k.set("raidsModerationTooltipsSeenNumTimes",Ni)),e&&n.setState({showRaidsFollowerOnlyTooltip:!1}))},n.onKeyDown=function(e){var t=e.charCode||e.keyCode;switch(n.props.onKeyDown&&t!==bn.a.Enter&&n.props.onKeyDown(e),t){case bn.a.Enter:return void(e.shiftKey||(e.preventDefault(),n.onMessageSend()));case bn.a.Esc:return void(n.state.showCard===Fn.Bits&&n.setState({showCard:Fn.None}));default:return}},n.onMessageValueUpdate=function(e){n.setState({value:e})},n.onInputFocus=function(){n.props.onInputFocus&&n.props.onInputFocus(),n.state.hasInteractedOrPageload||n.setState({hasInteractedOrPageload:!0})},n.onMouseEnterInput=function(){n.state.hasInteractedOrPageload||n.setState({hasInteractedOrPageload:!0})},n.onChatCommand=function(e){n.props.onChatCommand(e),n.trackChatEvent()},n.confirmEmbedAction=function(e,t,i){var a=n,r=a.hasConfirmedInEmbed;if(a.hasSeenConfirmationPrompt)return r;var s=window.confirm(n.confirmationMessage(e,t,i));return n.hasSeenConfirmationPrompt=!0,n.hasConfirmedInEmbed=s,s},n.confirmationMessage=function(e,t,n){return Object(u.d)('Hi {displayName}. You are attempting to send "{message}" in {channelLogin}\'s chat via an embedded version of Twitch Chat. Are you sure you want to do this? This setting will persist until you refresh the page',{displayName:e,message:t,channelLogin:n},"ChatInput")},n.onMessageSend=function(){return d.__awaiter(n,void 0,void 0,function(){var e,t,n,i,a=this;return d.__generator(this,function(r){switch(r.label){case 0:return this.props.authToken?this.props.channelID?(e=Ei.test(this.state.value))?this.state.isSendingBits?(u.i.debug("[ChatInput] Supressing chat message send. Bits spending is still in progress."),[2]):this.props.isEmbedded&&(this.props.isCurrentUserModerator||this.props.data&&this.props.data.currentUser&&this.props.data.currentUser.isPartner)&&this.props.sessionUser&&!this.confirmEmbedAction(this.props.sessionUser.displayName,this.state.value||"",this.props.channelLogin)?(u.i.debug("[ChatInput] Embed Confirmation check failed. Not sending message"),[2]):this.props.data&&this.props.data.currentUser?0===(t=Object(ii.a)(this.state.messageCheers)).total?(this.sendRegularMessage(),[2]):this.props.data.user?this.props.data.user.cheer?this.props.data.user.cheer.settings?(n=Object(ii.f)({messageBits:t,balance:this.props.data.currentUser.bitsBalance,cheerMinimumBits:this.props.data.user.cheer.settings.cheerMinimumBits,emoteMinimumBits:this.props.data.user.cheer.settings.emoteMinimumBits,inputValue:this.state.value})).canSpend?this.props.sendCheer?(this.setState({isSendingBits:!0}),t.total>=Sn.l?[4,new Promise(function(e){var t=setTimeout(e,Sn.m.UNDO_PROMPT_DURATION),n=function(n){void 0===n&&(n=!1),clearTimeout(t),a.cancelDelayedSend=null,a.confirmDelayedSend=null,e(n)};a.cancelDelayedSend=function(){return n(!0)},a.confirmDelayedSend=function(){return n(!1)}})]:[3,2]):(u.i.warn("[Chat Input] No GraphQL mutation for sending cheers attached."),[2]):(u.i.warn("[Chat Input] Spending bits forbidden.",n),[2]):(u.i.warn("[Chat Input] Cheer Settings are undefined."),[2]):(u.i.warn("[Chat Input] Cheer is null."),[2]):(u.i.warn("[Chat Input] User is null."),[2]):(this.sendRegularMessage(),[2]):(u.i.debug("[ChatInput] Supressing chat message send. Input failed to pass validation.",{hasSendableInput:e,value:this.state.value}),[2]):(u.i.warn("[ChatInput] Attempt to send a message before channel ID"),[2]):(this.props.login(),[2]);case 1:if(r.sent())return this.setState({isSendingBits:!1}),this.chatInputRef.focus(),[2];r.label=2;case 2:i=Object(kn.a)(),r.label=3;case 3:return r.trys.push([3,5,,6]),[4,this.props.sendCheer({variables:{input:{id:i,targetID:this.props.channelID,bits:t.total,content:this.state.value}}})];case 4:return r.sent(),[3,6];case 5:return r.sent(),this.setState({isSendingBits:!1}),this.chatInputRef.focus(),[2];case 6:return this.setState({isSendingBits:!1,showCard:Fn.None,value:""}),this.chatInputRef.focus(),this.autocompleteInputRef.setValue(""),[2]}})})},n.onEmotePickerToggle=function(){n.setState(function(e){if(!e.messageCheers.length)return{showCard:e.showCard===Fn.Emotes?Fn.None:Fn.Emotes}})},n.onBitsIconClick=function(){n.state.showCard===Fn.Bits?n.trackBitsCardInteraction(ai.a.CloseCard):n.trackBitsCardInteraction(ai.a.OpenCard),n.setState({showCard:n.state.showCard===Fn.Bits?Fn.None:Fn.Bits})},n.onShowViewersList=function(){n.state.showCard!==Fn.None&&n.setState({showCard:Fn.None}),n.props.showViewersList()},n.onBitsClose=function(){n.state.showCard===Fn.Bits&&n.setState({showCard:Fn.None}),n.trackBitsCardInteraction(ai.a.CloseCard)},n.onClickEmote=function(e){var t=n.state.value;n.state.value&&n.state.value.length>0&&!n.state.value.endsWith(" ")&&(t+=" "),t+=e+" ",n.autocompleteInputRef.setValue(t)},n.onEmotePickerDataLoaded=function(e){e&&n.setState({showEmotePickerButton:!0})},n.trackBitsCardInteraction=function(e,t){var i={actionName:e,emoteType:t&&t.emoteType,emoteLevel:t&&t.emoteLevel,location:t&&t.location,displayedBalance:n.props.data&&n.props.data.currentUser&&n.props.data.currentUser.bitsBalance||0};Object(ai.h)(i)},n.state={chatMembers:t.activeChatters.getActiveChatters(),hasInteractedOrPageload:t.firstPageLoaded,isSendingBits:!1,messageCheers:[],showBuyBits:!1,showCard:Fn.None,showEmotePickerButton:!!t.authToken,showRaidsSettingsTooltip:!1,showRaidsFollowerOnlyTooltip:!1,value:""},n}return d.__extends(t,e),t.prototype.componentWillMount=function(){this.syncMembersHandle=setInterval(this.syncMembers,250)},t.prototype.componentWillUpdate=function(e,t){var n=this;if(t.value!==this.state.value&&this.props.bitsConfig){var i=[];Object(x.c)(t.value,this.props.bitsConfig).forEach(function(e){e.type===Me.a.Emote&&i.push(e.content)}),i.length&&t.showCard===Fn.Emotes&&this.setState({showCard:Fn.None}),this.setState({messageCheers:i})}this.props.isCurrentUserModerator&&!this.props.raidReceived&&e.raidReceived&&(u.k.get("raidsModerationTooltipsSeenNumTimes",0),Number(u.k.get("raidsModerationTooltipsSeenNumTimes",0))<Ni&&this.setState({showRaidsSettingsTooltip:!0,showRaidsFollowerOnlyTooltip:!0},function(){setTimeout(function(){u.k.set("raidsModerationTooltipsSeenNumTimes",u.k.get("raidsModerationTooltipsSeenNumTimes",0)+1),n.setState({showRaidsSettingsTooltip:!1})},2e4)}))},t.prototype.componentWillReceiveProps=function(e){!this.props.firstPageLoaded&&e.firstPageLoaded&&this.setState({hasInteractedOrPageload:!0})},t.prototype.componentWillUnmount=function(){this.syncMembersHandle&&(clearInterval(this.syncMembersHandle),this.syncMembersHandle=0)},t.prototype.render=function(){var e=[];this.props.bitsConfig&&e.push(f.createElement(H.v,{key:"bits",icon:H._15.Bits,ariaLabel:Object(u.d)("Bits","ChatInput"),type:H.w.Secondary,onClick:this.onBitsIconClick,"data-a-target":"bits-button"})),this.state.showEmotePickerButton&&e.push(f.createElement(_i.b,{key:"emote-picker",onClick:this.onEmotePickerToggle}));var t=null;this.state.hasInteractedOrPageload&&(t=f.createElement(_i.c,{channelOwnerID:this.props.channelID,onClickEmote:this.onClickEmote,onLoad:this.onEmotePickerDataLoaded,toggleVisibility:this.onEmotePickerToggle,visible:this.state.showCard===Fn.Emotes}));var n=null;this.state.hasInteractedOrPageload&&this.props.bitsConfig&&(n=f.createElement(si,{bitsConfig:this.props.bitsConfig,channelID:this.props.channelID,channelLogin:this.props.channelLogin,currentCheers:this.state.messageCheers,isSending:this.state.isSendingBits,isStaff:this.props.isStaff,onCancelSend:this.cancelDelayedSend,onClickCheermote:this.onClickEmote,onConfirmSend:this.confirmDelayedSend,onUserClose:this.onBitsClose,trackBitsCardInteraction:this.trackBitsCardInteraction,visible:this.state.showCard===Fn.Bits}));var i=null;return this.props.data.user&&this.props.data.user.cheer&&this.props.data.user.cheer.hashtags&&this.state.messageCheers.length>0&&(i=f.createElement(ci,{hashTags:this.props.data.user.cheer.hashtags})),f.createElement(H._1,{className:"chat-input",padding:{x:2,bottom:2}},f.createElement(H.V,{position:H._8.Relative,zIndex:H._51.Default},f.createElement("div",{onMouseEnter:this.onMouseEnterInput},t,n,f.createElement(_n.b,{componentType:_n.a.TextArea,suggestionSource:_n.c.Chat,onValueUpdate:this.onMessageValueUpdate,onFocus:this.onInputFocus,onKeyDown:this.onKeyDown,componentRefDelegate:this.setChatInputRef,refDelegate:this.setAutocompleteInputRef,paddingRight:30*e.length,placeholder:Object(u.d)("Send a message","ChatInput"),noResize:!0,"data-a-target":"chat-input","data-test-selector":"chat-input",disabled:this.state.isSendingBits,containerElement:this.props.containerElement},f.createElement(_n.d,{emotes:this.props.emotes}),f.createElement(gi,{channelDisplayName:this.props.channelDisplayName,channelID:this.props.channelID,channelLogin:this.props.channelLogin,chatMembers:this.state.chatMembers}),i),f.createElement(H._1,{position:H._8.Absolute,attachRight:!0,attachTop:!0},e))),f.createElement(H._1,{className:"chat-input__buttons-container",display:H.M.Flex,justifyContent:H._0.Between,margin:{top:1}},f.createElement(H._1,{display:H.M.Flex,flexDirection:H.O.Row},f.createElement(H._1,{position:H._8.Relative},f.createElement(di.a,{disabled:this.props.isEmbedded,onToggle:this.onChatSettingsToggle,channelLogin:this.props.channelLogin,isHostMode:this.props.isHostMode,authToken:this.props.authToken,isCurrentUserModerator:this.props.isCurrentUserModerator,onChatCommand:this.onChatCommand,isPopout:this.props.isPopout,channelID:this.props.channelID,sawFirstRaidPrompt:this.state.showRaidsFollowerOnlyTooltip,containerElement:this.props.containerElement}),this.state.showRaidsSettingsTooltip?f.createElement(fi,null):null),f.createElement(H.v,{ariaLabel:Object(u.d)("Viewer list","ChatInput"),"data-a-target":"chat-viewer-list","data-test-selector":"chat-viewer-list",icon:H._15.ViewerList,onClick:this.onShowViewersList})),this.renderSendButton()))},t.prototype.renderSendButton=function(){var e;return e=this.state.value&&null!==Object(We.q)(this.state.value)?Object(u.d)("Whisper","ChatInput"):Object(u.d)("Chat","ChatInput"),f.createElement(H.u,{onClick:this.onMessageSend,"data-a-target":"chat-send-button","data-test-selector":"chat-send-button",disabled:this.state.isSendingBits},e)},t.prototype.sendRegularMessage=function(){this.props.onSendMessage&&this.props.onSendMessage(this.state.value)&&(this.trackChatEvent(),this.trackMentions(),this.autocompleteInputRef.setValue(""),this.setState({showCard:Fn.None}))},t.prototype.trackChatEvent=function(){Object(vi.a)({channelID:this.props.channelID,channelLogin:this.props.channelLogin,isHostMode:this.props.isHostMode,player:this.props.isPopout?bi.a.Embed:bi.a.Web,subOnlyMode:this.props.isSubsOnlyModeEnabled})},t.prototype.trackMentions=function(){if(this.state.value&&this.props.sessionUser)for(var e=0,t=Object(Ve.c)(this.state.value,this.props.sessionUser.displayName,!1);e<t.length;e++){var n=t[e];n.type===Me.a.Mention&&n.content.recipient!==n.content.sender&&Object(ki.a)({channelLogin:this.props.channelLogin,isHostMode:this.props.isHostMode,mentionedUserDisplayName:n.content.recipient,userLogin:this.props.sessionUser.login})}else u.i.warn("[ChatInput] trackMentions was called in a nonsensical state.")},t}(f.Component),Di=Object(v.compose)(Object(b.a)(Si,{name:"sendCheer"}),Object(b.a)(Ci),Object(Qe.d)("ChatInput",{autoReportInteractive:!0}),Object(h.b)(function(e){return{isSubsOnlyModeEnabled:e.chat.subsOnlyMode,sessionUser:Object(g.c)(e)}},function(e){return Object(k.b)({login:function(){return Object(yn.f)(vn.a.Chat)}},e)}))(Ti),Ii=n("pexS"),Oi=n("DtWM"),Mi=n("zCIC"),xi=(n("rMeN"),["scroll","wheel","mousewheel","DOMMouseScroll","keyup","mousedown"]),Ri=10,Li=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isAutoScrolling:!0},t.saveScrollRef=function(e){return t.scroll=e},t.handleScrollEvent=function(e){if(t.scroll&&(e.which>0||"mousedown"===e.type||"mousewheel"===e.type||"wheel"===e.type)){t.scroll.scrollContent.scrollHeight-t.scroll.scrollContent.scrollTop-t.scroll.scrollContent.offsetHeight<=Ri?t.setState({isAutoScrolling:!0}):t.setState({isAutoScrolling:!1})}},t.handleResize=function(){t.state.isAutoScrolling&&t.scrollToBottom()},t.handleClickMoreMessages=function(){t.setState({isAutoScrolling:!0},t.scrollToBottom)},t.scrollToBottom=function(){t.scroll&&t.scroll.scrollContent&&(t.scroll.scrollContent.scrollTop=t.scroll.scrollContent.scrollHeight)},t}return d.__extends(t,e),t.prototype.componentDidMount=function(){var e=this;xi.forEach(function(t){return e.scroll.scrollContent.addEventListener(t,e.handleScrollEvent)})},t.prototype.componentWillUnmount=function(){var e=this;xi.forEach(function(t){return e.scroll.scrollContent.removeEventListener(t,e.handleScrollEvent)})},t.prototype.componentDidUpdate=function(e){this.state.isAutoScrolling&&this.props.messages!==e.messages&&this.scrollToBottom()},t.prototype.render=function(){var e=this,t=this.props.messages.map(function(t){return f.createElement(Bt,{badgeSets:e.props.badgeSets,channelID:e.props.channelID,isCurrentUserModerator:e.props.isCurrentUserModerator,message:t,key:t.id,showModerationIcons:e.props.showModerationIcons&&!e.props.isEmbedded,showTimestamps:e.props.showTimestamps,currentUserDisplayName:e.props.currentUserDisplayName,currentUserLogin:e.props.currentUserLogin,onPushMessage:e.props.onPushMessage,doesNotUpdate:!0})});return f.createElement(H._1,{refDelegate:this.props.containerRef,className:"chat-list",display:H.M.Flex,flexDirection:H.O.Column,flexWrap:H.P.NoWrap,overflow:H._4.Hidden,flexGrow:1},f.createElement(Oi.a,{onResize:this.handleResize}),f.createElement(H.V,{flexGrow:1},f.createElement(Mi.b,{className:"chat-list__lines",scrollRef:this.saveScrollRef,"data-a-target":"chat-scroller"},f.createElement(H._1,{flexGrow:1,fullHeight:!0,padding:{bottom:1}},t))),f.createElement(H._1,{className:"chat-list__more-messages-placeholder",position:H._8.Relative,margin:{x:2}},this.moreMessages()))},t.prototype.moreMessages=function(){return this.state.isAutoScrolling?null:f.createElement(H.V,{display:H.M.Flex,justifyContent:H._0.Center,alignItems:H.c.Center,position:H._8.Absolute,padding:.5,attachBottom:!0,fullWidth:!0},f.createElement("div",{className:"chat-list__more-messages",onClick:this.handleClickMoreMessages},Object(u.d)("More messages below.","ChatList")))},t}(f.Component),Ui=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){var t=e.pubsub.messages.chatRichEmbedInfo;t&&this.props.pubsub.messages.chatRichEmbedInfo!==t&&u.n.apollo.client.writeQuery({query:Ii,variables:{slug:t.data.twitch_metadata.clip_metadata.slug},data:function(e){var t=e.data.twitch_metadata.clip_metadata,n={clip:{slug:t.slug,id:t.id,url:e.data.request_url,title:e.data.title,thumbnailURL:e.data.thumbnail_url,curator:{displayName:e.data.author_name,__typename:"User"},broadcaster:{displayName:t.channel_display_name,__typename:"User"},game:null,__typename:"Clip"}};return t.game&&(n.clip.game={displayName:t.game,__typename:"Game"}),n}(t)})},t.prototype.render=function(){return f.createElement(Li,{channelID:this.props.channelID,badgeSets:this.props.badgeSets,currentUserDisplayName:this.props.currentUserDisplayName,channelLogin:this.props.channelLogin,onPushMessage:this.props.onPushMessage,isCurrentUserModerator:this.props.isCurrentUserModerator,isEmbedded:this.props.isEmbedded,messages:this.props.messages,showModerationIcons:this.props.showModerationIcons,showTimestamps:this.props.showTimestamps,currentUserLogin:this.props.currentUserLogin,containerRef:this.props.containerRef})},t}(f.Component),Fi=Object(k.d)(Object(h.b)(function(e,t){return{messages:Object(c.a)(e,t.channelLogin),showModerationIcons:e.chat.showModIcons,showTimestamps:e.chat.showTimestamps}}),Object(j.a)([{skip:function(e){return!e.channelID},topic:function(e){return e.channelID?Object(P.l)(e.channelID):""},mapMessageTypesToProps:(wi={},wi[B.PubsubMessageType.StreamChatRoomChatRichEmbed]="chatRichEmbedInfo",wi)}]))(Ui),ji=(n("HuX0"),function(e){function t(t){var n=e.call(this,t)||this;n.onClickConfirm=function(){n.markRoomSeen(),n.setState({showRules:!1})};var i=n.getRoomsSeen();return n.state={showRules:n.props.chatRules&&n.props.chatRules.length>0&&!i[n.props.channelLogin]},n}return d.__extends(t,e),t.prototype.render=function(){return this.state.showRules?f.createElement(H._1,{className:"chat-rules",position:H._8.Relative},f.createElement(H._24,{border:!0,background:H.m.Base,margin:{bottom:1}},f.createElement(H._1,{padding:1},f.createElement(H._1,{margin:{bottom:1}},f.createElement(H._34,{type:H._39.H6},Object(u.d)("Chat Rules:","ChatRules"))),f.createElement(H._1,null,f.createElement("ul",null,this.props.chatRules.map(function(e,t){return f.createElement("li",{key:t},e)}))),f.createElement(H._1,{margin:{top:1},display:H.M.Flex,justifyContent:H._0.Center},f.createElement(H.u,{size:H.x.Small,onClick:this.onClickConfirm},Object(u.d)("Ok, got it!","ChatRules")))))):null},t.prototype.getRoomsSeen=function(){return u.k.get("chat_rules_shown",{})},t.prototype.markRoomSeen=function(){var e=this.getRoomsSeen();e[this.props.channelLogin]=!0,u.k.set("chat_rules_shown",e)},t}(f.Component)),Bi=3,Ai=(n("Bsuy"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.usernameClickHandler=function(e){var n=e.currentTarget.getAttribute("data-username");n&&t.props.onUsernameClick(n,st.a.viewer_list,"")},t}return d.__extends(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.viewers,i=t.header,a=n.map(function(t){return f.createElement("div",{key:"chat-viewers-list-item-"+t},f.createElement("button",{className:"chat-viewers-list__button","data-username":t,onClick:e.usernameClickHandler},f.createElement(H._34,{transform:H._38.Capitalize},t)))});return f.createElement(H._1,{className:"chat-viewers-list",padding:{bottom:2}},f.createElement("div",null,f.createElement(H._34,{transform:H._38.Uppercase},i)),a)},t}(f.Component)),Pi=n("qLdk"),Vi=(n("gwjw"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={filter:"",inputValue:"",filteredViewers:{},viewersPage:0,renderedViewers:[],isLoading:!1},t.filterTimeout=0,t.saveScrollRef=function(e){return t.scroll=e},t.loadMore=function(){return d.__awaiter(t,void 0,void 0,function(){var e=this;return d.__generator(this,function(t){switch(t.label){case 0:return[4,new Promise(function(t){e.setState(function(t){return{renderedViewers:e.getRenderedViewers(t.filteredViewers.viewers,t.viewersPage+1),viewersPage:t.viewersPage+1}},function(){t()})})];case 1:return t.sent(),[2]}})})},t.getRenderedViewers=function(e,t){return e?e.slice(0,100*(t||1)):[]},t.handleFilter=function(e,n){var i=function(e,t){if(!t)return e;var n=Object.assign({},e);return Object.keys(n).forEach(function(e){var i=n[e];Array.isArray(i)&&(n[e]=i.filter(function(e){return-1!==e.toLowerCase().indexOf(t)}))}),n}(n,e),a=t.getRenderedViewers(i.viewers,1);t.scroll&&t.scroll.scrollToTop(),t.setState({filteredViewers:i,isLoading:!1,renderedViewers:a,viewersPage:1})},t.handleFilterChange=function(e){var n=e.target.value,i=n.toLowerCase().trim();t.setState({filter:i,inputValue:n,isLoading:!0}),clearTimeout(t.filterTimeout),t.filterTimeout=setTimeout(function(){t.handleFilter(i,t.props.viewers)},350)},t}return d.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){this.handleFilter(this.state.filter,e.viewers)},t.prototype.render=function(){var e=this.props.onShowViewerCard,t=[],n=this.state.filteredViewers;n.staff&&n.staff.length>0&&t.push(f.createElement(Ai,{key:"chat-viewers-list-staff",header:Object(u.d)("Staff","ChatViewers"),viewers:n.staff,onUsernameClick:e})),n.admins&&n.admins.length>0&&t.push(f.createElement(Ai,{key:"chat-viewers-list-admins",header:Object(u.d)("Admins","ChatViewers"),viewers:n.admins,onUsernameClick:e})),n.global_mods&&n.global_mods.length>0&&t.push(f.createElement(Ai,{key:"chat-viewers-list-global-mods",header:Object(u.d)("Global Moderators","ChatViewers"),viewers:n.global_mods,onUsernameClick:e})),n.moderators&&n.moderators.length>0&&t.push(f.createElement(Ai,{key:"chat-viewers-list-moderators",header:Object(u.d)("Moderators","ChatViewers"),viewers:n.moderators,onUsernameClick:e})),n.viewers&&n.viewers.length>0&&t.push(f.createElement(Ai,{key:"chat-viewers-list-viewers","data-test-selector":"chat-viewers-list-viewers",header:Object(u.d)("Viewers","ChatViewers"),viewers:this.state.renderedViewers,onUsernameClick:e}));var i=this.props.isLoading||this.state.isLoading,a=i&&f.createElement(H._1,{className:"chat-viewers__loading",display:H.M.Flex,alignItems:H.c.Center,justifyContent:H._0.Center,zIndex:H._51.Above,position:H._8.Absolute,attachTop:!0,attachBottom:!0,attachLeft:!0,attachRight:!0},f.createElement(H._3,null));return f.createElement(H._1,{className:"chat-viewers__container",fullWidth:!0,fullHeight:!0,flexShrink:0,zIndex:H._51.Default},f.createElement(H._1,{className:Object(Pi.a)()?"chat-viewers__pane":"chat-viewers__old-pane",display:H.M.Flex,flexDirection:H.O.Column,flexWrap:H.P.NoWrap,position:H._8.Absolute,attachBottom:!0,attachLeft:!0,attachRight:!0},f.createElement(H._1,{className:"chat-viewers__header",display:H.M.Flex,justifyContent:H._0.Center,alignItems:H.c.Center,padding:{y:1},flexShrink:0},f.createElement(H._1,{position:H._8.Absolute,attachLeft:!0,margin:{left:1}},f.createElement(H.v,{icon:H._15.Close,ariaLabel:Object(u.d)("Close","ChatViewers"),"data-a-target":"chat-viewer-list",onClick:this.props.closeViewersList})),f.createElement("p",{"data-a-target":"chat-viewers_header-channel-name"},Object(u.d)("Viewer List","ChatViewers"))),f.createElement(H._1,{display:H.M.Flex,flexDirection:H.O.Column,flexWrap:H.P.NoWrap,fullHeight:!0},f.createElement(H._1,{className:"chat-viewers__filter",margin:{x:2,y:1}},f.createElement(H.X,{type:H.Y.Search,name:"viewers-filter",placeholder:Object(u.d)("Filter Viewers","ChatViewers"),readOnly:this.props.isLoading,onChange:this.handleFilterChange,value:this.state.inputValue})),f.createElement(Mi.b,{className:"chat-viewers__list",scrollRef:this.saveScrollRef,suppressScrollX:!0,scrollContentClassName:"chat-viewers__scroll-container"},f.createElement(H._1,{padding:{x:2}},t,f.createElement(Mi.a,{key:this.state.filter,enabled:!i,loadMore:this.loadMore})))),a))},t}(f.Component)),Wi=function(e){function t(t){var n=e.call(this,t)||this;return n.state={viewers:{},viewerCount:0,isLoading:!1},n.logger=u.i.withCategory("chat-viewers"),n}return d.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){this.props.channelLogin!==e.channelLogin&&this.updateViewers(e.channelLogin)},t.prototype.componentDidMount=function(){return d.__awaiter(this,void 0,void 0,function(){return d.__generator(this,function(e){return this.updateViewers(this.props.channelLogin),[2]})})},t.prototype.render=function(){return f.createElement(Vi,{channelLogin:this.props.channelLogin,closeViewersList:this.props.closeViewersList,viewers:this.state.viewers,viewerCount:this.state.viewerCount,isLoading:this.state.isLoading,onShowViewerCard:this.props.onShowViewerCard})},t.prototype.updateViewers=function(e){return d.__awaiter(this,void 0,void 0,function(){var t,n,i;return d.__generator(this,function(a){switch(a.label){case 0:return this.setState({isLoading:!0}),[4,function(e){return d.__awaiter(this,void 0,void 0,function(){var t,n,i,a,r;return d.__generator(this,function(s){switch(s.label){case 0:t="https://tmi.twitch.tv/group/user/"+e.toLowerCase()+"/chatters",n=1,s.label=1;case 1:if(!(n<=Bi))return[3,7];s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(t,{method:"GET",headers:{Accept:"application/json; charset=UTF-8","content-type":"application/json; charset=UTF-8"}})];case 3:return i=s.sent(),[4,i.json()];case 4:return a=s.sent(),u.i.debug("[update] getViewers done."),[2,a];case 5:if(r=s.sent(),n===Bi)throw r;return[3,6];case 6:return++n,[3,1];case 7:return[2]}})})}(e)];case 1:return t=a.sent(),n=t?t.chatters:{},i=t?t.chatter_count:0,u.i.debug("Updated viewers list with "+i+" viewers"),this.setState({viewers:n,viewerCount:i,isLoading:!1}),[2]}})})},t}(f.Component),Hi=Object(h.b)(null,function(e){return Object(k.b)({onShowViewerCard:p.d},e)})(Wi),Gi=n("tjbt"),qi=n("ZiSq"),zi=n("vLl9"),Qi=(n("dVd7"),u.i.withCategory("chat-room")),$i=function(e){function t(t){var n=e.call(this,t)||this;n.closeViewersList=function(){n.setState({showViewersList:!1})},n.showViewersList=function(){n.props.closeRoomPicker&&n.props.closeRoomPicker(),n.setState({showViewersList:!0})},n.onChatInputFocus=function(){n.props.authToken&&!n.state.showChatRules&&n.setState({showChatRules:!0})},n.setChatListElement=function(e){n.setState({chatListElement:e})};var i=new nt.c([],[],n.props.channelLogin);return n.state={showChatRules:!1,showViewersList:!1,badgeSets:i},n}return d.__extends(t,e),t.prototype.render=function(){var e=void 0!==Ye.parse(this.props.location.search).darkpopout,t=(s={},s[Object(Je.c)(y.a.Dark)]=e,s);if(this.props.isBackground)return null;if(this.props.isHidden&&!this.props.isPopout)return f.createElement(H._24,{alignItems:H.c.Center,background:H.m.Alt2,borderLeft:!0,display:H.M.Flex,flexDirection:H.O.Column,fullHeight:!0,fullWidth:!0,justifyContent:H._0.Center,color:H.I.Base,position:H._8.Relative},f.createElement(H._1,{margin:{bottom:1}},f.createElement(H._34,{fontSize:H.Q.Size5},Object(u.d)("Chat is hidden.","ChatRoom"))),f.createElement(H.u,{onClick:this.props.onChatUnhide,"data-a-target":"show-chat-button"},Object(u.d)("Show Chat","ChatRoom")));var n=this.props.bitsConfig&&this.props.firstPageLoaded&&f.createElement(hn,{badgeData:this.state.badgeSets,bitsConfig:this.props.bitsConfig,blockLinks:this.props.blockLinks,channelID:this.props.channelID,currentUserDisplayName:this.props.currentUserDisplayName,currentUserLogin:this.props.currentUserLogin,userID:this.props.userID}),i=this.state.showViewersList&&f.createElement(Hi,{channelLogin:this.props.channelLogin,closeViewersList:this.closeViewersList}),a=!!this.props.authToken&&!this.props.isEmbedded,r=null;return this.state.showChatRules&&(r=f.createElement(H._1,{padding:{x:2}},f.createElement(ji,{chatRules:this.props.chatRules,channelLogin:this.props.channelLogin}))),f.createElement(H._1,{className:F(t),"data-test-selector":"chat-room-component-layout","data-a-target":this.props.theme===y.a.Dark?"chat-theme-dark":"chat-theme-light",flexShrink:1,flexGrow:1,display:H.M.Flex,flexDirection:H.O.Column,overflow:H._4.Hidden,fullWidth:!0,fullHeight:!0},f.createElement(H._24,{background:H.m.Alt2,borderLeft:!0,display:H.M.Flex,flexDirection:H.O.Column,flexWrap:H.P.NoWrap,position:H._8.Relative,flexGrow:1,fullHeight:!0,overflow:H._4.Hidden,color:H.I.Base},!Object(Pi.a)()&&f.createElement(H._24,{background:H.m.Alt2,borderBottom:!0,className:"chat-room__header",display:H.M.Flex,justifyContent:H._0.Center,alignItems:H.c.Center,padding:{y:1},flexShrink:0},f.createElement("p",{"data-a-target":"chat-room__header-channel-name"},this.props.channelLogin)),this.props.chatRoomHeader,n,f.createElement(Fi,{badgeSets:this.state.badgeSets,channelID:this.props.channelID,channelLogin:this.props.channelLogin,currentUserDisplayName:this.props.currentUserDisplayName,currentUserLogin:this.props.currentUserLogin,isEmbedded:this.props.isEmbedded,isCurrentUserModerator:this.props.isCurrentUserModerator,onPushMessage:this.props.onPushMessage,containerRef:this.setChatListElement}),f.createElement(H._1,{className:"chat-room__viewer-card","data-a-target":"chat-user-card",position:H._8.Absolute},f.createElement(qi.a,{isEmbedded:this.props.isEmbedded,onSendMessage:this.props.onSendMessage,channelID:this.props.channelID})),f.createElement(H._1,{className:Object(Pi.a)()?"chat-room__notifications":"chat-room__old-notifications",position:H._8.Absolute,zIndex:H._51.Default,fullWidth:!0},this.props.children),r,this.props.isOwnChannel&&!this.props.isEmbedded&&f.createElement(tt,{hostedChannelLogin:this.props.hostedChannelLogin}),i,f.createElement(Gi.a,{channelID:this.props.channelID,channelLogin:this.props.channelLogin,isEmbedded:this.props.isEmbedded,isHostMode:this.props.isHostMode,isPopout:this.props.isPopout,onPushMessage:this.props.onPushMessage,onSendMessage:this.props.onSendMessage}),f.createElement(Di,{activeChatters:this.props.activeChatters,authToken:this.props.authToken,bitsConfig:a?this.props.bitsConfig:void 0,channelDisplayName:this.props.channelDisplayName,channelID:this.props.channelID,channelLogin:this.props.channelLogin,emotes:this.props.emotes,firstPageLoaded:this.props.firstPageLoaded,isCurrentUserModerator:this.props.isCurrentUserModerator,isEmbedded:this.props.isEmbedded,isHostMode:this.props.isHostMode,isPopout:this.props.isPopout,isStaff:this.props.isStaff,onChatCommand:this.props.onSendMessage,badgeSets:this.state.badgeSets,userBadges:this.props.userBadges,showViewersList:this.showViewersList,raidReceived:this.props.raidReceived,onSendMessage:this.props.onSendMessage,onInputFocus:this.onChatInputFocus,containerElement:this.state.chatListElement})));var s},t.prototype.componentWillReceiveProps=function(e){if(e.data&&e.data.badges&&e.data.user&&e.data.user.broadcastBadges&&this.setState({badgeSets:new nt.c(e.data.badges,e.data.user.broadcastBadges,e.channelLogin)}),e.data&&e.data.user&&e.data.user.self&&e.data.user.self.displayBadges){var t={};e.data.user.self.displayBadges.forEach(function(e){t[e.setID]=e.version}),u.n.tmi.client.updateChannelBadges(e.channelLogin,t)}},t}(f.Component),Yi=Object(k.d)(Object(b.a)(zi,{options:function(e){return{name:"data",variables:{channelLogin:e.channelLogin}}}}),Object(ke.a)(function(e){return{query:zi,variables:{channelLogin:e.channelLogin},topic:Object(P.p)(e.userID),type:B.PubsubMessageType.UserBitsBadgeUpdate,skip:!e.userID,mutator:function(t,n){if(Qi.debug("Received bits-user-update-v1 pubsub update",{data:n,event:t}),!n.badges||t.message_type===gn.Balance||null===t.data.newest_version||t.data.channel_id!==e.channelID)return n;var i=n.badges.find(function(e){return e.setID===t.data.set_id&&e.version===t.data.newest_version});return void 0!==i&&n.user.self.displayBadges&&(n.user.self.displayBadges=n.user.self.displayBadges.map(function(e){return e.setID===i.setID&&e.version!==i.version?i:e}),(!n.user.self.selectedBadge||i.setID===nn.Bits&&n.user.self.selectedBadge.setID===nn.Bits)&&(n.user.self.selectedBadge=i),n.user.self.selectedBadge&&(i.setID!==nn.Leaderboard||n.user.self.selectedBadge.setID!==nn.Bits&&n.user.self.selectedBadge.setID!==nn.Leaderboard)||(n.user.self.selectedBadge=i)),n}}}),Ke.e)($i),Ki="(?:\\W|^)",Ji="(?:$|\\W)",Zi=150,Xi="PowerUpL DarkMode PowerUpR",ea=function(e){function t(t){var n=e.call(this,t)||this;return n.state={hasEnteredChatRoom:!1,hostedChannelLogin:null,raidReceived:!1,userBadges:null},n.sendMessage=function(e){if(!e||0===e.length||!n.props.authToken)return!1;var t=n.chatService.sendMessage(e);return(!t||!t.preserveInput)&&(n.parseOutgoingMessage(e),!0)},n.pushMessage=function(e){n.chatBuffer.consumeChatEvent(e),n.activeChatters.consumeChatEvent(e)},n.onChatMessage=function(e){n.chatBuffer.consumeChatEvent(e),n.activeChatters.consumeChatEvent(e),n.onChatEvent(e)},n.connect=function(e){n.setState({hasEnteredChatRoom:!1}),e.userID&&e.channelID&&(n.moderationActionService=new qe(e.channelID,e.userID,n.chatBuffer.consumeChatEvent)),n.chatService.join()},n.disconnect=function(){n.clearBufferHandle(),n.moderationActionService&&n.moderationActionService.unsubscribe(),n.chatService.part()},n.updateBitsConfig=function(e){void 0===e&&(e=x.a),n.chatService.updateBitsConfig(e)},n.updateBlockLinks=function(e){n.chatService.updateBlockLinks(e)},n.onChatBufferUpdate=function(){n.syncBufferHandle||n.props.isBackground||(n.syncBufferHandle=setTimeout(n.syncBufferedMessages,0))},n.syncBufferedMessages=function(){n.chatBuffer&&n.chatBuffer.isDirty&&n.props.onChatMessagesUpdate(n.chatBuffer.toArray()),n.clearBufferHandle()},n.onChatEvent=function(e){switch(e.type){case De.a.Hosting:n.hostingHandler(e.hostedChannel);break;case De.a.Unhost:n.hostingHandler(null);break;case De.a.Connected:n.onConnected();break;case De.a.RoomState:n.roomStateHandler(e.state);break;case De.a.BadgesUpdated:n.onBadgesUpdated(e);break;case De.a.Raid:n.setState({raidReceived:!0})}},n.hostingHandler=function(e){n.setState({hostedChannelLogin:e}),n.props.onHostingChange&&n.props.onHostingChange(e)},n.roomStateHandler=function(e){e.slowMode?n.props.onSlowModeEnable():n.props.onSlowModeDisable(),void 0!==e.followersOnly&&(e.followersOnly?(n.props.onFollowerModeDurationChange(e.followersOnlyRequirement),n.props.onFollowerModeEnable()):n.props.onFollowerModeDisable()),void 0!==e.subsOnly&&(e.subsOnly?n.props.onSubsOnlyModeEnable():n.props.onSubsOnlyModeDisable())},n.onConnected=function(){u.i.debug("Connected"),n.props.latencyTracking.reportCustomEvent(n.chatConnected),n.state.hasEnteredChatRoom||Object(ze.b)({channelLogin:n.props.channelLogin,isHostMode:!!n.state.hostedChannelLogin}),n.setState({hasEnteredChatRoom:!0}),n.props.latencyTracking.reportInteractive()},n.createOutgoingTokenMatchers=function(e){n.outgoingTokenMatchers=e.map(function(e){return{token:e,regex:new RegExp(""+Ki+e+Ji)}})},n.parseOutgoingMessage=function(e){n.outgoingTokenMatchers.forEach(function(t){t.regex.test(e)&&n.onOutgoingTokenMatch(t.token,e)})},n.onOutgoingTokenMatch=function(e,t){switch(e){case Xi:var i=n.props.theme===y.a.Light?y.a.Dark:y.a.Light;n.props.onThemeChange(i);break;default:return}},n.onBadgesUpdated=function(e){n.setState({userBadges:e.badges})},n.clearBufferHandle=function(){n.syncBufferHandle&&(clearTimeout(n.syncBufferHandle),n.syncBufferHandle=0)},n.chatService=new Ge(t.userLogin,t.channelLogin,n.onChatMessage),n.logger=u.i.withCategory("chat-room"),n.registerCustomLatencyEvents(),n.createOutgoingTokenMatchers([Xi]),n.activeChatters=new Oe(t.channelID),n.chatBuffer=new je(Zi,n.onChatBufferUpdate),n.chatBuffer.setBlockedUsers(t.blockedUsers),t.userLogin&&n.chatBuffer.setCurrentUserLogin(t.userLogin),t.userID&&n.activeChatters.setCurrentUserID(t.userID),n}return d.__extends(t,e),t.prototype.componentDidMount=function(){this.connect(this.props),this.props.bitsConfig&&this.updateBitsConfig(this.props.bitsConfig),this.updateBlockLinks(this.props.blockLinks),this.chatService.disabled&&this.props.latencyTracking.reportInteractive(),this.props.emoteSetsData&&this.props.emoteSetsData.emoteSets&&(this.logger.debug("Updating emote sets after mount",{emoteSets:this.props.emoteSetsData&&this.props.emoteSetsData.emoteSets}),this.chatService.updateEmotes(this.props.emoteSetsData.emoteSets))},t.prototype.componentWillUnmount=function(){this.disconnect(),this.chatBuffer&&this.chatBuffer.shutdown(),this.props.onChatMessagesReset()},t.prototype.componentWillReceiveProps=function(e){var t=this.props,n=!1;if(e.isHidden&&!t.isHidden||!e.rightColumnExpanded&&t.rightColumnExpanded?this.disconnect():(n=e.channelLogin!==t.channelLogin||e.userLogin!==t.userLogin||e.authToken!==t.authToken||!e.isHidden&&t.isHidden||e.rightColumnExpanded&&!t.rightColumnExpanded)&&(this.logger.debug("Reconnecting..."),this.registerCustomLatencyEvents(),this.connect(e),this.setState({hostedChannelLogin:null})),this.props.isBackground&&!e.isBackground){var i=u.k.getOptional("roomsFastChatThresholdOverride");if(i||(i=5),this.chatBuffer.chatRate>i){var a=u.k.getOptional("roomsClearedBufferSize");a||(a=20),this.chatBuffer.clear(a)}this.props.onChatMessagesUpdate(this.chatBuffer.toArray())}var r=e.emoteSetsData&&e.emoteSetsData.emoteSets,s=t.emoteSetsData&&t.emoteSetsData.emoteSets;r&&(r!==s||n)&&(this.logger.debug("Updating emote sets on props change",{shouldReconnect:n,prevEmoteSets:s,nextEmoteSets:r}),this.chatService.updateEmotes(r)),(e.bitsConfig!==t.bitsConfig||n)&&this.updateBitsConfig(e.bitsConfig),(e.blockLinks!==t.blockLinks||n)&&this.updateBlockLinks(e.blockLinks);var o=e.isCurrentUserModerator?0:e.chatDelayMS;this.chatBuffer.setDelay(o),e.userLogin&&t.userLogin!==e.userLogin&&this.chatBuffer.setCurrentUserLogin(e.userLogin),e.userID&&t.userID!==e.userID&&this.activeChatters.setCurrentUserID(e.userID),t.channelID!==e.channelID&&this.activeChatters.resetWithChannelID(e.channelID),t.blockedUsers!==e.blockedUsers&&this.chatBuffer.setBlockedUsers(e.blockedUsers),!this.moderationActionService&&e.userID&&e.channelID&&(this.moderationActionService=new qe(e.channelID,e.userID,this.chatBuffer.consumeChatEvent))},t.prototype.render=function(){var e=this.props.emoteSetsData&&this.props.emoteSetsData.emoteSets||[],t=this.props.emoteSetsData&&this.props.emoteSetsData.emoteMap||{};return f.createElement(Yi,{authToken:this.props.authToken,bitsConfig:this.props.bitsConfig,blockLinks:this.props.blockLinks,channelDisplayName:this.props.channelDisplayName,channelID:this.props.channelID,channelLogin:this.props.channelLogin,activeChatters:this.activeChatters,chatRoomHeader:f.createElement(be,{channelLogin:this.props.channelLogin,sendMessage:this.sendMessage}),chatRules:this.props.chatRules,currentUserDisplayName:this.props.userDisplayName,currentUserLogin:this.props.userLogin,emotes:e,firstPageLoaded:this.props.firstPageLoaded,hostedChannelLogin:this.state.hostedChannelLogin,isBackground:this.props.isBackground,isCurrentUserModerator:this.props.isCurrentUserModerator,isEmbedded:this.props.isEmbedded,isHidden:this.props.isHidden,isHostMode:!!this.state.hostedChannelLogin,isOwnChannel:this.isOwnChannel,isPopout:this.props.isPopout,closeRoomPicker:this.props.closeRoomPicker,onChatUnhide:this.props.onChatUnhide,onPushMessage:this.pushMessage,onSendMessage:this.sendMessage,raidReceived:this.state.raidReceived,theme:this.props.theme,isStaff:this.props.isStaff,userBadges:this.state.userBadges,userID:this.props.userID},this.props.firstPageLoaded&&this.props.authToken&&!this.props.isEmbedded&&f.createElement(oe,{authToken:this.props.authToken,channelDisplayName:this.props.channelDisplayName,channelLogin:this.props.channelLogin,bitsConfig:this.props.bitsConfig}),this.props.hostedChannelDisplayName&&!this.props.isPopout&&f.createElement(ce,{hostedChannelDisplayName:this.props.hostedChannelDisplayName||"",hostedChannelLogin:this.state.hostedChannelLogin||""}),this.props.firstPageLoaded&&!this.props.isEmbedded&&f.createElement(ve.a,{channelID:this.props.channelID,send:this.sendMessage}),this.props.firstPageLoaded&&!this.props.isEmbedded&&!this.props.isPopout&&f.createElement(me,{channelLogin:this.props.channelLogin}),this.props.firstPageLoaded&&!this.props.isEmbedded&&!this.props.isPopout&&f.createElement(Te,{channelID:this.props.channelID,channelLogin:this.props.channelLogin}),f.createElement(U.a,{isEmbedded:this.props.isEmbedded,isPopout:this.props.isPopout,userLogin:this.props.userLogin,userID:this.props.userID,emoteMap:t}),f.createElement(L.a,{currentUserLogin:this.props.userLogin}),f.createElement(M,{channelID:this.props.channelID}))},t.prototype.registerCustomLatencyEvents=function(){this.logger.debug("Registering custom latency events"),this.props.latencyTracking.resetCustomEvents(E.a.Chat),this.chatInitialized=this.registerInitEvent(),this.chatConnected=this.registerConnectedEvent(),this.props.latencyTracking.reportCustomEvent(this.chatInitialized)},t.prototype.registerInitEvent=function(){return this.props.latencyTracking.registerCustomEvent({benchmark:3e3,group:E.a.Chat,key:E.b.ChatInit,label:E.c.Init})},t.prototype.registerConnectedEvent=function(){return this.props.latencyTracking.registerCustomEvent({benchmark:4e3,group:E.a.Chat,key:E.b.ChatConnected,label:E.c.Connected})},Object.defineProperty(t.prototype,"isOwnChannel",{get:function(){return this.props.userID===this.props.channelID},enumerable:!0,configurable:!0}),t}(f.Component),ta=Object(v.compose)(Object(h.b)(function(e){return{firstPageLoaded:e.session.firstPageLoaded,isHidden:e.chat.isHidden,isLoggedIn:Object(g.d)(e),rightColumnExpanded:e.ui.rightColumnExpanded,theme:Object(N.a)(e)}},function(e,t){return Object(k.b)({onChatMessagesReset:function(){return le.w()},onChatMessagesUpdate:function(e){return le.I(t.channelLogin,e)},onChatUnhide:function(){return le.K()},onFollowerModeDisable:function(){return le.x()},onFollowerModeDurationChange:function(e){return le.u(e)},onFollowerModeEnable:function(){return le.C()},onSlowModeDisable:function(){return le.z()},onSlowModeEnable:function(){return le.E()},onSubsOnlyModeDisable:function(){return le.A()},onSubsOnlyModeEnable:function(){return le.F()},onThemeChange:function(e){return Object(S.b)(e,S.a.TypedCommand)}},e)}),Object(Qe.d)("ChatRoom"),Object(b.a)($e,{props:function(e){var t;return e.data&&e.data.user&&e.data.user.cheer&&e.data.user.cheer.emotes&&(t=Object(R.a)(e.data.user.cheer.emotes)),{bitsConfig:t}},options:function(e){return{name:"data",variables:{channelLogin:e.channelLogin}}}}),Object(_.a)(),Object(C.a)())(ea),na=n("/eFD"),ia=n("KNSH"),aa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d.__extends(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.componentDidUpdate=function(){this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){var e=this.props.channelData.channel,t=this.props.userData&&this.props.userData.user,n=!1,i=!1;if(t&&e&&e.self){var a=t.login===e.login,r=t.roles.isGlobalMod||t.roles.isSiteAdmin||t.roles.isStaff;n=e.self.isModerator||r||a,i=t.roles.isStaff}var s=e&&e.chatSettings&&e.chatSettings.rules,o=e&&e.chatSettings&&e.chatSettings.chatDelayMs,l=!(!e||!e.chatSettings)&&e.chatSettings.blockLinks;return f.createElement(ta,{key:this.props.channelLogin,authToken:this.props.user&&this.props.user.authToken,blockLinks:l,channelDisplayName:e&&e.displayName,channelID:e&&e.id,channelLogin:this.props.channelLogin,chatRules:s,chatDelayMS:o,clientID:this.props.clientID,isBackground:this.props.isBackground,isCurrentUserModerator:n,isEmbedded:!!this.props.isEmbedded,isPopout:!!this.props.isPopout,hostedChannelDisplayName:this.props.hostedChannelDisplayName,closeRoomPicker:this.props.closeRoomPicker,onHostingChange:this.props.onHostingChange,userDisplayName:this.props.user&&this.props.user.displayName,userID:this.props.user&&this.props.user.id.toString(),userLogin:this.props.user&&this.props.user.login,isStaff:i})},t=d.__decorate([Object(b.a)(na,{name:"channelData",options:function(e){return{variables:{channelLogin:e.channelLogin}}}}),Object(b.a)(ia,{name:"userData",skip:function(e){return!e.user}}),Object(Qe.d)("Chat")],t)}(f.Component),ra=Object(h.b)(function(e){return{user:Object(g.c)(e)}})(aa);n.d(t,!1,function(){return aa}),n.d(t,"a",function(){return ra})},"1EXI":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ReportUserModal_UserCommunities"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"userId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"userId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"directories"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"directoryType"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:140}};n.loc.source={body:"query ReportUserModal_UserCommunities($userId: ID!) {\nuser(id: $userId) {\nid\ndirectories {\nnodes {\nid\nname\ndisplayName\ndirectoryType\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"1Eny":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ViewerCardModActions_UnbanUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UnbanUserFromChatRoomInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unbanUserFromChatRoom"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ban"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isPermanent"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:141}};n.loc.source={body:"mutation ViewerCardModActions_UnbanUser($input: UnbanUserFromChatRoomInput!) {\nunbanUserFromChatRoom(input: $input) {\nban {\nisPermanent\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"1F7R":function(e,t,n){"use strict";var i=n("RH2O"),a=n("2KeS"),r=n("vh75"),s=n("TToO"),o=n("U7vG"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),t.prototype.componentWillMount=function(){this.props.addCommand(this.props.command,this.props.handler)},t.prototype.componentWillReceiveProps=function(e){this.props.command===e.command&&this.props.handler===e.handler||(this.props.removeCommand(this.props.command),this.props.addCommand(e.command,e.handler))},t.prototype.componentWillUnmount=function(){this.props.removeCommand(this.props.command)},t.prototype.render=function(){return null},t}(o.PureComponent),c=Object(i.b)(null,function(e){return Object(a.b)({addCommand:r.t,removeCommand:r.J},e)})(l);n.d(t,"a",function(){return c})},"1Mw/":function(e,t,n){"use strict";var i,a=n("TToO"),r=n("U7vG"),s=n("DtWM"),o=n("RH2O"),l=n("2KeS"),c=n("Aj/L"),d=n("5k1t"),u=n("HW6M"),p=n("3zLD"),m=n("6sO2"),h=n("rCmJ"),g=n("yWCw"),f=n("7vx8"),b=n("RweG"),v=n("6BvN"),k=n("Ldv2"),y=n("oIkB"),_=n("HZww"),C=n("HM6l"),S=n("c3pS"),E=n("ieBa"),N=n("F8kA"),w=n("+Znq"),T=n("u8SD"),D=n("4Dne"),I=n("djIP"),O=n("vH/s"),M=n("2Hj/"),x=n("emkL"),R=n("+dIz"),L=n("Kxgf"),U=n("7miU"),F=n("Odds"),j=n("82Ta"),B=n("yTC+"),A="whispers-report-harassment-button",P="whispers-report-spam-button",V=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderReportSpamButton=function(){if(t.isBlocked)return null;var e=Object(m.d)("Report Spam","ThreadSettings");return r.createElement(F.Z,{"data-test-selector":P,ariaLabel:e,onClick:t.reportUserSpam},r.createElement(F._1,{padding:{y:.5,x:1}},e))},t.renderReportHarassmentButton=function(){if(t.isBlocked)return null;var e=Object(m.d)("Report Harrasment","ThreadSettings");return r.createElement(F.Z,{"data-test-selector":A,ariaLabel:e,onClick:t.reportUserHarassment},r.createElement(F._1,{padding:{y:.5,x:1}},e))},t.onChannelRedirect=function(){t.props.collapseThread&&t.props.collapseThread()},t.toggleMutethread=function(){var e=!t.props.isMuted,n=a.__assign({},Object(y.a)({threadID:t.props.threadID,isMuted:!t.props.isMuted}),{optimisticResponse:{updateWhisperThread:{thread:{id:t.props.threadID,isMuted:e,__typename:"WhisperThread"},__typename:"UpdateWhisperThreadPayload"}}});t.props.setMuteThread&&(e?Object(U.j)(t.props.threadID):Object(U.k)(t.props.threadID),t.props.setMuteThread(n))},t.reportUserHarassment=function(){return a.__awaiter(t,void 0,void 0,function(){var e,t;return a.__generator(this,function(n){switch(n.label){case 0:e=Object(y.a)({targetUserID:this.props.userID,reason:I.c.Harassment,threadID:this.props.threadID}),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.props.reportWhisperThread(e)];case 2:return n.sent(),this.blockUser(),[3,4];case 3:return t=n.sent(),m.i.error(t,"Failed to report whisper thread for harassment.",{threadID:this.props.threadID}),[3,4];case 4:return[2]}})})},t.reportUserSpam=function(){return a.__awaiter(t,void 0,void 0,function(){var e,t;return a.__generator(this,function(n){switch(n.label){case 0:e=Object(y.a)({targetUserID:this.props.userID,reason:I.c.Spam,threadID:this.props.threadID}),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.props.reportWhisperThread(e)];case 2:return n.sent(),this.blockUser(),[3,4];case 3:return t=n.sent(),m.i.error(t,"Failed to report whisper thread for spam.",{threadID:this.props.threadID}),[3,4];case 4:return[2]}})})},t.blockUser=function(){t.props.blockUserMutation(t.props.userID,I.b.Other,I.a.Whisper,t.props.currentUser),t.props.onBlock&&t.props.onBlock(t.props.threadID)},t.unblockUser=function(){t.props.unblockUserMutation(t.props.userID,t.props.currentUser),t.props.onUnblock&&t.props.onUnblock(t.props.threadID)},t}return a.__extends(t,e),t.prototype.render=function(){var e=this.props.displayName||this.props.login,t=this.props.isMuted?Object(m.d)("Turn Notifications On","ThreadSettings"):Object(m.d)("Turn Notifications Off","ThreadSettings"),n=Object(m.d)("Go to {displayName}'s Channel",{displayName:e},"ThreadSettings");return r.createElement(F._1,{display:F.M.Flex,flexDirection:F.O.Column,margin:1},r.createElement(F.Z,{ariaLabel:t,onClick:this.toggleMutethread},r.createElement(F._1,{padding:{y:.5,x:1}},t)),r.createElement(F._24,{borderBottom:!0,margin:{y:1,left:.5}}),this.renderBlockButton(),this.renderReportHarassmentButton(),this.renderReportSpamButton(),r.createElement(F.Z,{linkTo:"/"+this.props.login,onClick:this.onChannelRedirect,ariaLabel:n},r.createElement(F._1,{padding:{y:.5,x:1}},n)))},t.prototype.renderBlockButton=function(){var e,t,n=this.props.displayName||this.props.login;return this.isBlocked?(e=Object(m.d)("Unblock {displayName}...",{displayName:n},"ThreadSettings"),t=this.unblockUser):(e=Object(m.d)("Block {displayName}...",{displayName:n},"ThreadSettings"),t=this.blockUser),r.createElement(F.Z,{"data-test-selector":"whispers-block-user-button",ariaLabel:e,onClick:t},r.createElement(F._1,{padding:{y:.5,x:1}},e))},Object.defineProperty(t.prototype,"isBlocked",{get:function(){var e=this;return!(!this.props.currentUser.blockedUsers||!this.props.currentUser.blockedUsers.find(function(t){return t.id===e.props.userID}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentUserDataID",{get:function(){return Object(R.c)(this.props.currentUser)||""},enumerable:!0,configurable:!0}),t}(r.Component),W=Object(p.compose)(Object(f.a)(B,{name:"setMuteThread"}),Object(f.a)(j,{name:"reportWhisperThread"}),Object(T.a)(),Object(L.a)())(V),H=n("GxF8"),G=n("N5sm"),q=n("l4QG"),z=n("P0T5"),Q=(n("+xsx"),"report-as-spam-button"),$="mark-not-spam-button",Y="dismiss-prompt-button",K="spam-prompt-pending-target",J="spam-prompt-reported-target",Z={displayName:"???",login:"???",displayBadges:[],id:""},X=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={potentialSpamResolution:"pending"},t.renderPotentialSpamPrompt=function(){if(t.props.spamInfo&&"low"!==t.props.spamInfo.likelihood&&null===t.props.spamInfo.lastMarkedNotSpamAt){if("pending"===t.state.potentialSpamResolution)return r.createElement(F._1,{"data-a-target":K,className:"thread-header__potential-spam-prompt",attachRight:!0,attachLeft:!0,attachTop:!0},r.createElement(F._24,{background:F.m.Alt2,padding:.5,elevation:2},r.createElement(F._1,{display:F.M.InlineBlock,margin:.5},r.createElement(F._34,{type:F._39.Span,fontSize:F.Q.Size6,color:F.I.Alt2},Object(m.d)("It looks like this conversation triggered our spam detector. If it is spam, please report it!","ThreadHeader"))),r.createElement(F._1,{display:F.M.InlineBlock,margin:.5},r.createElement(F.u,{"data-a-target":Q,type:F.z.Alert,onClick:t.reportSpam,size:F.x.Small},Object(m.d)("Report spam","ThreadHeader"))),r.createElement(F._1,{display:F.M.InlineBlock,margin:.5},r.createElement(F.u,{"data-a-target":$,onClick:t.markNotSpam,size:F.x.Small},Object(m.d)("This is not spam","ThreadHeader")))));if("reported"===t.state.potentialSpamResolution&&t.interlocutor.displayName)return r.createElement(F._1,{"data-a-target":J,className:"thread-header__potential-spam-prompt",attachRight:!0,attachLeft:!0,attachTop:!0},r.createElement(F._24,{background:F.m.Alt2,padding:.5,elevation:2},r.createElement(F._1,{display:F.M.InlineBlock,margin:.5},r.createElement(F._34,{type:F._39.Span,fontSize:F.Q.Size6,color:F.I.Alt2},Object(m.d)("Thank you for helping us fight spam. We've blocked {user} from sending you further whispers. You can undo this from the Whisper Settings Menu.",{user:t.interlocutor.displayName},"ThreadHeader"))),r.createElement(F._1,{display:F.M.InlineBlock,margin:.5},r.createElement(F.u,{"data-a-target":Y,type:F.z.Text,onClick:t.dismissSpamPrompt,size:F.x.Small},Object(m.d)("Dismiss","ThreadHeader")))))}return null},t.reportSpam=function(){t.props.reportUserMutation(t.interlocutor.id,I.c.Spam,t.props.threadID),t.props.blockUserMutation(t.interlocutor.id,I.b.Other,I.a.Whisper,t.props.participants.currentUser),t.props.setThreadSpamStatusMutation(t.props.threadID,!0),Object(z.l)(t.interlocutor.login,z.a.SpamPropmt),t.setState({potentialSpamResolution:"reported"})},t.markNotSpam=function(){t.props.setThreadSpamStatusMutation(t.props.threadID,!1),Object(z.o)(t.props.threadID),t.setState({potentialSpamResolution:"dismissed"})},t.dismissSpamPrompt=function(){t.props.onBlock&&t.props.onBlock(t.props.threadID),Object(z.n)(t.props.threadID),t.setState({potentialSpamResolution:"dismissed"})},t.onSettingsClick=function(e){e.stopPropagation()},t.onPresenceClick=function(e,n){n.stopPropagation();var i=t.props.participants.currentUser&&t.props.participants.currentUser.friends.edges.find(function(e){return!(!e.node||e.node.id!==t.interlocutor.id)});t.props.participants.user&&i&&i.activity?Object(D.b)({context:e,friendActivity:i.activity,friendLogin:t.props.participants.user.login}):m.i.warn("[ThreadHeader] Attempted to track presence click without required data.")},t}return a.__extends(t,e),t.prototype.render=function(){var e=this,t=u({"thread-header__title-bar-container":!0,"thread-header__title-bar-container--highlighted":this.props.isHighlighted,"thread-header__title-bar-container--focused":this.props.isFocused}),n=u({"thread-header":!0,"thread-header--collapsed":this.props.isCollapsed}),i=Object(m.d)("Close","WhisperThreadHeader"),a=Object(m.d)("Settings","WhisperThreadHeader");if(this.props.isLoading||!this.props.participants.currentUser||!this.props.participants.user)return r.createElement(F._1,{className:t,display:F.M.Flex,justifyContent:F._0.Between,fullWidth:!0,alignItems:F.c.Center,padding:{y:.5,x:1},flexShrink:0,flexGrow:0,flexWrap:F.P.NoWrap},r.createElement(F._7,{height:20,width:80}),r.createElement(F._1,{display:F.M.Flex},r.createElement(F.v,{ariaLabel:i,icon:F._15.RemoveTag,"data-a-target":"whispers-thread__close-button-"+this.props.threadID,onClick:this.props.onClose})));var s=null,o=null,l=null,c=null,d=this.props.participants.currentUser&&this.props.participants.currentUser.friends.edges.find(function(t){return!(!t.node||t.node.id!==e.interlocutor.id)});if(d&&(o=r.createElement(F._1,{margin:{left:1},display:F.M.Flex,alignItems:F.c.Center},r.createElement(F._9,{status:function(e){switch(e){case q.a.Online:return F._10.Online;case q.a.Away:case q.a.Idle:return F._10.Away;case q.a.Busy:return F._10.Busy;case q.a.Offline:case q.a.Invisible:default:return F._10.Offline}}(d.availability)})),d.activity)){var p=Object(M.c)(d.activity,!0),h=null,g=Object(M.d)(this.props.participants.user.login,d.activity);if(g&&(h={pathname:g,state:{content:O.PageviewContent.Presence,medium:O.PageviewMedium.Whispers}}),h){var f=u({"thread-header__activity-link--highlighted":this.props.isHighlighted});l=r.createElement(N.a,{className:f,title:Object(M.c)(d.activity)||"",onClick:this.onPresenceClick.bind(this,D.a.WhisperHeaderLink),to:h,"data-test-selector":"whispers-thread__presence-link"},p)}else l=p;this.props.isCollapsed||(c=r.createElement(F._1,{padding:{right:.5}},r.createElement(x.a,{link:h,onClick:this.onPresenceClick.bind(this,D.a.WhisperHeaderButton),shouldHollowOverlay:this.props.isHighlighted})))}!this.props.isCollapsed&&this.props.participants.currentUser&&(s=r.createElement(w.a,null,r.createElement(F.v,{ariaLabel:a,icon:F._15.Gear,overlay:this.props.isHighlighted}),r.createElement(F.p,{direction:F.q.BottomRight,offsetX:"0.5rem"},r.createElement(W,{login:this.interlocutor.login,displayName:this.interlocutor.displayName,currentUser:this.props.participants.currentUser,userID:this.interlocutor.id,isMuted:this.props.isMuted,threadID:this.props.threadID,collapseThread:this.props.collapse,onBlock:this.props.onBlock,onUnblock:this.props.onUnblock}))));var b=this.interlocutor.displayBadges.map(function(e){return r.createElement(F.V,{key:e.id,flexShrink:0,margin:{right:.5}},r.createElement("img",{alt:e.title,title:e.title,className:"thread-header__badge",src:e.imageURL}))});return r.createElement(F._1,{className:n,position:F._8.Relative,fullWidth:!0},r.createElement("div",{className:"thread-header__click-area",onClick:this.props.onHeaderClick,"data-a-target":"thread-header__click-area"},r.createElement(F._1,{className:t,fullWidth:!0,padding:{x:1,y:.5},alignItems:F.c.Center,flexGrow:1,display:F.M.Flex,"data-a-target":"whisper-thread__title-bar-"+this.props.threadID,"data-click-out-id":"thread-expand-close",flexWrap:F.P.NoWrap},r.createElement(F._1,{fullHeight:!0,flexGrow:1,display:F.M.Flex,flexDirection:F.O.Column},r.createElement(F._1,{display:F.M.Flex,flexGrow:1,alignItems:F.c.Center,flexWrap:F.P.NoWrap,padding:{right:1},ellipsis:!0},b,r.createElement(F._34,{color:this.props.isHighlighted?F.I.Overlay:F.I.Base,type:F._39.Span,bold:!0,ellipsis:!0},this.interlocutor.displayName),o),r.createElement(F._24,{className:"thread-header__activity",color:this.props.isHighlighted?F.I.Overlay:F.I.Base,padding:{right:1},ellipsis:!0},l)),r.createElement(F._1,{display:F.M.Flex,flexShrink:0,flexDirection:F.O.Row,alignItems:F.c.Center},c,r.createElement("div",{onClick:this.onSettingsClick},s),r.createElement(F.v,{ariaLabel:i,icon:F._15.RemoveTag,"data-a-target":"thread-header__close-button-"+this.props.threadID,onClick:this.props.onClose,overlay:this.props.isHighlighted})))),this.renderPotentialSpamPrompt())},Object.defineProperty(t.prototype,"interlocutor",{get:function(){return this.props.participants.user||Z},enumerable:!0,configurable:!0}),t}(r.Component),ee=Object(l.d)(Object(T.a)(),function(){var e=this;return Object(f.a)(H,{props:function(t){return{reportUserMutation:function(n,i,r){return a.__awaiter(e,void 0,void 0,function(){var e;return a.__generator(this,function(a){switch(a.label){case 0:if(!t.mutate)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,t.mutate({variables:{input:{targetUserID:n,reason:i,threadID:r}}})];case 2:return a.sent(),[3,4];case 3:return e=a.sent(),m.i.error(e,"Unable to report user"),[3,4];case 4:return[2]}})})}}}})}(),function(){var e=this;return Object(f.a)(G,{props:function(t){return{setThreadSpamStatusMutation:function(n,i){return a.__awaiter(e,void 0,void 0,function(){var e;return a.__generator(this,function(a){switch(a.label){case 0:if(!t.mutate)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,t.mutate({variables:{input:{threadID:n,isSpam:i}}})];case 2:return a.sent(),[3,4];case 3:return e=a.sent(),m.i.error(e,"Unable to modify threads spam status user"),[3,4];case 4:return[2]}})})}}}})}())(X),te=n("/UH7"),ne=n("zCIC"),ie=n("Th9g");!function(e){e[e.Timestamp=0]="Timestamp",e[e.Whisper=1]="Whisper",e[e.Warning=2]="Warning",e[e.NewMessages=3]="NewMessages",e[e.Notification=4]="Notification"}(i||(i={}));n("vRhQ");var ae=n("hvzu"),re=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.render=function(){var e=this.props.message;switch(e.type){case i.Timestamp:return r.createElement(F._24,{className:"thread-message__timestamp",color:F.I.Alt2,fontSize:F.Q.Size7},Object(ae.d)(e));case i.Warning:return r.createElement(F._24,{className:"thread-message__warning",color:F.I.Alt2},Object(ae.e)());case i.Whisper:return r.createElement(F._1,{className:"thread-message__message","data-a-target":"whisper-message"},Object(ae.f)(e));case i.NewMessages:return r.createElement(F._24,{className:"thread-message__new-messages",color:F.I.OverlayAlt,fontSize:F.Q.Size7},Object(ae.b)());case i.Notification:return r.createElement(F._1,{className:"thread-message__notification"},Object(ae.c)(e));default:return null}},t}(r.Component),se=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={disableInfiniteTrigger:!0},t.loadMore=function(){var e=t.scroll.scrollContent.scrollHeight;return t.setState({prevScrollHeight:e}),t.props.loadMore()},t.renderMessages=function(e){return e.map(function(e,n){return r.createElement(re,{message:e,key:t.generateMessageKey(e,n.toString())})})},t.getMessages=function(){var e=t.props.unreadMessagesCount;return t.props.thread.messages.edges.map(function(e){return{type:i.Whisper,content:e.node.content.content,from:t.props.participantsByID[+e.node.from.id],emotes:e.node.content.emotes,id:e.node.id,sentAt:new Date(e.node.sentAt),editedAt:e.node.editedAt,deletedAt:e.node.deletedAt}}).reduce(function(n,i,a,r){if(t.notificationsFor(i).forEach(function(e){n.push(e)}),n.push(i),0==--e&&n.push(t.createNewMessagesIndicator()),0===a);else if(a<r.length-1){var s=r[a+1];!i.deletedAt&&t.shouldAddTimestamp(i,s)&&n.push(t.createTimestampMessage(i))}return a===r.length-1&&(i.deletedAt||n.push(t.createTimestampMessage(i)),n.push(t.createWarningMessage())),n},[]).reverse()},t.shouldAddTimestamp=function(e,t){return e.sentAt.valueOf()-t.sentAt.valueOf()>6e5},t.createTimestampMessage=function(e){return{type:i.Timestamp,timestamp:new Date(e.sentAt)}},t.notificationsFor=function(e){return t.props.notifications.filter(function(t){return t.afterMessageID===e.id}).map(t.createNotificationLine)},t.createNotificationLine=function(e){return{type:i.Notification,content:e.content}},t.createNewMessagesIndicator=function(){return{type:i.NewMessages}},t.createWarningMessage=function(){return{type:i.Warning}},t.saveScrollRef=function(e){return t.scroll=e},t.scrollToBottom=function(){t.scroll.scrollContent.scrollTop=t.scroll.scrollContent.scrollHeight},t}return a.__extends(t,e),t.prototype.componentDidMount=function(){this.scrollToBottom(),this.setState({disableInfiniteTrigger:!1})},t.prototype.componentWillReceiveProps=function(e){(this.props.thread.messages.edges.length>0||e.thread.messages.edges.length>0)&&(0===this.props.thread.messages.edges.length&&e.thread.messages.edges.length>0||this.props.thread.messages.edges[0].cursor!==e.thread.messages.edges[0].cursor)&&this.setState({prevScrollHeight:this.scroll.scrollContent.scrollHeight})},t.prototype.componentDidUpdate=function(e){if(this.props.thread.messages.edges.length>e.thread.messages.edges.length)if(this.props.thread.messages.edges[0]&&e.thread.messages.edges[0]&&this.props.thread.messages.edges[0].cursor===e.thread.messages.edges[0].cursor&&this.props.thread.messages.edges[0].node.id===e.thread.messages.edges[0].node.id){if(this.state.prevScrollHeight&&this.state.prevScrollHeight!==this.scroll.scrollContent.scrollHeight){var t=this.scroll.scrollContent.scrollHeight-this.state.prevScrollHeight;this.scroll.scrollContent.scrollTop=t}}else this.scrollToBottom();this.props.notifications.length>e.notifications.length&&this.scrollToBottom()},t.prototype.render=function(){var e=this.getMessages();return r.createElement(F._1,{fullHeight:!0},r.createElement(ne.b,{scrollRef:this.saveScrollRef,suppressScrollX:!0},r.createElement(F._1,null,r.createElement(ne.a,{enabled:!this.state.disableInfiniteTrigger,loadMore:this.loadMore,pixelThreshold:200,orientation:ie.b.Down,contentLength:e.length}),this.renderMessages(e))))},t.prototype.generateMessageKey=function(e,t){switch(e.type){case i.NewMessages:case i.Warning:return""+e.type;case i.Timestamp:return e.type+"-"+e.timestamp.getTime();case i.Whisper:return e.type+"-"+e.id;default:return m.i.warn("[ThreadMessages] Encountered an unknown message type."),t}},t}(r.Component),oe=Object(o.b)(function(e,t){return{notifications:Object(te.a)(e,t.thread.id)}})(se),le=n("DCOT"),ce=n("qzJ+"),de=n("m4HT"),ue=n("Iv9R"),pe=(n("p8c9"),n("h4Qz")),me=function(e){function t(t){var n=e.call(this,t)||this;return n.refetchTimeout=0,n.hadError=!1,n.onEmoticonClick=function(e){var t=n.autocompleteInput.getValue();t&&t.length>0&&!t.endsWith(" ")&&(t+=" "),t+=e+" ",n.autocompleteInput.setValue(t)},n.onBlock=function(e){n.addNotification(Object(m.d)("User successfully blocked","whispers")),n.props.onBlock&&n.props.onBlock(e)},n.onUnblock=function(){n.addNotification(Object(m.d)("User successfully unblocked","whispers"))},n.loadMore=function(){return a.__awaiter(n,void 0,void 0,function(){return a.__generator(this,function(e){return this.props.data.loading||this.hadError?[2]:[2,this.props.loadMore()]})})},n.addNewThreadSendWhisper=function(e){var t=n.state.newThreadMessages;t.unshift({content:e,id:Object(C.b)()}),n.setState({newThreadMessages:t})},n.addNotification=function(e){n.props.notifyWhisperThread(n.props.threadID,e,n.getLastMessageID())},n.getLastMessageID=function(){if(n.props.data.whisperThread&&n.props.data.whisperThread.messages.edges[0])return n.props.data.whisperThread.messages.edges[0].node.id},n.getPlaceholderThreadFromLocalState=function(){return function(e,t){return{messages:{edges:e.map(function(e,n){return{cursor:""+n,node:{content:{content:e.content,emotes:[]},deletedAt:null,editedAt:null,from:{id:t},id:e.id,sentAt:(new Date).toISOString()}}})},isMuted:!1,unreadMessagesCount:0,participants:[],id:Object(C.b)(),spamInfo:{lastMarkedNotSpamAt:null,likelihood:"low"},userLastMessageRead:{sentAt:(new Date).toISOString()}}}(n.state.newThreadMessages,n.props.currentUserID)},n.handleHeaderClick=function(){n.props.collapsed?n.expand():n.collapse()},n.expand=function(){n.props.participants.currentUser&&Object(U.h)(n.props.threadID),n.props.onExpand(n.props.threadID)},n.onClickOut=function(){n.props.focused&&n.props.onUnfocus(n.props.threadID)},n.handleClose=function(){n.props.participants.currentUser&&Object(U.c)(n.props.threadID),n.props.onClose(n.props.threadID)},n.collapse=function(){n.props.participants.currentUser&&Object(U.d)(n.props.threadID),n.props.onCollapse(n.props.threadID)},n.handleKeydown=function(e){if((e.charCode||e.keyCode)===v.a.Enter){var t=n.autocompleteInput.getValue();n.autocompleteInput.setValue(""),n.sendWhisper(t)}},n.handleClick=function(){n.props.onFocus(n.props.threadID),n.markThreadMessagesAsRead()},n.markThreadMessagesAsRead=function(){if(!(n.props.data.loading||n.hadError||n.props.data.whisperThread&&0===n.props.data.whisperThread.unreadMessagesCount)){var e=n.props.data.whisperThread&&+n.props.data.whisperThread.messages.edges[0].cursor;e&&!isNaN(e)||(e=0),Object(le.a)({threadID:n.props.threadID,lastReadMessageID:n.props.data.whisperThread&&n.props.data.whisperThread.messages.edges[0].node.id||""},e)}},n.sendWhisper=function(e){if(""!==e){n.hadError&&n.addNewThreadSendWhisper(e);var t=Object(de.b)(n.props.threadID,n.props.currentUserID);t?(n.props.participants.currentUser&&n.props.participants.user&&Object(U.m)({threadID:n.props.threadID,targetUserLogin:n.props.participants.user.login}),Object(ce.a)({currentUserID:n.props.currentUserID,emotes:n.props.emoteSetsData&&n.props.emoteSetsData.emoteMap||{},message:e,recipientUserID:t}).catch(function(){var e=Object(m.d)("Your whisper was not delivered.","Thread"),t=n.props.data.whisperThread&&n.props.data.whisperThread.messages.edges[0].node.id;n.props.notifyWhisperThread(n.props.threadID,e,t)})):m.i.warn("Unable to parse whisper recipient ID.")}},n.setAutocompleteInnerComponentRef=function(e){n.textInput=e},n.setAutocompleteInputRef=function(e){return n.autocompleteInput=e},n.handleContentClick=function(){document.getSelection().toString()||n.textInput.focus()},n.state={newThreadMessages:[]},n}return a.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){var t=this;if(e.data.error&&(this.hadError=!0),e.data.error||e.data.loading||!e.data.whisperThread||this.props.reportThreadData(e.threadID,e.data.whisperThread),this.hadError){var n=!1;this.props.pubsub.messages.whisperReceived!==e.pubsub.messages.whisperReceived&&e.pubsub.messages.whisperReceived&&e.pubsub.messages.whisperReceived.data_object.thread_id===this.props.threadID&&(n=!0),this.props.pubsub.messages.whisperSent!==e.pubsub.messages.whisperSent&&e.pubsub.messages.whisperSent&&e.pubsub.messages.whisperSent.data_object.thread_id===this.props.threadID&&(n=!0),n&&(clearTimeout(this.refetchTimeout),this.refetchTimeout=setTimeout(function(){t.props.data.refetch()},200))}},t.prototype.componentDidUpdate=function(e){e.data.whisperThread&&this.props.data.whisperThread&&(this.props.data.whisperThread.messages.edges.length,e.data.whisperThread.messages.edges.length)},t.prototype.render=function(){var e=u({"whispers-thread":!0,"whispers-thread--collapsed":this.props.collapsed,"whispers-thread--focused":this.props.focused});if(this.props.hidden)return null;var t=this.props.emoteSetsData&&this.props.emoteSetsData.emoteSets||[];return r.createElement(h.a,{onClickOut:this.onClickOut},r.createElement(F._24,{className:e,display:F.M.Flex,flexShrink:0,flexGrow:0,position:F._8.Relative,background:F.m.Base,margin:{left:1},alignItems:F.c.Center,justifyContent:F._0.Center,"data-a-target":"whisper-thread-"+this.props.threadID+(this.props.collapsed?"-collapsed":""),elevation:3},r.createElement(F._1,{className:"whisper-thread__input",position:F._8.Absolute,fullWidth:!0,padding:{x:1,bottom:1},attachBottom:!0},r.createElement(S.b,{componentType:S.a.Input,suggestionSource:S.c.Whisper,iconRight:!0,onFocus:this.handleClick,onClick:this.handleClick,onKeyDown:this.handleKeydown,componentRefDelegate:this.setAutocompleteInnerComponentRef,refDelegate:this.setAutocompleteInputRef},r.createElement(S.d,{emotes:t})),r.createElement(E.a,{attachBottom:!0,attachRight:!0,inputRef:this.textInput,onClickEmote:this.onEmoticonClick,padding:{x:1,bottom:1},position:F._8.Absolute,shouldCloseOnClickOut:!0})),r.createElement(F.V,{fullWidth:!0},r.createElement("div",{className:"whispers-thread__content",onClick:this.handleContentClick},this.renderContent())),r.createElement(F._1,{position:F._8.Absolute,fullWidth:!0,flexShrink:0,display:F.M.Flex,alignItems:F.c.Center,attachTop:!0},r.createElement(ee,{isHighlighted:!!(this.props.data.whisperThread&&this.props.data.whisperThread.unreadMessagesCount>0),isFocused:!!this.props.focused,isMuted:!!this.props.data.whisperThread&&this.props.data.whisperThread.isMuted,isCollapsed:this.props.collapsed,isLoading:this.props.participants.loading||!this.props.participants.user||!this.props.participants.currentUser,participants:this.props.participants,spamInfo:this.props.data.whisperThread&&this.props.data.whisperThread.spamInfo,threadID:this.props.threadID,collapse:this.collapse,onHeaderClick:this.handleHeaderClick,onBlock:this.onBlock,onUnblock:this.onUnblock,onClose:this.handleClose}))))},t.prototype.renderContent=function(){var e;return this.hadError?(e=r.createElement(g.a,{message:Object(m.d)("Sorry, something went wrong loading this conversation.","WhisperThread")}),e=r.createElement(F._1,null),this.props.participants.currentUser&&this.props.participants.user&&(e=r.createElement(oe,{thread:this.getPlaceholderThreadFromLocalState(),unreadMessagesCount:0,participantsByID:this.getUsersByID([this.props.participants.currentUser,this.props.participants.user]),loadMore:this.loadMore}))):e=this.props.data.loading||this.props.participants.loading||!this.props.data.whisperThread?r.createElement(F._1,{display:F.M.Flex,justifyContent:F._0.Center,alignItems:F.c.Center,margin:2,fullHeight:!0,flexGrow:1},r.createElement(F._3,null)):r.createElement(oe,{thread:this.props.data.whisperThread,participantsByID:this.getUsersByID(this.props.data.whisperThread.participants),unreadMessagesCount:this.props.data.whisperThread.unreadMessagesCount,loadMore:this.loadMore}),e},t.prototype.getUsersByID=function(e){for(var t={},n=0,i=e;n<i.length;n++){var a=i[n];t[a.id]=a}return t},t}(r.Component),he=Object(p.compose)(Object(f.a)(ue,{options:function(e){return{variables:{targetUserID:Object(de.b)(e.threadID,e.currentUserID)||""},skip:!e.currentUserID||!e.threadID}},name:"participants"}),Object(f.a)(pe,{options:function(e){return{variables:{id:e.threadID}}},props:function(e){return a.__assign({},e,{loadMore:function(){return e.data.fetchMore({query:pe,variables:a.__assign({},e.data.variables,{cursor:e.data.whisperThread&&e.data.whisperThread.messages.edges[e.data.whisperThread.messages.edges.length-1].cursor}),updateQuery:function(e,t){var n=t.fetchMoreResult;if(!n.whisperThread)return{whisperThread:null};if(!e.whisperThread)return{whisperThread:n.whisperThread};var i=a.__assign({},n.whisperThread.messages,{edges:Object(y.b)(e.whisperThread.messages.edges,n.whisperThread.messages.edges)});return{whisperThread:a.__assign({},n.whisperThread,{messages:i})}}})}})}}),Object(b.a)([{topic:function(e){return Object(_.u)(e.currentUserID)},mapMessageTypesToProps:{whisper_received:"whisperReceived",whisper_sent:"whisperSent"}}]),Object(k.a)())(me),ge=Object(o.b)(function(e){return{isLoggedIn:Object(c.d)(e)}},function(e){return Object(l.b)({notifyWhisperThread:d.b},e)})(he);n("0Yyt");n.d(t,"b",function(){return fe}),n.d(t,"a",function(){return be});var fe,be=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resizeAnimationHandle=null,t.renderThread=function(e){return e?r.createElement(ge,{key:e.threadID,currentUserID:t.props.currentUserID,collapsed:e.collapsed,hidden:e.hidden,threadID:e.threadID,onBlock:t.onBlock,onCollapse:t.props.onCollapseThread,onClose:t.props.onCloseThread,onExpand:t.props.onExpandThread,onFocus:t.props.onFocusThread,onUnfocus:t.props.onUnfocusThread,focused:t.props.focusedThreadID===e.threadID,reportThreadData:t.props.reportThreadData}):null},t.onBlock=function(e){t.props.archiveThread(e),t.props.onBlockThread(e)},t.setOpenThreadsRef=function(e){return fe=e},t.handleContentResize=function(){t.resizeAnimationHandle||(t.resizeAnimationHandle=requestAnimationFrame(function(){t.props.onResizeContent(),t.resizeAnimationHandle=null}))},t}return a.__extends(t,e),t.prototype.render=function(){var e=this,t=this.props.openedThreads.map(function(t){return e.renderThread(t)});return r.createElement(F._1,{className:"whispers-open-threads",display:F.M.Flex,flexDirection:F.O.RowReverse,alignItems:F.c.End,position:F._8.Absolute,attachBottom:!0,attachLeft:!0,refDelegate:this.setOpenThreadsRef},t,r.createElement(s.a,{onResize:this.handleContentResize}))},t}(r.Component)},"1OO3":function(e,t,n){"use strict";var i=n("TToO"),a=n("7vx8"),r=60,s=60*r,o=24*s,l=7*o,c=4*l,d=n("MApH");n.d(t,"a",function(){return u}),t.b=function(e){var t=this;return Object(a.a)(d,{props:function(n){return{banUserMutation:function(a,d){return void 0===d&&(d=null),i.__awaiter(t,void 0,void 0,function(){var t,u;return i.__generator(this,function(i){switch(i.label){case 0:if(t=e(n.ownProps).channelID,!n.mutate)return[3,5];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,n.mutate({variables:{input:{channelID:t,bannedUserLogin:a,expiresIn:d&&function(e){if(!e)return"0s";var t=e,n="";if(t>c){var i=Math.floor(t/c);t-=i*c,n+=i+"mo"}if(t>l){var a=Math.floor(t/l);t-=a*l,n+=a+"w"}if(t>o){var d=Math.floor(t/o);t-=d*o,n+=d+"d"}if(t>s){var u=Math.floor(t/s);t-=u*s,n+=u+"h"}if(t>r){var p=Math.floor(t/r);t-=p*r,n+=p+"m"}return t>0&&(n+=t+"s"),n}(d)}}})];case 2:return u=i.sent(),[2,u.data];case 3:throw i.sent(),new Error("Unable to ban user");case 4:return[3,6];case 5:throw new Error("Ban user mutation is not ready");case 6:return[2]}})})}}}})};var u;!function(e){e.Forbidden="FORBIDDEN",e.TargetNotFound="TARGET_NOT_FOUND",e.TargetIsSelf="TARGET_IS_SELF",e.TargetIsAnonymous="TARGET_IS_ANONYMOUS",e.TargetIsMod="TARGET_IS_MOD",e.TargetIsBroadcaster="TARGET_IS_BROADCASTER",e.TargetIsStaff="TARGET_IS_STAFF",e.TargetIsAdmin="TARGET_IS_ADMIN",e.TargetIsGlobalMod="TARGET_IS_GLOBAL_MOD",e.TargetIsAlreadyBanned="TARGET_ALREADY_BANNED",e.DurationInvalid="DURATION_INVALID"}(u||(u={}))},"1bR2":function(e,t,n){e.exports=n.p+"assets/gift1-8573b4d1700bd278971c52e7d077d1c4.png"},"1pvm":function(e,t){},"1tZx":function(e,t){},"2B/Z":function(e,t){},"2FAx":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("TToO"),a=n("U7vG"),r=n("6sO2"),s=n("ZyA2"),o=n("j7/Y"),l=n("w9tK"),c=n("vH/s"),d=n("11M/"),u=n("CSlQ"),p=n("Odds"),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.render=function(){var e=this.props.match.params.channelLogin;return a.createElement(p._24,{background:p.m.Alt2,display:p.M.Flex,flexGrow:0,flexShrink:0,overflow:p._4.Hidden,fullHeight:!0},a.createElement(d.a,{channelLogin:e,clientID:r.n.config.legacyClientID,isEmbedded:!0}),a.createElement(s.a,null))},t=i.__decorate([Object(u.d)("PopoutChatPage",{autoReportInteractive:!0,destination:l.a.ChatPopout}),Object(o.a)({location:c.PageviewLocation.Chat})],t)}(a.Component);n.d(t,"EmbeddedChatPage",function(){return m})},"2Hj/":function(e,t,n){"use strict";function i(e,t){if(!e)return null;switch(e.type){case c.a.Playing:return e.game&&e.game.name?Object(l.d)("playing {game}",{game:e.game.name},"PresenceActivity"):Object(l.d)("playing","PresenceActivity");case c.a.Watching:if(!t&&e.user.hosting&&e.user.hosting.displayName)return Object(l.d)("watching {user} with the {community} community",{user:e.user.hosting.displayName,community:e.user.displayName},"PresenceActivity");if(!t&&e.user.stream&&e.user.stream.game&&e.user.stream.game.name)return Object(l.d)("watching {user} stream {game}",{user:e.user.displayName,game:e.user.stream.game.name},"PresenceActivity");var n=e.user.hosting&&e.user.hosting.displayName?e.user.hosting.displayName:e.user.displayName;return Object(l.d)("watching {user}",{user:n},"PresenceActivity");case c.a.Streaming:return e.stream&&e.stream.game&&e.stream.game.name?Object(l.d)("streaming {game}",{game:e.stream.game.name},"PresenceActivity"):Object(l.d)("streaming","PresenceActivity");default:return null}}function a(e,t){if(!t)return null;switch(t.type){case c.a.Streaming:return"/"+e;case c.a.Watching:return"/"+t.user.login;default:return null}}function r(e){var t=Object(l.d)("Online","PresenceAvailability");switch(e){case d.a.Idle:case d.a.Away:return Object(l.d)("Away","PresenceAvailability");case d.a.Busy:return Object(l.d)("Busy","PresenceAvailability");case d.a.Offline:return Object(l.d)("Offline","PresenceAvailability");case d.a.Invisible:return Object(l.d)("Invisible","PresenceAvailability");case d.a.Online:default:return t}}function s(e){return function(t){return function(e){return function(t){return function(n){function i(t){var i=n.call(this,t)||this;return i.options=e(t),i}return h.__extends(i,n),i.prototype.componentDidMount=function(){this.options.skip||this.subscribe(this.options)},i.prototype.componentWillReceiveProps=function(t){var n=e(t);n.topic===this.options.topic||n.skip||(this.unsubscribe(),this.subscribe(n)),this.options=n},i.prototype.componentWillUnmount=function(){this.unsubscribe()},i.prototype.render=function(){return o.createElement(t,h.__assign({},this.props))},i.prototype.subscribe=function(e){this.unsubscriber=Object(g.m)({fragment:e.fragment,id:e.id,topic:e.topic,type:e.type,mutator:e.mutator})},i.prototype.unsubscribe=function(){this.unsubscriber&&this.unsubscriber()},i}(o.Component)}}(function(t){var n=e(t);return{id:"User:"+n.id,skip:n.skip,fragment:v,topic:Object(g.j)(n.currentUserID),type:f.PubsubMessageType.Presence,mutator:function(e,t){if(!t)return null;var i=n.id;if(e.data.user_id!==+i)return t;var a="$User:"+i+".activity";return t.availability=e.data.availability.toUpperCase(),t.activity=Object(b.a)(e.data.activity,a),t}}})(t)}}var o=n("U7vG"),l=n("6sO2"),c=n("Ex+h"),d=n("l4QG"),u=function(e){return o.createElement("span",{"data-a-target":"presence-text"},i(e.activity,e.condensed)||r(e.availability))},p=n("Odds"),m=function(e){var t=p._10.Online;switch(e.availability){case d.a.Idle:case d.a.Away:t=p._10.Away;break;case d.a.Busy:t=p._10.Busy;break;case d.a.Invisible:t=p._10.Invisible;break;case d.a.Offline:t=p._10.Offline;break;case d.a.Online:t=p._10.Online;break;default:t=p._10.Online}return o.createElement(p._9,{status:t})},h=n("TToO"),g=n("HZww"),f=n("aMxy"),b=n("mqvl"),v=n("TVUY");n.d(t,"b",function(){return u}),n.d(t,"a",function(){return m}),n.d(t,!1,function(){return s}),n.d(t,"c",function(){return i}),n.d(t,"d",function(){return a}),n.d(t,!1,function(){return r})},"2I50":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ChatInput_SendCheer"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"SendCheerInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sendCheer"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bitsBalance"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:120}};n.loc.source={body:"mutation ChatInput_SendCheer($input: SendCheerInput!) {\nsendCheer(input: $input) {\nid\ncurrentUser {\nid\nbitsBalance\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"2IkU":function(e,t){},"2emZ":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i;!function(e){e.Emote="emote",e.Mention="mention",e.Hashtag="hashtag",e.None="none"}(i||(i={}))},"2rJy":function(e,t){},"37Pp":function(e,t,n){"use strict";var i=n("U7vG"),a=n("6sO2"),r=n("FDYX"),s=n("Odds"),o=(n("M5Tl"),"sub-discount-price-label__discounted"),l="sub-discount-price-label__non-discounted",c=function(e){var t=e.subscriptionProduct;if(void 0===t)return i.createElement("div",null);var n=Object(a.d)("{price} / Month",{price:t.price},"SubDiscountPriceLabel");if(e.isGift?Object(r.c)([e.subscriptionProduct]):Object(r.d)([e.subscriptionProduct])){var c=void 0;return c=e.isGift?Object(a.d)("{price} (Save {percent})",{price:Object(r.a)(e.subscriptionProduct,e.isGift),percent:Object(a.e)(Object(r.b)(e.subscriptionProduct,e.isGift)/100,"percent")},"SubDiscountPriceLabel"):Object(a.d)("{price} for the first month (Save {percent})",{price:Object(r.a)(e.subscriptionProduct,e.isGift),percent:Object(a.e)(Object(r.b)(e.subscriptionProduct,e.isGift)/100,"percent")},"SubDiscountPriceLabel"),i.createElement(s._1,{"data-test-selector":o},i.createElement(s._34,{color:s.I.Alt2,decoration:s._37.Strikethrough},n),i.createElement(s._34,{className:"sub-discount-price-label__discount-price",type:s._39.H5,bold:!0},c))}return i.createElement(s._1,{"data-test-selector":l},i.createElement(s._34,null,n))};n.d(t,!1,function(){return o}),n.d(t,!1,function(){return l}),n.d(t,"a",function(){return c})},"3KVC":function(e,t,n){"use strict";t.a=function(e){return void 0===e&&(e=""),i.test(e)},t.b=function(e){void 0===e&&(e="");var t=e.match(i);if(null===t)return"";if(t&&t.length>0&&void 0!==t.index)return t[1];return""};var i=new RegExp("(?:^|\\s)(?:https?://)?(?:(?:www|go).)?twitch.tv/videos/(\\d+)(?:$|\\s)?")},"3LYq":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Chat_AllowRejectedChatMessage"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AllowRejectedChatMessageInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"allowRejectedChatMessage"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:141}};n.loc.source={body:"mutation Chat_AllowRejectedChatMessage($input: AllowRejectedChatMessageInput!) {\nallowRejectedChatMessage(input: $input) {\nmessage {\nid\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"3QSP":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Core_Services_Spade_SubEvent_User"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"withVideo"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoID"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"channelID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"canPrimeSubscribe"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subscriptionBenefit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"purchasedWithPrime"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"video"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"videoID"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"withVideo"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcastType"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:266}};n.loc.source={body:"query Core_Services_Spade_SubEvent_User($channelID: ID! $withVideo: Boolean! $videoID: ID) {\nuser(id: $channelID) {\nid\nself {\ncanPrimeSubscribe\nsubscriptionBenefit {\nid\ntier\npurchasedWithPrime\n}\n}\n}\nvideo(id: $videoID) @include(if: $withVideo) {\nid\nbroadcastType\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"3T7g":function(e,t,n){"use strict";var i=n("RbGx"),a=n("mbxv"),r=n("+V/3"),s=(n("AwFw"),n("TToO")),o=function(){function e(e,t,n){this.globalsBySet=new Map,this.channelsBySet=new Map,this.indexBadges(e,this.globalsBySet,n),Array.isArray(t)&&this.indexBadges(t,this.channelsBySet,n)}return e.prototype.getBadge=function(e,t){var n=this.channelsBySet.get(e);return n&&n.has(t)?n.get(t)||null:void 0!==(n=this.globalsBySet.get(e))?n.get(t)||null:null},e.prototype.indexBadges=function(e,t,n){e.forEach(function(e){n&&e.clickAction===r.b&&(e=s.__assign({},e,{channelName:n}));var i=t.get(e.setID);i||(i=new Map,t.set(e.setID,i)),i.set(e.version,e)})},e}();new o([],[],"");n.d(t,"b",function(){return i.a}),n.d(t,"a",function(){return a.a}),n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,"c",function(){return o})},"3iBR":function(e,t,n){"use strict";n.d(t,"m",function(){return r}),n.d(t,"c",function(){return s}),n.d(t,"b",function(){return o}),n.d(t,"a",function(){return l}),n.d(t,"i",function(){return c}),n.d(t,"k",function(){return d}),n.d(t,"j",function(){return u}),n.d(t,"l",function(){return p}),n.d(t,"g",function(){return m}),n.d(t,"h",function(){return h}),n.d(t,"d",function(){return g}),n.d(t,"e",function(){return f}),n.d(t,"f",function(){return b});var i,a=n("I89S"),r={ERROR_DISPLAY_TIMEOUT:5e3,GET_BALANCE_RATE_LIMIT:5e3,UNDO_PROMPT_DURATION:5e3},s="https://d3aqoihi2n8ty8.cloudfront.net",o=s+"/cheer",l=s+"/actions",c=8e5,d=1e4,u=500,p=1e3,m="cheer",h=a.a.Purple,g="FIRST_PARTY",f="THIRD_PARTY",b=(i={},i[a.a.Gray]="#979797",i[a.a.Purple]="#9c3ee8",i[a.a.Green]="#1db2a5",i[a.a.Blue]="#0099fe",i[a.a.Red]="#f43021",i[a.a.Yellow]="#f3a71a",i)},"4Dne":function(e,t,n){"use strict";n.d(t,"a",function(){return i}),t.b=function(e){return a.__awaiter(this,void 0,void 0,function(){var t,n,i,u,p,m,h,g;return a.__generator(this,function(a){switch(a.label){case 0:return(t=e.friendActivity)?(n=Object(l.d)(e.friendLogin,t))?(i="/"===n[0]?n.slice(1):n,t.type!==s.a.Streaming?[3,1]:(u={target_action:d.Streaming,target_channel:e.friendLogin,target_game:t.stream.game&&t.stream.game.name||void 0,target_login:e.friendLogin,target_url:i,ui_context:e.context},[3,7])):(r.i.warn("[trackPresenceClick] Attempted to track a click on an unjoinable activity."),[2]):(r.i.warn("[trackPresenceClick] Attempted to track a click with no activity."),[2]);case 1:if(t.type!==s.a.Watching)return[3,6];p=void 0,m=null,a.label=2;case 2:return a.trys.push([2,4,,5]),[4,r.n.apollo.client.query({query:c,variables:{login:t.user.login}})];case 3:return m=a.sent(),[3,5];case 4:return h=a.sent(),r.i.error(h,"[trackPresenceClick] Failed to query watched user data.",{watchedUser:t.user.login}),[3,5];case 5:return(g=m&&m.data&&m.data.user)?p=g.hosting&&g.hosting.stream?g.hosting.stream.game&&g.hosting.stream.game.name||void 0:g.stream&&g.stream.game&&g.stream.game.name||void 0:r.i.error(new Error("GraphQL empty response"),"[trackPresenceClick] Query for watched user info returned no data.",{watchedUser:t.user.login}),u={target_action:d.Watching,target_channel:t.user.login,target_game:p,target_hosted_channel:t.user.hosting&&t.user.hosting.login||void 0,target_login:e.friendLogin,target_url:i,ui_context:e.context},[3,7];case 6:return r.i.warn("[trackPresenceClick] Attempted to track a click on an unjoinable activity."),[2];case 7:return r.m.track(o.SpadeEventType.PresenceClick,u),[2]}})})};var i,a=n("TToO"),r=n("6sO2"),s=n("Ex+h"),o=n("vH/s"),l=n("2Hj/"),c=n("K1Jg");n.n(c);!function(e){e.FriendsListButton="friends",e.WhisperHeaderButton="convo_join",e.WhisperHeaderLink="convo_link"}(i||(i={}));var d;!function(e){e.Streaming="streaming",e.Watching="watching"}(d||(d={}))},"4JjK":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i;!function(e){e[e.Ready=0]="Ready",e[e.Dimensions=1]="Dimensions",e[e.RequestAd=2]="RequestAd",e[e.OnStart=3]="OnStart",e[e.OnCredit=4]="OnCredit",e[e.OnFinish=5]="OnFinish",e[e.OnClose=6]="OnClose",e[e.OnError=7]="OnError",e[e.Adblock=8]="Adblock",e[e.LimitReached=9]="LimitReached"}(i||(i={}))},"54rb":function(e,t){},"56e8":function(e,t){},"576g":function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"cheer"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cheer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"prefix"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tiers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bits"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"images"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"theme"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isAnimated"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dpiScale"},arguments:[],directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:133}};n.loc.source={body:"fragment cheer on User {\ncheer {\nid\nemotes {\nid\nprefix\ntype\ntiers {\nid\nbits\ncolor\nimages {\nid\nurl\ntheme\nisAnimated\ndpiScale\n}\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"5Nu7":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("HW6M"),a=(n.n(i),n("U7vG")),r=(n.n(a),n("ysVA")),s=(n.n(r),"chat-author__intl-login"),o=function(e){var t=[a.createElement("span",{key:"username-display",className:"chat-author__display-name","data-a-target":"chat-message-username","data-a-user":e.userData.userLogin,"data-test-selector":"message-username",style:{color:e.userData.color}},e.userData.userDisplayName)];if(e.userData.isIntl){var n=i((r={},r[s]=!e.highlighted,r["chat-author__intl-login--highlighted"]=e.highlighted,r));t.push(a.createElement("span",{key:"username-login",style:{color:e.userData.color},className:n,"data-test-selector":"message-username-canonical"}," ("+e.userData.userLogin+")"))}return a.createElement("span",{key:e.userData.userID+"-authorlabel"},t);var r}},"5k1t":function(e,t,n){"use strict";n.d(t,"a",function(){return i}),t.b=function(e,t,n){return{type:i,threadID:e,afterMessageID:n,content:t}};var i="whisperNotifications.WHISPER_THREAD_NOTIFIED"},"5s0/":function(e,t,n){"use strict";var i=n("RH2O"),a=n("2KeS"),r=n("+xm8"),s=n("f2i/"),o=n("uXDg"),l=n("QPF3"),c=n("TToO"),d=n("U7vG"),u=n("6sO2"),p=n("CSlQ"),m=n("Odds"),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(){t.props.threadID?(t.props.onClick&&t.props.onClick(),t.props.openThread(t.props.threadID)):t.props.login()},t}return c.__extends(t,e),t.prototype.render=function(){var e=Object(u.d)("Whisper","WhisperButton");return d.createElement(m.u,{onClick:this.handleClick,"data-a-target":"usercard-whisper-button"},e)},t=c.__decorate([Object(p.d)("WhisperButton",{autoReportInteractive:!0})],t)}(d.Component),g=Object(i.b)(null,function(e){return Object(a.b)({login:function(){return Object(s.f)(r.a.WhisperButton)},openThread:function(e){return Object(o.l)({collapsed:!1,threadID:e,ignoreCollapseIfOpen:!0},Object(l.a)())}},e)})(h);n.d(t,"a",function(){return g})},"5vPJ":function(e,t,n){"use strict";var i=n("TToO"),a=n("U7vG"),r=n("6sO2"),s=n("7vx8"),o=n("GxDs"),l=n("pexS"),c={isTimedOut:!1},d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=c,t.timeoutID=null,t}return i.__extends(t,e),t.prototype.componentDidMount=function(){var e=this;this.props.data.clip||(this.timeoutID=setTimeout(function(){e.setState({isTimedOut:!0})},5e3))},t.prototype.componentWillReceiveProps=function(e){!this.props.data.clip&&e.data.clip&&(this.timeoutID&&(clearTimeout(this.timeoutID),this.timeoutID=null),this.setState({isTimedOut:!1}))},t.prototype.render=function(){var e=this.props.data,t=e.clip,n=e.error,i=e.loading;return n||this.state.isTimedOut?a.createElement(o.a,{error:{title:Object(r.d)("Something went wrong","ClipsChatCard"),description:Object(r.d)("We couldn't find that Clip","ClipsChatCard")}}):i||!t?a.createElement(o.a,null):a.createElement(o.a,{data:{title:t.title||(t.broadcaster?Object(r.d)("Clip of {broadcaster}",{broadcaster:t.broadcaster.displayName},"ClipsChatCard"):""),description:t.curator?Object(r.d)("Clipped by {curator}",{curator:t.curator.displayName},"ClipsChatCard"):"",previewImageURL:t.thumbnailURL,contentURL:t.url}})},t}(a.Component),u=function(e){return{variables:{slug:e.slug},notifyOnNetworkStatusChange:!0,fetchPolicy:e.forceNetworkRequest?"cache-first":"cache-only"}},p=Object(s.a)(l,{options:u})(d);n.d(t,!1,function(){return 5e3}),n.d(t,!1,function(){return"https://static-cdn.jtvnw.net/emoticons/v1/58765/2.0"}),n.d(t,!1,function(){return c}),n.d(t,!1,function(){return d}),n.d(t,!1,function(){return u}),n.d(t,"a",function(){return p})},"67ft":function(e,t){},"6Agf":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i;!function(e){e.Admin="admin",e.GlobalMod="global_mod",e.Moderator="mod",e.Owner="owner",e.Staff="staff",e.Subscriber="subscriber",e.User=""}(i||(i={}))},"6O9f":function(e,t){},"6Rwu":function(e,t){},"6WAQ":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i;!function(e){e.Archive="ARCHIVE",e.Highlight="HIGHLIGHT",e.Upload="UPLOAD",e.WatchParty="WATCH_PARTY",e.PastPremiere="PAST_PREMIERE",e.PremiereUpload="PREMIERE_UPLOAD"}(i||(i={}))},"6lb1":function(e,t){},"6vcJ":function(e,t){},"7B9K":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"UserEmotes"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emoteSets"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:76}};n.loc.source={body:"query UserEmotes {\ncurrentUser {\nid\nemoteSets {\nid\nemotes {\nid\ntoken\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"7LIQ":function(e,t,n){"use strict";var i=n("TToO"),a=n("HW6M"),r=n("U7vG"),s=n("6sO2"),o=n("Odds"),l=(n("VkpB"),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.render=function(){var e=this,t=a("emote-picker__emote-link",{"emote-picker__emote-link--locked":this.props.locked}),n=r.createElement(o._24,{alignItems:o.c.Center,background:o.m.Overlay,borderRadius:o.s.Small,className:"emote-picker__emote-lock",color:o.I.Overlay,display:o.M.InlineFlex,justifyContent:o._0.Center,position:o._8.Absolute,zIndex:o._51.Above},r.createElement(o._14,{asset:o._15.Lock,height:10,width:10})),i=this.props.emoteSet.emotes.map(function(i){return r.createElement("div",{key:i.id,className:"emote-picker__emote"},r.createElement(o._42,{label:i.displayName||Object(s.d)("Emote","EmoteGrid"),direction:o._44.Bottom},r.createElement(o.V,{display:o.M.Flex,alignItems:o.c.Center,justifyContent:o._0.Center},r.createElement("button",{className:t,name:i.displayName,onClick:e.props.locked?void 0:e.handleClickEmote.bind(e,i.id),"data-a-target":i.displayName},r.createElement("figure",{className:"emote-picker__emote-figure"},e.props.locked?n:null,r.createElement("img",{srcSet:i.srcSet,alt:i.displayName}))))))});return r.createElement(o._1,{display:o.M.Flex,flexWrap:o.P.Wrap,justifyContent:o._0.Center},i)},t.prototype.handleClickEmote=function(e,t){this.props.onClickEmote&&this.props.onClickEmote(t.currentTarget.name,e)},t}(r.Component));n.d(t,"a",function(){return l})},"7LVu":function(e,t){},"7X7f":function(e,t){},"7dPO":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"FriendButton_UnfriendUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UnfriendUserInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unfriendUser"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:110}};n.loc.source={body:"mutation FriendButton_UnfriendUser($input: UnfriendUserInput!) {\nunfriendUser(input: $input) {\nuser {\nid\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"7iNp":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"FriendButton"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"friends"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:75}};n.loc.source={body:"query FriendButton {\ncurrentUser {\nid\nfriends {\nedges {\nnode {\nid\n}\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"7miU":function(e,t,n){"use strict";var i=n("P0T5");n.d(t,"a",function(){return i.b}),n.d(t,"b",function(){return i.c}),n.d(t,"c",function(){return i.d}),n.d(t,"d",function(){return i.e}),n.d(t,"e",function(){return i.f}),n.d(t,"f",function(){return i.g}),n.d(t,"g",function(){return i.h}),n.d(t,"h",function(){return i.i}),n.d(t,"i",function(){return i.j}),n.d(t,"j",function(){return i.k}),n.d(t,"k",function(){return i.m}),n.d(t,"l",function(){return i.p}),n.d(t,"m",function(){return i.q})},"82Ta":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Thread_ReportUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ReportWhisperThreadInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reportWhisperThread"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"thread"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:118}};n.loc.source={body:"mutation Thread_ReportUser($input: ReportWhisperThreadInput!) {\nreportWhisperThread(input: $input) {\nthread {\nid\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"8RKZ":function(e,t,n){"use strict";var i=n("TToO"),a=n("HW6M"),r=n("U7vG"),s=n("qe65"),o=n("Odds"),l=(n("2rJy"),function(e){function t(t){var n=e.call(this,t)||this;return n.onImageLoad=function(){n.setState({imageLoaded:!0})},n.onMouseOver=function(){n.setState({isHovering:!0})},n.onMouseOut=function(){n.setState({isHovering:!1})},n.renderImage=function(){var e=null,t=a("chat-image",{"chat-image__animated":!!n.props.cheerText&&n.state.imageLoaded},n.props.className);if(n.props.srcSet.themed)e=r.createElement(o.V,{display:n.state.imageLoaded?o.M.InlineBlock:o.M.Hide},r.createElement(s.a,{alt:n.props.alt,className:t,defaultRes:n.props.srcKey,onLoad:n.onImageLoad,onMouseOver:n.onMouseOver,onMouseOut:n.onMouseOut,sources:n.props.srcSet}));else{for(var i=[],l=0,c=Object.keys(n.props.srcSet.sources);l<c.length;l++){var d=c[l];i.push(n.props.srcSet.sources[d]+" "+d)}e=r.createElement(o.V,{display:n.state.imageLoaded?o.M.InlineBlock:o.M.Hide},r.createElement("img",{className:t,onLoad:n.onImageLoad,onMouseOver:n.onMouseOver,onMouseOut:n.onMouseOut,src:n.props.srcSet.sources[n.props.srcKey],srcSet:i.join(","),alt:n.props.alt}))}return e},n.renderPlaceholder=function(){return n.state.imageLoaded?null:r.createElement(o.V,{display:o.M.InlineBlock},r.createElement(o._34,{type:o._39.Span,className:"chat-image__placeholder",align:o._49.Top},r.createElement(o._7,{height:28,width:28})))},n.state={imageLoaded:!1,isHovering:!1},n}return i.__extends(t,e),t.prototype.render=function(){var e;return e=this.state.isHovering&&this.state.imageLoaded?r.createElement(o._42,{direction:this.props.tooltipDirection||o._44.Top,label:this.props.alt,display:o.M.Inline,offsetY:"0.9rem","data-a-target":"emote-name"},this.renderPlaceholder(),this.renderImage(),this.props.cheerText):r.createElement("span",{"data-a-target":"emote-name"},this.renderPlaceholder(),this.renderImage(),this.props.cheerText),this.props.cheerText?r.createElement(o._34,{type:o._39.Span,noWrap:!0},e):e},t}(r.Component));n.d(t,"a",function(){return l})},"90yy":function(e,t){},"91zu":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"IncomingRaidLine_Channel"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"channel"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"50"}}],directives:[]}]}}]}}],loc:{start:0,end:140}};n.loc.source={body:"query IncomingRaidLine_Channel($channelLogin: String!) {\nchannel: user(login: $channelLogin) {\nid\ndisplayName\nprofileImageURL(width: 50)\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"9RMu":function(e,t,n){"use strict";function i(e){return{id:""+e.id,start:e.start,end:e.end}}function a(e){return{from:e.start,to:e.end,emoteID:e.id,id:e.id+";"+e.start+";"+e.end,setID:"0",__typename:"EmbeddedEmote"}}t.c=function(e){return{__typename:"WhisperMessageEdge",cursor:""+e.data_object.id,node:{__typename:"WhisperMessage",id:e.data_object.message_id,sentAt:new Date(1e3*e.data_object.sent_ts).toISOString(),editedAt:null,deletedAt:null,content:{__typename:"MessageBody",content:e.data_object.body,emotes:e.data_object.tags.emotes.map(function(e){return a(i(e))})},from:{__typename:"User",id:""+e.data_object.from_id}}}},t.b=function(e){return e.map(function(e){return a(i(e))})},t.a=a},"9fnI":function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChatList_Bits"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"cheer"},directives:[]}]}}]}}],loc:{start:0,end:149}};i.loc.source={body:'#import "twilight/features/chat/models/cheer-fragment.gql"\nquery ChatList_Bits($channelLogin: String!) {\nuser(login: $channelLogin) {\nid\n...cheer\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(function(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})}(n("576g").definitions)),e.exports=i},"9u8h":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("TToO"),a=n("6sO2"),r=n("Aj/L"),s="application/json; charset=UTF-8",o=function(){function e(){}return e.get=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(a){switch(a.label){case 0:return[4,this.request(e,i.__assign({},t,{method:"GET"}),n)];case 1:return[2,a.sent()]}})})},e.put=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(a){switch(a.label){case 0:return[4,this.request(e,i.__assign({},t,{method:"PUT"}),n)];case 1:return[2,a.sent()]}})})},e.post=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(a){switch(a.label){case 0:return[4,this.request(e,i.__assign({},t,{method:"POST"}),n)];case 1:return[2,a.sent()]}})})},e.delete=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(a){switch(a.label){case 0:return[4,this.request(e,i.__assign({},t,{method:"DELETE"}),n)];case 1:return[2,a.sent()]}})})},e.request=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),i.__awaiter(this,void 0,void 0,function(){var a,r;return i.__generator(this,function(i){switch(i.label){case 0:return t=this.constructOptions(t,n),a=t.headers?t.headers["Content-Type"]:void 0,t.body=this.serialize(t.body,a),[4,this._fetch(e,t)];case 1:return r=i.sent(),[4,this.constructLegacyAPIResponse(r)];case 2:return[2,i.sent()]}})})},e.getAPIURL=function(e){return new URL(e,a.n.config.apiBaseURL)},e.constructLegacyAPIResponse=function(e){return i.__awaiter(this,void 0,void 0,function(){var t,n,a;return i.__generator(this,function(i){switch(i.label){case 0:t={status:e.status},i.label=1;case 1:return i.trys.push([1,3,,4]),[4,e.json()];case 2:return n=i.sent(),e.ok?t.body=n:t.error=n,[3,4];case 3:return a=i.sent(),t.requestError=a,[3,4];case 4:return[2,t]}})})},e._fetch=function(e,t){return void 0===t&&(t={}),i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(n){switch(n.label){case 0:return[4,fetch(this.getAPIURL(e).toString(),t)];case 1:return[2,n.sent()]}})})},e.constructOptions=function(e,t){return e=Object.assign({},e,{headers:i.__assign({},this.getDefaultHeaders(e,t),e.headers)})},e.serialize=function(e,t){return t===s?JSON.stringify(e):e},e.getDefaultHeaders=function(e,t){var n=a.n.store.getState(),i={Accept:"application/vnd.twitchtv.v"+(t.version||5)+"+json; charset=UTF-8","Accept-Language":"en-us","Client-ID":a.n.config.legacyClientID,"X-Requested-With":"XMLHttpRequest"};e.body&&FormData.prototype.isPrototypeOf(e.body)||(i["Content-Type"]=s);var o=Object(r.c)(n);return o&&(i.Authorization="OAuth "+o.authToken,o.legacyCSRFToken&&(i["Twitch-Api-Token"]=o.legacyCSRFToken)),t.excludeHeaders&&t.excludeHeaders.forEach(function(e){i[e]&&delete i[e]}),i},e}()},"9uSE":function(e,t){},"9uTb":function(e,t){},A0Hf:function(e,t){},A5Hr:function(e,t,n){"use strict";n.d(t,"a",function(){return k});var i=n("TToO"),a=n("U7vG"),r=(n.n(a),n("RH2O")),s=n("2KeS"),o=n("6sO2"),l=n("7vx8"),c=n("oIkB"),d=n("vH/s"),u=n("CSlQ"),p=n("LjAQ"),m=n("mw/a"),h=n("xwpJ"),g=n("LjAQ"),f=n("mmQh"),b=(n.n(f),n("mRH2")),v=(n.n(b),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={submitStatus:g.b.Unsubmitted},t.handleSubmit=function(e,n,a,r){return i.__awaiter(t,void 0,void 0,function(){var t,s,l;return i.__generator(this,function(i){switch(i.label){case 0:if(e!==p.a)return[3,5];s={userID:this.props.reportContext.targetUserID,communityID:a||"",reason:n},i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.props.reportUserInCommunity(Object(c.a)(s))];case 2:return i.sent(),o.n.tracking.track(d.SpadeEventType.CommunityModeration,{community_id:a,name:r,is_official:!1,user_id:this.props.sessionUser&&this.props.sessionUser.id,target_id:this.props.reportContext.targetUserID,action:"report",reason:e}),this.setState({submitStatus:g.b.Success}),[3,4];case 3:return t=i.sent(),o.i.error(t,"ReportUserInCommunity Mutation failed."),this.setState({submitStatus:g.b.MutationError}),[3,4];case 4:return[3,9];case 5:s={description:n,reason:e,content:this.props.reportContext.contentType,contentID:this.props.reportContext.contentID,extra:this.props.reportContext.extra,targetID:this.props.reportContext.targetUserID},this.props.reportContext.contentType===m.a.Community&&this.props.reportContext.extra&&(s.description=Object(h.a)(this.props.reportContext.extra,n)),i.label=6;case 6:return i.trys.push([6,8,,9]),[4,this.props.reportUser(Object(c.a)(s))];case 7:return i.sent(),this.props.reportContext.contentType===m.a.Community&&o.n.tracking.track(d.SpadeEventType.CommunityReport,{community_id:this.props.reportContext.contentID,name:this.props.reportContext.extra,is_official:!1,user_id:this.props.sessionUser&&this.props.sessionUser.id,reason:e}),this.setState({submitStatus:g.b.Success}),[3,9];case 8:return l=i.sent(),o.i.error(l,"ReportUser Mutation failed."),this.setState({submitStatus:g.b.MutationError}),[3,9];case 9:return[2]}})})},t.handleChildError=function(e){return t.setState({submitStatus:e})},t.handleClose=function(){t.props.onClose&&t.props.onClose(t.state.submitStatus)},t}return i.__extends(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.componentWillUnmount=function(){this.handleClose()},t.prototype.render=function(){return a.createElement(g.c,{onClose:this.handleClose,onError:this.handleChildError,onSubmit:this.handleSubmit,reportContentType:this.props.reportContext.contentType,submitStatus:this.state.submitStatus,targetUserID:this.props.reportContext.targetUserID,title:this.props.title,defaultDescription:this.props.defaultDescription})},t}(a.Component)),k=Object(s.d)(Object(l.a)(f,{name:"reportUserInCommunity"}),Object(l.a)(b,{name:"reportUser"}),Object(u.d)("ReportUser"),Object(r.b)(function(e){return{sessionUser:e.session.user}},null))(v)},ACWz:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChatInput"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"isEmbedded"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bitsBalance"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isPartner"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"isEmbedded"}}}]}]}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cheer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hashtags"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"settings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"emoteMinimumBits"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cheerMinimumBits"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"event"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:274}};n.loc.source={body:"query ChatInput($channelLogin: String! $isEmbedded: Boolean!) {\ncurrentUser {\nid\nbitsBalance\nisPartner @include(if: $isEmbedded)\n}\nuser(login: $channelLogin) {\nid\ncheer {\nid\nhashtags {\nedges {\ncursor\nnode {\nid\n}\n}\n}\nsettings {\nemoteMinimumBits\ncheerMinimumBits\nevent\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},AQmT:function(e,t){},AaXK:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChatSettings_Badges"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"selectedBadge"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"availableBadges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"selectedBadge"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"availableBadges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}}]}}]}}]}}],loc:{start:0,end:288}};i.loc.source={body:'#import "twilight/features/badges/models/badge-fragment.gql"\nquery ChatSettings_Badges($channelLogin: String!) {\ncurrentUser {\nid\nselectedBadge {\n...badge\n}\navailableBadges {\n...badge\n}\n}\nuser(login: $channelLogin) {\nid\nself {\nselectedBadge {\n...badge\n}\navailableBadges {\n...badge\n}\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(function(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})}(n("QU+n").definitions)),e.exports=i},As4U:function(e,t){},AwFw:function(e,t){},B88H:function(e,t){},BBNG:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ViewerCard"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"targetUser"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"targetLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bannerImageURL"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"70"}}],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"channelUser"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"channelID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subscriptionProducts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"price"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emoteSetID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"giftPromotion"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"newPrice"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"oldPrice"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"discountType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"discountValue"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isModerator"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isSiteAdmin"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isStaff"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isGlobalMod"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:437}};n.loc.source={body:"query ViewerCard($targetLogin: String! $channelID: ID!) {\ntargetUser: user(login: $targetLogin) {\nid\nlogin\nbannerImageURL\ndisplayName\nprofileImageURL(width: 70)\n}\nchannelUser: user(id: $channelID) {\nid\nlogin\ndisplayName\nsubscriptionProducts {\nid\nprice\nurl\nemoteSetID\nemotes {\nid\n}\ngiftPromotion {\nnewPrice\noldPrice\ndiscountType\ndiscountValue\n}\n}\nself {\nisModerator\n}\n}\ncurrentUser {\nlogin\nid\nroles {\nisSiteAdmin\nisStaff\nisGlobalMod\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},BMQ2:function(e,t,n){"use strict";function i(e,t){var n={raid_creator_id:Number(t.creatorID),raid_source_id:Number(t.sourceChannelID),raid_target_id:Number(t.targetChannelID),raid_id:t.id};c.m.track(e,n)}var a=n("TToO"),r=n("U7vG"),s=n("RH2O"),o=n("CIox"),l=n("2KeS"),c=n("6sO2"),d=n("7vx8"),u=n("HZww"),p=n("+xm8"),m=n("f2i/"),h=n("Aj/L"),g=function(){return function(){}}(),f=function(e){function t(t){var n=e.call(this)||this;return n.expiredRaids=new Set,n.joinedRaids=new Set,t&&(n.expiredRaids=t.expiredRaids,n.joinedRaids=t.joinedRaids),n}return a.__extends(t,e),t.prototype.isExpired=function(e){return this.expiredRaids.has(e.id)},t.prototype.hasJoined=function(e){return this.joinedRaids.has(e.id)||this.getStorageData()[e.id]},t.prototype.expireRaid=function(e){var n=new Set(this.expiredRaids);return n.add(e.id),new t({expiredRaids:n,joinedRaids:this.joinedRaids})},t.prototype.joinRaid=function(e){var n=new Set(this.joinedRaids);n.add(e.id);var i=this.getStorageData();return i[e.id]=!0,this.setStorageData(i),new t({expiredRaids:this.expiredRaids,joinedRaids:n})},t.prototype.leaveRaid=function(e){var n=new Set(this.joinedRaids);n.delete(e.id);var i=this.getStorageData();return delete i[e.id],this.setStorageData(i),new t({expiredRaids:this.expiredRaids,joinedRaids:n})},t.prototype.setStorageData=function(e){c.k.set("raid",e)},t.prototype.getStorageData=function(){return c.k.get("raid",{})},t}(g),b=function(e){function t(t){var n=e.call(this)||this;return n.expiredRaids=new Set,n.leftRaids=new Set,t&&(n.expiredRaids=t.expiredRaids,n.leftRaids=t.leftRaids),n}return a.__extends(t,e),t.prototype.isExpired=function(e){return this.expiredRaids.has(e.id)},t.prototype.hasJoined=function(e){return!this.leftRaids.has(e.id)&&!this.getStorageData()[e.id]},t.prototype.expireRaid=function(e){var n=new Set(this.expiredRaids);return n.add(e.id),new t({expiredRaids:n,leftRaids:this.leftRaids})},t.prototype.joinRaid=function(e){var n=new Set(this.leftRaids);n.delete(e.id);var i=this.getStorageData();return delete i[e.id],this.setStorageData(i),new t({expiredRaids:this.expiredRaids,leftRaids:n})},t.prototype.leaveRaid=function(e){var n=new Set(this.leftRaids);n.add(e.id);var i=this.getStorageData();return i[e.id]=!0,this.setStorageData(i),new t({expiredRaids:this.expiredRaids,leftRaids:n})},t.prototype.setStorageData=function(e){c.k.set("raids-left",e)},t.prototype.getStorageData=function(){return c.k.get("raids-left",{})},t}(g),v=3,k=5,y="raid_update",_=function(){function e(e,t){this.message=e,this.id=e.raid.id,this.creatorID=e.raid.creator_id,this.sourceChannelID=e.raid.source_id,this.targetChannelID=e.raid.target_id,this.viewerCount=e.raid.viewer_count,t?(this.varianceSeconds=t.varianceSeconds,this.totalDurationInSeconds=t.totalDurationInSeconds,this.clientCreatedAtTimestamp=t.clientCreatedAtTimestamp):(this.varianceSeconds=Math.round(Math.random()*v*2-v),this.totalDurationInSeconds=this.getTotalDurationInSeconds(e.raid.remaining_duration_seconds),this.clientCreatedAtTimestamp=(new Date).getTime()),this.isAnnouncing=e.type===y&&this.totalDurationInSeconds>0,this.hasTimeToJoin=this.totalDurationInSeconds>k}return e.prototype.withMessage=function(t){return this.id!==t.raid.id?new e(t):new e(t,this)},e.prototype.getRemainingJoinTime=function(e){void 0===e&&(e=new Date);var t=e.getTime()-this.clientCreatedAtTimestamp;return 1e3*this.totalDurationInSeconds-t},e.prototype.getTotalDurationInSeconds=function(e){var t=e+this.varianceSeconds;return Math.max(t,0)},e}(),C="https://api.twitch.tv/kraken",S=n("O0Qc"),E=n("Odds"),N=(n("z7Cp"),{"data-test-selector":"countdown-fill-width"}),w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.props.startPolling||setInterval;this.intervalID=t(function(){return e.forceUpdate()},1e3)},t.prototype.componentWillUnmount=function(){clearInterval(this.intervalID)},t.prototype.componentDidUpdate=function(){this.props.getRemainingTime()<=0&&this.props.onCountdownEnd()},t.prototype.render=function(){var e=this.countdownPercentage+"%";return r.createElement("div",{className:"raid-countdown-bar"},r.createElement("div",a.__assign({className:"raid-countdown-bar__fill",style:{width:e}},N)))},Object.defineProperty(t.prototype,"countdownPercentage",{get:function(){return this.props.getRemainingTime()/this.props.totalCountdownTime*100},enumerable:!0,configurable:!0}),t}(r.PureComponent),T=(n("mR/9"),n("vH/s")),D={medium:"twitch_channel",content:"raid_channel"},I=n("UMQJ"),O=Object(d.a)(I,{options:function(e){return{variables:{sourceChannelID:e.raid.sourceChannelID,targetChannelID:e.raid.targetChannelID}}}})(function(e){if(e.data.loading||e.data.error)return r.createElement("div",null);var t=e.component,n=a.__rest(e,["component"]);return r.createElement(t,a.__assign({},n))}),M={"data-test-selector":"current-raiders"},x=function(e){return function(t){return r.createElement(O,a.__assign({},t,{component:e}))}}(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getRemainingTime=function(){return t.props.raid.getRemainingJoinTime()},t.handleCountdownEnd=function(){t.props.onRaidInvitePeriodOver(t.props.data.targetChannel.login)},t}return a.__extends(t,e),t.prototype.componentDidMount=function(){!function(e){i(T.SpadeEventType.RaidPromptImpression,e)}(this.props.raid)},t.prototype.render=function(){var e=this.props.data,t=e.sourceChannel,n=e.targetChannel;return r.createElement(E._24,{className:"raid-notification",background:E.m.AccentAlt2,color:E.I.Overlay,position:E._8.Absolute,zIndex:E._51.Above,fullWidth:!0},r.createElement(E._1,{className:"raid-notification__content",padding:{y:1,x:2},display:E.M.Flex,justifyContent:E._0.Between},r.createElement(E._1,{alignItems:E.c.Center,display:E.M.Flex},r.createElement(E.l,{size:36,src:t.profileImageURL,alt:t.displayName}),r.createElement(E._14,{asset:E._15.AngleRight,height:10}),r.createElement(E.l,{size:36,src:n.profileImageURL,alt:n.displayName}),r.createElement(E._1,{padding:{left:1}},r.createElement(E._34,{color:E.I.OverlayAlt,type:E._39.P,className:"raid-notification__channel-name"},Object(c.d)("{sourceDisplayName} is",{sourceDisplayName:t.displayName},"RaidCTASourceChannel")),r.createElement(E._34,null,Object(c.d)("raiding {targetDisplayName}",{targetDisplayName:n.displayName},"RaidCTATargetChannel")),r.createElement(E._34,a.__assign({bold:!0},M),Object(c.d)("{viewerCount, plural, one {# raider} other {# raiders}}",{viewerCount:this.props.raid.viewerCount},"RaidCTATotalRaiders")))),this.props.children),r.createElement(w,{totalCountdownTime:1e3*this.props.raid.totalDurationInSeconds,getRemainingTime:this.getRemainingTime,onCountdownEnd:this.handleCountdownEnd}))},t}(r.Component)),R={"data-test-selector":"raid-cancel-button"},L=function(e){return r.createElement(E._1,{alignSelf:E.d.Center},r.createElement(E.u,a.__assign({size:E.x.Large,type:E.z.Hollow,overlay:!0,onClick:e.onCancelRaid},R),Object(c.d)("Cancel","RaidCTACancel")))},U=n("bQ8d"),F={"data-test-selector":"join-raid-button"},j={"data-test-selector":"leave-raid-button"},B=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timerID=0,t.handleLeaveRaid=function(){clearTimeout(t.timerID),t.props.onLeaveRaid()},t}return a.__extends(t,e),t.prototype.componentDidMount=function(){this.props.hasJoined&&(this.timerID=setTimeout(this.props.onJoinRaid,Object(U.a)(5e3)))},t.prototype.componentWillUnmount=function(){clearTimeout(this.timerID)},t.prototype.render=function(){return this.props.hasJoined?r.createElement(E._1,{alignSelf:E.d.Center},r.createElement(E.u,a.__assign({size:E.x.Large,type:E.z.Hollow,overlay:!0,onClick:this.handleLeaveRaid},j),Object(c.d)("Leave","RaidCTALeave"))):r.createElement(E._1,{alignSelf:E.d.Center},r.createElement(E.u,a.__assign({size:E.x.Large,onClick:this.props.onJoinRaid},F),Object(c.d)("Join","RaidCTAJoin")))},t}(r.Component),A=n("jML9"),P=n("OAwv"),V=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={raidStorage:new f},t.unsubscribe=function(){},t.handlePubsubMessage=function(e){t.setState(function(t){return t.raid?a.__assign({},t,{raid:t.raid.withMessage(e)}):a.__assign({},t,{raid:new _(e)})})},t.handleRaidInvitePeriodOver=function(e){var n=t.hasJoinedCurrentRaid;if(t.state.raid&&t.setState({raidStorage:t.state.raidStorage.expireRaid(t.state.raid)}),n){var i=function(e,t){var n;if(function(e){return!e.split("/")[2]}(e.pathname))n="/"+t;else{if(!function(e){return/^\/.+\/chat$/.test(e)}(e.pathname))return"";n="/"+t+"/chat"}var i=a.__assign({},P.parse(e.search),{referrer:"raid"});return n+"?"+P.stringify(i)}(t.props.history.location||window.location,e);i&&t.props.history.push(i,D)}},t.handleJoinRaid=function(){if(t.state.raid){var e=t.state.raid.id;t.props.authToken?(!function(e,t){var n={headers:{"Client-ID":c.n.config.legacyClientID,Authorization:"OAuth "+t,Accept:"application/vnd.twitchtv.v5+json"},method:"POST"};fetch(C+"/raids/"+e+"/join",n)}(e,t.props.authToken),function(e){i(T.SpadeEventType.RaidPromptJoin,e)}(t.state.raid),t.setState({raidStorage:t.state.raidStorage.joinRaid(t.state.raid)})):t.props.login()}},t.handleLeaveRaid=function(){if(t.state.raid){!function(e,t){var n={headers:{"Client-ID":c.n.config.legacyClientID,Authorization:"OAuth "+t,Accept:"application/vnd.twitchtv.v5+json"},method:"POST"};fetch(C+"/raids/"+e+"/leave",n)}(t.state.raid.id,t.props.authToken),function(e){i(T.SpadeEventType.RaidPromptLeave,e)}(t.state.raid),t.setState({raidStorage:t.state.raidStorage.leaveRaid(t.state.raid)})}},t.handleCancelRaid=function(){t.state.raid&&t.props.send(S.a)},t}return a.__extends(t,e),t.prototype.componentDidMount=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){switch(e.label){case 0:return this.subscribe(),[4,c.n.experiments.getAssignment("TWILIGHT_RAID_AUTO_JOIN")];case 1:return"yes"===e.sent()&&this.setState({raidStorage:new b}),[2]}})})},t.prototype.render=function(){return this.shouldRenderRaidNotification?r.createElement(x,{raid:this.state.raid,onRaidInvitePeriodOver:this.handleRaidInvitePeriodOver},this.renderCTAButton()):null},t.prototype.componentWillUnmount=function(){this.unsubscribe()},t.prototype.componentWillReceiveProps=function(e){var t=this;this.props.channelID!==e.channelID&&(this.unsubscribe(),this.setState({raid:void 0},function(){return t.subscribe()}))},t.prototype.subscribe=function(){this.unsubscribe=c.n.pubsub.subscribe({topic:Object(u.k)(this.props.channelID),onMessage:this.handlePubsubMessage})},t.prototype.renderCTAButton=function(){return this.isRaidCreator?r.createElement(L,{onCancelRaid:this.handleCancelRaid}):r.createElement(B,{onJoinRaid:this.handleJoinRaid,onLeaveRaid:this.handleLeaveRaid,hasJoined:this.hasJoinedCurrentRaid})},Object.defineProperty(t.prototype,"shouldRenderRaidNotification",{get:function(){var e=this.state.raid;return e&&e.isAnnouncing&&!this.state.raidStorage.isExpired(e)&&(e.hasTimeToJoin||this.hasJoinedCurrentRaid)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isRaidCreator",{get:function(){var e=this.state.raid;return e&&this.props.data&&this.props.data.user&&this.props.data.user.id===e.creatorID},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasJoinedCurrentRaid",{get:function(){var e=this.state.raid;return!(!e||!this.props.authToken)&&(this.isRaidCreator||this.state.raidStorage.hasJoined(e))},enumerable:!0,configurable:!0}),t}(r.Component),W=Object(d.a)(A,{skip:function(e){return!e.authToken}})(V),H=Object(s.b)(function(e){return{authToken:Object(h.a)(e)}},function(e){return Object(l.b)({login:function(){return Object(m.f)(p.a.RaidJoin)}},e)})(W),G=Object(o.e)(H);n.d(t,"a",function(){return G}),n.d(t,!1,function(){return H}),n.d(t,!1,function(){})},BTUa:function(e,t){},BVQ1:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SendWhisper"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"SendWhisperInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sendWhisper"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emoteID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"from"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"to"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"from"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"sentAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"editedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"deletedAt"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:191}};n.loc.source={body:"mutation SendWhisper($input: SendWhisperInput!) {\nsendWhisper(input: $input) {\nmessage {\nid\ncontent {\ncontent\nemotes {\nid\nemoteID\nsetID\nfrom\nto\n}\n}\nfrom {\nid\n}\nsentAt\neditedAt\ndeletedAt\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},Bir6:function(e,t,n){"use strict";t.a=function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}},Bsuy:function(e,t){},CFVp:function(e,t,n){"use strict";function i(e,t){var n=[r.a.Red,r.a.Blue,r.a.Green,r.a.Purple,r.a.Gray],i=new Map,o=n.map(function(t){var n=function(e,t){for(var n=[],i={},r=0,o=l;r<o.length;r++)for(var d=o[r],u=0,p=c;u<p.length;u++){var m=p[u];i[d]||(i[d]={animated:new Map,static:new Map});var h=a(e,d,!0,t,m);n.push(h),i[d].animated.set(m,h.url);var g=a(e,d,!1,t,m);n.push(g),i[d].static.set(m,g.url)}return{id:e+";"+t,bits:t,color:s.f[t],images:n,indexedImages:i}}(e,t);return i.set(t,n),n});return{prefix:e,type:t,tiers:o,orderedTiers:o,indexedTiers:i}}function a(e,t,n,i,a){var r=n?"gif":"png";return{theme:t,isAnimated:n,dpiScale:a,url:"https://d3aqoihi2n8ty8.cloudfront.net/actions/"+e.toLowerCase()+"/"+t.toLowerCase()+"/"+(n?"animated":"static")+"/"+i+"/"+a+"."+r}}t.a=function(){if(!d){var e=[],t={};Object.keys(o).forEach(function(n){var a=i(n,o[n]);e.push(a),t[n.toLowerCase()]=a}),d={orderedActions:e,indexedActions:t}}return d},t.b=function(){return u||(u=function(e){return d?d.indexedActions[e.toLowerCase()]:i(e,o[e])}("Cheer")),u};var r=n("I89S"),s=n("3iBR"),o={Cheer:s.d,Kreygasm:s.d,Kappa:s.d,Muxy:s.e,Streamlabs:s.e,SwiftRage:s.d,VoHiYo:s.d},l=["LIGHT","DARK"],c=[1,1.5,2,3,4],d=null,u=null},CGWe:function(e,t){},CwIZ:function(e,t,n){"use strict";n.d(t,"a",function(){return l}),t.b=function(e){return i.__awaiter(this,void 0,void 0,function(){var t,n,l,c,d,u,p,m,h,g,f,b,v;return i.__generator(this,function(i){switch(i.label){case 0:t=a.m.getVideoPlayerTrackingData().vodID,n=!!t,l={channelID:e.channelID,withVideo:!1},n&&(l.withVideo=!0,l.videoID=t),c=null,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,a.n.apollo.client.query({query:o,variables:l})];case 2:return c=i.sent(),[3,4];case 3:return d=i.sent(),a.i.error(d,"Failed to make query for channel info in FollowEvent reporting.",{channelID:e.channelID}),[3,4];case 4:return u=c&&c.data&&c.data.user||null,c&&!u&&a.i.error(new Error("GraphQL empty response"),"Query for channel info in SubEvent reporting returned no data.",{channelID:e.channelID}),p=null,c&&n&&((m=c&&c.data&&c.data.video)?p=Object(s.a)(m.broadcastType):a.i.error(new Error("GraphQL empty response"),"Query for video info in SubEvent reporting returned no data.",{currentVideoID:t})),h=u&&u.self,g=h?!!h.subscriptionBenefit:null,f=h&&h.subscriptionBenefit&&h.subscriptionBenefit.purchasedWithPrime||!1,b=h?h.canPrimeSubscribe:null,v={action:e.action,can_subscribe:b,channel:e.channelLogin,channel_id:e.channelID,checkout_button_tier:e.checkoutButtonTier,has_sub_credit:e.hasSubCredit,host_channel:e.hostChannelLogin,host_channel_id:e.hostChannelID,is_menu_open:e.isMenuOpen,is_subscribed:g,is_subscribed_current_tier:h&&h.subscriptionBenefit&&h.subscriptionBenefit.tier,sub_location:e.sub_location,sub_recipient:e.giftRecipient,modal:e.modal,modal_level:e.modalLevel||"",show_prime_content:e.showPrimeContent,show_resub:u?b&&f:null,vod_id:t,vod_type:p,viewport_height:window.innerHeight,viewport_width:window.innerWidth},a.m.track(r.SpadeEventType.Subscription,v),[2]}})})};var i=n("TToO"),a=n("6sO2"),r=n("vH/s"),s=n("xrVp"),o=n("3QSP"),l=(n.n(o),{BuyGiftSub:"buy_gift_sub",ClickCheckout:"click_checkout_button",ClickMoreSubOptions:"more_options_click",ClickGiftSubOptions:"gift_options_click",ClickPrimeFAQ:"click_prime_faq",ClickSignupForPrime:"click_signup_for_prime",ClickBack:"back_top_level",CloseSubMenu:"close_subscribe_menu",GiftASub:"gift_a_sub",OpenSubMenu:"open_subscribe_menu",SubWithPrime:"samus_spend_credit"})},DCOT:function(e,t,n){"use strict";t.a=function(e,t){var n=o[e.threadID];if(n){if(n.lastReadCursorID>=t)return;clearTimeout(n.timeoutHandle)}var l=setTimeout(function(){var t=i.__assign({mutation:s},Object(r.a)({threadID:e.threadID,lastReadMessageID:e.lastReadMessageID}),{optimisticResponse:{updateWhisperThread:{thread:{__typename:"WhisperThread",id:e.threadID,unreadMessagesCount:0},__typename:"UpdateWhisperThreadPayload"}}});a.n.apollo.client.mutate(t),delete o[e.threadID]},250);o[e.threadID]={timeoutHandle:l,lastReadCursorID:t}};var i=n("TToO"),a=n("6sO2"),r=n("oIkB"),s=n("EBeM"),o=(n.n(s),{})},DVR9:function(e,t){},Dc1A:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ViewerCardModActions_BanUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"BanUserFromChatRoomInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"banUserFromChatRoom"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ban"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isPermanent"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:135}};n.loc.source={body:"mutation ViewerCardModActions_BanUser($input: BanUserFromChatRoomInput!) {\nbanUserFromChatRoom(input: $input) {\nban {\nisPermanent\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},DtWM:function(e,t,n){"use strict";var i=n("TToO"),a=n("U7vG"),r=n("6sO2"),s=(n("SX5d"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.logger=r.n.logger.withCategory("resize-detector"),t.onScroll=function(){var e=t.container,n=e.offsetWidth,i=e.offsetHeight,a=e.offsetLeft,r=e.offsetTop;t.logger.debug("Resize Detector -- onScroll"),n===t.width&&i===t.height&&r===t.top&&a===t.left||(t.width=n,t.height=i,t.props.onResize(n,i,r,a)),t.reset()},t.setGrowDivRef=function(e){return t.growDiv=e},t.setGrowChildDivRef=function(e){return t.growChildDiv=e},t.setShrinkDivRef=function(e){return t.shrinkDiv=e},t}return i.__extends(t,e),t.prototype.render=function(){return a.createElement("div",{className:"resize-detector"},a.createElement("div",{className:"resize-detector",ref:this.setGrowDivRef},a.createElement("div",{className:"resize-detector__grow",ref:this.setGrowChildDivRef})),a.createElement("div",{className:"resize-detector",ref:this.setShrinkDivRef},a.createElement("div",{className:"resize-detector__shrink"})))},t.prototype.componentDidMount=function(){if(this.growDiv){this.growDiv.parentElement||this.logger.warn("growDiv.parentElement is undefined!"),this.container=this.growDiv.parentElement.parentElement;var e=this.container.style.position;"relative"!==e&&"absolute"!==e&&"fixed"!==e&&"static"===window.getComputedStyle(this.container).getPropertyValue("position")&&(this.container.style.position="relative"),this.onScroll(),this.growDiv.addEventListener("scroll",this.onScroll),this.shrinkDiv.addEventListener("scroll",this.onScroll)}else this.logger.warn("growDiv is undefined!")},t.prototype.componentWillUnmount=function(){this.growDiv.removeEventListener("scroll",this.onScroll),this.shrinkDiv.removeEventListener("scroll",this.onScroll)},t.prototype.reset=function(){var e=this.growDiv,t=this.shrinkDiv,n=this.growChildDiv.style;n.width="100000px",n.height="100000px",e.scrollLeft=1e5,e.scrollTop=1e5,t.scrollLeft=1e5,t.scrollTop=1e5},t}(a.Component));n.d(t,"a",function(){return s})},E9Qg:function(e,t,n){e.exports=n.p+"assets/bg_glitch_pattern-34ca2e369aad1ed33b57f3d2d59c70eb.png"},EBeM:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Whispers_MarkThreadMessageRead"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdateWhisperThreadInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateWhisperThread"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"thread"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"unreadMessagesCount"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:151}};n.loc.source={body:"mutation Whispers_MarkThreadMessageRead($input: UpdateWhisperThreadInput!) {\nupdateWhisperThread(input: $input) {\nthread {\nid\nunreadMessagesCount\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"Ex+h":function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a});var i;!function(e){e.Playing="PLAYING",e.Streaming="BROADCASTING",e.Watching="WATCHING"}(i||(i={}));var a;!function(e){e.Playing="playing",e.Streaming="broadcasting",e.Watching="watching"}(a||(a={}))},FDYX:function(e,t,n){"use strict";t.d=function(e){return e.some(function(e){return!!e.self&&!!e.self.promotion})},t.c=function(e){return e.some(function(e){return!!e.giftPromotion})},t.a=function(e,t){var n;return t?n=e.giftPromotion:e.self&&(n=e.self.promotion),n?n.newPrice:e.price},t.b=function(e,t){var n;return t?n=e.giftPromotion:e.self&&(n=e.self.promotion),n?n.discountValue:0}},FsFC:function(e,t,n){"use strict";function i(e,t){return e===a.SECOND?Object(r.d)("{secondCount, plural, one {# second} other {# seconds}}",{secondCount:t},"formatDuration"):e===a.MINUTE?Object(r.d)("{minuteCount, plural, one {# minute} other {# minutes}}",{minuteCount:t},"formatDuration"):e===a.DAY?Object(r.d)("{dayCount, plural, one {# day} other {# days}}",{dayCount:t},"formatDuration"):e===a.HOUR?Object(r.d)("{hourCount, plural, one {# hour} other {# hours}}",{hourCount:t},"formatDuration"):e===a.WEEK?Object(r.d)("{weekCount, plural, one {# week} other {# weeks}}",{weekCount:t},"formatDuration"):e===a.MONTH?Object(r.d)("{monthCount, plural, one {# month} other {# months}}",{monthCount:t},"formatDuration"):""}t.a=function(e){if(e<60)return i(a.SECOND,e);var t=Math.floor(e/60),n=e%60;if(t<60)return n?i(a.MINUTE,t)+" "+i(a.SECOND,n):i(a.MINUTE,t);var r=Math.floor(t/60);if(t%=60,r<24)return t?i(a.HOUR,r)+" "+i(a.MINUTE,t):i(a.HOUR,r);var s=Math.floor(r/24);if(r%=24,s<7)return r?i(a.DAY,s)+" "+i(a.HOUR,r):i(a.DAY,s);if(s<=26){var o=Math.floor(s/7);return(s%=7)?i(a.WEEK,o)+" "+i(a.DAY,s):i(a.WEEK,o)}var l=Math.round((s+3)/30);return i(a.MONTH,l)};var a,r=n("6sO2");!function(e){e[e.SECOND=0]="SECOND",e[e.MINUTE=1]="MINUTE",e[e.HOUR=2]="HOUR",e[e.DAY=3]="DAY",e[e.WEEK=4]="WEEK",e[e.MONTH=5]="MONTH"}(a||(a={}))},GHQc:function(e,t){},GxDs:function(e,t,n){"use strict";var i=n("TToO"),a=n("U7vG"),r=n("F8kA"),s=n("yDzg"),o=n("vH/s"),l=n("6sO2"),c=n("Odds"),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={hasImageLoadingError:!1},t.handleImageError=function(){t.setState({hasImageLoadingError:!0})},t}return i.__extends(t,e),t.prototype.componentWillReceiveProps=function(){this.setState({hasImageLoadingError:!1})},t.prototype.render=function(){var e=l.a.defaultStreamPreviewURL;return!this.state.hasImageLoadingError&&this.props.imageURL&&(e=this.props.imageURL),a.createElement(c.C,{aspect:c.k.Aspect16x9,alt:this.props.altText,src:e,onError:this.handleImageError})},t}(a.Component),u=(n("1tZx"),"https://static-cdn.jtvnw.net/emoticons/v1/58765/2.0"),p={ERROR:"chat-card-error",TITLE:"chat-card-title",DESCRIPTION:"chat-card-description"},m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderErrorCard=function(){var e=a.createElement("img",{"data-test-selector":p.ERROR,src:u,className:"chat-card__error-img"});return t.renderCardContent(e,t.props.error)},t.renderCardContent=function(e,t){var n,i;return t?(n=a.createElement(c._34,{type:c._39.Span,fontSize:c.Q.Size5,"data-test-selector":p.TITLE,title:t.title},t.title),i=a.createElement(c._34,{type:c._39.Span,fontSize:c.Q.Size6,color:c.I.Alt2,"data-test-selector":p.DESCRIPTION},t.description)):(e=a.createElement(c._7,{overlay:!0}),n=a.createElement(c._7,{width:180}),i=a.createElement(c._7,{width:120})),a.createElement(c._24,{background:c.m.Base,display:c.M.Flex,flexWrap:c.P.NoWrap,padding:.5},a.createElement(c._24,{className:"chat-card__preview-img",background:c.m.Alt2,display:c.M.Flex,alignItems:c.c.Center,justifyContent:c._0.Center,flexShrink:0},e),a.createElement(c._1,{display:c.M.Flex,alignItems:c.c.Center,overflow:c._4.Hidden},a.createElement(c._1,{padding:{left:1},fullWidth:!0},a.createElement(c._1,{className:"chat-card__title",ellipsis:!0},n),a.createElement(c._1,{ellipsis:!0},i))))},t}return i.__extends(t,e),t.prototype.render=function(){var e;if(this.props.error)e=this.renderErrorCard();else if(this.props.data){var t=Object(s.a)(this.props.data.contentURL,{tt_medium:o.PageviewMedium.Chat,tt_content:o.PageviewContent.ChatCard}),n=a.createElement(d,{altText:this.props.data.title,imageURL:this.props.data.previewImageURL});e=a.createElement(r.a,{className:"chat-card__link",to:t,target:"_blank"},this.renderCardContent(n,{title:this.props.data.title,description:this.props.data.description}))}else e=this.renderCardContent();return a.createElement(c._24,{elevation:1,margin:{top:.5}},e)},t}(a.Component),h=m;n.d(t,!1,function(){return u}),n.d(t,!1,function(){return p}),n.d(t,!1,function(){return m}),n.d(t,"a",function(){return h})},GxF8:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"WhisperThread_ReportUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ReportWhisperThreadInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reportWhisperThread"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"thread"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:125}};n.loc.source={body:"mutation WhisperThread_ReportUser($input: ReportWhisperThreadInput!) {\nreportWhisperThread(input: $input) {\nthread {\nid\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},HQaX:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"leaderboardEntry"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BitsLeaderboard"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"entries"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"rank"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"score"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:100}};n.loc.source={body:"fragment leaderboardEntry on BitsLeaderboard {\nentries {\nedges {\ncursor\nnode {\nid\nrank\nscore\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},HZww:function(e,t,n){"use strict";t.c=function(e){return a.PubsubTopic.ChatRoom+"."+e},t.d=function(e){return a.PubsubTopic.ChatRoomsChannel+"."+e},t.e=function(e){return a.PubsubTopic.ChatRoomsUser+"."+e},t.g=function(e){return a.PubsubTopic.ImageUpload+"."+e},t.o=function(e){return a.PubsubTopic.UploadService+"."+e},t.t=function(e){return a.PubsubTopic.VideoPlaybackById+"."+e},t.j=function(e){return a.PubsubTopic.Presence+"."+e},t.h=function(e,t){return a.PubsubTopic.ModerationActionsByUserAndChannel+"."+e+"."+t},t.k=function(e){return a.PubsubTopic.Raid+"."+e},t.f=function(e){return a.PubsubTopic.Friendship+"."+e},t.b=function(e){return a.PubsubTopic.ChannelBitsPinEvents+"."+e},t.a=function(e){return a.PubsubTopic.BitsLeaderboardEvents+"."+e.id},t.p=function(e){return a.PubsubTopic.UserBitsUpdates+"."+e},t.s=function(e){return a.PubsubTopic.UserSubscribeEvents+"."+e},t.r=function(e){return a.PubsubTopic.UserCrateEvents+"."+e},t.q=function(e){return a.PubsubTopic.UserCommerceEvents+"."+e},t.u=function(e){return a.PubsubTopic.Whispers+"."+e},t.i=function(e){return a.PubsubTopic.OnsiteNotifications+"."+e},t.l=function(e){return a.PubsubTopic.StreamChatRoom+"."+e},t.n=function(e){return i.j.subscribe({topic:e.topic,onMessage:function(t){t.type&&!e.type&&!e.types||t.type&&e.type&&t.type!==e.type||t.type&&e.types&&!e.types.includes(t.type)||Object(r.d)(e.query,e.variables,function(n){return e.mutator(t,n)},function(n){return!!e.skipMessage&&e.skipMessage(t,n)})}})},t.m=function(e){return i.j.subscribe({topic:e.topic,onMessage:function(t){t.type&&t.type!==e.type||Object(r.c)({fragment:e.fragment,id:e.id,mutator:function(n){return e.mutator(t,n)}})}})};var i=n("6sO2"),a=n("aMxy"),r=n("oIkB")},HuX0:function(e,t){},I4TS:function(e,t){},I89S:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i;!function(e){e[e.Gray=1]="Gray",e[e.Purple=100]="Purple",e[e.Green=1e3]="Green",e[e.Blue=5e3]="Blue",e[e.Red=1e4]="Red",e[e.Yellow=1e5]="Yellow"}(i||(i={}))},IEOs:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Chat_DenyRejectedChatMessage"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"DenyRejectedChatMessageInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"denyRejectedChatMessage"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:138}};n.loc.source={body:"mutation Chat_DenyRejectedChatMessage($input: DenyRejectedChatMessageInput!) {\ndenyRejectedChatMessage(input: $input) {\nmessage {\nid\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},INp2:function(e,t,n){"use strict";t.a=function(e){return e+"-"+Date.now()}},IfJQ:function(e,t){},Iv9R:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Whispers_Thread_Participants"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetUserID"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"blockedUsers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"chatColor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"70"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"friends"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"availability"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"activity"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Playing"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Streaming"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"stream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Watching"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hosting"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"targetUserID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayBadges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"imageURL"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"chatColor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"70"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:503}};n.loc.source={body:"query Whispers_Thread_Participants($targetUserID: ID) {\ncurrentUser {\nid\nblockedUsers {\nid\n}\nchatColor\ndisplayName\nprofileImageURL(width: 70)\nlogin\nfriends {\nedges {\nnode {\nid\n}\navailability\nactivity {\ntype\n... on Playing {\ngame {\nid\nname\n}\n}\n... on Streaming {\nstream {\nid\ngame {\nid\nname\n}\n}\n}\n... on Watching {\nuser {\nid\ndisplayName\nlogin\nhosting {\nid\ndisplayName\n}\n}\n}\n}\n}\n}\n}\nuser(id: $targetUserID) {\nid\ndisplayBadges {\nid\ntitle\nimageURL\n}\nchatColor\ndisplayName\nprofileImageURL(width: 70)\nlogin\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},J7iJ:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"RitualsEnabled_User"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"channel"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ritualsEnabled"},directives:[]}]}}]}}],loc:{start:0,end:153}};i.loc.source={body:'#import "twilight/features/chat/models/rituals-enabled-fragment.gql"\nquery RitualsEnabled_User($id: ID!) {\nchannel: user(id: $id) {\n...ritualsEnabled\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(function(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})}(n("v2Uk").definitions)),e.exports=i},JtUK:function(e,t,n){"use strict";t.a=function(e,t,n){if(void 0===n&&(n=!1),n)switch(t){case a.a.Forbidden:return Object(i.d)("You don't have permissions to timeout {login}.",{login:e},"BanUserErrorCode");case a.a.TargetIsAdmin:return Object(i.d)("You cannot timeout admin {login}. Please email support@twitch.tv if an admin is being abusive.",{login:e},"BanUserErrorCode");case a.a.TargetIsAlreadyBanned:return Object(i.d)("{login} is already banned in this channel.",{login:e},"BanUserErrorCode");case a.a.TargetIsAnonymous:return Object(i.d)("You cannot timeout anonymous users.","BanUserErrorCode");case a.a.TargetIsBroadcaster:return Object(i.d)("You cannot timeout the broadcaster.","BanUserErrorCode");case a.a.TargetIsGlobalMod:return Object(i.d)("You cannot timeout global moderator {login}. Please email support@twitch.tv if a global moderator is being abusive.",{login:e},"BanUserErrorCode");case a.a.TargetIsMod:return Object(i.d)("You cannot timeout moderator {login} unless you are the owner of this channel.",{login:e},"BanUserErrorCode");case a.a.TargetIsSelf:return Object(i.d)("You cannot timeout yourself.","BanUserErrorCode");case a.a.TargetIsStaff:return Object(i.d)("You cannot timeout staff {login}. Please email support@twitch.tv if a staff member is being abusive.",{login:e},"BanUserErrorCode");case a.a.TargetNotFound:return Object(i.d)("The user you are trying to timeout doesn't exist.","BanUserErrorCode");default:throw new Error("Unrecognized operation result.")}else switch(t){case a.a.Forbidden:return Object(i.d)("You don't have permissions to ban {login}.",{login:e},"BanUserErrorCode");case a.a.TargetIsAdmin:return Object(i.d)("You cannot ban admin {login}. Please email support@twitch.tv if an admin is being abusive.",{login:e},"BanUserErrorCode");case a.a.TargetIsAlreadyBanned:return Object(i.d)("{login} is currently banned in this channel.",{login:e},"BanUserErrorCode");case a.a.TargetIsAnonymous:return Object(i.d)("You cannot ban anonymous users.","BanUserErrorCode");case a.a.TargetIsBroadcaster:return Object(i.d)("You cannot ban the broadcaster.","BanUserErrorCode");case a.a.TargetIsGlobalMod:return Object(i.d)("You cannot ban global moderator {login}. Please email support@twitch.tv if a global moderator is being abusive.",{login:e},"BanUserErrorCode");case a.a.TargetIsMod:return Object(i.d)("You cannot ban moderator {login} unless you are the owner of this channel.",{login:e},"BanUserErrorCode");case a.a.TargetIsSelf:return Object(i.d)("You cannot ban yourself.","BanUserErrorCode");case a.a.TargetIsStaff:return Object(i.d)("You cannot ban staff {login}. Please email support@twitch.tv if a staff member is being abusive.",{login:e},"BanUserErrorCode");case a.a.TargetNotFound:return Object(i.d)("The user you are trying to ban doesn't exist.","BanUserErrorCode");default:throw new Error("Unrecognized operation result.")}};var i=n("6sO2"),a=n("1OO3")},K1Jg:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Presence_WatchingClick_User"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"stream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"hosting"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"stream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:158}};n.loc.source={body:"query Presence_WatchingClick_User($login: String!) {\nuser(login: $login) {\nid\nstream {\nid\ngame {\nid\nname\n}\n}\nhosting {\nid\nstream {\nid\ngame {\nid\nname\n}\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},KBUQ:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),t.b=function(e){var t=this;return Object(r.a)(s,{props:function(n){return{unbanUserMutation:function(i){return a.__awaiter(t,void 0,void 0,function(){var t,r;return a.__generator(this,function(a){switch(a.label){case 0:if(t=e(n.ownProps).channelID,!n.mutate)return[3,5];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,n.mutate({variables:{input:{channelID:t,bannedUserLogin:i}}})];case 2:return r=a.sent(),[2,r.data];case 3:throw a.sent(),new Error("Unable to unban user");case 4:return[3,6];case 5:throw new Error("Unban user mutation is not ready");case 6:return[2]}})})}}}})};var i,a=n("TToO"),r=n("7vx8"),s=n("l669");n.n(s);!function(e){e.Forbidden="FORBIDDEN",e.TargetNotFound="TARGET_NOT_FOUND",e.TargetNotBanned="TARGET_NOT_BANNED"}(i||(i={}))},KJtg:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UnblockUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UnblockUserInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unblockUser"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"targetUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:100}};n.loc.source={body:"mutation UnblockUser($input: UnblockUserInput!) {\nunblockUser(input: $input) {\ntargetUser {\nid\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},KNSH:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Chat_UserData"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isGlobalMod"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isSiteAdmin"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isStaff"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:95}};n.loc.source={body:"query Chat_UserData {\nuser {\nid\ndisplayName\nlogin\nroles {\nisGlobalMod\nisSiteAdmin\nisStaff\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},KWLn:function(e,t){},KfLc:function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"d",function(){return o}),n.d(t,"b",function(){return l}),n.d(t,"e",function(){return c}),n.d(t,"c",function(){return d});var i=n("6sO2"),a=n("vH/s"),r=n("aSvS"),s=function(e){var t={action:r.b.DismissToken,channel_id:e.channelID,user_banner:e.bannerMessage,user_message:null};i.m.track(a.SpadeEventType.NewChatterTokenStatus,t)},o=function(e){var t={action:r.b.RedeemToken,channel_id:e.channelID,user_banner:e.bannerMessage,user_message:e.userMessage};i.m.track(a.SpadeEventType.NewChatterTokenStatus,t)},l=function(e){var t={action:r.b.RequestEligibility,channel_id:e.channelID,user_banner:null,user_message:null};i.m.track(a.SpadeEventType.NewChatterTokenStatus,t)},c=function(e){var t={action:r.b.RequestToken,channel_id:e.channelID,user_banner:e.bannerMessage,user_message:null};i.m.track(a.SpadeEventType.NewChatterTokenStatus,t)},d=function(e){var t={action:e.action,channel_id:e.channelID};i.m.track(a.SpadeEventType.NewChatterOnboardingInteraction,t)}},Kthq:function(e,t,n){"use strict";t.a=function(e,t,n){if(void 0===n&&(n=!1),n)switch(t){case a.a.Forbidden:return Object(i.d)("You don't have permissions to untimeout {login}.",{login:e},"UnbanUserErrorCode");case a.a.TargetNotFound:return Object(i.d)("The user you are trying to untimeout doesn't exist.","UnbanUserErrorCode");case a.a.TargetNotBanned:return Object(i.d)("{login} is not currently timed out from this channel.",{login:e},"UnbanUserErrorCode");default:throw new Error("Unrecognized operation result")}else switch(t){case a.a.Forbidden:return Object(i.d)("You don't have permissions to unban {login}.",{login:e},"UnbanUserErrorCode");case a.a.TargetNotFound:return Object(i.d)("The user you are trying to unban doesn't exist.","UnbanUserErrorCode");case a.a.TargetNotBanned:return Object(i.d)("{login} is not currently banned from this channel.",{login:e},"UnbanUserErrorCode");default:throw new Error("Unrecognized operation result")}};var i=n("6sO2"),a=n("KBUQ")},Kxgf:function(e,t,n){"use strict";t.a=function(){var e=this;return Object(a.a)(o,{props:function(t){return{unblockUserMutation:function(n,a){return i.__awaiter(e,void 0,void 0,function(){return i.__generator(this,function(e){switch(e.label){case 0:return t.mutate?[4,t.mutate({variables:{input:{targetUserID:n}},optimisticResponse:{unblockUser:{__typename:"UnblockUserPayload",targetUser:{__typename:"User",id:n}}},update:function(e){var t=e.readFragment({id:Object(s.a)(a),fragment:r});t&&(t.blockedUsers=t.blockedUsers.filter(function(e){return null!==e&&e.id!==n}),e.writeFragment({id:Object(s.a)(a),fragment:r,data:t}))}})]:[3,2];case 1:return e.sent(),[3,3];case 2:throw new Error("unblockUserMutation is not ready");case 3:return[2]}})})}}}})};var i=n("TToO"),a=n("7vx8"),r=n("nmYW"),s=(n.n(r),n("yADj")),o=n("KJtg");n.n(o)},L0RX:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"RecentRaidsModActions_UnbanUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UnbanUserFromChatRoomInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unbanUserFromChatRoom"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ban"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isPermanent"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:142}};n.loc.source={body:"mutation RecentRaidsModActions_UnbanUser($input: UnbanUserFromChatRoomInput!) {\nunbanUserFromChatRoom(input: $input) {\nban {\nisPermanent\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},LYwx:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"EmotePicker_EmotePicker_UserSubscriptionProducts"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelOwnerID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"channelOwnerID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subscriptionProducts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"emoteSetID"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:194}};n.loc.source={body:"query EmotePicker_EmotePicker_UserSubscriptionProducts($channelOwnerID: ID!) {\nuser(id: $channelOwnerID) {\nid\nlogin\ndisplayName\nsubscriptionProducts {\nid\nurl\nemotes {\nid\ntoken\n}\nemoteSetID\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},Ldv2:function(e,t,n){"use strict";t.a=function(){return Object(a.a)(s,{props:function(e){if(e.data){var t=e.data.currentUser&&e.data.currentUser.emoteSets,n=t&&Object(r.a)(t);return{emoteSetsData:i.__assign({},e.data,{emoteMap:n,emoteSets:t})}}return{}},skip:function(e){return!e.isLoggedIn}})};var i=n("TToO"),a=n("7vx8"),r=n("YhVV"),s=n("7B9K");n.n(s)},LjAQ:function(e,t,n){"use strict";var i=n("TToO"),a=n("HW6M"),r=n("U7vG"),s=n("2KeS"),o=n("6sO2"),l=n("7vx8"),c=n("CSlQ"),d=n("xwpJ"),u=n("Odds"),p=n("x6ny"),m="reporting-modal__select",h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleChange=function(e){t.props.onChange(e.target.value)},t}return i.__extends(t,e),t.prototype.componentDidUpdate=function(){this.props.data.loading&&!this.props.data.error||this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){var e=null,t=Object(o.d)("Select One...","ReportUserModal");if(this.props.data.loading)e=[r.createElement("option",{key:"Loading"},Object(o.d)("Loading...","ReportReasonsSelect"))];else{e=(this.props.data.reportReasons||Object(d.b)()).map(function(e){return r.createElement("option",{key:e.id,value:e.id},e.text)})}return r.createElement(u._1,{margin:{bottom:2}},r.createElement(u.R,{id:m,label:Object(o.d)("Select Reason (required)","ReportUserModal")},r.createElement(u._20,{id:m,"data-test-selector":"reporting-modal.select",disabled:this.props.data.loading||!!this.props.data.error,onChange:this.handleChange,defaultValue:t},r.createElement("option",{disabled:!0,key:"default"},t),e)))},t=i.__decorate([Object(c.d)("ReportReasonSelect")],t)}(r.Component),g=Object(l.a)(p,{options:function(e){return{variables:{content:e.reportContentType}}}})(h),f=(n("I4TS"),n("1EXI"));n.d(t,"a",function(){return k}),n.d(t,"b",function(){return b}),n.d(t,"c",function(){return _});var b,v="reporting__select-community",k="community_rules_violation";!function(e){e[e.Unsubmitted=0]="Unsubmitted",e[e.Success=1]="Success",e[e.FormError=2]="FormError",e[e.MutationError=3]="MutationError"}(b||(b={}));var y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={community:null,description:"",reason:null,isCommunityReason:!1,selectedCommunityID:null,selectedCommunityName:null},t.headerMessage=Object(o.d)("Tell us your concern about this content so that we can review it to determine whether there has been a violation of the {tosLink}. {br} (Abuse of this feature is a violation of the terms of service)",{br:r.createElement("br",null),tosLink:r.createElement("a",{href:"https://www.twitch.tv/p/terms-of-service",target:"_blank"},Object(o.d)("terms of service","ReportUser"))},"ReportUser"),t.selectCommunity=function(e){t.setState({selectedCommunityID:e.target.value,selectedCommunityName:e.target.name})},t.handleSubmit=function(e){e.preventDefault(),t.state.reason&&t.state.description.length>0?t.props.onSubmit(t.state.reason||"",t.state.description,t.state.selectedCommunityID,t.state.selectedCommunityName):t.props.onError(b.FormError)},t.handleTextAreaChange=function(e){t.setState({description:e.target.value})},t.handleReasonChange=function(e){if(!t.props.data||t.props.data.loading||t.props.data.error||!t.props.data.user)return null;var n=t.props.data.user.directories.nodes.filter(function(e){return"COMMUNITY"===e.directoryType});n.length&&e===k?t.setState({reason:e,selectedCommunityID:n[0].id,selectedCommunityName:n[0].name,isCommunityReason:!0}):t.setState({reason:e,isCommunityReason:!1})},t}return i.__extends(t,e),t.prototype.render=function(){return r.createElement(u._1,{display:u.M.Flex,flexDirection:u.O.Column,alignItems:u.c.Center,justifyContent:u._0.Center},this.renderStatusMessage(),this.renderBody())},t.prototype.renderBody=function(){return this.props.submitStatus===b.Success?r.createElement("div",null,r.createElement(u.u,{onClick:this.props.onClose},r.createElement(u._1,{padding:{x:2}},Object(o.d)("Close","ReportUser")))):r.createElement("div",null,r.createElement(u._1,{"data-test-selector":"reporting.title",margin:{bottom:1},"data-a-target":"reporting-channel-name"},r.createElement(u._34,{type:u._39.H4},this.props.title),r.createElement(u._24,{color:u.I.Alt2,margin:{top:1}},this.headerMessage)),r.createElement("form",null,r.createElement(u._24,{borderTop:!0,borderBottom:!0,margin:{y:2},padding:{y:2}},r.createElement(g,{reportContentType:this.props.reportContentType,onChange:this.handleReasonChange}),this.renderCommunitiesSelector(),r.createElement(u.R,{id:"reporting__text-area",label:Object(o.d)("Description (required)","ReportUser")},r.createElement(u._36,{defaultValue:this.props.defaultDescription,onChange:this.handleTextAreaChange}))),r.createElement(u._24,{display:u.M.Flex,justifyContent:u._0.Center},r.createElement(u.u,{onClick:this.handleSubmit},r.createElement(u._1,{padding:{x:2}},Object(o.d)("Send","ReportUser"))))))},t.prototype.renderCommunitiesSelector=function(){if(!this.props.data||this.props.data.loading||this.props.data.error||!this.props.data.user)return null;if(this.state.isCommunityReason){var e=this.props.data.user.directories.nodes.filter(function(e){return"COMMUNITY"===e.directoryType}).map(function(e){return r.createElement("option",{key:e.id,value:e.id,name:e.name},e.displayName)});return r.createElement(u._1,{margin:{bottom:2}},r.createElement(u.R,{id:v,label:Object(o.d)("Community","ReportUser")},r.createElement(u._20,{id:v,"data-test-selector":"reporting.select-community",disabled:this.props.data.loading||!!this.props.data.error,onChange:this.selectCommunity},e)))}},t.prototype.renderStatusMessage=function(){var e=null;switch(this.props.submitStatus){case b.FormError:e=Object(o.d)("Reason and Description are required.","ReportUser");break;case b.MutationError:e=Object(o.d)("Sorry, a network error occurred when submitting your report. Please try again later.","ReportUser");break;case b.Success:e=Object(o.d)("Thank you for your report.","ReportUser");break;default:return null}var t=a({"reporting__error-container":this.props.submitStatus!==b.Success,"reporting__success-container":this.props.submitStatus===b.Success});return r.createElement(u._24,{className:t,fullWidth:this.props.submitStatus!==b.Success,"data-test-selector":"reporting.error",margin:{bottom:2},padding:1},e)},t}(r.Component),_=Object(s.d)(Object(l.a)(f,{options:function(e){return{fetchPolicy:"network-only",variables:{userId:e.targetUserID}}}}))(y)},"Lx+S":function(e,t,n){"use strict";function i(e){var t=r.createElement(O._34,{bold:!0,type:O._39.Span},r.createElement("span",{style:{color:e.chatColor},"data-a-target":V},Object(j.a)(e.login,e.displayName))),n=null;return e.editAppearance||(n=r.createElement(O._1,{margin:{top:1}},r.createElement("div",{className:"chat-settings__edit-button",onClick:e.onClickEdit,"data-a-target":P,"data-test-selector":A},Object(E.d)("Edit Appearance","ChatSettings")))),r.createElement(O._24,{background:O.m.Base,color:O.I.Base,display:O.M.InlineFlex,flexDirection:O.O.Column,fullWidth:!0},r.createElement(O._34,{color:O.I.Alt2,transform:O._38.Uppercase},Object(E.d)("Name Display","ChatSettings")),r.createElement(O._1,{margin:{top:2}},e.userBadges&&e.userBadges.map(function(e){return r.createElement(B.a,{key:e.id,badge:e})}),t),n)}var a=n("TToO"),r=n("U7vG"),s=n("RH2O"),o=n("CIox"),l=n("2KeS"),c=n("NXs7"),d=n("Ouuk"),u=n("jF7o"),p=n("+xm8"),m=n("f2i/"),h=n("NikC"),g=n("Aj/L"),f=n("0nzt"),b=n("vh75"),v=n("ass3"),k=n("UzRK"),y=n("TnJK"),_=n("O0Qc"),C=n("VsL1"),S=n("Umoc"),E=n("6sO2"),N=n("zCIC"),w=n("+Znq"),T=n("7vx8"),D=n("HW6M"),I=["#FF0000","#0000FF","#008000","#B22222","#FF7F50","#9ACD32","#FF4500","#2E8B57","#DAA520","#D2691E","#5F9EA0","#1E90FF","#FF69B4","#8A2BE2","#00FF7F"],O=n("Odds"),M=(n("90yy"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onColorSelected=function(e){var n=e.currentTarget.getAttribute("data-color");n&&t.props.onColorSelected(n)},t}return a.__extends(t,e),t.prototype.render=function(){var e=this,t=I.map(function(t){var n={"color-chooser":!0,"color-chooser--selected":t===e.props.selectedColor};return r.createElement("div",{key:t,"data-color":t,onClick:e.onColorSelected,className:D(n),style:{backgroundColor:t},"data-test-selector":"color_swatch_"+t,"data-a-target":"color_swatch_"+t})}),n=r.createElement(O._34,{transform:O._38.Uppercase,color:O.I.Alt2},Object(E.d)("Name Color","ChatSettings"));return this.props.borderTop&&(n=r.createElement(O._24,{margin:{top:2},borderTop:!0,padding:{top:2}},n)),r.createElement("div",null,r.createElement(O._24,{margin:{bottom:1},background:O.m.Base,color:O.I.Base,display:O.M.InlineFlex,flexDirection:O.O.Column,fullWidth:!0},n),r.createElement(O._1,{margin:{y:1},display:O.M.Flex,flexWrap:O.P.Wrap},t,r.createElement(O._34,{fontSize:O.Q.Size7},r.createElement("a",{href:"https://twitch.tv/products/turbo?ref=more_colors_direct"},Object(E.d)("more colors →","ChatSettings")))))},t}(r.Component)),x=n("OAwv"),R=n("AaXK"),L=(n("7LVu"),"channel_badge"),U="global_badge",F=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.onGlobalBadgeClicked=function(e){var n=e.currentTarget.getAttribute("data-badge");t.setGlobalBadge(t.props.userLogin,n||"")},t.onChannelBadgeClicked=function(e){var n=e.currentTarget.getAttribute("data-badge");t.setChannelBadge(t.props.channelLogin,t.props.userLogin,n||"")},t}return a.__extends(t,e),t.prototype.render=function(){return this.props.data&&!this.props.data.loading&&this.props.data.user&&this.props.data.currentUser?r.createElement("div",null,r.createElement(M,{selectedColor:this.props.userChatColor,onColorSelected:this.props.onColorSelected,borderTop:!0}),this.getBadgeChooser()):null},t.prototype.getBadgeChooser=function(){var e=this;if(this.props.data){var t=this.props.data.user.self.availableBadges,n=this.props.data.user.self.selectedBadge,i=this.props.data.currentUser.availableBadges,a=this.props.data.currentUser.selectedBadge;if(!t)return null;var s=void 0===this.state.channelBadgeID&&n?n.setID:this.state.channelBadgeID,o={"edit-appearance__badge-chooser":!0,"edit-appearance__badge-chooser--selected":!s},l=Object(E.d)("No channel badges :(","ChatSettings");t&&t.length>0&&(l=t.map(function(t){var i={"edit-appearance__badge-chooser":!0,"edit-appearance__badge-chooser--selected":n&&t.setID===s};return r.createElement("div",{"data-badge":t.setID,onClick:e.onChannelBadgeClicked,key:t.setID+"/"+t.version,className:D(i),"data-test-selector":L+"_"+t.setID,"data-a-target":L+"_"+t.setID},r.createElement(O._42,{label:t.title},r.createElement("img",{alt:t.title,src:t.image1x,srcSet:t.image1x+" 1x, "+t.image2x+" 2x, "+t.image4x+" 4x"})))})).push(r.createElement("div",{key:"none","data-badge":"",onClick:this.onChannelBadgeClicked,className:D(o),"data-test-selector":L+"_none","data-a-target":L+"_none"},r.createElement(O._42,{label:Object(E.d)("Same as Global","ChatSettings")},r.createElement("div",{className:"edit-appearance__badge-chooser__none"},r.createElement(O._14,{asset:O._15.Global})))));var c=void 0===this.state.globalBadgeID&&a?a.setID:this.state.globalBadgeID,d={"edit-appearance__badge-chooser":!0,"edit-appearance__badge-chooser--selected":!c},u=Object(E.d)("No global badges :(","ChatSettings");return i&&i.length>0&&(u=i.map(function(t){var n={"edit-appearance__badge-chooser":!0,"edit-appearance__badge-chooser--selected":a&&t.setID===c};return r.createElement("div",{"data-badge":t.setID,onClick:e.onGlobalBadgeClicked,key:t.setID+"/"+t.version,className:D(n),"data-test-selector":U+"_"+t.setID,"data-a-target":U+"_"+t.setID},r.createElement(O._42,{label:t.title},r.createElement("img",{alt:t.title,src:t.image1x,srcSet:t.image1x+" 1x, "+t.image2x+" 2x, "+t.image4x+" 4x"})))})).push(r.createElement("div",{key:"none","data-badge":"",onClick:this.onGlobalBadgeClicked,className:D(d),"data-test-selector":U+"_none","data-a-target":U+"_none"},r.createElement(O._42,{label:Object(E.d)("None","ChatSettings")},r.createElement("div",{className:"edit-appearance__badge-chooser__none"},r.createElement(O._14,{asset:O._15.Ban}))))),r.createElement("div",null,r.createElement(O._24,{background:O.m.Base,color:O.I.Base,display:O.M.InlineFlex,flexDirection:O.O.Column,fullWidth:!0},r.createElement(O._24,{margin:{top:2},padding:{top:2},borderTop:!0},r.createElement(O._42,{align:O._43.Left,label:Object(E.d)("Your global badge is shown when chatting and whispering.","ChatSettings"),width:175},r.createElement(O._34,{color:O.I.Alt2,transform:O._38.Uppercase},Object(E.d)("Global Badge [?]","ChatSettings")))),r.createElement(O._1,{margin:{y:1},padding:{top:1},display:O.M.Flex,"data-a-target":"global-badge-selector"},u)),r.createElement(O._24,{background:O.m.Base,color:O.I.Base,display:O.M.InlineFlex,flexDirection:O.O.Column,fullWidth:!0},r.createElement(O._24,{margin:{top:2},padding:{top:2},borderTop:!0},r.createElement(O._42,{align:O._43.Left,label:Object(E.d)("Change the badge shown when chatting in this channel.","ChatSettings"),width:175},r.createElement(O._34,{color:O.I.Alt2,transform:O._38.Uppercase},Object(E.d)("Channel Badge [?]","ChatSettings")))),r.createElement(O._1,{margin:{y:1},padding:{top:1},display:O.M.Flex,"data-a-target":"channel-badge-selector"},l)))}},t.prototype.setChannelBadge=function(e,t,n){return a.__awaiter(this,void 0,void 0,function(){var i,r,s;return a.__generator(this,function(a){switch(a.label){case 0:return i={"Client-ID":E.n.config.legacyClientID,Accept:"application/vnd.twitchtv.v4+json; charset=UTF-8","content-type":"application/x-www-form-urlencoded; charset=UTF-8","Accept-Language":"en-us",Authorization:"OAuth "+this.props.authToken},r="https://api.twitch.tv/kraken/users/"+t+"/chat/channels/"+e+"/badges",[4,fetch(r,{method:"PUT",body:x.stringify({selected_badge:n}),headers:i})];case 1:return(s=a.sent())&&s.ok&&(this.props.onBadgesChanged(),this.setState({channelBadgeID:n})),[2]}})})},t.prototype.setGlobalBadge=function(e,t){return a.__awaiter(this,void 0,void 0,function(){var n,i,r;return a.__generator(this,function(a){switch(a.label){case 0:return n={"Client-ID":E.n.config.legacyClientID,Accept:"application/vnd.twitchtv.v4+json; charset=UTF-8","content-type":"application/x-www-form-urlencoded; charset=UTF-8","Accept-Language":"en-us",Authorization:"OAuth "+this.props.authToken},i="https://api.twitch.tv/kraken/users/"+e+"/chat/badges",[4,fetch(i,{method:"PUT",body:x.stringify({selected_badge:t}),headers:n}).catch(console.error)];case 1:return(r=a.sent())&&r.ok&&(this.props.onBadgesChanged(),this.setState({globalBadgeID:t})),[2]}})})},t=a.__decorate([Object(T.a)(R,{options:function(e){return{variables:{channelLogin:e.channelLogin}}}})],t)}(r.Component),j=n("SZoP"),B=n("3T7g"),A="edit-appearance-button",P="edit-appearance-button",V="edit-display-name",W=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.render=function(){return r.createElement(O._1,{"data-toggle-balloon-id":"raids-follower-only-tooltip",margin:{left:.5},position:O._8.Relative},r.createElement(O._42,{align:O._43.Right,direction:O._44.Top,display:O.M.InlineFlex,label:this.props.text,width:175,show:!0},r.createElement(O.V,{alignItems:O.c.Center,className:"chat-settings__highlight-indicator",display:O.M.InlineFlex,justifyContent:O._0.Center},r.createElement(O._34,{color:O.I.Overlay,fontSize:O.Q.Size8,type:O._39.Span,"data-test-selector":"raids-follower-only-tooltip"},"i"))))},t}(r.Component),H=n("V5M+"),G=n("oSFp"),q=n("F8kA"),z=n("9u8h"),Q=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.targetChannelID=t.props.targetChannelID,t}return a.__extends(t,e),t.fetchRecentRaidsList=function(e){return a.__awaiter(this,void 0,void 0,function(){var t,n;return a.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,z.a.get("/kraken/raids?client_id="+E.a.authClientID+"&api_version="+E.a.defaultAPIVersion+"&target_id="+e)];case 1:return t=i.sent(),[2,this.deserialize(t)];case 2:return n=i.sent(),E.i.error(n,"Couldn't fetch raids list"),[2,[]];case 3:return[2]}})})},t.deserialize=function(e){var t=[];if(e.body&&e.body.raids){for(var n in e.body.raids)if(n.hasOwnProperty){var i={raidID:e.body.raids[n]._id,raidAt:e.body.raids[n].raid_at,userID:e.body.raids[n].creator_user._id,name:e.body.raids[n].creator_user.name};t.push(i)}return t}return[]},t}(r.Component),$=n("oIkB"),Y=n("g7wA"),K=n("O9wU"),J=n("jPU6"),Z=n("y1/w"),X=(n("MSFW"),n("L0RX")),ee=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onUsernameClick=function(e){var n=e.currentTarget.getAttribute("data-username"),i=e.currentTarget.getAttribute("data-raid-id")||"";n&&t.props.onUsernameClick(n,K.a.recent_raids,i)},t.onBanButtonClick=function(e){var n=e.currentTarget.getAttribute("data-channel-id")||"",i=e.currentTarget.getAttribute("data-target-user-login")||"";(0,t.props.banUser)(Object($.a)({channelID:n,bannedUserLogin:i}))},t.onUnbanButtonClick=function(e){var n=e.currentTarget.getAttribute("data-channel-id")||"",i=e.currentTarget.getAttribute("data-target-user-login")||"";(0,t.props.unbanUser)(Object($.a)({channelID:n,bannedUserLogin:i}))},t}return a.__extends(t,e),t.prototype.render=function(){return r.createElement(O._1,{key:"recent-raids-layout2-"+this.props.raiderUserID,className:"recent-raids-item",flexDirection:O.O.Row,display:O.M.Flex,fullWidth:!0},r.createElement(O._1,{flexDirection:O.O.Row,display:O.M.Flex,fullWidth:!0,justifyContent:O._0.Between},r.createElement(O._34,{bold:!0},r.createElement("a",{className:"recent-raids-item__name","data-username":this.props.channelLogin,"data-raid-id":this.props.raidID,onClick:this.onUsernameClick,href:"#"},this.props.channelLogin)),r.createElement(O._1,{position:O._8.Relative},r.createElement(O._1,{className:"recent-raids-item__timestamp"},Object(Y.u)(Date.parse(this.props.timestamp))),this.getCardSlideInContent())))},t.prototype.getCardSlideInContent=function(){if(!this.props.slideInContent)return null;var e=null;return e=this.props.data.chatRoomBanStatus&&this.props.data.chatRoomBanStatus.isPermanent?r.createElement(O.u,{key:"recent-raids-ban-button-"+this.props.raiderUserID,size:O.x.Small,type:O.z.Text,onClick:this.onUnbanButtonClick,"data-a-target":"recent-raid-item-button","data-raid-id":this.props.raidID,"data-target-user-login":this.props.raiderLogin,"data-target-user-id":this.props.raiderUserID,"data-channel-id":this.props.channelID},Object(E.d)("Unban","RecentRaid")):r.createElement(O.u,{key:"recent-raids-ban-button-"+this.props.raiderUserID,size:O.x.Small,type:O.z.Text,onClick:this.onBanButtonClick,"data-a-target":"recent-raid-item-button","data-raid-id":this.props.raidID,"data-target-user-login":this.props.raiderLogin,"data-target-user-id":this.props.raiderUserID,"data-channel-id":this.props.channelID},Object(E.d)("Ban","RecentRaid")),r.createElement(O._1,{key:"recent-raids-layout-"+this.props.raiderUserID,className:"recent-raids-item__hover-content",zIndex:O._51.Above,"data-a-target":"recent-raids-item-hover"},this.props.slideInContent,e)},t=a.__decorate([Object(T.a)(Z,{options:function(e){return{variables:{targetUserID:e.raiderUserID,channelID:e.channelID},fetchPolicy:"cache-and-network"}}}),Object(T.a)(J,{name:"banUser",options:function(e){return{update:function(t,n){!function(e,t,n){var i=e.readQuery({query:Z,variables:{targetUserID:n.raiderUserID,channelID:n.channelID}});i&&(t&&t.data&&(i.chatRoomBanStatus={isPermanent:!0,__typename:"ChatRoomBanStatus"}),e.writeQuery({query:Z,variables:{targetUserID:n.raiderUserID,channelID:n.channelID},data:i}))}(t,n,e)}}}}),Object(T.a)(X,{name:"unbanUser",options:function(e){return{update:function(t){!function(e,t){var n=e.readQuery({query:Z,variables:{targetUserID:t.raiderUserID,channelID:t.channelID}});if(n){var i=a.__assign({},n,{chatRoomBanStatus:null});e.writeQuery({query:Z,variables:{targetUserID:t.raiderUserID,channelID:t.channelID},data:i})}}(t,e)}}}})],t)}(r.Component),te=n("mw/a"),ne=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.onReportButtonClick=function(e){var n=e.currentTarget.getAttribute("data-raid-id")||"",i=e.currentTarget.getAttribute("data-target-user-id")||"",a=e.currentTarget.getAttribute("data-target-user-login")||"";t.props.showReportUserModal({reportContext:{contentType:te.a.Raid,targetUserID:i,contentID:n,extra:JSON.stringify({channel_id:i.toString()})},title:Object(E.d)("Report {channelDisplayName}",{channelDisplayName:a},"ReportUserModal")})},t}return a.__extends(t,e),t.prototype.componentDidMount=function(){return a.__awaiter(this,void 0,void 0,function(){var e;return a.__generator(this,function(t){switch(t.label){case 0:return[4,Q.fetchRecentRaidsList(this.props.targetChannelID)];case 1:return e=t.sent(),this.setState({raidChannels:e}),[2]}})})},t.prototype.render=function(){var e=[],t=[],n={};if(void 0!==this.state.raidChannels){0===this.state.raidChannels.length&&e.push(r.createElement(O._34,{key:"recent-raids-no-raids",type:O._39.P},Object(E.d)("You have no recent raids","RecentRaids")));for(var i in this.state.raidChannels)if(i.hasOwnProperty){var a=this.state.raidChannels[i];this.state.raidChannels.hasOwnProperty(i)&&void 0===n[a.userID]&&(t.push(r.createElement(ee,{key:"recent-raids-item-"+a.userID,slideInContent:[r.createElement(O._24,{key:"recent-raids-item-report-area-"+a.userID,color:O.I.Alt2,display:O.M.InlineFlex},r.createElement(O.u,{key:"recent-raid-report-button",size:O.x.Small,type:O.z.Text,onClick:this.onReportButtonClick,"data-a-target":"recent-raid-item-button","data-raid-id":a.raidID,"data-target-user-login":a.name,"data-target-user-id":a.userID},Object(E.d)("Report","RecentRaid")),r.createElement(O._42,{align:O._43.Right,width:150,label:Object(E.d)("Banning a user prevents them from future chatting or raiding","RecentRaid")}))],timestamp:a.raidAt,channelLogin:a.name,raiderUserID:a.userID,channelID:this.props.targetChannelID,raiderLogin:a.name,raidID:a.raidID,onUsernameClick:this.props.onUsernameClick,showReportUserModal:this.props.showReportUserModal})),n[a.userID]=!0)}}var s=null;return this.props.recentRaids?r.createElement(O._1,{key:"recent-raids"},r.createElement(O._1,{margin:{bottom:2}},r.createElement(O._34,{color:O.I.Link,type:O._39.Span},r.createElement(q.a,{to:{pathname:"/broadcast/dashboard/settings/raids"}},Object(E.d)("Manage Raid Settings","RecentRaids")))),e,t):(s=r.createElement(O._1,{key:"recent-raids",margin:{top:1,bottom:1},display:O.M.Flex,justifyContent:O._0.Between,alignItems:O.c.Center},r.createElement("span",{className:"chat-settings__edit-button",onClick:this.props.onClickRecentRaids,"data-test-selector":"recent-raids-button"},Object(E.d)("See Recent Raids","ChatSettings")),this.props.tooltipText&&r.createElement(O._1,{position:O._8.Relative},r.createElement(O._42,{align:O._43.Right,direction:O._44.Top,display:O.M.InlineFlex,label:this.props.tooltipText,width:175,show:!0},r.createElement(O.V,{alignItems:O.c.Center,className:"chat-settings__highlight-indicator",display:O.M.InlineFlex,justifyContent:O._0.Center,margin:{left:.5}},r.createElement(O._34,{color:O.I.Overlay,fontSize:O.Q.Size8,type:O._39.Span},"i"))))),r.createElement(O._1,null,s))},t}(r.Component),ie=Object(s.b)(function(){return{}},function(e){return Object(l.b)({showReportUserModal:function(e){var t=a.__rest(e,[]);return Object(H.d)(G.a,t)}},e)})(ne),ae=n("qLdk"),re=n("pg5l"),se=(n("Vaxm"),"chat-settings-back-button"),oe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={recentRaids:!1,chatColor:null,raidsTooltipDismissed:!1},t.resizeAnimationFrame=0,t.dismissRaidsTooltip=function(){t.setState({raidsTooltipDismissed:!0})},t.handleFollowerDurationClick=function(e){var n=e.currentTarget.getAttribute("data-duration");n&&t.props.onFollowerDurationChange(parseInt(n,10))},t.onClickEdit=function(e){e.nativeEvent.stopImmediatePropagation(),t.props.onClickEditAppearance()},t.onClickRecentRaids=function(e){e.nativeEvent.stopImmediatePropagation(),t.setState({recentRaids:!0})},t.onClickBack=function(e){e.nativeEvent.stopImmediatePropagation(),t.props.onLeaveEditAppearance(),t.setState({recentRaids:!1})},t.onColorSelected=function(e){t.setState({chatColor:e}),t.props.onColorSelected(e)},t.onBadgesChanged=function(){return a.__awaiter(t,void 0,void 0,function(){var e,t,n;return a.__generator(this,function(i){switch(i.label){case 0:return!this.props.data||this.props.data.loading?[3,2]:[4,this.props.data.refetch()];case 1:if((e=i.sent()).data){if(!(t=e.data).user.self)return[2];n={},t.user.self.displayBadges.forEach(function(e){n[e.setID]=e.version}),E.n.tmi.client.updateChannelBadges(this.props.channelLogin,n)}i.label=2;case 2:return[2]}})})},t.onResize=function(){t.resizeAnimationFrame||(t.resizeAnimationFrame=requestAnimationFrame(t.setContainerHeight))},t.setContainerHeight=function(){var e=t.props.containerElement&&t.props.containerElement.clientHeight||700;t.setState({containerHeight:e}),t.resizeAnimationFrame=0},t}return a.__extends(t,e),t.prototype.componentDidMount=function(){window.addEventListener("resize",this.onResize,!0),this.setContainerHeight()},t.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.onResize,!0),this.resizeAnimationFrame&&cancelAnimationFrame(this.resizeAnimationFrame)},t.prototype.render=function(){if(!this.props.data||this.props.data.loading)return null;var e=null;if(this.props.isLoggedIn&&this.props.data.currentUser){var t=this.props.data.user.self?this.props.data.user.self.displayBadges:[];e=r.createElement(i,{key:"name-display",login:this.props.data.currentUser.login,displayName:this.props.data.currentUser.displayName,chatColor:this.state.chatColor||this.props.data.currentUser.chatColor,editAppearance:this.props.editAppearance,userBadges:t,onClickEdit:this.onClickEdit})}var n=[];return this.props.isLoggedIn?this.props.editAppearance?n=[r.createElement(O.V,{margin:{bottom:2},key:"chat-settings-edit-inject"},r.createElement("div",{key:"chat-settings-edit",className:"chat-settings__edit-button",onClick:this.onClickBack,"data-test-selector":se},r.createElement(O._34,{color:O.I.Link,type:O._39.Span},r.createElement(O._14,{asset:O._15.ChatSettingsBack,height:10,width:10}),Object(E.d)("Back","ChatSettingsAppearance")))),e,r.createElement(F,{key:"edit-appearance",onColorSelected:this.onColorSelected,editAppearance:this.props.editAppearance,authToken:this.props.authToken,channelLogin:this.props.channelLogin,userChatColor:this.state.chatColor||this.props.data.currentUser.chatColor,userLogin:this.props.data.currentUser.login,onBadgesChanged:this.onBadgesChanged})]:this.state.recentRaids?n=[r.createElement(O.V,{key:"chat-settings-recent-raids"},r.createElement("div",{key:"chat-settings-edit",className:"chat-settings__recent-raids-button",onClick:this.onClickBack,"data-test-selector":se},r.createElement(O._34,{color:O.I.Link,type:O._39.Span},r.createElement(O._14,{asset:O._15.ChatSettingsBack,height:10,width:10}),Object(E.d)("Back","ChatSettingsRecentRaids")),r.createElement(O._1,{margin:{top:2}},r.createElement(O._34,{key:"recent-raids-title",color:O.I.Alt2,transform:O._38.Uppercase},Object(E.d)("Recent Raids","ChatSettings"))))),r.createElement(ie,{key:"recent-raids",targetChannelID:this.props.channelID,recentRaids:this.state.recentRaids,onClickRecentRaids:this.onClickRecentRaids,onUsernameClick:this.props.onShowViewerCard})]:(n=[e,this.renderUniversalOptions()],this.props.isCurrentUserModerator&&n.push(this.renderModTools())):n=[r.createElement(M,{key:"color-chooser",onColorSelected:this.props.onColorSelected}),this.renderUniversalOptions()],r.createElement(N.b,{className:"chat-settings",suppressScrollX:!0,style:{maxHeight:this.state.containerHeight}},r.createElement("div",{onClick:this.dismissRaidsTooltip},r.createElement(O._24,{key:"chat-settings",className:"chat-settings__content",background:O.m.Base,color:O.I.Base,padding:2},n)))},t.prototype.renderUniversalOptions=function(){if(!this.props.data)return null;var e=this.props.isPopout&&r.createElement(O.H,{checked:this.props.darkModeEnabled,"data-a-target":"darkmode-checkbox","data-test-selector":"dark-mode-checkbox",id:"chat-settings-dark-mode",label:Object(E.d)("Dark Mode","ChatSettings"),onChange:this.props.onDarkModeToggle}),t=(!this.props.isPopout||Object(ae.a)())&&r.createElement("button",{onClick:this.props.onChatPopout,"data-a-target":"popout-chat-button","data-test-selector":"popout-button"},Object(E.d)("Popout","ChatSettings")),n=!this.props.isPopout&&(window.BetterTTV||window.FrankerFaceZ)&&r.createElement("button",{onClick:this.props.onLegacyChatPopout,"data-test-selector":"legacy-popout-button"},Object(E.d)("Legacy Popout","ChatSettings")),i=(!this.props.isPopout||!ae.a)&&r.createElement("button",{onClick:this.props.onChatHide,"data-a-target":"hide-chat-button","data-test-selector":"hide-chat-button"},Object(E.d)("Hide Chat","ChatSettings"));return r.createElement(O._1,{key:"chat-options"},r.createElement(O._24,{borderTop:!0,margin:{top:2},padding:{y:2}},r.createElement(O._34,{color:O.I.Alt2,transform:O._38.Uppercase},Object(E.d)("Chat Options","ChatSettings"))),r.createElement(O._1,{margin:{bottom:1}},r.createElement(O.H,{checked:this.props.showTimestamps,"data-a-target":"timestamp-checkbox","data-test-selector":"timestamps-selector",id:"chat-settings-timestamp",label:Object(E.d)("Timestamps","ChatSettings"),onChange:this.props.onTimestampToggle})),r.createElement(O._1,{margin:{bottom:1}},e),r.createElement(O._1,{margin:{bottom:1}},i),r.createElement(O._1,{margin:{bottom:1}},t),n&&r.createElement(O._1,null,n))},Object.defineProperty(t.prototype,"showRaidsTooltip",{get:function(){return this.props.sawFirstRaidPrompt&&!this.state.raidsTooltipDismissed},enumerable:!0,configurable:!0}),t.prototype.renderModTools=function(){return r.createElement(O._24,{key:"mod-tools",borderTop:!0,"data-test-selector":"mod-tools",margin:{top:2},padding:{top:2}},r.createElement(O._1,{margin:{bottom:2}},r.createElement(O._34,{color:O.I.Alt2,transform:O._38.Uppercase},Object(E.d)("Mod Tools","ChatSettings"))),r.createElement(O._1,{margin:{bottom:1}},r.createElement(O.H,{checked:this.props.showModerationIcons,"data-a-target":"mod-icons-checkbox","data-test-selector":"mod-icons-checkbox",id:"chat-settings-mod-icons",label:Object(E.d)("Mod Icons","ChatSettings"),onChange:this.props.onModIconsToggle})),r.createElement(O._24,{margin:{bottom:1},display:O.M.Flex,justifyContent:O._0.Between,flexWrap:O.P.Wrap},r.createElement(O.H,{checked:this.props.followerModeEnabled,"data-a-target":"follower-mode-checkbox","data-test-selector":"follower-mode-checkbox",id:"chat-settings-followers-only",label:Object(E.d)("Followers-Only Chat","ChatSettings"),onChange:this.props.onFollowerModeToggle}),this.showRaidsTooltip?r.createElement(W,{text:Object(E.d)("Prevent offensive raiders from chatting.","RaidReportingChat")}):null,r.createElement(O._1,{alignItems:O.c.Center,display:O.M.Flex,flexWrap:O.P.NoWrap,justifyContent:O._0.Between},r.createElement(O._1,{margin:{right:.5}},r.createElement(O._34,{color:O.I.Alt2,fontSize:O.Q.Size7,type:O._39.Span},Object(E.d)("Must have followed for","ChatSettings"))),r.createElement(O._1,{className:"chat-settings__mod-tools-follower-button",flexShrink:0},r.createElement(w.a,{display:O.M.InlineBlock},r.createElement(O.u,{size:O.x.Small,type:O.z.Text,"data-a-target":"follower-mode-dropdown","data-test-selector":"follower-mode-duration-menu",dropdown:!0},Object(k.d)(this.props.selectedFollowerModeDuration)),r.createElement(O.p,{direction:O.q.TopRight},r.createElement(O._1,{padding:.5},r.createElement(O._34,{color:O.I.Alt2},Object(E.d)("Followers can chat if they have followed for at least","ChatSettings"))),r.createElement(O._24,{color:O.I.Link},this.renderFollowerModeOptions())))))),r.createElement(O._1,{margin:{bottom:1}},r.createElement(O.H,{checked:this.props.slowModeEnabled,"data-a-target":"slow-mode-checkbox","data-test-selector":"slow-mode-checkbox",id:"chat-settings-slow-mode",label:Object(E.d)("Slow Mode","ChatSettings"),onChange:this.props.onSlowModeToggle})),r.createElement(ie,{key:"recent-raids",recentRaids:this.state.recentRaids,onClickRecentRaids:this.onClickRecentRaids,onUsernameClick:v.d,targetChannelID:this.props.channelID,tooltipText:this.showRaidsTooltip?Object(E.d)("View recent raids with option to report or ban.","RaidReportingChat"):""}),r.createElement("button",{onClick:this.props.onChatClear,"data-a-target":"clear-chat-button","data-test-selector":"clear-chat-button"},Object(E.d)("Clear Chat","ChatSettings")))},t.prototype.renderFollowerModeOptions=function(){var e=this;return k.b.map(function(t){return r.createElement(O.Z,{"data-duration":t,key:t,onClick:e.handleFollowerDurationClick,selected:t===e.props.selectedFollowerModeDuration},r.createElement(O._1,{padding:.5},Object(k.c)(t)))})},t=a.__decorate([Object(T.a)(re,{options:function(e){return{variables:{channelLogin:e.channelLogin}}}})],t)}(r.Component),le=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={editAppearance:!1},t.handleSettingsToggle=function(e){t.props.onToggle&&t.props.onToggle(e),t.state.editAppearance&&t.setState({editAppearance:!1})},t.onEdit=function(){t.setState({editAppearance:!0})},t.onLeaveEdit=function(){t.setState({editAppearance:!1})},t.onDarkModeToggle=function(){var e=t.props.darkModeEnabled?c.a.Light:c.a.Dark;t.props.onThemeChanged(e,!t.props.isPopout),Object(S.a)({channelLogin:t.props.channelLogin,isHostMode:t.props.isHostMode,newValue:!t.props.darkModeEnabled,settingName:y.a.DarkMode})},t.onTimestampToggle=function(){Object(C.b)("showTimestamps",!t.props.showTimestamps),t.props.showTimestamps?t.props.onTimestampsDisable():t.props.onTimestampsEnable(),Object(S.a)({channelLogin:t.props.channelLogin,isHostMode:t.props.isHostMode,newValue:!t.props.showTimestamps,settingName:y.a.ShowTimestamps})},t.onChatHide=function(){t.props.onChatHide(),Object(S.a)({channelLogin:t.props.channelLogin,isHostMode:t.props.isHostMode,newValue:!0,settingName:y.a.HideChat})},t.onChatPopout=function(){t.props.onChatHide();var e=window.open("/popout/"+t.props.channelLogin+"/chat?popout=","_blank","right=50,top=50,width=400,height=600,resizable=yes,scrollbars=no,toolbar=no,location=no,directories=no,status=no,menubar=no,copyhistory=no");e&&!Object(d.a)()&&(e.focus(),Object(u.a)(e,function(){t.props.onChatUnhide()}))},t.onLegacyChatPopout=function(){t.props.onChatHide();var e=window.open("https://www.twitch.tv/"+t.props.channelLogin+"/chat?popout=","_blank","right=50,top=50,width=400,height=600,resizable=yes,scrollbars=no,toolbar=no,location=no,directories=no,status=no,menubar=no,copyhistory=no");e&&!Object(d.a)()&&(e.focus(),Object(u.a)(e,function(){t.props.onChatUnhide()}))},t.onModIconsToggle=function(){Object(C.b)("showModIcons",!t.props.showModerationIcons),t.props.showModerationIcons?t.props.onModIconsDisable():t.props.onModIconsEnable(),Object(S.a)({channelLogin:t.props.channelLogin,isHostMode:t.props.isHostMode,newValue:!t.props.showModerationIcons,settingName:y.a.ShowModIcons})},t.onFollowerModeToggle=function(){if(t.props.followerModeEnabled)t.props.onChatCommand(Object(_.d)()),t.props.onFollowerModeDisable();else{var e=t.getSelectedFollowerDuration();t.props.onChatCommand(Object(_.f)(e)),t.props.onFollowerModeDurationChange(e),t.props.onFollowerModeEnable()}Object(S.a)({channelLogin:t.props.channelLogin,isHostMode:t.props.isHostMode,newValue:!t.props.followerModeEnabled,settingName:y.a.FollowerMode})},t.onFollowerDurationChange=function(e){Object(C.c)(t.props.channelLogin,e),t.props.onFollowerModeDurationPreferenceChange(t.props.channelLogin,e),t.props.followerModeEnabled&&(t.props.onChatCommand(Object(_.f)(e)),t.props.onFollowerModeDurationChange(e)),Object(S.c)({channelLogin:t.props.channelLogin,followerModeOn:t.props.followerModeEnabled,isHostMode:t.props.isHostMode,newValue:e})},t.onSlowModeToggle=function(){t.props.slowModeEnabled?(t.props.onChatCommand(Object(_.e)()),t.props.onSlowModeDisable()):(t.props.onChatCommand(Object(_.g)()),t.props.onSlowModeEnable()),Object(S.a)({channelLogin:t.props.channelLogin,isHostMode:t.props.isHostMode,newValue:!t.props.slowModeEnabled,settingName:y.a.SlowMode})},t.onChatClear=function(){t.props.onChatCommand(Object(_.c)())},t.getSelectedFollowerDuration=function(){if(t.props.followerModeEnabled)return t.props.followerModeDuration;var e=t.props.lastUsedFollowerDurations[t.props.channelLogin];return"number"==typeof e?e:k.a},t.onColorSelected=function(e){t.props.isLoggedIn?t.props.onChatCommand(Object(_.b)(e)):t.props.login()},t}return a.__extends(t,e),t.prototype.render=function(){return r.createElement(ue,{disabled:this.props.disabled,onToggle:this.handleSettingsToggle},r.createElement(oe,{darkModeEnabled:this.props.darkModeEnabled,followerModeEnabled:this.props.followerModeEnabled,editAppearance:this.state.editAppearance,isCurrentUserModerator:this.props.isCurrentUserModerator,isPopout:this.props.isPopout,onChatClear:this.onChatClear,onChatHide:this.onChatHide,onChatPopout:this.onChatPopout,onDarkModeToggle:this.onDarkModeToggle,onFollowerDurationChange:this.onFollowerDurationChange,onFollowerModeToggle:this.onFollowerModeToggle,onLegacyChatPopout:this.onLegacyChatPopout,onModIconsToggle:this.onModIconsToggle,onSlowModeToggle:this.onSlowModeToggle,onTimestampToggle:this.onTimestampToggle,selectedFollowerModeDuration:this.getSelectedFollowerDuration(),showModerationIcons:this.props.showModerationIcons,showTimestamps:this.props.showTimestamps,slowModeEnabled:this.props.slowModeEnabled,theatreModeEnabled:this.props.theatreModeEnabled,onColorSelected:this.onColorSelected,authToken:this.props.authToken,channelLogin:this.props.channelLogin,channelID:this.props.channelID,isLoggedIn:this.props.isLoggedIn,onClickEditAppearance:this.onEdit,onLeaveEditAppearance:this.onLeaveEdit,sawFirstRaidPrompt:this.props.sawFirstRaidPrompt,onShowViewerCard:this.props.onShowViewerCard,containerElement:this.props.containerElement}))},t}(r.Component),ce=Object(s.b)(function(e){return{darkModeEnabled:Object(f.a)(e)===c.a.Dark,followerModeDuration:e.chat.followerDuration,followerModeEnabled:e.chat.followerMode,lastUsedFollowerDurations:e.chat.lastUsedFollowerDurations,showModerationIcons:e.chat.showModIcons,showTimestamps:e.chat.showTimestamps,slowModeEnabled:e.chat.slowMode,theatreModeEnabled:e.ui.theatreModeEnabled,isLoggedIn:Object(g.d)(e)}},function(e){return Object(l.b)({onChatHide:function(){return b.H()},onChatUnhide:function(){return b.K()},onFollowerModeDisable:function(){return b.x()},onFollowerModeDurationChange:function(e){return b.u(e)},onFollowerModeDurationPreferenceChange:function(e,t){return b.v(e,t)},onFollowerModeEnable:function(){return b.C()},onModIconsDisable:function(){return b.y()},onModIconsEnable:function(){return b.D()},onSlowModeDisable:function(){return b.z()},onSlowModeEnable:function(){return b.E()},onTimestampsDisable:function(){return b.B()},onTimestampsEnable:function(){return b.G()},onShowViewerCard:v.d,onThemeChanged:function(e){return Object(h.b)(e,void 0,!1)},login:function(){return Object(m.f)(p.a.Chat)}},e)})(le),de=Object(o.e)(ce),ue=function(e){return r.createElement(w.a,{onToggle:e.onToggle},r.createElement(O.v,{icon:O._15.Gear,ariaLabel:Object(E.d)("Chat settings","ChatInput"),"data-a-target":"chat-settings",disabled:!!e.disabled}),r.createElement(O.p,{direction:O.q.Top,noTail:!0,offsetY:"11px","data-a-target":"chat-settings-balloon"},e.children))};n.d(t,"a",function(){return de}),n.d(t,"b",function(){return ue})},M5Tl:function(e,t){},MApH:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Chat_BanUserFromChatRoom"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"BanUserFromChatRoomInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"banUserFromChatRoom"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:126}};n.loc.source={body:"mutation Chat_BanUserFromChatRoom($input: BanUserFromChatRoomInput!) {\nbanUserFromChatRoom(input: $input) {\nerror {\ncode\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},MSFW:function(e,t){},Mful:function(e,t,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"chatMessage"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ChatMessage"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"authorName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"authorColor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"embeddedEmote"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"badges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"version"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"bitsUsed"},arguments:[],directives:[]}]}}],loc:{start:0,end:232}};i.loc.source={body:'#import "twilight/features/chat/models/embedded-emote-fragment.gql"\nfragment chatMessage on ChatMessage {\nid\nauthorName\nauthorColor\nauthor {\nid\nlogin\n}\nbody {\ncontent\nemotes {\n...embeddedEmote\n}\n}\nbadges {\nsetID\nversion\n}\nbitsUsed\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(function(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})}(n("0ImK").definitions)),e.exports=i},N5sm:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"WhisperThread_SetThreadSpamStatus"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdateWhisperThreadInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateWhisperThread"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"thread"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"spamInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"lastMarkedNotSpamAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"likelihood"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:178}};n.loc.source={body:"mutation WhisperThread_SetThreadSpamStatus($input: UpdateWhisperThreadInput!) {\nupdateWhisperThread(input: $input) {\nthread {\nid\nspamInfo {\nlastMarkedNotSpamAt\nlikelihood\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},NZkJ:function(e,t){},NikC:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),t.b=function(e,t,n){return void 0===n&&(n=!0),function(i){i(Object(r.s)(e)),n&&Object(a.d)(e),t&&Object(s.b)(e,t)}};var i,a=n("VAT8"),r=n("7enT"),s=n("xrVp");!function(e){e[e.UserMenu=1]="UserMenu",e[e.TypedCommand=2]="TypedCommand"}(i||(i={}))},O0Qc:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),t.h=function(e){return"/ignore "+e},t.j=function(e){return"/unignore "+e},t.i=function(e){return"/mod "+e},t.k=function(e){return"/unmod "+e},t.m=function(e){return/^[\/]/.test(e)},t.c=function(){return"/clear"},t.d=function(){return"/followersoff"},t.e=function(){return"/slowoff"},t.f=function(e){return"/followers "+e},t.g=function(){return"/slow"},t.b=function(e){return"/color "+e},t.q=function(e){var t=e.trim().match(s);return t?{recipientLogin:t[1]||null,body:t[2]||null}:null},t.r=function(e){var t=e.trim().match(o);return t?{recipientLogin:t[1]||null,body:t[2]||null}:{recipientLogin:null,body:null}},t.n=function(e){var t=e.trim().match(l);return t?{bannedUserLogin:t[1],duration:t[2]&&Number(t[2])||null}:null},t.p=function(e){var t=e.trim().match(c);return t?{duration:t[1]&&Number(t[1])||null}:null},t.o=function(e){var t=e.trim().match(u);if(!t)return null;var n=t[1];return n.startsWith("#")||-1!==d.indexOf(n.toLowerCase())?{color:n}:null},t.l=function(e,t){var n=e.match(p);if(!n)return{handled:!1};var r=n[1],s=i.n.store.getState().chat.commandHandlers[n[1].toLowerCase()];if(!s)return{command:r,handled:!1};var o=(n[2]||"").trim(),l={channelLogin:t};try{return{command:r,handled:!0,result:s(o,l)}}catch(e){return a.warn("Exception thrown from chat command handler",{command:n[1],err:e}),{handled:!1}}};var i=n("6sO2"),a=i.n.logger.withCategory("chat-commands"),r="/unraid",s=/^\/w(?:$|\s+)(\S+)?\s*(.+)?/i,o=/^(\S+)?\s+(.+)?$/,l=/^\/ban\s+(\S+)(?:\s+(\d+)?)?$/,c=/^\/slow(?:\s+(\d+)?)?$/,d=["blue","blueviolet","cadetblue","chocolate","coral","dodgerblue","firebrick","goldenrod","green","hotpink","orangered","red","seagreen","springgreen","yellowgreen"],u=/^\/color\s+(#[A-Fa-f0-9]{6}|[A-Za-z]+)$/,p=/^[/.]([a-z0-9]+)(.+)?$/i},O1nh:function(e,t,n){"use strict";var i=n("RH2O"),a=n("2KeS"),r=n("+xm8"),s=n("f2i/"),o=n("Aj/L"),l=n("TToO"),c=n("U7vG"),d=n("6sO2"),u=n("7vx8"),p=n("oIkB"),m=n("CSlQ"),h=n("Odds"),g=n("iYmP"),f=n("7iNp"),b=n("7dPO"),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={hovered:!1},t.onClickAddFriend=function(){t.props.onCreateFriendRequest(Object(p.a)({targetID:t.props.channelID}))},t.onClickUnfriend=function(){t.props.onUnfriendUser(Object(p.a)({targetID:t.props.channelID}))},t}return l.__extends(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){var e=Object(d.d)("Add Friend","UserCard");if(!this.props.isLoggedIn)return c.createElement(h.u,{ariaLabel:e,onClick:this.props.onLoginClick},e);if(!this.props.friendsData&&this.props.data&&(this.props.data.loading||this.props.data.error))return c.createElement(h._7,{height:30,width:60});if(!this.isFriend())return c.createElement(h.u,{onClick:this.onClickAddFriend},e);var t=Object(d.d)("Unfriend","UserCard"),n=Object(d.d)("Friends","UserCard");return c.createElement(h.u,{ariaLabel:t,onClick:this.onClickUnfriend,"data-a-target":"unfriend-button",statusAlertText:t},n)},t.prototype.isFriend=function(){var e=this;if(!this.props.friendsData&&this.props.data&&(this.props.data.loading||this.props.data.error))return!1;return!!(this.props.friendsData||this.props.data).currentUser.friends.edges.find(function(t){return!!t.node&&t.node.id===e.props.channelID})},t=l.__decorate([Object(m.d)("FriendButton"),Object(u.a)(f,{skip:function(e){return!!e.friendsData}}),Object(u.a)(b,{name:"onUnfriendUser"}),Object(u.a)(g,{name:"onCreateFriendRequest"})],t)}(c.Component),k=Object(i.b)(function(e){return{isLoggedIn:Object(o.d)(e)}},function(e){return Object(a.b)({onLoginClick:function(){return s.f(r.a.FriendAdd)}},e)})(v);n.d(t,"a",function(){return k})},O9wU:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i;!function(e){e[e.recent_raids=0]="recent_raids",e[e.chat_message=1]="chat_message",e[e.viewer_list=2]="viewer_list",e[e.member_list=3]="member_list",e[e.test=4]="test"}(i||(i={}))},OLKT:function(e,t){},OLl6:function(e,t,n){"use strict";t.a=function(e){return i.__awaiter(this,void 0,void 0,function(){var t,n;return i.__generator(this,function(i){switch(i.label){case 0:t=null,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,a.n.apollo.client.query({query:r,variables:{login:e}})];case 2:return t=i.sent(),[3,4];case 3:return n=i.sent(),a.i.warn(n,"Failed to fetch user targeted by chat command.",{userLogin:e}),[3,4];case 4:return t&&t.data.user.id?[2,t.data.user.id]:[2,null]}})})};var i=n("TToO"),a=n("6sO2"),r=n("pV+t");n.n(r)},OcEY:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"bitsOffersFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BitsOffer"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bits"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BitsBundleOffer"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"price"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"discount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isPromo"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"includesVAT"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"promotion"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:145}};n.loc.source={body:"fragment bitsOffersFragment on BitsOffer {\nid\ntype\nbits\n... on BitsBundleOffer {\nprice\ndiscount\nisPromo\nurl\nincludesVAT\npromotion {\nid\ntype\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},Ouuk:function(e,t,n){"use strict";t.a=function(e){return e||(e=navigator.userAgent),!!i.exec(e)};var i=/\scurse\/\d/},"P+j/":function(e,t,n){"use strict";var i=n("TToO"),a=n("U7vG"),r=n("3zLD"),s=n("RH2O"),o=n("7vx8"),l=n("RweG"),c=n("Ldv2"),d=n("Aj/L"),u=n("Tzcg"),p=n("6sO2"),m=["4.99","9.99","24.99"],h=n("CSlQ"),g=n("CwIZ"),f=n("HW6M"),b=n("zCIC"),v=n("6BvN"),k=n("7LIQ"),y=n("J4ib"),_=n("Odds"),C=(n("9uSE"),function(e){var t={"emote-picker__tab":!0},n=null,r=null;if(e.channelTabVisible){var s=f(i.__assign({},t,{"emote-picker__tab--active":e.channelTabEnabled&&e.channelTabSelected,"emote-picker__tab--disabled":!e.channelTabEnabled}));n=a.createElement(_.V,{padding:{x:1}},a.createElement("div",{key:"ChannelTabLink",id:"emote-picker__channel",className:s,onClick:e.channelTabEnabled?e.selectChannelTab:void 0,"data-a-target":"emote-channel-tab"},a.createElement("span",null,Object(y.d)("Channel","EmotePicker"))))}if(e.allTabVisible){var o=f(i.__assign({},t,{"emote-picker__tab--active":!(e.channelTabSelected&&e.channelTabEnabled)}));r=a.createElement(_.V,{padding:{x:1}},a.createElement("div",{key:"allTabLink",id:"emote-picker__all",className:o,onClick:e.selectAllTab,"data-a-target":"emote-all-tab"},a.createElement("span",null,Object(y.d)("All","EmotePicker"))))}return a.createElement(_._24,{background:_.m.Base,borderTop:!0,className:"emote-picker__tabs-container"},n,r)}),S=n("YEG/"),E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.render=function(){var e=[];if(this.props.subscribeTexts)for(var t=0;t<=this.props.plan.level;t++){var n=this.props.subscribeTexts[t];n&&(t<this.props.plan.level?(e.push(a.createElement("span",{key:"upsell-predicate:"+t},n)),e.push(a.createElement("span",{key:"upsell-plus:"+t}," + "))):this.props.plan.level>0?e.push(a.createElement("strong",{key:"upsell-strong-end:"+this.props.plan.level},n)):e.push(a.createElement("span",{key:"upsell-end:"+t},n)))}if(!this.props.plan.emoteSetID)return null;var i={id:this.props.plan.emoteSetID,emotes:this.props.plan.emotes||[]},r={};return this.props.plan.price&&(r.purchase=Object(p.d)("${price}",{price:this.props.plan.price},"PlanUpsell")),a.createElement(_._1,{className:"emote-picker-plan-upsell",display:_.M.Flex,flexDirection:_.O.Column,alignItems:_.c.Center,margin:{bottom:1}},a.createElement(k.a,{emoteSet:i,locked:!0}),a.createElement(_._1,{margin:1,alignItems:_.c.Center},e),a.createElement(S.a,{isSubbedToTier:!1,tierPrice:r.purchase||"",reportSubAction:this.props.reportSubAction,url:this.props.plan.url}))},t}(a.Component),N=(n("Xo53"),function(e){function t(t){var n=e.call(this,t)||this;return n.closeOnEsc=function(e){e.keyCode===v.a.Esc&&n.props.toggleVisibility()},n.handleFilterChange=function(e){var t=e.target.value,i=t.toLowerCase(),a=n.filterAvailableUpsells(n.props.availableUpsells,i),r=n.filterEmoteSets(n.props.ownedChannelEmoteSets,i);n.setState({filter:i,filteredAllEmoteSets:n.filterEmoteSets(n.props.allEmoteSets,i),filteredAvailableUpsells:a,filteredOwnedChannelEmoteSets:r,inputValue:t,channelTabEnabled:r.length>0||a.length>0})},n.state={filter:"",filteredOwnedChannelEmoteSets:t.ownedChannelEmoteSets,filteredAvailableUpsells:t.availableUpsells,filteredAllEmoteSets:t.allEmoteSets,inputValue:"",channelTabSelected:!0,channelTabEnabled:t.ownedChannelEmoteSets.length>0||t.availableUpsells.length>0},n.selectAllTab=function(){return n.setChannelTabSelected(!1)},n.selectChannelTab=function(){return n.setChannelTabSelected(!0)},n}return i.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){if(!e.gqlError)if(this.state.filter.length>0){var t=this.filterAvailableUpsells(this.props.availableUpsells,this.state.filter),n=this.filterEmoteSets(this.props.ownedChannelEmoteSets,this.state.filter);this.setState({filteredAllEmoteSets:this.filterEmoteSets(this.props.allEmoteSets,this.state.filter),filteredAvailableUpsells:t,filteredOwnedChannelEmoteSets:n,channelTabEnabled:n.length>0||t.length>0})}else this.setState({filteredOwnedChannelEmoteSets:e.ownedChannelEmoteSets,filteredAvailableUpsells:e.availableUpsells,filteredAllEmoteSets:e.allEmoteSets,channelTabEnabled:e.ownedChannelEmoteSets.length>0||e.availableUpsells.length>0})},t.prototype.render=function(){return a.createElement(_.p,{"data-a-target":"emote-picker",direction:this.props.direction?this.props.direction:_.q.TopRight,size:this.props.size?this.props.size:_.r.Medium,noTail:!0,show:!0},a.createElement(_._1,{className:f("emote-picker")},this.renderTabContent(),a.createElement(_._1,{className:"emote-picker__controls-container",position:_._8.Relative},a.createElement(_._24,{padding:1,borderTop:!0},a.createElement(_.X,{autoFocus:!0,onChange:this.handleFilterChange,onKeyDown:this.closeOnEsc,placeholder:Object(p.d)("Search for Emotes","EmotePicker"),type:_.Y.Text,value:this.state.inputValue})),a.createElement(C,{allTabVisible:this.props.allEmoteSets.length>0,channelTabEnabled:this.state.channelTabEnabled,channelTabSelected:this.state.channelTabSelected,channelTabVisible:!!this.props.channelTabVisible,selectAllTab:this.selectAllTab,selectChannelTab:this.selectChannelTab}))))},t.prototype.renderTabContent=function(){var e=this,t=[];return this.props.gqlError?t.push(a.createElement(_._1,{key:"emotePicker-error"},a.createElement(_._34,{color:_.I.Error},Object(p.d)("Unable to load available emotes.","EmotePicker")))):this.props.loading?t.push(a.createElement(_._1,{alignItems:_.c.Center,display:_.M.Flex,key:"loading",fullHeight:!0,fullWidth:!0,justifyContent:_._0.Center},a.createElement(_._3,{key:"LoadingSpinner"}))):this.state.channelTabEnabled&&this.state.channelTabSelected?(this.state.filteredOwnedChannelEmoteSets.length>0&&t.push(a.createElement(_._1,{className:"emote-picker__content-block",key:"ownedChannelEmoteSets",padding:1,position:_._8.Relative},a.createElement(k.a,{emoteSet:this.state.filteredOwnedChannelEmoteSets[0],onClickEmote:this.props.onClickEmote,locked:!1}))),t=t.concat(this.state.filteredAvailableUpsells.map(function(t){return a.createElement(_._1,{className:"emote-picker__content-block",key:"planUpsell:"+t.level,padding:1,position:_._8.Relative},a.createElement(E,{plan:t,subscribeTexts:e.props.subscribeTexts,reportSubAction:e.props.reportSubAction}))}))):t=this.state.filteredAllEmoteSets.map(function(t){return a.createElement(_._1,{key:"emoteGrid"+t.id,position:_._8.Relative,padding:{top:1,bottom:2},className:"emote-picker__content-block"},a.createElement(k.a,{emoteSet:t,onClickEmote:e.props.onClickEmote,locked:!1}))}),t.length>0?a.createElement(b.b,{className:"emote-picker__tab-content"},a.createElement(_._1,{padding:1},t)):null},t.prototype.filterEmoteSet=function(e,t){return e.filter(function(e){return e.token.toLowerCase().includes(t)})},t.prototype.setChannelTabSelected=function(e){this.setState({channelTabSelected:e})},t.prototype.filterEmoteSets=function(e,t){for(var n=[],i=0,a=e;i<a.length;i++){var r=a[i],s=this.filterEmoteSet(r.emotes,t);s.length>0&&n.push({id:r.id,emotes:s})}return n},t.prototype.filterAvailableUpsells=function(e,t){for(var n=[],a=0,r=e;a<r.length;a++){var s=r[a];if(s.emotes){var o=this.filterEmoteSet(s.emotes,t);o.length>0&&n.push(i.__assign({},s,{emotes:o}))}}return n},t}(a.Component)),w=n("LYwx"),T=function(e){function t(t){var n=e.call(this,t)||this;n.trackSubEvent=function(e){Object(g.b)(i.__assign({},e,{action:g.a.ClickCheckout,channelID:n.props.channelData&&n.props.channelData.user&&n.props.channelData.user.id||"",channelLogin:n.props.channelData&&n.props.channelData.user&&n.props.channelData.user.displayName||"",isMenuOpen:null,hasSubCredit:null,sub_location:"emote_picker",modal:!1,showPrimeContent:!0,giftRecipient:null}))};var a={allEmoteSets:[],availableUpsells:[],channelTabVisible:!1,gqlError:t.emoteSetsData&&!!t.emoteSetsData.error||t.channelData&&!!t.channelData.error||!1,gqlLoading:t.emoteSetsData&&!!t.emoteSetsData.loading||t.channelData&&!!t.channelData.loading||!1,subscribeTexts:[],ownedChannelEmoteSets:[],ownedSetIDs:new Set([])};return a=n.applyDataPropsToState(t,a),n.state=i.__assign({},a),n}return i.__extends(t,e),t.prototype.componentDidMount=function(){this.checkDataLoaded(this.props)&&(this.props.onLoad&&this.props.onLoad(this.checkForContent(this.props)),this.props.latencyTracking.reportInteractive())},t.prototype.componentWillReceiveProps=function(e){if(e.emoteSetsData&&e.emoteSetsData.error||e.channelData&&e.channelData.error)this.setState({gqlError:!0});else{var t=this.applyDataPropsToState(e,this.state);this.props.pubsub.messages.subscriptionInfo!==e.pubsub.messages.subscriptionInfo&&(this.props.channelData&&this.props.channelData.refetch(),this.props.emoteSetsData&&this.props.emoteSetsData.refetch()),this.checkDataLoaded(e)&&(e.latencyTracking.reportInteractive(),e.onLoad&&e.onLoad(this.checkForContent(e)),t.gqlLoading=!1),this.setState(i.__assign({},t,{gqlError:!1}))}},t.prototype.render=function(){return this.props.visible?a.createElement(N,{allEmoteSets:this.state.allEmoteSets,availableUpsells:this.state.availableUpsells,channelTabVisible:this.state.channelTabVisible,gqlError:this.state.gqlError,loading:this.state.gqlLoading,onClickEmote:this.props.onClickEmote,ownedChannelEmoteSets:this.state.ownedChannelEmoteSets,toggleVisibility:this.props.toggleVisibility,subscribeTexts:this.state.subscribeTexts,reportSubAction:this.trackSubEvent,direction:this.props.direction,size:this.props.size}):null},t.prototype.checkDataLoaded=function(e){var t=!e.channelOwnerID||e.channelData&&!e.channelData.loading,n=!e.isLoggedIn||e.emoteSetsData&&!e.emoteSetsData.loading;return t&&n},t.prototype.checkForContent=function(e){var t=e.emoteSetsData&&e.emoteSetsData.emoteSets&&e.emoteSetsData.emoteSets.length>0||!1,n=e.channelData&&e.channelData.user&&e.channelData.user.subscriptionProducts.filter(this.subscriptionProductHasEmotes).length>0||!1;return t||n},t.prototype.applyDataPropsToState=function(e,t){var n=i.__assign({},t);return e.emoteSetsData&&e.emoteSetsData.emoteSets&&(n.ownedSetIDs=new Set(e.emoteSetsData.emoteSets.map(function(e){return parseInt(e.id,10)})),n.allEmoteSets=Object(u.a)(e.emoteSetsData.emoteSets)),e.channelData&&e.channelData.user&&(n.availableUpsells=function(e,t){var n=[];return t.forEach(function(t,a){t.emotes&&t.emotes.length&&t.emoteSetID&&!e.has(parseInt(t.emoteSetID,10))&&n.push(i.__assign({},t,{emotes:Object(u.b)(t.emotes),level:a,price:m[a]}))}),n}(n.ownedSetIDs,e.channelData.user.subscriptionProducts),n.subscribeTexts=function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];0===n&&i.emotes&&i.emotes.length>1?t[n]=Object(p.d)("Unlock {numEmotes, number} Sub Emotes",{numEmotes:i.emotes.length},"assembleSubscribeTexts"):0===n?t[n]=Object(p.d)("Unlock 1 Sub Emote","assembleSubscribeTexts"):i.emotes&&i.emotes.length>1?t[n]=Object(p.d)("{numEmotes, number} Extra {price} Sub Emotes",{numEmotes:i.emotes.length,price:m[n]},"assembleSubscribeTexts"):i.emotes&&i.emotes.length&&(t[n]=Object(p.d)("1 Extra ${price, number} Sub Emote",{price:m[n]},"assembleSubscribeTexts"))}return t}(e.channelData.user.subscriptionProducts),n.ownedChannelEmoteSets=function(e,t){for(var n=[{id:"0",emotes:[]}],i=0,a=t;i<a.length;i++){var r=a[i];r.emotes&&r.emoteSetID&&e.has(parseInt(r.emoteSetID,10))&&(n[0].emotes=n[0].emotes.concat(Object(u.b)(r.emotes)))}return n[0].emotes.length?n:[]}(n.ownedSetIDs,e.channelData.user.subscriptionProducts)),n.channelTabVisible=e.channelData&&e.channelData.user&&e.channelData.user.subscriptionProducts.filter(this.subscriptionProductHasEmotes).length>0||!1,n},t.prototype.subscriptionProductHasEmotes=function(e){return void 0!==e.emoteSetID&&!!e.emotes&&e.emotes.length>0},t}(a.Component),D=Object(r.compose)(Object(s.b)(function(e){return{currentUserID:e.session.user&&e.session.user.id,isLoggedIn:Object(d.d)(e)}}),Object(o.a)(w,{name:"channelData",skip:function(e){return!e.channelOwnerID},options:function(e){return{variables:{channelOwnerID:e.channelOwnerID}}}}),Object(l.a)([{topic:function(e){return"user-subscribe-events-v1."+e.currentUserID},mapMessageTypesToProps:{"*":"subscriptionInfo"},skip:function(e){return!e.currentUserID}}]),Object(h.d)("EmotePicker"),Object(c.a)())(T);n.d(t,"a",function(){return D})},P0T5:function(e,t,n){"use strict";function i(e){d.n.tracking.track(u.SpadeEventType.WhisperThreadMod,{conversation_id:e.threadID,action:e.action})}function a(e){return c.__awaiter(this,void 0,void 0,function(){var t;return c.__generator(this,function(n){switch(n.label){case 0:return[4,o()];case 1:return t=n.sent(),d.n.tracking.track(u.SpadeEventType.WhisperIgnoreUser,{ui_context:e.context,from_login:t&&t.login,ignored_login:e.targetUserLogin,reason:e.reason||l.Other,source:e.source}),[2]}})})}function r(e,t){return c.__awaiter(this,void 0,void 0,function(){var n;return c.__generator(this,function(i){switch(i.label){case 0:return[4,o()];case 1:return n=i.sent(),d.n.tracking.track(u.SpadeEventType.WhisperThreadMod,{conversation_id:e,action:t,login:n&&n.login}),[2]}})})}function s(e){d.n.tracking.track(u.SpadeEventType.WhisperAllThreadsMod,{action:e})}function o(){var e=this;return new Promise(function(t){setTimeout(function(){return c.__awaiter(e,void 0,void 0,function(){var e,n,i;return c.__generator(this,function(a){switch(a.label){case 0:e=null,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,d.n.apollo.client.query({query:p})];case 2:return e=a.sent(),[3,4];case 3:return n=a.sent(),d.i.error(n,"Failed to make query for current user info in WhisperSent reporting"),[3,4];case 4:return i=e&&e.data&&e.data.currentUser,t(i),[2]}})})})})}n.d(t,"a",function(){return g}),t.j=function(){s(m.MarkAllRead)},t.h=function(){s(m.EnableDoNotDisturb)},t.g=function(){s(m.DisableDoNotDisturb)},t.l=function(e,t){a({context:t,targetUserLogin:e,reason:l.Spam,source:"conversations_button"})},t.o=function(e){r(e,f.MarkNotSpam)},t.n=function(e){r(e,f.Archive)},t.k=function(e){i({threadID:e,action:h.Mute})},t.m=function(e){i({threadID:e,action:h.Unmute})},t.i=function(e){i({threadID:e,action:h.Expand})},t.e=function(e){i({threadID:e,action:h.Collapse})},t.d=function(e){i({threadID:e,action:h.Close})},t.b=function(e){i({threadID:e,action:h.Archive})},t.f=function(e){d.n.tracking.track(u.SpadeEventType.WhisperThreadCreate,{conversation_id:e.threadID,target_login:e.targetUserlogin,source:"search_target_result",search_result_rank:e.searchResultRank})},t.c=function(e){d.n.tracking.track(u.SpadeEventType.WhisperSearchClick,{query:e.searchQuery,source:"conversation_list",rank:e.searchResultRank,is_conversation:e.isConversation})},t.q=function(e){return c.__awaiter(this,void 0,void 0,function(){var t;return c.__generator(this,function(n){switch(n.label){case 0:return[4,o()];case 1:return t=n.sent(),d.n.tracking.track(u.SpadeEventType.WhisperSent,{to:e.targetUserLogin,from:t&&t.login,player:"web",is_turbo:t&&t.hasTurbo,conversation_id:e.threadID,availability:t&&t.availability}),[2]}})})},t.p=function(e){return c.__awaiter(this,void 0,void 0,function(){var t;return c.__generator(this,function(n){switch(n.label){case 0:return[4,o()];case 1:return t=n.sent(),d.n.tracking.track(u.SpadeEventType.WhisperReceived,{to:t&&t.login,from:e.targetUserLogin,player:"web",is_turbo:t&&t.hasTurbo,conversation_id:e.threadID}),[2]}})})};var l,c=n("TToO"),d=n("6sO2"),u=n("vH/s"),p=n("yDSg");n.n(p);!function(e){e.Harassment="Harassment",e.Spam="Spam",e.Other="Other"}(l||(l={}));var m;!function(e){e.MarkAllRead="mark_all_read",e.EnableDoNotDisturb="do_not_disturb_on",e.DisableDoNotDisturb="do_not_disturb_off"}(m||(m={}));var h;!function(e){e.Mute="mute",e.Unmute="unmute",e.Expand="maximize",e.Collapse="minimize",e.Close="close",e.Archive="archive",e.Open="open"}(h||(h={}));var g;!function(e){e.Dock="dock",e.SpamPropmt="dock_spam_cta"}(g||(g={}));var f;!function(e){e.Archive="archive",e.MarkNotSpam="mark_not_spam"}(f||(f={}))},PJOa:function(e,t){},PK6A:function(e,t){},PPK2:function(e,t){},PqoY:function(e,t){},QCOJ:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={Embed:"embed",Web:"web"}},QFW6:function(e,t,n){"use strict";var i,a=n("TToO"),r=n("6sO2"),s=n("vH/s");!function(e){e.Everyone="everyone",e.ModsOnly="mod",e.StreamChat="twitch_chat",e.SubsOnly="sub"}(i||(i={}));var o=n("gGMi");n.d(t,"a",function(){return l}),n.d(t,"b",function(){return c}),n.d(t,"c",function(){return d});var l=function(e){var t;switch(e.roomMinimumRole){case o.b.Everyone:t=i.Everyone;break;case o.b.Moderator:t=i.ModsOnly;break;case o.b.Subscriber:t=i.SubsOnly;break;default:t=i.StreamChat}var n={channel:e.channelLogin,chatroom_type:t,is_host_mode:e.isHostMode,is_using_web_sockets:!0};return e.roomID&&(n.chatroom_id=e.roomID),n},c=function(e){r.m.track(s.SpadeEventType.ChatRoomJoined,l(e))},d=function(e){r.m.track(s.SpadeEventType.ChatRoomWatched,a.__assign({},l(e),{channel_id:e.channelID,client_time:Math.floor(e.clientTime/1e3)}))}},"QKs+":function(e,t,n){"use strict";t.a=function(){return Object(i.a)(a,{props:function(e){return e.data&&!e.data.loading&&!e.data.error&&e.data.currentUser&&e.data.currentUser.blockedUsers?{blockedUsers:e.data.currentUser.blockedUsers.reduce(function(e,t){return t&&t.id&&e.push(t.id),e},[])}:{blockedUsers:[]}},skip:function(e){return!(e.isLoggedIn||e.authToken)}})};var i=n("7vx8"),a=n("vKYs");n.n(a)},QMHY:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChatRoom_AutohostPrompt"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"70"}}],directives:[]}]}}]}}],loc:{start:0,end:135}};n.loc.source={body:"query ChatRoom_AutohostPrompt($login: String!) {\ncurrentUser {\nid\n}\nuser(login: $login) {\nid\ndisplayName\nprofileImageURL(width: 70)\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},QNxL:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SharePurchaseTokenInChat"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"SharePurchaseTokenInChatInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sharePurchaseTokenInChat"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:125}};n.loc.source={body:"mutation SharePurchaseTokenInChat($input:SharePurchaseTokenInChatInput!) {\nsharePurchaseTokenInChat(input:$input) {\ntoken\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},QPF3:function(e,t,n){"use strict";t.a=function(){if(i.b)return+window.getComputedStyle(i.b).getPropertyValue("width").replace("px","");return 0};var i=n("1Mw/")},QRuM:function(e,t,n){"use strict";var i,a=n("TToO"),r=n("U7vG"),s=n("6sO2");!function(e){e.On="on",e.Off="off",e.StaffOnly="staff"}(i||(i={}));var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.render=function(){var e=s.b.get(this.props.name,i.Off);return e===i.On||e===i.StaffOnly&&this.props.isStaff?r.Children.only(this.props.children):null},t}(r.Component),l=o;n.d(t,"a",function(){return i}),n.d(t,!1,function(){return o}),n.d(t,"b",function(){return l})},"QU+n":function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"badge"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Badge"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"version"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"image1x"},name:{kind:"Name",value:"imageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"EnumValue",value:"NORMAL"}}],directives:[]},{kind:"Field",alias:{kind:"Name",value:"image2x"},name:{kind:"Name",value:"imageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"EnumValue",value:"DOUBLE"}}],directives:[]},{kind:"Field",alias:{kind:"Name",value:"image4x"},name:{kind:"Name",value:"imageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"EnumValue",value:"QUADRUPLE"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"clickAction"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"clickURL"},arguments:[],directives:[]}]}}],loc:{start:0,end:170}};n.loc.source={body:"fragment badge on Badge {\nid\nsetID\nversion\ntitle\nimage1x: imageURL(size: NORMAL)\nimage2x: imageURL(size: DOUBLE)\nimage4x: imageURL(size: QUADRUPLE)\nclickAction\nclickURL\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"QgG+":function(e,t){},QsiC:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PinnedCheer_Cheers"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"channelID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cheer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"top"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"chatMessage"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"recent"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"chatMessage"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"recentTimeoutMs"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"settings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isRecentEnabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isTopEnabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"recentTimeoutMs"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:275}};i.loc.source={body:'#import "twilight/features/chat/models/chat-message-fragment.gql"\nquery PinnedCheer_Cheers($channelID: ID!) {\nuser(id: $channelID) {\nid\ncheer {\nid\ntop {\n...chatMessage\n}\nrecent {\n...chatMessage\n}\nrecentTimeoutMs\nsettings {\nisRecentEnabled\nisTopEnabled\nrecentTimeoutMs\n}\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(function(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})}(n("Mful").definitions)),e.exports=i},R9op:function(e,t,n){"use strict";t.a=function(e,t){return e.chat&&e.chat.messages?e.chat.messages[t]||[]:[]},t.b=function(e){var t=[];if(e.chat&&e.chat.commandHandlers)for(var n in e.chat.commandHandlers)e.chat.commandHandlers[n]&&t.push(n);return t.sort()};var i=n("TToO"),a=n("LIeg"),r=(n.n(a),n("6sO2")),s=n("vh75"),o=n("UzRK"),l=n("VsL1");r.n.store.registerReducer("chat",function(e,t){switch(void 0===e&&(e=function(){var e=Object(l.a)();return i.__assign({},e,{commandHandlers:{},emoteSets:[],followerDuration:o.a,followerMode:!1,isHidden:!1,messages:{},slowMode:!1,subsOnlyMode:!1})}()),t.type){case s.b:return i.__assign({},e,{isHidden:!0});case s.c:return i.__assign({},e,{emoteSets:[],messages:{}});case s.d:return i.__assign({},e,{isHidden:!1});case s.e:return i.__assign({},e,{emoteSets:t.emoteSets});case s.f:return i.__assign({},e,{followerMode:!1});case s.g:return i.__assign({},e,{followerDuration:t.duration});case s.h:return i.__assign({},e,{lastUsedFollowerDurations:i.__assign({},e.lastUsedFollowerDurations,(n={},n[t.channelLogin]=t.duration,n))});case s.i:return i.__assign({},e,{followerMode:!0});case s.j:return a(e,function(e){return e.messages},function(e){return e[t.channel]=t.messages.slice(),e});case s.k:return i.__assign({},e,{showModIcons:!1});case s.l:return i.__assign({},e,{showModIcons:!0});case s.n:return i.__assign({},e,{slowMode:!1});case s.o:return i.__assign({},e,{slowMode:!0});case s.p:return i.__assign({},e,{subsOnlyMode:!1});case s.q:return i.__assign({},e,{subsOnlyMode:!0});case s.r:return i.__assign({},e,{showTimestamps:!1});case s.s:return i.__assign({},e,{showTimestamps:!0});case s.a:return a(e,function(e){return e.commandHandlers},function(e){return e[t.command]=t.handler,e});case s.m:return a(e,function(e){return e.commandHandlers},function(e){return delete e[t.command],e});default:return e}var n})},RbGx:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("U7vG"),a=(n.n(i),n("mbxv")),r=function(e){var t=e.badgesToRender,n=e.badgeSets,r=[];!function(e){return Array.isArray(e)}(t)?function(e){return!Array.isArray(e)}(t)&&(r=Object.keys(t).map(function(e){var r=t[e],s=n.getBadge(e,r);return null===s?null:i.createElement(a.a,{key:s.setID+"/"+s.version,badge:s})})):r=t.map(function(e){var t=n.getBadge(e.setID,e.version);return null===t?null:i.createElement(a.a,{key:t.setID+"/"+t.version,badge:t})});var s=r.filter(function(e){return null!==e});return i.createElement("span",null,s)}},RkXA:function(e,t){},RweG:function(e,t,n){"use strict";function i(e){return function(t){return function(n){function i(t){var i=n.call(this,t)||this;i.unsubscribers={};var a={};return e.map(function(e){e.skip&&e.skip(t)||(a[i.getTopic(e.topic,t)]={isSubscribing:!0})}),i.state={status:a,messages:{}},i}return a.__extends(i,n),i.prototype.componentDidMount=function(){var t=this;e.map(function(e){if(!e.skip||!e.skip(t.props)){var n=t.getTopic(e.topic,t.props);t.unsubscribers[n]=s.j.subscribe({topic:n,success:function(){t.setState(function(e){return{status:a.__assign({},e.status,(t={},t[n]={isSubscribing:!1},t))};var t})},failure:function(e){t.setState(function(t){return{status:a.__assign({},t.status,(i={},i[n]={error:e,isSubscribing:!1},i))};var i})},onMessage:function(n){e.mapMessageTypesToProps[n.type||""]?t.setState(function(t){return{messages:a.__assign({},t.messages,(i={},i[e.mapMessageTypesToProps[n.type||""]]=n,i))};var i}):e.mapMessageTypesToProps["*"]&&t.setState(function(t){return{messages:a.__assign({},t.messages,(i={},i[e.mapMessageTypesToProps["*"]]=n,i))};var i})}})}})},i.prototype.componentWillReceiveProps=function(t){var n=this,i={},r={};e.forEach(function(e){if(!e.skip||!e.skip(t)){var o=n.getTopic(e.topic,t);i[o]||(i[o]={isSubscribing:!0}),n.unsubscribers[o]?r[o]=n.unsubscribers[o]:r[o]=s.j.subscribe({topic:o,success:function(){n.setState(function(e){return{status:a.__assign({},e.status,(t={},t[o]={isSubscribing:!1},t))};var t})},failure:function(e){n.setState(function(t){return{status:a.__assign({},t.status,(n={},n[o]={error:e,isSubscribing:!1},n))};var n})},onMessage:function(t){e.mapMessageTypesToProps[t.type||""]?n.setState(function(n){return{messages:a.__assign({},n.messages,(i={},i[e.mapMessageTypesToProps[t.type||""]]=t,i))};var i}):e.mapMessageTypesToProps["*"]&&n.setState(function(n){return{messages:a.__assign({},n.messages,(i={},i[e.mapMessageTypesToProps["*"]]=t,i))};var i})}})}}),Object.keys(this.unsubscribers).forEach(function(e){r[e]||n.unsubscribers[e]()}),this.unsubscribers=r,this.setState(function(e){return{status:a.__assign({},e.status,i)}})},i.prototype.componentWillUnmount=function(){var e=this;Object.keys(this.unsubscribers).map(function(t){return e.unsubscribers[t]()})},i.prototype.render=function(){var e={pubsub:{messages:this.state.messages,status:this.state.status}};return r.createElement(t,a.__assign({},this.props,e))},i.prototype.getTopic=function(e,t){return"string"==typeof e?e:e(t)},i}(r.Component)}}var a=n("TToO"),r=n("U7vG"),s=n("6sO2");n.d(t,"a",function(){return i})},S20p:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Chat_ShareResub_ChannelData"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"resubNotification"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"months"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:142}};n.loc.source={body:"query Chat_ShareResub_ChannelData($channelLogin: String!) {\nuser(login: $channelLogin) {\nid\nself {\nresubNotification {\nid\nmonths\ntoken\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},SX5d:function(e,t){},SZoP:function(e,t,n){"use strict";function i(e){return r.test(e)}n.d(t,"a",function(){return s}),t.b=i;var a=n("U7vG"),r=(n.n(a),/^[\x00-\x7F]*$/),s=function(e,t,n){return void 0===n&&(n=!1),t&&e&&!i(t)?n?t+" ("+e+")":a.createElement("span",null,t," ",a.createElement("span",{className:"intl-login"},"("+e+")")):t||(e||"")}},TVUY:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"currentUser"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"availability"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"activity"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Watching"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Streaming"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"stream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Playing"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:204}};n.loc.source={body:"fragment currentUser on User {\nid\nlogin\ndisplayName\navailability\nactivity {\ntype\n... on Watching {\nuser {\ndisplayName\n}\n}\n... on Streaming {\nstream {\ngame {\nname\n}\n}\n}\n... on Playing {\ngame {\nname\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"Ti/Y":function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DismissNewChatterToken"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"DismissRitualTokenInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"dismissRitualToken"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ritualToken"},directives:[]}]}}]}}]}}],loc:{start:0,end:185}};i.loc.source={body:'#import "./ritual-token-fragment.gql"\nmutation DismissNewChatterToken($input: DismissRitualTokenInput!) {\ndismissRitualToken(input: $input) {\nerror {\ncode\n}\ntoken {\n...ritualToken\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(function(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})}(n("j/3B").definitions)),e.exports=i},TlYw:function(e,t){},TnJK:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={DarkMode:"darkMode",FollowerDuration:"followerDuration",FollowerMode:"followerMode",HideChat:"hideChat",ShowMessageFlags:"showMessageFlags",ShowModActions:"showModerationActions",ShowModIcons:"showModIcons",ShowTimestamps:"showTimestamps",SlowMode:"slowMode"}},Tur5:function(e,t,n){"use strict";var i=n("bgpf");n.d(t,"RitualTokenMutationErrors",function(){return i.a}),n.d(t,"RitualTokenStatus",function(){return i.b}),n.d(t,"RitualTokenType",function(){return i.c});var a=n("AQmT"),r=(n.n(a),n("xfb5")),s=(n.n(r),n("6vcJ"));n.n(s)},Tzcg:function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"c",function(){return d}),n.d(t,"a",function(){return p}),n.d(t,"e",function(){return h}),n.d(t,"d",function(){return g});var i=n("TToO"),a=n("Bir6"),r=n("nEoF"),s={"^B-?\\)$":"B)","^:-?[z|Z|\\|]$":":|","^:-?\\)$":":)","^:-?\\($":":(","^:-?(p|P)$":":P","^;-?(p|P)$":";P","^:-?[\\\\/]$":":/","^;-?\\)$":";)","^R-?\\)$":"R)","^:>$":":>","^[oO](_|\\.)[oO]$":"O_o","^:-?D$":":D","^:-?(o|O)$":":O","^>\\($":">(","^:-?(?:7|L)$":":7","^:-?(S|s)$":":S","^#-?[\\\\/]$":"#/","^<\\]$":"<]","^<3$":"<3","^&lt;3$":"<3","^&lt;\\]$":"<]","^&gt;\\($":">("},o=["1.0","2.0","3.0"],l=new Set([457,33,42,0]),c=function(e){return e.map(function(e){var t=m(e.token),n=s[t]||t,a=o.reduce(function(t,n){var i=t.concat("https://static-cdn.jtvnw.net/emoticons/v1/"+e.id+"/"+n+" "+n+"x");return"3.0"!==n&&(i=i.concat(", ")),i},"");return i.__assign({displayName:n,srcSet:a},e)})},d=function(e){var t=m(e);return s[t]||t},u=function(e){return e.slice().sort(function(e,t){return parseInt(e.id,10)-parseInt(t.id,10)})},p=function(e){for(var t=[],n=[],i=0,a=e;i<a.length;i++){var r=a[i];l.has(parseInt(r.id,10))?t.push({id:r.id,emotes:c(u(r.emotes))}):n.push({id:r.id,emotes:c(u(r.emotes))})}return n.concat(t)},m=function(e){if(!function(e){return/[\|\\\^\$\*\+\?\:\#]/.test(e)}(e))return e;return"^"+e.replace(/\\(?=[&;:])/g,"")+"$"},h=function(e,t){var n=r.b,i=[],s=[],o=[],l=new RegExp("^"+Object(a.a)(t),"i");return e.forEach(function(e){n[e.token]?o.push(e):e.token.match(l)?i.push(e):s.push(e)}),i.sort(function(e,t){return e.token<t.token?-1:e.token>t.token?1:0}),s.sort(function(e,t){return e.token<t.token?-1:e.token>t.token?1:0}),o.sort(function(e,t){return n[t.token].count-n[e.token].count}),o.concat(i).concat(s)},g=function(e){var t={};return e.filter(function(e){return!t.hasOwnProperty(e.token)&&(t[e.token]=!0)})}},UMQJ:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"RaidNotification_Channels"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"sourceChannelID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetChannelID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"sourceChannel"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"sourceChannelID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"70"}}],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"targetChannel"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"targetChannelID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"70"}}],directives:[]}]}}]}}],loc:{start:0,end:268}};n.loc.source={body:"query RaidNotification_Channels($sourceChannelID: ID! $targetChannelID: ID!) {\nsourceChannel: user(id: $sourceChannelID) {\nid\nlogin\ndisplayName\nprofileImageURL(width: 70)\n}\ntargetChannel: user(id: $targetChannelID) {\nid\nlogin\ndisplayName\nprofileImageURL(width: 70)\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},Umoc:function(e,t,n){"use strict";n.d(t,"b",function(){return l}),n.d(t,"a",function(){return c}),n.d(t,"c",function(){return d});var i=n("TToO"),a=n("6sO2"),r=n("vH/s"),s=n("TnJK"),o=n("QFW6"),l=function(e){a.m.track(r.SpadeEventType.ChatSettingsOpened,Object(o.a)(e))},c=function(e){var t=i.__assign({},Object(o.a)(e),{setting_name:e.settingName,new_value:e.newValue.toString()});a.m.track(r.SpadeEventType.ChatSettingsChanged,t)},d=function(e){var t=i.__assign({},Object(o.a)(e),{setting_name:s.a.FollowerDuration,new_value:e.newValue.toString(),follower_mode_on:e.followerModeOn});a.m.track(r.SpadeEventType.ChatSettingsChanged,t)}},UzRK:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r}),t.c=function(e){switch(e){case 0:return Object(i.d)("0 minutes (Any followers)","FollowersOnlyLabel");case 10:return Object(i.d)("10 minutes (Most used)","FollowersOnlyLabel");case 30:return Object(i.d)("30 minutes","FollowersOnlyLabel");case 60:return Object(i.d)("1 hour","FollowersOnlyLabel");case 1440:return Object(i.d)("1 day","FollowersOnlyLabel");case 10080:return Object(i.d)("1 week","FollowersOnlyLabel");case 43200:return Object(i.d)("1 month","FollowersOnlyLabel");case 129600:return Object(i.d)("3 months","FollowersOnlyLabel");default:return i.i.warn("[FollowersOnlyLabel] Tried to generate a label for a non-preset.",e),""}},t.d=function(e){switch(e){case 0:return Object(i.d)("0 min","FollowersOnlyShorthand");case 10:return Object(i.d)("10 min","FollowersOnlyShorthand");case 30:return Object(i.d)("30 min","FollowersOnlyShorthand");case 60:return Object(i.d)("1 hr","FollowersOnlyShorthand");case 1440:return Object(i.d)("1 day","FollowersOnlyShorthand");case 10080:return Object(i.d)("1 wk","FollowersOnlyShorthand");case 43200:return Object(i.d)("1 mo","FollowersOnlyShorthand");case 129600:return Object(i.d)("3 mo","FollowersOnlyShorthand");default:return Object(i.d)("custom","FollowersOnlyShorthand")}};var i=n("6sO2"),a=30,r=[0,10,30,60,1440,10080,43200,129600]},"VB5+":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("TToO"),a=n("6sO2"),r=n("vH/s"),s=n("QFW6"),o=function(e){var t=i.__assign({},Object(s.a)(e),{mentioned_user_display_name:e.mentionedUserDisplayName,user:e.userLogin});a.m.track(r.SpadeEventType.ChatMentionUsed,t)}},VSa1:function(e,t){},Vaxm:function(e,t){},VkpB:function(e,t){},VsL1:function(e,t,n){"use strict";function i(){var e=r.k.get(o,{});return a.__assign({lastUsedFollowerDurations:{},showAutoModActions:!0,showMessageFlags:!0,showModerationActions:!0,showModIcons:!1,showTimestamps:!1,zachModeStatus:s},e)}var a=n("TToO"),r=n("6sO2"),s="control";t.a=i,t.b=function(e,t){var n=i();n[e]=t,r.k.set(o,n)},t.c=function(e,t){var n=i();n.lastUsedFollowerDurations[e]=t,r.k.set(o,n)};var o="chatSettings"},W266:function(e,t){},WIs4:function(e,t,n){"use strict";function i(e){return function(t){return function(n){function i(t){var i=n.call(this,t)||this;return i.mutator=function(e,t){return i.options.mutator(e,t)},i.typesChanged=function(e){if(e.types&&!i.options.types||!e.types&&i.options.types)return!0;if(e.types&&i.options.types){if(e.types.length!==i.options.types.length)return!0;var t=new Set(i.options.types);return e.types.some(function(e){return!t.has(e)})}return!1},i.options=e(t),i}return a.__extends(i,n),i.prototype.componentDidMount=function(){this.options.skip||this.subscribe(this.options)},i.prototype.componentWillReceiveProps=function(t){var n=e(t);n.skip!==this.options.skip&&(n.skip?this.unsubscribe():this.subscribe(n)),n.skip||(n.topic!==this.options.topic||n.type!==this.options.type||this.typesChanged(n))&&(this.unsubscribe(),this.subscribe(n)),this.options=n},i.prototype.componentWillUnmount=function(){this.unsubscribe()},i.prototype.render=function(){return r.createElement(t,a.__assign({},this.props))},i.prototype.subscribe=function(e){this.unsubscriber=Object(s.n)({query:e.query,variables:e.variables,topic:e.topic,type:e.type,types:e.types,mutator:this.mutator,skipMessage:e.skipMessage})},i.prototype.unsubscribe=function(){this.unsubscriber&&(this.unsubscriber(),this.unsubscriber=null)},i}(r.Component)}}var a=n("TToO"),r=n("U7vG"),s=n("HZww");n.d(t,"a",function(){return i})},WVx7:function(e,t,n){"use strict";function i(e){return u.__awaiter(this,void 0,void 0,function(){var t,n,i,a,r;return u.__generator(this,function(s){switch(s.label){case 0:if(t=h.b.get("bits_truex_partner_hash",""),!(n=h.b.get("bits_truex_api_url",""))||!t)return h.i.warn("Truex API info missing from dynamic settings"),[2,v.Error];s.label=1;case 1:return s.trys.push([1,5,,6]),[4,fetch(n+"?placement.key="+t+"&user.uid="+e+"&max_activities=1")];case 2:return(i=s.sent()).ok?[4,i.json()]:[3,4];case 3:if((a=s.sent())&&Array.isArray(a)&&a.length)return[2,v.Available];s.label=4;case 4:return[2,v.Unavailable];case 5:return r=s.sent(),h.i.warn("Failed checking ad availability from TrueX, probably due to AdBlock",r),[2,v.AdBlocked];case 6:return[2]}})})}function a(e){return{adModalOpen:Object(c.b)(e,E),isLoggedIn:Object(d.d)(e)}}function r(e){return{showWatchAdModal:function(t){return e(Object(l.d)(E,t))}}}var s,o=n("RH2O"),l=n("V5M+"),c=n("Iw4B"),d=n("Aj/L"),u=n("TToO"),p=n("U7vG"),m=n("2KeS"),h=n("6sO2"),g=n("+8VM"),f=n("7vx8"),b=n("oIkB");!function(e){e[e.ExitEarly=0]="ExitEarly",e[e.Unknown=1]="Unknown",e[e.Adblock=2]="Adblock",e[e.LimitReached=3]="LimitReached"}(s||(s={}));var v,k=n("4JjK"),y=n("/LBW"),_=n("Odds"),C=n("zzpv"),S=(n("x583"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.hasAwarded=!1,t.messageHandler=function(e){return u.__awaiter(t,void 0,void 0,function(){var t,n,i,a,r;return u.__generator(this,function(o){switch(o.label){case 0:if(e.origin!==window.location.origin)return[2];if(!(t=e.data)||"trueXAd"!==t.msgSrc)return[2];switch(t.type){case k.a.Ready:return[3,1];case k.a.RequestAd:return[3,2];case k.a.Dimensions:return[3,3];case k.a.OnStart:return[3,4];case k.a.OnCredit:return[3,5];case k.a.OnClose:case k.a.OnFinish:case k.a.LimitReached:case k.a.Adblock:case k.a.OnError:return[3,9]}return[3,10];case 1:return n={msgSrc:"wateb-ad-modal",tuid:this.props.tuid},e.source.postMessage(n,"*"),[2];case 2:try{if(!(i=JSON.parse(t.activityJSON)))return[2];Object(y.g)({campaignID:i.campaign_id.toString(),requestID:t.requestID,requestMethod:this.props.requestRef})}catch(e){}return[2];case 3:return t.height&&t.width&&this.setState({customDimensions:{height:t.height,width:t.width}}),[3,10];case 4:try{if(!(i=JSON.parse(t.activityJSON)))return[2];Object(y.f)({requestID:t.requestID,adblock:!1,campaignID:i.campaign_id.toString()})}catch(e){}return[2];case 5:return o.trys.push([5,7,,8]),[4,this.props.redeemTrueXAd(Object(b.a)({args:t.engagement.signature_argument_string,signature:t.engagement.signature,trueXAd:{creativeID:t.engagement.ad.creative_id,campaignID:t.engagement.ad.campaign_id,name:t.engagement.ad.name,currencyAmount:t.engagement.ad.currency_amount},targetID:this.props.channelID}))];case 6:return a=o.sent(),this.hasAwarded=!0,this.props.onBitsAwarded&&this.props.onBitsAwarded(a.data.redeemTrueXAd.grantedBits),[3,8];case 7:return r=o.sent(),h.i.warn("Error while redeeming bits for truex ad",r),this.props.onError&&this.props.onError(s.Unknown),[3,8];case 8:return[3,10];case 9:return this.props.onError&&(t.type===k.a.LimitReached?this.props.onError(s.LimitReached):t.type===k.a.Adblock?this.props.onError(s.Adblock):t.type===k.a.OnError?this.props.onError(s.Unknown):this.hasAwarded||this.props.onError(s.ExitEarly)),this.props.closeModal(),[3,10];case 10:return[2]}})})},t}return u.__extends(t,e),t.prototype.componentWillMount=function(){window.addEventListener("message",this.messageHandler)},t.prototype.componentWillUnmount=function(){window.removeEventListener("message",this.messageHandler)},t.prototype.render=function(){return p.createElement(_._24,{background:_.m.Base},p.createElement("div",{className:"t-watch-ads-modal",style:this.state.customDimensions},p.createElement(g.a,null),p.createElement("iframe",{src:"/products/bits/ad"})))},t=u.__decorate([Object(f.a)(C,{name:"redeemTrueXAd"})],t)}(p.Component)),E=Object(o.b)(null,function(e){return Object(m.b)({closeModal:l.c},e)})(S),N=n("HW6M"),w=n("3zLD"),T=n("jF7o"),D=n("w9tK"),I=n("zCIC");!function(e){e[e.Error=0]="Error",e[e.AdBlocked=1]="AdBlocked",e[e.Unavailable=2]="Unavailable",e[e.Available=3]="Available"}(v||(v={}));var O,M=function(e){var t=null;return e.disableWatchAd&&(t=Object(h.d)("Try again later","Bits--WatchAdOffer")),p.createElement(_._24,{className:"bits-buy-card__offer-row",display:_.M.Flex,flexShrink:0,borderBottom:!0,justifyContent:_._0.Between,flexWrap:_.P.NoWrap,padding:{x:2,y:1}},p.createElement(_._1,{padding:{right:4}},p.createElement("strong",null,Object(h.d)("Get {minBitsCount} or more Bits by watching short ads",{minBitsCount:e.minPayout},"Bits--WatchAdOffer"))),p.createElement(_._1,{flexShrink:0,display:_.M.Flex,flexDirection:_.O.Column,alignItems:_.c.End},p.createElement(_.u,{type:_.z.Hollow,"data-a-target":"bits-watch-ad",onClick:e.onWatchAdClick,disabled:e.disableWatchAd},Object(h.d)("Watch Ad","Bits--WatchAdOffer")),t&&p.createElement(_._1,{className:"bits-buy-card__sub-text",alignSelf:_.d.Stretch,textAlign:_._35.Center,margin:{top:.5}},t)))},x=/version\/([\w\.]+).+?(mobile\s?safari|safari)/i,R=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={enableWatchAd:!0},t}return u.__extends(t,e),t.prototype.componentWillMount=function(){return u.__awaiter(this,void 0,void 0,function(){var e;return u.__generator(this,function(t){switch(t.label){case 0:return[4,i(this.props.truexUserID)];case 1:return e=t.sent(),Object(y.e)({channel:this.props.channelLogin,channelID:this.props.channelID,available:e===v.Available}),e!==v.Available&&e!==v.AdBlocked&&this.setState({enableWatchAd:!1}),[2]}})})},t.prototype.render=function(){return x.test(navigator.userAgent)?null:p.createElement(M,u.__assign({},this.props,{disableWatchAd:!this.state.enableWatchAd}))},t}(p.Component),L=n("jxGs"),U=n("3iBR"),F=n("iydZ"),j=n("ZJYd"),B=n("CFVp"),A=n("qe65"),P=(n("OLKT"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleBuyClick=function(e){var n=t.props.channelID||"",i=Object(j.b)({trackBitsCardInteraction:t.props.trackBitsCardInteraction,channelID:n,purchaseUrl:e.currentTarget.dataset.purchaseUrl,bitsAmount:e.currentTarget.dataset.bitsAmount,closeAllBits:t.props.closeAllBits,location:t.props.location});i&&(t.props.onBuyPopupClose(i),t.props.onClose())},t}return u.__extends(t,e),t.prototype.render=function(){if(this.props.offer.type===L.a){if(!this.props.channelLogin)return null;var e=this.props.currentUserSHA||"";return p.createElement(R,{key:"wateb",minPayout:this.props.offer.bits,onWatchAdClick:this.props.handleWatchAdClick,truexUserID:e,channelID:this.props.channelID||"",channelLogin:this.props.channelLogin})}var t=null;Object(j.c)(this.props.offer)?t=p.createElement(_._1,{className:"bits-buy-card-offer-row__bonus-text bits-buy-card-offer-row__bonus-text-headline"},p.createElement(_._34,{type:_._39.Strong,fontSize:_.Q.Size6},Object(h.d)("Special Offer: 1st Time Buyers","Bits--BuyCard"))):Object(j.d)(this.props.offer)&&null!==this.props.offer.promotion&&this.props.offer.promotion.id===L.c&&(t=p.createElement(_._1,{className:"bits-buy-card-offer-row__bonus-text bits-buy-card-offer-row__bonus-text-headline"},p.createElement(_._34,{type:_._39.Strong,fontSize:_.Q.Size6},Object(h.d)("Flash Sale: Now thru Nov. 27!","Bits--BuyCard"))));var n=null;this.props.offer.discount&&(n=p.createElement("div",{className:"bits-buy-card-offer-row__sub-text"},Object(h.d)("{percentOff,number,percent} discount",{percentOff:this.props.offer.discount},"Bits--BuyCard")));var i=null;(Object(j.c)(this.props.offer)||Object(j.e)(this.props.offer))&&(i=p.createElement("div",{className:"bits-buy-card-offer-row__sub-text"},Object(h.d)("one per account","Bits--BuyCard")));var a=this.props.isLastRow?_._24:_._1;return p.createElement(a,{className:"bits-buy-card-offer-row",flexShrink:0,display:_.M.Flex,justifyContent:_._0.Center,borderBottom:this.props.isLastRow,flexDirection:_.O.Column,padding:{x:2,y:1}},t,p.createElement(_._1,{display:_.M.Flex,justifyContent:_._0.Between,alignItems:_.c.Center},p.createElement(_._1,{flexGrow:1},p.createElement(_._34,{type:_._39.H5,color:_.I.Base,bold:!0},this.props.offer.bits," Bits"),this.getAvailableTiers(this.props.offer.bits)),p.createElement(_._1,{flexShrink:0,display:_.M.Flex,flexDirection:_.O.Column,alignItems:_.c.End},p.createElement(_.u,{onClick:this.handleBuyClick,"data-purchase-url":this.props.offer.url,"data-bits-amount":this.props.offer.bits,"data-a-target":"bits-purchase-button-"+this.props.offer.bits},this.props.offer.price),(n||i)&&p.createElement(_._1,{alignSelf:_.d.Stretch,textAlign:_._35.Right,margin:{top:.5}},n,i))))},t.prototype.getAvailableTiers=function(e){var t=this.props.bitsConfig.indexedActions[U.g];t||(t=Object(B.b)());var n=t.orderedTiers.filter(function(t){return t.bits<=e}).reverse();return p.createElement(_._1,{padding:{top:.5},className:"bits-buy-card-offer-row__tier-bits-images"},n.map(function(e){return p.createElement(A.a,{key:e.bits,sources:Object(F.b)(e,2,!1)})}))},t}(p.Component)),V=(n("sgUC"),function(e){var t=[],n=[],i=null;return e.offers.forEach(function(a,r){var s=p.createElement(P,{key:a.id,offer:a,isLastRow:r+1<e.offers.length,bitsConfig:e.bitsConfig,channelID:e.channelID,channelLogin:e.channelLogin,currentUserSHA:e.currentUserSHA,location:e.location,onClose:e.onClose,onBuyPopupClose:e.onBuyPopupClose,handleWatchAdClick:e.handleWatchAdClick,closeAllBits:e.closeAllBits,trackBitsCardInteraction:e.trackBitsCardInteraction}),o=Object(j.d)(a),l=Object(j.c)(a),c=a.type===L.a;l&&!e.hidePromos?t.push(s):o&&!l?t.push(s):c&&!e.hideWateb?i=s:c||o||n.push(s)}),e.fullsize?p.createElement(_._1,{className:"bits-buy-card-offers__full-size",flexGrow:1,flexWrap:_.P.NoWrap,display:_.M.Flex,flexDirection:_.O.Column},i,t,n):p.createElement(I.b,{className:"bits-buy-card-offers__scroll-view"},p.createElement(_._1,{flexGrow:1,flexWrap:_.P.NoWrap,display:_.M.Flex,flexDirection:_.O.Column},i,t,n))}),W=function(e){var t=null;e.pricesIncludeVAT&&(t=p.createElement(_._34,{italic:!0,type:_._39.P,color:_.I.Alt},Object(h.d)("Prices include VAT","Bits--BuyCard")));var n=null;e.minBitsToCheer&&e.minBitsToCheer>1&&(n=p.createElement(_._34,{color:_.I.Alt},Object(h.d)("{displayName} requires {minBits} Bits to Cheer in this channel.",{displayName:e.displayName,minBits:e.minBitsToCheer},"Bits--BuyCard")));var i=null;return void 0!==e.bitsBalance&&null!==e.bitsBalance&&(i=p.createElement(_._34,{color:_.I.Alt},Object(h.d)("You have {totalBits} Bits",{totalBits:p.createElement("strong",{"data-a-target":"buy-card-bits-count"},e.bitsBalance)},"Bits--BuyCard"))),p.createElement(_._24,{className:"bits-buy-card-header",padding:{x:1,bottom:1},borderBottom:!0,flexShrink:0},p.createElement(_._1,{margin:{bottom:1}},p.createElement(_._34,{type:_._39.H4,color:_.I.Alt},Object(h.d)("Purchase Bits","Bits--BuyCard")),t),i,n)},H=n("nrdj"),G=function(e){return p.createElement(_._1,{display:_.M.Flex,flexGrow:1,flexDirection:_.O.Column,alignItems:_.c.Center,fullWidth:!0,flexWrap:_.P.NoWrap,padding:{y:1}},p.createElement(H.a,{prefix:"cheer",amount:e.amount,bitsConfig:e.bitsConfig,showAmount:!0,showImage:!0}),p.createElement(_._1,{display:_.M.Flex,padding:{top:1},flexGrow:1,flexDirection:_.O.Column,alignItems:_.c.Center,flexWrap:_.P.NoWrap},p.createElement(_._34,{type:_._39.H4,bold:!0},Object(h.d)("You got {bitsAmount,number} Bits!",{bitsAmount:e.amount},"Bits--WatchAdAward")),p.createElement(_.V,{padding:{top:1}},p.createElement(_._34,{color:_.I.Alt2},Object(h.d)("{bitsAmount,number} Bits were added to your Bit inventory.",{bitsAmount:e.amount},"Bits--WatchAdAward"),p.createElement("br",null),Object(h.d)("You can use these Bits to Cheer!","Bits--WatchAdAward")))),p.createElement(_._1,{display:_.M.Flex,padding:{x:1,top:3},alignSelf:_.d.Stretch,justifyContent:_._0.Between},p.createElement(_.u,{onClick:e.onStartCheering},Object(h.d)("Start Cheering","Bits--WatchAdAward")),p.createElement(_.u,{type:_.z.Hollow,onClick:e.onWatchAnother,disabled:!e.hasAdAvailable},Object(h.d)("Watch Another","Bits--WatchAdAward"))))},q=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={hasAdAvailable:!0},t}return u.__extends(t,e),t.prototype.componentWillMount=function(){return u.__awaiter(this,void 0,void 0,function(){return u.__generator(this,function(e){switch(e.label){case 0:return[4,i(this.props.truexUserID)];case 1:return e.sent()!==v.Available&&this.setState({hasAdAvailable:!1}),[2]}})})},t.prototype.render=function(){return p.createElement(G,u.__assign({},this.props,{hasAdAvailable:this.state.hasAdAvailable}))},t}(p.Component),z=(n("q8Cw"),function(e){var t=Object(h.d)("Something's wrong!","Bits--WatchAdError"),n=Object(h.d)("Something went wrong. Wait a while and try again.","Bits--WatchAdError"),i="adserrorgeneric";switch(e.type){case s.Adblock:i="adserroradblock",n=Object(h.d)("We can't load this Ad, probably because Ad Blocking software is running. To watch an ad and get Bits, please disable all Ad Blocking software.","Bits--WatchAdError");break;case s.LimitReached:i="adserrorlimit",t=Object(h.d)("Ad Limit Reached","Bits--WatchAdError"),n=Object(h.d)("That's all the Ads we have for now. Try again tomorrow!","Bits--WatchAdError");break;case s.ExitEarly:n=Object(h.d)("To get Bits, you must view and interact with the Ad for the minimum amount of time.","Bits--WatchAdError")}var a=p.createElement(_._1,{className:"watch-ad-error__footer",display:_.M.Flex,padding:{top:2},alignSelf:_.d.Stretch,justifyContent:_._0.Center},p.createElement(_.u,{onClick:e.onTryAgain},Object(h.d)("Try Again","Bits--WatchAdError")));return e.type===s.LimitReached&&(a=p.createElement(_._1,{className:"watch-ad-error__footer",display:_.M.Flex,padding:{top:2},alignSelf:_.d.Stretch,justifyContent:_._0.Between},p.createElement(_.u,{onClick:e.onClose},Object(h.d)("Got It","Bits--WatchAdError")),p.createElement(_.u,{onClick:e.onTryAgain,type:_.z.Hollow},Object(h.d)("Buy Bits","Bits--WatchAdError")))),p.createElement(_._1,{padding:{x:1},display:_.M.Flex,flexGrow:1,flexDirection:_.O.Column,alignItems:_.c.Center,fullWidth:!0,flexWrap:_.P.NoWrap},p.createElement(_._1,{padding:{y:2}},p.createElement("img",{className:"watch-ad-error__error-image",src:U.b+"/light/static/1/"+i+".png"})),p.createElement(_._1,{padding:{bottom:1}},p.createElement(_._34,{type:_._39.H4,bold:!0},t)),p.createElement(_._34,{color:_.I.Alt2},n),a)}),Q=n("CSlQ"),$=n("aqNN");n("6Rwu");!function(e){e[e.Inactive=0]="Inactive",e[e.Error=1]="Error",e[e.Awarded=2]="Awarded"}(O||(O={}));var Y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={wateb:O.Inactive,watebError:null,bitsAwarded:0},t.onBuyPopupClose=function(e){Object(T.a)(e,function(){t.props.data&&t.props.data.refetch()})},t.onAdBitsAwarded=function(e){t.props.data&&!t.props.data.loading&&t.props.data.refetch(),t.setState({wateb:O.Awarded,bitsAwarded:e})},t.handleWatchAdClick=function(){return u.__awaiter(t,void 0,void 0,function(){return u.__generator(this,function(e){return this.props.data&&this.props.data.currentUser&&this.props.data.user?(this.props.showWatchAdModal({tuid:this.props.data.currentUser.idSHA1,onBitsAwarded:this.onAdBitsAwarded,onError:this.receiveAdErrorState,requestRef:y.c.ShowAdButton,channelID:this.props.data.user.id}),[2]):[2]})})},t.receiveAdErrorState=function(e){t.setState({wateb:O.Error,watebError:e})},t.resetAdErrorState=function(){t.state.wateb===O.Error&&(t.setState({wateb:O.Inactive}),t.props.data&&t.props.data.refetch())},t}return u.__extends(t,e),t.prototype.shouldComponentUpdate=function(e){return!e.adModalOpen},t.prototype.render=function(){var e={border:!0,background:_.m.Base,fullWidth:!0,elevation:3},t=N({"bits-buy-card":!0,"bits-buy-card__chat-tooltip":this.props.location===y.b.ChatTooltip}),n=null;if(this.props.location===y.b.ChatTooltip&&(n=p.createElement("button",{className:"bits-buy-card__close",onClick:this.props.onClose,"data-a-target":"bits-buy-card-close-button"},p.createElement(_._14,{asset:_._15.Close,height:11,width:11}))),!this.props.data||this.props.data.loading)return p.createElement(_._24,u.__assign({className:t,"data-a-target":"bits-buy-card-loading",display:_.M.Flex,flexDirection:_.O.Column,alignItems:_.c.Center,justifyContent:_._0.Center,textAlign:_._35.Center},e),p.createElement(_._3,{delay:0}),p.createElement(_._1,{padding:{top:2}},p.createElement(_._34,{italic:!0},Object(h.d)("Fetching bits","Bits--BuyCard"))));if(this.props.data.error)return p.createElement(_._1,u.__assign({className:N(t,"bits-buy-card--shorter"),display:_.M.Flex,flexDirection:_.O.Column,alignItems:_.c.Center,justifyContent:_._0.Center,padding:2,textAlign:_._35.Center,"data-a-target":"bits-buy-card-error"},e),n,p.createElement(_._34,{italic:!0},Object(h.d)("Bits prices are unavailable right now. Check back again later.","Bits--BuyCard")));var i=this.renderWatebCard();if(i)return p.createElement(_._24,u.__assign({className:N(t,"bits-buy-card--shorter"),display:_.M.Flex,flexDirection:_.O.Column,alignItems:_.c.Center,justifyContent:_._0.Center,textAlign:_._35.Center,padding:1},e),n,i);var a=[];this.props.data.currentUser?a=this.props.data.currentUser.bitsOffers:this.props.data.bitsOffers&&(a=this.props.data.bitsOffers);var r=a.filter(function(e){return e.type===L.b}).some(function(e){return e.includesVAT}),s=this.props.data.user?this.props.data.user.id:"",o=p.createElement(V,{offers:a,fullsize:this.props.fullsize,hidePromos:this.props.hidePromos,hideWateb:this.props.hideWateb,bitsConfig:this.props.bitsConfig,channelID:s,channelLogin:this.props.channelLogin,closeAllBits:this.props.closeAllBits,currentUserSHA:this.props.data&&this.props.data.currentUser&&this.props.data.currentUser.idSHA1,handleWatchAdClick:this.handleWatchAdClick,location:this.props.location,onBuyPopupClose:this.onBuyPopupClose,onClose:this.props.onClose,trackBitsCardInteraction:this.props.trackBitsCardInteraction}),l=null;return this.props.location===y.b.ChatTooltip&&(l=p.createElement(W,{bitsBalance:this.props.data&&this.props.data.currentUser&&this.props.data.currentUser.bitsBalance,displayName:this.props.data&&this.props.data.user&&this.props.data.user.displayName||this.props.channelLogin||"",minBitsToCheer:this.props.data&&this.props.data.user&&this.props.data.user.cheer&&this.props.data.user.cheer.settings.cheerMinimumBits,pricesIncludeVAT:r})),p.createElement(_._24,u.__assign({className:t,padding:{top:1},display:_.M.Flex,flexDirection:_.O.Column,"data-a-target":"bits-buy-card"},e),n,l,o)},t.prototype.renderWatebCard=function(){if(this.props.data&&this.props.data.currentUser)switch(this.state.wateb){case O.Awarded:return p.createElement(q,{bitsConfig:this.props.bitsConfig,amount:this.state.bitsAwarded,onStartCheering:this.props.onClose,onWatchAnother:this.handleWatchAdClick,truexUserID:this.props.data.currentUser.idSHA1});case O.Error:return p.createElement(z,{type:this.state.watebError||s.Unknown,onClose:this.props.onClose,onTryAgain:this.resetAdErrorState});default:return!1}},t=u.__decorate([Object(f.a)($,{name:"data",options:function(e){return{variables:{channelLogin:e.channelLogin,withChannel:!!e.channelLogin,isLoggedIn:e.isLoggedIn}}}})],t)}(p.Component),K=Object(w.compose)(Object(Q.d)("BitsBuyCard",{autoReportInteractive:!0,destination:D.a.BitsBuyCard}))(Y),J=Object(o.b)(a,r)(K);n.d(t,!1,function(){return a}),n.d(t,!1,function(){return r}),n.d(t,"a",function(){return J})},XFkZ:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"BitsPinnedCheerV2_LeaderboardEntry"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"userID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"profileImageWidth"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"userID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"Variable",name:{kind:"Name",value:"profileImageWidth"}}}],directives:[]}]}}]}}],loc:{start:0,end:165}};n.loc.source={body:"query BitsPinnedCheerV2_LeaderboardEntry($userID: ID! $profileImageWidth: Int!) {\nuser(id: $userID) {\ndisplayName\nlogin\nprofileImageURL(width:$profileImageWidth)\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},Xo53:function(e,t){},XpQm:function(e,t){},Y5T0:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"BitsCommandHandler_DismissPinnedCheer"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"DismissPinnedCheerInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"dismissPinnedCheer"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:134}};n.loc.source={body:"mutation BitsCommandHandler_DismissPinnedCheer($input: DismissPinnedCheerInput!) {\ndismissPinnedCheer(input: $input) {\nuser {\nid\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"YEG/":function(e,t,n){"use strict";var i=n("TToO"),a=n("U7vG"),r=n("6sO2"),s=n("yDzg"),o=n("CSlQ"),l=n("CwIZ"),c=n("Odds"),d="subscribe-button__subscribe-tier-button",u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={hasPopupExperiment:!1},t.handleClick=function(){t.openCheckout(),t.props.reportSubAction({action:l.a.ClickCheckout,checkoutButtonTier:t.props.tierPrice})},t.setPopupExperiment=function(){return i.__awaiter(t,void 0,void 0,function(){var e;return i.__generator(this,function(t){switch(t.label){case 0:return[4,r.n.experiments.getAssignment("TWILIGHT_SUB_CHECKOUT_POPUP")];case 1:return e=t.sent(),this.setState({hasPopupExperiment:"yes"===e}),[2]}})})},t.openCheckout=function(){t.state.hasPopupExperiment&&window.open(Object(s.a)(t.props.url,{ref:"subscribe-tier-button"}),"Twitch","width=1000, height=1100, menubar, toolbar, location, personalbar, scrollbars")},t}return i.__extends(t,e),t.prototype.componentDidMount=function(){!1!==this.props.targetBlank&&this.setPopupExperiment()},t.prototype.render=function(){if(this.props.isSubbedToTier){var e=Object(r.d)("Subscribed","SubTierButton");return a.createElement(c.u,{ariaLabel:e,"data-test-selector":d,disabled:!0,icon:c._15.Star},e)}var t=Object(r.d)("Subscribe Now","SubTierButton");return a.createElement(c.u,i.__assign({ariaLabel:t+" "+this.props.tierPrice,"data-test-selector":d,linkTo:this.state.hasPopupExperiment?void 0:this.props.url,onClick:this.handleClick,purchase:this.props.tierPrice},Object(c._52)(this.props),{targetBlank:void 0===this.props.targetBlank||this.props.targetBlank}),t)},t=i.__decorate([Object(o.d)("SubTierButton",{autoReportInteractive:!0})],t)}(a.Component);n.d(t,!1,function(){return d}),n.d(t,"a",function(){return u})},YH6m:function(e,t,n){"use strict";function i(e){return"subscribe-button-modal-tab-"+e}var a,r=n("TToO"),s=n("U7vG"),o=n("6sO2"),l=n("vBst"),c=n("Tzcg"),d=n("CSlQ"),u=n("daN3"),p=n("37Pp"),m=n("YEG/"),h=n("jYA1"),g=n("FDYX"),f=n("CwIZ"),b=n("Odds"),v=(n("6O9f"),"gift-subscription-button"),k="subscribe-button";!function(e){e[e.Prime=0]="Prime",e[e.Tier1=1]="Tier1",e[e.Tier2=2]="Tier2",e[e.Tier3=3]="Tier3"}(a||(a={}));var y=function(e){function t(t){var n=e.call(this,t)||this;return n.toggleActiveTab=function(e){if(e.currentTarget.parentElement)switch(e.currentTarget.parentElement.getAttribute("data-tier")){case"subscribe-button-modal-tab-"+a.Prime:n.setState({activeTab:a.Prime,currentPurchasePrice:n.getPrice(n.props.subscriptionProducts[0])}),n.props.onSelectTierTab(a.Prime);break;case"subscribe-button-modal-tab-"+a.Tier1:n.setState({activeTab:a.Tier1,currentPurchasePrice:n.getPrice(n.props.subscriptionProducts[0])}),n.props.onSelectTierTab(a.Tier1);break;case"subscribe-button-modal-tab-"+a.Tier2:n.setState({activeTab:a.Tier2,currentPurchasePrice:n.getPrice(n.props.subscriptionProducts[1])}),n.props.onSelectTierTab(a.Tier2);break;case"subscribe-button-modal-tab-"+a.Tier3:n.setState({activeTab:a.Tier3,currentPurchasePrice:n.getPrice(n.props.subscriptionProducts[2])}),n.props.onSelectTierTab(a.Tier3);break;default:n.setState({activeTab:a.Prime,currentPurchasePrice:n.getPrice(n.props.subscriptionProducts[0])}),n.props.onSelectTierTab(a.Prime)}},n.getTabTitle=function(){switch(n.state.activeTab){case a.Prime:return Object(o.d)("Free Channel Sub with Twitch Prime","SubTierTabs");case a.Tier1:return n.props.subscriptionProducts[0].displayName;case a.Tier2:return n.props.subscriptionProducts[1].displayName;case a.Tier3:return n.props.subscriptionProducts[2].displayName;default:return n.props.subscriptionProducts[0].displayName}},n.getTierSubscribeButton=function(){var e=n.props.subscriptionProducts[n.state.activeTab-1];if(n.props.isGift){var t=Object(o.d)("Gift A Subscription","SubTierTabs");return n.props.giftRecipient?s.createElement(u.a,{subProductId:e.id,giftRecipient:n.props.giftRecipient,checkoutURL:e.url,buttonMessage:t,purchase:n.state.currentPurchasePrice,onClick:n.reportGiftCheckoutAction}):s.createElement(b.u,{ariaLabel:t+" "+n.state.currentPurchasePrice,"data-test-selector":v,onClick:n.onGiftSelect,purchase:n.state.currentPurchasePrice},t)}return n.state.subbedTier===n.state.activeTab&&n.state.activeTab===a.Prime?s.createElement(h.a,{authToken:n.props.authToken,"data-a-target":"subscribe-with-prime-button",isSubscribed:n.props.isSubscribed,isSubscribedWithPrime:n.props.subbedTier===l.a.Prime,onSubscribedWithPrime:n.onSubscribedWithPrime,reportSubMenuAction:n.props.reportSubMenuAction,subLogin:n.props.subLogin,userHasPrime:n.props.userHasPrime,canPrimeSubscribe:n.props.canPrimeSubscribe}):s.createElement(m.a,{isSubbedToTier:n.state.subbedTier===n.state.activeTab,tierPrice:n.state.currentPurchasePrice,reportSubAction:n.props.reportSubMenuAction,url:e.url,"data-a-target":"subscribe-now-button","data-test-selector":k})},n.onSubscribedWithPrime=function(){n.props.onSubscribedWithPrime&&n.props.onSubscribedWithPrime()},n.reportGiftCheckoutAction=function(){n.props.reportSubMenuAction({action:f.a.BuyGiftSub,checkoutButtonTier:n.state.currentPurchasePrice,giftRecipient:n.props.giftRecipient?n.props.giftRecipient:null})},n.onGiftSelect=function(){n.props.onGiftSelect&&n.props.onGiftSelect()},n.mapSubbedTierToTabs=function(e){e.subbedTier===l.a.Prime?(n.setState({activeTab:a.Prime,subbedTier:a.Prime}),e.onSelectTierTab(a.Prime)):e.subbedTier===l.a.Tier1?(n.setState({activeTab:a.Tier1,subbedTier:a.Tier1}),e.onSelectTierTab(a.Tier1)):e.subbedTier===l.a.Tier2?(n.setState({activeTab:a.Tier2,subbedTier:a.Tier2}),e.onSelectTierTab(a.Tier2)):e.subbedTier===l.a.Tier3?(n.setState({activeTab:a.Tier3,subbedTier:a.Tier3}),e.onSelectTierTab(a.Tier3)):e.isGift?e.onSelectTierTab(n.state.activeTab):e.onSelectTierTab(a.Prime)},n.getExtraEmotes=function(e){return(e===a.Tier2?Object(c.b)(n.props.subscriptionProducts[1].emotes):Object(c.b)(n.props.subscriptionProducts[2].emotes.concat(n.props.subscriptionProducts[1].emotes))).map(function(e){return s.createElement(b._1,{display:b.M.InlineFlex,margin:{right:.5},key:e.id},s.createElement("img",{srcSet:"https://static-cdn.jtvnw.net/emoticons/v1/"+e.srcSet}))})},n.state=n.getInitialState(),n}return r.__extends(t,e),t.prototype.componentWillMount=function(){this.mapSubbedTierToTabs(this.props)},t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){var e=null;this.state.subbedTier&&(e=s.createElement(b._1,{display:b.M.InlineFlex,margin:{right:.5},className:"subscription-balloon-options__subbed-star"},s.createElement(b._14,{asset:b._15.Star})));var t=null,n=null,r=null,c=s.createElement(b._1,{display:b.M.InlineFlex},this.state.subbedTier===a.Tier3&&e,s.createElement(b._25,{active:this.state.activeTab===a.Tier3,"data-tier":i(a.Tier3),"data-a-target":i(a.Tier3),onClick:this.toggleActiveTab},this.props.subscriptionProducts[2].price));if(this.props.subbedTier!==l.a.Prime||this.props.isGift||(t=s.createElement(b._1,{display:b.M.InlineFlex,margin:{right:2}},s.createElement(b._1,{display:b.M.InlineFlex,margin:{right:1},className:"subscription-balloon-options__prime-crown"},s.createElement(b._14,{asset:b._15.Crown})),s.createElement(b._25,{active:this.state.activeTab===a.Prime,"data-tier":i(a.Prime),"data-a-target":i(a.Prime),onClick:this.toggleActiveTab},Object(o.d)("Prime","SubTierTabs")))),!this.props.subbedTier||this.props.subbedTier===l.a.Tier1){var d=this.props.subscriptionProducts[0].price;n=s.createElement(b._1,{display:b.M.InlineFlex,margin:{right:2}},this.state.subbedTier===a.Tier1&&e,s.createElement(b._25,{active:this.state.activeTab===a.Tier1,"data-tier":i(a.Tier1),"data-a-target":i(a.Tier1),onClick:this.toggleActiveTab},d))}this.props.subbedTier&&this.props.subbedTier!==l.a.Prime&&this.props.subbedTier!==l.a.Tier1&&this.props.subbedTier!==l.a.Tier2||(r=s.createElement(b._1,{display:b.M.InlineFlex,margin:{right:2}},this.state.subbedTier===a.Tier2&&e,s.createElement(b._25,{active:this.state.activeTab===a.Tier2,"data-tier":i(a.Tier2),"data-a-target":i(a.Tier2),onClick:this.toggleActiveTab},this.props.subscriptionProducts[1].price)));var u=this.props.subscriptionProducts[1].emotes.length,m=u+this.props.subscriptionProducts[2].emotes.length,h=null;(u>0&&this.state.activeTab===a.Tier2||m>0&&this.state.activeTab===a.Tier3)&&(h=s.createElement(b._1,{display:b.M.InlineFlex,alignItems:b.c.Center},this.getExtraEmotes(this.state.activeTab),s.createElement(b._34,{bold:!0},Object(o.d)("Plus {extraEmoteCount, number} extra channel emote(s)",{extraEmoteCount:this.state.activeTab===a.Tier2?u:m},"SubTierTabs"))));var g=this.props.subscriptionProducts[this.state.activeTab-1];return s.createElement(b._1,{className:"channel-header__subscription-balloon-options"},s.createElement(b._1,{margin:{bottom:1}},s.createElement(b._26,null,t,n,r,c)),s.createElement(b._1,null,s.createElement(b._1,{margin:{bottom:1}},s.createElement(b._34,{type:b._39.H5,bold:!0},this.getTabTitle())),s.createElement(b._1,{margin:{bottom:1}},s.createElement(b._34,null,Object(o.d)("Includes {availableEmoteCount, number} emoticon(s), subscriber badge, customizable messages upon subscribing, and ad-free viewing",{availableEmoteCount:this.props.subscriptionProducts[0].emotes.length},"SubTierTabs"))),h,s.createElement(p.a,{subscriptionProduct:g,isGift:this.props.isGift}),s.createElement(b._1,{margin:{top:1,right:1}},this.getTierSubscribeButton())))},t.prototype.getInitialState=function(){var e=this.props.subscriptionProducts[0].price;return(Object(g.d)(this.props.subscriptionProducts)||Object(g.c)(this.props.subscriptionProducts))&&(e=Object(g.a)(this.props.subscriptionProducts[0],this.props.isGift)),{activeTab:a.Tier1,currentPurchasePrice:e,subbedTier:null}},t.prototype.getPrice=function(e){return Object(g.d)(this.props.subscriptionProducts)||Object(g.c)(this.props.subscriptionProducts)?Object(g.a)(e,this.props.isGift):e.price},t=r.__decorate([Object(d.d)("SubTierTabs")],t)}(s.Component);n.d(t,!1,function(){return v}),n.d(t,!1,function(){return k}),n.d(t,"b",function(){return a}),n.d(t,!1,function(){return i}),n.d(t,"a",function(){return y})},YhVV:function(e,t,n){"use strict";t.b=function(e,t){var n=[];if(!e||!t)return n;for(var a=/\S+/g,r=a.exec(e);r;){var s=r[0],o=t[s];if(o&&"function"!=typeof o){var l=Object(i.d)(e.slice(0,r.index)),c=l?l.length:r.index;n[c]={startIndex:c,endIndex:c+s.length,data:{alt:s,images:{themed:!1,sources:{"1x":Object(i.e)(o.id,1),"2x":Object(i.e)(o.id,2),"4x":Object(i.e)(o.id,4)}}}}}r=a.exec(e)}return n},t.a=function(e){for(var t={},n=0,i=e;n<i.length;n++)for(var s=i[n],o=0,l=s.emotes;o<l.length;o++)for(var c=l[o],d=0,u=a[c.token]||[c.token];d<u.length;d++){var p=u[d];t[p]&&s.id===r||(t[p]={id:c.id,token:p})}return t};var i=n("l21v"),a={"\\:\\&gt\\;":[":>"],"\\&gt\\;\\(":[">("],"\\&lt\\;\\]":["<]"],"\\&lt\\;3":["<3"],":-?(?:7|L)":[":-7",":-L",":7",":L"],"[oO](_|\\.)[oO]":["o_o","O_O","o_O","O_o","o.o","O.O","o.O","O.o"],"\\;-?(p|P)":[";-p",";-P",";p",";P"],"\\;-?\\)":[";-)",";)"],"\\:-?(o|O)":[":-o",":-O",":o",":O"],"\\:-?(p|P)":[":-p",":-P",":p",":P"],"\\:-?(S|s)":[":-S",":-s",":s",":S"],"\\:-?[\\\\/]":[":-/",":-\\",":/",":\\"],"\\:-?[z|Z|\\|]":[":-|",":-Z",":-z",":|",":Z",":z"],"\\:-?\\(":[":-(",":("],"\\:-?\\)":[":-)",":)"],"\\:-?D":[":-D",":D"],"#-?[\\\\/]":["#-/","#-\\","#/","#\\"],"B-?\\)":["B-)","B)"],"R-?\\)":["R-)","R)"]},r="0"},"Z+EN":function(e,t){},ZJYd:function(e,t,n){"use strict";function i(e){return e.type===s.b&&null!==e.promotion&&!!e.promotion}t.c=function(e){return e.type!==s.a&&i(e)&&null!==e.promotion&&e.promotion.type===s.d},t.e=function(e){return e.type!==s.a&&i(e)&&null!==e.promotion&&e.promotion.type===s.e},t.d=i,t.a=function(e){var t=0,n=0,i=0;return e.forEach(function(e){e.cheerAmount&&(t=Math.max(t,e.cheerAmount),n=n?Math.min(n,e.cheerAmount):e.cheerAmount,i+=e.cheerAmount)}),{total:i,smallestCheermote:n,largestCheermote:t}},t.f=function(e){var t=e.messageBits,n=t.total,i=t.largestCheermote,r=t.smallestCheermote;if(n){var s={cheerAboveMaxBitsPerEmote:i>o.k,totalAboveBalance:n>e.balance,totalBelowCheerMinimum:n<e.cheerMinimumBits,totalBelowEmoteMinimum:r<e.emoteMinimumBits,inputLongerThanMaxBitsMessage:e.inputValue.length>o.j,inputStartsWithCommand:e.inputValue.startsWith("/")};if(Object.keys(s).some(function(e){return s[e]}))return a.__assign({canSpend:!1},s)}return{canSpend:!0}},t.b=function(e){var t=e.purchaseUrl;if(t){e.trackBitsCardInteraction(Object(l.d)(e.bitsAmount),{location:e.location});var n=t.replace("{channelID}",e.channelID),i=window.open(n,"Twitch","width=1024,height=600,scrollbars=yes");return!i||Object(r.a)()?(e.closeAllBits&&e.closeAllBits(),void e.trackBitsCardInteraction(l.a.CloseCard,{location:e.location})):(i.focus(),i)}};var a=n("TToO"),r=n("Ouuk"),s=n("jxGs"),o=n("3iBR"),l=n("/LBW")},ZiSq:function(e,t,n){"use strict";var i,a=n("TToO"),r=n("RH2O"),s=n("2KeS"),o=n("V5M+"),l=n("ass3"),c=n("oSFp"),d=n("U7vG"),u=n("6sO2"),p=n("E9Qg"),m=n("+Znq"),h=n("5s0/"),g=n("7vx8"),f=n("O0Qc"),b=n("CSlQ"),v=n("Odds"),k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isIgnored:!1},t.ignoreUser=function(){t.props.sendMessageToTMI(Object(f.h)(t.props.targetLogin)),t.setState({isIgnored:!0})},t.unignoreUser=function(){t.props.sendMessageToTMI(Object(f.j)(t.props.targetLogin)),t.setState({isIgnored:!1})},t}return a.__extends(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){if(this.state.isIgnored){var e=Object(u.d)("Unblock User","ViewerCardIgnoreAction");return d.createElement(v._42,{key:"Ignore",label:e,direction:v._44.Top,align:v._43.Right,offsetX:"15%"},d.createElement(v.v,{icon:v._15.Unignore,ariaLabel:Object(u.d)("Unblock {displayName}",{displayName:this.props.targetDisplayName},"ViewerCardIgnoreAction"),onClick:this.unignoreUser,overlay:!0}))}var t=Object(u.d)("Block User","ViewerCardIgnoreAction");return d.createElement(v._42,{key:"Ignore",label:t,direction:v._44.Top,align:v._43.Right,offsetX:"15%"},d.createElement(v.v,{icon:v._15.Ignore,ariaLabel:Object(u.d)("Block {displayName}",{displayName:this.props.targetDisplayName},"ViewerCardIgnoreAction"),onClick:this.ignoreUser,overlay:!0}))},t=a.__decorate([Object(b.d)("ViewerCardIgnoreAction")],t)}(d.Component),y=n("oIkB"),_=n("Dc1A"),C=n("1Eny"),S=n("zVM8"),E="10 minutes",N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onBanClick=function(){var e=t.props,n=e.banUser,i=e.channelID,a=e.userLogin;n(Object(y.a)({channelID:i,bannedUserLogin:a}))},t.onTimeoutClick=function(){var e=t.props,n=e.banUser,i=e.channelID,a=e.userLogin;n(Object(y.a)({channelID:i,bannedUserLogin:a,expiresIn:E}))},t.onUnbanClick=function(){var e=t.props,n=e.unbanUser,i=e.channelID,a=e.userLogin;n(Object(y.a)({channelID:i,bannedUserLogin:a}))},t}return a.__extends(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){return d.createElement(v._1,{display:v.M.InlineFlex},this.getContent())},t.prototype.getContent=function(){return this.props.data.loading||this.props.data.error?[this.renderBanAction(!0),this.renderTimeoutAction(!0)]:this.props.data.chatRoomBanStatus?this.props.data.chatRoomBanStatus.isPermanent?[this.renderUnbanAction(),this.renderTimeoutAction(!0)]:[this.renderBanAction(),this.renderUntimeoutAction()]:[this.renderBanAction(),this.renderTimeoutAction()]},t.prototype.renderTimeoutAction=function(e){void 0===e&&(e=!1);var t=Object(u.d)("Timeout User","ViewerCardModActions");return d.createElement(v._42,{key:"Timeout",label:t,direction:v._44.Top,align:v._43.Left,offsetX:"15%"},d.createElement(v._1,{margin:{right:1}},d.createElement(v.v,{icon:v._15.Timeout,disabled:e,ariaLabel:t,onClick:this.onTimeoutClick})))},t.prototype.renderUntimeoutAction=function(){var e=Object(u.d)("Untimeout User","ViewerCardModActions");return d.createElement(v._42,{key:"Untimeout",label:e,direction:v._44.Top,align:v._43.Left,offsetX:"15%"},d.createElement(v._1,{margin:{right:1}},d.createElement(v.v,{icon:v._15.FollowCheck,ariaLabel:e,onClick:this.onUnbanClick})))},t.prototype.renderBanAction=function(e){void 0===e&&(e=!1);var t=Object(u.d)("Ban User","ViewerCardModActions");return d.createElement(v._42,{key:"Ban",label:t,direction:v._44.Top,align:v._43.Left,offsetX:"32%"},d.createElement(v._1,{margin:{right:1}},d.createElement(v.v,{icon:v._15.Ban,disabled:e,ariaLabel:t,onClick:this.onBanClick})))},t.prototype.renderUnbanAction=function(){var e=Object(u.d)("Unban User","ViewerCardModActions");return d.createElement(v._42,{key:"Unban",label:e,direction:v._44.Top,align:v._43.Left,offsetX:"32%"},d.createElement(v._1,{margin:{right:1}},d.createElement(v.v,{icon:v._15.FollowCheck,ariaLabel:e,onClick:this.onUnbanClick})))},t=a.__decorate([Object(b.d)("ViewerCardModActions"),Object(g.a)(S,{options:function(e){return{variables:{targetUserID:e.userID,channelID:e.channelID},fetchPolicy:"cache-and-network"}}}),Object(g.a)(_,{name:"banUser",options:function(e){return{update:function(t,n){!function(e,t,n){var i=e.readQuery({query:S,variables:{targetUserID:n.userID,channelID:n.channelID}});i&&(t&&t.data&&(i.chatRoomBanStatus={isPermanent:!0,__typename:"ChatRoomBanStatus"}),e.writeQuery({query:S,variables:{targetUserID:n.userID,channelID:n.channelID},data:i}))}(t,n,e)}}}}),Object(g.a)(C,{name:"unbanUser",options:function(e){return{update:function(t){!function(e,t){var n=e.readQuery({query:S,variables:{targetUserID:t.userID,channelID:t.channelID}});if(n){var i=a.__assign({},n,{chatRoomBanStatus:null});e.writeQuery({query:S,variables:{targetUserID:t.userID,channelID:t.channelID},data:i})}}(t,e)}}}})],t)}(d.Component),w=function(e){function t(t){var n=e.call(this,t)||this;return n.modUser=function(){n.props.sendMessageToTMI(Object(f.i)(n.props.targetLogin)),n.setState({isModerator:!0})},n.unmodUser=function(){n.props.sendMessageToTMI(Object(f.k)(n.props.targetLogin)),n.setState({isModerator:!1})},n.state={isModerator:!1},n}return a.__extends(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){if(this.state.isModerator){var e=Object(u.d)("Unmod User","ViewerCardOwnerActions");return d.createElement(v._42,{label:e,direction:v._44.Top,align:v._43.Center},d.createElement(v._1,{key:"OP",margin:{right:1}},d.createElement(v.v,{icon:v._15.FollowCheck,ariaLabel:e,onClick:this.unmodUser})))}e=Object(u.d)("Mod User","ViewerCardOwnerActions");return d.createElement(v._42,{label:e,direction:v._44.Top,align:v._43.Center},d.createElement(v._1,{key:"OP",margin:{right:1}},d.createElement(v.v,{icon:v._15.OP,ariaLabel:e,onClick:this.modUser})))},t=a.__decorate([Object(b.d)("ViewerCardOwnerActions")],t)}(d.Component),T=n("O9wU"),D=n("O1nh"),I=n("mw/a"),O=n("daN3"),M=n("YH6m"),x=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onGiftSelect=function(){t.props.onGiftSelect&&t.props.onGiftSelect()},t.onSelectTierTab=function(e){t.props.onSelectTierTab&&t.props.onSelectTierTab(e)},t.reportSubMenuAction=function(e){t.props.reportSubMenuAction&&t.props.reportSubMenuAction(e)},t}return a.__extends(t,e),t.prototype.render=function(){return d.createElement(v._1,null,d.createElement(v._1,{display:v.M.Flex,justifyContent:v._0.Between,alignItems:v.c.Center,fullWidth:!0},d.createElement(v._34,{bold:!0,type:v._39.H5},Object(u.d)("Choose A Gift Subscription","GiftTierTabs")),d.createElement(v.u,{type:v.z.Text,icon:v._15.AngleLeft,onClick:this.props.onBack,"data-test-selector":"sub-gift-select-back-button"},d.createElement(v._1,{alignItems:v.c.Center,display:v.M.InlineFlex},d.createElement(v._34,null,Object(u.d)("Back","GiftTierTabs"))))),d.createElement(M.a,{canPrimeSubscribe:!1,channelDisplayName:this.props.channelDisplayName,giftRecipient:this.props.giftRecipient,isGift:!0,isSubscribed:!1,onGiftSelect:this.onGiftSelect,onSelectTierTab:this.onSelectTierTab,reportSubMenuAction:this.reportSubMenuAction,subscriptionProducts:this.props.subscriptionProducts,userHasPrime:!1}))},t}(d.Component),R=n("pQNb"),L=n("CwIZ"),U=n("m4HT"),F=(n("VSa1"),n("BBNG"));!function(e){e[e.ActionsPage=0]="ActionsPage",e[e.SubGiftSelectPage=1]="SubGiftSelectPage"}(i||(i={}));var j=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={currentPage:i.ActionsPage},t.getContent=function(){if(t.props.data.loading||t.props.data.error)return t.renderHideButton();var e={backgroundImage:"url("+(t.props.data.targetUser.bannerImageURL||p)+")"},n=t.state.currentPage===i.ActionsPage?t.renderActions():t.renderSubGiftSelect();return d.createElement(v._1,null,d.createElement(v._24,{elevation:1,border:!0},d.createElement("div",{className:"viewer-card",style:e},d.createElement(v._1,{display:v.M.Flex,flexDirection:v.O.Column,fullHeight:!0,fullWidth:!0,className:"viewer-card__overlay"},d.createElement(v._1,{padding:1,alignItems:v.c.Start,justifyContent:v._0.Start,display:v.M.Flex,flexDirection:v.O.Row,textAlign:v._35.Center,fullWidth:!0,flexGrow:1,position:v._8.Relative,className:"viewer-card__banner"},d.createElement(v.l,{src:t.props.data.targetUser.profileImageURL,size:50,alt:t.props.data.targetUser.displayName}),d.createElement(v._1,{alignItems:v.c.Center,margin:1,className:"viewer-card__display-name",ellipsis:!0},d.createElement(v._34,{type:v._39.H4},d.createElement("a",{className:"viewer-card__display-name-link",href:"/"+t.props.targetLogin,target:"_blank"},t.props.data.targetUser.displayName))),t.renderHideButton(),t.renderIgnoreButton()))),n))},t.toggleGiftPage=function(){var e=t.state.currentPage===i.ActionsPage?i.SubGiftSelectPage:i.ActionsPage;e===i.SubGiftSelectPage&&t.trackGiftEvent(),t.setState({currentPage:e})},t.onWhisperButtonClick=function(){t.props.hideViewerCard()},t.handleReportUserClick=function(){t.props.showReportUserModal({reportContext:{contentType:t.reportContentTypeFromSourceType(t.props.sourceType),targetUserID:t.props.data.targetUser.id,contentID:t.props.sourceID,extra:JSON.stringify({channel_id:t.props.channelID.toString()})},title:Object(u.d)("Report {channelDisplayName}",{channelDisplayName:t.props.data.targetUser.displayName},"ReportUserModalTitle")})},t.trackBuyGiftSubEvent=function(e){Object(L.b)(a.__assign({},e,{action:L.a.BuyGiftSub,channelID:t.props.channelID||"",channelLogin:t.props.data.channelUser.login||"",isMenuOpen:null,hasSubCredit:null,sub_location:"viewer_card",modal:!1,showPrimeContent:!0,giftRecipient:t.props.data.targetUser.login}))},t.trackGiftEvent=function(){Object(L.b)({action:L.a.GiftASub,channelID:t.props.channelID||"",channelLogin:t.props.data.channelUser.login||"",isMenuOpen:null,hasSubCredit:null,sub_location:"viewer_card",modal:!1,showPrimeContent:!0,giftRecipient:t.props.data.targetUser.login})},t}return a.__extends(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){return this.props.data.error?null:this.getContent()},t.prototype.renderIgnoreButton=function(){var e=this.props.data.currentUser;return this.props.isEmbedded||e&&e.login===this.props.targetLogin?null:d.createElement(v._1,{key:"Ignore",position:v._8.Absolute,attachRight:!0,attachBottom:!0,margin:{bottom:.5,right:.5}},d.createElement(k,{targetDisplayName:this.props.data.targetUser.displayName,targetLogin:this.props.targetLogin,sendMessageToTMI:this.props.sendMessageToTMI}))},t.prototype.renderHideButton=function(){return d.createElement(v._1,{className:"viewer-card__hide",position:v._8.Absolute,attachRight:!0,attachTop:!0,margin:{top:.5,right:.5}},d.createElement(v.v,{icon:v._15.Close,onClick:this.props.hideViewerCard,ariaLabel:Object(u.d)("Hide","ViewerCard"),overlay:!0}))},t.prototype.renderActions=function(){var e=this.props.data.currentUser;return this.props.isEmbedded||e&&e.login===this.props.targetLogin?null:d.createElement(v._24,{className:"viewer-card__actions","data-test-selector":"viewer-card-actions",attachBottom:!0},this.renderSocialActions(),d.createElement(v._24,{display:v.M.Flex,background:v.m.Alt2,fullWidth:!0,padding:{x:1,y:.5}},this.renderChatActions()))},t.prototype.renderSocialActions=function(){var e=null;return this.isModeratorOrHigher&&(e=d.createElement(m.a,{key:"MoreOptionsButton"},d.createElement(v.v,{ariaLabel:Object(u.d)("More options","ViewerCard"),icon:v._15.More,"data-a-target":"viewer-card-more-button"}),d.createElement(v.p,{direction:v.q.BottomRight,"data-a-target":"viewer-card-more-balloon"},d.createElement(v._1,{padding:{y:1}},d.createElement(v.Z,{onClick:this.handleReportUserClick,"data-a-target":"viewer-card-report-button"},d.createElement(v._1,{padding:{x:1}},Object(u.d)("Report {user}",{user:this.props.targetLogin},"ViewerCard"))))))),[d.createElement(v._24,{display:v.M.Flex,background:v.m.Base,flexDirection:v.O.Row,fullWidth:!0,padding:{y:1,left:1,right:.5}},d.createElement(v._1,{key:"FriendButton",margin:{right:.5}},d.createElement(D.a,{channelID:this.props.data.targetUser.id})),d.createElement(v._1,{key:"WhisperButton",margin:{right:.5}},this.renderWhisperButton()),d.createElement(v._1,{key:"GiftButton",margin:{right:.5}},this.renderGiftSubscriptionButton()),d.createElement(v._1,{key:"ReportButton",flexGrow:1,textAlign:v._35.Right},e))]},t.prototype.renderWhisperButton=function(){if(!this.props.data.currentUser||!this.props.data.targetUser)return null;var e=Object(U.a)(this.props.data.currentUser.id,this.props.data.targetUser.id);return d.createElement(h.a,{onClick:this.onWhisperButtonClick,threadID:e})},t.prototype.renderGiftSubscriptionButton=function(){return!this.props.data.channelUser||!this.props.data.channelUser.subscriptionProducts||this.props.data.channelUser.subscriptionProducts.length<1?null:d.createElement(O.a,{onClick:this.toggleGiftPage,subProductId:this.props.data.channelUser.subscriptionProducts[0].id,giftRecipient:this.props.targetLogin})},t.prototype.renderSubGiftSelect=function(){return d.createElement(v._1,null,d.createElement(R.a,{subscriptionProducts:this.props.data.channelUser.subscriptionProducts,isGift:!0}),d.createElement(v._24,{background:v.m.Base,attachBottom:!0,display:v.M.Flex,flexDirection:v.O.Row,justifyContent:v._0.Between,fullWidth:!0,flexGrow:0,padding:2},d.createElement(x,{onBack:this.toggleGiftPage,channelDisplayName:this.props.data.channelUser.displayName,subscriptionProducts:this.props.data.channelUser.subscriptionProducts,giftRecipient:this.props.data.targetUser.login,reportSubMenuAction:this.trackBuyGiftSubEvent})))},t.prototype.renderChatActions=function(){var e=[];return this.isModeratorOrHigher()&&e.push(d.createElement(N,{key:"ModActions",channelID:this.props.data.channelUser.id,userID:this.props.data.targetUser.id,userLogin:this.props.targetLogin})),this.isOwnerOrHigher()&&e.push(d.createElement(w,{key:"OwnerActions",sendMessageToTMI:this.props.sendMessageToTMI,targetLogin:this.props.targetLogin})),e},t.prototype.isOwnerOrHigher=function(){var e=this.props.data;return!(e.loading||e.error||!e.currentUser)&&(e.currentUser.roles.isGlobalMod||e.currentUser.roles.isSiteAdmin||e.currentUser.roles.isStaff||this.isOwner())},t.prototype.isModeratorOrHigher=function(){return this.isOwnerOrHigher()||this.props.data.channelUser.self&&this.props.data.channelUser.self.isModerator},t.prototype.isOwner=function(){var e=this.props.data;return!(e.loading||e.error||!e.currentUser)&&e.currentUser.id===e.channelUser.id},t.prototype.reportContentTypeFromSourceType=function(e){switch(e){case T.a.chat_message:return I.a.Chat;case T.a.recent_raids:return I.a.Raid;case T.a.viewer_list:default:return I.a.User}},t=a.__decorate([Object(b.d)("ViewerCard"),Object(g.a)(F,{options:function(e){return{variables:{targetLogin:e.targetLogin,channelID:e.channelID}}}})],t)}(d.Component),B=(n("PqoY"),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.componentWillUnmount=function(){this.props.hideViewerCard()},t.prototype.render=function(){var e=null;return this.props.viewerCardOptions&&(e=d.createElement(v._1,{className:"viewer-card-layer",position:v._8.Relative},d.createElement(j,{isEmbedded:this.props.isEmbedded,targetLogin:this.props.viewerCardOptions.targetLogin,hideViewerCard:this.props.hideViewerCard,sendMessageToTMI:this.props.onSendMessage,channelID:this.props.channelID,showReportUserModal:this.props.showReportUserModal,sourceType:this.props.viewerCardOptions.sourceType,sourceID:this.props.viewerCardOptions.sourceID}))),e},t}(d.Component)),A=Object(r.b)(function(e){return{viewerCardOptions:e.viewerCard.viewerCardOptions}},function(e){return Object(s.b)({hideViewerCard:l.c,showReportUserModal:function(e){var t=a.__rest(e,[]);return Object(o.d)(c.a,t)}},e)})(B);n.d(t,"a",function(){return A})},ZoRy:function(e,t){},aK1p:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"BitsPinnedCheerV2_Leaderboards"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"channelID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cheer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"leaderboard"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"10"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"leaderboardEntry"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bitsLeaderboardEntry"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"rank"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"score"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:273}};i.loc.source={body:'#import "twilight/features/bits/models/bits-leaderboard-entry-fragment.gql"\nquery BitsPinnedCheerV2_Leaderboards($channelID: ID!) {\nuser(id: $channelID) {\nid\ncheer {\nid\nleaderboard (first: 10) {\nid\n...leaderboardEntry\n}\n}\nself {\nbitsLeaderboardEntry {\nid\nrank\nscore\n}\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(function(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})}(n("HQaX").definitions)),e.exports=i},aMxy:function(e,t,n){"use strict";var i=n("arZ9");n.n(i);n.o(i,"FrienshipChangeType")&&n.d(t,"FrienshipChangeType",function(){return i.FrienshipChangeType}),n.o(i,"ModerationActions")&&n.d(t,"ModerationActions",function(){return i.ModerationActions}),n.o(i,"PubsubMessageType")&&n.d(t,"PubsubMessageType",function(){return i.PubsubMessageType}),n.o(i,"PubsubTopic")&&n.d(t,"PubsubTopic",function(){return i.PubsubTopic}),n.o(i,"TargetedModerationActions")&&n.d(t,"TargetedModerationActions",function(){return i.TargetedModerationActions});var a=n("GHQc");n.n(a);n.o(a,"FrienshipChangeType")&&n.d(t,"FrienshipChangeType",function(){return a.FrienshipChangeType}),n.o(a,"ModerationActions")&&n.d(t,"ModerationActions",function(){return a.ModerationActions}),n.o(a,"PubsubMessageType")&&n.d(t,"PubsubMessageType",function(){return a.PubsubMessageType}),n.o(a,"PubsubTopic")&&n.d(t,"PubsubTopic",function(){return a.PubsubTopic}),n.o(a,"TargetedModerationActions")&&n.d(t,"TargetedModerationActions",function(){return a.TargetedModerationActions});var r=n("/3Lr");n.d(t,"FrienshipChangeType",function(){return r.a}),n.d(t,"ModerationActions",function(){return r.b}),n.d(t,"PubsubMessageType",function(){return r.c}),n.d(t,"PubsubTopic",function(){return r.d}),n.d(t,"TargetedModerationActions",function(){return r.e})},aSvS:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return a});var i;!function(e){e.DismissToken="token_dismissed",e.RedeemToken="token_redeemed",e.RequestEligibility="eligibility_requested",e.RequestToken="token_requested"}(i||(i={}));var a;!function(e){e.Click="clicked_manage_in_dashboards",e.Dismiss="dismissed"}(a||(a={}))},aUOx:function(e,t,n){"use strict";t.a=function(e){return{type:i.a.Info,id:Object(a.a)("notice"),message:e}};var i=n("qkCi"),a=n("INp2")},aqNN:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Bits_BuyCard_Offers"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"withChannel"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"isLoggedIn"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bitsOffers"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"skip"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"isLoggedIn"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"bitsOffersFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"isLoggedIn"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"idSHA1"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bitsBalance"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bitsOffers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"bitsOffersFragment"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"withChannel"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cheer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"settings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cheerMinimumBits"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:440}};i.loc.source={body:'#import "twilight/features/bits/models/bits-offers-fragment.gql"\nquery Bits_BuyCard_Offers($withChannel: Boolean! $isLoggedIn: Boolean! $channelLogin: String!) {\nbitsOffers @skip(if: $isLoggedIn) {\n...bitsOffersFragment\n}\ncurrentUser @include(if: $isLoggedIn) {\nid\nidSHA1\nbitsBalance\nbitsOffers {\n...bitsOffersFragment\n}\n}\nuser(login: $channelLogin) @include(if: $withChannel) {\nid\ndisplayName\ncheer {\nid\nsettings {\ncheerMinimumBits\n}\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(function(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})}(n("OcEY").definitions)),e.exports=i},arZ9:function(e,t){},ass3:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a}),t.c=function(){return{type:i}},t.d=function(e,t,n){return{type:a,viewerCardOptions:{targetLogin:e,sourceType:t,sourceID:n}}};var i="viewer-card.VIEWER_CARD_HIDDEN",a="viewer-card.VIEWER_CARD_SHOWN"},bQ8d:function(e,t,n){"use strict";function i(e,t){if(void 0===t&&(t=0),t>e){var n=t;t=e,e=n}return t+Math.floor(Math.random()*(e-t+1))}t.a=i,t.b=function(e){return e[i(e.length-1)]},t.c=function(e,t){for(var n=0,i=[];n<e;)i.push(t(n)),n+=1;return i}},bgpf:function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"b",function(){return a}),n.d(t,"a",function(){return r});var i;(i||(i={})).NewChatter="NEW_CHATTER";var a;!function(e){e.Available="AVAILABLE",e.Dismissed="DISMISSED",e.Eligible="ELIGIBLE",e.Redeemed="REDEEMED"}(a||(a={}));var r;!function(e){e.TokenNotAvailable="TOKEN_NOT_AVAILABLE",e.TokenNotFound="TOKEN_NOT_FOUND",e.UserBanned="USER_CHAT_BANNED",e.UserNotFollowing="FOLLOWER_ONLY_MODE_ENFORCEMENT_FAILED",e.UserNotSubbed="SUB_ONLY_MODE_ENFORCEMENT_FAILED",e.UserTimedOut="USER_CHAT_TIMED_OUT"}(r||(r={}))},bkpq:function(e,t,n){"use strict";function i(e){var t=new Map,n=new Map,i=new Map,r=new Map;return e.images.forEach(function(e){"LIGHT"===e.theme?e.isAnimated?n.set(e.dpiScale,e.url):t.set(e.dpiScale,e.url):e.isAnimated?r.set(e.dpiScale,e.url):i.set(e.dpiScale,e.url)}),a.__assign({indexedImages:{LIGHT:{static:t,animated:n},DARK:{static:i,animated:r}}},e)}t.a=function(e){var t=[],n={};return e.forEach(function(e){var o=e.tiers.map(function(e){return i(e)});"Cheer"===e.prefix&&o.push(function(){var e=["DARK","LIGHT"],t=["static","animated"],n=[];return[1,1.5,2,3,4].forEach(function(i){e.forEach(function(e){t.forEach(function(t){n.push({url:s.a+"/cheer/"+e.toLowerCase()+"/"+t+"/100000/"+i+"."+("static"===t?"png":"gif"),isAnimated:"animated"===t,theme:e,dpiScale:i})})})}),i({id:"Cheer:100000",bits:1e5,color:s.f[r.a.Yellow],images:n})}()),o.sort(function(e,t){return t.bits-e.bits});var l=a.__assign({},e,{indexedTiers:new Map(o.map(function(e){return[e.bits,e]})),orderedTiers:o});t.push(l),n[l.prefix.toLowerCase()]=l}),{indexedActions:n,orderedActions:t}},t.b=function(e){return{cursor:e.entry_key,node:{id:e.entry_key,rank:e.rank,score:e.score,__typename:"BitsLeaderboardEntry"},__typename:"BitsLeaderboardEdge"}};var a=n("TToO"),r=n("I89S"),s=n("3iBR")},c3pS:function(e,t,n){"use strict";n("67ft");var i,a=n("TToO"),r=n("KSGD"),s=n("U7vG"),o=n("6BvN"),l=n("HW6M"),c=n("6sO2"),d=n("rCmJ"),u=n("Odds"),p=(n("IfJQ"),"autocomplete-balloon-matches"),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.resizeAnimationFrame=0,t.messages={noMatches:Object(c.d)("No matches.","AutocompleteBalloon")},t.logger=c.i.withCategory("AutocompleteBalloon"),t.renderMatches=function(){return t.props.matches.map(function(e,n){var i=t.state.selectedMatch,a=i&&i.replacement===e.replacement,r=l("autocomplete-balloon__item",{"autocomplete-balloon__item--selected":a});return s.createElement(u._1,{key:"autocomplete-match-"+n,refDelegate:a?t.focusOnOption:void 0,"data-test-selector":p},s.createElement(u.V,{display:u.M.Block,fullWidth:!0},s.createElement("button",{onMouseEnter:t.handleMatchMouseEnter,className:r,"data-a-target":e.replacement,"data-click-index":n,onClick:t.onMatchClick},s.createElement(u._1,{padding:{x:.5},display:u.M.Flex,alignItems:u.c.Center},e.element))))})},t.handleMatchMouseEnter=function(e){var n=t.getMatchFromEvent(e);n&&t.setState({selectedMatch:n})},t.onMatchClick=function(e){var n=t.getMatchFromEvent(e);n&&t.props.onMatchSelect(n)},t.getMatchFromEvent=function(e){var n=t.props.matches,i=e.currentTarget.getAttribute("data-click-index");return!i||+i>=n.length?(t.logger.error(new Error,"The index received from the UI element was not found in props.matches."),null):n[+i]},t.handleKeydown=function(e){var n=e.charCode||e.keyCode,i=function(){e.preventDefault(),e.stopPropagation()};switch(n){case o.a.Tab:case o.a.Enter:i(),t.props.matches.length&&t.state.selectedMatch?t.props.onMatchSelect(t.state.selectedMatch):t.props.onDismiss();break;case o.a.Up:case o.a.Down:if(!t.state.selectedMatch||!t.props.matches.length)return;var a=t.props.matches.indexOf(t.state.selectedMatch);if(-1===a)return void t.logger.error(new Error,"The selected match was not found in props.matches.");i();var r=n===o.a.Up?-1:1,s=t.getIndexWithinLength(a+r,t.props.matches.length),l=t.props.matches[s];t.setState({selectedMatch:l})}},t.getIndexWithinLength=function(e,t){var n=e%t;return n<0?n+t:n},t.onResize=function(){t.resizeAnimationFrame||(t.resizeAnimationFrame=requestAnimationFrame(t.setContainerHeight))},t.setContainerHeight=function(){var e=t.props.containerElement&&t.props.containerElement.clientHeight||1080;t.setState({containerHeight:e}),t.resizeAnimationFrame=0},t.focusOnOption=function(e){if(e&&t.autocompleteBalloonElement){var n=e.getBoundingClientRect(),i=t.autocompleteBalloonElement.getBoundingClientRect();(n.bottom>i.bottom||n.top<i.top)&&e.scrollIntoView()}},t.setAutocompleteBalloonElement=function(e){t.autocompleteBalloonElement=e},t}return a.__extends(t,e),t.prototype.componentDidMount=function(){window.addEventListener("keydown",this.handleKeydown,!0),window.addEventListener("resize",this.onResize,!0),this.setContainerHeight(),this.props.matches.length>0&&this.setState({selectedMatch:this.props.matches[0]})},t.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.onResize,!0),window.removeEventListener("keydown",this.handleKeydown,!0),this.resizeAnimationFrame&&cancelAnimationFrame(this.resizeAnimationFrame)},t.prototype.componentWillReceiveProps=function(e){var t=this,n=e.matches.reduce(function(e,n,i){return t.state.selectedMatch?n.replacement===t.state.selectedMatch.replacement?i:e:0},0);this.setState({selectedMatch:e.matches[n]})},t.prototype.render=function(){var e;return e=0===this.props.matches.length?s.createElement(u._1,{padding:{x:.5},"data-test-selector":"autocomplete-balloon-no-matches"},s.createElement(u._34,{type:u._39.Span,color:u.I.Alt2},this.messages.noMatches)):this.renderMatches(),s.createElement(u._1,{position:u._8.Relative},s.createElement(d.a,{onClickOut:this.props.onDismiss},s.createElement(u.p,{direction:u.q.TopLeft,"data-a-target":"autocomplete-balloon","data-test-selector":"autocomplete-balloon",show:!0},s.createElement(u._1,{refDelegate:this.setAutocompleteBalloonElement,"data-test-selector":"autocomplete-matches-container",className:"autocomplete-balloon",overflow:u._4.Auto,padding:{y:1}},s.createElement("div",{style:{maxHeight:this.state.containerHeight}},e)))))},t}(s.Component),h=n("2emZ"),g=n("vH/s"),f={Chat:"chat",Feed:"feed",Whisper:"whisper"},b=":",v="#",k="@",y=function(e){switch(e){case h.a.Emote:return b;case h.a.Hashtag:return v;case h.a.Mention:return k;default:return void c.i.warn("Chat Suggestions tracking was passed an unknown autocomplete type.")}},_=function(e){var t=y(e.autocompleteType);if(t){var n={channel:e.channelLogin,completed_text:e.completedText,source:e.source,start_character:t};c.m.track(g.SpadeEventType.ChatSuggestionComplete,n)}};!function(e){e.Input="input",e.TextArea="textarea"}(i||(i={}));var C=function(e){function t(t){var n=e.call(this,t)||this;return n.state={autocompleteType:h.a.None,matchedCursorPosition:0,matches:null,value:""},n.providers=[],n.onChange=function(e){n.setState({value:e.target.value},function(){n.getMatches()}),n.props.onChange&&n.props.onChange(e)},n.onKeyDown=function(e){var t=function(){n.props.onKeyDown&&n.props.onKeyDown(e)},i=function(){e.preventDefault(),e.stopPropagation()},a=e.charCode||e.keyCode;if(a!==o.a.Enter){switch(a){case o.a.Tab:if(!n.state.matches){n.getMatches(!0)&&i()}break;case o.a.Esc:n.state.matches&&(i(),n.resetDisplayState())}t()}else t()},n.setComponentRefDelegate=function(e){n.componentRef=e,n.props.componentRefDelegate&&n.props.componentRefDelegate(e)},n.getMatches=function(e){var t=n.state.value;if(0===n.providers.length||0===t.length)return n.resetDisplayState(),!1;var i=n.getCurrentCursorPosition();if(i>t.length);else for(;i<t.length&&!/\s/.test(t.charAt(i));)i++;var a=t.substring(0,i);if(0===a.length||/\s/.test(a.substring(a.length-1)))return n.resetDisplayState(),!1;for(var r=a.split(/\s/),s=r[r.length-1],o=0,l=n.providers;o<l.length;o++){var c=l[o];if(!e||c.canBeTriggeredByTab){var d=c.getMatches(s,e);if(d)return n.setState({autocompleteType:c.autocompleteType,matchedCursorPosition:i,matches:d}),!0}}return n.resetDisplayState(),!1},n.resetDisplayState=function(e,t){var i=a.__assign({},n.state,{autocompleteType:h.a.None,matches:null},e||{});n.setState(i,t)},n.insertReplacement=function(e){var t=n.state.value,i=n.state.matchedCursorPosition,r=t.substring(0,i),s=r.lastIndexOf(e.current);if(-1===s)r=r.concat(e.replacement+" "),i=r.length;else{var o=r.substring(0,s),l=t.length>s+e.current.length?t.substring(s+e.current.length):"",c=l.startsWith(" ")?e.replacement:e.replacement+" ";r=""+o+c+l,i=o.length+c.length}_(a.__assign({},n.props.trackingParams||{},{autocompleteType:n.state.autocompleteType,completedText:e.replacement,source:n.props.suggestionSource})),n.resetDisplayState({value:r},function(){n.setCursorPosition(i)})},n.getCurrentCursorPosition=function(){return n.componentRef.selectionStart},n.setCursorPosition=function(e){n.componentRef&&(n.componentRef.setSelectionRange(e,e),n.componentRef.focus())},n.registerAutocompleteProvider=function(e){return n.providers.push(e),function(){var t=n.providers.indexOf(e);n.providers.splice(t,1)}},t.refDelegate&&t.refDelegate(n),n}return a.__extends(t,e),t.prototype.getChildContext=function(){return{registerAutocompleteProvider:this.registerAutocompleteProvider}},t.prototype.componentWillUpdate=function(e,t){!this.state.matches&&t.matches&&function(e){var t=y(e.autocompleteType);if(t){var n={source:e.source,start_character:t};c.m.track(g.SpadeEventType.ChatSuggestion,n)}}({autocompleteType:t.autocompleteType,source:e.suggestionSource})},t.prototype.componentDidUpdate=function(e,t){t.value!==this.state.value&&this.props.onValueUpdate&&this.props.onValueUpdate(this.state.value)},t.prototype.render=function(){var e=a.__assign({},this.props,{onChange:this.onChange,onKeyDown:this.onKeyDown,refDelegate:this.setComponentRefDelegate,value:this.state.value});return s.createElement(u._1,null,this.state.matches&&s.createElement(m,{matches:this.state.matches,onMatchSelect:this.insertReplacement,onDismiss:this.resetDisplayState,containerElement:this.props.containerElement}),this.props.componentType===i.Input?s.createElement(u.X,a.__assign({},e,{type:e.type||u.Y.Text})):s.createElement(u._36,a.__assign({},e)),this.props.children)},t.prototype.getValue=function(){return this.state.value},t.prototype.setValue=function(e){this.resetDisplayState({value:e})},t.childContextTypes={registerAutocompleteProvider:r.func},t}(s.Component),S=n("Bir6"),E=n("Tzcg"),N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.autocompleteType=h.a.Emote,t.canBeTriggeredByTab=!1,t.getMatches=function(e){return e.startsWith(":")?e.length<3?null:t.getMatchedEmotes(e):null},t.getMatchedEmotes=function(e){var n=t.state.hydratedEmotes;if(!n||0===n.length)return null;var i=e.substring(1),a=n.reduce(function(e,n){var a=n.emotes.filter(function(e){if(e.token)return t.doesEmoteMatchTerm(e,i)});return e.concat([a])},[]).filter(function(e){return e.length>0}).reduce(function(e,t){return e.concat(t)},[]);return a=Object(E.d)(a),(a=Object(E.e)(a,i)).map(function(e){return{current:":"+i,replacement:e.token,element:t.renderEmoteSuggestion(e)}})},t.doesEmoteMatchTerm=function(e,t){var n=new RegExp("^"+Object(S.a)(t),"i");if(e.token.match(n))return!0;var i=new RegExp(""+Object(S.a)(t.charAt(0)).toUpperCase()),a=new RegExp("^"+Object(S.a)(t.slice(1)),"i"),r=e.token.match(i);return!!(r&&r.index&&e.token.slice(r.index+1).match(a))},t.renderEmoteSuggestion=function(e){return[s.createElement(u._1,{padding:{right:.5},key:"emote-img-"+e.id},s.createElement("img",{srcSet:e.srcSet})),s.createElement(u._34,{type:u._39.Span,key:"emote-text-"+e.id},e.token)]},t.hidrateEmotes=function(e){var n=e.map(function(e){return{id:e.id,emotes:Object(E.b)(e.emotes)}});t.setState({hydratedEmotes:n})},t}return a.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){e.emotes&&this.props.emotes!==e.emotes&&this.hidrateEmotes(e.emotes)},t.prototype.componentWillMount=function(){this.hidrateEmotes(this.props.emotes)},t.prototype.componentDidMount=function(){this.unregister=this.context.registerAutocompleteProvider(this)},t.prototype.componentWillUnmount=function(){this.unregister()},t.prototype.render=function(){return null},t.contextTypes={registerAutocompleteProvider:r.func},t}(s.Component);n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,"b",function(){return C}),n.d(t,"a",function(){return i}),n.d(t,!1,function(){}),n.d(t,"d",function(){return N}),n.d(t,"c",function(){return f})},cv4W:function(e,t,n){e.exports=n.p+"assets/gift3-03f7dd6edab76b3567ff92bba447d5cb.png"},cxe8:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Chat_SharePurchase_ChannelData"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"settings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isCommerceRevShareEnabled"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"purchaseTokens"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"asin"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"imageThumbnail"},name:{kind:"Name",value:"imageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"40"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"imageURL"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emoteSets"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emoteSet"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"badges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"badge"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"bits"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"quantity"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"inGameContents"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"imageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"30"}}],directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:433}};i.loc.source={body:'#import "twilight/features/badges/models/badge-fragment.gql"\nquery Chat_SharePurchase_ChannelData($channelLogin: String!) {\nuser(login: $channelLogin) {\nid\nsettings {\nisCommerceRevShareEnabled\n}\nself {\npurchaseTokens {\nid\ntitle\nasin\nimageThumbnail: imageURL(width: 40)\nimageURL\nemoteSets {\nid\nemoteSet {\nid\nemotes {\nid\ntoken\n}\n}\n}\nbadges {\nid\nbadge{\n...badge\n}\n}\nbits {\nid\nquantity\n}\ninGameContents {\nid\nimageURL(width: 30)\n}\n}\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(function(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})}(n("QU+n").definitions)),e.exports=i},dQj3:function(e,t,n){"use strict";function i(e){var t=[];return e.forEach(function(e){t[e.from]={startIndex:e.from,endIndex:e.to+1,data:{images:{themed:!1,sources:{"1x":Object(o.e)(e.emoteID,1),"2x":Object(o.e)(e.emoteID,2),"4x":Object(o.e)(e.emoteID,4)}}}}}),t}t.b=i,t.a=function(e,t,n){var c=i(e.body.emotes),d=e.badges.reduce(function(e,t){return e[t.setID]=t.version,e},{});return{type:s.a.Post,id:e.id,badges:d,bits:e.bitsUsed,timestamp:0,deleted:!1,user:a.__assign({userID:e.author.id,userLogin:e.author.login,userType:r.a.User,color:e.authorColor},Object(l.a)(e.authorName,e.author.login)),messageParts:Object(o.f)(e.body.content,c,e.bitsUsed,t,n,e.authorName)}},t.c=function(e){if(null===e.tags||null===e.message||null===e.bits_used)return null;var t="ChatMessage:"+e.tags.msg_id;return{__typename:"ChatMessage","Symbol(id)":t,id:e.tags.msg_id,authorName:e.tags.display_name,authorColor:e.tags.color,author:{__typename:"User","Symbol(id)":"User:"+e.user_id,id:e.user_id,login:e.username},body:{__typename:"MessageBody","Symbol(id)":"$"+t+".body",content:e.message,emotes:e.tags.emotes.map(function(e,n){return{__typename:"EmbeddedEmote","Symbol(id)":t+".body.emotes."+n,emoteID:e.id.toString(),from:e.start,to:e.end,setID:e.set}})},badges:e.tags.badges.map(function(e,n){return{__typename:"Badge","Symbol(id)":t+".badges."+n,setID:e.badge_set_id,version:e.badge_set_version}}),bitsUsed:e.bits_used}};var a=n("TToO"),r=n("6Agf"),s=n("qkCi"),o=n("l21v"),l=n("e1CU")},dVd7:function(e,t){},daN3:function(e,t,n){"use strict";var i=n("TToO"),a=n("U7vG"),r=n("6sO2"),s=n("7vx8"),o=n("yDzg"),l=n("CSlQ"),c=n("Odds"),d=n("lK86"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={hasPopupExperiment:!1},t.setPopupExperiment=function(){return i.__awaiter(t,void 0,void 0,function(){var e;return i.__generator(this,function(t){switch(t.label){case 0:return[4,r.n.experiments.getAssignment("TWILIGHT_SUB_CHECKOUT_POPUP")];case 1:return e=t.sent(),this.setState({hasPopupExperiment:"yes"===e}),[2]}})})},t.handleClick=function(){return t.openCheckout(),t.props.onClick&&t.props.onClick()},t.openCheckout=function(){t.state.hasPopupExperiment&&t.props.checkoutURL&&t.props.giftRecipient&&window.open(Object(o.a)(t.props.checkoutURL,{recipient:t.props.giftRecipient,ref:"gift-subscribe-button"}),"Twitch","width=1000, height=1100, menubar, toolbar, location, personalbar, scrollbars")},t}return i.__extends(t,e),t.prototype.componentDidMount=function(){this.setPopupExperiment()},t.prototype.render=function(){var e=this.props.checkoutURL?Object(r.d)("Buy Gift Subscription","GiftSubscribeButton"):Object(r.d)("Gift Subscription","GiftSubscribeButton"),t=!!(this.props.data&&this.props.data.user&&this.props.data.user.self)&&this.props.data.user.self.canGift,n=this.props.checkoutURL&&this.props.giftRecipient?Object(o.a)(this.props.checkoutURL,{recipient:this.props.giftRecipient}):"";return a.createElement(c.u,{targetBlank:!0,disabled:!t,onClick:this.handleClick,linkTo:this.state.hasPopupExperiment?void 0:n,"data-test-selector":"gift-subscribe-button",purchase:this.props.purchase},this.props.buttonMessage||e)},t=i.__decorate([Object(l.d)("GiftSubscribeButton",{autoReportInteractive:!0}),Object(s.a)(d,{options:function(e){return{variables:{recipientLogin:e.giftRecipient,subProductId:e.subProductId}}},skip:function(e){return!e.giftRecipient||!e.subProductId}})],t)}(a.Component);n.d(t,!1,function(){return"gift-subscribe-button"}),n.d(t,"a",function(){return u})},djIP:function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"b",function(){return a}),n.d(t,"a",function(){return r});var i;!function(e){e.Spam="Spam",e.Harassment="Harassment"}(i||(i={}));var a;!function(e){e.Spam="spam",e.Harassment="harassment",e.Other="other"}(a||(a={}));var r;!function(e){e.Whisper="WHISPER",e.Chat="CHAT"}(r||(r={}))},e1CU:function(e,t,n){"use strict";t.a=function(e,t){var n=e,i=!1;return n?function(e){return e.split("").map(function(e){return e.charCodeAt(0)>127}).reduce(function(e,t){return e||t})}(n)&&(i=!0):n=t,{userDisplayName:n,isIntl:i}}},e9ZN:function(e,t){},emkL:function(e,t,n){"use strict";var i=n("TToO"),a=n("U7vG"),r=n("6sO2"),s=n("Odds"),o=function(e){function t(t){var n=e.call(this,t)||this;return n.onHistoryChange=function(e){n.setState({currentPathname:e.pathname})},n.shouldShow=function(){return n.props.link&&n.state.currentPathname!==n.props.link.pathname},n.state={currentPathname:location.pathname},n}return i.__extends(t,e),t.prototype.componentDidMount=function(){this.historyUnlisten=r.n.history.listen(this.onHistoryChange)},t.prototype.componentWillUnmount=function(){this.historyUnlisten()},t.prototype.render=function(){return this.props.link&&this.shouldShow()?a.createElement(s.u,{linkTo:this.props.link,onClick:this.props.onClick,overlay:this.props.shouldHollowOverlay,size:s.x.Small,tabIndex:-1,type:this.props.shouldHollowOverlay?s.z.Hollow:s.z.Default},Object(r.d)("Join","JoinButton")):null},t}(a.Component);n.d(t,"a",function(){return o})},f1ZS:function(e,t){},g7wA:function(e,t,n){"use strict";function i(e,t){return l.createElement("a",{key:e,className:"chat-line__message--link",href:t.content.url,target:"_blank",rel:"noreferrer noopener"},t.content.displayText)}function a(e){var t=Object(m.a)("https://twitch.amazon.com/prime",{ref:"subscriptionMessage",channel:e});return l.createElement("a",{className:"chat-line__subscribe--prime",href:t,target:"_blank",rel:"noopener"},Object(c.d)("Twitch Prime","ChatLine"))}function r(e,t){return Object(c.d)("{userLogin} just subscribed with {service}!",{userLogin:e,service:t},"ChatLine")}function s(e,t){return Object(c.d)("{userLogin} just subscribed with a {subTier} sub!",{userLogin:e,subTier:t},"ChatLine")}function o(e){var t=e.getHours()%12;0===t&&(t=12);var n=e.getMinutes(),i=n.toString();return n<10&&(i="0"+i),t+":"+i}t.h=function(){return l.createElement("span",{key:"thankyou"},Object(c.d)("Thank you for your feedback!","ChatLine"))},t.k=function(e,t,n){var a=null,r=e.reduce(function(r,s,o){switch(s.type){case k.a.Text:var c=o>0;return r.concat(function(e,t,n,i,a){var r=[],s="";i&&(s=s.concat(" "));var o=e.content.split(/\s+/);return o.forEach(function(e,i){if(""!==e){var a=i<o.length-1?e+" ":e;(t||n)&&function(e,t,n){var i=e.trim().toLowerCase();return t&&i===t.toLowerCase()||n&&i===n.toLowerCase()}(e,t,n)?(r=(r=r.concat(s)).concat(l.createElement(y._1,{className:"chat-line__message--mention-recipient",display:y.M.InlineFlex,key:""+e+i,"data-a-target":"chat-message-mention"},a)),s=""):s=s.concat(a)}}),r=r.concat(s),l.createElement("span",{key:"chat-line__message-text-"+a,"data-a-target":"chat-message-text"},r)}(s,t,n,c,o));case k.a.Mention:var d="";return function(e){return e.content&&e.content.sender}(s)&&t&&s.content.sender.toLowerCase()===t.toLowerCase()?d="chat-line__message--mention-sender":function(e){return e.content&&e.content.recipient}(s)&&t&&s.content.recipient.toLowerCase()===t.toLowerCase()&&(d="chat-line__message--mention-recipient"),r.concat(l.createElement(y._1,{className:d,display:y.M.InlineFlex,key:o,"data-a-target":"chat-message-mention"},"@"+s.content.recipient));case k.a.Link:return r=r.concat(i(o,s)),e.length>o+1&&e[o+1].type===k.a.Link&&r.push(" "),r;case k.a.Emote:return r=r.concat(l.createElement(g.a,{key:o,emote:s.content})),e.length>o+1&&e[o+1].type===k.a.Emote&&r.push(" "),r;case k.a.ClipLink:return a?r.concat(i(o,s)):(a=l.createElement(f.a,{key:o,slug:s.content.slug}),r);case k.a.VideoLink:return a?r.concat(i(o,s)):(a=l.createElement(b.a,{key:o,id:s.content.id,url:s.content.url}),r);default:return r.concat(l.createElement("span",{key:o}))}},[]);return a&&(r=r.concat(a)),r},t.l=function(e){if(e.type===v.a.Ban)return e.reason?l.createElement("span",{className:"chat-line__moderation--ban-with-reason"},Object(c.d)("{userLogin} has been banned. Reason: {reason}",{userLogin:e.userLogin,reason:e.reason},"ChatLine")):l.createElement("span",{className:"chat-line__moderation--ban"},Object(c.d)("{userLogin}  is now banned from this room.",{userLogin:e.userLogin},"ChatLine"));if(e.reason&&e.duration){var t=Object(c.d)("{userLogin} has been timed out for {duration} seconds. Reason: {reason}",{duration:e.duration,reason:e.reason,userLogin:e.userLogin},"ChatLine");return l.createElement("span",{className:"chat-line__moderation--timeout-with-reason"},t)}return e.duration?l.createElement("span",{className:"chat-line__moderation--timeout"},Object(c.d)("{userLogin} has been timed out for {duration} seconds.",{userLogin:e.userLogin,duration:e.duration},"ChatLine")):void 0},t.v=a,t.a=r,t.b=s,t.s=function(e){return e.isPrime?l.createElement("span",null,r(e.userLogin,a(e.channel))):l.createElement("span",null,s(e.userLogin,e.tier))},t.r=function(e){return"custom"===e.tier?l.createElement("span",null,function(e,t){return Object(c.d)("{userLogin} gifted a subscription to {recipient}!",{userLogin:e,recipient:t},"ChatLine")}(e.userLogin,e.recipient)):l.createElement("span",null,function(e,t,n){return Object(c.d)("{userLogin} gifted a {subTier} sub to {recipient}!",{userLogin:e,subTier:t,recipient:n},"ChatLine")}(e.userLogin,e.tier,e.recipient))},t.d=function(e){var t=e.daysLeft;0===t&&(t=e.hoursLeft);var n={bitsTotal:l.createElement("strong",null,Object(h.e)(e.total,{style:"currency",currency:"USD"})),charityName:l.createElement("strong",null,e.charityName),learnMoreURL:l.createElement("a",{href:e.learnMore,target:"_blank"},e.learnMore),hashtag:l.createElement("strong",null,e.hashtag),timeRemaining:Object(h.e)(t)};return l.createElement("span",null,0===e.daysLeft?function(e){return Object(c.d)("{bitsTotal} total raised so far for {charityName}! {timeRemaining} more hours to show support. Cheer and include {hashtag}. Learn More at {learnMoreURL}",{bitsTotal:e.bitsTotal,charityName:e.charityName,timeRemaining:e.timeRemaining,hashtag:e.hashtag,learnMoreURL:e.learnMoreURL},"ChatLine")}(n):function(e){return Object(c.d)("{bitsTotal} total raised so far for {charityName}! {timeRemaining} more days to show support. Cheer and include {hashtag}. Learn More at {learnMoreURL}",{bitsTotal:e.bitsTotal,charityName:e.charityName,timeRemaining:e.timeRemaining,hashtag:e.hashtag,learnMoreURL:e.learnMoreURL},"ChatLine")}(n))},t.p=function(e){var t=e.enabled?Object(c.d)("This room is now in slow mode. You may send messages every {length} seconds.",{length:e.length},"ChatLine"):Object(c.d)("This room is no longer in slow mode.","ChatLine");return l.createElement("span",null,t)},t.m=function(e){return l.createElement("span",null,e.message)},t.j=function(e){return l.createElement("span",null,e.message)},t.o=function(e){var t;if(e.length>0){var n=e.join(", ");t=Object(c.d)("The moderators of this room are: {moderatorList}",{moderatorList:n},"ChatLine")}else t=Object(c.d)("There are no moderators of this room.","ChatLine");return l.createElement("span",null,t)},t.i=function(e){if(e.enabled){var t=0===e.length?Object(c.d)("This room is in followers-only mode.","ChatLine"):Object(c.d)("This room is now in {length} followers-only mode.",{length:Object(p.a)(60*e.length)},"ChatLine");return l.createElement("span",null,t)}return l.createElement("span",null,Object(c.d)("This room is no longer in followers-only mode.","ChatLine"))},t.g=function(e){return e.enabled?l.createElement("span",null,Object(c.d)("This room is now in emote-only mode.","ChatLine")):l.createElement("span",null,Object(c.d)("This room is no longer in emote-only mode.","ChatLine"))},t.q=function(e){var t=e.enabled?Object(c.d)("This room is now in subscriber-only mode.","ChatLine"):Object(c.d)("This room is no longer in subscriber-only mode.","ChatLine");return l.createElement("span",null,t)},t.e=function(){return l.createElement("span",null,Object(c.d)("Chat was cleared by a moderator","ChatLine"))},t.c=o,t.t=function(e){return l.createElement("span",{key:"timestamp",className:"chat-line__timestamp","data-a-target":"chat-timestamp","data-test-selector":"chat-timestamp"},o(new Date(e)))},t.u=function(e){return l.createElement("span",{key:"timestamp",className:"chat-line__timestamp","data-a-target":"chat-timestamp","data-test-selector":"chat-timestamp"},function(e,t){void 0===t&&(t={});var n=c.n.intl.getLanguageCode()||"en";return Intl.DateTimeFormat(n,t).format(e)}(new Date(e),{hour:"numeric",minute:"numeric"}))},t.w=function(){return l.createElement("span",null,Object(c.d)("The raid has been cancelled.","RaidCancelMessage"))},t.f=function(e){return l.createElement(y._24,{borderMarked:!0,borderBottom:!1},l.createElement(y._1,{className:"chat-line__status",display:y.M.Flex,alignItems:y.c.Center,flexWrap:y.P.NoWrap},l.createElement(y.V,{flexShrink:0},l.createElement("img",{src:u.a,height:"32",width:"32"})),l.createElement(y._1,{margin:{left:.5}},Object(c.d)("<x:boldpurple>{userName}</x:boldpurple>'s Cheer unlocked gifts for <x:bold>{numberOfGifts, number} others</x:bold>!",{userName:e.message.user.userDisplayName,numberOfGifts:e.selectedCount,"x:boldpurple":function(e){return l.createElement(y._34,{type:y._39.Span,bold:!0,color:y.I.Link},e)},"x:bold":function(e){return l.createElement("strong",null,e)}},"Crates"))),l.createElement(y._24,{className:"chat-line__status",background:y.m.Alt2},l.createElement(y._34,{bold:!0,color:y.I.Link},Object(c.d)("Cheer 250+ to unlock gifts for others in chat!","Crates"))))},t.n=function(e,t,n){return 0===n?Object(c.d)("<x:bold>{userName}</x:bold> bought <x:bold>{gameTitle}!</x:bold>",{userName:e,gameTitle:t,"x:bold":function(e){return l.createElement("strong",null,e)}},"PurchaseNoticeSystemMessage"):Object(c.d)("{numCrates, plural, one {<x:bold>{userName}</x:bold> bought <x:bold>{gameTitle}</x:bold> and opened a <x:bold>Twitch Crate!</x:bold>} other {<x:bold>{userName}</x:bold> bought <x:bold>{gameTitle}</x:bold> and opened # <x:bold>Twitch Crates!</x:bold>}}",{numCrates:n,userName:e,gameTitle:t,"x:bold":function(e){return l.createElement("strong",null,e)}},"PurchaseNoticeSystemMessage")};var l=n("U7vG"),c=(n.n(l),n("6sO2")),d=n("cv4W"),u=n.n(d),p=n("FsFC"),m=n("yDzg"),h=n("J4ib"),g=n("hXeO"),f=n("5vPJ"),b=n("kBA+"),v=n("qkCi"),k=n("mwvJ"),y=n("Odds")},gGMi:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return r});var i;!function(e){e.Everyone="EVERYONE",e.Moderator="MODERATOR",e.Subscriber="SUBSCRIBER"}(i||(i={}));var a,r=(a={},a[i.Everyone]="Everyone",a[i.Moderator]="Mods",a[i.Subscriber]="Subs",a)},gwjw:function(e,t){},h4Qz:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Whispers_Thread_WhisperThread"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"Cursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"whisperThread"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userLastMessageRead"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sentAt"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"participants"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"chatColor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"70"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"spamInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"lastMarkedNotSpamAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"likelihood"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"isMuted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isArchived"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"messages"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"20"}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emoteID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"from"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"to"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"from"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"sentAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"editedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"deletedAt"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"unreadMessagesCount"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:449}};n.loc.source={body:"query Whispers_Thread_WhisperThread($id: ID! $cursor: Cursor) {\nwhisperThread(id: $id) {\nid\nuserLastMessageRead {\nid\nsentAt\n}\nparticipants {\nid\nchatColor\ndisplayName\nprofileImageURL(width: 70)\nlogin\n}\nspamInfo {\nlastMarkedNotSpamAt\nlikelihood\n}\nisMuted\nisArchived\nmessages(first: 20 after: $cursor) {\nedges {\ncursor\nnode {\nid\ncontent {\ncontent\nemotes {\nid\nemoteID\nsetID\nfrom\nto\n}\n}\nfrom {\nid\n}\nsentAt\neditedAt\ndeletedAt\n}\n}\n}\nunreadMessagesCount\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},hXeO:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("U7vG"),a=(n.n(i),n("8RKZ")),r=function(e){var t,n=e.emote,r=n.alt||"";return n.cheerAmount&&(r+=" "+n.cheerAmount.toString(),t=i.createElement("strong",{className:"chat-line__message--cheer-amount",style:{color:n.cheerColor}},n.cheerAmount)),i.createElement(a.a,{alt:r,cheerText:t,className:"chat-line__message--emote",srcKey:"1x",srcSet:n.images})}},hcyD:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("TToO"),a=n("6sO2"),r=n("vH/s"),s=n("l7/s"),o=(n.n(s),n("QFW6")),l=this,c=function(e){return i.__awaiter(l,void 0,void 0,function(){var t,n,l,c;return i.__generator(this,function(d){switch(d.label){case 0:t=null,d.label=1;case 1:return d.trys.push([1,3,,4]),[4,a.n.apollo.client.query({query:s,variables:{id:e.channelID}})];case 2:return t=d.sent(),[3,4];case 3:return n=d.sent(),a.i.error(n,"ChatEvent query failed."),[3,4];case 4:return t&&t.data||a.i.warn("ChatEvent query failed; Chat tracking data sent may be incomplete."),l=t&&t.data&&t.data.user||null,c=i.__assign({},Object(o.a)(e),{broadcast_id:a.m.getVideoPlayerTrackingData().broadcastID,channel_id:e.channelID,game:l&&l.stream&&l.stream.game&&l.stream.game.name,live:!!(l&&l.stream&&l.stream.id.length>0),partner:l&&l.isPartner||!1,play_session_id:a.m.getVideoPlayerTrackingData().playSessionID,player:e.player,ritual_nca:e.fromNewChatterRitual||!1,sub_only_mode:e.subOnlyMode}),a.m.track(r.SpadeEventType.Chat,c),[2]}})})}},hvzu:function(e,t,n){"use strict";function i(e){var t=function(e){var t=e.split(/\s+/),n=[];return t.forEach(function(e,i){var a=/([^\w@#%\-+=:~])?(?:(https?:\/\/)?(?:[\w@#%\-+=:~]+\.)+[a-z]{2,6}(?:\/[\w./@#%&()\-+=:?~]*)?)([^\w./@#%&()\-+=:?~]|\s|$)/g,s=a.exec(e);if(s){var o=s.index,l=!1,c=!1,d=s[1];d&&(o+=1,/\s/.test(d)||(l=!0)),0!==o&&n.push({type:r.Text,content:(c?" ":"")+e.slice(0,o)+(l?" ":"")}),c=!1;var u=a.lastIndex,p=s[3];p&&(u-=1,/\s/.test(p)||(c=!0));var m=e.slice(o,u);if(m.indexOf("@")>-1&&(-1===m.indexOf("/")||m.indexOf("@")<m.indexOf("/")))n.push({type:r.Link,content:{displayText:m,url:"mailto:"+m,shouldOpenInNewTab:!1}});else{var h=(s[2]?"":"https://")+e.slice(o,u);n.push({type:r.Link,content:{displayText:e.slice(o,u),shouldOpenInNewTab:!0,url:h}})}var g=e.slice(u),f="";i<t.length-1&&(f=" "),g&&n.push({type:r.Text,content:(c?" ":"")+g+f})}else{var b=n.length&&n[n.length-1];if(f="",i<t.length-1&&(f=" "),b&&b.type===r.Text)b.content+=e+f;else{var v="";i&&(v=" "),n.push({type:r.Text,content:v+e+f})}}}),n}(e);return t.reduce(function(e,n,i){if(n.type===r.Text)e.push(n.content);else if(n.type===r.Link){t[i-1]&&t[i-1].type===r.Link&&e.push(" "),e.push(s.createElement("a",{key:i,href:n.content.url,target:"__blank"},n.content.displayText))}return e},[])}function a(e,t,n){var a=[],r=0,p=Object(c.d)(e);if(t.forEach(function(t){var n=t.from,o=t.to,m={themed:!1,sources:{"1x":Object(c.e)(""+t.emoteID,1),"2x":Object(c.e)(""+t.emoteID,2),"4x":Object(c.e)(""+t.emoteID,4)}};if(n>r){var h=p?p.slice(r,n).join(""):e.slice(r,n);a.push(s.createElement("span",{key:"str-"+r,"data-a-target":u,className:"thread-message__message--part"},i(h)))}var g=p?p.slice(n,o+1).join(""):e.slice(n,o+1);a.push(s.createElement(l.a,{key:"emote-"+r,tooltipDirection:d._44.Top,className:"thread-message__message--emote",srcSet:m,srcKey:"1x",alt:g})),r=o+1}),r<e.length){var m=p?p.slice(r,p.length).join(""):e.slice(r,e.length);a.push(s.createElement("span",{key:"str-"+r,"data-a-target":u,className:"thread-message__message--part"},i(m)))}if(n){var h=Object(o.d)("edited","ThreadMessage"),g=Object(o.d)("{timestamp, date, full} {timestamp, time, long}",{timestamp:new Date(n)},"ThreadMessage");a.push(s.createElement(d.V,{key:"editedAt",margin:{left:1}},s.createElement(d._34,{type:d._39.Span,className:"thread-message__message--edited",title:g,color:d.I.Alt2},"("+h+")")))}return a}var r,s=n("U7vG"),o=n("6sO2"),l=n("8RKZ"),c=n("l21v");!function(e){e[e.Text=0]="Text",e[e.Link=1]="Link"}(r||(r={}));var d=n("Odds");t.a=a,n.d(t,"f",function(){return p}),n.d(t,"e",function(){return m}),n.d(t,"d",function(){return h}),n.d(t,"c",function(){return g}),n.d(t,"b",function(){return f});var u="whisper-message-part",p=function(e){var t=a(e.content,e.emotes,e.editedAt);if(e.deletedAt)return null;var n=e.from&&e.from.chatColor||"",i=e.from&&e.from.displayName||s.createElement(d._34,{type:d._39.Span,italic:!0},Object(o.d)("Unknown","ThreadMessage"));return s.createElement(d._1,{padding:{x:1,y:.5}},s.createElement("span",{className:"thread-message__message--user-name","data-a-target":"whisper-message-name",style:{color:n}},i),s.createElement("span",null,": "),t)},m=function(){return s.createElement(d._1,{padding:{y:.5,x:1}},Object(o.d)("Please don't share passwords or personal information.","whispers"))},h=function(e){var t=new Date,n=Object(o.d)("Today, {timestamp, time, medium}",{timestamp:e.timestamp},"ThreadMessage"),i=Object(o.d)("{timestamp, time, medium}",{timestamp:e.timestamp},"ThreadMessage"),a=e.timestamp.toDateString()===t.toDateString()?n:i;return s.createElement(d._1,{padding:{y:1},textAlign:d._35.Center},""+a)},g=function(e){return s.createElement(d._1,{padding:{y:.5,x:1}},s.createElement(d._34,{type:d._39.Span,color:d.I.Alt2},e.content))},f=function(){return s.createElement(d._1,{textAlign:d._35.Center,padding:{y:.5}},Object(o.d)("New Whispers","whispers"))}},iMOk:function(e,t,n){"use strict";function i(e){var t,n=Object(r.d)("{bitsAmount} Bits",{bitsAmount:e.count.toString()},"Bits--BitsCount");if(e.withImage){var i=e.bitsConfig.indexedActions[o.g];i||(i=Object(c.b)());var u=i.orderedTiers.find(function(t){return t.bits<=e.count});if(u){var p=Object(l.b)(u);return void 0!==e.themeOverride&&(e.themeOverride===s.a.Light?p.dark=p.light:p.light=p.dark),t=a.createElement(d.a,{className:"bits-count--img",sources:p}),a.createElement("strong",{className:"bits-count","data-a-target":"bits-count"},a.createElement("span",null,t," ",e.withText?n:""))}}return a.createElement("strong",{className:"bits-count","data-a-target":"bits-count"},a.createElement("span",null,n))}var a=n("U7vG"),r=n("6sO2"),s=n("NXs7"),o=n("3iBR"),l=n("iydZ"),c=n("CFVp"),d=n("qe65");n("1pvm");n.d(t,"a",function(){return i})},iWdz:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"BitsCard_Bits"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bitsBalance"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cheer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"settings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"emoteMinimumBits"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cheerMinimumBits"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"recentMinimumBits"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"event"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bitsBadge"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"totalBits"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nextBits"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"progress"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"current"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"next"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"tournament"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"teams"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:381}};i.loc.source={body:'#import "twilight/features/badges/models/badge-fragment.gql"\nquery BitsCard_Bits($name: ID!) {\ncurrentUser {\nid\nbitsBalance\nlogin\n}\nuser(id: $name) {\nid\ndisplayName\ncheer {\nid\nsettings {\nemoteMinimumBits\ncheerMinimumBits\nrecentMinimumBits\nevent\n}\n}\nself {\nbitsBadge {\nid\ntotalBits\nnextBits\nprogress\ncurrent {\n...badge\n}\nnext {\n...badge\n}\n}\n}\ntournament {\nid\nteams {\nid\nname\n}\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(function(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})}(n("QU+n").definitions)),e.exports=i},iYmP:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"FriendButton_CreateFriendRequest"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CreateFriendRequestInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createFriendRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:131}};n.loc.source={body:"mutation FriendButton_CreateFriendRequest($input: CreateFriendRequestInput!) {\ncreateFriendRequest(input: $input) {\nuser {\nid\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},ieBa:function(e,t,n){"use strict";var i=n("RH2O"),a=n("TToO"),r=n("U7vG"),s=n("rCmJ"),o=n("6sO2"),l=n("Odds"),c=function(e){return r.createElement(l.v,{icon:l._15.Emoticons,ariaLabel:Object(o.d)("Emote picker","EmotePickerButton"),type:l.w.Secondary,onClick:e.onClick,"data-a-target":"emote-picker-button"})},d=n("P+j/"),u=n("CSlQ"),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={hasInteracted:!1,isEmotePickerMenuVisible:!1,isEmotePickerButtonVisible:!1},t.onClickOut=function(){t.setState({isEmotePickerMenuVisible:!1})},t.onClickEmote=function(e,n){t.props.onClickEmote&&t.props.onClickEmote(e,n)},t.toggleEmotePicker=function(){t.setState(function(e){return{isEmotePickerMenuVisible:!e.isEmotePickerMenuVisible}})},t.onEmotePickerDataLoaded=function(e){e&&t.setState({isEmotePickerButtonVisible:!0})},t.onInteraction=function(){return t.setState({hasInteracted:!0})},t}return a.__extends(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive(),this.props.inputRef&&(this.props.inputRef.addEventListener("mouseenter",this.onInteraction),this.props.inputRef.addEventListener("focus",this.onInteraction))},t.prototype.componentWillUnmount=function(){this.props.inputRef&&(this.props.inputRef.removeEventListener("mouseenter",this.onInteraction),this.props.inputRef.removeEventListener("focus",this.onInteraction))},t.prototype.render=function(){var e=null;this.state.isEmotePickerButtonVisible&&(e=r.createElement(c,{onClick:this.toggleEmotePicker}));var t=null;this.hasInteractedOrPageload&&(t=r.createElement(d.a,{channelOwnerID:this.props.channelOwnerID,onClickEmote:this.onClickEmote,onLoad:this.onEmotePickerDataLoaded,toggleVisibility:this.toggleEmotePicker,visible:this.state.isEmotePickerMenuVisible,direction:this.props.direction}));var n=r.createElement(l._1,a.__assign({className:"emote-picker-and-button"},this.layoutProps),e,t);return this.props.shouldCloseOnClickOut?r.createElement(s.a,{onClickOut:this.onClickOut},n):n},Object.defineProperty(t.prototype,"hasInteractedOrPageload",{get:function(){return!(!this.props.firstPageLoaded&&!this.state.hasInteracted)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"layoutProps",{get:function(){var e={attachTop:!!this.props.attachTop,attachRight:!!this.props.attachRight,attachBottom:!!this.props.attachBottom,attachLeft:!!this.props.attachLeft,padding:this.props.padding};return this.props.position&&this.props.position in l._8&&(e.position=this.props.position),e},enumerable:!0,configurable:!0}),t}(r.Component),m=Object(u.d)("EmotePicker")(p),h=Object(i.b)(function(e){return{firstPageLoaded:e.session.firstPageLoaded}})(m),g=n("nEoF");n.d(t,"a",function(){return h}),n.d(t,"c",function(){return d.a}),n.d(t,!1,function(){return g.b}),n.d(t,!1,function(){return g.a}),n.d(t,"b",function(){return c})},imaO:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"RedeemNewChatterToken"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"RedeemRitualTokenInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"redeemRitualToken"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ritualToken"},directives:[]}]}}]}}]}}],loc:{start:0,end:182}};i.loc.source={body:'#import "./ritual-token-fragment.gql"\nmutation RedeemNewChatterToken($input: RedeemRitualTokenInput!) {\nredeemRitualToken(input: $input) {\nerror {\ncode\n}\ntoken {\n...ritualToken\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(function(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})}(n("j/3B").definitions)),e.exports=i},iydZ:function(e,t,n){"use strict";function i(e,t,n){void 0===n&&(n=!0);var i=n?"animated":"static";return t?{themed:!0,dark:(a={},a[t+"x"]=e.indexedImages.DARK[i].get(t),a),light:(r={},r[t+"x"]=e.indexedImages.LIGHT[i].get(t),r)}:{themed:!0,dark:{"1x":e.indexedImages.DARK[i].get(1),"1.5x":e.indexedImages.DARK[i].get(1.5),"2x":e.indexedImages.DARK[i].get(2),"3x":e.indexedImages.DARK[i].get(3),"4x":e.indexedImages.DARK[i].get(4)},light:{"1x":e.indexedImages.LIGHT[i].get(1),"1.5x":e.indexedImages.LIGHT[i].get(1.5),"2x":e.indexedImages.LIGHT[i].get(2),"3x":e.indexedImages.LIGHT[i].get(3),"4x":e.indexedImages.LIGHT[i].get(4)}};var a,r}n.d(t,"a",function(){return o}),t.c=function(e,t){var n=[],o=t.indexedActions,l=new RegExp("^("+Object.keys(o).join("|")+")(\\d+)$","i"),c=e.split(/\s+/);return c.forEach(function(e,t){var d=l.exec(e);if(d){var u=d[1].toLowerCase(),p=+d[2],m=o[u];if(m||u!==a.g||(m=Object(r.b)()),m){var h=m.orderedTiers.find(function(e){return e.bits<=p});!h&&p&&(h=m.orderedTiers[0]),h&&n.push({type:s.a.Emote,content:{images:i(h),alt:m.prefix,cheerAmount:p,cheerColor:h.color}})}}else{var g=n.length&&n[n.length-1],f="";if(t<c.length-1&&(f=" "),g&&g.type===s.a.Text)g.content+=e+f;else{var b="";t&&(b=" "),n.push({type:s.a.Text,content:b+e+f})}}}),n},t.b=i;var a=n("3iBR"),r=n("CFVp"),s=n("mwvJ"),o={indexedActions:{},orderedActions:[]}},"j/3B":function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ritualToken"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"RitualToken"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"expiresAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]}]}}],loc:{start:0,end:64}};n.loc.source={body:"fragment ritualToken on RitualToken {\nid\nexpiresAt\nstatus\ntype\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"j7/Y":function(e,t,n){"use strict";function i(e){return function(t){var n=function(n){function i(t){var i=n.call(this,t)||this;return i.tracked=!1,i.referenceTracking={},i.trackPageview=function(){if(!(i.tracked||e.skip&&e.skip(i.props))){i.tracked=!0;var t={};"function"==typeof e.properties?t=e.properties(i.props):e.properties&&(t=a.__assign({},e.properties));var n=a.__assign({},i.props);n.location&&n.location.state&&(t.medium=n.location.state.medium,t.content=n.location.state.content,t.content_index=n.location.state.content_index);var r=i.referenceTracking,s=r.content,o=r.medium,c=r.content_index;l.n.tracking.trackPageview(a.__assign({content:s,medium:o,content_index:c,location:e.location},t))}},l.i.debug("pageViewTracking",e),t.rootLatencyTracker?t.rootLatencyTracker.setLocation(e.location):l.i.warn("No latency tracker exists! This means no data will be sent to Spade.",e),i}return a.__extends(i,n),i.prototype.componentDidMount=function(){var e=this;this.referenceTracking=this.stripTTParams(this.props.history.location),this.trackPageview(),this.props.history.listen(function(t,n){"REPLACE"!==n&&(e.tracked=!1,e.referenceTracking={})})},i.prototype.componentDidUpdate=function(){this.trackPageview()},i.prototype.render=function(){return s.createElement(t,a.__assign({},this.props))},i.prototype.stripTTParams=function(e){var t=""!==e.search?r.parse(e.search):{},n={content:t.tt_content,content_index:t.tt_content_index,medium:t.tt_medium};if(delete t.tt_content,delete t.tt_content_index,delete t.tt_medium,n.medium||n.content){var i="",a=r.stringify(t);a.length>0&&(i="?"+a),this.props.history.replace({pathname:e.pathname,hash:e.hash,search:i})}return n},i}(s.Component);return Object(o.f)(n)}}var a=n("TToO"),r=n("OAwv"),s=n("U7vG"),o=n("F8kA"),l=n("6sO2");n.d(t,"a",function(){return i})},jF7o:function(e,t,n){"use strict";t.a=function(e,t){if(e)var n=setInterval(function(){var i=!1,a=!1;try{i=e.closed,a=!!e.success}catch(e){}if(i||a){t(a);try{e.close()}catch(e){}clearInterval(n)}},500);else i.i.warn("[onPopupClose] Attempted to observe a window that failed to open.")};var i=n("6sO2")},jML9:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"RaidNotification_User"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:43}};n.loc.source={body:"query RaidNotification_User {\nuser {\nid\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},jPU6:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"RecentRaidsModActions_BanUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"BanUserFromChatRoomInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"banUserFromChatRoom"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ban"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isPermanent"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:136}};n.loc.source={body:"mutation RecentRaidsModActions_BanUser($input: BanUserFromChatRoomInput!) {\nbanUserFromChatRoom(input: $input) {\nban {\nisPermanent\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},jYA1:function(e,t,n){"use strict";var i=n("TToO"),a=n("U7vG"),r=n("6sO2"),s=3,o=n("CwIZ"),l=n("Odds"),c="subscribe-button__subscribe-with-prime",d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isSubscribing:!1,primeSubFailure:!0},t.handleStartPrimeTrialClick=function(){t.props.reportSubMenuAction({action:o.a.ClickSignupForPrime})},t.handleSubWithPrimeClick=function(){t.setState({isSubscribing:!0},function(){return i.__awaiter(t,void 0,void 0,function(){var e;return i.__generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,4,5]),this.props.authToken&&this.props.userHasPrime&&this.props.subLogin?[4,function(e,t){return i.__awaiter(this,void 0,void 0,function(){var n,a,o,l,c;return i.__generator(this,function(i){switch(i.label){case 0:n="https://api.twitch.tv/api/premium/credit/spend_token?channel_id="+e,a=1,i.label=1;case 1:if(!(a<=s))return[3,7];i.label=2;case 2:return i.trys.push([2,5,,6]),[4,fetch(n,{method:"POST",headers:{"Client-ID":r.n.config.legacyClientID,Accept:"application/json; charset=UTF-8","content-type":"application/json; charset=UTF-8",Authorization:"OAuth "+t}})];case 3:return o=i.sent(),[4,o.body];case 4:return l=i.sent(),[2,l];case 5:if(c=i.sent(),a===s)throw c;return[3,6];case 6:return++a,[3,1];case 7:return[2]}})})}(this.props.subLogin,this.props.authToken)]:[3,2];case 1:t.sent(),this.props.onSubscribedWithPrime(),t.label=2;case 2:return[3,5];case 3:return e=t.sent(),r.i.error(e,"Failed to subscribe with Prime",{subLogin:this.props.subLogin}),this.setState({isSubscribing:!1,primeSubFailure:!0}),[3,5];case 4:return this.setState({isSubscribing:!1}),[7];case 5:return[2]}})})})},t}return i.__extends(t,e),t.prototype.render=function(){var e=this.props.isSubscribedWithPrime&&this.props.canPrimeSubscribe;if(!this.props.userHasPrime){var t=Object(r.d)("Start Your Free Trial","SubscribeWithPrime");return a.createElement(l.u,i.__assign({ariaLabel:t,"data-test-selector":c,icon:l._15.Crown,linkTo:r.a.tryPrimeURI,onClick:this.handleStartPrimeTrialClick},Object(l._52)(this.props),{targetBlank:!0}),t)}if(this.props.isSubscribed&&!e){var n=Object(r.d)("Subscribed","SubscribeWithPrime");return a.createElement(l.u,i.__assign({ariaLabel:n,"data-test-selector":c,disabled:!0,icon:l._15.Crown},Object(l._52)(this.props)),n)}if(!this.props.canPrimeSubscribe){var s=Object(r.d)("Not yet!","SubscribeWithPrime");return a.createElement(l.u,i.__assign({ariaLabel:s,"data-test-selector":c,disabled:!0,icon:l._15.Crown},Object(l._52)(this.props)),s)}var o=e?Object(r.d)("Resubscribe Free","SubscribeWithPrime"):Object(r.d)("Subscribe Free","SubscribeWithPrime");return a.createElement(l.u,i.__assign({ariaLabel:o,"data-test-selector":c,disabled:this.state.isSubscribing,icon:l._15.Crown,state:this.state.isSubscribing?l.y.Loading:l.y.Default,onClick:this.handleSubWithPrimeClick},Object(l._52)(this.props)),o)},t}(a.Component);n.d(t,!1,function(){return c}),n.d(t,"a",function(){return d})},jetF:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("TToO"),a=n("U7vG"),r=(n.n(a),n("HM6l")),s=n("Odds"),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={showBalloon:!!t.props.openByDefault,hasInteracted:!!t.props.openByDefault},t.toggleBalloonId=Object(r.a)(),t.handleButtonClick=function(){t.setState(function(e){return{showBalloon:!e.showBalloon,hasInteracted:!0}},function(){t.props.onToggle&&t.props.onToggle(!t.state.showBalloon)})},t.handleGlobalClick=function(e){e.target.matches('[data-toggle-balloon-id="'+t.toggleBalloonId+'"] *')||t.setState({showBalloon:!1},function(){t.props.onToggle&&t.props.onToggle(!t.state.showBalloon)})},t.onMouseEnter=function(){t.state.hasInteracted||t.setState({hasInteracted:!0})},t}return i.__extends(t,e),t.prototype.componentDidMount=function(){this.props.openByDefault&&document.addEventListener("click",this.handleGlobalClick,!0)},t.prototype.componentWillUpdate=function(e,t){this.state.showBalloon!==t.showBalloon&&(t.showBalloon?document.addEventListener("click",this.handleGlobalClick,!0):document.removeEventListener("click",this.handleGlobalClick,!0))},t.prototype.componentWillUnmount=function(){document.removeEventListener("click",this.handleGlobalClick,!0)},t.prototype.render=function(){var e=a.Children.toArray(this.props.children);if(2!==e.length)throw new Error("ToggleBalloonWrapper should only be given two children: a clickable and a Balloon");var t=e[0],n=e[1];if(n.type!==s.p)throw new Error("ToggleBalloonWrapper needs a Balloon as its second child element");var r=a.cloneElement(t,{onClick:this.handleButtonClick}),o=null;(this.state.hasInteracted||this.props.alwaysMountBalloonContent)&&(o=a.cloneElement(n,{show:this.state.showBalloon}));var l=r;return this.props.tooltipProps&&(l=a.createElement(s._42,i.__assign({},this.props.tooltipProps),r)),a.createElement(s._1,{"data-toggle-balloon-id":this.toggleBalloonId,display:this.props.display,position:s._8.Relative},a.createElement("div",{style:{display:"inherit"},onMouseEnter:this.onMouseEnter,"data-test-selector":"toggle-balloon-wrapper__mouse-enter-detector"},l),o)},t.prototype.toggleBalloon=function(e){void 0===e&&(e=!this.state.showBalloon),this.setState({showBalloon:e,hasInteracted:!0})},t}(a.Component)},jxGs:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a}),n.d(t,"d",function(){return r}),n.d(t,"e",function(){return s}),n.d(t,"c",function(){return o});var i="AD",a="BUNDLE",r="first_time_purchase",s="single_purchase",o="black_friday_2017"},"kBA+":function(e,t,n){"use strict";var i=n("TToO"),a=n("U7vG"),r=n("6sO2"),s=n("7vx8"),o=n("SZoP"),l=n("GxDs"),c=n("Odds"),d=n("s+oZ"),u={ERROR:"video-chat-card-error"},p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.render=function(){var e=this.props.data,t=e.video,n=e.error,i=e.loading;if(n||t&&!t.owner)return a.createElement(l.a,{error:{title:Object(r.d)("Something went wrong","VideoChatCard"),description:Object(r.d)("We couldn't find that video","VideoChatCard")}});if(i||!t)return a.createElement(l.a,null);var s=a.createElement(c._34,null,Object(r.c)(new Date(t.publishedAt),"medium"),a.createElement("span",null," · "),Object(o.a)(t.owner.login,t.owner.displayName));return a.createElement(l.a,{data:{title:t.title,description:s,previewImageURL:t.previewThumbnailURL,contentURL:this.props.url}})},t}(a.Component),m=function(e){return{variables:{videoID:e.id},notifyOnNetworkStatusChange:!0,fetchPolicy:"cache-first"}},h=Object(s.a)(d,{options:m})(p);n.d(t,!1,function(){return"https://static-cdn.jtvnw.net/emoticons/v1/58765/2.0"}),n.d(t,!1,function(){return u}),n.d(t,!1,function(){return p}),n.d(t,!1,function(){return m}),n.d(t,"a",function(){return h})},kjfG:function(e,t){},l21v:function(e,t,n){"use strict";function i(e,t){return void 0===t&&(t=15),"number"!=typeof v[e]&&(v[e]=Math.floor(Math.random()*t)),b[v[e]]}function a(e,t,n,i,a,l){void 0===t&&(t=[]);var d=[],u=0,m=r(e);t.forEach(function(t){var r=m?m.slice(u,t.startIndex).join(""):e.slice(u,t.startIndex);r&&(d=n?d.concat(s(r,l,a,i)):d.concat(o(r,l,a))),d.push({type:p.a.Emote,content:c.__assign({alt:m?m.slice(t.startIndex,t.endIndex).join(""):e.slice(t.startIndex,t.endIndex)},t.data)}),u=t.endIndex});var h=m?m.slice(u).join(""):e.slice(u);return h&&(d=n?d.concat(s(h,l,a,i)):d.concat(o(h,l,a))),d}function r(e){return e.match(/[^\uD800-\uDFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDFFF]/g)}function s(e,t,n,i){if(!i)return o(e,t,n);var a=Object(u.c)(e,i).map(function(e){return e.type===p.a.Text?o(e.content,t,n):e});return[].concat.apply([],a)}function o(e,t,n){var i=/^(?:(https?:\/\/)?(?:[\w@#%\-+=:~]+\.)+[a-z]{2,6}(?:\/[\w./@#%&()\-+=:?~]*)?)$/g,a=/([^\w@#%\-+=:~])?(@)([^\u0000-\u007F]+|\w+)+([^\w./@#%&()\-+=:?~]|\s|$)/g,r=[],s=e.split(/\s+/);return s.forEach(function(e,o){i.lastIndex=0;var l=i.exec(e);a.lastIndex=0;var c=a.exec(e);if(l){var u=l.index;0!==u&&r.push({type:p.a.Text,content:""+e.slice(0,u)});var h=i.lastIndex;if(n)r.push({type:p.a.Text,content:" <"+Object(d.d)("deleted link","CreateMessageData")+"> "});else{var f=(l[1]?"":"https://")+e.slice(u,h);if(function(e){return void 0===e&&(e=""),m.test(e)&&!e.includes("clips.twitch.tv/2017/")}(f)){var b=function(e){void 0===e&&(e="");var t=e.match(m);if(null===t)return"";if(t&&t.length>0&&void 0!==t.index)return t[1];return""}(f);r.push({type:p.a.ClipLink,content:{slug:b,url:f,displayText:e.slice(u,h)}})}else if(Object(g.a)(f)){var v=Object(g.b)(f);r.push({type:p.a.VideoLink,content:{id:v,url:f,displayText:e.slice(u,h)}})}else r.push({type:p.a.Link,content:{displayText:e.slice(u,h),url:f}})}var k=e.slice(h),y="";o<s.length-1&&(y=" "),k&&r.push({type:p.a.Text,content:""+k+y})}else{if(!c){var _=r.length&&r[r.length-1];y="";if(o<s.length-1&&(y=" "),_&&_.type===p.a.Text)_.content+=e+y;else{var C="";o&&(C=" "),r.push({type:p.a.Text,content:C+e+y})}return}var S=c[3];r.push({type:p.a.Mention,content:{sender:t,recipient:S}})}}),r}function l(e,t){return"https://static-cdn.jtvnw.net/emoticons/v1/"+e+"/"+Math.min(Math.ceil(t),3)+".0"}var c=n("TToO"),d=n("6sO2"),u=n("iydZ"),p=n("mwvJ"),m=new RegExp("(?:^|\\s)(?:https?://)?clips.twitch.tv/(\\w+)(?:/)?(\\w+)?(?:/edit)?(?:$|\\s)?"),h=n("YhVV"),g=n("3KVC"),f=n("e1CU");t.a=function(e,t,n,r,s,o){void 0===o&&(o=!1);var d;d=s?Object(h.b)(e,s):function(e){var t=[];return e&&Object.keys(e).forEach(function(n){var i=e[n];i.forEach(function(e){t[e.startIndex]={startIndex:e.startIndex,endIndex:e.endIndex+1,data:{images:{themed:!1,sources:{"1x":l(n,1),"2x":l(n,2),"4x":l(n,4)}}}}})}),t}(t.emotes);var u=Object(f.a)(t.displayName,t.username);return{badges:t.badges||{},bits:t.bits,user:c.__assign({},u,{userLogin:t.username,userID:t.userID,userType:t.userType,color:t.color||i(t.userID)}),messageParts:e?a(e,d,t.bits,n,r,u.userDisplayName):[],deleted:o,timestamp:Date.now()}},t.b=i,t.f=a,t.d=r,t.c=o,t.e=l;var b=["#FF0000","#0000FF","#008000","#B22222","#FF7F50","#9ACD32","#FF4500","#2E8B57","#DAA520","#D2691E","#5F9EA0","#1E90FF","#FF69B4","#8A2BE2","#00FF7F"],v={}},l4QG:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={Away:"AWAY",Busy:"BUSY",Idle:"IDLE",Invisible:"INVISIBLE",Offline:"OFFLINE",Online:"ONLINE"}},l669:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Chat_UnbanUserFromChatRoom"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UnbanUserFromChatRoomInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unbanUserFromChatRoom"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:132}};n.loc.source={body:"mutation Chat_UnbanUserFromChatRoom($input: UnbanUserFromChatRoomInput!) {\nunbanUserFromChatRoom(input: $input) {\nerror {\ncode\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"l7/s":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Core_Services_Spade_ChatEvent_User"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isPartner"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"stream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:116}};n.loc.source={body:"query Core_Services_Spade_ChatEvent_User($id: ID!) {\nuser(id: $id) {\nid\nisPartner\nstream {\nid\ngame {\nid\nname\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},lK86:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GiftSubscribeButton_Gift_Eligibility"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"recipientLogin"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"subProductId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"recipientLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"canGift"},arguments:[{kind:"Argument",name:{kind:"Name",value:"product"},value:{kind:"Variable",name:{kind:"Name",value:"subProductId"}}}],directives:[]}]}}]}}]}}],loc:{start:0,end:171}};n.loc.source={body:"query GiftSubscribeButton_Gift_Eligibility($recipientLogin: String $subProductId: String!) {\nuser(login: $recipientLogin) {\nid\nself {\ncanGift(product: $subProductId)\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},m4HT:function(e,t,n){"use strict";t.a=function(e,t){return parseInt(t,10)<parseInt(e,10)?t+"_"+e:e+"_"+t},t.b=function(e,t){return e.split("_").find(function(e){return e!==t})||null}},"mR/9":function(e,t){},mRH2:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ReportUserModal_ReportUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ReportContentInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reportContent"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"contentID"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:111}};n.loc.source={body:"mutation ReportUserModal_ReportUser($input: ReportContentInput!) {\nreportContent(input: $input) {\ncontentID\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},mbxv:function(e,t,n){"use strict";var i=n("TToO"),a=n("U7vG"),r=n("+V/3"),s=n("Odds"),o=(n("2IkU"),n("6sO2")),l=n("vH/s"),c=function(e){var t=Date.now()/1e3;e.badge_type=e.badge_type.toLowerCase().replace(/( |\s)/g,"_"),o.n.tracking.track(l.SpadeEventType.ChatBadgeClick,Object.assign({client_time:t},e))};n.d(t,"a",function(){return d});var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isHovering:!1},t.onMouseOver=function(){t.setState({isHovering:!0})},t.onMouseOut=function(){t.setState({isHovering:!1})},t.onBadgeClickHandler=function(){c({badge_type:t.props.badge.title,badge_url_target:t.targetURL})},t}return i.__extends(t,e),t.prototype.render=function(){var e=this.props.badge,t=e.title,n=e.image1x,i=e.image2x,r=e.image4x,o=a.createElement("img",{alt:t,className:"chat-badge",src:n,srcSet:n+" 1x, "+i+" 2x, "+r+" 4x",onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut});return this.targetURL=this.getTargetURL(),""!==this.targetURL&&(o=a.createElement("a",{href:this.targetURL,onClick:this.onBadgeClickHandler,target:"_blank","data-a-target":"chat-badge"},o)),this.state.isHovering?a.createElement(s._42,{align:s._43.Left,"data-a-target":"chat-badge",display:s.M.Inline,key:n,label:t,offsetY:"0.9rem"},o):o},t.prototype.getTargetURL=function(){var e=this.props.badge;switch(e.clickAction){case r.d:return e.clickURL;case r.b:return e.channelName?this.getSubscriberLink():"";case r.c:return"https://www.twitch.tv/products/turbo?ref=chat_badge";default:return""}},t.prototype.getSubscriberLink=function(){return"https://www.twitch.tv/"+this.props.badge.channelName+"/subscribe?ref=in_chat_subscriber_link"},t}(a.Component)},mmQh:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ReportUserModal_ReportUserCommunity"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ReportUserInCommunityInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reportUserInCommunity"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:138}};n.loc.source={body:"mutation ReportUserModal_ReportUserCommunity($input: ReportUserInCommunityInput!) {\nreportUserInCommunity(input: $input) {\nuser {\nid\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},mqvl:function(e,t,n){"use strict";t.a=function(e,t){switch(e.type){case i.b.Playing:return{type:i.a.Playing,"Symbol(id)":t,__typename:"Playing",game:{id:e.game_id,name:e.game,"Symbol(id)":t+".game",__typename:"Game"}};case i.b.Streaming:var n={type:i.a.Streaming,"Symbol(id)":t,__typename:"Streaming",stream:{id:e.channel_id,game:null,"Symbol(id)":t+".stream",__typename:"Stream"}};return e.game&&e.game_id&&(n.stream.game={id:e.game_id,name:e.game,"Symbol(id)":t+".stream.game",__typename:"Game"}),n;case i.b.Watching:return{type:i.a.Watching,"Symbol(id)":t,__typename:"Watching",user:{id:e.channel_id,login:e.channel_login,displayName:e.channel_display_name,"Symbol(id)":t+".user",__typename:"User",hosting:{id:e.hosted_channel_id||null,displayName:e.hosted_channel_display_name||null,login:e.hosted_channel_login||null,"Symbol(id)":t+".user.hosting",__typename:"User"}}};default:return null}};var i=n("Ex+h")},"mw/a":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i;!function(e){e.ChannelFeedComment="CHANNEL_FEED_COMMENT_REPORT",e.ChannelFeedPost="CHANNEL_FEED_POST_REPORT",e.Chat="CHAT_REPORT",e.Clip="CLIP_REPORT",e.Collection="COLLECTION_REPORT",e.Community="COMMUNITY_REPORT",e.Event="EVENT_REPORT",e.Extension="EXTENSION_REPORT",e.LiveUp="LIVE_UP_REPORT",e.Raid="RAID_REPORT",e.Room="ROOM_REPORT",e.StreamUp="STREAM_UP_REPORT",e.User="USER_REPORT",e.VideoChatMessage="VOD_COMMENT_REPORT",e.Vod="VOD_REPORT"}(i||(i={}))},mwvJ:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i;!function(e){e[e.Text=0]="Text",e[e.Mention=1]="Mention",e[e.Link=2]="Link",e[e.Emote=3]="Emote",e[e.ClipLink=4]="ClipLink",e[e.VideoLink=5]="VideoLink"}(i||(i={}))},nEoF:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return a});var i={TriHard:{count:196568036},Kappa:{count:192158118},"4Head":{count:155758710},PogChamp:{count:151485090},cmonBruh:{count:146352878},BibleThump:{count:56472964},WutFace:{count:45069031},Kreygasm:{count:41387580},DansGame:{count:38097659},hi5F:{count:34986404},SMOrc:{count:34734484},KappaPride:{count:34262839},VoHiYo:{count:27886434},SwiftRage:{count:24561900},ResidentSleeper:{count:24438298},EleGiggle:{count:19891526},FailFish:{count:19118343},NotLikeThis:{count:18802905},Keepo:{count:18351415},BabyRage:{count:18220906},MingLee:{count:18026207},pbfSSH:{count:16911241},forsenE:{count:14960299},HeyGuys:{count:14851569},ANELE:{count:14648986},PJSalt:{count:14438861}},a=["354","49106","4339","48","25","55338","70433","1902","68856","81103","76171","27509"]},nmYW:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"blockedUsers"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"blockedUsers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:56}};n.loc.source={body:"fragment blockedUsers on User {\nid\nblockedUsers {\nid\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},nrdj:function(e,t,n){"use strict";var i,a=n("HW6M"),r=n("U7vG"),s=n("6sO2"),o=n("iydZ"),l=n("CFVp"),c=n("qe65"),d=n("Odds");n("PPK2");!function(e){e[e.Large=4]="Large",e[e.Medium=3]="Medium",e[e.Small=2]="Small",e[e.ExtraSmall=1.5]="ExtraSmall",e[e.ExtremelySmall=1]="ExtremelySmall"}(i||(i={}));var u=function(e){var t=e.bitsConfig.indexedActions[e.prefix.toLowerCase()];t||(t=Object(l.b)());var n=t.orderedTiers.find(function(t){return t.bits<=(e.amount||100)});n||(n=t.orderedTiers[0]);var u=e.display===d.M.Inline||e.display===d.M.InlineFlex||e.display===d.M.InlineBlock,p=null,m=a("cheermote-for-amount__cheer-amount",{"cheermote-for-amount__display--table-cell":!u},{"cheermote-for-amount__cheer-amount--medium":e.size===i.Medium},{"cheermote-for-amount__cheer-amount--small":e.size===i.Small||e.size===i.ExtraSmall},{"cheermote-for-amount__cheer-amount--extremely-small":e.size===i.ExtremelySmall});if(e.amount&&e.showAmount){var h=e.formattedNumber?Object(s.e)(e.amount):e.amount;p=r.createElement(d.V,{padding:e.size===i.Small?0:void 0,textAlign:e.size===i.Small?d._35.Center:void 0},r.createElement("strong",{className:m,style:{color:n.color}},h))}var g=a("cheermote-for-amount__cheer-image",{"cheermote-for-amount__display--table-cell":!u},{"cheermote-for-amount__cheer--inline":u},{"cheermote-for-amount__cheer-image--small":e.size===i.Small},{"cheermote-for-amount__cheer-image--extra-small":e.size===i.ExtraSmall},{"cheermote-for-amount__cheer-image--extremely-small":e.size===i.ExtremelySmall}),f=r.createElement(c.a,{className:g,sources:Object(o.b)(n,e.size||i.Large,e.animated)});return e.showImage||(f=null),r.createElement(d._1,{className:"cheermote-for-amount",alignItems:e.alignItems,display:e.display},f,p)};n.d(t,"a",function(){return u}),n.d(t,"b",function(){return i})},oFw4:function(e,t){},oIkB:function(e,t,n){"use strict";t.b=function(e,t){var n=new Set(e.map(function(e){return e.node.id}));return e.concat(t.filter(function(e){return!n.has(e.node.id)}))},t.a=function(e){return{variables:{input:e}}},t.d=function(e,t,n,r){void 0===t&&(t={});try{var s=a.n.apollo.client.readQuery({query:e,variables:t});if(!s||r&&r(s))return;var o=i(s,n);a.n.apollo.client.writeQuery({query:e,variables:t,data:o})}catch(e){a.i.warn("Failed writing updated query to Apollo",e)}},t.c=function(e){try{var t=e.id,n=e.fragment,r=e.mutator,s=a.n.apollo.client.readFragment({id:t,fragment:n}),o=i(s,r);a.n.apollo.client.writeFragment({fragment:n,id:t,data:o})}catch(e){a.i.warn("Failed writing updated query to Apollo",e)}};n("+dIz");var i=n("LIeg"),a=(n.n(i),n("6sO2"))},oSFp:function(e,t,n){"use strict";var i=n("A5Hr"),a=n("TToO"),r=n("U7vG"),s=n("RH2O"),o=n("2KeS"),l=n("+8VM"),c=n("V5M+"),d=n("CSlQ"),u=n("Odds"),p=(n("oFw4"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClose=function(e){t.props.closeModal(),t.props.onClose&&t.props.onClose(e)},t}return a.__extends(t,e),t.prototype.render=function(){return r.createElement(u._24,{className:"reporting-modal__container",background:u.m.Base,padding:{x:2,y:3}},r.createElement(i.a,{onClose:this.handleClose,reportContext:this.props.reportContext,title:this.props.title,defaultDescription:this.props.defaultDescription}),r.createElement(l.a,null))},t}(r.Component)),m=Object(o.d)(Object(d.d)("ReportUserModal"),Object(s.b)(null,function(e){return Object(o.b)({closeModal:c.c},e)}))(p);n.d(t,!1,function(){}),n.d(t,!1,function(){return i.a}),n.d(t,!1,function(){return p}),n.d(t,"a",function(){return m})},p8c9:function(e,t){},pQNb:function(e,t,n){"use strict";var i=n("TToO"),a=n("U7vG"),r=n("6sO2"),s=n("FDYX"),o=n("Odds"),l=(n("Z+EN"),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.render=function(){if(this.hasDiscount(this.props.subscriptionProducts)){var e=this.getMessage();return a.createElement(o._24,{textAlign:o._35.Center,className:"sub-discount-banner",padding:1,color:o.I.Overlay,"data-test-selector":"sub-discount-banner"},a.createElement(o._34,{bold:!0},e))}return null},t.prototype.getMessage=function(){var e=Object(s.b)(this.props.subscriptionProducts[0],this.props.isGift);return this.props.isGift?Object(r.d)("Gift a sub and get {percent} off!",{percent:Object(r.e)(e/100,"percent")},"SubDiscountBanner"):Object(r.d)("Get {percent} off the first month of any paid subscription!",{percent:Object(r.e)(e/100,"percent")},"SubDiscountBanner")},t.prototype.hasDiscount=function(e){return this.props.isGift?Object(s.c)(e):Object(s.d)(e)},t}(a.Component));n.d(t,!1,function(){return"sub-discount-banner"}),n.d(t,"a",function(){return l})},"pV+t":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChatUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:62}};n.loc.source={body:"query ChatUser($login: String!) {\nuser(login: $login) {\nid\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},pexS:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ClipsChatCard_Clip"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"slug"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"clip"},arguments:[{kind:"Argument",name:{kind:"Name",value:"slug"},value:{kind:"Variable",name:{kind:"Name",value:"slug"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"curator"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"broadcaster"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"thumbnailURL"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:166}};n.loc.source={body:"query ClipsChatCard_Clip($slug: ID!) {\nclip(slug: $slug) {\nid\nslug\nurl\ncurator {\ndisplayName\n}\nbroadcaster {\ndisplayName\n}\ngame {\ndisplayName\n}\ntitle\nthumbnailURL\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},pg5l:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChatSettings_CurrentUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"chatColor"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"displayBadges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}}]}}]}}]}}],loc:{start:0,end:236}};i.loc.source={body:'#import "twilight/features/badges/models/badge-fragment.gql"\nquery ChatSettings_CurrentUser($channelLogin: String!) {\ncurrentUser {\nid\nlogin\ndisplayName\nchatColor\n}\nuser(login: $channelLogin) {\nid\nself {\ndisplayBadges {\n...badge\n}\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(function(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})}(n("QU+n").definitions)),e.exports=i},q4rf:function(e,t){},q8Cw:function(e,t){},qDcU:function(e,t){},qLdk:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("6sO2"),a=function(e){var t=i.n.store.getState().session.user;return!i.b.get("chatrooms_enabled",!1)&&(t&&t.roles&&t.roles.isStaff||e)?i.b.get("chatrooms_staff_beta",!1):i.b.get("chatrooms_enabled",!1)}},qe65:function(e,t,n){"use strict";var i=n("TToO"),a=n("U7vG"),r=n("RH2O"),s=n("NXs7"),o=n("0nzt"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.render=function(){var e=this.props,t=(e.defaultRes,e.sources),n=(e.darkModeEnabled,i.__rest(e,["defaultRes","sources","darkModeEnabled"])),r=this.props.darkModeEnabled?t.dark:t.light,s=Object.keys(r);delete n.dispatch;var o=i.__assign({},n,{src:r[this.props.defaultRes||s[0]],srcSet:s.map(function(e){return r[e]+" "+e}).join(",")});return a.createElement("img",i.__assign({},o,{onLoad:this.props.onLoad}))},t}(a.Component),c=Object(r.b)(function(e){return{darkModeEnabled:Object(o.a)(e)===s.a.Dark}})(l);n.d(t,"a",function(){return c})},qkCi:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i;!function(e){e[e.Post=0]="Post",e[e.Action=1]="Action",e[e.PostWithMention=2]="PostWithMention",e[e.Ban=3]="Ban",e[e.Timeout=4]="Timeout",e[e.AutoModRejectedPrompt=5]="AutoModRejectedPrompt",e[e.AutoModMessageRejected=6]="AutoModMessageRejected",e[e.AutoModMessageAllowed=7]="AutoModMessageAllowed",e[e.AutoModMessageDenied=8]="AutoModMessageDenied",e[e.Connected=9]="Connected",e[e.Disconnected=10]="Disconnected",e[e.Reconnect=11]="Reconnect",e[e.Hosting=12]="Hosting",e[e.Unhost=13]="Unhost",e[e.Subscription=14]="Subscription",e[e.Resubscription=15]="Resubscription",e[e.SubGift=16]="SubGift",e[e.Clear=17]="Clear",e[e.SubscriberOnlyMode=18]="SubscriberOnlyMode",e[e.FollowerOnlyMode=19]="FollowerOnlyMode",e[e.SlowMode=20]="SlowMode",e[e.EmoteOnlyMode=21]="EmoteOnlyMode",e[e.RoomMods=22]="RoomMods",e[e.RoomState=23]="RoomState",e[e.Raid=24]="Raid",e[e.Unraid=25]="Unraid",e[e.Ritual=26]="Ritual",e[e.Notice=27]="Notice",e[e.Info=28]="Info",e[e.BadgesUpdated=29]="BadgesUpdated",e[e.Purchase=30]="Purchase",e[e.BitsCharity=31]="BitsCharity",e[e.CrateGift=32]="CrateGift"}(i||(i={}))},"qzJ+":function(e,t,n){"use strict";function i(e){try{var t=r.n.apollo.client.readQuery({query:p,variables:{id:e}});return t?t.whisperThread:null}catch(e){return null}}var a=n("TToO"),r=n("6sO2"),s=n("oIkB"),o=n("HM6l"),l=n("9RMu"),c=n("l21v"),d=n("BVQ1"),u=n("m4HT"),p=n("+gWs");t.a=function(e){var t=e.currentUserID,n=e.emotes,m=e.message,h=e.recipientUserID;if(""===t||""===m||""===h)return Promise.reject(new Error("Tried to send a whisper with nonsensical parameters."));var g=Object(o.b)(),f=a.__assign({mutation:d},Object(s.a)({message:m,nonce:g,recipientUserID:h})),b=Object(u.a)(t,h),v=i(b);if(v){var k=function(e,t){for(var n=[],i=/\S+/g,a=i.exec(e);a;){var r=a[0],s=t[r];if(s){var o=Object(c.d)(e.slice(0,a.index)),l=o?o.length:a.index;n.push({id:s.id,start:l,end:l+r.length-1})}a=i.exec(e)}return n}(m,n).map(l.a);f.optimisticResponse={sendWhisper:{__typename:"SendWhisperPayload",message:{content:{content:m,emotes:k,__typename:"MessageBody"},from:{id:t,__typename:"User"},id:g,sentAt:(new Date).toISOString(),deletedAt:null,editedAt:null,__typename:"WhisperMessage"}}},f.update=function(e,t){var n=""+(parseInt(v.messages.edges[0].cursor,10)+1)||"";if(t.data){var a=i(b);if(a){var r=a.messages.edges.findIndex(function(e){return e.cursor===n});if(r<0){var s={cursor:n,node:t.data.sendWhisper.message,__typename:"WhisperMessageEdge"};a.messages.edges.unshift(s)}else a.messages.edges[r].node=t.data.sendWhisper.message;a.userLastMessageRead.sentAt=t.data.sendWhisper.message.sentAt,a.unreadMessagesCount=0,e.writeQuery({query:p,data:{whisperThread:a}})}}}}return r.n.apollo.client.mutate(f)}},rCmJ:function(e,t,n){"use strict";var i=n("zgdU");n.d(t,"a",function(){return i.a})},rIzn:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("6sO2"),a=function(){return i.k.get("ritualsFeatureFlagOverride",i.b.get("viewer_milestones_enabled",!1))}},rMeN:function(e,t){},rWzl:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"BlockUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"BlockUserInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"blockUser"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"targetUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:94}};n.loc.source={body:"mutation BlockUser($input: BlockUserInput!) {\nblockUser(input: $input) {\ntargetUser {\nid\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"s+oZ":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"VideoChatCard_Video"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"video"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"videoID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"previewThumbnailURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"90"}},{kind:"Argument",name:{kind:"Name",value:"height"},value:{kind:"IntValue",value:"51"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"publishedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:162}};n.loc.source={body:"query VideoChatCard_Video($videoID: ID!) {\nvideo(id: $videoID) {\nid\ntitle\npreviewThumbnailURL(width: 90 height: 51)\npublishedAt\nowner {\nid\nlogin\ndisplayName\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},sgUC:function(e,t){},ssrl:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"NewChatterRitual_Channel"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"channel"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ritualTokens"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ritualToken"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"stream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:167}};i.loc.source={body:'#import "./ritual-token-fragment.gql"\nquery NewChatterRitual_Channel($id: ID!) {\nchannel: user(id: $id) {\nid\nself {\nritualTokens {\n...ritualToken\n}\n}\nstream {\nid\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(function(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})}(n("j/3B").definitions)),e.exports=i},thJT:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"RequestNewChatterToken"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"RequestRitualTokenInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"requestRitualToken"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ritualToken"},directives:[]}]}}]}}]}}],loc:{start:0,end:185}};i.loc.source={body:'#import "./ritual-token-fragment.gql"\nmutation RequestNewChatterToken($input: RequestRitualTokenInput!) {\nrequestRitualToken(input: $input) {\nerror {\ncode\n}\ntoken {\n...ritualToken\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(function(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})}(n("j/3B").definitions)),e.exports=i},tjbt:function(e,t,n){"use strict";(function(e){function i(e){return!e.firstPageLoaded||!Object(k.a)()||!e.isLoggedIn||e.isEmbedded||e.isPopout}n.d(t,"a",function(){return O});var a,r=n("TToO"),s=n("U7vG"),o=(n.n(s),n("3zLD")),l=(n.n(o),n("RH2O")),c=n("6sO2"),d=n("7vx8"),u=n("RweG"),p=n("WIs4"),m=n("aMxy"),h=n("oIkB"),g=n("HZww"),f=n("Aj/L"),b=n("aUOx"),v=n("QCOJ"),k=n("rIzn"),y=n("hcyD"),_=n("KfLc"),C=n("yqxY"),S=n("Tur5"),E=n("ssrl"),N=(n.n(E),n("Ti/Y")),w=(n.n(N),n("imaO")),T=(n.n(w),n("thJT")),D=(n.n(T),3e5),I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={closedByError:!1,isLive:!1},t.eligibilityTimeouts={},t.expirationTimeouts={},t.getBannerMessage=function(){return Object(c.d)("Click an emote to say hello!","NewChatterRitual")},t.getLiveStatus=function(e){var t=e.pubsub.messages.streamDown?e.pubsub.messages.streamDown.server_time:0,n=e.pubsub.messages.streamUp?e.pubsub.messages.streamUp.server_time:0;return t||n?n>t:e.data&&e.data.channel&&!!e.data.channel.stream.id||!1},t.setEligibilityTimeouts=function(e){for(var n=new Set(e.map(function(e){return e.id})),i=0,a=Object.keys(t.eligibilityTimeouts);i<a.length;i++){var r=a[i];n.has(r)||(clearTimeout(t.eligibilityTimeouts[r]),delete t.eligibilityTimeouts[r])}n.forEach(function(e){t.eligibilityTimeouts[e]||(t.eligibilityTimeouts[e]=setTimeout(function(){delete t.eligibilityTimeouts[e],t.isEligible=!0,t.state.isLive&&t.requestRitualToken()},D))})},t.requestRitualToken=function(){return r.__awaiter(t,void 0,void 0,function(){var e,t;return r.__generator(this,function(n){switch(n.label){case 0:Object(_.e)({bannerMessage:this.getBannerMessage(),channelID:this.props.channelID}),e=r.__assign({},Object(h.a)({channelID:this.props.channelID,type:S.RitualTokenType.NewChatter})),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.props.requestToken(e)];case 2:return n.sent(),this.isEligible=!1,[3,4];case 3:return t=n.sent(),c.i.error(t,"Failed to request new chatter ritual token."),[3,4];case 4:return[2]}})})},t.setExpirationTimeouts=function(e){for(var n=new Set(e.map(function(e){return e.id})),i=0,a=Object.keys(t.expirationTimeouts);i<a.length;i++){var r=a[i];n.has(r)||(clearTimeout(t.expirationTimeouts[r]),delete t.expirationTimeouts[r])}e.forEach(function(e){if(!t.expirationTimeouts[e.id]&&e.expiresAt&&new Date(e.expiresAt).valueOf()>Date.now()){var n=new Date(e.expiresAt).valueOf()-Date.now();t.expirationTimeouts[e.id]=setTimeout(t.expireRitualToken.bind(e.id),n)}})},t.expireRitualToken=function(e){delete t.expirationTimeouts[e];Object(h.d)(E,{id:t.props.channelID},function(t){return t.channel&&t.channel.self&&t.channel.self.ritualTokens&&(t.channel.self.ritualTokens=t.channel.self.ritualTokens.filter(function(t){return t.id===e})),t})},t.redeemRitualToken=function(e,n){return r.__awaiter(t,void 0,void 0,function(){var t,i,a;return r.__generator(this,function(s){switch(s.label){case 0:Object(y.a)({channelID:this.props.channelID,channelLogin:this.props.channelLogin,isHostMode:this.props.isHostMode,fromNewChatterRitual:!0,subOnlyMode:this.props.isSubsOnlyModeEnabled,player:this.props.isEmbedded||this.props.isPopout?v.a.Embed:v.a.Web}),Object(_.d)({bannerMessage:this.getBannerMessage(),channelID:this.props.channelID,userMessage:n}),t=r.__assign({},Object(h.a)({channelID:this.props.channelID,type:S.RitualTokenType.NewChatter,messageText:n}),{optimisticResponse:{redeemRitualToken:{__typename:"RedeemRitualTokenPayload",error:null,token:{id:e,expiresAt:null,status:S.RitualTokenStatus.Redeemed,type:S.RitualTokenType.NewChatter,__typename:"RitualToken"}}}}),i=null,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.props.redeemToken(t)];case 2:return i=s.sent(),[3,4];case 3:return a=s.sent(),c.i.error(a,"Failed to redeem new chatter ritual."),this.handleGenericError(),[2];case 4:if(i.data.redeemRitualToken.error)switch(i.data.redeemRitualToken.error.code){case S.RitualTokenMutationErrors.UserBanned:case S.RitualTokenMutationErrors.UserNotFollowing:case S.RitualTokenMutationErrors.UserNotSubbed:case S.RitualTokenMutationErrors.UserTimedOut:return this.props.onSendMessage(n),this.setState({closedByError:!0}),[2];default:return this.handleGenericError(),[2]}return i.data.redeemRitualToken.token?[2]:(this.handleGenericError(),[2])}})})},t.dismissRitualToken=function(e){return r.__awaiter(t,void 0,void 0,function(){var t,n,i;return r.__generator(this,function(a){switch(a.label){case 0:Object(_.a)({bannerMessage:this.getBannerMessage(),channelID:this.props.channelID}),t=r.__assign({},Object(h.a)({channelID:this.props.channelID,type:S.RitualTokenType.NewChatter}),{optimisticResponse:{dismissRitualToken:{__typename:"DismissRitualTokenPayload",error:null,token:{id:e,expiresAt:null,status:S.RitualTokenStatus.Dismissed,type:S.RitualTokenType.NewChatter,__typename:"RitualToken"}}}}),n=null,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.props.dismissToken(t)];case 2:return n=a.sent(),[3,4];case 3:return i=a.sent(),c.i.error(i,"Failed to redeem new chatter ritual."),[3,4];case 4:return n&&n.data.dismissRitualToken.token?[2]:(this.handleGenericError(),[2])}})})},t.handleGenericError=function(){t.props.onPushMessage(Object(b.a)(Object(c.d)("Something went wrong.","NewChatterRitual"))),t.setState({closedByError:!0})},t.clearAllTimers=function(){for(var e=0,n=Object.keys(t.eligibilityTimeouts);e<n.length;e++){var i=n[e];clearTimeout(t.eligibilityTimeouts[i])}t.eligibilityTimeouts={};for(var a=0,r=Object.keys(t.expirationTimeouts);a<r.length;a++){i=r[a];clearTimeout(t.expirationTimeouts[i])}t.expirationTimeouts={}},t}return r.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){this.props.data&&this.props.data.loading||!e.data||!e.data.loading||Object(_.b)({channelID:this.props.channelID});var t=this.getLiveStatus(e);if(this.state.isLive!==t&&(this.setState({isLive:t}),t&&this.isEligible&&this.requestRitualToken()),e.data&&e.data.channel&&e.data.channel.self&&e.data.channel.self.ritualTokens){var n=e.data.channel.self.ritualTokens;this.setEligibilityTimeouts(n.filter(function(e){return e.status===S.RitualTokenStatus.Eligible})),this.setExpirationTimeouts(n.filter(function(e){return!!e.expiresAt}))}else this.clearAllTimers()},t.prototype.componentWillUnmount=function(){this.clearAllTimers()},t.prototype.render=function(){return this.props.data&&this.props.data.channel?this.state.closedByError||!this.state.isLive?null:s.createElement(C.a,{bannerMessage:this.getBannerMessage(),onRitualDismissed:this.dismissRitualToken,onRitualRedeemed:this.redeemRitualToken,ritualTokens:this.props.data.channel.self&&this.props.data.channel.self.ritualTokens?this.props.data.channel.self.ritualTokens:[]}):null},t}(s.Component),O=Object(o.compose)(Object(l.b)(function(e){return{firstPageLoaded:e.session.firstPageLoaded,isLoggedIn:Object(f.d)(e),isSubsOnlyModeEnabled:e.chat.subsOnlyMode}},null),Object(d.a)(E,{options:function(e){return{variables:{id:e.channelID}}},skip:i}),Object(p.a)(function(t){return{query:E,variables:{id:t.channelID},topic:Object(g.l)(t.channelID),type:m.PubsubMessageType.UpdatedChannelChatProperty,mutator:function(n,i){return n.data.is_rituals_enabled?e(function(){t.data&&t.data.refetch&&t.data.refetch()}):i.channel&&i.channel.self&&(i.channel.self.ritualTokens=[]),i},skip:i(t)}}),Object(u.a)([{topic:function(e){return Object(g.t)(e.channelID)},mapMessageTypesToProps:(a={},a[m.PubsubMessageType.ChannelStreamUp]="streamUp",a[m.PubsubMessageType.ChannelStreamDown]="streamDown",a),skip:i}]),Object(d.a)(N,{name:"dismissToken"}),Object(d.a)(w,{name:"redeemToken"}),Object(d.a)(T,{name:"requestToken"}))(I)}).call(t,n("162o").setImmediate)},u8SD:function(e,t,n){"use strict";t.a=function(){var e=this;return Object(a.a)(o,{props:function(t){return{blockUserMutation:function(n,a,o,l){return i.__awaiter(e,void 0,void 0,function(){return i.__generator(this,function(e){switch(e.label){case 0:return t.mutate?[4,t.mutate({variables:{input:{targetUserID:n,sourceContext:o,reason:a}},optimisticResponse:{blockUser:{__typename:"BlockUserPayload",targetUser:{__typename:"User",id:n}}},update:function(e){var t=e.readFragment({id:Object(s.a)(l),fragment:r});t&&(t.blockedUsers.push({id:n,__typename:"User"}),e.writeFragment({id:Object(s.a)(l),fragment:r,data:t}))}})]:[3,2];case 1:return e.sent(),[3,3];case 2:throw new Error("blockUserMutation is not ready");case 3:return[2]}})})}}}})};var i=n("TToO"),a=n("7vx8"),r=n("nmYW"),s=(n.n(r),n("yADj")),o=n("rWzl");n.n(o)},uLsu:function(e,t,n){"use strict";var i=n("TToO"),a=n("U7vG"),r=n("3zLD"),s=n("6sO2"),o=n("1F7R"),l=n("7vx8"),c=n("u8SD"),d=n("Kxgf"),u=n("djIP"),p=n("OLl6"),m=n("pV+t"),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getInvalidUserMessage=function(){return Object(s.d)("No user matching that login.","IgnoreCommandHandler")},t.blockUser=function(e){return e?e===t.props.currentUserLogin?{deferred:Promise.resolve({notice:Object(s.d)("You cannot ignore yourself.","IgnoreCommandHandler")})}:{deferred:Object(p.a)(e).then(function(e){if(!e)return{notice:t.getInvalidUserMessage()};try{t.props.blockUserMutation(e,u.b.Other,u.a.Chat,t.props.data&&t.props.data.user)}catch(e){return{notice:Object(s.d)("Unable to ignore user","IgnoreCommandHandler")}}return{notice:Object(s.d)("User successfully ignored","IgnoreCommandHandler")}})}:{deferred:Promise.resolve({notice:Object(s.d)("Please specify a user to ignore","IgnoreCommandHandler")})}},t.unblockUser=function(e){return e?e===t.props.currentUserLogin?{deferred:Promise.resolve({notice:Object(s.d)("You cannot unignore yourself.","IgnoreCommandHandler")})}:{deferred:Object(p.a)(e).then(function(e){if(!e)return{notice:t.getInvalidUserMessage()};try{t.props.unblockUserMutation(e,t.props.data&&t.props.data.user)}catch(e){return{notice:Object(s.d)("Unable to unignore user","IgnoreCommandHandler")}}return{notice:Object(s.d)("User successfully unignored","IgnoreCommandHandler")}})}:{deferred:Promise.resolve({notice:Object(s.d)("Please specify a user to unignore","IgnoreCommandHandler")})}},t}return i.__extends(t,e),t.prototype.render=function(){return a.createElement("span",{style:{display:"none"}},a.createElement(o.a,{command:"ignore",handler:this.blockUser}),a.createElement(o.a,{command:"unignore",handler:this.unblockUser}))},t}(a.Component),g=Object(r.compose)(Object(l.a)(m,{options:function(e){return{variables:{login:e.currentUserLogin}}},skip:function(e){return!e.currentUserLogin}}),Object(d.a)(),Object(c.a)())(h);n.d(t,"a",function(){return g})},uXDg:function(e,t,n){"use strict";n.d(t,"f",function(){return i}),n.d(t,"b",function(){return a}),n.d(t,"c",function(){return r}),n.d(t,"d",function(){return s}),n.d(t,"e",function(){return o}),n.d(t,"g",function(){return l}),n.d(t,"a",function(){return c}),t.l=function(e,t){return{type:i,data:e,contentWidth:t}},t.h=function(e,t){return{type:a,threadID:e,contentWidth:t}},t.i=function(e,t){return{type:r,threadID:e,contentWidth:t}},t.j=function(e,t){return{type:s,threadID:e,contentWidth:t}},t.m=function(e){return{type:c,contentWidth:e}},t.k=function(e,t){return{type:o,threadID:e,contentWidth:t}},t.n=function(e,t){return{type:l,threadID:e,contentWidth:t}};var i="whispers.THREAD_OPENED",a="whispers.THREAD_CLOSED",r="whispers.THREAD_COLLAPSED",s="whispers.THREAD_EXPANDED",o="whispers.THREAD_FOCUSED",l="whispers.THREAD_UNFOCUSED",c="whispers.CONTENT_RESIZED"},v2Uk:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ritualsEnabled"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"settings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isRitualsEnabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isRitualsWhitelisted"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:89}};n.loc.source={body:"fragment ritualsEnabled on User {\nid\nsettings {\nisRitualsEnabled\nisRitualsWhitelisted\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},vBst:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i;!function(e){e[e.PercentOff=0]="PercentOff"}(i||(i={}));var a={Prime:"prime",Tier1:"1000",Tier2:"2000",Tier3:"3000"}},vDGQ:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return s}),n.d(t,"c",function(){return o}),t.d=function(e){if(e.action&&e.userId){var t={location:r.PageviewLocation.Channel,action:e.action,target:e.target,type:e.type,channel_id:e.channelId,reward_id:e.rewardID,user_id:e.userId,time:Date.now()};a.n.tracking.track(r.SpadeEventType.CrateNotificationAction,t)}};var i,a=n("6sO2"),r=n("vH/s");!function(e){e.Close="close",e.DontShowThis="dont_show_this",e.LearnMore="learn_more",e.OpenLater="open_later",e.OpenNow="open_now",e.Timeout="timeout",e.TryBeta="try_beta",e.View="view"}(i||(i={}));var s;!function(e){e.Inventory="inventory",e.OpenCrate="open_crate"}(s||(s={}));var o;!function(e){e.Ftue="ftue",e.ReceiveCrate="receive_crate",e.ReceiveGift="receive_giveaway_item",e.BitsIntro="bits_intro"}(o||(o={}))},vKYs:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"BlockedUsers"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"blockedUsers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:61}};n.loc.source={body:"query BlockedUsers {\ncurrentUser {\nid\nblockedUsers {\nid\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},vLl9:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChatList_Badges"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"badges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcastBadges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"selectedBadge"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"displayBadges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}}]}}]}}]}}],loc:{start:0,end:256}};i.loc.source={body:'#import "twilight/features/badges/models/badge-fragment.gql"\nquery ChatList_Badges($channelLogin: String!) {\nbadges {\n...badge\n}\nuser(login: $channelLogin) {\nid\nbroadcastBadges {\n...badge\n}\nself {\nselectedBadge {\n...badge\n}\ndisplayBadges {\n...badge\n}\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(function(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})}(n("QU+n").definitions)),e.exports=i},vRhQ:function(e,t){},vh75:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"c",function(){return a}),n.d(t,"d",function(){return r}),n.d(t,"e",function(){return s}),n.d(t,"i",function(){return o}),n.d(t,"f",function(){return l}),n.d(t,"g",function(){return c}),n.d(t,"h",function(){return d}),n.d(t,"j",function(){return u}),n.d(t,"l",function(){return p}),n.d(t,"k",function(){return m}),n.d(t,"o",function(){return h}),n.d(t,"n",function(){return g}),n.d(t,"q",function(){return f}),n.d(t,"p",function(){return b}),n.d(t,"s",function(){return v}),n.d(t,"r",function(){return k}),n.d(t,"a",function(){return y}),n.d(t,"m",function(){return _}),t.I=function(e,t){return{type:u,channel:e,messages:t}},t.w=function(){return{type:a}},t.G=function(){return{type:v}},t.B=function(){return{type:k}},t.K=function(){return{type:r}},t.H=function(){return{type:i}},t.D=function(){return{type:p}},t.y=function(){return{type:m}},t.C=function(){return{type:o}},t.v=function(e,t){return{type:d,channelLogin:e,duration:t}},t.u=function(e){return{type:c,duration:e}},t.x=function(){return{type:l}},t.E=function(){return{type:h}},t.z=function(){return{type:g}},t.F=function(){return{type:f}},t.A=function(){return{type:b}},t.t=function(e,t){return{type:y,command:e.toLowerCase(),handler:t}},t.J=function(e){return{type:_,command:e.toLowerCase()}};var i="chat.CHAT_HIDDEN",a="chat.CHAT_RESET",r="chat.CHAT_SHOWN",s="chat.EMOTE_SETS_UPDATED",o="chat.FOLLOWER_MODE_ENABLED",l="chat.FOLLOWER_MODE_DISABLED",c="chat.FOLLOWER_MODE_DURATION_CHANGED",d="chat.FOLLOWER_MODE_DURATION_PREFERENCE_CHANGED",u="chat.MESSAGES_UPDATED",p="chat.MODICONS_ENABLED",m="chat.MOD_ICONS_DISABLED",h="chat.SLOW_MODE_ENABLED",g="chat.SLOW_MODE_DISABLED",f="chat.SUBS_ONLY_MODE_ENABLED",b="chat.SUBS_ONLY_MODE_DISABLED",v="chat.TIMESTAMPS_ENABLED",k="chat.TIMESTAMPS_DISABLED",y="chat.ADD_COMMAND",_="chat.REMOVE_COMMAND"},x583:function(e,t){},x6ny:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ReportUserModal_ReportReasons"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"content"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ReportContentType"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reportReasons"},arguments:[{kind:"Argument",name:{kind:"Name",value:"content"},value:{kind:"Variable",name:{kind:"Name",value:"content"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:114}};n.loc.source={body:"query ReportUserModal_ReportReasons($content: ReportContentType!) {\nreportReasons(content: $content) {\nid\ntext\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},xZvS:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DismissPurchaseToken"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"DismissPurchaseTokenInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"dismissPurchaseToken"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:113}};n.loc.source={body:"mutation DismissPurchaseToken($input:DismissPurchaseTokenInput!) {\ndismissPurchaseToken(input:$input) {\ntoken\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},xfb5:function(e,t){},xrVp:function(e,t,n){"use strict";t.b=function(e,t){var n="";switch(t){case s.a.TypedCommand:n="typed_command";break;case s.a.UserMenu:n="user_menu";break;default:n="user_menu"}var r="";switch(e){case a.a.Dark:r="dark";break;case a.a.Light:r="light";break;default:r="light"}i.m.track(o.SpadeEventType.ThemeChange,{source:n,mode:r})},t.a=function(e){switch(e){case r.a.Archive:return o.SpadeVideoBroadcastType.Archive;case r.a.Highlight:return o.SpadeVideoBroadcastType.Highlight;case r.a.Upload:return o.SpadeVideoBroadcastType.Upload;case r.a.WatchParty:return o.SpadeVideoBroadcastType.WatchParty;case r.a.PastPremiere:return o.SpadeVideoBroadcastType.PastPremiere;case r.a.PremiereUpload:return o.SpadeVideoBroadcastType.PremiereUpload;default:return e}};var i=n("6sO2"),a=n("NXs7"),r=n("6WAQ"),s=n("NikC"),o=n("vH/s")},xwpJ:function(e,t,n){"use strict";function i(){return[{id:"other",text:Object(r.d)("Other Terms of Service Violation","ReportUserModal")}]}var a=function(e,t){var n="https://www.twitch.tv/communities/{communityName}".replace("{communityName}",e);return'community report (<a href="{link}">{link}</a>) {description}'.replace(/{link}/g,n).replace(/{description}/,t)},r=n("6sO2");n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i})},"y0i/":function(e,t){},"y1/w":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"RecentRaidsModActions"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetUserID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"chatRoomBanStatus"},arguments:[{kind:"Argument",name:{kind:"Name",value:"channelID"},value:{kind:"Variable",name:{kind:"Name",value:"targetUserID"}}},{kind:"Argument",name:{kind:"Name",value:"userID"},value:{kind:"Variable",name:{kind:"Name",value:"channelID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isPermanent"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:190}};n.loc.source={body:"query RecentRaidsModActions($targetUserID: ID! $channelID: ID!) {\n# This is currently backwards on the server\nchatRoomBanStatus(channelID: $targetUserID userID: $channelID) {\nisPermanent\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},yADj:function(e,t,n){"use strict";t.a=function(e){return e?Object(i.c)(e)||"":""};var i=n("+dIz")},yDSg:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Whispers_Tracking_CurrentUser"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasTurbo"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"availability"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:86}};n.loc.source={body:"query Whispers_Tracking_CurrentUser {\ncurrentUser {\nid\nhasTurbo\navailability\nlogin\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},ySfT:function(e,t,n){"use strict";var i=n("U7vG"),a=n("6sO2"),r=n("3iBR"),s=n("qe65"),o=n("Odds"),l=(n("6lb1"),{themed:!0,dark:{"1x":r.b+"/dark/animated/1/cheertutorial.gif"},light:{"1x":r.b+"/light/animated/1/cheertutorial.gif"}}),c=function(){return i.createElement(o._1,{display:o.M.Flex,padding:{top:5},flexGrow:1,flexDirection:o.O.Column,justifyContent:o._0.Center,alignItems:o.c.Center},i.createElement(o._34,{type:o._39.H4,bold:!0},i.createElement(s.a,{className:"cheermote-help__tutorial-image",sources:l}),Object(a.d)("How to Cheer","Bits--CheermoteHelp")),i.createElement("p",{className:"t-bits-card__contents-body t-bits-card__contents-body--narrow"},Object(a.d)('Type "cheer" + the number of Bits you want to Cheer.',"Bits--CheermoteHelp")))};n.d(t,"a",function(){return c})},"yTC+":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Thread_SetMuteThread"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdateWhisperThreadInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateWhisperThread"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"thread"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isMuted"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:129}};n.loc.source={body:"mutation Thread_SetMuteThread($input: UpdateWhisperThreadInput!) {\nupdateWhisperThread(input: $input) {\nthread {\nid\nisMuted\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},yqxY:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n("TToO"),a=n("U7vG"),r=(n.n(a),n("6sO2")),s=n("l21v"),o=n("Odds"),l=n("Tur5"),c=n("qDcU"),d=(n.n(c),[{id:"30259",alt:"HeyGuys"},{id:"81274",alt:"VoHiYo"},{id:"64138",alt:"SeemsGood"}]),u=function(e){function t(t){var n=e.call(this,t)||this;return n.onEmoteClick=function(e){if(n.renderedTokenID){var t=e.currentTarget.dataset.emoteString;t?n.props.onRitualRedeemed(n.renderedTokenID,t):r.i.warn("[NewChatterRitual] Could not find clicked emote ID.")}else r.i.warn("[NewChatterRitual] Could not find clicked Ritual token.")},n.onCloseButtonClick=function(){n.renderedTokenID?n.props.onRitualDismissed(n.renderedTokenID):r.i.warn("[NewChatterRitual] Could not find clicked Ritual token.")},n.getAvailableToken=function(){return n.props.ritualTokens.find(function(e){return e.type===l.RitualTokenType.NewChatter&&e.status===l.RitualTokenStatus.Available&&(!e.expiresAt||Date.now()<new Date(e.expiresAt).valueOf())})||null},n.renderedTokenID=null,n}return i.__extends(t,e),t.prototype.render=function(){var e=this,t=this.getAvailableToken();if(this.renderedTokenID=t?t.id:null,!t)return null;var n=d.map(function(t){return a.createElement(o._1,{key:t.id,flexShrink:0,margin:{right:.5}},a.createElement(o._42,{label:t.alt},a.createElement(o.Z,{alpha:!0,onClick:e.onEmoteClick,"data-emote-string":t.alt,"data-test-selector":"emote-button"},a.createElement(o._1,{padding:.5},a.createElement("img",{className:"new-chatter-ritual__emote",src:Object(s.e)(t.id,3)})))))});return a.createElement(o._24,{background:o.m.Base,border:!0,className:"new-chatter-ritual",margin:{x:2,bottom:.5},padding:{left:.5,y:.5}},a.createElement(o._1,{alignItems:o.c.Center,display:o.M.Flex,flexWrap:o.P.NoWrap},a.createElement(o._1,{flexShrink:1,margin:{right:.5}},this.props.bannerMessage),n,a.createElement(o._24,{borderLeft:!0,flexShrink:0},a.createElement(o.v,{ariaLabel:"close",icon:o._15.Close,onClick:this.onCloseButtonClick,size:o.x.Large,"data-test-selector":"dismiss-button"}))))},t}(a.Component)},ysVA:function(e,t){},z7Cp:function(e,t){},zVM8:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ViewerCardModActions"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetUserID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"chatRoomBanStatus"},arguments:[{kind:"Argument",name:{kind:"Name",value:"channelID"},value:{kind:"Variable",name:{kind:"Name",value:"targetUserID"}}},{kind:"Argument",name:{kind:"Name",value:"userID"},value:{kind:"Variable",name:{kind:"Name",value:"channelID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isPermanent"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:189}};n.loc.source={body:"query ViewerCardModActions($targetUserID: ID! $channelID: ID!) {\n# This is currently backwards on the server\nchatRoomBanStatus(channelID: $targetUserID userID: $channelID) {\nisPermanent\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},zbFZ:function(e,t){},zgdU:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("TToO"),a=n("U7vG"),r=(n.n(a),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setContainerRef=function(e){t.container=e},t.handleGlobalClick=function(e){var n=e.target;t.isParentOf(n)||t.props.onClickOut(e)},t}return i.__extends(t,e),t.prototype.componentDidMount=function(){document.addEventListener("click",this.handleGlobalClick,!0)},t.prototype.componentWillUnmount=function(){document.removeEventListener("click",this.handleGlobalClick,!0)},t.prototype.render=function(){var e=this.props,t=(e.onClickOut,i.__rest(e,["onClickOut"]));return a.createElement("div",i.__assign({},t,{ref:this.setContainerRef}),this.props.children)},t.prototype.isParentOf=function(e){for(var t=e;t;){if(t===this.container)return!0;t=t.parentElement}return!1},t}(a.Component))},zzpv:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"WatchAdModal_Redeeem"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"RedeemTrueXAdInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"redeemTrueXAd"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"grantedBits"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:105}};n.loc.source={body:"mutation WatchAdModal_Redeeem($input:RedeemTrueXAdInput!) {\nredeemTrueXAd(input:$input) {\ngrantedBits\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n}});
//# sourceMappingURL=pages.embed-chat-016f25537758981f37649a2fceb52d49.js.map