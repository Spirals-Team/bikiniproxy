/*!************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2011 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/
if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^\s*/,"").replace(/\s*$/,"")}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(c){for(var b=0;b<this.length;b++){if(this[b]===c){return b}}return -1}}if(!Array.prototype.map){Array.prototype.map=function(f,c){var b=new Array(this.length);for(var d=0,e=this.length;d<e;d++){if(d in this){b[d]=f.call(c,this[d],d,this)}}return b}}if(!window.console){window.console={log:function(){}}}window.requestAnimFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(c,b){window.setTimeout(c,1000/60)}})();function s7getCurrentScriptNoStack(){if(document.currentScript){return document.currentScript}else{var b=document.scripts;if(b.length===0){return null}if(b.length===1){return b[0]}if("readyState" in b[0]){for(var c=b.length;c--;){if(b[c].readyState==="interactive"){return b[c]}}}var d=null;for(var c=0;c<b.length;c++){var e=b[c].hasAttribute("data-src")?b[c].getAttribute("data-src"):b[c].getAttribute("src");if(e&&e.indexOf("s7sdk/utils/Utils.js")>0){if(/\/(1\.0)|(2\.([0-9])|(10))\//i.test(e)){}else{if(d==null){d=b[c]}else{d=null;break}}}}return d}}function s7getNameSpacePrefixFromStack(){var b;try{throw new Error()}catch(d){b=d.stack}var c=/[\?]+.*namespace=([^&#:]+):[^\r\n]+(?:\r|\n)?$/i.exec(b);if((c!=null)&&(c.length==2)){return c[1]}else{return null}}function s7getCurrentScript(){var g=s7getCurrentScriptNoStack();if(g==null){var c=s7getNameSpacePrefixFromStack();if(c!=null){var b=document.scripts;for(var e=0;e<b.length;e++){var h=b[e].hasAttribute("data-src")?b[e].getAttribute("data-src"):b[e].getAttribute("src");if(h&&h.indexOf("s7sdk/utils/Utils.js")>0){var d=/[^\?]+[\?]+.*namespace=([^&#]+)/i.exec(h);var f="";if((d!=null)&&(d.length==2)){f=d[1]}if((f==c)||((f=="")&&(c==""))){return b[e]}}}}return null}else{return g}}function s7getCurrentNameSpacePrefix(){var b=s7getCurrentScriptNoStack();if(b!=null){var e=b.hasAttribute("data-src")?b.getAttribute("data-src"):b.getAttribute("src");var d=/[^\?]+[\?]+.*namespace=([^&#]+)/i.exec(e);if((d!=null)&&(d.length==2)){return d[1]}}else{var c=s7getNameSpacePrefixFromStack();if(c!=null){return c}}return""}function s7getCurrentNameSpace(){var b=s7getCurrentNameSpacePrefix();if(b==""){return window.s7sdk}else{return window[b].s7sdk}}(function(){var b=s7getCurrentNameSpacePrefix();var c=s7getCurrentScript();if(b==""){window.s7sdk={namespacePrefix:"",utilsScriptElement:c}}else{if(typeof window[b]=="undefined"){window[b]={}}if(!window[b].s7sdk){window[b].s7sdk={};window[b].s7sdk.namespacePrefix=b;window[b].s7sdk.utilsScriptElement=c}}})();(function(b){if(!b){b={}}else{if(typeof b!="object"){throw new Error("Cannot initialize a root 's7sdk' package. s7sdk is not an object")}}var c=s7getCurrentScript();if((c!=null)&&!c.hasAttribute("data-src")&&(c.getAttribute("src").indexOf("s7sdk/utils/Utils.js")!=-1)){c.setAttribute("data-src",c.getAttribute("src"));c.setAttribute("src","")}if(!b.pkg){b.pkg=function(f){var g,j,e=b,h=f.split(".");for(g=1;g<h.length;g++){j=h[g];if(!e[j]){e[j]={}}e=e[j]}}}if(!b.Util){b.Util={write:function(e){document.write(e)},byId:function(e){return document.getElementById(e)},getHead:function(){return document.getElementsByTagName("head")[0]},borrowMethods:function(h,g,k){var j=h.__proto__||(h.constructor?h.constructor.prototype:Object.prototype);var i=g.__proto__||(g.constructor?g.constructor.prototype:Object.prototype);for(var e in j){if(typeof j[e]!="function"){continue}var f=i.superclass;if(f){f=f.prototype}if((i.hasOwnProperty(e)==false)&&(f&&f.hasOwnProperty(e)==false)){i[e]=j[e];b.Class.override(k,e,function(){return arguments.callee.parent.apply(this.component,arguments)})}}},getGenericModifierObject:function(g,f){var e={};var i=g.getModifiers();for(mod in i){if(g.getParam(mod)){e[mod.toLowerCase()]=g.getParam(mod)}}e.set=function k(l,m){this[l.toLowerCase()]=m};e.get=function h(l,m){if(this[l.toLowerCase()]){return this[l.toLowerCase()]}if(m){return m}return""};e.originalSettings=f;e.i18n=f.i18n;e.getLocalizedText=f.getLocalizedText;j(e,f);function j(m,l){if(!m.trackLoad){m.trackLoad=l.trackLoad}if(!m.sendLoadMessage){m.sendLoadMessage=l.sendLoadMessage}if(!m.createLoadData){m.createLoadData=l.createLoadData}if(!m.params){m.params=l.params}}return e},resolveModifier:function(i,h,e,f){var g=b.Util.getGenericModifierObject(e,f);if(i&&h){g.set(i,h)}return g},assignListeners:function(g,e){for(var f in g){for(var h in g[f]){if(g[f]){if(g[f][h].handler){e.addEventListener(f,g[f][h].handler,g[f][h].useCapture)}}}}},copyListeners:function(e){if(e){var h={};var g=e.events;for(var f in g){h[f]=g[f]}return h}},removeTags:function(e){while(e.hasChildNodes()){e.removeChild(e.lastChild)}},byFirstTag:function(f){var e=document.getElementsByTagName(f);if(e.length>0){return e[0]}else{return undefined}},wrapContext:function(f,e){return function(){f.apply(e,Array.prototype.slice.call(arguments,0))}},noop:function(){},objByClassName:function(i,o){function j(r){return r.replace(/\./g,"")}function p(t){var s="";for(var r=0;r<t.length;r++){s+=j(t[r])+" "}return s}function l(x,w){var v=x.replace(/(^\s+|\s+$)/g,"").split(" ");if(v.length>1){var u=v.shift();var t=q(u,w);for(var s=0;s<t.length;s++){var r=t[s];return l(v.join(" "),r)}}else{return q(x,w)}}function q(t,x){if(!x){x=document}var r=[],z;if(x.getElementsByClassName){z=x.getElementsByClassName(t);for(var u=0,v=z.length;u<v;u++){r[u]=z[u]}}else{t=t.split(/\s+/);var y,s=t.length,w,z=x.getElementsByTagName("*"),v=z.length;for(var u=0;u<s;u++){t[u]=RegExp("\\b"+t[u]+"\\b")}classnameLoop:while(v){y=z[--v];w=y.className;if(w){for(var u=0;u<s;u++){if(t[u].test(w)==false){continue classnameLoop}}r.push(y)}}}return r}try{var n=i.split(" ");var h=j(i);if(h==o.className){return[o]}var k=o.className.split(" ");var f;if(n.length>0){f=j(n.shift())}var g=p((n.length==0)?[f]:n);var e=null;e=l(g,o);return e}catch(m){throw new Error("Unable to parse "+i+". "+m)}},cssPropToJSProp:function(j){var e=(j.indexOf("-")>0);if(e){var g=j.split("-");if(g.length>1){var h="";for(var f=0;f<g.length;f++){if(f==0){h+=g[f]}else{h+=g[f].charAt(0).toUpperCase()+g[f].slice(1)}}return h}else{return a}}else{return j}},byTagAndAttributes:function(k,g){var j,e,l,h=[],f=document.getElementsByTagName(k);for(j=0;j<f.length;j++){l=true;for(e in g){if(Object.prototype.hasOwnProperty.call(g,e)&&f[j].getAttribute(e)!==g[e]){l=false;break}}if(l){h.push(f[j])}}return h},createElement:function(h,f){var g=document.createElement(h),e;for(e in f){if(f.hasOwnProperty(e)&&f.propertyIsEnumerable(e)){g.setAttribute(e,f[e])}}return g},elementInDOM:function(e){while(e=e.parentNode){if(e==document){return true}}return false},resolveURL:function(f,e){if(/^\s*http[s]?:\/\//.test(e)){return e}else{var h=(f&&f.length>0?f.charAt(f.length-1):"");var i=(e&&e.length>0?e.charAt(0):"");var g;if(h=="/"&&i=="/"){g=f+e.substr(1)}else{g=f+e}return g}},lib:{scriptElement:function(){return b.utilsScriptElement}(),root:function(){var f="js/";var h="";if(b.utilsScriptElement){var g=b.utilsScriptElement.hasAttribute("data-src")?b.utilsScriptElement.getAttribute("data-src"):b.utilsScriptElement.getAttribute("src");if(g){h=g}}if(typeof(s7getClientLibsOverride)=="function"){h=h.substr(0,h.lastIndexOf("/")+1);h+=s7getClientLibsOverride().root;e=h.indexOf("s7sdk/utils/Utils.js");f=h.substring(0,e);return f}var e=h.indexOf("s7sdk/utils/Utils.js");if(e>=0){f=h.substring(0,e)}else{if(b&&b.Logger){b.Logger.log(b.Logger.SEVERE,"Utils.js not found, using default lib.root = %0",f)}}return f}(),jsList:[],isLoaded:function(f){for(var e=0;e<b.Util.lib.jsList.length;e++){if(b.Util.lib.jsList[e].name==f){return true}}return false},flagFileLoaded:function(e){},flagFile:function(f){for(var e=0;e<b.Util.lib.jsList.length;e++){if(b.Util.lib.jsList[e].name==f){b.Util.lib.jsList[e].loaded=true;break}}},isAllJSLoaded:function(){for(var f=0;f<b.Util.lib.jsList.length;f++){if(!b.Util.lib.jsList[f].loaded){return false}}if(b.Util.css.defaultCSSText.text.length>0){var e=b.Util.createElement("style",{type:"text/css",media:"screen","data-description":"Scene7DefaultCSS"});b.Util.css.addDefaultStyleCSS(b.Util.css.defaultCSSText.text,e);b.Util.css.defaultCSSText.text=""}b.Event.dispatch(document.body,"S7JSLOAD",false);return true},checkJS:function(){if(!b.Util.lib.isAllJSLoaded()){setTimeout(b.Util.lib.checkJS,100)}},addJS:function(f){if(!b.Util.lib.isLoaded(f)){var e={name:f,loaded:false};b.Util.lib.jsList.push(e)}},include:function(h,g){var e=b.Util.lib.parsePkg(h);if(typeof g=="undefined"){g=true}if(!b.Util.lib.isLoaded(h)){if(g){if(b.Util.byFirstTag("head")){var f=document.createElement("script");f.setAttribute("language","javascript");f.setAttribute("type","text/javascript");var i=b.Util.lib.root+e+".js";if(b.namespacePrefix!=""){i+="?namespace="+b.namespacePrefix}f.setAttribute("src",i);f.setAttribute("id",h);if((b.browser.name=="ie"&&b.browser.version.major>=11)||b.browser.name!="ie"){f.onload=function(){b.Util.lib.flagFile(this.id);f.onload=null}}else{f.onreadystatechange=function(){if(this.readyState=="complete"||this.readyState=="loaded"){b.Util.lib.flagFile(this.id);f.onreadystatechange=null}}}b.Util.byFirstTag("head").appendChild(f);b.Util.lib.addJS(h)}}else{b.Util.write('<script language="javascript" type="text/javascript" src="'+b.Util.lib.root+e+'.js"><\/script>');b.Util.lib.addJS(h)}}},parsePkg:function(e){return e.replace(/\./g,"/")}},css:{root:"",defaultCSS:"",list:{},inPageCSS:{obj:null,classes:[]},defaultCSSText:{text:"",component:{}},include:function(f,h,e,i){e=(typeof e=="boolean")?e:false;var g=b.Util.createElement("link",{media:(h?h:"all"),href:f,rel:"stylesheet",type:"text/css",pmid:(i?i:"")});if("onreadystatechange" in g){g.onreadystatechange=function(){if(g.readyState=="loaded"||g.readyState=="complete"){b.Util.css.list[g.href]=true;g.onreadystatechange=null}}}else{if("onload" in g){g.onload=function(){b.Util.css.list[g.href]=true;g.onload=null}}}b.Util.css.list[g.href]=false;if(e===true||b.Util.getHead()!==g.parentNode){b.Util.getHead().appendChild(g)}else{b.Util.getHead().insertBefore(g,b.Util.lib.scriptElement.nextSibling)}},checkSheetLoaded:function(f){var j,g;for(var h=0;h<document.styleSheets.length;h++){j=document.styleSheets[h];g=false;try{g=(b.browser.name!="ie")&&(typeof j.cssRules==="object")}catch(k){if((k.name==="NS_ERROR_DOM_SECURITY_ERR")||(k.name==="SecurityError")){g=true}}if(j.href===f&&g){return true}}return false},isAllLoaded:function(){var e,f=b.Util.css.list;for(e in f){if(!f.hasOwnProperty(e)){continue}if(f[e]===true){}else{if(b.Util.css.checkSheetLoaded(e)===true){f[e]=true}else{return false}}}return true},add:function(e,f){if(!b.Util.css.inPageCSS.obj){b.Util.css.inPageCSS.obj=document.createElement("style");b.Util.css.inPageCSS.obj.setAttribute("type","text/css");b.Util.css.inPageCSS.obj.setAttribute("media","all");b.Util.byFirstTag("head").appendChild(b.Util.css.inPageCSS.obj);if(b.browser.name=="ie"){b.Util.css.inPageCSS.obj.styleSheet.cssText=""}else{b.Util.css.inPageCSS.obj.innerHTML=""}}if(b.Util.css.inPageCSS.classes.indexOf(e)<0){b.Util.css.inPageCSS.classes.push(e);if(b.browser.name=="ie"){b.Util.css.inPageCSS.obj.styleSheet.cssText+=e+"{"+f+"} "}else{b.Util.css.inPageCSS.obj.innerHTML+=e+"{"+f+"} "}}},getCss:function(h,e,k,j,f,g){var i=[];if(j){i.push({className:j,id:k})}i.push({className:h,id:(j?null:k),attributes:g});f=(f&&b.Util.isElement(f))?f:document.body;return b.Util.css.getCssExt(f,i,e)},getCssExt:function(e,g,m){var j=(b.namespacePrefix=="")?false:true;var n=null;var k=null;for(var h=g.length-1;h>=0;h--){var l=g[h];tempElm=b.Util.createElement("div",l.attributes);tempElm.className=l.className;if(l.id){tempElm.setAttribute("id",l.id)}if(j){tempElm.setAttribute("data-namespace",b.namespacePrefix)}if(n==null){n=tempElm}if(k!=null){tempElm.appendChild(k)}k=tempElm}e.appendChild(k);var f=b.Util.getStyle(n,m);e.removeChild(k);return f},createCssRuleText:function(h,g){var f=(b.namespacePrefix=="")?"":"[data-namespace='"+b.namespacePrefix+"']";var i,e=f+h+" {\n";for(i in g){if(Object.prototype.hasOwnProperty.call(g,i)){e+="\t"+i+":"+g[i]+";\n"}}e+=" }\n";return e},createCssImgUrlText:function(f){var e=b.Util.lib.root;if(e.substr(e.length-3,3)==="js/"){e=e.substr(0,e.length-3)+"images/sdk/"}else{throw new Error("Unexpected SDK root URL!")}return"url("+e+f+")"},setCSSAttributeSelector:function(e,f,g){e.setAttribute(f,g);if(b.browser.name==="ie"){e.className=e.className}},addDefaultStyleCSS:function(g,e){function f(){if(!e.parentNode){b.Util.getHead().insertBefore(e,b.Util.getHead().firstChild)}}var h=document.createTextNode(g);if(b.browser.name==="ie"){f()}if(e.styleSheet&&!("textContent" in e)){e.styleSheet.cssText=h.nodeValue}else{e.appendChild(h)}f()},addDefaultCSS:function(h,f){if(f in b.Util.css.defaultCSSText.component){return}b.Util.css.defaultCSSText.component[f]=true;if(b.browser.name==="ie"&&b.browser.version.major<11){var h="\r\n/*"+f+"*/\r\n"+h;b.Util.css.defaultCSSText.text+=h}else{var e={type:"text/css",media:"screen","data-description":"Scene7DefaultCSS","data-component":f};if(b.namespacePrefix!=""){e["data-namespace"]=b.namespacePrefix}var g=b.Util.createElement("style",e);b.Util.css.addDefaultStyleCSS(h,g)}},createCssAnimationText:function(h,i,g,e){var m="@-webkit-keyframes "+h+" {\n";var k="@-webkit-keyframes "+h+" {\n";var l="@-webkit-keyframes "+h+" {\n";var f="0% {\n"+i+":"+g+";\n}100% {\n"+i+":"+e+";\n}\n}";m+=f;k+=f;l+=f;var j=(m+k+l);return j},forceCSSEval:function(){var f=b.Util.getHead().childNodes;for(var e=0;e<f.length;e++){var h=f[e];if(h.nodeName.toUpperCase()=="LINK"||h.nodeName.toUpperCase()=="STYLE"){var g=h.getAttribute("type");h.setAttribute("type","none");if(g){h.setAttribute("type",g)}else{h.removeAttribute("type")}}}}},require:function(e){b.Util.lib.include(e,true)},addObj:function(e,k,h,g,f){var j=(e==null?document.body:document.getElementById(e));var i=b.Util.createObj(k,h,g,f);j.appendChild(i)},createObj:function(m,h,g,f){var k=document.createElement(h);if(m!=null){k.setAttribute("id",m)}var j=(g==null?[]:g.split(";"));for(var e=0;e<j.length;e++){var l=j[e].split(":");if(l.length>1){k.style[b.Util.cssParse(l[0])]=l[1]}}if(f!=null){k.className=f}return k},createUniqueId:function(){if(!b.Util.createUniqueId.count){b.Util.createUniqueId.count=0}return(b.namespacePrefix==""?"":b.namespacePrefix+"_")+(b.Util.createUniqueId.count++).toString(16).toUpperCase()},cssParse:function(g){if(g.indexOf("-")<0){return g}var f=g.split("-");for(var e=1;e<f.length;e++){f[e]=f[e].charAt(0).toUpperCase()+f[e].slice(1)}return f.join("")},setObjSize:function(g,e,f){if(b.Util.isNumber(e)){g.style.width=e+"px"}if(b.Util.isNumber(f)){g.style.height=f+"px"}},setObjPos:function(f,e,g){if(b.Util.isNumber(e)&&b.Util.isNumber(g)){f.style.position="absolute";f.style.left=e+"px";f.style.top=g+"px"}},getScrollXY:function(){var f=0,e=0;if(b.browser.device.name=="iphone"&&b.browser.device.version>3){return{x:f,y:e}}if(typeof(window.pageYOffset)=="number"){e=window.pageYOffset;f=window.pageXOffset}else{if(document.body&&(document.body.scrollLeft||document.body.scrollTop)){e=document.body.scrollTop;f=document.body.scrollLeft}else{if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)){e=document.documentElement.scrollTop;f=document.documentElement.scrollLeft}}}return{x:f,y:e}},getObjPos:function(i){var e=0;var j=0;var g=0;var f=0;if(i.getBoundingClientRect){g=b.Util.getStyle(i,"border-left-width");f=b.Util.getStyle(i,"border-top-width");if(b.Util.isNumber(g)&&(g!="")){e+=parseInt(g)}if(b.Util.isNumber(f)&&(f!="")){j+=parseInt(f)}var h=i.getBoundingClientRect();e+=h.left+b.Util.getScrollXY().x;j+=h.top+b.Util.getScrollXY().y}else{while(i!=null){g=b.Util.getStyle(i,"border-left-width");f=b.Util.getStyle(i,"border-top-width");if(b.Util.isNumber(g)&&(g!="")){e+=parseInt(g)}if(b.Util.isNumber(f)&&(f!="")){j+=parseInt(f)}e+=i.offsetLeft;j+=i.offsetTop;i=i.offsetParent}}return{x:e,y:j}},getEventPos:function(g){var f=0;var h=0;if(g.touches){if(g.touches.length>0){f=g.touches[0].pageX;h=g.touches[0].pageY}else{f=g.changedTouches[0].pageX;h=g.changedTouches[0].pageY}}else{if(g.pageX){f=g.pageX;h=g.pageY}else{f=g.clientX+document.documentElement.scrollLeft;h=g.clientY+document.documentElement.scrollTop}}return{x:f,y:h}},canvasPool:[],getCanvas:function(){b.Logger.log(b.Logger.FINEST,"getCanvas start pool size %0",b.Util.canvasPool.length);if(b.Util.canvasPool.length<1){return b.Util.createObj(null,"canvas",null,null)}return b.Util.canvasPool.pop()},releaseCanvas:function(e){e.width=0;e.height=0;b.Util.canvasPool.push(e);b.Logger.log(b.Logger.FINEST,"releaseCanvas end pool size %0",b.Util.canvasPool.length)},clearMatte:function(j,i,f,m,g,l){var e=j.width;var k=j.height;i.clearRect(0,0,f,k);i.clearRect(f,0,g,m);i.clearRect(f,m+l,g,k-(m+l));i.clearRect(f+g,0,e-(f+g),k)},isNumberType:function(e){return Object.prototype.toString.apply(e)==="[object Number]"},isNumber:function(e){return b.Util.isNumberType(e)&&!isNaN(e)},isNull:function(e){return(typeof e=="undefined"||e==null)},isArray:function(e){return Object.prototype.toString.apply(e)==="[object Array]"},isString:function(e){return Object.prototype.toString.apply(e)==="[object String]"},isBoolean:function(e){return Object.prototype.toString.apply(e)==="[object Boolean]"},isNonEmptyString:function(e){return b.Util.isString(e)&&e.length>0},isElement:function(f){try{return f instanceof HTMLElement}catch(g){return(f.nodeType===1)&&(typeof f==="object")&&(typeof f.style==="object")&&(typeof f.ownerDocument==="object")}},merge:function(){var e={},g,h;function f(j,i){for(var k in i){if(i.hasOwnProperty(k)){j[k]=i[k]}}}for(g=0;g<arguments.length;g++){h=arguments[g];if(h instanceof window.Object){f(e,h)}}return e},checkDefault:function(f,e){return(b.Util.isNull(f)||f==="")?e:f},checkDefaultText:function(f,e){return b.Util.isNull(f)?e:f},getStyle:function(g,h){var f="";if(window.getComputedStyle){f=document.defaultView.getComputedStyle(g,null).getPropertyValue(h)+""}else{if(g.currentStyle){var e=/(\-([a-z]){1})/g;if(h=="float"){h="styleFloat";if(e.test(h)){h=h.replace(e,function(){return arguments[2].toUpperCase()})}}else{if(h=="opacity"){return g.filters.alpha?(g.filters.alpha.opacity/100):1}}f=g.currentStyle[b.Util.cssParse(h)]?g.currentStyle[b.Util.cssParse(h)]+"":null}else{f=g.style[h]+""}}if(f&&f.indexOf("url(")==0){f=f.replace('url("',"");f=f.replace('")',"");f=f.replace("url(","");f=f.replace(")","")}return f},setOpacity:function(e,f){if(f<0){f=0}if(f>0.99){f=1}e.style.opacity=f;if(b.browser.name=="ie"){if((b.browser.version.minor>5.5)&&(b.browser.version.minor<=8)&&(document.body.filters)){if(e.filters){if(e.filters.length>0){if(e.filters["DXImageTransform.Microsoft.Alpha"]){e.filters.item("DXImageTransform.Microsoft.Alpha").Opacity=Math.round(f*100)}else{e.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(opacity="+Math.round(f*100)+")"}}else{e.style.filter=" progid:DXImageTransform.Microsoft.Alpha(opacity="+Math.round(f*100)+")"}}}}},convertColor:function(i,o){if(i&&i.length>0&&o&&o.length>0){var k=i.indexOf("rgb")==0;var f=i.indexOf("#")==0;var l=i.indexOf("0x")==0;if((k&&o=="rgb")||(f&&o=="hex")||(l&&o=="flash")){return i}else{if(k){var h=i.replace("rgb","");h=h.replace("(","");h=h.replace(")","");var m=h.split(",");var e=parseInt(m[0]);var j=parseInt(m[1]);var n=parseInt(m[2]);e=e.toString(16);j=j.toString(16);n=n.toString(16);e=(e.length==1?"0":"")+e;j=(j.length==1?"0":"")+j;n=(n.length==1?"0":"")+n;return(o=="hex"?"#":"0x")+e+j+n+(o=="flash"?"FF":"")}else{if(o=="rgb"){var h=i.replace("#","");h=h.replace("0x","");h=h.substring(0,6);var e=parseInt(h.substring(0,2),16);var j=parseInt(h.substring(2,4),16);var n=parseInt(h.substring(4,6),16);e=(!b.Util.isNumber(e)||e<0?0:(e>255?255:e));j=(!b.Util.isNumber(j)||j<0?0:(j>255?255:j));n=(!b.Util.isNumber(n)||n<0?0:(n>255?255:n));return"rgb("+e+","+j+","+n+")"}else{if(o=="hex"){var h=h.replace("0x","");return"#"+h.substring(0,6)}else{var h=i.replace("#","");return"0x"+h+"FF"}}}}}else{return i}},fade:function(l,f,h,k,j,i,g){if(typeof i=="undefined"&&f){i=b.Util.getStyle(l,"opacity");i=(!i||i==null||i.length==0?1:parseFloat(i))}else{if(typeof i=="undefined"&&!f){i=1}}if(typeof j=="undefined"&&f){j=i}else{if(typeof j=="undefined"&&!f){j=0}}var e=j+(f?-1:1)*0.05/h;if(!f){l.style.display=k}if(e>0&&e<1){l.style.opacity=i*e;b.Util.timeout(b.Util.fade,50,[l,f,h,k,e,i,g])}else{if(e>=1){l.style.opacity=1;if(typeof(g)!="undefined"){g()}}else{if(e<=0){l.style.display="none";if(typeof(g)!="undefined"){g()}}}}},isAbsPath:function(e){return(e&&((e.indexOf("http://")==0)||(e.indexOf("https://")==0)))},stripWhiteSpace:function(e){return e.replace(/[\s\t]+/g,"")},resizeToFitScreen:function(e){if(e){b.browser.screensize=b.browser.detectScreen();e.resize(b.browser.screensize.w,b.browser.screensize.h)}},adjustDevicePixelRatio:function(h,g,f){var e;if(h==-1||h==NaN){e=b.Util.hasProperty(window,"devicePixelRatio")?window.devicePixelRatio:1}else{if(h==0){e=1}else{if(h>0){e=b.Util.hasProperty(window,"devicePixelRatio")?window.devicePixelRatio:1;if(e>1&&(e*f*e*g>h)){e=1}}}}return e},hasProperty:function(e,f){return Boolean(f in e)},timeout:function(g,f,e){var h=function(){g.apply(this,e)};return setTimeout(h,f)},interval:function(g,f,e){var h=function(){g.apply(this,e)};return setInterval(h,f)},async:function(g,f,e){setTimeout(function(){g.apply(f,e||[])},0)},init:function(){b.Util.lib.checkJS()}}}if(!b.DEVICE){b.DEVICE=[[/iPhone/i,"iphone",[[/OS 3/i,"3"],[/OS 4/i,"4"],[/OS 5/i,"5"],[/OS 6/i,"6"],[/OS 7/i,"7"],[/OS 8/i,"8"],[/OS 9/i,"9"]],""],[/iPod/i,"ipod",[],""],[/iPad/i,"ipad",[[/OS 3/i,"3"],[/OS 4/i,"4"],[/OS 5/i,"5"],[/OS 6/i,"6"],[/OS 7/i,"7"],[/OS 8/i,"8"],[/OS 9/i,"9"]],""],[/Android/i,"android",[],""],[/Symbian/i,"symbian",[],""],[/(BlackBerry|BB10|PlayBook)/i,"blackberry",[[/BB10/i,"10"]],""],[/Palm/i,"palm",[],""],[/Windows CE; PPC/i,"pocketpc",[],""]]}if(!b.OS){b.OS=[[/Win/i,"win"],[/Android/i,"android"],[/Mac/i,"mac"],[/(iPhone|iPad)/i,"ios"],[/(BlackBerry|BB10|PlayBook)/i,"blackberry"]]}if(!b.browser){b.browser={raw:{ua:navigator.userAgent.toLowerCase(),ver:navigator.appVersion.toLowerCase()},name:"undefined",version:{major:"0",minor:"0",js:"0"},device:{name:"",version:"",pixelratio:1},os:"undefined",screensize:{w:0,h:0},supportflash:function(){if(navigator.plugins!=null&&navigator.plugins.length>0){if(navigator.plugins["Shockwave Flash"]){return true}}else{if((this.name=="msie")||(this.name=="ie")&&(navigator.appVersion.toLowerCase().indexOf("win")!=-1)){try{var f=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(f){return true}}catch(g){}}}return false},detectdevice:function(){var l="desktop";var k="";for(var h=0;h<b.DEVICE.length;h++){if(navigator.userAgent.match(b.DEVICE[h][0])){l=b.DEVICE[h][1];k=b.DEVICE[h][3];var f=b.DEVICE[h][2];for(var g=0;g<f.length;g++){var e=f[g];if(navigator.userAgent.match(e[0])){k=e[1];break}}break}}this.device.name=l;this.device.version=k;if(this.device.name=="iphone"){this.device.version=this.fixiphone(this.device.version)}if(this.device.name=="android"){this.device.version=this.getandroidversion()}if(typeof window.devicePixelRatio!="undefined"){this.device.pixelratio=window.devicePixelRatio}},supportsTouch:function(){var e=!!((window.navigator.maxTouchPoints>0||window.navigator.msMaxTouchPoints>0)||("ontouchstart" in window)||(window.DocumentTouch&&document instanceof window.DocumentTouch));return e},detectos:function(){for(var e=0;e<b.OS.length;e++){if(navigator.userAgent.match(b.OS[e][0])){this.os=b.OS[e][1]}}},getandroidversion:function(){var f=navigator.userAgent.toLowerCase();var e=f.match(/android\s([0-9\.]*)/);return e?parseInt(e[1],10):2},fixiphone:function(e){if(window.devicePixelRatio<2){return 3}return e},init:function(){var e=this.raw.ua;var m=this.raw.ver;this.version.minor=parseFloat(m);this.version.major=parseInt(this.version.minor);if(e.indexOf("opera")>-1){this.name="opera";if(this.version.major==5||this.version.major==6){this.version.js="1.3"}else{if(this.version.major>=7){this.version.js="1.5"}else{this.version.js="1.1"}}}else{if(e.indexOf("chrome")>-1&&e.indexOf("edge")>-1&&e.indexOf("like")>-1&&e.indexOf("applewebkit")>-1){this.name="ie";this.version.js="1.5";var f=e.substring(e.indexOf("edge")+5);this.version.minor=parseFloat(f);this.version.major=parseInt(this.version.minor)}else{if(e.indexOf("chrome")>-1){this.name="chrome";this.version.js="1.5"}else{if(e.indexOf("phantomjs")>-1){this.name="phantomjs";this.version.js="1.5"}else{if(e.indexOf("safari")>-1&&e.indexOf("mac")>-1){this.name="safari";this.version.js="1.5";var j=e.match(/(version|CriOS)\/([\d]+\.[\w]?\.?[\w]+)/gi);if(navigator.userAgent.match("CriOS")){this.name="chrome"}this.version.minor=parseFloat(j[0].split("/")[1]);this.version.major=parseInt(j[0].split("/")[1])}else{if(e.indexOf("applewebkit")>-1&&e.indexOf("mobile")>-1){this.name="safari";this.version.js="1.5"}else{if(e.indexOf("konqueror")>-1){var n=e.indexOf("konqueror");this.name="konquerer";this.version.minor=parseFloat(e.substring(n+10,e.indexOf(";",n)));this.version.major=parseInt(this.version.minor);this.version.js="1.5"}else{if(navigator.product&&navigator.product.toLowerCase()=="gecko"){if(e.indexOf("mozilla/5")>-1&&e.indexOf("spoofer")==-1&&e.indexOf("compatible")==-1&&e.indexOf("webtv")==-1&&e.indexOf("hotjava")==-1){if(navigator.vendor=="Firebird"){this.name="firebird"}else{if(e.indexOf("navigator")>-1){this.name="netscape"}else{if(navigator.vendor=="Firefox"||e.indexOf("firefox")>-1){this.name="firefox"}else{if(navigator.vendor==""||navigator.vendor=="Mozilla"||navigator.vendor=="Debian"){this.name="mozilla"}else{if(navigator.vendor.indexOf("Google")>-1){this.name="mozilla"}}}}}if(navigator.vendor==""&&e.indexOf("mozilla")>-1&&e.indexOf("like")>-1){this.name="ie";var f=e.substring(e.indexOf("rv:")+3);var g=f.indexOf(")");this.version.minor=parseFloat(f.substring(0,g));this.version.major=parseInt(this.version.minor)}else{if(this.name!="undefined"&&this.name!="netscape"){var l=(navigator.vendorSub)?navigator.vendorSub:0;var k;if(this.name=="firefox"&&!l){l=parseFloat(e.substring(e.indexOf("firefox/")+8))}else{if(!l){l=e.substring(e.substring("rv:")+3);k=l.indexOf(")");l=parseFloat(l.substring(0,k))}}this.version.minor=l;this.version.major=parseInt(l);this.version.js="1.5"}else{if(this.name=="netscape"){var i=e.indexOf("navigator");this.version.minor=parseFloat(e.substring(i+10,i+13));this.version.major=parseInt(this.version.minor);this.version.js="1.5"}}}}}else{if(e.indexOf("mozilla")>-1&&e.indexOf("spoofer")==-1&&e.indexOf("compatible")==-1&&e.indexOf("webtv")==-1&&e.indexOf("hotjava")==-1){this.name="netscape";if(navigator.vendor&&(navigator.vendor=="Netscape6"||navigator.vendor=="Netscape")){this.version.minor=parseFloat(navigator.vendorSub);this.version.major=parseInt(navigator.vendorSub)}if(this.version.major==2){this.version.js="1.0"}else{if(this.version.major==3){this.version.js="1.1"}else{if(this.version.major==4){this.version.js=(this.version.minor<=4.05?"1.2":"1.3")}else{if(this.version.major==5){this.version.js="1.4"}else{if(this.version.major>=6){this.version.js="1.5"}}}}}}else{if(e.indexOf("msie")>-1){this.name="ie";if(e.indexOf("mac")>-1){var h=e.indexOf("msie");this.version.minor=parseFloat(e.substring(h+5,e.indexOf(";",h)))}else{var h=m.indexOf("msie");this.version.minor=parseFloat(m.substring(h+5,m.indexOf(";",h)))}this.version.major=parseInt(this.version.minor);if(this.version.major<4){this.version.js="1.0"}else{if(this.version.major==4){this.version.js="1.2"}else{if(this.version.major>=5&&e.indexOf("mac")>-1){this.version.js="1.4"}else{if(this.version.major>=5){this.version.js="1.3"}}}}}else{if(e.indexOf("aol")>-1){this.name="aol"}else{if(e.indexOf("webtv")>-1){this.name="webtv"}else{if(e.indexOf("hotjava")>-1){this.name="hotjava";if(this.version.major>=3){this.version.js="1.4"}}}}}}}}}}}}}}this.detectdevice();this.detectos();this.screensize=this.detectScreen();this.supportsTouch()},detectScreen:function(){var e={w:0,h:0};if(self.innerHeight){e.w=self.innerWidth;e.h=self.innerHeight}else{if(document.documentElement&&document.documentElement.clientHeight){e.w=document.documentElement.clientWidth;e.h=document.documentElement.clientHeight}else{if(document.body){e.w=document.body.clientWidth;e.h=document.body.clientHeight}}}return e},isNoScreenSize:function(){this.screensize=this.detectScreen();return(this.screensize.w==0||this.screensize.h==0)}};b.browser.init()}if(!b.query){b.query={qs:"",params:{},init:function(){this.qs=window.location.search;this.qs=this.qs.substring(1,this.qs.length);var h=this.qs.split("&");for(var f=0;f<h.length;f++){var e="";var g=null;if(h[f].indexOf("=")>=0){e=h[f].substring(0,h[f].indexOf("="));e=b.query.fixKey(e);g=decodeURIComponent(h[f].substring(h[f].indexOf("=")+1))}else{e=b.query.fixKey(h[f])}this.params[e]=g}},getValue:function(e,f){var h=f;var g=b.query.fixKey(e);if(this.params[g]){h=this.params[g]}return h},fixKey:function(f){var h="";var e=f.split(".");if(e.length>1){for(var g=0;g<e.length-1;g++){h+=e[g]+"."}h+=e[e.length-1].toLowerCase()}else{h=f.toLowerCase()}return h}};b.query.init()}if(!b.Class){b.Class=new function(){var j=[];var h=[];this.inherits=function(k,p){var r=false,s,m;if(!b.Util.isString(k)||!b.Util.isString(p)){throw new Error("s7sdk.Class.inherit requires string parameters!")}m=k;k=f(k);s=p;p=f(p);if(typeof p==="undefined"||p.inheritancePending){k.inheritancePending=true;j.push(function n(){b.Class.inherits(m,s)})}else{t(k,p);k.inheritancePending=false;r=true}function t(w,v){var y=function u(){},x;y.prototype=v.prototype;x={};e(w.prototype,x);w.prototype=new y();w.prototype.constructor=w;w.prototype.superproto=v.prototype;w.prototype.superclass=v;w.superclass=v;e(x,w.prototype)}for(var q=h.length-1;q>-1;--q){var l=h[q];if(!l.objName||!l.fnName||!l.fn){continue}if(l.objName==m){var o=f(l.objName);g(o,l.fnName,l.fn);h.splice(q,1)}}return r};this.override=function(l,n,k){var m=f(l);if(typeof m==="undefined"){throw new Error("Object must be defined before calling override.")}if(typeof k!="function"){throw new Error("A function is required to override a base function.")}if(m.inheritancePending){h.push({objName:l,fnName:n,fn:k})}else{g(m,n,k)}};function g(l,m,k){if(!l.prototype[m]||typeof l.prototype[m]!="function"){b.Logger.log(b.Logger.WARNING,"s7sdk.Class.override: base function %0 does not exist.",m)}k.parent=l.prototype[m];l.prototype[m]=k}this.resolveAllPending=function(){var k=j.length;while(k--&&j.length){i()}if(j.length){throw new Error("Class.resolveAllPending Inheritance Failure!")}};function i(){var l=j;j=[];for(var k=0;k<l.length;k++){l[k].apply(null,[])}}function f(m){var l=window,k=m.split(".");if(k[0]==="s7sdk"){l=b;k.shift()}while(k.length&&typeof l!=="undefined"){l=l[k.shift()]}return l}function e(k,l){for(var m in k){if(k.hasOwnProperty(m)&&k.propertyIsEnumerable(m)){l[m]=k[m]}}}}}if(!b.ControlComponent){b.ControlComponent=function ControlComponent(f,g,h,e){arguments.callee.superclass.apply(this,[null,null,null,null,null]);this.component=f;this.storedStyles={};this.dynamicModifiers=null;this.listenerProxy={};this.compId=this.component.getId();this.restrictedStyles=(e==null)?{}:e;this.parentId=this.component.pid;this.namespace=g;this.componentconstructor=h;b.Util.borrowMethods(this.component,this,g);f.settings.registerComponent(this);this.dynamicModifiers=b.Util.resolveModifier(null,null,this.component,this.component.settings);delete this.dynamicModifiers.asset;this.restrictedStylesValues=this.readRestrictedStylesValues()};b.ControlComponent.prototype.storeStyles=function(f,e,g){if(!this.storedStyles[g]){this.storedStyles[g]={}}this.storedStyles[g][f]=e;b.CSSUtility.addStyle(g,f,e,this.storedStyles,this.compId);b.Logger.log(b.Logger.INFO,"s7sdk.ControlComponent.storeStyles property: %0 value %1 for component %2",f,e,this.component.getClassName())};b.ControlComponent.prototype.addStyleAndCheckRebuild=function(h,g,f){this.storeStyles(g,f,h);var e=this.isRestrictedCSSProperty(this.restrictedStyles,g)?this.restrictedStylesInvalidated():false;if(e||(h==".s7tooltip")){this.rebuild(this.dynamicModifiers?this.dynamicModifiers:this.component.settings)}};b.ControlComponent.prototype.dispose=function(){var e=this.getCl();if(!e||e.length==0){throw new Error("Invalid css classname specified for removing css style in dispose")}b.CSSUtility.removeStyle("."+e,this.getId());this.component.dispose()};b.ControlComponent.prototype.setCSS=function(h,g,f){if(this.component){function e(i){return i.replace(/\./g,"")}if((e(h)==this.getCl())&&((g=="width")||(g=="height"))){this.cntrlresize(g,f)}else{this.addStyleAndCheckRebuild(h,g,f)}this.dispatchEvent(new b.event.ControlComponentEvent(b.event.ControlComponentEvent.NOTF_CONTROLCOMPONENT_CSSUPDATED,{id:this.component.getObj().id,classname:h,property:g,value:f},false))}};b.ControlComponent.prototype.cntrlresize=function(i,h){if(this.component){var g=/[%]/gi;if(g.test(h)){}else{if(typeof this.component.resize=="function"){var e,f,j;j=parseInt(h);e=this.component.getWidth();f=this.component.getHeight();switch(i){case"width":e=j;break;case"height":f=j;break}this.component.resize(e,f)}}}};b.ControlComponent.prototype.setModifier=function(e){var g="";var n=this.component.getModifiers();var p=this.component.settings;var j=false;var o={};for(var l in e){var q=l.toLowerCase();o[q]=e[l]}for(var h in n){var f=h.toLowerCase(),m;if(typeof o[f]!="undefined"){m=o[f];if(f=="serverurl"){continue}j=true;g=this.dynamicModifiers.get(f);this.dynamicModifiers.set(f,m);this.dispatchEvent(new b.event.ControlComponentEvent(b.event.ControlComponentEvent.NOTF_CONTROLCOMPONENT_MODIFIERUPDATED,{id:this.component.getObj().id,oldvalue:g,newvalue:m,property:f},false))}}if(this.dynamicModifiers&&j){this.addParameterMappings(this.dynamicModifiers);b.CSSUtility.addStyle(null,null,null,this.storedStyles,this.compId);this.rebuild(this.dynamicModifiers)}};b.ControlComponent.prototype.addParameterMappings=function(e){if(!e.trackLoad){e.trackLoad=this.component.settings.trackLoad}if(!e.sendLoadMessage){e.sendLoadMessage=this.component.settings.sendLoadMessage}if(!e.createLoadData){e.createLoadData=this.component.settings.createLoadData}if(!e.params){e.params=this.component.settings.params}};b.ControlComponent.prototype.rebuild=function(m){if(this.component){this.listenerProxy=b.Util.copyListeners(this.component);this.component.disableEvents();var h=m.asset;var j;if(h){j=h;delete m.asset}else{if(typeof this.component.getCurrentAsset=="function"){j=this.component.getCurrentAsset()}}var l,k,e;if((typeof this.component.getWidth=="function")&&(typeof this.component.getHeight=="function")){l=this.component.getWidth();k=this.component.getHeight()}var i,g;if(this.restrictedStylesValues[this.getCl()]){i=this.restrictedStylesValues[this.getCl()].width;g=this.restrictedStylesValues[this.getCl()].height}this.unload();this.component=new this.componentconstructor(this.parentId,m,this.compId,true);this.restrictedStylesValues=this.readRestrictedStylesValues();var f=false;if(i&&g&&this.restrictedStylesValues[this.getCl()]){f=(i!=this.restrictedStylesValues[this.getCl()].width);f=f||(g!=this.restrictedStylesValues[this.getCl()].height)}if(!f&&(typeof this.component.resize=="function")){this.component.resize(l,k)}b.Util.assignListeners(this.listenerProxy,this.component);if(j&&(typeof this.component.setCurrentAsset=="function")){this.component.setCurrentAsset(j)}}};b.ControlComponent.prototype.unload=function(){if(this.component){this.component.cleanUp()}};b.ControlComponent.prototype.reload=function(){if(this.component){var e=(this.dynamicModifiers?this.dynamicModifiers:b.Util.resolveModifier("","",this.component,this.component.settings));this.rebuild(e)}};b.ControlComponent.prototype.restrictedStylesInvalidated=function(){var i=this.readRestrictedStylesValues();for(var e in this.restrictedStylesValues){var g=this.restrictedStylesValues[e];var f=i[e];for(var h in g){if(g[h]!=f[h]){return true}}}return false};b.ControlComponent.prototype.readRestrictedStylesValues=function(){var j={};if(this.restrictedStyles){for(var e in this.restrictedStyles){j[e]={};var k=e.split(" ");var l=[];for(var h=0;h<k.length;h++){l.push({className:k[h]})}l[0].id=this.component.id;for(var h=0;h<this.restrictedStyles[e].length;h++){var g=this.restrictedStyles[e][h];var f=b.Util.css.getCssExt(this.getParent(),l,g);j[e][g]=f}}}return j}}b.Class.inherits("s7sdk.ControlComponent","s7sdk.UIComponent");if(!b.Base){b.Base=function Base(j,f,g,e,h){if(!!j){this.id=j}else{this.id="";var i="";if(this.constructor&&this.constructor.NS&&this.constructor.NS.length>0){i=this.constructor.NS}else{i=this.getClassName()}if(i&&i.length>0){this.id=i+="_"}this.id+=b.Util.createUniqueId()}if(typeof f=="string"&&f!=""){this.pid=f}else{if(f&&(typeof f=="object")){if(b.common&&((b.common.ContainerControl&&f instanceof b.common.ContainerControl)||(b.common.ControlBarControl&&f instanceof b.common.ControlBarControl))){this.pid=f}else{this.pid=null}}else{this.pid=null}}this.nt=g;this.cl=(typeof e=="string")?e:"";this.settings=h;this.obj=null;this.events=new Object();this.trackingManager=null};b.Base.prototype.symbols=null;b.Base.prototype.getSymbols=function(){return this.symbols};b.Base.prototype.createElement=function(){var e=(typeof this.id=="string"&&this.id.length);var f=e?document.getElementById(this.id):null;if(f){this.obj=f;this.nt=f.tagName}else{this.obj=document.createElement(this.nt);if(e){this.obj.setAttribute("id",this.id)}}this.obj.className=this.cl;this.obj.setAttribute("data-description","Scene7ComponentHolder");this.obj.setAttribute("data-component",this.getClassName());if(b.namespacePrefix!=""){this.obj.setAttribute("data-namespace",b.namespacePrefix)}this.obj.s7base=this;if(!b.Util.isNull(this.settings)&&!b.Util.isNull(this.settings.locale)){this.obj.setAttribute("lang",this.settings.locale)}return this.obj};b.Base.prototype.getParent=function(){return this.pid==null?document.body:b.common&&((b.common.ContainerControl&&this.pid instanceof b.common.ContainerControl)||(b.common.ControlBarControl&&this.pid instanceof b.common.ControlBarControl))?document.getElementById(this.pid.component.id):document.getElementById(this.pid)};b.Base.prototype.getObj=function(){return this.obj};b.Base.prototype.getId=function(){return this.id};b.Base.prototype.getCl=function(){return this.cl};b.Base.prototype.getParam=function(g,h){var f;var e=this.getClassName();if(this.settings&&typeof this.settings.get=="function"){f=this.settings.get.apply(this.settings,[g,h,e,this.id])}else{f=h}return f};b.Base.prototype.addEventListener=function(i,h,e){if(!i){throw new Error("Invalid event type!")}e=(typeof e=="boolean"&&e);if(!b.Util.hasProperty(this.events,i)){this.events[i]=[];this.events[i].indexOfHandler=function(l,j){function k(n,m){return(n.handler===l&&n.useCapture==j)?m:-1}return Math.max.apply(null,this.map(k))}}var f=this.hasEventListener(i,h,e);if(!f){this.events[i].push({handler:h,useCapture:e});if(this.obj.addEventListener){this.obj.addEventListener(i,h,e)}else{if(this.obj.attachEvent){var g=b.Event.getIEEvent(i)||"onpropertychange";b.Logger.log(b.Logger.FINEST,"Registered S7Event is %0 , IE Event is %1",i,g);if(g=="onpropertychange"){this.obj.handler=this.obj.handler||{};this.obj.handler[i]=this.obj.handler[i]||[];this.obj.handler[i].push(h);this.obj.attachEvent(g,function(l){l=l||window.event;var k=l.srcElement.handler[l.s7eventName];if(k){var j=k.indexOf(h);if((j>-1)&&(i==l.s7eventName)){k[j](l)}}})}else{this.obj.attachEvent(g,h)}}}}};b.Base.prototype.removeEventListener=function(h,g,e){e=(typeof e=="boolean"&&e);var f=this.events[h]?this.events[h].indexOfHandler(g,e):-1;if(f>=0){if(this.obj.removeEventListener){this.obj.removeEventListener(h,g,e);this.events[h].splice(f,1);if(!this.events[h].length){delete this.events[h]}}else{if(this.obj.handler&&this.obj.handler[h]){delete this.obj.handler[h]}}}};b.Base.prototype.hasEventListener=function(g,f,e){return this.events[g]?this.events[g].indexOfHandler(f,e)>=0:false};b.Base.prototype.dispatchEvent=function(e){b.Event.dispatch(this.obj,e)};b.Base.prototype.disableEvent=function(h){if(h==null){for(var g in this.events){for(var e=0;e<this.events[g].length;e++){if(g=="onpropertychange"){continue}if(this.obj.removeEventListener){this.obj.removeEventListener(g,this.events[g][e].handler,this.events[g][e].useCapture)}else{this.obj.detachEvent("on"+g,this.events[g][e].handler)}}}}else{if(this.events.hasOwnProperty(h)){for(var f=0;f<this.events[h].length;f++){if(this.obj.removeEventListener){this.obj.removeEventListener(h,this.events[h][f].handler,this.events[h][f].useCapture)}else{this.obj.detachEvent("on"+h,this.events[h][f].handler)}}}}};b.Base.prototype.enableEvent=function(h){if(h==null){for(var g in this.events){for(var e=0;e<this.events[g].length;e++){if(g=="onpropertychange"){continue}if(this.obj.addEventListener){this.obj.addEventListener(g,this.events[g][e].handler,this.events[g][e].useCapture)}else{this.obj.attachEvent("on"+g,this.events[g][e].handler)}}}}else{if(this.events.hasOwnProperty(h)){for(var f=0;f<this.events[h].length;f++){if(this.obj.addEventListener){this.obj.addEventListener(h,this.events[h][f].handler,this.events[h][f].useCapture)}else{this.obj.attachEvent("on"+h,this.events[h][f].handler)}}}}};b.Base.prototype.enableEvents=function(){for(var e in this.events){this.enableEvent(e)}};b.Base.prototype.disableEvents=function(){for(var e in this.events){this.disableEvent(e)}};b.Base.prototype.getClassName=function(){var g;if(this.constructor&&this.constructor.name&&this.constructor.name.length){g=this.constructor.name}else{var e=/function\s([^(]{1,})\(/;var f=(e).exec((this).constructor.toString());if(f&&f.length>1){g=f[1]}}return g};b.Base.prototype.getLocalizedText=function(e){var g="";if(!b.Util.isNull(this.settings)){var h=e;var f=e;if(!b.Util.isNull(this.getClassName())){h=this.getClassName()+"."+h;if(!b.Util.isNull(this.id)){f=this.id+"."+h}}g=this.settings.getLocalizedText(f,null);if(g==null){g=this.settings.getLocalizedText(h,this.symbols[e])}}return g};b.Base.prototype.wrapContext=function(f){var e=this;return(function(){f.apply(e,arguments)})};b.Base.prototype.getNamespacePrefix=function(){return b.namespacePrefix}}if(!b.Component){b.Component=function Component(i,f,g,e,h){arguments.callee.superclass.apply(this,[i,f,g,e,h]);this.parseMods()};b.Class.inherits("s7sdk.Component","s7sdk.Base");b.Component.prototype.modifiers=null;b.Component.prototype.getModifiers=function(){return this.modifiers};b.Component.prototype.parseMods=function(){var k,f,l,e,j,h;for(k in this.modifiers){if(!this.modifiers.hasOwnProperty(k)){continue}f=this.modifiers[k];try{e=this.getParam(k,"");if(f.parseParams===false){j=new b.Modifier([e!=""?e:f.defaults[0]])}else{j=b.Modifier.parse(e,f.defaults,f.ranges)}if(k in this){throw new Error("Cannot add modifier property to component! "+this.getClassName()+" already defines property '"+k+"'!")}if(j.values.length==1){this[k]=j.values[0]}else{if(j.values.length>1){l={};for(h=0;h<j.values.length;h++){l[f.params[h]]=j.values[h]}this[k]=l}}}catch(g){throw new Error("Unable to process modifier: '"+k+"'. "+g)}}}}if(!b.UIComponent){b.UIComponent=function UIComponent(i,f,g,e,h){this.owner=null;arguments.callee.superclass.apply(this,[i,f,g,e,h,arguments[5]])};b.Class.inherits("s7sdk.UIComponent","s7sdk.Component");b.UIComponent.prototype.resize=function(f,e){b.Logger.log(b.Logger.FINE,"UIComponent.resize %0: %1x%2",this.id,f,e)};b.UIComponent.prototype.getOwner=function(){return this.owner};b.UIComponent.prototype.setOwner=function(e){this.owner=e};b.UIComponent.prototype.attachToContainer=function(){var e=this.getParent();if(e.s7base&&((b.Container&&e.s7base instanceof b.Container)||(b.ControlBar&&e.s7base instanceof b.ControlBar))){e=e.firstChild}if(this.obj.parentNode!=e){e.appendChild(this.obj)}};b.UIComponent.prototype.setCSS=function(h,g,f){b.Logger.log(b.Logger.FINE,"UIComponent.setCSS %0 %1 %2",h,g,f);var k=b.Util.objByClassName(h,this.getParent());var j=b.Util.cssPropToJSProp(g);for(var e=0;e<k.length;e++){k[e].style[j]=f}};b.UIComponent.prototype.isRestrictedCSSProperty=function(j,h){if(!j){throw new Error()}for(var e in j){for(var g=0;g<j[e].length;g++){var f=j[e][g];if(h==f){return true}}}return false}}if(!b.Modifier){b.Modifier=function(e){this.values=e};b.Modifier.parse=function(n,h,e){var k=[];if(b.Util.isArray(h)==false){throw new Error("A valid 'defaults' array must be provided!")}if(b.Util.isString(n)){var m=n.trim().split(",");for(var l=0;l<h.length;l++){if(typeof m[l]=="undefined"){m[l]=""}m[l]=m[l].trim();if(l>m.length-1||m[l].length==0){k[l]=h[l];continue}if(b.Util.isNumberType(h[l])){k[l]=Number(m[l]);if(isNaN(k[l])){throw new Error("The "+f(l)+" parameter should be Number!")}if(e&&e[l]&&b.Modifier.numericRangeValidator(k[l],e[l])==false){throw new Error("The "+f(l)+" parameter is out of range!")}}else{if(b.Util.isString(h[l])){k[l]=String(m[l]);if(e&&b.Util.isArray(e[l])&&b.Modifier.stringRangeValidator(k[l],e[l])==false){var o=parseInt(k[l]);if(o===Number(k[l])&&o>=0&&o<e[l].length){k[l]=e[l][o]}else{throw new Error("The "+f(l)+" parameter is not a valid enumeration string or index!")}}}else{if(b.Util.isBoolean(h[l])){var g=m[l].toLowerCase();if(g!="1"&&g!="true"&&g!="false"&&g!="0"){throw new Error("The "+f(l)+" parameter should be Boolean!")}k[l]=g=="true"?true:g=="false"?false:Boolean(Number(g))}else{k[l]=m[l]}}}}if(m.length>l){throw new Error("Too many parameters passed!")}}else{throw new Error("A valid 'input' string must be provided!")}function f(i){return(i+1)+j(i+1)}function j(i){var p=i%10;return(i<4||i>20)?(p==1?"st":p==2?"nd":p==3?"rd":"th"):"th"}return new b.Modifier(k)};b.Modifier.numericRangeValidator=function(e,g){var h=false,k=g.trim().split(","),j,f;for(f=0;f<k.length;f++){j=k[f].trim().split(":");if(Number(j[0])==e||(j.length==2&&(j[0].length==0||e>=Number(j[0]))&&(j[1].length==0||e<=Number(j[1])))){h=true;break}}return h};b.Modifier.stringRangeValidator=function(h,f){var e=false,j=h.toLowerCase().trim(),g;for(g=0;g<f.length;g++){if(b.Util.isString(f[g])==false){throw new Error("String ranges must be specified as strings!")}if(f[g].toLowerCase().trim()==j){e=true;break}}return e}}if(!b.Event){b.Event=function(){};b.Event.dispatch=function(i,e,f){f=(typeof f=="boolean")?f:false;if(!i){throw new Error("Cannot dispatch event to non-exist target!")}else{if(!e){throw new Error("Cannot dispatch event without type id or s7event object!")}}if(document.createEvent){var g=document.createEvent("Events");if(typeof e!="string"){g.s7event=e;g.initEvent(e.type,e.bubbles,e.useCapture)}else{g.initEvent(e,true,false)}if(f){setTimeout(function(){i.dispatchEvent(g)},0)}else{i.dispatchEvent(g)}}else{var h=document.createEventObject();h.s7event=e;h.s7eventName=(typeof e!="string"?e.type:e);if(i.fireEvent){var j=function(){if(b.Util.elementInDOM(i)){i.fireEvent("onpropertychange",h)}else{document.body.appendChild(i);i.fireEvent("onpropertychange",h);document.body.removeChild(i)}};if(f){setTimeout(function(){j()},0)}else{j()}}}};b.Event.addEventHandler=function(f,i,g,h,e){e=b.Util.isNull(e)?false:e;b.Event.addDOMListener(f,i,function(j){if(!j){j=window.event}h.apply(b.Util.isNull(g)?this:g,[j])},e)};b.Event.addDOMListener=function(i,g,h,e){if("addEventListener" in i){i.addEventListener(g,h,e)}else{if("attachEvent" in i){var f=b.Event.getIEEvent(g)||g;i.attachEvent(f,h)}}};b.Event.removeDOMListener=function(i,g,h,e){if("removeEventListener" in i){i.removeEventListener(g,h,e)}else{if("detachEvent" in i){var f=b.Event.getIEEvent(g)||g;i.detachEvent(f,h)}}};b.Event.preventDefault=function(e){if(e){if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}}};b.Event.stopPropagation=function(e){if(e){if(e.stopPropagation){e.stopPropagation()}else{e.cancelBubble=true}}};b.Event.getTarget=function(e){var f;if(!e){var e=window.event}if(e.target){f=e.target}else{if(e.srcElement){f=e.srcElement}}if(f&&f.nodeType==3){f=f.parentNode}return f};b.Event.getIEEvent=function(e){return b.Event.IEEVENT[e]};b.Event.TILE_LOADED="tileLoaded";b.Event.TILE_FAILED="tileFailed";b.Event.RES_INVALIDATED="invalidated";b.Event.INIT_COMPLETE="initComplete";b.Event.VIEW_LOADED="viewLoaded";b.Event.RENDER="render";b.Event.ENTER_FRAME="enterFrame";b.Event.SWIPE="s7swipe";b.Event.CLICK="s7click";b.Event.DBLCLICK="s7dblclick";b.Event.SDK_READY="sdkReady";b.Event.IEEVENT={mouseover:"onmouseover",mouseout:"onmouseout",mousedown:"onmousedown",mouseup:"onmouseup",mousemove:"onmousemove",mouseenter:"onmouseenter",mouseleave:"onmouseleave",mousewheel:"onmousewheel",contextmenu:"oncontextmenu",click:"onclick",dblclick:"ondblclick",keydown:"onkeydown",keyup:"onkeyup",keypress:"onkeypress",load:"onload",unload:"onunload",focus:"onfocus",blur:"onblur",focusin:"onfocusin",focusout:"onfocusout",resize:"onresize",scroll:"onscroll",change:"onchange"}}if(!b.ParameterManager){b.ParameterManager=function ParameterManager(f,e,i,h){b.Logger.log(b.Logger.CONFIG,"s7sdk.ParameterManager constructor - config: %0, locale: %1 , modifierMap: %2, defaultCSS: %3",f,e,i,h);arguments.callee.superclass.call(this,b.Util.createUniqueId(),null,"span");this.registeredComponents=[];this.params=new Object();this.config=(f?f:null);this.eventObj=new Image();this.hadCustomSize=false;this.hadCustomStyle=false;this.createElement();this.getParent().appendChild(this.obj);this.obj.style.display="none";this.eventObj=this.obj;this.loadTracked=false;this.i18n={};this.locale=(e?e:null);this.localizedTexts={};this.viewerType=b.ParameterManager.TYPE;this.viewerVersion="UNKNOWN";var g=window.location.href;this.viewerName=g.split("?")[0].split("/").pop();if(this.viewerName.indexOf(".")>0){this.viewerName=this.viewerName.split(".")[0]}this.modifierMap=(b.Util.isNull(i)?null:i);this.defaultCSS=(b.Util.isNull(h)?"":h);this.bulkPush(b.query.params);this.isDisposed=false};b.Class.inherits("s7sdk.ParameterManager","s7sdk.Base");b.ParameterManager.TYPE="s7_html5_sdk";b.ParameterManager.prototype.registerComponent=function(e){if(e instanceof b.Component){var f=e.getParent();if((e.getClassName()==="ImageMapEffect")||(e.getClassName()==="FavoritesEffect")||(!f||(f.s7base&&(f.s7base.getClassName()==="Container"||f.s7base.getClassName()==="ControlBar"||f.s7base.getClassName()==="SocialShare"))||!f.s7base)){this.registeredComponents.push(e)}}else{throw new Error("Cannot register component that is not a sub-class of s7sdk.Component!")}};b.ParameterManager.prototype.getRegisteredComponents=function(){b.Logger.log(b.Logger.FINE,"s7sdk.ParameterManager.getRegisteredComponents");var e=[];for(var f=0;f<this.registeredComponents.length;f++){e.push(this.registeredComponents[f])}return e};b.ParameterManager.prototype.setLocalizedTexts=function(f){b.Logger.log(b.Logger.FINE,"s7sdk.ParameterManager.setLocalizedTexts - inObj: %0",f);if(typeof f=="object"){for(var e in f){this.localizedTexts[e]=f[e]}}};b.ParameterManager.prototype.addEventListener=function(g,f,e){b.Logger.log(b.Logger.FINE,"s7sdk.ParameterManager.addEventListener - type: %0, handler: %1, useCapture: %2",g,f.toString().substring(0,f.toString().indexOf("(")),e);b.Base.prototype.addEventListener.apply(this,[g,f,e])};b.ParameterManager.loadConfig=function(j,g){g.hadCustomStyle=g.get("style",null)!=null;for(var f in j){if(!j.hasOwnProperty(f)){continue}g.push(f,j[f]);if(f.indexOf("i18n")==0&&f.split(".").length>1){var n="";var e=f.split(".");for(var h=1;h<e.length;h++){n+=(n!=""?".":"")+e[h]}g.i18n[n]=j[f]}}g.hadCustomSize=g.get("size",null)!=null;var l=g.resolveCSSPathFromStyleModifier(g);if(!g.hadCustomStyle){var m=decodeURIComponent((new RegExp("[?|&]cache=([^&;]+?)(&|#|;|$)","gi").exec(g.config)||[,""])[1].replace(/\+/g,"%20"))||null;if(m){l=l+(l.indexOf("?")>=0?"&":"?")+"cache="+m}}g.remap();if(l==null){if(g.defaultCSS!=""){b.Util.css.include(g.defaultCSS,null,false,g.id)}else{if(b.Util.css.defaultCSS!=""){b.Util.css.include(b.Util.css.defaultCSS,null,false,g.id)}}}else{b.Util.css.include(l,null,true,g.id)}b.ParameterManager.checkCSS(g,0)};b.ParameterManager.prototype.init=function(){b.Logger.log(b.Logger.FINE,"s7sdk.ParameterManager.init");if(typeof this.params.config!="undefined"&&this.params.config!=null&&this.params.config.length>0){this.config=(typeof this.params.serverurl!="undefined"&&this.params.serverurl!=null?this.params.serverurl:"/is/image/");this.config+=(this.config.lastIndexOf("/")!=(this.config.length-1)?"/":"")+unescape(this.params.config)}if(!b.Util.isNull(this.params.locale)&&this.params.locale.length>0){this.locale=this.params.locale}else{if(!b.Util.isNull(this.localizedTexts.defaultLocale)&&b.Util.isNull(this.locale)){this.locale=this.localizedTexts.defaultLocale}else{if(b.Util.isNull(this.locale)){this.locale="en"}}}this.populateLocalizedTexts();b.ParameterManager.check(this)};b.ParameterManager.prototype.resolveCSSPathFromStyleModifier=function(){var i=this.get("style",null);if(i==null){return null}var j=i.match(/^(data)\:(.*?),(.*)/);if(j){return i}var k=this.get("contentRoot",null);var g=this.get("contentURL","/is/content");if(!b.Util.isAbsPath(i)){var e=/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;var m=null;var f=null;var h=null;var l=(k!=null)?k:g;if(l!=null){l=l+(l.charAt(l.length-1)!="/"?"/":"");m=l.match(e);f=m[2]||null;h=m[4]||null;if((f)&&(h)){if(i.indexOf("/")==0){i=f+"://"+h+i}else{i=l+i}}else{i=(i.charAt(0)=="/")?i.substr(1,i.length-1):i;i=l+i}}}return i==""?null:i};b.ParameterManager.checkCSS=function(f,e){if(f.isDisposed){return}if(!b.Util.css.isAllLoaded()&&e<30){b.Util.timeout(b.ParameterManager.checkCSS,100,[f,++e])}else{if(e>=30){b.Logger.log(b.Logger.SEVERE,"Cannot load CSS")}if(b.browser.name==="ie"){}b.Event.dispatch(f.eventObj,b.Event.SDK_READY,true);var g=f.get("title","",f.getClassName(),f.id);if(g!=""){window.document.title=g}}};b.ParameterManager.check=function(g){if(g.isDisposed){return}if(!b.Util.lib.isAllJSLoaded()||b.browser.isNoScreenSize()){b.Util.timeout(b.ParameterManager.check,100,[g])}else{b.Class.resolveAllPending();if(g.config!=null){var e=new b.IS();g.config+=(/\?/.test(g.config)?"&":"?");e.getHttpReq(g.config+"req=userdata,json,UTF-8&locale="+g.locale,b.ParameterManager.loadConfig,null,g)}else{g.hadCustomSize=g.get("size",null)!=null;var f=g.resolveCSSPathFromStyleModifier();if(f==null){if(g.defaultCSS!=""){b.Util.css.include(g.defaultCSS,null,false,g.id)}else{if(b.Util.css.defaultCSS!=""){b.Util.css.include(b.Util.css.defaultCSS,null,false,g.id)}}}else{b.Util.css.include(f,null,true,g.id)}b.ParameterManager.checkCSS(g,0)}}};b.ParameterManager.prototype.trackLoad=function(e){if(this.loadTracked){return}var f=new b.event.UserEvent(b.event.UserEvent.LOAD,this.createLoadData().split(","),true);b.Event.dispatch(e.obj,f,false);this.sendLoadMessage();this.loadTracked=true};b.ParameterManager.prototype.sendLoadMessage=function(){var j="";var g=(new Date()).getTime();var m="";for(var l in this.params){if(typeof l==="string"){if((l.indexOf(".asset")!=-1&&l.indexOf(".asset")==l.lastIndexOf(".asset"))||(l=="asset")){m=this.params[l]}}}var e=(this.params.serverurl)?this.params.serverurl+"/":"/is/image/";var k=(e+m).replace(/%2f|%2F/g,"/").match(new RegExp("^(http[s]?://[^/]+)?[/]+([^/]+[/]+[^/]+)[/]+([^/]+)[/]+([^\\?]+)[\\?]?","i"));if((k==null)||(k.length<3)){b.Logger.log(b.Logger.WARNING,"Invalid image set.")}else{while(e.length>0&&e.lastIndexOf("/")==(e.length-1)){e=e.substr(0,e.length-1)}var h=this.params.aemmode==("1"||true);var f=new Image();j=e+"/"+((!h)?escape(k[3]):"")+"?req=message&message=,0,LOAD,"+this.viewerType+","+this.viewerName+","+this.viewerVersion+","+b.Version.version+",,,"+k[3]+"/"+k[4];f.src=j}};b.ParameterManager.prototype.setViewer=function(e){b.Logger.log(b.Logger.FINE,"s7sdk.ParameterManager.setViewer - inParams: %0",e);var f=e.split(",");if(f.length==3){this.viewerType=f[0];this.viewerVersion=f[1];this.viewerName=f[2]}else{if(f.length==2){this.viewerType=f[0];this.viewerVersion=f[1]}else{b.Logger.log(b.Logger.WARNING,"Invalid parameter for ParameterManager.setViewer(<inParams>):"+e)}}};b.ParameterManager.prototype.createLoadData=function(){var g=window.location.href;if(!this.viewerName||this.viewerName.length<1){this.viewerName=g.split("?")[0].split("/").pop();if(this.viewerName.indexOf(".")>0){this.viewerName=this.viewerName.split(".")[0]}}var h="",f="";var i=this.get("asset");if(!i){i=this.get("asset","","MediaSet")}if(i&&i.length>0){var e=i.indexOf("/");if(e>-1){f=i.substring(0,e);h=i.substring(e+1)}}return this.viewerType+","+this.viewerName+","+this.viewerVersion+","+b.Version.version+","+f+","+h};b.ParameterManager.prototype.onReady=function(){};b.ParameterManager.prototype.getModKey=function(f){var e=f.split(".");e[e.length-1]=e[e.length-1].toLowerCase();return e.join(".")};b.ParameterManager.prototype.push=function(e,g){b.Logger.log(b.Logger.FINE,"s7sdk.ParameterManager.push - key: %0, value: %1",e,g);var f=this.getModKey(e);if(!b.Util.isNull(this.modifierMap)&&!b.Util.isNull(this.modifierMap[f])){f=this.modifierMap[f]}if(!this.params[f]){this.params[f]=g}};b.ParameterManager.prototype.del=function(e){var f=this.getModKey(e);delete this.params[f]};b.ParameterManager.prototype.bulkPush=function(f){for(var e in f){if(!f.hasOwnProperty(e)){continue}this.push(e,(f.hasOwnProperty(e)?f[e]:null))}};b.ParameterManager.prototype.get=function(f,e,g,j){var i;var h=f.toLowerCase();if(j&&this.params[j+"."+h]){i=this.params[j+"."+h]}else{if(g&&this.params[g+"."+h]){i=this.params[g+"."+h]}else{i=(this.params[h]?this.params[h]:e)}}return i};b.ParameterManager.prototype.toString=function(){var f="ParameterManager: { ";for(var e in this.params){if(this.params.hasOwnProperty(e)){f+=e+"="+this.params[e]+" "}}f+="}";return f};b.ParameterManager.prototype.getLocalizedText=function(e,f){if(!b.Util.isNull(this.i18n[e])){return this.i18n[e]}return f};b.ParameterManager.prototype.listSymbols=function(){b.Logger.log(b.Logger.FINE,"s7sdk.ParameterManager.listSymbols");var m=this.getRegisteredComponents();var e={};var l="";var h;for(var j=0;j<m.length;j++){h=m[j].getSymbols();if(h!=null){for(var g in h){if(this.i18n[m[j].getClassName()+"."+g]){e[m[j].getClassName()+"."+g]=this.i18n[m[j].getClassName()+"."+g]}else{e[m[j].getClassName()+"."+g]=h[g]}var f='"'+m[j].getClassName()+"."+g+'":"'+e[m[j].getClassName()+"."+g]+'"';if(l==""){l+=f}else{l+=","+f}}}}return"{"+l+"}"};b.ParameterManager.prototype.populateLocalizedTexts=function(){var f=this.localizedTexts[this.locale];if(b.Util.isNull(f)){f=this.localizedTexts[(!b.Util.isNull(this.localizedTexts.defaultLocale)?this.localizedTexts.defaultLocale:"en")]}for(var e in f){if(f.hasOwnProperty(e)){this.i18n[e]=f[e]}}};b.ParameterManager.prototype.remap=function(){if(this.modifierMap!=null){var g={};for(var f in this.params){if(!this.params.hasOwnProperty(f)){continue}if(!b.Util.isNull(this.modifierMap[f])){var e=this.modifierMap[f];g[e]=this.params[f]}else{g[f]=this.params[f]}}this.params=g}};b.ParameterManager.prototype.dispose=function(){var g=this.resolveCSSPathFromStyleModifier();var e=document.getElementsByTagName("link");for(var f=e.length;f>=0;f--){if(e[f]&&e[f].getAttribute("href")!=null&&e[f].getAttribute("href").indexOf(g)!=-1&&e[f].getAttribute("pmid")==this.id){e[f].parentNode.removeChild(e[f]);break}}this.isDisposed=true;this.registeredComponents=[];this.eventObj=null;if(this.obj){if(this.obj.parentElement){this.obj.parentElement.removeChild(this.obj)}}this.obj=null}}if(!b.Color){b.Color=function(e){this.rawdata=e;this.hex=(typeof e=="number"?e.toString(16):e);this.hex=this.hex.replace("#","");this.hex=this.hex.replace("0x","");this.hex=this.hex.substring(0,6);var f=parseInt(this.hex,16);this.rgb={r:(f>>16)&255,g:(f>>8)&255,b:f&255}};b.Color.prototype.toString=function(){return"RAW:"+this.rawdata+"HEX:"+this.hex};b.Color.prototype.hexColor=function(){return"#"+this.hex};b.Color.prototype.rgbColor=function(){return this.rgb}}if(!b.Logger){b.Logger={console:{minlink:{id:"s7debugmaxlink",obj:null,pos:{x:5,y:5}},popup:{id:"s7debug",obj:null,pos:{x:5,y:5}},content:{id:"s7debugcontent",obj:null},nativeConsole:null},NONE:-1,SEVERE:0,WARNING:1,INFO:2,CONFIG:3,FINE:4,FINER:5,FINEST:6,severity:["SEVERE","WARNING","INFO","CONFIG","FINE","FINER","FINEST"],traceLevel:-1,enablePopup:false,enableInline:false,init:function(){var f=b.query.getValue("loglevel","SEVERE").toUpperCase();var g=f.split(",")[0];b.Logger.enablePopup=((f.split(",").length>1?f.split(",")[1]:"NONE")=="POPUP");b.Logger.enableInline=((f.split(",").length>1?f.split(",")[1]:"NONE")=="INLINE");var e=b.Logger[g];b.Logger.traceLevel=(typeof e=="undefined"?0:e);if(b.Logger.traceLevel>-1){if(b.Logger.enableInline){b.Logger.inlineDiv=null;b.Util.css.add("div.s7debuginline","height:300px;background-color:#FFFFFF;border:1px solid #CCCCCC;overflow:auto;position:relative;bottom:0px;width:100%")}if(b.Logger.enablePopup){b.Util.css.add("a.s7debugmaxlink","position:absolute;top:0px;left:0px;font-family:Arial;font-size:10px;font-weight:bold;text-align:center;display:block;height:15px;line-height:15px;width:80px;border:1px dotted #FF6600;color: #FF6600;background-color:#FFFFFF;z-index:1000;text-decoration:none;opacity:0.8;");b.Util.css.add("a.s7debugmaxlink:hover","border:1px solid #FF0000; color:#FF0000;");b.Util.css.add("a.s7debugminlink","display:block;width:80px;margin-right:5px;font-family:Arial;font-size:10px;font-weight:bold;color:#FF6600;text-decoration:none;");b.Util.css.add("a.s7debugminlink:hover","color:#FF6600;");b.Util.css.add("div.s7debugpopup","position:absolute;width:300px;height:200px;z-index:1000;border:1px solid #CCCCCC;background-color:#CCCCCC;box-shadow:2px 2px 2px #555555;cursor:move;opacity:0.9;border-radius:5px;");b.Util.css.add("div.s7debugcontent","width:280px;height:170px;margin: 0 0 0 9px; border:1px solid #CCCCCC;overflow:scroll;background-color:#FFFFFF;cursor:pointer;");b.Util.css.add("div.s7debugheader","width:298px;line-height:20px;clear:both;");b.Util.css.add("div.s7debuglabel","width:150px;font-weight:bold;color:#222222;float:left;margin-left:5px;font-family:Arial;font-size:11px;");b.Util.css.add("div.s7debugitem","border-bottom:1px dotted #CCCCCC;font:11px Arial;padding:5px 0px 5px 5px;");if(window.addEventListener){window.addEventListener("load",b.Logger.createConsole,false)}else{if(document.attachEvent){window.attachEvent("onload",function(){b.Logger.createConsole()})}}}if(typeof window.console!="undefined"){b.Logger.console.nativeConsole=function(h){window.console.log(h)}}else{if(typeof console!="undefined"&&typeof console.log!="undefined"){b.Logger.console.nativeConsole=function(h){console.log(h)}}else{b.Logger.console.nativeConsole=function(h){}}}}},minimize:function(e){b.Logger.console.popup.obj.style.top=(e?"-1000px":b.Logger.console.popup.pos.y+"px");b.Logger.console.minlink.obj.style.top=(e?b.Logger.console.minlink.pos.y+"px":"-1000px")},createConsole:function(){var f=document.createElement("a");f.className="s7debugmaxlink";f.setAttribute("id","s7debugmaxlink");f.setAttribute("href","javascript:void(0);");f.setAttribute("title","Click to show trace console");f.appendChild(document.createTextNode("+ Show Trace"));if(f.addEventListener){f.addEventListener("click",function(){b.Logger.minimize(false)},false)}else{f.attachEvent("onclick",function(){b.Logger.minimize(false)})}b.Util.setObjPos(f,b.Logger.console.minlink.pos.x,b.Logger.console.minlink.pos.y);b.Logger.console.minlink.obj=f;document.body.appendChild(f);var i=document.createElement("div");i.setAttribute("id","s7debug");b.Util.setObjPos(i,b.Logger.console.popup.pos.x,b.Logger.console.popup.pos.y);i.className="s7debugpopup";if(i.addEventListener){i.addEventListener("mousedown",b.Logger.drag,false);i.addEventListener("mouseup",b.Logger.drop,false)}else{i.attachEvent("onmousedown",b.Logger.drag);i.attachEvent("onmouseup",b.Logger.drop)}i.dragStart=false;i.dragRef={x:0,y:0};b.Logger.console.popup.obj=i;var e=document.createElement("div");e.setAttribute("align","right");e.className="s7debugheader";var g=document.createElement("div");g.className="s7debuglabel";g.setAttribute("align","left");g.appendChild(document.createTextNode("S7 Trace Console"));e.appendChild(g);var j=document.createElement("a");j.setAttribute("href","javascript:void(0);");j.className="s7debugminlink";j.setAttribute("title","Click to minimize trace console");j.onclick=function(){b.Logger.minimize(true)};j.appendChild(document.createTextNode("- minimize"));e.appendChild(j);i.appendChild(e);var h=document.createElement("div");h.setAttribute("id","s7debugcontent");h.nodrag=true;h.className="s7debugcontent";i.appendChild(h);b.Logger.console.content.obj=h;document.body.appendChild(i);b.Logger.minimize(false)},getPos:function(f){if(f.pageX||f.pageY){return{x:f.pageX,y:f.pageY}}else{return{x:f.clientX+document.body.scrollLeft-document.body.clientLeft,y:f.clientY+document.body.scrollTop-document.body.clientTop}}},drag:function(h){var g=b.Event.getTarget(h);var f=(typeof g.nodrag=="undefined"?false:g.nodrag);if(!f){b.Logger.console.popup.obj.dragStart=true;b.Logger.console.popup.obj.dragRef=b.Logger.getPos(h);if(document.addEventListener){document.addEventListener("mousemove",b.Logger.move,false)}else{document.attachEvent("onmousemove",b.Logger.move)}}},move:function(h){if(b.Logger.console.popup.obj.dragStart){var i=b.Logger.getPos(h);var g=i.x-b.Logger.console.popup.obj.dragRef.x;var f=i.y-b.Logger.console.popup.obj.dragRef.y;b.Logger.console.popup.obj.dragRef=i;b.Logger.console.popup.pos.x=b.Logger.console.popup.pos.x+g;b.Logger.console.popup.pos.y=b.Logger.console.popup.pos.y+f;b.Logger.console.popup.obj.style.top=b.Logger.console.popup.pos.y+"px";b.Logger.console.popup.obj.style.left=b.Logger.console.popup.pos.x+"px"}},drop:function(g){var f=b.Event.getTarget(g);b.Logger.console.popup.obj.dragStart=false;if(document.addEventListener){document.addEventListener("mousemove",b.Logger.move,false)}else{document.attachEvent("onmousemove",b.Logger.move)}},log:function(){var m=(arguments.length>=1?arguments[0]:"");if(b.Logger.traceLevel>=m){var g=b.Logger.severity[m];var l=(arguments.length>=2?arguments[1]:"");var f=new Array();for(var h=2;h<arguments.length;h++){f.push(arguments[h])}l=b.Logger.parseMacro(l,f);var k=(new Date()+" ").substring(0,34);if(b.Logger.console.content.obj!=null){var j=document.createElement("div");j.className="s7debugitem";j.appendChild(document.createTextNode(k+" - "+g+":"+l));j.nodrag=true;b.Logger.console.content.obj.appendChild(j);b.Logger.console.content.obj.scrollTop=b.Logger.console.content.obj.scrollHeight}if(b.Logger.enableInline&&document.body){if(null==b.Logger.inlineDiv){b.Logger.inlineDiv=document.createElement("div");b.Logger.inlineDiv.className="s7debuginline";document.body.appendChild(b.Logger.inlineDiv)}var e=b.Logger.inlineDiv.innerHTML;if(e.length>5000){e=e.substr(0,5000)}b.Logger.inlineDiv.innerHTML=g+":"+l+"<br>"+e}if(b.browser.name!="ie"){b.Logger.console.nativeConsole(k+" - "+g+":"+l)}}},parseMacro:function(j,h){var e=j;for(var f=h.length;f>0;f--){var g=new RegExp("%"+(f-1),"g");e=e.replace(g,h[f-1])}return e}};b.Logger.init()}if(!b.ImagePool){b.ImagePool=function(){this.freeImages=[];this.usedImages=[]};b.ImagePool.prototype.getImage=function(){var e;if(this.freeImages.length>0){e=this.freeImages.pop()}else{e=new Image()}this.usedImages.push(e);return e};b.ImagePool.prototype.releaseImage=function(f){f.height=1;f.width=1;f.onload=function(){};f.onerror=function(){};f.onabort=function(){};var e=this.usedImages.indexOf(f);if(e>=0){this.usedImages.splice(e,1)}else{b.Logger.log(b.Logger.WARNING,"ImagePool.releaseImage with unused image.")}var e=this.freeImages.indexOf(f);if(e>=0){b.Logger.log(b.Logger.SEVERE,"ImagePool.releaseImage double release.")}else{this.freeImages.push(f)}};b.imagePool=new b.ImagePool()}if(!b.CSSUtility){b.CSSUtility=function(){};b.CSSUtility.getPageCSSByDescription=function(h,g){var e=document.getElementsByTagName("style");var f=this.getStyleByDataDescriptor(h,e,h,g);return f};b.CSSUtility.getStyleByDataDescriptor=function(e,j,k,h){var g=0,f=j.length;for(g=0;g<f;g+=1){element=j[g];if((element.getAttribute("data-description")==k)&&(element.getAttribute("data-instance")==h)){return element}}return null};b.CSSUtility.addStyle=function(f,o,n,k,j){var h="";for(var g in k){h=(j?"#"+j:"")+g+"{\n";for(var m in k[g]){h+=("\t"+m+":"+k[g][m]+";\n")}h+="}";var e=b.Util.createElement("style",{type:"text/css",media:"screen","data-description":g,"data-component":g,"data-instance":j});if(e.styleSheet){e.styleSheet.cssText=h}else{e.appendChild(document.createTextNode(h))}var l=document.head||document.getElementsByTagName("head")[0];b.CSSUtility.removeStyle(g,j);l.appendChild(e)}};b.CSSUtility.removeStyle=function(h,g){var f=document.head||document.getElementsByTagName("head")[0];var e=b.CSSUtility.getPageCSSByDescription(h,g);if(e){f.removeChild(e)}}}if(!b.Window){b.Window={resizedObjs:[],resizeTimeout:null,currentSize:{w:0,h:0},monitorSizeTime:10000,monitorSizeTimeout:0,monitorSizeTimer:null,attach:function(f,e){if(typeof e!="string"){e="resize"}this.resizedObjs.push({o:f,fn:e})},detach:function(h,g){var e=-1;for(var f=0;f<this.resizedObjs.length;f++){if(this.resizedObjs[f].o===h&&this.resizedObjs[f].fn===g){e=f;break}}if(e!=-1){this.resizedObjs.splice(e,1)}},notfWindowResized:function(){b.browser.screensize=b.browser.detectScreen();if((b.browser.name=="ie")&&(b.browser.version.minor>5.5)&&(b.browser.version.minor<=8)){b.Window.ignoreNextResize=true}b.Window.sendNotifications()},sendNotifications:function(){for(var e=0;e<b.Window.resizedObjs.length;e++){if(b.Window.resizedObjs[e]){var g=b.Window.resizedObjs[e].o;var f=b.Window.resizedObjs[e].fn;g[f](b.browser.screensize.w,b.browser.screensize.h)}}},monitorSize:function(){b.browser.screensize=b.browser.detectScreen();if(b.Window.currentSize.w!=b.browser.screensize.w||b.Window.currentSize.h!=b.browser.screensize.h){b.Window.currentSize=b.browser.screensize;b.Window.sendNotifications()}if((new Date()).getTime()>b.Window.monitorSizeTimeout){clearInterval(b.Window.monitorSizeTimer);b.Window.monitorSizeTimer=null}},startMonitoringSize:function(){b.Window.monitorSizeTimeout=(new Date()).getTime()+b.Window.monitorSizeTime;if(null==b.Window.monitorSizeTimer){b.Window.monitorSizeTimer=window.setInterval(b.Window.monitorSize,100)}}};if(("onorientationchange" in window)&&b.browser.device!=""){window.onorientationchange=b.Window.startMonitoringSize;window.onresize=b.Window.startMonitoringSize}else{window.onresize=function(){if(b.Window.ignoreNextResize){b.Window.ignoreNextResize=false;return}if(b.Window.resizeTimeout){clearTimeout(b.Window.resizeTimeout)}b.Window.resizeTimeout=setTimeout(b.Window.notfWindowResized,100)}}}if(!b.Observable){b.Observable=function d(){this.listeners={};this.properties={}};b.Observable.prototype.notifyPropertyChanged=function(l,g,m){if(g&&g.equal(m)||g===m){return}var e=this.listeners["*"]||[];for(var f=0;f<e.length;f++){e[f](l,g,m)}var k=this.listeners[l];if(b.Util.isNull(k)){return}for(var h=0;h<k.length;h++){k[h](l,g,m)}};b.Observable.prototype.addPropertyListener=function(g,f){if(!f||typeof f!=="function"){return}var e=this.listeners[g];if(!e){e=this.listeners[g]=[]}e.push(f)};b.Observable.prototype.addPropertyListeners=function(e){this.addPropertyListener("*",e)};b.Observable.prototype.removePropertyListener=function(h,g){if(!g||typeof g!=="function"){return}var f=this.listeners[h];if(!f){return}var e=f.indexOf(g);if(e!==-1){f.splice(e,1)}};b.Observable.prototype.removePropertyListeners=function(e){this.removePropertyListener("*",e)}}if(!b.TrackingManager){b.TrackingManager=function TrackingManager(e,g,f){b.Logger.log(b.Logger.FINE,"s7sdk.TrackingManager constructor - containerId: %0, settings: %1 , compId: %2",e,g,f);if(null==g){g=new b.ParameterManager()}if(null==e){e="TrackMan"+b.Util.createUniqueId()}arguments.callee.superclass.apply(this,[f,e,"span",null,g]);this.initialized=false;this.trackComponents=[];this.trackEvents=[];this.eventObj=new Image();this.hadCustomSize=false;this.obj=this.eventObj;this.obj.style.display="none";this.eventTable={};this.handlerTable={};this.callback=undefined};b.Class.inherits("s7sdk.TrackingManager","s7sdk.Component");b.TrackingManager.prototype.modifiers={enableTracking:{params:["events"],defaults:[""],parseParams:false},disableTracking:{params:["events"],defaults:[""],parseParams:false}};b.TrackingManager.prototype.setCallback=function(f,e){this.callback=f;if(e){this.callbackContext=e}};b.TrackingManager.prototype.initializeComponentEvents=function(h){var k=[];if(b.TrackingManager.AVAILABLE_EVENTS.length<1){b.TrackingManager.AVAILABLE_EVENTS=[b.event.UserEvent.SWAP,b.event.UserEvent.SWATCH,b.event.UserEvent.PAGE,b.event.UserEvent.PLAY,b.event.UserEvent.PAUSE,b.event.UserEvent.STOP,b.event.UserEvent.MILESTONE,b.event.UserEvent.METADATA,b.event.UserEvent.HREF,b.event.UserEvent.ITEM,b.event.UserEvent.TARG,b.event.UserEvent.LOAD,b.event.UserEvent.ZOOM,b.event.UserEvent.SPIN,b.event.UserEvent.PAN,b.event.UserEvent.BANNER,b.event.UserEvent.INTERACTIVE_SWATCH]}var j=this.disableTracking.split(",");var g;if(j.length>0&&this.enableTracking.length==0){g=b.TrackingManager.AVAILABLE_EVENTS}else{g=this.enableTracking.split(",")}if(j.length>0){for(var f=0;f<g.length;f++){var i=g[f];if(j.indexOf(i)<0){k.push(i)}}}this.eventTable[h.pid]=k};b.TrackingManager.prototype.initializeEvents=function(){this.trackEvents=[];if(b.TrackingManager.AVAILABLE_EVENTS.length<1){b.TrackingManager.AVAILABLE_EVENTS=[b.event.UserEvent.SWAP,b.event.UserEvent.SWATCH,b.event.UserEvent.PAGE,b.event.UserEvent.PLAY,b.event.UserEvent.PAUSE,b.event.UserEvent.STOP,b.event.UserEvent.MILESTONE,b.event.UserEvent.METADATA,b.event.UserEvent.HREF,b.event.UserEvent.ITEM,b.event.UserEvent.TARG,b.event.UserEvent.LOAD,b.event.UserEvent.ZOOM,b.event.UserEvent.SPIN,b.event.UserEvent.PAN,b.event.UserEvent.BANNER,b.event.UserEvent.INTERACTIVE_SWATCH]}var h=this.disableTracking.split(",");var i;if(h.length>0&&this.enableTracking.length==0){i=b.TrackingManager.AVAILABLE_EVENTS}else{i=this.enableTracking.split(",")}if(h.length>0){for(var f=0;f<i.length;f++){var g=i[f];if(h.indexOf(g)<0){this.trackEvents.push(g)}}}this.initialized=true};b.TrackingManager.AVAILABLE_EVENTS=[];b.TrackingManager.modifiers="";b.TrackingManager.prototype.attach=function(e,f){b.Logger.log(b.Logger.FINE,"s7sdk.TrackingManager.attach - component: %0",e);if(null==e){return}if(this.trackComponents.indexOf(e)<0){this.trackComponents.push(e);this.initializeComponentEvents(e);e.trackingManager=this;b.Event.addEventHandler(e,b.event.UserEvent.NOTF_USER_EVENT,e,this.onUserEvent,false)}if(f){this.handlerTable[e.pid]=f}};b.TrackingManager.prototype.detach=function(f){b.Logger.log(b.Logger.FINE,"s7sdk.TrackingManager.detach - component: %0",f);if(null==f){return}f.removeEventListener(b.event.UserEvent.NOTF_USER_EVENT,this.onUserEvent,false);var e=this.trackComponents.indexOf(f);if(e<0){return}this.eventTable[f.pid]=[];this.trackComponents=this.trackComponents.splice(e,1);this.handlerTable[f.pid]=null;delete f.trackingManager};b.TrackingManager.prototype.onUserEvent=function(e){if(!this.trackingManager){return}var g=this.trackingManager.eventTable[this.pid];if(g.indexOf(e.s7event.trackEvent)==-1){return}b.Logger.log(b.Logger.CONFIG,"onUserEvent "+e.s7event.toString());var f=b.Event.getTarget(e);this.trackingManager.callTrackingHandler(this,(f&&f.id)?f.id:"",e.s7event.toString())};b.TrackingManager.prototype.callTrackingHandler=function(h,f,j){b.Logger.log(b.Logger.FINE,"s7sdk.TrackingManager.callTrackingHandler - component: %0, instanceName: %1 , dataString: %2",h,f,j);var e=h.compId;var i=h.getClassName();var g=(new Date()).getTime();if(null==f){f=""}if(this.handlerTable[e]&&typeof this.handlerTable[e]=="function"){(this.handlerTable[e])(e,i,f,g,j)}else{if(this.callback&&typeof this.callback=="function"){if(this.callbackContext){this.callback.apply(this.callbackContext,[e,i,f,g,j])}else{(this.callback)(e,i,f,g,j)}}else{if("s7ComponentEvent" in window){s7ComponentEvent(e,i,f,g,j)}}}};b.TrackingManager.prototype.parseTrack=function(h,e){var f=h.split(",");if(f.length==1){if((f[0]).toLowerCase()=="all"){this.trackEvents=e?b.TrackingManager.AVAILABLE_EVENTS.concat():[];return}}if(e){this.trackEvents=[]}for(var g=0;g<f.length;g++){var k=f[g].toUpperCase();k=k.replace(/^[ \t]+/,"");k=k.replace(/[ \t]+$/,"");var j=this.AVAILABLE_EVENTS.indexOf(k);if(j!=-1){if(e){j=this.trackEvents.indexOf(k);if(j==-1){this.trackEvents.push(k)}}else{j=this.trackEvents.indexOf(k);if(j!=-1){this.trackEvents.splice(j,1)}}}}};b.TrackingManager.prototype.dispose=function(){this.setCallback(null);for(var e=0;e<this.trackComponents.length;e++){this.detach(this.trackComponents[e])}if(this.settings){this.settings.dispose()}}}})(s7getCurrentNameSpace());