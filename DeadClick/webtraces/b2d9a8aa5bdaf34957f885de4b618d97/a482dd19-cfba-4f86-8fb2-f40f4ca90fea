/*! Version: $Rev: 53468 $ */
/*! Socket.IO.min.js build:0.9.11, production. Copyright(c) 2011 LearnBoost <dev@learnboost.com> MIT Licensed */
var io="undefined"==typeof module?{}:module.exports;(function(){(function(n,t){var i=n;i.version="0.9.11",i.protocol=1,i.transports=[],i.j=[],i.sockets={},i.connect=function(n,r){var u=i.util.parseUri(n),o,f,e;return t&&t.location&&(u.protocol=u.protocol||t.location.protocol.slice(0,-1),u.host=u.host||(t.document?t.document.domain:t.location.hostname),u.port=u.port||t.location.port),o=i.util.uniqueUri(u),e={host:u.host,secure:"https"==u.protocol,port:u.port||("https"==u.protocol?443:80),query:u.query||""},i.util.merge(e,r),(e["force new connection"]||!i.sockets[o])&&(f=new i.Socket(e)),!e["force new connection"]&&f&&(i.sockets[o]=f),f=f||i.sockets[o],f.of(u.path.length>1?u.path:"")}})("object"==typeof module?module.exports:this.io={},this),function(n,t){var i=n.util={},u=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,f=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],r;i.parseUri=function(n){for(var r=u.exec(n||""),i={},t=14;t--;)i[f[t]]=r[t]||"";return i},i.uniqueUri=function(n){var u=n.protocol,i=n.host,r=n.port;return"document"in t?(i=i||document.domain,r=r||(u=="https"&&document.location.protocol!=="https:"?443:document.location.port)):(i=i||"localhost",!r&&u=="https"&&(r=443)),(u||"http")+"://"+i+":"+(r||80)},i.query=function(n,t){var r=i.chunkQuery(n||""),f=[],u;i.merge(r,i.chunkQuery(t||""));for(u in r)r.hasOwnProperty(u)&&f.push(u+"="+r[u]);return f.length?"?"+f.join("&"):""},i.chunkQuery=function(n){for(var r={},u=n.split("&"),i=0,f=u.length,t;i<f;++i)t=u[i].split("="),t[0]&&(r[t[0]]=t[1]);return r},r=!1,i.load=function(n){if("document"in t&&document.readyState==="complete"||r)return n();i.on(t,"load",n,!1)},i.on=function(n,t,i,r){n.attachEvent?n.attachEvent("on"+t,i):n.addEventListener&&n.addEventListener(t,i,r)},i.request=function(n){if(n&&"undefined"!=typeof XDomainRequest&&!i.ua.hasCORS)return new XDomainRequest;if("undefined"!=typeof XMLHttpRequest&&(!n||i.ua.hasCORS))return new XMLHttpRequest;if(!n)try{return new window[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(t){}return null},"undefined"!=typeof window&&i.load(function(){r=!0}),i.defer=function(n){if(!i.ua.webkit||"undefined"!=typeof importScripts)return n();i.load(function(){setTimeout(n,100)})},i.merge=function(n,t,r,u){var e=u||[],o=typeof r=="undefined"?2:r,f;for(f in t)t.hasOwnProperty(f)&&i.indexOf(e,f)<0&&(typeof n[f]!="object"||!o?(n[f]=t[f],e.push(t[f])):i.merge(n[f],t[f],o-1,e));return n},i.mixin=function(n,t){i.merge(n.prototype,t.prototype)},i.inherit=function(n,t){function i(){}i.prototype=t.prototype,n.prototype=new i},i.isArray=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"},i.intersect=function(n,t){for(var f=[],o=n.length>t.length?n:t,u=n.length>t.length?t:n,r=0,e=u.length;r<e;r++)~i.indexOf(o,u[r])&&f.push(u[r]);return f},i.indexOf=function(n,t,i){for(var r=n.length,i=i<0?i+r<0?0:i+r:i||0;i<r&&n[i]!==t;i++);return r<=i?-1:i},i.toArray=function(n){for(var i=[],t=0,r=n.length;t<r;t++)i.push(n[t]);return i},i.ua={},i.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){try{var n=new XMLHttpRequest}catch(t){return!1}return n.withCredentials!=undefined}(),i.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent),i.ua.iDevice="undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)}("undefined"!=typeof io?io:module.exports,this),function(n,t){function i(){}n.EventEmitter=i,i.prototype.on=function(n,i){return this.$events||(this.$events={}),this.$events[n]?t.util.isArray(this.$events[n])?this.$events[n].push(i):this.$events[n]=[this.$events[n],i]:this.$events[n]=i,this},i.prototype.addListener=i.prototype.on,i.prototype.once=function(n,t){function i(){r.removeListener(n,i),t.apply(this,arguments)}var r=this;return i.listener=t,this.on(n,i),this},i.prototype.removeListener=function(n,i){var r,f,u,e;if(this.$events&&this.$events[n])if(r=this.$events[n],t.util.isArray(r)){for(f=-1,u=0,e=r.length;u<e;u++)if(r[u]===i||r[u].listener&&r[u].listener===i){f=u;break}if(f<0)return this;r.splice(f,1),r.length||delete this.$events[n]}else(r===i||r.listener&&r.listener===i)&&delete this.$events[n];return this},i.prototype.removeAllListeners=function(n){return n===undefined?(this.$events={},this):(this.$events&&this.$events[n]&&(this.$events[n]=null),this)},i.prototype.listeners=function(n){return this.$events||(this.$events={}),this.$events[n]||(this.$events[n]=[]),t.util.isArray(this.$events[n])||(this.$events[n]=[this.$events[n]]),this.$events[n]},i.prototype.emit=function(n){var i,u,f,r,e;if(!this.$events||(i=this.$events[n],!i))return!1;if(u=Array.prototype.slice.call(arguments,1),"function"==typeof i)i.apply(this,u);else{if(!t.util.isArray(i))return!1;for(f=i.slice(),r=0,e=f.length;r<e;r++)f[r].apply(this,u)}return!0}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(n,t){function u(n){return n<10?"0"+n:n}function l(n){return isFinite(n.valueOf())?n.getUTCFullYear()+"-"+u(n.getUTCMonth()+1)+"-"+u(n.getUTCDate())+"T"+u(n.getUTCHours())+":"+u(n.getUTCMinutes())+":"+u(n.getUTCSeconds())+"Z":null}function o(n){return h.lastIndex=0,h.test(n)?'"'+n.replace(h,function(n){var t=a[n];return typeof t=="string"?t:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}function f(n,t){var s,a,h,v,y=i,c,u=t[n];u instanceof Date&&(u=l(n)),typeof r=="function"&&(u=r.call(t,n,u));switch(typeof u){case"string":return o(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(i+=e,c=[],Object.prototype.toString.apply(u)==="[object Array]"){for(v=u.length,s=0;s<v;s+=1)c[s]=f(s,u)||"null";return h=c.length===0?"[]":i?"[\n"+i+c.join(",\n"+i)+"\n"+y+"]":"["+c.join(",")+"]",i=y,h}if(r&&typeof r=="object")for(v=r.length,s=0;s<v;s+=1)typeof r[s]=="string"&&(a=r[s],h=f(a,u),h&&c.push(o(a)+(i?": ":":")+h));else for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(h=f(a,u),h&&c.push(o(a)+(i?": ":":")+h));return h=c.length===0?"{}":i?"{\n"+i+c.join(",\n"+i)+"\n"+y+"}":"{"+c.join(",")+"}",i=y,h}}if(t&&t.parse)return n.JSON={parse:t.parse,stringify:t.stringify};var c=n.JSON={},s=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,i,e,a={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},r;c.stringify=function(n,t,u){var o;if(i="",e="",typeof u=="number")for(o=0;o<u;o+=1)e+=" ";else typeof u=="string"&&(e=u);if(r=t,!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return f("",{"":n});throw new Error("JSON.stringify");},c.parse=function(n,t){function r(n,i){var f,e,u=n[i];if(u&&typeof u=="object")for(f in u)Object.prototype.hasOwnProperty.call(u,f)&&(e=r(u,f),e!==undefined?u[f]=e:delete u[f]);return t.call(n,i,u)}var i;if(n=String(n),s.lastIndex=0,s.test(n)&&(n=n.replace(s,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(n.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return i=eval("("+n+")"),typeof t=="function"?r({"":i},""):i;throw new SyntaxError("JSON.parse");}}("undefined"!=typeof io?io:module.exports,typeof JSON!="undefined"?JSON:undefined),function(n,t){var i=n.parser={},f=i.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],e=i.reasons=["transport not supported","client not handshaken","unauthorized"],o=i.advice=["reconnect"],r=t.JSON,u=t.util.indexOf,s;i.encodePacket=function(n){var l=u(f,n.type),a=n.id||"",v=n.endpoint||"",y=n.ack,t=null,s,i,h,c;switch(n.type){case"error":s=n.reason?u(e,n.reason):"",i=n.advice?u(o,n.advice):"",(s!==""||i!=="")&&(t=s+(i!==""?"+"+i:""));break;case"message":n.data!==""&&(t=n.data);break;case"event":h={name:n.name},n.args&&n.args.length&&(h.args=n.args),t=r.stringify(h);break;case"json":t=r.stringify(n.data);break;case"connect":n.qs&&(t=n.qs);break;case"ack":t=n.ackId+(n.args&&n.args.length?"+"+r.stringify(n.args):"")}return c=[l,a+(y=="data"?"+":""),v],t!==null&&t!==undefined&&c.push(t),c.join(":")},i.encodePayload=function(n){var i="",t,r,u;if(n.length==1)return n[0];for(t=0,r=n.length;t<r;t++)u=n[t],i+="�"+u.length+"�"+n[t];return i},s=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/,i.decodePacket=function(n){var t=n.match(s),u;if(!t)return{};var h=t[2]||"",n=t[5]||"",i={type:f[t[1]],endpoint:t[4]||""};h&&(i.id=h,i.ack=t[3]?"data":!0);switch(i.type){case"error":t=n.split("+"),i.reason=e[t[0]]||"",i.advice=o[t[1]]||"";break;case"message":i.data=n||"";break;case"event":try{u=r.parse(n),i.name=u.name,i.args=u.args}catch(c){}i.args=i.args||[];break;case"json":try{i.data=r.parse(n)}catch(c){}break;case"connect":i.qs=n||"";break;case"ack":if(t=n.match(/^([0-9]+)(\+)?(.*)/),t&&(i.ackId=t[1],i.args=[],t[3]))try{i.args=t[3]?r.parse(t[3]):[]}catch(c){}}return i},i.decodePayload=function(n){var u,t,r;if(n.charAt(0)=="�"){for(u=[],t=1,r="";t<n.length;t++)n.charAt(t)=="�"?(u.push(i.decodePacket(n.substr(t+1).substr(0,r))),t+=Number(r)+1,r=""):r+=n.charAt(t);return u}return[i.decodePacket(n)]}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(n,t){function i(n,t){this.socket=n,this.sessid=t}n.Transport=i,t.util.mixin(i,t.EventEmitter),i.prototype.heartbeats=function(){return!0},i.prototype.onData=function(n){var i,r,u;if(this.clearCloseTimeout(),(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout(),n!==""&&(i=t.parser.decodePayload(n),i&&i.length))for(r=0,u=i.length;r<u;r++)this.onPacket(i[r]);return this},i.prototype.onPacket=function(n){return this.socket.setHeartbeatTimeout(),n.type=="heartbeat"?this.onHeartbeat():(n.type=="connect"&&n.endpoint==""&&this.onConnect(),n.type=="error"&&n.advice=="reconnect"&&(this.isOpen=!1),this.socket.onPacket(n),this)},i.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var n=this;this.closeTimeout=setTimeout(function(){n.onDisconnect()},this.socket.closeTimeout)}},i.prototype.onDisconnect=function(){return this.isOpen&&this.close(),this.clearTimeouts(),this.socket.onDisconnect(),this},i.prototype.onConnect=function(){return this.socket.onConnect(),this},i.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},i.prototype.clearTimeouts=function(){this.clearCloseTimeout(),this.reopenTimeout&&clearTimeout(this.reopenTimeout)},i.prototype.packet=function(n){this.send(t.parser.encodePacket(n))},i.prototype.onHeartbeat=function(){this.packet({type:"heartbeat"})},i.prototype.onOpen=function(){this.isOpen=!0,this.clearCloseTimeout(),this.socket.onOpen()},i.prototype.onClose=function(){var n=this;this.isOpen=!1,this.socket.onClose(),this.onDisconnect()},i.prototype.prepareUrl=function(){var n=this.socket.options;return this.scheme()+"://"+n.host+":"+n.port+"/"+n.resource+"/"+t.protocol+"/"+this.name+"/"+this.sessid},i.prototype.ready=function(n,t){t.call(this)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(n,t,i){function r(n){if(this.options={port:80,secure:!1,document:"document"in i?document:!1,resource:"socket.io",transports:t.transports,"connect timeout":1e4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":Infinity,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":!1,"auto connect":!0,manualFlush:!1},t.util.merge(this.options,n),this.connected=!1,this.open=!1,this.connecting=!1,this.reconnecting=!1,this.namespaces={},this.buffer=[],this.doBuffer=!1,this.options["sync disconnect on unload"]&&(!this.isXDomain()||t.util.ua.hasCORS)){var r=this;t.util.on(i,"beforeunload",function(){r.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function u(){}n.Socket=r,t.util.mixin(r,t.EventEmitter),r.prototype.of=function(n){return this.namespaces[n]||(this.namespaces[n]=new t.SocketNamespace(this,n),n!==""&&this.namespaces[n].packet({type:"connect"})),this.namespaces[n]},r.prototype.publish=function(){var n,t;this.emit.apply(this,arguments);for(t in this.namespaces)this.namespaces.hasOwnProperty(t)&&(n=this.of(t),n.$emit.apply(n,arguments))},r.prototype.handshake=function(n){function s(t){t instanceof Error?(r.connecting=!1,r.onError(t.message)):n.apply(null,t.split(":"))}var r=this,e=this.options,h=["http"+(e.secure?"s":"")+":/",e.host+":"+e.port,e.resource,t.protocol,t.util.query(this.options.query,"t="+ +new Date)].join("/"),o,f,i;this.isXDomain()&&!t.util.ua.hasCORS?(o=document.getElementsByTagName("script")[0],f=document.createElement("script"),f.src=h+"&jsonp="+t.j.length,o.parentNode.insertBefore(f,o),t.j.push(function(n){s(n),f.parentNode.removeChild(f)})):(i=t.util.request(),i.open("GET",h,!0),this.isXDomain()&&(i.withCredentials=!0),i.onreadystatechange=function(){i.readyState==4&&(i.onreadystatechange=u,i.status==200?s(i.responseText):i.status==403?r.onError(i.responseText):(r.connecting=!1,!r.reconnecting&&r.onError(i.responseText)))},i.send(null))},r.prototype.getTransport=function(n){for(var u=n||this.transports,i,r=0;i=u[r];r++)if(t.Transport[i]&&t.Transport[i].check(this)&&(!this.isXDomain()||t.Transport[i].xdomainCheck(this)))return new t.Transport[i](this,this.sessionid);return null},r.prototype.connect=function(n){if(this.connecting)return this;var i=this;return i.connecting=!0,this.handshake(function(r,u,f,e){function o(n){if(i.transport&&i.transport.clearTimeouts(),i.transport=i.getTransport(n),!i.transport)return i.publish("connect_failed");i.transport.ready(i,function(){i.connecting=!0,i.publish("connecting",i.transport.name),i.transport.open(),i.options["connect timeout"]&&(i.connectTimeoutTimer=setTimeout(function(){if(!i.connected&&(i.connecting=!1,i.options["try multiple transports"])){for(var n=i.transports;n.length>0&&n.splice(0,1)[0]!=i.transport.name;);n.length?o(n):i.publish("connect_failed")}},i.options["connect timeout"]))})}i.sessionid=r,i.closeTimeout=f*1e3,i.heartbeatTimeout=u*1e3,i.transports||(i.transports=i.origTransports=e?t.util.intersect(e.split(","),i.options.transports):i.options.transports),i.setHeartbeatTimeout(),o(i.transports),i.once("connect",function(){clearTimeout(i.connectTimeoutTimer),n&&typeof n=="function"&&n()})}),this},r.prototype.setHeartbeatTimeout=function(){if(clearTimeout(this.heartbeatTimeoutTimer),!this.transport||this.transport.heartbeats()){var n=this;this.heartbeatTimeoutTimer=setTimeout(function(){n.transport.onClose()},this.heartbeatTimeout)}},r.prototype.packet=function(n){return this.connected&&!this.doBuffer?this.transport.packet(n):this.buffer.push(n),this},r.prototype.setBuffer=function(n){this.doBuffer=n,!n&&this.connected&&this.buffer.length&&(this.options.manualFlush||this.flushBuffer())},r.prototype.flushBuffer=function(){this.transport.payload(this.buffer),this.buffer=[]},r.prototype.disconnect=function(){return(this.connected||this.connecting)&&(this.open&&this.of("").packet({type:"disconnect"}),this.onDisconnect("booted")),this},r.prototype.disconnectSync=function(){var n=t.util.request(),i=["http"+(this.options.secure?"s":"")+":/",this.options.host+":"+this.options.port,this.options.resource,t.protocol,"",this.sessionid].join("/")+"/?disconnect=1";n.open("GET",i,!1),n.send(null),this.onDisconnect("booted")},r.prototype.isXDomain=function(){var n=i.location.port||("https:"==i.location.protocol?443:80);return this.options.host!==i.location.hostname||this.options.port!=n},r.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))},r.prototype.onOpen=function(){this.open=!0},r.prototype.onClose=function(){this.open=!1,clearTimeout(this.heartbeatTimeoutTimer)},r.prototype.onPacket=function(n){this.of(n.endpoint).onPacket(n)},r.prototype.onError=function(n){n&&n.advice&&n.advice==="reconnect"&&(this.connected||this.connecting)&&(this.disconnect(),this.options.reconnect&&this.reconnect()),this.publish("error",n&&n.reason?n.reason:n)},r.prototype.onDisconnect=function(n){var t=this.connected,i=this.connecting;this.connected=!1,this.connecting=!1,this.open=!1,(t||i)&&(this.transport.close(),this.transport.clearTimeouts(),t&&(this.publish("disconnect",n),"booted"!=n&&this.options.reconnect&&!this.reconnecting&&this.reconnect()))},r.prototype.reconnect=function(){function i(){if(n.connected){for(var i in n.namespaces)n.namespaces.hasOwnProperty(i)&&""!==i&&n.namespaces[i].packet({type:"connect"});n.publish("reconnect",n.transport.name,n.reconnectionAttempts)}clearTimeout(n.reconnectionTimer),n.removeListener("connect_failed",t),n.removeListener("connect",t),n.reconnecting=!1,delete n.reconnectionAttempts,delete n.reconnectionDelay,delete n.reconnectionTimer,delete n.redoTransports,n.options["try multiple transports"]=u}function t(){if(n.reconnecting){if(n.connected)return i();if(n.connecting&&n.reconnecting)return n.reconnectionTimer=setTimeout(t,1e3);n.reconnectionAttempts++>=r?n.redoTransports?(n.publish("reconnect_failed"),i()):(n.on("connect_failed",t),n.options["try multiple transports"]=!0,n.transports=n.origTransports,n.transport=n.getTransport(),n.redoTransports=!0,n.connect()):(n.reconnectionDelay<f&&(n.reconnectionDelay*=2),n.connect(),n.publish("reconnecting",n.reconnectionDelay,n.reconnectionAttempts),n.reconnectionTimer=setTimeout(t,n.reconnectionDelay))}}this.reconnecting=!0,this.reconnectionAttempts=0,this.reconnectionDelay=this.options["reconnection delay"];var n=this,r=this.options["max reconnection attempts"],u=this.options["try multiple transports"],f=this.options["reconnection limit"];this.options["try multiple transports"]=!1,this.reconnectionTimer=setTimeout(t,this.reconnectionDelay),this.on("connect",t)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(n,t){function i(n,t){this.socket=n,this.name=t||"",this.flags={},this.json=new r(this,"json"),this.ackPackets=0,this.acks={}}function r(n,t){this.namespace=n,this.name=t}n.SocketNamespace=i,t.util.mixin(i,t.EventEmitter),i.prototype.$emit=t.EventEmitter.prototype.emit,i.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)},i.prototype.packet=function(n){return n.endpoint=this.name,this.socket.packet(n),this.flags={},this},i.prototype.send=function(n,t){var i={type:this.flags.json?"json":"message",data:n};return"function"==typeof t&&(i.id=++this.ackPackets,i.ack=!0,this.acks[i.id]=t),this.packet(i)},i.prototype.emit=function(n){var t=Array.prototype.slice.call(arguments,1),r=t[t.length-1],i={type:"event",name:n};return"function"==typeof r&&(i.id=++this.ackPackets,i.ack="data",this.acks[i.id]=r,t=t.slice(0,t.length-1)),i.args=t,this.packet(i)},i.prototype.disconnect=function(){return this.name===""?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect")),this},i.prototype.onPacket=function(n){function r(){u.packet({type:"ack",args:t.util.toArray(arguments),ackId:n.id})}var u=this,i;switch(n.type){case"connect":this.$emit("connect");break;case"disconnect":this.name===""?this.socket.onDisconnect(n.reason||"booted"):this.$emit("disconnect",n.reason);break;case"message":case"json":i=["message",n.data],n.ack=="data"?i.push(r):n.ack&&this.packet({type:"ack",ackId:n.id}),this.$emit.apply(this,i);break;case"event":i=[n.name].concat(n.args),n.ack=="data"&&i.push(r),this.$emit.apply(this,i);break;case"ack":this.acks[n.ackId]&&(this.acks[n.ackId].apply(this,n.args),delete this.acks[n.ackId]);break;case"error":n.advice?this.socket.onError(n):n.reason=="unauthorized"?this.$emit("connect_failed",n.reason):this.$emit("error",n.reason)}},r.prototype.send=function(){this.namespace.flags[this.name]=!0,this.namespace.send.apply(this.namespace,arguments)},r.prototype.emit=function(){this.namespace.flags[this.name]=!0,this.namespace.emit.apply(this.namespace,arguments)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(n,t,i){function r(){t.Transport.apply(this,arguments)}n.websocket=r,t.util.inherit(r,t.Transport),r.prototype.name="websocket",r.prototype.open=function(){var u=t.util.query(this.socket.options.query),n=this,r;return r||(r=i.MozWebSocket||i.WebSocket),this.websocket=new r(this.prepareUrl()+u),this.websocket.onopen=function(){n.onOpen(),n.socket.setBuffer(!1)},this.websocket.onmessage=function(t){n.onData(t.data)},this.websocket.onclose=function(){n.onClose(),n.socket.setBuffer(!0)},this.websocket.onerror=function(t){n.onError(t)},this},r.prototype.send=t.util.ua.iDevice?function(n){var t=this;return setTimeout(function(){t.websocket.send(n)},0),this}:function(n){return this.websocket.send(n),this},r.prototype.payload=function(n){for(var t=0,i=n.length;t<i;t++)this.packet(n[t]);return this},r.prototype.close=function(){return this.websocket.close(),this},r.prototype.onError=function(n){this.socket.onError(n)},r.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"},r.check=function(){return"WebSocket"in i&&!("__addTask"in WebSocket)||"MozWebSocket"in i},r.xdomainCheck=function(){return!0},t.transports.push("websocket")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(n,t,i){function r(n){n&&(t.Transport.apply(this,arguments),this.sendBuffer=[])}function u(){}n.XHR=r,t.util.inherit(r,t.Transport),r.prototype.open=function(){return this.socket.setBuffer(!1),this.onOpen(),this.get(),this.setCloseTimeout(),this},r.prototype.payload=function(n){for(var r=[],i=0,u=n.length;i<u;i++)r.push(t.parser.encodePacket(n[i]));this.send(t.parser.encodePayload(r))},r.prototype.send=function(n){return this.post(n),this},r.prototype.post=function(n){function r(){this.readyState==4&&(this.onreadystatechange=u,t.posting=!1,this.status==200?t.socket.setBuffer(!1):t.onClose())}function f(){this.onload=u,t.socket.setBuffer(!1)}var t=this;this.socket.setBuffer(!0),this.sendXHR=this.request("POST"),i.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=f:this.sendXHR.onreadystatechange=r,this.sendXHR.send(n)},r.prototype.close=function(){return this.onClose(),this},r.prototype.request=function(n){var i=t.util.request(this.socket.isXDomain()),r=t.util.query(this.socket.options.query,"t="+ +new Date);if(i.open(n||"GET",this.prepareUrl()+r,!0),n=="POST")try{i.setRequestHeader?i.setRequestHeader("Content-type","text/plain;charset=UTF-8"):i.contentType="text/plain"}catch(u){}return i},r.prototype.scheme=function(){return this.socket.options.secure?"https":"http"},r.check=function(n,r){try{var u=t.util.request(r),f=i.XDomainRequest&&u instanceof XDomainRequest,e=n&&n.options&&n.options.secure?"https:":"http:",o=i.location&&e!=i.location.protocol;if(u&&(!f||!o))return!0}catch(s){}return!1},r.xdomainCheck=function(n){return r.check(n,!0)}}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(n,t){function i(){t.Transport.XHR.apply(this,arguments)}n.htmlfile=i,t.util.inherit(i,t.Transport.XHR),i.prototype.name="htmlfile",i.prototype.get=function(){var n,i,r;this.doc=new window[["Active"].concat("Object").join("X")]("htmlfile"),this.doc.open(),this.doc.write("<html><\/html>"),this.doc.close(),this.doc.parentWindow.s=this,n=this.doc.createElement("div"),n.className="socketio",this.doc.body.appendChild(n),this.iframe=this.doc.createElement("iframe"),n.appendChild(this.iframe),i=this,r=t.util.query(this.socket.options.query,"t="+ +new Date),this.iframe.src=this.prepareUrl()+r,t.util.on(window,"unload",function(){i.destroy()})},i.prototype._=function(n,t){this.onData(n);try{var i=t.getElementsByTagName("script")[0];i.parentNode.removeChild(i)}catch(r){}},i.prototype.destroy=function(){if(this.iframe){try{this.iframe.src="about:blank"}catch(n){}this.doc=null,this.iframe.parentNode.removeChild(this.iframe),this.iframe=null,CollectGarbage()}},i.prototype.close=function(){return this.destroy(),t.Transport.XHR.prototype.close.call(this)},i.check=function(n){if(typeof window!="undefined"&&["Active"].concat("Object").join("X")in window)try{var i=new window[["Active"].concat("Object").join("X")]("htmlfile");return i&&t.Transport.XHR.check(n)}catch(r){}return!1},i.xdomainCheck=function(){return!1},t.transports.push("htmlfile")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(n,t,i){function r(){t.Transport.XHR.apply(this,arguments)}function u(){}n["xhr-polling"]=r,t.util.inherit(r,t.Transport.XHR),t.util.merge(r,t.Transport.XHR),r.prototype.name="xhr-polling",r.prototype.heartbeats=function(){return!1},r.prototype.open=function(){var n=this;return t.Transport.XHR.prototype.open.call(n),!1},r.prototype.get=function(){function t(){this.readyState==4&&(this.onreadystatechange=u,this.status==200?(n.onData(this.responseText),n.get()):n.onClose())}function r(){this.onload=u,this.onerror=u,n.retryCounter=1,n.onData(this.responseText),n.get()}function f(){n.retryCounter++,!n.retryCounter||n.retryCounter>3?n.onClose():n.get()}if(this.isOpen){var n=this;this.xhr=this.request(),i.XDomainRequest&&this.xhr instanceof XDomainRequest?(this.xhr.onload=r,this.xhr.onerror=f):this.xhr.onreadystatechange=t,this.xhr.send(null)}},r.prototype.onClose=function(){if(t.Transport.XHR.prototype.onClose.call(this),this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=u;try{this.xhr.abort()}catch(n){}this.xhr=null}},r.prototype.ready=function(n,i){var r=this;t.util.defer(function(){i.call(r)})},t.transports.push("xhr-polling")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(n,t,i){function r(){t.Transport["xhr-polling"].apply(this,arguments),this.index=t.j.length;var n=this;t.j.push(function(t){n._(t)})}var u=i.document&&"MozAppearance"in i.document.documentElement.style;n["jsonp-polling"]=r,t.util.inherit(r,t.Transport["xhr-polling"]),r.prototype.name="jsonp-polling",r.prototype.post=function(n){function e(){o(),r.socket.setBuffer(!1)}function o(){r.iframe&&r.form.removeChild(r.iframe);try{u=document.createElement('<iframe name="'+r.iframeId+'">')}catch(n){u=document.createElement("iframe"),u.name=r.iframeId}u.id=r.iframeId,r.form.appendChild(u),r.iframe=u}var r=this,s=t.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);if(!this.form){var i=document.createElement("form"),f=document.createElement("textarea"),h=this.iframeId="socketio_iframe_"+this.index,u;i.className="socketio",i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.style.display="none",i.target=h,i.method="POST",i.setAttribute("accept-charset","utf-8"),f.name="d",i.appendChild(f),document.body.appendChild(i),this.form=i,this.area=f}this.form.action=this.prepareUrl()+s,o(),this.area.value=t.JSON.stringify(n);try{this.form.submit()}catch(c){}this.iframe.attachEvent?u.onreadystatechange=function(){r.iframe.readyState=="complete"&&e()}:this.iframe.onload=e,this.socket.setBuffer(!0)},r.prototype.get=function(){var r=this,n=document.createElement("script"),f=t.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index),i;this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),n.async=!0,n.src=this.prepareUrl()+f,n.onerror=function(){r.onClose()},i=document.getElementsByTagName("script")[0],i.parentNode.insertBefore(n,i),this.script=n,u&&setTimeout(function(){var n=document.createElement("iframe");document.body.appendChild(n),document.body.removeChild(n)},100)},r.prototype._=function(n){return this.onData(n),this.isOpen&&this.get(),this},r.prototype.ready=function(n,i){var r=this;if(!u)return i.call(this);t.util.load(function(){i.call(r)})},r.check=function(){return"document"in i},r.xdomainCheck=function(){return!0},t.transports.push("jsonp-polling")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),typeof define=="function"&&define.amd&&define([],function(){return io})})(),window.lbuiDebug=!1,function(n){if(!n.proxy){var a,r=n.document,w=0,b=function(n,t){t=t||r;var i=e(n),u,f;if(i==="string")if(/[^<][>$]/.test(n))this.unshift(r.createElement(n.substring(1,n.length-1)));else{for(f=t.getElementsByTagName(n||"*"),u=f.length;u--;)this.unshift(f[u]);this.filter(v.notNodeName("#comment")).filter(v.notAttribute("data-owner","proxy"))}else if(i==="proxy"||i==="array")for(u=n.length;u--;)this.unshift(n[u]);else if(i==="object"||i==="node")this.unshift(n);else if(i==="function"){this.unshift(r);this.once("ready",n)}},t=n.proxy=function(n,t){return new b(n,t)},i=t.proto=b.prototype={length:0,push:Array.prototype.push,sort:Array.prototype.sort,splice:Array.prototype.splice,pop:Array.prototype.pop,unshift:Array.prototype.unshift,_proxy:"1.7"},v=t.filters=function(){var n=function(n,i){return function(r){var u=t(r).getAttr(n);return n==="class"?ut(i,(u||"").split(" ")):n&&i?u===i:u!==null}},i=function(n){return function(t){return t.nodeName===n}},r=function(n,i){return function(r){var u=t(r).getAttr(n);return n==="class"?!ut(i,(u||"").split(" ")):n&&i?u!==i:u===null}},u=function(n){return function(t){return t.nodeName!==n}};return{attribute:n,nodeName:i,notAttribute:r,notNodeName:u}}(),h=t.cache=[],f=t.iterate=function(n,t){var i;for(i in n)if(n.hasOwnProperty(i)&&t.call(n[i],i,n[i])===!1)break;return n},o=t.queryCache=function(n){var t=[];return f(h,function(i,r){n.call(r,r)===!0&&t.push(r)}),t},et=t.log=function(){if(n.lbuiDebug)try{arguments[0]="[DEPLOY] "+arguments[0],console.log.apply(console,arguments)}catch(t){}},ot=t.guid=function(n){return w+=1,(n||"proxy")+ +new Date+(w-1)},e=t.is=function(n){var t=typeof n;if(undefined===n)return"undefined";if(null===n)return"null";if(t==="function")return l.types[n.toString()]||"function";if(t==="object"){if(n._proxy)return"proxy";if(undefined!==n.innerHTML)return"node";if(undefined!==n.length&&!n.proxy)return"array"}return t},y=t.isString=function(n){return e(n)==="string"},k=t.trim=function(n){return y(n)?n.replace(/^\s+/,"").replace(/\s+$/,""):n},dt=t.caseInsensitiveMatch=function(n,t){return y(n)&&y(t)&&n.toUpperCase()===t.toUpperCase()},gt=t.isArray=function(n){return n instanceof Array||e(n)==="array"},ni=t.isBoolean=function(n){return e(n)==="boolean"},c=t.isEmptyString=function(n){return k(n)===""},d=t.isFunction=function(n){return e(n)==="function"},ti=t.isNode=function(n){return e(n)==="node"},st=t.isNull=function(n){return e(n)==="null"},ht=t.isNumber=function(n){return e(n)==="number"},ct=t.isNaN=function(t){return ht(t)&&n.isNaN(t)},g=t.isObject=function(n){return e(n)==="object"},ii=t.isProxy=function(n){return e(n)==="proxy"},p=t.isUndefined=function(n){return e(n)==="undefined"},lt=t.isValue=function(n){return!p(n)&&!st(n)&&!c(n)&&!ct(n)},at=t.encode=function(n){return encodeURIComponent(n)},vt=t.decode=function(n){return decodeURIComponent(n)},nt=t.URL=function(t){t=t||n.location.href;var i=this,u=i.hash=function(){var n=t.lastIndexOf("#");return n===-1?undefined:t.substring(n+1)},r=i.params=function(){var n=t.lastIndexOf("?");return n===-1?undefined:t.substring(n+1,t.length).replace("#"+u(),"")},e=i.paramsAsObject=function(){var n={},t=r();return p(t)?undefined:(f(r().split("&"),function(t,i){i=i.split("="),n[i[0]]=vt(i[1])}),n)},o=i.base=function(){var n=t,i=u(),f=r();return n.replace("#"+i,"").replace("?"+f,"")}},yt=t.map=function(n,t){var r=[],i;return f(n,function(n,u){i=t(n,u),i&&r.push(i)}),r},pt=t.serialise=function(n,t){return t=p(t)?!0:t,yt(n,function(n,i){return i=k(i),lt(i)&&n+"="+(t?at(i):i)}).join("&")},tt=function(n,t){f(t,function(t,i){g(i)?tt(n[t]=n[t]||{},i):n[t]=i})},s=t.extend=i.extend=function(){var n=arguments,t=n[0],i=n[1];return n.length===1&&(t=this,i=n[0]),tt(t,i),t},wt=t.constructURL=function(n,t){var i=new nt(n),r=pt(s(i.paramsAsObject()||{},t||{}));return r?i.base()+"?"+r:i.base()},ri=t.getURLParams=function(n){return new nt(n).paramsAsObject()},it=t.noop=function(){return function(){}},bt=t.getScript=function(n,i){var f="script",u=r.createElement(f),e=r.getElementsByTagName(f)[0];return i&&(u.async=!0),u.type="text/javascript",u.src=n,e.parentNode.insertBefore(u,e),t(u).attr("data-owner","proxy")},u=t.getJSON=function(t){var i=s({url:n.location.href,data:{},success:it},t),o=parseFloat(i.instanceID.replace(/^\D+/,"")),r=i.callback||"JSONP"+o,e=+new Date,f=r+"_"+e,h=wt(i.url,s(i.data,{callback:"proxy.getJSON."+f})),c=bt(h),l=function(n,t,i){for(var f,e=u.fn.length,r=0;r<e;r+=1)if(f=u.fn[r],f.callbackName===n&&f.timestamp===t){f.JSON=i;break}},a=function(n){for(var i,f=u.fn.length,r=[],t=0;t<f;t+=1)i=u.fn[t],i.callbackName!==n?r.push(i):u[n+"_"+i.timestamp]=it;u.fn=r},v=function(n){for(var i,r=u.fn.length-1,t=r;t>-1;t-=1)if(i=u.fn[t],i.callbackName===n)return i.JSON;return undefined};u.fn=u.fn||[],u.fn.push({callbackName:r,timestamp:e,JSON:null}),u.hasOwnProperty(f)||(u[f]=function(t){var u;l(r,e,t),n.setTimeout(function o(){if(u=v(r),u===undefined||u===null){u===null&&n.setTimeout(o,250);return}a(r,e),c.remove();try{delete this[f]}catch(t){this[f]=null}i.success.call(n,u)},0)})},ui=i.find=function(n){return t(n,this.first())},rt=t.indexOf=function(n,t){var i=-1;return f(t,function(t,r){if(r===n)return i=t,!1}),i},ut=t.inArray=function(n,t){return rt(n,t)>-1},fi=t.cloneObject=function(n){return s({},n)},ei=t.fromJSON=function(n){return JSON.parse(n)},oi=t.toJSON=function(n){return JSON.stringify(n)},si=t.test=function(n,t,i){var r=t();i(r,n)===!1&&console&&console.warn&&console.warn("FAIL - "+n,{name:n,expectedResult:i.toString(),actualResult:r,test:t.toString()})},kt=t.events={ready:{getHandler:function(n){return function(t){r.readyState==="complete"&&n(t)}},name:"readystatechange"}},hi=t.round=function(n){return Math.round(n)},ci=t.ceil=function(n){return Math.ceil(n)},li=t.floor=function(n){return Math.floor(n)},ai=t.castToBoolean=function(n){return n===!0||n==="true"||n==="1"||n===1?!0:n===!1||n==="false"||n==="0"||n===0?!1:undefined},ft=t.browser=new function(){var t=this,i=t.userAgent=n.navigator.userAgent.toUpperCase(),u=t.Android=/ANDROID/.test(i),f=t.iOS=/IP(HONE|[AO]D)/.test(i),e=t.IE6=/MSIE 6.0/.test(i),o=t.IE7=/MSIE 7.0/.test(i),s=t.IE8=/MSIE 8.0/.test(i),h=t.IE9=/MSIE 9.0/.test(i),c=t.IE10=/MSIE 10.0/.test(i),l=t.IE=c||h||s||o||e,a=t.IEMobile=/IEMOBILE/.test(i),k=t.SamsungGalaxyS3=/GT-I9300/.test(i),v=t.BlackBerry=/BLACKBERRY/.test(i),y=t.Mobile=u||f||a||v,r=t.chrome=/CHROME/.test(i),p=t.safari=!r&&/SAFARI/.test(i),w=t.opera=/OPERA/.test(i),b=t.firefox=/FIREFOX/.test(i),d=t.DESKTOP=!y&&(l||r||b||p||w),g=t.nested=n.location!==n.parent.location},l=function(){var t={scroll:"UIEvents",click:"HTMLEvents",resize:"UIEvents",focus:"HTMLEvents"},i=function(){var n=function(n){if(c(n))return{};n=n.toLowerCase().replace(/; /g,";").replace(/: /g,":").replace(/;$/,"");var i=n.split(";"),t={};return f(i,function(n,i){c(i)||(i=i.split(":"),t[i[0]]=i[1])}),t},t=function(n){var t=[],i=0;return f(n,function(n,r){n==="opacity"&&t.push("filter:alpha(opacity="+r*100+")"),t.push(n+":"+r),i++}),i>0?t.join(";")+";":""};return{parse:n,stringify:t}},u=function(t,i){var f=t===n,u;switch(i){case"width":f&&(t=r.documentElement),i="clientWidth",u=t[i];break;case"height":f&&(t=r.documentElement),i="clientHeight",u=t[i];break;case"innerWidth":u=t[i];break;case"innerHeight":u=t[i];break;case"outerWidth":u=t[i];break;case"outerHeight":u=t[i];break;case"scrollTop":i="scrollY",ft.IE&&(i="scrollTop",t=r.documentElement),u=t[i];break;case"scrollLeft":i="scrollX",ft.IE&&(i="scrollLeft",t=r.documentElement),u=t[i]}return u},e=function(n){return t[n]};return{CSS:new i,getAppropriateMetrixProperty:u,getEventTypeFromEventName:e,types:{"[object NodeList]":"array","[object HTMLCollection]":"array","[object]":"object"}}}(),vi=i.setAttr=function(i,r){var u=r;return this.each(function(){if(i==="style")this.style.cssText=r;else{if(i==="class"){var f=t(this).attr("class");i=n.addEventListener?i:i==="class"?"class":i,u=(f!==null?f+" ":"")+r}this.setAttribute(i,u)}})},yi=i.getAttr=function(t){var i=this.first();return t=n.addEventListener?t:t==="class"?"class":t,t==="style"?i.style.cssText:i.getAttribute(t)},pi=i.attr=function(n,t){var i=this;return n&&t?this.setAttr(n,t):g(n)?(f(n,function(n,t){i.setAttr(n,t)}),this):this.getAttr(n)},wi=i.addClass=function(n){return this.attr("class",n)},bi=i.each=function(n){for(var i=this.length,t=0;t<i;t+=1)if(n&&n.call(this[t],this[t],t)===!1)return!1;return this},ki=i.filter=function(n){for(var t=this,i=t.length;i--;)n.call(t[i],t[i],i)===!1&&t.splice(i,1);return t},di=i.withClass=function(n){return this.withAttr("class",n)},gi=i.withID=function(n){return this.withAttr("id",n)},nr=i.withAttr=function(n,t){return this.filter(v.attribute(n,t))},tr=i.css=function(n){var r,i;return this.each(function(u){u=t(u),r=s(l.CSS.parse(u.attr("style")),n),i=l.CSS.stringify(r),c(i)||u.attr("style",i)})},ir=i.append=function(n){return this.each(function(t,i){i>0&&(n=n.clone()),t.appendChild(n.first())})},rr=i.clone=function(){return this.first().cloneNode(!0)},ur=i.remove=function(){return this.each(function(n){n.parentNode.removeChild(n)})},fr=i.html=function(n){return this.each(function(){this.innerHTML=n})},er=i.bind=function(t,i){t=t.lastIndexOf(".")>-1?t:t+".defaultNamespace";var e=t.split("."),u=e[0],o=e[1],r=kt[u],s=r&&r.getHandler(i)||i,f=r&&r.name||u;return this.each(function(t){var r=function(n){if(s.call(this,n)===!1)return n.preventDefault?n.preventDefault():n.returnValue=!1,!1};h.push({cacheType:"event",proxyType:u,proxyHandler:r,actualHandler:i,actualType:f,node:t,namespace:o,unbind:function(){n.addEventListener?t.removeEventListener(this.actualType,this.proxyHandler):t.detachEvent("on"+this.actualType,this.proxyHandler),h.splice(rt(this,h),1)},trigger:function(n){this.proxyHandler.call(this.node,n)}}),n.addEventListener?t.addEventListener(f,r):t.attachEvent("on"+f,r)})},or=i.trigger=function(n){var r=d(n),u=!r&&n.split("."),t=!r&&u[0],i=!r&&u[1],e=!!(t&&i),s=t&&!i,h=i&&!t;return this.each(function(n){var u;r?u=o(function(i){return i.cacheType==="event"&&i.node===n&&i.actualHandler===t}):e?u=o(function(r){return r.cacheType==="event"&&r.node===n&&r.proxyType===t&&r.namespace===i}):s?u=o(function(i){return i.cacheType==="event"&&i.node===n&&i.proxyType===t}):h&&(u=o(function(t){return t.cacheType==="event"&&t.node===n&&t.namespace===i})),f(u,function(n,t){t.trigger({})})})},sr=i.unbind=function(n){var r=d(n),u=!r&&n.split("."),t=!r&&u[0],i=!r&&u[1],e=!!(t&&i),s=t&&!i,h=i&&!t;return this.each(function(n){var u;r?u=o(function(i){return i.cacheType==="event"&&i.node===n&&i.actualHandler===t}):e?u=o(function(r){return r.cacheType==="event"&&r.node===n&&r.proxyType===t&&r.namespace===i}):s?u=o(function(i){return i.cacheType==="event"&&i.node===n&&i.proxyType===t}):h&&(u=o(function(t){return t.cacheType==="event"&&t.node===n&&t.namespace===i})),f(u,function(n,t){t.unbind()})})},hr=i.once=function(n,i){return this.each(function(r){var f=ot("event"),u=n+"."+f;et("once:",n),r=t(r),r.bind(u,function(n){i.call(this,n),r.unbind(u)})})},cr=i.first=function(){var n;return this.each(function(t){return n=t,!1}),n},lr=i.hide=function(){return this.isVisible()?this.css({display:"none"}):this},ar=i.show=function(){return this.isVisible()?this:this.css({display:"block"})},vr=i.isVisible=function(){for(var t,i=!0,n=this.first();n&&n.style;){if(t=this.getStyle(n,"display"),t==="none"){i=!1;break}n=n.parentNode}return i},yr=i.getStyle=function(t,i){var u;return t.currentStyle?u=t.currentStyle[i]:n.getComputedStyle&&(u=r.defaultView.getComputedStyle(t,null).getPropertyValue(i)),u};f(["click","mousemove","mousedown","mouseup","resize","scroll","paste","keydown","keypress","keyup","focus","blur","change","contextmenu","load"],function(n,t){i[t]=function(n){return n?this.bind(t,n):this.trigger(t)}}),f(["width","height","innerWidth","innerHeight","outerWidth","outerHeight","scrollTop","scrollLeft"],function(n,t){i[t]=function(){return l.getAppropriateMetrixProperty(this.first(),t)}}),a=n.proxy(n),n.proxy.proto.extend({positionInCenter:function(){var n=a.width()||r.body.offsetWidth,t=a.height()||r.body.offsetHeight,i=(n/2|0)-(this.width()/2|0),u=(t/2|0)-(this.height()/2|0);return this.css({left:i+"px",top:u+"px"})}})}}(this),function(n){"use strict";function f(n,i,u,f,e){this.closeBtn=t("<a>").attr({href:"#",title:"Close window",id:"ModalClose"}).html("X").css({position:"absolute",top:"-11px",right:"-11px",display:e?"none":"block",height:"24px",width:"24px",background:"url("+i+"modal-close.png) 0 0 no-repeat","text-indent":"-99999px",outline:0,"z-index":99999}).bind("click.ModalWindow",function(){return n.destroy(),!1}),this.dimmer=t("<div>").css({height:"100%",width:"100%","background-color":"#000",opacity:.8,"z-index":99997}),this.header=t("<div>"),this.holder=t("<div>").css({position:"absolute",height:f?f+"px":"100%",width:u?u+"px":"100%",padding:"3px","border-radius":"5px","background-color":e?"#f4f6f8":"#FFF","z-index":99998}).attr("id","ModalHolder"),this.outerHolder=t("<div>").css({position:"relative",height:"100%",width:"100%"}),this.wholeWrap=t("<div>").css({position:"absolute",top:0,left:0,width:"100%",height:"100%",margin:0,padding:0,"z-index":99996}),this.$body=t(r.body)}function e(n,t,i,r,u){return this.height=+r|0,this.width=+i|0,this.DOM=new f(this,t,this.width,this.height,u),this.from=n,this.init(),this.render()}var r=n.document,t=n.proxy,u,i;u=f.prototype,u.$window=t(n),u.windowMetrics=function(t){var u=undefined!==n.pageXOffset,f,i;if(t=t.toLowerCase(),t==="left"||t==="top"){if(u||undefined!==n.scrollX)return i=(u?"page":"scroll")+(t==="left"?"X":"Y")+(u?"Offset":""),n[i];i="scroll"}else i="client";return i+=t.charAt(0).toUpperCase()+t.substr(1),f=r.documentElement[i],r.compatMode==="CSS1Compat"&&f||r.body&&r.body[i]||f},i=e.prototype,i.center=function(){var t=this.DOM,i=t.windowMetrics,n={height:i("height"),left:i("left"),top:i("top"),width:i("width")},r={x:Math.max(0,(n.width/2|0)-(this.width/2|0)),y:Math.max(0,(n.height/2|0)-(this.height/2|0))};return t.wholeWrap.css({height:n.height+"px",width:n.width+"px"}),t.dimmer.css({height:n.height+"px",width:n.width+"px"}),t.holder.css({left:r.x+"px",top:r.y+"px"}),this},i.close=function(){return this.DOM.wholeWrap.hide(),this},i.destroy=function(){var n=this.DOM;return n.wholeWrap.remove(),n.$window.unbind(".ModalWindow"),n.closeBtn.unbind(".ModalWindow"),!1},i.init=function(){var n=this.DOM;return n.header.append(n.closeBtn),n.holder.append(n.header).append(this.from),n.outerHolder.append(n.dimmer).append(n.holder),n.wholeWrap.append(n.outerHolder),this},i.open=function(){var n=this.DOM;return n.wholeWrap.show(),this.center(),this.from.focus(),this},i.render=function(){var r=this,n=this.DOM,t=n.windowMetrics,i=n.$window;return n.$body.append(n.wholeWrap),i.bind("resize.ModalWindow",function(){r.center(),n.wholeWrap.css({height:t("height")+"px",width:t("width")+"px"})}).bind("scroll.ModalWindow",function(){n.wholeWrap.css({top:t("top")+"px"})}),i.resize().scroll(),this},i.setURL=function(n){return this.from.attr({src:n}),this},undefined===n.LB&&(n.LB={}),n.LB.ModalWindow=e,n.proxy.windowMetrics=f.prototype.windowMetrics}(this),function(n){function ct(t){var r,u,f,e,o={},i;if(typeof t=="string")try{return n.JSON||(n.JSON=io.JSON),n.JSON.parse(t)}catch(s){if(/[^=]+=/.test(t)){for(f=t.split("&"),e=f.length,r=0;r<e;r+=1)u=f[r].split("="),i=decodeURIComponent(u[1]),isNaN(Number(i))?/^(false|true)$/.test(i)?i=Boolean(i):i==="null"&&(i=null):i=Number(i),o[decodeURIComponent(u[0])]=i;return o}}return t}function g(r){var u=ct(r.data),f;if(!t.browser.IE&&u.dataId){f=i.instances[u.dataId],f&&(u.hasOwnProperty("event")&&u.event=="analytics"?f.collectUniversalAnalytics(u,f.activeSettings.uaAccountNumber):f.receiveMessage(u));return}u.ModalClose&&n.document.getElementById("ModalClose").click(),u.ChangeModalBackgroundTransparent&&(n.document.getElementById("ModalHolder").style.backgroundColor=u.ChangeModalBackgroundTransparent)}if(!n.lbuiDirect){var t=n.proxy,v=t(n),lt=t(n.document),nt=n.location.protocol,o=/^([^:]+:\/\/[^\/\?]+)/,y=n.jQuery||{fn:{}},p,u,w=n.orientation,h=t.browser.DESKTOP?t.windowMetrics("height"):n.outerHeight,c=t.browser.DESKTOP?t.windowMetrics("width"):n.outerWidth,f,r,e=function(){for(var r,u=arguments.length,i=0;i<u;i+=1)r=arguments[i],t.log("GA track",r),n._gaq.push(r)},tt=function(n,i){ga&&n&&n.type&&n.payload&&(ga("bda.send",n.type,n.payload),i&&ga("partner.send",n.type,n.payload),t.log("UA track"+(i?", also sent to partner":""),n))},it=t.mapToMobileParams=function(n){var i=n.preselect,r=n.userDetails,u=n.style,e={lang:n.language,uid:n.userid,refid:n.referrerid,tsid:n.trackingSessionId,baseColour:u&&u.baseColor,useFlatDesign:u&&u.useFlatDesign,highlightColour:u&&u.highlightColor,emailAddress:r&&r.email,title:r&&r.title,firstName:r&&r.firstName,lastName:r&&r.lastName,telephonePrefix:r&&r.telephonePrefix,telephoneNumber:r&&r.telephoneNumber,mapProvider:n.mapProvider,hideBar:n.hideBar,appConversion:n.appConversion,hideCloseButton:n.hideCloseButton,inIframe:t.browser.nested,bookingConfirmationCode:n.bookingid,suppressLangOption:t.castToBoolean(n.hideLanguageOptions),gaNameSpace:n.gaNameSpace,conversionPageView:n.conversionPageView||"Modal/BookingConfirmed",refererHostName:location.hostname||undefined,refererProtocol:location.protocol||undefined,rid:n.restaurantid,cid:n.connectionid,pid:n.promotionid,lid:i&&i.areaid,dfrid:i&&i.restaurantid,dfpid:i&&i.promotionid,dfdate:i&&i.date,dfsid:i&&i.sessionid,dfcovs:i&&i.covers,dftime:i&&i.time,pgid:r&&r.promocode,conversionJs:n.conversionjs,supressTermsCheckBox:n.supressTermsCheckBox,hideMembership:n.hideMembership,lockIntoPromotion:n.lockIntoPromotion,gaid:n.gaAccountNumber,uaid:n.uaAccountNumber,sampleRate:n.sampleRate,debug:n.debug,specialRequest:i&&i.specialRequest},f;if(n.analyticsLinker){for(f in n.analyticsLinker)n.analyticsLinker.hasOwnProperty(f)&&(f.indexOf("_ga")===0&&n.uaAccountNumber&&!e.uaid&&(e.uaid=n.uaAccountNumber),e[f]=n.analyticsLinker[f]);t.log("Linker parameters passed ",n.analyticsLinker)}return e},b=t.parseStringArguments=function(){var i=Array.prototype.slice.call(arguments),n,r,u;return i.length===0?null:t.is(i[0])==="object"?i[0]:(n=i[1]?i[1].split(","):[],r=i[4]?i[4].split(","):[],u=n[0],{connectionid:i[0],restaurantid:i[2],promotionid:i[3],userid:i[5],referrerid:i[6],language:u||"en-GB",hideLanguageOptions:t.castToBoolean(n[1]),startUpScreen:n[9],hideNewBookingOption:n[10],logoTypeURL:n[7],showSaveDetails:n[12],style:{baseColor:n[2],highlightColor:n[3],borderStyle:n[4],borderColor:n[5],dropShadow:n[6],pageColor:n[8],backgroundColor:n[11],useFlatDesign:n[12]},preselect:{promotionid:r[0],restaurantid:r[1],areaid:r[2],sessionid:r[3],covers:r[4],date:r[5],time:r[6]}})},k=function(){var i=t.guid("lbuiDirect"),u=b.apply(n,arguments)||r;return this.document.write('<div id="'+i+'" style="margin:0 auto;"><\/div>'),{args:u,id:i}},s={lbconnectionid:function(n){return{connectionid:n}},lbpromotionid:function(n){return{promotionid:n}},lbrestaurantid:function(n){return{restaurantid:n}},lbsessionid:function(n){return{preselect:{sessionid:n}}},lbareaid:function(n){return{preselect:{areaid:n}}},lbcovers:function(n){return{preselect:{covers:n}}},lbreferrerid:function(n){return{referrerid:n}},lblanguage:function(n){return{language:n}},lblanguagecode:function(n){return{language:n}},lbbookingid:function(n){return{bookingid:n}},bookingid:function(n){return{bookingid:n}},lbfirstname:function(n){return{userDetails:{firstname:n}}},lblastname:function(n){return{userDetails:{lastname:n}}},lbemail:function(n){return{userDetails:{email:n}}},lbpromocode:function(n){return{userDetails:{promocode:n}}}},rt=t.getApplicableURLParams=function(n){var i=!1,r=t.getURLParams(n),u=function(){var n={};return t.iterate(r,function(r,u){r=r.toLowerCase(),s[r]&&(t.extend(n,s[r](u)),i=!0)}),n},f=u();return i?f:null},ut=t.getPage=function(n){t("body").append(t("<iframe>").attr({src:n,frameBorder:"0",width:"0",height:"0",style:"display:none"}))},ft=t.getFileType=function(n){var t=n.substring(n.lastIndexOf(".")+1,n.length).toUpperCase();return{JS:"JS",HTML:"HTML"}[t]||"HTML"},l=t.getMobileURL=function(i){i=i||{};var e=it(i),u=r.url,o=i.mode==="cancel"||i.bookingid,f=t.constructURL(o?u.mobileAppCancel:u.mobileApp,e);return i.linkerCallback&&ga(function(t){var r=t?t.get("linkerParam"):"";_gaq.push(function(){var t=n._gat._getTrackerByName(activeSettings.gaNameSpace),u=t._getLinkerUrl(f),e=u+"&"+r;i.linkerCallback(e)})}),f},et=t.getImage=function(n){return r.url.imagePath+n},at=t.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=Math.random()*16|0,i=n=="x"?t:t&3|8;return i.toString(16)})},d=function(u,a){t.log("bookingWidget",arguments);var b=this,k=b.instanceID=t.guid("lbuiDirect"),d=b.parent=u||t(),li=t.extend({},r),y=b.activeSettings=t.extend({},li),g=b.reservationData={},vt,yt,lt,ht,oi,ai,ti,ii,kt,dt,st,si,ri,ui,pt,wt,bt,vi=function(){if(y.sampleRate===undefined&&(y.sampleRate=10),e([y.gaNameSpace+"_setAccount",y.gaAccountNumber],[y.gaInternalNameSpace+"_setSampleRate",y.sampleRate]),n.ga)t.log("ga object already defined"),fi();else if(n.__gaTracker)n.ga=n.__gaTracker,t.log("__gatracker copied to ga"),fi();else{n.GoogleAnalyticsObject="ga";try{(function(n,t,i,r,u,f,e){n.GoogleAnalyticsObject=u,n[u]=n[u]||function(){(n[u].q=n[u].q||[]).push(arguments)},n[u].l=1*new Date,f=t.createElement(i),e=t.getElementsByTagName(i)[0],f.async=1,f.src=r,e.parentNode.insertBefore(f,e)})(n,document,"script","//www.google-analytics.com/analytics.js","ga"),t.log("analytics.js loaded with name "+n.GoogleAnalyticsObject),fi()}catch(i){n.ga=!1,t.log("Fail to load analytics:",i)}}var r=y.gaInternalNameSpace;y.gaClientEnabled&&e([y.gaNameSpace+"_setAllowLinker",!0])},fi=function(){ga("create",f.analyticsAccountNumber,f.analyticsDomain,{name:"bda",sampleRate:y.sampleRate}),y.uaAccountNumber&&ga("create",y.uaAccountNumber,f.analyticsDomain,{name:"partner",allowLinker:!0})},gt=function(n){var i=y.callbacks;return i&&i[n]||t.noop()},di=b.collectUniversalAnalytics=function(n,t){tt(n.data.settings,t)},ei=b.track=function(n){var r=y.gaClientEnabled,u=r?y.gaNameSpace:"",i=y.gaInternalNameSpace,f=n.event;t.log(k+".track()",n),y.gaInternalEnabled&&(n.mode&&n.mode==="Mobile"?e([i+"_setCustomVar",3,"Mode",n.mode,3],[i+"_setCustomVar",4,"Deployment Type","MOBILE",2],[i+"_trackEvent","Application","AppInitialised"],[i+"_trackPageview","/Mobile/AppInitialised"]):n.event&&n.event.ref||e([i+"_setAccount",y.widgetGaInternalAccountNumber],n))},gi=b.loadFailure=function(){t.log(k+".loadFailure()",arguments);var i=gt("onLoadFailure");g=t.extend(g,{url:document.location.href}),i.call(n,g),ei({event:"/LoadFailure"})},nr=b.availability=function(i){t.log(k+".availability()",arguments);var r=gt("onAvailabilityResult");g=t.extend(g,i),r.call(n,g)},tr=b.convert=function(i){t.log(k+".convert()",arguments);var r=y.conversionjs,u=ft(r),f=gt("onConversion");g=t.extend(g,i),g.bookingId&&(r&&(r+=r.indexOf("?")==-1?"?"+hi(g):"&"+hi(g),u==="JS"?t.getScript(r):ut(r)),f.call(n,g),ei({event:g})),p=g.covers},hi=t.getQueryString=function(n){result="";for(param in n)result+=encodeURIComponent(param)+"="+encodeURIComponent(n[param])+"&";return result&&(result=result.substr(0,result.length-1)),result},ir=b.receiveMessage=function(n){if(n.dataId===this.instanceID){if(n.hasOwnProperty("tracking")&&n.tracking.length!==0){var t=n.tracking.slice();t[0]=y.gaInternalNameSpace+t[0],e(t),n.partnerGoogleAnalyticsId&&n.tracking[0]!=="_trackEvent"&&(/bookingconfirmation/i.test(n.tracking[1])&&y.conversionPageView&&(n.tracking[1]=y.conversionPageView),t=n.tracking.slice(),t[0]=y.gaNameSpace+t[0],e(t))}n.hasOwnProperty("ref")&&n.ref.length!==0&&this.convert(n,k)}},yi=function(){if(d&&d.length!==0){d.html(si);var n;st==="Fallback"&&y.preselect&&y.preselect.areaid&&(n=d.find("a").attr("href"),d.find("a").attr("href",n+"&lid="+y.preselect.areaid)),st==="Fallback"&&s.lbpromocode().userDetails.promocode&&(n=d.find("a").attr("href"),d.find("a").attr("href",n+"&pgid="+s.lbpromocode().userDetails.promocode)),st==="Fallback"&&y.userDetails&&y.userDetails.promocode&&(n=d.find("a").attr("href"),d.find("a").attr("href",n+"&pgid="+y.userDetails.promocode))}},rr=b.exit=function(){t.log(k+".exit()",arguments);var i=gt("onExit");i.call(n,g)},pi=function(i){var f=y.style,r=y.preselect,e=y.url,u=y.userDetails,o={ConnectionId:y.connectionid,cid:y.connectionid,sessionGuid:y.sessionGuid,RestaurantId:y.restaurantid,DevicePixelRatio:n.devicePixelRatio||1,ForceWidget:y.forceWidget,InIframe:t.browser.nested,Orientation:w,StartUpScreen:y.startUpScreen,WindowWidth:c,WindowHeight:h,BackgroundColour:f&&f.backgroundColor,BaseColour:f&&f.baseColor,BorderColour:f&&f.borderColor,BorderStyle:f&&f.borderStyle,DisplayMode:y.mode,HighlightColour:f&&f.highlightColor,UseFlatDesign:f&&f.useFlatDesign,ByPassCache:y.byPassCache,BookingConfirmationCode:y.bookingid,DataId:y.instanceID,ContentVersion:y.contentVersion,LanguageCode:y.language,lang:y.language,LocationIds:y.areaid,LockIntoPromotion:y.lockIntoPromotion,PromotionIds:y.promotionid,PreSelectedAreaId:r&&r.areaid,PreSelectedDate:r&&r.date,PreSelectedCovers:r&&r.covers,PreSelectedPromotionId:r&&r.promotionid,PreSelectedRestaurantId:r&&r.restaurantid,PreSelectedSessionName:r&&r.sessionid,PreSelectedTime:r&&r.time,CardPolicyUrl:e&&e.cardPolicy,DisclaimerUrl:e&&e.disclaimer,ExitLogoUrl:y.exit&&y.exit.image,GoogleCalendarUrl:y.googleCalendar,InstancePath:y.instancePath,LogoUrl:e&&e.logo,OutlookCalendarUrl:y.outlookCalendar,ReferrerId:y.referrerid,TermsUrl:e&&e.terms,WebServer:y.server,WebService:y.service,Wsdl:y.WSDL,GaEnabled:y.gaInternalEnabled,HideCardScreen:y.hideCardScreen,HideLanguageFlag:y.hideLanguageOptions,HideMembership:y.hideMembership,HideNewBookingOption:y.hideNewBookingOption,OrderToShowPromotionsIn:y.promoCategories,ShareOptions:y.shareOptions,ShowSoldOutOffers:y.showSoldOutOffers,SuppressTermsCheckBox:y.supressTermsCheckBox,ConfirmEmail:y.emailReconfirm,EmailAddress:u&&u.email,FirstName:u&&u.firstName,LastName:u&&u.lastName,Title:u&&u.title,TelephoneNumber:u&&u.telephoneNumber,TelephonePrefix:u&&u.telephonePrefix,OptInSuppress:y.optInSupress,PartnerGuestIdentifier:u&&u.promocode,ShowSaveDetails:y.showSaveDetails,UserId:y.userid,MapProvider:y.mapProvider,HideBar:y.hideBar,AppConversion:y.appConversion,HideCloseButton:y.hideCloseButton,InIframe:t.browser.nested,conversionJs:y.conversionjs,GoogleAnalyticsId:y.gaAccountNumber,UniversalAnalyticsId:y.uaAccountNumber},s;if(y.analyticsLinker){for(s in y.analyticsLinker)y.analyticsLinker.hasOwnProperty(s)&&(s.indexOf("_ga")===0&&y.uaAccountNumber&&!o.UniversalAnalyticsId&&(o.UniversalAnalyticsId=y.uaAccountNumber),o[s]=y.analyticsLinker[s]);t.log("Linker parameters passed ",y.analyticsLinker)}t.getJSON({data:o,instanceID:k,url:y.url.detection,success:function(n){i(n)}}),t.log("getWidget::$.getJSON",y.url.detection,o)},at=b.setSettings=function(i,r,u){t.log(k+".setSettings()",r?"configuration":"service call",i),u=u||function(){yi()};var f,e=!1;for(f in i)f=="debug"&&i[f]===!0&&(n.lbuiDebug=!0),i.hasOwnProperty(f)&&y.hasOwnProperty(f)&&i[f]===y[f]&&(delete i[f],e=!0);if(e){f=undefined;for(f in i)i.hasOwnProperty(f)&&(f+="");if(f===undefined&&r)return y}else if(f===undefined&&r)return y;return t.extend(y,i),y.bookingid&&(y.mode="cancel"),r||(d.html(""),pi(function(n){st=n.InstanceType,si=n.InstanceHtml,ri=n.LoaderSpinnerUrl,ui=n.LoaderDataMessage,n.FooterModel&&(pt=n.FooterModel.ImageUrl,wt=n.FooterModel.ImageTitle,bt=n.FooterModel.Title),kt=st==="Widget",dt=st==="Fallback",st==="Fallback"&&ei({mode:"Mobile"}),ht||(lt=n.OpenMode==="Modal",ht=n.OpenMode==="Window"),u()})),y},ni=b.mobileURL=function(){return l(y)},wi=b.openWindow=function(i,u){var p,nt,e,f;t.log(k+".openWindow()",y),t.log("initModalWindow",oi),typeof y.modalCallback=="function"&&y.modalCallback();var s,w,h,c,tt=n.screen,b=tt.availWidth/2,d=tt.availHeight/2,l,a,it,g=y.style,rt,v;kt=st==="Widget",dt=st==="Fallback",p=g&&g.useFlatDesign?g.useFlatDesign:!1,t.log("modalWindow",lt),t.log("popupWindow",ht),t.log("autoOpen",ti),t.log("isWidget",kt),t.log("isFallback",dt),t.log("instanceType",st),u||kt?lt?(s=t.constructURL(ni(),t.extend(i,{c:0,dataId:k,displayMode:"modal"})),t.log("isMobileWindow && modalWindow",s),h=940,c=560,it=t("<iframe>").attr({frameBorder:"0",id:"loadingScreen"}).css({position:"relative",display:"block",width:h+"px",height:c+"px"}),rt=new n.LB.ModalWindow(it,r.url.imagePath,h,c,p),nt=document.getElementById("loadingScreen").contentDocument||document.getElementById("loadingScreen").contentWindow.document,e="<style>html{height:100%}body{background-repeat:no-repeat;background-attachment:fixed;overflow:hidden;border:1px solid #DDD;border-radius:3px;left:0;margin:0;overflow:hidden;position:absolute;right:0;top:0;bottom:0;background:-webkit-gradient(radial,center center,0px,center center,100%,color-stop(0%,#fff),color-stop(100%,#ddd));background:-webkit-radial-gradient(center center,circle cover,white,#ddd);background:-moz-radial-gradient(center,circle cover,#fff 0,#ddd 100%);background:-o-radial-gradient(center,circle cover,#fff 0,#f1f1f1 100%);background:-ms-radial-gradient(center,circle cover,#fff 0,#f1f1f1 100%);background:radial-gradient(circle at center,#fff 0,#ddd 100%)}#spinner{-webkit-animation:rota 2s linear infinite;-moz-animation:rota 2s linear infinite;-o-animation:rota 2s linear infinite;-ms-animation:rota 2s linear infinite;animation:rota 2s linear infinite;}@-webkit-keyframes rota{to{-webkit-transform:rotate(360deg)}}@-moz-keyframes rota{to{-moz-transform:rotate(360deg)}}@-o-keyframes rota{to{-o-transform:rotate(360deg)}}@-ms-keyframes rota{to{-ms-transform:rotate(360deg)}}@keyframes rota{to{transform:rotate(360deg)}}<\/style>",i.widgetType=="modal"&&(i.loaderdataspinner=ri,i.loaderdatamessage=ui),i.loaderdatalogo?e+='<div id="logo" style="height: 40%; background: url('+i.loaderdatalogo+') center bottom no-repeat;background-size: 300px auto;"><\/div>':nt.write('<div id="nologo" style="height: 38%;"><\/div>'),i.loaderdataspinner&&(e+='<div id="spinner" style="height: 20%; background: url('+i.loaderdataspinner+') center center no-repeat;"><\/div>'),i.loaderdatamessage&&(e+='<div id="message" style="font-size:2em;text-align:center;font-family:arial;font-weight:bold;">'+i.loaderdatamessage+"<\/div>"),p&&(bt&&pt&&wt&&(e+='<div id="poweredBy" class="poweredBy"><h2>'+bt+'<\/h2><img alt="branding" src="'+pt+'" title="'+wt+'"><\/div>'),e+='<a href="#" id="CloseButtonInsideModal" data-role="none" class="closeCross"><\/a>',e+='<script>document.getElementById("CloseButtonInsideModal").addEventListener("click", triggerModalClose); function triggerModalClose() {window.parent.postMessage({ \'ModalClose\': true }, "*");}<\/script>',f=r.url.mobileApp,e+="<style>body{background: white; border: transparent; }#nologo{background: #f4f6f8 !important;height: 60px !important;margin-bottom: 150px !important;}@font-face {font-family:'Graphik Bold';src:url(\""+f+'/Content/fonts/Graphik/Graphik-Bold-Web.eot");src:url("'+f+'/Content/fonts/Graphik/Graphik-Bold-Web.eot?#iefix") format("embedded-opentype"),url("'+f+'/Content/fonts/Graphik/Graphik-Bold-Web.woff2") format("woff2"),url("'+f+'/Content/fonts/Graphik/Graphik-Bold-Web.woff") format("woff");font-weight:700;font-style:normal;font-stretch:normal}@font-face {font-family:\'Graphik Regular\';src:url("'+f+'/Content/fonts/Graphik/Graphik-Regular-Web.eot");src:url("'+f+'/Content/fonts/Graphik/Graphik-Regular-Web.eot?#iefix") format("embedded-opentype"),url("'+f+'/Content/fonts/Graphik/Graphik-Regular-Web.woff2") format("woff2"),url("'+f+"/Content/fonts/Graphik/Graphik-Regular-Web.woff\") format(\"woff\");font-weight:400;font-style:normal;font-stretch:normal}#message{font-family:'Graphik Bold' !important;font-weight:normal !important;font-size: 20px !important;}#poweredBy h2{font-family:'Graphik Regular' !important;text-align: right;display: inline-block;line-height: 5em;padding-right: 13px;font-size: 10px;color: #506770;font-weight: normal;}#poweredBy{float: right;bottom: -5px;position: absolute;right: 6px;}#poweredBy img{    line-height: 1em;margin-bottom: -16px;;margin-top: -1px;padding-right: 13px;width: 135px;}#CloseButtonInsideModal.closeCross {height: 24px;width: 24px;background: url("+f+"/Content/images/cross.png) 0px 0px no-repeat;position: absolute !important;right: 5px;left: auto !important;top: 20px !important;border-radius: 0;}<\/style>"),nt.write(e),w=s.match(o)[1],setTimeout(function(){rt.setURL(s)},100)):ht&&(s=t.constructURL(ni(),t.extend(i,{c:0,dataId:k,displayMode:"window"})),t.log("isMobileWindow && popupWindow",s),w=s.match(o)[1],h=940,c=t.browser.safari?501:560,l=h/2,a=c/2,t.log("scrollbars=1,status=0,width="+h+",height="+c+",left="+t.round(b-l)+",top="+t.round(d-a)),v=navigator.userAgent.match("CriOS")?n.open(s,"lbuiMobileWidgetPopup","scrollbars=1,status=0,width="+h+",height="+c+",left="+t.round(b-l)+",top="+t.round(d-a)):n.open("","lbuiMobileWidgetPopup","scrollbars=1,status=0,width="+h+",height="+c+",left="+t.round(b-l)+",top="+t.round(d-a)),e="<style>html{height: 100%; }body{background-repeat:no-repeat;background-attachment:fixed;overflow:hidden;border:1px solid #DDD;border-radius:3px;left:0;margin:0;overflow:hidden;position:absolute;right:0;top:0;bottom:0;background:-webkit-gradient(radial,center center,0px,center center,100%,color-stop(0%,#fff),color-stop(100%,#ddd));background:-webkit-radial-gradient(center center,circle cover,white,#ddd);background:-moz-radial-gradient(center,circle cover,#fff 0,#ddd 100%);background:-o-radial-gradient(center,circle cover,#fff 0,#ddd 100%);background:-ms-radial-gradient(center,circle cover,#fff 0,#ddd 100%);background:radial-gradient(circle at center,#fff 0,#ddd 100%)}#spinner{-webkit-animation:rota 2s linear infinite;-moz-animation:rota 2s linear infinite;-o-animation:rota 2s linear infinite;-ms-animation:rota 2s linear infinite;animation:rota 2s linear infinite;}@-webkit-keyframes rota{to{-webkit-transform:rotate(360deg)}}@-moz-keyframes rota{to{-moz-transform:rotate(360deg)}}@-o-keyframes rota{to{-o-transform:rotate(360deg)}}@-ms-keyframes rota{to{-ms-transform:rotate(360deg)}}@keyframes rota{to{transform:rotate(360deg)}}<\/style>",i.widgetType=="modal"&&(i.loaderdataspinner=ri,i.loaderdatamessage=ui),e+=i.loaderdatalogo?'<div id="logo" style="height: 40%; background: url('+i.loaderdatalogo+') center bottom no-repeat;background-size: 300px auto;"><\/div>':'<div id="nologo" style="height: 38%;"><\/div>',i.loaderdataspinner&&(e+='<div id="spinner" style="height: 20%; background: url('+i.loaderdataspinner+') center center no-repeat;"><\/div>'),i.loaderdatamessage&&(e+='<div id="message" style="height: 40%; font-size:2em;text-align:center;font-family:arial;font-weight:bold;">'+i.loaderdatamessage+"<\/div>"),p&&(bt&&pt&&wt&&(e+='<div id="poweredBy" class="poweredBy"><h2>'+bt+'<\/h2><img alt="branding" src="'+pt+'" title="'+wt+'"><\/div>'),f=r.url.mobileApp,e+="<style>body{background: white; border: transparent; }#nologo{background: #f4f6f8 !important;height: 60px !important;margin-bottom: 150px !important;}@font-face {font-family:'Graphik Bold';src:url(\""+f+'/Content/fonts/Graphik/Graphik-Bold-Web.eot");src:url("'+f+'/Content/fonts/Graphik/Graphik-Bold-Web.eot?#iefix") format("embedded-opentype"),url("'+f+'/Content/fonts/Graphik/Graphik-Bold-Web.woff2") format("woff2"),url("'+f+'/Content/fonts/Graphik/Graphik-Bold-Web.woff") format("woff");font-weight:700;font-style:normal;font-stretch:normal}@font-face {font-family:\'Graphik Regular\';src:url("'+f+'/Content/fonts/Graphik/Graphik-Regular-Web.eot");src:url("'+f+'/Content/fonts/Graphik/Graphik-Regular-Web.eot?#iefix") format("embedded-opentype"),url("'+f+'/Content/fonts/Graphik/Graphik-Regular-Web.woff2") format("woff2"),url("'+f+"/Content/fonts/Graphik/Graphik-Regular-Web.woff\") format(\"woff\");font-weight:400;font-style:normal;font-stretch:normal}#message{font-family:'Graphik Bold' !important;font-weight:normal !important;font-size: 20px !important;}#poweredBy h2{font-family:'Graphik Regular' !important;text-align: right;display: inline-block;line-height: 5em;padding-right: 13px;font-size: 10px;color: #506770;font-weight: normal;}#poweredBy{float: right;bottom: -5px;position: absolute;right: 6px;}#poweredBy img{    line-height: 1em;margin-bottom: -16px;;margin-top: -1px;padding-right: 13px;width: 135px;}#CloseButtonInsideModal.closeCross {height: 24px;width: 24px;background: url("+f+"/Content/images/cross.png) 0px 0px no-repeat;position: absolute !important;right: 5px;left: auto !important;top: 20px !important;border-radius: 0;}<\/style>"),t(v.document.body).html(e),t.browser.iOS&&(v.document.location=s),setTimeout(function(){v.document.location=s},100)):dt&&ht&&(s=t.constructURL(ni(),{c:0,dataId:k}),t.log("isFallback && popupWindow",s),h=940,c=t.browser.safari?501:560,l=h/2,a=c/2,w=s.match(o)[1],v=n.open(s,"lbuiFallbackPopup",""))},bi=b.openWindowCentered=function(i,r,u){var f=0,e=0,s="",c=i.match(o)[1],h;return t.log(k+".openWindowCentered()",i,r,u),u=isNaN(+u)?600:parseInt(u,10),r=isNaN(+r)?600:parseInt(r,10),typeof n.screenLeft!="undefined"?(f=n.screenLeft,e=n.screenTop):typeof n.screenX!="undefined"&&(f=n.screenX,e=n.screenY),i.indexOf("displayMode=modal")!==-1?(s="left="+(f+(v.width()-r)/2)+",top="+(e+(v.height()-u)/2)+",status=0,scrollbars=1,width="+r+",height="+u,h=n.open(i,"lbuiPopup",s)):document.location=i,!1},ci=rt();if(d.attr("data-lbid",k),i.instances[k]=b,at(a,!0),at({instancePath:"lbuiDirect.instances."+k,instanceID:k,gaClientEnabled:!!y.gaAccountNumber&&y.gaMode!=="none",gaNameSpace:(y.gaNameSpace||"client").replace(/\.$/,"")+".",gaInternalNameSpace:(y.gaInternalNameSpace||"lbuiTracker").replace(/\.$/,"")+"."},!0),ci!==null&&at(ci,!0),vt=y.modalWindow,yt=y.popupWindow,lt=!!vt&&vt.enabled,ht=!!yt&&yt.enabled,ti=!!(vt&&vt.autoOpen||yt&&yt.autoOpen),ii=lt||ht,oi=!!lt,ai=!!ht,ti&&ii){d=b.parent=t(),at({},!0);var it=y.style,nt=y.preselect,ot=y.url,ct=y.userDetails,ki={ConnectionId:y.connectionid,RestaurantId:y.restaurantid,LocationIds:y.areaid,LanguageCode:y.language,WindowWidth:c,WindowHeight:h,Orientation:w,DevicePixelRatio:n.devicePixelRatio||1,PromotionIds:y.promotionid,BookingConfirmationCode:y.bookingid,HideLanguageFlag:y.hideLanguageOptions,BaseColour:it&&it.baseColor,HighlightColour:it&&it.highlightColor,BorderStyle:it&&it.borderStyle,BorderColour:it&&it.borderColor,BackgroundColour:it&&it.backgroundColor,UseFlatDesign:it&&it.useFlatDesign,ExitLogoUrl:y.exit&&y.exit.image,PreSelectedPromotionId:nt&&nt.promotionid,PreSelectedRestaurantId:nt&&nt.restaurantid,PreSelectedAreaId:nt&&nt.areaid,PreSelectedSessionName:nt&&nt.sessionid,PreSelectedCovers:nt&&nt.covers,PreSelectedDate:nt&&nt.date,PreSelectedTime:nt&&nt.time,GoogleCalendarUrl:y.googleCalendar,OutlookCalendarUrl:y.outlookCalendar,ReferrerId:y.referrerid,WebService:y.service,Wsdl:y.WSDL,WebServer:y.server,TermsUrl:ot&&ot.terms,DisclaimerUrl:ot&&ot.disclaimer,CardPolicyUrl:ot&&ot.cardPolicy,LogoUrl:ot&&ot.logo,StartUpScreen:y.startUpScreen,HideNewBookingOption:y.hideNewBookingOption,ByPassCache:y.byPassCache,DisplayMode:y.mode,ShareOptions:y.shareOptions,GaEnabled:y.gaInternalEnabled,ContentVersion:y.contentVersion,UserId:y.userid,LockIntoPromotion:y.lockIntoPromotion,HideMembership:y.hideMembership,ShowSaveDetails:y.showSaveDetails,FirstName:ct&&ct.firstname,LastName:ct&&ct.lastname,EmailAddress:ct&&ct.email,PartnerGuestIdentifier:ct&&ct.promocode,ConfirmEmail:y.emailReconfirm,OrderToShowPromotionsIn:y.promoCategories,ShowSoldOutOffers:y.showSoldOutOffers,HideCardScreen:y.hideCardScreen,SuppressTermsCheckBox:y.supressTermsCheckBox,OptInSuppress:y.optInSupress,ForceWidget:y.forceWidget,inIframe:t.browser.nested,instancePath:y.instancePath,DataId:y.instanceID};ot=t.constructURL(ni(),{c:0,dataId:k}),(n.orientation===undefined||Math.min(c,h)/ki.DevicePixelRatio>320)&&(t.browser.IEMobile||t.browser.SamsungGalaxyS3||t.browser.BlackBerry||(ot+="&displayMode=modal")),bi(ot,940,560)}else ii?(d.bind("click",function(){return wi({widgetType:"modal"}),!1}),d=b.parent=t(),at({},!1)):(d.css({width:"300px !important",height:y.style&&y.style.useFlatDesign?"410px !important":"350px !important",background:"url("+et("beast-loader.gif")+") no-repeat 50% 50%"}),at());t.log("ActiveSettings ",y),vi()},a,i=n.lbuiDirect=n.lbDirect=n.Ingrid=t.lbuiDirect=t.proto.lbuiDirect=y.lbuiDirect=y.fn.lbuiDirect=function(){function f(n){return n.sessionGuid||(n.sessionGuid=t.newGuid()),n}var r=arguments,s,e,u=this,h=!!(this.jquery||this._proxy),o,i;if(t.log("lbuiDirect.arguments",r),h||(u=r[0]?t(this.document.getElementById(r[0])):undefined),o=u&&u.attr("data-lbid"),r.length===3)return t.log("lbuiDirect: native method caller (3 arguments; placeholder, method, settings)"),i=r[2],f(i),a[r[1]](o,i);if(r.length===2){if(h)return t.log("lbuiDirect: jQuery method caller (2 arguments; method, settings, has context)"),i=r[1],f(i),a[r[0]](o,i);t.log("lbuiDirect: native implementer (2 arguments; unknown, settings)"),i=r[1]}else t.is(r[0])==="string"?(t.log("lbuiDirect: jQuery method caller (1 argument; string argument)"),i={mode:"cancel"}):(t.log("lbuiDirect: standard jQuery implementer (1 argument; settings)"),i=r[0]||{},u=t(this));return t.browser.firefox&&u&&!u.isVisible()?e=n.setInterval(function(){u.isVisible()&&(n.clearInterval(e),e=null,f(i),s=new d(u,i))},500):(f(i),s=new d(u,i)),this},vt=i.as={},yt=i.instances={},ot=function(){var n=this,r=document.location.protocol.indexOf("http")==-1&&t.browser.iOS,u=("https:"===document.location.protocol?"https://":"http://")+"secure.livebookings.com",i=r?"http://bda.bookatable.com":"https://bda.bookatable.com",e=t.noop(),f="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=Math.random()*16|0,i=n=="x"?t:t&3|8;return i.toString(16)});n.version="2.9.16",n.contentVersion="1.12",n.gaInternalNameSpace="lbuiTracker",n.widgetGaInternalAccountNumber="UA-4764648-18",n.analyticsAccountNumber="UA-4764648-21",n.analyticsDomain="auto",n.gaInternalEnabled=!0,n.gaMode="conversions",n.connectionid="UK-RES-EATFOODUKDEMO_108239:15004",n.url=function(){return{mobileApp:i,mobileAppCancel:i+"/mobile/CancelBooking",popupURL:u+"/LBDirect/index.cfm",imagePath:i+"/content/images/",detection:i+"/Detection"}}(),n.conversionjs="",n.trackingSessionId=f},st=i.setDefaults=i.setApplication=function(n){return t.extend(r,n)},pt=i.resetApplication=i.resetDefaults=function(){return r={},st(f)},wt=i.getData=function(){t.log("getData()")},bt=i.each=function(n){return t.iterate(this.instances,n),this},ht=i.getInstance=function(n){return i.instances[n]},kt=n.LBDirect_Embed=function(){var r=k.apply(n,arguments),f;if(r.args.sessionGuid=t.newGuid(),navigator.appName.indexOf("Internet Explorer")>-1){function e(t){var i=n.onload;n.onload=typeof n.onload!="function"?t:function(){i&&i(),t()}}document.readyState==="complete"?u():e(function(){u()});function u(){var u=document.createElement("a"),t,n,f,i;return u.href=location.href,u.hostname!=document.domain?(t="Book Online",r.args.language=="de-DE"&&(t="Reservieren"),r.args.language=="sv-SE"&&(t="Boka online"),n=document.createElement("a"),n.setAttribute("href","https://secure.livebookings.com/LBDirect/"),n.setAttribute("target","top"),n.setAttribute("onclick","LBDirect_Popup("+JSON.stringify(r.args)+"); return false;"),n.setAttribute("style","font-size: 2em; display: block; text-align: center; font-weight: bold; margin: 2em 0;"),f=document.createTextNode(t),n.appendChild(f),i=document.getElementById(r.id),i.parentNode.appendChild(n),i.parentNode.removeChild(i),!1):void 0}}return(r.args.language==="en-GB"||r.args.language===undefined)&&t.browser.firefox&&(f=new Image,f.src="//googleads.g.doubleclick.net/pagead/viewthroughconversion/991175586/?value=0&label=QIXdCM6KjAQQosfQ2AM&guid=ON&script=0"),i(r.id,t.extend(r.args,{method:"LBDirect_Embed"}))},dt=n.LBDirect_Cancel=function(){var r=k.apply(n,arguments);return i(r.id,t.extend(r.args,{method:"LBDirect_Cancel",mode:"cancel"}))},gt=n.LBDirect_Popup=function(){var r=b.apply(n,arguments),u;(r.language==="en-GB"||r.language===undefined)&&(u=new Image,u.src="//googleads.g.doubleclick.net/pagead/viewthroughconversion/991175586/?value=0&label=QIXdCM6KjAQQosfQ2AM&guid=ON&script=0"),i(undefined,t.extend(r,{method:"LBDirect_Popup",popupWindow:{enabled:!0,autoOpen:!0}}))},ni=n.LBDirect_addConversionCode=function(n){i.each(function(){this.setSettings({conversionjs:n,method:"LBDirect_addConversionCode"},!0)})},ti=n.LBDirect_getConversionValue=function(){return p},ii=n.LBDirect_mobileURL=function(n){return l(n)},ri=n._postMessage=function(n){var r=n.data,i=r.settings,t=ht(r.lbid);switch(n.event){case"changeSettings":setTimeout(function(){t.setSettings(i)},100);break;case"analytics":t.collectUniversalAnalytics(n,t.activeSettings.uaAccountNumber);break;case"trackEvent":t.track(i);break;case"openModal":t.openWindow(i,!0)}};a=function(){return this.setSettings=function(n,t){return i.getInstance(n).setSettings(t)},this.setOptions=this.setSettings,this.setMode=function(n,t){return this.setSettings(n,{mode:t})},this.setRestaurant=function(n,t){return this.setSettings(n,{restaurantid:t})},this.setPromotion=function(n,t){return this.setSettings(n,{promotionid:t})},this.cancel=function(n){return this.setSettings(n,{mode:"cancel"})},this.mobileURL=function(n,t){return l(t)},this}(),f=new ot,r=t.extend({},f),u=n.location.href.split("/"),u=u.slice(3,u.length-1).join("/"),u=u?u+"/":"",n._gaq=n._gaq||[],n._gat||"file:"===nt||t.getScript("//"+("https:"===document.location.protocol?"ssl":"www")+".google-analytics.com/ga.js",!0),n.addEventListener?n.addEventListener("message",g,!1):n.attachEvent&&n.attachEvent("onmessage",g)}}(this)