!function(a,b,c,d){"use strict";function e(a,b){for(var c=0,d=a.length;c<d;c++)q(a[c],b)}function f(a){for(var b,c=0,d=a.length;c<d;c++)b=a[c],x(b,N[h(b)])}function g(a){return function(b){da(b)&&(q(b,a),e(b.querySelectorAll(O),a))}}function h(a){var b=a.getAttribute("is"),c=a.nodeName.toUpperCase(),d=Q.call(M,b?J+b.toUpperCase():I+c);return b&&-1<d&&!i(c,b)?-1:d}function i(a,b){return-1<O.indexOf(a+'[is="'+b+'"]')}function j(a){var b=a.currentTarget,c=a.attrChange,d=a.attrName,e=a.target;pa&&(!e||e===b)&&b.attributeChangedCallback&&"style"!==d&&a.prevValue!==a.newValue&&b.attributeChangedCallback(d,c===a[C]?null:a.prevValue,c===a[E]?null:a.newValue)}function k(a){var b=g(a);return function(a){r.push(b,a.target)}}function l(a){oa&&(oa=!1,a.currentTarget.removeEventListener(G,l)),e((a.target||b).querySelectorAll(O),a.detail===A?A:z),ca&&o()}function m(a,b){var c=this;ga.call(c,a,b),s.call(c,{target:c})}function n(a,b){_(a,b),v?v.observe(a,ja):(na&&(a.setAttribute=m,a[y]=u(a),a.addEventListener(H,s)),a.addEventListener(F,j)),a.createdCallback&&pa&&(a.created=!0,a.createdCallback(),a.created=!1)}function o(){for(var a,b=0,c=ea.length;b<c;b++)a=ea[b],P.contains(a)||(c--,ea.splice(b--,1),q(a,A))}function p(a){throw new Error("A "+a+" type is already registered")}function q(a,b){var c,d=h(a);-1<d&&(w(a,N[d]),d=0,b!==z||a[z]?b===A&&!a[A]&&(a[z]=!1,a[A]=!0,d=1):(a[A]=!1,a[z]=!0,d=1,ca&&Q.call(ea,a)<0&&ea.push(a)),d&&(c=a[b+"Callback"])&&c.call(a))}if(!(d in b)){var r,s,t,u,v,w,x,y="__"+d+(1e5*Math.random()>>0),z="attached",A="detached",B="extends",C="ADDITION",D="MODIFICATION",E="REMOVAL",F="DOMAttrModified",G="DOMContentLoaded",H="DOMSubtreeModified",I="<",J="=",K=/^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,L=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],M=[],N=[],O="",P=b.documentElement,Q=M.indexOf||function(a){for(var b=this.length;b--&&this[b]!==a;);return b},R=c.prototype,S=R.hasOwnProperty,T=R.isPrototypeOf,U=c.defineProperty,V=c.getOwnPropertyDescriptor,W=c.getOwnPropertyNames,X=c.getPrototypeOf,Y=c.setPrototypeOf,Z=!!c.__proto__,$=c.create||function a(b){return b?(a.prototype=b,new a):this},_=Y||(Z?function(a,b){return a.__proto__=b,a}:W&&V?function(){function a(a,b){for(var c,d=W(b),e=0,f=d.length;e<f;e++)c=d[e],S.call(a,c)||U(a,c,V(b,c))}return function(b,c){do a(b,c);while((c=X(c))&&!T.call(c,b));return b}}():function(a,b){for(var c in b)a[c]=b[c];return a}),aa=a.MutationObserver||a.WebKitMutationObserver,ba=(a.HTMLElement||a.Element||a.Node).prototype,ca=!T.call(ba,P),da=ca?function(a){return 1===a.nodeType}:function(a){return T.call(ba,a)},ea=ca&&[],fa=ba.cloneNode,ga=ba.setAttribute,ha=ba.removeAttribute,ia=b.createElement,ja=aa&&{attributes:!0,characterData:!0,attributeOldValue:!0},ka=aa||function(a){na=!1,P.removeEventListener(F,ka)},la=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.msRequestAnimationFrame||function(a){setTimeout(a,10)},ma=!1,na=!0,oa=!0,pa=!0;Y||Z?(w=function(a,b){T.call(b,a)||n(a,b)},x=n):(w=function(a,b){a[y]||(a[y]=c(!0),n(a,b))},x=w),ca?(na=!1,function(){var a=V(ba,"addEventListener"),b=a.value,c=function(a){var b=new CustomEvent(F,{bubbles:!0});b.attrName=a,b.prevValue=this.getAttribute(a),b.newValue=null,b[E]=b.attrChange=2,ha.call(this,a),this.dispatchEvent(b)},d=function(a,b){var c=this.hasAttribute(a),d=c&&this.getAttribute(a),e=new CustomEvent(F,{bubbles:!0});ga.call(this,a,b),e.attrName=a,e.prevValue=c?d:null,e.newValue=b,c?e[D]=e.attrChange=1:e[C]=e.attrChange=0,this.dispatchEvent(e)},e=function(a){var b,c=a.currentTarget,d=c[y],e=a.propertyName;d.hasOwnProperty(e)&&(d=d[e],b=new CustomEvent(F,{bubbles:!0}),b.attrName=d.name,b.prevValue=d.value||null,b.newValue=d.value=c[e]||null,null==b.prevValue?b[C]=b.attrChange=0:b[D]=b.attrChange=1,c.dispatchEvent(b))};a.value=function(a,f,g){a===F&&this.attributeChangedCallback&&this.setAttribute!==d&&(this[y]={className:{name:"class",value:this.className}},this.setAttribute=d,this.removeAttribute=c,b.call(this,"propertychange",e)),b.call(this,a,f,g)},U(ba,"addEventListener",a)}()):aa||(P.addEventListener(F,ka),P.setAttribute(y,1),P.removeAttribute(y),na&&(s=function(a){var b,c,d,e=this;if(e===a.target){b=e[y],e[y]=c=u(e);for(d in c){if(!(d in b))return t(0,e,d,b[d],c[d],C);if(c[d]!==b[d])return t(1,e,d,b[d],c[d],D)}for(d in b)if(!(d in c))return t(2,e,d,b[d],c[d],E)}},t=function(a,b,c,d,e,f){var g={attrChange:a,currentTarget:b,attrName:c,prevValue:d,newValue:e};g[f]=a,j(g)},u=function(a){for(var b,c,d={},e=a.attributes,f=0,g=e.length;f<g;f++)b=e[f],c=b.name,"setAttribute"!==c&&(d[c]=b.value);return d})),b[d]=function(a,c){if(d=a.toUpperCase(),ma||(ma=!0,aa?(v=function(a,b){function c(a,b){for(var c=0,d=a.length;c<d;b(a[c++]));}return new aa(function(d){for(var e,f,g,h=0,i=d.length;h<i;h++)e=d[h],"childList"===e.type?(c(e.addedNodes,a),c(e.removedNodes,b)):(f=e.target,pa&&f.attributeChangedCallback&&"style"!==e.attributeName&&(g=f.getAttribute(e.attributeName),g!==e.oldValue&&f.attributeChangedCallback(e.attributeName,e.oldValue,g)))})}(g(z),g(A)),v.observe(b,{childList:!0,subtree:!0})):(r=[],la(function a(){for(;r.length;)r.shift().call(null,r.shift());la(a)}),b.addEventListener("DOMNodeInserted",k(z)),b.addEventListener("DOMNodeRemoved",k(A))),b.addEventListener(G,l),b.addEventListener("readystatechange",l),b.createElement=function(a,c){var d=ia.apply(b,arguments),e=""+a,f=Q.call(M,(c?J:I)+(c||e).toUpperCase()),g=-1<f;return c&&(d.setAttribute("is",c=c.toLowerCase()),g&&(g=i(e.toUpperCase(),c))),pa=!b.createElement.innerHTMLHelper,g&&x(d,N[f]),d},ba.cloneNode=function(a){var b=fa.call(this,!!a),c=h(b);return-1<c&&x(b,N[c]),a&&f(b.querySelectorAll(O)),b}),-2<Q.call(M,J+d)+Q.call(M,I+d)&&p(a),!K.test(d)||-1<Q.call(L,d))throw new Error("The type "+a+" is invalid");var d,j,m=function(){return o?b.createElement(q,d):b.createElement(q)},n=c||R,o=S.call(n,B),q=o?c[B].toUpperCase():d;return o&&-1<Q.call(M,I+q)&&p(q),j=M.push((o?J:I)+d)-1,O=O.concat(O.length?",":"",o?q+'[is="'+a.toLowerCase()+'"]':q),m.prototype=N[j]=S.call(n,"prototype")?n.prototype:$(ba),e(b.querySelectorAll(O),z),m}}}(window,document,Object,"registerElement");var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),teads;!function(a){function b(a){return new c(a)}var c=function(){function c(a){this.value=a,this._isEmpty=null===a||void 0===a}return c.of=function(c){return null===c||void 0===c?a.None:b(c)},c.ofNested=function(b,c){return this.of(a.ArrayHelper.reduce(c.split("."),function(a,b){return null===a||void 0===a?a:a[b]},b))},c.empty=function(){return a.None},c.prototype.isEmpty=function(){return this._isEmpty},c.prototype.nonEmpty=function(){return!this._isEmpty},c.prototype.getOrElse=function(a){return this._isEmpty?a():this.value},c.prototype.orElse=function(a){return this._isEmpty?a():this},c.prototype.orNull=function(){return this._isEmpty?null:this.value},c.prototype.map=function(b){return this._isEmpty?a.None:c.of(b(this.value))},c.prototype.flatMap=function(b){return this._isEmpty?a.None:b(this.value)},c.prototype.filter=function(b){return this._isEmpty||!b(this.value)?a.None:this},c.prototype.existsIf=function(a){return!this._isEmpty&&a(this.value)},c.prototype.forEach=function(a){this._isEmpty||a(this.value)},c.prototype.match=function(a){return this._isEmpty?a.none():a.some(this.value)},c}();a.Option=c,a.Some=b,a.None=new c(null)}(teads||(teads={}));var teads;!function(a){function b(a){return new d(a,null,!0)}function c(a){return new d(null,a,!1)}var d=function(){function d(a,b,c){this._isSuccess=c,c?this._successValue=a:this._failureValue=b}return d.of=function(a){try{return b(a())}catch(a){return c(a)}},d.prototype.isSuccess=function(){return this._isSuccess},d.prototype.isFailure=function(){return!this._isSuccess},d.prototype.getOrElse=function(a){return this._isSuccess?this._successValue:a()},d.prototype.orElse=function(a){return this._isSuccess?this:a()},d.prototype.filter=function(a){if(!this._isSuccess)return this;try{return a(this._successValue)?this:c(new Error("Predicate does not hold for "+this._successValue))}catch(a){return c(a)}},d.prototype.flatMap=function(a){if(!this._isSuccess)return this;try{return a(this._successValue)}catch(a){return c(a)}},d.prototype.map=function(a){var b=this;return this._isSuccess?d.of(function(){return a(b._successValue)}):this},d.prototype.forEach=function(a){this._isSuccess&&a(this._successValue)},d.prototype.recover=function(a){var b=this;return this._isSuccess?this:d.of(function(){return a(b._failureValue)})},d.prototype.recoverWith=function(a){try{return this._isSuccess?this:a(this._failureValue)}catch(a){return c(a)}},d.prototype.match=function(a){return this._isSuccess?a.success(this._successValue):a.failure(this._failureValue)},d.prototype.toOption=function(){return this._isSuccess?a.Option.of(this._successValue):a.None},d}();a.Try=d,a.Success=b,a.Failure=c}(teads||(teads={})),Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e});var teads;!function(a){var b;!function(a){function b(a){var b=typeof a;return"function"===b?f.test(d.call(a)):!(!a||"object"!==b||!e.test(c.call(a)))}var c=Object.prototype.toString,d=Function.prototype.toString,e=/^\[object .+?Constructor\]$/,f=RegExp("^"+String(toString).replace(/[.*+?^${}()|[\]\/\\]/g,"\\$&").replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");a.isNative=b}(b=a.Utils||(a.Utils={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){function c(a){if(!a)return NaN;var b=a.split("."),c=b[0].split(":"),d=3600*Number(c[0])+60*Number(c[1])+Number(c[2]);return 2===b.length&&(d=Number(d+"."+b[1])),d}function d(b){void 0===b&&(b=0);var c=b?Math.floor(b/3600):0;b-=3600*c;var d=b?Math.floor(b/60):0;b-=60*d;var e=(b%1).toFixed(3).substr(1);return b=Math.floor(b),a.StringHelper.pad(c)+":"+a.StringHelper.pad(d)+":"+a.StringHelper.pad(b)+e}function e(){return window.AudioContext||window.webkitAudioContext}function f(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];for(var c={},d=0,e=void 0;d<a.length;d++){e=a[d];for(var g in e)v.call(e,g)&&("[object Object]"===u.call(e[g])?c[g]=f(c[g],e[g]):void 0!==e[g]&&(c[g]=e[g]))}return c}function g(a,b,c){var d=!1;return b=b||250,c=c||this,function(){d||(a.apply(c,arguments),window.setTimeout(function(){d=!1},b),d=!0)}}function h(a){var b=document.createElement("a");return b.href=a,window.swInstalled&&/(teads|ebu?z)/.test(b.hostname)?"/"+btoa(a).replace(/=/g,"_"):a}function i(){return location&&location.protocol&&0===location.protocol.indexOf("http:")?location.protocol:"https:"}function j(a){if(!a)return"";var b=a.split("/")[1]||a;switch(b){case"javascript":case"x-javascript":b="js";break;case"x-shockwave-flash":b="swf";break;case"mpeg":b="mpg";break;case"x-flv":b="flv"}return b}function k(a,b){var c=!1;if(!b)return!1;for(var d in a)if(v.call(a,d)){if(void 0===typeof b[d])return!1;c=!0}return c}function l(a){return"boolean"==typeof a}function m(a){return"number"==typeof a&&!isNaN(a)}function n(a){return a instanceof Array}function o(a){return"string"==typeof a}function p(a){return"undefined"==typeof a}function q(a){var b=typeof a;return!!a&&"object"===b}function r(a){var b=typeof a;return!!a&&"function"===b&&"[object Function]"===u.call(a)}function s(){return!!(window.teads&&window.teads.api&&window.teads.api.getStudioData&&q(window.teads.api.getStudioData()))}function t(a){return!!a.match(/px$/)&&m(parseFloat(a))}var u=Object.prototype.toString,v=Object.prototype.hasOwnProperty;b.seconds=c,b.offset=d,b.getAudioContext=e,b.extend=f,b.throttle=g,b.safeUrl=h,b.getProtocol=i,b.getExtensionFromMimeType=j,b.containsKeys=k,b.isBoolean=l,b.isNumber=m,b.isArray=n,b.isString=o,b.isUndefined=p,b.isObject=q,b.isFunction=r,b.isStudioCreative=s,b.isSizeInPx=t}(b=a.Utils||(a.Utils={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){b.isBase64RegExp=/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/,b.isBase64=function(c){return a.Option.of(b.isBase64RegExp.exec(c)).existsIf(function(a){return a.length>0})},b.encode=function(b){return a.Option.of(window.btoa).map(function(a){return a(b)}).getOrElse(function(){return b})},b.decode=function(b){return a.Option.of(window.atob).map(function(a){return a(b)}).getOrElse(function(){return b})}}(b=a.Base64||(a.Base64={}))}(teads||(teads={}));var teads;!function(teads){var JSON=function(){function JSON(){}return JSON.stringify=function(a,b){void 0===b&&(b=!1);var c=Array.prototype.toJSON;delete Array.prototype.toJSON;var d=teads.JSON.jsonStringify(b?teads.JSON.decycle(a):a);return c&&(Array.prototype.toJSON=c),d},JSON.parse=function(sJSON){return window.JSON.parse?window.JSON.parse(sJSON):eval("("+sJSON+")")},JSON.decycle=function(a,b){var c=[],d=[];return function a(e,f){var g,h;return void 0!==b&&(e=b(e)),"object"!=typeof e||null===e||e instanceof Boolean||e instanceof Date||e instanceof Number||e instanceof RegExp||e instanceof String?e:(g=c.indexOf(e),g>=0?{$ref:d[g]}:(c.push(e),d.push(f),Array.isArray(e)?(h=[],e.forEach(function(b,c){h[c]=a(b,f+"["+c+"]")})):(h={},Object.keys(e).forEach(function(b){h[b]=a(e[b],f+"["+JSON.stringify(b)+"]")})),h))}(a,"$")},JSON.jsonStringify=function(a){return window.JSON.stringify?window.JSON.stringify(a):teads.JSON.polyfillStringify(a)},JSON.polyfillStringify=function(a){if(null===a)return"null";if("number"==typeof a)return isFinite(Number(a))?a.toString():"null";if("boolean"==typeof a)return a.toString();if("object"==typeof a){if("function"==typeof a.toJSON)return teads.JSON.polyfillStringify(a.toJSON());if(Array.isArray(a)){for(var b="[",c=0;c<a.length;c++)b+=(c?", ":"")+teads.JSON.polyfillStringify(a[c]);return b+"]"}if("[object Object]"===Object.prototype.toString.call(a)){var d=[];for(var e in a)a.hasOwnProperty(e)&&d.push(teads.JSON.polyfillStringify(e)+": "+teads.JSON.polyfillStringify(a[e]));return"{"+d.join(", ")+"}"}}return'"'+a.toString().replace(teads.JSON.escRE,teads.JSON.escFunc)+'"'},JSON.escMap={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"},JSON.escRE=/[\\"\u0000-\u001F\u2028\u2029]/g,JSON.escFunc=function(a){return teads.JSON.escMap[a]||"\\u"+(a.charCodeAt(0)+65536).toString(16).substr(1)},JSON}();teads.JSON=JSON}(teads||(teads={}));var teads;!function(a){var b;!function(b){b.decode=function(b){return a.Option.of(b).filter(a.Utils.isObject).match({some:c,none:d(b)})};var c=function(b){return a.Utils.isString(b.AdParameters)?e(b.AdParameters):a.Success(b)},d=function(b){return function(){return a.Option.of(b).filter(a.Utils.isString).match({some:e,none:function(){return a.Failure(new Error("adParameters is neither an object or string: "+b))}})}},e=function(c){return b.jsonParse(b.decodeAdParameters(c,a.Base64.isBase64,a.Base64.decode,decodeURIComponent),a.JSON.parse)};b.decodeAdParameters=function(a,b,c,d){return b(a)?c(a):0===a.indexOf("%7B")?d(a):a},b.jsonParse=function(b,c){return a.Try.of(function(){return c(b)}).recover(function(){throw new Error("Unable to JSON.parse adParameters string: "+b)})}}(b=a.AdParameterHelper||(a.AdParameterHelper={}))}(teads||(teads={}));var teads;!function(a){var b=function(){function a(){}return a.find=function(a,b,c){if(null===a)throw new TypeError("array is null or undefined");for(var d,e=Object(a),f=e.length>>>0,g=0;g<f;g++)if(d=e[g],b.call(c,d,g,e))return d},a.forEach=function(a,b,c){if(null===a)throw new TypeError("array is null or undefined");for(var d,e=Object(a),f=e.length>>>0,g=0;g<f;)g in e&&(d=e[g],b.call(c,d,g,e)),g++},a.filter=function(a,b,c){if(null===a)throw new TypeError("array is null or undefined");if("function"!=typeof b)throw new TypeError("callback must be a function");var d=Object(a),e=d.length>>>0;if(e>d.length)throw new TypeError("negative length");for(var f=[],g=0;g<e;g++)if(g in d){var h=d[g];b.call(c,h,g,d)&&f.push(h)}return f},a.some=function(a,b,c){if(null===a)throw new TypeError("array is null or undefined");var d=Object(a),e=d.length>>>0;if(e>d.length)throw new TypeError("negative length");for(var f=0;f<e;f++)if(f in d&&b.call(c,d[f],f,d))return!0;return!1},a.indexOf=function(a,b,c){if(null===a)throw new TypeError("array is null or undefined");var d=Object(a),e=d.length>>>0;if(0===e)return-1;var f=+c||0;if(Math.abs(f)===1/0&&(f=0),f>=e)return-1;var g=Math.max(f>=0?f:e-Math.abs(f),0);try{for(;g<e;){if(g in d&&d[g]===b)return g;g++}}catch(a){}return-1},a.includes=function(b,c){return a.indexOf(b,c)>-1},a.fromNodeList=function(a){return Array.prototype.slice.call(a)},a.map=function(a,b,c){if(null===a)throw new TypeError("array is null or undefined");if("function"!=typeof b)throw new TypeError("callback must be a function");for(var d,e,f=Object(a),g=f.length>>>0,h=new Array(g),i=0;i<g;)i in f&&(d=f[i],e=b.call(c,d,i,f),h[i]=e),i++;return h},a.unique=function(b){if(null===b)throw new TypeError("array is null or undefined");for(var c=[],d=0,e=b;d<e.length;d++){var f=e[d];a.includes(c,f)||c.push(f)}return c},a.reduce=function(a,b,c){if(null===a)throw new TypeError("array is null or undefined");if("function"!=typeof b)throw new TypeError("callback must be a function");var d=a.length>>>0;if(0===d&&void 0===c)throw new TypeError("reduce of empty array with no initial value");var e,f=0;if(void 0!==c)e=c;else for(;;){if(f in a){e=a[f++];break}if(++f>=d)throw new TypeError("reduce of empty array with no initial value")}for(;f<d;f++)f in a&&(e=b(e,a[f],f,a));return e},a}();a.ArrayHelper=b}(teads||(teads={}));var teads;!function(a){var b=function(){function a(){}return a.createBlob=function(a,b){if(void 0===b&&(b="application/javascript"),window.Blob)try{return new Blob([a],{type:b})}catch(a){}window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder;var c=new window.BlobBuilder;return c.append(a),c.getBlob()},a.getUrl=function(){return window.URL||window.webkitURL},a}();a.BlobHelper=b}(teads||(teads={}));var teads;!function(a){var b=function(){function b(){}return b.MODEL="model",b.NAME="name",b.TYPE="type",b.VENDOR="vendor",b.VERSION="version",b.CONSOLE="console",b.MOBILE="mobile",b.TABLET="tablet",b.SMARTTV="smarttv",b.WEARABLE="wearable",b.DESKTOP="desktop",b.util={extend:function(a,b){var c={};for(var d in a)b[d]&&b[d].length%2===0?c[d]=b[d].concat(a[d]):c[d]=a[d];return c},has:function(a,b){return"string"==typeof a&&b.toLowerCase().indexOf(a.toLowerCase())!==-1},lowerize:function(a){return a.toLowerCase()},trim:function(a){return a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},b.mapper={rgx:function(){for(var b,c,d,e,f,g,h,i=0,j=arguments;i<j.length&&!g;){var k=j[i],l=j[i+1];if("undefined"==typeof b){b={};for(e in l)f=l[e],"object"==typeof f?b[f[0]]=void 0:b[f]=void 0}for(c=d=0;c<k.length&&!g;)if(g=k[c++].exec(a.Context.getUA()))for(e=0;e<l.length;e++)h=g[++d],f=l[e],"object"==typeof f&&f.length>0?2===f.length?"function"==typeof f[1]?b[f[0]]=f[1].call(this,h):b[f[0]]=f[1]:3===f.length?"function"!=typeof f[1]||f[1].exec&&f[1].test?b[f[0]]=h?h.replace(f[1],f[2]):void 0:b[f[0]]=h?f[1].call(this,h,f[2]):void 0:4===f.length&&(b[f[0]]=h?f[3].call(this,h.replace(f[1],f[2])):void 0):b[f]=h?h:void 0;i+=2}return b},str:function(a,c){for(var d in c)if("object"==typeof c[d]&&c[d].length>0){for(var e=0;e<c[d].length;e++)if(b.util.has(c[d][e],a))return"?"===d?void 0:d}else if(b.util.has(c[d],a))return"?"===d?void 0:d;return a}},b.maps={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},b.regexes={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[b.NAME,b.VERSION],[/(opios)[\/\s]+([\w\.]+)/i],[[b.NAME,"Opera Mini"],b.VERSION],[/\s(opr)\/([\w\.]+)/i],[[b.NAME,"Opera"],b.VERSION],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],[b.NAME,b.VERSION],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[b.NAME,"IE"],b.VERSION],[/(edge)\/((\d+)?[\w\.]+)/i],[b.NAME,b.VERSION],[/(yabrowser)\/([\w\.]+)/i],[[b.NAME,"Yandex"],b.VERSION],[/(comodo_dragon)\/([\w\.]+)/i],[[b.NAME,/_/g," "],b.VERSION],[/(micromessenger)\/([\w\.]+)/i],[[b.NAME,"WeChat"],b.VERSION],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[b.VERSION,[b.NAME,"MIUI Browser"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[b.NAME,/(.+)/,"$1 WebView"],b.VERSION],[/android.+samsungbrowser\/([\w\.]+)/i,/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],[b.VERSION,[b.NAME,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(qqbrowser)[\/\s]?([\w\.]+)/i],[b.NAME,b.VERSION],[/(dolfin)\/([\w\.]+)/i],[[b.NAME,"Dolphin"],b.VERSION],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[b.NAME,"Chrome"],b.VERSION],[/;fbav\/([\w\.]+);/i],[b.VERSION,[b.NAME,"Facebook"]],[/fxios\/([\w\.-]+)/i],[b.VERSION,[b.NAME,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[b.VERSION,[b.NAME,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[b.VERSION,b.NAME],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[b.NAME,[b.VERSION,b.mapper.str,b.maps.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[b.NAME,b.VERSION],[/(navigator|netscape)\/([\w\.-]+)/i],[[b.NAME,"Netscape"],b.VERSION],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[b.NAME,b.VERSION]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[b.MODEL,b.VENDOR,[b.TYPE,b.TABLET]],[/applecoremedia\/[\w\.]+ \((ipad)/],[b.MODEL,[b.VENDOR,"Apple"],[b.TYPE,b.TABLET]],[/(apple\s{0,1}tv)/i],[[b.MODEL,"Apple TV"],[b.VENDOR,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[b.VENDOR,b.MODEL,[b.TYPE,b.TABLET]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[b.MODEL,[b.VENDOR,"Amazon"],[b.TYPE,b.TABLET]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[b.MODEL,b.mapper.str,b.maps.device.amazon.model],[b.VENDOR,"Amazon"],[b.TYPE,b.MOBILE]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[b.MODEL,b.VENDOR,[b.TYPE,b.MOBILE]],[/\((ip[honed|\s\w*]+);/i],[b.MODEL,[b.VENDOR,"Apple"],[b.TYPE,b.MOBILE]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[b.VENDOR,b.MODEL,[b.TYPE,b.MOBILE]],[/\(bb10;\s(\w+)/i],[b.MODEL,[b.VENDOR,"BlackBerry"],[b.TYPE,b.MOBILE]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[b.MODEL,[b.VENDOR,"Asus"],[b.TYPE,b.TABLET]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[b.VENDOR,"Sony"],[b.MODEL,"Xperia Tablet"],[b.TYPE,b.TABLET]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[b.VENDOR,"Sony"],[b.MODEL,"Xperia Phone"],[b.TYPE,b.MOBILE]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[b.VENDOR,b.MODEL,[b.TYPE,b.CONSOLE]],[/android.+;\s(shield)\sbuild/i],[b.MODEL,[b.VENDOR,"Nvidia"],[b.TYPE,b.CONSOLE]],[/(playstation\s[3portablevi]+)/i],[b.MODEL,[b.VENDOR,"Sony"],[b.TYPE,b.CONSOLE]],[/(sprint\s(\w+))/i],[[b.VENDOR,b.mapper.str,b.maps.device.sprint.vendor],[b.MODEL,b.mapper.str,b.maps.device.sprint.model],[b.TYPE,b.MOBILE]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[b.VENDOR,b.MODEL,[b.TYPE,b.TABLET]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[b.VENDOR,[b.MODEL,/_/g," "],[b.TYPE,b.MOBILE]],[/(nexus\s9)/i],[b.MODEL,[b.VENDOR,"HTC"],[b.TYPE,b.TABLET]],[/(nexus\s6p)/i],[b.MODEL,[b.VENDOR,"Huawei"],[b.TYPE,b.MOBILE]],[/(microsoft);\s(lumia[\s\w]+)/i],[b.VENDOR,b.MODEL,[b.TYPE,b.MOBILE]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[b.MODEL,[b.VENDOR,"Microsoft"],[b.TYPE,b.CONSOLE]],[/(kin\.[onetw]{3})/i],[[b.MODEL,/\./g," "],[b.VENDOR,"Microsoft"],[b.TYPE,b.MOBILE]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[b.MODEL,[b.VENDOR,"Motorola"],[b.TYPE,b.MOBILE]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[b.MODEL,[b.VENDOR,"Motorola"],[b.TYPE,b.TABLET]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[b.VENDOR,b.util.trim],[b.MODEL,b.util.trim],[b.TYPE,b.SMARTTV]],[/hbbtv.+maple;(\d+)/i],[[b.MODEL,/^/,"SmartTV"],[b.VENDOR,"Samsung"],[b.TYPE,b.SMARTTV]],[/\(dtv[\);].+(aquos)/i],[b.MODEL,[b.VENDOR,"Sharp"],[b.TYPE,b.SMARTTV]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[b.VENDOR,"Samsung"],b.MODEL,[b.TYPE,b.TABLET]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[b.VENDOR,"Samsung"],b.MODEL,[b.TYPE,b.MOBILE]],[/smart-tv.+(samsung)/i],[b.VENDOR,b.MODEL,[b.TYPE,b.SMARTTV]],[/sie-(\w+)*/i],[b.MODEL,[b.VENDOR,"Siemens"],[b.TYPE,b.MOBILE]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[b.VENDOR,"Nokia"],b.MODEL,[b.TYPE,b.MOBILE]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[b.MODEL,[b.VENDOR,"Acer"],[b.TYPE,b.TABLET]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[b.VENDOR,"LG"],b.MODEL,[b.TYPE,b.TABLET]],[/(lg) netcast\.tv/i],[b.VENDOR,b.MODEL,[b.TYPE,b.SMARTTV]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[b.MODEL,[b.VENDOR,"LG"],[b.TYPE,b.MOBILE]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[b.MODEL,[b.VENDOR,"Lenovo"],[b.TYPE,b.TABLET]],[/linux;.+((jolla));/i],[b.VENDOR,b.MODEL,[b.TYPE,b.MOBILE]],[/((pebble))app\/[\d\.]+\s/i],[b.VENDOR,b.MODEL,[b.TYPE,b.WEARABLE]],[/android.+;\s(glass)\s\d/i],[b.MODEL,[b.VENDOR,"Google"],[b.TYPE,b.WEARABLE]],[/android.+;\s(pixel c)\s/i],[b.MODEL,[b.VENDOR,"Google"],[b.TYPE,b.TABLET]],[/android.+;\s(pixel xl|pixel)\s/i],[b.MODEL,[b.VENDOR,"Google"],[b.TYPE,b.MOBILE]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i],[[b.MODEL,/_/g," "],[b.VENDOR,"Xiaomi"],[b.TYPE,b.MOBILE]],[/android.+a000(1)\s+build/i],[b.MODEL,[b.VENDOR,"OnePlus"],[b.TYPE,b.MOBILE]],[/\s(tablet)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[b.TYPE,b.util.lowerize],b.VENDOR,b.MODEL]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[b.NAME,b.VERSION],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s]+\w)*/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[b.NAME,[b.VERSION,b.mapper.str,b.maps.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[b.NAME,"Windows"],[b.VERSION,b.mapper.str,b.maps.os.windows.version]],[/\((bb)(10);/i],[[b.NAME,"BlackBerry"],b.VERSION],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[b.NAME,b.VERSION],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[b.NAME,"Symbian"],b.VERSION],[/\((series40);/i],[b.NAME],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[b.NAME,"Firefox OS"],b.VERSION],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[b.NAME,b.VERSION],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[b.NAME,"Chromium OS"],b.VERSION],[/(sunos)\s?([\w\.]+\d)*/i],[[b.NAME,"Solaris"],b.VERSION],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[b.NAME,b.VERSION],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[b.NAME,"iOS"],[b.VERSION,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[b.NAME,"Mac OS"],[b.VERSION,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[b.NAME,b.VERSION]]},b}();a.Ua=b}(teads||(teads={}));var teads;!function(a){var b=function(){function b(){}return b.isURL=function(a){var b=/^\(?((?:(http|https|ftp):\/\/)|\/\/)?(?:((?:[^\W\s]|\.|-|[:]{1})+)@{1})?((?:www.)?(?:[^\W\s]|\.|-)+[\.][^\W\s]{2,4}|localhost|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})(?::(\d*))?([\/]?[^\s\?]*[\/]{1})*(?:\/?([^\s\n\?\[\]\{\}\#]*(?:(?=\.)){1}|[^\s\n\?\[\]\{\}\.\#]*)?([\.]{1}[^\s\?\#]*)?)?(?:\?{1}([^\s\n\#]*))?([\#][^\s\n]*)?\)?$/i;return"string"==typeof a&&b.test(a)},b.pad=function(a,b){void 0===b&&(b="00");var c=String(a);return b.substring(0,b.length-c.length)+c},b.ucfirst=function(a){return a.charAt(0).toUpperCase()+a.substr(1)},b.rand=function(a,b){void 0===b&&(b=!0);for(var c=b?"0123456789":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",d="",e=0;e<a;e++)d+=c.charAt(Math.floor(Math.random()*c.length));return d},b.trim=function(a){return a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},b.separate=function(a){void 0===a&&(a="|");for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];for(var d=!0,e=0;d&&e<b.length;)d=d&&!b[e],e++;return d?"":b.join(a)},b.endsWith=function(a,b){return a.slice(-b.length)===b},b.match=function(a,b){return a.match(b)||[]},b.replaceStringsWithValue=function(b,c){return function(d){return a.ArrayHelper.reduce(b,function(a,b){return a.replace(b,""+c)},d)}},b}();a.StringHelper=b}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=a.Utils.isNative,d=window.Date,e=d.prototype.getTime;b.now=c(d.now)?d.now:c(e)?function(){return e.call(new d)}:function(){return+new d},d.now||(d.now=b.now)}(b=a.date||(a.date={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){b.get=function(b){return a.Try.of(function(){return document.cookie}).map(function(a){return decodeURIComponent(a.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(b).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null})},b.setAndExpireInOneYear=function(b,c){return a.Try.of(function(){return document.cookie=encodeURIComponent(b)+"="+encodeURIComponent(c)+"; expires="+new Date(a.date.now()+31536e6).toUTCString()+"; path=/"})}}(b=a.Cookie||(a.Cookie={}))}(teads||(teads={}));var teads;!function(a){function b(){a.Cookie.get("teadsDebugLevel").toOption().map(function(a){return a.split(",")}).forEach(function(b){f=a.ArrayHelper.indexOf(b,"all")>=0?["debug","info","warn","error"]:b}),a.Cookie.get("teadsDebugNamespace").toOption().forEach(function(a){g=a.split(","),h="all"===String(a).toLocaleLowerCase()}),f.length&&!a.Logger&&(c?(e.log("Teads Media Framework > Debug mode"),
e.log("Package: web-formats v2.17.85")):(e.log("%cTeads Media Framework %c> Debug mode","color:#7ebde5;font-family:Helvetica,sans-serif;font-size:2em;","color:#aaa;font-family:Helvetica,sans-serif;font-size:2em;"),e.log("%cPackage: web-formats v2.17.85","color:#7ebde5;font-style:italic;")))}a.START_TIME=a.START_TIME||a.date.now(),a.FULL_LOGS=a.FULL_LOGS||[];var c=!1;try{var d=navigator.userAgent;c=/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i.test(d)||/(?:ms|\()(ie)\s([\w\.]+)/i.test(d)||/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i.test(d)}catch(a){}var e,f=[],g=[],h=!1,i=function(){function a(){}return a.prototype.log=function(){},a}();e=window.console&&console.log?window.console:new i,b();var j=function(){function d(a){this.namespace=a,this.console=e}return d.clear=function(){d.logs=[],a.FULL_LOGS=[]},d.getFullLogs=function(){return a.FULL_LOGS},d.prototype.debug=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];this._log("debug",a)},d.prototype.info=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];this._log("info",a)},d.prototype.warn=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];this._log("warn",a)},d.prototype.error=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];this._log("error",a)},d.prototype.table=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];e.table&&e.table(a,b.length>0?b:null)},d.prototype._log=function(i,j){var k=this;if(b(),j.length){for(var l=a.date.now()-a.START_TIME,m=(l/1e3).toFixed(3)+"s",n="",o=0;o<j.length;o++)if(o>0&&(n+=" + "),"object"==typeof j[o])try{n+=a.JSON.stringify(j[o])}catch(a){n+=j[o]}else n+=j[o];if(a.FULL_LOGS.push({level:i,message:m+" ["+this.namespace+"] "+n}),!(a.ArrayHelper.indexOf(f,i)<0)){if(!h&&g.length){var p=a.ArrayHelper.some(g,function(a){return 0===k.namespace.indexOf(a)});if(!p)return}d.logs.push({level:i,message:m+" ["+this.namespace+"] "+j.join(" ")}),c?j=["Teads "+m+" ["+this.namespace+"] "+j.join(" ")]:j.unshift("Teads %c"+m+" "+this.namespace,"color:#7ebde5;");var q=e[i]||e.log;try{q.apply(e,j)}catch(a){Function.prototype.apply.apply(q,[e,j])}}}},d.logs=[],d}();a.Logger=j}(teads||(teads={}));var teads;!function(a){var b=function(){function a(b){if(this.isValid=!0,"string"!=typeof b&&(b=""+b),b.length>c.MAX_LENGTH)return void(this.isValid=!1);var d=b.trim().match(c.FULL);if(!d){var e=b.split(".").length;return e<3?new a(b+".0"):void(this.isValid=!1)}return this.raw=b,this.major=+d[1],this.minor=+d[2],this.patch=+d[3],this.major>c.MAX_SAFE_INTEGER||this.major<0?void(this.isValid=!1):this.minor>c.MAX_SAFE_INTEGER||this.minor<0?void(this.isValid=!1):this.patch>c.MAX_SAFE_INTEGER||this.patch<0?void(this.isValid=!1):void(this.version=this.major+"."+this.minor+"."+this.patch)}return a.prototype.toString=function(){return this.version},a}(),c=function(){function a(){}return a.isGreaterThan=function(b,c){var d=a.compare(b,c);return null!==d&&d>0},a.isLowerThan=function(b,c){var d=a.compare(b,c);return null!==d&&d<0},a.isGreaterOrEqual=function(b,c){var d=a.compare(b,c);return null!==d&&d>=0},a.isLowerOrEqual=function(b,c){var d=a.compare(b,c);return null!==d&&d<=0},a.compareIdentifiers=function(a,b){return a<b?-1:a>b?1:0},a.compareMain=function(b,c){return a.compareIdentifiers(b.major,c.major)||a.compareIdentifiers(b.minor,c.minor)||a.compareIdentifiers(b.patch,c.patch)},a.compare=function(c,d){var e=new b(c),f=new b(d);return e.isValid&&f.isValid?a.compareMain(e,f):null},a.MAX_LENGTH=256,a.MAX_SAFE_INTEGER=9007199254740991,a.NUMERICIDENTIFIER="0|[1-9]\\d*",a.MAINVERSION="("+a.NUMERICIDENTIFIER+")\\.("+a.NUMERICIDENTIFIER+")\\.("+a.NUMERICIDENTIFIER+")",a.FULL=new RegExp("^v?"+a.MAINVERSION+".*?$"),a}();a.Semver=c}(teads||(teads={}));var teads;!function(a){var b=function(){function b(){}return b.init=function(){try{b.performance=window.top.performance||window.top.webkitPerformance||window.top.msPerformance||window.top.mozPerformance}catch(a){}},b.mark=function(a){if(!a||"string"!=typeof a)return null;if(b.performance&&b.performance.mark)b.performance.mark(a);else{var c={name:a,entryType:"mark",startTime:b.now(),duration:0};b.performanceEntries[a]=c}},b.measure=function(a,c,d){if(!a||"string"!=typeof a||!c||"string"!=typeof c||!d||"string"!=typeof d)return null;try{if(b.performance&&b.performance.measure)b.performance.measure(a,c,d);else if(b.performanceEntries[c]&&b.performanceEntries[d]){var e={name:a,entryType:"measure",startTime:b.performanceEntries[c].startTime,duration:b.performanceEntries[d].startTime-b.performanceEntries[c].startTime};b.performanceEntries[a]=e}return b.getLastEntryByName(a)}catch(a){return b.logger.warn(a),null}},b.getLastEntryByName=function(a){try{if(b.performance&&b.performance.getEntriesByName){var c=b.performance.getEntriesByName(a);return c[c.length-1]}return b.performanceEntries[a]?b.performanceEntries[a]:null}catch(a){return b.logger.warn(a),null}},b.getTimingByRegex=function(a){var c=null;if(b.performance&&b.performance.getEntries){var d=b.performance.getEntriesByType("resource");for(var e in d)if(d.hasOwnProperty(e)&&a.test(d[e].name)){c=d[e];break}}return c},b.getResourceCount=function(){if(b.performance&&b.performance.getEntries)return b.performance.getEntriesByType("resource").length},b.now=function(){return b&&b.performance&&b.performance.now?b.performance.now():a.date.now()},b.logger=new a.Logger("helper.Timing"),b.performanceEntries={},b}();a.Timing=b,b.init()}(teads||(teads={}));var teads;!function(a){var b;!function(a){a[a.Standard=0]="Standard",a[a.Worker=1]="Worker",a[a.Precise=2]="Precise"}(b=a.TIMER_MODE||(a.TIMER_MODE={}));var c=function(){function c(){}return c.setTimeout=function(d,e,f){if(void 0===f&&(f=b.Standard),f===b.Worker&&c.canUseWorker()){var g=c.createWorker(d,'self.setTimeout(function(){self.postMessage("tick")}, '+e+")");return{clear:function(){g.terminate()}}}if(f===b.Precise){var h,i=a.Timing.now(),j=0,k=function(){var b=a.Timing.now()-i,f=0===j?j:b/j;b<e-f?(j+=1,h=c.requestAnimationFrame(k,c.tick)):d()};return k(),{clear:function(){c.cancelAnimationFrame(h)}}}var l=setTimeout(function(){d()},e);return{clear:function(){clearTimeout(l)}}},c.setInterval=function(a,b,d){if(void 0===d&&(d=!1),d&&c.canUseWorker()){var e=c.createWorker(a,'self.setInterval(function(){self.postMessage("tick")}, '+b+")");return{clear:function(){e.terminate()}}}var f=setInterval(function(){a()},b);return{clear:function(){clearInterval(f)}}},c.requestAnimationFrame=function(a,b){var c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame;return c?c(a):setTimeout(a,b)},c.cancelAnimationFrame=function(a){var b=window.cancelAnimationFrame||window.mozCancelAnimationFrame||clearTimeout;b(a)},c.createWorker=function(b,c){var d=a.BlobHelper.createBlob(c),e=new Worker(a.BlobHelper.getUrl().createObjectURL(d));return e.onmessage=function(a){return b()},e},c.canUseWorker=function(){var b=a.BlobHelper.getUrl();return!!window.Worker&&!!b&&!!b.createObjectURL},c.tick=1e3/60,c}();a.Timer=c}(teads||(teads={}));var teads;!function(a){a.CONTEXT_IS_INITIALIZED=!1;var b=function(){function b(a){this.name=a.name||"",this.version=a.version||""}return b.prototype.toString=function(){return a.StringHelper.separate("|",this.name,this.version).toLowerCase()},b}();a.UABrowser=b;var c=function(){function b(a){this.name=a.name||"",this.version=a.version||""}return b.prototype.toString=function(){return a.StringHelper.separate("|",this.name,this.version).toLowerCase()},b}();a.UAOs=c;var d=function(){function b(c){this.model=c.model||"",this.type=c.type||(b.typeRegExp.test(e.getOS().name)?a.Ua.DESKTOP:""),this.vendor=c.vendor||""}return b.prototype.toString=function(){return a.StringHelper.separate("|",this.model,this.type,this.vendor).toLowerCase()},b.typeRegExp=/^windows|mac\s+os|linux|bsd|dragonfly|chromium\s+os|haiku|ubuntu|slackware|gentoo|solaris|debian|fedora|arch|beos|mint|gnu|os|suse\/2$/i,b}();a.UADevice=d;var e=function(){function e(){}return e.getContextSummary=function(){var a=e.isMobile()&&!e.isTablet()?"mob":e.isTablet()?"tab":"desk",b=e.isAndroid()?"android":e.isIos()?"ios":e.isIE()?"ie":e.isChrome()?"ch":e.isFirefox()?"ff":"ot";return[a,b].join(" ")},e.getFullContext=function(){return[e.getDevice().type,e.getOS().name,e.getOS().version,e.getBrowser().name,e.getBrowser().version.split(".")[0],e.getShortContext()].join("|")},e.init=function(){a.CONTEXT_IS_INITIALIZED||(e.checkUserAgent(),e.checkLanguage(),e.os=new c(a.Ua.mapper.rgx.apply(this,a.Ua.regexes.os)),e.browser=new b(a.Ua.mapper.rgx.apply(this,a.Ua.regexes.browser)),e.device=new d(a.Ua.mapper.rgx.apply(this,a.Ua.regexes.device)),e.checkAmp(),e.checkFacebookIA(),e.checkIabSF(),e.checkEdgeTouchScreen(),e.checkUiWebview(),e.checkObserveIntersection(),e.cacheBrowserValues(),e.cacheOsValues(),e.cacheDeviceValues(),e.cacheVersionValues(),e.cacheCustomValues(),e.startAutoplayTest(),a.CONTEXT_IS_INITIALIZED=!0)},e.setIsSDK=function(a){e.cache.isSDK=a},e.isDesktop=function(){return e.cache.isDesktop},e.isIpad=function(){return e.cache.isIpad},e.isTablet=function(){return e.cache.isTablet},e.isMobile=function(){return e.cache.isMobile},e.isChromeIos=function(){return e.cache.isChromeIos},e.isFacebookWebview=function(){return e.cache.isFacebookWebview},e.isAndroidNative=function(){return e.cache.isAndroidNative},e.isSamsungBrowser=function(){return e.cache.isSamsungBrowser},e.isAndroid=function(){return e.cache.isAndroid},e.isIos=function(){return e.cache.isIos},e.isIphone=function(){return e.cache.isIphone},e.isAndroidMobile=function(){return e.cache.isAndroidMobile},e.isIE=function(){return e.cache.isIE},e.isChrome=function(){return e.cache.isChrome},e.isChromeWebView=function(){return e.cache.isChromeWebView},e.isFirefox=function(){return e.cache.isFirefox},e.isEdge=function(){return e.cache.isEdge},e.isAmp=function(){return e.cache.amp},e.isFacebookIA=function(){return e.cache.fbia},e.isAmpObserveIntersection=function(){return e.cache.isAmpObserveIntersection},e.isIABSafeFrame=function(){return e.cache.iabsf},e.isEdgeTouchScreen=function(){return e.cache.isEdgeTouchScreen},e.isSDK=function(){return e.cache.isSDK},e.getIEVersion=function(){return e.cache.ieVersion},e.getAndroidVersion=function(){return e.cache.androidVersion},e.getChromeVersion=function(){return e.cache.chromeVersion},e.getIosVersion=function(){return e.cache.iOsVersion},e.getFacebookWebviewVersion=function(){return e.cache.FacebookWebviewVersion},e.getSafariVersion=function(){return e.cache.safariVersion},e.isUIWebview=function(){return e.cache.isUIWebview},e.isSafari=function(){return e.cache.isSafari},e.isSafari11Plus=function(){return a.Semver.isGreaterOrEqual(e.getSafariVersion(),"11")},e.isGoogleSearchApp=function(){return e.cache.isGoogleSearchApp},e.isIos10Safari=function(){return e.cache.isIos10Safari},e.isIos10OtherBrowser=function(){return e.cache.isIos10OtherBrowser},e.isWhiteListedIos10Safari=function(a){return void 0===a&&(a=null),e.isIos10Safari()&&!e.blackListRealHtml5Player.test(a)},e.isFacebookWebviewIOS10=function(){return a.Semver.isGreaterOrEqual(e.getFacebookWebviewVersion(),"87")&&a.Semver.isGreaterOrEqual(e.getIosVersion(),"10.2")},e.isCanvasUsed=function(){return e.cache.isCanvasUsed},e.videoSupport=function(a){return!!a.createElement("video").canPlayType},e.getLanguage=function(){return e.language},e.getUA=function(){return e.userAgent},e.setUA=function(a){e.userAgent=a},e.getDevice=function(){return e.device},e.getOS=function(){return e.os},e.getBrowser=function(){return e.browser},e.canAutoplay=function(){return null===e.isAutoplayEnabled&&a.Timing.now()-e.autoplayStartTime>100&&e.endAutoplayTest(!0),e.isAutoplayEnabled},e.isCanvasNeeded=function(a){var b=a?"53":"56";return e.doNeedAutoplayCheck(b)&&!e.canAutoplay()},e.getShortContext=function(){var a;return a=e.isAmp()?"amp":e.isFacebookIA()?"fia":e.isIABSafeFrame()?"sf":e.isFacebookWebview()?"fbwv":e.isChromeWebView()||e.isUIWebview()?"wv":"web",e.isCanvasUsed()?a+"-canvas":a},e.getEnv=function(){return e.isSDK()?"sdk-inapp":"js-"+e.getShortContext()},e.cacheCanvasUsed=function(a){e.cache.isCanvasUsed=a},e.checkUserAgent=function(){try{e.userAgent=navigator.userAgent}catch(a){e.logger.error("Could not get `navigator.userAgent`",a),e.userAgent=""}},e.checkLanguage=function(){try{e.language=window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage||"en"}catch(a){e.logger.error("Could not get navigator language",a),e.language="en"}},e.checkAmp=function(){try{e.cache.amp=!!window._teads_amp}catch(a){e.logger.error("Could not check if `!!window._teads_amp`",a),e.cache.amp=!1}},e.checkFacebookIA=function(){try{e.cache.fbia=!!window._teads_fbia}catch(a){e.logger.error("Could not check if `!!window._teads_fbia`",a),e.cache.fbia=!1}},e.checkIabSF=function(){try{e.cache.iabsf=!!window.$sf&&!!window.$sf.ext}catch(a){e.logger.error("Could not check if `!!window.$sf.ext`",a),e.cache.iabsf=!1}},e.checkEdgeTouchScreen=function(){try{e.cache.edgeTouchScreen=navigator.maxTouchPoints&&navigator.maxTouchPoints>0}catch(a){e.logger.error("Could not check if `navigator.maxTouchPoints > 0`",a),e.cache.edgeTouchScreen=!1}},e.checkUiWebview=function(){try{e.cache.uiWebview=window.navigator.standalone}catch(a){e.logger.error("Could not check navigator.standalone",a),e.cache.uiWebview=!1}},e.checkObserveIntersection=function(){try{e.cache.observeIntersection=!(!window.context||!window.context.observeIntersection)}catch(a){e.logger.error("Could not check if `!!window.context.observeIntersection`",a),e.cache.observeIntersection=!1}},e.cacheBrowserValues=function(){e.cache.isIE="IE"===e.browser.name||/MSIE|Trident/.test(e.userAgent),e.cache.isFirefox="Firefox"===e.browser.name||/Firefox/i.test(e.userAgent),e.cache.isEdge="Edge"===e.browser.name||/Edge/i.test(e.userAgent),e.cache.isGoogleSearchApp=/GSA\//i.test(e.userAgent),e.cache.isSafari=("Safari"===e.browser.name||"Mobile Safari"===e.browser.name)&&!e.isGoogleSearchApp(),e.cache.isChromeWebView="Chrome WebView"===e.browser.name,e.cache.isChrome="Chrome"===e.browser.name||e.isChromeWebView(),e.cache.isEdgeTouchScreen=e.isEdge()&&e.cache.edgeTouchScreen,e.cache.isChromeIos=/CriOS/i.test(e.userAgent),e.cache.isAndroidNative="Android Browser"===e.browser.name,e.cache.isFacebookWebview="Facebook"===e.browser.name||/FBAN|FBIOS|FBAV|FBBV|FBDV|FBMD|FBSN|FBSV|FBSS|FBCR|FBID|FBLC|FBOP/i.test(e.userAgent),e.cache.isSamsungBrowser=/SamsungBrowser/i.test(e.userAgent)},e.cacheOsValues=function(){e.cache.isIpad="iPad"===e.device.model||/iPad/i.test(e.userAgent),e.cache.isIphone="iPhone"===e.device.model||/iPhone/i.test(e.userAgent),e.cache.isIos="iOS"===e.os.name||e.isIpad()||e.isIphone(),e.cache.isAndroid="Android"===e.os.name||/Android/i.test(e.userAgent)},e.cacheDeviceValues=function(){var a=/(m|M)obile/.test(e.userAgent);e.cache.isTablet="tablet"===e.device.type||e.isIpad()||e.isAndroid()&&!a,e.cache.isMobile="mobile"===e.device.type||e.isIos()&&!e.isIpad()||e.isAndroid()&&a,e.cache.isDesktop=!e.isMobile()&&!e.isTablet()},e.cacheVersionValues=function(){e.cache.ieVersion=e.isIE()?e.browser.version:null,e.cache.iOsVersion=e.isIos()?e.os.version:null,e.cache.androidVersion=e.isAndroid()?e.os.version:null,e.cache.chromeVersion=e.isChrome()?e.browser.version:null,e.cache.FacebookWebviewVersion=e.isFacebookWebview()?e.browser.version:null,e.cache.safariVersion=e.isSafari()?e.browser.version:null},e.cacheCustomValues=function(){e.cache.isAndroidMobile=e.isAndroid()&&e.isMobile(),e.cache.isAmpObserveIntersection=e.cache.amp&&e.cache.observeIntersection,e.cache.isUIWebview=(e.isIphone()||e.isIpad())&&!e.isSafari()&&!e.isChrome()&&!e.cache.uiWebview,e.cache.isIos10Safari=a.Semver.isGreaterOrEqual(e.getIosVersion(),"10")&&!e.isUIWebview()&&!e.isChromeIos(),e.cache.isIos10OtherBrowser=a.Semver.isGreaterOrEqual(e.getIosVersion(),"10")&&a.Semver.isLowerThan(e.getIosVersion(),"11")&&e.isUIWebview()&&e.isChromeIos()},e.doNeedAutoplayCheck=function(b){return void 0===b&&(b="53"),e.isAndroid()&&(e.isSamsungBrowser()||a.Semver.isGreaterOrEqual(e.getChromeVersion(),b))||a.Semver.isGreaterOrEqual(e.getIosVersion(),"10")},e.startAutoplayTest=function(){null===e.isAutoplayEnabled&&(e.doNeedAutoplayCheck()?e.autoplayHtmlVideoElement||e.autoplayStartTime||(e.autoplayHtmlVideoElement=document.createElement("video"),e.autoplayHtmlVideoElement.src=e.autoplayVideoUrl,e.autoplayHtmlVideoElement.style.display="none",e.autoplayHtmlVideoElement.setAttribute("webkit-playsinline","true"),e.autoplayHtmlVideoElement.setAttribute("playsinline","true"),e.autoplayHtmlVideoElement.muted=!0,document.body.appendChild(e.autoplayHtmlVideoElement),e.autoplayStartTime=a.Timing.now(),a.Timing.mark("markAutoplayStartTime"),e.autoplayHtmlVideoElement.play().then(function(){e.endAutoplayTest(!0)}).catch(function(a){e.endAutoplayTest(!1)})):e.isAutoplayEnabled=!1)},e.endAutoplayTest=function(b){null===e.isAutoplayEnabled&&(a.Timing.mark("markAutoplayEndTime"),e.isAutoplayEnabled=b),null!==e.autoplayHtmlVideoElement&&(e.autoplayHtmlVideoElement.pause(),document.body.removeChild(e.autoplayHtmlVideoElement),e.autoplayHtmlVideoElement=null)},e.logger=new a.Logger("Context"),e.cache={},e.blackListRealHtml5Player=/^(23027|24539|25695|25696|25697|25698|25699|25700|25701|25702|25703|25704|25705|25706|25707|25708|25709|25710|25711|26170|26231|26561|26566|26567|26568|26569|26570|26572|27446|28204|28206|28207|28210|28211|28212|28541|28827|28831|31814|33366|33704|33705|33706|33707|33708|34907|43985|49718|52375|53276|53824|53837|53838|53840|53842|55491|57698|57699|57702|60178|60578|61059|61123|69299)$/,e.autoplayVideoUrl=a.Utils.getProtocol()+"//cdn.teads.tv/media/format/v3/assets/default/autoplay.mp4",e.isAutoplayEnabled=null,e}();a.Context=e,e.init()}(teads||(teads={}));var teads;!function(a){var b;!function(a){a.base64TransparentPixel="data:image/gif;base64,R0lGODlhAQABAAAAACwAAAAAAQABAAA="}(b=a.Constant||(a.Constant={}))}(teads||(teads={}));var teads;!function(a){var b=function(){function b(){}return b.createIframe=function(){var a=document.createElement("iframe");return a.style.setProperty("margin","0","important"),a.style.setProperty("padding","0","important"),a.style.setProperty("width","0","important"),a.style.setProperty("height","0","important"),a.style.setProperty("border","0","important"),a.style.setProperty("overflow","hidden","important"),a.style.setProperty("float","none","important"),a.setAttribute("scrolling","no"),a.frameBorder="0",a},b.isFullscreen=function(a){return a||(a=document),!!(a.fullscreenElement||a.mozFullScreenElement||a.webkitFullscreenElement||a.msFullscreenElement)},b.getWindow=function(c){if(!c||a.Dom.isNodeList(c))return null;var d=b.getDocument(c);return d?d.defaultView||d.parentWindow:null},b.getDocument=function(b){return!b||a.Dom.isNodeList(b)?null:b.ownerDocument},b.toggleFullscreen=function(a){b.isFullscreen()?this.closeFullscreen(a):this.openFullscreen(a)},b.openFullscreen=function(a){a.requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen()},b.closeFullscreen=function(a){var c=b.getDocument(a);c.exitFullscreen?c.exitFullscreen():c.msExitFullscreen?c.msExitFullscreen():c.mozCancelFullScreen?c.mozCancelFullScreen():c.webkitExitFullscreen&&c.webkitExitFullscreen()},b.addClass=function(c,d){b.hasClass(c,d)||(c.className+=" "+d,c.className=a.StringHelper.trim(c.className))},b.removeClass=function(c,d){if(b.hasClass(c,d)){var e=c.className.split(" ");e.splice(a.ArrayHelper.indexOf(e,d),1),c.className=a.StringHelper.trim(e.join(" "))}},b.hasClass=function(b,c){return a.ArrayHelper.indexOf(b.className.split(" "),c)!==-1},b.toggleClass=function(a,c){b.hasClass(a,c)?b.removeClass(a,c):b.addClass(a,c)},b.replaceClass=function(a,c,d){!b.hasClass(a,c)&&b.hasClass(a,d)&&(b.removeClass(a,d),b.addClass(a,c))},b.findParentWindows=function(c){var d=[];if(a.Dom.isHTMLElement(c)){var e;e=function(a){a.parent!==a&&a.parent.document&&a.parent.location&&a.parent.window&&(d.push(a.parent),e(a.parent))};var f=b.getWindow(c);d.push(f);try{e(f)}catch(a){}}return d},b.findChildWindows=function(c,d){void 0===d&&(d=!1);var e=[];if(a.Dom.isHTMLElement(c))for(var f=c.getElementsByTagName("iframe"),g=0;g<f.length;g++)try{f[g].contentWindow&&f[g].contentWindow.document&&f[g].contentWindow.document.body&&(e.push(f[g].contentWindow),d&&a.ArrayHelper.forEach(b.findChildWindows(f[g].contentWindow.document.body,!0),function(a){e.concat(a.contentWindow)}))}catch(a){}return e},b.findAllWindows=function(a){return b.findParentWindows(a).concat(b.findChildWindows(a))},b.findParentFrameNode=function(a){var c=b.getWindow(a);try{if(c.parent!==c&&"undefined"!=typeof c.parent.Window&&c.parent instanceof c.parent.Window){var d=c.parent.document.getElementsByTagName("iframe");if(d)for(var e=0;e<d.length;e++)if(d[e].contentWindow===c)return b.findParentFrameNode(d[e])}}catch(a){}return a},b.findFirstParentFrameNode=function(a){var c=b.getWindow(a);try{if(c.parent!==c&&"undefined"!=typeof c.parent.Window&&c.parent instanceof c.parent.Window){var d=c.parent.document.getElementsByTagName("iframe");if(d)for(var e=0;e<d.length;e++)if(d[e].contentWindow===c&&!b.isKarmaFrame(d[e]))return d[e]}}catch(a){}return a},b.isKarmaFrame=function(a){return"context"===a.id&&"http://localhost:5555/context.html"===a.src&&"100%"===a.width&&"100%"===a.height},b.findParentElements=function(c){var d=[];if(a.Dom.isHTMLElement(c))for(var e=b.getDocument(c),f=c,g=f.tagName&&f.tagName.toUpperCase&&"HTML"===f.tagName.toUpperCase();!g&&f!==e.body&&a.Dom.isHTMLElement(f);)f=f.parentElement,f&&d.push(f);return d},b.isInView=function(c,d,e,f){f||(f=c.offsetHeight);var g=b.getPercentageInView(c,d,f);return(!a.Context.isAmp()&&!a.Context.isIABSafeFrame()||0!==g)&&g>=e},b.getPercentageInView=function(b,c,d,e){if(void 0===d&&(d=b.offsetHeight),void 0===e&&(e=!1),a.Context.isAmp())return c._teads_amp.change?c._teads_amp.change.intersectionRect.height/c._teads_amp.change.boundingClientRect.height:0;if(a.Context.isIABSafeFrame()){var f=c.$sf.ext.geom();return f&&f.self?f.self.yiv:0}if(!d)return-1;var g=a.Dom.getWindowSize(c),h=a.Dom.getBoundingClientRect(b),i=h.top>0?g.height-h.top:h.top+d,j=i/d;return e||(j=j>0?j:0,j=j<1?j:1),j},b.findFloatingHeaders=function(c,d){void 0===c&&(c=window),void 0===d&&(d=[]);for(var e,f,g=[],h=a.Dom.getWindowSize(c),i=h.width/2,j=h.height*b.MAX_FLOATING_TOP,k=j*b.MAX_FLOATING_TOP,l=1;l<j;l+=k)e=c.document.elementFromPoint(i,l),f!==e&&(f=e,a.ArrayHelper.forEach(b.findParentElements(e),function(b){"fixed"!==c.getComputedStyle(b).position||a.ArrayHelper.includes(d,b)||g.push(b)}));return a.ArrayHelper.unique(g)},b.getRealVisibilityState=function(c){var d=!0;a.Dom.isHTMLElement(c)||(d=!1);var e=b.getWindow(c)||window,f=e.getComputedStyle(c);if(d&&"none"===f.display&&(d=!1),d){var g=a.Dom.getBoundingClientRect(c),h="hidden"===f.overflowX||"hidden"===f.overflowY;g.height<4&&g.width<4&&h&&(d=!1)}var i=b.getParentElement(c);return d&&i&&(d=b.getRealVisibilityState(i)),d},b.getCSSRules=function(c){var d=b.getWindow(c).document.styleSheets,e=[];if(c.matches=c.matches||c.webkitMatchesSelector||c.mozMatchesSelector||c.msMatchesSelector||c.oMatchesSelector,a.Utils.isFunction(c.matches))for(var f in d){var g=d[f],h=g.rules||g.cssRules;for(var i in h){var j=h[i];c.matches(j.selectorText)&&e.push(j)}}return e},b.copyCSSRules=function(c,d,e){var f=b.getCSSRules(c);a.ArrayHelper.forEach(f,function(b){a.ArrayHelper.forEach(e,function(a){var c=b.style.getPropertyValue(a);!c||d.style[a]||d.getAttribute(a)||(d.style[a]=c)})})},b.getParentElement=function(b){var c=null;return a.Dom.isHTMLElement(b)&&(c=b.parentElement),c},b.MAX_FLOATING_TOP=a.Context.isDesktop()?.1:.15,b}();a.HTMLHelper=b}(teads||(teads={}));var teads;!function(a){var b=function(){function b(){}return b.getBoundingClientRect=function(c){try{var d=c.getBoundingClientRect(),e=b.copyBoundingClientRect(d),f=!a.Context.isAmp()&&!a.Context.isIABSafeFrame()&&!a.Context.isFacebookIA();if(f&&a.HTMLHelper.getWindow(c)!==window.top){var g=a.HTMLHelper.findFirstParentFrameNode(c);if(g!==c){var h=b.getBoundingClientRect(g);h.top&&(e.top=h.top+d.top,e.bottom=h.top+d.bottom),h.left&&(e.left=h.left+d.left,e.right=h.left+d.right)}}return e}catch(a){return{left:0,top:0,right:0,bottom:0,width:0,height:0}}},b.copyBoundingClientRect=function(a){return{top:a.top||0,right:a.right||0,bottom:a.bottom||0,left:a.left||0,width:a.width||0,height:a.height||0}},b.getSize=function(c){var d=c.offsetWidth,e=c.offsetHeight,f=a.Context.getUA().indexOf("WebKit")>-1&&!d&&!e;if((!d||f)&&c.getBoundingClientRect){var g=b.getBoundingClientRect(c);return{width:g.right-g.left,height:g.bottom-g.top}}return{width:d,height:e}},b.getTextContent=function(c,d){if(a.ArrayHelper.indexOf(b.TAGS_TO_IGNORE,c.nodeName)>=0);else if(c.nodeType===b.NODE_TYPES.TEXT)d.push(c.nodeValue);else if(c.nodeName in b.PREDEFINED_TAG_VALUES)d.push(b.PREDEFINED_TAG_VALUES[c.nodeName]);else for(var e=c.firstChild;e;)b.getTextContent(e,d),e=e.nextSibling},b.isEmpty=function(c,d){if(void 0===d&&(d=window),c){var e=c.tagName.toLowerCase(),f=["iframe","object","img"];return!(a.ArrayHelper.includes(f,e)||b.querySelectorAll(f.join(","),d,c).length>0||""!==c.textContent.trim())}},b.querySelectorAll=function(a,b,c){return void 0===c&&(c=null),c=c||b.document,c.querySelectorAll(a)},b.findMatchingElement=function(c,d){var e=c[0];if(e){var f=e.querySelector(d);return a.Option.of(f).orElse(function(){return b.findMatchingElement(c.slice(1),d)})}return a.Option.empty()},b.getAttributeValue=function(b,c){return a.Option.of(b.getAttribute(c)).filter(function(a){return""!==a})},b.getAndRemoveAttributeValue=function(a,c){return b.getAttributeValue(a,c).map(function(b){return a.removeAttribute(c),b})},b.getWindowSize=function(b){if(void 0===b&&(b=window),a.Context.isIABSafeFrame()){var c=window.$sf.ext.geom();return{width:c.win.w,height:c.win.h}}return"number"==typeof b.innerWidth?{width:b.innerWidth,height:b.innerHeight}:b.document.documentElement&&(b.document.documentElement.clientWidth||b.document.documentElement.clientHeight)?{width:b.document.documentElement.clientWidth,height:b.document.documentElement.clientHeight}:b.document.body&&(b.document.body.clientWidth||b.document.body.clientHeight)?{width:b.document.body.clientWidth,height:b.document.body.clientHeight}:{width:1e3,height:600}},b.inject=function(a,b){void 0===b&&(b=window);var c=b.document.getElementsByTagName("head")[0]||b.document.body;c.appendChild(a)},b.addEventListener=function(a,c,d){c.addEventListener?c.addEventListener(a,d,!0):c.attachEvent?c.attachEvent("on"+a,d):b.logger.warn("Trying to addEventListener on bad object",c)},b.removeEventListener=function(a,c,d){try{c.removeEventListener?c.removeEventListener(a,d,!0):c.attachEvent?c.detachEvent("on"+a,d):b.logger.warn("Trying to removeEventListener on bad object",c)}catch(a){}},b.onDomReady=function(a,c){void 0===c&&(c=window),!c.document||"complete"!==c.document.readyState&&"loaded"!==c.document.readyState&&"interactive"!==c.document.readyState?c.addEventListener?c.addEventListener("DOMContentLoaded",a,!1):c.attachEvent&&c===c.top?1===b.readyQueue.push(a)&&b.readyIEtop(c):c.attachEvent&&c.attachEvent("onload",a):"interactive"===c.document.readyState&&c.document.attachEvent?c.document.attachEvent("onreadystatechange",function(){"complete"!==c.document.readyState&&"loaded"!==c.document.readyState||a()}):a()},b.onDomComplete=function(a,c,d){void 0===c&&(c=window),void 0===d&&(d=this),"complete"===c.document.readyState?a.call(d):b.addEventListener("load",c,function(){a.call(d)})},b.getScrollLeft=function(a){return a.pageXOffset?a.pageXOffset:"CSS1Compat"===(a.document.compatMode||"")?a.document.documentElement.scrollLeft:a.document.body.scrollLeft},b.getScrollTop=function(a){return a.pageYOffset?a.pageYOffset:"CSS1Compat"===(a.document.compatMode||"")?a.document.documentElement.scrollTop:a.document.body.scrollTop},b.getElementsByClassName=function(a,c,d){if(void 0===d&&(d=window),c=c||d.document,c.getElementsByClassName)return c.getElementsByClassName(a);for(var e=a.split(" "),f="",g=0,h=e.length;g<h;g++)f+="."+e[g];return b.querySelectorAll(f,d,c)},b.isHTMLElement=function(c,d){return!(!c||"object"!=typeof c||b.isNodeList(c))&&(d||(d=a.HTMLHelper.getWindow(c)||window),"object"==typeof d.HTMLElement?c instanceof d.HTMLElement:c&&"object"==typeof c&&1===c.nodeType&&"string"==typeof c.nodeName)},b.isNodeList=function(a){return!(!a||"object"!=typeof a)&&("[object NodeList]"===String(a)||"[object StaticNodeList]"===String(a))},b.isSelfClosingTag=function(a){if(b.isHTMLElement(a))return/^(?:area|br|col|embed|hr|img|input|link|meta|param)$/i.test(a.nodeName)},b.htmlDecode=function(a){var b=document.createElement("textarea");return b.innerHTML=a,b.value},b.htmlEncode=function(a){var b=document.createElement("textarea");return b.innerText=a,b.innerHTML},b.getOuterHTML=function(a){var c;return b.isHTMLElement(a)&&(c=b.htmlDecode(a.outerHTML)),c},b.readyIEtop=function(a){try{var c=a.document.documentElement;c.doScroll("left");for(var d=void 0;d=b.readyQueue.shift();)d()}catch(c){setTimeout(b.readyIEtop,50,a)}},b.readyQueue=[],b.PREDEFINED_TAG_VALUES={IMG:" ",BR:"\n"},b.TAGS_TO_IGNORE=["SCRIPT","STYLE","HEAD","IFRAME","OBJECT"],b.NODE_TYPES={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},b.logger=new a.Logger("Dom"),b}();a.Dom=b}(teads||(teads={}));var teads;!function(a){var b=function(){function b(b){void 0===b&&(b="EventListenerManager"),this.listeners={},this.logger=new a.Logger(b)}return b.prototype.add=function(b,c,d){var e=this;a.Utils.isString(b)||this.logger.warn("First argument of EventListenerManager.add must be a string",b),this.logger.debug("Add listener to event",b),a.Option.of(this.listeners[b]).orElse(function(){return a.Option.of([])}).map(function(a){return a.concat([{context:c,callback:d}])}).forEach(function(a){e.listeners[b]=a}),this.addEventListener(b,c,d)},b.prototype.addMultiple=function(b,c,d){var e=this;a.Utils.isArray(b)||this.logger.warn("First argument of EventListenerManager.addMultiple must be an array of strings",b),a.ArrayHelper.forEach(b,function(a){return e.add(a,c,d)})},b.prototype.remove=function(b){var c=this;a.Utils.isString(b)||this.logger.warn("First argument of EventListenerManager.add must be a string",b),this.logger.debug("Remove listener from event",b),a.ArrayHelper.forEach(this.listeners[b],function(a){return c.removeEventListener(b,a.context,a.callback)}),this.listeners[b]=[]},b.prototype.removeMultiple=function(b){var c=this;a.Utils.isArray(b)||this.logger.warn("First argument of EventListenerManager.addMultiple must be an array of strings",b),a.ArrayHelper.forEach(b,function(a){return c.remove(a)})},b.prototype.removeAll=function(){var b=function(b){c.listeners.hasOwnProperty(b)&&a.ArrayHelper.forEach(c.listeners[b],function(c){return a.Dom.removeEventListener(b,c.context,c.callback)})},c=this;for(var d in this.listeners)b(d)},b}();a.EventListenerManager=b;var c=function(b){function c(){return b.call(this,"DOMEventListenerManager")||this}return __extends(c,b),c.prototype.addEventListener=function(b,c,d){a.Dom.addEventListener(b,c,d)},c.prototype.removeEventListener=function(b,c,d){a.Dom.removeEventListener(b,c,d)},c}(b);a.DOMEventListenerManager=c}(teads||(teads={}));var teads;!function(a){var b=function(){function a(a,b){this.code=a,this.error=b}return a.get=function(b,c,d){return new a({id:b,message:c},d)},a.prototype.getFullMessage=function(){return"Error #"+this.code.id+": "+this.code.message},a.prototype.getId=function(){return this.code.id},a.prototype.getMessage=function(){return this.code.message},a.prototype.getStackTrace=function(){return this.error&&this.error.stack?this.error.stack:""},
a.prototype.toString=function(){return this.getFullMessage()},a}();a.Exception=b;var c=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return __extends(b,a),b.XML_PARSE={id:100,message:"XML parsing error"},b.XML_INVALID_SCHEMA={id:101,message:'VAST schema validation error: expected "%s" but found "%s"'},b.UNSUPPORTED_VERSION={id:102,message:"VAST version of response not supported. Expected VAST2 or VAST3 but VAST1 found"},b.TRAFFICKING={id:200,message:"Trafficking error. Video player received an Ad type that it was not expecting and/or cannot display"},b.LINEARITY={id:201,message:"Video player expecting different linearity"},b.DURATION={id:202,message:"Video player expecting different duration"},b.SIZE={id:203,message:"Video player expecting different size"},b.WRAPPER={id:300,message:"General Wrapper error"},b.WRAPPER_TIMEOUT={id:301,message:"Timeout of VAST URI provided in Wrapper element, or of VAST URI provided in a subsequent Wrapper element (URI was either unavailable or reached a timeout as defined by the video player)"},b.WRAPPER_LIMIT={id:302,message:"Wrapper limit reached, as defined by the video player. Too many Wrapper responses have been received with no InLine response"},b.NO_ADS={id:303,message:"No Ads VAST response after one or more Wrappers"},b.GENERAL_LINEAR={id:400,message:"General Linear error. Video player is unable to display the Linear Ad."},b.FILE_NOT_FOUND={id:401,message:"File not found. Unable to find Linear/MediaFile from URI."},b.MEDIAFILE_TIMEOUT={id:402,message:"Timeout of MediaFile URI."},b.UNSUPPORTED_MEDIAFILE={id:403,message:"Could not find MediaFile that is supported by this video player, based on the attributes of the MediaFile element."},b.MEDIAFILE_DISPLAY={id:405,message:"Problem displaying MediaFile. Video player found a MediaFile with supported type but could not display it. MediaFile may include: unsupported codecs, different MIME type than MediaFile@type, unsupported delivery method, etc."},b.GENERAL_NONLINEAR={id:500,message:"General NonLinearAds error."},b.CREATIVE_DIMENSIONS={id:501,message:"Unable to display NonLinear Ad because creative dimensions do not align with creative display area (i.e. creative dimension too large)."},b.NONLINEAR_FETCH={id:502,message:"Unable to fetch NonLinearAds/NonLinear resource."},b.SUPPORTED_NONLINEAR_NOT_FOUND={id:503,message:"Could not find NonLinear resource with supported type."},b.GENERAL_COMPANION={id:600,message:"General CompanionAds error."},b.COMPANION_DIMENSIONS={id:601,message:"Unable to display Companion because creative dimensions do not fit within Companion display area (i.e., no available space)."},b.COMPANION_DISPLAY={id:602,message:"Unable to display Required Companion."},b.COMPANION_FETCH={id:603,message:"Unable to fetch CompanionAds/Companion resource."},b.SUPPORTED_COMPANION_NOT_FOUND={id:604,message:"Could not find Companion resource with supported type."},b.UNDEFINED={id:900,message:"Undefined Error"},b.GENERAL={id:901,message:"General VPAID error"},b}(b);a.VastException=c}(teads||(teads={}));var teads;!function(a){var b=function(){function b(){}return b.hasFlash=function(){if(a.Context.isMobile()||a.Context.isTablet())return!1;var c=b.getFlashVersion().map(function(a){return parseInt(a,10)});return c[0]>=b.requiredVersion[0]&&c[1]>=b.requiredVersion[1]},b.hasFlashVersion=function(a){return a>=parseInt(b.getFlashVersion()[0],10)},b.getFlashVersion=function(){try{var a=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");try{a.AllowScriptAccess="always"}catch(a){return["6","0","0"]}return new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1].split(",")}catch(a){try{if(navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)return(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1].split(",")}catch(a){}}return["0","0","0"]},b.requiredVersion=[10,0],b}();a.FlashHelper=b}(teads||(teads={}));var teads;!function(a){var b=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return __extends(b,a),b.INCOMPLETE_OBJECT={id:1,message:"Ad configuration is missing settings or placement"},b.OPTION_CHECKVALUE_MISSING={id:2,message:"checkValue function is missing"},b.OPTION_THRESHOLD_MISSING={id:3,message:"Option threshold is required"},b.OPTION_PARENTWINDOW_INVALID={id:4,message:"Option parentWindow is required"},b.OPTION_VAST_INVALID={id:5,message:"Option vast has to contain type and content"},b.MULTIPLE_PAGE_PROCESS={id:6,message:"Cannot process more than 1 page"},b.OPTION_PID_INVALID={id:7,message:"Option Pid must be a positive number"},b.OPTION_FORMAT_INVALID={id:8,message:"Option Format must be a known string"},b.LOADING_MEDIAFILE={id:9,message:"Error when loading mediafile"},b.RAS_REQUEST={id:10,message:"RAS request error"},b.RAS_TIMEOUT={id:11,message:"RAS request timeout"},b.RAS_CUSTOM_TIMEOUT={id:12,message:"RAS request custom timeout"},b.RAS_RESPONSE={id:13,message:"RAS response error"},b.RAS_RESPONSE_ADS_NOT_ARRAY={id:14,message:"RAS response ads is not an array"},b.EVENT_CALLBACK={id:15,message:"Callback threw an error"},b.FILTER_FUNCTION={id:16,message:"The filter function threw an error"},b.OPTION_NAME_REQUIRED={id:17,message:"Name must be a valid string"},b}(a.Exception);a.FormatException=b}(teads||(teads={}));var teads;!function(a){var b=function(){function b(a,c){this.collectorUrl=a,this.collectorUrl+=this.collectorUrl.indexOf("?")<0?"?":"&",c===b.FORMATTING_TYPES.PIPE_SEPARATE?this.format=b.pipeSeparateData:this.format=b.stringifyData}return b.stringify=function(b){var c;try{c=a.JSON.stringify(b)}catch(a){b.toString&&(c=b.toString())}return c},b.stringifyData=function(a){if(a.length)for(var c in a)"function"==typeof a[c]?a[c]=a[c].toString():"object"==typeof a[c]&&(a[c]=b.stringify(a[c]));else a=b.stringify(a);return a.toString?a.toString():a},b.pipeSeparateData=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(a[c].toString());return b.join("|")},b.prototype.track=function(a,b){void 0===b&&(b="");try{var c=this.collectorUrl+encodeURIComponent(b)+encodeURIComponent(a),d=new Image;d.src=c}catch(a){}},b.FORMATTING_TYPES={JSON:"JSON",PIPE_SEPARATE:"PIPE_SEPARATE"},b}();a.LogSender=b}(teads||(teads={}));var teads;!function(a){var b=function(){function a(){}return a.createXmlHttpRequest=function(){var a=null;if(window.XMLHttpRequest&&(a=new XMLHttpRequest),!a||"withCredentials"in a||(a=window.XDomainRequest?new window.XDomainRequest:null),!a){try{a=new window.ActiveXObject("MSXML2.XMLHTTP.6.0")}catch(b){try{a=new window.ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(a){throw new Error("could not create XMLHttpRequest nor ActiveXObject")}}a.responseType="msxml-document"}return a},a.isXMLHttpRequest=function(a){return a instanceof XMLHttpRequest},a}();a.Request=b}(teads||(teads={}));var teads;!function(a){a.WIGO_DEBUG_KEY=a.WIGO_DEBUG_KEY||null;var b=function(){function b(){var b=this;this.domain=/teads\.(tv|net:\d+|tech:\d+)$/,this.color="blue",this.statusDetails="",this.bottomPxPosition=10,this.position=1,this.buttonHeight=0,this.elapsedTime=0,this.logfile={context:(a.Context.getDevice().toString()+"-"+a.Context.getOS().toString()+"-"+a.Context.getBrowser().toString()).replace(/\|/g," "),url:location.href,steps:[],logs:[],timeline:[]};var c=a.HTMLHelper.findParentWindows(document.body);if(this.topWindow=c.pop()||window,a.WIGO_DEBUG_KEY)this.createDebugButton(this.color),this.recordUserActions();else{var d=function(c){var d=c.data.wigoLiveDebug;c.origin.match(b.domain)&&d&&d.length&&d.length>1&&(a.WIGO_DEBUG_KEY=d[1],b.createDebugButton(b.color),b.recordUserActions())};try{this.topWindow.addEventListener("message",d)}catch(a){this.topWindow=window,this.topWindow.addEventListener("message",d)}}}return b.setTotalInstances=function(a){b.totalInstances=a},b.prototype.setPlayerContainer=function(a){this.playerContainer=a},b.prototype.valid=function(c,d,e,f){if(this.addValidEvent(c,d,{store:e,type:f}),f===b.infoType.ERROR){var g="";"string"==typeof e?g=e:e.message?(e.id&&(g=e.id+" - "),g+=e.message):g=e.length?e:a.JSON.stringify(e),this.setStatus(!1,g)}else 3===c&&2===d?this.setStatus(!0,"AdLoaded"):3===c&&3===d&&this.setStatus(!0,"AdStarted")},b.prototype.vastEvent=function(a,c,d,e){if(this.addValidEvent(0,0,{store:{name:a,time:c,percent:d,pixels:e},type:b.infoType.VAST_EVENT}),"complete"===a)this.setStatus(!0,"AdComplete");else if("pause"===a)this.setStatus(!0,"AdPaused"),this.lastTracking="pause";else if("pause"===this.lastTracking)this.lastTracking=null;else if("progress"===a){var f="undefined"===c?"":c.split(".")[0]+"s";this.setStatus(!0,"AdPlaying: "+f)}},b.prototype.setStatus=function(a,b){void 0===b&&(b="");var c=a?"green":"red";this.button?(this.status.style.backgroundColor=c,this.status.style.display="block",this.loader.style.display="none",this.status.innerHTML=b):(this.color=c,this.statusDetails=b)},b.prototype.moveButton=function(a){this.bottomPxPosition=b.initialBottomPosition+(a-1)*b.bottomPxInterval,this.position=a,this.button&&this.button.style.setProperty("bottom",this.bottomPxPosition+"px")},b.prototype.followPlayer=function(){var c=a.Dom.getBoundingClientRect(this.playerContainer),d=this.topWindow.innerHeight-this.buttonHeight-(b.initialBottomPosition+(b.totalInstances-this.position)*b.bottomPxInterval),e=this.topWindow.innerHeight-c.bottom+c.height/2-this.buttonHeight/2,f=10;e<this.bottomPxPosition?e=this.bottomPxPosition:e>d?e=d:f=50,this.button.style.setProperty("bottom",e+"px"),this.button.style.setProperty("right",f+"px")},b.prototype.recordUserActions=function(){var c=this;this.elapsedTime<3e5&&setTimeout(function(){var d=c.logfile.timeline[c.logfile.timeline.length-1],e=a.Dom.getWindowSize(c.topWindow),f=a.Dom.getScrollLeft(c.topWindow),g=a.Dom.getScrollTop(c.topWindow);if(!d||c.hasInteracted(d,e,f,g)){var h={time:c.elapsedTime,scrollX:f,scrollY:g,screenWidth:e.width,screenHeight:e.height,player:{top:0,height:0,left:0,width:0}};if(c.playerContainer){var i=a.Dom.getBoundingClientRect(c.playerContainer);h.player={top:i.top,height:i.height,left:i.left,width:i.width}}c.logfile.timeline.push(h)}c.elapsedTime+=b.recordUserActionsTiming,c.recordUserActions()},b.recordUserActionsTiming)},b.prototype.addValidEvent=function(a,b,c){var d={step:a,substep:b,info:c};this.logfile.steps.push(d)},b.prototype.createDebugButton=function(b){var c=this;if(a.WIGO_DEBUG_KEY&&!this.button){var d=this.topWindow.document.createElement("div");d.innerHTML='<div class="teads-wigo-btn"><div style="position: absolute; left:0;top:0;padding: 0 4%; border: 1px solid white; color: white; font-size: 10px; text-align: center; font-family: Arial; line-height:16px;"></div><div style="border: 6px solid #f3f3f3; border-top: 6px solid #3498db; border-radius: 50%; position: absolute; left: 60%; width: 32%; height: 32%; -webkit-animation: wigospin 2s linear infinite; animation: wigospin 2s linear infinite"></div>\n  <style type="text/css">\n    .teads-wigo-btn {\n      position: fixed;\n      bottom: 10px;\n      right: 10px;\n      z-index: 2147483647;\n      width: 75px;\n      height: 75px;\n      cursor: pointer;\n      background-image: url(\'https://cdn.teads.tv/media/format/v3/assets/default/img/wigo.png?v2\');\n      transition: right ease 0.2s;\n    }\n    @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {\n        /* Retina */\n        .teads-wigo-btn {\n          background-size: 75px 75px;\n          background-image: url(\'https://cdn.teads.tv/media/format/v3/assets/default/img/wigo-2x.png\');\n        }\n    }\n    @-webkit-keyframes wigospin {\n      0% { -webkit-transform: rotate(0deg);}\n      100% { -webkit-transform: rotate(360deg);}\n    }\n    @keyframes wigospin {\n      0% { transform: rotate(0deg); }\n      100% { transform: rotate(360deg); }\n    }\n  </style>\n</div>\n',this.button=d.firstChild,this.button.onclick=function(a){c.saveFile(),a.stopPropagation()},this.button.style.setProperty("bottom",this.bottomPxPosition+"px"),this.topWindow.document.body.appendChild(this.button),this.status=this.button.firstChild,this.status.style.backgroundColor=b,this.status.innerHTML=this.statusDetails,this.loader=this.status.nextSibling,"blue"!==this.color?(this.status.style.display="block",this.loader.style.display="none"):(this.status.style.display="none",this.loader.style.display="block"),this.buttonHeight=a.Dom.getBoundingClientRect(this.button).height,a.Context.isAmp()&&teads.helper.AmpResize&&("red"===b&&(teads.helper.AmpResize.ratio=4),setTimeout(function(){return c.forceAmpOpen()},1e3))}},b.prototype.forceAmpOpen=function(){var a=this;if(!teads.helper.AmpResize.isVisible()){var b=setTimeout(function(){return a.forceAmpOpen()},1e3);teads.helper.AmpResize.open(function(){a.button.style.display="none",setTimeout(function(){return a.button.style.display="block"},100),clearTimeout(b)})}},b.prototype.saveFile=function(){var c=this;if(a.WIGO_DEBUG_KEY){this.button.onclick=function(a){a.stopPropagation()},this.logfile.logs=a.Logger.getFullLogs();var d=a.WIGO_DEBUG_KEY+"_"+a.date.now()+".json",e=function(){setTimeout(function(){c.button.onclick=function(a){c.saveFile(),a.stopPropagation()}},500)},f=a.Request.createXmlHttpRequest();f.open("PUT",b.serviceUrl+"/livedebug/upload/"+d,!0),f.setRequestHeader("Content-Type","application/json; charset=utf-8"),f.onload=function(){e()},f.send(a.JSON.stringify(this.logfile,!0)),f.onerror=function(){e()},window.open(b.serviceUrl+"/livedebug?file="+d)}},b.prototype.hasInteracted=function(a,b,c,d){return a.scrollY!==d||a.scrollX!==c||a.screenHeight!==b.height||a.screenWidth!==b.width},b.infoType={MODAL:"modal",STRING:"string",VAST_EVENT:"vastEvent",ERROR:"error"},b.bottomPxInterval=80,b.recordUserActionsTiming=1e3,b.serviceUrl=a.Utils.getProtocol()+(location.hostname.match(/(sandbox\.teads\.net|par2\.teads\.tech)$/)?"//"+location.hostname+":18091":"//wigo.teads.tv"),b.totalInstances=0,b.initialBottomPosition=10,b}();a.Wigo=b}(teads||(teads={}));var teads;!function(a){var b=function(){function a(a){this.pageId=a.PageId,this.placementId=a.PlacementId,this.wigo=a.Wigo,this.sumologicSessionId=a.SumologicSessionId}return a}();a.SessionStore=b;var c=function(){function c(b,c){this.pageId=b,this.placementId=c,this.wigoOption=a.Option.empty(),this.sumologicSessionIdOption=a.Option.empty()}return Object.defineProperty(c.prototype,"PageId",{get:function(){return this.pageId},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"PlacementId",{get:function(){return this.placementId},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"Wigo",{get:function(){return this.wigoOption},enumerable:!0,configurable:!0}),c.prototype.setWigo=function(b){return this.wigoOption=a.Option.of(b),this},Object.defineProperty(c.prototype,"SumologicSessionId",{get:function(){return this.sumologicSessionIdOption},enumerable:!0,configurable:!0}),c.prototype.setSumologicSessionId=function(b){return this.sumologicSessionIdOption=a.Option.of(b),this},c.prototype.build=function(){return new b(this)},c}();a.SessionStoreBuilder=c}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=new a.Logger("Store");b.get=function(b){return a.Try.of(function(){return localStorage.getItem(b)}).recover(function(a){throw c.debug("An error occured while trying to access localStorage: "+a.toString()),a}).toOption().orElse(function(){return a.Cookie.get(b).recover(function(a){throw c.debug("An error occured while trying to get a cookie: "+a.toString()),a}).toOption()}).flatMap(function(b){return a.Try.of(function(){return a.JSON.parse(b)}).recover(function(a){throw c.warn("An error occured while trying to deserialize value to JSON: "+a.toString()),a}).toOption()})},b.set=function(b,d){var e=a.JSON.stringify(d);return a.Try.of(function(){return localStorage.setItem(b,e)}).recover(function(a){throw c.debug("An error occured while trying to write in localStorage: "+a.toString()),a}).orElse(function(){return a.Cookie.setAndExpireInOneYear(b,d).recover(function(a){throw c.debug("An error occured while trying to set a cookie: "+a.toString()),a})}).map(function(){})}}(b=a.Store||(a.Store={}))}(teads||(teads={}));var teads;!function(a){var b=function(){function b(){this.logger=new a.Logger("Sumologic"),this.logStorage=[],this.initialized=!1}return b.prototype.init=function(c,d,e,f){return void 0===e&&(e=null),void 0===f&&(f=null),this.initialized?void this.logger.warn("Sumologic instance already initialized, aborting."):(this.config=c,this.sessionId=d.getOrElse(function(){return a.StringHelper.rand(10,!1)}),b.version=e||b.version,this.sampling=f||b.SAMPLING_RATE,this.logSender=new a.LogSender(this.config.collector,this.config.formattingType),this.logger.debug("Sumologic init with sessionId="+this.sessionId+", sampling="+this.sampling),this.initialized=!0,void this.unstackLogStorage())},b.prototype.isInitialized=function(){return this.initialized},b.prototype.getSessionId=function(){return this.initialized?this.sessionId:null},b.prototype.sendMetadata=function(a,b,c){void 0===b&&(b={}),this.initialized?this.send(this.config.logLevels.METADATA,a,b,c):this.logStorage.push(["sendMetadata",arguments])},b.prototype.sendError=function(a,b,c){void 0===b&&(b={}),this.initialized?this.send(this.config.logLevels.ERROR,a,b,c):this.logStorage.push(["sendError",arguments])},b.prototype.sendWarning=function(a,b,c){void 0===b&&(b={}),this.initialized?this.send(this.config.logLevels.WARNING,a,b,c):this.logStorage.push(["sendWarning",arguments])},b.prototype.sendInfo=function(a,b,c){void 0===b&&(b={}),this.initialized?this.send(this.config.logLevels.INFO,a,b,c):this.logStorage.push(["sendInfo",arguments])},b.prototype.send=function(a,b,c,d){if(void 0===c&&(c={}),this.initialized){var e=this.getLogPrefix(this.config.prefixPattern,a,this.sessionId,c),f=this.logSender.format(b);this.canSend(d)?(this.logger.debug("Sent to collector",e,b),this.logSender.track(f,e)):this.logger.debug("Did not send to collector (sampling)",e,b)}else this.logger.warn("Could not send logs, Sumologic instance not initialized."),this.logStorage.push(["send",arguments])},b.prototype.sendRaw=function(a,b){this.initialized?this.canSend(b)?(this.logger.debug("Sent to collector",a),this.logSender.track(a)):this.logger.debug("Did not send to collector (sampling)",a):(this.logger.warn("Could not send logs, Sumologic instance not initialized."),this.logStorage.push(["sendRaw",arguments]))},b.prototype.setAdType=function(a){b.adType=a},b.prototype.canSend=function(a){return void 0===a&&(a=this.sampling),b.RANDOM<=a},b.prototype.unstackLogStorage=function(){var b=this;a.ArrayHelper.forEach(this.logStorage,function(a){return b[a[0]].apply(b,a[1])}),this.logStorage=[]},b.prototype.getLogPrefix=function(c,d,e,f){var g={level:d,timestamp:b.version+"|"+a.Context.getFullContext()+"|"+b.adType,sessionId:e};f=a.Utils.extend(g,f);var h=c;for(var i in f)f.hasOwnProperty(i)&&(h=h.replace(i,f[i]));return h},b.SAMPLING_RATE=.05,b.RANDOM=Math.random(),b.COLLECTORS={FORMAT:"https://endpoint2.collection.sumologic.com/receiver/v1/http/ZaVnC4dhaV3tMuL-jxvu514sKTR1JLPJH0zZLzvxn3qMwWPdO_mBRbSGTyZgi2P4CqAJ4tfCX6IriPgecDkMFRxDm1GAGUben7xo9S92iY-h9z-o4eCwqg==",PLAYER:"https://endpoint2.collection.sumologic.com/receiver/v1/http/ZaVnC4dhaV2OstA92K8Xbj_kskBs5tjvp3fnz5Kd87xTE6v-AevmCgsG9SX_kqjlNgr2zKEpTQZWkuy61qzMee2njNfpDU2z7EIYjtXb-wRLLbHhGRVIOg==",ROUTER:"https://endpoint2.collection.sumologic.com/receiver/v1/http/ZaVnC4dhaV0yoMPXbPr1DHlBdbxeDuo3K5k3sGyLYmTOy4VGTwjLazFajGH6fqEKM4WlaPVtnZSCp4oebZS2mDiHAfUyzLxdRx_1JbayoNzbvQ26FTVmqQ=="},b.PREFIX_PATTERNS={CLASSIC:"[timestamp][sessionId][level] ",LIGHT:"sessionId>type>subtype>level>pid "},b.LOG_LEVELS={CLASSIC:{INFO:"info",METADATA:"metadata",WARNING:"warning",ERROR:"error"},LIGHT:{INFO:"info",METADATA:"meta",WARNING:"warn",ERROR:"err"}},b.CONFIGS={FORMAT:{collector:b.COLLECTORS.FORMAT,prefixPattern:b.PREFIX_PATTERNS.CLASSIC,logLevels:b.LOG_LEVELS.CLASSIC,formattingType:a.LogSender.FORMATTING_TYPES.JSON},PLAYER:{collector:b.COLLECTORS.PLAYER,prefixPattern:b.PREFIX_PATTERNS.CLASSIC,logLevels:b.LOG_LEVELS.CLASSIC,formattingType:a.LogSender.FORMATTING_TYPES.JSON},ROUTER:{collector:b.COLLECTORS.ROUTER,prefixPattern:b.PREFIX_PATTERNS.CLASSIC,logLevels:b.LOG_LEVELS.CLASSIC,formattingType:a.LogSender.FORMATTING_TYPES.JSON}},b.version="",b.adType="",b}();a.Sumologic=b}(teads||(teads={}));var teads;!function(a){var b=function(){function b(){}return b.safeUrl=function(a){var b=document.createElement("a");return b.href=a,window.swInstalled&&/(teads|ebu?z)/.test(b.hostname)?"/"+btoa(a).replace(/=/g,"_"):a},b.parse=function(a){var b=document.createElement("a");return b.href=a,{href:b.href,protocol:b.protocol,hostname:b.hostname,port:b.port,pathname:b.pathname,search:b.search,hash:b.hash,host:b.host}},b.parseQueryString=function(b){var c={};return"string"!=typeof b?c:(b=a.StringHelper.trim(b).replace(/^(\?|&)/,""))?(a.ArrayHelper.forEach(b.split("&"),function(a){var b=a.split("="),d=b.shift();c[d]=b.length>0?b.join("="):void 0}),c):c},b.isInternalUrl=function(a){return/teads\.(tv|net|tech)$/.test(b.parse(a).hostname)},b.getMainDomain=function(b){var c=["uk"],d=b.split("."),e=d.length>1?d[d.length-2]:b;return a.ArrayHelper.includes(c,d[d.length-1])&&(e=d[d.length-3]),e},b}();a.URIHelper=b}(teads||(teads={}));var teads;!function(a){var b=function(){function b(c,d,e){var f=this;if(this.win=c,this.onVisible=d,this.onHidden=e,this.prefixes=["","webkit","ms","moz"],this.props=["VisibilityState","visibilitychange","Hidden"],this.isInitialState=!0,this.enabled=!0,this.isAmpVisible=!0,this.eventTimeout=null,this.intervalIABSafeFrame=null,this.intervalFocus=null,this.windows=[],b.logger.debug("init"),this.eventListenerManager=new a.DOMEventListenerManager,a.Context.isAmp()){b.logger.debug("Init AMP visibility plugin");var g=function(a){window.context.hidden&&f.isAmpVisible?(b.logger.debug("AMP visibility, window is hidden, call hidden callback"),f.isAmpVisible=!1,f.onHiddenCallback()):window.context.hidden||f.isAmpVisible||(b.logger.debug("AMP visibility, window is visible, call visibile callback"),f.isAmpVisible=!0,f.onVisibleCallback())};return void this.eventListenerManager.add("amp:visibilitychange",window,g)}if(a.Context.isIABSafeFrame()){var h,i=!0;return void(this.intervalIABSafeFrame=setInterval(function(){h=f.isVisible(),h&&!i?(i=!0,f.onVisibleCallback()):!h&&i&&(i=!1,f.onHiddenCallback())},500))}this.prefix=this.getPrefix(),this.addWindow(this.win),this.visibleWindow=this.win}return b.listenWindow=function(a,c,d){return new b(a,c,d)},b.prototype.destroy=function(){var c=this;try{if(a.Context.isAmp())return void this.eventListenerManager.remove("amp:visibilitychange");a.Context.isIABSafeFrame()&&clearInterval(this.intervalIABSafeFrame),clearInterval(this.intervalFocus),this.eventListenerManager.removeAll(),a.ArrayHelper.forEach(this.windows,function(a){a.focus(),c.removeWindow(a,!1)}),b.logger.debug("destroy")}catch(a){b.logger.error("Visibility could not be fully destroyed.",a)}finally{this.disable(),this.windows=[]}},b.prototype.enable=function(){this.enabled=!0},b.prototype.disable=function(){this.enabled=!1},b.prototype.isEnabled=function(){return this.enabled},b.prototype.isVisible=function(){var b;return b=a.Context.isAmp()?this.isAmpVisible:a.Context.isIABSafeFrame()?window.$sf.ext.winHasFocus?window.$sf.ext.winHasFocus():!document.hidden:!!this.visibleWindow},b.prototype.addWindow=function(b){var c=this;a.ArrayHelper.indexOf(this.windows,b)===-1&&(this.windows.push(b),this.addListener(b,function(){return c.setWindowVisible(b)},function(){return c.setWindowHidden(b)}))},b.prototype.removeWindow=function(b,c,d){if(void 0===c&&(c=!0),void 0===d&&(d=!0),a.ArrayHelper.indexOf(this.windows,b)>-1){var e=this.isVisible();d&&this.windows.splice(a.ArrayHelper.indexOf(this.windows,b),1),c&&e&&!this.isVisible()&&this.onHiddenCallback()}},b.prototype.getWindows=function(){return this.windows},b.prototype.addListener=function(c,d,e){var f=this;try{var g=c.document;if(this.prefixesSupported(g)){var h=function(){g[f.getPrefixedMethodName(f.props[2])]?e():d()};this.eventListenerManager.add(this.getPrefixedMethodName(this.props[1]),g,h)}else if(g.hasFocus)b.logger.debug("Add listener on hasFocus method with an interval of 100ms"),clearInterval(this.intervalFocus),this.intervalFocus=setInterval(function(){g.hasFocus()?d():e()},100);else{var i=a.HTMLHelper.findParentWindows(this.win.document.body).concat(a.HTMLHelper.findChildWindows(this.win.document.body,!0));a.ArrayHelper.forEach(i,function(a){f.addWindow(a)}),b.logger.debug("Add listener on focus and blur events");var j=function(a){b.logger.debug("Exec callback visible"),d()},k=function(a){b.logger.debug("Exec callback hidden"),c===a.target&&e()};c.tt_visibility_visible=j,c.tt_visibility_hidden=k,c.hasOwnProperty("onpageshow")&&(this.eventListenerManager.add("pageshow",c,function(a){b.logger.debug("pageshow event received"),j(a)}),this.eventListenerManager.add("pagehide",c,function(a){b.logger.debug("pagehide event received"),k(a)})),this.eventListenerManager.add("focus",c,function(a){b.logger.debug("focus event received"),clearTimeout(f.eventTimeout),j(a)}),this.eventListenerManager.add("blur",c,function(a){b.logger.debug("blur event received"),f.eventTimeout=setTimeout(function(){k(a)},10)})}}catch(a){}},b.prototype.setWindowVisible=function(a){this.isInitialState||this.isVisible()||(this.visibleWindow=a,b.logger.debug("onVisible callback exec"),this.onVisibleCallback())},b.prototype.setWindowHidden=function(c){this.isInitialState=!1,a.Context.isIABSafeFrame()&&this.isVisible()||this.isVisible()&&(this.visibleWindow=null,b.logger.debug("onHidden callback exec"),this.onHiddenCallback())},b.prototype.onVisibleCallback=function(){this.enabled&&this.onVisible()},b.prototype.onHiddenCallback=function(){this.enabled&&this.onHidden()},b.prototype.getPrefixedMethodName=function(b,c){var d=this;return a.Option.of(c).orElse(function(){return a.Option.of(d.prefix)}).match({some:function(a){return a+b},none:function(){return b.toLowerCase()}})},b.prototype.getPrefix=function(a){a||(a=window.document);for(var b=0,c=this.prefixes.length;b<c;b++){var d=this.getPrefixedMethodName(this.props[2],this.prefixes[b]);if(null!==a[d]&&void 0!==a[d])return this.prefixes[b]}},b.prototype.prefixesSupported=function(b){var c=this;if(a.Context.isDesktop())return!1;var d=!1;return a.ArrayHelper.forEach(this.props,function(a){d=d||c.getPrefixedMethodName(a,c.prefix)in b}),d},b.logger=new a.Logger("Visibility"),b}();a.Visibility=b}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b;!function(a){a[a.CANVAS=0]="CANVAS",a[a.HTML5=1]="HTML5",a[a.ANY=2]="ANY"}(b=a.PLAYER_TYPE||(a.PLAYER_TYPE={}))}(b=a.player||(a.player={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b=function(){function a(a,b){void 0===b&&(b=null),this.type=a,this.data=b}return a.AdLoaded="AdLoaded",a.AdStarted="AdStarted",a.AdStopped="AdStopped",a.AdSkipped="AdSkipped",a.AdLinearChange="AdLinearChange",a.AdSizeChange="AdSizeChange",a.AdExpandedChange="AdExpandedChange",a.AdSkippableStateChange="AdSkippableStateChange",a.AdRemainingTimeChange="AdRemainingTimeChange",a.AdDurationChange="AdDurationChange",a.AdVolumeChange="AdVolumeChange",a.AdImpression="AdImpression",a.AdVideoStart="AdVideoStart",a.AdVideoFirstQuartile="AdVideoFirstQuartile",a.AdVideoMidpoint="AdVideoMidpoint",a.AdVideoThirdQuartile="AdVideoThirdQuartile",a.AdVideoComplete="AdVideoComplete",a.AdClickThru="AdClickThru",a.AdInteraction="AdInteraction",a.AdUserAcceptInvitation="AdUserAcceptInvitation",a.AdUserMinimize="AdUserMinimize",a.AdUserClose="AdUserClose",a.AdPaused="AdPaused",a.AdPlaying="AdPlaying",a.AdLog="AdLog",a.AdError="AdError",a}();a.VPAIDEvent=b}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b;!function(a){a[a.UNLOADED=-1]="UNLOADED",a[a.READY=0]="READY",a[a.LOADING=1]="LOADING",a[a.LOADED=2]="LOADED"}(b=a.LoaderStatus||(a.LoaderStatus={}))}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b;!function(a){a[a.SWF=1]="SWF",a[a.JS=2]="JS",a[a.POSTMESSAGE=3]="POSTMESSAGE"}(b=a.CreativeType||(a.CreativeType={}))}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function b(b,c){this.container=b,this.config=c,this.logger=new a.Logger("vpaid.BaseVPAIDContainer"),this.backgroundColor="#000000",this.id=c.id||a.StringHelper.rand(20,!1)}return b.prototype.setBackground=function(a){this.backgroundColor=a},b.prototype.destroy=function(){try{!this.isDetroyed&&this.creativeContainer?(this.isDetroyed=!0,this.creativeContainer.parentNode.removeChild(this.creativeContainer),this.creativeContainer=null,this.vpaid=null):this.isDetroyed&&this.logger.error("Cannot call destroy twice !")}catch(a){this.logger.error("unable to remove VPAID creative container: "+a)}},b.prototype.getVPAID=function(){return this.logger.info("getVPAIDAd - Retrieve ad from creative"),this.vpaid},b.prototype.getCreativeContainer=function(){return this.creativeContainer},b}();b.BaseVPAIDContainer=c}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b=function(){function a(){}return a.initAd=8e3,a.startAd=8e3,a.stopAd=1e3,a.skipAd=1e3,a.loadVpaid=1e4,a.postMessageAPI=5e3,a.destroy=500,a}();a.Timeout=b}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b=function(){function a(){}return a.SUCCESS_CALLBACK_ERROR={id:100,message:"callback success function throw an exception "},a.BUNDLE_ASSET_NOT_EXISTING={id:200,message:"You must specify the bundle asset you want to use with teads.vpaid.BundledContainer.(CANVAS|VIDEO)"},a.POSTMESSAGE_SERVER_TIMEOUT={id:300,message:"Postmessage server iframe timeout"},a.POSTMESSAGE_API_NOT_READY={id:301,message:"API is not ready, before use loadVpaid, you must init the API with the method initAPI"},a.POSTMESSAGE_LOAD_VPAID_TIMEOUT={id:302,message:"Timeout Error : Unable to load vpaid , server timeout"},a.GETVPAIDAD_EXCEPTION={id:400,message:"VPAIDJS getVPAIDAd throw an exception"},a.LOAD_VPAID_FILE_NOT_FOUND={id:500,message:"Unable to load VPAID ad, file doesn't exists"},a.LOAD_VPAID_TIMEOUT={id:501,message:"Unable to load VPAID ad, timeout error"},a.FLASH_PLUGIN_MISSING={id:600,message:"unable to load swf mediafile, Flash plugin is missing"},a.FLASH_IO_ERROR={id:601,message:"flash throw an IOError when loading swf"},a.FLASH_SECURITY_ERROR={id:602,message:"flash throw SecurityError, possibly due to crossdomain policy configuration"},a.FLASH_INIT_ERROR={id:603,message:"flash throw an exception while wrapping the vpaid file"},a.FLASH_UNKNOWN_ERROR={id:604,message:"flash throw an error"},a}();a.ErrorCode=b}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(c){function d(){return null!==c&&c.apply(this,arguments)||this}return __extends(d,c),d.prototype.loadVpaid=function(c,d,e){var f=this;this.url=c,this.mainContainer=document.createElement("div"),this.mainContainer.style.position="relative",this.container.appendChild(this.mainContainer),this.creativeContainer=a.HTMLHelper.createIframe(),this.creativeContainer.id="vpaid-"+this.id,this.mainContainer.appendChild(this.creativeContainer);var g=a.HTMLHelper.getWindow(this.mainContainer),h=!1,i=function(a){g[f.callbackName]=function(){},e(a),f.destroy()};this.callbackName="vpaidjsload_"+this.id,g[this.callbackName]=function(a){if(h=!0,clearTimeout(f.loadTimeoutId),g[f.callbackName]=function(){},a){try{f.vpaid=f.creativeContainer.contentWindow.getVPAIDAd()}catch(a){var c=b.ErrorCode.GETVPAIDAD_EXCEPTION;return c.message+=" "+a,i(c)}f.logger.info("getVPAIDAd - Retrieve ad from creative"),f.creativeContainer.contentWindow.teads=f.creativeContainer.contentWindow.teads||{},f.creativeContainer.contentWindow.teads.api=f.config.api,
d(f.vpaid)}else i(b.ErrorCode.LOAD_VPAID_FILE_NOT_FOUND)};var j='<!DOCTYPE html><html><body style="margin:0px;padding:0px;overflow:hidden"><script async>var target = window.parent;var script = document.createElement("script");script.onload = function() { target["'+this.callbackName+'"](true);};script.onerror = function() { target["'+this.callbackName+'"](false);};script.src="'+c+'";script.async=true;document.body.appendChild(script);</script><div id="video-container" style="position:absolute;top:0px;left:0px;z-index:1;background-color:'+this.backgroundColor+'"></div><div id="vpaid-container" style="position:absolute;top:0px;left:0px;z-index:2"></div></body></html>';this.creativeContainer.contentWindow.document.write(j),this.creativeContainer.contentWindow.document.close(),this.vpaidContainer=this.creativeContainer.contentWindow.document.getElementById("vpaid-container"),this.videoContainer=this.creativeContainer.contentWindow.document.getElementById("video-container"),this.loadTimeoutId=setTimeout(function(){h||i(b.ErrorCode.LOAD_VPAID_TIMEOUT)},b.Timeout.loadVpaid)},d.prototype.getEnvironmentVars=function(c){var d=this;if(!this.environmentVars){var e,f=this.vpaidContainer;this.config.useCustomVideo?(this.creativeContainer.contentWindow.document.registerElement||(this.creativeContainer.contentWindow.document.registerElement=document.registerElement),this.creativeContainer.contentWindow.teads=this.creativeContainer.contentWindow.teads||a,this.creativeContainer.contentWindow.teads.video=a.video,e=new this.creativeContainer.contentWindow.teads.video.HTMLVideoCanvas,e.addEventListener(a.video.dom.MediaEvent.error,function(c){if(d.logger.error("receive video error event",c,e.error),d.callback){d.logger.debug("callback ready to handle video error");var f="unknow video error";e.error&&e.error.code===a.video.constant.MediaError.MEDIA_ERR_NETWORK&&(f="MediaProxy not ready"),d.logger.error(f),d.callback(new b.VPAIDEvent(b.VPAIDEvent.AdError,{message:f,id:a.VastException.UNSUPPORTED_MEDIAFILE.id}))}else d.logger.error("callback not ready to handle video error")},!1)):(e=this.creativeContainer.contentWindow.document.createElement("video"),e.setAttribute("webkit-playsinline","true"),e.setAttribute("playsinline","true"),e.setAttribute("muted","true"),a.Context.isAndroid()&&a.Context.isChromeWebView()&&e.setAttribute("poster",a.Constant.base64TransparentPixel));try{if(this.config.useCustomVideo||a.Context.isWhiteListedIos10Safari()){window.originalCreateElement=this.creativeContainer.contentDocument.createElement;var g=this;this.creativeContainer.contentDocument.createElement=function(b){try{return"video"===b.toLowerCase()?(g.logger.debug("createElement overriden for",b),e):window.originalCreateElement.call(g.creativeContainer.contentDocument,b)}catch(b){try{a.player.playerSumologic.sendInfo("Issue using createElement "+(b.message||b))}catch(a){}}}}}catch(b){try{a.player.playerSumologic.sendInfo("Issue override createElement "+(b.message||b))}catch(a){}}var h=[/^((http|https)\:){0,1}\/\/.*\.moatads\.com\/[^\/]*\/moatwrapper\.js.*/,/^((http|https)\:){0,1}\/\/.*\.measuread\.com\/.*\.js.*/,/^((http|https)\:){0,1}\/\/.*\.serving\-sys\.com\/.*\/.*VPAIDAPI\.js$/,/^((http|https)\:){0,1}\/\/.*\.lkqd\.net\/vpaid\/.*\.js.*/],i=function(){d.videoContainer.appendChild(e),d.resize(d.currentWidth,d.currentHeight)};this.config.appendVideoToDOM?i():this.url&&this.videoContainer&&a.ArrayHelper.forEach(h,function(a){a.test(d.url)&&i()}),e.addEventListener("playing",function(){e.parentNode||i()});var j={slot:f,videoSlot:e,videoSlotCanAutoPlay:!0};c||(c=j);for(var k in j)c[k]||(c[k]=j[k]);this.environmentVars=c,this.environmentVars.slot!==f&&(this.mainContainer.style.display="none")}return this.environmentVars},d.prototype.destroy=function(){c.prototype.destroy.call(this),this.mainContainer&&this.mainContainer.parentNode&&(this.mainContainer.parentNode.removeChild(this.mainContainer),this.mainContainer=null,this.videoContainer=null)},d.prototype.resize=function(a,b){if(this.currentWidth=a,this.currentHeight=b,this.mainContainer&&(this.mainContainer.style.width=a+"px",this.mainContainer.style.height=b+"px"),this.creativeContainer&&(this.creativeContainer.style.setProperty("width",a+"px","important"),this.creativeContainer.style.setProperty("height",b+"px","important")),this.videoContainer){this.videoContainer.style.width=a+"px",this.videoContainer.style.height=b+"px";var c=this.videoContainer.getElementsByTagName("video")[0];c&&(c.width=a,c.height=b,c.style.width=a+"px",c.style.height=b+"px")}this.vpaidContainer&&(this.vpaidContainer.style.width=a+"px",this.vpaidContainer.style.height=b+"px")},d.prototype.setBackground=function(a){c.prototype.setBackground.call(this,a),this.videoContainer&&(this.videoContainer.style.backgroundColor=this.backgroundColor)},d.prototype.getType=function(){return b.CreativeType.JS},d.prototype.registerVPAIDEventHandler=function(a){this.callback=a;for(var c in b.VPAIDEvent)this.vpaid.subscribe(b.VPAIDHelper.createVPAIDEventCallback(a,c),c,this);for(var c in b.CustomVPAIDEvent)this.vpaid.subscribe(b.VPAIDHelper.createVPAIDEventCallback(a,c),c,this)},d}(b.BaseVPAIDContainer);b.VPAIDJSContainer=c}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){a.asset={vpaidswfwrapper:"vpaidwrapper.swf",sandbox:"vpaid-sandbox.html"}}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(c){function d(){return null!==c&&c.apply(this,arguments)||this}return __extends(d,c),d.prototype.loadVpaid=function(c,d,e){var f=this;if(!a.FlashHelper.hasFlash())return e(b.ErrorCode.FLASH_PLUGIN_MISSING);var g=!1,h=!1,i=function(b){if(!h)try{a.player.playerSumologic.sendInfo("wrapper ko",{},!0)}catch(a){}e(b),f.destroy()};this.callbackName="handleVPAIDEvent"+this.id,this.window=a.HTMLHelper.getWindow(this.container),this.window[this.callbackName]=function(a){return"wrapper"===a.type?void(h=!0):(g=!0,clearTimeout(f.loadTimeoutId),f.window[f.callbackName]=function(){},"ready"===a.type?(f.vpaid=f.creativeContainer,d(f.vpaid),void f.logger.info("getVPAIDAd - Retrieve ad from creative")):void("error"===a.type&&i(a.data)))};var j="vpaid-"+this.id,k=this.config.path+"/"+b.asset.vpaidswfwrapper;this.container.innerHTML='<object data="'+k+'" type="application/x-shockwave-flash" name="'+j+'" id="'+j+'" style="border:0px;width:100%;height:1px;margin:0px;padding:0px" width="100%" height="100%"><param name="id" value="'+j+'" /><param name="name" value="'+j+'" /><param name="movie" value="'+k+'" /><param name="bgcolor" value="#000000" /><param name="quality" value="high" /><param name="allowFullScreen" value="true" /><param name="allowScriptAccess" value="always" /><param name="wmode" value="transparent" /><param name="flashvars" value="debug='+this.config.debug+"&eventHandler="+this.callbackName+"&url="+encodeURIComponent(c)+'" /></object>',this.creativeContainer=this.window.document.getElementById(j),this.loadTimeoutId=setTimeout(function(){g||i(b.ErrorCode.LOAD_VPAID_TIMEOUT)},b.Timeout.loadVpaid)},d.prototype.setBackground=function(a){if(c.prototype.setBackground.call(this,a),this.creativeContainer)for(var b=this.creativeContainer.getElementsByTagName("param"),d=0;d<b.length;d++)"bgcolor"===b[d].name&&(b[d].value=this.backgroundColor)},d.prototype.destroy=function(){c.prototype.destroy.call(this),this.window[this.callbackName]=function(){}},d.prototype.registerVPAIDEventHandler=function(a){this.window[this.callbackName]=a},d.prototype.resize=function(){},d.prototype.getEnvironmentVars=function(a){return{slot:this.creativeContainer,videoSlot:null,videoSlotCanAutoPlay:!0}},d.prototype.getType=function(){return b.CreativeType.SWF},d}(b.BaseVPAIDContainer);b.VPAIDSWFContainer=c}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b=function(){function a(){}return a.prototype.getVPAID=function(){return this.vpaid},a.prototype.initAd=function(a,b,c,d,e,f){this.vpaidguard("initAd",[a,b,c,d,e,f])},a.prototype.skipAd=function(){this.vpaidguard("skipAd")},a.prototype.resizeAd=function(a,b,c){void 0===c&&(c="normal"),this.vpaidguard("resizeAd",[a,b,c])},a.prototype.handshakeVersion=function(a){return this.vpaidguard("handshakeVersion",[a])},a.prototype.startAd=function(){this.vpaidguard("startAd",[])},a.prototype.stopAd=function(){this.vpaidguard("stopAd",[])},a.prototype.pauseAd=function(){this.vpaidguard("pauseAd",[])},a.prototype.resumeAd=function(){this.vpaidguard("resumeAd",[])},a.prototype.expandAd=function(){this.vpaidguard("expandAd",[])},a.prototype.collapseAd=function(){this.vpaidguard("collapseAd",[])},a.prototype.getAdLinear=function(){return this.vpaidguard("getAdLinear",[])},a.prototype.getAdWidth=function(){return this.vpaidguard("getAdWidth",[])},a.prototype.getAdHeight=function(){return this.vpaidguard("getAdHeight",[])},a.prototype.getAdExpanded=function(){return this.vpaidguard("getAdExpanded",[])},a.prototype.getAdSkippableState=function(){return this.vpaidguard("getAdSkippableState",[])},a.prototype.getAdRemainingTime=function(){return this.vpaidguard("getAdRemainingTime",[])},a.prototype.getAdDuration=function(){return this.vpaidguard("getAdDuration",[])},a.prototype.getAdVolume=function(){return this.vpaidguard("getAdVolume",[])},a.prototype.getAdCompanions=function(){return this.vpaidguard("getAdCompanions",[])},a.prototype.getAdIcons=function(){return this.vpaidguard("getAdIcons",[])},a.prototype.setAdVolume=function(a){return this.vpaidguard("setAdVolume",[a])},a.prototype.subscribe=function(a,b,c){this.vpaidguard("subscribe",[a,b,c])},a.prototype.unsubscribe=function(a,b){this.vpaidguard("unsubscribe",[a,b])},a.prototype.setVPAID=function(a){this.vpaid=a},a.prototype.vpaidguard=function(a,b){void 0===b&&(b=[]);try{return this.callVPAIDMethod(a,b)}catch(a){}},a.prototype.callVPAIDMethod=function(a,b){return void 0===b&&(b=[]),this.vpaid[a].apply(this.vpaid,b)},a}();a.VPAIDJSGuard=b}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function c(a,b,c){void 0===c&&(c="*"),this.currentWindow=a,this.targetWindow=b,this.domain=c}return c.prototype.setClientCallback=function(a){var b=this;this.setCallback(function(c){var d=b.parseEvent(c);a(d)})},c.prototype.setServerCallback=function(a){var b=this;this.setCallback(function(c){a(b.parse(c))})},c.prototype.removeCallback=function(){this.currentWindow.removeEventListener("message",this.callback,!1)},c.prototype.dispatchEvent=function(a,b){this.post(this.targetWindow,this.stringify(a,b))},c.prototype.callMethod=function(a,b){this.post(this.targetWindow,this.stringify(a,b))},c.prototype.parseEvent=function(a){var c=this.parse(a);return new b.VPAIDEvent(c.name,c.data)},c.prototype.post=function(a,b){a.postMessage(b,this.domain)},c.prototype.stringify=function(b,d){var e=b+c.splitChar+(void 0!==d?a.Base64.encode(a.JSON.stringify(d)):"");return e},c.prototype.parse=function(b){var d,e=b.data.split(c.splitChar),f=e[0];return e[1]&&(d=a.JSON.parse(a.Base64.decode(e[1]))),{name:f,data:d}},c.prototype.setCallback=function(a){var b=this;this.callback=function(c){c.source===b.targetWindow&&"string"==typeof c.data&&a(c)},this.currentWindow.addEventListener("message",this.callback,!1)},c.splitChar="_",c}();b.PostMessage=c}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function c(d,e){var f=this;this.container=d,this.assetPath=e,this.logger=new a.Logger("vpaid.PostMessageServer"),this.timerDelay=250,this.logger.debug("Init postMessageAPI",d),this.window=window,this.postMessage=new b.PostMessage(window,window.parent),this.postMessage.setServerCallback(function(a){f.callMethod(a.name,a.data)}),this.postMessage.dispatchEvent(c.READY_EVENT),this.logger.debug("End Init postMessageAPI",d,window,window.parent)}return c.prototype.callMethod=function(a,d){switch(this.logger.debug("call method "+a,d),a){case b.PostMessageClient.LOADVPAID_METHOD:return this.loadVpaid(d[0]);case b.PostMessageClient.SETCONFIG_METHOD:this.config=d[0],this.logger.debug("Received configuration Object",this.config),this.config.sandbox=!1,this.config.path=this.assetPath,this.postMessage.dispatchEvent(c.CONFIGREADY_EVENT);break;default:this.callVPAIDMethod(a,d)}},c.prototype.callVPAIDMethod=function(a,c){try{return this.vpaid[a].apply(this.vpaid,c)}catch(e){var d="Error calling methog "+a+"("+c+")";this.postMessage.dispatchEvent(b.VPAIDEvent.AdLog,d),this.logger.error(d)}},c.prototype.loadVpaid=function(a){var d=this,e=new b.VPAIDLoader(this.container,this.config);e.load(a,function(a){d.logger.debug("VPAID Loaded !",a),d.vpaid=a;var e=function(a){return function(){for(var c=[],e=0;e<arguments.length;e++)c[e]=arguments[e];a===b.VPAIDEvent.AdStopped&&clearInterval(d.timerId),d.postMessage.dispatchEvent(a,c)}};for(var f in b.VPAIDEvent)d.vpaid.subscribe(e(f),f);d.postMessage.dispatchEvent(c.VPAIDLOADED_EVENT),d.sendGettersValues(),d.timerId=setInterval(function(){d.sendGettersValues()},d.timerDelay)},function(a){d.postMessage.dispatchEvent(c.VPAIDLOADEDERROR_EVENT,[a]),d.logger.error("PostMessageServer : Unable to load VPAID "+a.message)})},c.prototype.sendGettersValues=function(){var a=this,d={};b.PostMessageClient.getters.forEach(function(b){d[b]=a.callVPAIDMethod(b,[])}),this.postMessage.dispatchEvent(c.ATTRIBUTE_EVENT,d)},c.READY_EVENT="ready",c.CONFIGREADY_EVENT="configReady",c.VPAIDLOADED_EVENT="vpaidLoaded",c.VPAIDLOADEDERROR_EVENT="vpaidLoadedError",c.ATTRIBUTE_EVENT="attributes",c}();b.PostMessageServer=c}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(a){var c=b.call(this)||this;return c.postMessage=a,c}return __extends(c,b),c.prototype.handshakeVersion=function(a){return"2.0"},c.prototype.initAd=function(b,c,d,e,f,g){void 0===f&&(f="");var h="object"==typeof f?a.JSON.stringify(f):f;this.callVPAIDMethod("initAd",[b,c,d,e,h])},c.prototype.subscribe=function(a,b,c){this.postMessage.subscribe(a,b,c)},c.prototype.unsubscribe=function(a,b){this.postMessage.unsubscribe(a,b)},c.prototype.callVPAIDMethod=function(a,b){void 0===b&&(b=[]),this.postMessage.callVPAIDMethod(a,b)},c}(b.VPAIDJSGuard);b.PostMessageVPAID=c}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b=function(){function a(){}return a.AdVideoMetadata="AdVideoMetadata",a.AdInjected="AdInjected",a}();a.CustomVPAIDEvent=b}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function c(){this.listeners={},this.listenersScope={}}return c.prototype.subscribe=function(a,b,c){this.listeners[b]=this.listeners[b]||[],this.listeners[b].push(a),this.listenersScope[b]=this.listenersScope[b]||[],this.listenersScope[b].push(c?c:null)},c.prototype.unsubscribe=function(b,c){if(this.listeners[c]){var d=a.ArrayHelper.indexOf(this.listeners[c],b);d>=0&&(this.listeners[c][d]=function(){})}},c.prototype.clearListeners=function(){this.listeners={},this.listenersScope={}},c.prototype.handleEvent=function(a,c){for(var d=this.listeners[a.type]||[],e=0,f=d.length;e<f;e++)try{var g=[];if(a.data)switch(a.type){case b.VPAIDEvent.AdClickThru:g=[a.data.url,a.data.id,!!a.data.playerHandles];break;case b.VPAIDEvent.AdLog:case b.VPAIDEvent.AdError:g="string"==typeof a.data?[a.data,null]:"object"==typeof a.data&&a.data.message?[a.data.message,a.data.id]:[String(a.data),null];break;case b.VPAIDEvent.AdInteraction:g=[a.data.id];break;case b.CustomVPAIDEvent.AdVideoMetadata:g=[a.data]}d[e].apply(this.listenersScope[a.type][e],g)}catch(d){if(c)throw"failed to log error on callback: "+a.data;this.handleEvent({type:b.VPAIDEvent.AdLog,data:"Callback #"+e+" on event "+a.type+" throws an exception: "+d},!0)}},c}();b.EventHandler=c}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function c(c,d){this.config=d,this.vpaidAttribute={},this.logger=new a.Logger("vpaid.PostMessageClient"),this.eventHandler=new b.EventHandler,this.mainContainer=document.createElement("div"),this.mainContainer.style.position="relative",c.appendChild(this.mainContainer),this.iframeContainer=a.HTMLHelper.createIframe(),this.mainContainer.appendChild(this.iframeContainer),this.postMessage=new b.PostMessage(window,this.iframeContainer.contentWindow)}return c.prototype.initAPI=function(a,d,e){var f=this;this.logger.debug("init iframe API on url "+a);var g,h=function(a){a.type===b.PostMessageServer.READY_EVENT?(f.logger.debug("Got ready event from server !"),f.postMessage.callMethod(c.SETCONFIG_METHOD,[f.config])):a.type===b.PostMessageServer.CONFIGREADY_EVENT&&(f.logger.debug("Received configuration ready form server"),f.postMessage.removeCallback(),f.apiReady=!0,clearTimeout(g),d())};this.postMessage.setClientCallback(h),this.iframeContainer.src=a,g=setTimeout(function(){f.apiReady||(f.postMessage.removeCallback(),e(b.ErrorCode.POSTMESSAGE_SERVER_TIMEOUT),f.logger.error("server "+a+" didn't reply after "+b.Timeout.postMessageAPI+"ms"))},b.Timeout.postMessageAPI)},c.prototype.loadVpaid=function(a,d,e){var f=this;this.logger.debug("Request load VPAID "+a);var g;if(!this.apiReady)return this.logger.error("API is not ready, before use loadVpaid, you must init the API with the method initAPI"),e(b.ErrorCode.POSTMESSAGE_API_NOT_READY);var h=function(a){return a.type===b.PostMessageServer.VPAIDLOADED_EVENT?(f.logger.debug("received VPAID loaded from server!"),f.postMessage.removeCallback(),clearTimeout(g),f.onVpaidLoaded(d)):a.type===b.PostMessageServer.VPAIDLOADEDERROR_EVENT?(clearTimeout(g),e(a.data)):void 0};this.postMessage.setClientCallback(h),g=setTimeout(function(){f.postMessage.removeCallback(),e(b.ErrorCode.POSTMESSAGE_LOAD_VPAID_TIMEOUT),f.logger.error("Timeout Error : Unable to load vpaid "+a+", server did not reply after "+b.Timeout.postMessageAPI+"ms")},b.Timeout.postMessageAPI),this.postMessage.callMethod(c.LOADVPAID_METHOD,[a])},c.prototype.getVPAID=function(){return this.vpaid},c.prototype.callVPAIDMethod=function(a,b){return void 0===b&&(b=[]),c.getters.indexOf(a)>=0?this.vpaidAttribute[a]:this.postMessage.callMethod(a,b)},c.prototype.getIframeContainer=function(){return this.iframeContainer},c.prototype.subscribe=function(a,b,c){this.eventHandler.subscribe(a,b,c)},c.prototype.unsubscribe=function(a,b){this.eventHandler.unsubscribe(a,b)},c.prototype.onVpaidLoaded=function(a){var c=this;this.vpaid=new b.PostMessageVPAID(this),this.postMessage.setClientCallback(function(a){return a.type===b.PostMessageServer.ATTRIBUTE_EVENT?void(c.vpaidAttribute=a.data):void c.eventHandler.handleEvent(a)}),a(this.vpaid)},c.GETATTRIBUTESVALUES_METHOD="getAttributesValues",c.LOADVPAID_METHOD="loadVpaid",c.SETCONFIG_METHOD="setConfig",c.getters=["getAdWidth","getAdHeight","getAdDuration","getAdRemainingTime","getAdSkippableState","getAdLinear","getAdExpanded","getAdVolume"],c}();b.PostMessageClient=c}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}return __extends(c,b),c.prototype.loadVpaid=function(b,c,d){var e=this,f=new a.PostMessageClient(this.container,this.config);this.creativeContainer=f.getIframeContainer();var g=this.config.sandboxUrl||this.config.path+"/"+a.asset.sandbox;f.initAPI(g,function(){f.loadVpaid(b,function(a){e.vpaid=a,c(a)},d)},d)},c.prototype.getType=function(){return a.CreativeType.POSTMESSAGE},c}(a.VPAIDJSContainer);a.PostMessageContainer=b}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b=function(){function b(){}return b.isVPAID2=function(a){return Number(a.handshakeVersion("2.0"))>=2},b.createVPAIDEventCallback=function(b,c){return function(){for(var d=[],e=0;e<arguments.length;e++)d[e]=arguments[e];var f=d[0];switch(c){case a.VPAIDEvent.AdClickThru:f={url:d[0],id:d[1],playerHandles:d[2]};break;case a.VPAIDEvent.AdError:f={message:d[0],id:d[1]}}b({type:c,data:f})}},b.checkVpaidStatus=function(b,c){switch(b){case"initAd":if(c>=a.VpaidStatus.LOADING)throw"VPAID already initalized, cannot call initAd twice";break;case"startAd":if(c<a.VpaidStatus.LOADED)throw"VPAID not started, use initAd, and wait for AdLoaded event before call startAd method";if(c>=a.VpaidStatus.STARTING)throw"Ad already started, cannot call startAd twice"}},b}();a.VPAIDHelper=b}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){a.adManagerList=["vpaid-empty.swf","liverail.com/swf/v4/admanager.swf","teads.tv/swf/vpaid/vpaid-ad"]}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b=function(){function b(){}return b.isAdManager=function(b){for(var c=0;c<a.adManagerList.length;c++)if(b.indexOf(a.adManagerList[c])>-1)return!0;return!1},b}();a.AdManagerHelper=b}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b;!function(a){a[a.REMOVED=-6]="REMOVED",a[a.REMOVING=-5]="REMOVING",a[a.ERROR=-4]="ERROR",a[a.STOPPED=-3]="STOPPED",a[a.STOPPING=-2]="STOPPING",a[a.SKIPPED=-1]="SKIPPED",a[a.SKIPPING=0]="SKIPPING",a[a.READY=1]="READY",a[a.LOADING=2]="LOADING",a[a.LOADED=3]="LOADED",a[a.STARTING=5]="STARTING",a[a.STARTED=6]="STARTED",a[a.PAUSING=7]="PAUSING",a[a.PAUSED=8]="PAUSED",a[a.RESUMING=9]="RESUMING",a[a.PLAYING=10]="PLAYING",a[a.COMPLETE=11]="COMPLETE"}(b=a.VpaidStatus||(a.VpaidStatus={}))}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(c){function d(){var a=null!==c&&c.apply(this,arguments)||this;return a.status=b.VpaidStatus.READY,a.type=b.CreativeType.JS,a.timeoutId={},a.dispatchedEvents={},a.wigoi=null,a.eventHandler=new b.EventHandler,a}return __extends(d,c),d.log=function(b){a.ArrayHelper.indexOf(d.hasLogged,b)<0&&(d.logger.info(b),d.hasLogged.push(b))},d.prototype.initAd=function(a,d,e,f,g,h){void 0===g&&(g="");try{b.VPAIDHelper.checkVpaidStatus("initAd",this.status)}catch(a){return this.dispatchEvent(b.VPAIDEvent.AdLog,a)}this.status=b.VpaidStatus.LOADING,this.environmentVars=h,c.prototype.initAd.call(this,a,d,e,f,g,h)},d.prototype.handleAdCallTimeout=function(c){var d=this,e=b.Timeout.initAd-c,f=function(){d.dispatchedEvents[b.VPAIDEvent.AdLoaded]||d.dispatchEvent(b.VPAIDEvent.AdError,{message:"Creative did not initiated after "+b.Timeout.initAd+"ms (current status "+d.status+")",id:a.VastException.GENERAL.id})};if(!this.timeoutId.initAd&&e>0){try{a.player.playerSumologic.sendInfo("timeout adloaded "+e)}catch(a){}this.timeoutId.initAd=setTimeout(f,e)}else e<0&&f()},d.prototype.startAd=function(){var d=this;try{b.VPAIDHelper.checkVpaidStatus("startAd",this.status)}catch(a){return this.dispatchEvent(b.VPAIDEvent.AdLog,a)}this.status=b.VpaidStatus.STARTING,this.timeoutId.startAd=setTimeout(function(){d.dispatchedEvents[b.VPAIDEvent.AdStarted]||d.dispatchEvent(b.VPAIDEvent.AdError,{message:"Creative did not start after "+b.Timeout.startAd+"ms",id:a.VastException.GENERAL.id})},b.Timeout.startAd),c.prototype.startAd.call(this)},d.prototype.stopAd=function(){var a=this;this.status>b.VpaidStatus.STOPPING&&(this.status=b.VpaidStatus.STOPPING,this.clearAllTimeout(),this.timeoutId.stopAd=setTimeout(function(){a.dispatchedEvents[b.VPAIDEvent.AdStopped]||(a.dispatchEvent(b.VPAIDEvent.AdLog,"Creative did not stop after "+b.Timeout.stopAd+"ms, force stop !"),a.dispatchEvent(b.VPAIDEvent.AdStopped))},b.Timeout.stopAd),this.environmentVars&&this.environmentVars.videoSlot&&(this.environmentVars.videoSlot.volume=0),c.prototype.stopAd.call(this))},d.prototype.skipAd=function(){var a=this;if(this.status>b.VpaidStatus.SKIPPING){this.status=b.VpaidStatus.SKIPPING,this.timeoutId.skipAd=setTimeout(function(){a.status>=b.VpaidStatus.SKIPPING&&(a.dispatchEvent(b.VPAIDEvent.AdLog,"Creative did not skip after "+b.Timeout.skipAd+"ms, force skip !"),a.dispatchEvent(b.VPAIDEvent.AdSkipped),a.stopAd())},b.Timeout.skipAd);try{c.prototype.skipAd.call(this)}catch(a){this.dispatchEvent(b.VPAIDEvent.AdLog,"SkipAd throw an exception "+a)}}},d.prototype.subscribe=function(a,b,c){this.eventHandler.subscribe(a,b,c)},d.prototype.unsubscribe=function(a,b){this.eventHandler.unsubscribe(a,b)},d.prototype.getAdWidth=function(){var a=this.vpaid.getAdWidth();return String(a).indexOf("%")>-1?a=this.environmentVars.slot.offsetWidth:String(a).indexOf("px")&&(a=parseInt(String(a).replace("px",""),10)),a},d.prototype.getAdHeight=function(){var a=this.vpaid.getAdHeight();return String(a).indexOf("%")>-1||parseInt(String(a),10)<=0?a=this.environmentVars.slot.offsetHeight:String(a).indexOf("px")&&(a=parseInt(String(a).replace("px",""),10)),a},d.prototype.setWigoi=function(a){this.wigoi=a},d.prototype.vpaidguard=function(c,e){void 0===e&&(e=[]);try{if(this.status!==b.VpaidStatus.REMOVED)return this.callVPAIDMethod(c,e)}catch(e){switch(c){case"initAd":case"startAd":this.dispatchEvent(b.VPAIDEvent.AdError,{message:"error call "+c+": "+e,id:a.VastException.GENERAL.id});break;default:this.dispatchEvent(b.VPAIDEvent.AdLog,"error call "+c+": "+e)}d.logger.error("vpaidguard -> vpaid creative threw an error for "+c,e)}},d.prototype.dispatchEvent=function(a,c){return this.handleVpaidEvent(new b.VPAIDEvent(a,c))},d.prototype.handleVpaidEvent=function(c){if(this.status!==b.VpaidStatus.REMOVED){var e=[b.VPAIDEvent.AdLoaded,b.VPAIDEvent.AdStarted,b.VPAIDEvent.AdVideoStart,b.VPAIDEvent.AdVideoComplete,b.VPAIDEvent.AdSkipped,b.VPAIDEvent.AdStopped,b.VPAIDEvent.AdError];if(!(a.ArrayHelper.indexOf(e,c.type)>-1&&this.dispatchedEvents[c.type])){if(this.status>b.VpaidStatus.STOPPED)switch(c.type){case b.VPAIDEvent.AdLoaded:this.status=b.VpaidStatus.LOADED,this.clearTimeout("initAd"),d.log("AdLoaded - Response from initAd"),this.wigoi&&this.wigoi.valid(3,2);break;case b.VPAIDEvent.AdStarted:this.status=this.status<b.VpaidStatus.STARTED?b.VpaidStatus.STARTED:this.status,this.clearTimeout("startAd"),d.log("AdStarted - Response from startAd"),this.wigoi&&this.wigoi.valid(3,3);break;case b.VPAIDEvent.AdVideoStart:case b.VPAIDEvent.AdPlaying:this.status=b.VpaidStatus.PLAYING;break;case b.VPAIDEvent.AdPaused:this.status=b.VpaidStatus.PAUSED;break;case b.VPAIDEvent.AdVideoComplete:this.status=b.VpaidStatus.COMPLETE;break;case b.VPAIDEvent.AdSkipped:this.status=b.VpaidStatus.SKIPPED,this.clearAllTimeout();break;case b.VPAIDEvent.AdStopped:this.status=b.VpaidStatus.STOPPED,this.clearAllTimeout();break;case b.VPAIDEvent.AdError:d.logger.info("AdError - ",c.data),this.wigoi&&this.wigoi.valid(3,4,c.data,a.Wigo.infoType.ERROR)}this.dispatchedEvents[c.type]||(this.dispatchedEvents[c.type]=0),this.dispatchedEvents[c.type]++,this.eventHandler.handleEvent(c),c.type===b.VPAIDEvent.AdError&&this.stopAd()}}},d.prototype.clearTimeout=function(a){this.timeoutId[a]&&clearTimeout(this.timeoutId[a])},d.prototype.clearAllTimeout=function(){for(var a in this.timeoutId)this.timeoutId.hasOwnProperty(this.timeoutId[a])&&this.clearTimeout(this.timeoutId[a])},d.logger=new a.Logger("vpaid.BaseVPAIDJSWrapper"),d.hasLogged=[],d}(b.VPAIDJSGuard);b.BaseVPAIDJSWrapper=c}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(c){function d(a){var d=c.call(this)||this;return d.lastAdRemainingTime=-1,d.setVPAID(a.getVPAID()),d.type=a.getType(),d.container=a,d.container.registerVPAIDEventHandler(function(a){switch(a.type){case b.VPAIDEvent.AdRemainingTimeChange:case b.VPAIDEvent.AdDurationChange:return}d.handleVpaidEvent(a)}),d}return __extends(d,c),d.prototype.initAd=function(a,d,e,f,g,h){this.container.resize(a,d),this.type===b.CreativeType.JS&&"string"==typeof g&&(g={AdParameters:g}),c.prototype.initAd.call(this,a,d,e,f,g,this.type===b.CreativeType.JS?this.getEnvironmentVars(h):null)},d.prototype.setAdVolume=function(d){var e=this;if(this.environmentVars&&this.environmentVars.videoSlot){var f=function(c){c.type===a.video.dom.MediaEvent.volumechange&&e.dispatchEvent(b.VPAIDEvent.AdVolumeChange),a.Dom.removeEventListener(a.video.dom.MediaEvent.volumechange,e.environmentVars.videoSlot,f)};a.Dom.addEventListener(a.video.dom.MediaEvent.volumechange,this.environmentVars.videoSlot,f),this.environmentVars.videoSlot.volume=d,this.environmentVars.videoSlot.muted=!d}return c.prototype.setAdVolume.call(this,d),this.dispatchEvent(b.VPAIDEvent.AdVolumeChange),d},d.prototype.getAdVolume=function(){return this.environmentVars&&this.environmentVars.videoSlot&&void 0!==this.environmentVars.videoSlot.volume?this.environmentVars.videoSlot.muted?0:this.environmentVars.videoSlot.volume:c.prototype.getAdVolume.call(this)},d.prototype.resizeAd=function(a,b,d){this.isResizing=!0,this.container.resize(a,b),c.prototype.resizeAd.call(this,a,b,d)},d.prototype.getEnvironmentVars=function(a){return this.container.getEnvironmentVars(a)},d.prototype.handleVpaidEvent=function(a){var d=this;switch(a.type){case b.VPAIDEvent.AdSizeChange:this.isResizing||this.container.resize(this.getAdWidth(),this.getAdHeight()),this.isResizing=!1;break;case b.VPAIDEvent.AdStarted:this.startTimer();break;case b.VPAIDEvent.AdStopped:this.stopTimer()}c.prototype.handleVpaidEvent.call(this,a),this.status===b.VpaidStatus.STOPPED&&(this.status=b.VpaidStatus.REMOVING,setTimeout(function(){d.status=b.VpaidStatus.REMOVED,d.container.destroy()},b.Timeout.destroy))},d.prototype.startTimer=function(){var a=this;this.timerId||(this.timerId=setInterval(function(){var c=a.getAdRemainingTime();a.status<b.VpaidStatus.COMPLETE&&c>=0&&a.lastAdRemainingTime!==c&&(a.lastAdRemainingTime=c,a.dispatchEvent(b.VPAIDEvent.AdRemainingTimeChange),a.dispatchEvent(b.VPAIDEvent.AdDurationChange))},250))},d.prototype.stopTimer=function(){this.timerId&&clearInterval(this.timerId)},d}(b.BaseVPAIDJSWrapper);b.VPAIDWrapper=c}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b=function(b){function c(c){var d=b.call(this,c)||this;return d.adDuration=-2,d.isVpaid2=a.VPAIDHelper.isVPAID2(d.vpaid),d}return __extends(c,b),c.prototype.handshakeVersion=function(a){return"2.0"},c.prototype.initAd=function(c,d,e,f,g,h){this.adWidth=c,this.adHeight=d,this.dispatchEvent(a.VPAIDEvent.AdLog,"VPAID 1.0 creative"),b.prototype.initAd.call(this,c,d,e,f,g,h),this.isVpaid2=a.VPAIDHelper.isVPAID2(this.vpaid)},c.prototype.resizeAd=function(c,d,e){return this.adWidth=c,this.adHeight=d,this.isVpaid2?b.prototype.resizeAd.call(this,c,d,e):(b.prototype.resizeAd.call(this,c,d),void this.dispatchEvent(a.VPAIDEvent.AdSizeChange))},c.prototype.getAdWidth=function(){return this.adWidth},c.prototype.getAdHeight=function(){return this.adHeight},c.prototype.skipAd=function(){this.isVpaid2?b.prototype.skipAd.call(this):(this.dispatchEvent(a.VPAIDEvent.AdSkipped),this.stopAd())},c.prototype.getAdSkippableState=function(){return!!this.isVpaid2&&b.prototype.getAdSkippableState.call(this)},c.prototype.getAdIcons=function(){return!!this.isVpaid2&&b.prototype.getAdIcons.call(this)},c.prototype.getAdCompanions=function(){return this.isVpaid2?b.prototype.getAdCompanions.call(this):""},c.prototype.getAdDuration=function(){return this.isVpaid2?b.prototype.getAdDuration.call(this):this.adDuration},c.prototype.handleVpaidEvent=function(c){if(!this.isVpaid2)switch(c.type){case a.VPAIDEvent.AdRemainingTimeChange:this.getAdRemainingTime()>0&&(this.adDuration<=0||this.getAdRemainingTime()>this.adDuration)&&(this.adDuration=this.getAdRemainingTime())}b.prototype.handleVpaidEvent.call(this,c)},c}(a.VPAIDWrapper);a.VPAID2Over1=b}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}return __extends(c,b),c.prototype.startAd=function(){try{a.VPAIDHelper.checkVpaidStatus("startAd",this.status)}catch(b){return this.dispatchEvent(a.VPAIDEvent.AdLog,b)}this.status=a.VpaidStatus.STARTING,this.adStarted=!0,this.dispatchEvent(a.VPAIDEvent.AdStarted),this.dispatchEvent(a.VPAIDEvent.AdImpression),this.vpaid.resumeAd()},c.prototype.handleVpaidEvent=function(c){
if(!this.adStarted)switch(c.type){case a.VPAIDEvent.AdSkippableStateChange:case a.VPAIDEvent.AdLog:case a.VPAIDEvent.AdVolumeChange:break;case a.VPAIDEvent.AdError:this.adError=!0;break;case a.VPAIDEvent.AdStopped:this.adError||this.dispatchEvent(a.VPAIDEvent.AdError,"AdManagerWrapper : this VPAID creative got no Ads");break;case a.VPAIDEvent.AdLoaded:return this.vpaidguard("startAd");case a.VPAIDEvent.AdImpression:c=new a.VPAIDEvent(a.VPAIDEvent.AdLoaded);break;case a.VPAIDEvent.AdStarted:return this.vpaidguard("pauseAd");default:return}b.prototype.handleVpaidEvent.call(this,c)},c}(a.VPAID2Over1);a.AdManagerWrapper=b}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(c){function d(){return null!==c&&c.apply(this,arguments)||this}return __extends(d,c),d.prototype.loadVpaid=function(a,b,e){a===d.CANVAS?this.loadBundled(d.CANVAS,b,e):a===d.VIDEO?this.loadBundled(d.VIDEO,b,e):c.prototype.loadVpaid.call(this,a,b,e)},d.prototype.loadBundled=function(c,e,f){this.mainContainer=document.createElement("div"),this.mainContainer.style.setProperty("position","relative"),this.container.appendChild(this.mainContainer),this.creativeContainer=a.HTMLHelper.createIframe(),this.creativeContainer.setAttribute("id","vpaid-"+this.id),this.creativeContainer.setAttribute("class","creative-container"),this.mainContainer.appendChild(this.creativeContainer);var g='<!DOCTYPE html><html><body style="margin:0px;padding:0px;overflow:hidden"><div id="video-container" style="position:absolute;top:0px;left:0px;z-index:1;background-color:'+this.backgroundColor+'"></div><div id="vpaid-container" style="position:absolute;top:0px;left:0px;z-index:2"></div></body></html>';switch(this.creativeContainer.contentWindow.document.write(g),this.creativeContainer.contentWindow.document.close(),this.vpaidContainer=this.creativeContainer.contentWindow.document.getElementById("vpaid-container"),this.videoContainer=this.creativeContainer.contentWindow.document.getElementById("video-container"),this.creativeContainer.contentWindow.teads=a,this.creativeContainer.contentWindow.teads.api=this.config.api,c){case d.VIDEO:this.vpaid=new this.creativeContainer.contentWindow.teads.video.VPAIDVideo;break;case d.CANVAS:this.vpaid=new this.creativeContainer.contentWindow.teads.video.VPAIDCanvas;break;default:return f(b.ErrorCode.BUNDLE_ASSET_NOT_EXISTING)}e(this.vpaid)},d.CANVAS="canvas",d.VIDEO="video",d}(b.VPAIDJSContainer);b.BundledContainer=c}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function c(a,c){this.container=a,this.config=c,this.status=b.LoaderStatus.READY,this.wigoi=null}return c.prototype.load=function(d,e,f){var g=this;if(!(this.status>b.LoaderStatus.READY)){var h,i;this.config.sandbox?(this.creativeType=b.CreativeType.POSTMESSAGE,i=b.PostMessageContainer):(i=this.findContainerConstructor(d),this.creativeType=i===b.VPAIDSWFContainer?b.CreativeType.SWF:b.CreativeType.JS),this.container.innerHTML="",this.status=b.LoaderStatus.LOADING;var j=function(i){g.status=b.VpaidStatus.LOADED,g.wrapperClass||(g.wrapperClass=g.creativeType!==b.CreativeType.SWF||b.VPAIDHelper.isVPAID2(i)?b.VPAIDWrapper:b.VPAID2Over1,b.AdManagerHelper.isAdManager(d)&&(g.wrapperClass=b.AdManagerWrapper));var j=new g.wrapperClass(h);try{e(j)}catch(a){var k=b.ErrorCode.SUCCESS_CALLBACK_ERROR;k.message+=a,f(k)}var l=b.VPAIDHelper.isVPAID2(i)?"2.0":"1.0";c.logger.info("handshakeVersion - Creative vpaid version "+l),g.wigoi&&g.wigoi.valid(3,1,l,a.Wigo.infoType.STRING)};h=new i(this.container,this.config),this.config.background&&h.setBackground(this.config.background),h.loadVpaid(d,j,f)}},c.prototype.findContainerConstructor=function(c){if(c===b.BundledContainer.VIDEO||c===b.BundledContainer.CANVAS)return b.BundledContainer;var d=a.URIHelper.parse(c);return".swf"===d.pathname.substr(-4)?b.VPAIDSWFContainer:b.VPAIDJSContainer},c.prototype.setWigoi=function(a){this.wigoi=a},c.logger=new a.Logger("vpaid.VPAIDLoader"),c}();b.VPAIDLoader=c}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b;!function(b){var c=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return __extends(b,a),b.FullscreenRequest="FullscreenRequest",b.PlayPauseRequest="PlayPauseRequest",b.SkipRequest="SkipRequest",b.UIButtonRequest="UIButtonRequest",b.ClickToPlayRequest="ClickToPlayRequest",b.ClickRequest="ClickRequest",b.CallRequest="CallRequest",b.SoundToggleRequest="SoundToggleRequest",b.ReplayRequest="ReplayRequest",b.EndscreenInit="EndscreenInit",b.CollapseRequest="CollapseRequest",b}(a.VPAIDEvent);b.VPAIDUIEvent=c}(b=a.ui||(a.ui={}))}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c;!function(c){var d=function(){function c(c,d,e,f,g){var h=this;if(this.ui=c,this.element=d,this.vpaid=e,this.config=f,this.globalVpaidEventHandler=g,this.eventHandler=new a.vpaid.EventHandler,this.showOnVideoStart=!0,f.style){var i=d.getAttribute("style");d.setAttribute("style",(i?i+";":"")+f.style)}var j=new RegExp(a.ui.componentBaseClassName+"([a-z]*)"),k=d.className.match(j);if(this.id=k&&k[1]?k[1]:"",this.logger=new a.Logger("teads.ui.Component"+(this.id?"."+this.id:"")),d.style.zIndex||(d.style.zIndex="2"),this.hide(),this.vpaid.subscribe(function(){h.onVideoStart()},a.vpaid.VPAIDEvent.AdVideoStart),f.startOffset){this.showOnVideoStart=!1;var l;l=function(){var c=b.VPAIDHelper.getCurrentTime(h.vpaid);c>=f.startOffset&&(h.vpaid.unsubscribe(l,a.vpaid.VPAIDEvent.AdRemainingTimeChange),h.show())},this.vpaid.subscribe(l,a.vpaid.VPAIDEvent.AdRemainingTimeChange)}this.bindClick()}return c.prototype.init=function(){},c.prototype.setShowOnVideoStart=function(a){this.showOnVideoStart=a},c.prototype.getShowOnVideoStart=function(){return this.showOnVideoStart},c.prototype.getConfig=function(){return this.config},c.prototype.isEnabled=function(){return!this.config.disable},c.prototype.getElement=function(){return this.element},c.prototype.show=function(){a.HTMLHelper.removeClass(this.getElement(),"hide"),a.HTMLHelper.addClass(this.getElement(),"show")},c.prototype.hide=function(){a.HTMLHelper.removeClass(this.getElement(),"show"),a.HTMLHelper.addClass(this.getElement(),"hide")},c.prototype.isVisible=function(){return this.getElement().className.indexOf("show")>-1},c.prototype.getVpaid=function(){return this.vpaid},c.prototype.subscribe=function(a,b,c){this.eventHandler.subscribe(a,b,c)},c.prototype.unsubscribe=function(a,b){this.eventHandler.unsubscribe(a,b)},c.prototype.getOverridenEvents=function(){return[]},c.prototype.getOverridenMethods=function(){return[]},c.prototype.onMethod=function(a,b){void 0===b&&(b=[])},c.prototype.onOverridenMethod=function(a,b){void 0===b&&(b=[])},c.prototype.remove=function(){this.getElement().parentNode&&this.getElement().parentNode.removeChild(this.getElement())},c.prototype.onVideoStart=function(){this.showOnVideoStart&&this.show()},c.prototype.dispatchVpaidEvent=function(a,b){if(this.globalVpaidEventHandler)try{this.globalVpaidEventHandler({type:a,data:b})}catch(c){this.logger.error("error calling dispatchVpaidEvent "+a,b)}else this.logger.error("no globalVpaidEventHandler given. Dispatch "+a+" failed",b)},c.prototype.bindClick=function(){var b=this;a.Dom.addEventListener("click",this.getElement(),function(a){b.onClick(a)})},c.prototype.onClick=function(a){this.dispatchUiEvent(this.eventName)},c.prototype.dispatchUiEvent=function(a){a&&(this.logger.info("dispatch UI event "+a),this.dispatchVpaidEvent(a))},c}();c.Component=d}(c=b.component||(b.component={}))}(b=a.ui||(a.ui={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c;!function(c){var d=function(c){function d(){var a=null!==c&&c.apply(this,arguments)||this;return a.template='<style>\n  #{{countdown-id}} svg:nth-child(2) path {\n      -webkit-animation: load {{countdown-duration}}s linear;\n      -moz-animation: load {{countdown-duration}}s linear;\n      -o-animation: load {{countdown-duration}}s linear;\n      animation: load {{countdown-duration}}s linear;\n  }\n</style>\n\n<!--  Container  -->\n<ul class="countdown-circle" id="{{countdown-id}}">\n    <!--  Item  -->\n    <li data-countdown="{{countdown-duration}}" class="countdown-timer">\n        <svg viewBox="-10 -10 220 220">\n        <g fill="none" stroke-width="20" transform="translate(100,100)">\n        <path d="M 0,-100 A 100,100 0 0,1 86.6,-50" stroke="url(#cl1)"/>\n        <path d="M 86.6,-50 A 100,100 0 0,1 86.6,50" stroke="url(#cl1)"/>\n        <path d="M 86.6,50 A 100,100 0 0,1 0,100" stroke="url(#cl1)"/>\n        <path d="M 0,100 A 100,100 0 0,1 -86.6,50" stroke="url(#cl1)"/>\n        <path d="M -86.6,50 A 100,100 0 0,1 -86.6,-50" stroke="url(#cl1)"/>\n        <path d="M -86.6,-50 A 100,100 0 0,1 0,-100" stroke="url(#cl1)"/>\n        </g>\n        </svg>\n        <svg viewBox="-10 -10 220 220">\n        <path d="M200,100 C200,44.771525 155.228475,0 100,0 C44.771525,0 0,44.771525 0,100 C0,155.228475 44.771525,200 100,200 C155.228475,200 200,155.228475 200,100 Z" stroke-dashoffset="629"></path>\n        </svg>\n    </li>\n</ul>\n<!--  Defining Angle Gradient Colors  -->\n<svg width="0" height="0">\n<defs>\n<linearGradient id="cl1" gradientUnits="objectBoundingBox" x1="0" y1="0" x2="1" y2="1">\n    <stop stop-color="#FFFFFF"/>\n    <stop offset="100%" stop-color="#FFFFFF"/>\n</linearGradient>\n</defs>\n</svg>\n',a.timerClass="countdown-timer",a}return __extends(d,c),d.prototype.init=function(){if(this.countdown=Number(this.config.countdown),this.countdown<=0||isNaN(this.countdown))return void this.onEnded();var c=b.TemplateHelper.replacePlaceholders(this.template,{"countdown-duration":this.countdown,"countdown-id":"countdown-"+a.StringHelper.rand(10)});this.getElement().innerHTML=c,this.countdownTextElement=this.getElement().querySelector("."+this.timerClass)},d.prototype.initTimer=function(){var a=this,b=function(){a.isPaused()||a.countdown--,a.countdown<=0?(a.hide(),a.onEnded()):a.updateDisplay()};this.timerInterval=setInterval(b,1e3),this.updateDisplay()},d.prototype.stopTimer=function(){clearInterval(this.timerInterval)},d.prototype.setCountdown=function(a){this.countdown=a,this.updateDisplay()},d.prototype.resume=function(){this.paused=!1},d.prototype.pause=function(){this.paused=!0},d.prototype.isPaused=function(){return this.paused},d.prototype.isEnded=function(){return this.ended},d.prototype.setEndedCallback=function(a){this.callback=a},d.prototype.removeEndedCallback=function(){this.callback=null},d.prototype.onEnded=function(){if(clearInterval(this.timerInterval),this.ended=!0,this.hide(),this.callback&&"function"==typeof this.callback)try{this.callback()}catch(a){this.logger.error("countdown ended callback failled",a)}},d.prototype.updateDisplay=function(){this.countdownTextElement&&this.countdownTextElement.setAttribute&&this.countdownTextElement.setAttribute("data-countdown",String(this.countdown))},d}(c.Component);c.Countdown=d}(c=b.component||(b.component={}))}(b=a.ui||(a.ui={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c;!function(b){var c=function(c){function d(){return null!==c&&c.apply(this,arguments)||this}return __extends(d,c),d.prototype.init=function(){var c=this,d=this.config.countdown>=0?this.config.countdown:this.ui.getConfig().skipoffset;this.eventName=a.vpaid.ui.VPAIDUIEvent.CollapseRequest;var e=document.createElement("div");e.className="countdown",this.getElement().appendChild(e),this.countdown=new b.Countdown(this.ui,e,this.vpaid,{countdown:d}),this.vpaid.subscribe(function(){c.videoEnded=!0},a.vpaid.VPAIDEvent.AdVideoComplete),this.config.listenSkippableState?this.vpaid.subscribe(function(){c.vpaid.getAdSkippableState()?(c.onCountdownEnded(),c.show()):c.hide()},a.vpaid.VPAIDEvent.AdSkippableStateChange):this.countdown.setEndedCallback(function(){c.onCountdownEnded()})},d.prototype.onMethod=function(a,b){switch(a){case"pauseAd":case"resumeAd":this.countdown&&this.countdownInitiated&&("pauseAd"===a?this.countdown.pause():this.countdown.resume())}},d.prototype.onVideoStart=function(){this.countdownInitiated||this.config.listenSkippableState||(c.prototype.onVideoStart.call(this),this.countdown.init(),this.countdown.show(),this.countdownInitiated=!0,this.countdown.initTimer())},d.prototype.onClick=function(b){this.countdownEnded&&(this.videoEnded?c.prototype.onClick.call(this,b):(this.dispatchUiEvent(a.vpaid.ui.VPAIDUIEvent.CollapseRequest),this.vpaid.skipAd()))},d.prototype.onCountdownEnded=function(){if(!this.countdownEnded){this.countdown.hide(),this.countdownEnded=!0;var a=document.createElement("div");a.className="close-button icon-close",this.getElement().appendChild(a)}},d}(b.Component);b.CloseButton=c}(c=b.component||(b.component={}))}(b=a.ui||(a.ui={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b;!function(a){var b=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.defaultLink={inRead:"http://inread-experience.teads.tv",inBoard:"http://teads.tv/en/teads-media/"},b}return __extends(b,a),b.prototype.init=function(){var a=/\[([^\]]*)\]/g;if(!this.config.text){var b="inRead";"inboard"===this.config.formatName&&(b="inBoard"),this.config.text="["+b+"] invented by Teads"}var c=this.config.text.replace(a,'<span class="teads-ui-component-credits-blue">$1</span>'),d=this.config.url||this.defaultLink[b]||"http://teads.tv/en";this.getElement().innerHTML='<a href="'+d+'" target="_blank">'+c+"</a>",this.show()},b}(a.Component);a.Credits=b}(b=a.component||(a.component={}))}(b=a.ui||(a.ui={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c;!function(b){var c=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}return __extends(c,b),c.prototype.init=function(){this.eventName=a.vpaid.ui.VPAIDUIEvent.FullscreenRequest,this.showOnVideoStart=!1,b.prototype.init.call(this),this.show()},c.prototype.bindClick=function(){var b=this;a.Dom.addEventListener("mousedown",this.getElement(),function(a){b.onClick(a)})},c}(b.Component);b.FullscreenButton=c}(c=b.component||(b.component={}))}(b=a.ui||(a.ui={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b;!function(a){var b=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.defaultText="Advertising",b}return __extends(b,a),b.prototype.init=function(){var a=this.config.html&&""!==this.config.html?this.config.html:this.config.text||this.defaultText;this.getElement().innerHTML=a,this.getElement().setAttribute("style",this.config.style||""),this.show()},b}(a.Component);a.Label=b}(b=a.component||(a.component={}))}(b=a.ui||(a.ui={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c;!function(b){var c=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}return __extends(c,b),c.prototype.init=function(){var c=this;this.eventName=a.vpaid.ui.VPAIDUIEvent.PlayPauseRequest,this.vpaid.subscribe(function(){c.onPause()},a.vpaid.VPAIDEvent.AdPaused),this.vpaid.subscribe(function(){c.onPause()},a.vpaid.VPAIDEvent.AdVideoComplete),this.vpaid.subscribe(function(){c.onPlay()},a.vpaid.VPAIDEvent.AdPlaying),this.vpaid.subscribe(function(){c.onPlay()},a.vpaid.VPAIDEvent.AdVideoStart),b.prototype.init.call(this)},c.prototype.onClick=function(a){b.prototype.onClick.call(this,a),this.isPlaying?this.vpaid.pauseAd():this.vpaid.resumeAd()},c.prototype.onPlay=function(){this.isPlaying=!0,a.HTMLHelper.addClass(this.getElement(),"playing")},c.prototype.onPause=function(){this.isPlaying=!1,a.HTMLHelper.removeClass(this.getElement(),"playing")},c}(b.Component);b.PlayPauseButton=c}(c=b.component||(b.component={}))}(b=a.ui||(a.ui={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b=function(){function a(){}return a.getCurrentTime=function(a){return Number(a.getAdDuration())>0?a.getAdDuration()-a.getAdRemainingTime():0},a.isMuted=function(a){return!(a.getAdVolume()>0)},a}();a.VPAIDHelper=b}(b=a.ui||(a.ui={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c;!function(c){var d=function(c){function d(){var a=null!==c&&c.apply(this,arguments)||this;return a.showOnVideoProgress=!0,a}return __extends(d,c),d.prototype.init=function(){var b=this;return this.progressbar=a.Dom.getElementsByClassName("progress",this.getElement(),this.ui.getContentWindow())[0],this.progressbar?(this.vpaid.subscribe(function(){b.onProgress()},a.vpaid.VPAIDEvent.AdRemainingTimeChange),this.vpaid.subscribe(function(){b.hide()},a.vpaid.VPAIDEvent.AdVideoComplete),void c.prototype.init.call(this)):this.hide()},d.prototype.setShowOnVideoProgress=function(a){this.showOnVideoProgress=a},d.prototype.getShowOnVideoProgress=function(){return this.showOnVideoProgress},d.prototype.onProgress=function(){var a=b.VPAIDHelper.getCurrentTime(this.vpaid);this.vpaid.getAdDuration()>0&&a>0?(!this.isVisible()&&this.showOnVideoProgress&&this.show(),this.progressbar.style.width=a/this.vpaid.getAdDuration()*100+"%"):this.hide()},d}(c.Component);c.ProgressBar=d}(c=b.component||(b.component={}))}(b=a.ui||(a.ui={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c;!function(b){var c=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}return __extends(c,b),c.prototype.init=function(){var b=this;this.vpaid.subscribe(function(){var a=b.vpaid.getAdRemainingTime();isNaN(a)&&(a=b.vpaid.getAdDuration()),b.getElement().innerHTML="Your video in "+Math.ceil(a)+" sec"},a.vpaid.VPAIDEvent.AdRemainingTimeChange)},c}(b.Component);b.ProgressText=c}(c=b.component||(b.component={}))}(b=a.ui||(a.ui={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c;!function(c){var d=function(c){function d(){return null!==c&&c.apply(this,arguments)||this}return __extends(d,c),d.prototype.init=function(){var d=this,e=this.ui.getConfig();if(this.eventName=a.vpaid.ui.VPAIDUIEvent.SkipRequest,this.config.listenSkippableState)return void this.hide();var f=setInterval(function(){if(!d.vpaid.getAdSkippableState()&&e.skipoffset>0){var a=Math.floor(e.skipoffset-b.VPAIDHelper.getCurrentTime(d.vpaid));d.getElement().innerHTML="Skip in "+(isNaN(a)?e.skipoffset:a<0?0:a)+" sec",d.show()}else d.vpaid.getAdSkippableState()&&(clearInterval(f),d.getElement().style.cursor="pointer",d.getElement().innerHTML="Skip Ad >>",d.show())},1e3);c.prototype.init.call(this)},d.prototype.onClick=function(a){c.prototype.onClick.call(this,a),this.vpaid.getAdSkippableState()&&this.vpaid.skipAd()},d}(c.Component);c.SkipButton=d}(c=b.component||(b.component={}))}(b=a.ui||(a.ui={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c;!function(c){var d=function(c){function d(){var a=null!==c&&c.apply(this,arguments)||this;return a.lastVolume=1,a}return __extends(d,c),d.prototype.init=function(){var d=this;this.isMuted=b.VPAIDHelper.isMuted(this.vpaid),this.eventName=a.vpaid.ui.VPAIDUIEvent.SoundToggleRequest,this.vpaid.subscribe(function(){d.isMuted=b.VPAIDHelper.isMuted(d.vpaid),d.onMuteChange()},a.vpaid.VPAIDEvent.AdStarted),this.vpaid.subscribe(function(){d.isMuted=b.VPAIDHelper.isMuted(d.vpaid)},a.vpaid.VPAIDEvent.AdVideoStart),this.vpaid.subscribe(function(){d.hide()},a.vpaid.VPAIDEvent.AdStopped),this.ui.subscribe(function(){d.hide()},a.vpaid.ui.VPAIDUIEvent.EndscreenInit),this.vpaid.subscribe(function(){(!d.isMuted&&b.VPAIDHelper.isMuted(d.vpaid)||d.isMuted&&!b.VPAIDHelper.isMuted(d.vpaid))&&(d.lastVolume=b.VPAIDHelper.isMuted(d.vpaid)?d.lastVolume:d.vpaid.getAdVolume(),d.isMuted=b.VPAIDHelper.isMuted(d.vpaid),d.onMuteChange())},a.vpaid.VPAIDEvent.AdVolumeChange),this.onMuteChange(),c.prototype.init.call(this)},d.prototype.onMuteChange=function(){a.HTMLHelper[b.VPAIDHelper.isMuted(this.vpaid)?"addClass":"removeClass"](this.getElement(),"muted")},d.prototype.setAdVolume=function(){this.vpaid.setAdVolume(this.isMuted?this.lastVolume:0)},d.prototype.onClick=function(a){c.prototype.onClick.call(this,a),this.setAdVolume(),this.isMuted=!this.isMuted,this.onMuteChange()},d}(c.Component);c.MuteButton=d}(c=b.component||(b.component={}))}(b=a.ui||(a.ui={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c;!function(b){var c=function(){function a(){}return a.EQUALIZER="equalizer",a.MUTE="mute",a}(),d=function(){function a(){}return a.OFF="icon-muteoff",a.ON="icon-muteon",a}(),e=function(b){function e(){var a=null!==b&&b.apply(this,arguments)||this;return a.paused=!1,a}return __extends(e,b),e.prototype.init=function(){var e=this;if(b.prototype.init.call(this),this.eventName=a.vpaid.ui.VPAIDUIEvent.SoundToggleRequest,this.config.type===c.EQUALIZER)this.initEqualizer();else{var f=document.createElement("div");f.className=d.OFF,this.getElement().appendChild(f);var g=function(){a.HTMLHelper.replaceClass(f,e.vpaid.getAdVolume()>0?d.OFF:d.ON,e.vpaid.getAdVolume()>0?d.ON:d.OFF)};this.vpaid.subscribe(g,a.vpaid.VPAIDEvent.AdVolumeChange),this.vpaid.subscribe(g,a.vpaid.VPAIDEvent.AdStarted)}},e.prototype.setAdVolume=function(){},e.prototype.onClick=function(a){this.config.type!==c.EQUALIZER&&b.prototype.onClick.call(this,a)},e.prototype.initEqualizer=function(){var b=this,c=4,d=document.createElement("div");d.className="equalizer",this.getElement().appendChild(d);for(var e=0;e<c;e++){var f=document.createElement("div");f.className="equalizer-bar equalizer-bar-"+e,f.style.left=String(3*e+e),d.appendChild(f)}var g=function(){if(!b.isPaused()){var c=a.Dom.getElementsByClassName("equalizer-bar",d,b.ui.getContentWindow());for(var e in c){var f=c[e];f&&f.style&&"none"!==f.style.display&&Math.random()>.5&&(f.style.height=Math.max(3,Math.floor(15*Math.random()+1))+"px")}}};g(),setInterval(g,200),this.vpaid.subscribe(function(){b.pause()},a.vpaid.VPAIDEvent.AdPaused),this.vpaid.subscribe(function(){b.resume()},a.vpaid.VPAIDEvent.AdPlaying)},e.prototype.resume=function(){this.paused=!1},e.prototype.pause=function(){this.paused=!0},e.prototype.isPaused=function(){return this.paused},e}(b.MuteButton);b.SoundButton=e}(c=b.component||(b.component={}))}(b=a.ui||(a.ui={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function b(){}return b.replacePlaceholders=function(a,b){if(b)for(var c in b)a=a.replace(new RegExp(this.placeholderStartSymbol+c+this.placeholderEndSymbol,"g"),b[c]);return a},b.getPlaceholders=function(b){var c=/\{\{([^\}]*)\}\}/g,d=/\{\{|\}\}/g,e=b.match(c);if(e){var f=a.ArrayHelper.map(e,function(a){return a.replace(d,"")});return a.ArrayHelper.unique(f)}return[]},b.placeholderStartSymbol="{{",b.placeholderEndSymbol="}}",b}();b.TemplateHelper=c}(b=a.ui||(a.ui={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b=function(){function a(){}return a.secondToTimecode=function(a){var b="00";if(a>60){var c=Math.floor(a/60);b=c<10?"0":""}return b+=":"+(a<10?"0":"")+a},a}();a.StringHelper=b}(b=a.ui||(a.ui={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c;!function(c){var d=function(c){function d(){var a=null!==c&&c.apply(this,arguments)||this;return a.placeholders=["currentTime","totalTime","remainingTime","countdown"],a}return __extends(d,c),d.prototype.init=function(){this.setText(this.config.text)},d.prototype.setText=function(b){var c=this;this.renderText(b),this.havePlaceholder(b)&&!this.haveProgressCallback&&(this.haveProgressCallback=!0,this.vpaid.subscribe(function(){c.renderText(b)},a.vpaid.VPAIDEvent.AdRemainingTimeChange))},d.prototype.renderText=function(a){this.textNode&&this.getElement().removeChild(this.textNode),this.textNode=document.createElement("span"),this.textNode.innerHTML=this.havePlaceholder(a)?this.replacePlaceholders(a):a,this.getElement().appendChild(this.textNode)},d.prototype.replacePlaceholders=function(a){var c=this,d={};return this.placeholders.forEach(function(a){d[a]=c.getPlaceholderValue(a)}),b.TemplateHelper.replacePlaceholders(a,d)},d.prototype.havePlaceholder=function(a){var b=new RegExp("({{"+this.placeholders.join("}}|{{")+"}})","g");return!!a.match(b)},d.prototype.getPlaceholderValue=function(a){var c=b.VPAIDHelper.getCurrentTime(this.vpaid);c=c<0||isNaN(c)?0:Math.floor(c);var d=Math.floor(this.vpaid.getAdRemainingTime());switch(a){case"currentTime":return b.StringHelper.secondToTimecode(c);case"totalTime":return b.StringHelper.secondToTimecode(Math.floor(this.vpaid.getAdDuration()));case"remainingTime":return b.StringHelper.secondToTimecode(d);case"countdown":return String(this.config.countdown-c)}},d}(c.Component);c.TextField=d}(c=b.component||(b.component={}))}(b=a.ui||(a.ui={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c;!function(b){var c=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}return __extends(c,b),c.prototype.init=function(){this.showOnVideoStart=!1,this.eventName=a.vpaid.ui.VPAIDUIEvent.ClickToPlayRequest},c.prototype.onMethod=function(b,c){void 0===c&&(c=[]),"startAd"===b&&(this.show(),this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdStarted))},c.prototype.getOverridenEvents=function(){return[a.vpaid.VPAIDEvent.AdStarted]},c.prototype.getOverridenMethods=function(){return["startAd"]},c.prototype.onClick=function(c){var d=this;b.prototype.onClick.call(this,c),a.HTMLHelper.addClass(this.getElement(),"loading"),this.vpaid.subscribe(function(){d.remove()},a.vpaid.VPAIDEvent.AdStarted),this.remove(),this.vpaid.startAd()},c}(b.Component);b.ClickToPlay=c}(c=b.component||(b.component={}))}(b=a.ui||(a.ui={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c;!function(b){var c=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}return __extends(c,b),c.prototype.init=function(){var b=this,c=!0;this.eventName=a.vpaid.ui.VPAIDUIEvent.UIButtonRequest,a.Dom.addEventListener("click",this.getElement(),function(d){b.onClick(d),c?b.ui.hideAllComponents():b.ui.showAllComponents(),b.ui.showComponent("uibutton"),c=!c,a.HTMLHelper.toggleClass(b.getElement(),"ui-invisible")})},c}(b.Component);b.UIButton=c}(c=b.component||(b.component={}))}(b=a.ui||(a.ui={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c;!function(b){var c=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}return __extends(c,b),c.prototype.init=function(){var b=this;if(this.clickthrough=this.ui.getConfig().clickthrough,this.eventName=a.vpaid.ui.VPAIDUIEvent.ClickRequest,this.config.text&&this.clickthrough){var c=document.createElement("div");c.className="text",c.innerHTML=this.config.text,this.getElement().appendChild(c)}else this.hide();this.vpaid.subscribe(function(){b.hide()},a.vpaid.VPAIDEvent.AdVideoComplete)},c.prototype.onVideoStart=function(){this.showOnVideoStart&&this.config.text&&this.clickthrough&&this.show()},c.prototype.onClick=function(c){b.prototype.onClick.call(this,c),this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdClickThru,{url:this.clickthrough,id:this.config.id,playerHandles:!0})},c}(b.TextField);b.ClickButton=c}(c=b.component||(b.component={}))}(b=a.ui||(a.ui={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c;!function(b){var c=function(c){function d(){var a=null!==c&&c.apply(this,arguments)||this;return a.template='<div class="button-container">\n  <div class="button replay-button">\n    <div class="icon"><span class="icon-replay"></span></div>\n    <div class="text"></div>\n  </div>\n  <div class="button call-button">\n    <div class="icon"><span></span></div>\n    <div class="text"></div>\n  </div>\n</div>\n<div class="close-button"><div class="icon-closeendscreen"></div></div>\n<div class="countdown"></div>\n',a}return __extends(d,c),d.prototype.init=function(){var b=this;this.logger.debug("init endscreen"),this.showOnVideoStart=!1;var c=this.element.getAttribute("style");this.element.setAttribute("style",(c?c+";":"")+" opacity: 0.8!important; background-color: #ffffff;"),this.getElement().innerHTML=this.template,this.vpaid.subscribe(function(){if(b.logger.debug("video complete"),b.videoComplete=!0,b.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdVideoComplete),b.ui.getConfig().noAutoStop){b.show(),b.initLayout();var c=b.ui.getVPAIDContainer();c.style.filter="blur(3px)",c.style.webkitFilter="blur(3px)",b.dispatchVpaidEvent(a.vpaid.ui.VPAIDUIEvent.EndscreenInit)}},a.vpaid.VPAIDEvent.AdVideoComplete),this.vpaid.subscribe(function(){b.videoComplete&&!b.ui.getConfig().noAutoStop&&(b.show(),b.initLayout(),b.dispatchVpaidEvent(a.vpaid.ui.VPAIDUIEvent.EndscreenInit))},a.vpaid.VPAIDEvent.AdStopped),this.hide()},d.prototype.getOverridenEvents=function(){return this.videoComplete?[a.vpaid.VPAIDEvent.AdStopped]:[a.vpaid.VPAIDEvent.AdVideoComplete]},d.prototype.getOverridenMethods=function(){return this.isVisible()?["pauseAd","resumeAd"]:[]},d.prototype.onOverridenMethod=function(a,b){this.countdown&&("pauseAd"===a?this.countdown.pause():"resumeAd"===a&&this.countdown.resume())},d.prototype.onMethod=function(b,c){void 0===c&&(c=[]),"resizeAd"===b&&this.videoComplete&&(this.logger.debug("resizeAd from endscreen",c),this.resize(c[0],c[1]),this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdSizeChange))},d.prototype.initLayout=function(){var c=this;if(this.replayButton=a.Dom.getElementsByClassName("replay-button",this.getElement(),this.ui.getContentWindow())[0],this.replayButton){a.Dom.addEventListener("click",this.replayButton,function(){c.onReplayClick()});try{a.Dom.getElementsByClassName("text",this.replayButton,this.ui.getContentWindow())[0].innerHTML=this.config.replayButton.text}catch(a){this.logger.error("No text on replay button")}a.Context.isEdgeTouchScreen()&&(this.replayButton.className="button edge-touch-screen replay-button")}else this.logger.debug("No replayButton on endscreen !");if(this.callButton=a.Dom.getElementsByClassName("call-button",this.getElement(),this.ui.getContentWindow())[0],this.callButton&&this.config.callButton&&this.ui.getConfig().clickthrough){if(a.Dom.addEventListener("click",this.callButton,function(){c.dispatchUiEvent(a.vpaid.ui.VPAIDUIEvent.ClickRequest),c.onActionClick()}),this.config.callButton.text){var e=this.callButton.querySelector(".icon span");if(e){var f=d.CSSClassMapping[this.config.callButton.type]||function(){for(var a in d.CSSClassMapping)return d.CSSClassMapping[a]}();a.HTMLHelper.addClass(e,f)}try{a.Dom.getElementsByClassName("text",this.callButton,this.ui.getContentWindow())[0].innerHTML=this.config.callButton.text}catch(a){this.logger.error("No text on callButton")}a.Context.isEdgeTouchScreen()&&(this.callButton.className="button edge-touch-screen call-button")}}else this.callButton&&this.callButton.parentNode&&this.callButton.parentNode.removeChild(this.callButton),this.logger.debug("No callButton on endscreen !");this.closeButton=a.Dom.getElementsByClassName("close-button",this.getElement(),this.ui.getContentWindow())[0],this.closeButton?this.config.closeButton.disable||this.config.closeButton.listenSkippableState&&!this.vpaid.getAdSkippableState()?(a.HTMLHelper.removeClass(this.closeButton,"show"),a.HTMLHelper.addClass(this.closeButton,"hide")):a.Dom.addEventListener("click",this.closeButton,function(){c.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdUserClose),c.closeAd()}):this.logger.debug("No closeButton on endscreen !");var g=a.Dom.getElementsByClassName("countdown",this.getElement(),this.ui.getContentWindow())[0];g?(this.countdown=new b.Countdown(this.ui,g,this.vpaid,{countdown:this.config.countdown}),this.config.autoClose&&this.countdown.setEndedCallback(function(){c.logger.debug("Countdown ended and autoClose on, close ad"),c.closeAd()}),this.countdown.init(),this.countdown.initTimer(),this.countdown.show()):this.logger.debug("No countdown on endscreen"),this.resize(this.ui.getAdWidth(),this.ui.getAdHeight())},d.prototype.resize=function(b,c){if(!(b<=0||c<=0)){var d=a.Dom.getElementsByClassName("button-container",this.getElement())[0];if(d){d.style.top="0px",d.style.left="0px";var e=a.Dom.getBoundingClientRect(d),f=(c-e.height)/2,g=(b-e.width)/2;d.style.top=f+"px",d.style.left=g+"px"}}},d.prototype.onClick=function(a){},d.prototype.onReplayClick=function(){
this.clearCloseInterval(),this.ui.getConfig().noAutoStop&&this.vpaid.stopAd(),this.videoComplete=!1,this.dispatchUiEvent(a.vpaid.ui.VPAIDUIEvent.ReplayRequest)},d.prototype.onActionClick=function(){var b=this.ui.getConfig().clickthrough||null;this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdClickThru,{url:b,id:null,playerHandles:!0})},d.prototype.clearCloseInterval=function(){this.countdown&&(this.countdown.removeEndedCallback(),this.countdown.stopTimer())},d.prototype.closeAd=function(){this.clearCloseInterval(),this.ui.stopAd()},d.CSSClassMapping={learnMore:"icon-learnmore",shopNow:"icon-shop",contactUs:"icon-contact",signUp:"icon-signup"},d}(b.Component);b.EndScreen=c}(c=b.component||(b.component={}))}(b=a.ui||(a.ui={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c;!function(b){var c=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}return __extends(c,b),c.prototype.init=function(){var b=this;this.clickthrough=this.ui.getConfig().clickthrough,this.eventName=a.vpaid.ui.VPAIDUIEvent.ClickRequest;var c=function(){b.getElement().style.setProperty("background-image","url("+b.config.url+")")};this.load(c)},c.prototype.load=function(a){var b=this,c=new Image;c.onload=function(){return a()},c.onerror=function(a){return b.hide()},c.src=this.config.url},c.prototype.onVideoStart=function(){this.showOnVideoStart&&this.show()},c.prototype.onClick=function(c){b.prototype.onClick.call(this,c),this.clickthrough&&this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdClickThru,{url:this.clickthrough,id:this.config.id,playerHandles:!0})},c}(b.Component);b.BrandLogo=c}(c=b.component||(b.component={}))}(b=a.ui||(a.ui={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c;!function(b){var c=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}return __extends(c,b),c.prototype.init=function(){var b=this;this.showOnVideoStart=!1,this.element.style.zIndex="2",this.show(),this.vpaid.subscribe(function(){return b.hide()},a.vpaid.VPAIDEvent.AdStarted)},c}(b.Component);b.StartScreen=c}(c=b.component||(b.component={}))}(b=a.ui||(a.ui={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){a.components={fullscreenbutton:a.component.FullscreenButton,mutebutton:a.component.MuteButton,progressbar:a.component.ProgressBar,playpausebutton:a.component.PlayPauseButton,progresstext:a.component.ProgressText,skipbutton:a.component.SkipButton,closebutton:a.component.CloseButton,uibutton:a.component.UIButton,textfield:a.component.TextField,clicktoplay:a.component.ClickToPlay,clickbutton:a.component.ClickButton,soundbutton:a.component.SoundButton,label:a.component.Label,credits:a.component.Credits,endscreen:a.component.EndScreen,brandlogo:a.component.BrandLogo,countdown:a.component.Countdown,startscreen:a.component.StartScreen},a.componentBaseClassName="teads-ui-component-",a.vpaidContainerId="vpaid-container",a.mainComponentsContainerId="main-container",a.videoComponentsContainerId="layout-video-component"}(b=a.ui||(a.ui={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function b(){}return b.getOverridenEvents=function(b){var c=[];return a.ArrayHelper.map(b,function(b){a.ArrayHelper.map(b.getOverridenEvents(),function(d){b.isEnabled()&&a.ArrayHelper.indexOf(c,d)===-1&&c.push(d)})}),c},b.getOverridenEventComponents=function(b,c){return a.ArrayHelper.filter(b,function(b){return b.isEnabled()&&a.ArrayHelper.indexOf(b.getOverridenEvents(),c)!==-1})},b.getOverridenMethodComponents=function(b,c){return a.ArrayHelper.filter(b,function(b){return b.isEnabled()&&a.ArrayHelper.indexOf(b.getOverridenMethods(),c)!==-1})},b.showHideComponent=function(a,b,c){void 0===c&&(c=!0);var d=a[b];d&&d.isEnabled()&&(c?d.show():d.hide())},b.showHideAllComponents=function(b,c){void 0===c&&(c=!0),a.ArrayHelper.forEach(b,function(a){a.isEnabled()&&(c?a.show():a.hide())})},b}();b.ComponentHelper=c}(b=a.ui||(a.ui={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b;!function(b){function c(b){var c=[];return c.length>0&&(b=b.replace('id="'+a.mainComponentsContainerId+'"','id="'+a.mainComponentsContainerId+'" class="'+c.join(" ")+'"')),b}b.inread=c('<!doctype html>\n<html>\n  <head></head>\n  <body>\n    <div id="main-container">\n      <style>\n      /** include component first, to get the fonts loaded **/\nbody {\n  margin: 0px;\n  padding: 0px;\n  border: none;\n\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n\n  font-family: \'Helvetica\', Arial, sans-serif !important;\n  font-weight: 300;\n}\n\n#layout-video-component {\n  width: 100%;\n  height: 100%;\n  position: relative;\n}\n\n#vpaid-container {\n  z-index: 1;\n  background-color: #000000; /* To prevent white endScreen in case of VPAID JS */\n  position: relative;\n}\n\n.teads-ui-component-progressbar {\n  position: absolute;\n  bottom: 0px;\n  left: 0px;\n  width: 100%;\n}\n\n.teads-ui-component-progressbar .progress {\n    height: 3px;\n    width: 0%;\n    background-color: #86C3F7;\n    transition: all .4s linear;\n}\n\n.teads-ui-component-playpausebutton {\n  position: absolute;\n  bottom : 10px;\n  left: 10px;\n  width: 20px;\n  height: 20px;\n  background-image: url("{{assetsPath}}/default/img/play.png");\n  background-position: top left;\n  background-repeat: no-repeat;\n  background-size: contain;\n  cursor: pointer;\n}\n\n.teads-ui-component-playpausebutton.playing {\n  background-image: url("{{assetsPath}}/default/img/pause.png");\n}\n\n.teads-ui-component-fullscreenbutton {\n  position: absolute;\n  bottom : 5px;\n  right: 30px;\n  width: 16px;\n  height: 16px;\n  background-image: url("{{assetsPath}}/default/img/fullscreen.png");\n  background-position: top left;\n  background-repeat: no-repeat;\n  background-size: contain;\n  cursor: pointer;\n}\n\n.teads-ui-component-progresstext {\n  height: 30px;\n  margin: 0px 40px 0px 60px;\n  text-align: center;\n  padding: 4px;\n}\n\n.teads-ui-component-skipbutton {\n  position: absolute;\n  bottom: 40px;\n  right: 4px;\n  width: 100px;\n  height: 20px;\n  font-family: \'Helvetica\', Arial, sans-serif !important;\n  background-color: #CCCCCC;\n  text-align: center;\n  padding: 4px;\n  border: 1px solid #000000;\n}\n\n/******************************************************************************\n * Label component\n *****************************************************************************/\n.teads-ui-component-label {\n  font-family: \'Helvetica\', Arial, sans-serif !important;\n  font-size: 12px;\n  color: #999;\n  text-align: center;\n  padding: 3px 0;\n  text-transform: uppercase;\n  height: 21px;\n  line-height: 21px;\n  display: none;\n}\n\n.sm-screen .teads-ui-component-label,\n.xs-screen .teads-ui-component-label {\n  font-size: 10px;\n}\n\n.fullscreen .teads-ui-component-label,\n.fullscreen .teads-ui-component-label.show {\n  display: none !important;\n}\n\n/******************************************************************************\n * Credit component\n *****************************************************************************/\n.teads-ui-component-credits {\n  font-size: 12px;\n  color: #999;\n  text-align: right;\n  padding: 3px 0;\n  height: 26px;\n  line-height: 26px;\n  display: none;\n}\n\n.fullscreen .teads-ui-component-credits,\n.fullscreen .teads-ui-component-credits.show {\n  display: none !important;\n}\n\n.sm-screen .teads-ui-component-label,\n.xs-screen .teads-ui-component-label{\n  font-size: 10px;\n}\n\n.teads-ui-component-credits a {\n  color: #999;\n  text-decoration: none;\n}\n\n.teads-ui-component-credits-blue {\n  color: #79BBE9;\n}\n\n/******************************************************************************\n * Start soundbutton styles\n *****************************************************************************/\n.teads-ui-component-soundbutton {\n  position: absolute;\n  bottom : 0;\n  right: 0;\n  padding: 13px 18px 18px 6px;\n  cursor: pointer;\n  display: none;\n  opacity: 0;\n\n  transition: opacity 175ms linear;\n}\n\n.teads-ui-component-soundbutton.show {\n  display: block;\n  opacity: .8;\n}\n\n.teads-ui-component-soundbutton:hover {\n  opacity: 1;\n}\n\n.teads-ui-component-soundbutton .equalizer {\n  position: absolute;\n  bottom: 7px;\n  right: 5px;\n  cursor: default;\n}\n\n.teads-ui-component-soundbutton.show .equalizer {\n  display: none;\n}\n.teads-ui-component-soundbutton.show.muted .equalizer {\n  display: block;\n}\n\n/******************************************************************************\n * Start closebutton and countdownclosebutton styles\n *****************************************************************************/\n.teads-ui-component-closebutton {\n  position: absolute;\n  top: 0;\n  right: 0;\n  padding: 15px;\n  cursor: pointer;\n  display: none;\n\n  transition: opacity 175ms linear;\n}\n\n/** disable SVG animation on closebutton countdown */\n.teads-ui-component-closebutton svg {\n  display: none;\n}\n\n.teads-ui-component-closebutton .countdown {\n  display: none;\n  position: absolute;\n  left: 2px;\n  bottom: 20px;\n}\n\n/** White countdown */\n.teads-ui-component-closebutton .countdown .countdown-circle>li {\n  color: #FFFFFF;\n}\n\n.teads-ui-component-closebutton .countdown.show  {\n  display: block;\n}\n\n.fullscreen .teads-ui-component-closebutton .countdown.show  {\n  display: none!important;\n}\n\n.teads-ui-component-closebutton.show {\n  display: block;\n}\n\n.teads-ui-component-closebutton.show .close-button {\n  opacity: .8;\n}\n\n.teads-ui-component-closebutton.show:hover .close-button.show {\n  opacity: 1;\n}\n\n.sm-screen .teads-ui-component-closebutton .closebutton,\n.xs-screen .teads-ui-component-closebutton .closebutton {\n  padding: 10px 10px 15px 15px;\n}\n\n\n/******************************************************************************\n * Start clickthroughbutton styles\n *****************************************************************************/\n.teads-ui-component-clickbutton {\n\n  display: none;\n\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  cursor: pointer;\n\n  -webkit-transition: background-color .250s; /* Safari */\n  transition: background-color .250s;\n}\n\n.teads-ui-component-clickbutton .text {\n  font-size: 12px;\n  white-space: nowrap;\n  max-height: 30px;\n  text-align: center;\n  background-color: rgba(0,0,0,0.10);\n  border: 1px solid #FFFFFF;\n  color: white;\n  margin: 10px;\n  padding: 6px 10px;\n}\n\n.teads-ui-component-clickbutton .text:hover {\n  background-color: rgba(0,0,0,0.25);\n}\n\n.sm-screen .teads-ui-component-clickbutton .text,\n.xs-screen .teads-ui-component-clickbutton .text {\n  margin: 5px;\n  padding: 5px;\n}\n\n/******************************************************************************\n * Start clicktoplay styles\n *****************************************************************************/\n.teads-ui-component-clicktoplay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: #000000;\n  cursor: pointer;\n  display: none;\n  z-index: 10 !important;\n}\n\n.teads-ui-component-clicktoplay .icon-watchmore {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  margin-left: -8px;\n  margin-right: -10px;\n  opacity: .8;\n\n  transition: opacity 175ms linear;\n}\n.sm-screen .teads-ui-component-clicktoplay .icon-watchmore,\n.xs-screen .teads-ui-component-clicktoplay .icon-watchmore {\n  margin-left: -5px;\n  margin-right: -7px;\n}\n.teads-ui-component-clicktoplay:hover .icon-watchmore {\n  opacity: 1;\n}\n\n/******************************************************************************\n * Start endScreen styles\n *****************************************************************************/\n.teads-ui-component-endscreen {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  z-index: 10 !important;\n  background-color: #000000;\n  text-align: center;\n  word-spacing: nowrap;\n  opacity: 0;\n  display: none;\n\n  transition: opacity 175ms ease;\n}\n\n.teads-ui-component-endscreen.show {\n  display: block !important;\n  opacity: 1 !important;\n}\n\n/* hide svg animation on endscreen */\n.teads-ui-component-endscreen .countdown .countdown-timer svg {\n  opacity: 0;\n}\n.teads-ui-component-endscreen .countdown {\n  position: absolute;\n  bottom: 18px;\n  left: 18px;\n  color: white;\n}\n\n.sm-screen .teads-ui-component-endscreen .countdown,\n.xs-screen .teads-ui-component-endscreen .countdown {\n  bottom: 5px;\n  left: 5px;\n}\n\n.teads-ui-component-endscreen .close-button {\n  position: absolute;\n  top: 0;\n  right: 0;\n  padding: 15px;\n  cursor: pointer;\n}\n\n.teads-ui-component-endscreen .button-container {\n  position: absolute;\n}\n\n.teads-ui-component-endscreen .button {\n  display: block;\n  width: 100%;\n  height: 70px;\n  margin-bottom: 40px;\n  cursor: pointer;\n\n  transition: opacity 175ms ease;\n}\n\n.sm-screen .teads-ui-component-endscreen .button {\n  margin-bottom: 15px !important;\n  height: 40px;\n}\n.xs-screen .teads-ui-component-endscreen .button {\n  margin-bottom: 15px !important;\n  height: 32px;\n}\n\n.xs-screen .teads-ui-component-endscreen .button.replay-button {\n  margin-bottom: 15px !important;\n}\n\n.teads-ui-component-endscreen .button:last-child {\n  margin-bottom: 0 !important;\n}\n\n.teads-ui-component-endscreen.show .button {\n  opacity: 0.8!important;\n}\n\n.teads-ui-component-endscreen.show .button:hover {\n  opacity: 1!important;\n}\n\n.teads-ui-component-endscreen.show .button.edge-touch-screen {\n  opacity: 0.8!important;\n}\n\n.teads-ui-component-endscreen.show .button.edge-touch-screen:hover {\n  opacity: 0.8!important;\n}\n\n\n.teads-ui-component-endscreen .button .icon {\n  float: left;\n  border-radius: 35px;\n  border: 2px solid white;\n  border-color: #294355;\n  height: 66px; /* 70 - border * 2 */\n  width: 66px;\n}\n\n.sm-screen .teads-ui-component-endscreen .button .icon {\n  height: 36px; /* 70 - border * 2 */\n  width: 36px;\n}\n.xs-screen .teads-ui-component-endscreen .button .icon {\n  border-width: 1px;\n  height: 30px; /* 70 - border * 2 */\n  width: 30px;\n}\n\n.teads-ui-component-endscreen .button .icon span {\n  display:block;\n  margin: 18px 22px;\n  height: 30px;\n  width: 30px;\n}\n.sm-screen .teads-ui-component-endscreen .button .icon span {\n  margin: 7px 10px;\n  height: 20px;\n  width: 16px;\n}\n.xs-screen .teads-ui-component-endscreen .button .icon span {\n  margin: 4px 6px;\n  height: 20px;\n  width: 16px;\n}\n\n.teads-ui-component-endscreen .button .text {\n  float: left;\n  line-height: 70px;\n  height: 70px;\n  font-size: 23px;\n  color: #294355;\n  padding-left: 25px;\n}\n.sm-screen .teads-ui-component-endscreen .button .text {\n  line-height: 40px;\n  height: 40px;\n  padding-left: 20px;\n  font-size: 17px;\n}\n.xs-screen .teads-ui-component-endscreen .button .text {\n  line-height: 30px;\n  height: 30px;\n  font-size: 14px;\n  padding-left: 15px;\n}\n\n.teads-ui-component-endscreen .countdown {\n  display: none;\n  color: #294355;\n}\n\n.teads-ui-component-uibutton.ui-invisible {\n  text-decoration: line-through;\n}\n\n.teads-ui-component-uibutton {\n  position: absolute;\n  bottom: 5px;\n  right: 5px;\n  width: 16px;\n  height: 16px;\n  text-align: center;\n  vertical-align: middle;\n  border: 1px solid #000000;\n  color: #000000;\n  user-select: none;\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  -ms-user-select: none;\n  cursor: pointer;\n  text-decoration: none;\n  background-color: #FFFFFF;\n  font-size: 12px;\n}\n\n/******************************************************************************\n * Countdown animation CSS\n *****************************************************************************/\n/* Load animation */\n@-webkit-keyframes load{0%{stroke-dashoffset:0}}\n@keyframes load{0%{stroke-dashoffset:0}}\n/* Container */\n.countdown-circle {\n    position: relative;\n    display: inline-block;\n    padding: 0;\n    margin: 0;\n    text-align: center;\n}\n\n.countdown-circle>li:after {\n  content: attr(data-countdown);\n  position: absolute;\n  width: 100%;\n  top: 0.3rem;\n  left: 0;\n  font-size: 1rem;\n  text-align: center;\n}\n\n/* Item */\n.countdown-circle>li {\n    display: inline-block;\n    position: relative;\n    text-align: center;\n    color: #93A2AC;\n    font-family: \'Helvetica\', Arial, sans-serif !important;\n    font-weight:100;\n}\n\n.countdown-circle svg {\n    width: 30px;\n    height: 30px;\n}\n.countdown-circle svg:nth-child(2) {\n    position: absolute;\n    left: 0;\n    top: 0;\n    transform: rotate(-90deg);\n    -webkit-transform: rotate(-90deg);\n    -moz-transform: rotate(-90deg);\n    -ms-transform: rotate(-90deg);\n}\n.countdown-circle svg:nth-child(2) path {\n    fill: none;\n    stroke-width: 20;\n    stroke-dasharray: 629;\n    stroke: #999;\n    opacity:.9;\n}\n\n/******************************************************************************\n * Equalizer animation CSS\n *****************************************************************************/\n\n.equalizer {\n  height: 20px;\n  width: 16px;\n  position: relative;\n}\n\n.equalizer .equalizer-bar {\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  width: 3px;\n  height: 12px;\n  background-color: white;\n  transition: height 1s ease;\n}\n\n.equalizer .equalizer-bar-1 {\n  left:4px;\n}\n.equalizer .equalizer-bar-2 {\n  left:8px;\n}\n.equalizer .equalizer-bar-3 {\n  left:12px;\n}\n\n/******************************************************************************\n * Brand Logo CSS\n *****************************************************************************/\n.teads-ui-component-brandlogo {\n  display: none;\n  opacity: .8;\n  cursor: pointer;\n  /* position */\n  position: absolute;\n  bottom: 0px;\n  left: 0px;\n  margin-left: 10px;\n  margin-bottom: 18px;\n  webkit-transition: background-color .250s; /* Safari */\n  transition: background-color .250s;\n  /* size */\n  width: 20%;\n  height: 10%;\n  max-height: 50px;\n  /* background */\n  background-repeat: no-repeat;\n  background-position-x: left;\n  background-position-y: bottom;\n  background-size: contain;\n}\n\n.sm-screen .teads-ui-component-brandlogo,\n.xs-screen .teads-ui-component-brandlogo {\n  margin-left: 5px;\n  width: 30%;\n  height: 15%;\n}\n\n/******************************************************************************\n * Start Screen CSS\n *****************************************************************************/\n.teads-ui-component-startscreen {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  -webkit-box-shadow: inset 0px 0px 85px rgba(0,0,0,0.1);\n  -moz-box-shadow:    inset 0px 0px 85px rgba(0,0,0,0.1);\n  box-shadow:         inset 0px 0px 85px rgba(0,0,0,0.1);\n  background-color: #FFFFFF;\n}\n\n/******************************************************************************\n * Common style : Keep it at the bottom to get CSS rules priority\n *****************************************************************************/\n.show {\n  display: block!important;\n}\n\n.show:hover {\n  opacity: 1!important;\n}\n.hide {\n  display: none;\n  opacity: 0;\n}\n\n.icon-book {\n\twidth: 26px;\n\theight: 29px;\n\tbackground-position: 0 0;\n}\n\n.xs-screen .icon-book, .sm-screen .icon-book {\n\twidth: 18px;\n\theight: 20px;\n\tbackground-position: -35px 0;\n}\n\n.icon-close {\n\twidth: 15px;\n\theight: 15px;\n\tbackground-position: -60px 0;\n}\n\n.xs-screen .icon-close, .sm-screen .icon-close {\n\twidth: 11px;\n\theight: 11px;\n\tbackground-position: -80px 0;\n}\n\n.icon-closeendscreen {\n\twidth: 15px;\n\theight: 15px;\n\tbackground-position: -100px 0;\n}\n\n.xs-screen .icon-closeendscreen, .sm-screen .icon-closeendscreen {\n\twidth: 11px;\n\theight: 11px;\n\tbackground-position: -120px 0;\n}\n\n.icon-collapse {\n\twidth: 15px;\n\theight: 15px;\n\tbackground-position: -140px 0;\n}\n\n.icon-contact {\n\twidth: 28px;\n\theight: 23px;\n\tbackground-position: -160px 0;\n}\n\n.xs-screen .icon-contact, .sm-screen .icon-contact {\n\twidth: 20px;\n\theight: 16px;\n\tbackground-position: -195px 0;\n}\n\n.icon-download {\n\twidth: 20px;\n\theight: 25px;\n\tbackground-position: -220px 0;\n}\n\n.xs-screen .icon-download, .sm-screen .icon-download {\n\twidth: 14px;\n\theight: 17px;\n\tbackground-position: -245px 0;\n}\n\n.icon-equalizer {\n\twidth: 15px;\n\theight: 15px;\n\tbackground-position: -265px 0;\n}\n\n.xs-screen .icon-equalizer, .sm-screen .icon-equalizer {\n\twidth: 11px;\n\theight: 11px;\n\tbackground-position: -285px 0;\n}\n\n.icon-learnmore {\n\twidth: 23px;\n\theight: 28px;\n\tbackground-position: -305px 0;\n}\n\n.xs-screen .icon-learnmore, .sm-screen .icon-learnmore {\n\twidth: 17px;\n\theight: 20px;\n\tbackground-position: -335px 0;\n}\n\n.icon-muteoff {\n\twidth: 22px;\n\theight: 15px;\n\tbackground-position: -360px 0;\n}\n\n.xs-screen .icon-muteoff, .sm-screen .icon-muteoff {\n\twidth: 16px;\n\theight: 11px;\n\tbackground-position: -390px 0;\n}\n\n.icon-muteon {\n\twidth: 22px;\n\theight: 15px;\n\tbackground-position: -415px 0;\n}\n\n.xs-screen .icon-muteon, .sm-screen .icon-muteon {\n\twidth: 16px;\n\theight: 11px;\n\tbackground-position: -445px 0;\n}\n\n.icon-replay {\n\twidth: 23px;\n\theight: 29px;\n\tbackground-position: -470px 0;\n}\n\n.xs-screen .icon-replay, .sm-screen .icon-replay {\n\twidth: 16px;\n\theight: 20px;\n\tbackground-position: -500px 0;\n}\n\n.icon-shop {\n\twidth: 29px;\n\theight: 29px;\n\tbackground-position: -525px 0;\n}\n\n.xs-screen .icon-shop, .sm-screen .icon-shop {\n\twidth: 20px;\n\theight: 20px;\n\tbackground-position: -560px 0;\n}\n\n.icon-signup {\n\twidth: 26px;\n\theight: 31px;\n\tbackground-position: -585px 0;\n}\n\n.xs-screen .icon-signup, .sm-screen .icon-signup {\n\twidth: 18px;\n\theight: 22px;\n\tbackground-position: -620px 0;\n}\n\n.icon-watchmore {\n\twidth: 16px;\n\theight: 20px;\n\tbackground-position: -645px 0;\n}\n\n.xs-screen .icon-watchmore, .sm-screen .icon-watchmore {\n\twidth: 11px;\n\theight: 14px;\n\tbackground-position: -670px 0;\n}\n\n.icon-book, .icon-close, .icon-closeendscreen, .icon-collapse, .icon-contact, .icon-download, .icon-equalizer, .icon-learnmore, .icon-muteoff, .icon-muteon, .icon-replay, .icon-shop, .icon-signup, .icon-watchmore {\n\tbackground-size: 690px 40px;\n}\n\n.no-svg .icon-book, .no-svg .icon-close, .no-svg .icon-closeendscreen, .no-svg .icon-collapse, .no-svg .icon-contact, .no-svg .icon-download, .no-svg .icon-equalizer, .no-svg .icon-learnmore, .no-svg .icon-muteoff, .no-svg .icon-muteon, .no-svg .icon-replay, .no-svg .icon-shop, .no-svg .icon-signup, .no-svg .icon-watchmore {\n\tbackground-image: url("{{assetsPath}}/default/player-sprite.png");\n}\n\n.icon-book, .icon-close, .icon-closeendscreen, .icon-collapse, .icon-contact, .icon-download, .icon-equalizer, .icon-learnmore, .icon-muteoff, .icon-muteon, .icon-replay, .icon-shop, .icon-signup, .icon-watchmore {\n\tbackground-image: url("{{assetsPath}}/default/player-sprite.svg");\n}\n\n\n\n/** Simulate the PlayerClick component from AdServer */\n.teads-ui-component-fullscreenbutton {\n  position: absolute;\n  top: 0;\n  right: 0;\n  width: 100%;\n  height: 100%;\n  background: none;\n}\n\n/** Will be over the closeButton on fullscreen, to simulate closeButton click */\n.fullscreen .teads-ui-component-fullscreenbutton,\n.fullscreen .teads-ui-component-fullscreenbutton .show {\n  width: 45px;\n  height: 45px;\n  z-index: 10 !important;\n}\n\n/** Display icon-collapse on fullscreen **/\n.teads-ui-component-fullscreenbutton .icon-collapse {\n  display: none;\n  margin-top: 10px;\n  margin-left: 20px;\n}\n\n.fullscreen .teads-ui-component-fullscreenbutton .icon-collapse {\n  display: block;\n}\n\n/** Hide close button when fullscreen, because collapse button is displayed **/\n.fullscreen .teads-ui-component-closebutton .icon-close {\n  display: none;\n}\n\n      </style>\n      <div id="layout-video-component">\n        <div class="teads-ui-component-startscreen"></div>\n        <div id="vpaid-container"></div>\n        <div class="teads-ui-component-fullscreenbutton">\n          <div class="icon-collapse"></div>\n        </div>\n        <div class="teads-ui-component-progressbar">\n          <div class="progress"></div>\n        </div>\n        <div class="teads-ui-component-soundbutton"></div>\n        <div class="teads-ui-component-closebutton"></div>\n        <div class="teads-ui-component-clickbutton"></div>\n        <div class="teads-ui-component-brandlogo"></div>\n        <div class="teads-ui-component-clicktoplay gradient">\n          <div class="icon-watchmore"></div>\n        </div>\n        <div class="teads-ui-component-endscreen"></div>\n      </div>\n    </div>\n  </body>\n</html>\n')}(b=a.template||(a.template={}))}(b=a.ui||(a.ui={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(c){function d(d,e,f){var g=c.call(this)||this;if(g.mainContainer=d,g.config=f,g.isFullscreen=!1,g.components=[],g.componentsByName={},g.logger=new a.Logger("ui.VPAIDUI"),g.initAdStartTime=0,g.logger.debug("Init Layout",d,f),g.config.container){g.container=g.config.container;var h=g.mainContainer.firstElementChild;h&&h.id===b.mainComponentsContainerId&&g.mainContainer.removeChild(h)}else g.container=a.HTMLHelper.createIframe(),g.container.style.width="1px",g.container.style.height="1px";return g.container.parentNode||g.mainContainer.appendChild(g.container),g.container.contentWindow.document.write(e),g.container.contentWindow.document.close(),g.mainComponentsContainer=g.container.contentWindow.document.getElementById(b.mainComponentsContainerId),(a.Context.isAmp()||a.Context.isIABSafeFrame())&&(g.mainContainer.appendChild(g.mainComponentsContainer),g.mainContainer.removeChild(g.container)),g.videoComponentsContainer=g.mainComponentsContainer.ownerDocument.getElementById(b.videoComponentsContainerId),g}return __extends(d,c),d.prototype.initAd=function(b,d,e,f,g,h){return void 0===g&&(g=""),this.vpaid?(this.resize(b,d,e),this.config.vpaidUrl&&Math.random()<.1&&(a.vpaid.Timeout.initAd=12e4,this.initAdStartTime=Date.now()),this.logger.debug("initAd"),c.prototype.initAd.call(this,b,d,e,f,g,h)):void this.logger.error("You must register vpaid creative to be wrapped using setVPAID() method")},d.prototype.startAd=function(){return this.status<a.vpaid.VpaidStatus.LOADED?void this.dispatchEvent(a.vpaid.VPAIDEvent.AdLog,"VPAID not started, use initAd(), and wait for AdLoaded event before call startAd() method"):this.status>=a.vpaid.VpaidStatus.STARTING?void this.dispatchEvent(a.vpaid.VPAIDEvent.AdLog,"cannot call startAd() twice, already started"):(this.render(this.getVPAID()),this.logger.debug("startAd"),void c.prototype.startAd.call(this))},d.prototype.resizeAd=function(a,b,d){void 0===d&&(d="normal"),a<=0||b<=0||(this.resize(a,b,d),c.prototype.resizeAd.call(this,a,b,d))},d.prototype.stopAd=function(){var b=this,d=function(){a.Timer.setTimeout(function(){b.container.parentNode&&b.container.parentNode.removeChild(b.container)},2e3),b.dispatchedEvents[a.vpaid.VPAIDEvent.AdStopped]||b.dispatchEvent(a.vpaid.VPAIDEvent.AdStopped)};this.isStopped?(this.logger.debug("Wrapped vpaid already stopped, remove UI"),d()):(this.logger.debug("Wrapped vpaid not stopped, try to stop it"),this.vpaid.subscribe(d,a.vpaid.VPAIDEvent.AdStopped),c.prototype.stopAd.call(this))},d.prototype.pauseAd=function(){this.callVPAIDMethod("pauseAd")},d.prototype.resumeAd=function(){this.callVPAIDMethod("resumeAd")},d.prototype.getAdWidth=function(){return this.isRendered&&!this.isStopped&&c.prototype.getAdWidth.call(this)?c.prototype.getAdWidth.call(this):a.Dom.getBoundingClientRect(this.getMainComponentsContainer()).width},d.prototype.getAdHeight=function(){return this.isRendered&&!this.isStopped&&c.prototype.getAdHeight.call(this)?c.prototype.getAdHeight.call(this):a.Dom.getBoundingClientRect(this.getMainComponentsContainer()).height},d.prototype.setAdVolume=function(a){return isNaN(a)?(this.logger.warn("setAdVolume: volume argument is NaN"),this.getAdVolume()):c.prototype.setAdVolume.call(this,a)},d.prototype.getAdExpanded=function(){return this.isFullscreen},d.prototype.setVPAID=function(d){var e=this;if(this.vpaid)return void this.logger.warn("setVPAID() : vpaid ad already register, can't use twice");this.logger.debug("setVPAID() : Register vpaid ad"),c.prototype.setVPAID.call(this,d),d.subscribe(function(){e.isStopped=!0},a.vpaid.VPAIDEvent.AdStopped);var f=function(a){var c=b.ComponentHelper.getOverridenEventComponents(e.components,a.type);0===c.length&&e.handleVpaidEvent(a)};for(var g in a.vpaid.VPAIDEvent)if(a.vpaid.VPAIDEvent.hasOwnProperty(g)){var h=a.vpaid.VPAIDEvent[g];d.subscribe(a.vpaid.VPAIDHelper.createVPAIDEventCallback(f,h),h)}for(var g in a.vpaid.CustomVPAIDEvent)if(a.vpaid.CustomVPAIDEvent.hasOwnProperty(g)){var h=a.vpaid.CustomVPAIDEvent[g];d.subscribe(a.vpaid.VPAIDHelper.createVPAIDEventCallback(f,h),h)}},d.prototype.getVPAID=function(){return this.vpaid},d.prototype.getVPAIDContainer=function(){return this.mainComponentsContainer.ownerDocument.getElementById(b.vpaidContainerId)},d.prototype.getMainContainer=function(){return this.mainContainer},d.prototype.getMainComponentsContainer=function(){return this.mainComponentsContainer.ownerDocument.getElementById(b.mainComponentsContainerId)},d.prototype.getCreativeContainer=function(){return this.getVPAID().container.getCreativeContainer()},d.prototype.getVideoComponentsContainer=function(){return this.mainComponentsContainer.ownerDocument.getElementById(b.videoComponentsContainerId)},d.prototype.getComponent=function(a){return this.componentsByName[a]},d.prototype.getConfig=function(){return this.config},d.prototype.getContainer=function(){return this.container},d.prototype.getContentWindow=function(){return this.getContainer().contentWindow},d.prototype.render=function(c){var d=this;if(!this.isRendered){this.isRendered=!0,this.show(),this.resize(c.getAdWidth(),c.getAdHeight());var e=function(a){d.handleVpaidEvent(a)};this.logger.debug("init components:",this.config.components);for(var f in b.components)if(b.components.hasOwnProperty(f)&&b.components[f])for(var g=b.componentBaseClassName+f,h=a.Dom.getElementsByClassName(g,this.getMainComponentsContainer(),this.getContentWindow()),i=0,j=h.length;i<j;i++)if(this.config.components&&this.config.components[f]&&this.config.components[f].disable||this.config.disableAllComponents&&this.config.components[f].disable!==!1){var k=h[i];k&&k.parentNode.removeChild(k),this.logger.debug("disable component "+f)}else{var l=new b.components[f](this,h[i],c,this.config.components&&this.config.components[f]?this.config.components[f]:{},e);this.components.push(l),this.componentsByName[f]=l;try{l.init(),this.logger.debug("init component "+f,this.config.components&&this.config.components[f]?this.config.components[f]:null)}catch(a){this.logger.error('error init component "'+f+'"',a.toString())}}}},d.prototype.showAllComponents=function(){b.ComponentHelper.showHideAllComponents(this.components,!0)},d.prototype.hideAllComponents=function(){b.ComponentHelper.showHideAllComponents(this.components,!1)},d.prototype.showComponent=function(a){b.ComponentHelper.showHideComponent(this.componentsByName,a,!0)},d.prototype.hideComponent=function(a){b.ComponentHelper.showHideComponent(this.componentsByName,a,!1)},d.prototype.dispatchCustomEvent=function(a,b){this.dispatchEvent(a,b)},d.prototype.getProperties=function(){return{adLinear:this.getAdLinear(),adWidth:this.getAdWidth(),adHeight:this.getAdHeight(),adExpanded:this.getAdExpanded(),adSkippableState:this.getAdSkippableState(),adRemainingTime:this.getAdRemainingTime(),adDuration:this.getAdDuration(),adVolume:this.getAdVolume()}},d.prototype.toJSON=function(){return a.JSON.stringify(this.getProperties())},d.prototype.handleVpaidEvent=function(b){switch(b.type){case a.vpaid.VPAIDEvent.AdSizeChange:this.getAdWidth()&&this.getAdHeight()&&this.isStopped&&(this.logger.debug("resize with AdSizeChange event"),
this.resize(this.getAdWidth(),this.getAdHeight(),this.isFullscreen?"fullscreen":"normal"));break;case a.vpaid.VPAIDEvent.AdLoaded:if(this.initAdStartTime>0)try{var d=a.URIHelper.parse(this.config.vpaidUrl).hostname,e=Date.now()-this.initAdStartTime,f=a.Timing.getTimingByRegex(/t.teads.tv\/track\?action=adCall/),g=0;f&&(g=Math.round(f.startTime)),this.logger.info("initAd response time",e,d,g),a.player.playerSumologic.sendInfo("initad-rt "+e+"|"+d+"|"+g,null,1)}catch(a){}}c.prototype.handleVpaidEvent.call(this,b)},d.prototype.callVPAIDMethod=function(d,e){void 0===e&&(e=[]),a.ArrayHelper.forEach(this.components,function(a){a.onMethod(d,e)});var f=b.ComponentHelper.getOverridenMethodComponents(this.components,d);if(0===f.length)return c.prototype.callVPAIDMethod.call(this,d,e);var g;return f.forEach(function(a){g=a.onOverridenMethod(d,e)}),g},d.prototype.resize=function(b,c,d){var e=this;if(void 0===d&&(d="normal"),!(b<=0||c<=0)){var f=b+"px",g=c+"px";this.getVideoComponentsContainer().style.width===f&&this.getVideoComponentsContainer().style.height===g&&this.container.style.width===f&&this.container.style.height===g||(this.getVideoComponentsContainer().style.width=f,this.getVideoComponentsContainer().style.height=g,this.container.style.setProperty("width",f,"important"),this.container.style.setProperty("height",g,"important"),this.container.style.setProperty("max-height",g,"important"),this.logger.debug("vpaidui resize",b,c,d),!this.isFullscreen&&"fullscreen"===d||this.isFullscreen&&"normal"===d?(this.isFullscreen="fullscreen"===d,this.dispatchEvent(a.vpaid.VPAIDEvent.AdExpandedChange)):this.logger.debug("no fullscreen exit or enter"));var h=this.getVPAIDContainer();h.style.width=f,h.style.height=g;var i="l-screen";b<=480?i="xs-screen":b<=640&&(i="sm-screen"),a.ArrayHelper.forEach(["l-screen","xs-screen","sm-screen"],function(b){b!==i&&a.HTMLHelper.removeClass(e.mainComponentsContainer,b)}),a.HTMLHelper.addClass(this.mainComponentsContainer,i)}},d.prototype.show=function(){this.container.style.display="block"},d.prototype.hide=function(){this.container.style.display="none"},d}(a.vpaid.BaseVPAIDJSWrapper);b.VPAIDUI=c}(b=a.ui||(a.ui={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function b(){}return b.execCallback=function(c,d,e){try{c.apply(c,d)}catch(i){var f=new a.Logger("Callback"),g="user callback threw an exception: "+i;if(f.error(g,i,c,d),e){var h=a.VastException.UNDEFINED;h.message=g,b.execCallback(e,[new a.VastException(h,i)])}}},b}();b.CallbackHelper=c}(b=a.vast||(a.vast={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function c(){}return c.getXMLDoc=function(d){var e;if(c.supportActiveX){try{e=new ActiveXObject("Msxml2.DOMDocument.6.0"),b.VASTParser.logger.debug("XML Parser - ActiveXObject - Msxml2.DOMDocument.6.0")}catch(a){try{e=new ActiveXObject("Msxml2.DOMDocument.3.0"),b.VASTParser.logger.debug("XML Parser - ActiveXObject - Msxml2.DOMDocument.3.0")}catch(a){e=new ActiveXObject("Microsoft.XMLDOM"),b.VASTParser.logger.debug("XML Parser - ActiveXObject - Microsoft.XMLDOM")}}e.async=!1,e.loadXML(d)}else if(window.DOMParser){var f=new DOMParser;e=f.parseFromString(d,"text/xml")}else try{a.player.playerSumologic.sendError("VAST PARSER - NO XML PARSER FOUND")}catch(a){}return e},c.getNodeContent=function(a){if(a)try{var b=c.getFirstChild(a);return b?c.getNodeTextContent(b):""}catch(a){}},c.getAttributeValue=function(a,b){try{if(a.attributes[b])return String(a.attributes[b].value);for(var c=0;c<a.attributes.length;c++)if(a.attributes[c].name===b)return String(a.attributes[c].value)}catch(a){}},c.isAllWhitespace=function(a){return!/[^\t\n\r ]/.test(a.textContent?a.textContent:a.text)},c.isIgnorable=function(a){return 8===a.nodeType||3===a.nodeType&&c.isAllWhitespace(a)},c.getFirstChild=function(a){for(var b=a.firstChild;b;){if(!c.isIgnorable(b))return b;b=b.nextSibling}return null},c.getNodeTextContent=function(a){var b=a.textContent?a.textContent:a.text,c=b.replace(/[\t\n\r ]+/g," ");return" "===c.charAt(0)&&(c=c.substring(1,c.length))," "===c.charAt(c.length-1)&&(c=c.substring(0,c.length-1)),c},c.supportActiveX=Object&&Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(window,"ActiveXObject")||"ActiveXObject"in window||!!window.ActiveXObject,c}();b.XMLHelper=c}(b=a.vast||(a.vast={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b=function(){function a(){this.error=[],this.click=[],this.pause=[],this.resume=[],this.skip=[],this.creativeView=[],this.start=[],this.firstQuartile=[],this.midpoint=[],this.thirdQuartile=[],this.complete=[],this.impression=[],this.close=[],this.progress=[],this.mute=[],this.unmute=[],this.rewind=[],this.fullscreen=[],this.exitFullscreen=[],this.expand=[],this.collapse=[],this.acceptInvitationLinear=[],this.acceptInvitation=[],this.closeLinear=[],this.noAd=[],this.noLinearAd=[],this.customClicks=[],this.billable=[],this.otherAdInteraction=[]}return a}();a.TrackingDefinition=b;var c=function(){function a(){}return a.error="error",a.click="click",a.pause="pause",a.resume="resume",a.skip="skip",a.creativeView="creativeView",a.start="start",a.firstQuartile="firstQuartile",a.midpoint="midpoint",a.thirdQuartile="thirdQuartile",a.complete="complete",a.impression="impression",a.close="close",a.progress="progress",a.mute="mute",a.unmute="unmute",a.rewind="rewind",a.fullscreen="fullscreen",a.exitFullscreen="exitFullscreen",a.expand="expand",a.collapse="collapse",a.acceptInvitationLinear="acceptInvitationLinear",a.acceptInvitation="acceptInvitation",a.closeLinear="closeLinear",a.noAd="noAd",a.noLinearAd="noLinearAd",a.customClicks="customClicks",a.billable="billable",a.otherAdInteraction="otherAdInteraction",a}();a.TrackingEvent=c;var d=function(){function a(){}return a.CONTENTPLAYHEAD="[CONTENTPLAYHEAD]",a.CACHEBUSTING="[CACHEBUSTING]",a.ERRORCODE="[ERRORCODE]",a.ASSETURI="[ASSETURI]",a.MEDIAFILETYPE="[MEDIAFILETYPE]",a.VIEWABILITY="[VIEWABILITY]",a}();a.TrackingMacro=d}(b=a.vast||(a.vast={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b=function(){function b(){this.version=2,this.tracking=new a.TrackingDefinition,this.clickThrough=[],this.mediaFiles=[],this.title="",this.wrappers=[],this.skippable=!1,this.skipDelay=0,this.extensions=[]}return b.prototype.merge=function(a){a.version&&this.version<a.version&&(this.version=a.version),!this.url&&a.url&&(this.url=a.url),!this.title&&a.title&&(this.title=a.title),!this.adSystem&&a.adSystem&&(this.adSystem=a.adSystem),!this.id&&a.id&&(this.id=a.id),!this.creativeId&&a.creativeId&&(this.creativeId=a.creativeId),!this.duration&&a.duration&&(this.duration=a.duration),!this.adParameters&&a.adParameters&&(this.adParameters=a.adParameters),a.adTagUri&&this.wrappers.push(a.adTagUri);var b,c;for(var d in a.tracking)for(b=0,c=a.tracking[d].length;b<c;b++)this.tracking[d].push(a.tracking[d][b]);for(b=0,c=a.mediaFiles.length;b<c;b++)this.mediaFiles.push(a.mediaFiles[b]);for(b=0,c=a.clickThrough.length;b<c;b++)this.clickThrough.push(a.clickThrough[b]);for(b=0,c=a.extensions.length;b<c;b++)this.extensions.push(a.extensions[b]);!this.skippable&&a.skippable&&(this.skippable=!0,this.skipDelay=a.skipDelay)},b}();a.LinearAd=b}(b=a.vast||(a.vast={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function c(){}return c.parse=function(c,d,e){var f=new b.LinearAd;try{var g=b.XMLHelper.getXMLDoc(c),h=g.documentElement;if("VAST"!==h.tagName)return e(new a.VastException(a.VastException.XML_PARSE),f);for(var i=h.getElementsByTagName("Error"),j=0,k=i.length;j<k;j++){var l=b.XMLHelper.getNodeContent(i[j]);l&&f.tracking.error.push({url:l,data:null})}var m=h.getElementsByTagName("Ad")[0];if(!m)return e(new a.VastException(a.VastException.NO_ADS),f);if(f.version=parseInt(b.XMLHelper.getAttributeValue(h,"version"),10),f.version<2)return e(new a.VastException(a.VastException.UNSUPPORTED_VERSION),f);var n=m.getElementsByTagName("Creative")[0];n&&(f.creativeId=b.XMLHelper.getAttributeValue(n,"id")||b.XMLHelper.getAttributeValue(n,"adID"));var o=!!m.getElementsByTagName("Wrapper").length,p=m.getElementsByTagName("Linear")[0];if(!o&&!p)return e(new a.VastException(a.VastException.LINEARITY),f);f.id=b.XMLHelper.getAttributeValue(m,"id"),f.adTagUri=b.XMLHelper.getNodeContent(m.getElementsByTagName("VASTAdTagURI")[0]),f.title=b.XMLHelper.getNodeContent(m.getElementsByTagName("AdTitle")[0]),f.adSystem=b.XMLHelper.getNodeContent(m.getElementsByTagName("AdSystem")[0]);for(var q=m.getElementsByTagName("ClickThrough"),r=0,s=q.length;r<s;r++)f.clickThrough.push(b.XMLHelper.getNodeContent(q[r]));for(var t=m.getElementsByTagName("Impression"),r=0,s=t.length;r<s;r++)f.tracking.impression.push({url:b.XMLHelper.getNodeContent(t[r]),data:null});var u=m.getElementsByTagName("ClickTracking");for(r=0,s=u.length;r<s;r++)f.tracking.click.push({url:b.XMLHelper.getNodeContent(u[r]),data:null});if(p){var v=a.Utils.seconds(b.XMLHelper.getAttributeValue(p,"skipoffset"));f.skippable=!isNaN(v),f.skipDelay=v||0,f.duration=a.Utils.seconds(b.XMLHelper.getNodeContent(p.getElementsByTagName("Duration")[0])),f.adParameters=b.XMLHelper.getNodeContent(p.getElementsByTagName("AdParameters")[0]);var w=p.getElementsByTagName("Tracking");for(r=0,s=w.length;r<s;r++){var x=b.XMLHelper.getAttributeValue(w[r],"event");if(f.tracking.hasOwnProperty(x)){var y=null;if("progress"===x)if(y=b.XMLHelper.getAttributeValue(w[r],"offset"),y.indexOf(":")>0)y=a.Utils.seconds(y);else{var z=a.StringHelper.trim(y).match(/^([0-9\.]+)%$/);if(!z){this.logger.error("Wrong offset for progress tracking: "+y);continue}y=f.duration*parseInt(z[1],10)/100}f.tracking[x].push({url:b.XMLHelper.getNodeContent(w[r]),data:y})}}var A=p.getElementsByTagName("MediaFile");for(r=0,s=A.length;r<s;r++){var B=A[r],C=b.XMLHelper.getAttributeValue(B,"type");f.mediaFiles.push({type:C,url:b.XMLHelper.getNodeContent(B),width:parseInt(b.XMLHelper.getAttributeValue(B,"width"),10),height:parseInt(b.XMLHelper.getAttributeValue(B,"height"),10),delivery:b.XMLHelper.getAttributeValue(B,"delivery"),bitrate:parseInt(b.XMLHelper.getAttributeValue(B,"bitrate"),10),api:b.XMLHelper.getAttributeValue(B,"apiFramework"),scalable:!!b.XMLHelper.getAttributeValue(B,"scalable"),id:b.XMLHelper.getAttributeValue(B,"id"),minBitrate:parseInt(b.XMLHelper.getAttributeValue(B,"minBitrate"),10),maxBitrate:parseInt(b.XMLHelper.getAttributeValue(B,"maxBitrate"),10),maintainAspectRatio:!!b.XMLHelper.getAttributeValue(B,"maintainAspectRatio"),codec:b.XMLHelper.getAttributeValue(B,"codec"),adParameters:/(javascript|flash)/g.test(C)?f.adParameters:null})}}var D=m.getElementsByTagName("Extension"),E=a.JSON.parse(a.JSON.stringify(f));for(r=0,s=D.length;r<s;r++)f.extensions.push({type:b.XMLHelper.getAttributeValue(D[r],"type"),content:b.XMLHelper.getNodeContent(D[r]),xml:D[r],definition:E});d(f)}catch(b){var F=a.Exception.get(a.VastException.UNDEFINED.id,"VASTParser.parse error",b);e(F,f)}},c.logger=new a.Logger("vast.VASTParser"),c}();b.VASTParser=c}(b=a.vast||(a.vast={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){a.asset={corsswf:"cors.swf"}}(b=a.vast||(a.vast={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function c(){}return c.logXhr=function(b){try{a.player.playerSumologic.sendInfo("xhr "+Number(b))}catch(a){}},c.load=function(d,e,f,g,h){var i=this;void 0===h&&(h=!0),d=c.updateUrlPlaceholder(d),c.logXhr(Number(h));var j=d.match(/\/\/.*/);d=j?a.Utils.getProtocol()+j[0]:d,this.logger.debug("Loading VAST file URL:",d," - credentials:",h);var k,l=!1,m=function(j){return clearTimeout(k),!l&&h?(i.logger.warn("load file with credentials failed, try without credentials before flash proxy"),void c.load(d,e,f,g,!1)):(i.logger.warn("load file with javascript failed"),void(!l&&a.FlashHelper.hasFlash()?c.loadWithFlash(d,e,f,g):(c.logXhr(3),i.logger.warn("Error loading URL",d),g(j,new b.LinearAd))))};try{var n=a.Request.createXmlHttpRequest();n.open("GET",d,!0),n.withCredentials=h;var o=function(){if(clearTimeout(k),!l){o=function(){};var b;if("string"==typeof n.responseXML)b=n.responseXML;else if("string"==typeof n.responseText)b=n.responseText;else{if("string"!=typeof n.response)return void m(a.Exception.get(a.VastException.WRAPPER_TIMEOUT.id,"empty xhr response"));b=n.response}c.logXhr(Number(h)),f(a.StringHelper.trim(b))}};a.Request.isXMLHttpRequest(n)?n.onreadystatechange=function(){if(4===n.readyState){if(n.status<200||n.status>=400){var b=a.Exception.get(a.VastException.WRAPPER_TIMEOUT.id,"invalid XHR status code "+n.status);return i.logger.warn("server return an invalid status code : "+b.toString()),404===n.status&&(l=!0),m(b)}o()}}:(n.onerror=function(){return m(a.Exception.get(a.VastException.WRAPPER_TIMEOUT.id,"XHR onerror"))},n.onprogress=function(){},n.onload=function(){return o()}),n.send();var p=e.timeout||b.VASTLib.TIMEOUT;k=setTimeout(function(){l=!0,m(a.Exception.get(a.VastException.WRAPPER_TIMEOUT.id,"no response after "+p+"ms"))},p)}catch(b){this.logger.warn("Could not load XML file directly",b),l=!0,m(a.Exception.get(a.VastException.UNDEFINED.id,"VASTLoader.load error "+b,b))}},c.loadWithFlash=function(d,e,f,g){var h=this,i="vastloader_"+Date.now()+"_"+Math.round(1e3*Math.random());this.logger.debug("try loading file with flash cors proxy",i);var j,k=e.timeout||b.VASTLib.TIMEOUT,l=!1;window[i]=function(e,k){if(!l){if(clearTimeout(j),e)c.logXhr(2),h.logger.debug("Flash CORS proxy successfully load VAST file",d),f(a.StringHelper.trim(decodeURIComponent(k)));else{h.logger.error("Unable to load VAST file with flash CORS proxy"),c.logXhr(3);var m=a.Exception.get(a.VastException.WRAPPER_TIMEOUT.id,"flash CORS proxy fail to load XML");g(m,new b.LinearAd)}window[i]=void 0}};var m=e.assetsUrl+"/"+b.asset.corsswf,n=document.createElement("div");n.innerHTML='<object id="'+i+'" name="'+i+'" data="'+m+'" type="application/x-shockwave-flash" width="0" height="0"><param name="allowScriptAccess" value="always"/><param name="movie" value="'+m+'"/><param name="flashvars" value="url='+encodeURIComponent(d)+"&handler="+i+'"/></object>',document.body.appendChild(n),j=setTimeout(function(){l=!0;var c=a.Exception.get(a.VastException.WRAPPER_TIMEOUT.id,"flash cors have no response after "+k+"ms");g(c,new b.LinearAd)},k)},c.updateUrlPlaceholder=function(b){try{var c=a.StringHelper.rand(8);return b.replace(/\[timestamp\]/gi,String(Date.now())).replace(/\[(random|cachebusting|random_number|TTD_CACHEBUSTER)\]/gi,c).replace(/ord=(%n|\{RANDOMNUM\}|%25%25TTD_CACHEBUSTER%25%25)/gi,"ord="+c)}catch(a){this.logger.warn("updateUrlPlaceholder threw an exception: "+a)}return b},c.logger=new a.Logger("vast.VASTLoader"),c}();b.VASTLoader=c}(b=a.vast||(a.vast={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){b.IAS_FIREWALL="fw",b.IAS_CAMPAIGN_MONITORING="cm";var c=function(){function c(){}return c.getExtension=function(b){return a.ArrayHelper.filter(b.extensions,function(a){return a.type===c.extensionType})[0]},c.getIASConfig=function(d){var e=c.getExtension(d);if(e){var f;try{f=a.JSON.parse(e.content)}catch(a){}if(f.type===b.IAS_FIREWALL&&f.data.partner&&f.data.advEntityId&&f.data.pubEntityId||f.type===b.IAS_CAMPAIGN_MONITORING&&f.data.partner&&f.data.anId)return f}},c.isIASVASTUrl=function(a){return c.isIASVASTFirewallUrl(a)||c.isIASVASTCampaignMonitoringUrl(a)},c.bypassVastUrl=function(d){c.logger.debug("bypass from vast url: "+d);var e=c.getIASData(d);return e&&e.originalVast&&(e.newVast='<?xml version="1.0" encoding="UTF-8"?>\n        <VAST version="3.0">\n          <Ad id="teads-ias-custom-wrapper">\n          <Wrapper>\n            <AdSystem>Teads - IAS</AdSystem>\n            <VASTAdTagURI><![CDATA['+e.originalVast+']]></VASTAdTagURI>\n            <Extensions>\n              <Extension type="teads-IAS"><![CDATA['+a.JSON.stringify(e.config)+"]]></Extension>\n            </Extensions>\n          </Wrapper>\n          </Ad>\n        </VAST>",b.vastSumologic.sendInfo("ias-bypass in vast url done")),e},c.bypassAdParameters=function(d){c.logger.debug("bypass from AdParameters");var e=a.Dom.htmlDecode(d.adParameters);b.VASTParser.parse(e,function(e){var f=c.getIASData(e.adTagUri);f&&f.originalVast&&(d.extensions.push({type:"teads-IAS",content:a.JSON.stringify(f.config),definition:d,xml:null}),d.adParameters=d.adParameters.replace(a.Dom.htmlEncode(f.iasUrl),a.Dom.htmlEncode(f.originalVast)),b.vastSumologic.sendInfo("ias-bypass in adParams done"))},function(a,d){c.logger.error("AdParamaters parsing failed: "+a),b.vastSumologic.sendError("ias-bypass adParams parsing failed")})},c.isIASVASTFirewallUrl=function(a){return c.vastFirewallRegexp.test(a)},c.isIASVASTCampaignMonitoringUrl=function(a){return c.vastCampaignMonitoringRegexp.test(a)},c.getIASData=function(a){return c.isIASVASTFirewallUrl(a)?c.getFirewallData(a):c.isIASVASTCampaignMonitoringUrl(a)?c.getCampaignMonitoringData(a):void 0},c.getFirewallData=function(a){var d,e=c.vastFirewallRegexp.exec(a);return e&&(d={config:{type:b.IAS_FIREWALL,data:{partner:c.partnerCode,advEntityId:e[1],pubEntityId:e[2]}},originalVast:/^((http|https)\:){0,1}\/\//.test(e[3])?e[3]:decodeURIComponent(e[3]),iasUrl:e[0],newVast:null},b.vastSumologic.sendInfo("ias-bypass fw"+d.config.data.advEntityId+"|"+d.config.data.pubEntityId+"|"+d.originalVast)),d.originalVast=this.sanitizeOriginalVast(d.originalVast),d},c.getCampaignMonitoringData=function(d){var e,f=c.vastCampaignMonitoringRegexp.exec(d);if(f){var g=a.StringHelper.match(f[0],/anId=(.*?)&/),h=g[1],i=void 0===h?null:h,j=a.StringHelper.match(f[0],/advId=(.*?)&/),k=j[1],l=void 0===k?null:k,m=a.StringHelper.match(f[0],/campId=(.*?)&/),n=m[1],o=void 0===n?null:n,p=a.StringHelper.match(f[0],/pubId=(.*?)&/),q=p[1],r=void 0===q?null:q,s=a.StringHelper.match(f[0],/placementId=(.*?)&/),t=s[1],u=void 0===t?null:t,v=a.StringHelper.match(f[0],/chanId=(.*?)&/),w=v[1],x=void 0===w?null:w;e={config:{type:b.IAS_CAMPAIGN_MONITORING,data:{partner:c.partnerCode,anId:i,advId:l,campId:o,pubId:r,placementId:u,chanId:x}},originalVast:/^((http|https)\:){0,1}\/\//.test(f[1])?f[1]:decodeURIComponent(f[1]),iasUrl:f[0],newVast:null},b.vastSumologic.sendInfo("ias-bypass cm"+e.config.data.anId+"|"+e.originalVast)}return e.originalVast=this.sanitizeOriginalVast(e.originalVast),e},c.sanitizeOriginalVast=function(a){return c.adserverRegexp.test(a)?a.split("&")[0]:a},c.extensionType="teads-IAS",c.partnerCode="teads",c.iasRegexp=/((http|https)\:)?\/\/([^\/]+)\.adsafeprotected\.com\/.*/,c.adserverRegexp=/(?:(?:http|https)\:)?\/\/adserver\.adtech\.de\/(.*)/,c.vastFirewallRegexp=/(?:(?:http|https)\:)?\/\/fw\.adsafeprotected\.com\/vast\/fwjsvid\/st\/(\d+)\/(\d+)\/skeleton\.js.*originalVast=(.*)/,c.vastCampaignMonitoringRegexp=/(?:(?:http|https)\:)?\/\/pixel\.adsafeprotected\.com\/vast.*anId=\d+.*originalVast=(.*)/,c.logger=new a.Logger("vast.IAS"),c}();b.IAS=c}(b=a.vast||(a.vast={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){b.vastSumologic=new a.Sumologic;var c=function(){function c(b){this.config=b,this.logger=new a.Logger("vast.VASTLib"),this.logger.debug("new",this),this.wrappersLimit=this.config.wrappersLimit||c.WRAPPERS_LIMIT}return c.prototype.load=function(a,b,c){this.processVast(!0,a,b,c)},c.prototype.parse=function(a,b,c){this.processVast(!1,a,b,c)},c.prototype.processVast=function(c,d,e,f){var g=Date.now(),h=function(b){var c=Date.now()-g;try{a.player.playerSumologic.sendInfo("parse "+b.wrappers.length+" "+c)}catch(a){}e(b)},i=function(a,b){f(a,b)};c?this.loadXml(new b.LinearAd,d,h,i):this.parseXml(new b.LinearAd,d,h,i)},c.prototype.loadXml=function(a,c,d,e){var f=this;if(a.url||(a.url=c),this.config.replaceIASVPAID&&b.IAS.iasRegexp.test(c)&&b.IAS.isIASVASTUrl(c)){var g=b.IAS.bypassVastUrl(c);if(g)return a.mediaFiles=[],a.adParameters=null,this.parseXml(a,g.newVast,d,e)}b.VASTLoader.load(c,this.config,function(b){f.parseXml(a,b,d,e)},e)},c.prototype.parseXml=function(c,d,e,f){var g=this;b.VASTParser.parse(d,function(d){if(c.merge(d),d.adTagUri)c.wrappers.length>g.wrappersLimit?f(new a.VastException(a.VastException.WRAPPER_LIMIT),c):(g.logger.info("load wrapper",d.adTagUri),g.loadXml(c,d.adTagUri,e,function(a,b){f(a,c)}));else if(g.config.replaceIASVPAID&&b.IAS.iasRegexp.test(c.adParameters)&&b.IAS.isIASVASTUrl(c.adParameters)&&b.IAS.bypassAdParameters(c),0===c.mediaFiles.length){var h=a.Exception.get(a.VastException.WRAPPER.id,"empty mediafiles in VAST definition");g.logger.error(h.getFullMessage()),f(h,c)}else e(c)},function(a,b){c.merge(b),f(a,c)})},c.TIMEOUT=7e3,c.WRAPPERS_LIMIT=10,c}();b.VASTLib=c}(b=a.vast||(a.vast={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function b(a,b,c,d,e,f){void 0===b&&(b=[]),void 0===c&&(c=[]),void 0===d&&(d=!1),void 0===e&&(e=!0),void 0===f&&(f=[]),this.name=a,this.before=b,this.after=c,this.multiple=d,this.metadata=e,this.resources=f,this.tracked=[],this.eventIsTracked=!1,"progress"===a&&(this.multiple=!0)}return b.prototype.getName=function(){return this.name},b.prototype.getBefore=function(){return this.before},b.prototype.getAfter=function(){return this.after},b.prototype.isMultiple=function(){return this.multiple},b.prototype.isMetadata=function(){return this.metadata},b.prototype.getResources=function(b){return a.ArrayHelper.filter(this.resources,function(a){return!(a.offset>0)||b>=0&&a.offset>=0&&b>=a.offset&&!a.fired})},b.prototype.getAllResources=function(){return this.resources},b.prototype.removeResources=function(){this.resources=[]},b.prototype.hasResources=function(){return this.resources.length>0},b.prototype.addResource=function(a,b){this.resources.push({url:a,offset:b})},b.prototype.setTracked=function(){this.eventIsTracked=!0},b.prototype.isTracked=function(){return this.eventIsTracked},b.prototype.addTracked=function(a,b){this.tracked.push({time:b,url:a})},b.prototype.getTracked=function(){return this.tracked},b.prototype.isTrackable=function(){return!this.eventIsTracked||this.isMultiple()},b}();b.Tracking=c}(b=a.tracker||(a.tracker={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function b(b,c,d){if(void 0===d&&(d=!0),this.key=b,this.value=c,this.multiple=d,this.logger=new a.Logger("tracker.Metadata"),!b)throw new Error("Metadata key is mandatory")}return b.prototype.isMultiple=function(){return this.multiple},b.prototype.getKey=function(){return this.key},b.prototype.getValue=function(){var a=this.value;if("function"==typeof a)try{return String(a()||"")}catch(a){return this.logger.warn("getValue: error while trying to execute value function:",a),""}return String(a||"")},b.prototype.getUrlPiece=function(){return encodeURIComponent(this.getKey())+"="+encodeURIComponent(this.getValue())},b}();b.Metadata=c}(b=a.tracker||(a.tracker={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b=function(){function a(){}return a.format=[{name:"placementCall"},{name:"passback-integration"},{name:"passback-noAd"},{name:"noSlot-dom"},{name:"noSlot-selector"},{name:"noSlot-filter"},{name:"noSlot-avoid"},{name:"noSlot-size"},{name:"noSlot-BTF"},{name:"noSlot-minimum"},{name:"noSlot-minimumBelow"},{name:"noSlot-content"},{name:"noSlot-position"},{name:"incompatibility-browser"},{name:"incompatibility-context"},{name:"incompatibility-format"},{name:"incompatibility-video"},{name:"placementCapping"},{name:"slotAvailable"},{name:"adNotAvailable-networkError"},{name:"adNotAvailable-serverError"},{name:"adAvailable-error-parseTimeout"},{name:"adAvailable-error-badResponse"},{name:"adAvailable-error-vast-100"},{name:"adAvailable-error-vast-101"},{name:"adAvailable-error-vast-102"},{name:"adAvailable-error-vast-200"},{name:"adAvailable-error-vast-201"},{name:"adAvailable-error-vast-202"},{name:"adAvailable-error-vast-203"},{name:"adAvailable-error-vast-300"},{name:"adAvailable-error-vast-301"},{name:"adAvailable-error-vast-302"},{name:"adAvailable-error-vast-303"},{name:"adAvailable-error-vast-304"},{name:"adAvailable-error-vast-400"},{name:"adAvailable-error-vast-401"},{name:"adAvailable-error-vast-402"},{name:"adAvailable-error-vast-403"},{name:"adAvailable-error-vast-405"},{name:"adAvailable-error-vast-500"},{name:"adAvailable-error-vast-501"},{name:"adAvailable-error-vast-502"},{name:"adAvailable-error-vast-503"},{name:"adAvailable-error-vast-600"},{name:"adAvailable-error-vast-601"},{name:"adAvailable-error-vast-602"},{name:"adAvailable-error-vast-603"},{name:"adAvailable-error-vast-604"},{name:"adAvailable-error-vast-900"},{name:"adAvailable-error-vast-901"},{name:"adAvailable-error-settings"},{name:"adAvailable-error-emptyArray"},{name:"adAvailable-error-sameAd"},{name:"adAvailable-success"},{name:"adCall"},{name:"noAd-serverError"},{name:"noAd-networkError"},{name:"noAd-notFilled"},{name:"noAd-vastError-100"},{name:"noAd-vastError-101"},{name:"noAd-vastError-102"},{name:"noAd-vastError-200"},{name:"noAd-vastError-201"},{name:"noAd-vastError-202"},{name:"noAd-vastError-203"},{name:"noAd-vastError-300"},{name:"noAd-vastError-301"},{name:"noAd-vastError-302"},{name:"noAd-vastError-303"},{name:"noAd-vastError-304"},{name:"noAd-vastError-400"},{name:"noAd-vastError-401"},{name:"noAd-vastError-402"},{name:"noAd-vastError-403"},{name:"noAd-vastError-405"},{name:"noAd-vastError-500"},{name:"noAd-vastError-501"},{name:"noAd-vastError-502"},{name:"noAd-vastError-503"},{name:"noAd-vastError-600"},{name:"noAd-vastError-601"},{name:"noAd-vastError-602"},{name:"noAd-vastError-603"},{name:"noAd-vastError-604"},{name:"noAd-vastError-900"},{name:"noAd-vastError-901"},{name:"noAd-parseTimeout"},{name:"noAd-settingsError"},{name:"noAd-badResponse"},{name:"noAd-sameAd"},{name:"noAd-ivt-doubleVerify"},{name:"noAd-ivt-tag"},{name:"noAd-blockedSite-doubleVerify"},{name:"ad"},{name:"click-replay"}],a.vast=[{name:"error"},{name:"fullscreen",multiple:!0},{name:"exitFullscreen",multiple:!0},{name:"click",multiple:!0},{name:"creativeView"},{name:"impression"},{name:"start"},{name:"firstQuartile"},{name:"midpoint"},{name:"thirdQuartile"},{name:"complete"},{name:"pause",before:["start"],multiple:!0},{name:"resume",before:["pause"],multiple:!0},{name:"mute",multiple:!0},{name:"unmute",multiple:!0},{name:"expand",multiple:!0},{name:"collapse",multiple:!0},{name:"rewind",multiple:!0},{name:"skip"},{name:"close"},{name:"progress",multiple:!0},{name:"acceptInvitationLinear"},{name:"acceptInvitation"},{name:"closeLinear"},{name:"noAd"},{name:"noLinearAd"},{name:"customClicks",multiple:!0},{name:"billable"},{name:"otherAdInteraction",multiple:!0}],a}();a.Config=b}(b=a.tracker||(a.tracker={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function c(c,d){var e=this;this.logger=new a.Logger("tracker.Tracker"),this.trackings={},this.metadatas=[],this.errors=[],this.errorUrls=[],this.sumoTracker=new a.Sumologic,this.trackedEvents={},this.alreadyBilledAdvertiser={whenAnalyticsOnlyEqualsFalse:!1,whenAnalyticsOnlyEqualsTrue:!1},this.wigoi=null,this.sumoTracker.init(a.Sumologic.CONFIGS.PLAYER,d),c.match({some:function(a){return e.setTrackings(a)},none:function(){return e.setTrackings(b.Config.vast)}}),this.logger.debug("new",this)}return c.prototype.setTrackings=function(b){return b instanceof Array?void a.ArrayHelper.forEach(b,function(a){this.setTracking(a)},this):void this.logger.error("setTrackings param error, expected array.",b)},c.prototype.setTracking=function(a){return a.name?void(this.trackings[a.name]=new b.Tracking(a.name,a.before,a.after,a.multiple,a.metadata,a.resources)):void this.logger.error("Name of tracking is needed",a)},c.prototype.getTracking=function(a){return this.trackings[a]},c.prototype.addResource=function(b,c,d){if(c&&!a.StringHelper.isURL(c)&&this.sumoTracker.sendInfo(["invalid-tracking",c].join(";")),"progress"===b&&!d)return this.logger.error('Adding a "progress" tracking requires an associated offset',c),!1;if(!c||c.trim&&!c.trim())return this.logger.error("Adding a tracking requires an url not empty",c),!1;var e=this.getTracking(b);if(e){var f=e.getAllResources();if(f.length){var g=!1;if(a.ArrayHelper.forEach(f,function(a){g||(g=c===a.url)}),g)return this.logger.warn("URL already exists"),!1}return e.addResource(c,d),!0}return this.logger.error("This event ("+b+") does not exist in config"),!1},c.prototype.isTrackable=function(b){var c=this.getTracking(b);if(!c)return this.trackError(b,"This event ("+b+") does not exist in config"),!1;if(!c.isTrackable())return!1;if(!c.hasResources())return!0;if(c){var d=!0,e=!0,f=c.getBefore(),g=c.getAfter();return f.length&&(d=a.ArrayHelper.some(f,function(a){var b=this.getTracking(a),c=b&&!b.isTrackable(),d=b&&b.isTracked();return d||c||!b},this),d||this.trackError(b,"Previous event ["+c.getBefore().join(",")+"] was not tracked")),g.length&&(e=a.ArrayHelper.some(g,function(a){var b=this.getTracking(a),c=b&&b.isTrackable(),d=b&&!b.isTracked();return d||c||!b},this),e||this.trackError(b,"Next event ["+c.getAfter().join(",")+"] are already tracked")),d&&e}},c.prototype.track=function(b,c,d,e){var f=this;void 0===c&&(c={});var g=this.getTracking(b);if(!this.isTrackable(b))return this.logger.warn("This event ("+b+") is not trackable"),!1;if("progress"===b&&(null===d||isNaN(d)))return this.trackError(b,"This event ("+b+") needs the current progress time (in seconds)"),!1;var h=g.getResources(d);return a.ArrayHelper.forEach(h,function(a){var h=a.url;g&&g.isMetadata()&&(h=f.processMetadata(h));for(var i in c)c.hasOwnProperty(i)&&(h=h.replace(i,c[i]));h=f.removeBillableParamsDuplicates(h,c,d,e),f.triggerUrl(h),a.fired=!0,f.logger.debug("track ["+b+(d?"@"+d.toFixed(2)+"s":"")+"]: ",h),g.addTracked(h,d),f.callback(b,!0)},this),g.setTracked(),this.trackedEvents[b]=this.trackedEvents[b]||0,this.trackedEvents[b]++,this.wigoi&&this.wigoi.vastEvent(b,d?d.toFixed(2)||d.toString():"undefined",e?100*Math.floor(d)/Math.floor(e):0,h),!0},c.prototype.triggerUrl=function(a){var b=new Image;b.src=a},c.prototype.getTrackedCount=function(a){return this.trackedEvents[a]||0},c.prototype.setMetadata=function(a,c,d){if(void 0===d&&(d=!0),"string"!=typeof a||!a)return this.logger.warn("setMetadata: key is mandatory (string).",a),!1;if("string"!=typeof c&&"function"!=typeof c)return this.logger.warn("setMetadata: value: String or Function expected.",c),!1;if("boolean"!=typeof d)return this.logger.warn("setMetadata: multiple: Boolean expected.",d),!1;var e=new b.Metadata(a,c,d);return!!e&&(this.metadatas.push(e),!0)},c.prototype.processMetadata=function(a){for(var b,c,d=this.metadatas.length-1;d>=0;d--)b=this.metadatas[d],c=b.getKey(),0===c.indexOf("[")?a=a.replace(c,b.getValue()):a+=(a.indexOf("?")>=0?"&":"?")+b.getUrlPiece(),b.isMultiple()||this.metadatas.splice(d,1);return a},c.prototype.getTrackingsInfo=function(){var b,c={};for(var d in this.trackings)if(this.trackings.hasOwnProperty(d)){b=this.trackings[d];var e=b.getTracked();a.ArrayHelper.forEach(e,function(a,d){var e=new Date(a.time);c[b.getName()+"-"+d]={event:b.getName(),url:a.url,time:e.toTimeString().substr(0,8)+"."+e.getMilliseconds()}})}this.logger.table(c),this.logger.table(this.errors)},c.prototype.trackError=function(b,c){this.logger.warn("Track errors:",b,c),this.callback(b,"false");var d=new Date;this.errors.push({event:b,message:c,time:d.getHours()+":"+d.getMinutes()+":"+d.getSeconds()+"."+d.getMilliseconds()}),a.ArrayHelper.forEach(this.errorUrls,function(a){a+="&event="+encodeURIComponent(b),a+="&message="+encodeURIComponent(c);var d=new Image;d.src=a})},c.prototype.callback=function(a,b){if("function"==typeof this.handler)try{this.handler(a,b)}catch(b){this.logger.error("Callback error ("+a+"):",b)}},c.prototype.setCallback=function(a){"function"==typeof a&&(this.handler=a)},c.prototype.setWigoi=function(a){this.wigoi=a},c.prototype.removeBillableParamsDuplicates=function(b,c,d,e){var f=this;void 0===c&&(c={});var g=a.URIHelper.parse(b);if(a.URIHelper.isInternalUrl(b)&&(b.indexOf("?revenue=")>-1||b.indexOf("&revenue=")>-1)&&(b.indexOf("?gid=")>-1||b.indexOf("&gid=")>-1))if(b.indexOf("analyticsOnly=false")>-1&&this.alreadyBilledAdvertiser.whenAnalyticsOnlyEqualsFalse||b.indexOf("analyticsOnly=true")>-1&&this.alreadyBilledAdvertiser.whenAnalyticsOnlyEqualsTrue)try{
var h=a.URIHelper.parseQueryString(g.search),i=["revenue","revenue_curr","srevenue","srevenue_curr"];h.cost||i.push("analyticsOnly"),a.ArrayHelper.forEach(i,function(a){if(h.hasOwnProperty(a)){var c=a+"="+h[a];b=b.replace("?"+c+"&","?"),b=b.replace("&"+c,""),b=b.replace("?"+c,"?"),(b.indexOf("?"+a+"=")>-1||b.indexOf("&"+a+"=")>-1)&&f.sumoTracker.sendWarning(["billable not-removed "+a,b].join(";"))}})}catch(a){this.sumoTracker.sendWarning(["billable error-removing-duplicates",b,a].join(";"))}else b.indexOf("analyticsOnly=false")>-1?this.alreadyBilledAdvertiser.whenAnalyticsOnlyEqualsFalse=!0:b.indexOf("analyticsOnly=true")>-1&&(this.alreadyBilledAdvertiser.whenAnalyticsOnlyEqualsTrue=!0),this.track("billable",c,d,e);return b},c}();b.Tracker=c}(b=a.tracker||(a.tracker={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(){}return a.applyVendorProperties=function(b,c,d){b.style[c]=d,c=a.capitalize(c),b.style["Moz"+c]=d,b.style["webkit"+c]=d,b.style["O"+c]=d,b.style["ms"+c]=d},a.capitalize=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},a.now=function(){return window.performance?window.performance.now():Date.now()},a.fillArray=function(a,b){for(var c=0,d=a.length;c<d;c++)a[c]=b},a.formatBenchTime=function(a){return a<1?parseFloat(a.toString().substr(0,4)):Math.round(a)},a}();a.Utils=b}(b=a.helper||(a.helper={}))}(b=a.player||(a.player={}))}(b=a.canvas||(a.canvas={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(){}return a.SHADER_FRAGMENT_YCBCRTORGBA=["precision mediump float;","uniform sampler2D YTexture;","uniform sampler2D CBTexture;","uniform sampler2D CRTexture;","varying vec2 texCoord;","void main() {","float y = texture2D(YTexture, texCoord).r;","float cr = texture2D(CBTexture, texCoord).r - 0.5;","float cb = texture2D(CRTexture, texCoord).r - 0.5;","gl_FragColor = vec4(","y + 1.4 * cr,","y + -0.343 * cb - 0.711 * cr,","y + 1.765 * cb,","1.0",");","}"].join("\n"),a.SHADER_FRAGMENT_LOADING=["precision mediump float;","uniform float loaded;","varying vec2 texCoord;","void main() {","float c = ceil(loaded-(1.0-texCoord.y));","gl_FragColor = vec4(c,c,c,1);","}"].join("\n"),a.SHADER_VERTEX_IDENTITY=["attribute vec2 vertex;","varying vec2 texCoord;","void main() {","texCoord = vertex;","gl_Position = vec4((vertex * 2.0 - 1.0) * vec2(1, -1), 0.0, 1.0);","}"].join("\n"),a}();a.Shader=b}(b=a.model||(a.model={}))}(b=a.player||(a.player={}))}(b=a.canvas||(a.canvas={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b;!function(a){var b;!function(a){a.mediaEvents={ABORT:"abort",CAN_PLAY:"canplay",DURATION_CHANGE:"durationchange",ENDED:"ended",ERROR:"error",LOADED_DATA:"loadeddata",LOADED_METADATA:"loadedmetadata",LOAD_START:"loadstart",LOADED:"loaded",PAUSE:"pause",PLAY:"play",PLAYING:"playing",PROGRESS:"progress",SEEKED:"seeked",SEEKING:"seeking",STALLED:"stalled",RESUME_AFTER_STALLED:"resumeafterstalled",TIME_UPDATE:"timeupdate",VOLUME_CHANGE:"volumechange",AUDIO_SYNC:"audiosync",BENCH_FPS:"benchFps",RESIZE:"resize"}}(b=a.model||(a.model={}))}(b=a.player||(a.player={}))}(b=a.canvas||(a.canvas={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c;!function(b){var c;!function(b){var c=function(){function b(){this.loggerED=new a.Logger("canvas.player.components.EventDispatcher"),this.cb={},this.addEventListener=this.listen,this.removeEventListener=this.muteEvent}return b.prototype.listen=function(a,b,c){void 0===c&&(c=!1),this.cb[a]||(this.cb[a]=new Array),this.cb[a].push(b)},b.prototype.muteEvent=function(a,b){this.cb[a]?b&&this.cb[a].indexOf(b)!==-1?this.cb[a].splice(this.cb[a].indexOf(b),1):b?this.loggerED.error("call muteEvent for",a,"but handler ",b," does not exist for this event"):this.cb[a]=new Array:this.loggerED.error("call muteEvent for",a,"but handlers for this event are empty")},b.prototype.dispatch=function(a,b){this.cb[a]&&(b?b.type=a:b={type:a},this.cb[a].forEach(function(a,c){a(b)}))},b}();b.EventDispatcher=c}(c=b.components||(b.components={}))}(c=b.player||(b.player={}))}(b=a.canvas||(a.canvas={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b;!function(a){var b;!function(b){var c=function(b){function c(a,c,d){var e=b.call(this)||this;return e.container=a,e.cWidth=c,e.cHeight=d,e.totalPrintingTime=0,e.totalPrintedFrame=0,e.canvas=document.createElement("canvas"),e.canvas.width=c,e.canvas.height=d,e.canvas.style.background="#000",e.canvasContext=e.canvas.getContext("2d"),a.appendChild(e.canvas),e.initWebGL(),e}return __extends(c,b),Object.defineProperty(c.prototype,"width",{get:function(){return this.cWidth},set:function(a){this.cWidth=a,this.resize()},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"height",{get:function(){return this.cHeight},set:function(a){this.cHeight=a,this.resize()},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"videoHeight",{get:function(){return this._videoHeight},set:function(a){this._videoHeight=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"videoWidth",{get:function(){return this._videoWidth},set:function(a){this._videoWidth=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"parentNode",{get:function(){return this.html5video?this.html5video.parentNode:this.canvas.parentNode},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"style",{get:function(){return this.html5video?this.html5video.style:this.canvas.style},enumerable:!0,configurable:!0}),c.prototype.useCustomDisplay=function(a){this.html5video=a,this.canvas.parentNode.replaceChild(a,this.canvas),this.resize()},c.prototype.resize=function(b,c){this.html5video?this.resizeHtml5(b,c):this.resizeCanvas(b,c),this.dispatch(a.model.mediaEvents.RESIZE,{width:this.width,height:this.height})},c.prototype.resizeCanvas=function(b,c){b&&(this.canvas.width=this.decoderWidth=b),c&&(this.canvas.height=this.decoderHeight=c);var d=this.cWidth/this.canvas.width,e=this.cHeight/this.canvas.height,f=parseInt(Math.max((this.cHeight-this.canvas.height*d)/2,0).toFixed(2),10),g=parseInt(Math.max((this.cWidth-this.canvas.width*e)/2,0).toFixed(2),10),h=Math.min(d,e);a.helper.Utils.applyVendorProperties(this.canvas,"transformOrigin","0 0"),a.helper.Utils.applyVendorProperties(this.canvas,"transform","translateX("+g+"px) translateY("+f+"px) scale("+h+")"),b&&c&&(this.gl?(this.gl.useProgram(this.program),this.gl.viewport(0,0,b,c)):(this.currentRGBA=this.canvasContext.getImageData(0,0,b,c),a.helper.Utils.fillArray(this.currentRGBA.data,255)))},c.prototype.resizeHtml5=function(a,b){this.html5video.style.width=this.width+"px",this.html5video.style.height=this.height+"px"},c.prototype.renderFrame=function(b){var c=a.helper.Utils.now();this.gl?this.renderFrameGL(b):this.renderFrame2D(b),this.totalPrintingTime+=a.helper.Utils.now()-c,this.totalPrintedFrame++},c.prototype.renderHtmlImageElement=function(b){var c=a.helper.Utils.now();this.canvasContext.drawImage(b,0,0),this.totalPrintingTime+=a.helper.Utils.now()-c,this.totalPrintedFrame++},c.prototype.averagePrintingTime=function(){return this.totalPrintingTime/this.totalPrintedFrame},c.prototype.initWebGL=function(){try{this.gl=this.canvas.getContext("webgl")||this.canvas.getContext("experimental-webgl")}catch(a){return!1}if(!this.gl)return!1;var b=this.gl.createBuffer();if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,b),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,1,1]),this.gl.STATIC_DRAW),this.program=this.gl.createProgram(),this.gl.attachShader(this.program,this.compileShader(this.gl.VERTEX_SHADER,a.model.Shader.SHADER_VERTEX_IDENTITY)),this.gl.attachShader(this.program,this.compileShader(this.gl.FRAGMENT_SHADER,a.model.Shader.SHADER_FRAGMENT_YCBCRTORGBA)),this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS))throw new Error(this.gl.getProgramInfoLog(this.program));this.gl.useProgram(this.program),this.YTexture=this.createTexture(0,"YTexture"),this.CBTexture=this.createTexture(1,"CBTexture"),this.CRTexture=this.createTexture(2,"CRTexture");var c=this.gl.getAttribLocation(this.program,"vertex");return this.gl.enableVertexAttribArray(c),this.gl.vertexAttribPointer(c,2,this.gl.FLOAT,!1,0,0),this.loadingProgram=this.gl.createProgram(),this.gl.attachShader(this.loadingProgram,this.compileShader(this.gl.VERTEX_SHADER,a.model.Shader.SHADER_VERTEX_IDENTITY)),this.gl.attachShader(this.loadingProgram,this.compileShader(this.gl.FRAGMENT_SHADER,a.model.Shader.SHADER_FRAGMENT_LOADING)),this.gl.linkProgram(this.loadingProgram),this.gl.useProgram(this.loadingProgram),c=this.gl.getAttribLocation(this.loadingProgram,"vertex"),this.gl.enableVertexAttribArray(c),this.gl.vertexAttribPointer(c,2,this.gl.FLOAT,!1,0,0),!0},c.prototype.renderFrameGL=function(a){this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.YTexture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,a.codedWidth,this.canvas.height,0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,a.currentY),this.gl.activeTexture(this.gl.TEXTURE1),this.gl.bindTexture(this.gl.TEXTURE_2D,this.CBTexture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,a.halfWidth,this.canvas.height/2,0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,a.currentCr),this.gl.activeTexture(this.gl.TEXTURE2),this.gl.bindTexture(this.gl.TEXTURE_2D,this.CRTexture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,a.halfWidth,this.canvas.height/2,0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,a.currentCb),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4)},c.prototype.compileShader=function(a,b){var c=this.gl.createShader(a);if(this.gl.shaderSource(c,b),this.gl.compileShader(c),!this.gl.getShaderParameter(c,this.gl.COMPILE_STATUS))throw new Error(this.gl.getShaderInfoLog(c));return c},c.prototype.createTexture=function(a,b){var c=this.gl.createTexture();return this.gl.bindTexture(this.gl.TEXTURE_2D,c),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.uniform1i(this.gl.getUniformLocation(this.program,b),a),c},c.prototype.YCbCrToRGBA=function(a){for(var b,c,d,e,f,g=a.currentY,h=a.currentCb,i=a.currentCr,j=this.currentRGBA.data,k=0,l=a.codedWidth,m=a.codedWidth+(a.codedWidth-this.decoderWidth),n=0,o=a.halfWidth-(this.decoderWidth>>1),p=0,q=4*this.decoderWidth,r=4*this.decoderWidth,s=this.decoderWidth>>1,t=this.decoderHeight>>1,u=0;u<t;u++){for(var v=0;v<s;v++){b=h[n],c=i[n],n++,d=c+(103*c>>8)-179,e=(88*b>>8)-44+(183*c>>8)-91,f=b+(198*b>>8)-227;var w=g[k++],x=g[k++];j[p]=w+d,j[p+1]=w-e,j[p+2]=w+f,j[p+4]=x+d,j[p+5]=x-e,j[p+6]=x+f,p+=8;var y=g[l++],z=g[l++];j[q]=y+d,j[q+1]=y-e,j[q+2]=y+f,j[q+4]=z+d,j[q+5]=z-e,j[q+6]=z+f,q+=8}k+=m,l+=m,p+=r,q+=r,n+=o}},c.prototype.renderFrame2D=function(a){this.YCbCrToRGBA(a),this.canvasContext.putImageData(this.currentRGBA,0,0)},c}(b.EventDispatcher);b.Canvas=c}(b=a.components||(a.components={}))}(b=a.player||(a.player={}))}(b=a.canvas||(a.canvas={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b;!function(a){var b;!function(a){var b;!function(a){a[a.FULL=0]="FULL",a[a.SMART=1]="SMART",a[a.NO_STREAM=2]="NO_STREAM"}(b=a.StreamType||(a.StreamType={}))}(b=a.model||(a.model={}))}(b=a.player||(a.player={}))}(b=a.canvas||(a.canvas={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b;!function(a){var b;!function(a){var b;!function(a){a[a.INIT=0]="INIT",a[a.INIT_VIDEO=1]="INIT_VIDEO",a[a.INIT_AUDIO=2]="INIT_AUDIO",a[a.CAN_PLAY=3]="CAN_PLAY",a[a.PLAYING=4]="PLAYING",a[a.PAUSED=5]="PAUSED",a[a.LOADED=6]="LOADED",a[a.STALLED=7]="STALLED",a[a.ENDED=8]="ENDED"}(b=a.MediaState||(a.MediaState={}))}(b=a.model||(a.model={}))}(b=a.player||(a.player={}))}(b=a.canvas||(a.canvas={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c;!function(b){var c;!function(c){var d=function(c){function d(d,e,f,g){var h=c.call(this)||this;h.meta=e,h.player=g,h.logger=new a.Logger("canvas.player.components.Video"),h.head=0,h.targetTime=0,h.decodeFinish=!1,h.benchFps=0,h.benchFpsRetained=0,h.benchFpsCount=0,h.fpsLimit=0,h.frameRate=24,h.frameStart=1,h.frameCachedLimit=24,h.videoFrames=[],h.frameWait=Math.floor(1e3/h.frameRate);var i=a.BlobHelper.createBlob('importScripts("'+h.player.parameters.assetsPath+'/teads-mpeg-decoder.min.js")');return h.worker=new Worker(a.BlobHelper.getUrl().createObjectURL(i)),h.worker.onmessage=h.onmessage.bind(h),h.worker.postMessage(["init",d,e]),h.state=b.model.MediaState.INIT,h}return __extends(d,c),d.prototype.canplay=function(){return this.state===b.model.MediaState.CAN_PLAY||this.state===b.model.MediaState.PLAYING||this.state===b.model.MediaState.PAUSED||this.state===b.model.MediaState.LOADED||this.state===b.model.MediaState.ENDED},d.prototype.play=function(){this.state!==b.model.MediaState.PLAYING&&(this.state=b.model.MediaState.PLAYING,this.loopPlay())},d.prototype.pause=function(){this.state!==b.model.MediaState.STALLED&&(this.state=b.model.MediaState.PAUSED)},d.prototype.getCurrentTime=function(){return this.state===b.model.MediaState.INIT?0:this.head/this.frameRate},d.prototype.setCurrentTime=function(a){var b=Math.ceil(a*this.frameRate);return!!this.videoFrames[b]&&(this.cleanFrame(this.head,b),this.head=b,!0)},Object.defineProperty(d.prototype,"duration",{get:function(){return this.decodeFinish?this.videoFrames.length/this.frameRate:parseFloat(this.meta.infos.duration)},enumerable:!0,configurable:!0}),d.prototype.cleanStallTimeout=function(){clearTimeout(this.timeoutStalled),this.timeoutStalled=null,this.state=b.model.MediaState.PAUSED},d.prototype.onload=function(){this.dispatch(b.model.mediaEvents.LOADED),this.decodeFinish=!0},d.prototype.oninit=function(){this.benchFps=b.helper.Utils.now(),this.state=b.model.MediaState.INIT_VIDEO,this.renderFrame()},d.prototype.oncanplay=function(){this.state=b.model.MediaState.CAN_PLAY,this.dispatch(b.model.mediaEvents.CAN_PLAY)},d.prototype.onstalled=function(){var a=this;this.state=b.model.MediaState.STALLED,this.dispatch(b.model.mediaEvents.STALLED),this.listen(b.model.mediaEvents.LOADED,function(){return a.onresumestalled()})},d.prototype.onresumestalled=function(){this.state===b.model.MediaState.STALLED&&(this.cleanStallTimeout(),this.dispatch(b.model.mediaEvents.RESUME_AFTER_STALLED))},d.prototype.ondecodeframe=function(){this.state!==b.model.MediaState.ENDED&&this.dispatch(b.model.mediaEvents.TIME_UPDATE)},d.prototype.onfinish=function(){this.state=b.model.MediaState.ENDED,this.dispatch(b.model.mediaEvents.ENDED)},d.prototype.onmessage=function(a){var b=a.data[0];switch(b){case"frame":this.appendFrames(a.data),this.videoFrames.length===this.frameStart?this.oninit():this.videoFrames.length===this.frameCachedLimit&&this.oncanplay();break;case"initCanvas":this.player.resize(a.data[1],a.data[2]);break;case"finish":this.averageDecodingTime=a.data[1],this.onload();break;default:this.logger.debug(a.data)}},d.prototype.appendFrames=function(a){var c=this;if(this.videoFrames.push({codedWidth:a[1],halfWidth:a[2],currentY:new Uint8Array(a[3]),currentCr:new Uint8Array(a[4]),currentCb:new Uint8Array(a[5])}),this.averageDecodingTime=a[6],this.benchFpsCount++,this.benchFpsCount===this.frameCachedLimit){this.benchFpsRetained=b.helper.Utils.now()-this.benchFps;var d=Math.ceil(this.frameRate*this.benchFpsRetained/1e3);this.fpsLimit=Math.max(3,Math.min(this.frameCachedLimit,d+1))}this.state===b.model.MediaState.STALLED&&this.head+this.frameCachedLimit<=this.videoFrames.length&&(this.averageDecodingTime<=1e3/this.frameRate?this.timeoutStalled||(this.logger.warn("We are stalled and have",this.frameCachedLimit,"in memory, but stalled for download, so wait",2*this.benchFpsRetained,"ms"),this.timeoutStalled=setTimeout(function(){return c.onresumestalled()},2*this.benchFpsRetained),this.dispatch(b.model.mediaEvents.BENCH_FPS,2*this.benchFpsRetained)):this.onresumestalled())},d.prototype.loopPlay=function(){var a=this;this.head++;var c=this.targetTime?Math.max(-(this.frameWait/2),Math.min(0,this.targetTime-b.helper.Utils.now())):0,d=this.head>=this.videoFrames.length-1;d?(this.decodeFinish?this.onfinish():this.onstalled(),this.targetTime=0):this.state===b.model.MediaState.PLAYING&&(this.targetTime=b.helper.Utils.now()+this.frameWait,window.setTimeout(function(){return a.loopPlay()},this.frameWait+c)),this.renderFrame(),this.head%this.frameRate===0&&this.ondecodeframe()},d.prototype.renderFrame=function(){this.videoFrames[this.head]&&(this.player.renderFrame(this.videoFrames[this.head]),this.videoFrames[this.head]=null,this.videoFrames.length<this.head+this.fpsLimit&&(this.benchFps=b.helper.Utils.now(),this.benchFpsCount=0,this.worker.postMessage(["resume"])))},d.prototype.cleanFrame=function(a,b){for(var c=a;c<b;c++)this.videoFrames[c]=null},d}(c.EventDispatcher);c.MpegVideo=d}(c=b.components||(b.components={}))}(c=b.player||(b.player={}))}(b=a.canvas||(a.canvas={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c;!function(b){var c;!function(c){var d=function(c){function d(b,d,e,f){var g=c.call(this)||this;return g.meta=d,g.player=f,g.videoFrames=[],g.sumologic=new a.Sumologic,g.headBuffer=0,g.head=0,g.benchFps=0,g.frameWait=1e3/24,g.frameRate=24,g.frameCachedLimit=24,g.reading=!1,g.decodingTime=0,g.extractTime=0,g.extractCount=0,g.load(b+"/"+d.tv),g.sumologic.init(a.Sumologic.CONFIGS.PLAYER,a.Option.of(g.player.parameters.sumologicSessionId)),g}return __extends(d,c),d.prototype.canplay=function(){return this.head+this.frameCachedLimit<=this.videoFrames.length},d.prototype.play=function(){this.state!==b.model.MediaState.PLAYING&&(this.state=b.model.MediaState.PLAYING,this.loopPlay())},d.prototype.pause=function(){this.state!==b.model.MediaState.STALLED&&(this.state=b.model.MediaState.PAUSED)},d.prototype.getCurrentTime=function(){return this.state===b.model.MediaState.INIT?0:this.head/this.frameRate},d.prototype.setCurrentTime=function(a){var b=Math.ceil(a*this.frameRate);return!!this.videoFrames[b]&&(this.head=b,this.player.renderHtmlImageElement(this.videoFrames[this.head]),!0)},Object.defineProperty(d.prototype,"duration",{get:function(){return parseFloat(this.meta.infos.duration)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"averageDecodingTime",{get:function(){return this.decodingTime/this.videoFrames.length},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"averageExtractTime",{get:function(){return this.extractTime/this.extractCount},enumerable:!0,configurable:!0}),d.prototype.cleanStallTimeout=function(){},d.prototype.load=function(b){this.xhr=a.Request.createXmlHttpRequest(),this.xhr.open("GET",b,!0),this.xhr.responseType="text",this.xhr.onreadystatechange=this.onStateChange.bind(this),this.xhr.onload=this.onload.bind(this),this.xhr.send()},d.prototype.onStateChange=function(){this.xhr.responseText&&this.xhr.readyState>=3&&!this.reading&&this.readResponseRecursive()},d.prototype.readResponseRecursive=function(){if(this.reading){var a=b.helper.Utils.now(),c=this.xhr.responseText.substr(this.headBuffer,4*this.meta.infos.averageFrameSize),d=new RegExp("frame\\[("+this.videoFrames.length+")\\](.*)frame\\["+(this.videoFrames.length+1)+"\\]"),e=d.exec(c);if(this.extractTime+=b.helper.Utils.now()-a,this.extractCount++,e)this.headBuffer+=7+this.videoFrames.length.toString().length+e[2].length,this.extractFrame(e);else if(this.loaded){var f=new RegExp("frame\\[("+this.videoFrames.length+")\\](.*)"),g=f.exec(c);g&&(this.headBuffer+=7+this.videoFrames.length.toString().length+g[2].length,this.extractFrame(g))}this.headBuffer>=this.xhr.responseText.length&&(this.reading=!1)}else this.reading=!0,this.initTickTimer()},d.prototype.initTickTimer=function(){var c=this,d=function(){c.reading&&c.readResponseRecursive(),c.state===b.model.MediaState.PLAYING&&c.loopPlay()};try{this.timer=a.Timer.setInterval(function(){return d()},1,a.Context.isAmp()||a.Context.isFacebookWebview())}catch(a){this.tickInterval=setInterval(function(){return d()},1),this.sumologic.sendError("Cannot create worker")}},d.prototype.stopTickTimer=function(){this.timer?this.timer.clear():this.tickInterval&&(clearInterval(this.tickInterval),this.tickInterval=null)},d.prototype.onload=function(){this.loaded=!0,this.dispatch(b.model.mediaEvents.LOADED)},d.prototype.oninit=function(){this.benchFps=b.helper.Utils.now(),this.state=b.model.MediaState.INIT_VIDEO,this.player.resize(this.videoFrames[0].width,this.videoFrames[0].height),this.player.videoWidth=this.videoFrames[0].width,this.player.videoHeight=this.videoFrames[0].height,this.player.dispatch(b.model.mediaEvents.LOADED_METADATA),this.player.dispatch(b.model.mediaEvents.DURATION_CHANGE),this.player.dispatch(b.model.mediaEvents.LOADED_DATA),this.player.renderHtmlImageElement(this.videoFrames[0])},d.prototype.oncanplay=function(){this.state===b.model.MediaState.INIT_VIDEO&&(this.state=b.model.MediaState.CAN_PLAY,this.dispatch(b.model.mediaEvents.CAN_PLAY))},d.prototype.onstalled=function(){var a=this;this.state=b.model.MediaState.STALLED,this.dispatch(b.model.mediaEvents.STALLED),this.listen(b.model.mediaEvents.LOADED,function(){return a.onresumestalled()})},d.prototype.onresumestalled=function(){this.state===b.model.MediaState.STALLED&&this.dispatch(b.model.mediaEvents.RESUME_AFTER_STALLED)},d.prototype.ondecodeframe=function(){this.state!==b.model.MediaState.ENDED&&this.dispatch(b.model.mediaEvents.TIME_UPDATE)},d.prototype.onfinish=function(){this.state=b.model.MediaState.ENDED,this.dispatch(b.model.mediaEvents.ENDED)},d.prototype.extractFrame=function(a){var c=this,d=b.helper.Utils.now(),e=this.videoFrames[a[1]]=new Image;e.src="data:image/jpeg;base64,"+a[2],e.onload=function(){return c.decodingTime+=b.helper.Utils.now()-d},1===this.videoFrames.length?e.onload=function(){return c.oninit()}:this.videoFrames.length>=this.frameCachedLimit&&this.oncanplay(),this.head+this.frameCachedLimit<=this.videoFrames.length&&this.onresumestalled()},d.prototype.loopPlay=function(){if(!(b.helper.Utils.now()<this.targetTime)){this.head++;var a=this.targetTime?Math.max(-(this.frameWait/2),this.targetTime-b.helper.Utils.now()):0,c=this.head>=this.videoFrames.length-1;c?(this.loaded&&!this.reading?(this.stopTickTimer(),this.onfinish()):this.onstalled(),this.targetTime=0):this.state===b.model.MediaState.PLAYING&&(this.targetTime=b.helper.Utils.now()+this.frameWait+a),this.head&&this.videoFrames&&this.videoFrames[this.head]&&this.player.renderHtmlImageElement(this.videoFrames[this.head]),this.head%this.frameRate===0&&this.ondecodeframe()}},d}(c.EventDispatcher);c.JpegVideo=d}(c=b.components||(b.components={}))}(c=b.player||(b.player={}))}(b=a.canvas||(a.canvas={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c;!function(b){var c;!function(c){var d=function(d){function e(e,f,g,h){var i=d.call(this)||this;i.meta=f,i.player=g;var j=e+"/"+f.mp4;return i.authorized=!!c.PLAYERS[j],i.state=b.model.MediaState.INIT_VIDEO,i.load(j),i.authorized||a.Dom.addEventListener("touchstart",h,i.authorize.bind(i)),i}return __extends(e,d),e.prototype.canplay=function(){return!0},e.prototype.play=function(){this.state!==b.model.MediaState.PLAYING&&(this.state=b.model.MediaState.PLAYING,this.video.play())},e.prototype.pause=function(){this.state!==b.model.MediaState.STALLED&&(this.state=b.model.MediaState.PAUSED,this.video.pause())},e.prototype.getCurrentTime=function(){return this.video.currentTime},e.prototype.setCurrentTime=function(a){return!!(this.video.currentTime=a)},Object.defineProperty(e.prototype,"duration",{get:function(){return parseFloat(this.meta.infos.duration)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"averageDecodingTime",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"averageExtractTime",{get:function(){return 0},enumerable:!0,configurable:!0}),e.prototype.cleanStallTimeout=function(){},e.prototype.authorize=function(){this.authorized||(this.authorized=!0,this.video.play(),this.state!==b.model.MediaState.PLAYING&&this.video.pause(),this.oncanplay())},e.prototype.load=function(a){var d=this;this.video=c.PLAYERS[a]=c.PLAYERS[a]||document.createElement("video"),this.video.setAttribute("webkit-playsinline","true"),this.video.src=a,this.video.onload=function(){return d.onload()},this.video.onended=function(){return d.onfinish()},this.video.ontimeupdate=function(){return d.ondecodeframe()},this.video.onloadedmetadata=function(){d.player.videoWidth=d.video.videoWidth,d.player.videoHeight=d.video.videoHeight,d.player.dispatch(b.model.mediaEvents.LOADED_METADATA),d.player.dispatch(b.model.mediaEvents.DURATION_CHANGE),d.player.dispatch(b.model.mediaEvents.LOADED_DATA),d.oncanplay()},this.player.useCustomDisplay(this.video)},e.prototype.onload=function(){this.dispatch(b.model.mediaEvents.LOADED)},e.prototype.oncanplay=function(){this.state===b.model.MediaState.INIT_VIDEO&&this.authorized&&(this.state=b.model.MediaState.CAN_PLAY,this.dispatch(b.model.mediaEvents.CAN_PLAY))},e.prototype.ondecodeframe=function(){this.state!==b.model.MediaState.ENDED&&this.dispatch(b.model.mediaEvents.TIME_UPDATE)},e.prototype.onfinish=function(){this.state=b.model.MediaState.ENDED,this.dispatch(b.model.mediaEvents.ENDED)},e}(c.EventDispatcher);c.Mp4Video=d}(c=b.components||(b.components={}))}(c=b.player||(b.player={}))}(b=a.canvas||(a.canvas={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c;!function(b){var c;!function(c){var d=function(d){function e(e,f,g,h){var i=d.call(this)||this;i.meta=f,i.player=g,i.targetTime=0,i.frameWait=1e3/24,i.frameWaitS=1/24;var j=e+"/"+f.mp4;i.authorized=!!c.PLAYERS[j]||!a.Context.isMobile()&&!a.Context.isTablet(),i.state=b.model.MediaState.INIT_VIDEO,i.load(j),i.authorized||a.Dom.addEventListener("touchstart",h,i.authorize.bind(i));var k=document.createElement("div"),l="<style>\n/* This used to work for parent element of button divs */\n\n/* But it is not enough now, below dont hide play button parent div */\n\n*::-webkit-media-controls-panel {\ndisplay: none!important;\n-webkit-appearance: none;\n}\n\n/* Old shadow dom for play button */\n\n*::--webkit-media-controls-play-button {\ndisplay: none!important;\n-webkit-appearance: none;\n}\n\n/* New shadow dom for play button */\n\n/* This one works */\n\n*::-webkit-media-controls-start-playback-button {\ndisplay: none!important;\n-webkit-appearance: none\n}\n</style>\n";return k.innerHTML=l,i.player.container.appendChild(k.firstChild),i}return __extends(e,d),e.prototype.canplay=function(){return!0},e.prototype.play=function(){var a=this;this.state!==b.model.MediaState.PLAYING&&this.authorized?(this.state=b.model.MediaState.PLAYING,this.loopPlay()):this.authorized||this.listen(b.model.mediaEvents.CAN_PLAY,function(){return a.play()})},e.prototype.pause=function(){this.state!==b.model.MediaState.STALLED&&(this.state=b.model.MediaState.PAUSED,this.timer&&(clearTimeout(this.timer),this.timer=null))},e.prototype.getCurrentTime=function(){return this.video.currentTime},e.prototype.setCurrentTime=function(a){return!!(this.video.currentTime=a)},Object.defineProperty(e.prototype,"duration",{get:function(){return parseFloat(this.meta.infos.duration)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"averageDecodingTime",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"averageExtractTime",{get:function(){return 0},enumerable:!0,configurable:!0}),e.prototype.cleanStallTimeout=function(){},e.prototype.authorize=function(){this.authorized||(this.video.play(),this.video.pause(),this.authorized=!0,this.oncanplay())},e.prototype.load=function(a){var d=this,e=!!c.PLAYERS[a];this.video=c.PLAYERS[a]=c.PLAYERS[a]||document.createElement("video"),this.video.muted=!0,e||(this.video.src=a),this.player.useCustomDisplay(this.video),this.video.onload=function(){return d.onload()},this.video.ontimeupdate=function(){return d.ondecodeframe()},this.video.onloadedmetadata=function(){d.player.videoWidth=d.video.videoWidth,d.player.videoHeight=d.video.videoHeight,d.player.dispatch(b.model.mediaEvents.LOADED_METADATA),d.player.dispatch(b.model.mediaEvents.DURATION_CHANGE),d.player.dispatch(b.model.mediaEvents.LOADED_DATA),d.oncanplay()}},e.prototype.onload=function(){this.dispatch(b.model.mediaEvents.LOADED)},e.prototype.oncanplay=function(){this.state===b.model.MediaState.INIT_VIDEO&&this.authorized&&(this.state=b.model.MediaState.CAN_PLAY,this.dispatch(b.model.mediaEvents.CAN_PLAY))},e.prototype.ondecodeframe=function(){this.state!==b.model.MediaState.ENDED&&this.dispatch(b.model.mediaEvents.TIME_UPDATE)},e.prototype.onfinish=function(){this.pause(),this.video.currentTime=0,this.state=b.model.MediaState.ENDED,this.dispatch(b.model.mediaEvents.ENDED)},e.prototype.loopPlay=function(){var a=this;if(this.video.currentTime+this.frameWaitS>this.video.duration)return this.video.currentTime=this.video.duration,this.onfinish();this.video.currentTime+=this.frameWaitS;var c=this.targetTime?Math.max(-(this.frameWait/2),this.targetTime-b.helper.Utils.now()):0;this.state===b.model.MediaState.PLAYING&&(this.targetTime=b.helper.Utils.now()+this.frameWait+c,this.timer=window.setTimeout(function(){return a.loopPlay()},this.frameWait+c))},e}(c.EventDispatcher);c.Mp4CTVideo=d}(c=b.components||(b.components={}))}(c=b.player||(b.player={}))}(b=a.canvas||(a.canvas={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c;!function(b){var c;!function(c){c.PLAYERS=c.PLAYERS||{};var d=function(d){function e(e,f,g,h){var i=d.call(this)||this;i.meta=f,i.player=h,i.sumologic=new a.Sumologic;var j=a.HTMLHelper.findParentWindows(document.body).pop(),k=j===window.top,l=(a.Context.isSafari()||a.Context.isFacebookWebview())&&a.Semver.isGreaterOrEqual(a.Context.getIosVersion(),"10");return i.sumologic.init(a.Sumologic.CONFIGS.PLAYER,a.Option.of(i.player.parameters.sumologicSessionId)),k&&i.meta.mp4&&("HTML5"===i.player.parameters.type||a.Context.isIpad()&&a.Semver.isGreaterOrEqual(a.Context.getIosVersion(),"9.2")&&"CANVAS"!==i.player.parameters.type)?(i.api=new c.Mp4Video(e,f,h,j),i.sumologic.sendInfo("canvas video mp4")):k&&i.meta.mp4&&"CANVAS"!==i.player.parameters.type&&(a.Semver.isGreaterThan(a.Context.getIosVersion(),"9.1")&&a.Semver.isLowerThan(a.Context.getIosVersion(),"10")||l)?(i.api=new c.Mp4CTVideo(e,f,h,j),i.sumologic.sendInfo("canvas video mp4CT")):i.meta.tv?(i.api=new c.JpegVideo(e,f,g,h),i.sumologic.sendInfo("canvas video tv")):(i.api=new c.MpegVideo(e,f,g,h),i.sumologic.sendInfo("canvas video mpeg")),i.api.listen(b.model.mediaEvents.CAN_PLAY,function(){return i.dispatch(b.model.mediaEvents.CAN_PLAY)}),i.api.listen(b.model.mediaEvents.LOADED,function(){return i.dispatch(b.model.mediaEvents.LOADED)}),i.api.listen(b.model.mediaEvents.STALLED,function(){return i.dispatch(b.model.mediaEvents.STALLED)}),i.api.listen(b.model.mediaEvents.RESUME_AFTER_STALLED,function(){return i.dispatch(b.model.mediaEvents.RESUME_AFTER_STALLED)}),i.api.listen(b.model.mediaEvents.TIME_UPDATE,function(){return i.dispatch(b.model.mediaEvents.TIME_UPDATE)}),i.api.listen(b.model.mediaEvents.ENDED,function(){return i.dispatch(b.model.mediaEvents.ENDED)}),i.api.listen(b.model.mediaEvents.BENCH_FPS,function(a){return i.dispatch(b.model.mediaEvents.BENCH_FPS,a)}),i}return __extends(e,d),e.prototype.canplay=function(){return this.api.canplay()},e.prototype.play=function(){this.api.play()},e.prototype.pause=function(){this.api.pause()},e.prototype.getCurrentTime=function(){return this.api.getCurrentTime()},e.prototype.setCurrentTime=function(a){return this.api.setCurrentTime(a)},Object.defineProperty(e.prototype,"duration",{get:function(){return this.api.duration;
},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this.api.state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"videoFrames",{get:function(){return this.api.videoFrames},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"averageDecodingTime",{get:function(){return this.api.averageDecodingTime},enumerable:!0,configurable:!0}),e.prototype.cleanStallTimeout=function(){this.api.cleanStallTimeout()},e}(c.EventDispatcher);c.Video=d}(c=b.components||(b.components={}))}(c=b.player||(b.player={}))}(b=a.canvas||(a.canvas={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c;!function(b){var c;!function(c){var d=function(c){function d(b,d,e){var f=c.call(this)||this;return f.baseUrl=b,f.chunkUrls=d,f.streamType=e,f.chunkLoaded=0,f.chunkLength=0,f.loggerF=new a.Logger("canvas.player.components.File"),f.chunkNumStart=1,f.chunkNumCanPlay=3,f.chunkLength=f.chunkUrls.length,f.streamLoad(),f}return __extends(d,c),d.prototype.canplay=function(){return this.state===b.model.MediaState.CAN_PLAY||this.state===b.model.MediaState.PLAYING||this.state===b.model.MediaState.PAUSED||this.state===b.model.MediaState.LOADED||this.state===b.model.MediaState.ENDED},d.prototype.streamLoad=function(){var c=this,d=window.location.protocol.match(/http|https/gi)?"":"http:",e=d+this.baseUrl+"/"+this.chunkUrls.shift(),f=a.Request.createXmlHttpRequest();f.open("GET",e,!0),f.responseType="arraybuffer",f.addEventListener("load",function(a){c.chunkLoaded++,c.chunkLoaded===c.chunkNumStart?c.dispatch(b.model.mediaEvents.LOADED_DATA,f.response):c.dispatch(b.model.mediaEvents.PROGRESS,f.response),(c.chunkLoaded===c.chunkNumCanPlay||c.chunkLength<c.chunkNumCanPlay)&&c.dispatch(b.model.mediaEvents.CAN_PLAY),c.chunkLoaded===c.chunkLength&&c.dispatch(b.model.mediaEvents.LOADED),c.chunkUrls.length&&c.streamLoad()}),f.addEventListener("error",this.loggerF.error.bind(this.loggerF)),f.send()},d}(c.EventDispatcher);c.File=d}(c=b.components||(b.components={}))}(c=b.player||(b.player={}))}(b=a.canvas||(a.canvas={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c;!function(b){var c;!function(c){var d=function(d){function e(e,f,g,h){void 0===h&&(h=0);var i=d.call(this)||this;i.baseUrl=e,i.meta=f,i.stream=g,i.aVolume=h,i.estimatedDuration=0,i.iosReady=!1,i.logger=new a.Logger("canvas.player.components.Audio"),i.file=new c.File(i.baseUrl,i.meta.audio,i.stream);var j=a.Utils.getAudioContext();return i.context=new j,i.file.listen(b.model.mediaEvents.LOADED_DATA,i.oninit.bind(i)),i.file.listen(b.model.mediaEvents.PROGRESS,i.onloadprogress.bind(i)),i.file.listen(b.model.mediaEvents.LOADED,i.onload.bind(i)),i.file.listen(b.model.mediaEvents.CAN_PLAY,i.oncanplay.bind(i)),i.file.state=b.model.MediaState.INIT,a.Context.isIos()&&(i.aVolume=0),i.iosReady=!a.Context.getIosVersion(),i}return __extends(e,d),e.decodeAudioData=function(a,b,c,d){a.decodeAudioData(b.slice(0,b.byteLength),c,d)},e.prototype.authorizeAudio=function(b){if(void 0===b&&(b=function(){}),!this.iosReady){var c=a.Utils.getAudioContext(),d=this.context.createBuffer(1,1,44100),e=this.context.createBufferSource();e.buffer=d,e.connect(this.context.destination),e.start(0),e.disconnect(),this.context.close&&this.context.close(),this.context=new c,this.iosReady=!0,b()}},e.prototype.play=function(a){var c=this;if(void 0===a&&(a=0),this.file.state!==b.model.MediaState.PLAYING&&this.volume&&this.iosReady){if(!this.buffer)return void setTimeout(function(){return c.play(a+.05)},50);this.resetAudio(),this.noteOnAt&&!a?(this.source.start(0,this.noteOnAt/1e3),this.noteOnAt=Date.now()-this.noteOnAt):(this.noteOnAt=Date.now()-1e3*a,this.source.start(0,a)),this.file.state=b.model.MediaState.PLAYING}},e.prototype.pause=function(){this.file.state!==b.model.MediaState.PAUSED&&this.source&&(this.noteOnAt=Date.now()-this.noteOnAt,this.source.stop(0),this.file.state!==b.model.MediaState.STALLED&&(this.file.state=b.model.MediaState.PAUSED))},e.prototype.canplay=function(){return this.file.canplay()},e.prototype.playing=function(){return this.file.state===b.model.MediaState.PLAYING},e.prototype.release=function(){var a=this;this.context.close&&this.context.close().then(function(){a.buffer=null,a.gainNode&&a.gainNode.disconnect&&(a.gainNode.disconnect(),a.gainNode=null),a.source&&a.source.disconnect&&(a.source.disconnect(),a.source=null)}),this.file.state=b.model.MediaState.ENDED},Object.defineProperty(e.prototype,"duration",{get:function(){return this.estimatedDuration},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentTime",{get:function(){var a=this.file.state===b.model.MediaState.PLAYING?Date.now()-this.noteOnAt:this.noteOnAt;return a/1e3},set:function(a){this.file.state===b.model.MediaState.PLAYING&&(this.pause(),this.noteOnAt=1e3*a,this.play())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this.aVolume},set:function(a){this.aVolume=a,this.gainNode&&(this.gainNode.gain.value=a)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"authorized",{get:function(){return this.iosReady},enumerable:!0,configurable:!0}),e.prototype.oninit=function(a){var b=this;this.data=a,e.decodeAudioData(this.context,a,function(a){var c=Math.ceil(b.meta.infos.audio_size/b.meta.infos.chunk_size)*a.length;b.estimatedDuration=c/a.sampleRate,b.buffer=b.context.createBuffer(a.numberOfChannels,c,a.sampleRate),b.setToMainBuffer(a)},this.logger.error.bind(this.logger))},e.prototype.onloadprogress=function(a){a&&(this.appendFileToData(a),this.decodeData())},e.prototype.onload=function(){var a=this;this.source?this.estimatedDuration=this.source.buffer.duration:setTimeout(function(){return a.onload()},50)},e.prototype.appendFileToData=function(a){var b=new Uint8Array(this.data.byteLength+a.byteLength);b.set(new Uint8Array(this.data),0),b.set(new Uint8Array(a),this.data.byteLength),this.data=b.buffer.slice(0,b.buffer.byteLength)},e.prototype.decodeData=function(){var a=this;e.decodeAudioData(this.context,this.data,function(b){a.setToMainBuffer(b)},this.logger.error.bind(this.logger))},e.prototype.setToMainBuffer=function(a){for(var b=0;b<a.numberOfChannels;b++){var c=this.buffer.getChannelData(b);c.set(a.getChannelData(b),0)}},e.prototype.oncanplay=function(){this.file.state=b.model.MediaState.CAN_PLAY,this.dispatch(b.model.mediaEvents.CAN_PLAY)},e.prototype.resetAudio=function(){if(this.source)try{this.source.stop(0)}catch(a){this.logger.debug("Error when resetting audio",a)}this.gainNode=this.context.createGain(),this.source=this.context.createBufferSource(),this.source.buffer=this.buffer,this.source.connect(this.gainNode),this.gainNode.connect(this.context.destination),this.volume=this.aVolume},e}(c.EventDispatcher);c.WebAudioApi=d}(c=b.components||(b.components={}))}(c=b.player||(b.player={}))}(b=a.canvas||(a.canvas={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c;!function(b){var c;!function(c){var d=function(c){function d(d,e,f){void 0===f&&(f=0);var g=c.call(this)||this;return g.baseUrl=d,g.meta=e,g.fakeVolume=f,g.touchOk=!1,g.node=document.createElement("audio"),g.node.src=g.baseUrl+"/"+g.meta.audio[0].replace(/\.mp3\.\w\w\w/gi,".mp3"),g.node.preload="auto",g.dispatch(b.model.mediaEvents.CAN_PLAY),a.Context.isIos()&&(g.fakeVolume=0),g}return __extends(d,c),d.prototype.authorizeAudio=function(a){void 0===a&&(a=function(){}),(!this.touchOk||this.node.readyState<=2)&&(this.touchOk=!0,this.node.play(),this.node.pause(),a())},d.prototype.play=function(a){var c=this;0!==this.fakeVolume&&this.state!==b.model.MediaState.PLAYING&&(this.node.readyState<=2?setTimeout(function(){return c.play(a+.1)},100):(a&&(this.currentTime=a),this.node.play(),this.state=b.model.MediaState.PLAYING))},d.prototype.pause=function(){this.node.pause(),this.state=b.model.MediaState.PAUSED},Object.defineProperty(d.prototype,"duration",{get:function(){return this.node.duration},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"currentTime",{get:function(){return this.node.currentTime},set:function(a){this.node.currentTime=a},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"volume",{get:function(){return this.fakeVolume},set:function(a){0===a&&this.pause(),this.fakeVolume=a,this.node.volume=a},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"authorized",{get:function(){return this.touchOk&&this.node.readyState>=3},enumerable:!0,configurable:!0}),d.prototype.canplay=function(){return!0},d.prototype.playing=function(){return this.state===b.model.MediaState.PLAYING},d.prototype.release=function(){},d}(c.EventDispatcher);c.HtmlAudioElement=d}(c=b.components||(b.components={}))}(c=b.player||(b.player={}))}(b=a.canvas||(a.canvas={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c;!function(b){var c;!function(c){var d=function(d){function e(a,b,c,e){var f=d.call(this)||this;return f.baseUrl=a,f.meta=b,f.stream=c,f.player=e,b.audio.length&&f.init(),f}return __extends(e,d),e.prototype.authorizeAudio=function(a){this.api?this.api.authorizeAudio(a):a()},e.prototype.play=function(a){void 0===a&&(a=0),this.api&&this.api.play(a)},e.prototype.pause=function(){this.api&&this.api.pause()},Object.defineProperty(e.prototype,"duration",{get:function(){return this.api?this.api.duration:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentTime",{get:function(){return this.api?this.api.currentTime:0},set:function(a){this.api&&(this.api.currentTime=a)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this.api?this.api.volume:0},set:function(a){this.api&&(this.api.volume=a)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"authorized",{get:function(){return!this.api||this.api.authorized},enumerable:!0,configurable:!0}),e.prototype.canplay=function(){return!this.api||this.api.canplay()},e.prototype.playing=function(){return!!this.api&&this.api.playing()},e.prototype.release=function(){this.api&&this.api.release()},e.prototype.init=function(){var d=this;(a.Context.isAndroid()||a.Semver.isGreaterOrEqual(a.Context.getIosVersion(),"9.1")&&this.meta.infos.audio_size<4e5)&&a.Utils.getAudioContext()?this.api=new c.WebAudioApi(this.baseUrl,this.meta,this.stream,this.player.defaultVolume):this.api=new c.HtmlAudioElement(this.baseUrl,this.meta,this.player.defaultVolume),this.api.listen(b.model.mediaEvents.CAN_PLAY,function(){return d.dispatch(b.model.mediaEvents.CAN_PLAY)})},e}(c.EventDispatcher);c.Audio=d}(c=b.components||(b.components={}))}(c=b.player||(b.player={}))}(b=a.canvas||(a.canvas={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b;!function(a){var b;!function(b){var c=function(){function b(b){var c=this;this.player=b,this.initBufferDiv(),this.player.video.listen(a.model.mediaEvents.STALLED,function(){return c.show()}),this.player.video.listen(a.model.mediaEvents.RESUME_AFTER_STALLED,function(){return c.hide()}),this.player.video.listen(a.model.mediaEvents.TIME_UPDATE,function(){return c.hide()}),this.player.listen(a.model.mediaEvents.RESIZE,function(a){return c.resize(a)})}return b.prototype.show=function(){this.player.container.insertBefore(this.container,this.player.html5video||this.player.canvas||null)},b.prototype.hide=function(){this.container.parentNode&&this.player.container.removeChild(this.container)},b.prototype.resize=function(a){this.container.style.top=a.height/2-this.container.offsetHeight+"px",this.container.style.left=a.width/2-this.container.offsetWidth/2+"px"},b.prototype.initBufferDiv=function(){var a=document.createElement("div");this.template="<div class=\"loader\">\n<style>\n.loader:before,\n.loader:after,\n.loader {\n\tborder-radius: 50%;\n\twidth: 1.5em;\n\theight: 1.5em;\n\t-webkit-animation-fill-mode: both;\n\tanimation-fill-mode: both;\n\t-webkit-animation: load7 1.8s infinite ease-in-out;\n\tanimation: load7 1.8s infinite ease-in-out;\n}\n.loader {\n\tfont-size: 8px;\n\tmargin-left: -8px;\n    position: absolute;\n    left: 50%;\n    top: 30%;\n    z-index: 10;\n\ttext-indent: -9999em;\n\t-webkit-transform: translateZ(0);\n\t-ms-transform: translateZ(0);\n\ttransform: translateZ(0);\n\t-webkit-animation-delay: -0.16s;\n\tanimation-delay: -0.16s;\n}\n.loader:before {\n\tleft: -2em;\n\t-webkit-animation-delay: -0.32s;\n\tanimation-delay: -0.32s;\n}\n.loader:after {\n\tleft: 2em;\n}\n.loader:before,\n.loader:after {\n\tcontent: '';\n\tposition: absolute;\n\ttop: 0;\n}\n@-webkit-keyframes load7 {\n\t0%,\n\t80%,\n\t100% {\n\t\tbox-shadow: 0 2.5em 0 -1.3em #ffffff;\n\t}\n\t40% {\n\t\tbox-shadow: 0 2.5em 0 0 #ffffff;\n\t}\n}\n@keyframes load7 {\n\t0%,\n\t80%,\n\t100% {\n\t\tbox-shadow: 0 2.5em 0 -1.3em #ffffff;\n\t}\n\t40% {\n\t\tbox-shadow: 0 2.5em 0 0 #ffffff;\n\t}\n}\n</style>\nloading...</div>\n",a.innerHTML=this.template,this.container=a.firstChild},b}();b.Buffering=c}(b=a.components||(a.components={}))}(b=a.player||(a.player={}))}(b=a.canvas||(a.canvas={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c;!function(b){var c=function(c){function d(b,d,e,f){void 0===f&&(f={});var g=c.call(this,b,d,e)||this;return g.parameters=f,g.defaultVolume=0,g.logger=new a.Logger("canvas.player.CanvasPlayer"),g.audioSyncDiff=.5,g.waitForPlay=!1,g.logger.debug("constructor()",b,d,e,f.assetsPath),g.parameters.assetsPath&&g.parameters.assetsPath.match(/http:|https:/)||(g.logger.warn("assetsPath replace with default (relative path not allow)"),g.parameters.assetsPath=window.location.protocol+"//cdn.teads.tv/media/player"),g}return __extends(d,c),d.prototype.load=function(a,c,d){var e=this;void 0===c&&(c=!1),void 0===d&&(d=b.model.StreamType.NO_STREAM),this.logger.debug("load()",a,c,d),this.url=a.replace(/http:|https:/,""),this.dispatch(b.model.mediaEvents.LOAD_START),this.getMeta(this.url,function(a){var f=e.url.split("/");f.pop(),e.video=new b.components.Video(f.join("/"),a,d,e),e.audio=new b.components.Audio(f.join("/"),a,d,e),e.buffer=new b.components.Buffering(e),c&&e.listen(b.model.mediaEvents.CAN_PLAY,function(){return e.play()}),e.buffer.show(),e.listen(b.model.mediaEvents.CAN_PLAY,function(){return e.buffer.hide()}),e.listen(b.model.mediaEvents.ENDED,function(){return e.audio.release()}),e.video.listen(b.model.mediaEvents.STALLED,function(){return e.dispatch(b.model.mediaEvents.STALLED)}),e.video.listen(b.model.mediaEvents.STALLED,function(){return e.pause(!0)}),e.video.listen(b.model.mediaEvents.RESUME_AFTER_STALLED,function(){return e.dispatch(b.model.mediaEvents.RESUME_AFTER_STALLED)}),e.video.listen(b.model.mediaEvents.RESUME_AFTER_STALLED,function(){return e.play()}),e.video.listen(b.model.mediaEvents.TIME_UPDATE,function(){return e.onVideoProgress()}),e.video.listen(b.model.mediaEvents.CAN_PLAY,function(){return e.canPlayAll()}),e.audio.listen(b.model.mediaEvents.CAN_PLAY,function(){return e.canPlayAll()}),e.video.listen(b.model.mediaEvents.ENDED,function(){return e.dispatch(b.model.mediaEvents.ENDED)}),e.video.listen(b.model.mediaEvents.LOADED,function(){return e.dispatch(b.model.mediaEvents.LOADED)}),e.video.listen(b.model.mediaEvents.ERROR,function(){return e.dispatch(b.model.mediaEvents.ERROR,{error:"An error occured with the video."})})})},d.prototype.play=function(){var a=this;this.logger.info("play()"),this.canplay()?(this.waitForPlay=!1,this.video.play(),this.audio.play(),this.dispatch(b.model.mediaEvents.PLAY),this.dispatch(b.model.mediaEvents.PLAYING)):this.waitForPlay||(this.waitForPlay=!0,this.dispatch(b.model.mediaEvents.STALLED),this.dispatch(b.model.mediaEvents.PAUSE),this.listen(b.model.mediaEvents.CAN_PLAY,function(){a.dispatch(b.model.mediaEvents.RESUME_AFTER_STALLED),a.play()}))},d.prototype.pause=function(a){void 0===a&&(a=!1),this.video&&this.audio?(this.video.pause(),this.audio.pause(),this.dispatch(b.model.mediaEvents.PAUSE),this.logger.info("pause()"),a||this.video.state!==b.model.MediaState.STALLED||(this.video.cleanStallTimeout(),this.buffer.hide())):(this.muteEvent(b.model.mediaEvents.CAN_PLAY),this.waitForPlay=!1)},d.prototype.canplay=function(){return!(!this.video||!this.audio)&&(this.video.canplay()&&this.audio.canplay())},Object.defineProperty(d.prototype,"src",{get:function(){return this.url},set:function(a){this.load(a,!1,b.model.StreamType.FULL)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"currentTime",{get:function(){return this.video?this.video.getCurrentTime():0},set:function(a){this.video&&(this.logger.info("set currentTime",a),this.dispatch(b.model.mediaEvents.SEEKING),this.video.setCurrentTime(a)&&(this.audio.currentTime=a),this.dispatch(b.model.mediaEvents.SEEKED))},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"duration",{get:function(){return this.video&&this.audio?this.video.duration||this.audio.duration:0},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"volume",{get:function(){return this.audio?this.audio.volume:0},set:function(a){var c=this;if(this.logger.debug("set volume",a),this.audio){this.audio.volume=a;var d=function(){return c.audio.play(c.currentTime)};this.audio.canplay()&&this.video.state===b.model.MediaState.PLAYING&&d(),this.dispatch(b.model.mediaEvents.VOLUME_CHANGE,{value:a})}else this.defaultVolume=a},enumerable:!0,configurable:!0}),d.prototype.onVideoProgress=function(){if(this.audio.api&&this.audio.playing()){var a=this.audio.currentTime-this.currentTime,c=Math.abs(a);c>=this.audioSyncDiff&&(a>0||this.video.meta.tv?this.video.setCurrentTime(this.audio.currentTime)||this.video.setCurrentTime(this.currentTime+this.audioSyncDiff):this.audio.currentTime=this.currentTime,this.logger.debug("sync audio (diff/audioTime)",c,this.audio.currentTime),this.dispatch(b.model.mediaEvents.AUDIO_SYNC,{value:c}))}this.dispatch(b.model.mediaEvents.TIME_UPDATE)},d.prototype.canPlayAll=function(){this.canplay()&&(this.dispatch(b.model.mediaEvents.CAN_PLAY),this.dispatch(b.model.mediaEvents.LOADED_METADATA))},d.prototype.getMeta=function(c,d){var e=this,f=a.Request.createXmlHttpRequest();f.open("GET",c.replace(/(\.mpg|\.mpeg|\.tv)(?!\/)/gi,".meta?v2"),!0),f.responseType="json",f.addEventListener("load",function(c){if(f.response){var g="string"==typeof f.response?a.JSON.parse(f.response):f.response;!g.tv&&(a.Context.isChromeIos()||a.Context.isUIWebview()||a.Context.isFacebookWebview()||a.Context.isIpad())?e.dispatch(b.model.mediaEvents.ERROR,{error:"The metadata are missing."}):d(g)}else e.dispatch(b.model.mediaEvents.ERROR,{error:"No response from the HTTPRequest, did the file exist?"})}),f.addEventListener("error",function(a){e.dispatch(b.model.mediaEvents.ERROR,{error:"An error occured with the HTTPRequest."}),e.logger.error.bind(e.logger)}),f.send()},d}(b.components.Canvas);b.CanvasPlayer=c}(c=b.player||(b.player={}))}(b=a.canvas||(a.canvas={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function c(){this.status=a.vpaid.VpaidStatus.READY,this.eventHandler=new a.vpaid.EventHandler,this.trackingRaised={AdVideoFirstQuartile:!1,AdVideoMidpoint:!1,AdVideoThirdQuartile:!1},this.parameters={},this.skippable=!1,this.expanded=!1}return c.prototype.getVPAID=function(){return this},c.prototype.handshakeVersion=function(a){return"2.0"},c.prototype.subscribe=function(a,b,c){this.eventHandler.subscribe(a,b,c)},c.prototype.unsubscribe=function(a,b){this.eventHandler.unsubscribe(a,b)},c.prototype.initAd=function(c,d,e,f,g,h){var i=this;this.status=a.vpaid.VpaidStatus.LOADING,this.width=c,this.height=d,this.viewMode=e,a.AdParameterHelper.decode(g).match({success:function(c){for(var d in c)c.hasOwnProperty(d)&&(i.parameters[d]=c[d]);return i.environmentVars=h,i.environmentVars.videoSlot||(i.environmentVars.videoSlot=b.PLAYER=b.PLAYER||document.createElement("video")),i.environmentVars.videoSlot.setAttribute&&(i.environmentVars.videoSlot.setAttribute("webkit-playsinline","true"),i.environmentVars.videoSlot.setAttribute("playsinline","true"),a.Context.isAndroid()&&a.Context.isChromeWebView()&&null===i.environmentVars.videoSlot.getAttribute("poster")&&i.environmentVars.videoSlot.setAttribute("poster",a.Constant.base64TransparentPixel),null===i.environmentVars.videoSlot.getAttribute("muted")&&i.environmentVars.videoSlot.setAttribute("muted","true")),i.environmentVars.slot?(i.video=i.environmentVars.videoSlot,void i.createContainer(i.environmentVars.slot)):void i.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdError,"no slot provided in environmentVars")},failure:function(b){i.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdError,"invalid creative data: "+g)}})},c.prototype.startAd=function(){this.status=a.vpaid.VpaidStatus.STARTING},c.prototype.skipAd=function(){this.status=a.vpaid.VpaidStatus.SKIPPING},c.prototype.stopAd=function(){this.status=a.vpaid.VpaidStatus.STOPPING},c.prototype.resizeAd=function(a,b,c){this.width=a,this.height=b,this.viewMode=c},c.prototype.expandAd=function(){return!1},c.prototype.collapseAd=function(){return!1},c.prototype.getAdLinear=function(){return!0},c.prototype.getAdWidth=function(){return this.width},c.prototype.getAdHeight=function(){return this.height},c.prototype.getAdExpanded=function(){return a.HTMLHelper.isFullscreen()||this.expanded},c.prototype.getAdSkippableState=function(){return this.skippable},c.prototype.getAdCompanions=function(){return""},c.prototype.getAdIcons=function(){return!1},c.prototype.getAdDuration=function(){throw"not implemented"},c.prototype.getAdRemainingTime=function(){throw"not implemented"},c.prototype.getStatus=function(){return this.status},c.prototype.createContainer=function(a){this.container||(this.container=document.createElement("div"),this.container.style.position="relative",a.appendChild(this.container))},c.prototype.onAdVideoCompleteDispatched=function(){var a=this;this.parameters.noAutoStop?(this.video.addEventListener("seeked",function(){a.video.pause()},!1),this.video.currentTime=1):this.stopAd()},c.prototype.dispatchVpaidEvent=function(b,c){this.handleVPAIDEvent(new a.vpaid.VPAIDEvent(b,c))},c.prototype.handleVPAIDEvent=function(b){if(!(this.status===a.vpaid.VpaidStatus.SKIPPING&&b.type!==a.vpaid.VPAIDEvent.AdSkipped||this.status===a.vpaid.VpaidStatus.STOPPING&&b.type!==a.vpaid.VPAIDEvent.AdStopped||this.status<=a.vpaid.VpaidStatus.STOPPED||this.status===a.vpaid.VpaidStatus.STOPPING&&b.type!==a.vpaid.VPAIDEvent.AdStopped)){switch(b.type){case a.vpaid.VPAIDEvent.AdLoaded:this.status=a.vpaid.VpaidStatus.LOADED;break;case a.vpaid.VPAIDEvent.AdStarted:this.status=a.vpaid.VpaidStatus.STARTED;break;case a.vpaid.VPAIDEvent.AdVideoStart:case a.vpaid.VPAIDEvent.AdPlaying:this.status=a.vpaid.VpaidStatus.PLAYING;break;case a.vpaid.VPAIDEvent.AdPaused:this.status=a.vpaid.VpaidStatus.PAUSED;break;case a.vpaid.VPAIDEvent.AdVideoComplete:this.status=a.vpaid.VpaidStatus.COMPLETE;break;case a.vpaid.VPAIDEvent.AdSkipped:this.status=a.vpaid.VpaidStatus.SKIPPED;break;case a.vpaid.VPAIDEvent.AdStopped:this.status=a.vpaid.VpaidStatus.STOPPED;break;case a.vpaid.VPAIDEvent.AdDurationChange:case a.vpaid.VPAIDEvent.AdRemainingTimeChange:var c=this.getAdDuration(),d=c-this.getAdRemainingTime();c>0&&d>=.25*c&&!this.trackingRaised.AdVideoFirstQuartile?this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdVideoFirstQuartile):c>0&&d>=.5*c&&!this.trackingRaised.AdVideoMidpoint?this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdVideoMidpoint):c>0&&d>=.75*c&&!this.trackingRaised.AdVideoThirdQuartile&&this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdVideoThirdQuartile);break;case a.vpaid.VPAIDEvent.AdVideoFirstQuartile:case a.vpaid.VPAIDEvent.AdVideoMidpoint:case a.vpaid.VPAIDEvent.AdVideoThirdQuartile:if(this.trackingRaised[b.type])return;this.trackingRaised[b.type]=!0;break;case a.vpaid.VPAIDEvent.AdVideoComplete:this.status=a.vpaid.VpaidStatus.COMPLETE}this.eventHandler.handleEvent(b),this.status===a.vpaid.VpaidStatus.SKIPPED&&this.stopAd(),b.type===a.vpaid.VPAIDEvent.AdVideoComplete&&this.onAdVideoCompleteDispatched()}},c.prototype.handleException=function(b,c){var d='method "'+c+'" threw an exception: '+b.toString();this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdLog,d),this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdError,d)},c}();b.BaseVPAIDCreative=c}(b=a.video||(a.video={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(a,b,c){this.id=c,this.layer=document.createElement("div"),this.layer.className+="vpaid-clickthrough",this.layer.style.cursor="pointer",this.layer.style.opacity="0",this.layer.style.backgroundColor="#FFFFFF",this.layer.style.position="absolute",this.layer.style.zIndex="65000",this.layer.addEventListener("click",function(d){a(b,c,!0)},!1)}return a.prototype.resize=function(a,b){this.layer.style.width=a+"px",this.layer.style.height=b+"px"},a.prototype.remove=function(){this.layer.parentNode&&this.layer.parentNode.removeChild(this.layer)},a.prototype.append=function(a){a.firstChild?a.insertBefore(this.layer,a.firstChild):a.appendChild(this.layer)},a}();a.ClickThrough=b}(b=a.component||(a.component={}))}(b=a.video||(a.video={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b;!function(a){a[a.HAVE_NOTHING=0]="HAVE_NOTHING",a[a.HAVE_METADATA=1]="HAVE_METADATA",a[a.HAVE_CURRENT_DATA=2]="HAVE_CURRENT_DATA",a[a.HAVE_FUTURE_DATA=3]="HAVE_FUTURE_DATA",a[a.HAVE_ENOUGH_DATA=4]="HAVE_ENOUGH_DATA"}(b=a.NetworkState||(a.NetworkState={}));var c;!function(a){a[a.NETWORK_EMPTY=0]="NETWORK_EMPTY",a[a.NETWORK_IDLE=1]="NETWORK_IDLE",a[a.NETWORK_LOADING=2]="NETWORK_LOADING",a[a.NETWORK_NO_SOURCE=3]="NETWORK_NO_SOURCE"}(c=a.ReadyState||(a.ReadyState={}))}(b=a.video||(a.video={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(c){function d(){var a=null!==c&&c.apply(this,arguments)||this;return a.config={url:"",skippable:!0,skipoffset:0,gradients:!0},a.eventMap={durationchange:"AdDurationChange",resize:"AdSizeChange",volumechange:"AdVolumeChange",ended:"AdVideoComplete",play:"AdPlaying",playing:"AdPlaying",pause:"AdPaused",timeupdate:"AdRemainingTimeChange",error:"AdError"},a}return __extends(d,c),d.prototype.initAd=function(b,d,e,f,g,h){var i=this;if(this.status!==a.vpaid.VpaidStatus.READY)return void this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdLog,"creative is not in ready state, cannot call initAd");try{this.parameters=this.config,c.prototype.initAd.call(this,b,d,e,f,g,h),a.Dom.addEventListener("error",this.video,function(a){i.handleVideoError(a)}),a.Dom.addEventListener("loadedmetadata",this.video,function(b){return i.dispatchVpaidEvent(a.vpaid.CustomVPAIDEvent.AdVideoMetadata,{width:i.video.videoWidth,height:i.video.videoHeight})}),this.beginingTimestamp=Date.now(),this.video.preload="metadata",this.video.src=this.parameters.url,this.appendVideo(),this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdLoaded)}catch(a){this.handleException(a,"initAd")}},d.prototype.startAd=function(){var d=this;if(this.status>a.vpaid.VpaidStatus.LOADED)return void this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdLog,"try to call startAd but ad is starting or is already started");if(this.status<a.vpaid.VpaidStatus.LOADED)return void this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdLog,"Ad is not loaded, use initAd first");try{c.prototype.startAd.call(this),this.parameters.gradients&&this.appendGradients(),this.clickThrough=new b.component.ClickThrough(function(b,c,e){d.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdClickThru,{url:b,id:c,playerHandles:e})},this.parameters.clickThrough),this.clickThrough.append(this.container),this.clickThrough.resize(this.width,this.height),this.setSize(this.width,this.height),this.initListeners(),this.video.play(),this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdStarted),this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdImpression)}catch(a){this.handleException(a,"startAd")}},d.prototype.skipAd=function(){if(this.status<=a.vpaid.VpaidStatus.SKIPPING)return void this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdLog,"Ad is already stopped or is skipping");try{this.skippable?(c.prototype.skipAd.call(this),this.video.pause(),this.video.style.display="none",this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdSkipped)):this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdLog,"skipAd() called, but creative is not skippable")}catch(a){this.handleException(a,"skipAd")}},d.prototype.resizeAd=function(b,c,d){try{this.setSize(b,c),this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdSizeChange)}catch(a){this.handleException(a,"resizeAd")}},d.prototype.stopAd=function(){if(this.status<=a.vpaid.VpaidStatus.STOPPING)return void this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdLog,"Ad is already stopped");try{c.prototype.stopAd.call(this),this.removeVideo(),this.clickThrough.remove(),this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdStopped),this.eventHandler.clearListeners()}catch(a){this.handleException(a,"stopAd")}},d.prototype.pauseAd=function(){try{this.video.pause()}catch(a){this.handleException(a,"pauseAd")}},d.prototype.resumeAd=function(){try{this.video.play()}catch(a){this.handleException(a,"resumeAd")}},d.prototype.getAdRemainingTime=function(){return this.video?this.video.duration-this.video.currentTime:0},d.prototype.getAdDuration=function(){return this.video?this.video.duration:0},d.prototype.getAdVolume=function(){return this.video?this.video.muted?0:this.video.volume:0},d.prototype.setAdVolume=function(a){return this.video?(this.video.muted=0===a,this.video.volume=a,this.video.muted?0:this.video.volume):0},d.prototype.appendGradients=function(){var b=this;a.ArrayHelper.forEach(["top","bottom"],function(c){var d=document.createElement("div");d.style.background="transparent url(data:image/png;base64,"+a.video.VPAIDVideo["GRADIENT_"+c.toUpperCase()]+")",d.style.position="absolute",d.style.left="0",d.style[c]="0",d.style.zIndex="2",d.style.height="30px",d.style.width="100%",b.container.appendChild(d)})},d.prototype.appendVideo=function(){this.video.parentNode||(this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdLog,"Video slot got no parent node, appending to container"),this.container.appendChild(this.video))},d.prototype.removeVideo=function(){try{this.video.parentNode.removeChild(this.video)}catch(b){this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdLog,"teads-vpaid-video, cannot remove video from DOM")}},d.prototype.sendAdVideoStartEvent=function(){this.videoHasStarted||(this.videoHasStarted=!0,this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdVideoStart))},d.prototype.setSize=function(a,b){this.width=a,this.height=b,this.video&&(this.video.width=this.width,this.video.height=this.height),this.clickThrough&&this.clickThrough.resize(a,b),this.container.style.width=a+"px",this.container.style.height=b+"px"},d.prototype.initListeners=function(){var a=this;for(var b in this.eventMap)this.video.addEventListener(b,function(b){a.handleVideoEvent(b)},!1)},d.prototype.handleVideoError=function(c){if("error"===c.type){var d=this.video.error;if(d)switch(d.code){case 1:break;case 2:this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdError,{message:"video error : A network error caused the ressource to stop being fetched",id:a.VastException.MEDIAFILE_TIMEOUT.id});break;case 3:this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdError,{message:"video error : A decoding error caused the ressource to stop being fetched",id:a.VastException.MEDIAFILE_DISPLAY.id});break;case 4:var e={message:"video error : The associated ressource has been detected to be not suitable",id:a.VastException.GENERAL_LINEAR.id};this.video.readyState===b.NetworkState.HAVE_NOTHING&&(e.id=a.VastException.FILE_NOT_FOUND.id),this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdError,e)}else this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdError,{message:"video error : unkown error",id:a.VastException.GENERAL.id})}},d.prototype.handleVideoEvent=function(b){try{var c=this.eventMap[b.type];switch(b.type){case"pause":if(this.video.currentTime===this.video.duration||this.status<=a.vpaid.VpaidStatus.SKIPPING||this.status===a.vpaid.VpaidStatus.COMPLETE)return;break;case"play":case"playing":if(this.status===a.vpaid.VpaidStatus.STARTED)return this.sendAdVideoStartEvent();
if(this.status!==a.vpaid.VpaidStatus.PAUSED)return;break;case"timeupdate":this.parameters.skippable&&!this.skippable&&this.video.currentTime>=Number(this.parameters.skipoffset)&&(this.skippable=!0,this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdSkippableStateChange)),(this.status===a.vpaid.VpaidStatus.STARTED||this.video.currentTime>0)&&this.sendAdVideoStartEvent()}this.dispatchVpaidEvent(c)}catch(c){var d='Creative threw an exception when handling "'+b.type+'" HTML5 video event: '+c.toString();this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdLog,d),this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdError,{message:d,id:a.VastException.GENERAL.id})}},d.GRADIENT="iVBORw0KGgoAAAANSUhEUgAAAAEAAAAeCAYAAADtlXTHAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QjM0ODU0RjM1QkFEMTFFNUE5RDI5OTE4QkFCM0I3NzciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QjM0ODU0RjQ1QkFEMTFFNUE5RDI5OTE4QkFCM0I3NzciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpCMzQ4NTRGMTVCQUQxMUU1QTlEMjk5MThCQUIzQjc3NyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpCMzQ4NTRGMjVCQUQxMUU1QTlEMjk5MThCQUIzQjc3NyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/",d.GRADIENT_TOP=d.GRADIENT+"Psk0S98AAAAgSURBVHjaYmBgYJBiAhIMIOI/nEDj0oNgYGaAAYAAAwAH4xg8FtOkrgAAAABJRU5ErkJggg==",d.GRADIENT_BOTTOM=d.GRADIENT+"PkIta+gAAAAaSURBVHjaYmBABoxMMIKBCYVLDwLJSoAAAwAWTwBRQ43+sgAAAABJRU5ErkJggg==",d}(b.BaseVPAIDCreative);b.VPAIDVideo=c}(b=a.video||(a.video={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}return __extends(c,b),c.prototype.initAd=function(c,d,e,f,g,h){var i=this;h.videoSlot&&h.videoSlot.parentNode&&h.videoSlot.parentNode.removeChild(h.videoSlot),this.createContainer(h.slot),a.AdParameterHelper.decode(g).match({success:function(g){h.videoSlot=new a.canvas.player.CanvasPlayer(i.container,c,d,g),h.videoSlot.addEventListener(a.canvas.player.model.mediaEvents.ERROR,function(a){return i.dispatchVpaidEvent(i.eventMap[a.type])}),b.prototype.initAd.call(i,c,d,e,f,g,h)},failure:function(a){return i.handleException(a,"initAd")}})},c.prototype.startAd=function(){if(this.status>a.vpaid.VpaidStatus.LOADED)return void this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdLog,"try to call startAd but ad is starting or is already started");if(this.status<a.vpaid.VpaidStatus.LOADED)return void this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdLog,"Ad is not loaded, use initAd first");try{b.prototype.startAd.call(this),this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdDurationChange)}catch(a){this.handleException(a,"startAd")}},c.prototype.appendVideo=function(){},c.prototype.removeVideo=function(){this.video.pause(),this.container.removeChild(this.video.html5video||this.video.canvas)},c}(b.VPAIDVideo);b.VPAIDCanvas=c}(b=a.video||(a.video={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b;!function(a){a.HTMLVideoProperties={poster:!0,width:!0,height:!0,videoHeight:!1,videoWidth:!1,buffered:!1,duration:!1,ended:!1,error:!1,networkState:!1,paused:!1,played:!1,readyState:!1,seekable:!1,seeking:!1,currentSrc:!1,autoplay:!0,controls:!0,currentTime:!0,loop:!0,muted:!1,defaultMuted:!0,playbackRate:!1,defaultPlaybackRate:!1,preload:!1,src:!0,volume:!0,audioTracks:!1,textTracks:!1,videoTracks:!1}}(b=a.dom||(a.dom={}))}(b=a.video||(a.video={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(){}return a.defineProperty=function(a,b,c,d){Object.defineProperty(a,b,function(){var a={enumerable:!0,configurable:!0,get:function(){return c.call(this)},set:function(a){}};return d&&(a.set=function(a){d.call(this,a)}),a}())},a}();a.ObjectHelper=b}(b=a.helper||(a.helper={}))}(b=a.video||(a.video={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b;!function(b){b.VideoWrapper=function(a){this._wrappedVideo=a},b.VideoWrapper.prototype=Object.create(HTMLElement.prototype);var c=function(c,d){a.helper.ObjectHelper.defineProperty(b.VideoWrapper.prototype,c,function(){return this._wrappedVideo[c]},function(a){d&&(this._wrappedVideo[c]=a)})};for(var d in b.HTMLVideoProperties)b.HTMLVideoProperties.hasOwnProperty(d)&&c(d,b.HTMLVideoProperties[d]);b.VideoWrapper.prototype.addEventListener=function(a,b,c){void 0===c&&(c=!1),this._wrappedVideo.addEventListener(a,b,c)},b.VideoWrapper.prototype.canPlayType=function(a){return this._wrappedVideo.canPlayType()},b.VideoWrapper.prototype.load=function(){this._wrappedVideo.load()},b.VideoWrapper.prototype.pause=function(){this._wrappedVideo.pause()},b.VideoWrapper.prototype.play=function(){this._wrappedVideo.play()},b.VideoWrapper.prototype.getVideoPlaybackQuality=function(){return this._wrappedVideo.getVideoPlaybackQuality()},b.VideoWrapper.prototype.webkitEnterFullscreen=function(){return this._wrappedVideo.webkitEnterFullscreen()},b.VideoWrapper.prototype.webkitExitFullscreen=function(){this._wrappedVideo.webkitExitFullscreen()},b.VideoWrapper.prototype.webkitEnterFullScreen=function(){this.webkitEnterFullscreen()},b.VideoWrapper.prototype.webkitExitFullScreen=function(){this.webkitExitFullscreen()}}(b=a.dom||(a.dom={}))}(b=a.video||(a.video={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(){}return a.abort="abort",a.canplay="canplay",a.canplaythrough="canplaythrough",a.durationchange="durationchange",a.emptied="emptied",a.encrypted="encrypted",a.ended="ended",a.error="error",a.interruptbegin="interruptbegin",a.interruptend="interruptend",a.loadeddata="loadeddata",a.loadedmetadata="loadedmetadata",a.loadstart="loadstart",a.pause="pause",a.play="play",a.playing="playing",a.progress="progress",a.ratechange="ratechange",a.seeked="seeked",a.seeking="seeking",a.stalled="stalled",a.suspend="suspend",a.timeupdate="timeupdate",a.volumechange="volumechange",a.waiting="waiting",a}();a.MediaEvent=b}(b=a.dom||(a.dom={}))}(b=a.video||(a.video={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(){this.ranges=[]}return Object.defineProperty(a.prototype,"length",{get:function(){return this.ranges.length},enumerable:!0,configurable:!0}),a.prototype.addRange=function(a,b){this.ranges.push({start:a,end:b})},a.prototype.start=function(a){return this.ranges[a].start},a.prototype.end=function(a){return this.ranges[a].end},a}();a.TimeRanges=b}(b=a.dom||(a.dom={}))}(b=a.video||(a.video={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(){}return a.isPercentValue=function(a){return String(a).indexOf("%")>-1},a.getPercentValue=function(a){return parseInt(a.replace("%",""),10)/100},a.isPixelValue=function(a){return String(a).indexOf("px")>-1},a.getPixelValue=function(a){return parseInt(a.replace("px",""),10)},a.getBooleanValue=function(a){return"true"===a||"false"!==a&&!!a},a.parseAttributes=function(b){var c=["width","height","src","preload","autoplay","loop"];c.forEach(function(c){b.hasAttribute(c)&&a.updateAttribute(b,c)})},a.updateAttribute=function(b,c){var d=b.getAttribute(c);switch(c){case"width":case"height":b.style[c]=d+(a.isPercentValue(d)||a.isPixelValue(d)?"":"px");break;case"src":case"preload":b[c]=d;break;case"autoplay":case"loop":b[c]=a.getBooleanValue(d)}},a}();a.CustomElementHelper=b}(b=a.helper||(a.helper={}))}(b=a.video||(a.video={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c;!function(b){var c=function(){function b(){}return b.ping=function(b,c){var d,e,f,g=a.Request.createXmlHttpRequest(),h=Date.now(),i=function(b){d||(clearTimeout(f),d=Date.now()-h,e=d<=100?1e3:d<200?700:d<400?500:300,c(d,e),(new a.Sumologic).sendInfo("ping "+[d,b].join(";")))};f=setTimeout(function(){return i("timeout")},500),g.open("HEAD",b+(b.indexOf("?")>-1?"&":"?")+h,!0),g.addEventListener("load",function(){return i("load")}),g.addEventListener("error",function(){return i("error")}),g.send()},b}();b.NetworkHelper=c}(c=b.helper||(b.helper={}))}(b=a.video||(a.video={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b;!function(a){var b;!function(a){a[a.ERROR=-1]="ERROR",a[a.UNSTARTED=0]="UNSTARTED",a[a.WAITING=1]="WAITING",a[a.READY=2]="READY"}(b=a.MediaProxyStatus||(a.MediaProxyStatus={}))}(b=a.constant||(a.constant={}))}(b=a.video||(a.video={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(){}return a.READY="ready",a.ERROR="error",a.WAITING="waiting",a}();a.MediaProxyEvent=b}(b=a.constant||(a.constant={}))}(b=a.video||(a.video={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b;!function(a){var b;!function(a){a[a.MEDIA_ERR_ABORTED=1]="MEDIA_ERR_ABORTED",a[a.MEDIA_ERR_NETWORK=2]="MEDIA_ERR_NETWORK",a[a.MEDIA_ERR_DECODE=3]="MEDIA_ERR_DECODE",a[a.MEDIA_ERR_SRC_NOT_SUPPORTED=4]="MEDIA_ERR_SRC_NOT_SUPPORTED"}(b=a.MediaError||(a.MediaError={}))}(b=a.constant||(a.constant={}))}(b=a.video||(a.video={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(c){function d(){var d=null!==c&&c.apply(this,arguments)||this;return d.status=b.constant.MediaProxyStatus.UNSTARTED,d.sumologic=new a.Sumologic,d}return __extends(d,c),d.getFileExtension=function(b){return a.URIHelper.parse(b).pathname.split(".").pop()},d.prototype.getStatus=function(){return this.status},d.prototype.getVideoUrl=function(){return this.videoUrl},d.prototype.load=function(c,e){var f=this;if(this.sumologic.isInitialized()||this.sumologic.init(a.Sumologic.CONFIGS.PLAYER,a.Option.empty()),a.ArrayHelper.indexOf(d.alreadyEncoded,d.getFileExtension(c))>-1)return this.videoUrl=c,this.status=b.constant.MediaProxyStatus.READY,void this.dispatch(b.constant.MediaProxyEvent.READY,{errorCode:200});this.status=b.constant.MediaProxyStatus.WAITING,this.dispatch(b.constant.MediaProxyEvent.WAITING);var g=location.hostname.match(/.+\.sandbox\.teads\.net|localdocker/),h=a.Utils.getProtocol()+"//[HOST]/transcode?url=[URL]&bitrate=[BITRATE]".replace(/\[HOST\]/,g?g[0]+":18088":"mp.teads.tv").replace(/\[URL\]/,encodeURIComponent(c)).replace(/\[BITRATE\]/,e.toString()),i=a.Request.createXmlHttpRequest(),j=!1;i.open("GET",h,!0),i.onreadystatechange=function(){if(4===i.readyState&&!j){switch(i.status){case 200:f.videoUrl=i.responseText,f.status=b.constant.MediaProxyStatus.READY,f.dispatch(b.constant.MediaProxyEvent.READY,{errorCode:i.status}),j=!0;break;case 416:case 202:case 201:default:f.status=b.constant.MediaProxyStatus.ERROR,f.dispatch(b.constant.MediaProxyEvent.ERROR,{errorCode:i.status}),j=!0}f.sumologic.sendInfo(["proxy","resp",i.status].join(" "))}},i.send(),this.sumologic.sendInfo("proxy call")},d.alreadyEncoded=["tv","mpg","mpeg"],d}(a.canvas.player.components.EventDispatcher);b.MediaProxy=c}(b=a.video||(a.video={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){function c(){var c=this;this.logger=new a.Logger("HTMLVideoCanvas"),this._mainContainer=document.createElement("div"),this._mainContainer.style.backgroundColor="black",this._mainContainer.style.position="relative",this._mainContainer.style.width="100%",this._mainContainer.style.height="100%",this._mainContainer.style.zIndex=1,this.appendChild(this._mainContainer),this._videoContainer=document.createElement("div"),this._videoContainer.style.position="absolute",this._videoContainer.style.top=0,this._videoContainer.style.left=0,this._videoContainer.style.zIndex=2,this._videoContainer.style.width="100%",this._videoContainer.style.height="100%",this._mainContainer.appendChild(this._videoContainer),this.canvasPlayer=new a.canvas.player.CanvasPlayer(this._videoContainer,1,1,{type:"CANVAS"}),this.mediaProxy=new b.MediaProxy,this.mediaProxy.listen(b.constant.MediaProxyEvent.READY,function(){c.logger.debug("MediaProxy return video url",c.mediaProxy.getVideoUrl()),c.canvasPlayer.src=c.mediaProxy.getVideoUrl(),c.autoplay&&c.canvasPlayer.play(),c.volume=c._volume}),this.mediaProxy.listen(b.constant.MediaProxyEvent.ERROR,function(){c.logger.debug("MediaProxy didn't return video url"),c._error={code:b.constant.MediaError.MEDIA_ERR_NETWORK},c.canvasPlayer.dispatch(b.dom.MediaEvent.error)}),this.canvasPlayer.canvas.style.position="absolute",this.canvasPlayer.canvas.style.maxHeight="none",this.canvasPlayer.canvas.style.maxWidth="none",this.canvasPlayer.canvas.style.top="0",this.canvasPlayer.canvas.style.left="0",b.dom.VideoWrapper.call(this,this.canvasPlayer),this.listeners={};var d=function(a){if(c.listeners[a.type]&&c.listeners[a.type].length){for(var b=0,e=c.listeners[a.type].length;b<e;b++)try{c.listeners[a.type][b].call(c,a)}catch(a){}"loadedmetadata"===a.type&&d(new CustomEvent("durationchange")),"playing"!==a.type||c.attachedCallbackCalled||c.attachedCallback()}},e=function(a){return function(a){d(a)}};for(var f in b.dom.MediaEvent){var g=b.dom.MediaEvent[f];this.canvasPlayer.addEventListener(g,e(g))}this.canvasPlayer.addEventListener(b.dom.MediaEvent.loadedmetadata,function(a){c._handleResize()}),this.canvasPlayer.addEventListener(b.dom.MediaEvent.durationchange,function(a){void 0!==c._volume&&(c.canvasPlayer.volume=c._volume)}),this.canvasPlayer.addEventListener(b.dom.MediaEvent.playing,function(a){var b=function(){c._width&&c._height||(c.logger.debug("component got no width/height, try to adapt to container"),c._width=c._mainContainer.offsetWidth,c._height=c._mainContainer.offsetHeight),c._width&&c._height?(c.logger.debug("component have dimensions, force resize",c._width,c._height),c._handleResize()):setTimeout(b,100)};b(),d(new CustomEvent("timeupdate"))}),this._ended=!1,this.canvasPlayer.addEventListener(b.dom.MediaEvent.ended,function(a){c._ended=!0,c._paused=!0,d(new CustomEvent("timeupdate")),d(new CustomEvent("ended")),c.loop&&(c.currentTime=0,c.play())}),this._paused=!0,this.canvasPlayer.addEventListener(b.dom.MediaEvent.pause,function(a){c._paused=!0}),this.canvasPlayer.addEventListener(b.dom.MediaEvent.timeupdate,function(a){c._paused=!1}),this._seeking=!1,this.canvasPlayer.addEventListener(b.dom.MediaEvent.seeking,function(a){c._seeking=!0}),this.canvasPlayer.addEventListener(b.dom.MediaEvent.seeked,function(a){c._seeking=!1}),this.canvasPlayer.addEventListener(b.dom.MediaEvent.error,function(a){c._error=a.error})}c.prototype=Object.create(b.dom.VideoWrapper.prototype),b.helper.ObjectHelper.defineProperty(c.prototype,"src",function(){return this._src},function(c){var d=this;if(this.logger.debug("set src",c),(this.src||c)&&c!==this.src&&""!==c){var e=a.ArrayHelper.indexOf(b.MediaProxy.alreadyEncoded,b.MediaProxy.getFileExtension(c))>-1;if("mp4"!==b.MediaProxy.getFileExtension(c)&&!e&&(this.error=4,this.logger.error("only mp4,"+b.MediaProxy.alreadyEncoded.join(",")+" files are supported, try to set "+c+" as src"),this.listeners.error))return void a.ArrayHelper.forEach(this.listeners.error,function(a){return a()});this._src=c,this.setAttribute("src",c),e?this.mediaProxy.load(c,512):b.helper.NetworkHelper.ping(c,function(a,b){d.mediaProxy.load(c,b)})}}),a.ArrayHelper.forEach(["width","height"],function(a){b.helper.ObjectHelper.defineProperty(c.prototype,a,function(){return this["_"+a]||0},function(b){return this.logger.debug("set property "+a,b),isNaN(b)||this["_"+a]===b?void this._handleResize():(this["_"+a]=b,"width"===a&&!this.height&&this.videoWidth&&this.videoHeight?this._height=b*(this.videoHeight/this.videoWidth):"height"===a&&!this.width&&this.videoWidth&&this.videoHeight&&(this._width=b*(this.videoWidth/this.videoHeight)),void this._handleResize())})}),b.helper.ObjectHelper.defineProperty(c.prototype,"volume",function(){return void 0!==this._volume?this._volume:0},function(a){var b=this;this._volume=a,this.canvasPlayer.audio&&this.canvasPlayer.audio.authorizeAudio(function(){b.canvasPlayer.volume=b._volume}),this.canvasPlayer.volume=this._volume}),b.helper.ObjectHelper.defineProperty(c.prototype,"currentTime",function(){return this._ended?this.canvasPlayer.duration:isNaN(this.canvasPlayer.currentTime)?0:this.canvasPlayer.currentTime},function(a){this.canvasPlayer.currentTime=a}),b.helper.ObjectHelper.defineProperty(c.prototype,"seekable",function(){return!0}),b.helper.ObjectHelper.defineProperty(c.prototype,"readyState",function(){return 4}),b.helper.ObjectHelper.defineProperty(c.prototype,"networkState",function(){return 1}),b.helper.ObjectHelper.defineProperty(c.prototype,"autoplay",function(){return void 0!==this._autoplay&&this._autoplay},function(a){this._autoplay=a}),b.helper.ObjectHelper.defineProperty(c.prototype,"videoWidth",function(){return this.canvasPlayer.videoWidth||0}),b.helper.ObjectHelper.defineProperty(c.prototype,"videoHeight",function(){return this.canvasPlayer.videoHeight||0}),b.helper.ObjectHelper.defineProperty(c.prototype,"preload",function(){return!0},function(a){}),b.helper.ObjectHelper.defineProperty(c.prototype,"seeking",function(){return this._seeking}),b.helper.ObjectHelper.defineProperty(c.prototype,"muted",function(){return 0===this._volume}),b.helper.ObjectHelper.defineProperty(c.prototype,"ended",function(){return this._ended}),b.helper.ObjectHelper.defineProperty(c.prototype,"error",function(){return this._error}),b.helper.ObjectHelper.defineProperty(c.prototype,"paused",function(){return this._paused}),b.helper.ObjectHelper.defineProperty(c.prototype,"currentSrc",function(){return this._src}),b.helper.ObjectHelper.defineProperty(c.prototype,"played",function(){var a=new b.dom.TimeRanges;return a.addRange(0,this.currentTime),a}),b.helper.ObjectHelper.defineProperty(c.prototype,"buffered",function(){var a=new b.dom.TimeRanges;return a.addRange(0,this.currentTime),a}),b.helper.ObjectHelper.defineProperty(c.prototype,"loop",function(){return void 0!==this._loop&&this._loop},function(a){this._loop=a,this.setAttribute("loop",String(a))}),b.helper.ObjectHelper.defineProperty(c.prototype,"controls",function(){return!1},function(a){}),c.prototype.load=function(){},c.prototype.canPlayType=function(a){return"video/mp4"===a?"probably":""},c.prototype.addEventListener=function(c,d,e){void 0===e&&(e=!1),b.dom.MediaEvent[c]&&a.Utils.isObject(this.listeners)?(this.listeners[c]=this.listeners[c]||[],this.listeners[c].push(d)):HTMLElement.prototype.addEventListener.call(this,c,d,e)},c.prototype.removeEventListener=function(a,c,d){if(b.dom.MediaEvent[a]){var e=this.listeners[a].indexOf(c);e>=0&&(this.listeners[a][e]=function(){})}else HTMLElement.prototype.removeEventListener.call(this,a,c,d)},c.prototype._handleResize=function(){this.canvasPlayer.width=this.width,this.canvasPlayer.height=this.height,this.style.backgroundColor="black"},c.prototype.createdCallback=function(){c.call(this)},c.prototype.attributeChangedCallback=function(a,c,d){this.logger.debug("attributeChangedCallback",a,c,d),b.helper.CustomElementHelper.updateAttribute(this,a)},c.prototype.detachedCallback=function(){this.logger.debug("detached callback called"),this.canvasPlayer.pause()},c.prototype.attachedCallback=function(){var b=this;this.logger.debug("attachedCallback called"),this.attachedCallbackCalled=!0;try{this.style.display="block",this.style.overflow="hidden",this.style.objectFit="contain";var c=["width","height","position","top","left"],d=window.originalCreateElement?window.originalCreateElement.call(this.ownerDocument,"video"):this.ownerDocument.createElement("video");this.parentNode.appendChild(d),a.HTMLHelper.copyCSSRules(d,this,c),d.parentNode.removeChild(d),this.style.width&&"auto"!==this.style.width||(this.style.width="100%"),this.style.height&&"auto"!==this.style.height||(this.style.height="100%"),this._handleResize(),this._iframeResizer=document.createElement("iframe"),this._iframeResizer.style.zIndex=0,this._iframeResizer.style.width="100%",this._iframeResizer.style.height="100%",this._iframeResizer.style.border="none",this._iframeResizer.style.margin="0",this._iframeResizer.style.padding="0",this._mainContainer.appendChild(this._iframeResizer),this._iframeResizer.contentWindow.document.write("<html><body></body></html>"),this._iframeResizer.contentWindow.document.close();var e=function(){b._width=b._iframeResizer.contentWindow.innerWidth,b._height=b._iframeResizer.contentWindow.innerHeight,b.logger.debug("component resized",b.width,b.height),b._handleResize()};this._iframeResizer.contentWindow.addEventListener("resize",e,!1),this._handleResize(),this.style.backgroundColor="black"}catch(a){this.logger.debug("attachedCallback throw an exception",a)}},b.HTMLVideoCanvas=function(){if(!a.Context.isDesktop())try{var b=window.teads.video.HTMLVideoCanvas;return new b,b}catch(a){return document.registerElement("video-canvas",{prototype:c.prototype})}}(),b.HTMLVideoCanvas&&b.HTMLVideoCanvas.prototype&&(b.HTMLVideoCanvas.prototype.addEventListener=c.prototype.addEventListener)}(b=a.video||(a.video={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){a.ASSETS={vpaidvideojs:"teads-vpaid-video.min.js",vpaidcanvas:"teads-vpaid-canvas.min.js",vpaidvideoswf:"teads-vpaid-video.swf",vastcorsloader:"cors.swf",vpaidswfwrapper:"vpaidwrapper.swf",iasvans:"__IASVANS_3.3.0.js"}}(b=a.player||(a.player={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function b(){}return b.isMp4=function(a){return"video/mp4"===a},b.isWebm=function(a){return"video/webm"===a},b.canPlayType=function(b){return a.Try.of(function(){return!!document.createElement("video").canPlayType(b)}).getOrElse(function(){return!1})},b.canPlay=function(c){return a.Context.isSDK()?a.Context.isIos()?b.isMp4(c):a.Context.isAndroid()?b.isMp4(c)||b.isWebm(c):void 0:b.canPlayType(c)},b}();b.VideoHelper=c}(b=a.player||(a.player={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b;!function(a){a[a.UNSUPPORTED=0]="UNSUPPORTED",a[a.FLASH=1]="FLASH",a[a.JS=2]="JS",a[a.VPAID=3]="VPAID",a[a.CANVAS=4]="CANVAS"}(b=a.MediaProvider||(a.MediaProvider={}))}(b=a.player||(a.player={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){b.trackingMapping={error:a.vpaid.VPAIDEvent.AdError,click:a.vpaid.VPAIDEvent.AdClickThru,pause:a.vpaid.VPAIDEvent.AdPaused,resume:a.vpaid.VPAIDEvent.AdPlaying,skip:a.vpaid.VPAIDEvent.AdSkipped,creativeView:a.vpaid.VPAIDEvent.AdStarted,start:a.vpaid.VPAIDEvent.AdVideoStart,firstQuartile:a.vpaid.VPAIDEvent.AdVideoFirstQuartile,midpoint:a.vpaid.VPAIDEvent.AdVideoMidpoint,thirdQuartile:a.vpaid.VPAIDEvent.AdVideoThirdQuartile,complete:a.vpaid.VPAIDEvent.AdVideoComplete,impression:a.vpaid.VPAIDEvent.AdImpression,close:a.vpaid.VPAIDEvent.AdUserClose,closeLinear:a.vpaid.VPAIDEvent.AdUserClose,progress:a.vpaid.VPAIDEvent.AdRemainingTimeChange,otherAdInteraction:a.vpaid.VPAIDEvent.AdInteraction}}(b=a.player||(a.player={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function b(){}return b.whitelist=[/^((http|https)\:){0,1}\/\/cdn-tags\.brainient\.com\/.*/,/^((http|https)\:){0,1}\/\/.*\.brainient\.com\/vpaid\/\d+/,/^((http|https)\:){0,1}\/\/rawgit\.com\/ybootin\/.*/,/^((http|https)\:){0,1}\/\/[^\/]+\.teads\.(tv|net).*/,/^((http|https)\:){0,1}\/\/ad\.atdmt\.com\/as\/vpaid\.js;.*/,/^((http|https)\:){0,1}\/\/.*\.serving\-sys\.com\/.*\/.*VPAIDAPI\.js$/,/^((http|https)\:){0,1}\/\/(s\-){0,1}static\.innovid\.com\/mobileapps\/(s\/){0,1}js\/vpaid\/.*/,/^((http|https)\:){0,1}\/\/vpaid\.doubleverify\.com\/.*\.js/,/^((http|https)\:){0,1}\/\/.*\.moatads\.com\/[^\/]*\/moatwrapper\.js.*/,/^((http|https)\:){0,1}\/\/cdn\.adtags\.mobi\/shared\/js\/vpaid\.js/,/^((http|https)\:){0,1}\/\/.*\.adsafeprotected\.com\/IASVideo\.js\?.*/,/^((http|https)\:){0,1}\/\/imasdk\.googleapis\.com\/js\/sdkloader\/vpaid_adapter\.js/,/^((http|https)\:){0,1}\/\/.*\.measuread\.com\/.*\.js.*/,/^((http|https)\:){0,1}\/\/.*\.videostat\.com\/script\/gppVpaidCallbackAd\.js.*/,/^((http|https)\:){0,1}\/\/.*\.tubemogul\.com\/.*\.js.*/,/^((http|https)\:){0,1}\/\/.*\.flashtalking\.com\/.*/],b.isAuthorized=function(a){return b.isWhitelisted(a)},b.isWhitelisted=function(c){return!!a.Context.isWhiteListedIos10Safari()||b.isInList(b.whitelist,c)},b.isInList=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c].test(b))return!0;return!1},b}();b.VPAIDJSListIOS=c}(b=a.player||(a.player={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b=function(){function a(){}return a.whitelist=[/^((http|https)\:){0,1}\/\/cdn-tags\.brainient\.com\/.*/,/^((http|https)\:){0,1}\/\/.*\.brainient\.com\/vpaid\/\d+/,/^((http|https)\:){0,1}\/\/rawgit\.com\/ybootin\/.*/,/^((http|https)\:){0,1}\/\/[^\/]+\.teads\.(tv|net).*/,/^((http|https)\:){0,1}\/\/ad\.atdmt\.com\/as\/vpaid\.js;.*/,/^((http|https)\:){0,1}\/\/.*\.serving\-sys\.com\/.*\/.*VPAIDAPI\.js$/,/^((http|https)\:){0,1}\/\/(s\-){0,1}static\.innovid\.com\/mobileapps\/(s\/){0,1}js\/vpaid\/.*/,/^((http|https)\:){0,1}\/\/vpaid\.doubleverify\.com\/.*\.js/,/^((http|https)\:){0,1}\/\/.*\.moatads\.com\/[^\/]*\/moatwrapper\.js.*/,/^((http|https)\:){0,1}\/\/cdn\.adtags\.mobi\/shared\/js\/vpaid\.js/,/^((http|https)\:){0,1}\/\/.*\.adsafeprotected\.com\/IASVideo\.js\?.*/,/^((http|https)\:){0,1}\/\/imasdk\.googleapis\.com\/js\/sdkloader\/vpaid_adapter\.js/,/^((http|https)\:){0,1}\/\/.*\.measuread\.com\/.*\.js.*/,/^((http|https)\:){0,1}\/\/.*\.videostat\.com\/script\/gppVpaidCallbackAd\.js.*/,/^((http|https)\:){0,1}\/\/.*\.tubemogul\.com\/.*\.js.*/,/^((http|https)\:){0,1}\/\/.*\.flashtalking\.com\/.*/],a.blacklist=[],a.isAuthorized=function(b){return a.isWhitelisted(b)&&!a.isBlacklisted(b)},a.isWhitelisted=function(b){return a.isInList(a.whitelist,b)},a.isBlacklisted=function(b){return a.isInList(a.blacklist,b)},a.isInList=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c].test(b))return!0;return!1},a}();a.VPAIDJSListAndroid=b}(b=a.player||(a.player={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c;!function(a){a[a.VIDEO=0]="VIDEO",a[a.MPEG=1]="MPEG",a[a.TV=2]="TV",a[a.FLASH=3]="FLASH",a[a.VPAIDJS=4]="VPAIDJS",a[a.VPAIDFLASH=5]="VPAIDFLASH"}(c=b.MEDIAFILE_TYPE||(b.MEDIAFILE_TYPE={}));var d;!function(a){a.landscape="l",a.square="s",a.vertical="v"}(d=b.RatioCategory||(b.RatioCategory={}));var e=function(){function e(){}return e.getPreferredMediafileTypes=function(d){var e=[c.VIDEO,c.VPAIDJS,c.TV,c.MPEG,c.VPAIDFLASH,c.FLASH];return a.Context.isDesktop()||(e=a.ArrayHelper.filter(e,function(a){return a!==c.VPAIDJS}).concat([c.VPAIDJS])),a.Context.isIE()?e=a.ArrayHelper.filter(e,function(a){return a!==c.TV&&a!==c.MPEG}):a.Context.isSDK()?e=[c.VIDEO,c.VPAIDJS]:a.Context.isIos()&&a.Semver.isLowerThan(a.Context.getIosVersion(),"8")?e=d===b.PLAYER_TYPE.HTML5?[c.VIDEO]:a.Context.isIpad()?[c.MPEG,c.TV]:[]:(d===b.PLAYER_TYPE.CANVAS||a.Context.isIos()&&(a.Semver.isLowerThan(a.Context.getIosVersion(),"10")||!a.Context.isWhiteListedIos10Safari()&&!a.Context.isFacebookWebviewIOS10())&&d!==b.PLAYER_TYPE.HTML5)&&(e=a.ArrayHelper.filter(e,function(a){return a!==c.VIDEO})),a.FlashHelper.hasFlash()||(e=a.ArrayHelper.filter(e,function(a){return a!==c.FLASH&&a!==c.VPAIDFLASH})),e},e.getElectedMediafiles=function(d,f){var g=e.getPreferredMediafileTypes(f),h=[];a.ArrayHelper.map(d,function(a){a.api&&a.api.toLowerCase&&(a.api=a.api.toLowerCase()),a.type&&a.type.toLowerCase&&(a.type=a.type.toLowerCase())});for(var i=0,j=g.length;i<j&&0===h.length;){switch(g[i]){case c.VIDEO:h=a.ArrayHelper.filter(d,e.isPlayableVideo);break;case c.TV:h=a.ArrayHelper.filter(d,e.isTv);break;case c.MPEG:h=a.ArrayHelper.filter(d,e.isMpeg);break;case c.VPAIDJS:h=a.ArrayHelper.filter(d,function(c){return a.Semver.isGreaterOrEqual(a.Context.getIosVersion(),"8")?e.isVpaidJS(c)&&b.VPAIDJSListIOS.isAuthorized(c.url):a.Context.isAndroid()&&f===b.PLAYER_TYPE.CANVAS?e.isVpaidJS(c)&&b.VPAIDJSListAndroid.isAuthorized(c.url):e.isVpaidJS(c)});break;case c.VPAIDFLASH:h=a.ArrayHelper.filter(d,e.isVpaidFlash);break;case c.FLASH:h=a.ArrayHelper.filter(d,e.isFlash)}i++}return h},e.extractMediafileFromPing=function(a,b){var c=e.sortMediafilesByBitrate(a,e.getMaxBitrateForContext()),d=Math.max(b/e.pingDuration.max,0),f=Math.max(0,Math.min(c.length,Math.ceil(c.length*d))-1);return c[f]},e.sortMediafilesByBitrate=function(a,b){var c=a.map(function(a){return a.bitrate=a.bitrate||2*b.max,a}),d=c.filter(function(a){return a.bitrate<=b.max&&a.bitrate>=b.min});return d=d.length?d:c,d.sort(function(a,b){return b.bitrate-a.bitrate})},e.getMaxBitrateForContext=function(){return a.Context.isMobile()?e.bitrates.mobile:e.bitrates.default},e.getMediaProvider=function(c){switch(c.type){case"video/x-flv":return a.FlashHelper.hasFlash()?b.MediaProvider.FLASH:b.MediaProvider.UNSUPPORTED;case"application/x-shockwave-flash":case"application/x-javascript":case"application/javascript":case"text/javascript":return b.MediaProvider.VPAID;case"video/mpg":case"video/mpeg":case"video/tv":return a.Context.cacheCanvasUsed(!0),b.MediaProvider.CANVAS;default:return e.isPlayableVideo(c)?b.MediaProvider.JS:b.MediaProvider.UNSUPPORTED}},e.getOptimalMediaFiles=function(c,d,f,g){if(0===c.length)return null;var h=e.getEncodingCandidate(c.slice()),i=e.getElectedMediafiles(c,g);if(g!==b.PLAYER_TYPE.CANVAS&&!a.Semver.isGreaterOrEqual(a.Context.getIosVersion(),"8")||0!==i.length&&!e.isVpaidJS(i[0])||!h)if(i.length>1)e.ping(i[0].url,function(a){var b=e.extractMediafileFromPing(i,a);f(b,a)});else if(1===i.length)f(i[0],null);else{var j="No Mediafile for this context";f(null,null,j),this.logger.info("getOptimalMediaFiles",j)}else e.ping(h.url,function(a,b){e.waitForProxy(h.url,b,function(b,c){h.url=b,h.type="video/tv",f(b?h:null,a,c)})})},e.ping=function(c,d,f){void 0===f&&(f=!0);var g,h,i,j=a.Request.createXmlHttpRequest(),k=a.Timing.now(),l=!1,m=function(j){i.clear(),l||(l=!0,f?e.ping(c,d,!1):g||(g=a.Timing.now()-k,h=g<=100?1e3:g<200?700:g<400?500:300,d(g,h),b.playerSumologic.sendInfo("ping "+[g,j].join(";"))))};i=a.Timer.setTimeout(function(){return m("timeout")},e.pingDuration.max),j.open("HEAD",c+(c.indexOf("?")>-1?"&":"?")+k,!0),j.addEventListener("load",function(){return m("load")}),j.addEventListener("error",function(){return m("error")}),j.send()},e.waitForProxy=function(c,d,e){var f=this,g=location.hostname.match(/.+\.sandbox\.teads\.net|localdocker/),h=a.Utils.getProtocol()+"//[HOST]/transcode?url=[URL]&bitrate=[BITRATE]".replace(/\[HOST\]/,g?g[0]+":18088":"mp.teads.tv").replace(/\[URL\]/,encodeURIComponent(c)).replace(/\[BITRATE\]/,d.toString()),i=a.Request.createXmlHttpRequest(),j=!1;i.open("GET",h,!0),i.onreadystatechange=function(){var a;if(4===i.readyState&&!j){switch(j=!0,i.status){case 200:e(i.responseText);break;case 202:a="Mediaproxy - encoding ongoing - need wait",e(null,a);break;case 201:a="Mediaproxy - encoding init - need one more call to encode",e(null,a);break;case 410:a="Mediaproxy - encoding failed",e(null,a);break;case 400:a="Mediaproxy - bad request",e(null,a);break;default:a="Mediaproxy - other error - "+i.status,e(null,a)}f.logger.debug("proxy resp",i.status),b.playerSumologic.sendInfo(["proxy","resp",i.status].join(" "))}},i.send(),b.playerSumologic.sendInfo("proxy call")},e.getOptimalMediaFile=function(c,d,f,g){g.formatConfig&&g.formatConfig.allowedPlayer?(a.Context.isCanvasNeeded(g.formatConfig.allowedPlayer.isCustomContext())&&g.formatConfig.allowedPlayer.setValue(b.PLAYER_TYPE.CANVAS),g.type=g.formatConfig.allowedPlayer.getValue()):a.Context.isCanvasNeeded()&&(g.type=b.PLAYER_TYPE.CANVAS);var h=a.Timing.measure("measureAutoplay","markAutoplayStartTime","markAutoplayEndTime");
if(h){var i=g.type===b.PLAYER_TYPE.CANVAS?"dis":"en";b.playerSumologic.sendInfo("autoplay "+i+"-"+Math.round(h.duration))}e.getOptimalMediaFiles(c,d,function(a,c,d){a?(b.playerSumologic.sendInfo("media "+a.type),f(a,c?" -> ping: "+c+"ms":"")):f(null,d)},g.type)},e.getOptimalHeight=function(a,b,c){return b?Math.ceil(b/this.getRatio(a,c)):0},e.getRatio=function(a,b){var c=!this.isInternalMediafile(a.url);return!a.height||!a.width||!b&&c&&a.api&&"vpaid"===a.api.toLowerCase()&&a.width>a.height?16/9:a.width/a.height},e.getAssetFromMediaProvider=function(a){var c;switch(a){case b.MediaProvider.JS:c=b.ASSETS.vpaidvideojs;break;case b.MediaProvider.FLASH:c=b.ASSETS.vpaidvideoswf;break;case b.MediaProvider.CANVAS:c=b.ASSETS.vpaidcanvas;break;default:c=""}return c},e.getEncodingCandidate=function(a){var b;return a.forEach(function(a){var c=a.type||"";switch(a.weight=0,c.split("/").pop()){case"mov":a.weight=150;break;case"mp4":a.weight=100;break;case"flv":case"x-flv":a.weight=75;break;case"webm":case"ogg":case"ogv":a.weight=50}(!b||b.weight<=a.weight)&&(b=b||a,(b.weight<a.weight||b.bitrate<a.bitrate)&&(b=a))}),b.weight?b:null},e.isInternalMediafile=function(b){var c=a.URIHelper.parse(b);return/(ebu?z|teads)/gi.test(c.host)},e.sendMediasToSumologic=function(c,d){try{var e={},f=a.ArrayHelper.map(a.ArrayHelper.filter(c.mediaFiles,function(a){return!e[a.type]&&(e[a.type]=!0,!0)}),function(a){return a.type}),g=a.ArrayHelper.map(c.wrappers,function(b){return a.URIHelper.parse(b).hostname});b.playerSumologic.sendInfo("[mf-"+d+"-"+a.Context.getContextSummary()+"] "+f.join(" | ")+"||"+g.join(" > "))}catch(a){this.logger.error("sendMediasToSumologic error",a)}},e.getRatioCategory=function(a){return a.width>a.height?d.landscape:a.width===a.height?d.square:d.vertical},e.getMediaFileRatioLog=function(a,b,c){var d=[e.getRatioCategory(a),""+b,c.map(String).getOrElse(function(){return"n"})];return"mediafile-ratio "+d.join("|")},e.isMpeg=function(a){return/^video\/mpe?g$/.test(a.type)},e.isTv=function(a){return"video/tv"===a.type},e.isFlash=function(a){return"video/x-flv"===a.type},e.isVideo=function(a){return!e.isMpeg(a)&&!e.isTv(a)&&!e.isFlash(a)&&/^video\/*/.test(a.type)},e.isPlayableVideo=function(a){return e.isVideo(a)&&b.VideoHelper.canPlay(a.type)},e.isVpaidFlash=function(a){return"vpaid"===a.api&&a.type.indexOf("application/x-shockwave-flash")>-1},e.isVpaidJS=function(a){return"vpaid"===a.api&&a.type.indexOf("javascript")>-1},e.logger=new a.Logger("player.MediaFileHelper"),e.bitrates={mobile:{min:200,max:5e3},default:{min:200,max:1e4}},e.pingDuration={max:600},e}();b.MediaFileHelper=e}(b=a.player||(a.player={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c;!function(c){var d=function(){function c(b,c,d,e){this.container=b,this.config=c,this.vpaidAd=d,this.mediaFile=e,this.logger=new a.Logger("player.plugin.Responsive")}return c.prototype.init=function(){this.logger.debug("init plugin"),this.vpaidAd.subscribe(this.onVideoMetadata,a.vpaid.CustomVPAIDEvent.AdVideoMetadata,this),this.vpaidAd.subscribe(this.onVpaidStart,a.vpaid.VPAIDEvent.AdStarted,this)},c.prototype.deinit=function(){this.logger.debug("deinit plugin"),this.vpaidAd.unsubscribe(this.onVpaidStart,a.vpaid.VPAIDEvent.AdStarted),this.vpaidAd.unsubscribe(this.onVideoMetadata,a.vpaid.CustomVPAIDEvent.AdVideoMetadata),this.unsetResponsive()},c.prototype.resize=function(c){if(!a.HTMLHelper.isFullscreen())try{var d=a.Dom.getBoundingClientRect(this.container).width;if(d!==this.vpaidAd.getAdWidth()||c){var e=this.config.vpaidApi&&this.config.vpaidApi.getStudioData(),f=b.MediaFileHelper.getOptimalHeight(this.mediaFile,d,!!this.metadata||!!e),g=this.vpaidAd.getAdWidth(),h=this.vpaidAd.getAdHeight();g===d&&h===f||(this.vpaidAd.resizeAd(d,f,"normal"),this.logger.debug("container width change, resize from "+g+"x"+h+" to "+d+"x"+f))}}catch(a){this.logger.error("resize throw an Exception",a),this.unsetResponsive()}},c.prototype.setResponsive=function(){var b=this;return!this.iframe&&(this.vpaidAd.subscribe(function(){b.unsetResponsive()},a.vpaid.VPAIDEvent.AdError),this.vpaidAd.subscribe(function(){b.unsetResponsive()},a.vpaid.VPAIDEvent.AdStopped),this.resize(),this.iframe=document.createElement("iframe"),this.iframe.style.height="0",this.iframe.style.width="100%",this.iframe.style.border="none",this.iframe.style.margin="0",this.iframe.style.padding="0",this.container.appendChild(this.iframe),this.iframe.contentWindow.document.write("<html><body></body></html>"),this.iframe.contentWindow.document.close(),this.resizeCallback=function(){return b.resize()},a.Dom.addEventListener("resize",this.iframe.contentWindow,this.resizeCallback),!0)},c.prototype.unsetResponsive=function(){try{return!!this.iframe&&(a.Dom.removeEventListener("resize",this.iframe.contentWindow,this.resizeCallback),this.iframe.parentNode.removeChild(this.iframe),this.iframe=null,!0)}catch(a){return!1}},c.prototype.onVideoMetadata=function(a){this.logger.debug("Receive metadata from video",a),a.width&&a.height&&(this.metadata=a,this.mediaFile.width=a.width,this.mediaFile.height=a.height,Math.ceil(this.vpaidAd.getAdWidth()/this.vpaidAd.getAdHeight())!==Math.ceil(a.width/a.height)&&(this.logger.debug("vpaid ratio differ from mediafile ratio, force resize !"),this.resize(!0)))},c.prototype.onVpaidStart=function(){if(!this.config.width)try{this.logger.debug("set player responsive !"),this.setResponsive()}catch(a){this.logger.error("Exception raised while trying to initialize",a)}},c}();c.Responsive=d}(c=b.plugin||(b.plugin={}))}(b=a.player||(a.player={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c;!function(b){var c=function(){function b(a,b,c,d,e,f){this.vpaidAd=c,this.linearAd=e}return b.prototype.init=function(){this.vpaidAd.subscribe(this.onClickThrough,a.vpaid.VPAIDEvent.AdClickThru,this)},b.prototype.deinit=function(){this.vpaidAd.unsubscribe(this.onClickThrough,a.vpaid.VPAIDEvent.AdClickThru)},b.prototype.onClickThrough=function(a,b,c){var d=a||this.linearAd.clickThrough[0];c&&d&&window.open(d)},b}();b.ClickThrough=c}(c=b.plugin||(b.plugin={}))}(b=a.player||(a.player={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function c(b,c){var d=this;this.linearAd=b,this.sessionStore=c,this.logger=new a.Logger("VASTEventTracker"),this.tracker=new a.tracker.Tracker(a.Option.empty(),c.sumologicSessionId),c.wigo.forEach(function(a){return d.tracker.setWigoi(a)});var e=function(b){a.ArrayHelper.forEach(f.linearAd.tracking[b]||[],function(a,c,e){d.tracker.addResource(b,a.url,a.data)})},f=this;for(var g in this.linearAd.tracking)e(g)}return c.getVastDomain=function(b){return b.wrappers.length>0?a.URIHelper.getMainDomain(a.URIHelper.parse(b.wrappers[b.wrappers.length-1]).hostname):b.url?a.URIHelper.getMainDomain(a.URIHelper.parse(b.url).hostname):"teads"},c.getTrackingMacros=function(b,c,d,e,f){var g={};return g[a.vast.TrackingMacro.CONTENTPLAYHEAD]=b.filter(function(a){return a>=0}).match({some:a.Utils.offset,none:function(){return"0"}}),g[a.vast.TrackingMacro.CACHEBUSTING]=a.StringHelper.rand(8),g[a.vast.TrackingMacro.ERRORCODE]=c.map(String).getOrElse(function(){return""}),g[a.vast.TrackingMacro.ASSETURI]=d.getOrElse(function(){return""}),g[a.vast.TrackingMacro.MEDIAFILETYPE]=e.getOrElse(function(){return"unknown"}),g[a.vast.TrackingMacro.VIEWABILITY]=f.map(String).getOrElse(function(){return"0"}),g},c.prototype.getTracker=function(){return this.tracker},c.prototype.track=function(d,e,f,g,h,i){var j=this,k=c.getTrackingMacros(f,h.map(function(a){return a.getId()}),e.map(function(a){return a.url.toString()}),e.map(function(b){return a.Utils.getExtensionFromMimeType(b.type)}),i);if(this.tracker.track(d,k,f.orNull(),g.orNull()),"error"===d){var l=h.map(function(a){return a.getId()}).getOrElse(function(){return 0}),m=h.map(function(a){return a.getMessage()}).getOrElse(function(){return""});this.logger.error({id:l,msg:m,ua:navigator.userAgent,mediafile:e}),b.playerSumologic.canSend()&&a.Try.of(function(){e.map(function(b){return{type:a.Option.of(b.type),url:a.Option.of(b.url)}}).match({some:function(b){var c=b.type,d=b.url,e=a.Utils.getExtensionFromMimeType(c.getOrElse(function(){return"-"}));d.match({some:function(b){var c=a.URIHelper.parse(b),d=c.pathname.split(";")[0],f=d.split("/").pop(),g=a.URIHelper.getMainDomain(c.hostname);j.trackErrorOnSumo(l,m,e,f,g)},none:function(){j.trackErrorOnSumo(l,m,e,"-","-")}})},none:function(){j.trackErrorOnSumo(l,m,"-","-","-")}})}).recover(function(a){b.playerSumologic.sendError("VASTEventTracker "+a),j.logger.error("VASTEventTracker sumologic error tracker throw an exception",a)})}},c.prototype.trackError=function(b,c){this.track("error",b,a.Option.empty(),a.Option.empty(),a.Option.of(c),a.Option.empty())},c.prototype.trackErrorOnSumo=function(d,e,f,g,h){var i=a.URIHelper.parse(this.linearAd.url),j=0===i.protocol.indexOf("https:")?1:0,k=c.getVastDomain(this.linearAd),l=this.linearAd.wrappers.length,m=function(b){return a.URIHelper.getMainDomain(a.URIHelper.parse(b).hostname)},n=function(a,b){return b<l-1},o=a.ArrayHelper.filter(a.ArrayHelper.map(this.linearAd.wrappers,m),n).join(",")||"-",p=function(b){return a.Utils.getExtensionFromMimeType(b.type)},q=function(b,c,d){return a.ArrayHelper.indexOf(d,b)===c},r=a.ArrayHelper.filter(a.ArrayHelper.map(this.linearAd.mediaFiles,p),q).join(",")||"-",s="-";a.ArrayHelper.forEach(this.linearAd.extensions,function(a){"MoatJs"===a.type&&a.definition&&a.definition.id&&(s=a.definition.id)});var t=[d,e,k,j,h,g,f,r,o,this.sessionStore.pageId?this.sessionStore.pageId:"-",this.sessionStore.placementId?this.sessionStore.placementId:"-",s].join("|");b.playerSumologic.sendError(t)},c}();b.VASTEventTracker=c}(b=a.player||(a.player={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c;!function(c){var d=function(){function c(c,d,e,f,g,h){var i=this;this.container=c,this.config=d,this.vpaidAd=e,this.mediaFile=f,this.linearAd=g,this.tracker=h,this.logger=new a.Logger("player.plugin.Tracker"),this.tracked={},this.trackedProgress=[],this.trackOnce=[a.vast.TrackingEvent.skip,a.vast.TrackingEvent.creativeView,a.vast.TrackingEvent.start,a.vast.TrackingEvent.impression,a.vast.TrackingEvent.firstQuartile,a.vast.TrackingEvent.midpoint,a.vast.TrackingEvent.thirdQuartile,a.vast.TrackingEvent.complete,a.vast.TrackingEvent.error],this.isMuted=!1;var j=[a.vpaid.VPAIDEvent.AdLoaded,a.vpaid.VPAIDEvent.AdStarted,a.vpaid.VPAIDEvent.AdSkipped,a.vpaid.VPAIDEvent.AdImpression,a.vpaid.VPAIDEvent.AdVideoStart,a.vpaid.VPAIDEvent.AdVideoFirstQuartile,a.vpaid.VPAIDEvent.AdVideoMidpoint,a.vpaid.VPAIDEvent.AdVideoThirdQuartile,a.vpaid.VPAIDEvent.AdVideoComplete,a.vpaid.VPAIDEvent.AdClickThru,a.vpaid.VPAIDEvent.AdUserClose],k=[a.vpaid.VPAIDEvent.AdDurationChange,a.vpaid.VPAIDEvent.AdRemainingTimeChange],l=Object.keys(a.vpaid.VPAIDEvent);for(var m in a.vpaid.CustomVPAIDEvent)l.push(m);a.ArrayHelper.forEach(l,function(c){a.ArrayHelper.indexOf(j,c)>-1&&i.vpaidAd.subscribe(function(d){c===a.vpaid.VPAIDEvent.AdError&&d||(d=""),b.playerSumologic.sendInfo([c,a.Context.getContextSummary(),d].join("|"))},c),k.indexOf(c)===-1&&i.vpaidAd.subscribe(function(a){void 0===a&&(a=""),i.logger.info(c+" "+a)},c)})}return c.prototype.init=function(){var b=this;this.logger.debug("init");try{this.previousRemainingTime=this.vpaidAd.getAdRemainingTime(),this.vpaidAd.subscribe(function(){return b.onTimeChange()},a.vpaid.VPAIDEvent.AdDurationChange),this.vpaidAd.subscribe(function(){return b.onTimeChange()},a.vpaid.VPAIDEvent.AdRemainingTimeChange);for(var c in this.linearAd.tracking)this.addTrackingCallback(c);this.vpaidAd.subscribe(function(){return b.onAdStarted()},a.vpaid.VPAIDEvent.AdStarted),this.vpaidAd.subscribe(function(){return b.onVolumeChange()},a.vpaid.VPAIDEvent.AdVolumeChange);var d;this.vpaidAd.subscribe(function(){var c=a.HTMLHelper.isFullscreen()||b.vpaidAd.getAdExpanded();!d&&c?(b.trackVastEvent(a.vast.TrackingEvent.fullscreen),b.trackVastEvent(a.vast.TrackingEvent.expand)):d&&!c&&(b.trackVastEvent(a.vast.TrackingEvent.exitFullscreen),b.trackVastEvent(a.vast.TrackingEvent.collapse)),d=c},a.vpaid.VPAIDEvent.AdExpandedChange)}catch(b){this.tracker.trackError(a.Option.of(this.mediaFile),new a.VastException({id:900,message:"plugin.Tracker throw an exception on init "+b}))}},c.prototype.deinit=function(){this.logger.debug("deinit")},c.prototype.getTracker=function(){return this.tracker.getTracker()},c.prototype.removeResources=function(a){try{this.getTracker().getTracking(a).removeResources()}catch(b){this.logger.error("Remove tracking resources for event "+a+" throw an exception",b)}},c.prototype.onTimeChange=function(){this.adDuration=this.vpaidAd.getAdDuration(),this.adRemainingTime=this.vpaidAd.getAdRemainingTime()},c.prototype.onVolumeChange=function(){this.isMuted&&this.vpaidAd.getAdVolume()>0?this.trackVpaidEvent(a.vast.TrackingEvent.unmute,a.vpaid.VPAIDEvent.AdVolumeChange):this.isMuted||0!==this.vpaidAd.getAdVolume()||this.trackVpaidEvent(a.vast.TrackingEvent.mute,a.vpaid.VPAIDEvent.AdVolumeChange),this.isMuted=!this.vpaidAd.getAdVolume()},c.prototype.onAdStarted=function(){this.isMuted=!this.vpaidAd.getAdVolume()},c.prototype.addTrackingCallback=function(c){var d=this;this.vpaidAd.subscribe(function(){for(var e=[],f=0;f<arguments.length;f++)e[f]=arguments[f];c===a.vast.TrackingEvent.error?d.trackError(a.vast.TrackingEvent.error,a.vpaid.VPAIDEvent.AdError,e):d.trackVpaidEvent(c,b.trackingMapping[c])},b.trackingMapping[c])},c.prototype.findExceptionMsg=function(b){for(var c in a.VastException)if(a.VastException[c].id===b)return a.VastException[c].message},c.prototype.trackEvent=function(b,c,d,e){var f=this,g=a.Dom.getBoundingClientRect(this.container).height,h=Math.ceil(100*a.HTMLHelper.getPercentageInView(this.container,a.HTMLHelper.getWindow(this.container),g));(h<0||!a.HTMLHelper.getRealVisibilityState(this.container))&&(h=0),d=d.filter(function(a){return!isNaN(a)}).orElse(function(){return a.Option.of(f.adDuration-f.adRemainingTime||0)});var i=Math.floor(d.getOrElse(function(){return 0}));if(b===a.vast.TrackingEvent.progress){if(this.trackedProgress[i])return;if(this.previousRemainingTime===this.adRemainingTime)return;this.previousRemainingTime=this.adRemainingTime}switch(b){case a.vast.TrackingEvent.start:this.tracked[a.vast.TrackingEvent.impression]||this.trackVastEvent(a.vast.TrackingEvent.impression);break;case a.vast.TrackingEvent.complete:this.trackProgress(i+1);case a.vast.TrackingEvent.firstQuartile:case a.vast.TrackingEvent.midpoint:case a.vast.TrackingEvent.thirdQuartile:this.tracked[a.vast.TrackingEvent.start]||this.trackVastEvent(a.vast.TrackingEvent.start);break;case a.vast.TrackingEvent.progress:this.trackedProgress[i]=!0;var j=i-1;j>0&&!this.trackedProgress[j]&&(this.logger.debug("track missing previous progress "+j),this.trackProgress(j));break;case a.vast.TrackingEvent.mute:if(!this.tracked[a.vast.TrackingEvent.impression])return}a.ArrayHelper.includes(this.trackOnce,b)&&this.tracked[b]||(this.tracker.track(b,a.Option.of(this.mediaFile),d,a.Option.of(this.adDuration),e,a.Option.of(h)),this.tracked[b]=!0)},c.prototype.trackVastEvent=function(b){this.trackEvent(b,a.Option.empty(),a.Option.empty(),a.Option.empty())},c.prototype.trackVpaidEvent=function(b,c){this.trackEvent(b,a.Option.of(c),a.Option.empty(),a.Option.empty())},c.prototype.trackProgress=function(b){this.trackEvent(a.vast.TrackingEvent.progress,a.Option.of(a.vpaid.VPAIDEvent.AdRemainingTimeChange),a.Option.of(b),a.Option.empty())},c.prototype.trackError=function(b,c,d){var e=d&&d[1]&&"number"==typeof d[1]&&!isNaN(d[1])?d[1]:a.VastException.GENERAL.id,f=d&&d[0]||this.findExceptionMsg(e);this.trackEvent(b,a.Option.of(c),a.Option.empty(),a.Option.of(a.Exception.get(e,"AdError : "+f)))},c}();c.Tracker=d}(c=b.plugin||(b.plugin={}))}(b=a.player||(a.player={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c;!function(c){var d=function(){function c(b,c,d,e,f,g){var h=this;this.container=b,this.config=c,this.vpaidAd=d,this.mediaFile=e,this.bufferingTimer=null,this.bufferingDone=!1,this.elapseTime=0,this.logger=new a.Logger("player.plugin.Bench");try{var i=a.HTMLHelper.findParentWindows(this.container).pop(),j=function(){h.elapseTime>1e3&&0===h.getCurrentTime()&&(h.clearBufferingTimer(!0),h.visibility.destroy())};this.visibility=a.Visibility.listenWindow(i,j,function(){})}catch(a){this.logger.error("Error with visibility init",a)}this.vpaidAd.subscribe(function(){h.getBuffering()},a.vpaid.VPAIDEvent.AdStarted),this.vpaidAd.subscribe(function(){h.clearBufferingTimer()},a.vpaid.VPAIDEvent.AdPaused),this.vpaidAd.subscribe(function(){h.getBuffering()},a.vpaid.VPAIDEvent.AdPlaying)}return c.prototype.init=function(){},c.prototype.deinit=function(){},c.prototype.getBuffering=function(c){var d=this;void 0===c&&(c=500),this.bufferingDone||(this.bufferingTimer=setTimeout(function(){try{d.elapseTime=c;var e=d.getCurrentTime();if(e>0){var f=c-1e3*e>0?c-1e3*e:0;"number"==typeof f&&f>=0&&(d.logger.debug("Buffering: "+f+"ms"),b.playerSumologic.sendInfo("Buffering: "+f+"ms with "+d.mediaFile.type+" on "+a.Context.getContextSummary())),d.bufferingDone=!0,d.visibility.destroy()}else d.getBuffering(c+=500)}catch(a){d.logger.error("Error with buffering method",a)}},500))},c.prototype.clearBufferingTimer=function(a){void 0===a&&(a=!1);try{this.bufferingTimer&&(clearTimeout(this.bufferingTimer),this.bufferingTimer=null,a&&(this.logger.warn("Stop buffering calculation"),this.bufferingDone=!0))}catch(a){this.logger.error("An error occured while cleaning the buffering timer",a)}},c.prototype.getCurrentTime=function(){return this.vpaidAd.getAdDuration()-this.vpaidAd.getAdRemainingTime()?this.vpaidAd.getAdDuration()-this.vpaidAd.getAdRemainingTime():0},c}();c.Bench=d}(c=b.plugin||(b.plugin={}))}(b=a.player||(a.player={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function b(){}return b.get=function(c){var d,e=this;return c&&c.extensions&&c.extensions.length>0&&a.ArrayHelper.forEach(c.extensions,function(a){a.type===e.EXTENSION_TYPE&&(d=b.parse(a.content))}),d},b.isStudioLinearAd=function(a){return!!this.get(a)},b.parse=function(b){try{return a.JSON.parse(b)}catch(b){new a.Logger("TeadsStudioExtension").error(this.EXTENSION_TYPE+" extension throw an exception",b)}},b.EXTENSION_TYPE="teads-studio",b}();b.TeadsStudioExtension=c}(b=a.player||(a.player={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function b(){}return b.get=function(c){var d;return c&&c.extensions&&c.extensions.length>0&&a.ArrayHelper.forEach(c.extensions,function(a){a.type===b.EXTENSION_TYPE&&(d=b.parse(a.content))}),d},b.parse=function(c){try{return a.JSON.parse(c)}catch(c){new a.Logger("ITeadsContextExtension").error(b.EXTENSION_TYPE+" extension throw an exception",c)}},b.EXTENSION_TYPE="teads-context",b}();b.TeadsContextExtension=c}(b=a.player||(a.player={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c;!function(c){var d=function(){function c(b,c,d,e,f,g){this.container=b,this.config=c,this.vpaidAd=d,this.mediaFile=e,this.linearAd=f,this.logger=new a.Logger("player.plugin.Extensions")}return c.prototype.init=function(){var c=this;a.ArrayHelper.forEach(this.linearAd.extensions,function(a){switch(a.type){case b.TeadsStudioExtension.EXTENSION_TYPE:var d=b.TeadsStudioExtension.parse(a.content);d&&d.width&&d.height&&(c.mediaFile.width=d.width,c.mediaFile.height=d.height);break;case"MoatJs":c.initMoatTracking(a);break;case"Visibility":case"Html":case"Iframe":c.injectIframe(a.content);break;case"Alenty":case"Script":c.injectJs(a.content)}})},c.prototype.deinit=function(){},c.prototype.initMoatTracking=function(b){var d=this,e=this.vpaidAd.getAdDuration();e<=0&&(e=this.linearAd.duration),this.externalAdVolume=this.vpaidAd.getAdVolume();var f,g=a.JSON.parse(b.content),h=a.HTMLHelper.findParentWindows(this.container),i=h.pop()||window,j=this.config.formatConfig&&this.config.formatConfig.threshold?this.config.formatConfig.threshold.value:0,k=[],l=this;a.Context.isDesktop()?f="desktop":a.Context.isTablet()?f="tablet":a.Context.isMobile()&&(f="mobile");var m={adData:{ids:g,duration:e,url:this.mediaFile.url},dispatchEvent:function(d){try{var h=l.vpaidAd.getAdDuration()-l.vpaidAd.getAdRemainingTime()>0?l.vpaidAd.getAdDuration()-l.vpaidAd.getAdRemainingTime():0,m=g.level3.match(/(\d+)/)?g.level3.match(/(\d+)/)[1]:g.level3,n=a.HTMLHelper.getPercentageInView(l.container,i),o="nowrapp";b.definition.id!==l.linearAd.id&&(o=b.definition.adSystem&&b.definition.adSystem.match(/teads/i)?"wrappteads":"wrappnotteads");var p=["[MOAT] "+m,g.slicer2,d.type||d,l.vpaidAd.getAdVolume(),e+"s",n===-1?"Error":Math.floor(100*n)+"%",f,h.toFixed?h.toFixed(3):h,a.HTMLHelper.isInView(l.container,i,j/100),j,i.location.hostname];a.player.playerSumologic.sendInfo(p.join(" - "),null,c.MOAT_TEST_INSERTIONID.test(m)?1:.01)}catch(b){var m=void 0;g&&g.level3&&(m=g.level3.match(/(\d+)/)?g.level3.match(/(\d+)/)[1]:g.level3),a.player.playerSumologic.sendInfo("[MOAT error] "+b,null,c.MOAT_TEST_INSERTIONID.test(m)?1:.01)}if(this.sendEvent){var q=d;k&&(k.push(d),q=k,k=null),this.sendEvent(q)}else k.push(d)}};this.logger.debug("intialized MOAT with",m.adData);var n=["AdStopped","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdVideoComplete","AdPaused","AdPlaying"];a.ArrayHelper.forEach(n,function(a){d.vpaidAd.subscribe(function(){var b={type:a,adVolume:d.externalAdVolume};d.logger.debug("sending MOAT event",b),m.dispatchEvent(b)},a)}),this.vpaidAd.subscribe(function(){if(d.externalAdVolume!==d.vpaidAd.getAdVolume()){var a={type:"AdVolumeChanged",adVolume:d.vpaidAd.getAdVolume()};d.logger.debug("sending MOAT event",a),m.dispatchEvent(a),d.externalAdVolume=d.vpaidAd.getAdVolume()}},"AdVolumeChange");var o="_moatApi"+a.StringHelper.rand(8),p=a.HTMLHelper.getWindow(this.container);p[o]=m;var q=a.HTMLHelper.getDocument(this.container).createElement("script"),r=p.location.protocol,s="https:"===r?"z":"js";q.src=r+"//"+s+".moatads.com/"+c.MOAT_PARTNER_CODE+"/moatvideo.js#"+o,this.container.insertBefore(q,this.container.childNodes[0])},c.prototype.injectJs=function(a){var b=document.createElement("script");b.async=!0,b.src=a,document.body.appendChild(b)},c.prototype.injectIframe=function(a){var b=document.createElement("iframe");b.style.width="10px",b.style.height="10px",b.style.position="absolute",b.style.left="-999em",b.style.top="0",document.body.appendChild(b);var c=b.contentWindow.document;c.open(),c.write(a.indexOf("<html")===-1?"<!doctype html><html><head></head><body>"+a+"</body></html>":a),c.close()},c.MOAT_PARTNER_CODE="teads245638586802",c.MOAT_TEST_INSERTIONID=/^103055$/,c}();c.Extensions=d}(c=b.plugin||(b.plugin={}))}(b=a.player||(a.player={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c;!function(c){var d=function(){function c(b,c,d,e,f,g){this.container=b,this.config=c,this.vpaidAd=d,this.mediaFile=e,this.linearAd=f,this.logger=new a.Logger("player.plugin.IAS"),this.lastSentData={},this.sentVpaidEvents={},this.isMuted=!0}return c.prototype.init=function(){var b=this;this.logger.debug("init IAS plugin");var d=a.vast.IAS.getIASConfig(this.linearAd);d&&(a.ArrayHelper.forEach(c.IASEvents,function(a){b.vpaidAd.subscribe(function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return b.sentVpaidEvents[a]=c},a)}),this.vpaidAd.subscribe(function(){b.loadIASVANS(d)},a.vpaid.VPAIDEvent.AdStarted))},c.prototype.deinit=function(){},c.prototype.loadIASVANS=function(a){var c=this,d=this.config.path+"/"+b.ASSETS.iasvans,e=document.createElement("script");e.onload=function(){c.logger.debug("IAS VANS loaded"),c.initIAS(a)},e.onerror=function(){c.logger.error("unable to load IASVANS "+d)},e.async=!0,e.defer=!0,e.src=d,document.head.appendChild(e)},c.prototype.initIAS=function(b){var d=this;this.logger.debug("init IAS extension",b);var e;try{var f=this.vpaidAd;if(f.container.getEnvironmentVars)e=f.container.getEnvironmentVars().videoSlot;else{if(!f.vpaid.container.getEnvironmentVars)return;e=f.vpaid.container.getEnvironmentVars().videoSlot}}catch(a){return void this.logger.error("unable to retrieve video node",this.vpaidAd)}this.vans=new __IASVANS;try{if(b.type===a.vast.IAS_FIREWALL)this.vans.initFW(b.data,e,function(a){});else{if(b.type!==a.vast.IAS_CAMPAIGN_MONITORING)throw"invalid config";this.vans.initCM(b.data,e)}this.logger.debug("init IAS VANS with",b,e)}catch(a){return void this.logger.error("error init on __IASVANS_3 "+a)}for(var g in this.sentVpaidEvents)this.sentVpaidEvents.hasOwnProperty(g)&&(this.logger.debug("redispatch VPAID event to IAS",g,this.sentVpaidEvents[g]),this.sendEvent(g,this.sentVpaidEvents[g]));a.ArrayHelper.forEach(c.IASEvents,function(a){d.vpaidAd.subscribe(function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];d.sendEvent(a,b)},a)}),this.vpaidAd.subscribe(function(){this.sendEvent("resizeAd")},a.vpaid.VPAIDEvent.AdSizeChange)},c.prototype.sendEvent=function(b,c){var d=function(a){return Math.round(100*a)/100},e={};switch(b){case"resizeAd":e={width:this.vpaidAd.getAdWidth(),height:this.vpaidAd.getAdHeight(),viewMode:"normal"};break;case a.vpaid.VPAIDEvent.AdError:e={message:c[0]};break;case a.vpaid.VPAIDEvent.AdClickThru:e={url:null,id:c[1],playerHandles:c[2]}}if(e.volume=d(this.vpaidAd.getAdVolume()),e.ad_duration=d(this.vpaidAd.getAdDuration()),isNaN(e.ad_duration)&&(e.ad_duration=-2),b!==a.vpaid.VPAIDEvent.AdDurationChange||this.lastSentData.ad_duration!==e.ad_duration){if(b===a.vpaid.VPAIDEvent.AdVolumeChange){if(this.isMuted&&0===e.volume||!this.isMuted&&e.volume>.1)return;this.isMuted=0===e.volume}try{this.vans.sendEvent(b,e),this.lastSentData=e,this.logger.debug("IAS VANS, sendEvent",b,e)}catch(a){this.logger.error("error sending IAS event",b,e)}}},c.IASEvents=[a.vpaid.VPAIDEvent.AdLoaded,a.vpaid.VPAIDEvent.AdStarted,a.vpaid.VPAIDEvent.AdStopped,a.vpaid.VPAIDEvent.AdSkipped,a.vpaid.VPAIDEvent.AdSkippableStateChange,a.vpaid.VPAIDEvent.AdDurationChange,a.vpaid.VPAIDEvent.AdVolumeChange,a.vpaid.VPAIDEvent.AdImpression,a.vpaid.VPAIDEvent.AdVideoStart,a.vpaid.VPAIDEvent.AdVideoFirstQuartile,a.vpaid.VPAIDEvent.AdVideoMidpoint,a.vpaid.VPAIDEvent.AdVideoThirdQuartile,a.vpaid.VPAIDEvent.AdVideoComplete,a.vpaid.VPAIDEvent.AdClickThru,a.vpaid.VPAIDEvent.AdPaused,a.vpaid.VPAIDEvent.AdPlaying,a.vpaid.VPAIDEvent.AdError],c}();c.IAS=d}(c=b.plugin||(b.plugin={}))}(b=a.player||(a.player={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){b.playerSumologic=new a.Sumologic;var c=function(){function c(c,d,e){var f=this;this.container=c,this.config=d,this.sessionStore=e,this.logger=new a.Logger("player.VASTPlayer"),this.plugins={},this.logger.info("new VASTPlayer",this.container,this.config),this.vastLib=new a.vast.VASTLib({assetsUrl:this.config.path,replaceIASVPAID:this.config.replaceIASVPAID}),d.disableSumologic||(b.playerSumologic.init(a.Sumologic.CONFIGS.PLAYER,this.sessionStore.sumologicSessionId),b.playerSumologic.sendMetadata("2.17.85;"+a.Context.getContextSummary())),this.sessionStore.wigo.forEach(function(a){a.valid(2,0),a.setPlayerContainer(f.container)})}return c.prototype.loadVast=function(a,b,c){this.vastLib.load(a,this.getOnVastLoadedCallback(b),this.getOnVastErrorCallback(c))},c.prototype.parseVast=function(a,b,c){this.vastLib.parse(a,this.getOnVastLoadedCallback(b),this.getOnVastErrorCallback(c))},c.prototype.setLinearAd=function(c){this.linearAd=c,this.vastTracker=new b.VASTEventTracker(c,this.sessionStore),this.logger.info("setLinearAd",c),this.sessionStore.wigo.forEach(function(b){return b.valid(2,1,c,a.Wigo.infoType.MODAL)})},c.prototype.getLinearAd=function(){return this.linearAd},c.prototype.getMediafile=function(){return this.mediafile},c.prototype.getConfig=function(){return this.config},c.prototype.setConfigUI=function(a){this.config.ui=a},c.prototype.getOptimalMediaFile=function(c,d,e){var f=this;return void 0===e&&(e={}),b.MediaFileHelper.getOptimalMediaFile(this.linearAd.mediaFiles,e,function(e,g){if(e)f.sessionStore.wigo.forEach(function(b){return b.valid(2,2,e.url+g,a.Wigo.infoType.STRING)}),c(e);else{var h=a.Exception.get(a.VastException.UNSUPPORTED_MEDIAFILE.id,"VASTPlayer.getOptimalMediaFile didn't find mediafile");f.sessionStore.wigo.forEach(function(b){return b.valid(2,2,g,a.Wigo.infoType.ERROR)}),f.onVastError(d,h,f.linearAd)}b.MediaFileHelper.sendMediasToSumologic(f.linearAd,e?1:0)},this.config)},c.prototype.playOptimalMediaFile=function(a,b,c){var d=this;this.getOptimalMediaFile(function(a){d.playMediaFile(a,b,c)},c,a)},c.prototype.loadOptimalMediaFile=function(a,b){var c=this;this.getOptimalMediaFile(function(d){c.loadMediaFile(d,a,b)},b)},c.prototype.playMediaFile=function(b,c,d){if(!b){var e=a.Exception.get(a.VastException.UNSUPPORTED_MEDIAFILE.id,"no mediafile provided in VASTPlayer.playMediaFile");return this.onVastError(d,e,this.linearAd)}var f=function(b,d){c(b,d),b.subscribe(function(){b.startAd()},a.vpaid.VPAIDEvent.AdLoaded),b.initAd(d.width,d.height,d.mode,d.bitrate,d.parameters)};this.loadMediaFile(b,f,d)},c.prototype.loadMediaFile=function(d,e,f){var g=this,h=function(a){g.onVastError(f,a,g.linearAd)};if(!d)return h(a.Exception.get(a.VastException.UNSUPPORTED_MEDIAFILE.id,"no mediafile provided in VASTPlayer.loadMediaFile"));this.mediafile=d;var i=b.MediaFileHelper.getMediaProvider(d),j=d.url,k=this.config.width?this.config.width:this.container.offsetWidth,l={width:k,height:this.config.height?this.config.height:b.MediaFileHelper.getOptimalHeight(d,k),mode:"normal",bitrate:d.bitrate||512,parameters:this.linearAd.adParameters},m=this.linearAd.clickThrough.length?this.linearAd.clickThrough[0]:null,n=function(b){h(a.Exception.get(a.VastException.UNSUPPORTED_MEDIAFILE.id,b))},o=this.config.useCustomVideo||!1,p=!1,q=!!a.vast.IAS.getExtension(this.linearAd);switch(i){case b.MediaProvider.VPAID:if(m=null,"display"===this.config.adType||"native"===this.config.adType)break;"vpaid"===d.api&&d.type.indexOf("javascript")>-1&&(a.Context.isIos()&&!a.Context.isWhiteListedIos10Safari()?o=!0:this.config.type===b.PLAYER_TYPE.CANVAS&&(o=!0),a.Context.cacheCanvasUsed(o));break;case b.MediaProvider.FLASH:case b.MediaProvider.JS:case b.MediaProvider.CANVAS:j=this.config.path+"/"+b.MediaFileHelper.getAssetFromMediaProvider(i),i===b.MediaProvider.JS?j=a.vpaid.BundledContainer.VIDEO:i===b.MediaProvider.CANVAS&&(j=a.vpaid.BundledContainer.CANVAS,q&&(j=a.vpaid.BundledContainer.VIDEO,o=!0));var r=this.config.path.match("/dist")||0===this.config.path.indexOf("http")?this.config.path.match("/dist")&&0!==this.config.path.indexOf("http")?window.location.protocol+window.location.host+this.config.path:this.config.path:window.location.protocol+this.config.path;p=function(){try{return!g.config.ui.config.components.endscreen.disable}catch(a){return!1}}(),l.parameters={url:d.url,debug:this.config.debug,clickThrough:m,skippable:this.linearAd.skippable,skipoffset:this.linearAd.skipDelay,assetsPath:r,type:b.PLAYER_TYPE[this.config.type],sumologicSessionId:this.sessionStore.sumologicSessionId.getOrElse(function(){return null}),noAutoStop:p,timeout:c.MEDIAFILE_TIMEOUT_DELAY},i===b.MediaProvider.FLASH?l.parameters=a.JSON.stringify(l.parameters):l.parameters={AdParameters:a.JSON.stringify(l.parameters)},a.vpaid.Timeout.initAd=c.MEDIAFILE_TIMEOUT_DELAY+2e3;break;case b.MediaProvider.UNSUPPORTED:default:return n("media not supported "+d.type)}if(i===b.MediaProvider.FLASH&&!a.FlashHelper.hasFlash()||i===b.MediaProvider.VPAID&&!a.FlashHelper.hasFlash()&&d.url.indexOf(".swf")>-1)return n("Flash plugin is required");var s={path:this.config.path,useCustomVideo:o,api:this.config.vpaidApi,appendVideoToDOM:this.config.appendVideoToDOM};a.vpaid.Timeout.loadVpaid=c.MEDIAFILE_TIMEOUT_DELAY,this.config.background&&(s.background=this.config.background),q&&(s.appendVideoToDOM=!0);var t=this.container;if(this.config.ui){var u;if(this.config.ui.template)u=this.config.ui.template;else{if(!a.ui.template[this.config.ui.name]){
var v=a.Exception.get(a.VastException.UNDEFINED.id,"VASTPlayer: cannot find template for VPAID-UI");return h(v)}u=a.ui.TemplateHelper.replacePlaceholders(a.ui.template[this.config.ui.name],{assetsPath:this.config.path+"/assets"})}this.config.ui.config=this.config.ui.config||{},this.config.ui.config.clickthrough=m,i===b.MediaProvider.VPAID&&(this.config.ui.config.vpaidUrl=d.url),this.config.ui.config.noAutoStop=p,this.ui&&this.ui.getContainer()&&(this.config.ui.config.container=this.ui.getContainer()),this.ui=new a.ui.VPAIDUI(this.container,u,this.config.ui.config),t=this.ui.getVPAIDContainer()}var w=new a.vpaid.VPAIDLoader(t,s);this.sessionStore.wigo.forEach(function(a){return w.setWigoi(a)});var x=function(c){g.sessionStore.wigo.forEach(function(a){return a.valid(3,0)}),g.config.ui?(g.ui.setVPAID(c),g.vpaidAd=g.ui):g.vpaidAd=c,g.sessionStore.wigo.forEach(function(a){return g.vpaidAd.setWigoi(a)});for(var f in b.plugin)try{var j=b.plugin[f];g.plugins[f]&&g.plugins[f].deinit(),g.plugins[f]=new j(g.container,g.config,g.vpaidAd,d,g.linearAd,g.vastTracker),g.plugins[f].init()}catch(a){g.logger.error("Could not initialize plugin "+f,a)}try{e(g.vpaidAd,l)}catch(b){var k=a.Exception.get(a.VastException.UNDEFINED.id,"loadMediaFile success callback failled "+b,b);h(k)}g.logger.info("loadMediaFile",b.MediaProvider[i]),g.sessionStore.wigo.forEach(function(c){return c.valid(2,3,b.MediaProvider[i],a.Wigo.infoType.STRING)})};w.load(j,x,function(b){var c=a.VastException.UNDEFINED.id;switch(b.id){case a.vpaid.ErrorCode.GETVPAIDAD_EXCEPTION.id:case a.vpaid.ErrorCode.FLASH_SECURITY_ERROR.id:case a.vpaid.ErrorCode.FLASH_UNKNOWN_ERROR.id:case a.vpaid.ErrorCode.FLASH_INIT_ERROR.id:c=a.VastException.GENERAL.id;break;case a.vpaid.ErrorCode.LOAD_VPAID_FILE_NOT_FOUND.id:case a.vpaid.ErrorCode.FLASH_IO_ERROR.id:c=a.VastException.FILE_NOT_FOUND.id;break;case a.vpaid.ErrorCode.LOAD_VPAID_TIMEOUT.id:c=a.VastException.MEDIAFILE_TIMEOUT.id;break;case a.vpaid.ErrorCode.FLASH_PLUGIN_MISSING.id:c=a.VastException.UNSUPPORTED_MEDIAFILE.id}var d=b.message||"vpaidloader error";h(a.Exception.get(c,d))})},c.prototype.getPlugin=function(a){return this.plugins[a]},c.prototype.getPlugins=function(){return this.plugins},c.prototype.hasMoatExtension=function(b){return void 0===b&&(b=this.linearAd),!!b&&a.ArrayHelper.filter(b.extensions||[],function(a){return"MoatJs"===a.type}).length>0},c.prototype.getOnVastLoadedCallback=function(a){var b=this;return function(c){b.setLinearAd(c),a(b.linearAd)}},c.prototype.getOnVastErrorCallback=function(a){var b=this;return function(c,d){b.setLinearAd(d),b.onVastError(a,c,d)}},c.prototype.onVastError=function(b,c,d){this.vastTracker.trackError(a.Option.of(this.mediafile),c),b(c,d)},c.MEDIAFILE_TIMEOUT_DELAY=15e3,c}();b.VASTPlayer=c}(b=a.player||(a.player={}))}(teads||(teads={}));var teads;!function(a){var b=function(){function a(a){this.lang=a,this.translations={ar:{label:""},cs:{label:"REKLAMA"},de:{label:"WERBUNG"},da:{label:"ANNONCE"},en:{label:"ADVERTISING"},es:{label:"PUBLICIDAD"},fr:{label:"PUBLICIT"},fi:{label:"MAINONTA"},hr:{label:"OGLAAVANJE"},hu:{label:"HIRDETS"},id:{label:"ADVERTISING"},it:{label:"PUBBLICIT"},ja:{label:""},jamobile:{label:""},jamobilePR:{label:"[PR]"},ko:{label:""},kr:{label:""},mo:{label:"ADVERTISING"},nl:{label:"ADVERTENTIE"},no:{label:"ANNONSERING"},pl:{label:"REKLAMA"},pt:{label:"PUBLICIDADE"},ro:{label:"PUBLICITATE"},ru:{label:""},sr:{label:""},sk:{label:"REKLAMA"},sl:{label:"OGLAAVANJE"},sv:{label:"ANNONS"},sw:{label:"REKLAM"},tr:{label:"ILAN"},zh:{label:""},"zh-hk":{label:""},"zh-tw":{label:""}}}return a.prototype.translate=function(a){return(this.translations[this.lang]||{})[a]},a}();a.L10n=b}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function b(b,c,d,e,f,g){var h=this;if(this.formatContainer=b,this.vpaidAd=c,this.components=d,this.responsive=e,this.win=f,this.fullscreenElement=g,this.originalVpaidSize={width:0,height:0},this.fullscreenFormatStyle={width:"100%",height:"100%",top:"0",left:"0",position:"fixed","z-index":String(a.Constant.MAX_Z_INDEX_VALUE),"background-color":"#000000",margin:"0","max-width":"none"},this.originalFormatStyle={width:"",height:"",top:"",left:"",position:"","z-index":"","background-color":"",margin:"","max-width":""},this.canvasTag=null,this.active=!1,this.isVideoPaused=!1,this.wasVideoPaused=!1,this.eventListenerManager=new a.DOMEventListenerManager,this.beforeOpenEventListeners=[],this.closeEventListeners=[],this.logger=new a.Logger("FullscreenHelper"),this.parentsPropertiesList=[],this.logger.debug("new"),this.vpaidAd.subscribe(function(){return h.isVideoPaused=!0},a.vpaid.VPAIDEvent.AdPaused),this.vpaidAd.subscribe(function(){return h.isVideoPaused=!1},a.vpaid.VPAIDEvent.AdPlaying),!a.Context.isIos()){var i=["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange"];this.eventListenerManager.addMultiple(i,this.win,function(b){a.HTMLHelper.isFullscreen(h.win.document)?h.vpaidAd.resizeAd(h.win.screen.width,h.win.screen.height,"fullscreen"):(a.ArrayHelper.forEach(h.closeEventListeners,function(a){a()}),h.close())}),this.vpaidAd.subscribe(function(){return h.eventListenerManager.removeMultiple(i)},a.vpaid.VPAIDEvent.AdStopped)}if(this.responsive&&this.responsive.addOrientationChangeListener(function(){return h.handleOrientationChange()}),a.Context.isIos()){var j=this.vpaidAd.getCreativeContainer();j&&j.contentWindow&&this.eventListenerManager.add("touchmove",j.contentWindow,function(a){h.isActive()&&a.preventDefault()})}}return b.getPropertyToSave=function(a,b){return{name:b,value:a.style.getPropertyValue(b),priority:a.style.getPropertyPriority(b)}},b.prototype.handleOrientationChange=function(){this.active&&(this.logger.debug("orientation change, resizeAd"),this.responsive.resize(!0))},b.prototype.isActive=function(){return this.active},b.prototype.init=function(a){this.vpaidEnvironmentVars=a,this.vpaidEnvironmentVars.videoSlot&&(this.canvasTag=this.vpaidEnvironmentVars.videoSlot.canvas)},b.prototype.addBeforeOpenEventListener=function(b){a.ArrayHelper.indexOf(this.beforeOpenEventListeners,b)<0&&this.beforeOpenEventListeners.push(b)},b.prototype.addCloseEventListener=function(b){a.ArrayHelper.indexOf(this.closeEventListeners,b)<0&&this.closeEventListeners.push(b)},b.prototype.open=function(){this.active||(this.active=!0,a.ArrayHelper.forEach(this.beforeOpenEventListeners,function(a){a()}),a.HTMLHelper.addClass(this.vpaidAd.getMainComponentsContainer(),"fullscreen"),a.Context.isIos()?(this.overrideParentsProperties(),this.originalVpaidSize.width=a.Dom.getBoundingClientRect(this.formatContainer).width,this.originalVpaidSize.height=this.vpaidAd.getAdHeight(),a.HTMLHelper.addClass(this.formatContainer,"no-transition"),this.applyStyleRules(),this.components.hideAllComponents()):a.HTMLHelper.openFullscreen(this.fullscreenElement),this.responsive.resize(!0),this.isVideoPaused?(this.vpaidAd.resumeAd(),this.wasVideoPaused=!0):this.wasVideoPaused=!1)},b.prototype.close=function(){var b=this;this.active&&(a.HTMLHelper.removeClass(this.vpaidAd.getMainComponentsContainer(),"fullscreen"),a.Context.isIos()?(this.restoreParentsProperties(),a.HTMLHelper.removeClass(this.formatContainer,"no-transition"),this.components.showAllComponents(),this.restoreStyleRules()):a.Context.isAndroid()?setTimeout(function(){return a.HTMLHelper.closeFullscreen(b.vpaidAd.getContainer())},100):a.HTMLHelper.closeFullscreen(this.fullscreenElement),this.wasVideoPaused&&this.vpaidAd.pauseAd(),this.active=!1,this.responsive.resize(!0),this.canvasTag&&this.resetCanvas(),a.ArrayHelper.forEach(this.closeEventListeners,function(a){a()}))},b.prototype.applyStyleRules=function(){for(var a in this.originalFormatStyle)this.originalFormatStyle.hasOwnProperty(a)&&(this.originalFormatStyle[a]=this.formatContainer.style.getPropertyValue(a));for(var a in this.fullscreenFormatStyle)this.fullscreenFormatStyle.hasOwnProperty(a)&&this.formatContainer.style.setProperty(a,this.fullscreenFormatStyle[a])},b.prototype.restoreStyleRules=function(){for(var a in this.originalFormatStyle)this.originalFormatStyle.hasOwnProperty(a)&&this.formatContainer.style.setProperty(a,this.originalFormatStyle[a])},b.prototype.resetCanvas=function(){this.logger.debug("reset canvas"),this.canvasTag.style.setProperty("position","relative"),this.canvasTag.style.setProperty("top","0"),this.canvasTag.style.setProperty("left","0")},b.prototype.overrideParentsProperties=function(){var c=this;this.parentsPropertiesList=[];var d=a.HTMLHelper.findParentElements(this.formatContainer);a.ArrayHelper.forEach(d,function(d){var e={element:d,properties:[]},f=c.win.getComputedStyle(d);f.zIndex&&"auto"!==f.zIndex&&(e.properties.push(b.getPropertyToSave(d,"z-index")),d.style.setProperty("z-index","auto","important"));var g=["transform","-webkit-transform","transition","-webkit-transition"];a.ArrayHelper.forEach(g,function(a){e.properties.push(b.getPropertyToSave(d,a))}),a.ArrayHelper.forEach(g,function(a){d.style.setProperty(a,"none","important")}),c.parentsPropertiesList.push(e)}),this.parentsPropertiesList.push({element:this.win.document.body,properties:[b.getPropertyToSave(this.win.document.body,"overflow")]}),this.win.document.body.style.setProperty("overflow","hidden")},b.prototype.restoreParentsProperties=function(){a.ArrayHelper.forEach(this.parentsPropertiesList,function(b){a.ArrayHelper.forEach(b.properties,function(a){b.element.style.removeProperty(a.name),b.element.style.setProperty(a.name,a.value,a.priority)})})},b}();b.FullscreenHelper=c}(b=a.helper||(a.helper={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function b(b){if(this.logger=new a.Logger("option."+b),!b)throw new a.FormatException(a.FormatException.OPTION_NAME_REQUIRED)}return b}();b.AbstractOption=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(a,c){var d=b.call(this,"Vast")||this;return d.type=a.type,d.content=a.content,d.pid=c,d.appendPID(),d.checkValue(),d}return __extends(c,b),c.prototype.checkValue=function(){if(!a.Utils.isString(this.type)||!c.VALUES[this.type.toUpperCase()])throw new a.FormatException(a.FormatException.OPTION_VAST_INVALID);if(!a.Utils.isString(this.content))throw new a.FormatException(a.FormatException.OPTION_VAST_INVALID)},c.prototype.isVastUrl=function(){return this.type===c.VALUES.VASTURL},c.prototype.isVastXml=function(){return this.type===c.VALUES.VASTXML},c.prototype.isDisplayUrl=function(){return this.type===c.VALUES.DISPLAYURL},c.prototype.isDisplayXml=function(){return this.type===c.VALUES.DISPLAYXML},c.prototype.getContent=function(){return this.content},c.prototype.extractInsertionId=function(){var a,b="";return this.isVastUrl()&&(a=this.content.match(/get\/(\d+)/),a?b=a[1]:(a=this.content.match(/[&|\?]gid=(\d+)/),a&&(b=a[1]))),b},c.prototype.appendPID=function(){var b=a.URIHelper.parse(this.content);this.isVastUrl()&&"a.teads.tv"===b.hostname&&this.pid&&(this.content+=this.content.indexOf("?")===-1?"?":"&",this.content+="pid="+this.pid)},c.VALUES={VASTURL:"VastUrl",VASTXML:"VastXml",DISPLAYURL:"DisplayUrl",DISPLAYXML:"DisplayXml"},c}(b.AbstractOption);b.Vast=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c;!function(a){a[a.NO=0]="NO",a[a.HAS_MUTED=1]="HAS_MUTED",a[a.HAS_UNMUTED=2]="HAS_UNMUTED"}(c=b.userInteractionSound||(b.userInteractionSound={}));var d=function(){function b(){this.cursorCoords={x:0,y:0},this.lastUserInteractionSound=c.NO,this.currentVolume=0,this.muteCallbacks=[],this.unmuteCallbacks=[],this.logger=new a.Logger("helper.VolumeController"),this.eventListenerManager=new a.DOMEventListenerManager}return b.prototype.init=function(b){var c=this;this.abstractFormat=b,this.vpaidAd=b.getVpaidAd(),this.formatConfig=b.formatConfig,this.formatConfig.soundStart.isMute()?this.hasStarted=!1:this.formatConfig.soundStart.isUnmute()?this.hasStarted=!0:this.formatConfig.soundStart.isCountdown()&&(this.hasStarted=!1),this.vpaidAd.subscribe(function(){clearInterval(c.interval)},a.vpaid.VPAIDEvent.AdStopped)},b.prototype.getVolume=function(){return this.vpaidAd.getAdVolume()===-1?this.currentVolume:this.vpaidAd.getAdVolume()},b.prototype.setVolume=function(a){this.currentVolume=a,this.vpaidAd.setAdVolume(a)},b.prototype.toggleVolume=function(){if(this.stopFade(),this.getVolume()>0)this.mute(),this.lastUserInteractionSound=c.HAS_MUTED,a.ArrayHelper.forEach(this.muteCallbacks,function(a){return a()});else{var b=a.Context.isDesktop()?this.formatConfig.volume.getMouseover():this.formatConfig.volume.getMain();this.setVolume(b),this.lastUserInteractionSound=c.HAS_UNMUTED,a.ArrayHelper.forEach(this.unmuteCallbacks,function(a){return a()})}},b.prototype.userAlreadyInteracted=function(){return this.lastUserInteractionSound!==c.NO},b.prototype.stopFade=function(){this.clock=b.FADE_RATE,clearInterval(this.interval)},b.prototype.startAt=function(b){var c=this,d=function(){var e=c.vpaidAd.getAdDuration()-c.vpaidAd.getAdRemainingTime();e>=b&&(c.vpaidAd.unsubscribe(d,a.vpaid.VPAIDEvent.AdRemainingTimeChange),c.hasStarted||(c.hasStarted=!0,c.fade(c.formatConfig.volume.getMain())))};this.vpaidAd.subscribe(d,a.vpaid.VPAIDEvent.AdRemainingTimeChange)},b.prototype.fadeMain=function(a){void 0===a&&(a=!0),this.fade(this.formatConfig.volume.getMain(),a)},b.prototype.fadeMouseover=function(a){void 0===a&&(a=!0),this.fade(this.formatConfig.volume.getMouseover(),a)},b.prototype.fade=function(a,c){var d=this;if(void 0===c&&(c=!0),this.hasStarted=!0,this.getVolume()!==a){var e=this.getVolume();c&&this.formatConfig.volume.getFadeDuration()?(this.clock=0,clearInterval(this.interval),this.interval=setInterval(function(){if(d.clock>=b.FADE_RATE)d.setVolume(a),clearInterval(d.interval);else{var c=e+(a-e)*d.clock/b.FADE_RATE;e=c,d.setVolume(c)}d.clock++},this.formatConfig.volume.getFadeDuration()/b.FADE_RATE)):(this.stopFade(),this.setVolume(a))}},b.prototype.mute=function(){this.setVolume(0)},b.prototype.isMuted=function(){return 0===this.getVolume()},b.prototype.onMouseOver=function(){this.userAlreadyInteracted()||(this.formatConfig.soundOver.isOver()||this.formatConfig.soundOver.isOnceOver())&&this.fadeMouseover()},b.prototype.onMouseOut=function(){this.userAlreadyInteracted()||(this.formatConfig.soundOver.isOver()||this.formatConfig.soundOver.isOnceOver())&&(this.stopFade(),this.formatConfig.soundOver.isOver()?this.formatConfig.soundStart.isUnmute()?this.fadeMain(!1):this.formatConfig.soundStart.isMute()?this.fade(0,!1):this.formatConfig.soundStart.isCountdown()&&this.fadeMain(!1):this.formatConfig.soundOver.isOnceOver()&&this.fadeMain(!1))},b.prototype.onAdVideoStart=function(){if(this.formatConfig.soundStart.isUnmute()?this.fadeMain():this.formatConfig.soundStart.isCountdown()&&this.startAt(this.formatConfig.soundStart.getCountdown()),a.Context.isDesktop()&&!a.Context.isIABSafeFrame()){var b=a.Dom.getBoundingClientRect(this.abstractFormat.parentContainer),c=this.cursorCoords.x>=b.left&&this.cursorCoords.x<=b.right,d=this.cursorCoords.y>=b.top&&this.cursorCoords.y<=b.bottom;c&&d&&(this.formatConfig.soundOver.isOver()||this.formatConfig.soundOver.isOnceOver())?this.fadeMouseover():this.setVolume(0),this.eventListenerManager.remove("mousemove")}else this.setVolume(0)},b.prototype.replay=function(){var b=this,c=a.Dom.getBoundingClientRect(this.abstractFormat.parentContainer);a.Context.isDesktop()&&(this.cursorCoords={x:Math.floor(c.left+c.width/2),y:Math.floor(c.top+c.height/2)},this.eventListenerManager.add("mousemove",this.abstractFormat.placement.placementConfig.parentWindow.getWindow().document.body,function(a){b.cursorCoords={x:a.clientX,y:a.clientY}}))},b.prototype.startInView=function(){if(!this.userAlreadyInteracted()){var a=this.formatConfig.soundMute.isThreshold()&&this.hasStarted&&(this.formatConfig.soundStart.isCountdown()||this.formatConfig.soundStart.isUnmute()||this.formatConfig.soundOver.isOnceOver());a&&this.fadeMain()}},b.prototype.endInView=function(){!this.userAlreadyInteracted()&&this.formatConfig.soundMute.isThreshold()&&this.hasStarted&&this.fade(0,!1)},b.prototype.addMuteCallback=function(b){a.ArrayHelper.indexOf(this.muteCallbacks,b)<0&&this.muteCallbacks.push(b)},b.prototype.addUnmuteCallback=function(b){a.ArrayHelper.indexOf(this.unmuteCallbacks,b)<0&&this.unmuteCallbacks.push(b)},b.FADE_RATE=10,b}();b.VolumeController=d}(b=a.helper||(a.helper={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){a[a.Error=0]="Error",a[a.AdError=1]="AdError",a[a.ResizeAmpError=2]="ResizeAmpError",a[a.ReplayError=3]="ReplayError",a[a.AdSuccess=4]="AdSuccess",a[a.NoAdSuccess=5]="NoAdSuccess",a[a.MoatNotVisibleAdSuccess=6]="MoatNotVisibleAdSuccess"}(b=a.EXIT_STATUS||(a.EXIT_STATUS={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function b(){}return b.extendAd=function(a,b){var c={settings:{}},d=!(!b.type||!b.content);return d?(c.type=b.type,c.content=b.content):(c.type=a.type,c.content=a.content),c.settings=a.settings,c.insertion_id=a.insertion_id,c.connection_id=a.connection_id,c},b.checkEnvironment=function(b){var c={status:!0,reasons:[]},d=b.parentWindow.getWindow();a.Context.videoSupport(d.document)||a.FlashHelper.hasFlashVersion(10)||(c.status=!1,c.reasons.push(a.Constant.TRACKING.incompatibility.video));var e=a.Context.isMobile()&&b.isMobile(),f=a.Context.isTablet()&&b.isTablet(),g=a.Context.isDesktop()&&b.isDesktop();return e||f||g||(c.status=!1,c.reasons.push(a.Constant.TRACKING.incompatibility.context)),a.Semver.isLowerOrEqual(a.Context.getIEVersion(),"8")&&(c.status=!1,c.reasons.push(a.Constant.TRACKING.incompatibility.browser)),c},b}();b.Compatibility=c}(b=a.helper||(a.helper={}))}(teads||(teads={}));var teads;!function(a){var b=a.Utils.getProtocol(),c=function(){function c(a){void 0===a&&(a={}),this.basePathUrl=b+"//cdn.teads.tv/media/format/v3",this.assetsUrl=this.basePathUrl+"/assets",this.richAdServerUrl=b+"//a.teads.tv/page/{id}/ad",this.buyingEngineUrl=b+"//be-ss.teads.tv/get",this.trackingUrl=b+"//t.teads.tv/track",this.userSyncUrl=b+"//sync.teads.tv/iframe",this.isSumologicLogsEnabled=!0,this.isRichAdServerRequestEnabled=!0,this.isIasBypassEnabled=!0,this.richAdServerRequestTimeout=5e3,this.timestampMacroNames=["[RANDOM]","[RANDOMNUM]","[TIMESTAMP]","[CACHE_BREAKER]","[CACHEBREAKER]","[CACHEBUSTING]","[CACHE_BUSTING]","[CACHEBUSTER]","[CACHE_BUSTER]"],this.refresh(a)}return c.prototype.refresh=function(b){var c=this;void 0===b&&(b={}),a.Option.of(b.ASSETS_URL).forEach(function(a){c.basePathUrl=a,c.assetsUrl=a+"/assets"}),a.Option.of(b.RAS_URL).forEach(function(a){return c.richAdServerUrl=a}),a.Option.of(b.BE_URL).forEach(function(a){return c.buyingEngineUrl=a}),a.Option.of(b.TRACKING_URL).forEach(function(a){return c.trackingUrl=a}),a.Option.of(b.USER_SYNC_URL).forEach(function(a){return c.userSyncUrl=a}),a.Option.of(b.SUMOLOGIC_ENABLED).forEach(function(a){return c.isSumologicLogsEnabled=a}),a.Option.of(b.WITH_RAS_REQUEST).forEach(function(a){return c.isRichAdServerRequestEnabled=a}),a.Option.of(b.WITH_IAS_BYPASS).forEach(function(a){return c.isIasBypassEnabled=a})},c}();a.Config=c,a.config=new c(window.teads)}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function b(){}return b.embedCSS=function(b,c,d){a.Option.of(c).map(function(a){return a.document}).forEach(function(c){if(!c.getElementById(d)){var e=a.ui.TemplateHelper.replacePlaceholders(b,{assetsPath:a.config.assetsUrl}),f=c.createElement("style");f.setAttribute("id",d),f.appendChild(c.createTextNode(e)),c.head.appendChild(f)}})},b.removeCSS=function(b,c){a.Option.of(c).map(function(a){return a.document}).map(function(a){return a.getElementById(b)}).forEach(function(b){return a.Option.of(b.parentNode).forEach(function(a){return a.removeChild(b)})})},b.injectFormatCSS=function(c){var d=a.HTMLHelper.getDocument(c),e=d.getElementById(b.id);if(!e){var f=document.createElement("link");f.setAttribute("rel","stylesheet"),f.setAttribute("type","text/css"),f.setAttribute("href",a.config.basePathUrl+"/teads-format.css"),f.setAttribute("id",b.id),a.Dom.inject(f,a.HTMLHelper.getWindow(c))}},b.id="teads-format-css",b}();b.CSSHelper=c}(b=a.helper||(a.helper={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function b(b){var c=this;if(this.abstractFormat=b,this.isLandscape=!1,this.logger=new a.Logger("Format.Responsive"),this.orientationChangeListeners=[],this.resizeListeners=[],this.manualMaxWidth=!1,this.vpaidAd=b.getVpaidAd(),this.mainContainer=b.parentContainer,this.formatContainer=b.placement.getInnerContainer(),this.mediafile=b.player.getMediafile(),this.win=b.placement.placementConfig.parentWindow.getWindow(),this.linearAd=b.linearAd,this.vpaidAd.subscribe(function(){c.unsetResponsive()},a.vpaid.VPAIDEvent.AdError),this.vpaidAd.subscribe(function(){c.unsetResponsive()},a.vpaid.VPAIDEvent.AdStopped),a.Context.isMobile()||a.Context.isTablet()){var d=function(b){var d=a.Dom.getWindowSize(c.win);c.isLandscape=d.width>d.height};d(),this.addOrientationChangeListener(d),this.addOrientationChangeListener(function(){c.isNativeFullscreen()&&c.resize()});var e=function(a){c.win.setTimeout(function(){c.onOrientationChange(a)},200)};a.Dom.addEventListener("orientationchange",this.win,e),this.vpaidAd.subscribe(function(){a.Dom.removeEventListener("orientationchange",c.win,e)},a.vpaid.VPAIDEvent.AdStopped)}}return b.prototype.resizeOnStart=function(){var b=this;this.vpaidAd.subscribe(function(a){b.logger.debug("Receive metadata from video",a),a.width&&a.height&&(b.mediafile.width!==a.width||b.mediafile.height!==a.height)&&(b.logger.debug("video size is different from VAST mediafile, force resize to good dimensions"),b.mediafile.width=a.width,b.mediafile.height=a.height,b.resize(!0))},a.vpaid.CustomVPAIDEvent.AdVideoMetadata),this.vpaidAd.subscribe(function(){return b.resize(!0)},a.vpaid.VPAIDEvent.AdVideoStart),this.vpaidAd.subscribe(function(){return b.resize(!0)},a.vpaid.VPAIDEvent.AdStarted)},b.prototype.setMainContainer=function(a){this.mainContainer=a,this.iframe&&(this.unsetResponsive(),this.setResponsive())},b.prototype.setResponsive=function(){var b=this;this.iframe||(this.iframe=document.createElement("iframe"),this.iframe.className="teads-resize",this.iframe.style.setProperty("height","0","important"),this.iframe.style.setProperty("min-height","0","important"),this.iframe.style.setProperty("width","100%","important"),this.iframe.style.setProperty("border","none","important"),this.iframe.style.setProperty("margin","0","important"),this.iframe.style.setProperty("padding","0","important"),this.iframe.style.setProperty("display","block","important"));var c=this.abstractFormat.placement.getElectedSlot().getElement();c.appendChild(this.iframe),this.resizeCallback=function(){return b.resize()},a.Dom.addEventListener("resize",this.iframe.contentWindow,this.resizeCallback),this.resize()},b.prototype.unsetResponsive=function(){return!(!this.iframe||!this.iframe.parentNode)&&(a.Dom.removeEventListener("resize",this.iframe.contentWindow,this.resizeCallback),this.iframe.parentNode.removeChild(this.iframe),!0)},b.prototype.addOrientationChangeListener=function(b){a.ArrayHelper.indexOf(this.orientationChangeListeners,b)<0&&this.orientationChangeListeners.push(b)},b.prototype.addResizeListener=function(b){a.ArrayHelper.indexOf(this.resizeListeners,b)<0&&this.resizeListeners.push(b)},b.prototype.getOptimalDimension=function(b,c){void 0===b&&(b=this.mainContainer),void 0===c&&(c=1);var d=a.Dom.getWindowSize(this.win),e=this.getContainerWidth(b),f=!!this.abstractFormat.vpaidApi.getStudioData(),g=a.player.MediaFileHelper.getOptimalHeight(this.mediafile,e,f),h={width:this.vpaidAd.getAdWidth(),height:this.vpaidAd.getAdHeight()};if(g>c*d.height&&!a.Context.isFacebookIA()){var i=d.height/g;h.width=i*e*c,h.height=c*d.height}else h.width===e&&h.height===g||(h.width=e,h.height=this.isFullscreen()?d.height:g);return h.width=Math.round(h.width),h.height=Math.round(h.height),h},b.prototype.resize=function(b,c){void 0===b&&(b=!1),void 0===c&&(c=this.mainContainer);var d={width:this.vpaidAd.getAdWidth(),height:this.vpaidAd.getAdHeight()};this.setMaxWidth(c);var e,f=this.getContainerWidth(c),g=this.getOptimalDimension(),h=a.Dom.getWindowSize(this.win),i=!1;this.isNativeFullscreen()||this.isFullscreen()&&b?d.height===h.height&&d.width===h.width||(this.logger.debug("fullscreen resize from "+d.width+"x"+d.height+" to "+h.width+"x"+h.height),this.vpaidAd.resizeAd(h.width,h.height,"fullscreen"),i=!0):(b||d.height!==g.height||d.width!==g.width)&&(e=g.width>=f?0:(f-g.width)/2,this.formatContainer.style.marginLeft=e+"px",this.formatContainer.style.marginRight=this.formatContainer.style.marginLeft,this.logger.debug("resize from "+d.width+"x"+d.height+" to "+g.width+"x"+g.height),this.vpaidAd.resizeAd(g.width,g.height,this.isFullscreen()?"fullscreen":"normal"),i=!0),i&&this.onResize()},b.prototype.isFullscreen=function(){return a.HTMLHelper.hasClass(this.vpaidAd.getMainComponentsContainer(),"fullscreen")},b.prototype.isNativeFullscreen=function(){return a.HTMLHelper.isFullscreen(this.win.document)},b.prototype.onOrientationChange=function(b){a.ArrayHelper.forEach(this.orientationChangeListeners,function(a){a(b)})},b.prototype.onResize=function(){var b=this;this.win.setTimeout(function(){a.ArrayHelper.forEach(b.resizeListeners,function(a){a()})},100)},b.prototype.getContainerWidth=function(b){if(void 0===b&&(b=this.mainContainer),this.isFullscreen())return a.Dom.getWindowSize(this.win).width;var c=this.win.getComputedStyle(b),d=c.getPropertyValue("width");if(a.Utils.isSizeInPx(d))return Math.round(parseFloat(d));var e=parseFloat(c.getPropertyValue("padding-left"))||0,f=parseFloat(c.getPropertyValue("padding-right"))||0;return Math.round(a.Dom.getBoundingClientRect(b).width-(e+f))},b.prototype.setMaxWidth=function(b){if(void 0===b&&(b=this.mainContainer),this.isFullscreen())b.style.setProperty("max-width","none");else if(!b.style.getPropertyValue("max-width")||this.manualMaxWidth){var c=a.Dom.getBoundingClientRect(b),d=a.Dom.getBoundingClientRect(this.iframe);b.style.setProperty("max-width",Math.round(d.width-Math.max(c.left-d.left,c.right-d.right))+"px"),this.manualMaxWidth=!0}},b}();b.Responsive=c}(b=a.helper||(a.helper={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b=function(){function a(a){this.components=a}return a.prototype.getComponent=function(a){return this.components.hasOwnProperty(a)?this.components[a]:null},a.prototype.getComponents=function(){return this.components},a.prototype.showComponent=function(a){this.components.hasOwnProperty(a)&&this.components[a].show()},a.prototype.hideComponent=function(a){this.components.hasOwnProperty(a)&&this.components[a].hide()},a.prototype.showAllComponents=function(){for(var a in this.components)this.components.hasOwnProperty(a)&&this.components[a].show()},a.prototype.hideAllComponents=function(){for(var a in this.components)this.components.hasOwnProperty(a)&&this.components[a].hide()},a}();a.Components=b}(b=a.helper||(a.helper={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function c(b){this.abstractFormat=b,this.logger=new a.Logger("teads.helper.smartPosition"),this.active=!1,this.started=!1,this.stopped=!1,this.isTop=!1,this.isCorner=!1,this.isResponsive=!1,this.eventListenerManager=new a.DOMEventListenerManager,this.creativeLimits={top:0,bottom:0},this.windowLimits={top:0,bottom:0},this.adSize={width:0,height:0},this.maxRatio=1,this.currentTop=0,this.getCreativeLimitsTries=0,this.originalPlayerZIndex=String(a.Constant.MIN_Z_INDEX_VALUE),this.parentContainer=b.parentContainer,this.playerContainer=b.playerContainer,this.placementConfig=b.placement.placementConfig,this.electedSlot=b.placement.getElectedSlot(),this.vpaidAd=b.getVpaidAd(),this.responsiveHelper=b.responsive,this.fullscreenHelper=b.getFullscreenHelper(),this.components=b.components,this.win=b.placement.placementConfig.parentWindow.getWindow(),this.smartConfig=b.formatConfig.smartPosition.getValue(),this.isSticky=b.formatConfig.sticky.getValue(),this.maxTop=a.Dom.getWindowSize(this.win).height*c.MAX_FLOATING_TOP;var d=a.Context.isMobile()||a.Context.isTablet();d&&(this.smartConfig.top||this.isSticky)?this.isTop=!0:!d&&this.smartConfig.corner&&(this.isCorner=!0),this.logger.debug("isTop, isCorner",this.isTop,this.isCorner),this.isTop?this.maxRatio=c.MAX_SIZE_RATIO_TOP:this.isCorner&&(this.maxRatio=c.MAX_SIZE_RATIO_CORNER),this.originalPlayerZIndex=this.playerContainer.style.zIndex}return c.prototype.isActive=function(){return this.active},c.prototype.hasStarted=function(){return this.started},c.prototype.onScroll=function(a){this.started&&!this.stopped&&(this.windowLimits=this.getWindowLimits(),this.active?this.canStop()&&this.stop():this.canStart()&&this.start())},c.prototype.onTouch=function(a){this.started&&!this.stopped&&(this.windowLimits=this.getWindowLimits(),this.active&&this.canStop()&&this.stop())},c.prototype.init=function(){var b=this;if(!this.started&&(this.isTop||this.isCorner)){this.logger.debug("initializing"),this.responsiveHelper.unsetResponsive(),this.compensationDiv=this.initCompensationDiv();var c=a.Utils.throttle(function(){return b.onResizeEnd()},100,this);this.responsiveHelper.addResizeListener(function(a){return c(a)}),this.fullscreenHelper.addBeforeOpenEventListener(function(){return b.onFullscreenOpen()}),this.fullscreenHelper.addCloseEventListener(function(){return b.onFullscreenClose()}),this.responsiveHelper.addOrientationChangeListener(function(){return b.onOrientationChange()}),this.eventListenerManager.addMultiple(["touchstart","touchmove","touchend"],this.win,function(a){return b.onTouch(a)}),this.creativeLimits=this.getCreativeLimits(),this.currentTop=this.getCurrentTop(),this.logger.debug("init",this.currentTop),this.started=!0,this.responsiveHelper.setResponsive()}},c.prototype.deinit=function(){if(!this.stopped){this.stopped=!0;try{this.stop()}catch(a){}this.eventListenerManager.removeAll(),this.abstractFormat.slotType===a.Constant.SLOT_TYPE.native&&this.compensationDiv.parentNode.removeChild(this.compensationDiv),b.Debug.hideCreativeLimits()}},c.prototype.start=function(){var b=this;if(!this.active){if(this.responsiveHelper.unsetResponsive(),this.compensationDiv.style.height=a.Dom.getBoundingClientRect(this.playerContainer).height+"px",this.setResponsive(),this.playerContainer.style.zIndex=String(a.Constant.MAX_Z_INDEX_VALUE),this.playerContainer.style.position="fixed",this.compensationDiv.style.display="block",this.isTop)this.currentMode===c.MODES.TOP&&(this.currentTop=this.getCurrentTop(),this.playerContainer.style.top=this.currentTop+"px");else{if(!this.isCorner)return this.logger.error("Starting smartPosition with unsupported mode."),void this.stop();this.win.setTimeout(function(){b.playerContainer.style.bottom="0px",b.playerContainer.style.right="0px"},1)}this.active=!0}},c.prototype.getOptimalDimension=function(){return this.responsiveHelper.getOptimalDimension(this.parentContainer,this.maxRatio)},c.prototype.getCreativeLimits=function(){var d=this,e=this.active?this.compensationDiv:this.playerContainer,f=a.Dom.getBoundingClientRect(e);if(f.top===f.bottom&&this.getCreativeLimitsTries<c.MAX_GET_CREATIVE_LIMITS_TRIES)return this.getCreativeLimitsTries++,this.win.setTimeout(function(){return d.getCreativeLimits()},10),this.logger.debug("Could not get creativeLimits after "+this.getCreativeLimitsTries+" tries"),this.creativeLimits;this.getCreativeLimitsTries=0;var g=a.Dom.getScrollTop(this.win),h=g+f.top,i=g+f.bottom,j={top:h,bottom:i};return b.Debug.showCreativeLimits(j,this.parentContainer.parentElement),j},c.prototype.getWindowLimits=function(){var b=a.Dom.getWindowSize(this.win),c=a.Dom.getScrollTop(this.win),d={top:c+this.currentTop,bottom:c+b.height};return d},c.prototype.stop=function(){var b=this;if(this.active&&(this.active=!1,
this.unsetResponsive(),this.playerContainer.style.position="relative",this.playerContainer.style.zIndex=this.originalPlayerZIndex,this.compensationDiv.style.display="none",this.isTop?this.currentMode===c.MODES.TOP&&(this.playerContainer.style.top=""):this.isCorner&&(this.playerContainer.style.bottom="",this.playerContainer.style.right=""),this.abstractFormat.slotType===a.Constant.SLOT_TYPE.native)){var d=this.responsiveHelper.getOptimalDimension(this.compensationDiv);this.vpaidAd.getAdHeight()!==d.height&&(this.adSize=d,this.resizeAd(this.adSize.width,this.adSize.height)),this.responsiveHelper.setResponsive(),setTimeout(function(){b.responsiveHelper.resize(!0)},100)}},c.prototype.canStart=function(){var a=!1;return this.isTop?this.windowLimits.top>this.creativeLimits.top&&(this.currentMode=c.MODES.TOP,a=!0):this.isCorner&&(this.windowLimits.bottom<this.creativeLimits.top?(this.currentMode=c.MODES.TOP,a=!0):this.windowLimits.top>this.creativeLimits.bottom&&(this.currentMode=c.MODES.BOTTOM,a=!0)),a},c.prototype.canStop=function(){var a=!1;return this.isTop?this.currentMode===c.MODES.TOP&&this.windowLimits.top<=this.creativeLimits.top&&(a=!0):this.isCorner&&(this.currentMode===c.MODES.TOP&&this.windowLimits.bottom>=this.creativeLimits.top?a=!0:this.currentMode===c.MODES.BOTTOM&&this.windowLimits.top<=this.creativeLimits.bottom&&(a=!0)),a},c.prototype.setResponsive=function(){var b=this;this.isResponsive=!0;var c=function(){b.isActive()&&b.isResponsive&&(b.handleResize(),b.resizeInterval=a.Timer.requestAnimationFrame(c,100))};this.resizeInterval=a.Timer.requestAnimationFrame(c,100)},c.prototype.handleResize=function(b){if(void 0===b&&(b=!1),!this.fullscreenHelper.isActive()){var d=this.getOptimalDimension();if((b||this.vpaidAd.getAdHeight()!==d.height)&&(this.adSize=d,this.logger.debug("resize to "+this.adSize.width+"x"+this.adSize.height),this.resizeAd(this.adSize.width,this.adSize.height)),d=this.responsiveHelper.getOptimalDimension(this.parentContainer,1),(b||a.Dom.getBoundingClientRect(this.compensationDiv).height!==d.height)&&(this.compensationDiv.style.height=d.height+"px"),this.isTop){this.maxTop=a.Dom.getWindowSize(this.win).height*c.MAX_FLOATING_TOP;var e=this.getTop();this.currentTop!==e&&(this.currentTop=e,this.playerContainer.style.top=this.currentTop+"px")}}},c.prototype.unsetResponsive=function(){a.Timer.cancelAnimationFrame(this.resizeInterval),this.isResponsive=!1},c.prototype.resizeAd=function(b,c){var d=Math.round(a.Dom.getBoundingClientRect(this.compensationDiv).width),e=(d-b)/2+"px";this.vpaidAd.resizeAd(b,c),this.isTop?(this.playerContainer.style.marginLeft=e,this.playerContainer.style.marginRight=e):(this.playerContainer.style.marginLeft="0px",this.playerContainer.style.marginRight="0px")},c.prototype.initCompensationDiv=function(){var b=this.win.document.createElement("div");return b.className="teads-player teads-compensation-div",b.style.display="none",b.style.opacity="0",this.abstractFormat.slotType===a.Constant.SLOT_TYPE.native&&(this.playerContainer.nextSibling?this.playerContainer.parentNode.insertBefore(b,this.playerContainer.nextSibling):this.playerContainer.parentNode.appendChild(b)),b},c.prototype.onResizeEnd=function(){this.fullscreenHelper.isActive()||(this.creativeLimits=this.getCreativeLimits(),this.onScroll())},c.prototype.onOrientationChange=function(){this.creativeLimits=this.getCreativeLimits(),this.isTop&&(this.currentTop=this.getTop(),this.logger.debug("onOrientationChange",this.currentTop)),this.active&&!this.fullscreenHelper.isActive()&&(this.unsetResponsive(),this.handleResize(!0),this.setResponsive())},c.prototype.onFullscreenOpen=function(){this.active&&this.stop()},c.prototype.onFullscreenClose=function(){this.onScroll()},c.prototype.getTop=function(){var b=0;a.ArrayHelper.forEach(a.HTMLHelper.findFloatingHeaders(this.win,[this.playerContainer]),function(c){return b=Math.max(b,a.Dom.getBoundingClientRect(c).bottom)});var c=a.Dom.getScrollTop(this.win),d=c>0?b:c+b;return Math.max(0,Math.min(this.maxTop,d))},c.prototype.getCurrentTop=function(){return this.isTop&&!this.active?this.getTop():this.currentTop},c.MAX_SIZE_RATIO_CORNER=a.Context.isDesktop()?.3:.25,c.MAX_SIZE_RATIO_TOP=a.Context.isDesktop()?.3:.5,c.MAX_FLOATING_TOP=a.Context.isDesktop()?.25:.2,c.MAX_GET_CREATIVE_LIMITS_TRIES=5,c.MODES={TOP:"TOP",BOTTOM:"BOTTOM"},c}();b.SmartPosition=c}(b=a.helper||(a.helper={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function b(){}return b.generate=function(){for(var a=[],b=0;b<256;b++)a[b]=(b<16?"0":"")+b.toString(16);var c=4294967295*Math.random()|0,d=4294967295*Math.random()|0,e=4294967295*Math.random()|0,f=4294967295*Math.random()|0,g=a[255&c]+a[c>>8&255]+a[c>>16&255]+a[c>>24&255]+"-"+a[255&d]+a[d>>8&255]+"-"+a[d>>16&15|64]+a[d>>24&255]+"-"+a[63&e|128]+a[e>>8&255]+"-"+a[e>>16&255]+a[e>>24&255]+a[255&f]+a[f>>8&255]+a[f>>16&255]+a[f>>24&255];return g},b.generateTimeBased=function(){var b=this.generate(),c=a.date.now().toString(16);return 11===c.length?b.slice(0,-11)+c:b},b}();b.UUID=c}(b=a.helper||(a.helper={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b=function(){function b(){}return b.get=function(){return b.value||(b.value=a.UUID.generate()),b.value},b}();a.UserId=b}(b=a.helper||(a.helper={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function c(){}return c.insert=function(d){var e,f=this,g=function(e){f.iframe=a.HTMLHelper.createIframe(),f.iframe.id=c.id,f.iframe.src=a.config.userSyncUrl+"?pid="+d+"&userId="+b.UserId.get()+"&"+a.date.now(),f.iframe.style.display="none",a.Timing.mark("markUserSyncRequest"),e.document.body.appendChild(f.iframe)};if(!this.iframe){try{e=a.HTMLHelper.findParentWindows(window.document.body).pop()}catch(a){this.logger.warn("Cannot get top window"),e=window}g(e)}return this.iframe},c.logger=new a.Logger("helper.UserSync"),c.id="teadsusersync",c}();b.UserSync=c}(b=a.helper||(a.helper={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function c(c,d,e,f){var g=this;this.placementAd=c,this.pageId=d,this.done=f,this.logger=new a.Logger("helper.RASRequest"),this.timeoutFired=!1,this.isRequestSent=!1,this.rasRequest={id:Number(this.pageId),placements:[this.placementAd.report]},!c.ad&&a.config.isRichAdServerRequestEnabled&&(this.rasUrl=e+"&page="+encodeURIComponent(a.JSON.stringify(this.rasRequest))+"&userId="+b.UserId.get()+"&auctid="+this.placementAd.placement.placementTracker.auctid+"&formatVersion="+encodeURIComponent("2.17.85")+"&env="+a.Context.getEnv(),this.request=a.Request.createXmlHttpRequest(),this.request.open("GET",this.rasUrl,!0),this.request.withCredentials=!0,this.request.timeout=a.config.richAdServerRequestTimeout,this.request.setRequestHeader&&this.request.setRequestHeader("Accept","application/json; charset=UTF-8"),this.request.onload=function(){g.onload()},this.request.onerror=function(a){void 0===a&&(a={}),g.onerror(a)},this.request.ontimeout=function(){a.formatSumologic.sendWarning({message:"RAS request: timeout"}),g.ontimeout()},this.timeoutLatencyRAS=setTimeout(function(){a.formatSumologic.sendWarning({message:"RAS request: custom timeout"}),g.ontimeout()},a.config.richAdServerRequestTimeout+10))}return c.getAdPlacementId=function(b){return b&&b.settings&&b.settings.values&&a.Utils.isNumber(b.settings.values.placementId)?b.settings.values.placementId:null},c.prototype.send=function(){var b=this;if(this.placementAd.ad)this.next();else if(a.config.isRichAdServerRequestEnabled)this.adRequestStart=a.date.now(),this.request.send(),this.isRequestSent=!0;else{var d;a.ArrayHelper.forEach(window._tta[this.pageId],function(a){d=c.getAdPlacementId(a),d&&(b.placementAd.placement.pid===d?b.placementAd.ad=a:b.logger.warn("Trying to process _tta object but could not find the related _ttp object (PID: "+d+")",b.placementAd.placement,a))}),this.next()}},c.prototype.next=function(){this.done&&this.done(this.placementAd)},c.prototype.ontimeout=function(){this.timeoutFired||(this.timeoutFired=!0,clearTimeout(this.timeoutLatencyRAS),this.logger.warn("RAS request: timeout"),this.placementAd.placement&&this.placementAd.report.validity.status&&this.placementAd.placement.placementTracker.track(a.Constant.TRACKING.adNotAvailable.networkError),this.next())},c.prototype.onload=function(){var d=this;this.logger.info("Successful request",this.rasUrl),this.processTiming(),clearTimeout(this.timeoutLatencyRAS);var e;try{e=a.Semver.isLowerOrEqual(a.Context.getIEVersion(),"9")?this.request.responseText:this.request.response,a.Utils.isString(e)&&(e=a.JSON.parse(e)),this.logger.info("RAS response",e),Array.isArray(e.ads)||(a.formatSumologic.sendError({message:"RAS request: response.ads is not an array"}),this.placementAd.placement&&this.placementAd.report.validity.status&&this.placementAd.placement.placementTracker.track(a.Constant.TRACKING.adAvailable.error.badResponse),e.ads=[]),e.ads.length>1&&(this.logger.warn("Received more than one ad, WTF?"),e.ads=[e.ads[0]]);var f=0===e.ads.length,g=void 0;if(f?this.placementAd.placement&&this.placementAd.report.validity.status&&(e.noAdReason?this.placementAd.placement.placementTracker.handleFraud(e.noAdReason):this.placementAd.placement.placementTracker.handleEmptyAdsArray()):(g=c.getAdPlacementId(e.ads[0]),g&&this.placementAd.placement.pid===g?this.placementAd.ad?this.logger.debug("The ad for the PID "+g+" has already been loaded",e.ads[0]):this.placementAd.ad=e.ads[0]:this.logger.warn("This placement doesn't exist in the tag",this.placementAd.placement,e.ads[0])),window._tta&&window._tta[this.pageId]){var h;a.ArrayHelper.forEach(window._tta[this.pageId],function(a){h=c.getAdPlacementId(a),d.placementAd.placement.pid===h?d.placementAd.ad?d.placementAd.ad=b.Compatibility.extendAd(d.placementAd.ad,a):d.placementAd.ad=a:d.logger.warn("Trying to process _tta object but could not find the related _ttp object (PID: "+h+")",d.placementAd.placement,a)})}}catch(b){var i=b.message?b.message:a.JSON.stringify(b);return a.formatSumologic.sendError({pageId:this.pageId,message:"RAS request: response is not valid|"+i.substr(0,120)}),this.placementAd.placement&&this.placementAd.report.validity.status&&this.placementAd.placement.placementTracker.track(a.Constant.TRACKING.adAvailable.error.badResponse),void this.logger.error("Response is not valid:",b.message,e)}this.next()},c.prototype.onerror=function(b){clearTimeout(this.timeoutLatencyRAS);var c=b.message?b.message:a.JSON.stringify(b);a.formatSumologic.sendError({pageId:this.pageId,message:"RAS request: request error|"+c.substr(0,120)}),this.logger.error("Request error - Status:",b.target.status);var d=this.request.status||0,e=0===d?a.Constant.TRACKING.adNotAvailable.networkError:a.Constant.TRACKING.adNotAvailable.serverError;this.placementAd.placement&&this.placementAd.report.validity.status&&this.placementAd.placement.placementTracker.track(e),this.next()},c.prototype.processTiming=function(){var b=a.date.now()-this.adRequestStart;a.formatSumologic.sendInfo({pageId:this.pageId,pid:this.placementAd.placement.pid,reqDuration:b})},c}();b.RASRequest=c}(b=a.helper||(a.helper={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function b(b){this.win=b,this.logger=new a.Logger("helper.SmartSlot")}return b.findArticle=function(c,d,e,f){e.length=0,e.currentScore=0,e.childrenScore=0,e.isOverMinimumWidth=!1;var g=c.innerText||c.textContent||c.nodeValue,h=c.nodeName.toUpperCase();if(g&&(3===c.nodeType||b.textNodes[h]))e.length=g.replace(/\s+/g," ").length;else if(c===d.document.body||1===c.nodeType&&b.nodeScores[h]){for(var i=0,j=0,k=0,l=c.childNodes.length;k<l;k++){var m=b.findArticle(c.childNodes[k],d,e);i+=m.length,j+=m.currentScore,(m.isOverMinimumWidth||a.Dom.getSize(c).width>=b.MINIMUM_WIDTH)&&(e.isOverMinimumWidth=!0)}e.currentScore=i,e.childrenScore=j}if(e.childrenScore&&e.isOverMinimumWidth&&e.childrenScore>b.MINIMUM_CHARS){for(var n=b.nodeScores[h]||0,o=c.className.split(" "),p=1,q=void 0,k=0,r=o.length;k<r;k++)q=o[k].replace(/^\s+|\s+$/g,""),p+=b.classBonuses[q]||0;var s=1;for(var t in b.attributeBonuses)if(b.attributeBonuses.hasOwnProperty(t)){var u=b.attributeBonuses[t],v=void 0===u.value&&void 0!==c.getAttribute(t),w=u.value===c.getAttribute(t);(v||w)&&(s+=u.bonus||0)}var x=e.childrenScore*n*p*s;x>e.article.score&&(e.article.score=x,e.article.node=c,f&&f.debug("found a better node scoring ",e.article.score,e.article.node))}return e},b.prototype.find=function(){this.logger.info("Auto slot is finding a slot"),a.Timing.mark("markFormatSmartSlotStart");var c={length:0,currentScore:0,childrenScore:0,isOverMinimumWidth:!1,article:{score:0,node:null}},d=b.findArticle(this.win.document.body,this.win,c,this.logger);if(d.article&&d.article.node){var e=this.findParagraph(d.article.node);return a.Timing.mark("markFormatSmartSlotEnd"),e}return null},b.prototype.findParagraph=function(a){var b,c,d=["P","DIV"];for(c=0;c<d.length&&(b=a.getElementsByTagName(d[c]),!b.length);c++);return b},b.MINIMUM_SCORE=5e3,b.MINIMUM_CHARS=500,b.MINIMUM_WIDTH=200,b.nodeScores={DIV:10,P:4,ARTICLE:20,SECTION:5,SPAN:2,FORM:4,STRONG:2,EM:3,B:1,I:1,U:1,MAIN:2},b.textNodes={SPAN:!0,STRONG:!0,EM:!0,B:!0,I:!0,U:!0},b.classBonuses={article:4,"ob-text":6,"ob-section-html":4,contenuArticle:6},b.attributeBonuses={itemprop:{value:"articleBody",bonus:1e3}},b}();b.SmartSlot=c}(b=a.helper||(a.helper={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function b(b){this.format=b,this.initialized=!1,this.active=!1,this.logger=new a.Logger("BrandingMode")}return b.prototype.isActive=function(){return this.active},b.prototype.isInitialized=function(){return this.initialized},b.prototype.init=function(){var b=this;if(this.logger.debug("init called"),this.initialized)return void this.logger.warn("Branding mode helper has already been initialized");this.initialized=!0,this.vpaidEnvironmentVars=this.format.getEnvironmentVars();var c=this.format.getVpaidAd();c.showComponent("fullscreenbutton");var d=this.format.states.isReplay;this.format.getFullscreenHelper().init(this.vpaidEnvironmentVars),d&&a.Context.isAndroid()&&c.subscribe(function(){b.setVolume(b.format.formatConfig.volume.getMain()),b.initialVolume=b.format.getVolumeController().getVolume(),b.onUnmute()},a.vpaid.VPAIDEvent.AdVideoStart);var e=function(){b.isFullscreenSupported()&&b.stop()};c.subscribe(e,a.vpaid.VPAIDEvent.AdClickThru,this),c.subscribe(function(){return c.unsubscribe(e,a.vpaid.VPAIDEvent.AdClickThru)},a.vpaid.VPAIDEvent.AdStopped),c.subscribe(this.toggle,a.vpaid.ui.VPAIDUIEvent.FullscreenRequest,this),c.subscribe(function(){return c.unsubscribe(b.toggle,a.vpaid.ui.VPAIDUIEvent.FullscreenRequest)},a.vpaid.VPAIDEvent.AdStopped),this.format.vpaidApi.getStudioData()||c.subscribe(this.stop,a.vpaid.ui.VPAIDUIEvent.AdVideoComplete,this),c.subscribe(this.stop,a.vpaid.ui.VPAIDUIEvent.EndscreenInit,this),c.subscribe(this.stop,a.vpaid.ui.VPAIDUIEvent.AdStopped,this),this.format.getVolumeController().addUnmuteCallback(function(){return b.onUnmute()}),this.format.getVolumeController().addMuteCallback(function(){return b.onMute()})},b.prototype.deinit=function(){var b=this;this.logger.debug("deinit called"),this.initialized=!1;var c=this.format.getVpaidAd(),d=function(){b.isFullscreenSupported()&&b.stop()};c.subscribe(d,a.vpaid.VPAIDEvent.AdClickThru,this),c.subscribe(function(){return c.unsubscribe(d,a.vpaid.VPAIDEvent.AdClickThru)},a.vpaid.VPAIDEvent.AdStopped),c.unsubscribe(this.toggle,a.vpaid.ui.VPAIDUIEvent.FullscreenRequest),c.unsubscribe(this.stop,a.vpaid.ui.VPAIDUIEvent.AdVideoComplete),c.unsubscribe(this.stop,a.vpaid.ui.VPAIDUIEvent.EndscreenInit),c.unsubscribe(this.stop,a.vpaid.ui.VPAIDUIEvent.AdStopped),c.hideComponent("fullscreenbutton")},b.prototype.toggle=function(){return this.initialized?void(this.active?this.stop():this.start()):void this.logger.warn("Cannot toggle branding mode helper before its initialization")},b.prototype.start=function(){this.active||(this.logger.debug("start"),this.initialVolume=this.format.getVolumeController().getVolume(),this.setVolume(this.format.formatConfig.volume.getMain()),this.isFullscreenSupported()?(this.format.getFullscreenHelper().open(),this.format.getVpaidAd().showComponent("fullscreenbutton")):this.format.getVpaidAd().hideComponent("fullscreenbutton"),this.active=!0)},b.prototype.stop=function(){this.active&&(this.logger.debug("stop"),this.format.getVolumeController().isMuted()&&(this.initialVolume=0),this.setVolume(this.initialVolume),this.isFullscreenSupported()?this.format.getFullscreenHelper().close():this.format.getVpaidAd().showComponent("fullscreenbutton"),this.format.getVpaidAd().hideComponent("fullscreenbutton"),this.active=!1)},b.prototype.setVolume=function(a){var b=this,c=function(){return b.format.getVolumeController().fade(a,!1)};this.vpaidEnvironmentVars.videoSlot&&this.vpaidEnvironmentVars.videoSlot.audio&&!this.vpaidEnvironmentVars.videoSlot.audio.authorized?this.vpaidEnvironmentVars.videoSlot.audio.authorizeAudio(c.bind(this)):c()},b.prototype.isFullscreenSupported=function(){var b=this.format.getVpaidAd(),c=this.format.getFullscreenHelper().isActive()||b.getAdWidth()>b.getAdHeight();return!a.Context.isDesktop()&&!a.Context.isAmp()&&!a.Context.isFacebookIA()&&!a.Context.isIABSafeFrame()&&c},b.prototype.onUnmute=function(){this.isFullscreenSupported()||this.start()},b.prototype.onMute=function(){this.isFullscreenSupported()||this.stop()},b}();b.BrandingMode=c}(b=a.helper||(a.helper={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){a.SLIDER_WHITELIST=window.SLIDER_WHITELIST||/^(25030|27511|27935|28418|29824|30767|35627|35655|35781|35782|35878|35883|35892|36851|36886|36909|37252|37270|37431|37432|37440|37450|37513|37648|37652|37655|37656|37664|37666|37676|37678|37703|37704|37790|37791|37811|37812|37814|37921|37925|37926|37928|37932|37955|37958|37959|37967|38033|38037|38038|38039|38043|38044|38049|38050|38051|38052|38053|38054|38055|38056|38057|38059|38219|38221|38297|38299|38309|38310|38328|38329|38331|38343|38424|38686|38908|38983|38984|39456|39457|39955|40236|40237|40239|40249|40250|40427|41206|41207|41259|41391|41660|42628|42712|42811|42812|43215|43260|43323|43701|43702|44019|44020|44223|44328|44329|44330|44333|44334|44495|44496|45036|45037|45040|45041|45058|45119|45125|45572|45573|45575|45681|45872|46012|46053|46056|46058|46066|46274|46374|46407|46426|46435|46514|46819|47135|47136|47160|47161|47165|47443|47535|47575|47576|47577|47578|47579|47580|47587|47588|47589|47590|47591|47592|47593|47594|47595|47596|47597|47598|47600|47924|47925|47926|47930|47931|47932|47956|48034|48408|48409|48431|48820|48822|48824|48826|48830|48967|49069|49677|49678|50244|50245|50487|50797|50800|51583|51936|52085|52186|52288|52289|52290|52432|52433|52437|52866|52867|52894|52897|53252|53325|53892|53948|54108|54125|54561|55060|55061|55062|55097|55160|55229|55231|55233|55235|55819|55973|55975|55992|56493|56664|56665|58062|59565|60075|60294|60298|60612|61013|61018|61180|61334|61335|61409|61502|61503|61522|61524|61525|61561|61570|61762|61797|62102|62143|62242|62245|62267|62341|62385|62391|62461|62586|62587|62619|62622|62650|62730|62749|62909|62910|62948|62963|63068|63069|63080|63081|63083|63093|63201|63203|63204|63205|63206|63207|63208|63209|63210|63280|63289|63572|63574|63757|63784|63786|63788|63790|63792|63794|63796|63798|63800|63802|63804|63859|64010|64018|64224|64339|64469|64481|64482|64534|64650|64836|64837|64999|65000|65034|65043|65046|65257|65464|65599|65765|65840|65853|65865|65978|65988|66226|66337|66338|66339|66371|66537|66538|66706|67325|67335|67713)$/,a.FORCE_EXPAND_ANIMATION_LIST=/^(19503|19593|19742|20405|20406|20993|21076|21077|21918|22041|22268|22313|22560|23278|23388|23861|23862|24283|24642|24666|24857|24858|24991|24992|24993|24997|24998|24999|25000|25001|25058|25088|25129|25897|26007|26071|26072|26073|26074|26075|26076|26077|26078|26079|26248|26318|26403|26512|26547|26631|26632|26942|27348|27593|27696|28019|28222|28320|28321|28361|28419|28588|28589|28626|28627|28647|28687|28854|29017|29018|29019|29020|29399|29401|29402|29404|29715|29757|29758|29929|29930|29931|30964|30967|31752|31753|31760|31761|31762|31777|31778|31779|32105|32106|32107|32281|32282|32283|32284|32329|32330|32557|32601|32674|32675|32676|32677|33032|33033|33110|33366|33508|33521|33522|33523|33524|33525|33526|33538|33703|33704|33705|33706|33707|33708|33870|33896|33897|33898|33899|34364|34441|34574|34575|34709|34710|34711|34712|34713|34714|34804|34805|34806|34807|34894|34895|35173|35326|35327|35365|35636|35637|35982|35983|35985|35986|36125|36136|36184|36185|36186|36187|36188|36189|36190|36191|36192|36461|36462|36463|36464|36465|36466|36467|36468|36469|36470|36471|36472|36473|36476|36477|36478|36479|36480|36481|36482|36483|36484|36742|36743|36744|36745|36746|37071|37072|37073|37280|37950|37951|38197|38198|38199|38388|38762|38763|38764|38765|38766|39893|39969|40075|41033|41034|41035|41036|41043|41044|41045|41303|41493|41494|41910|41911|41912|41913|41914|41915|42084|42270|42271|42272|42273|42274|42275|42510|42511|42512|42513|42710|42711|42780|42781|42838|42839|42931|43102|43103|43104|43105|43106|43107|43112|43113|43356|43654|43658|43763|43765|43862|43863|43993|43994|43995|44005|44006|44322|44323|44404|44405|44588|45253|45254|45255|45256|45257|45258|45259|45260|45261|45262|45263|45264|45265|45266|45267|45268|45269|45270|45271|45272|45273|45274|45275|45277|45278|45279|45280|45281|45282|45283|45284|45285|45286|45287|45288|45289|45290|45291|45292|45293|45294|45295|45296|45297|45298|45299|45300|45351|45352|45353|45354|45355|45356|45357|45358|45359|45360|45361|45362|45363|45364|45365|45366|45367|45368|45369|45370|45371|45372|45373|45374|45375|45376|45377|45378|45379|45380|45381|45382|45383|45384|45385|45386|45387|45388|45389|45424|45425|45426|45427|45428|45429|45430|45431|45432|45481|45482|45483|45519|45520|45521|45522|45641|45642|45643|45735|45879|45892|45897|45949|45950|45951|45952|45954|45955|45961|45963|45964|46136|46137|46138|46244|46245|46246|46351|46379|46380|46383|46384|46385|46386|46447|46609|46610|46611|46612|46613|46614|46615|46616|46617|46618|46619|46620|46621|46622|46623|46624|46625|46626|46627|46628|46629|46630|46631|46632|46633|46634|46635|46636|46637|46638|46639|46640|46641|46642|46643|46644|46695|46696|46697|46698|46699|46700|46701|46703|46704|46705|46722|46723|46724|46726|46727|46728|46729|46730|46731|46732|46733|46734|46736|46737|46738|46739|46740|46741|46765|46766|46767|46768|46769|46770|46999|47000|47001|47002|47003|47004|47027|47028|47029|47074|47075|47076|47077|47078|47166|47167|47168|47169|47170|47171|47172|47173|47226|47261|47262|47263|47264|47440|47525|47526|47527|47620|47621|47677|47678|47679|47680|47681|47682|47683|47684|47685|47697|47698|47737|47738|47739|47740|47741|47742|47743|47744|47745|47746|47747|47748|47751|47752|47753|47754|47755|47756|47814|47815|47831|47841|47842|47946|47947|47948|47949|47950|47951|47952|47953|47979|47988|48088|48089|48091|48134|48135|48136|48137|48138|48139|48140|48141|48142|48143|48144|48145|48234|48235|48368|48379|48403|48404|48405|48466|48467|48468|48470|48510|48511|48512|48525|48552|48555|48558|48559|48596|48597|48598|48599|48600|48601|48602|48612|48667|48671|48673|48674|48675|48676|48677|48678|48679|48680|48681|48682|48683|48684|48685|48686|48687|48688|48689|48690|48691|48692|48693|48694|48695|48696|48895|48896|48897|48898|48906|48965|49101|49195|49247|49257|49260|49262|49264|49302|49303|49316|49317|49318|49319|49333|49334|49335|49359|49405|49431|49792|49798|49799|50062|50081|50167|50286|50287|50382|50392|50395|50396|50397|50467|50468|50469|50560|50561|50563|50564|50752|50753|51020|51073|51074|51123|51124|51286|51295|51296|51300|51308|51388|51651|51978|52057|52058|52059|52060|52061|52067|52098|52165|52169|52211|52240|52245|52248|52253|52538|52676|52677|52679|52680|52691|52708|52709|52711|52797|52801|52802|52829|52928|52979|53055|53056|53057|53058|53059|53060|53061|53062|53063|53064|53065|53066|53067|53257|53323|53324|53456|53457|53458|53814|53815|53816|53817|53818|53819|53820|53821|53906|53911|53939|53941|53942|54004|54005|54029|54034|54042|54147|54148|54149|54150|54151|54303|54304|54305|54310|54311|54422|54425|54426|54428|54429|54433|54548|54580|54581|54594|54639|54653|54654|54655|54656|54657|54658|54659|54660|54661|54728|54729|54834|54908|54970|54971|55034|55109|55165|55180|55184|55338|55339|55340|55414|55415|55416|55417|55419|55505|55506|55507|55508|55513|55514|55652|55653|55654|55655|55656|55657|55956|56182|56183|56184|56241|56242|56244|56444|56532|56536|56537|56538|56560|56561|56562|56563|56564|56565|56568|56570|56571|56572|56573|56574|56576|56579|56587|56593|56594|56596|56675|56676|56677|56678|56679|56680|56681|56682|56683|56684|56685|56688|56689|56690|56691|56692|56693|56694|56695|56696|56697|56698|56699|56700|56701|56702|56703|56704|56705|56781|56782|56783|56927|56928|56940|57247|57248|57249|57370|57461|57463|57611|58148|58149|58150|58151|58153|58154|58211|58305|58321|58322|58371|58389|58440|58473|58483|58933|58982|59013|59014|59019|59241|59284|59290|59378|59379|59579|59580|59956|59957|59958|59959|59961|59962|59965|59967|59999|60139|60140|60141|60142|60143|60144|60145|60146|60147|61067|61068|61069|61070|61199|61200|61205|61206|61363|61364|61381|61508|61779|61780|61781|61782|61783|61784|61785|61786|61787|61788|61789|61790|61819|61855|61856|61857|62302|62303|62354|62355|62356|62357|62358|62359|62362|62363|62364|62654|62656|62658|62659|62881|63215|63299|63300|63303|63304|63306|63307|63366|63367|63381|63382|63385|63386|63538|63539|63554|63829|63830|63831|63835|63969|63970|63972|64061|64062|64063|64064|64065|64066|64068|64069|64155|64156|64157|64158|64159|64247|64248|64249|64250|64251|64349|64350|64351|64352|64353|64354|64355|64356|64427|64433|64434|64548|64549|64550|64551|64552|64561|64562|64563|64564|64737|64738|64825|64826|64828|64829|64830|64971|64972|65222|65223|65226|65227|65228|65229|65230|65369|65370|65373|65374|65375|65376|65611|65612|65613|65614|65663|65808|65875|65876|65877|65878|65879|65880|65881|65882|65884|65885|65886|65887|65888|65889|65890|65891|65893|65895|65896|65897|65898|65900|65901|65902|65903|65904|65905|65906|65907|66078|66079|66080|66081|66082|66083|66084|66085|66086|66087|66088|66089|66382|66383|66384|66385|66386|66387|66662|66663|66666|66667|66668|66719|66975|66976|67222|67223|67224|67225|67281|67282|67404|67405|67406|67407|67410|67411|67412|67413|67543|67544|67545|67546|67547|67548|67549|67550|67551|67635|67636|67649|67650|67744|67745|67746|67747|67748|67749|68000|68001|68004|68005|68029|68031|68032|68033|68211|68214|68254|68255|68256|68257|68258|68259|68260|68261|68262|68263|68264|68265|68266|68267|68268|68269|68270|68271|68272|68414|68415|68416|68417|68419|68436|68437|68438|68440|68592|68593|68594|68595|68596|68597|68598|68599|68601|68602)$/,a.RESPONSIVE={xs:{className:"xs-screen",size:480},sm:{className:"sm-screen",size:640}},a.INREAD_IMPACT_PARALLAX_WIDTH=224,a.INREAD_IMPACT_BASE_WIDTH=640,a.INREAD_IMPACT_BASE_HEIGHT=234,a.FORMAT={inread:"inread",inboard:"inboard"},a.SLOT_TYPE={native:"native",corner:"corner",top:"top"},a.TRACKING={placementCall:"placementCall",fallback:{integration:"passback-integration",noAd:"passback-noAd"},noSlot:{selector:"noSlot-selector",filter:"noSlot-filter",avoid:"noSlot-avoid",size:"noSlot-size",btf:"noSlot-BTF",minimum:"noSlot-minimum",minimumBelow:"noSlot-minimumBelow",content:"noSlot-content",position:"noSlot-position",videoArticle:"noSlot-videoArticle",videoSlot:"noSlot-videoSlot",imageSlot:"noSlot-imageSlot",safeFrame:"noSlot-safeFrame"},incompatibility:{browser:"incompatibility-browser",context:"incompatibility-context",format:"incompatibility-format",video:"incompatibility-video"},placementCapping:"placementCapping",slotAvailable:"slotAvailable",adNotAvailable:{networkError:"adNotAvailable-networkError",serverError:"adNotAvailable-serverError"},adAvailable:{error:{parseTimeout:"adAvailable-error-parseTimeout",badResponse:"adAvailable-error-badResponse",vast:"adAvailable-error-vast-{code}",settings:"adAvailable-error-settings",sameAd:"adAvailable-error-sameAd"},success:"adAvailable-success"},adCall:"adCall",noAd:{serverError:"noAd-serverError",networkError:"noAd-networkError",notFilled:"noAd-notFilled",vastError:"noAd-vastError-{code}",parseTimeout:"noAd-parseTimeout",settingsError:"noAd-settingsError",badResponse:"noAd-badResponse",sameAd:"noAd-sameAd",ivt:{doubleVerify:"noAd-ivt-doubleVerify",tag:"noAd-ivt-tag"},blockedSite:{doubleVerify:"noAd-blockedSite-doubleVerify"}},ad:"ad",impression:"impression",openExpand:"open-expand",open:"open",visible:"visible",click:"click",ivt:{doubleVerify:"IVT DoubleVerify",tag:"IVT Tag"},blockedSite:{doubleVerify:"BlockedSite DoubleVerify"}},a.TRACKING_LOG={placementCall:"f11",noSlot:"f21",incompatibility:"f22",slotAvailable:"f24",adNotAvailable:"f31","adAvailable-error":"f32","adAvailable-success":"f33",adCall:"f41",noAd:"f51",ad:"f52"},a.COMSCORE_URL={V1:{"http:":"http://b.scorecardresearch.com/p?C1=1&C2=17198971&C5=01","https:":"https://sb.scorecardresearch.com/p?C1=1&C2=17198971&C5=01"},V2:{"http:":"http://b.scorecardresearch.com/p?c1=2&c2=17198971&ns_ap_sv=2.1511.10&ns_type=hidden&ns_st_it=a&ns_st_sv=4.0.0&ns_st_ad=1&ns_st_sq=1&ns_st_id=[impressionId]&ns_st_ec=1&ns_st_cn=1&ns_st_ev=play&ns_st_ct=va00&ns_st_cl=0&ns_st_pt=0&c3=*null&c4=*null&c6=*null&ns_ts=[CACHEBUSTING]","https:":"https://sb.scorecardresearch.com/p?c1=2&c2=17198971&ns_ap_sv=2.1511.10&ns_type=hidden&ns_st_it=a&ns_st_sv=4.0.0&ns_st_ad=1&ns_st_sq=1&ns_st_id=[impressionId]&ns_st_ec=1&ns_st_cn=1&ns_st_ev=play&ns_st_ct=va00&ns_st_cl=0&ns_st_pt=0&c3=*null&c4=*null&c6=*null&ns_ts=[CACHEBUSTING]"}},a.DEFAULT_VIDEO_SIZE_RATIO=16/9,a.MIN_Z_INDEX_VALUE=0,a.MAX_Z_INDEX_VALUE=2147483647,a.FACEBOOK_IA={exitsViewport:"exits_viewport",entersViewport:"enters_viewport",centerExitsViewport:"center_exits_viewport",centerEntersViewport:"center_enters_viewport"},a.INTERNAL_PASSBACK_NO_PASSBACK="teads_internal_passback_no_passback",a.iasConnectionIds=[44476,47237,53517],a.doubleVerifyConnectionIds=[44477,47236,53518],a.comsScoreConnectionIds=[44481,47234,53519]}(b=a.Constant||(a.Constant={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function b(){}return b.getPercentInView=function(a,c){var d=b.percentToEvent[a],e=b.eventToPercent[c];return b.isFlowValid(d,c)&&e||(e=a),e},b.isFlowValid=function(c,d){var e=!1;switch(c){case a.Constant.FACEBOOK_IA.exitsViewport:e=d===a.Constant.FACEBOOK_IA.entersViewport;break;case a.Constant.FACEBOOK_IA.entersViewport:e=d===a.Constant.FACEBOOK_IA.centerEntersViewport||d===a.Constant.FACEBOOK_IA.exitsViewport;break;case a.Constant.FACEBOOK_IA.centerEntersViewport:e=d===a.Constant.FACEBOOK_IA.centerExitsViewport;break;case a.Constant.FACEBOOK_IA.centerExitsViewport:e=d===a.Constant.FACEBOOK_IA.exitsViewport||d===a.Constant.FACEBOOK_IA.centerEntersViewport;break;case void 0:e=!0}return b.logger.debug(c+" -> "+d+" = "+e),e},b.logger=new a.Logger("helper.Facebook"),b.NOT_IN_VIEW=-1,b.eventToPercent=(d={},d[a.Constant.FACEBOOK_IA.exitsViewport]=b.NOT_IN_VIEW,d[a.Constant.FACEBOOK_IA.entersViewport]=1,d[a.Constant.FACEBOOK_IA.centerExitsViewport]=49,d[a.Constant.FACEBOOK_IA.centerEntersViewport]=51,d),b.percentToEvent=(e={},e[b.NOT_IN_VIEW]=a.Constant.FACEBOOK_IA.exitsViewport,e[1]=a.Constant.FACEBOOK_IA.entersViewport,e[49]=a.Constant.FACEBOOK_IA.centerExitsViewport,e[51]=a.Constant.FACEBOOK_IA.centerEntersViewport,e),b}();b.Facebook=c;var d,e}(b=a.helper||(a.helper={}))}(teads||(teads={}));var teads;!function(a){a.formatSumologic=new a.Sumologic}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(a,d){void 0===a&&(a=c.DEFAULT);var e=b.call(this,"Callbacks")||this;return e.callbacks=a,e.volume=d,e.checkValue(),e}return __extends(c,b),c.prototype.checkValue=function(){a.Utils.isObject(this.callbacks)||(this.callbacks=c.DEFAULT)},c.prototype.trigger=function(b,c,d){if(this.last===b)return this.logger.debug("Callbacks already triggered",b),
!1;if(b===a.vpaid.VPAIDEvent.AdVolumeChange&&c&&(c.getVolume()===this.volume.getMain()||c.getVolume()===this.volume.getMouseover()?this.trigger("unmute"):c.isMuted()&&this.trigger("mute")),b===a.vpaid.VPAIDEvent.AdExpandedChange&&d&&(d.isActive()?this.trigger("enterFullscreen"):this.trigger("exitFullscreen")),a.Utils.isFunction(this.callbacks[b]))try{return this.callbacks[b](),this.last=b,!0}catch(c){a.formatSumologic.sendError({message:'The "'+b+'" callback threw an error'}),this.logger.error('the "'+b+'" callback threw an error:',c)}else this.callbacks[b]&&this.logger.error('the "'+b+'" callback is not a function:',this.callbacks[b]);return!1},c.DEFAULT={},c}(b.AbstractOption);b.Callbacks=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(a){void 0===a&&(a=c.DEFAULT);var d=b.call(this,"Css")||this;return d.originalRules=a,d.checkValue(),d.originalRules&&(d.rules=c.transformStringToObject(d.originalRules)),d}return __extends(c,b),c.transformStringToObject=function(b){var c={};if(!b)return c;var d=b.split(";");return a.ArrayHelper.forEach(d,function(b){var d=b.split(":"),e=d[0],f=d[1];e&&f&&(e=a.StringHelper.trim(e),f=a.StringHelper.trim(f),c[e]=f,"float"===e&&(c.cssFloat=f,c.styleFloat=f))}),c},c.prototype.checkValue=function(){a.Utils.isString(this.originalRules)||(this.originalRules=c.DEFAULT)},c.prototype.getOriginal=function(){return this.originalRules},c.prototype.applyRulesOn=function(a){this.applyCssRulesOn(a,this.rules)},c.prototype.applyCssRulesOn=function(a,b){var d,e=!1;for(var f in b)b.hasOwnProperty(f)&&(e=c.IMPORTANT_REGEX.test(b[f]),d=b[f].replace(c.IMPORTANT_REGEX,"").trim(),a.style.setProperty(f,d,e?"important":null))},c.DEFAULT=null,c.IMPORTANT_REGEX=/!\s*important/i,c}(b.AbstractOption);b.Css=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(a){void 0===a&&(a=c.DEFAULT);var d=b.call(this,"AdType")||this;return d.value=a,d.checkValue(),d}return __extends(c,b),c.prototype.checkValue=function(){a.Utils.isString(this.value)&&c.VALUES[this.value]||(this.value=c.DEFAULT)},c.prototype.get=function(){return this.value},c.prototype.isVideo=function(){return this.value===c.VALUES.video},c.prototype.isDisplay=function(){return this.value===c.VALUES.display},c.prototype.isNative=function(){return this.value===c.VALUES.native},c.VALUES={video:"video",display:"display",native:"native"},c.DEFAULT=c.VALUES.video,c}(b.AbstractOption);b.AdType=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(d,e,f,g){void 0===g&&(g=null);var h=b.call(this,"AllowedPlayer")||this;return h.formatName=e,h.smartPosition=f,h.placementId=g,h.isCustomContext()&&h.isCustomOs()?h.setValue(a.player.PLAYER_TYPE.CANVAS):h.setValue(c.VALUES[d]),h.checkValue(),h}return __extends(c,b),c.prototype.checkValue=function(){var a=!1;for(var b in c.VALUES)c.VALUES.hasOwnProperty(b)&&(a=a||this.value===c.VALUES[b]);a||(this.value=c.DEFAULT)},c.prototype.getValue=function(){return this.value},c.prototype.setValue=function(b){this.value=b,a.Context.cacheCanvasUsed(this.value===a.player.PLAYER_TYPE.CANVAS)},c.prototype.isCustomContext=function(){return a.Context.isAmp()||a.Context.isIABSafeFrame()||a.Context.isFacebookIA()||this.formatName.isInBoard()&&this.smartPosition.isEnabled()},c.prototype.isCustomOs=function(){return a.Context.isAndroid()&&!a.Semver.isGreaterOrEqual(a.Context.getChromeVersion(),"53")||a.Context.isIos()&&!a.Context.isWhiteListedIos10Safari(String(this.placementId))},c.VALUES={html5:a.player.PLAYER_TYPE.HTML5,canvas:a.player.PLAYER_TYPE.CANVAS,any:a.player.PLAYER_TYPE.ANY},c.DEFAULT=a.player.PLAYER_TYPE.ANY,c}(b.AbstractOption);b.AllowedPlayer=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(d,e,f){void 0===d&&(d=c.DEFAULT),void 0===e&&(e=null),void 0===f&&(f=null);var g=b.call(this,"Animations")||this;return g.value=a.Utils.extend(c.DEFAULT,d),a.Constant.FORCE_EXPAND_ANIMATION_LIST.test(String(f))?g.value.expand=.5:e&&e.isInBoard()&&(g.value=c.DEFAULT_INBOARD),g.checkValue(),g}return __extends(c,b),c.prototype.checkValue=function(){a.Utils.containsKeys(c.VALUES,this.value)||(this.value=c.DEFAULT)},c.prototype.setExpandDuration=function(b){var d=this;a.ArrayHelper.forEach(c.PROPERTIES,function(a){b.style.setProperty(a,d.value.expand+"s")})},c.prototype.setCollapseDuration=function(b){var d=this;a.ArrayHelper.forEach(c.PROPERTIES,function(a){b.style.setProperty(a,d.value.collapse+"s")})},c.prototype.getExpandDuration=function(){return this.value.expand},c.prototype.getCollapseDuration=function(){return this.value.collapse},c.PROPERTIES=["-webkit-transition-duration","-o-transition-duration","-moz-transition-duration","transition-duration"],c.VALUES={EXPAND:"expand",COLLAPSE:"collapse"},c.DEFAULT={expand:0,collapse:.5},c.DEFAULT_INBOARD={expand:.5,collapse:.5},c}(b.AbstractOption);b.Animations=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(a){void 0===a&&(a=c.DEFAULT);var d=b.call(this,"Format")||this;return d.value=a,d.checkValue(),d}return __extends(c,b),c.prototype.checkValue=function(){if(!a.Utils.isString(this.value)||!c.VALUES[this.value.toUpperCase()]||a.Context.isAmp()&&!this.isInRead())throw new a.FormatException(a.FormatException.OPTION_FORMAT_INVALID)},c.prototype.get=function(){return this.value},c.prototype.isInRead=function(){return this.value===c.VALUES.INREAD},c.prototype.isInBoard=function(){return this.value===c.VALUES.INBOARD},c.VALUES={INREAD:"inread",INBOARD:"inboard"},c.DEFAULT=null,c}(b.AbstractOption);b.Format=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(d){void 0===d&&(d=c.DEFAULT);var e=b.call(this,"Threshold")||this;return e.value=d,a.Context.isFacebookIA()&&a.Utils.isNumber(e.value)&&e.value>0&&(e.value=50),e.checkValue(),e}return __extends(c,b),c.prototype.checkValue=function(){if(!a.Utils.isNumber(this.value)||this.value<=0||this.value>100)throw new a.FormatException(a.FormatException.OPTION_THRESHOLD_MISSING)},c.prototype.get=function(){return this.value},c.DEFAULT=null,c}(b.AbstractOption);b.Threshold=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(d){void 0===d&&(d=c.DEFAULT);var e=b.call(this,"Volume")||this;return a.Semver.isGreaterOrEqual(a.Context.getIosVersion(),"10")?e.value=c.DEFAULT_IOS10:e.value=a.Utils.extend(c.DEFAULT,d),e.checkValue(),e}return __extends(c,b),c.prototype.checkValue=function(){a.Utils.containsKeys(c.VALUES,this.value)||(this.value=c.DEFAULT)},c.prototype.getMain=function(){return this.value.main},c.prototype.getMouseover=function(){return this.value.mouseover},c.prototype.getFadeDuration=function(){return this.value.fadeDuration},c.VALUES={MAIN:"main",MOUSEOVER:"mouseover",FADEDURATION:"fadeDuration"},c.DEFAULT={main:.1,mouseover:.35,fadeDuration:1e3},c.DEFAULT_IOS10={main:1,mouseover:1,fadeDuration:0},c}(b.AbstractOption);b.Volume=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(d){void 0===d&&(d="");var e=b.call(this,"VtpEvent")||this;if(e.event=c.DEFAULT_EVENT,e.offset=c.DEFAULT_OFFSET,a.Utils.isString(d)){var f=d.split("-"),g=f[0],h=f[1];g&&a.player.trackingMapping[g]&&(e.event=a.player.trackingMapping[g]),e.event===a.vpaid.VPAIDEvent.AdRemainingTimeChange&&(e.offset=parseInt(h,10))}return e.checkValue(),e}return __extends(c,b),c.prototype.checkValue=function(){a.Utils.isString(this.event)&&a.Utils.isNumber(this.offset)&&!isNaN(this.offset)||(this.event=c.DEFAULT_EVENT,this.offset=c.DEFAULT_OFFSET)},c.prototype.getEvent=function(){return this.event},c.prototype.getOffset=function(){return this.offset},c.DEFAULT_EVENT=null,c.DEFAULT_OFFSET=0,c}(b.AbstractOption);b.VtpEvent=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(d,e){void 0===d&&(d=null),void 0===e&&(e="");var f=b.call(this,"BrandLogo")||this,g={display:!!d&&d.display,url:e};return f.value=a.Utils.extend(c.DEFAULT,g),f.checkValue(),f}return __extends(c,b),c.prototype.checkValue=function(){a.Utils.containsKeys(c.VALUES,this.value)||(this.value=c.DEFAULT)},c.prototype.getUrl=function(){return this.value.url},c.prototype.isEnabled=function(){return this.value.display},c.VALUES={DISPLAY:"display",URL:"url"},c.DEFAULT={display:!1,url:""},c}(b.AbstractOption);b.BrandLogo=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(d){void 0===d&&(d=c.DEFAULT);var e=b.call(this,"CallButton")||this;return e.value=a.Utils.extend(c.DEFAULT,d),e.checkValue(),e}return __extends(c,b),c.prototype.checkValue=function(){a.Utils.containsKeys(c.VALUES,this.value)||(this.value=c.DEFAULT)},c.prototype.isEnabled=function(){return this.value.display},c.prototype.getCountdown=function(){return this.value.countdown},c.prototype.getText=function(){return this.value.text},c.VALUES={DISPLAY:"display",COUNTDOWN:"countdown",TEXT:"text"},c.DEFAULT={display:!0,countdown:3,text:"Learn More"},c}(b.AbstractOption);b.CallButton=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(d,e){var f=b.call(this,"CloseButton")||this;return f.getValueFromVast=!d||a.Utils.isUndefined(d.display),f.value=a.Utils.extend(c.DEFAULT,d),(a.Context.isFacebookIA()||e.isEnabled())&&(f.getValueFromVast=!1,f.value={display:!1,countdown:0}),f.checkValue(),f}return __extends(c,b),c.prototype.checkValue=function(){a.Utils.containsKeys(c.VALUES,this.value)||(this.value=c.DEFAULT)},c.prototype.isEnabled=function(){return this.value.display},c.prototype.getCountdown=function(){return this.value.countdown},c.prototype.hasToGetValueFromVast=function(){return this.getValueFromVast},c.VALUES={DISPLAY:"display",COUNTDOWN:"countdown"},c.DEFAULT={display:!0,countdown:0},c}(b.AbstractOption);b.CloseButton=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(d,e,f,g){void 0===f&&(f=null),void 0===g&&(g=null);var h=b.call(this,"Credits")||this,i=f&&f.isInBoard();return h.value=a.Utils.extend(i?c.DEFAULT_INBOARD:c.DEFAULT_INREAD,d),h.formatName=f,(g&&g.isDisplayXml()||e.isEnabled())&&(h.value.display=!1),h.checkValue(),h}return __extends(c,b),c.prototype.checkValue=function(){a.Utils.containsKeys(c.VALUES,this.value)||(this.value=c.DEFAULT_INREAD)},c.prototype.isEnabled=function(){return this.value.display},c.prototype.getText=function(){return this.value.text},c.prototype.getLink=function(){return this.value.link},c.VALUES={DISPLAY:"display",TEXT:"text",LINK:"link"},c.DEFAULT_INREAD={display:!0,text:"[inRead] invented by Teads",link:"http://teads.tv/inread-outstream/"},c.DEFAULT_INBOARD={display:!0,text:"[inBoard] invented by Teads",link:"http://teads.tv/inread-outstream/"},c}(b.AbstractOption);b.Credits=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(d){void 0===d&&(d=c.DEFAULT);var e=b.call(this,"EndScreen")||this;return e.value=a.Utils.extend(c.DEFAULT,d),(a.Context.isAmp()||a.Context.isFacebookIA())&&(e.value.display=!0,e.value.autoClose=!1),e.value.autoClose===!1&&(e.value.countdown=0),e.checkValue(),e}return __extends(c,b),c.prototype.checkValue=function(){a.Utils.containsKeys(c.VALUES,this.value)||(this.value=c.DEFAULT)},c.prototype.isEnabled=function(){return this.value.display},c.prototype.getCountdown=function(){return this.value.countdown},c.prototype.getCallButton=function(){return this.value.callButton},c.prototype.getReplayButton=function(){return this.value.replayButton},c.prototype.getAutoClose=function(){return this.value.autoClose},c.VALUES={DISPLAY:"display",CALLBUTTON:"callButton",REPLAYBUTTON:"replayButton",AUTOCLOSE:"autoClose",COUNTDOWN:"countdown",TYPE:"type"},c.DEFAULT={display:!0,callButton:{text:"Learn More",type:"learnMore"},replayButton:{text:"Replay"},autoClose:!1,countdown:0,type:"simple"},c}(b.AbstractOption);b.EndScreen=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(d){void 0===d&&(d=c.DEFAULT);var e=b.call(this,"Label")||this;return e.value=a.Utils.extend(c.DEFAULT,d),a.Context.isFacebookIA()&&(e.value.display=!1),e.checkValue(),e}return __extends(c,b),c.getTranslation=function(){var b=a.Context.getLanguage(),c=new a.L10n(b).translate("label");return c||(c=new a.L10n(b.substr(0,2)).translate("label")),c||(c=new a.L10n("en").translate("label")),c},c.prototype.checkValue=function(){a.Utils.containsKeys(c.VALUES,this.value)||(this.value=c.DEFAULT)},c.prototype.getHTML=function(){return this.value.html},c.prototype.getText=function(){return this.value.text},c.prototype.isEnabled=function(){return this.value.display},c.VALUES={DISPLAY:"display",TEXT:"text",HTML:"html"},c.TEXT=c.getTranslation(),c.DEFAULT={display:!0,text:c.TEXT,html:c.TEXT},c}(b.AbstractOption);b.Label=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(a){void 0===a&&(a=c.DEFAULT);var d=b.call(this,"ProgressBar")||this;return d.value=a,d.checkValue(),d}return __extends(c,b),c.prototype.checkValue=function(){a.Utils.isBoolean(this.value)||(this.value=c.DEFAULT)},c.prototype.isEnabled=function(){return this.value},c.DEFAULT=!0,c}(b.AbstractOption);b.ProgressBar=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(a){var c=b.call(this,"SmartPosition")||this;return c.value=a,c.checkValue(),c}return __extends(c,b),c.prototype.checkValue=function(){a.Utils.containsKeys(c.VALUES,this.value)||(this.value=c.DEFAULT)},c.prototype.closeButtonEnabled=function(){return this.value.closeButtonDisplay},c.VALUES={closeButtonDisplay:"closeButtonDisplay"},c.DEFAULT={closeButtonDisplay:!1},c}(b.AbstractOption);b.Slider=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(d){void 0===d&&(d=c.DEFAULT);var e=b.call(this,"SoundButton")||this;return e.value=a.Utils.extend(c.DEFAULT,d),(a.Context.isMobile()||a.Context.isTablet()||a.Context.isSafari11Plus())&&(e.value=c.DEFAULT),e.checkValue(),e}return __extends(c,b),c.prototype.checkValue=function(){a.Utils.containsKeys(c.VALUES,this.value)||(this.value=c.DEFAULT)},c.prototype.isEnabled=function(){return this.value.display},c.prototype.getCountdown=function(){return this.value.countdown},c.prototype.getType=function(){return this.value.type},c.VALUES={DISPLAY:"display",COUNTDOWN:"countdown",TYPE:"type"},c.DEFAULT={display:!0,countdown:0,type:"mute"},c}(b.AbstractOption);b.SoundButton=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(a){void 0===a&&(a=c.DEFAULT);var d=b.call(this,"Timer")||this;return d.value=a,d.checkValue(),d}return __extends(c,b),c.prototype.checkValue=function(){a.Utils.isBoolean(this.value)||(this.value=c.DEFAULT)},c.prototype.isEnabled=function(){return this.value},c.DEFAULT=!1,c}(b.AbstractOption);b.Timer=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(d){void 0===d&&(d=c.DEFAULT);var e=b.call(this,"End")||this;return e.value=a.Context.isAmp()?c.VALUES.ENDSCREEN:d,e.checkValue(),e}return __extends(c,b),c.prototype.checkValue=function(){a.Utils.isString(this.value)&&c.VALUES[this.value.toUpperCase()]||(this.value=c.DEFAULT)},c.prototype.isCollapse=function(){return this.value===c.VALUES.COLLAPSE},c.prototype.isEndScreen=function(){return this.value===c.VALUES.ENDSCREEN},c.VALUES={COLLAPSE:"collapse",ENDSCREEN:"endscreen"},c.DEFAULT=c.VALUES.ENDSCREEN,c}(b.AbstractOption);b.End=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(d,e){void 0===d&&(d=c.DEFAULT),void 0===e&&(e=null);var f=b.call(this,"Launch")||this;return a.Constant.FORCE_EXPAND_ANIMATION_LIST.test(String(e))?f.value=c.VALUES.THRESHOLD:a.Context.isAmp()||a.Context.isFacebookIA()?f.value=c.VALUES.AUTO:f.value=d,f.checkValue(),f}return __extends(c,b),c.prototype.checkValue=function(){a.Utils.isString(this.value)&&c.VALUES[this.value.toUpperCase()]||(this.value=c.DEFAULT)},c.prototype.isAuto=function(){return this.value===c.VALUES.AUTO},c.prototype.isThreshold=function(){return this.value===c.VALUES.THRESHOLD},c.VALUES={AUTO:"auto",THRESHOLD:"threshold"},c.DEFAULT=c.VALUES.AUTO,c}(b.AbstractOption);b.Launch=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(d){void 0===d&&(d=c.DEFAULT);var e=b.call(this,"PlayerClick")||this;return e.value=d,a.Context.isDesktop()&&(e.value=c.VALUES.CLICK),e.checkValue(),e}return __extends(c,b),c.prototype.checkValue=function(){a.Utils.isString(this.value)&&c.VALUES[this.value.toUpperCase()]||(this.value=c.DEFAULT)},c.prototype.isClick=function(){return this.value===c.VALUES.CLICK},c.prototype.isFullscreen=function(){return this.value===c.VALUES.FULLSCREEN},c.VALUES={CLICK:"click",FULLSCREEN:"fullscreen"},c.DEFAULT=a.Context.isDesktop()?c.VALUES.CLICK:c.VALUES.FULLSCREEN,c}(b.AbstractOption);b.PlayerClick=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(d,e,f,g){void 0===g&&(g=null);var h=b.call(this,"SmartPosition")||this;return h.insertionIdsForcedSmart=[168832,168841,168912,168931,168932,168994,168997,170214,170543,173090,174727,179060,165570,165569,165400,158386,158385,158384,158383,158382,158380,158379,158378,158377,158376,158375,158374,158373,158372,158371,158370,162268,158369,158368,158367,158366,158365,179756,180465,161147,172785,168949,169797,171213,173593,173635,176890,176895,176940,178464,179771,180368,178998,180918,180955,181009,181012,180763,181796,181798,181922,181926,181929,181656,183993,183994,184064,185424,185425,185443,185441,185615,186228,187087,187092,187131,190483,191902,191469,193076,195606,200392,200655,200697,201138,201150,197702,201588,201589,201603,205333,205317,199909,199900,198587,202307,201978,207094,207600,208142,209290,209292,211411,211418,211421,211422,211423,211424,211426,211614,211957,212504,214491,214493,213222,213221,212083,212081,215331,215324,216443,216887,216889,216992,216993,217010,217121,217853,217857,217800],h.connectionIdsForcedSmart=[39264,39265,39266,39140,43341,43486,43634,43638,43639,20709,25605,34011,34766,4783,43364,43357,43361,44094,44289,44292,44295,44298,44301,44305,43532,43531,43530,45061,45062,45067,45066,45065,45064,45168,45612,45613,45614,45615,45617,45619,45620,45621,45623,45627,45632,45847,45991,45994,46002,46141,46142,46227,46228,46235,46407,46408,46409,46407,46529,46657,45184,45185,46517,46776,46777,46778,46779,47090,47092,47103,47259,47257,47260,47287,47292,41437,48704,49078,49076,49895,50201,50219,50220,50222,50226,50229,50230,51426,47290,53394,49069,53406,45630,53643,53644,53650,48602,55457,55458,55459,55462,55466,55467,55459,55462,55466,55467,55468,55469,55470,55477,47290,55696,55698,58441,58844,60320,60351,34861,28299,36966,60645,60669,60670,61083,61239,61385,61387,61389,61391,61393,63278,63277,63476,63540,63541,63559,63560,63562,63563,63582,63581,63610,63611,63721,63722,63738,63739,63796,63828,63833,63906,63907,63934,14386,64127,64126,64191,51390,64639,48410,41380,41379,41378,36728,28342,41240,30242,33040,65043,65048,65060,65061,65062,34438,65292,65295,65980,65979,64732,64731,41111,65434,48203,20971,46812,66276,66516,66541,66655,66654,66653,66800,66801,66802,67084,68423,68666,68665,68663,68659,68661,68662,68675,68676,68677,68678,68679,68680,69779,69763,69846,46107,38768,46106,50176],h.insertionId=e,h.connectionId=f,h.value=a.Utils.extend(c.DEFAULT,d),h.formatName=g,(a.Semver.isLowerOrEqual(a.Context.getIosVersion(),c.MIN_IOS_VERSION)||a.Context.isAmp()||a.Context.isFacebookIA()||a.Context.isIABSafeFrame())&&(h.value.top=!1,h.value.corner=!1),h.checkValue(),h}return __extends(c,b),c.prototype.checkValue=function(){a.Utils.containsKeys(c.VALUES,this.value)||(this.value=c.DEFAULT)},c.prototype.isEnabled=function(){return!!(window.DO_BYPASS_DO_FORCE_SMART&&this.formatName&&this.formatName.isInRead())||(a.ArrayHelper.includes(this.insertionIdsForcedSmart,this.insertionId)||a.ArrayHelper.includes(this.connectionIdsForcedSmart,this.connectionId))&&(this.value.corner||this.value.top)},c.prototype.isCorner=function(){return this.value.corner},c.prototype.getValue=function(){return this.value},c.prototype.setValue=function(a){this.value=a,this.checkValue()},c.MIN_IOS_VERSION="7",c.VALUES={top:"top",corner:"corner"},c.DEFAULT={top:!1,corner:!1},c}(b.AbstractOption);b.SmartPosition=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(a,c){void 0===c&&(c=null);var d=b.call(this,"Sticky")||this;return d.value=a,d.formatName=c,d.checkValue(),d}return __extends(c,b),c.isCompatibleWithContext=function(){var b=function(){return a.Semver.isGreaterThan(a.Context.getIosVersion(),c.MIN_IOS_VERSION)};return(a.Context.isMobile()||a.Context.isTablet())&&(!a.Context.isIos()||b())&&!a.Context.isAmp()&&!a.Context.isFacebookIA()&&!a.Context.isIABSafeFrame()},c.prototype.getValue=function(){return this.value},c.prototype.setValue=function(a){this.value=a,this.checkValue()},c.prototype.isEnabled=function(){return this.value===!0},c.prototype.checkValue=function(){this.value=!!(this.formatName&&this.formatName.isInBoard()&&c.isCompatibleWithContext()&&this.value!==!1)},c.MIN_IOS_VERSION="7",c}(b.AbstractOption);b.Sticky=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(a){void 0===a&&(a=c.DEFAULT);var d=b.call(this,"SoundMute")||this;return d.value=a,d.checkValue(),d}return __extends(c,b),c.prototype.checkValue=function(){a.Utils.isString(this.value)&&c.VALUES[this.value.toUpperCase()]||(this.value=c.DEFAULT)},c.prototype.isNo=function(){return this.value===c.VALUES.NO},c.prototype.isThreshold=function(){return this.value===c.VALUES.THRESHOLD},c.VALUES={NO:"no",THRESHOLD:"threshold"},c.DEFAULT=c.VALUES.THRESHOLD,c}(b.AbstractOption);b.SoundMute=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(d){void 0===d&&(d=c.DEFAULT);var e=b.call(this,"SoundOver")||this;return e.value=d,(a.Context.isMobile()||a.Context.isTablet()||a.Context.isSafari11Plus())&&(e.value=c.VALUES.OFF),e.checkValue(),e}return __extends(c,b),c.prototype.checkValue=function(){a.Utils.isString(this.value)&&c.VALUES[this.value.toUpperCase()]||(this.value=c.DEFAULT)},c.prototype.isOff=function(){return this.value===c.VALUES.OFF},c.prototype.isOver=function(){return this.value===c.VALUES.OVER},c.prototype.isOnceOver=function(){return this.value===c.VALUES.ONCEOVER},c.VALUES={OFF:"off",OVER:"over",ONCEOVER:"onceOver"},c.DEFAULT=c.VALUES.OVER,c}(b.AbstractOption);b.SoundOver=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(d){void 0===d&&(d=c.DEFAULT);var e=b.call(this,"SoundStart")||this;return e.value=a.Utils.extend(c.DEFAULT,d),!a.Context.isMobile()&&!a.Context.isTablet()||a.Context.isSDK()||(e.value.type=c.VALUES_TYPE.MUTE),e.checkValue(),e}return __extends(c,b),c.prototype.checkValue=function(){a.Utils.containsKeys(c.VALUES,this.value)||(this.value=c.DEFAULT)},c.prototype.isMute=function(){return this.value.type===c.VALUES_TYPE.MUTE},c.prototype.isUnmute=function(){return this.value.type===c.VALUES_TYPE.UNMUTE},c.prototype.isCountdown=function(){return this.value.type===c.VALUES_TYPE.COUNTDOWN},c.prototype.getCountdown=function(){return this.value.countdown},c.prototype.getType=function(){return this.value.type},c.VALUES={TYPE:"type",COUNTDOWN:"countdown"},c.VALUES_TYPE={MUTE:"mute",UNMUTE:"unmute",COUNTDOWN:"countdown"},c.DEFAULT={type:"mute",countdown:0},c}(b.AbstractOption);b.SoundStart=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(a){void 0===a&&(a=c.VALUES.THRESHOLD);var d=b.call(this,"VideoPause")||this;return d.value=a,d.checkValue(),d}return __extends(c,b),c.prototype.checkValue=function(){a.Utils.isString(this.value)&&c.VALUES[this.value.toUpperCase()]||(this.value=c.DEFAULT)},c.prototype.isNo=function(){return this.value===c.VALUES.NO},c.prototype.isThreshold=function(){return this.value===c.VALUES.THRESHOLD},c.prototype.getValue=function(){return this.value},c.prototype.setToNo=function(){return this.value=c.VALUES.NO},c.VALUES={NO:"no",THRESHOLD:"threshold"},c.DEFAULT=c.VALUES.THRESHOLD,c}(b.AbstractOption);b.VideoPause=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(d,e,f){void 0===d&&(d=c.DEFAULT),void 0===e&&(e=null),void 0===f&&(f=null);var g=b.call(this,"VideoStart")||this;return g.value=d,e&&e.isInBoard()&&a.Context.isTablet()&&(g.value=c.VALUES.CLICK),g.checkValue(),g}return __extends(c,b),c.prototype.checkValue=function(){a.Utils.isString(this.value)&&c.VALUES[this.value.toUpperCase()]||(this.value=c.DEFAULT)},c.prototype.isAuto=function(){return this.value===c.VALUES.AUTO},c.prototype.isThreshold=function(){return this.value===c.VALUES.THRESHOLD},c.prototype.isClick=function(){return this.value===c.VALUES.CLICK},c.prototype.getValue=function(){return this.value},c.VALUES={AUTO:"auto",THRESHOLD:"threshold",CLICK:"click"},c.DEFAULT=c.VALUES.THRESHOLD,c}(b.AbstractOption);b.VideoStart=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b=function(){function a(){}return a.getComponentsConfig=function(b,c,d,e){void 0===d&&(d=null);var f=e&&e.display,g=a.reconcileCloseButtonConfig(b,d,c),h=a.reconcileEndScreenCloseButtonConfig(g,b,c);return{clicktoplay:{disable:!b.videoStart.isClick()},closebutton:{disable:g.disable,countdown:g.countdown,listenSkippableState:g.listenSkippableState},soundbutton:{disable:!!f||!b.soundButton.isEnabled(),startOffset:b.soundButton.getCountdown(),type:b.soundButton.getType()},progressbar:{disable:!!f||!b.progressBar.isEnabled()},clickbutton:{disable:!!e||!b.callButton.isEnabled(),startOffset:b.callButton.getCountdown(),text:b.callButton.getText()},label:{disable:!0,html:b.label.getHTML()},credits:{formatName:b.formatName.get(),disable:!0,text:b.credits.getText(),url:b.credits.getLink()},endscreen:{disable:!!f||(b.end.isCollapse()||b.end.isEndScreen()&&!b.endScreen.isEnabled()),countdown:b.endScreen.getCountdown(),callButton:b.endScreen.getCallButton(),closeButton:{disable:h.disable,listenSkippableState:h.listenSkippableState},replayButton:b.endScreen.getReplayButton(),autoClose:b.endScreen.getAutoClose()},fullscreenbutton:{disable:!!f||!b.playerClick.isFullscreen(),preventDefault:!0},brandlogo:{disable:!b.brandLogo.isEnabled(),url:b.brandLogo.getUrl()},startscreen:{disable:!b.adType.isVideo()}}},a.reconcileEndScreenCloseButtonConfig=function(a,b,c){var d={disable:a.disable,listenSkippableState:a.listenSkippableState};return c.sliderEnabled&&(d.disable=!1,d.listenSkippableState=!1),d},a.reconcileCloseButtonConfig=function(a,b,c){var d={disable:!a.closeButton.isEnabled(),countdown:a.closeButton.getCountdown(),listenSkippableState:!1};return a.closeButton.hasToGetValueFromVast()&&(d.disable=!1,b&&b.skipDelay?d.countdown=b.skipDelay:d.listenSkippableState=!0),c.sliderEnabled&&(d.disable=!a.slider.closeButtonEnabled(),d.listenSkippableState=!1),d},a}();a.RASHelper=b}(b=a.helper||(a.helper={}))}(teads||(teads={}));var teads;!function(a){var b=function(){function b(b){if(!b.settings)throw new a.FormatException(a.FormatException.INCOMPLETE_OBJECT);var c={type:b.type,content:b.content};this.vast=new a.option.Vast(c,b.settings.values.placementId),b.settings.values=b.settings.values||{placementFormat:null,pageId:null,placementId:null,threshold:null},b.settings.components=b.settings.components||{},b.settings.behaviors=b.settings.behaviors||{},this.adSourceId=b.ad_source_id,this.connectionId=b.connection_id,this.insertionId=b.insertion_id,this.dspCampaignId=b.dsp_campaign_id,this.dspCreativeId=b.dsp_creative_id,this.scenarioId=b.scenario_id,this.formatName=new a.option.Format(b.settings.values.placementFormat),this.pageId=b.settings.values.pageId,this.placementId=b.settings.values.placementId,this.threshold=new a.option.Threshold(b.settings.values.threshold),this.volume=new a.option.Volume(b.settings.values.volume),this.animations=new a.option.Animations(b.settings.values.animations,this.formatName,this.placementId),this.adType=new a.option.AdType(b.settings.values.adType),this.vtpEvent=new a.option.VtpEvent(b.settings.values.vtpEvent),this.smartPosition=new a.option.SmartPosition(b.settings.behaviors.smartPosition,this.insertionId,this.connectionId,this.formatName),this.sticky=new a.option.Sticky(b.settings.behaviors.sticky,this.formatName),this.closeButton=new a.option.CloseButton(b.settings.components.closeButton,this.smartPosition),this.soundButton=new a.option.SoundButton(b.settings.components.soundButton),this.callButton=new a.option.CallButton(b.settings.components.callButton),this.timer=new a.option.Timer(b.settings.components.timer),this.progressBar=new a.option.ProgressBar(b.settings.components.progressBar),this.label=new a.option.Label(b.settings.components.label),this.credits=new a.option.Credits(b.settings.components.credits,this.smartPosition,this.formatName),this.endScreen=new a.option.EndScreen(b.settings.components.endScreen),this.brandLogo=new a.option.BrandLogo(b.settings.components.brandLogo,b.settings.values.brandLogoUrl),this.slider=new a.option.Slider(b.settings.components.slider),this.launch=new a.option.Launch(b.settings.behaviors.launch,this.placementId),this.videoStart=new a.option.VideoStart(b.settings.behaviors.videoStart,this.formatName,this.smartPosition),this.soundStart=new a.option.SoundStart(b.settings.behaviors.soundStart),this.videoPause=new a.option.VideoPause(b.settings.behaviors.videoPause),this.soundMute=new a.option.SoundMute(b.settings.behaviors.soundMute),this.soundOver=new a.option.SoundOver(b.settings.behaviors.soundOver),this.playerClick=new a.option.PlayerClick(b.settings.behaviors.playerClick),this.end=new a.option.End(b.settings.behaviors.end),this.callbacks=new a.option.Callbacks(b.callbacks,this.volume),this.allowedPlayer=new a.option.AllowedPlayer(b.settings.values.allowedPlayer,this.formatName,this.smartPosition,this.placementId)}return b}();a.FormatConfig=b}(teads||(teads={}));var teads;!function(a){var b=function(){function a(){}return a.CREDITSCSS="\ndiv.teads-inread div.teads-ui-components-credits,\ndiv.teads-inboard div.teads-ui-components-credits,\ndiv.teads-expand div.teads-ui-components-credits {\n    font-family: 'Helvetica', Arial, sans-serif !important;\n    font-size: 11.5px !important;\n    color: #aaa !important;\n    text-align: right !important;\n    padding: 1px 0 !important;\n    height: 26px !important;\n    line-height: 26px !important;\n    padding-right: 4px !important;\n    letter-spacing: 0.3px !important;\n}\n\ndiv.teads-inread div.teads-ui-components-credits a span,\ndiv.teads-inboard div.teads-ui-components-credits a span,\ndiv.teads-expand div.teads-ui-components-credits a span {\n    display: inline !important;\n}\n\ndiv.teads-inread div.teads-ui-components-credits a span,\ndiv.teads-inboard div.teads-ui-components-credits a span,\ndiv.teads-expand div.teads-ui-components-credits a span,\ndiv.teads-inread div.teads-ui-components-credits a,\ndiv.teads-inboard div.teads-ui-components-credits a,\ndiv.teads-expand div.teads-ui-components-credits a {\n    font-family: 'Helvetica', Arial, sans-serif !important;\n    font-size: 11.5px !important;\n    box-shadow: none !important;\n    letter-spacing: 0.3px !important;\n}\n\ndiv.teads-inread.sm-screen div.teads-ui-components-credits a span,\ndiv.teads-inboard.sm-screen div.teads-ui-components-credits a span,\ndiv.teads-expand.sm-screen div.teads-ui-components-credits a span,\ndiv.teads-inread.sm-screen div.teads-ui-components-credits a,\ndiv.teads-inboard.sm-screen div.teads-ui-components-credits a,\ndiv.teads-expand.sm-screen div.teads-ui-components-credits a,\ndiv.teads-inread.xs-screen div.teads-ui-components-credits a span,\ndiv.teads-inboard.xs-screen div.teads-ui-components-credits a span,\ndiv.teads-expand.xs-screen div.teads-ui-components-credits a span,\ndiv.teads-inread.xs-screen div.teads-ui-components-credits a,\ndiv.teads-inboard.xs-screen div.teads-ui-components-credits a,\ndiv.teads-expand.xs-screen div.teads-ui-components-credits a {\n    font-family: 'Helvetica', Arial, sans-serif !important;\n    font-size: 9px !important;\n    box-shadow: none !important;\n    letter-spacing: 0.3px !important;\n}\n\ndiv.teads-inread.sm-screen div.teads-ui-components-credits,\ndiv.teads-inboard.xs-screen div.teads-ui-components-credits {\n    font-size: 9px !important;\n    letter-spacing: 0.3px !important;\n}\n\ndiv.teads-inread .teads-ui-components-credits a,\ndiv.teads-inboard .teads-ui-components-credits a,\ndiv.teads-expand .teads-ui-components-credits a {\n    color: #aaa !important;\n    text-decoration: none !important;\n    font-weight: 300 !important;\n    border: none !important;\n    letter-spacing: 0.3px !important;\n    /*\n     * From @jean-pierre.colomb comment on https://jira.teads.net/browse/TT-4076\n     * The gqjapan.jp website overrides <a> properties to add 2 orange squares\n     * which affects the credits link\n     */\n    background: none !important;\n    padding: 0 !important;\n}\n\ndiv.teads-inread.sm-screen .teads-ui-components-credits a,\ndiv.teads-inboard.sm-screen .teads-ui-components-credits a,\ndiv.teads-expand.sm-screen .teads-ui-components-credits a,\ndiv.teads-inread.xs-screen .teads-ui-components-credits a,\ndiv.teads-inboard.xs-screen .teads-ui-components-credits a,\ndiv.teads-expand.xs-screen .teads-ui-components-credits a{\n    font-size: 9px !important;\n    letter-spacing: 0.3px !important;\n}\n\ndiv.teads-inread div.teads-ui-components-credits span.teads-ui-components-credits-colored,\ndiv.teads-inboard div.teads-ui-components-credits span.teads-ui-components-credits-colored,\ndiv.teads-expand div.teads-ui-components-credits span.teads-ui-components-credits-colored {\n    color: #79BBE9 !important;\n}\n\ndiv.teads-inread div.teads-ui-components-credits span::before,\ndiv.teads-inboard div.teads-ui-components-credits span::before,\ndiv.teads-impact div.teads-ui-components-credits span::before,\ndiv.teads-inread div.teads-ui-components-credits span::after,\ndiv.teads-inboard div.teads-ui-components-credits span::after,\ndiv.teads-impact div.teads-ui-components-credits span::after {\n  display: none !important;\n}\n\ndiv.teads-inread div.teads-ui-components-credits a::before,\ndiv.teads-inboard div.teads-ui-components-credits a::before,\ndiv.teads-impact div.teads-ui-components-credits a::before,\ndiv.teads-inread div.teads-ui-components-credits a::after,\ndiv.teads-inboard div.teads-ui-components-credits a::after,\ndiv.teads-impact div.teads-ui-components-credits a::after {\n  display: none !important;\n}\n",
a.LABELCSS="\ndiv.teads-inread div.teads-ui-components-label,\ndiv.teads-inboard div.teads-ui-components-label,\ndiv.teads-expand div.teads-ui-components-label {\n  font-family: 'Helvetica', Arial, sans-serif !important;\n  font-size: 11.5px !important;\n  color: #aaa;\n  text-align: center !important;\n  /*padding: 3px 0;*/\n  text-transform: uppercase !important;\n  height: 21px !important;\n  line-height: 21px !important;\n  letter-spacing: 0.3px !important;\n  font-weight: 300 !important;\n}\n\ndiv.teads-inread div.teads-ui-components-label::before,\ndiv.teads-inboard div.teads-ui-components-label::before,\ndiv.teads-impact div.teads-ui-components-label::before,\ndiv.teads-inread div.teads-ui-components-label::after,\ndiv.teads-inboard div.teads-ui-components-label::after,\ndiv.teads-impact div.teads-ui-components-label::after {\n  display: none !important;\n}\n\ndiv.teads-inread.sm-screen div.teads-ui-components-label,\ndiv.teads-inread.xs-screen div.teads-ui-components-label,\ndiv.teads-inboard.sm-screen div.teads-ui-components-label,\ndiv.teads-inboard.xs-screen div.teads-ui-components-label {\n  font-size: 10px !important;\n}\n",a.EXPANDCSS="/** This will include vpaid-ui assets */\n\ndiv.teads-inread div.teads-ui-components-label,\ndiv.teads-inboard div.teads-ui-components-label,\ndiv.teads-expand div.teads-ui-components-label {\n  font-family: 'Helvetica', Arial, sans-serif !important;\n  font-size: 11.5px !important;\n  color: #aaa;\n  text-align: center !important;\n  /*padding: 3px 0;*/\n  text-transform: uppercase !important;\n  height: 21px !important;\n  line-height: 21px !important;\n  letter-spacing: 0.3px !important;\n  font-weight: 300 !important;\n}\n\ndiv.teads-inread div.teads-ui-components-label::before,\ndiv.teads-inboard div.teads-ui-components-label::before,\ndiv.teads-impact div.teads-ui-components-label::before,\ndiv.teads-inread div.teads-ui-components-label::after,\ndiv.teads-inboard div.teads-ui-components-label::after,\ndiv.teads-impact div.teads-ui-components-label::after {\n  display: none !important;\n}\n\ndiv.teads-inread.sm-screen div.teads-ui-components-label,\ndiv.teads-inread.xs-screen div.teads-ui-components-label,\ndiv.teads-inboard.sm-screen div.teads-ui-components-label,\ndiv.teads-inboard.xs-screen div.teads-ui-components-label {\n  font-size: 10px !important;\n}\n\n\ndiv.teads-inread div.teads-ui-components-credits,\ndiv.teads-inboard div.teads-ui-components-credits,\ndiv.teads-expand div.teads-ui-components-credits {\n    font-family: 'Helvetica', Arial, sans-serif !important;\n    font-size: 11.5px !important;\n    color: #aaa !important;\n    text-align: right !important;\n    padding: 1px 0 !important;\n    height: 26px !important;\n    line-height: 26px !important;\n    padding-right: 4px !important;\n    letter-spacing: 0.3px !important;\n}\n\ndiv.teads-inread div.teads-ui-components-credits a span,\ndiv.teads-inboard div.teads-ui-components-credits a span,\ndiv.teads-expand div.teads-ui-components-credits a span {\n    display: inline !important;\n}\n\ndiv.teads-inread div.teads-ui-components-credits a span,\ndiv.teads-inboard div.teads-ui-components-credits a span,\ndiv.teads-expand div.teads-ui-components-credits a span,\ndiv.teads-inread div.teads-ui-components-credits a,\ndiv.teads-inboard div.teads-ui-components-credits a,\ndiv.teads-expand div.teads-ui-components-credits a {\n    font-family: 'Helvetica', Arial, sans-serif !important;\n    font-size: 11.5px !important;\n    box-shadow: none !important;\n    letter-spacing: 0.3px !important;\n}\n\ndiv.teads-inread.sm-screen div.teads-ui-components-credits a span,\ndiv.teads-inboard.sm-screen div.teads-ui-components-credits a span,\ndiv.teads-expand.sm-screen div.teads-ui-components-credits a span,\ndiv.teads-inread.sm-screen div.teads-ui-components-credits a,\ndiv.teads-inboard.sm-screen div.teads-ui-components-credits a,\ndiv.teads-expand.sm-screen div.teads-ui-components-credits a,\ndiv.teads-inread.xs-screen div.teads-ui-components-credits a span,\ndiv.teads-inboard.xs-screen div.teads-ui-components-credits a span,\ndiv.teads-expand.xs-screen div.teads-ui-components-credits a span,\ndiv.teads-inread.xs-screen div.teads-ui-components-credits a,\ndiv.teads-inboard.xs-screen div.teads-ui-components-credits a,\ndiv.teads-expand.xs-screen div.teads-ui-components-credits a {\n    font-family: 'Helvetica', Arial, sans-serif !important;\n    font-size: 9px !important;\n    box-shadow: none !important;\n    letter-spacing: 0.3px !important;\n}\n\ndiv.teads-inread.sm-screen div.teads-ui-components-credits,\ndiv.teads-inboard.xs-screen div.teads-ui-components-credits {\n    font-size: 9px !important;\n    letter-spacing: 0.3px !important;\n}\n\ndiv.teads-inread .teads-ui-components-credits a,\ndiv.teads-inboard .teads-ui-components-credits a,\ndiv.teads-expand .teads-ui-components-credits a {\n    color: #aaa !important;\n    text-decoration: none !important;\n    font-weight: 300 !important;\n    border: none !important;\n    letter-spacing: 0.3px !important;\n    /*\n     * From @jean-pierre.colomb comment on https://jira.teads.net/browse/TT-4076\n     * The gqjapan.jp website overrides <a> properties to add 2 orange squares\n     * which affects the credits link\n     */\n    background: none !important;\n    padding: 0 !important;\n}\n\ndiv.teads-inread.sm-screen .teads-ui-components-credits a,\ndiv.teads-inboard.sm-screen .teads-ui-components-credits a,\ndiv.teads-expand.sm-screen .teads-ui-components-credits a,\ndiv.teads-inread.xs-screen .teads-ui-components-credits a,\ndiv.teads-inboard.xs-screen .teads-ui-components-credits a,\ndiv.teads-expand.xs-screen .teads-ui-components-credits a{\n    font-size: 9px !important;\n    letter-spacing: 0.3px !important;\n}\n\ndiv.teads-inread div.teads-ui-components-credits span.teads-ui-components-credits-colored,\ndiv.teads-inboard div.teads-ui-components-credits span.teads-ui-components-credits-colored,\ndiv.teads-expand div.teads-ui-components-credits span.teads-ui-components-credits-colored {\n    color: #79BBE9 !important;\n}\n\ndiv.teads-inread div.teads-ui-components-credits span::before,\ndiv.teads-inboard div.teads-ui-components-credits span::before,\ndiv.teads-impact div.teads-ui-components-credits span::before,\ndiv.teads-inread div.teads-ui-components-credits span::after,\ndiv.teads-inboard div.teads-ui-components-credits span::after,\ndiv.teads-impact div.teads-ui-components-credits span::after {\n  display: none !important;\n}\n\ndiv.teads-inread div.teads-ui-components-credits a::before,\ndiv.teads-inboard div.teads-ui-components-credits a::before,\ndiv.teads-impact div.teads-ui-components-credits a::before,\ndiv.teads-inread div.teads-ui-components-credits a::after,\ndiv.teads-inboard div.teads-ui-components-credits a::after,\ndiv.teads-impact div.teads-ui-components-credits a::after {\n  display: none !important;\n}\n\n\n.teads-expand {\n  position: relative;\n}\n\n.teads-expand-closebutton {\n  padding: 5px;\n  text-align:center;\n  color:white;\n  cursor:pointer;\n  position:absolute;\n  z-index: 2147483646;\n  top:5px;\n  right:5px;\n  width: 15px;\n  height: 15px;\n  padding: 0px;\n}\n\n.teads-expand-iframe {\n  width: 100%;\n  height: 100%;\n}\n\n.teads-expand-iframe iframe {\n  border: 0px;\n  width: 100%;\n  height: 100%;\n  background: #FFFFFF url({{assetsPath}}/default/img/loading.gif) no-repeat center center\n}\n\n.teads-expand-overlay {\n  position: fixed;\n  opacity: 0;\n  background: #000000;\n  border: 0;\n  top: 0;\n  left: 0;\n  z-index: 2147483646;\n  overflow: hidden;\n  width: 100%;\n  height: 100%;\n  transition-property: opacity;\n  -webkit-transition-property: opacity;\n  -moz-transition-property: opacity;\n  -o-transition-property: opacity;\n  -ms-transition-property: opacity;\n  transition-duration: {{transitionDuration}}ms;\n  -webkit-transition-duration: {{transitionDuration}}ms;\n  -moz-transition-duration: {{transitionDuration}}ms;\n  -o-transition-duration: {{transitionDuration}}ms;\n  -ms-transition-duration: {{transitionDuration}}ms;\n}\n\n.teads-expand-overlay.opened {\n  opacity: 0.6\n}\n\n.teads-expand-container.opened {\n  opacity: 1\n}\n\n.teads-expand-container {\n  opacity: 0;\n  position: fixed;\n  background: #FFFFFF;\n  border: 0;\n  left: 0px;\n  top: 0px;\n  z-index: 2147483647;\n  transition-property: opacity width height left top;\n  -webkit-transition-property: opacity width height left top;\n  -moz-transition-property: opacity width height left top;\n  -o-transition-property: opacity width height left top;\n  -ms-transition-property: opacity width height left top;\n  transition-duration: {{transitionDuration}}ms;\n  -webkit-transition-duration: {{transitionDuration}}ms;\n  -moz-transition-duration: {{transitionDuration}}ms;\n  -o-transition-duration: {{transitionDuration}}ms;\n  -ms-transition-duration: {{transitionDuration}}ms;\n}\n\nbody.noscroll {\n  overflow:hidden;\n}\n",a.EXPANDHTML='<div class="teads-expand">\n  <div class="teads-expand-label"></div>\n  <div class="teads-expand-iframe">\n    <iframe src="{{iframeurl}}"></iframe>\n  </div>\n  <div class="teads-expand-closebutton">\n    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 15 15" style="enable-background:new 0 0 15 15;" xml:space="preserve">\n      <g>\n        <path style="fill:#000000;" d="M8.883,7.5l5.83-5.83c0.382-0.382,0.382-1.001,0-1.383c-0.382-0.382-1.002-0.382-1.383,0L7.5,6.117\n          l-5.83-5.83c-0.382-0.382-1.002-0.382-1.383,0c-0.382,0.382-0.382,1.001,0,1.383l5.83,5.83l-5.83,5.83\n          c-0.382,0.382-0.382,1.001,0,1.383C0.478,14.904,0.728,15,0.978,15c0.25,0,0.501-0.096,0.692-0.287l5.83-5.83l5.83,5.83\n          C13.521,14.904,13.771,15,14.022,15c0.25,0,0.501-0.096,0.692-0.287c0.382-0.382,0.382-1.001,0-1.383L8.883,7.5z"/>\n      </g>\n    </svg>\n  </div>\n</div>\n',a.DISPLAYCSS='div.teads-display-absolute {\n  position: absolute !important;\n  overflow: hidden !important;\n  z-index: 99 !important;\n  pointer-events: none !important;\n  background-repeat: repeat-y;\n  background-attachment: fixed;\n}\n\n.teads-display-fixed {\n  position: fixed !important;\n  background-repeat: repeat-y !important;\n}\n\n.teads-display-clickzone {\n  display: block !important;\n  position: absolute !important;\n  top: 0px !important;\n  width: 100% !important;\n  height: 100% !important;\n}\n\n\n/******************************************************************************\n* Start closebutton and countdownclosebutton styles\n*****************************************************************************/\n\ndiv.teads-display-format .icon-close {\n  width: 11px !important;\n  height: 11px !important;\n  background-position: -80px 0 !important;\n  background-size: 650px 40px !important;\n  background-image: url("{{assetsPath}}/default/player-sprite.svg") !important;\n}\n\ndiv.teads-display-format .xs-screen .icon-close,\ndiv.teads-display-format .sm-screen .icon-close {\n  width: 11px !important;\n  height: 11px !important;\n  background-position: -80px 0 !important;\n}\n\n/** disable SVG animation on closebutton countdown */\ndiv.teads-display-format .teads-ui-component-closebutton svg {\n  display: none !important;\n}\n\ndiv.teads-ui-component-closebutton .components-countdown {\n  display: none !important;\n  position: absolute !important;\n  left: 2px !important;\n  bottom: 20px !important;\n}\n\n\n/** White countdown */\n\ndiv.teads-display-format .teads-ui-component-closebutton .components-countdown .countdown-circle>li {\n  color: #FFFFFF !important;\n}\n\ndiv.teads-display-format .teads-ui-component-closebutton .components-countdown .show {\n  display: block !important;\n}\n\ndiv.teads-display-format .teads-ui-component-closebutton .show {\n  display: block !important;\n}\n\ndiv.teads-display-format .teads-ui-component-closebutton .show .close-button {\n  opacity: .8 !important;\n}\n\ndiv.teads-display-format .teads-ui-component-closebutton .show:hover .close-button.show {\n  opacity: 1 !important;\n}\n\ndiv.teads-display-format .sm-screen .teads-ui-component-closebutton .closebutton,\ndiv.teads-display-format .xs-screen .teads-ui-component-closebutton .closebutton {\n  padding: 10px 10px 15px 15px !important;\n}\n',a.COUNTDOWNCSS="/**\n * Use default CSS defined in countdow.html\n */\n\n.teads-countdown {\n  width: 100%;\n  height: 100%;\n}\n\n.teads-countdown-container {\n  width: 100%;\n  height: 100%;\n}\n\n.teads-countdown-number {\n  font-family: 'Helvetica', Arial, sans-serif !important;\n  font-weight: 300;\n  font-size: 30px;\n}\n\n.teads-countdown-circle-background {\n  opacity: .8;\n  stroke-width: 1px;\n}\n\n.teads-countdown-circle {\n  position: absolute;\n  width: 100px;\n  height: 100px;\n}\n\n.teads-countdown-fsicon {\n  width: 20px;\n  height: 20px;\n  position: absolute;\n  top: 10px;\n  right: 10px;\n}\n\n.teads-countdown-background {\n  background-color: #000000;\n  opacity: .6;\n  width: 100%;\n  height: 100%;\n}\n\n.teads-countdown-clickzone {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n",a.COUNTDOWNHTML='<div class="teads-countdown">\n  <div class="teads-countdown-background"></div>\n  <div class="teads-countdown-circle" style="width:100px;height:100px">\n    <svg viewbox="0 0 100 100" shape-rendering="optimizeQuality">\n      <path class="teads-countdown-circle-background" fill="none" stroke-linecap="round" stroke-width="2" stroke="#CCC" stroke-dasharray="250" d="M50 10 a 40 40 0 0 1 0 80 a 40 40 0 0 1 0 -80">\n      </path>\n      <path class="teads-countdown-circle-main" fill="none" stroke-linecap="round" stroke-width="2" stroke="#fff" stroke-dasharray="250" d="M50 10 a 40 40 0 0 1 0 80 a 40 40 0 0 1 0 -80"></path>\n      <text class="teads-countdown-number" x="50" y="53" text-anchor="middle" dy="7" font-size="20" fill="#FFFFFF">3</text>\n    </svg>\n  </div>\n  <div class="teads-countdown-fsicon">\n    <svg width="15" height="15" xmlns="http://www.w3.org/2000/svg">\n       <path fill="#FFFFFF" d="m1.09374,7.62501c-0.32761,0 -0.59374,0.26613 -0.59374,0.59374l0,5.93753c0,0.00114 0,0.00114 0,0.00231c0,0.07712 0.01536,0.15308 0.04523,0.22438c0.02842,0.07016 0.07103,0.13279 0.12352,0.18614c0.00231,0.0029 0.00231,0.00523 0.00465,0.00754c0.00117,0.00117 0.00348,0.00117 0.00465,0.00348c0.05363,0.05218 0.1177,0.09627 0.18787,0.12466c0.07364,0.03014 0.15077,0.04523 0.22786,0.04523l5.93753,0c0.32761,0 0.59374,-0.26613 0.59374,-0.59374c0,-0.32761 -0.26613,-0.59377 -0.59374,-0.59377l-4.5042,0l11.03542,-11.03542l0,4.50418c0,0.32761 0.26613,0.59374 0.59377,0.59374c0.32761,0 0.59374,-0.26613 0.59374,-0.59374l0,-5.93753l0,0c0,-0.07712 -0.01508,-0.15425 -0.0464,-0.22672c-0.06028,-0.14495 -0.17567,-0.26151 -0.32065,-0.32065c-0.07248,-0.031 -0.14957,-0.04637 -0.22669,-0.04637l-5.93753,0c-0.32761,0 -0.59374,0.26613 -0.59374,0.59374c0,0.32761 0.26613,0.59377 0.59374,0.59377l4.50418,0l-11.03542,11.03542l0,-4.50418c0,-0.32761 -0.26616,-0.59374 -0.59377,-0.59374z"/>\n    </svg>\n  </div>\n</div>\n',a}();a.Template=b}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function b(a,b){this.className=a,this.css=b}return b.prototype.initElement=function(){this.element=document.createElement("div"),this.element.className=this.className,this.element.innerHTML=this.getInnerHtml()},b.prototype.getElement=function(){return this.element},b.prototype.getHTML=function(){var a=this.getInnerHtml();if(a)return'<div class="'+this.className+'">'+a+"</div>"},b.prototype.getCSS=function(){return a.ui.TemplateHelper.replacePlaceholders(this.css,{assetsPath:a.config.assetsUrl})},b.prototype.getInnerHtml=function(){return this.isEnabled()?this.innerHTML:""},b.prototype.hide=function(){this.element&&(this.element.style.display="none")},b.prototype.show=function(){this.element&&(this.element.style.display="block")},b}();b.AbstractComponent=c}(b=a.component||(a.component={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(c){var d=b.call(this,"teads-ui-components-label",a.Template.LABELCSS)||this;return d.label=c,d.innerHTML=d.label.getText(),d.initElement(),d}return __extends(c,b),c.prototype.isEnabled=function(){return this.label.isEnabled()},c}(b.AbstractComponent);b.Label=c}(b=a.component||(a.component={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(c){var d=b.call(this,"teads-ui-components-credits",a.Template.CREDITSCSS)||this;d.config=c;var e=/\[([^\]]*)\]/g,f=d.config.getText().replace(e,'<span class="teads-ui-components-credits-colored">$1</span>'),g=d.config.getLink()||"http://teads.tv/en";return d.innerHTML='<a href="'+g+'" rel="nofollow" target="_blank">'+f+"</a>",d.initElement(),d}return __extends(c,b),c.prototype.isEnabled=function(){return this.config.isEnabled()},c}(b.AbstractComponent);b.Credits=c}(b=a.component||(a.component={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c,d=[{name:"DoubleVerify",domain:/cdn\.doubleverify\.com/,appendRule:function(a,b){a.parentElement.appendChild(b)}},{name:"ComScore",domain:/sb\.voicefive\.com/,appendRule:function(a,b){a.insertBefore(b,a.firstChild)}},{name:"IAS",domain:/pixel\.adsafeprotected\.com/,appendRule:function(a,b){a.insertBefore(b,a.firstChild)}}],e=function(b){return a.ArrayHelper.find(d,function(a){return a.name===b})},f=function(b){return a.ArrayHelper.find(d,function(a){return a.domain.test(b)})},g={analyzeViewability:!0},h={44476:{threshold:0,analyzeViewability:!0},44477:{threshold:0,analyzeViewability:!0},44481:{threshold:0,analyzeViewability:!0},65201:{threshold:0,analyzeViewability:!0},65204:{threshold:0,analyzeViewability:!0},65207:{threshold:0,analyzeViewability:!0},47237:{threshold:50,analyzeViewability:!0},47236:{threshold:50,analyzeViewability:!0},47234:{threshold:50,analyzeViewability:!0},64968:{threshold:50,analyzeViewability:!0},64969:{threshold:50,analyzeViewability:!0},64974:{threshold:50,analyzeViewability:!0},53517:{threshold:1,analyzeViewability:!0},53518:{threshold:1,analyzeViewability:!0},53519:{threshold:1,analyzeViewability:!0},65051:{threshold:1,analyzeViewability:!0},65052:{threshold:1,analyzeViewability:!0},65054:{threshold:1,analyzeViewability:!0},61117:{threshold:"page-top",analyzeViewability:!0}},i=function(a){return h[a]||g},j=function(){if("undefined"!=typeof c)return c;if("undefined"==typeof DOMParser||"function"!=typeof DOMParser)a.formatSumologic.sendError("domparser-not-found"),c=!1;else{var b=new DOMParser;try{var d=b.parseFromString("<div>Hello</div>","text/html");"DIV"===d.body.firstElementChild.nodeName&&"Hello"===d.body.firstElementChild.innerHTML?(a.formatSumologic.sendInfo("domparser-html-compat"),c=!0):(a.formatSumologic.sendError("domparser-html-fail"),c=!1)}catch(b){a.formatSumologic.sendError("domparser-no-html-compat"),c=!1}}return c},k=function(a,b){var c=b.onEnterElement,d=c(a);if(d!==!0)for(var e=a.firstElementChild;e;e=e.nextElementSibling)k(e,{onEnterElement:c})},l=function(a,b){var c=[];return k(a,{onEnterElement:function(a){if(b(a))return c.push(a),a.parentElement&&a.parentElement.removeChild(a),!0}}),c},m=function(a,b){var c=[];return k(a,{onEnterElement:function(a){if(b(a))return c.push(a),!0}}),c},n=function(b){var c=b.getAttribute("src");return!("SCRIPT"!==b.nodeName||!c||!a.ArrayHelper.some(d,function(a){return a.domain.test(c)}))},o=function(a){for(var b=document.createElement("script"),c=0;c<a.attributes.length;c++){var d=a.attributes[c],e=d.name,f=d.value;b.setAttribute(e,f)}return b},p=function(b){var c=new DOMParser,d=t(c)(b),e=a.ArrayHelper.map(l(d,n),function(a){var b=a.getAttribute("src"),c=f(b);return{provider:c.name,source:b,script:a}});return{creative:d.innerHTML,viewabilityTags:e}},q=function(b){var c=new DOMParser,d=t(c)(b);a.ArrayHelper.forEach(m(d,n),function(a){(new Image).src=a.getAttribute("src")})},r=function(b,c){var e=new DOMParser,g=t(e)(c),h=a.ArrayHelper.map(m(g,n),function(a){return f(a.getAttribute("src")).name});a.formatSumologic.sendInfo(b+":viewabilityAnalysis:{"+a.ArrayHelper.map(d,function(b){return b.name+":"+a.ArrayHelper.filter(h,function(a){return a===b.name}).length}).join(",")+"}")},s=function(a){return"<div>"+a+"</div>"},t=function(a){return function(b){return a.parseFromString(s(b),"text/html").body.firstElementChild}},u=function(){function b(b,c,d,e){this.insertionId=b,this.connectionId=c,this.playerContainer=d,this.win=e,this.logger=new a.Logger("ViewabilityTags"),this.thresholdReached=!1,this.thresholdReachedCallbacks=[],this.connectionConfig=i(this.connectionId),j(),"page-top"===this.connectionConfig.threshold&&this.resolveThresholdReach()}return b.prototype.appendViewabilityTags=function(b){var c=this;a.ArrayHelper.forEach(b,function(a){return e(a.provider).appendRule(c.playerContainer,o(a.script))})},b.prototype.getCreativeTag=function(a){var b=this;if(j()&&(this.connectionConfig.analyzeViewability&&r(this.connectionId,a),this.connectionConfig.preloadViewability&&q(a),this.connectionConfig.extractViewability)){var c=p(a),d=c.creative,e=c.viewabilityTags;return this.onceThresholdReached(function(){return b.appendViewabilityTags(e)}),d}return a},b.prototype.onceThresholdReached=function(a){this.thresholdReached?a():this.thresholdReachedCallbacks.push(a)},b.prototype.onScroll=function(){if(!this.thresholdReached&&"number"==typeof this.connectionConfig.threshold){var b=a.HTMLHelper.getPercentageInView(this.playerContainer,this.win,a.Dom.getSize(this.playerContainer).height,!0);this.connectionConfig.threshold/100<=b&&this.resolveThresholdReach()}},b.prototype.resolveThresholdReach=function(){a.formatSumologic.sendInfo("viewability:resolveThresholdReach"),this.thresholdReached!==!0&&(this.thresholdReached=!0,a.ArrayHelper.forEach(this.thresholdReachedCallbacks,function(a){return a()}),this.thresholdReachedCallbacks=[])},b}();b.ViewabilityTags=u}(b=a.helper||(a.helper={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function b(b,c,d,e){this.placement=b,this.formatConfig=c,this.player=d,this.slotType=e,this.states={hasOpened:!1,isReady:!1,hasStarted:!1,hasStopped:!1,hasCompleted:!1,isReplay:!1,isPlaying:!1,isCollapsed:!1},this.hasMoatExtension=!1,this.adWidth=0,this.adHeight=0,this.adDuration=-2,this.adRemainingTime=NaN,this.isVertical=!1,this.campaignToTest=/^(29690|29686|30201|31079|29605|25615|31856|33457)$/,this.wigoi=null,this.logger=new a.Logger("format"),this.logger.debug("new",c.formatName.get()),this.linearAd=this.player?this.player.getLinearAd():null,this.hasMoatExtension=!!this.player&&this.player.hasMoatExtension(this.linearAd),a.helper.Amp.setCreativeInformation(this.linearAd),this.parentContainer=this.placement.getParentContainer(),this.playerContainer=this.placement.getPlayerContainer(),this.win=b.placementConfig.parentWindow.getWindow(),this.eventListenerManager=new a.DOMEventListenerManager,this.volumeController=new a.helper.VolumeController,this.viewabilityTagsHelper=new a.helper.ViewabilityTags(this.formatConfig.insertionId,this.formatConfig.connectionId,this.playerContainer,this.win),this.initComponents(),this.player?this.vpaidApi=this.player.getConfig().vpaidApi:this.vpaidApi=new a.VPAIDApi(b,this.formatConfig)}return b.prototype.setWigoi=function(a){this.wigoi=a},b.prototype.getWigoi=function(){return this.wigoi},b.prototype.initComponents=function(){var b=this.placement.getElectedSlot();if(!b)return void this.logger.debug("Could not init components because no elected slot");var c=a.HTMLHelper.getDocument(b.getElement()),d=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];a.forEach(function(a){var b=a.getCSS();if(a.getHTML()&&b){var d=c.createElement("style");d.appendChild(c.createTextNode(b)),c.head.appendChild(d)}})},e=new a.component.Label(this.formatConfig.label),f=new a.component.Credits(this.formatConfig.credits);this.components=new a.helper.Components({label:e,credits:f}),d(e,f),e.getHTML()&&!this.placement.sliderEnabled&&this.playerContainer.parentNode.insertBefore(e.getElement(),this.playerContainer),f.getHTML()&&!this.placement.sliderEnabled&&this.playerContainer.parentNode.appendChild(f.getElement()),this.components.hideAllComponents(),this.placement.placementConfig.css.applyRulesOn(this.parentContainer)},b.prototype.getBrandingMode=function(){return this.brandingMode},b.prototype.getTemplateName=function(){throw new Error("getTemplateName must be implemented in child class")},b.prototype.getVpaidAd=function(){return this.vpaidAd},b.prototype.getVolumeController=function(){return this.volumeController},b.prototype.getFullscreenHelper=function(){return this.fullscreenHelper},b.prototype.exit=function(b){var c=this;switch(this.vpaidAd&&this.vpaidAd.stopAd(),this.smartPositionHelper&&this.smartPositionHelper.deinit(),this.eventListenerManager.removeAll(),this.vpaidApi&&this.vpaidApi.close(),this.responsive&&this.responsive.unsetResponsive(),this.parentContainer&&this.parentContainer.parentNode&&a.Timer.setTimeout(function(){c.parentContainer.parentNode.removeChild(c.parentContainer),c.unsetVisibility()},2e3),b){case a.EXIT_STATUS.AdSuccess:this.logger.info("Format successfully exited after displaying an ad");break;case a.EXIT_STATUS.NoAdSuccess:this.logger.info("Format successfully exited without displaying an ad");break;case a.EXIT_STATUS.MoatNotVisibleAdSuccess:this.logger.info("Format successfully exited because the VAST contains a MOAT extension while the player is hidden by CSS");break;case a.EXIT_STATUS.AdError:this.logger.error("Format exited with an ad error");break;case a.EXIT_STATUS.ResizeAmpError:this.logger.error("Format exited due to resize denied on opening by AMP framework");break;case a.EXIT_STATUS.ReplayError:this.logger.error("Format exited due to an exception thrown during replay");break;default:this.logger.warn("Format exited with unknown status")}for(var d=a.instances[this.formatConfig.formatName.get()],e=0,f=d.length;e<f;e++)if(d[e]===this){d.splice(e,1);break}a.Context.isAmp()&&(b!==a.EXIT_STATUS.NoAdSuccess?a.helper.Amp.clean():this.placement.placementConfig.fallback.hasValue()||(a.helper.Amp.clean(),a.helper.Amp.reportRenderedEntityIdentifier())),a.Context.isIABSafeFrame()&&a.helper.SafeFrameResize.close()},b.prototype.getCurrentTime=function(){return this.adDuration>0&&this.adRemainingTime>=0?this.adDuration-this.adRemainingTime:0},b.prototype.getEnvironmentVars=function(){return this.env},b.prototype.load=function(b,c){var d=this,e=function(b){d.logger.error("VPAID play:",b),a.formatSumologic.sendError({pid:d.placement.pid,cid:d.vpaidApi.getContextData()?d.vpaidApi.getContextData().tracking.cid:void 0,scid:d.vpaidApi.getContextData()?d.vpaidApi.getContextData().tracking.studio_cid:void 0,message:"Error when loading mediafile|"+b.getFullMessage().substr(0,120)}),c&&c(b)},f=function(c,e){d.vpaidAd=c,d.initAdConfig=e,b&&(d.formatConfig.callbacks.trigger("adAvailable"),b());var f=a.player.MediaFileHelper.getMediaFileRatioLog(d.player.getMediafile(),d.placement.pid,a.Option.of(d.formatConfig.adSourceId));a.formatSumologic.sendInfo(f)};!this.player&&b?b():this.mediafile?this.player.loadMediaFile(this.mediafile,f,e):this.player.loadOptimalMediaFile(f,e)},b.prototype.close=function(b){var c=this;this.states.hasStopped||(this.states.hasStopped=!0,!this.states.hasOpened||a.Semver.isLowerOrEqual(a.Context.getIEVersion(),"9")||a.Context.isAmp()||this.states.isCollapsed?(this.collapse(),this.exit(b)):(this.eventListenerManager.addMultiple(["transitionend","otransitionend","oTransitionEnd","webkitTransitionEnd"],this.parentContainer,function(){return c.exit(b)}),this.collapse()))},b.prototype.collapse=function(){this.states.isCollapsed||(this.states.isCollapsed=!0,this.components.hideAllComponents(),this.formatConfig.animations.setCollapseDuration(this.parentContainer),this.parentContainer.style.height="0")},b.prototype.start=function(){this.components.showAllComponents(),this.addCustomTracking(window._ttc),this.logger.debug("VPAID started",this.vpaidAd,this.initAdConfig),this.mediafile=this.player.getMediafile(),this.onVpaidReady(),this.env={},this.env.connectionId=this.formatConfig.connectionId,this.placement.placementTracker.handleInitAdTimingMark(this.vpaidAd),this.vpaidAd.initAd(this.initAdConfig.width,this.initAdConfig.height,this.initAdConfig.mode,this.initAdConfig.bitrate,this.initAdConfig.parameters,this.env)},b.prototype.onAdLoaded=function(){var b=this;this.states.isReady=!0,a.Context.isAmp()&&!a.helper.Amp.isOpen()&&(a.formatSumologic.sendInfo("AMP resize open request"),a.helper.Amp.renderStart(),a.helper.Amp.open(this.fitContainerToContent(!0),function(c){if(!c){b.close(a.EXIT_STATUS.ResizeAmpError),b.unlistenAmp();var d="AMP resize open request denied";a.formatSumologic.sendInfo(d),b.logger.info("AdLoaded",d),b.wigoi&&b.wigoi.valid(3,4,d,a.Wigo.infoType.ERROR)}},function(){var a=window._teads_amp.change;return!(a.boundingClientRect.top>=a.rootBounds.height)})),this.volumeController.mute(),this.eventListenerManager.add("mouseover",this.parentContainer,function(){return b.volumeController.onMouseOver()}),this.eventListenerManager.add("mouseout",this.parentContainer,function(){return b.volumeController.onMouseOut()}),this.updateAdSize(),this.vpaidAd.render(this.vpaidAd.getVPAID())},b.prototype.onAdVideoStart=function(){this.states.hasCompleted=!1,this.states.isPlaying=!0,this.volumeController.onAdVideoStart()},b.prototype.onAdStarted=function(){this.states.hasStarted=!0,this.vpaidApi.getStudioData()?this.brandingMode.deinit():this.brandingMode.init(),this.placement.placementConfig.capping.record(),this.volumeController.mute(),this.updateAdSize()},b.prototype.onAdPaused=function(){this.states.isPlaying=!1},b.prototype.onAdPlaying=function(){this.states.isPlaying=!0},b.prototype.onAdStopped=function(){this.states.isPlaying=!1,this.close(a.EXIT_STATUS.AdSuccess)},b.prototype.onAdSkipped=function(){this.collapse()},b.prototype.onAdVideoComplete=function(){this.states.hasCompleted=!0},b.prototype.onAdError=function(b){var c="string"==typeof b?b:b.message?b.message:a.JSON.stringify(b),d=this.player.getLinearAd();a.formatSumologic.sendError({aid:d?d.id:-1,pid:this.placement.pid,cid:this.vpaidApi.getContextData()?this.vpaidApi.getContextData().tracking.cid:void 0,scid:this.vpaidApi.getContextData()?this.vpaidApi.getContextData().tracking.studio_cid:void 0,message:"AdError: "+c}),this.logger.error("AdError:",c),this.close(a.EXIT_STATUS.AdError)},b.prototype.onAdSizeChange=function(){this.updateAdSize(),this.updateParentContainerClass()},b.prototype.onAdRemainingTimeChange=function(){this.adRemainingTime=this.vpaidAd.getAdRemainingTime()},b.prototype.onAdDurationChange=function(){this.adDuration=this.vpaidAd.getAdDuration(),this.onAdRemainingTimeChange()},b.prototype.onCollapseRequest=function(){this.formatConfig.callbacks.trigger("CollapseRequest"),this.collapse()},b.prototype.onSoundToggleRequest=function(){var a=this;this.env.videoSlot&&this.env.videoSlot.audio&&!this.env.videoSlot.audio.authorized?this.env.videoSlot.audio.authorizeAudio(function(){return a.volumeController.toggleVolume()}):this.volumeController.toggleVolume()},b.prototype.onReplayRequest=function(){this.replay(),a.formatSumologic.sendInfo("click-replay "+a.Context.getContextSummary(),null,1)},b.prototype.onEndscreenInit=function(){this.getInViewState()||(this.logger.debug("The video completed but it's not in view, pause it."),this.vpaidAd.pauseAd()),this.visibility&&!this.visibility.isEnabled()&&(this.visibility.enable(),this.visibility.isVisible()||this.onHidden())},b.prototype.onVisible=function(){if(this.logger.debug("Format is visible",this.playerContainer.id),!this.states.hasStopped&&this.states.hasOpened&&this.states.hasStarted){var a=void 0;a=this.formatConfig.videoPause.isThreshold()||this.states.hasCompleted?!this.getInViewState():!this.formatConfig.videoPause.isNo(),a||this.vpaidAd.resumeAd(),this.logger.debug("onVisible mustPause",a);
}},b.prototype.onHidden=function(){this.logger.debug("Format is hidden",this.playerContainer.id),this.states.hasStarted&&this.states.isPlaying&&(!this.formatConfig.videoPause.isNo()||this.states.hasCompleted?this.vpaidAd.pauseAd():!this.formatConfig.soundMute.isNo()&&this.volumeController.getVolume()>0&&this.volumeController.mute())},b.prototype.initInternalResponsive=function(){this.player&&this.vpaidAd&&(this.player.getPlugin("Responsive").deinit(),this.responsive=new a.helper.Responsive(this),this.responsive.resizeOnStart())},b.prototype.onVpaidReady=function(){var c=this;this.initInternalResponsive(),this.isVertical=this.player.getMediafile().height>b.VERTICAL_MARGIN*this.player.getMediafile().width,this.volumeController.init(this),this.visibility=a.Visibility.listenWindow(this.win,function(){return c.onVisible()},function(){return c.onHidden()}),this.vpaidAd.subscribe(function(){return c.onAdLoaded()},a.vpaid.VPAIDEvent.AdLoaded),this.vpaidAd.subscribe(function(){return c.onAdVideoStart()},a.vpaid.VPAIDEvent.AdVideoStart),this.vpaidAd.subscribe(function(){return c.onAdStarted()},a.vpaid.VPAIDEvent.AdStarted),this.vpaidAd.subscribe(function(){return c.onAdPaused()},a.vpaid.VPAIDEvent.AdPaused),this.vpaidAd.subscribe(function(){return c.onAdPlaying()},a.vpaid.VPAIDEvent.AdPlaying),this.vpaidAd.subscribe(function(){return c.onAdSizeChange()},a.vpaid.VPAIDEvent.AdSizeChange),this.vpaidAd.subscribe(function(){return c.onAdDurationChange()},a.vpaid.VPAIDEvent.AdDurationChange),this.vpaidAd.subscribe(function(){return c.onAdRemainingTimeChange()},a.vpaid.VPAIDEvent.AdRemainingTimeChange),this.vpaidAd.subscribe(function(){return c.onAdVideoComplete()},a.vpaid.VPAIDEvent.AdVideoComplete),this.vpaidAd.subscribe(function(){return c.onAdStopped()},a.vpaid.VPAIDEvent.AdStopped),this.vpaidAd.subscribe(function(){return c.onAdSkipped()},a.vpaid.VPAIDEvent.AdSkipped),this.vpaidAd.subscribe(function(a){return c.onAdError(a)},a.vpaid.VPAIDEvent.AdError);var d=function(b){a.vpaid.VPAIDEvent.hasOwnProperty(b)&&e.vpaidAd.subscribe(function(){c.formatConfig.callbacks.trigger(b,c.volumeController,c.fullscreenHelper)},b)},e=this;for(var f in a.vpaid.VPAIDEvent)d(f);this.linearAd.clickThrough&&this.linearAd.clickThrough.length&&this.vpaidAd.subscribe(function(){return c.onHidden()},a.vpaid.VPAIDEvent.AdClickThru),this.vpaidAd.subscribe(function(){return c.onCollapseRequest()},a.vpaid.ui.VPAIDUIEvent.CollapseRequest),this.vpaidAd.subscribe(function(){return c.onSoundToggleRequest()},a.vpaid.ui.VPAIDUIEvent.SoundToggleRequest),this.vpaidAd.subscribe(function(){return c.onReplayRequest()},a.vpaid.ui.VPAIDUIEvent.ReplayRequest),this.vpaidAd.subscribe(function(){return c.onEndscreenInit()},a.vpaid.ui.VPAIDUIEvent.EndscreenInit),this.formatConfig.vtpEvent.getEvent()&&this.vpaidAd.subscribe(function(){return c.onVtpEvent()},this.formatConfig.vtpEvent.getEvent())},b.prototype.triggerOnVtpEvent=function(){this.formatConfig.videoPause.setToNo(),this.states.isPlaying||this.vpaidAd.resumeAd()},b.prototype.onVtpEvent=function(){if(!this.formatConfig.videoPause.isNo())if(this.formatConfig.vtpEvent.getEvent()===a.vpaid.VPAIDEvent.AdRemainingTimeChange){var b=this.vpaidAd.getAdDuration(),c=this.vpaidAd.getAdRemainingTime(),d=Math.floor(b-c);!isNaN(d)&&d>0&&d>=this.formatConfig.vtpEvent.getOffset()&&this.triggerOnVtpEvent()}else this.triggerOnVtpEvent()},b.prototype.updateAdSize=function(){this.adWidth=this.vpaidAd.getAdWidth(),this.adHeight=this.vpaidAd.getAdHeight()},b.prototype.updateParentContainerClass=function(){var b=this;if(this.vpaidAd){var c=a.Dom.getBoundingClientRect(this.parentContainer).width;a.ArrayHelper.forEach([a.Constant.RESPONSIVE.xs.className,a.Constant.RESPONSIVE.sm.className],function(c){a.HTMLHelper.removeClass(b.parentContainer,c)}),c<=a.Constant.RESPONSIVE.xs.size?a.HTMLHelper.addClass(this.parentContainer,a.Constant.RESPONSIVE.xs.className):c<=a.Constant.RESPONSIVE.sm.size&&a.HTMLHelper.addClass(this.parentContainer,a.Constant.RESPONSIVE.sm.className)}},b.prototype.replay=function(){var b=this;this.logger.debug("replay called"),this.placement.placementTracker.track("click-replay"),a.formatSumologic.sendInfo("click-replay "+a.Context.getContextSummary(),!0),this.volumeController.replay();try{var c=this.player.getPlugin("Responsive");c.unsetResponsive(),this.player.setLinearAd(this.linearAd),this.responsive&&this.responsive.unsetResponsive(),this.unsetVisibility(),this.states.isReady=!0,this.states.hasOpened=!0,this.states.hasStarted=!1,this.states.hasStopped=!1,this.states.hasCompleted=!1,this.states.isReplay=!0,this.vpaidAd=null,a.vpaid.BaseVPAIDJSWrapper.hasLogged=[],a.Context.isDesktop()&&this.formatConfig.videoStart.isClick()&&(this.formatConfig.videoStart=new a.option.VideoStart(a.option.VideoStart.DEFAULT,this.formatConfig.formatName,this.formatConfig.smartPosition)),this.load(function(){return b.start()})}catch(b){this.logger.error("Replay callback threw an exception",b),this.close(a.EXIT_STATUS.ReplayError)}},b.prototype.unsetVisibility=function(){this.visibility&&(this.visibility.destroy(),this.visibility=null)},b.prototype.isVisible=function(){return a.Context.isAmp()?!!this.visibility&&(this.visibility.isVisible()&&a.helper.Amp.isOpen()):!this.visibility||!this.visibility.isEnabled()||this.visibility.isVisible()},b.prototype.getMoatInViewState=function(){var b=!0;return a.Context.isFacebookIA()||a.Context.isAmp()||a.Context.isIABSafeFrame()||(b=a.HTMLHelper.getRealVisibilityState(this.playerContainer)&&this.isVisible()),b},b.prototype.getInViewState=function(){var a=this.getViewportInViewState();return this.hasMoatExtension&&(a=a&&this.getMoatInViewState()),a},b.prototype.clearRealVisibilityInterval=function(){this.realVisibilityInterval&&this.realVisibilityInterval.clear()},b.prototype.addCustomTracking=function(b){var c=this;void 0===b&&(b={});var d=this.player.getPlugin("Tracker"),e=d.getTracker();for(var f in b)if(b.hasOwnProperty(f)){var g=b[f].trackings||[];a.ArrayHelper.forEach(g,function(a){var b=a.event;"progress"!==b?e.addResource(b,a.url):c.logger.warn("Custom tracking cannot be handled",a)})}},b.VERTICAL_MARGIN=1.05,b}();b.AbstractFormat=c}(b=a.format||(a.format={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(c,d,e){var f=b.call(this,c,d,e,a.Constant.SLOT_TYPE.native)||this;return f.placement=c,f.config=d,f.player=e,f.hasLoggedPlayProblem=!1,f.facebookPercentInView=a.helper.Facebook.NOT_IN_VIEW,a.Context.isFacebookIA()&&f.initFacebookIA(),f.config.adType.isDisplay()&&a.HTMLHelper.addClass(f.parentContainer,"teads-display"),f}return __extends(c,b),c.prototype.load=function(c,d){var e=this;a.Context.isIABSafeFrame()?a.helper.SafeFrameResize.initSlot(function(){return b.prototype.load.call(e,c,d)}):b.prototype.load.call(this,c,d)},c.prototype.getTemplateName=function(){return"inread"},c.prototype.start=function(){var c=this,d=this.placement.placementConfig.scrollSelector.getSlot();a.Context.isIABSafeFrame()?a.helper.SafeFrameResize.listenGeom(function(){return c.onScroll(new Event("touchmove"))}):a.Context.isAmp()?this.unlistenAmp=this.win.context.observeIntersection(function(a){return c.onScroll(new Event("touchmove"))}):(this.hasMoatExtension&&a.Context.isDesktop()&&this.setRealVisibilityInterval(),this.eventListenerManager.add("scroll",d,function(a){return c.onScroll()}),this.eventListenerManager.addMultiple(["touchstart","touchmove","touchend"],d,function(a){return c.onScroll(a)})),this.isInView=this.getInViewState(),this.formatConfig.vast.getContent()?b.prototype.start.call(this):this.onScroll()},c.prototype.onAdLoaded=function(){var c=this;if(b.prototype.onAdLoaded.call(this),this.fullscreenHelper.addCloseEventListener(function(){c.isSmartPositionned()||c.responsive&&c.responsive.resize(!0)}),this.isVertical){var d=function(){c.responsive.unsetResponsive(),c.parentContainer.style.display="none",c.isInView=!1,c.vpaidAd.pauseAd()};this.responsive.addOrientationChangeListener(function(a){c.isFullscreen()||(c.responsive.isLandscape?d():(c.parentContainer.style.display="block",c.responsive.setResponsive(),c.onScroll(a)))}),this.fullscreenHelper.addCloseEventListener(function(){c.responsive&&c.responsive.isLandscape&&d()})}a.Context.isDesktop()||this.vpaidAd.render(this.vpaidAd.getVPAID()),!a.Context.isIABSafeFrame()&&!a.Context.isFacebookIA()||this.states.hasOpened||this.openFormat(),this.onScroll(),this.isInView=this.getInViewState()},c.prototype.onAdVideoStart=function(){b.prototype.onAdVideoStart.call(this),this.smartPositionHelper&&this.smartPositionHelper.init(),this.states.hasStarted&&this.states.hasOpened&&this.fitContainerToContent()},c.prototype.onAdSizeChange=function(){if(b.prototype.onAdSizeChange.call(this),this.states.hasOpened){var c=this.fitContainerToContent();a.Context.isAmp()&&a.helper.Amp.open(c)}},c.prototype.onAdVideoComplete=function(){b.prototype.onAdVideoComplete.call(this),this.smartPositionHelper&&this.smartPositionHelper.deinit()},c.prototype.onVpaidReady=function(){var c=this;b.prototype.onVpaidReady.call(this),this.fullscreenHelper=new a.helper.FullscreenHelper(this.parentContainer,this.vpaidAd,this.components,this.responsive,this.win,this.playerContainer),this.brandingMode=new a.helper.BrandingMode(this),this.isVertical||!this.formatConfig.sticky.isEnabled()&&!this.formatConfig.smartPosition.isEnabled()||(this.smartPositionHelper=new a.helper.SmartPosition(this)),this.hasMoatExtension&&(this.vpaidAd.subscribe(function(){return c.pauseAdIfShouldNotBePlaying()},a.vpaid.VPAIDEvent.AdStarted),this.vpaidAd.subscribe(function(){return c.pauseAdIfShouldNotBePlaying()},a.vpaid.VPAIDEvent.AdRemainingTimeChange)),this.vpaidAd.subscribe(function(){return c.clearRealVisibilityInterval()},a.vpaid.VPAIDEvent.AdError),this.vpaidAd.subscribe(function(){return c.clearRealVisibilityInterval()},a.vpaid.VPAIDEvent.AdStopped),this.vpaidAd.subscribe(function(){return c.clearRealVisibilityInterval()},a.vpaid.VPAIDEvent.AdSkipped),this.vpaidAd.subscribe(function(){return c.clearRealVisibilityInterval()},a.vpaid.VPAIDEvent.AdVideoComplete)},c.prototype.startInView=function(){this.states.hasStarted&&(this.formatConfig.videoPause.isThreshold()||this.isVertical||this.states.hasCompleted)&&this.vpaidAd.resumeAd(),this.volumeController.startInView()},c.prototype.endInView=function(){this.formatConfig.videoPause.isThreshold()||this.states.hasCompleted?this.vpaidAd.pauseAd():this.volumeController.endInView()},c.prototype.fitContainerToContent=function(b){if(void 0===b&&(b=!1),this.vpaidApi.isStudioDisplay());else if(a.Context.isIos()&&this.env&&this.env.videoSlot&&this.env.videoSlot.canvasPlayer){var c=this.env.videoSlot.mediaProxy,d=c.getStatus();if(d!==a.video.constant.MediaProxyStatus.READY)return}if((this.states.hasOpened||b)&&!this.isFullscreen()){var e=a.Dom.getBoundingClientRect(this.placement.getInnerContainer()),f=e.height;if(a.Context.isFacebookIA()){var g=a.Dom.getBoundingClientRect(this.playerContainer).height;f+=0===g?e.width/a.Constant.DEFAULT_VIDEO_SIZE_RATIO:0}return this.parentContainer.style.height=f+"px",f}},c.prototype.manageInView=function(a){a!==this.isInView&&(a?this.startInView():this.endInView()),this.isInView=a},c.prototype.openFormat=function(){var b=this;if(this.states.hasOpened=!0,this.formatConfig.animations.setExpandDuration(this.parentContainer),this.vpaidApi.isStudioDisplay()||!this.formatConfig.adType.isVideo());else if(a.Context.isIos()&&this.env&&this.env.videoSlot&&this.env.videoSlot.canvasPlayer){var c=this.env.videoSlot.mediaProxy,d=c.getStatus();if(d===a.video.constant.MediaProxyStatus.READY)this.logger.debug("mediaProxy is ready !",this.env.videoSlot.src);else{if(d===a.video.constant.MediaProxyStatus.ERROR)return void this.logger.error("mediaProxy error, video is not available for the moment",this.env.videoSlot.src);if(!this.env.videoSlot.src||d<a.video.constant.MediaProxyStatus.READY)return this.logger.debug("mediaProxy not ready or video.src not setted, delay inread opening",this.env.videoSlot.src),void c.listen(a.video.constant.MediaProxyEvent.READY,function(){b.openFormat()},!1)}}var e=this.fitContainerToContent(!0);this.logger.debug("Format (pageId = "+this.formatConfig.pageId+", placementId = "+this.formatConfig.placementId+") has been opened"),this.responsive&&!this.isSmartPositionned()&&this.responsive.setResponsive(),a.Context.isIABSafeFrame()&&a.helper.SafeFrameResize.open(e,function(a){b.states.hasOpened=a}),a.Context.isFacebookIA()&&this.startFacebookIA()},c.prototype.trackAdCall=function(b){b&&!this.states.hasStopped&&(this.placement.placementTracker.track(a.Constant.TRACKING.adCall),this.linearAd||this.close(a.EXIT_STATUS.NoAdSuccess))},c.prototype.isUserInteraction=function(b){return!!(!a.Context.isMobile()&&!a.Context.isTablet()||this.formatConfig.allowedPlayer.getValue()===a.player.PLAYER_TYPE.CANVAS||a.Context.isWhiteListedIos10Safari(String(this.config.placementId))||a.Context.isFacebookWebviewIOS10()||a.Context.canAutoplay())||!!b&&"scroll"!==b.type},c.prototype.onScroll=function(b){if(this.wigoi&&a.WIGO_DEBUG_KEY&&this.wigoi.followPlayer(),!this.isFullscreen()&&!this.isVerticalLandscape()){this.smartPositionHelper&&this.smartPositionHelper.onScroll(b);var c=this.getInViewState();this.trackAdCall(c),!this.isSmartPositionned()&&this.states.isReady&&(this.states.hasOpened?this.states.isReplay&&this.responsive&&this.responsive.setResponsive():this.isUserInteraction(b)&&this.isVisible()&&(this.formatConfig.launch.isAuto()||this.formatConfig.launch.isThreshold()&&c)&&this.openFormat(),this.states.hasOpened&&!this.states.hasStopped&&(this.states.hasStarted?this.manageInView(c):(this.viewabilityTagsHelper.onScroll(),(this.isUserInteraction(b)||this.states.isReplay)&&this.canStart(c)&&(this.vpaidAd.startAd(),this.hasMoatExtension&&!a.Context.isDesktop()&&this.setRealVisibilityInterval()))))}},c.prototype.canStart=function(a){return!this.formatConfig.videoStart.isThreshold()||a||this.states.isReplay},c.prototype.canPlay=function(a){return this.formatConfig.videoPause.isNo()||a},c.prototype.isFullscreen=function(){return!!this.fullscreenHelper&&this.fullscreenHelper.isActive()},c.prototype.isSmartPositionned=function(){return!!this.smartPositionHelper&&this.smartPositionHelper.isActive()},c.prototype.getViewportInViewState=function(){if(a.Context.isFacebookIA())return this.facebookPercentInView>this.formatConfig.threshold.get();var b=this.vpaidAd?this.vpaidAd.getAdHeight():1;return a.HTMLHelper.isInView(this.playerContainer,this.win,this.formatConfig.threshold.get()/100,b)},c.prototype.initFacebookIA=function(){var b=this;this.eventListenerManager.add("message",this.win,function(c){b.facebookPercentInView=a.helper.Facebook.getPercentInView(b.facebookPercentInView,c.data),b.states.isReady&&b.startFacebookIA()}),this.win.removeEventListener("message",window._teads_fbia.listener,!0);var c=a.ArrayHelper.filter(window._teads_fbia.events||[],function(b){return!!a.helper.Facebook.eventToPercent[b]});this.facebookPercentInView=parseInt(c.pop(),10)},c.prototype.startFacebookIA=function(){var a=this.getInViewState();this.states.hasOpened?this.states.isReplay&&this.responsive&&this.responsive.setResponsive():(this.formatConfig.launch.isAuto()||this.formatConfig.launch.isThreshold()&&a)&&this.openFormat(),this.states.hasStarted||(!this.formatConfig.videoStart.isThreshold()||a||this.formatConfig.smartPosition.isEnabled()||this.states.isReplay)&&this.vpaidAd.startAd(),this.manageInView(a)},c.prototype.setRealVisibilityInterval=function(){var b=this;this.realVisibilityInterval=a.Timer.setInterval(function(){return b.checkRealVisibility()},250)},c.prototype.checkRealVisibility=function(){if(!this.isFullscreen()&&!this.isVerticalLandscape()){this.smartPositionHelper&&this.smartPositionHelper.onScroll();var a=this.getInViewState();this.trackAdCall(a),this.states.isReady&&(this.states.hasOpened?this.states.isReplay&&this.responsive&&this.responsive.setResponsive():this.isVisible()&&(this.formatConfig.launch.isAuto()||this.formatConfig.launch.isThreshold()&&a)&&this.openFormat(),this.states.hasOpened&&!this.states.hasStopped&&(this.states.hasStarted?this.manageInView(a):this.canStart(a)&&this.vpaidAd.startAd()))}},c.prototype.pauseAdIfShouldNotBePlaying=function(){if(this.states.isPlaying){var b=this.getInViewState(),c=this.states.hasStarted?this.canPlay(b):this.canStart(b);if(!c&&(this.isInView=!1,this.vpaidAd.pauseAd(),!this.hasLoggedPlayProblem)){this.hasLoggedPlayProblem=!0;var d="0",e="0";this.linearAd&&(e=this.linearAd.id?this.linearAd.id:"0",d=this.linearAd.creativeId?this.linearAd.creativeId:"0"),a.formatSumologic.sendInfo({pid:this.placement.pid,cpid:e,crid:d})}}},c.prototype.isVerticalLandscape=function(){return this.isVertical&&this.responsive&&this.responsive.isLandscape},c}(b.AbstractFormat);b.Inread=c}(b=a.format||(a.format={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function a(){this.width=0,this.height=0}return a}();b.DisplayAsset=c;var d=function(){function a(){this.asset=new c}return a}();b.DisplayCreative=d;var e=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.open=[],b.visible=[],b}return __extends(b,a),b}(a.vast.TrackingDefinition);b.DisplayTrackingDefinition=e;var f=function(){function a(){this.version=1,this.creative=new d,this.tracking=new e,this.clickThrough=[],this.expand=[],this.rolloverCountdown=[],this.closeCountdown=[],this.title=""}return a}();b.Ad=f}(b=a.display||(a.display={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function c(b,d,e,f,g){void 0===d&&(d=document.body),void 0===e&&(e=10),void 0===f&&(f=400),this.fromElement=d,this.margin=e,this.transitionDuration=f,this.scope=g,this.css=a.Template.EXPANDCSS,this.content=a.ui.TemplateHelper.replacePlaceholders(a.Template.EXPANDHTML,{iframeurl:b,assetsPath:a.config.assetsUrl}),g||(this.scope=a.HTMLHelper.findParentWindows(window.document.body).pop()),this.background=this.scope.document.createElement("div"),this.background.style.setProperty("display","none"),this.background.className="teads-expand-overlay open",this.scope.document.body.appendChild(this.background),this.container=this.scope.document.createElement("div"),this.container.style.setProperty("display","none"),this.container.className="teads-expand-container",this.scope.document.body.appendChild(this.container),this.setCSS(this.css),this.contentContainer=document.createElement("div"),this.contentContainer.className=c.CSSCLASSES.expandContentContainer,this.contentContainer.innerHTML=this.content,this.container.appendChild(this.contentContainer)}return c.openExpand=function(d,e,f,g,h,i){var j=new b.ExpandHelper(f,d),k=j.getContentElement(),l=a.Dom.getElementsByClassName(c.CSSCLASSES.expandLabel,k)[0],m=a.Dom.getElementsByClassName(c.CSSCLASSES.expandCredit,k)[0],n=a.Dom.getElementsByClassName(c.CSSCLASSES.expandCloseButton,k)[0],o=function(a,b){if(a){var c=b.getHTML();!c&&a.parentNode?a.parentNode.removeChild(a):a.innerHTML=c}};o(l,new a.component.Label(e.label)),o(m,new a.component.Credits(e.credits)),i&&(n.style.setProperty("display","none"),setTimeout(function(){n.style.setProperty("display","block")},1e3*i));var p=function(){var b=a.Dom.getElementsByClassName(c.CSSCLASSES.expandIframe,k)[0],d=a.Dom.getElementsByClassName(c.CSSCLASSES.expand,k)[0],e=a.Dom.getBoundingClientRect(d).height,f=j.getContainerHeight()-e+a.Dom.getBoundingClientRect(b).height;b.style.setProperty("width",j.getContainerWidth()+"px"),b.style.setProperty("height",f+"px")};j.open(function(){p(),g&&a.Utils.isFunction(g)&&g()},function(){return p()}),a.Dom.addEventListener("click",n,function(){j.close(function(){h&&a.Utils.isFunction(h)&&h(),j.destroy()})})},c.prototype.setCSS=function(b){this.css=b;var d=this.scope.document.getElementById(c.styleNodeId);d&&d.parentNode.removeChild(d);var e=document.createElement("style");e.setAttribute("id",c.styleNodeId),e.appendChild(this.scope.document.createTextNode(a.ui.TemplateHelper.replacePlaceholders(this.css,{transitionDuration:this.transitionDuration,assetsPath:a.config.assetsUrl})));var d=this.scope.document.head||this.scope.document.body||this.background;d.appendChild(e)},c.prototype.open=function(b,c){var d=this;if(!this.opened){this.opened=!0,this.contentContainer.style.setProperty("display","none"),this.background.style.setProperty("display","block"),this.fitContainerToElement(this.fromElement),this.container.style.setProperty("display","block");var e=function(a){c&&c()};setTimeout(function(){a.HTMLHelper.addClass(d.background,"opened"),a.HTMLHelper.addClass(d.container,"opened"),d.container.style.setProperty("top",d.margin+"px"),d.container.style.setProperty("left",d.margin+"px"),d.updateSize(),setTimeout(function(){a.HTMLHelper.addClass(d.scope.document.body,"noscroll"),e(),d.contentContainer.style.setProperty("display","block"),b&&"function"==typeof b&&b()},d.transitionDuration)},10);var f=function(){d.updateSize(),e()};this.resizeWindowListener=f,a.Dom.addEventListener("resize",this.scope,f)}},c.prototype.close=function(b){var c=this;this.opened&&(this.resizeWindowListener&&(a.Dom.removeEventListener("resize",this.scope,this.resizeWindowListener),this.resizeWindowListener=null),this.contentContainer.style.setProperty("display","none"),a.HTMLHelper.removeClass(this.scope.document.body,"noscroll"),this.fitContainerToElement(this.fromElement),a.HTMLHelper.removeClass(this.background,"opened"),a.HTMLHelper.removeClass(this.container,"opened"),setTimeout(function(){c.background.style.setProperty("display","none"),c.container.style.setProperty("display","none"),c.opened=!1,b&&a.Utils.isFunction(b)&&b()},this.transitionDuration))},c.prototype.destroy=function(){this.container.parentNode.removeChild(this.container),this.background.parentNode.removeChild(this.background);var a=this.scope.document.getElementById(c.styleNodeId);a.parentNode.removeChild(a)},c.prototype.isOpened=function(){return!!this.opened},c.prototype.updateSize=function(){this.container.style.setProperty("width",this.getContainerWidth()+"px"),this.container.style.setProperty("height",this.getContainerHeight()+"px")},c.prototype.getContentElement=function(){return this.container},c.prototype.getContainerWidth=function(){return this.scope.innerWidth-2*this.margin},c.prototype.getContainerHeight=function(){return this.scope.innerHeight-2*this.margin},c.prototype.fitContainerToElement=function(b){var c=a.Dom.getBoundingClientRect(b);this.container.style.setProperty("position","fixed"),this.container.style.setProperty("top",c.top+"px"),this.container.style.setProperty("left",c.left+"px"),this.container.style.setProperty("width",c.width+"px"),this.container.style.setProperty("height",c.height+"px")},c.styleNodeId="teads-expand-helper-style",c.CSSCLASSES={expand:"teads-expand",expandIframe:"teads-expand-iframe",expandLabel:"teads-expand-label",expandCredit:"teads-expand-credits",expandCloseButton:"teads-expand-closebutton",expandContentContainer:"teads-expand-content"},c}();b.ExpandHelper=c}(b=a.helper||(a.helper={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function c(d,e,f,g,h,i,j){var k=this;this.parentContainer=d,this.clickZone=e,this.container=f,this.endCallback=g,this.clickCallback=h,this.win=i,this.rolloverCountdown=j,this.logger=new a.Logger("helper.Countdown"),b.CSSHelper.embedCSS(c.CSS,this.win,c.STYLE_NODE_ID),this.container.className=c.CSSCLASSES.countdownContainer,a.Dom.addEventListener("click",this.clickZone,function(){k.onClick()})}return c.prototype.show=function(){var d=this;this.logger.debug("init countdown called"),b.CSSHelper.embedCSS(a.Template.COUNTDOWNCSS,this.win,c.CSSCLASSES.countdownStyle),this.container.style.setProperty("opacity","0"),this.container.innerHTML=a.ui.TemplateHelper.replacePlaceholders(a.Template.COUNTDOWNHTML,{assetsPath:a.config.assetsUrl});var e=a.Dom.getElementsByClassName(c.CSSCLASSES.countdownCircle,this.container)[0],f=a.Dom.getBoundingClientRect(e),g=a.Dom.getBoundingClientRect(this.parentContainer);e.style.setProperty("top",(g.height-f.height)/2+"px"),e.style.setProperty("right",(g.width-f.width)/2+"px"),setTimeout(function(){return d.container.style.setProperty("opacity","1")},100);var h=a.Dom.getElementsByClassName(c.CSSCLASSES.countdownNumber,this.container)[0],i=3,j=a.Dom.getElementsByClassName(c.CSSCLASSES.countdownCircleStroke,this.container)[0],k=j.attributes["stroke-dasharray"]?Number(j.attributes["stroke-dasharray"].value):0;j.style.setProperty("stroke-dashoffset",String(k));var l=this.rolloverCountdown?1e3*this.rolloverCountdown/i:600,m=60,n=1e3/m,o=i*l/n,p=0,q=function(){p<=o&&(j.style.setProperty("stroke-dashoffset",""+(k-p/o*k)),p++,d.countdownCircleStrokeTimer=a.Timer.requestAnimationFrame(q,n))};this.countdownCircleStrokeTimer=a.Timer.requestAnimationFrame(q,n),this.countdownTimer=setInterval(function(){i>0&&i--,h.textContent=String(i),0===i&&d.onEnded()},l)},c.prototype.hide=function(){this.container&&(this.container.innerHTML="",clearInterval(this.countdownTimer),a.Timer.cancelAnimationFrame(this.countdownCircleStrokeTimer))},c.prototype.onEnded=function(){if(this.endCallback&&a.Utils.isFunction(this.endCallback))try{this.endCallback()}catch(a){this.logger.error("Countdown onEnded callback error",a)}},c.prototype.onClick=function(){if(this.clickCallback&&a.Utils.isFunction(this.clickCallback))try{this.clickCallback()}catch(a){this.logger.error("Countdown onClick callback error",a)}},c.STYLE_NODE_ID="teads-inread-countdown",c.CSS=a.Template.COUNTDOWNCSS,c.CSSCLASSES={countdown:"teads-countdown",countdownStyle:"teads-countdown-style",countdownBackground:"teads-countdown-background",countdownCircle:"teads-countdown-circle",countdownCircleStroke:"teads-countdown-circle-main",countdownNumber:"teads-countdown-number",countdownClickZone:"teads-countdown-clickzone",countdownContainer:"teads-countdown-container",countdownMainContainer:"teads-countdown-maincontainer"},c}();b.Countdown=c}(b=a.helper||(a.helper={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function b(c,d,e){if(this.element=c,this.countdown=d,this.callback=e,this.logger=new a.Logger("helper.DisplayCloseButton.countdown"),this.element.className=b.ELEMENT_CLASS,this.countdown=Number(this.countdown),this.countdown<=0||isNaN(this.countdown))return void this.onEnded();var f=a.ui.TemplateHelper.replacePlaceholders(b.TEMPLATE,{"countdown-duration":this.countdown,"countdown-id":"countdown-"+a.StringHelper.rand(10)});this.element.innerHTML=f,this.countdownTextElement=c.querySelector("."+b.TIMER_CLASS)}return b.prototype.resume=function(){this.ended||(this.paused=!1,this.initTimer())},b.prototype.pause=function(){this.ended||(this.paused=!0,this.stopTimer())},b.prototype.onEnded=function(){if(this.ended=!0,clearInterval(this.timerInterval),this.hide(),this.callback&&"function"==typeof this.callback)try{this.callback()}catch(a){this.logger.error("countdown ended callback failed",a)}},b.prototype.initTimer=function(){var a=this,b=function(){a.paused||a.countdown--,a.countdown<=0?a.onEnded():a.updateDisplay()};this.timerInterval=setInterval(b,1e3),this.updateDisplay()},b.prototype.stopTimer=function(){clearInterval(this.timerInterval)},b.prototype.updateDisplay=function(){this.countdownTextElement&&this.countdownTextElement.setAttribute&&this.countdownTextElement.setAttribute("data-countdown",String(this.countdown))},b.prototype.hide=function(){this.element.style.display="none"},b.TEMPLATE='<style>\n  #{{countdown-id}} svg:nth-child(2) path {\n      -webkit-animation: load {{countdown-duration}}s linear;\n      -moz-animation: load {{countdown-duration}}s linear;\n      -o-animation: load {{countdown-duration}}s linear;\n      animation: load {{countdown-duration}}s linear;\n  }\n</style>\n\n<!--  Container  -->\n<ul class="countdown-circle" id="{{countdown-id}}">\n    <!--  Item  -->\n    <li data-countdown="{{countdown-duration}}" class="countdown-timer">\n        <svg viewBox="-10 -10 220 220">\n        <g fill="none" stroke-width="20" transform="translate(100,100)">\n        <path d="M 0,-100 A 100,100 0 0,1 86.6,-50" stroke="url(#cl1)"/>\n        <path d="M 86.6,-50 A 100,100 0 0,1 86.6,50" stroke="url(#cl1)"/>\n        <path d="M 86.6,50 A 100,100 0 0,1 0,100" stroke="url(#cl1)"/>\n        <path d="M 0,100 A 100,100 0 0,1 -86.6,50" stroke="url(#cl1)"/>\n        <path d="M -86.6,50 A 100,100 0 0,1 -86.6,-50" stroke="url(#cl1)"/>\n        <path d="M -86.6,-50 A 100,100 0 0,1 0,-100" stroke="url(#cl1)"/>\n        </g>\n        </svg>\n        <svg viewBox="-10 -10 220 220">\n        <path d="M200,100 C200,44.771525 155.228475,0 100,0 C44.771525,0 0,44.771525 0,100 C0,155.228475 44.771525,200 100,200 C155.228475,200 200,155.228475 200,100 Z" stroke-dashoffset="629"></path>\n        </svg>\n    </li>\n</ul>\n<!--  Defining Angle Gradient Colors  -->\n<svg width="0" height="0">\n<defs>\n<linearGradient id="cl1" gradientUnits="objectBoundingBox" x1="0" y1="0" x2="1" y2="1">\n    <stop stop-color="#FFFFFF"/>\n    <stop offset="100%" stop-color="#FFFFFF"/>\n</linearGradient>\n</defs>\n</svg>\n',b.ELEMENT_CLASS="components-countdown",b.TIMER_CLASS="components-countdown-timer",b}(),d=function(){function b(b,d,e,f){var g=this;if(this.config=b,this.clickZoneContainer=d,this.callback=e,this.win=f,this.isVisible=!0,this.countdownEnded=!1,this.logger=new a.Logger("helper.DisplayCloseButton"),!this.config.disable){this.clickZone=this.win.document.createElement("div"),this.clickZone.className=a.ui.componentBaseClassName+"closebutton",this.clickZone.style.position="absolute",this.clickZone.style.top="0px",this.clickZone.style.right="0px",this.clickZone.style.padding="15px";var h=this.win.document.createElement("div");this.countdown=new c(h,this.config.countdown,function(){return g.onCountdownEnded()}),this.clickZone.appendChild(h),this.clickZoneContainer.appendChild(this.clickZone)}}return b.prototype.hide=function(){!this.config.disable&&this.isVisible&&(this.clickZone.style.display="none",this.isVisible=!1)},b.prototype.show=function(){this.config.disable||this.isVisible||(this.clickZone.style.display="block",this.isVisible=!0)},b.prototype.resumeCoutdown=function(){this.config.disable||this.countdown.resume()},b.prototype.pauseCoutdown=function(){this.config.disable||this.countdown.pause()},b.prototype.onCountdownEnded=function(){var b=this;if(!this.countdownEnded){this.countdownEnded=!0;var c=this.win.document.createElement("div");c.className=a.ui.componentBaseClassName+"closebutton icon-close",c.style.cursor="pointer",this.clickZone.appendChild(c),a.Dom.addEventListener("click",c,function(){b.onClose()})}},b.prototype.onClose=function(){if(this.callback&&"function"==typeof this.callback)try{this.callback()}catch(a){this.logger.error("onClose callback failed",a)}},b}();b.DisplayCloseButton=d}(b=a.helper||(a.helper={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function c(){}return c.checkImagePrevNextElement=function(b,d){if(void 0===d&&(d=window),!b)return!1;var e,f=!1;if("img"===b.tagName.toLowerCase()?f=c.hasLargeImage([b]):(e=a.Dom.querySelectorAll("img",d,b),f=c.hasLargeImage(e)),!f){var g=c.prevNotEmpty(b);g&&("img"===g.tagName.toLowerCase()?f=c.hasLargeImage([g]):(e=a.Dom.querySelectorAll("img",d,g),f=e.length>0&&c.hasLargeImage(e)))}if(!f){var h=c.nextNotEmpty(b);h&&("img"===h.tagName.toLowerCase()?f=c.hasLargeImage([h]):(e=a.Dom.querySelectorAll("img",d,h),f=e.length>0&&c.hasLargeImage(e)))}return f},c.checkVideoPrevNextElement=function(a,b){if(void 0===b&&(b=window),!a)return!1;var d=c.checkVideoInElement(a,b);if(!d){var e=c.prevNotEmpty(a);e&&(d=c.checkVideoInElement(e,b))}if(!d){var f=c.nextNotEmpty(a);f&&(d=c.checkVideoInElement(f,b))}return d},c.checkVideoInElement=function(b,d){void 0===d&&(d=window);var e=["video","object","embed"],f=a.ArrayHelper.includes(e,b.tagName.toLowerCase());if(!f){var g=b.getAttribute("src");f=g&&c.isVideo(g)}if(f||(f=a.Dom.querySelectorAll("video",d,b).length>0),
f||(f=a.Dom.querySelectorAll("object",d,b).length>0),!f){var h=a.ArrayHelper.fromNodeList(a.Dom.querySelectorAll("[src]",d,b)),i=a.ArrayHelper.map(h,function(a){return a.getAttribute("src")}),j=function(a){return c.isVideo(a)};f=a.ArrayHelper.filter(i,j).length>0}return f},c.checkVideoSiblings=function(a,d){void 0===d&&(d=window);var e=null,f={length:0,currentScore:0,childrenScore:0,isOverMinimumWidth:!1,article:{score:0,node:null}},g=b.SmartSlot.findArticle(d.document.body,d,f);return g&&g.article&&g.article.node&&(e=c.findArticleForElement(a,g.article.node,0)),e||(e=a.parentElement),c.checkVideoInElement(e,d)},c.findArticleForElement=function(a,b,d){if(a&&10!==d){var e=a.parentElement;return e===b?e:c.findArticleForElement(e,b,d+1)}},c.isVideo=function(a){var b=/youtube|youtu\.be|dailymotion|day\.ly|vimeo|instagram|vine-videos/i;return b.test(a)},c.hasLargeImage=function(b){void 0===b&&(b=[]);var d=a.ArrayHelper.map(b,function(b){return a.Dom.getSize(b).width}),e=function(a){return a>c.LARGE_IMG_THRESHOLD};return a.ArrayHelper.filter(d,e).length>0},c.prevNotEmpty=function(b,d){if(void 0===d&&(d=0),!b||d===c.MAX_TRY_CHECK_EMPTY)return b;var e=b.previousElementSibling;return e&&!a.Dom.isEmpty(e)?e:c.prevNotEmpty(e,d+1)},c.nextNotEmpty=function(b,d){if(void 0===d&&(d=0),!b||d===c.MAX_TRY_CHECK_EMPTY)return b;var e=b.nextElementSibling;return e&&!a.Dom.isEmpty(e)?e:c.nextNotEmpty(e,d+1)},c.LARGE_IMG_THRESHOLD=75,c.MAX_TRY_CHECK_EMPTY=3,c}();b.CheckerHelper=c}(b=a.helper||(a.helper={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c;!function(a){a[a.Closed=0]="Closed",a[a.Init=1]="Init",a[a.Expanded=2]="Expanded"}(c=b.SF_ACTION||(b.SF_ACTION={}));var d=function(){function b(){}return b.init=function(){var b=this,c=this.validSafeFrameContext();if(c)return this.logger.error("init","failed",c),a.formatSumologic.sendError("SF "+c),c;this.eventListenerManager=new a.DOMEventListenerManager;var d=this.geom.par?this.geom.par.w:this.geom.self.w;return window.$sf.ext.register(d,1,function(a,c){return b.eventHandler(a,c)}),this.logger.debug("init - register (width-innerWidth-geom)",d,window.innerWidth,this.geom),this.listenGeom(function(){return b.geom=window.$sf.ext.geom()}),c},b.listenGeom=function(a){var b=this,c=this.geomListener.push(a);return function(){return b.geomListener[c-1]=function(){}}},b.listenFocus=function(a){var b=this,c=this.focusListener.push(a);return function(){return b.focusListener[c-1]=function(){}}},b.initSlot=function(a){var b=this;if(void 0===a&&(a=function(){}),this.logger.debug("initSlot"),0===window.innerWidth){this.logger.debug("initSlot - window.innerWidth=0 so wait for resize");var d,e=function(){0!==window.innerWidth&&(b.logger.debug("SafeFrame - window resize receive - start"),b.eventListenerManager.remove("resize"),d(),a())};this.eventListenerManager.add("resize",window,e),d=this.listenGeom(e)}else if(1===this.geom.self.w&&1===this.geom.self.h)if(window.$sf.ext.supports()["exp-push"]){this.logger.debug("initSlot - 1x1 detected - need to wait to get the slot width available");var f=function(){b.logger.debug("initSlot - 1x1 detected - expand available - get width"),b.processRequest({name:"initial expand",action:function(){return window.$sf.ext.expand({r:b.geom.exp.r,push:!0})},callback:function(d){var e="expanded"===d;b.status=e?c.Init:c.Closed,e&&(b.openWidth=b.geom.exp.r,b.logger.debug("initSlot - 1x1 detected - initial expand done - width",b.openWidth),a())}})};if(this.geom.exp.r)f();else var g=this.listenGeom(function(){b.geom.exp.r&&(g(),f())})}else this.logger.error("initSlot - 1x1 detected - but exp-push not supported");else this.status=c.Expanded,a()},b.open=function(a,b){var d=this;void 0===b&&(b=function(){});var e=function(a){return d.processRequest({name:"open "+a,action:function(){return window.$sf.ext.expand({b:a,r:d.openWidth,push:!0})},callback:function(a){var e="expanded"===a;d.status=e?c.Expanded:c.Closed,b(e)}})},f=this.geom.par?this.geom.par.h:this.geom.self.h,g=a-f;this.status!==c.Expanded&&g>0?window.$sf.ext.supports()["exp-push"]?g<=this.geom.exp.b||this.geom.par?(this.logger.debug("open (askedHeight - currentHeight - allowed - requiredHeight)",a,f,this.geom.exp.b,g),this.status===c.Init?(this.logger.debug("open - slot already open by init - close it before"),this.close(function(){var a=Math.min(Math.floor(window.$sf.ext.geom().exp.b),g);e(a)})):e(g)):(this.logger.debug("open not allowed (askedHeight - currentHeight - allowed - requiredHeight)",a,f,this.geom.exp.b,g),b(!1)):(this.logger.error("open failed - exp-push not supported"),b(!1)):(this.logger.debug("already open (askedHeight - currentHeight - requiredHeight)",a,f,g),b(!0))},b.close=function(a){void 0===a&&(a=function(){}),this.status!==c.Closed?(this.logger.debug("close"),this.processRequest({name:"close",action:function(){return window.$sf.ext.collapse()},callback:function(){return a(!0)}}),this.status=c.Closed):a(!0)},b.validSafeFrameContext=function(){var b="";return a.Context.isIABSafeFrame()||(b="not in IABSafeFrame context"),window.$sf.ext.geom?(this.geom=window.$sf.ext.geom())||(b="window.$sf.ext.geom() return falsy value"):b="window.$sf.ext.geom not present",window.$sf.ext.supports||(b="window.$sf.ext.supports not present"),b},b.processRequest=function(a){a&&(this.logger.debug("processRequest add to list",a.name),this.requestQueue.push(a)),!this.requestCurrent&&this.requestQueue.length&&(this.requestCurrent=this.requestQueue.shift(),this.logger.debug("processRequest - process",this.requestCurrent.name),this.requestCurrent.action())},b.eventHandler=function(b,c){switch(this.logger.debug("event receive",b,c),b){case"expanded":case"collapsed":case"failed":this.requestCurrent&&this.requestCurrent.callback&&this.requestCurrent.callback(b),this.requestCurrent=null,this.processRequest();break;case"geom-update":c.cmd&&"focus-update"===c.cmd?a.ArrayHelper.forEach(this.focusListener,function(a){return a(c)}):a.ArrayHelper.forEach(this.geomListener,function(a){return a(c)});break;case"focus-change":a.ArrayHelper.forEach(this.focusListener,function(a){return a(c)})}},b.status=c.Closed,b.logger=new a.Logger("helper.SafeFrameResize"),b.requestQueue=[],b.geomListener=[],b.focusListener=[],b}();b.SafeFrameResize=d}(b=a.helper||(a.helper={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function b(){}return b.isActive=function(){return a.Cookie.get("teadsDebugInPage").toOption().existsIf(function(a){return"true"===a})},b.showAvoidSlot=function(a,c,d){if(b.isActive()){var e=document.createElement("div");e.setAttribute("id","teadsGhostAvoid"),e.style.position="absolute",e.style.top=c.top+"px",e.style.bottom=c.bottom+"px",e.style.left=c.left+"px",e.style.right=c.right+"px",e.style.width=c.width+"px",e.style.height=c.height+"px",e.style.background="rgba(255, 0, 0, 0.10)",e.style.pointerEvents="none",e.style.color="#F79C9C",e.style.zIndex="9999",e.style.padding="10px",e.innerText="avoidSlot",d.document.body.appendChild(e),a.style.backgroundColor="rgba(255, 0, 0, 0.20)"}},b.showCreativeLimits=function(c,d){void 0===d&&(d=window.document.body),b.hideCreativeLimits(),b.isActive()&&(b.creativeLimits=[b.getDivLine(d,0,c.top,200,c.top,"#0000CC"),b.getDivLine(d,0,c.bottom,200,c.bottom,"#CC0000")],a.ArrayHelper.forEach(b.creativeLimits,function(a){d.appendChild(a)}))},b.hideCreativeLimits=function(){b.isActive&&(a.ArrayHelper.forEach(b.creativeLimits,function(a){a.parentNode.removeChild(a)}),b.creativeLimits=[])},b.getDivLine=function(a,b,c,d,e,f){if(void 0===f&&(f="black"),c<e){var g=c;c=e,e=g,g=b,b=d,d=g}var h,i=Math.abs(b-d),j=Math.abs(c-e),k=(b+d)/2,l=(c+e)/2,m=Math.sqrt(i*i+j*j),n=k-m/2,o=l;i=m/2,h=Math.abs(k-n),j=Math.sqrt(Math.abs(b-n)*Math.abs(b-n)+Math.abs(c-o)*Math.abs(c-o));var p=(j*j-i*i-h*h)/(2*i*h),q=Math.acos(p),r=180*q/Math.PI,s=document.createElementNS("http://www.w3.org/1999/xhtml","div");return s.setAttribute("style","border:1px solid "+f+";width:"+m+"px;height:0px;-moz-transform:rotate("+r+"deg);-webkit-transform:rotate("+r+"deg);position:absolute;top:"+o+"px;left:"+n+"px;"),s},b.creativeLimits=[],b}();b.Debug=c}(b=a.helper||(a.helper={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(a){void 0===a&&(a=c.DEFAULT);var d=b.call(this,"VideoFilter")||this;return d.value=a,d.checkValue(),d}return __extends(c,b),c.prototype.checkValue=function(){a.Utils.isString(this.value)||(this.value=c.DEFAULT)},c.prototype.get=function(){return this.value},c.VALUES={DISABLED:"disabled",ARTICLE:"article",SLOT:"slot"},c.DEFAULT=c.VALUES.DISABLED,c}(b.AbstractOption);b.VideoFilter=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(a){void 0===a&&(a=c.DEFAULT);var d=b.call(this,"ImageFilter")||this;return d.value=a,d.checkValue(),d}return __extends(c,b),c.prototype.checkValue=function(){a.Utils.isString(this.value)||(this.value=c.DEFAULT)},c.prototype.get=function(){return this.value},c.VALUES={DISABLED:"disabled",SLOT:"slot"},c.DEFAULT=c.VALUES.DISABLED,c}(b.AbstractOption);b.ImageFilter=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function b(){}return b.btf=function(b,c){if(!b.placementConfig.btf.isEnabled())return{status:!0,reason:"placement.placementConfig.btf is false"};var d=a.Dom.getScrollTop(b.placementConfig.parentWindow.getWindow()),e=c.getElementRect(),f=a.Dom.getWindowSize(b.placementConfig.parentWindow.getWindow()).height;if(b.placementConfig.belowSelector.get()){var g=b.placementConfig.belowSelector.getFirstElement();g&&(f=Math.max(f,b.placementConfig.belowSelector.getFirstElementRect().bottom))}if(b.placementConfig.insertBefore.isEnabled()){var h=e.top+d;return{status:h>=f,reason:a.Constant.TRACKING.noSlot.btf,information:"top: "+Math.round(h)+" px >= waterline: "+f+" px"}}var i=e.bottom+d;return{status:i>=f,reason:a.Constant.TRACKING.noSlot.btf,information:"bottom: "+Math.round(i)+"px >= waterline: "+f+"px"}},b.minimum=function(b,c){var d=c.getIndex()+1;return d>=b.placementConfig.minimum.get()?{status:!0,reason:""}:{status:!1,reason:a.Constant.TRACKING.noSlot.minimum,information:"slot: "+d+" < config: "+b.placementConfig.minimum.get()}},b.minimumBelow=function(b,c,d){if(!b.placementConfig.belowSelector.get()||null===b.placementConfig.minimumBelow.get())return{status:!0,reason:""};var e=b.placementConfig.belowSelector.getFirstNodeBelowIndex(d),f=c.getIndex();return f>=b.placementConfig.minimumBelow.get()+e-1?{status:!0,reason:""}:{status:!1,reason:a.Constant.TRACKING.noSlot.minimumBelow,information:"slot: "+f+" < config: "+b.placementConfig.minimumBelow.get()}},b.height=function(b,c){var d=650,e=d/a.Constant.DEFAULT_VIDEO_SIZE_RATIO,f=b.initDom(c),g=typeof f,h=("object"===g&&null!==f||"function"===g)&&1===f.nodeType;if(!h)return{status:!1,reason:""};f.style.height="0px",f.style.textAlign="center",""===f.style.maxWidth&&(f.style.maxWidth="100%");var i={x:f.offsetLeft,y:f.offsetTop};f.style.overflow="hidden";var j={x:f.offsetLeft,y:f.offsetTop};f.style.marginTop=.33*e+"px";var k={x:f.offsetLeft,y:f.offsetTop};f.style.marginTop="0";var l=Math.abs(i.y-j.y)<8&&Math.abs(i.y-k.y)<.33*e+8;f.style.position="relative";var m=a.Dom.getSize(f);return m.height=m.width/a.Constant.DEFAULT_VIDEO_SIZE_RATIO,f&&f.parentNode&&f.parentNode.removeChild(f),{status:l,reason:a.Constant.TRACKING.noSlot.position,information:"Check height failed"}},b.avoid=function(b,c){var d={status:!0,reason:""};if(b.placementConfig.avoid.getSlots())for(var e=b.placementConfig.avoid.getSlots(),f=a.Dom.getBoundingClientRect(c.getElement()),g=0,h=0,i=e;h<i.length;h++){var j=i[h];if(c.getElement()===j.getElement()){d.status=!1,d.reason=a.Constant.TRACKING.noSlot.avoid,d.information="AvoidSlot === Slot";break}var k=a.Dom.getBoundingClientRect(j.getElement()),l=b.placementConfig.avoid.getDistance(),m={top:k.top-l,left:k.left-l,bottom:k.bottom+l,right:k.right+l,height:k.height+2*l,width:k.width+2*l};if(a.helper.Debug.showAvoidSlot(j.getElement(),m,b.placementConfig.parentWindow.getWindow()),f.top!==f.bottom){var n={x:Math.max(0,Math.min(f.right,m.right)-Math.max(f.left,m.left)),y:Math.max(0,Math.min(f.bottom,m.bottom)-Math.max(f.top,m.top))};if(g=n.x*n.y){d.status=!1,d.reason=a.Constant.TRACKING.noSlot.avoid,d.information="Avoid - "+Math.ceil(g)+"px2";break}}else if(f.top>m.top&&f.top<m.bottom){d.status=!1,d.reason=a.Constant.TRACKING.noSlot.avoid,d.information="Avoid - slot inside avoid area";break}}return d},b.filter=function(b,c,d){var e={i:c.getIndex(),elt:c.getElement(),elts:d,wrappedSizes:{width:c.getWidth(),height:c.getWidth()/16*9}};return{status:b.placementConfig.filter.trigger(e),reason:a.Constant.TRACKING.noSlot.filter}},b.size=function(b,c){var d={status:!0,reason:""};if(a.Dom.isSelfClosingTag(c.getElement()))return d;for(var e,f={">=":function(a,b){return a>=b},"<=":function(a,b){return a<=b}},g=[{name:"minimumHeight",property:c.getHeight(),score:a.placement.Checker.configScore.MIN_LONG_HEIGHT,operator:">="},{name:"minimumWidth",property:c.getWidth(),score:b.placementConfig.minimumWidth.get(),operator:">="},{name:"maximumHeight",property:c.getHeight(),score:a.placement.Checker.configScore.MAX_LONG_HEIGHT,operator:"<="},{name:"maximumWidth",property:c.getWidth(),score:b.placementConfig.maximumWidth.get(),operator:"<="}],h=0;d.status&&g[h];)if(e=g[h++],d.status=f[e.operator](e.property,e.score),!d.status){d.reason=a.Constant.TRACKING.noSlot.size,d.information=e.name+": "+e.property+" "+e.operator+" "+e.score;break}return d},b.positionTop=function(b,c){if(!b.placementConfig.selector.get())return{status:!0,reason:"placement.placementConfig.selector not set"};var d=c.getElement(),e=a.Dom.getScrollTop(b.placementConfig.parentWindow.getWindow()),f=a.Dom.getBoundingClientRect(d).top,g=f+e>=this.configScore.MIN_POSITION_TOP&&f+e<=this.configScore.MAX_POSITION_TOP;return{status:g,reason:a.Constant.TRACKING.noSlot.position,information:"positionTop: "+this.configScore.MIN_POSITION_TOP+" <= "+(f+e)+" <= "+this.configScore.MAX_POSITION_TOP}},b.position=function(a,c){var d=b.positionTop.apply(b,arguments);return d.status?b.height.apply(b,arguments):d},b.textLength=function(b,c){var d={status:!0,reason:a.Constant.TRACKING.noSlot.content},e=c.getElement(),f=[];a.Dom.getTextContent(e,f);var g=f.join("");return a.Dom.isSelfClosingTag(e)||(d.status=g.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").length>=b.placementConfig.minimumTextLength.get()),d},b.children=function(b,c){var d,e=0,f=c.getElement(),g=f.children||f.childNodes;if(0===g.length)return{status:!0,reason:"children empty"};do if(d=g[e++],"P"===d.nodeName||"DIV"===d.nodeName||"BR"===d.nodeName)return{status:!1,reason:a.Constant.TRACKING.noSlot.content,information:d.nodeName};while(g[e]);return{status:!0,reason:""}},b.content=function(a,b){var c=this.textLength.apply(this,arguments);return c.status?this.children.apply(this,arguments):c},b.video=function(b,c){var d={status:!0,reason:""},e=b.placementConfig.parentWindow.getWindow();return b.placementConfig.videoFilter.get()===a.option.VideoFilter.VALUES.SLOT?a.helper.CheckerHelper.checkVideoPrevNextElement(c.getElement(),e)&&(d.status=!1,d.reason=a.Constant.TRACKING.noSlot.videoSlot,d.information="slot is too close to a video"):b.placementConfig.videoFilter.get()===a.option.VideoFilter.VALUES.ARTICLE&&a.helper.CheckerHelper.checkVideoSiblings(c.getElement(),e)&&(d.status=!1,d.reason=a.Constant.TRACKING.noSlot.videoArticle,d.information="slot container (article) has a video"),d},b.image=function(b,c){var d={status:!0,reason:""},e=b.placementConfig.parentWindow.getWindow();return b.placementConfig.imageFilter.get()===a.option.ImageFilter.VALUES.SLOT&&a.helper.CheckerHelper.checkImagePrevNextElement(c.getElement(),e)&&(d.status=!1,d.reason=a.Constant.TRACKING.noSlot.imageSlot,d.information="slot is too close to an image"),d},b.safeframe=function(b,c){var d={status:!0,reason:""};return a.Context.isIABSafeFrame()&&(d.information=a.helper.SafeFrameResize.init(),d.reason=d.information?a.Constant.TRACKING.noSlot.safeFrame:"",d.status=!d.information),d},b.configScore={MIN_POSITION_TOP:100,MAX_POSITION_TOP:18e3,MIN_LONG_HEIGHT:30,MAX_LONG_HEIGHT:2e3,WIDTH_MARGIN:40,HEIGHT_MARGIN:20,LENGTH_MARGIN:150,LEVEL_POSITION:200},b}();b.Checker=c}(b=a.placement||(a.placement={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function c(b,c){void 0===c&&(c=0),this.scoreValues={WIDTH:20,HEIGTH:20,LENGTH:20,HIGH_MIN_SLOT:-5,LOW_MIN_SLOT:500,EQUAL_MIN_SLOT:1e3},this.element=b,this.index=c;var d=a.Dom.getSize(b);this.width=d.width,this.height=d.height,this.resolveSize()}return c.prototype.resolveSize=function(){var b=this.element.style.overflow;this.element.style.overflow="hidden";var c=a.Dom.getSize(this.element);c.height=c.width/a.Constant.DEFAULT_VIDEO_SIZE_RATIO,this.element.style.overflow=b,this.width=c.width,this.height=c.height},c.prototype.getElement=function(){return this.element},c.prototype.getElementRect=function(){return this.elementRect?this.elementRect:(this.elementRect=a.Dom.getBoundingClientRect(this.element),this.elementRect)},c.prototype.getWidth=function(){return this.width},c.prototype.getHeight=function(){return this.height},c.prototype.getScore=function(){return this.score},c.prototype.getIndex=function(){return this.index},c.prototype.computeScore=function(c){var d=b.Checker.configScore,e=0,f=c.minimum.get(),g=c.parentWindow.getWindow();this.width>c.minimumWidth.get()+d.WIDTH_MARGIN&&(e+=this.scoreValues.WIDTH),this.height>d.MIN_LONG_HEIGHT+d.HEIGHT_MARGIN&&(e+=this.scoreValues.HEIGTH),this.height>c.minimumTextLength.get()+d.LENGTH_MARGIN&&(e+=this.scoreValues.LENGTH),e+=this.index>f+d.LENGTH_MARGIN?this.scoreValues.EQUAL_MIN_SLOT:this.index>=0&&f?this.scoreValues.HIGH_MIN_SLOT:this.scoreValues.LOW_MIN_SLOT;var h=a.Dom.getBoundingClientRect(this.getElement()),i=g.document.body||g.document.documentElement,j=h.top+(g.pageYOffset||i.scrollTop);e-=j/20,this.score=e},c}();b.Slot=c}(b=a.placement||(a.placement={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(c,d,e){var f=b.call(this,c,d,e,a.Constant.SLOT_TYPE.corner)||this;return f.placement=c,f.config=d,f.player=e,f}return __extends(c,b),c.prototype.fitContainerToContent=function(a){return null},c.prototype.load=function(c,d){var e=this,f=a.Dom.getBoundingClientRect(this.playerContainer).width;this.playerContainer.style.setProperty("right","-"+String(f)+"px","important"),a.ArrayHelper.forEach(["","-webkit-","-moz-","-o-","-ms-"],function(a){e.playerContainer.style.setProperty(a+"transition",".3s linear all","important")}),b.prototype.load.call(this,c,d)},c.prototype.getTemplateName=function(){return"inread"},c.prototype.getViewportInViewState=function(){return!0},c.prototype.close=function(b){var c=this,d=a.Dom.getBoundingClientRect(this.playerContainer).width;a.Semver.isLowerOrEqual(a.Context.getIEVersion(),"9")?this.exit(b):this.eventListenerManager.addMultiple(["transitionend","otransitionend","oTransitionEnd","webkitTransitionEnd"],this.parentContainer,function(){c.exit(b)}),this.playerContainer.style.setProperty("right",-(d||500)+"px","important")},c.prototype.onAdLoaded=function(){b.prototype.onAdLoaded.call(this),this.smartPositionHelper.init(),this.smartPositionHelper.start();var a=this.smartPositionHelper.getOptimalDimension();this.playerContainer.style.setProperty("right","-"+String(a.width)+"px","important"),this.parentContainer.style.setProperty("width",a.width+"px"),this.parentContainer.style.setProperty("height",a.height+"px"),this.vpaidAd.startAd()},c.prototype.onAdVideoStart=function(){b.prototype.onAdVideoStart.call(this),this.openFormat()},c.prototype.onVpaidReady=function(){b.prototype.onVpaidReady.call(this),this.placement.placementTracker.handleMirroringEvent(),this.fullscreenHelper=new a.helper.FullscreenHelper(this.parentContainer,this.vpaidAd,this.components,this.responsive,this.win,this.playerContainer),this.formatConfig.smartPosition.setValue({corner:!0,top:!1}),this.smartPositionHelper=new a.helper.SmartPosition(this)},c.prototype.openFormat=function(){var a=this;this.states.hasOpened=!0,setTimeout(function(){a.placement.placementConfig.css.applyRulesOn(a.parentContainer),a.playerContainer.style.setProperty("right","0px","important")},0)},c.prototype.replay=function(){this.smartPositionHelper.deinit(),b.prototype.replay.call(this)},c.STYLE_NODE_ID="teads-slider",c}(b.AbstractFormat);b.Slider=c}(b=a.format||(a.format={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function b(){}return b.has=function(a){return!!b.getExtensions(a).length},b.getExtensions=function(a){for(var c=[],d=0,e=a.extensions.length;d<e;d++)a.extensions[d].type===b.EXTENSION_TYPE&&c.push(a.extensions[d]);return c},b.get=function(a){for(var c=[],d=b.getExtensions(a),e=0,f=d.length;e<f;e++)c.push(b.parse(d[e]));var g=b.merge(c);if(!g.parallax.landscape||!g.parallax.portrait)throw b.EXTENSION_TYPE+" extensions assets landscape or portrait asset are missing from LinearAd";return g},b.parse=function(c){if(c.type!==b.EXTENSION_TYPE)throw'extension is not type of "'+b.EXTENSION_TYPE+'"';var d={parallax:{landscape:"",portrait:""},expand:{site:""},tracking:{}};try{d.parallax.landscape=a.vast.XMLHelper.getNodeContent(c.xml.getElementsByTagName("Landscape")[0]),d.parallax.portrait=a.vast.XMLHelper.getNodeContent(c.xml.getElementsByTagName("Portrait")[0])}catch(a){throw"Invalid XML for parallax "+a}try{d.expand.site=a.vast.XMLHelper.getNodeContent(c.xml.getElementsByTagName("Site")[0])}catch(a){throw"Invalid XML for expand "+a}for(var e=c.xml.getElementsByTagName("Tracking"),f=0,g=e.length;f<g;f++)for(var h=e[f],i=0,j=h.attributes.length;i<j;i++){var k=h.attributes[i].name,l=a.vast.XMLHelper.getAttributeValue(h,k);if("event"===k){var m=a.vast.XMLHelper.getNodeContent(h),n=!1,o=void 0;l===b.TRACKINGEVENTS_OPEN?n=!0:l===b.TRACKINGEVENTS_PROGRESS&&(n=!0,o=a.Utils.seconds(a.vast.XMLHelper.getAttributeValue(h,"offset"))),n&&(d.tracking[l]=d.tracking[l]||[],d.tracking[l].push({url:m,offset:o}))}}return d},b.merge=function(a){if(!a[0])throw"at least one IVASTExtensionHybrid is required";for(var c=a[0],d=1,e=a.length;d<e;d++){var f=a[d];for(var g in f.tracking)c.tracking[g]?b.mergeTracking(c.tracking[g],f.tracking[g]):c.tracking[g]=f.tracking[g];!c.parallax.landscape&&f.parallax.landscape&&(c.parallax.landscape=f.parallax.landscape),!c.parallax.portrait&&f.parallax.portrait&&(c.parallax.portrait=f.parallax.portrait),!c.expand.site&&f.expand.site&&(c.expand.site=f.expand.site)}return c},b.mergeTracking=function(a,c){for(var d=0,e=c.length;d<e;d++)b.resourceExists(a,c[d])||a.push(c[d])},b.resourceExists=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c].url===b.url&&a[c].offset===b.offset)return!0;return!1},b.TRACKINGEVENTS_OPEN="open-expand",b.TRACKINGEVENTS_PROGRESS="open",b.EXTENSION_TYPE="t-hybrid",b}();b.HybridExtension=c}(b=a.parser||(a.parser={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(){var c=null!==b&&b.apply(this,arguments)||this;return c.sumologicPrefix="hybrid",c.sumologicEvents={videoClose:"videoClose",countdownStart:"countdownStart",openExpand:"openExpand"},c.sumologicData={source:{portrait:"portrait",landscape:"landscape",video:"video"},type:{click:"click",countdown:"countdown"}},c.formatRatio=a.Constant.INREAD_IMPACT_BASE_HEIGHT/a.Constant.INREAD_IMPACT_BASE_WIDTH,c}return __extends(c,b),c.prototype.start=function(){var c=this;try{this.hybrid=a.parser.HybridExtension.get(this.linearAd)}catch(b){var d=a.VastException.XML_PARSE;return d.message+=" : "+b,void this.placement.onVastError(new a.Exception(d),function(){c.placement.initFormatInstance(null,c.placement.handleNoAd()),c.start()})}this.initClickableCountdown(),this.tracker=new a.tracker.Tracker(a.Option.of([{name:a.parser.HybridExtension.TRACKINGEVENTS_OPEN,multiple:!1,resources:this.hybrid.tracking[a.parser.HybridExtension.TRACKINGEVENTS_OPEN]},{name:a.parser.HybridExtension.TRACKINGEVENTS_PROGRESS,multiple:!0,resources:this.hybrid.tracking[a.parser.HybridExtension.TRACKINGEVENTS_PROGRESS]}]),a.Option.empty()),this.playerContainer.style.width="65%",b.prototype.start.call(this)},c.prototype.close=function(){},c.prototype.onAdLoaded=function(){b.prototype.onAdLoaded.call(this),this.initParallax()},c.prototype.onAdVideoThirdQuartile=function(){this.initEndParallax()},c.prototype.onAdVideoComplete=function(){b.prototype.onAdVideoComplete.call(this),this.vpaidAd.stopAd(),this.displayEndScreen()},c.prototype.onAdClickThru=function(){this.sendSumologicData(this.sumologicEvents.openExpand,this.sumologicData.source.video,this.sumologicData.type.click),this.openExpand()},c.prototype.onVpaidReady=function(){var c=this;b.prototype.onVpaidReady.call(this),this.player.getPlugin("ClickThrough").deinit(),a.Dom.addEventListener("resize",this.win,function(){return c.onAdSizeChange()}),this.vpaidAd.subscribe(function(){return c.onAdClickThru()},a.vpaid.VPAIDEvent.AdClickThru),this.vpaidAd.subscribe(function(){return c.onAdVideoThirdQuartile()},a.vpaid.VPAIDEvent.AdVideoThirdQuartile)},c.prototype.initInternalResponsive=function(){},c.prototype.collapse=function(){this.displayEndScreen()},c.prototype.getInnerOffsetTop=function(){var b=0,c=this.components.getComponent("label"),d=c?c.getElement():null;return d&&d.parentNode&&(b=a.Dom.getBoundingClientRect(d).height),b},c.prototype.initClickableCountdown=function(){var b=this;this.clickableCountdown=document.createElement("div"),this.clickableCountdown.style.cursor="pointer",this.clickableCountdown.style.position="absolute",this.clickableCountdown.style.right="0",this.clickableCountdown.className=a.helper.Countdown.CSSCLASSES.countdownMainContainer,this.placement.getInnerContainer().appendChild(this.clickableCountdown);var c=function(){var a=b.endscreenIsDisplayed?b.sumologicData.source.landscape:b.sumologicData.source.portrait;b.sendSumologicData(b.sumologicEvents.openExpand,a,b.sumologicData.type.countdown),b.openExpand()},d=function(){var a=b.endscreenIsDisplayed?b.sumologicData.source.landscape:b.sumologicData.source.portrait;b.sendSumologicData(b.sumologicEvents.openExpand,a,b.sumologicData.type.click),b.openExpand()};this.countdownContainer=document.createElement("div"),this.clickableCountdown.appendChild(this.countdownContainer);var e=document.createElement("div");e.className=a.helper.Countdown.CSSCLASSES.countdownClickZone,this.clickableCountdown.appendChild(e),this.countdown=new a.helper.Countdown(this.clickableCountdown,e,this.countdownContainer,function(){return c()},function(){return d()},this.win),this.resizeClickableCountdown(),a.Dom.addEventListener("click",e,function(){}),a.Dom.addEventListener("mouseover",e,function(){return b.countdown.show()}),a.Dom.addEventListener("mouseout",e,function(){return b.countdown.hide()})},c.prototype.resizeClickableCountdown=function(){if(this.clickableCountdown){var a=this.getRightParallaxWidth();this.clickableCountdown.style.width=a+"px",this.clickableCountdown.style.height=this.adHeight+"px",this.clickableCountdown.style.top=this.getInnerOffsetTop()+"px"}},c.prototype.initParallax=function(){var a=this;this.parallaxRight=document.createElement("div"),this.parentContainer.insertBefore(this.parallaxRight,this.parentContainer.firstChild);var b=new Image;b.onload=function(){a.parallaxRightWidth=b.width,a.parallaxRightHeight=b.height,a.resizeParallax()},b.src=this.hybrid.parallax.portrait},c.prototype.initEndParallax=function(a){var b=this;if(!this.parallaxEnd){this.parallaxEnd=document.createElement("div"),this.parallaxEnd.style.display="none",this.parentContainer.insertBefore(this.parallaxEnd,this.parentContainer.firstChild);var c=new Image;c.onload=function(){b.parallaxEndWidth=c.width,b.parallaxEndHeight=c.height,b.resizeParallax(),a&&"function"==typeof a&&a()},c.src=this.hybrid.parallax.landscape}},c.prototype.resizeParallax=function(){var b=this.getInnerOffsetTop(),d=a.Dom.getBoundingClientRect(this.parentContainer).left;if(this.placement.getInnerContainer().style.marginTop="-"+(this.adHeight+b)+"px",this.parallaxRight&&this.parallaxRightWidth){var e=this.adWidth/this.parallaxRightWidth,f=e*this.parallaxRightHeight;this.parallaxRight.style.background="url("+this.hybrid.parallax.portrait+") repeat-y "+d+"px 50% / "+this.adWidth+"px "+f+"px fixed transparent",this.parallaxRight.style.width=this.adWidth+"px",this.parallaxRight.style.height=this.adHeight+"px",this.parallaxRight.style.marginTop=b+"px",this.parallaxRight.style.marginLeft="0",this.parallaxRight.className=c.CSSCLASSES.parallaxRight}if(this.parallaxEnd&&this.parallaxEndWidth){var e=this.adWidth/this.parallaxEndWidth,f=e*this.parallaxEndHeight;this.parallaxEnd.style.background="url("+this.hybrid.parallax.landscape+") repeat-y "+d+"px 50% / "+this.adWidth+"px "+f+"px fixed transparent",this.parallaxEnd.style.width=this.adWidth+"px",this.parallaxEnd.style.height=this.adHeight+"px",this.parallaxEnd.style.marginTop=b+"px",this.parallaxEnd.style.marginLeft="0",this.parallaxEnd.className=c.CSSCLASSES.parallaxEnd}},c.prototype.updateAdSize=function(){this.adWidth=a.Dom.getBoundingClientRect(this.parentContainer).width,this.adHeight=this.endscreenIsDisplayed?this.adWidth*this.formatRatio:this.vpaidAd.getAdHeight(),this.playerContainer.style.height=this.adHeight+"px",this.fitContainerToContent(),this.resizeClickableCountdown(),this.resizeParallax()},c.prototype.displayEndScreen=function(){var a=this;if(!this.endscreenIsDisplayed){this.endscreenIsDisplayed=!0,this.playerContainer.style.height=this.adHeight+"px",this.playerContainer.style.visibility="hidden",this.parallaxRight.parentNode&&this.parallaxRight.parentNode.removeChild(this.parallaxRight);var b=function(){return a.parallaxEnd.style.display="block"};this.initEndParallax(b),b(),this.updateAdSize()}},c.prototype.openExpand=function(){var b=this;this.countdown.hide();var c,d=this.hybrid.expand.site||this.linearAd.clickThrough[0],e=function(){b.vpaidAd.collapseAd(),b.vpaidAd.resumeAd(),clearInterval(c)},f=function(){b.tracker.track(a.parser.HybridExtension.TRACKINGEVENTS_OPEN);var d=1e3,e=0;c=setInterval(function(){e+=d,b.tracker.track(a.parser.HybridExtension.TRACKINGEVENTS_PROGRESS,{},e/d)},d)};a.helper.ExpandHelper.openExpand(this.placement.getInnerContainer(),this.formatConfig,d,f,e),this.tracker.track(a.parser.HybridExtension.TRACKINGEVENTS_OPEN),this.vpaidAd.pauseAd()},c.prototype.getRightParallaxWidth=function(){var b=a.Dom.getBoundingClientRect(this.parentContainer).width;return this.endscreenIsDisplayed?b:.35*b},c.prototype.sendSumologicData=function(b,c,d){a.formatSumologic.sendInfo(this.sumologicPrefix+" "+b+" "+(c?c+" ":"")+(d?d+" ":"")+this.getCurrentTime())},c.CSSCLASSES={parallaxRight:"teads-impact-parallax-portrait",parallaxEnd:"teads-impact-parallax-landscape"},c}(b.Inread);b.InreadImpact=c}(b=a.format||(a.format={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(c,d,e,f){var g=b.call(this,c,d,f)||this;return g.placement=c,g.formatConfig=d,g.ad=e,g.isExpand=!1,g.hasTrackedImpression=!1,g.visibleOffset=0,g.fixedBackgroundHelper=new a.helper.FixedBackground(g.placement.getPlayerContainer(),g.placement.getParentContainer(),function(){return g.handleResize()}),g.slot=g.placement.getElectedSlot().getElement(),g.asset=g.ad.creative.asset,g.clickThrough=g.ad.clickThrough.length?g.ad.clickThrough[0]:null,a.Context.isDesktop()&&(g.isExpand=!!g.ad.expand.length&&g.ad.expand[0]),g.rolloverCountdown=g.ad.rolloverCountdown.length?g.ad.rolloverCountdown[0]:null,g.closeCountdown=g.ad.closeCountdown.length?g.ad.closeCountdown[0]:null,g.isParallax="parallax"===g.ad.creative.type,g.tracker=new a.tracker.Tracker(a.Option.of([{name:a.Constant.TRACKING.impression,multiple:!1,resources:g.ad.tracking[a.Constant.TRACKING.impression]},{name:a.Constant.TRACKING.openExpand,multiple:!1,resources:g.ad.tracking[a.Constant.TRACKING.openExpand]},{name:a.Constant.TRACKING.open,
multiple:!0,resources:g.ad.tracking[a.Constant.TRACKING.open]},{name:a.Constant.TRACKING.visible,multiple:!0,resources:g.ad.tracking[a.Constant.TRACKING.visible]},{name:a.Constant.TRACKING.click,multiple:!0,resources:g.ad.tracking[a.Constant.TRACKING.click]}]),a.Option.of(a.formatSumologic.getSessionId())),g}return __extends(c,b),c.prototype.load=function(){var b=this;this.fixedBackgroundHelper.loadImage(this.asset.url,function(c,d){if(c)d.forEach(function(a){b.asset.width=a.naturalWidth,b.asset.height=a.naturalHeight}),b.logger.info("AdLoaded"),b.wigoi&&b.wigoi.valid(3,2),a.Context.isIABSafeFrame()?a.helper.SafeFrameResize.initSlot(function(){return b.start()}):b.start();else{var e=d.map(function(){return a.VastException.MEDIAFILE_DISPLAY}).getOrElse(function(){return a.VastException.FILE_NOT_FOUND});b.placement.onVastError(new a.VastException(e),function(){b.placement.initFormatInstance(null,b.placement.handleNoAd(),b.ad),b.start()})}})},c.prototype.start=function(){var b=this;if(this.components.showAllComponents(),this.playerContainer.innerHTML="",this.initContainers(),this.assembleContainers(),this.initUi(),this.handleResize(),a.Context.isAmp())this.win.context.observeIntersection(function(a){return b.onScroll(new Event("touchmove"))});else{var c=this.placement.placementConfig.scrollSelector.getSlot();this.eventListenerManager.add("scroll",c,function(){return b.onScroll()}),this.eventListenerManager.addMultiple(["touchstart","touchmove","touchend"],c,function(a){return b.onScroll(a)})}this.onScroll()},c.prototype.close=function(a){this.isParallax&&this.fixedBackgroundHelper.destroy(),b.prototype.close.call(this,a)},c.prototype.openFormat=function(){b.prototype.openFormat.call(this),this.handleResize(),this.logger.info("AdStarted"),this.wigoi&&this.wigoi.valid(3,3)},c.prototype.initContainers=function(){var b=this;this.isParallax&&(this.fixedBackgroundHelper.initContainer(),this.displayContainer=this.fixedBackgroundHelper.getBaseContainer()),this.clickZone=this.win.document.createElement("div"),this.clickZone.className=a.helper.FixedBackground.CSSCLASSES.clickZone,this.isExpand&&this.clickThrough&&(this.countdownContainer=document.createElement("div"),this.countdown=new a.helper.Countdown(this.playerContainer,this.clickZone,this.countdownContainer,function(){return b.openExpand()},function(){return b.openExpand()},this.win,this.rolloverCountdown))},c.prototype.assembleContainers=function(){this.isParallax&&(this.fixedBackgroundHelper.append(),this.isExpand&&this.clickThrough&&this.displayContainer.appendChild(this.countdownContainer)),this.playerContainer.appendChild(this.clickZone)},c.prototype.initUi=function(){var b=this;if(this.clickThrough?(this.clickZone.style.cursor="pointer",this.initClickArea()):a.Dom.addEventListener("click",this.clickZone,function(){return b.tracker.track(a.Constant.TRACKING.click)}),this.isParallax){var c={disable:!0};this.closeButton=new a.helper.DisplayCloseButton(c,this.playerContainer,function(){return b.close(a.EXIT_STATUS.AdSuccess)},this.win),this.fixedBackgroundHelper.canUseBackgroundAttachment()||(this.visualCloseButton=new a.helper.DisplayCloseButton(c,this.displayContainer,function(){},this.win))}},c.prototype.initClickArea=function(){var b=this;this.isExpand?(a.Dom.addEventListener("mouseover",this.clickZone,function(){return b.showCountdown()}),a.Dom.addEventListener("mouseout",this.clickZone,function(){return b.hideCountdown()})):a.Dom.addEventListener("click",this.clickZone,function(){b.tracker.track(a.Constant.TRACKING.click),window.open(b.clickThrough)})},c.prototype.handleResize=function(){var b=a.Dom.getBoundingClientRect(this.parentContainer),d=b.width,e=d/c.RATIO;if(this.playerContainer.style.height=Math.round(e)+"px",this.playerContainer.style.width=Math.round(d)+"px",this.fixedBackgroundHelper.resizeContainer(),this.states.hasOpened){var f=e;for(var g in this.components.getComponents())if(this.components.getComponents().hasOwnProperty(g)){var h=this.components.getComponent(g);f+=a.Dom.getBoundingClientRect(h.getElement()).height}this.parentContainer.style.height=Math.round(f)+"px"}},c.prototype.onScroll=function(a){var b=this.getInViewState();this.trackAdCall(b),this.states.hasOpened||(this.formatConfig.launch.isAuto()||this.formatConfig.launch.isThreshold()&&b)&&this.openFormat(),this.manageInView(b)},c.prototype.getViewportInViewState=function(){return a.HTMLHelper.isInView(this.parentContainer,this.win,this.formatConfig.threshold.get()/100,this.getAdHeight())},c.prototype.startInView=function(){var b=this;this.hasTrackedImpression||(this.tracker.track(a.Constant.TRACKING.impression,this.getTrackingMacros()),this.hasTrackedImpression=!0);var d=1e3,e=function(){return clearInterval(b.visibleTimer)};this.visibleTimer=setInterval(function(){b.visibleOffset+=d;var f=b.visibleOffset/1e3;b.tracker.track(a.Constant.TRACKING.visible,b.getTrackingMacros(),f),f>=c.MAX_VISIBLE_OFFSET&&e()},d),this.closeButton.resumeCoutdown(),this.fixedBackgroundHelper.canUseBackgroundAttachment()||this.visualCloseButton.resumeCoutdown()},c.prototype.endInView=function(){clearInterval(this.visibleTimer),this.closeButton.pauseCoutdown(),this.fixedBackgroundHelper.canUseBackgroundAttachment()||this.visualCloseButton.pauseCoutdown()},c.prototype.showCountdown=function(){this.closeButton.hide(),this.fixedBackgroundHelper.canUseBackgroundAttachment()||this.visualCloseButton.hide(),this.countdown.show()},c.prototype.hideCountdown=function(){this.countdown.hide(),this.closeButton.show(),this.fixedBackgroundHelper.canUseBackgroundAttachment()||this.visualCloseButton.show()},c.prototype.openExpand=function(){var b=this;this.hideCountdown();var d,e=function(){return clearInterval(d)},f=function(){b.tracker.track(a.Constant.TRACKING.openExpand,b.getTrackingMacros());var f=5e3,g=0;d=setInterval(function(){g+=f;var d=g/1e3;b.logger.debug("open currentOffset",d),b.tracker.track(a.Constant.TRACKING.open,b.getTrackingMacros(),d),d>=c.MAX_OPEN_OFFSET&&e()},f)};a.helper.ExpandHelper.openExpand(this.placement.getInnerContainer(),this.formatConfig,this.clickThrough,f,e,this.closeCountdown)},c.prototype.getAdHeight=function(){var b=a.Dom.getBoundingClientRect(this.playerContainer);return b.height||1},c.prototype.getTrackingMacros=function(){var b=Math.ceil(100*a.HTMLHelper.getPercentageInView(this.playerContainer,this.win,this.getAdHeight()));return(b<0||!a.HTMLHelper.getRealVisibilityState(this.playerContainer))&&(b=0),c={},c[a.vast.TrackingMacro.VIEWABILITY]=""+b,c;var c},c.RATIO=a.Context.isMobile()?16/9:2.35,c.MAX_VISIBLE_OFFSET=1,c.MAX_OPEN_OFFSET=30,c}(b.Inread);b.InreadDisplay=c}(b=a.format||(a.format={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(d,e){void 0===d&&(d=c.DEFAULT),void 0===e&&(e=null);var f=b.call(this,"Capping")||this;return f.capping=d,f.pid=e,f.checkValue(),f.capping&&f.pid?a.Store.get("teadsCapping"+f.pid).filter(function(b){return b.expiry>=a.date.now()}).match({some:function(a){f.capping.counter=a.counter,f.capping.expiry=new Date(a.expiry)},none:function(){f.logger.debug("Capping has expired, resetting"),f.capping.counter=f.capping.frequency||1,f.capping.expiry=new Date(a.date.now()+1e3*c.durations[f.capping.unit])}}):f.logger.debug("No capping"),f}return __extends(c,b),c.prototype.checkValue=function(){a.Utils.isObject(this.capping)||(this.capping=c.DEFAULT),(!a.Utils.isNumber(this.pid)||this.pid<=0)&&(this.pid=null)},c.prototype.reached=function(){return this.capping&&this.capping.counter<=0},c.prototype.record=function(){var b=this;a.Option.of(this.capping).map(function(a){return{counter:a.counter-1,expiry:a.expiry.getTime()}}).forEach(function(c){b.logger.debug("Record capping data:",c),a.Store.set("teadsCapping"+b.pid,c)})},c.durations={second:1,minute:60,hour:3600,day:86400,week:604800,month:2592e3},c.VALUES={UNIT:"unit",FREQUENCY:"frequency"},c.DEFAULT=null,c}(b.AbstractOption);b.Capping=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(a){void 0===a&&(a=c.DEFAULT);var d=b.call(this,"Desktop")||this;return d.value=a,d.checkValue(),d}return __extends(c,b),c.prototype.checkValue=function(){a.Utils.isBoolean(this.value)||(this.value=c.DEFAULT)},c.prototype.isEnabled=function(){return this.value},c.DEFAULT=!0,c}(b.AbstractOption);b.Desktop=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c;!function(a){a[a.Clean=0]="Clean",a[a.Close=1]="Close",a[a.Open=2]="Open"}(c=b.AMP_ACTION||(b.AMP_ACTION={}));var d=function(){function b(){}return b.init=function(){a.Context.isAmp()&&b.getChangesRect()&&!b.isInitialized()&&(b.rootBounds=b.getChangesRect().rootBounds,b.width=a.Context.isDesktop()?window.innerWidth:Math.min(Math.min(b.rootBounds.width,b.rootBounds.height),window.innerWidth),b.width!==window.innerWidth&&(b.width-=2*window.context.initialIntersection.boundingClientRect.left),b.initialized||(b.bindEvents(),b.getChangesRect().boundingClientRect.height>10&&(b.close(),a.formatSumologic.sendError("AMP tag malformed "+window.context.location.href)),b.initialized=!0),b.status!==c.Open&&b.action!==c.Open||b.open())},b.isInitialized=function(){return!!b.rootBounds&&(b.initialized&&window._teads_amp.change.rootBounds.width===b.rootBounds.width)},b.clean=function(a,d){void 0===a&&(a=function(){}),void 0===d&&(d=!1),b.action=c.Clean,b.initialized&&b.recursive(0,a,b.action,d)},b.close=function(a,d){void 0===a&&(a=function(){}),void 0===d&&(d=!1),b.action=c.Close,b.initialized&&b.recursive(1,a,b.action,d)},b.open=function(a,d,e){void 0===a&&(a=null),void 0===d&&(d=function(){}),void 0===e&&(e=!1),b.action=c.Open,b.initialized&&b.recursive(a?a:b.getHeight(),d,b.action,e)},b.getHeight=function(){return Math.ceil(b.width/b.ratio)},b.isOpen=function(){return b.status===c.Open},b.setCreativeInformation=function(a){var c="teads-";a?(c+=a.id?a.id:"0",c+="-",c+=a.creativeId?a.creativeId:"0"):c+="0",b.creativeId=c},b.noContentAvailable=function(){window.context&&a.Utils.isFunction(window.context.noContentAvailable)&&!b.hasCalled.noContentAvailable&&(b.hasCalled.noContentAvailable=!0,b.logger.debug("noContentAvailable"),window.context.noContentAvailable())},b.renderStart=function(){if(window.context&&a.Utils.isFunction(window.context.renderStart)&&!b.hasCalled.renderStart){b.hasCalled.renderStart=!0;var c={height:b.getHeight(),width:b.width};b.logger.debug("renderStart",c),window.context.renderStart(c)}},b.reportRenderedEntityIdentifier=function(){if(b.creativeId&&window.context&&a.Utils.isFunction(window.context.reportRenderedEntityIdentifier)&&!b.hasCalled.reportRenderedEntityIdentifier){b.hasCalled.reportRenderedEntityIdentifier=!0;var c="teads-"+b.creativeId;b.logger.debug("reportRenderedEntityIdentifier",c),window.context.reportRenderedEntityIdentifier(c)}},b.getChangesRect=function(){return window._teads_amp.change&&window.context.initialIntersection?(window._teads_amp.change||(window._teads_amp.change=window.context.initialIntersection),window._teads_amp.change):null},b.bindEvents=function(){window.context.onResizeDenied(function(a,c){return b.checkResize(a,c,!1)}),window.context.onResizeSuccess(function(a,c){return b.checkResize(a,c,!0)})},b.recursive=function(a,c,d,e){b.resize(a,function(f){var g="function"==typeof e?e():e;f||g?(b.action=null,b.status=f?d:null,c(f),b.isOpen()&&b.reportRenderedEntityIdentifier()):b.action===d&&setTimeout(function(){return b.recursive(a,c,d,g)},100)})},b.resize=function(c,d){a.Context.isAmp()&&window.context.requestResize&&b.initialized&&(b.resizeRequests.push({width:b.width,height:c,done:!1,callback:d}),window.context.requestResize(b.width,c),b.logger.warn("amp request resize",b.width,c))},b.checkResize=function(c,d,e){a.ArrayHelper.forEach(b.resizeRequests,function(a){c!==a.height||d!==a.width||a.done||(a.done=!0,a.callback(e))}),e?b.logger.warn("amp request resize success",d,c):b.logger.error("amp request resize denied",d,c)},b.ratio=4/3,b.resizeRequests=[],b.logger=new a.Logger("helper.Amp"),b.hasCalled={noContentAvailable:!1,renderStart:!1,reportRenderedEntityIdentifier:!1},b}();b.Amp=d}(b=a.helper||(a.helper={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(a){void 0===a&&(a=c.DEFAULT);var d=b.call(this,"Fallback")||this;return d.value=a,d.called=!1,d.checkValue(),d}return __extends(c,b),c.prototype.checkValue=function(){a.Utils.isFunction(this.value)||(this.value=c.DEFAULT)},c.prototype.trigger=function(b){if(!this.value||this.called)return!1;try{var c=this.value.call(b);if(this.called=!0,c===a.Constant.INTERNAL_PASSBACK_NO_PASSBACK)return this.value=null,!1}catch(b){a.Context.isAmp()&&a.helper.Amp.clean(),this.logger.error("the fallback threw an error:",b)}return!0},c.prototype.hasValue=function(){return!!this.value},c.DEFAULT=null,c}(b.AbstractOption);b.Fallback=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(a){void 0===a&&(a=c.DEFAULT);var d=b.call(this,"Mobile")||this;return d.value=a,d.checkValue(),d}return __extends(c,b),c.prototype.checkValue=function(){a.Utils.isBoolean(this.value)||(this.value=c.DEFAULT)},c.prototype.isEnabled=function(){return this.value},c.DEFAULT=!0,c}(b.AbstractOption);b.Mobile=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(a){void 0===a&&(a=c.DEFAULT);var d=b.call(this,"ParentWindow")||this;if(d.value=a,d.win=window,d.checkValue(),d.value)try{window.top.document&&(d.win=window.top)}catch(a){d.logger.warn("parentWindow option is enabled but parent window is not accessible",a)}return d}return __extends(c,b),c.prototype.checkValue=function(){a.Utils.isBoolean(this.value)||(this.value=c.DEFAULT)},c.prototype.getWindow=function(){return this.win},c.prototype.getValue=function(){return this.value},c.DEFAULT=!0,c}(b.AbstractOption);b.ParentWindow=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(a){void 0===a&&(a=c.DEFAULT);var d=b.call(this,"Pid")||this;return d.value=a,d.checkValue(),d}return __extends(c,b),c.prototype.checkValue=function(){if(!a.Utils.isNumber(this.value)||this.value<=0)throw new a.FormatException(a.FormatException.OPTION_PID_INVALID)},c.prototype.get=function(){return this.value},c.DEFAULT=null,c}(b.AbstractOption);b.Pid=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(a){void 0===a&&(a=c.DEFAULT);var d=b.call(this,"RpmFallback")||this;return d.value=a,d.called=!1,d.checkValue(),d}return __extends(c,b),c.prototype.checkValue=function(){a.Utils.isFunction(this.value)||(this.value=c.DEFAULT)},c.prototype.trigger=function(a){if(!this.value||this.called)return!1;try{this.value.call(a),this.called=!0}catch(a){this.logger.error("the rpmFallback threw an error:",a)}return!0},c.DEFAULT=null,c}(b.AbstractOption);b.RpmFallback=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(a){void 0===a&&(a=c.DEFAULT);var d=b.call(this,"Tablet")||this;return d.value=a,d.checkValue(),d}return __extends(c,b),c.prototype.checkValue=function(){a.Utils.isBoolean(this.value)||(this.value=c.DEFAULT)},c.prototype.isEnabled=function(){return this.value},c.DEFAULT=!0,c}(b.AbstractOption);b.Tablet=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(a,d){void 0===a&&(a=c.DEFAULT),void 0===d&&(d=null);var e=b.call(this,"Auto")||this;return e.value=a,d&&null!==d.get()&&(e.value=!1),e.checkValue(),e}return __extends(c,b),c.prototype.checkValue=function(){a.Utils.isBoolean(this.value)||(this.value=c.DEFAULT)},c.prototype.isEnabled=function(){return this.value},c.prototype.set=function(a){this.value=a},c.DEFAULT=!0,c}(b.AbstractOption);b.Auto=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(a,d){void 0===a&&(a=c.DEFAULT),void 0===d&&(d=window);var e=b.call(this,"Avoid")||this;return e.value=a,e.win=d,e.checkValue(),e}return __extends(c,b),c.prototype.checkValue=function(){a.Utils.containsKeys(c.VALUES,this.value)||(this.value=c.DEFAULT)},c.prototype.get=function(){return this.value},c.prototype.getSlots=function(){if(this.value){var b=[],c=this.value.selector;if("string"==typeof c&&c.length>0)for(var d=a.Dom.querySelectorAll(c,this.win),e=0;e<d.length;e++)b.push(new a.placement.Slot(d[e],e));else a.Dom.isHTMLElement(c)&&b.push(new a.placement.Slot(c));return b}},c.prototype.getDistance=function(){return this.value.distance},c.VALUES={SELECTOR:"selector",DISTANCE:"distance"},c.DEFAULT=null,c}(b.AbstractOption);b.Avoid=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(teads){var option;!function(option){var AbstractSelector=function(_super){function AbstractSelector(a){var b=_super.call(this,a)||this;return b.screenSizes={mobile:"[WIDTH]<768",tablet:"[WIDTH]>=768 && [WIDTH]<992",desktop:"[WIDTH]>=992 && [WIDTH]<1200",large:"[WIDTH]>=1200"},b}return __extends(AbstractSelector,_super),AbstractSelector.prototype.checkScreenSelector=function(screen,win){var _this=this,selectedScreenSelector=null,currentWidth=Math.max(win.document.documentElement.clientWidth,win.innerWidth||0);return teads.ArrayHelper.forEach(screen.split("+"),function(screenSelector){if(_this.screenSizes[screenSelector])try{var screenSelectorPattern=_this.screenSizes[screenSelector].replace(/\[WIDTH\]/g,""+currentWidth);if(eval(screenSelectorPattern))return void(selectedScreenSelector=screenSelector)}catch(a){_this.logger.warn("screenSelector eval has failed")}}),selectedScreenSelector},AbstractSelector}(option.AbstractOption);option.AbstractSelector=AbstractSelector}(option=teads.option||(teads.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(d,e){var f=b.call(this,"BelowSelector")||this;if(void 0===e)throw new a.FormatException(a.FormatException.OPTION_PARENTWINDOW_INVALID);return f.win=e,d||(d=c.DEFAULT),f.value=d,f.checkValue(),f}return __extends(c,b),c.prototype.checkValue=function(){this.value===c.DEFAULT||a.Utils.isString(this.value)||a.Dom.isHTMLElement(this.value)||a.Dom.isNodeList(this.value)||(this.value=c.DEFAULT)},c.prototype.get=function(){return this.value},c.prototype.getFirstElement=function(){if(!this.hasCachedElement){var b,c=this.value;if("object"==typeof this.value){var d;for(var e in this.value)if(this.value.hasOwnProperty(e)&&(d=this.checkScreenSelector(e,this.win),c=this.value[e],d))break;d?this.logger.debug("Below Selector",d,"selected:",c):this.logger.warn("Below Selector by device not found: ",this.value)}a.Utils.isString(c)&&c.length>0?b=a.Dom.querySelectorAll(c,this.win)[0]:a.Dom.isHTMLElement(c)?b=c:a.Dom.isNodeList(c)&&(b=c[0]),this.cacheElement(b)}return this.firstElement},c.prototype.getFirstElementRect=function(){return this.firstElementRect||(this.firstElementRect=a.Dom.getBoundingClientRect(this.getFirstElement())),this.firstElementRect},c.prototype.getFirstNodeBelowIndex=function(a){if(!this.firstNodeBelowIndex&&0!==this.firstNodeBelowIndex){for(var b,c=!1,d=0;!c&&a[d];)b=a[d++],b.getElementRect().top>=this.getFirstElementRect().bottom&&(c=!0);this.firstNodeBelowIndex=d-1}return this.firstNodeBelowIndex},c.prototype.cacheElement=function(a){this.firstElement=a,this.hasCachedElement=!0},c.DEFAULT=null,c}(b.AbstractSelector);b.BelowSelector=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(d){void 0===d&&(d=c.DEFAULT);var e=b.call(this,"Btf")||this;return e.value=d,(a.Context.isFacebookIA()||a.Context.isAmp()||a.Context.isIABSafeFrame())&&(e.value=!1),e.checkValue(),e}return __extends(c,b),c.prototype.checkValue=function(){a.Utils.isBoolean(this.value)||(this.value=c.DEFAULT)},c.prototype.set=function(a){this.value=a},c.prototype.isEnabled=function(){return this.value},c.DEFAULT=!0,c}(b.AbstractOption);b.Btf=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(a){void 0===a&&(a=c.DEFAULT);var d=b.call(this,"Filter")||this;return d.func=a,d.checkValue(),d}return __extends(c,b),c.prototype.checkValue=function(){a.Utils.isFunction(this.func)||(this.func=c.DEFAULT)},c.prototype.trigger=function(b){var c=!0;if("function"==typeof this.func){try{c=this.func.call(this.func,b)}catch(b){a.formatSumologic.sendError({message:"The filter function threw an error"}),this.logger.error("the filter function threw an error:",b,this.func)}"boolean"!=typeof c&&(c=!0)}return c},c.DEFAULT=null,c}(b.AbstractOption);b.Filter=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(a){void 0===a&&(a=c.DEFAULT);var d=b.call(this,"InsertBefore")||this;return d.value=a,d.checkValue(),d}return __extends(c,b),c.prototype.checkValue=function(){a.Utils.isBoolean(this.value)||(this.value=c.DEFAULT)},c.prototype.isEnabled=function(){return this.value},c.prototype.set=function(a){this.value=a},c.DEFAULT=!1,c}(b.AbstractOption);b.InsertBefore=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(a){void 0===a&&(a=c.DEFAULT);var d=b.call(this,"InsertInside")||this;return d.value=a,d.checkValue(),d}return __extends(c,b),c.prototype.checkValue=function(){a.Context.isAmp()?this.value=c.DEFAULT_AMP:a.Utils.isBoolean(this.value)||(this.value=c.DEFAULT)},c.prototype.isEnabled=function(){return this.value},c.prototype.set=function(a){this.value=a},c.DEFAULT=!1,c.DEFAULT_AMP=!0,c}(b.AbstractOption);b.InsertInside=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(a){void 0===a&&(a=c.DEFAULT);var d=b.call(this,"MaximumWidth")||this;return d.value=a,d.checkValue(),d}return __extends(c,b),c.prototype.checkValue=function(){a.Utils.isNumber(this.value)||(this.value=c.DEFAULT)},c.prototype.get=function(){return this.value},c.DEFAULT=2e3,c}(b.AbstractOption);b.MaximumWidth=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(d){void 0===d&&(d=c.DEFAULT);var e=b.call(this,"Minimum")||this;return e.value=d,(a.Context.isAmp()||a.Context.isIABSafeFrame()||a.Context.isFacebookIA())&&(e.value=1),e.checkValue(),e}return __extends(c,b),c.prototype.checkValue=function(){a.Utils.isNumber(this.value)||(this.value=c.DEFAULT)},c.prototype.set=function(a){this.value=a},c.prototype.get=function(){return this.value},c.DEFAULT=1,c}(b.AbstractOption);b.Minimum=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(a){void 0===a&&(a=c.DEFAULT);var d=b.call(this,"MinimumTextLength")||this;return d.value=a,d.checkValue(),d}return __extends(c,b),c.prototype.checkValue=function(){a.Utils.isNumber(this.value)||(this.value=c.DEFAULT)},c.prototype.get=function(){return this.value},c.DEFAULT=100,c}(b.AbstractOption);b.MinimumTextLength=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(a){void 0===a&&(a=c.DEFAULT);var d=b.call(this,"MinimumWidth")||this;return d.value=a,d.checkValue(),d}return __extends(c,b),c.prototype.checkValue=function(){a.Utils.isNumber(this.value)||(this.value=c.DEFAULT)},c.prototype.get=function(){return this.value},c.DEFAULT=100,c}(b.AbstractOption);b.MinimumWidth=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(a){void 0===a&&(a=c.DEFAULT);var d=b.call(this,"MinimumBelow")||this;return d.value=a,d.checkValue(),d}return __extends(c,b),c.prototype.checkValue=function(){a.Utils.isNumber(this.value)||(this.value=c.DEFAULT)},c.prototype.get=function(){return this.value},c.DEFAULT=null,c}(b.AbstractOption);b.MinimumBelow=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(teads){var option;!function(option){var Selector=function(_super){function Selector(a,b){var c=_super.call(this,"Selector")||this;if(!b)throw new teads.FormatException(teads.FormatException.OPTION_PARENTWINDOW_INVALID);return c.win=b,c.value=a,(teads.Context.isAmp()||teads.Context.isIABSafeFrame()||teads.Context.isFacebookIA())&&(c.value="body"),c.screenSizes={mobile:"[WIDTH]<768",tablet:"[WIDTH]>=768 && [WIDTH]<992",desktop:"[WIDTH]>=992 && [WIDTH]<1200",large:"[WIDTH]>=1200"},c.checkValue(),c}return __extends(Selector,_super),Selector.prototype.checkValue=function(){teads.Utils.isString(this.value)||teads.Dom.isHTMLElement(this.value)||teads.Dom.isNodeList(this.value)||(this.value=Selector.DEFAULT)},Selector.prototype.get=function(){return this.value},Selector.prototype.getSlots=function(){var a=[],b=this.value;if("object"==typeof this.value){var c=void 0;for(var d in this.value)if(this.value.hasOwnProperty(d)&&(c=this.checkScreenSelector(d,this.win))){b=this.value[d];break}c?this.logger.debug("Slot",c,"selected:",b):this.logger.warn("Slots by device not found: ",this.value)}if(teads.Utils.isString(b)&&b.length>0){var e=[],f=teads.HTMLHelper.findParentWindows(document.body).concat(teads.HTMLHelper.findChildWindows(document.body));teads.ArrayHelper.forEach(f,function(a){e=e.concat(Array.prototype.slice.call(teads.Dom.querySelectorAll(b,a)))});for(var g=0;g<e.length;g++)a.push(new teads.placement.Slot(e[g],g))}else if(teads.Dom.isHTMLElement(b))a.push(new teads.placement.Slot(b));else if(teads.Dom.isNodeList(b))for(var g=0;g<b.length;g++)a.push(new teads.placement.Slot(b[g],g));return a},Selector.prototype.checkScreenSelector=function(screen,win){var _this=this,selectedScreenSelector=null,currentWidth=Math.max(win.document.documentElement.clientWidth,win.innerWidth||0);return teads.ArrayHelper.forEach(screen.split("+"),function(screenSelector){if(_this.screenSizes[screenSelector])try{var screenSelectorPattern=_this.screenSizes[screenSelector].replace(/\[WIDTH\]/g,currentWidth);if(eval(screenSelectorPattern))return void(selectedScreenSelector=screenSelector)}catch(a){_this.logger.warn("screenSelector eval has failed")}}),selectedScreenSelector},Selector.DEFAULT=null,Selector}(option.AbstractOption);option.Selector=Selector}(option=teads.option||(teads.option={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(a,d){var e=b.call(this,"ScrollSelector")||this;return e.win=d,void 0===a?e.value=c.DEFAULT:e.value=a,e.checkValue(),e}return __extends(c,b),c.prototype.checkValue=function(){a.Utils.isString(this.value)||a.Dom.isHTMLElement(this.value)||(this.value=c.DEFAULT)},c.prototype.getSlot=function(){var b=this.win,c=this.value;if("string"==typeof c&&c.length>0){var d=a.Dom.querySelectorAll(c,this.win);d&&1===d.length?b=d[0]:this.logger.warn("Parameter must be a string (CSS Selector) or a DOM Element")}else a.Dom.isHTMLElement(c)&&(b=c);return b},c.DEFAULT=null,c}(b.AbstractOption);b.ScrollSelector=c}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b=function(){function b(b){b.slot||(b.slot={}),this.raw=b,this.pid=new a.option.Pid(b.pid),this.formatName=new a.option.Format(b.format),this.btf=new a.option.Btf(b.slot.btf),this.css=new a.option.Css(b.css),this.filter=new a.option.Filter(b.slot.filter),this.insertBefore=new a.option.InsertBefore(b.slot.insertBefore),this.insertInside=new a.option.InsertInside(b.slot.insertInside),this.minimum=new a.option.Minimum(b.slot.minimum),this.minimumBelow=new a.option.MinimumBelow(b.slot.minimumBelow),this.capping=new a.option.Capping(b.capping,b.pid),this.parentWindow=new a.option.ParentWindow(b.parentWindow),this.fallback=new a.option.Fallback(b.fallback),this.rpmFallback=new a.option.RpmFallback(b.rpmFallback),this.videoFilter=new a.option.VideoFilter(b.slot.videoFilter),this.imageFilter=new a.option.ImageFilter(b.slot.imageFilter),this.minimumTextLength=new a.option.MinimumTextLength(b.slot.minimumTextLength),this.minimumWidth=new a.option.MinimumWidth(b.slot.minimumWidth),this.maximumWidth=new a.option.MaximumWidth(b.slot.maximumWidth),this.belowSelector=new a.option.BelowSelector(b.slot.belowSelector,this.parentWindow.getWindow()),this.selector=new a.option.Selector(b.slot.selector,this.parentWindow.getWindow()),this.auto=new a.option.Auto(b.slot.auto,this.selector),this.avoid=new a.option.Avoid(b.slot.avoid,this.parentWindow.getWindow()),this.scrollSelector=new a.option.ScrollSelector(b.slot.scrollSelector,this.parentWindow.getWindow()),this.callbacks=b.callbacks,this.mobile=new a.option.Mobile(b.mobile),this.tablet=new a.option.Tablet(b.tablet),this.desktop=new a.option.Desktop(b.desktop)}return b.prototype.isMobile=function(){return this.mobile.isEnabled()},b.prototype.isTablet=function(){return this.tablet.isEnabled()},b.prototype.isDesktop=function(){return this.desktop.isEnabled()},b}();a.PlacementConfig=b}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c;!function(c){var d=function(b){function c(d){var e=b.call(this,"Slider")||this;return e.value=a.Utils.extend(c.DEFAULT,d),e.checkValue(),e}return __extends(c,b),c.prototype.checkValue=function(){a.Utils.containsKeys(c.VALUES,this.value)||(this.value=c.DEFAULT)},c.prototype.allowCorner=function(){return this.value.allow_corner_position},c.VALUES={allow_top_position:"top",allow_corner_position:"corner"},c.DEFAULT={allow_top_position:!1,allow_corner_position:!1},c}(b.AbstractOption);c.Slider=d}(c=b.setting||(b.setting={}))}(b=a.option||(a.option={}))}(teads||(teads={}));var teads;!function(a){var b=function(){function b(b){this.rawConfig=b,b&&(this.slider=new a.option.setting.Slider(b.slider))}return b.getPlacementSetting=function(a){if(window._tts&&window._tts[a.get()])return window._tts[a.get()]},b}();a.PlacementSetting=b}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function b(){}return b.load=function(c,d,e,f){a.vast.VASTLoader.load(c,{},function(a){b.parse(a,d,e,f)},function(d){b.logger.error("Could not load XML file",c,d),a.vast.CallbackHelper.execCallback(e,[d])})},b.parse=function(c,d,e,f){try{var g=a.vast.XMLHelper.getXMLDoc(c),h=g.documentElement;if(!h)return a.vast.CallbackHelper.execCallback(e,[new a.VastException(a.VastException.NO_ADS)]);if("DISPLAY"!==h.tagName.toUpperCase())return a.vast.CallbackHelper.execCallback(e,[new a.VastException(a.VastException.XML_PARSE)]);var i=h.getElementsByTagName("Ad")[0];if(!i)return a.vast.CallbackHelper.execCallback(e,[new a.VastException(a.VastException.NO_ADS)]);var j=new a.display.Ad;if(j.version=Number(a.vast.XMLHelper.getAttributeValue(h,"version")),j.version<1)return a.vast.CallbackHelper.execCallback(e,[new a.VastException(a.VastException.UNSUPPORTED_VERSION)]);j.id=a.vast.XMLHelper.getAttributeValue(i,"id"),j.title=a.vast.XMLHelper.getNodeContent(i.getElementsByTagName("AdTitle")[0]),j.adSystem=a.vast.XMLHelper.getNodeContent(i.getElementsByTagName("AdSystem")[0]);var k=i.getElementsByTagName("Creative")[0];if(!k)return a.vast.CallbackHelper.execCallback(e,[new a.VastException(a.VastException.NO_ADS)]);j.creative.id=a.vast.XMLHelper.getAttributeValue(k,"id"),j.creative.type=String(a.vast.XMLHelper.getAttributeValue(k,"type"));var l=k.getElementsByTagName("Asset")[0];if(!l)return a.vast.CallbackHelper.execCallback(e,[new a.VastException(a.VastException.NO_ADS)]);if(j.creative.asset.id=a.vast.XMLHelper.getAttributeValue(l,"id"),j.creative.asset.content=String(a.vast.XMLHelper.getNodeContent(l)),!j.creative.asset.content)return a.vast.CallbackHelper.execCallback(e,[new a.VastException(a.VastException.NO_ADS)]);var m=document.createElement("div");m.innerHTML=j.creative.asset.content;var n=m.firstElementChild;if(!n)return a.vast.CallbackHelper.execCallback(e,[new a.VastException(a.VastException.NO_ADS)]);if(j.creative.asset.width=Number(n.getAttribute("width")),
j.creative.asset.height=Number(n.getAttribute("height")),j.creative.asset.url=n.getAttribute("src"),!j.creative.asset.url)return a.vast.CallbackHelper.execCallback(e,[new a.VastException(a.VastException.NO_ADS)]);if(!b.SUPPORTED_MEDIAFILES.test(j.creative.asset.url))return a.vast.CallbackHelper.execCallback(e,[new a.VastException(a.VastException.UNSUPPORTED_MEDIAFILE)]);for(var o=i.getElementsByTagName("ClickThrough"),p=0,q=o.length;p<q;p++)j.clickThrough.push(a.vast.XMLHelper.getNodeContent(o[p])),j.expand.push("true"===a.vast.XMLHelper.getAttributeValue(o[p],"expand")),j.rolloverCountdown.push(parseInt(a.vast.XMLHelper.getAttributeValue(o[p],"rolloverCountdown"),10)),j.closeCountdown.push(parseInt(a.vast.XMLHelper.getAttributeValue(o[p],"closeCountdown"),10));for(var r=i.getElementsByTagName("Impression"),p=0,q=r.length;p<q;p++)j.tracking.impression.push({url:a.vast.XMLHelper.getNodeContent(r[p]),data:null});var s=i.getElementsByTagName("ClickTracking");for(p=0,q=s.length;p<q;p++)j.tracking.click.push({url:a.vast.XMLHelper.getNodeContent(s[p]),data:null});var t=i.getElementsByTagName("Error");for(p=0,q=t.length;p<q;p++)j.tracking.error.push({url:a.vast.XMLHelper.getNodeContent(t[p]),data:null});if(i){b.logger.info("Init - Vast player initialization success"),f&&f.valid(2,0),j.tracking[a.Constant.TRACKING.openExpand]=[];var u=i.getElementsByTagName("Tracking");for(p=0,q=u.length;p<q;p++){var v=a.vast.XMLHelper.getAttributeValue(u[p],"event");if(j.tracking.hasOwnProperty(v)){var w=null;if(v===a.Constant.TRACKING.open||v===a.Constant.TRACKING.visible){if(w=a.vast.XMLHelper.getAttributeValue(u[p],"offset"),v!==a.Constant.TRACKING.visible||w||(w="00:00:01"),!(w&&w.indexOf(":")>0)){b.logger.error("Wrong offset for progress tracking: "+w);continue}w=a.Utils.seconds(w)}j.tracking[v].push({url:a.vast.XMLHelper.getNodeContent(u[p]),offset:w})}}}b.logger.info("DisplayXml loaded",j),f&&(f.valid(2,1,j,a.Wigo.infoType.MODAL),f.valid(2,2,j.creative.asset.url,a.Wigo.infoType.STRING),f.valid(2,3,"Engage",a.Wigo.infoType.STRING),f.valid(3,0),f.valid(3,1,"1.0",a.Wigo.infoType.STRING)),a.vast.CallbackHelper.execCallback(d,[j],e)}catch(b){a.vast.CallbackHelper.execCallback(e,[new a.VastException(a.VastException.XML_PARSE,b)])}},b.logger=new a.Logger("parser.Display"),b.SUPPORTED_MEDIAFILES=/.+\.(jpg|jpeg|png)$/i,b}();b.Display=c}(b=a.parser||(a.parser={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function c(b,c,d){var e=this;this.container=b,this.logger=new a.Logger("FixedBackground"),this.resizeContainer=function(b){b&&"orientationchange"===b.type&&(e.center=null);var c=a.Dom.getBoundingClientRect(e.container),d=a.Dom.getWindowSize(e.win),f=Math.round(c.width),g=e.image.height*f/e.image.width;e.baseContainer.style.width=f+"px",e.baseContainer.style.height=Math.round(c.height)+"px",e.canUseBackgroundAttachment()?(e.center=e.center||(d.height-g)/2,e.baseContainer.style.backgroundSize=Math.round(f)+"px "+Math.round(g)+"px",e.baseContainer.style.backgroundPosition=Math.round(c.left)+"px "+e.center+"px"):(e.fixedContainer.style.width=Math.round(f)+"px",e.fixedContainer.style.height=Math.round(1.2*(d.height+g))+"px",e.fixedContainer.style.backgroundSize=Math.round(f)+"px "+Math.round(g)+"px",e.fixedContainer.style.left=Math.round(c.left)+"px",e.center=e.center||(d.height-g)/2%g,e.fixedContainer.style.top=(e.center>0?e.center-g:e.center)+"px")},this.win=a.HTMLHelper.getWindow(this.container),a.HTMLHelper.addClass(c,"teads-display-format"),d=a.Utils.isFunction(d)?d:this.resizeContainer,this.eventListenerManager=new a.DOMEventListenerManager,this.eventListenerManager.addMultiple(["resize","orientationchange"],this.win,function(){return d()}),this.eventListenerManager.addMultiple(["transitionend","otransitionend","oTransitionEnd","webkitTransitionEnd"],this.container,function(){return d()})}return c.prototype.loadImage=function(b,c){var d=this;return this.image=new Image,this.image.onerror=function(b){return c(!1,a.Option.empty())},this.image.onload=function(b){d.image.naturalWidth&&d.image.naturalHeight?c(!0,a.Option.of(d.image)):(d.logger.error("setFixedBackgroundImage: Asset size error: cannot retrieve image dimensions"),c(!1,a.Option.of(d.image)))},this.image.src=b,this.image},c.prototype.initContainer=function(){b.CSSHelper.embedCSS(b.FixedBackground.CSS,this.win,c.STYLE_NODE_ID),this.baseContainer=this.win.document.createElement("div"),this.baseContainer.className=c.CSSCLASSES.absolute,this.canUseBackgroundAttachment()?this.baseContainer.style.backgroundImage="url("+this.image.src+")":(this.fixedContainer=this.win.document.createElement("div"),this.fixedContainer.style.backgroundImage="url("+this.image.src+")",this.fixedContainer.className=c.CSSCLASSES.fixed,(a.Semver.isGreaterOrEqual(a.Context.getChromeVersion(),"55")||a.Context.isSafari())&&(this.baseContainer.style.setProperty("-webkit-clip-path","inset(1px 0px)","important"),this.baseContainer.style.setProperty("clip-path","inset(1px 0px)","important")),this.baseContainer.appendChild(this.fixedContainer)),this.resizeContainer()},c.prototype.append=function(){this.container.style.position="relative",this.container.style.zIndex="100",this.container.parentNode.insertBefore(this.baseContainer,this.container)},c.prototype.destroy=function(){this.baseContainer.parentNode.removeChild(this.baseContainer),this.eventListenerManager.removeAll()},c.prototype.canUseBackgroundAttachment=function(){return a.Context.isDesktop()||a.Context.isFirefox()},c.prototype.getBaseContainer=function(){return this.baseContainer},c.CSS=a.Template.DISPLAYCSS,c.CSSCLASSES={absolute:"teads-display-absolute",fixed:"teads-display-fixed",clickZone:"teads-display-clickzone"},c.STYLE_NODE_ID="teads-inread-display",c}();b.FixedBackground=c}(b=a.helper||(a.helper={}))}(teads||(teads={}));var teads;!function(a){var b=function(){function b(b,c){this.api=b,this.playerWindow=c,this.eventListenerManager=new a.DOMEventListenerManager}return b.prototype.startListening=function(){var c=this;this.eventListenerManager.add("message",this.playerWindow,function(d){if(a.Utils.isObject(d.data)){var e=d.data;if(!e.method)return;switch(e.method){case b.INIT_MESSAGE:c.pairedAdWindow=d.source,c.sendMessage({method:b.INIT_MESSAGE});break;default:try{if(a.Utils.isFunction(c.api[e.method]))if("getUserLocation"===e.method)c.handleGetUserLocationRequest(e);else{var f=(g=c.api)[e.method].apply(g,e.methodArgs);c.sendMessage({method:e.method,methodReturn:f})}else c.sendMessage({method:e.method,error:"Method "+e.method+" does not exist on api"})}catch(a){c.sendMessage({method:e.method,error:a.toString()})}}}var g})},b.prototype.stopListening=function(){this.eventListenerManager.remove("message")},b.prototype.sendMessage=function(a){this.pairedAdWindow.postMessage(a,"*")},b.prototype.handleGetUserLocationRequest=function(b){var c=this,d=function(d){c.sendMessage({method:b.method,methodReturn:a.HTMLApi.extractCoordsFromPosition(d)})},e=function(a){c.sendMessage({method:b.method,methodReturn:a.message||a.toString()})};this.api[b.method](d,e)},b.INIT_MESSAGE="studio-ad--format-RPC",b}();a.StudioCommunicationBridge=b}(teads||(teads={}));var teads;!function(a){var b=function(){function b(){}return b.getUserLocation=function(b,c,d){return a.Try.of(function(){b.navigator.geolocation.getCurrentPosition(c,d)}).recover(function(a){d({code:1,message:a.message,PERMISSION_DENIED:1,POSITION_UNAVAILABLE:2,TIMEOUT:3})})},b.extractCoordsFromPosition=function(a){var b=a.coords,c=b.accuracy,d=b.latitude,e=b.longitude;return{accuracy:c,latitude:d,longitude:e}},b}();a.HTMLApi=b}(teads||(teads={}));var teads;!function(a){var b=function(){function b(b,c){this.placement=b,this.formatConfig=c,this.logger=new a.Logger("VPAIDApi"),this.onceImageLoadedCallback=null;var d=this.placement.getPlayerContainer(),e=a.HTMLHelper.getWindow(d);this.communicationBridge=new a.StudioCommunicationBridge(this,e),this.communicationBridge.startListening()}return b.prototype.close=function(){this.communicationBridge&&this.communicationBridge.stopListening()},b.prototype.setStudioData=function(b){var c=this.placement.getFormat().getVpaidAd();this.studioData=b,c.status>=a.vpaid.VpaidStatus.STARTED?this.applyStudioDataOnUI():c.subscribe(this.applyStudioDataOnUI.bind(this),a.vpaid.VPAIDEvent.AdStarted)},b.prototype.applyStudioDataOnUI=function(){if(this.studioData)try{var a=this.placement.getFormat().player.getPlugin("Tracker");a&&a.getTracker().setMetadata(b.STUDIO_CID_MACRO_METADATA,this.studioData.studio_cid,!0);var c=this.placement.getFormat().getVpaidAd(),d=c.getComponent("soundbutton");d&&d.setShowOnVideoStart(!this.studioData.display);var e=c.getComponent("progressbar");e&&(e.setShowOnVideoProgress(!this.studioData.display),e.setShowOnVideoStart(!this.studioData.display)),this.setSoundControlVisibility(!this.studioData.display),this.setProgressControlVisibility(!this.studioData.display)}catch(a){this.logger.error("setStudioData error "+a.message)}else this.logger.error("applyStudioDataOnUI error","studioData needed to apply them on UI")},b.prototype.getSumologicOption=function(){return{enabled:a.config.isSumologicLogsEnabled,sessionId:a.formatSumologic.getSessionId(),formatVersion:"2.17.85"}},b.prototype.isStudioDisplay=function(){return this.studioData&&this.studioData.display},b.prototype.getStudioData=function(){try{this.studioData=this.studioData||a.player.TeadsStudioExtension.get(this.placement.getFormat().linearAd)}catch(a){this.logger.error("getStudioData error","format has not been instantiated yet",a)}return this.studioData},b.prototype.getContextData=function(){return a.player.TeadsContextExtension.get(this.placement.getFormat().linearAd)},b.prototype.isReplay=function(){return!!this.placement.getFormat().states.isReplay},b.prototype.activateTapMode=function(a){void 0===a&&(a=!0)},b.prototype.performTapMode=function(a){var b=this.placement.getFormat().getBrandingMode();b&&(void 0===a&&(a=!b.isActive()),a?b.isInitialized()?b.isActive()||b.start():(b.init(),b.start()):b.isActive()?(b.stop(),b.deinit()):b.isInitialized()&&b.deinit())},b.prototype.isFullscreen=function(){return this.placement.getFormat().getFullscreenHelper().isActive()},b.prototype.requestFullscreen=function(){try{this.placement.getFormat().getVpaidAd().dispatchCustomEvent("FullscreenRequest")}catch(a){this.logger.error("requestFullscreen error "+a.message)}},b.prototype.setSoundControlVisibility=function(a){try{var b=this.placement.getFormat().getVpaidAd();a?b.showComponent("soundbutton"):b.hideComponent("soundbutton")}catch(a){this.logger.error("setSoundControlVisibility error "+a.message)}},b.prototype.setFullscreenButtonVisibility=function(a){try{var b=this.placement.getFormat().getVpaidAd();a?b.showComponent("fullscreenbutton"):b.hideComponent("fullscreenbutton")}catch(a){this.logger.error("setFullscreenButtonVisibility error "+a.message)}},b.prototype.setProgressControlVisibility=function(a){try{var b=this.placement.getFormat().getVpaidAd();a?b.showComponent("progressbar"):b.hideComponent("progressbar")}catch(a){this.logger.error("setProgressControlVisibility error "+a.message)}},b.prototype.setStartScreenVisibility=function(a){try{var b=this.placement.getFormat().getVpaidAd();a?b.showComponent("startscreen"):b.hideComponent("startscreen")}catch(a){this.logger.error("setStartScreenVisibility error "+a.message)}},b.prototype.getSlotBounds=function(){var b=this;return a.Try.of(function(){var c=b.placement.getPlayerContainer(),d=a.HTMLHelper.getWindow(c);return a.Utils.extend(d.teads.Dom.getBoundingClientRect(c),{viewportHeight:d.innerHeight,viewportWidth:d.innerWidth})}).recover(function(a){b.logger.error("getSlotBounds error "+a.message)}).toOption().getOrElse(function(){return null})},b.prototype.sendVideoMetadata=function(b){try{this.placement.getFormat().getVpaidAd().dispatchCustomEvent(a.vpaid.CustomVPAIDEvent.AdVideoMetadata,b)}catch(a){this.logger.error("sendVideoMetadata error "+a.message)}},b.prototype.setFixedBackgroundImage=function(b,c){var d=this;void 0===c&&(c=function(){});var e=new a.helper.FixedBackground(this.placement.getPlayerContainer(),this.placement.getParentContainer()),f=this.placement.getFormat().getVpaidAd();this.setBackgroundColor("transparent"),f.subscribe(function(){return e.resizeContainer()},a.vpaid.VPAIDEvent.AdSizeChange),f.subscribe(function(){return e.resizeContainer()},a.vpaid.VPAIDEvent.AdStarted),f.subscribe(function(){return e.destroy()},a.vpaid.VPAIDEvent.AdStopped),f.subscribe(function(){return e.destroy()},a.vpaid.VPAIDEvent.AdError),e.loadImage(b,function(){e.initContainer(),d.logger.debug("background image ready !"),f.status>=a.vpaid.VpaidStatus.LOADED?(e.append(),d.checkTouchOverflow(e)):f.subscribe(function(){e.append(),d.checkTouchOverflow(e)},a.vpaid.VPAIDEvent.AdLoaded),d.onceImageLoadedCallback&&d.onceImageLoadedCallback(),c(!0)})},b.prototype.setBackgroundColor=function(a){try{var b=this.placement.getFormat().getVpaidAd().getVPAIDContainer();b.style.setProperty("background-color",a)}catch(a){this.logger.error("setBackgroundColor error "+a.message)}},b.prototype.getUserLocation=function(b,c){a.HTMLApi.getUserLocation(a.HTMLHelper.getWindow(this.placement.getPlayerContainer()),b,c)},b.prototype.customizeUI=function(b){var c=this,d="vpaid-ui-custom-css";a.Option.of(this.placement).match({some:function(e){return a.Option.of(e.getFormat()).match({some:function(e){return a.Option.of(e.getVpaidAd()).match({some:function(c){var e=a.HTMLHelper.getWindow(c.getMainComponentsContainer());a.helper.CSSHelper.removeCSS(d,e),a.helper.CSSHelper.embedCSS(b,e,d)},none:function(){return c.logger.error("customizeUI: getVpaidAd() returned undefined or null")}})},none:function(){return c.logger.error("customizeUI: getFormat() returned undefined or null")}})},none:function(){return c.logger.error("customizeUI: this.placement is undefined or null")}})},b.prototype.getTeadsInfo=function(){return{placementId:this.formatConfig.placementId||null,connectionId:this.formatConfig.connectionId||null,insertionId:this.formatConfig.insertionId||null,creativeId:parseInt(this.placement.getFormat().linearAd.creativeId,10)||null,slotType:this.placement.getFormat().slotType,environment:a.Context.getEnv()}},b.prototype.triggerViewabilityTag=function(b){try{this.placement.getFormat().viewabilityTagsHelper.onceThresholdReached(b)}catch(b){this.logger.error("triggerViewabilityTag error "+b.message),a.formatSumologic.sendError("triggerViewabilityTag "+b.getMessage().substr(0,120))}},b.prototype.getCreativeTag=function(a){try{return this.placement.getFormat().viewabilityTagsHelper.getCreativeTag(a)}catch(b){return a}},b.prototype.setImageLoadedCallback=function(a){this.onceImageLoadedCallback=a},b.prototype.checkTouchOverflow=function(b){var c=function(a,b){return a===b||!(!b||!b.parentElement)&&c(a,b.parentElement)},d=function(b,d){var e=a.Dom.getBoundingClientRect(b),f=a.HTMLHelper.getDocument(b).elementFromPoint(e.left+e.width/2,e.top+d);return f===b||c(b,f)};try{var e=void 0,f=this.placement.getParentContainer(),g=b.getBaseContainer();d(f,-10)?(g.style.zIndex="-1",e=d(f,-10)?"unsolved":d(f,10)?"solved":"hidden-slot"):e="none",a.formatSumologic.sendInfo("touch-overflow:"+e+":"+this.placement.pid)}catch(b){a.formatSumologic.sendError("touch-overflow-check-error:"+this.placement.pid)}},b.STUDIO_CID_MACRO_METADATA="[STUDIO_CID]",b}();a.VPAIDApi=b}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function c(b,c,d,e){this.pageId=b,this.placementConfig=c,this.placementSetting=d,this.placementTracker=e,this.sliderEnabled=!1,this.logger=new a.Logger("placement"),this.wigoi=null,this.moatCampaignToTest=/^(38587|38690|39123|39615|40036|41045|44345|45167|45341|45413|45977|46277|46447|49317|50311|54130)$/,this.pid=c.pid.get(),this.win=c.parentWindow.getWindow(),this.sessionStore=new a.SessionStoreBuilder(b,this.pid).setSumologicSessionId(a.formatSumologic.getSessionId()).setWigo(e.getWigoi()).build(),this.initContainer(),this.setWigoi(e.getWigoi()),this.wigoi&&(window.teads.router&&this.wigoi.valid(0,0),window._ttp&&this.wigoi.valid(0,1,{ttp:window._ttp,ttf:window._ttf,tta:window._tta,ttc:window._ttc,tts:window._tts},a.Wigo.infoType.MODAL),this.wigoi.valid(1,0))}return c.prototype.getFormatConfig=function(b){if(!b||!b.type||!b.content)return null;try{var c=new a.FormatConfig(b);return a.formatSumologic.setAdType(c.adType.get()),this.logger.info("formatConfig",c),c}catch(b){this.logger.warn("Error during FormatConfig instantiation",b),this.placementTracker.track(a.Constant.TRACKING.adAvailable.error.settings);var d=b.message?b.message:a.JSON.stringify(b);return a.formatSumologic.sendError({pageId:this.pageId,message:a.Constant.TRACKING.adAvailable.error.settings+"|"+d.substr(0,120)}),null}},c.prototype.loadVast=function(b,c){var d=this,e=new a.player.VASTPlayer(this.playerContainer,this.getPlayerConfig(b),this.sessionStore),f=function(a){return d.onVastError(a,c)};if(b.vast.isDisplayUrl()||b.vast.isDisplayXml()){var g=function(a){d.logger.info("Ad is ready"),d.wigoi&&d.wigoi.valid(1,2),e.setLinearAd({}),c(e,a)};b.vast.isDisplayUrl()?a.parser.Display.load(b.vast.getContent(),g,f,this.wigoi):b.vast.isDisplayXml()&&a.parser.Display.parse(b.vast.getContent(),g,f,this.wigoi)}else{var g=function(f){d.logger.info("VAST is ready"),d.wigoi&&d.wigoi.valid(1,2),e.setConfigUI(d.getPlayerConfigUI(b,f)),a.ArrayHelper.forEach(f.extensions,function(c){if("MoatJs"===c.type&&d.moatCampaignToTest.test(c.definition.id)){var e=[];b.videoStart.isThreshold()||(e.push("videoStart: "+b.videoStart.getValue()),b.videoStart=new a.option.VideoStart(a.option.VideoStart.VALUES.THRESHOLD,b.formatName,b.smartPosition)),b.videoPause.isThreshold()||(e.push("videoPause: "+b.videoPause.getValue()),b.videoPause=new a.option.VideoPause(a.option.VideoPause.VALUES.THRESHOLD)),b.soundStart.isCountdown()&&2===b.soundStart.getCountdown()||(e.push("soundStart: "+b.soundStart.getType()+","+b.soundStart.getCountdown()),b.soundStart=new a.option.SoundStart({type:a.option.SoundStart.VALUES_TYPE.COUNTDOWN,countdown:2})),100!==b.threshold.get()&&(e.push("threshold: "+b.threshold.get()),b.threshold=new a.option.Threshold(100)),a.formatSumologic.sendInfo("[OVR-MOAT] "+f.id+" "+c.definition.id,null,1),e.length>0&&a.formatSumologic.sendInfo("[MOAT-OVERRIDE] "+e.join("|"),null,1)}}),c(e)};b.vast.isVastUrl()?e.loadVast(b.vast.getContent(),g,f):b.vast.isVastXml()&&e.parseVast(b.vast.getContent(),g,f)}},c.prototype.canEnableSlider=function(){if(!a.Context.isDesktop()||!this.placementConfig.formatName.isInRead())return!1;var b=this.placementSetting&&this.placementSetting.slider&&this.placementSetting.slider.allowCorner();return a.Constant.SLIDER_WHITELIST.test(String(this.pid))||b},c.prototype.enableSlider=function(){this.sliderEnabled=!0,this.placementTracker.setSlotType(a.Constant.SLOT_TYPE.corner),this.placementTracker.track(a.Constant.TRACKING.adCall),this.electedSlot=new b.Slot(this.placementConfig.parentWindow.getWindow().document.body),this.placementConfig.btf.set(!1),this.placementConfig.minimum.set(0),this.placementConfig.auto.set(!1),this.placementConfig.insertBefore.set(!1),this.placementConfig.insertInside.set(!0)},c.prototype.onVastError=function(b,c){a.formatSumologic.sendError({pid:this.pid,message:"Error when loading VAST|"+b.getFullMessage().substr(0,120)});var d=b.getId()||0;d===a.VastException.WRAPPER_TIMEOUT.id?this.placementTracker.track(a.Constant.TRACKING.adAvailable.error.parseTimeout):this.placementTracker.track(a.Constant.TRACKING.adAvailable.error.vast.replace(/\{code\}$/,""+d)),this.logger.error("VAST loading:",b),c(null)},c.prototype.handleNoAd=function(){if(this.placementTracker.handleMirroringEvent(),this.placementConfig.fallback.trigger()?(this.placementTracker.track(a.Constant.TRACKING.fallback.noAd),this.logger.info(a.Constant.TRACKING.fallback.noAd),this.wigoi&&this.wigoi.valid(1,2,a.Constant.TRACKING.fallback.noAd,a.Wigo.infoType.ERROR)):a.Context.isAmp()&&a.helper.Amp.close(),!this.sliderEnabled)return new a.FormatConfig({type:"VastUrl",content:"",settings:{values:{placementFormat:this.placementConfig.formatName.get(),pageId:this.pageId,placementId:this.pid,threshold:100},components:{},behaviors:{}}})},c.prototype.getFormat=function(){return this.formatInstance},c.prototype.getParentContainer=function(){return this.parentContainer},c.prototype.getPlayerContainer=function(){return this.playerContainer},c.prototype.getInnerContainer=function(){return this.innerContainer},c.prototype.processChecker=function(a,d,e){void 0===e&&(e=!1);for(var f,g,h,i,j,k=e?"auto":"selector",l=c.checkersConfig[d][k],m={report:{status:!1,reasons:[]}},n=0,o=!1;!o&&a[n];){for(g=a[n++],h=g.getElement(),f=0,j={status:!0,reason:""};j.status&&l[f];)i=l[f++],j=b.Checker[i](this,g,a),j.status||(this.logger.info("Invalid slot","["+n+"/"+a.length+"]",j.reason,"=>",j.information,h),m.report.reasons=[j.reason],m.report.status=!1,j.status=!1);j.status&&(this.logger.info("Elected slot","["+n+"/"+a.length+"]",h),m.report.status=!0,m.report.reasons=[],m.slot=g,o=!0,this.wigoi&&this.wigoi.valid(1,1))}return m},c.prototype.setWigoi=function(a){this.wigoi=a},c.prototype.getWigoi=function(){return this.wigoi},c.prototype.registerInstance=function(b){this.formatInstance=b;var c=b.formatConfig.formatName.get();a.instances[c]||(a.instances[c]=[]),a.instances[c].push(b),this.getFormat().setWigoi(this.wigoi)},c.prototype.getPlayerConfig=function(b){return{path:a.config.basePathUrl,type:b.allowedPlayer.getValue(),formatConfig:b,background:"transparent",vpaidApi:new a.VPAIDApi(this,b),replaceIASVPAID:a.config.isIasBypassEnabled,adType:b.adType.get()}},c.prototype.getPlayerConfigUI=function(b,c){return{name:"inread",config:{components:a.helper.RASHelper.getComponentsConfig(b,this,c,a.player.TeadsStudioExtension.get(c))}}},c.prototype.initContainer=function(){this.parentContainer=this.win.document.createElement("div"),this.parentContainer.className="teads-"+this.placementConfig.formatName.get(),this.placementConfig.formatName.isInBoard()&&(this.parentContainer.style.width="100%"),this.innerContainer=this.win.document.createElement("div"),this.innerContainer.style.position="relative",this.parentContainer.appendChild(this.innerContainer),this.playerContainer=this.win.document.createElement("div"),this.playerContainer.className="teads-player",this.playerContainer.id="teads"+a.currentPlayerId++,this.innerContainer.appendChild(this.playerContainer)},c.checkersConfig={inread:{auto:["safeframe","image","video","minimum","btf","position","avoid","content","size","filter"],selector:["safeframe","image","video","minimum","btf","avoid","filter"]},inboard:{auto:["safeframe","image","video","minimum","btf","avoid","filter"],selector:["safeframe","image","video","minimum","btf","avoid","filter"]}},c}();b.AbstractPlacement=c}(b=a.placement||(a.placement={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function b(){}return b.reorderWigoButtons=function(){var b=[];for(var c in a.instances)a.ArrayHelper.forEach(a.instances[c],function(a){a.playerContainer&&a.getWigoi()&&b.push(a)});b.sort(function(b,c){return a.Dom.getBoundingClientRect(b.playerContainer).top-a.Dom.getBoundingClientRect(c.playerContainer).top});for(var d=[],e=0,f=b;e<f.length;e++){var g=f[e],h=g.getWigoi();h&&!a.ArrayHelper.includes(d,h)&&d.push(h)}var i=Object.keys(a.TAG)[0];if(i&&void 0!==i)for(var j in a.TAG[i])a.Utils.isArray(a.TAG[i][j])&&a.ArrayHelper.forEach(a.TAG[i][j],function(b){var c=b.getWigoi();c&&!a.ArrayHelper.includes(d,c)&&d.push(c)});var k=1;for(a.Wigo.setTotalInstances(d.length);d.length;)d.pop().moveButton(k),k+=1},b}();b.WigoHelper=c}(b=a.helper||(a.helper={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(c){function d(){return null!==c&&c.apply(this,arguments)||this}return __extends(d,c),d.prototype.initFormatInstance=function(b,c,d){if(d)this.registerInstance(new a.format.InreadDisplay(this,c,d,b));else{var e=b?b.getLinearAd():null;this.placementTracker.setSlotDimensionOnTracking(e),b&&b.setLinearAd(e),this.sliderEnabled?this.registerInstance(new a.format.Slider(this,c,b)):e&&a.parser.HybridExtension.has(e)?this.registerInstance(new a.format.InreadImpact(this,c,b)):this.registerInstance(new a.format.Inread(this,c,b))}a.helper.WigoHelper.reorderWigoButtons()},d.prototype.checkSlot=function(){var c=this.placementConfig.selector.getSlots();if(c.length&&(this.electedSlotReport=this.processChecker(c,a.Constant.FORMAT.inread)),(!c.length||!this.electedSlotReport.report.status)&&this.placementConfig.auto.isEnabled()){this.smartSlot=new a.helper.SmartSlot(this.placementConfig.parentWindow.getWindow());var d=this.smartSlot.find();if(d){for(var e=[],f=0,g=d.length;f<g;f++)e[f]=new b.Slot(d[f],f),e[f].computeScore(this.placementConfig);e.sort(function(a,b){return b.getScore()-a.getScore()}),this.electedSlotReport=this.processChecker(e,a.Constant.FORMAT.inread,!0)}}var h={};return this.electedSlotReport&&this.electedSlotReport.report?this.electedSlotReport.report.status?(this.electedSlot=this.electedSlotReport.slot,h={status:!0,reasons:[]}):(this.logger.info("No slot available"),h={status:!1,reasons:this.electedSlotReport.report.reasons},this.wigoi&&this.wigoi.valid(1,1,this.electedSlotReport.report.reasons,a.Wigo.infoType.ERROR)):(this.logger.info("No slot available"),h={status:!1,reasons:[a.Constant.TRACKING.noSlot.selector]},this.wigoi&&this.wigoi.valid(1,1,a.Constant.TRACKING.noSlot.selector,a.Wigo.infoType.ERROR)),h},d.prototype.getElectedSlot=function(){return this.electedSlot},d.prototype.initDom=function(a){var b=a.getElement(),c=this.parentContainer;return"PR"!==b.nodeName&&"BR"!==b.nodeName||(c.style.margin="10px 0"),this.placementConfig.insertInside.isEnabled()?this.placementConfig.insertBefore.isEnabled()&&b.firstChild?b.insertBefore(c,b.firstChild):b.appendChild(c):this.placementConfig.insertBefore.isEnabled()&&b.parentNode?b.parentNode.insertBefore(c,b):b.parentNode&&b.nextSibling?b.parentNode.insertBefore(c,b.nextSibling):b.appendChild(c),c},d}(b.AbstractPlacement);b.Inread=c}(b=a.placement||(a.placement={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(b){function c(a,c,d,e){var f=b.call(this,a,c,d,e)||this;return f.placementConfig.btf.set(!1),f.placementConfig.minimum.set(0),f.placementConfig.auto.set(!1),f}return __extends(c,b),c.prototype.checkSlot=function(){var b=this.placementConfig.selector.getSlots();b.length&&(this.electedSlotReport=this.processChecker(b,a.Constant.FORMAT.inboard));var c={};return this.electedSlotReport&&this.electedSlotReport.report?this.electedSlotReport.report.status?(this.electedSlot=this.electedSlotReport.slot,c={status:!0,reasons:[]}):(this.logger.info("No slot available"),c={status:!1,reasons:this.electedSlotReport.report.reasons},this.wigoi&&this.wigoi.valid(1,1,this.electedSlotReport.report.reasons,a.Wigo.infoType.ERROR)):(this.logger.info("No slot available"),c={status:!1,reasons:[a.Constant.TRACKING.noSlot.selector]},this.wigoi&&this.wigoi.valid(1,1,a.Constant.TRACKING.noSlot.selector,a.Wigo.infoType.ERROR)),c},c}(b.Inread);b.Inboard=c}(b=a.placement||(a.placement={}))}(teads||(teads={}));var teads;!function(a){var b=function(){function b(b,c,d){void 0===c&&(c=null),void 0===d&&(d=a.None);var e=this;this.pageId=b,this.headerBiddingProvider=d,this.tracker=new a.tracker.Tracker(a.Option.of(a.tracker.Config.format),a.Option.of(a.formatSumologic.getSessionId())),this.slotType=a.Constant.SLOT_TYPE.native,this.hasTracked={},this.vastErrorCodeTracked=null,this.needToTrackNotFilled=!1,this.fraudReason=null,this.logger=new a.Logger("placement.tracker"),this.wigoi=null,this.macro={pageId:"[pageId]",pid:"[pid]",gid:"[insertionId]",slotType:"[slotType]",env:"[env]",impressionId:"[impressionId]",cachebusting:"[CACHEBUSTING]",headerBiddingProvider:"[headerBiddingProvider]"},this.pid=new a.option.Pid(c),this.setWigoi(new a.Wigo),this.tracker.addResource(a.Constant.TRACKING.adCall,a.Constant.COMSCORE_URL.V1[window.location.protocol]),this.tracker.addResource(a.Constant.TRACKING.placementCall,a.Constant.COMSCORE_URL.V2[window.location.protocol]),this.auctid=a.helper.UUID.generateTimeBased(),a.ArrayHelper.forEach(a.tracker.Config.format,function(b){var c=a.config.trackingUrl+"?action="+b.name+"&pageId="+e.macro.pageId+"&pid="+e.macro.pid+"&gid="+e.macro.gid+"&slot="+e.macro.slotType+"&env="+e.macro.env+"&ts="+a.date.now()+"&auctid="+e.auctid;e.headerBiddingProvider.forEach(function(){return c+="&hb_provider="+e.macro.headerBiddingProvider}),e.tracker.addResource(b.name,c)})}return b.prototype.setSlotDimensionOnTracking=function(b){var c,d=this,e=/slot=/,f=/slot=\[slotType\]/,g=/^[a-z0-9]+\.(sandbox|par[0-9])\.teads\.(net|tech)$/;if(b&&b.tracking)for(var h in b.tracking)b.tracking.hasOwnProperty(h)&&a.ArrayHelper.forEach(b.tracking[h],function(i,j){c=a.URIHelper.parse(i.url),("t.teads.tv"===c.host||g.test(c.hostname))&&(f.test(c.search)?b.tracking[h][j].url.replace("[slotType]",d.slotType):e.test(c.search)||(b.tracking[h][j].url+=c.search?"&":"?",b.tracking[h][j].url+="slot="+d.slotType))})},b.prototype.setSlotType=function(a){this.slotType=a},b.prototype.handleEmptyAdsArray=function(){this.needToTrackNotFilled=!0,this.wigoi&&this.wigoi.valid(1,2,a.Constant.TRACKING.noAd.notFilled,a.Wigo.infoType.ERROR)},b.prototype.handleFraud=function(b){switch(b){case a.Constant.TRACKING.ivt.doubleVerify:this.fraudReason=a.Constant.TRACKING.noAd.ivt.doubleVerify;break;case a.Constant.TRACKING.ivt.tag:this.fraudReason=a.Constant.TRACKING.noAd.ivt.tag;break;case a.Constant.TRACKING.blockedSite.doubleVerify:this.fraudReason=a.Constant.TRACKING.noAd.blockedSite.doubleVerify}this.wigoi&&this.wigoi.valid(1,2,b,a.Wigo.infoType.ERROR)},b.prototype.track=function(c){if(!this.hasTracked[c]){var d="",e=c.split("-"),f="adAvailable"===e[0]?e[0]+"-"+e[1]:e[0];if(this.formatInstance&&this.formatInstance.formatConfig&&(d=this.formatInstance.formatConfig.vast.extractInsertionId()),this.tracker.track(c,(h={},h[this.macro.pageId]=String(this.pageId),h[this.macro.pid]=String(this.pid.get()),h[this.macro.gid]=d,h[this.macro.slotType]=this.slotType,h[this.macro.env]=""+a.Context.getEnv(),h[this.macro.impressionId]=String(a.date.now()),h[this.macro.cachebusting]=a.StringHelper.rand(8),h[this.macro.headerBiddingProvider]=this.headerBiddingProvider.getOrElse(function(){return""}),h)),a.Constant.TRACKING_LOG[f]&&a.formatSumologic.sendInfo(a.Constant.TRACKING_LOG[f]),this.hasTracked[c]=!0,this.logger.info(c),c===a.Constant.TRACKING.adCall&&this.initAdTimingMark){var g=Math.round(a.Timing.now()-this.initAdTimingMark);this.vpaidAd&&this.vpaidAd.getVPAID().handleAdCallTimeout&&this.vpaidAd.getVPAID().handleAdCallTimeout(g),this.logger.info("Duration between initAd and adCall",g),a.formatSumologic.sendInfo("initAdToAdCall "+g)}}this.setVastErrorCode(c.match(b.vastErrorRegExp)),this.sendToWigo(c),c===a.Constant.TRACKING.adCall&&this.handleMirroringEvent();var h},b.prototype.handleInitAdTimingMark=function(b){this.initAdTimingMark=a.Timing.now(),this.vpaidAd=b},b.prototype.handleMirroringEvent=function(){this.hasTracked[a.Constant.TRACKING.adCall]&&(this.hasTracked[a.Constant.TRACKING.adNotAvailable.networkError]?this.track(a.Constant.TRACKING.noAd.networkError):this.hasTracked[a.Constant.TRACKING.adNotAvailable.serverError]?this.track(a.Constant.TRACKING.noAd.serverError):this.vastErrorCodeTracked?this.track(a.Constant.TRACKING.noAd.vastError.replace(/\{code\}$/,this.vastErrorCodeTracked)):this.hasTracked[a.Constant.TRACKING.adAvailable.error.parseTimeout]?this.track(a.Constant.TRACKING.noAd.parseTimeout):this.hasTracked[a.Constant.TRACKING.adAvailable.error.settings]?this.track(a.Constant.TRACKING.noAd.settingsError):this.hasTracked[a.Constant.TRACKING.adAvailable.error.badResponse]?this.track(a.Constant.TRACKING.noAd.badResponse):this.hasTracked[a.Constant.TRACKING.adAvailable.success]?this.track(a.Constant.TRACKING.ad):this.hasTracked[a.Constant.TRACKING.adAvailable.error.sameAd]&&this.track(a.Constant.TRACKING.noAd.sameAd),
this.needToTrackNotFilled&&this.track(a.Constant.TRACKING.noAd.notFilled),this.fraudReason&&this.track(this.fraudReason))},b.prototype.setWigoi=function(a){this.wigoi=a},b.prototype.getWigoi=function(){return this.wigoi},b.prototype.setVastErrorCode=function(b){if(b&&b.length>1){this.vastErrorCodeTracked=b[1];var c=a.Constant.TRACKING.noAd.vastError.replace(/\{code\}$/,this.vastErrorCodeTracked);this.logger.info(c),this.wigoi&&this.wigoi.valid(1,2,c,a.Wigo.infoType.ERROR)}},b.prototype.sendToWigo=function(b){switch(b){case a.Constant.TRACKING.adNotAvailable.networkError:case a.Constant.TRACKING.adNotAvailable.serverError:case a.Constant.TRACKING.adAvailable.error.parseTimeout:case a.Constant.TRACKING.adAvailable.error.settings:case a.Constant.TRACKING.adAvailable.error.badResponse:case a.Constant.TRACKING.adAvailable.error.sameAd:case a.Constant.TRACKING.noAd.ivt.doubleVerify:case a.Constant.TRACKING.noAd.ivt.tag:case a.Constant.TRACKING.noAd.blockedSite.doubleVerify:this.wigoi&&this.wigoi.valid(1,2,b,a.Wigo.infoType.ERROR)}},b.vastErrorRegExp=new RegExp(a.Constant.TRACKING.adAvailable.error.vast.replace(/\{code\}$/,"(\\d+)")),b}();a.PlacementTracker=b}(teads||(teads={}));var teads;!function(a){var b=function(){function b(){this.logger=new a.Logger("Page"),this.hasSlider=!1}return b.trackBrokenScrollerEnv=function(b,c){var d=c.placementConfig.parentWindow.getWindow()||window,e=c.getParentContainer();if(e&&a.Utils.isFunction(d.getComputedStyle)){var f=b&&b.getLinearAd()?"1":"0",g=function(a){return[a["-webkit-transform"],a["-moz-transform"],a["-o-transform"],a["-ms-transform"],a.transform]},h=function(a){return d.getComputedStyle(a)},i=function(b){return a.ArrayHelper.map(a.ArrayHelper.map(b,h),g)},j=a.ArrayHelper.some(i(a.HTMLHelper.findParentElements(e)),function(b){return a.ArrayHelper.includes(b,"matrix(1, 0, 0, 1, 0, 0)")})?"1":"0",k=d.location.hostname;a.formatSumologic.sendInfo("broken-scroller-env "+f+"|"+j+"|"+k,.1)}},b.getPlayerSize=function(b,c){var d={width:0,height:0};if(b){if(c.insertInside.isEnabled())d.width=b.getWidth();else if(b.getElement().parentNode){var e=a.Dom.getSize(b.getElement().parentNode);d.width=e.width}d.height=d.width/a.Constant.DEFAULT_VIDEO_SIZE_RATIO}else{var f=a.Dom.getWindowSize(c.parentWindow.getWindow());d.height=f.height*a.helper.SmartPosition.MAX_SIZE_RATIO_CORNER,d.width=d.height*a.Constant.DEFAULT_VIDEO_SIZE_RATIO}return d.width=Math.round(d.width),d.height=Math.round(d.height),d},b.prototype.process=function(c){var d=this;void 0===c&&(c=window._ttp||{});for(var e in c)if(c.hasOwnProperty(e)){var f=parseInt(e,10);if(a.PAGE_PROCESSED!==f&&0!==a.PAGE_PROCESSED&&0!==f){var g=c[f].map(function(a){return a.pid});throw a.formatSumologic.sendError({message:"multi pageId|"+f+"|"+g.join(";")}),new a.FormatException(a.FormatException.MULTIPLE_PAGE_PROCESS)}this.onDomComplete(f),a.ArrayHelper.forEach(c[e],function(c){var e=d.initTracker(f,c.pid||null);e&&(d.placementAd=d.checkPlacement(c,f,e),d.placementAd&&(d.placementAd=d.checkSlot(d.placementAd,f),d.placementAd&&d.callRAS(d.placementAd,f,function(c){d.loadAd(c,function(f,g,h){f=f||c.placement.handleNoAd(),d.vastPlayer=g,f&&(c.placement.initDom(c.placement.electedSlot),b.trackBrokenScrollerEnv(g,c.placement),c.placement.initFormatInstance(g,f,h),c.placement.getFormat().load(function(){d.vastPlayer&&e.track(a.Constant.TRACKING.adAvailable.success),c.placement.getFormat().start()},function(b){e.track(a.Constant.TRACKING.adAvailable.error.vast.replace(/\{code\}$/,String(b.getId()))),c.placement.handleNoAd()}))})})))}),a.formatSumologic.sendInfo({pageId:f,placementIds:a.ArrayHelper.map(c[e],function(a){return a.pid}),tag:window._ttf?"2":"3"}),a.PAGE_PROCESSED=a.PAGE_PROCESSED||f}},b.prototype.initTracker=function(b,c,d){void 0===d&&(d=a.None);var e;try{e=new a.PlacementTracker(b,c,d)}catch(e){a.formatSumologic.sendError({pageId:b,pid:c||null,headerBiddingProvider:d.getOrElse(function(){return null}),error:a.Utils.isFunction(e.getMessage)?e.getMessage():e.message||e})}return e},b.prototype.checkPlacement=function(b,c,d,e){void 0===e&&(e=a.None);var f,g;if(b.launched)return void this.logger.warn("This format has already been launched");b.launched=!0,d.track(a.Constant.TRACKING.placementCall);try{var h,i=new a.PlacementConfig(b),j=b.slider?{slider:b.slider}:a.PlacementSetting.getPlacementSetting(i.pid);j&&(h=new a.PlacementSetting(j))}catch(e){return this.logger.error(e.getMessage()),e.getId()===a.FormatException.OPTION_FORMAT_INVALID.id&&d.track(a.Constant.TRACKING.incompatibility.format),void a.formatSumologic.sendError({pageId:c,pid:b.pid||null,error:e.getMessage()})}switch(i.formatName.get()){case a.Constant.FORMAT.inread:g=new a.placement.Inread(c,i,h,d);break;case a.Constant.FORMAT.inboard:g=new a.placement.Inboard(c,i,h,d)}if(window._ttc&&window._ttc[c]&&window._ttc[c].rpm)return void g.placementConfig.rpmFallback.trigger();if(f={status:!0,reasons:[]},g.placementConfig.capping.reached())f.status=!1,g.placementTracker.track(a.Constant.TRACKING.placementCapping);else{var k=a.helper.Compatibility.checkEnvironment(g.placementConfig);if(this.logger.debug("Check environment",k),!k.status&&(f.status=!1,!a.Context.isAmp()||a.Context.isAmp()&&i.formatName.get()===a.Constant.FORMAT.inread)){var l=k.reasons[0];l&&g.placementTracker.track(l),g.placementConfig.fallback.trigger()&&g.placementTracker.track(a.Constant.TRACKING.fallback.integration)}}var m={id:g.pid,validity:f,player:null,slotType:g.placementTracker.slotType};return e.existsIf(function(a){return!!a.headerBiddingProvider})||this.userSync(g,c),{placement:g,report:m,ad:null}},b.prototype.checkSlot=function(c,d){if(c.report.validity.status){c.report.validity=c.placement.checkSlot(),this.logger.debug("Slot availability",c.report.validity);var e=c.placement.getElectedSlot();c.report.player=b.getPlayerSize(e,c.placement.placementConfig)}return c.report.validity.status||!c.report.validity.reasons.length?(c.placement.placementTracker.track(a.Constant.TRACKING.slotAvailable),c):(c.placement.placementTracker.track(c.report.validity.reasons[0]),c.placement.canEnableSlider()&&!this.hasSlider?(this.hasSlider=!0,c.report.validity.reasons=[],c.report.validity.status=!0,c.placement.enableSlider(),c.report.slotType=c.placement.placementTracker.slotType,c):void 0)},b.prototype.callRAS=function(b,c,d){var e=new a.helper.RASRequest(b,c,this.getAdRequestUrl(c),d);e.send()},b.prototype.loadAd=function(b,c){var d=this;if(b.placement){if(!b.ad)return void(b.report.validity.status&&c(null,null));if(b.placement.getElectedSlot()&&a.helper.CSSHelper.injectFormatCSS(b.placement.getElectedSlot().getElement()),b.ad.handled)return void this.logger.debug("Ad already handled for this placement");if(b.ad.handled=!0,b.ad.callbacks=b.placement.placementConfig.raw.callbacks,!b.placement.getElectedSlot())return void this.logger.debug("No elected slot -> not placing format");var e=b.placement.getFormatConfig(b.ad);e?b.placement.loadVast(e,function(a,b){a?c(e,a,b):(d.logger.debug("VAST loading failed, couldn't get VAST player instance"),c(null,null))}):(this.logger.debug("Could not load config for format"),c(null,null))}},b.prototype.clearInstances=function(){for(var b in a.Constant.FORMAT)if(a.Constant.FORMAT.hasOwnProperty(b)&&a.instances[b]&&a.instances[b].length)for(;a.instances&&a.instances[b]&&a.instances[b].length;)a.instances[b].pop().exit(a.EXIT_STATUS.AdSuccess)},b.prototype.reload=function(){this.clearInstances();for(var b in window._ttp)if(window._ttp.hasOwnProperty(b))for(var c=0,d=window._ttp[b].length;c<d;c++)window._ttp[b][c].launched=!1;a.instances={},this.process()},b.prototype.userSync=function(b,c){var d=this;if(b&&b.pid&&!this.isUserSyncIframeLoaded){var e=a.helper.UserSync.insert(b.pid);a.Dom.addEventListener("load",e,function(b){a.Timing.mark("markUserSyncResponse"),d.isUserSyncIframeLoaded=!0,d.processTiming(c)})}},b.prototype.onDomComplete=function(b){var c=this;try{a.Dom.onDomComplete(function(){c.isDomComplete=!0,c.processTiming(b)},a.HTMLHelper.findParentWindows(window.document.body).pop(),this)}catch(a){this.logger.warn("Can not access top window for performance",a)}},b.prototype.getAdRequestUrl=function(b){var c=a.config.richAdServerUrl.replace("{id}",String(b)),d=this.getTrackingMetadata(),e=[];for(var f in d)d.hasOwnProperty(f)&&e.push(f+"="+d[f]);return c+=c.indexOf("?")>0?"&":"?",c+e.join("&")},b.prototype.getTrackingMetadata=function(){var b=null;try{var c=a.HTMLHelper.findParentWindows(window.document.body),d="";window.top!==window&&(a.Context.isAmp()&&window.context.sourceUrl?d=window.context.sourceUrl:document.referrer&&(d=document.referrer)),d.match("ampproject.org")&&a.formatSumologic.sendInfo("ampref nok "+d,null,.01),b={windowWidth:window.innerWidth,windowHeight:window.innerHeight,windowDepth:c.length,windowReferrerUrl:encodeURIComponent(d)}}catch(a){this.logger.warn("An error occurred retrieving top window - Window metadata will be empty on the ad request")}return b},b.prototype.processTiming=function(b){if(this.isDomComplete&&this.isUserSyncIframeLoaded)try{var c=a.Timing.measure("measureSmartSlot","markFormatSmartSlotStart","markFormatSmartSlotEnd"),d=a.Timing.measure("measureUserSyncRequest","markUserSyncRequest","markUserSyncResponse"),e=a.Timing.getLastEntryByName("markFormatInit"),f=a.Timing.getTimingByRegex(/teads-format(.min)?\.js/),g={pageId:b,smartSlotDuration:c?Math.round(c.duration):null,markFormatInit:e?Math.round(e.startTime):null,entryCount:a.Timing.getResourceCount(),domLoading:null,domInteractive:null,domComplete:null,teadsFormatStart:f?Math.round(f.startTime):null,teadsFormatDuration:f?Math.round(f.duration):null,userSyncRequestDuration:d?Math.round(d.duration):null};if(a.Timing.performance&&a.Timing.performance.timing){var h=a.Timing.performance.timing;g.domLoading=Math.round(h.domLoading-h.fetchStart),g.domInteractive=Math.round(h.domInteractive-h.fetchStart),g.domComplete=Math.round(h.domComplete-h.fetchStart)}this.logger.debug("Sending timing data"),a.formatSumologic.sendInfo(g)}catch(a){this.logger.debug("Error on timing data process")}},b}();a.Page=b}(teads||(teads={}));var teads;!function(a){a.TAG={};var b,c={};!function(a){a[a.INIT=0]="INIT",a[a.LOADING=1]="LOADING",a[a.LOADED=2]="LOADED",a[a.SERVED=3]="SERVED",a[a.ERROR=4]="ERROR"}(b=a.TAG_STATUS||(a.TAG_STATUS={}));var d=function(){function d(e,f,g,h,i){void 0===h&&(h=!1),void 0===i&&(i=0);var j=this;this.pageId=e,this.pid=f,this.rawSettings=g,this.defer=h,this.pageIndex=i,this.doServe=!1,this.doPassback=!1,this.passbacks={beforeServe:[],afterServe:[]},this.scripts=[],this.trackings=[],this.wigoi=null,this.logger=new a.Logger("TagManager (pageId: "+e+", placementId: "+f+")"),this.logger.debug("new placement",g),this.settings=a.Utils.extend({},g||d.defaultRawPlacement),this.settings.pid=f,this.settings.format=this.settings.format||"inread",this.settings.fallback=function(){return j.logger.debug("no ad to serve so exec passback"),j.execPassback()},this.state=b.INIT,c[this.pid]&&c[this.pid].headerBiddingProvider&&this.handleHeaderBiddingAd(),a.config.refresh(window.teads),this.handleDataInsertion(f).forEach(function(b){a.URIHelper.isInternalUrl(a.config.buyingEngineUrl)||a.formatSumologic.sendWarning("illegal-be-url "+f+"|"+a.config.buyingEngineUrl),j.getAd=b})}return d.replaceTimestampMacro=function(b){return a.StringHelper.replaceStringsWithValue(a.config.timestampMacroNames,a.date.now())(b)},d.getRawAdFromScript=function(b,c,d,e){return b.match({some:function(b){return a.Dom.getAndRemoveAttributeValue(b,c).match({some:function(b){var c=e(a.Some({type:"VastUrl",content:"//a.teads.tv/vast/get/"+b,insertion_id:parseInt(b,10)}));return d.debug("data-insertion handled",c),a.Some(c)},none:function(){return d.error(c+" detected but the value is empty"),a.Option.empty()}})},none:function(){return a.Option.empty()}})},d.page=function(b){return a.TAG[b]||(a.TAG[b]={placement:function(a,c,e,f){return d.placement(b,a,c,e,f)}})},d.ad=function(b,e){return c[b]&&new a.Logger("TagManager placementId: "+b).warn("ad settings already exist and will be overwritten",c[b],e),c[b]=e,{page:d.page}},d.placement=function(b,c,e,f,g){var h=a.TAG[b],i=h[c]||(h[c]=[]);g=g||0===g?g:i.length?i.length-1:0,i[g]?e&&e!==i[g].rawSettings&&(i[g].rawSettings=e):i[g]=new d(b,c,e,f,g);var j=i[g];return j.findMatchingScript()?(j.logger.debug("found script with serve attribute -> serve it"),j.serve()):f?j.logger.debug("tag deferred"):j.load(),j},d.prototype.load=function(){var d=this,e=a.Option.of(c[this.pid]).map(function(a){return a.headerBiddingProvider});return this.state!==b.INIT?(this.logger.warn("tag already loaded, loading or served",this.state),this):(this.state=b.LOADING,this.logger.debug("load: checkPlacement > checkSlot > callRAS > loadAd"),this.onReadyState(function(){d.placementTracker=a.pageInstance.initTracker(d.pageId,d.pid,e),d.placementTracker?(d.trackings=d.findCustomTracking(d.scripts),d.fillCustomTracking(d.trackings,a.tracker.Config.format,d.placementTracker.tracker),d.adInfos=a.pageInstance.checkPlacement(d.settings,d.pageId,d.placementTracker,a.Option.of(c[d.pid])),d.adInfos?(d.adInfos.placement&&(d.wigoi=d.adInfos.placement.getWigoi()),d.logger.debug("load -> checkPlacement ok"),d.adInfos=a.pageInstance.checkSlot(d.adInfos,d.pageId),d.adInfos?(d.logger.debug("load -> checkSlot ok"),d.adInfos.ad=d.getAd,a.pageInstance.callRAS(d.adInfos,d.pageId,function(b){d.logger.debug("load -> callRAS",d.getAd?"bypassed by data-insertion":"ok"),d.adInfos=b,d.sendTagToWigo(),a.pageInstance.loadAd(b,function(c,e,f){d.logger.debug("load -> loadAd",c?"ok":"noAd"),d.loadFormat(b,c,e,f,function(){a.Page.trackBrokenScrollerEnv(e,b.placement),d.doServe?d.serve():d.logger.debug("waiting for serve")})})})):(d.logger.debug("load - checkSlot failure"),d.state=b.ERROR)):(d.logger.debug("load - placement failure"),d.state=b.ERROR)):(d.logger.debug("load - tracker init failure"),d.state=b.ERROR)}),this)},d.prototype.serve=function(){var a=this;switch(this.state){case b.ERROR:this.state=b.SERVED,this.logger.warn("serve - this placement cannot be served - state = ERROR");break;case b.SERVED:this.logger.warn("already served - reload and serve it again"),a=this.reload().serve();break;case b.INIT:this.doServe=!0,this.logger.debug("load before serve (defer)",this.adInfos),this.load();break;case b.LOADING:this.doServe=!0;break;case b.LOADED:this.state=b.SERVED,this.logger.debug("serve",this.adInfos);var c=this.adInfos.placement.getFormat();c&&c.start(),this.logger.debug("ad successfully served"),this.vastPlayer&&!this.isSameAd()||(this.logger.debug("serve - no ad to serve so exec passback"),this.execPassback())}return a},d.prototype.reload=function(){var b=a.page(this.pageId).placement(this.pid,this.rawSettings,this.defer,this.pageIndex+1);return b.passbacks=this.passbacks,b},d.prototype.passback=function(b,c){return void 0===c&&(c=!1),a.ArrayHelper.includes(this.passbacks.afterServe,b)?this.logger.warn("passback - signature was already appended to the passback list",b,this.passbacks.afterServe):"function"==typeof b?(this.passbacks.afterServe.push(b),this.logger.debug("passback - pushed to the list",b),c&&(this.passbacks.beforeServe.push(b),this.logger.debug("passback - pushed to the *before serve* list too")),this.doPassback&&(this.logger.debug("passback - execPassback already called with no passback to exec, call it again"),this.doPassback=!1,this.execPassback())):this.logger.warn("passback - must be a function"),this},d.prototype.getWigoi=function(){return this.wigoi},d.prototype.loadFormat=function(c,d,e,f,g){var h=this;this.formatConfig=d||c.placement.handleNoAd(),this.vastPlayer=e,this.displayAd=f,this.wigoi&&d&&this.wigoi.setStatus(!0,"Ready to serve"),a.helper.WigoHelper.reorderWigoButtons(),this.formatConfig?(this.adInfos.placement.initDom(this.adInfos.placement.electedSlot),this.adInfos.placement.initFormatInstance(this.vastPlayer,this.formatConfig,this.displayAd),this.adInfos.placement.getFormat().load(function(){h.vastPlayer&&(h.isSameAd()?(h.logger.error("same ad detected"),h.placementTracker.track(a.Constant.TRACKING.adAvailable.error.sameAd),h.formatConfig=h.adInfos.placement.handleNoAd(),h.adInfos.placement.initFormatInstance(h.vastPlayer,h.formatConfig,h.displayAd)):(h.placementTracker.track(a.Constant.TRACKING.adAvailable.success),h.fillCustomTracking(h.trackings,a.tracker.Config.vast,h.vastPlayer.getPlugin("Tracker").getTracker()))),h.state=b.LOADED,a.Utils.isFunction(g)&&g()},function(c){h.state=b.LOADED,h.placementTracker.track(a.Constant.TRACKING.adAvailable.error.vast.replace(/\{code\}$/,String(c.getId()))),h.adInfos.placement.handleNoAd()})):a.Utils.isFunction(g)&&(this.state=b.LOADED,g())},d.prototype.execPassback=function(){var c,d=this;switch(this.state){case b.SERVED:c=this.passbacks.afterServe,this.logger.debug("exec passback - after serve");break;default:c=this.passbacks.beforeServe,this.logger.debug("exec passback - before serve")}if(c.length){var e=c.shift();return this.logger.debug("exec passback -",e),e(function(){return d.execPassback()}),this.doPassback=!1,null}return this.logger.debug("exec passback - no passback to exec"),this.doPassback=!0,this.passbacks.afterServe.length?null:a.Constant.INTERNAL_PASSBACK_NO_PASSBACK},d.prototype.findMatchingScript=function(){for(var b=!1,c=a.HTMLHelper.findParentWindows(document.body).concat(a.HTMLHelper.findChildWindows(document.body)),d=0,e=c;d<e.length;d++)for(var f=e[d],g=a.Dom.querySelectorAll("script.teads",f),h=0;h<g.length;h++){this.scripts.push(g[h]);var i=g[h]?g[h].getAttribute("data-serve"):"";i&&i.match(this.pid.toString())&&(g[h].setAttribute("data-serve",i.replace(this.pid.toString(),"")),b=!0)}return b},d.prototype.constructAdSettings=function(b){return void 0===b&&(b=a.Option.empty()),a.Utils.extend(d.defaultAdsSettings,b.getOrElse(function(){return{}}),{settings:{values:{pageId:this.pageId,placementId:this.pid,placementFormat:this.settings.format}}},c[this.pid])},d.prototype.handleHeaderBiddingAd=function(){this.getAd=this.constructAdSettings()},d.prototype.handleDataInsertion=function(b){var c="data-insertion-"+b,e=a.HTMLHelper.findAllWindows(document.body),f=a.Dom.findMatchingElement(a.ArrayHelper.map(e,function(a){return a.document}),"script.teads["+c+"]");return d.getRawAdFromScript(f,c,this.logger,this.constructAdSettings.bind(this))},d.prototype.findCustomTracking=function(b){for(var c=[],d=0,e=b;d<e.length;d++)for(var f=e[d],g='data-tracking(?:-(\\d+))?-([^=]+)="([^"]+)"',h=a.Dom.getOuterHTML(f)||"",i=h.match(new RegExp(g,"g"))||[],j=0,k=i;j<k.length;j++){var l=k[j],m=l.match(new RegExp(g));if(4===m.length){var n=m[1],o=m[2],p=m[3];(n&&Number(n)===this.pid||!n)&&(this.logger.debug("find custom tracking (event, url, pid)",o,p,n),c.push({event:o,url:p}),n&&f.removeAttribute("data-tracking-"+o+"-"+n))}else this.logger.debug('error on data-tracking extraction, 3 args expected (["all", "key", "value"])',m)}return c},d.prototype.fillCustomTracking=function(b,c,e){for(var f=function(b){var f=/(progress)-(\d+)/,h=b.event.match(f)||["","",""],i=h[1],j=h[2],k=a.ArrayHelper.find(c,function(a){return a.name.toLowerCase()===i||a.name.toLowerCase()===b.event.toLowerCase()});k&&(b.url=d.replaceTimestampMacro(b.url),e.addResource(k.name,b.url,Number(j)),g.logger.debug("fill custom tracking (tracking.name, url, offset)",k.name,b.url,Number(j)))},g=this,h=0,i=b;h<i.length;h++){var j=i[h];f(j)}},d.prototype.avoidSameAd=function(){var b=!1,c=[];for(var e in a.TAG[this.pageId])if("placement"!==e&&a.TAG[this.pageId][e].length)for(var f=0,g=a.TAG[this.pageId][e];f<g.length;f++){var h=g[f],i=h.vastPlayer,j=i?i.getMediafile():null;i&&j&&h!==this&&c.push(j.url+j.adParameters)}return a.ArrayHelper.forEach(this.vastPlayer?this.vastPlayer.getLinearAd().mediaFiles:[],function(d){a.ArrayHelper.indexOf(c,d.url+d.adParameters)!==-1&&(b=!0)}),this.index=d.sameAdGlobalIndex=d.sameAdGlobalIndex?++d.sameAdGlobalIndex:1,b},d.prototype.isSameAd=function(){return!this.getAd&&this.avoidSameAd()},d.prototype.sendTagToWigo=function(){this.wigoi&&this.wigoi.valid(0,1,{ttp:this.settings,tta:this.adInfos.ad,tts:this.adInfos.placement.placementSetting},a.Wigo.infoType.MODAL)},d.prototype.onReadyState=function(b){for(var c,d=a.HTMLHelper.findParentWindows(document.body).concat(a.HTMLHelper.findChildWindows(document.body)),e=0,f=d;e<f.length;e++){var g=f[e];c=c||g.document.querySelector("script.teads[data-readystate]")}c&&"domcomplete"===c.getAttribute("data-readystate")?(this.logger.debug("waiting dom complete"),a.Dom.onDomComplete(b)):(this.logger.debug("waiting dom ready"),a.Dom.onDomReady(b))},d.defaultRawPlacement={pid:null,format:null,slot:null},d.defaultAdsSettings={settings:{values:{pageId:0,placementFormat:"inread",placementId:1234,threshold:50},components:{soundButton:{display:!1,countdown:0,type:"mute"}}}},d}();a.TagManager=d}(teads||(teads={}));var teads;!function(a){function b(){a.Option.of(window.teads.PAGE_PROCESSED).forEach(function(b){return a.PAGE_PROCESSED=b}),a.Option.of(window.teads.instances).forEach(function(b){return a.instances=b}),a.Option.of(window.teads.currentPlayerId).forEach(function(b){return a.currentPlayerId=b}),a.Timing.mark("markFormatInit");var b=new a.Logger("Main");b.info("Init - Format initialization success"),d(a.config.isSumologicLogsEnabled,a.formatSumologic,b),e(),a.pageInstance=new a.Page}function c(){a.Dom.onDomReady(function(){return a.pageInstance.process()})}function d(b,c,d){if(b){var e=a.Option.ofNested(window.teads,"router.routerSumologic.getSessionId").map(function(a){return a()}),f="2.17.85";c.init(a.Sumologic.CONFIGS.FORMAT,e,f),c.sendMetadata({vFormat:f,vShared:f,vPlayer:f,device:a.Context.getDevice().toString(),os:a.Context.getOS().toString(),browser:a.Context.getBrowser().toString(),sf:a.Context.isIABSafeFrame(),amp:a.Context.isAmp(),fb:a.Context.isFacebookIA()})}else d.debug("Could not initialize Sumologic (config.isSumologicLogsEnabled = false)")}function e(){a.Context.isAmp()&&(window.context.observeIntersection(function(b){window._teads_amp.change=b.pop(),a.helper.Amp.init()}),a.helper.Amp.init()),a.Context.isFacebookIA()&&(window.document.body.style.backgroundColor="#fff")}a.PAGE_PROCESSED=0,a.instances={},a.currentPlayerId=0,a.page=a.TagManager.page,a.ad=a.TagManager.ad,b(),c()}(teads||(teads={}));