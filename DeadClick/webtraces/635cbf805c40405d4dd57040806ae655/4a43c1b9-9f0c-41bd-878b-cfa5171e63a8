!function(t){t.extend(t.fn,{validate:function(e){if(!this.length)return void(e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var i=t.data(this[0],"validator");return i?i:(this.attr("novalidate","novalidate"),i=new t.validator(e,this[0]),t.data(this[0],"validator",i),i.settings.onsubmit&&(this.validateDelegate(":submit","click",function(e){i.settings.submitHandler&&(i.submitButton=e.target),t(e.target).hasClass("cancel")&&(i.cancelSubmit=!0),void 0!==t(e.target).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.submit(function(e){function s(){var s;return!i.settings.submitHandler||(i.submitButton&&(s=t("<input type='hidden'/>").attr("name",i.submitButton.name).val(t(i.submitButton).val()).appendTo(i.currentForm)),i.settings.submitHandler.call(i,i.currentForm,e),i.submitButton&&s.remove(),!1)}return i.settings.debug&&e.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,s()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):s():(i.focusInvalid(),!1)})),i)},valid:function(){if(t(this[0]).is("form"))return this.validate().form();var e=!0,i=t(this[0].form).validate();return this.each(function(){e=e&&i.element(this)}),e},removeAttrs:function(e){var i={},s=this;return t.each(e.split(/\s/),function(t,e){i[e]=s.attr(e),s.removeAttr(e)}),i},rules:function(e,i){var s=this[0];if(e){var r=t.data(s.form,"validator").settings,n=r.rules,a=t.validator.staticRules(s);switch(e){case"add":t.extend(a,t.validator.normalizeRule(i)),delete a.messages,n[s.name]=a,i.messages&&(r.messages[s.name]=t.extend(r.messages[s.name],i.messages));break;case"remove":if(!i)return delete n[s.name],a;var o={};return t.each(i.split(/\s/),function(t,e){o[e]=a[e],delete a[e]}),o}}var u=t.validator.normalizeRules(t.extend({},t.validator.classRules(s),t.validator.attributeRules(s),t.validator.dataRules(s),t.validator.staticRules(s)),s);if(u.required){var l=u.required;delete u.required,u=t.extend({required:l},u)}return u}}),t.extend(t.expr[":"],{blank:function(e){return!t.trim(""+t(e).val())},filled:function(e){return!!t.trim(""+t(e).val())},unchecked:function(e){return!t(e).prop("checked")}}),t.validator=function(e,i){this.settings=t.extend(!0,{},t.validator.defaults,e),this.currentForm=i,this.init()},t.validator.format=function(e,i){return 1===arguments.length?function(){var i=t.makeArray(arguments);return i.unshift(e),t.validator.format.apply(this,i)}:(arguments.length>2&&i.constructor!==Array&&(i=t.makeArray(arguments).slice(1)),i.constructor!==Array&&(i=[i]),t.each(i,function(t,i){e=e.replace(new RegExp("\\{"+t+"\\}","g"),function(){return i})}),e)},t.extend(t.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:t([]),errorLabelContainer:t([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(t){this.lastActive=t,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,t,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(t)).hide())},onfocusout:function(t){this.checkable(t)||!(t.name in this.submitted)&&this.optional(t)||this.element(t)},onkeyup:function(t,e){(9!==e.which||""!==this.elementValue(t))&&(t.name in this.submitted||t===this.lastElement)&&this.element(t)},onclick:function(t){t.name in this.submitted?this.element(t):t.parentNode.name in this.submitted&&this.element(t.parentNode)},highlight:function(e,i,s){"radio"===e.type?this.findByName(e.name).addClass(i).removeClass(s):t(e).addClass(i).removeClass(s)},unhighlight:function(e,i,s){"radio"===e.type?this.findByName(e.name).removeClass(i).addClass(s):t(e).removeClass(i).addClass(s)}},setDefaults:function(e){t.extend(t.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:t.validator.format("Please enter no more than {0} characters."),minlength:t.validator.format("Please enter at least {0} characters."),rangelength:t.validator.format("Please enter a value between {0} and {1} characters long."),range:t.validator.format("Please enter a value between {0} and {1}."),max:t.validator.format("Please enter a value less than or equal to {0}."),min:t.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function e(e){var i=t.data(this[0].form,"validator"),s="on"+e.type.replace(/^validate/,"");i.settings[s]&&i.settings[s].call(i,this[0],e)}this.labelContainer=t(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||t(this.currentForm),this.containers=t(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i=this.groups={};t.each(this.settings.groups,function(e,s){"string"==typeof s&&(s=s.split(/\s/)),t.each(s,function(t,s){i[s]=e})});var s=this.settings.rules;t.each(s,function(e,i){s[e]=t.validator.normalizeRule(i)}),t(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",e).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",e),this.settings.invalidHandler&&t(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),t.extend(this.submitted,this.errorMap),this.invalid=t.extend({},this.errorMap),this.valid()||t(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var t=0,e=this.currentElements=this.elements();e[t];t++)this.check(e[t]);return this.valid()},element:function(e){e=this.validationTargetFor(this.clean(e)),this.lastElement=e,this.prepareElement(e),this.currentElements=t(e);var i=this.check(e)!==!1;return i?delete this.invalid[e.name]:this.invalid[e.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),i},showErrors:function(e){if(e){t.extend(this.errorMap,e),this.errorList=[];for(var i in e)this.errorList.push({message:e[i],element:this.findByName(i)[0]});this.successList=t.grep(this.successList,function(t){return!(t.name in e)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){t.fn.resetForm&&t(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(t){var e=0;for(var i in t)e++;return e},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{t(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var e=this.lastActive;return e&&1===t.grep(this.errorList,function(t){return t.element.name===e.name}).length&&e},elements:function(){var e=this,i={};return t(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),!(this.name in i||!e.objectLength(t(this).rules()))&&(i[this.name]=!0,!0)})},clean:function(e){return t(e)[0]},errors:function(){var e=this.settings.errorClass.replace(" ",".");return t(this.settings.errorElement+"."+e,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=t([]),this.toHide=t([]),this.currentElements=t([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(t){this.reset(),this.toHide=this.errorsFor(t)},elementValue:function(e){var i=t(e).attr("type"),s=t(e).val();return"radio"===i||"checkbox"===i?t("input[name='"+t(e).attr("name")+"']:checked").val():"string"==typeof s?s.replace(/\r/g,""):s},check:function(e){e=this.validationTargetFor(this.clean(e));var i,s=t(e).rules(),r=!1,n=this.elementValue(e);for(var a in s){var o={method:a,parameters:s[a]};try{if(i=t.validator.methods[a].call(this,n,e,o.parameters),"dependency-mismatch"===i){r=!0;continue}if(r=!1,"pending"===i)return void(this.toHide=this.toHide.not(this.errorsFor(e)));if(!i)return this.formatAndAdd(e,o),!1}catch(u){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+e.id+", check the '"+o.method+"' method.",u),u}}return r?void 0:(this.objectLength(s)&&this.successList.push(e),!0)},customDataMessage:function(e,i){return t(e).data("msg-"+i.toLowerCase())||e.attributes&&t(e).attr("data-msg-"+i.toLowerCase())},customMessage:function(t,e){var i=this.settings.messages[t];return i&&(i.constructor===String?i:i[e])},findDefined:function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]},defaultMessage:function(e,i){return this.findDefined(this.customMessage(e.name,i),this.customDataMessage(e,i),!this.settings.ignoreTitle&&e.title||void 0,t.validator.messages[i],"<strong>Warning: No message defined for "+e.name+"</strong>")},formatAndAdd:function(e,i){var s=this.defaultMessage(e,i.method),r=/\$?\{(\d+)\}/g;"function"==typeof s?s=s.call(this,i.parameters,e):r.test(s)&&(s=t.validator.format(s.replace(r,"{$1}"),i.parameters)),this.errorList.push({message:s,element:e}),this.errorMap[e.name]=s,this.submitted[e.name]=s},addWrapper:function(t){return this.settings.wrapper&&(t=t.add(t.parent(this.settings.wrapper))),t},defaultShowErrors:function(){var t,e;for(t=0;this.errorList[t];t++){var i=this.errorList[t];this.settings.highlight&&this.settings.highlight.call(this,i.element,this.settings.errorClass,this.settings.validClass),this.showLabel(i.element,i.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(t=0;this.successList[t];t++)this.showLabel(this.successList[t]);if(this.settings.unhighlight)for(t=0,e=this.validElements();e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return t(this.errorList).map(function(){return this.element})},showLabel:function(e,i){var s=this.errorsFor(e);s.length?(s.removeClass(this.settings.validClass).addClass(this.settings.errorClass),s.html(i)):(s=t("<"+this.settings.errorElement+">").attr("for",this.idOrName(e)).addClass(this.settings.errorClass).html(i||""),this.settings.wrapper&&(s=s.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(s).length||(this.settings.errorPlacement?this.settings.errorPlacement(s,t(e)):s.insertAfter(e))),!i&&this.settings.success&&(s.text(""),"string"==typeof this.settings.success?s.addClass(this.settings.success):this.settings.success(s,e)),this.toShow=this.toShow.add(s)},errorsFor:function(e){var i=this.idOrName(e);return this.errors().filter(function(){return t(this).attr("for")===i})},idOrName:function(t){return this.groups[t.name]||(this.checkable(t)?t.name:t.id||t.name)},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name).not(this.settings.ignore)[0]),t},checkable:function(t){return/radio|checkbox/i.test(t.type)},findByName:function(e){return t(this.currentForm).find("[name='"+e+"']")},getLength:function(e,i){switch(i.nodeName.toLowerCase()){case"select":return t("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return e.length},depend:function(t,e){return!this.dependTypes[typeof t]||this.dependTypes[typeof t](t,e)},dependTypes:{"boolean":function(t){return t},string:function(e,i){return!!t(e,i.form).length},"function":function(t,e){return t(e)}},optional:function(e){var i=this.elementValue(e);return!t.validator.methods.required.call(this,i,e)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,this.pending[t.name]=!0)},stopRequest:function(e,i){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],i&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(t(this.currentForm).submit(),this.formSubmitted=!1):!i&&0===this.pendingRequest&&this.formSubmitted&&(t(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e){return t.data(e,"previousValue")||t.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,i){e.constructor===String?this.classRuleSettings[e]=i:t.extend(this.classRuleSettings,e)},classRules:function(e){var i={},s=t(e).attr("class");return s&&t.each(s.split(" "),function(){this in t.validator.classRuleSettings&&t.extend(i,t.validator.classRuleSettings[this])}),i},attributeRules:function(e){var i={},s=t(e),r=s[0].getAttribute("type");for(var n in t.validator.methods){var a;"required"===n?(a=s.get(0).getAttribute(n),""===a&&(a=!0),a=!!a):a=s.attr(n),/min|max/.test(n)&&(null===r||/number|range|text/.test(r))&&(a=Number(a)),a?i[n]=a:r===n&&"range"!==r&&(i[n]=!0)}return i.maxlength&&/-1|2147483647|524288/.test(i.maxlength)&&delete i.maxlength,i},dataRules:function(e){var i,s,r={},n=t(e);for(i in t.validator.methods)s=n.data("rule-"+i.toLowerCase()),void 0!==s&&(r[i]=s);return r},staticRules:function(e){var i={},s=t.data(e.form,"validator");return s.settings.rules&&(i=t.validator.normalizeRule(s.settings.rules[e.name])||{}),i},normalizeRules:function(e,i){return t.each(e,function(s,r){if(r===!1)return void delete e[s];if(r.param||r.depends){var n=!0;switch(typeof r.depends){case"string":n=!!t(r.depends,i.form).length;break;case"function":n=r.depends.call(i,i)}n?e[s]=void 0===r.param||r.param:delete e[s]}}),t.each(e,function(s,r){e[s]=t.isFunction(r)?r(i):r}),t.each(["minlength","maxlength"],function(){e[this]&&(e[this]=Number(e[this]))}),t.each(["rangelength","range"],function(){var i;e[this]&&(t.isArray(e[this])?e[this]=[Number(e[this][0]),Number(e[this][1])]:"string"==typeof e[this]&&(i=e[this].split(/[\s,]+/),e[this]=[Number(i[0]),Number(i[1])]))}),t.validator.autoCreateRanges&&(e.min&&e.max&&(e.range=[e.min,e.max],delete e.min,delete e.max),e.minlength&&e.maxlength&&(e.rangelength=[e.minlength,e.maxlength],delete e.minlength,delete e.maxlength)),e},normalizeRule:function(e){if("string"==typeof e){var i={};t.each(e.split(/\s/),function(){i[this]=!0}),e=i}return e},addMethod:function(e,i,s){t.validator.methods[e]=i,t.validator.messages[e]=void 0!==s?s:t.validator.messages[e],i.length<3&&t.validator.addClassRules(e,t.validator.normalizeRule(e))},methods:{required:function(e,i,s){if(!this.depend(s,i))return"dependency-mismatch";if("select"===i.nodeName.toLowerCase()){var r=t(i).val();return r&&r.length>0}return this.checkable(i)?this.getLength(e,i)>0:t.trim(e).length>0},email:function(t,e){return this.optional(e)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(t)},url:function(t,e){return this.optional(e)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(t)},date:function(t,e){return this.optional(e)||!/Invalid|NaN/.test(new Date(t).toString())},dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(t)},number:function(t,e){return this.optional(e)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},creditcard:function(t,e){if(this.optional(e))return"dependency-mismatch";if(/[^0-9 \-]+/.test(t))return!1;var i=0,s=0,r=!1;t=t.replace(/\D/g,"");for(var n=t.length-1;n>=0;n--){var a=t.charAt(n);s=parseInt(a,10),r&&(s*=2)>9&&(s-=9),i+=s,r=!r}return 0===i%10},minlength:function(e,i,s){var r=t.isArray(e)?e.length:this.getLength(t.trim(e),i);return this.optional(i)||r>=s},maxlength:function(e,i,s){var r=t.isArray(e)?e.length:this.getLength(t.trim(e),i);return this.optional(i)||s>=r},rangelength:function(e,i,s){var r=t.isArray(e)?e.length:this.getLength(t.trim(e),i);return this.optional(i)||r>=s[0]&&r<=s[1]},min:function(t,e,i){return this.optional(e)||t>=i},max:function(t,e,i){return this.optional(e)||i>=t},range:function(t,e,i){return this.optional(e)||t>=i[0]&&t<=i[1]},equalTo:function(e,i,s){var r=t(s);return this.settings.onfocusout&&r.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){t(i).valid()}),e===r.val()},json_remote:function(e,i,s){if(this.optional(i))return"dependency-mismatch";var r=this.previousValue(i);this.settings.messages[i.name]||(this.settings.messages[i.name]={}),this.settings.messages[i.name].remote="function"==typeof r.message?r.message(e):r.message;var n=s+"&email="+e;if(s="string"==typeof s&&{url:s}||s,r.old!==e){r.old=e;var a=this;this.startRequest(i);var o={};return o[i.name]=e,t.getJSON(n,function(t){var e=t.msg;if(e){var s=a.formSubmitted;a.prepareElement(i),a.formSubmitted=s,a.successList.push(i),a.showErrors()}else{var n={};n[i.name]=e||a.defaultMessage(i,"remote"),a.showErrors(n)}r.valid=e,a.stopRequest(i,e),r.old=null}),"pending"}return this.pending[i.name]?"pending":r.valid},remote:function(e,i,s){if(this.optional(i))return"dependency-mismatch";var r=this.previousValue(i);if(this.settings.messages[i.name]||(this.settings.messages[i.name]={}),r.originalMessage=this.settings.messages[i.name].remote,this.settings.messages[i.name].remote=r.message,s="string"==typeof s&&{url:s}||s,r.old===e)return r.valid;r.old=e;var n=this;this.startRequest(i);var a={};return a[i.name]=e,t.ajax(t.extend(!0,{url:s,mode:"abort",port:"validate"+i.name,dataType:"json",data:a,success:function(s){n.settings.messages[i.name].remote=r.originalMessage;var a=s===!0||"true"===s;if(a){var o=n.formSubmitted;n.prepareElement(i),n.formSubmitted=o,n.successList.push(i),delete n.invalid[i.name],n.showErrors()}else{var u={},l=s||n.defaultMessage(i,"remote");u[i.name]=r.message=t.isFunction(l)?l(e):l,n.invalid[i.name]=!0,n.showErrors(u)}r.valid=a,n.stopRequest(i,a)}},s)),"pending"}}}),t.format=t.validator.format}(jQuery),function(t){var e={};if(t.ajaxPrefilter)t.ajaxPrefilter(function(t,i,s){var r=t.port;"abort"===t.mode&&(e[r]&&e[r].abort(),e[r]=s)});else{var i=t.ajax;t.ajax=function(s){var r=("mode"in s?s:t.ajaxSettings).mode,n=("port"in s?s:t.ajaxSettings).port;return"abort"===r?(e[n]&&e[n].abort(),e[n]=i.apply(this,arguments),e[n]):i.apply(this,arguments)}}}(jQuery),function(t){t.extend(t.fn,{validateDelegate:function(e,i,s){return this.bind(i,function(i){var r=t(i.target);return r.is(e)?s.apply(r,arguments):void 0})}})}(jQuery),jQuery.validator.addMethod("custom_emailReg",function(t,e){var i=/^\w[-\w.+]*@([A-Za-z0-9][-A-Za-z0-9]+\.)+[A-Za-z]{2,14}$/;return this.optional(e)||i.test(t)},jsLg.validataMsg.validEmail),jQuery.validator.addMethod("custom_phoneReg",function(t,e){var i=/^[0-9\+\-\/\(\)]+$/;return this.optional(e)||i.test(t)},jsLg.validataMsg.validPhone),jQuery.validator.addMethod("custom_cityReg",function(t,e){var i=/[\!\@\$\%\^]/,s=/^\d+$/;return this.optional(e)||!i.test(t)&&!s.test(t)},jsLg.validataMsg.validCity),jQuery.validator.addMethod("custom_stateReg",function(t,e){var i=/[\!\@\$\%\^]/;return this.optional(e)||!i.test(t)},jsLg.validataMsg.validState),jQuery.validator.addMethod("custom_streetReg",function(t,e){var i=/[\!\@\$\%\^&\*]/,s=/^\d+$/;return this.optional(e)||!i.test(t)&&!s.test(t)},jsLg.validataMsg.validSteetAdd),jQuery.validator.addMethod("custom_zipReg",function(t,e){var i=/[\!#\$\%\^&\*]/;return this.optional(e)||!i.test(t)},jsLg.validataMsg.validZip);
void function(e,t){var i=!1,o=JS_IMG_URL,a=function(){var a=jQuery,s=a(e),r={getPath:function(){var e=document.scripts||a("script"),t=e[e.length-1].src;return t.substring(0,t.lastIndexOf("/")+1)},append:function(){i&&(o=this.getPath());var e=a("head")[0],t=document.createElement("link");t.setAttribute("type","text/css"),t.setAttribute("rel","stylesheet"),t.setAttribute("href",o+"mincss/layer_min.css?v=2"),e.appendChild(t)},global:{iE6:!-[1]&&!e.XMLHttpRequest,times:0}};e.layer={v:"1.5.1",ready:function(e){var t="#layerCss";return a(t).ready(function(){e()})},alert:function(e,t,i,o){return a.layer({dialog:{msg:e,type:t,yes:o},title:i,area:["auto","auto"]})},confirm:function(e,t,i,o){return a.layer({dialog:{msg:e,type:4,btns:2,yes:t,no:o},title:i})},msg:function(e,i,o,s){return(""==e||e==t)&&(e="&nbsp;"),(i==t||""==i)&&(i=2),a.layer({dialog:{msg:e,type:o},time:i,title:["",!1],closeBtn:["",!1],end:function(){s&&s()}})},tips:function(e,t,i,o,s,r){return a.layer({type:4,shade:!1,time:i,maxWidth:o,tips:{msg:e,guide:s,follow:t,style:r}})},load:function(e,t,i){var o=!0;return 3===t&&(o=!1),a.layer({time:e,shade:i,loading:{type:t},border:[10,.3,"#000",o],type:3,title:["",!1],closeBtn:[0,!1]})}};var n=function(e){r.global.times++,this.index=r.global.times;var t=this.config;this.config=a.extend({},t,e),this.config.dialog=a.extend({},t.dialog,e.dialog),this.config.page=a.extend({},t.page,e.page),this.config.iframe=a.extend({},t.iframe,e.iframe),this.config.loading=a.extend({},t.loading,e.loading),this.config.tips=a.extend({},t.tips,e.tips),this.adjust()};n.pt=n.prototype,n.pt.config={skin:0,type:0,shade:[.5,"#000",!0],shadeClose:!1,fix:!0,move:[".xubox_title",!0],title:["信息",!0],offset:["200px","50%"],area:["310px","auto"],closeBtn:[0,!0],time:0,border:[10,.3,"#000",!0],zIndex:19891014,maxWidth:400,fadeIn:[300,!1],dialog:{btns:1,btn:["确定","取消"],type:3,msg:"",yes:function(e){layer.close(e)},no:function(e){layer.close(e)}},page:{dom:"#xulayer",html:""},iframe:{src:"http://sentsin.com"},loading:{type:0},tips:{msg:"",follow:"",guide:0,style:["background-color:#FF9900; color:#fff;","#FF9900"]},success:function(){},close:function(e){layer.close(e)},end:function(){}},n.pt.type=["dialog","page","iframe","loading","tips"],n.pt.space=function(e){var e=e||"",t=this.index,i=this.config,o=i.dialog,a=['<div class="xubox_dialog"><span class="xubox_msg xulayer_png32 xubox_msgico xubox_msgtype'+o.type+'"></span><span class="xubox_msg xubox_text">'+o.msg+"</span></div>",'<div class="xubox_page xubox_page_'+i.skin+'">'+e+"</div>",'<iframe allowtransparency="true" id="xubox_iframe" name="xubox_iframe" onload="javascript:$(\'.xubox_layer\').find(\'.xubox_iframe\').removeClass(\'xubox_load\');" class="xubox_iframe" frameborder="0" src="'+i.iframe.src+'"></iframe>','<span class="xubox_loading xubox_loading_'+i.loading.type+'"></span>','<div class="xubox_tips xubox_tips_'+i.skin+'" style="'+i.tips.style[0]+'"><div class="xubox_tipsMsg">'+i.tips.msg+'</div><i class="layerTipsG"></i></div>'],s="",r="";this.zIndex=i.zIndex+t;var n=this.zIndex,l="z-index:"+n+"; background-color:"+i.shade[1]+"; opacity:"+i.shade[0]+"; filter:alpha(opacity="+100*i.shade[0]+");";i.shade[2]&&(s='<div times="'+t+'" id="xubox_shade'+t+'" class="xubox_shade xubox_shade_'+i.skin+'" style="'+l+'"></div>');var d="z-index:"+(n-1)+";  background-color: "+i.border[2]+"; opacity:"+i.border[1]+"; filter:alpha(opacity="+100*i.border[1]+"); top:-"+i.border[0]+"px; left:-"+i.border[0]+"px;";i.border[3]&&(r='<div id="xubox_border'+t+'" class="xubox_border" style="'+d+'"></div>');var x='<div times="'+t+'" showtime="'+i.time+'" style="z-index:'+n+'" id="xubox_layer'+t+'" class="xubox_layer xubox_layer_'+i.skin+'"><div style="z-index:'+n+'" class="xubox_main xubox_main_'+i.skin+'">'+a[i.type]+'<h2 class="xubox_title xubox_title_'+i.skin+'"><em>'+i.title[0]+'</em></h2><a class="xubox_close xulayer_png32 xubox_close'+i.closeBtn[0]+"_"+i.skin+'" href="javascript:;"></a><span class="xubox_botton"></span></div>'+r+"</div>";return[s,x]},n.pt.adjust=function(){var e=this,t="",i=this.config,o=i.dialog,n=e.config.title;n.constructor===Array||(e.config.title=[n,!0]),n===!1&&(e.config.title=[n,!1]);var l=i.page,d=function(i){var i=i||"";t=e.space(i),a("body").append(t[0])};switch(i.type){case 1:if(""!==l.html)d('<div id="xuboxPageHtml">'+l.html+"</div>"),a("body").append(t[1]);else{if(0!=a(l.dom).parents(".xubox_page").length)return!1;d(),a(l.dom).show().wrap(t[1])}break;case 2:a(".xubox_layer").find(".xubox_iframe").length>0&&layer.close(a(".xubox_iframe").parents(".xubox_layer").attr("times")),d(),a("body").append(t[1]);break;case 3:i.title=["",!1],i.area=["auto","auto"],i.closeBtn=["",!1],a(".xubox_layer").find(".xubox_loading").length>0&&layer.close(a(".xubox_loading").parents(".xubox_layer").attr("times")),d(),a("body").append(t[1]);break;case 4:i.title=["",!1],i.area=["auto","auto"],i.fix=!1,i.border=[0,0,0,!1],a(".xubox_layer").find(".xubox_tips").length>0&&layer.close(a(".xubox_tips").parents(".xubox_layer").attr("times")),d(),a("body").append(t[1]),a(".xubox_tips").fadeIn(200).parents(".xubox_layer").find(".xubox_close").css({top:5,right:5});break;default:i.title[1]||(i.area=["auto","auto"]),a(".xubox_layer").find(".xubox_dialog").length>0&&layer.close(a(".xubox_dialog").parents(".xubox_layer").attr("times")),d(),a("body").append(t[1])}var x=r.global.times;this.layerS=a("#xubox_shade"+x),this.layerB=a("#xubox_border"+x),this.layerE=a("#xubox_layer"+x);var c=this.layerE;if(-1!=i.offset[1].indexOf("px"))var u=parseInt(i.offset[1]);else if("50%"==i.offset[1])var u=i.offset[1];else var u=parseInt(i.offset[1])/100*s.width();if(c.css({left:u+i.border[0],width:i.area[0],height:i.area[1]}),i.fix?c.css({top:parseInt(i.offset[0])+i.border[0]}):c.css({top:parseInt(i.offset[0])+s.scrollTop()+i.border[0],position:"absolute"}),this.layerMian=c.find(".xubox_main"),this.layerTitle=c.find(".xubox_title"),this.layerText=c.find(".xubox_text"),this.layerPage=c.find(".xubox_page"),this.layerBtn=c.find(".xubox_botton"),0==i.type&&i.title[1])switch(o.btns){case 0:this.layerBtn.html("").hide();break;case 2:this.layerBtn.html('<a href="javascript:;" class="xubox_yes xubox_botton2_'+i.skin+'">'+o.btn[0]+'</a><a href="javascript:;" class="xubox_no xubox_botton3_'+i.skin+'">'+o.btn[1]+"</a>");break;default:this.layerBtn.html('<a href="javascript:;" class="xubox_yes xubox_botton1_'+i.skin+'">'+o.btn[0]+'</a><a class="xubox_no" style="displa:none;"></a>')}"auto"===c.css("left")?(c.hide(),setTimeout(function(){c.show(),e.pagetype(x)},500)):this.pagetype(x),this.callback()},n.pt.pagetype=function(e){var t=this,i=this.layerE,o=this.config,n=o.page;t.autoArea(e),o.time<=0||this.autoclose(),o.move[1]?i.find(".xubox_title").css({cursor:"move"}):i.find(".xubox_title").css({cursor:"auto"}),o.closeBtn[1]||i.find(".xubox_close").remove().hide(),o.title[1]?this.layerTitle.css({width:i.outerWidth()}):(i.find(".xubox_title").remove().hide(),4!=o.type&&i.find(".xubox_close").removeClass("xubox_close0_"+o.skin).addClass("xubox_close1_"+o.skin)),o.border||i.removeClass("xubox_layerBoder");var l=parseInt(this.layerMian.css("margin-right")),d=parseInt(i.css("padding-bottom"));switch(i.attr({type:t.type[o.type]}),o.type){case 1:i.find(n.dom).addClass("layer_pageContent"),this.layerPage.css({width:i.width()-2*l}),o.shade&&i.css({"z-index":t.zIndex+1}),o.title[1]?this.layerPage.css({top:l+this.layerTitle.outerHeight()}):this.layerPage.css({top:l});break;case 2:i.find(".xubox_iframe").addClass("xubox_load").css({width:i.width()-2*l}),o.title[1]?i.find(".xubox_iframe").css({top:this.layerTitle.height()+d,height:i.height()-this.layerTitle.height()}):i.find(".xubox_iframe").css({top:d,height:i.height()}),r.global.iE6&&i.find("#xubox_iframe").attr("src",o.iframe.src);break;case 4:var x=a(o.tips.follow),c=x.offset().top,u=c-i.outerHeight(),f=x.offset().left,p=f,h=o.tips.style[1],b=x.outerHeight(),y=x.outerWidth(),g=i.find(".layerTipsG");if(y>o.maxWidth&&x.width(o.maxWidth),1===o.tips.guide){var m=s.width()-p-y-i.outerWidth()-10,u=c;m>0?(p=p+x.outerWidth()+10,g.removeClass("layerTipsL").addClass("layerTipsR").css({"border-right-color":h})):(p=p-i.outerWidth()-10,g.removeClass("layerTipsR").addClass("layerTipsL").css({"border-left-color":h}))}else u-s.scrollTop()-12<=0?(u=c+b+10,g.removeClass("layerTipsT").addClass("layerTipsB").css({"border-bottom-color":h})):(u-=10,g.removeClass("layerTipsB").addClass("layerTipsT").css({"border-top-color":h}));i.css({top:u,left:p});break;default:this.layerMian.css({"background-color":"#fff"}),o.title[1]?this.layerText.css({paddingTop:18+this.layerTitle.outerHeight()}):(i.find(".xubox_msgico").css({top:"10px"}),this.layerText.css({marginTop:12}))}var _=0;o.fadeIn[1]&&(_=o.fadeIn[0]),i.animate({opacity:1,filter:"alpha(opacity=100)"},_),this.move()},n.pt.autoArea=function(e){var t=a("#xubox_layer"+e),i=this.config,o=i.page,s=t.find(".xubox_main"),n=t.find(".xubox_botton"),l=t.find(".xubox_text"),d=t.find(".xubox_page"),x=a("#xubox_border"+e);switch("auto"==i.area[0]&&s.outerWidth()>=i.maxWidth&&t.css({width:i.maxWidth}),titHeight=i.title[1]?t.find(".xubox_title").innerHeight():0,i.type){case 0:var c=n.find("a"),u=l.outerHeight()+20;if(c.length>0)var f=n.find("a").outerHeight()+20;else var f=0;break;case 1:var f=0,u=a(o.dom).outerHeight();"auto"==i.area[0]&&t.css({width:d.outerWidth()});break;case 3:var f=0,u=a(".xubox_loading").outerHeight();s.css({width:a(".xubox_loading").width()})}"50%"!=i.offset[1]&&""!=i.offset[1]||4===i.type?t.css({marginLeft:0}):t.css({marginLeft:-t.outerWidth()/2}),"auto"==i.area[1]&&s.css({height:titHeight+u+f}),x.css({width:t.outerWidth()+2*i.border[0],height:t.outerHeight()+2*i.border[0]}),r.global.iE6&&"auto"!=i.area[0]&&s.css({width:t.outerWidth()})},n.pt.move=function(){var e,t,i,o,r,n=this.config,l=this.layerE.find(n.move[0]),d=0;n.move[1]&&l.attr("move","ok"),a(n.move[0]).live("mousedown",function(n){if(n.preventDefault(),"ok"===a(this).attr("move")){t=!0,e=a(this).parents(".xubox_layer"),index=e.attr("times");var l=e.offset().left,x=e.offset().top,c=e.width()-6,u=e.height()-6;a("#xubox_moves")[0]||a("body").append('<div id="xubox_moves" class="xubox_moves" style="left:'+l+"px; top:"+x+"px; width:"+c+"px; height:"+u+'px; z-index:30000000"></div>'),r=a("#xubox_moves"),i=n.pageX-r.position().left,o=n.pageY-r.position().top,"fixed"!==e.css("position")||(d=s.scrollTop())}}),a(document).mousemove(function(a){if(t){a.preventDefault();var s=a.pageX-i;if("fixed"===e.css("position"))var n=a.pageY-o;else var n=a.pageY-o;r.css({left:s,top:n})}}).mouseup(function(){if(t){if(0==parseInt(e.css("margin-left")))var i=parseInt(r.css("left"));else var i=parseInt(r.css("left"))+-parseInt(e.css("margin-left"));"fixed"===e.css("position")||(i-=e.parent().offset().left),e.css({left:i,top:parseInt(r.css("top"))-d}),r.remove()}t=!1})},n.pt.autoclose=function(){var e=this,t=this.config.time,i=function(){t--,0===t&&(layer.close(e.index),clearInterval(e.autotime))};this.autotime=setInterval(i,1e3)},r.config={end:{}},n.pt.callback=function(){this.openLayer();var e=this,t=this.layerE,i=this.config,o=i.dialog;this.config.success(t),r.global.iE6&&this.IE6(),t.find(".xubox_close").unbind("click").live("click",function(t){t.preventDefault(),i.close(e.index)}),t.find(".xubox_yes").unbind("click").live("click",function(t){t.preventDefault(),o.yes(e.index)}),t.find(".xubox_no").unbind("click").live("click",function(t){t.preventDefault(),o.no(e.index)}),this.layerS.unbind("click").live("click",function(t){t.preventDefault(),e.config.shadeClose&&layer.close(e.index)}),r.config.end[this.index]=i.end},n.pt.IE6=function(){var e=this.layerE,t=a("select"),i=e.offset().top;if(this.config.fix)var o=function(){e.css({top:a(document).scrollTop()+i})};else var o=function(){e.css({top:i})};o(),s.scroll(o),a.each(t,function(){var e=a(this);e.parents(".xubox_layer")[0]||"none"==e.css("display")||e.attr({layer:"1"}).hide()}),this.reselect=function(){a.each(t,function(){var e=a(this);e.parents(".xubox_layer")[0]||1==e.attr("layer")&&a(".xubox_layer").length<1&&e.removeAttr("layer").show()})}},n.pt.openLayer=function(){var e=this;layer.autoArea=function(t){return e.autoArea(t)},layer.getIndex=function(e){return a(e).parents(".xubox_layer").attr("times")},layer.getChildFrame=function(e){return a("#xubox_iframe").contents().find(e)},layer.getFrameIndex=function(){return a("#xubox_iframe").parents(".xubox_layer").attr("times")},layer.iframeAuto=function(){var e=[this.getChildFrame("body").outerWidth(),this.getChildFrame("body").outerHeight()],t=a("#xubox_iframe").parents(".xubox_layer"),i=t.attr("times"),o=t.find(".xubox_title"),s=0;!o||(s=o.height()),t.css({width:e[0],height:e[1]+s}),o.css({width:e[0]});var r=-parseInt(a("#xubox_border"+i).css("left"));a("#xubox_border"+i).css({width:e[0]+2*r,height:e[1]+2*r+s}),a("#xubox_iframe").css({width:e[0],height:e[1]})},layer.close=function(t){var i=a("#xubox_layer"+t),o=a("#xubox_shade"+t);if(i.attr("type")==e.type[1])if(i.find("#xuboxPageHtml")[0])i.remove();else{i.find(".xubox_close,.xubox_botton,.xubox_title,.xubox_border").remove();var s=i.find(".layer_pageContent").hide().clone(!0);i.after(s),i.remove()}else!-[1]||i.find("#xubox_iframe").remove(),i.remove();o.remove(),r.global.iE6&&e.reselect(),"function"==typeof r.config.end[t]&&r.config.end[t](),delete r.config.end[t]},layer.loadClose=function(){var e=a(".xubox_loading").parents(".xubox_layer"),t=e.attr("times");layer.close(t)},layer.shift=function(t,i){var o=e.config,a=r.global.iE6,n=e.layerE,l=0,d=s.width(),x=s.height();l="50%"==o.offset[1]||""==o.offset[1]?n.outerWidth()/2:n.outerWidth();var c={t:{top:o.border[0]},b:{top:x-n.outerHeight()-o.border[0]},cl:l+o.border[0],ct:-n.outerHeight(),cr:d-l-o.border[0],fn:function(){a&&e.IE6()}};switch(t){case"left-top":n.css({left:c.cl,top:c.ct}).animate(c.t,i,c.fn);break;case"right-top":n.css({left:c.cr,top:c.ct}).animate(c.t,i,c.fn);break;case"left-bottom":n.css({left:c.cl,top:x}).animate(c.b,i,c.fn);break;case"right-bottom":n.css({left:c.cr,top:x}).animate(c.b,i,c.fn)}},layer.setMove=function(){return e.move()}},r.append(),a.layer=function(e){var t=new n(e);return t.index}},s="../../init/jquery";"function"==typeof define&&"object"==typeof seajs?define([s],function(t,i){a(),i.layer=[e.layer,e.$.layer]}):a()}(window);
function freeStages(){var t=$(".ajax-price-main").attr("data-orgp"),e=$("#js_input_quantity").val(),a=!1,i=$.cookie("addressCountry"),n=t*e;"BR"!=i&&"MX"!=i&&(i=$.cookie("countryCode").toUpperCase()),"BR"!=$.cookie("countryCode").toUpperCase()&&"MX"!=$.cookie("countryCode").toUpperCase()||(a=!0),"BR"===i&&n>=6&&n<=1500?getFree(i,n,a):"MX"===i&&n>=10&&n<=1e3?getFree(i,n,a):$(".free_stages").hide()}function getFree(t,e,a,i){var n=$("#js_jqzoom img").attr("data-goods_sn")+"&cat_id="+$("#js_jqzoom img").attr("data-cat_id");i&&(n=i.sku+"&cat_id="+i.cat_id),$.ajax({type:"GET",url:"/index.php?m=goods&act=get_installment&country="+t+"&goods_sn="+n,dataType:"json",success:function(t){if(t.length){for(var a='<dt class="by_stages_itemt">'+$(".by_stages_itemt").text()+"</dt>",n=0,o=0,s=e,r=0,l=t.length;r<l;r++){var c=$.cookie("bizhong"),d=(e+e*t[r].real_rate/100)/t[r].instalment_num;if("MXN"==c||"BRL"==c){var p=(parseFloat(my_array[c])*d).toFixed(2),h=(p*t[r].instalment_num).toFixed(2);p=GLOBAL.currency.getIcon(c)+p}else{var p=d.toFixed(2),h=(p*t[r].instalment_num).toFixed(2);p="$"+p}0==r&&(s=h),d>=6&&(0==t[r].real_rate&&(h=s),a+='<dd class="by_stages_item" data-free="'+t[r].real_rate+'" data-instalment_num="'+t[r].instalment_num+'"><span class="by_stages_item_span1">'+t[r].instalment_num+"x"+p+"</span> ("+h+")</dd>",o++,0==t[r].real_rate&&(n=t[r].instalment_num)),$(".by_stages_show").attr("data-instalment_num")==t[r].instalment_num&&$(".by_stages_show").text(t[r].instalment_num+"x"+p)}i?n&&o>1?i.parentEle.find(".icon_content span").text(n):i.parentEle.find(".freeItemsContent").hide():o>1?o&&($(".by_stages_items").html(a),$(".free_stages").show()):$(".free_stages").hide()}},error:function(){console.log("getFree-error"),$(".free_stages").hide()}})}function info_check(t){var e="/fun/?act=info_check&action="+t,a=(window.location.href,_GET("vip",location.hash.indexOf("vip=")>0?"?"+location.hash.substr(1):null));if(a){var i=encodeURIComponent(document.referrer);e+="&vip="+a+"&referrer_url="+i}$.ajax({type:"GET",url:e,dataType:"json",cache:!1,success:function(t){$("#js_wait_cart").show(),$(".js_cart_items").html(parseInt(t.cart_items)),$("#js_like_items").html(parseInt(t.wish_num)),GLOBAL.login.isLoginEnd(t.firstname),t.firstname?($.cookie("isLogin",t.firstname,{expires:7,path:"/",domain:COOKIESDIAMON}),GLOBAL.ticket.getWaitForReply()):$.cookie("isLogin","",{expires:7,path:"/",domain:COOKIESDIAMON}),GLOBAL.indexPage.IpopProFun(t),$(".index_time_coutDown").attr("data-time",t.LeftTime)}})}function _GET(t,e){var a=new RegExp("[?&#]"+t+"=([^&]+)","g");e=e||location.search;for(var i,n="";null!==(i=a.exec(e));)n=i[1];return n}window.GLOBAL={},GLOBAL.newsletter=function(t){var e=$(t),a=$.trim(e.val()),i={shade:[.5,"#000",!0],dialog:{msg:"",btns:1,type:-1,btn:[window.jsLg.yes],yes:function(t){e.focus(),layer.close(t)}}};if(1==e.data("time"))return i.dialog.msg=jsLg.newsLetter.FrequencyTooHigh,GLOBAL.PopObj.confirm(i),!1;if(!a)return e.focus(),!1;if(!GLOBAL.checkmail(a))return i.dialog.msg=jsLg.newsLetter.enterValidEmailAddress,GLOBAL.PopObj.confirm(i),!1;var n=$("#nav_type_id").val()?$("#nav_type_id").val():0,o=1==n?6:2;return $.ajax({type:"POST",url:"/m-cemails.html?source="+o+"&t="+ +new Date,dataType:"json",data:{userInput:a},success:function(t){i.dialog.msg=t.data,GLOBAL.PopObj.confirm(i)}}),e.data("time",1),setTimeout(function(){e.data("time",0)},6e4),!1},GLOBAL.checkOrder=function(t){var e=$.trim($("#txt-checkOrder").val());e&&/^E[EDAP]?\d{16}$/i.test(e)?window.open(USER_DOMAIN+"/"+JS_LANG+"m-users-a-queryorder-n-"+e+".htm"):(alert(jsLg.checkOutTips.enterCorrectOrderNum),$("#txt-checkOrder").focus())},GLOBAL.checkmail=function(t){var e=/^[\w][\.\w_\\-]+[\w]@([a-zA-Z0-9_-])+(\.[a-zA-Z0-9_-])+/,a=e.test(t);return!!a},GLOBAL.LoadJS=function(t,e){var a=document.getElementById(e),i=document.createElement("script");a||(i.id=e,i.src=t,document.getElementsByTagName("body")[0].appendChild(i))},GLOBAL.lazyLoad={scrollLazyLoad:function(t){var e=$(t);e.lazyload({threshold:450,effect:"fadeIn",failure_limit:60,skip_invisible:!1})},tableLayout:function(t){var e=$(t);e.lazyload({effect:"fadeIn",event:"tabEvent"})},creatEle:function(t,e){var a="string"==$.type(t)?$(t):$("textarea.js_addToDom"),i=$(window),n=i.height(),o=this,s=null;o.eachElem(a,i.scrollTop(),n,e),i.scroll(function(){var t=$(this).scrollTop();s&&clearTimeout(s),s=setTimeout(function(){o.eachElem(a,t,n,e)},300)})},eachElem:function(t,e,a,i){t.each(function(t,n){var o=$(n),s=o.parent().offset().top,r=o.text();s-e<a&&1!=o.data("addYet")&&(o.parent().append(r),o.data("addYet","1"),GLOBAL.currency.change_html("",o.parent()),i&&"function"==$.type(i)&&i(r))})},scriptCreatElem:function(t,e){var a=$(t),i=$(window).height(),n=this,o=null;n.scripteachElem(a,$window.scrollTop(),i-0+$(window).scrollTop(),e),$(window).scroll(function(t){var s=$(window).scrollTop(),r=i+s;o&&clearTimeout(o),o=setTimeout(function(){n.scripteachElem(a,s,r,e)},300)})},scripteachElem:function(t,e,a,i){t.each(function(t,n){var o=$(n),s=window.creatScriptData,r=o.parent().offset().top;o.index=t,r>e&&r<a&&1!=o.data("addYet")&&(o.parent().append(s[o.index]),o.data("addYet","1"),GLOBAL.currency.change_html("",o.parent()),i&&"function"==$.type(i)&&i(s[o.index]))})}},GLOBAL.toggleTopMenu=function(){$("#js_top_account").on(".js_topMyAccountWrap").hover(function(){var t=$(".top_my_account_box",$(this));t.stop(!0,!0).show()},function(){var t=$(".top_my_account_box",$(this));t.stop(!0,!0).hide()});var t=$(".top_liveChat_Box"),e=$(".top_liveChat");e.hover(function(){0==t.find("p").length&&$(this).addClass("top_operate_hover"),t.stop(!0,!0).show()},function(){$(this).removeClass("top_operate_hover"),t.stop(!0,!0).hide()}),$(".top_liveChat_Box .msg-item a").hover(function(){var t=$(this).index();$(".top_liveChat_Box .msg-item a").removeClass("active"),$(this).addClass("active"),$(".top_liveChat_Box .msg-content ul").hide().eq(t).show()},function(){})},GLOBAL.login={isLogin:function(callBack,callbackArg){var that=this;$.ajax({type:"GET",url:"/fun/index.php?act=chk_sign",success:function(msg){msg=eval("("+msg+")"),msg.firstName&&that.isLoginEnd(msg.firstName),callBack&&(arguments.length>1?callBack(msg,callbackArg):callBack(msg))}})},isCookieLogin:function(t,e){var a=$.cookie("isLogin"),i={firstname:a};t&&(arguments.length>1?t(i,e):t(i))},isLoginEnd:function(t){var e=$("#js_isLoginInfo"),a=$("#js_isNotLogin"),i=$("#js_top_account"),n=($("#js_user_links"),$(".js_loginHide")),o=jsLg.Hi;t?(null!=o&&"undefined"!=o||(o="Hi"),e.find("span.js_userName").html(o+"&nbsp;"+t),a.hide(),i.show(),n.hide(),$(".js_login_share").addClass("none")):(e.html(""),a.show(),i.hide(),$(".js_login_share").removeClass("none"))},getNUmber:function(t){if($("#js_cart_item_box").length&&$("#js_cart_item_box").length>0){var e=t.cart_items,a=e.substring(0,1);a>0?$.ajax({url:"/"+JS_LANG+"m-flow-a-cart_underpull.htm",type:"POST",dataType:"html"}).done(function(t){$.cookie("isLogin").length>0?a>0?($("#js_wait_cart").hide(),$("#js_item_con").html(t),$("#js_cart_Numbers").html(a+"&nbsp;"+jsLg.Other.Items),GLOBAL.currency.change_html()):($("#js_wait_cart").hide(),$("#js_cart_empty").show()):a>0?($("#js_wait_cart").hide(),$("#js_item_con").html(t),$("#js_cart_Numbers").html(a+"&nbsp;"+jsLg.Other.Items),GLOBAL.currency.change_html()):($("#js_wait_cart").hide(),$("#js_no_sign").show())}):$.cookie("isLogin").length>0?($("#js_wait_cart").hide(),$("#js_cart_empty").show()):($("#js_wait_cart").hide(),$("#js_no_sign").show())}},getpassInput:function(t){var e=$("#myInput").val();e=e.replace("-","="),""==e||e.indexOf("@")<0||e.indexOf(".")<0?alert(jsLg.formMsg.email_require_msg):(window.location.href="/"+JS_LANG+"m-users-a-send_pwd_email-e-"+e+".htm",layer.close(t))},popLogin:function(t,e){if(t.firstname||t.firstName)e.isLoginCallBack?e.isLoginCallBack(t):"";else{var a="#popLoginWarp";$(a).find("#js_toSignLinke").attr("href",HTTPS_LOGIN_DOMAIN+"/"+JS_LANG+"m-users-a-sign.htm?ref="+encodeURIComponent(HTTPS_ORDER_DOMAIN+e.gotoUrl)),GLOBAL.PopObj.openPop({area:["490px","550px"],offset:[($(window).height()-620)/2,"50%"],border:[10,.8,"#666",!1],page:{dom:a}}),$LAB.script(JS_IMG_URL+"minjs/sign.min.js?2016072503"),GLOBAL.login.changePoptap(e)}},changePoptap:function(t){$(t.dome).find("a.changePopSign").click(function(){var e=$(this).closest("section");layer.index,$(t.dome).find("section").not(e).show(),e.hide(),$("#xubox_layer1").css("height",$("#xuboxPageHtml").height())})}},GLOBAL.PopObj={openPop:function(t){var e={shade:[.5,"#000",!0],type:1,area:["auto","auto"],offset:["100px","50%"],title:!1,border:[10,.8,"#666",!0],page:{dom:"#popElem"},close:function(t){layer.close(t)}};return e=$.extend(!0,e,t),$.layer(e)},iframe:function(t){var e={shade:[.8,"#000",!0],type:2,title:!1,shadeClose:!0,bgcolor:"#fff",closeBtn:[1,!0],area:["auto","auto"],offset:["100px","50%"],border:[1,1,"#ddd",!0],iframe:{src:""},close:function(t){layer.close(t)}};return e=$.extend(!0,e,t),$.layer(e)},confirm:function(t){var e={shade:[0],area:["auto","auto"],title:jsLg.message,border:[10,.8,"#666",!1],dialog:{msg:"Are you sure?",btns:2,type:4,btn:["Yes","No"],yes:function(){},no:function(t){layer.close(t)}}};return e=$.extend(!0,e,t),$.layer(e)},alert:function(t){var e={shade:t.shade?t.shade:[.8,"#000",!0],area:["auto","auto"],title:t.title?t.title:jsLg.message,time:t.time?t.time:0,border:[1,1,"#ddd",!0],dialog:{msg:t.msg?t.msg:"",btns:1,type:t.typeTag?t.typeTag:0,btn:[jsLg.ok],yes:function(e){t.callBack?t.callBack(t.callBackArg?t.callBackArg:""):"",layer.close(e)}}};return $.layer(e)},closePop:function(t){var e="";e=arguments.length>0?t:"",layer.close(t)}},GLOBAL.iframePop=function(t){$.layer({type:2,title:t.title,border:t.border,shadeClose:t.shadeClose||!1,iframe:{src:t.url},area:[t.width,t.height],offset:[t.top,t.left]})},GLOBAL.show_reviewVido=function(t){$.layer({type:1,title:!1,border:[10,.5,"#666",!1],offset:["50px",""],move:[".juanmove",!1],area:["854px","480px"],page:{html:"<div style='width:834px;height:460px;padding:10px;background:#fff;'><iframe src='https://www.youtube.com/embed/"+t+"' frameborder='0' width='834' height='440' ></iframe></div>"}})},GLOBAL.Search={selectCate:function(t,e){var a=$("#js_top_seachCate"),i=$("#js_secahCateName"),n=t,o=$.trim(n.text());a.val(n.data("value")),i.html(o),n.addClass(e).siblings("li").removeClass(e)},seach_submit:function(t){var e=t.parents("form"),a=e.find("input.js_k"),i=$("#js_searchDropdownBox").val(),n=$.trim(a.val());n=n.replace(/\*/g,"~~"),n=n.replace(/\|/g,"]]"),n=n.replace(/\=/g,"(("),n=n.replace(/\"/g," "),n=n.replace(/\</g,"))"),n=n.replace(/\>/g,")))"),n=n.replace(/\?/g,"!!!"),n=n.replace(/\+/g,"__"),n=n.replace(/\-/g,"^^"),n=n.replace(/\//g,".."),n=n.replace(/\\/g,"..."),n=n.replace(/\%/g,"!!"),n=n.replace(/\#/g,"~~~"),n=n.replace(/\>/g,"___"),n=n.replace(/\</g,"^^^"),n=n.replace(/\"/g,"[["),n=n.replace(/\$/g,"[[["),n=n.replace(/\@/g," "),n=n.replace(/\s+/g,"-"),n=n.replace(/\b\w+\b/g,function(t){return t});var o="";if(""==n||n==encodeURIComponent(jsLg.subscribe_4)){var s={shade:[.5,"#000",!0],dialog:{msg:jsLg.subscribe_1,btns:1,type:-1,btn:[jsLg.ok],yes:function(t){a.focus(),layer.close(t)}}};GLOBAL.PopObj.confirm(s)}else o="0"==i?MAIN_DOMAIN+"/"+n+"-_gear/":MAIN_DOMAIN+"/"+n+"-_gear/c_"+i+"/",setTimeout('window.location.href = "'+o+'";',500);return!1}},GLOBAL.currency={change_houbi:function(t,e){var a=t||$.cookie("bizhong")||"USD",i=this.getIcon(a);$.cookie("bizhong",a,{expires:7,path:"/",domain:COOKIESDIAMON}),$(".js_showBZ").find("strong").html(i+" "+a),$(".cate_attr").find(".c_unit").html(i),this.change_html.apply(this,arguments)},getIcon:function(t){return my_array_sign[t]||"$"},change_html:function(t,e,a){var i,n,o,s,r,l=$.cookie("bizhong");s=t||function(){return $.cookie("customlizeCurrency")?l:0!=window.defaultCur?window.defaultCur:l}()||function(){return $.cookie("bizhong","USD",{expires:7,path:"/",domain:COOKIESDIAMON}),"USD"}(),r=this.getIcon(s),a?n=a:(i=e&&$(e).length>0?$(e):$("body"),n=i.find(".my_shop_price"),o=i.find(".bizhong"),o.html(s)),n.each(function(t,e){var a=$(this),i=a.attr("orgp")||a.attr("data-orgp"),n=(parseFloat(my_array[s])*parseFloat(i)).toFixed(2),o=n.slice(0,-3),l=n.slice(-2);"KRW"==s||"CLP"==s?1==my_array_position[s]?a.html(r+Math.round(n)):a.html(Math.round(n)+r):"JPY"==s||"HUF"==s||"TWD"==s?1==my_array_position[s]?a.html(r+Math.ceil(n)):a.html(Math.ceil(n)+r):1==my_array_position[s]?a.html(r+o+".<i>"+l+"</i>"):a.html(o+".<i>"+l+"</i>"+r)})}},GLOBAL.FloatObj={goToUp:function(){var t=$('<div class="backToTop '+(JS_LANG&&JS_LANG.length>0?JS_LANG.split("/")[0]:"")+'"></div>').appendTo($("body")).click(function(){$("html, body").animate({scrollTop:0},120)}),e=function(){var e=$(document).scrollTop(),a=$(window).height();e>0?t.show():t.hide(),window.XMLHttpRequest||t.css("top",e+a-166)};$(window).bind("scroll",e)}},GLOBAL.n_addTofavorite=function(t,e){var a=t.parent().find(".addFavorNum"),i=a.text();$.cookie("isLogin").length>0?($.get(e,function(t){}),a.text(++i)):window.location.href=HTTPS_LOGIN_DOMAIN+"/"+JS_LANG+"m-users-a-sign.htm?ref="+window.location.href},GLOBAL.addTofavorite=function(t,e){t.firstName?1==t.is_validated?$.get(e.url,function(t){1==t?GLOBAL.addTofavoriteCall(e):GLOBAL.PopObj.confirm({shade:[.5,"#000",!0],area:["auto","auto"],title:jsLg.message,closeBtn:[0,!1],dialog:{msg:jsLg.favoriteTips_1,btns:1,type:0,btn:[jsLg.ok],yes:function(t){layer.close(t)}}})}):window.location.href=HTTPS_LOGIN_DOMAIN+"/"+JS_LANG+"m-users-a-need_validate.html":window.location.href=HTTPS_LOGIN_DOMAIN+"/"+JS_LANG+"m-users-a-sign.htm?ref="+e.rebackPage},GLOBAL.addTofavoriteCall=function(t){var e=$("<span></span").attr("class","redHeart"),a=$("#js_top_account").offset(),i=0,n=t.left;a&&(n=a.left+15,i=a.top),e.css({top:t.top,left:t.left,zIndex:1e3}).appendTo("body"),setTimeout(function(){e.animate({top:i,left:n},200,function(){e.remove()})},500)},GLOBAL.cart={cartItems:function(){var t=DOMAIN_CART+"/fun/?act=cart_item&noscript=1&jsoncallback=?";$.getJSON(t,function(t){msg=t.ms,$(".js_cart_items").html(msg)})},change_same_goods:function(t){var e=parseInt(t.value),a=$("#url_cat_name").val();e>0&&(window.location.href="/"+JS_LANG+a+"/pp_"+e+".html")},change_available_stock:function(t){var e=parseInt(t.value);if(e>0){var a=$("#spec_available_stock_"+e).attr("attr");window.location.href=a}},add:function(){var t=$("#js_input_quantity"),e=Number(t.val());t.val(e+1),t.keyup(),freeStages()},reduce:function(){var t=$("#js_input_quantity"),e=Number(t.val());e>1&&(t.val(e-1),t.keyup(),freeStages())},input_quantity:function(t){var e,a,i,n,o,s=$(t),r=parseInt(s.val()),l=$("#unit_price"),c=$("#g_totalCost");return l.html(),isNaN(r)?void $(t).val(""):(r>9999&&(r=9999),$(".js_orangNum").each(function(){e=parseInt(String($(this).data("val")).replace(/[\u4e00-\u9fa5]/g,"")),r>=e&&(a=$("#pk"+$(this).data("atrp")).attr("orgp")||$("#pk"+$(this).data("atrp")).attr("data-orgp"),l.attr({orgp:a,"data-orgp":a}))}),$(".js_orangNum_pf").each(function(){if(i=parseInt(String($(this).data("val")).replace(/[\u4e00-\u9fa5]/g,"")),r>=i)return n=$("#pk_pf"+$(this).data("atrp")).attr("orgp")||$("#pk_pf"+$(this).data("atrp")).attr("data-orgp"),$("#pk_pf"+$(this).data("atrp")).parents("tr.hover_bg").addClass("on").siblings("tr").removeClass("on"),o=parseFloat(r*n),l.attr({orgp:n,"data-orgp":n}),c.attr({orgp:o,"data-orgp":o}),void GLOBAL.currency.change_html()}),$("#emailOnlyPrice").length>0&&$("#emailOnlyPrice").val()>0&&(l.html($("#emailOnlyPrice").val()),l.attr({orgp:$("#emailOnlyPrice").val(),"data-orgp":$("#emailOnlyPrice").val()}),$(".ajax-my-shop-price").attr({orgp:$("#emailOnlyPrice").val(),"data-orgp":$("#emailOnlyPrice").val()}),a=$("#emailOnlyPrice").val()),$("#new_addcart").attr({num:r,"data-num":r}),$("#top_new_addcart").attr({num:r,"data-num":r}),$("a.fittingBuy").attr({num:r,"data-num":r}),$("#master_good").attr({orgp:a,"data-orgp":a}),this.addPeijianPrice(),GLOBAL.currency.change_html("",$(".goods_price")),void s.val(r))},addcart:function(t,e,a,i){if(!$(t).hasClass("disabled")){var n,o=this,s=t,e=arguments[1]?arguments[1]:0,r=0;e&&$(".js_custom_button").length>0&&1==$(".js_custom_button").get(0).checked&&(r=1);var l=$(t),c=$(t).attr("gid")||$(t).attr("data-gid"),d=$(t).attr("wid")||$(t).attr("data-wid")||"21",p=$(t).attr("num")||$(t).attr("data-num");p=void 0==p?1:p;var h=$(t).attr("ref")||$(t).attr("data-ref"),u=$(t).attr("page")||$(t).attr("data-page");h=void 0==h?0:h,cartval="";var g=$(t).attr("attrchage")||$(t).attr("data-attrchage");g=void 0==g?"":g;var f="",_="",m="",v=1,y=new Array,w=0,b=$(t).attr("attradd")||$(t).attr("data-attradd"),j=$("#js_hidden_price"),k=j.length>0?j.val():0,x=$(t).attr("dinghuo");if(x=void 0==x?0:x,1==x&&p<50)return alert(jsLg.addCart_1),!1;if(g.indexOf("|")>0)g=g.split("|"),$.each(g,function(t,e){y[t]=new Array;var a="select-one",i=$(".spec_"+e).attr("lab_name")||$(".spec_"+e).attr("data-lab_name");switch(a){case"select-one":y[t]=$(".spec_"+e).val();var n=$(".spec_"+e).attr("isnes")||$(".spec_"+e).attr("data-isnes");"1"==n&&""==y[t]&&(_+=v+"."+jsLg.addCart_2+i+"!\n",v++,""==m&&(m=e));case"checkbox":$(".spec_"+e+":checked").each(function(e){y[t][e]=$(this).val(),""==y[t][e]&&(_+=v+"."+jsLg.addCart_2+i+"!\n",v++)})}});else if(""!=g){m=g,y[1]=new Array;var L=$(".spec_"+g).attr("type"),C=$(".spec_"+g).attr("lab_name")||$(".spec_"+g).attr("data-lab_name");switch(L){case"select-one":y[1]=$(".spec_"+g).val();var O=$(".spec_"+g).attr("isnes")||$(".spec_"+g).attr("data-isnes");"1"==O&&""==y[1]&&(_+=" "+jsLg.addCart_2+" "+C+"!\n");case"checkbox":$(".spec_"+g+":checked").each(function(t){y[1][t]=$(this).val(),""==y[1][t]&&(_+=" "+jsLg.addCart_2+" "+C+"!\n")})}}else y[1]=$(this).attr("atrid")||$(this).attr("data-atrid"),atrrid=$(this).attr("atrid")||$(this).attr("data-atrid");if(""!=_)return alert(jsLg.addCart_3+"\n\n"+_),$(".spec_"+m).focus(),!1;if(cartval=y,target_div=void 0!=($(this).attr("atrid")||$(this).attr("data-atrid"))?"#add_cart_msg"+c+atrrid:"#add_cart_msg"+c,n=void 0!=($(this).attr("atrid")||$(this).attr("data-atrid"))?"#top_add_cart_msg"+c+atrrid:"#top_add_cart_msg"+c,""!=f)return alert(f),!1;var B="",A=$("#ul-peijian");if(1==$("#is_point_active").attr("checked")&&(w=1),B=A.length>0&&1==b?A.find(":checked").map(function(){return $(this).val()}).get().join():A.find(".js_peijian_free:checked").map(function(){return $(this).val()}).get().join(),"byStages"===a)var N=DOMAIN_CART+"/"+JS_LANG+"m-flow-a-add_to_cart.htm?jsoncallback=?&goods_id="+c+"&number="+p+"&spec="+cartval+"&attrchage="+g+"&select_custom_size="+r+"&peijian_id="+B+"&warehouse_id="+d+"&price="+k+"&buy_now=true&byStages=true";else if(a){var I=($(".icon_top_items").offset(),$(s).attr("data-proimg")),T=$('<img class="flyer" src="'+I+'">'),G=$(".js_cart_items"),S=G.offset(),P=$(window),I=($(".icon_top_items").offset(),$(s).attr("data-proimg")),T=$('<img class="flyer" src="'+I+'">'),G=$(".js_cart_items"),S=G.offset(),P=$(window);T.fly({start:{left:a.clientX,top:a.clientY},end:{left:S.left-P.scrollLeft(),top:S.top-P.scrollTop(),width:13,height:13},onEnd:function(){1==u&&$.get("."+window.location.pathname+"?act=getCartTotal&t="+Date.parse(new Date),function(t){if(t=JSON.parse(t),0==t.code){var e=t.data.markupTotal,a=$(".total-num");a&&(a.find(".my_shop_price").attr("orgp",e),GLOBAL.currency.change_html())}}),T.remove(),setTimeout(function(){l.prop("disabled",!1).removeClass("uping-loading")},100),this.destory()}});var N=DOMAIN_CART+"/"+JS_LANG+"m-flow-a-add_to_cart.htm?jsoncallback=?&goods_id="+c+"&number="+p+"&spec="+cartval+"&attrchage="+g+"&select_custom_size="+r+"&peijian_id="+B+"&warehouse_id="+d+"&price="+k}else var N=DOMAIN_CART+"/"+JS_LANG+"m-flow-a-add_to_cart.htm?jsoncallback=?&goods_id="+c+"&number="+p+"&spec="+cartval+"&attrchage="+g+"&select_custom_size="+r+"&peijian_id="+B+"&warehouse_id="+d+"&price="+k+"&buy_now=true";$.getJSON(N,function(e){if(msg=e.ms,msg.indexOf("Added To Cart")>0){var a=msg.split("||");if(cartnum=parseInt(a[0]),$(".all_red_cart_items").each(function(){$(this).html(cartnum)}),o.cartItems(),"0"==h){var n='<table width="95%" border="0" cellspacing="0" cellpadding="0">';n+="<tr>",n+='<td width="26%" align="right" valign="middle"><img src="https://css.gbtcdn.com/imagecache/GB2/images/adminIcon/dui.gif"/></td>',n+='<td width="74%" align="left" valign="middle" style="padding-left:10px;"><b>'+jsLg.addCart_4+"</b> </td>",n+="</tr>",n+="<tr>",n+='<td colspan="2" align="center" style="padding:10px 0px; line-height: 26px;" class="duibt"><a href="javascript:void(0);" onclick="ymPrompt.close();">&lt;&lt;'+jsLg.addCart_5+'</a>&nbsp;&nbsp;<a href="javascript:void(0);"  class="redBgBtn mr30 fr" onclick="ymPrompt.doHandler(\'ok\',false);" >'+jsLg.addCart_6+"</a></td>",n+="</tr>",n+="</table>",ymPrompt.setDefaultCfg({okTxt:" Send ",cancelTxt:" Cancel ",closeTxt:"Close",minTxt:"Minimize",maxTxt:"Maximize",maskAlpha:.5}),ymPrompt.win({icoCls:"",msgCls:"confirm",message:n,titleBar:!1,width:350,height:140,handler:function(t){"ok"==t&&(window.location.href=DOMAIN_CART+"/"+JS_LANG+"m-flow-a-cart.htm"),ymPrompt.close()},autoClose:!1}),l.prop("disabled",!1).removeClass("uping-loading")}i&&(l.prop("disabled",!1).removeClass("uping-loading"),i())}else if(msg.indexOf("buy_now")>0)window.location.href=e.url;else{if("1"==h&&(0==$("#action_msg").length&&$(t).after('<div id="action_msg" style="clear:left;display:none;height:25px;line-height:25px;text-align:left;color:red;font-size:14px;"></div>'),$("#action_msg").html(msg),$("#action_msg").fadeIn(1e3),$("#action_msg").delay(2e3).fadeOut(1e3)),"0"==h){var s='<table width="95%" border="0" cellspacing="0" cellpadding="0">';s+="<tr>",s+='<td width="26%" align="right" valign="middle"><img src="https://css.gbtcdn.com/imagecache/GB2/images/adminIcon/cuo.gif"/></td>',s+='<td width="74%" align="left" valign="middle" style="padding-left:10px;">'+jsLg.addCart_7+"</td>",s+="</tr>",s+="<tr>",s+='<td colspan="2" align="center" style="padding:10px 0px;" class="duibt"><a href="javascript:void(0);"  class="redBgBtn" onclick="ymPrompt.close();" style="display: block; width:90px;">'+jsLg.addCart_8+"</a></td>",s+="</tr>",s+="</table>",ymPrompt.setDefaultCfg({okTxt:" Send ",cancelTxt:" Cancel ",closeTxt:"Close",minTxt:"Minimize",maxTxt:"Maximize",maskAlpha:.5}),ymPrompt.win({icoCls:"",msgCls:"confirm",message:s,titleBar:!1,width:300,height:140,autoClose:!1})}l.prop("disabled",!1).removeClass("uping-loading")}})}},re_load:function(t,e,a){var i,n=this;$.ajax({type:"GET",url:t,cache:!1,beforeSend:function(){i=layer.load()},success:function(t){layer.close(i);var o=$(t).find(e).html();$(e).html(o),GLOBAL.currency.change_html("",$(e)),n.cartItems(),window.payPal.init(),a&&a(t)}})},addPeijianPrice:function(){var t=$("#ul-peijian");if(t.length>0){var e=$("#peiJian_total"),a=$("#peiJian_final"),i=$("#total_saving"),n=$("#market_price"),o=$("#pk0"),s=$("#js_masterMarketPrice"),r=parseFloat($("#unit_price").attr("orgp")||$("#unit_price").attr("data-orgp"));num=$("#js_input_quantity").val(),marketPrice=0,peiJianMarkPrice=0,peiJianFinalPrice=0,n.length>0?marketPrice=parseFloat(n.attr("orgp")||n.attr("data-orgp")):o.length>0?marketPrice=parseFloat(o.attr("orgp")||o.attr("data-orgp")):s.length>0?marketPrice=+s.attr("orgp")||+s.attr("data-orgp"):marketPrice=r,t.find("input:checked").each(function(t,e){var a=$(this),i=a.parents("li");peiJianFinalPrice+=parseFloat(i.find(".js_pj_price").attr("orgp")||i.find(".js_pj_price").attr("data-orgp")),peiJianMarkPrice+=i.find(".js_pj_mark_price").length?parseFloat(i.find(".js_pj_mark_price").attr("orgp")||i.find(".js_pj_mark_price").attr("data-orgp")):parseFloat(i.find(".js_pj_price").attr("orgp")||i.find(".js_pj_price").attr("data-orgp"))}),peiJianMarkPrice+=marketPrice*num,peiJianFinalPrice+=r*num,e.attr({orgp:peiJianMarkPrice.toFixed(2),"data-orgp":peiJianMarkPrice.toFixed(2)}),i.attr({orgp:(peiJianMarkPrice-peiJianFinalPrice).toFixed(2),"data-orgp":(peiJianMarkPrice-peiJianFinalPrice).toFixed(2)}),a.attr({orgp:peiJianFinalPrice.toFixed(2),"data-orgp":peiJianFinalPrice.toFixed(2)}),GLOBAL.currency.change_html("",$(".infos")),GLOBAL.currency.change_html("",$(".master"))}}},GLOBAL.CountryChange=function(options){var country=$("#country_json").val();if(country)var countrys=eval("("+country+")");var state_str=options.state_str?options.state_str:"",address_id=parseInt(options.address_id),selectcountry=countrys[options.country_id],$codeBox=$(".code_"+address_id),$stateWrapBox=$(".state_"+address_id+"_"+address_id);if(selectcountry){var state=selectcountry.state,code=selectcountry.code;if($codeBox.html("+"+code+"<input type='hidden' name='code' value='"+code+"'>"),state&&state.length>0){$stateWrapBox.html("<select id='states_"+address_id+"_"+address_id+"' name='province' class='choiceCountry '></select>");var province="";document.getElementById("states_"+address_id+"_"+address_id).options[document.getElementById("states_"+address_id+"_"+address_id).length]=new Option(jsLg.addCart_2,"");for(var i=0;i<state.length;i++)province=state[i].replace("`","'"),document.getElementById("states_"+address_id+"_"+address_id).options[document.getElementById("states_"+address_id+"_"+address_id).length]=new Option(province,province),$("#states_"+address_id+"_"+address_id).val(state_str)}else $stateWrapBox.html("<input type='text' name='province' class='inputText i_table_w150 required custom_stateReg' value='"+state_str+"' />")}else $codeBox.html(""),$stateWrapBox.html("<input type='text' name='province' class='inputText i_table_w150 required custom_stateReg' value='"+state_str+"' />")},$.getUrlParams=function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),a=window.location.search.substr(1).match(e);return null!=a?unescape(a[2]):null},GLOBAL.indexPage={IpopProFun:function(t){var e=this,a=$("#js_IPopPro"),i="";if(a.length){if(t.popular_product_all&&t.popular_product_all.length)i+=e.eachCookie(t.popular_product_all,1);else{var n="";"undefined"!=typeof js_Index_PopPro&&js_Index_PopPro&&(n=js_Index_PopPro),i+=n}$(i).appendTo(a.parent()),GLOBAL.currency.change_html("",a.parent())}},eachCookie:function(t,e){var a;if(a=1!=e?'<ul class="clearfix slides none">':'<ul class="clearfix slides">',t)return $.each(t,function(t,e){a+="<li>",a+='<div class="pro_inner">',a+='<p class="i_proImg pb10 pr">',a+="tr/"==JS_LANG?0!=e.promote_zhekou?'<span class="cutOff_tag">%<strong>'+e.promote_zhekou+"</strong><i>"+jsLg.OFF+"</i></span>":"":0!=e.promote_zhekou?'<span class="cutOff_tag"><strong>'+e.promote_zhekou+"</strong>%<i>"+jsLg.OFF+"</i></span>":"",a+='<a href="'+e.url_title+'"><img src="'+e.goods_grid+'"   height="150" /></a>',a+="</p>",a+='<p class="i_proNam"><a href="'+e.url_title+'" title="'+e.goods_title+'">'+e.shirt_title+"</a></p>",a+='<p class="price pt5 pb5">',a+=e.market_price>0?'<span class="costPrice"><span class="bizhong"></span><span class="my_shop_price" orgp="'+e.market_price+'" data-orgp="'+e.market_price+'"></span></span>':"",a+='<span class="bizhong"></span><span class="my_shop_price new_shop_price" orgp="'+e.shop_price+'" data-orgp="'+e.shop_price+'"></span>',a+="</p>",a+=e.avg_rate_img>0?'<div class="all_proStart"><a href="javascript:void(0)" title="'+e.avg_rate+'" class="start start_'+e.avg_rate_img+'" ><i></i></a><a rel="nofollow" href="'+e.url_title+'#js_Reviews" class="colorBlue  pr5" title="Customer Reviews">('+e.review_count+")</a></div>":"",a+="</div>",a+="</li>"}),a+="</ul>"}},GLOBAL.dingyue=function(t,e){var a=$("#"+t),i=a.val().trim(),n=$("#"+e);if(!i)return n.show().attr("class","error").html(jsLg.newsLetter.enterEmail),a.focus(),!1;if(!GLOBAL.checkmail(i))return n.show().attr("class","error").html(jsLg.newsLetter.enterValidEmail),a.focus(),!1;var o=1==nav_type_id?6:1,s=JS_LANG&&JS_LANG.length>0?"/"+JS_LANG.split("/")[0]:"";$.ajax({type:"POST",url:s+"/m-users-a-email_list-job-add-email-source-"+o+".htm?t="+ +new Date,data:{userInput:i},success:function(t){return n.show(),1==t.type?n.attr("class","error"):n.attr("class","ok"),n.html(t.info),a.focus(),!1},dataType:"json"})},GLOBAL.ticket={getWaitForReply:function(t){if($(".js_ticketNum").length){var e=parseInt($.cookie("ticketNum1"));if(isNaN(e))$.get("/fun/index.php?act=getTicketNum",function(e){var a=null;e&&1==e.status&&(GLOBAL.ticket._updateTicketView(e),a=new Date,a.setMilliseconds(a.getMilliseconds()+6e5),$.cookie("ticketNum1",e.count,{expires:a,path:"/",domain:COOKIESDIAMON}),$.isFunction(t)&&t(e))},"jsonp");else{var a={count:e};GLOBAL.ticket._updateTicketView(a),$.isFunction(t)&&t(a)}}},_updateTicketView:function(t){var e=t.count;e>0?($(".js_ticketNum").find("span").text(e>99?"99+":e),$(".js_ticketLink").attr("href","https://support.gearbest.com/ticket/ticket/ticket-list?status=1"),$(".js_ticketMsg").show()):($(".js_ticketLink").attr("href","https://support.gearbest.com/ticket/ticket/ticket-list"),$(".js_ticketMsg").hide())}},GLOBAL.littleBanner=function(){if($(".js_littleBanner").length>0){var t=$(window).width(),e=$(".js_littleBanner");t>1024?e.show():e.hide()}};var SET_COUNTRY_CURRENCY;GLOBAL._getHtml=function(){if(SET_COUNTRY_CURRENCY){var t=SET_COUNTRY_CURRENCY.countries;for(var e in t){var a=t[e].c.toLowerCase(),i=t[e].n,n=t[e].id,o='<a rel="nofollow" data-countrycode="'+a+'" data-countryname="'+i+'" data-countryid="'+n+'" href="javascript:void(0);"><span class="css_flag css_'+a+'"><span class="country-text">'+i+"</span></span></a>";$(".js_countryListContainer").append(o)}}},GLOBAL.util={loadCSS:function(t,e){for(var a=document.getElementsByTagName("link"),i=0;i<a.length;i++)if(a[i].href==t)return!1;var n=document.createElement("link");n.rel="stylesheet",n.href=t,n.id=e?e:"",document.getElementsByTagName("head")[0].appendChild(n)}},function(t){t.fn.extend({_init:function(e,a){var i=e;i.find(".list-title").click(function(t){i._selectorCountry(),t.stopPropagation()}),i.find(".list-container").on("click","a",function(e){var a=t(this),n=a.html(),o=a.attr("data-countrycode"),s=a.attr("data-countryname"),r=a.attr("data-countryid");i._onCountryClick(n,o,s,r,e)}),i.find(".currency-title").click(function(t){i._selectorCurrency(),t.stopPropagation()}),i.find(".currency-container").on("click","a",function(e){var a=t(this),n=a.html(),o=a.attr("data-bizhong");i._onCurrencyClick(n,o,e)}),i.find(".js_saveCountryAndCurrency").click(function(e){var a=t("#js_ngSwitcher"),i=a.find(".currency-title").attr("data-bizhong"),n=a.find(".list-title").attr("data-countrycode"),o=a.find(".list-title").attr("data-countryname"),s=a.find(".list-title").attr("data-countryid"),r=t("#js_layer_shippingMethod");if(t.cookie("bizhong",i,{expires:7,path:"/",domain:COOKIESDIAMON}),t.cookie("countryCode",n,{expires:7,path:"/",domain:COOKIESDIAMON}),t.cookie("countryName",o,{expires:7,path:"/",domain:COOKIESDIAMON}),t.cookie("countryId",s,{expires:7,path:"/",domain:COOKIESDIAMON}),t.cookie("isSaveCountry",1,{expires:7,path:"/",domain:COOKIESDIAMON}),t.cookie("customlizeCurrency",1,{expires:7,path:"/",domain:COOKIESDIAMON}),GLOBAL.currency.change_houbi(i),a.removeClass("show-dropBox").find("span.currency").html(i),a.find("i.flagWrap").html('<i class="css_flag css_'+n+'"></i>'),a.find(".js_shiptoCountry").html(o),t(".js_dropBox").hide(),r.length>0){r.html(o);var l=t("#js_hidden-goodsId").val(),c=t("#hidden-wid").val()||_GET("wid");t.ajax({url:"/shipping/pp_"+l+".html?act=get_shipping_info&id="+l+"&num=1&country="+s+"&wid="+c,type:"GET",dataType:"json"}).done(function(e){t("#js_shippingMethod_choose").val(s),t(".js_viewShippingCost").html(viewShippingCost(e)),t("#js_shippingMethodTit").html(o);var a=t(".js_trpopBox");if(a.length){for(var i=0,n=[],r=0;r<a.length;r++)a.eq(r).find(".cost").html()===jsLg.formMsg.priceMatch.freeShipping?n.push(0):n.push(parseFloat(a.eq(r).find(".numkk").attr("orgp")||a.eq(r).find(".numkk").attr("data-orgp")));for(var l=n[0],c=0;c<n.length;c++)n[c]<l&&(l=n[c],i=c);a.eq(i).trigger("click"),t(".js_viewShippingCost").find(".js_closepopBox_s").eq(i).prop("checked","checked")}else t("#goodInf_title").html('<strong class="color6">'+jsLg.Other.canShip+"</strong>"),
t(".js_layerTc").hide();GLOBAL.currency.change_html()})}e.stopPropagation()}),"function"==typeof a&&a()},_selectorCountry:function(){var e=t(this),a=e.find(".list-title"),i=e.find(".list-container");a.toggleClass("fold"),a.toggleClass("unfold"),a.hasClass("unfold")?(e.find(".currency-container").hide(),i.show()):i.hide()},_selectorCurrency:function(){var e=t(this),a=e.find(".currency-title"),i=e.find(".currency-container");if(0==i.find("li").length){for(var n in my_array_sign)if(my_array_sign.hasOwnProperty(n)){var o='<li><a rel="nofollow" href="javascript:;" data-bizhong="'+n+'"><em>'+n+"</em>"+my_array_sign[n]+"</a></li>";i.append(o)}i.children().length>25?i.addClass("more-than-24li"):""}a.toggleClass("fold unfold"),a.hasClass("unfold")?(e.find(".list-container").hide(),i.show(),t(".currency-container").find("li:eq(7)").hide()):i.hide()},_onCountryClick:function(e,a,i,n,o){var s=t(this);s.find(".list-container").hide(),s.find(".list-title").addClass("fold").removeClass("unfold").html(e).attr("data-countrycode",a).attr("data-countryname",i).attr("data-countryid",n),o.stopPropagation()},_onCurrencyClick:function(e,a,i){var n=t(this),a=a,o="";o+=e.split("</em>")[1]||e.split("</EM>")[1],o+="&nbsp;",o+=e.split("</em>")[0].split("<em>")[1]||e.split("</EM>")[0].split("<EM>")[1],n.find(".currency-container").hide(),n.find(".currency-title").addClass("fold").removeClass("unfold").html(o).attr("data-bizhong",a),i.stopPropagation()}})}(jQuery),function(){var t=$("#js_ngSwitcher"),e=t.find(".item");e._init(e,function(){}),setTimeout(function(){var t;t=$.cookie("customlizeCurrency")?$.cookie("bizhong"):0!=window.defaultCur?window.defaultCur:$.cookie("bizhong");var e=$.cookie("countryCode")?$.cookie("countryCode"):"us",a=$.cookie("countryName")?$.cookie("countryName"):"United States",i=$("#js_ngSwitcher");GLOBAL.currency.change_html(),i.find("span.currency").html(t),i.find("i.flagWrap").html('<i class="css_flag css_'+e+'"></i>'),i.find(".js_shiptoCountry").html(a.replace(/\+/g," "))},2e3)}(),$(function(){function t(){var t,e,a=0;for(e=n.find(".nav_child"),t=0;t<e.length;t++)a=0!==t?e.eq(t).find("dl").length>a?e.eq(t).find("dl").length:a:e.eq(t).find("dl").length;$LAB.script(JS_IMG_URL+"minjs/jquery.menu-aim.min.js?20160616001").wait(function(){function t(t){var e=$(t),i=($(this),e.data("submenuId")),n=$("#"+i);a.offset(),a.outerHeight(),a.outerWidth(),n.css({display:"block",tolerance:400}),e.addClass("cur").siblings().removeClass("cur")}function e(t){var e=$(t),a=e.data("submenuId"),i=$("#"+a);i.css("display","none"),e.removeClass("cur")}var a=$(".categories-list-box");a.menuAim({activate:t,deactivate:e}),$(".categories-list-box .nav_child").each(function(t,e){$(e).find(".sub_cate_row").length||$(e).find(".child_item").length||$(e).remove()}),$('<div class="menu-dimmer"></div>').insertAfter(".nav_cats"),$(".categories-list-box").mouseenter(function(t){$(".nav_bar_outer").addClass("dim"),$("#top").css("z-index","initial"),$(".nav_cats").css("z-index","25").css("position","relative")}),$(".categories-list-box").on("mouseenter","li",function(){var t,e,a=$(this),i=(a.index(),a.attr("data-submenu-id")),n=$(".categories-list-box").find("li").length-1,o=$(".categories-list-box").find("li").eq(n).attr("data-submenu-id");"first-menu-0"!=i&&i!=o||(a.addClass("cur"),a.find(".nav_child").show()),a.find(".scp_banner").find("img")&&(t=a.find(".scp_banner").find("img"),e=t.attr("data-src"),t.attr("src",e).removeAttr("data-src"))}),$(".categories-list-box").on("mouseleave",function(){$(this).find(".nav_child").css("display","none"),$(".categories-list-box").find("li").removeClass("cur"),$("#top").css("z-index",""),$(".nav_cats").css("z-index","").css("position",""),$(".nav_bar_outer").removeClass("dim")}),$("#first-menu-6 dl dt").on("click","a",function(t){var e=$(this),a=e.attr("href"),i=e.text();if("Intimate Apparel"==i)return null!=$.cookie("age18")||(GLOBAL.PopObj.confirm({shade:[.8,"#000",!0],title:"Age Verification",offset:[($(window).height()-164)/2,"50%"],closeBtn:!1,dialog:{msg:"These items are for sale to adults only (18 years or older). By entering this website section, you certify that you are of legal age in the state/region you reside in",btn:[jsLg.user.yes,jsLg.user.no],yes:function(t){return $.cookie("age18","yes",{expires:365,path:"/",domain:COOKIESDIAMON}),layer.close(t),location.href=a,flag,!0},no:function(t){layer.close(t),location.href=DOMAIN}}}),!1)})})}$("#btn-subscribe-index").click(function(){GLOBAL.dingyue("txt-subscribe-index","subscribe-index-info")}),$(".js_gadget_menu").hover(function(){$(this).find(".child_con,.child_menu").show()},function(){$(this).find(".child_con,.child_menu").hide()});var e=$("#is_index").val()?$("#is_index").val():0,a=$("#is_special_index").val()?$("#is_special_index").val():0,i=$("#nav_type_id").val()?$("#nav_type_id").val():0,n=$("#js_nav_list"),o=$.cookie("isNewUserProSort")&&$.cookie("isNewUserProSort").length>0?"/"+JS_LANG+"m-public-a-getNav-is_index-"+e+"-type-"+i+"-newuser-1.html":"/"+JS_LANG+"m-public-a-getNav-is_index-"+e+"-type-"+i+".html";n.length&&(e||a?t():$.get(o,function(e){var e="string"==typeof e?JSON.parse(e):e;$("#js_nav_list").html(e.data).prepend('<i class="icon-arrow-top"></i>'),t()})),GLOBAL.toggleTopMenu(),GLOBAL.lazyLoad.creatEle(),GLOBAL.lazyLoad.scrollLazyLoad(".js_lazy, .js_gbexp_lazy"),info_check($("#js_IPopPro").length?3:1),GLOBAL.currency.change_houbi(),$(".js_top_cate,.js_search_cate").click(function(){var t=$(this),e=t.find("dd");t.addClass("hover"),e.slideDown(),1!=t.data("onladYet")&&t.hasClass("js_top_cate")&&(e.addClass("js_loading"),$.get("/"+JS_LANG+"m-ajax-a-category.htm",function(a){e.removeClass("js_loading").append(a),t.data("onladYet",1)})),t.mouseleave(function(a){e.hide(),t.removeClass("hover")})}),$("#nav").on("mouseover","li.nav_cat",function(){var t=$(this),e=t.find("div.nav_box");e.length>0&&(e.show(),t.addClass("hover"))}),$("#nav").on("mouseleave","li.nav_cat",function(){var t=$(this),e=t.find("div.nav_box");e.hide(),t.removeClass("hover")}),$(".cart_list").hover(function(t){$(this).addClass("current").find("#js_cart_item_box,.cart_num").show(),$(this).find(".sign_box").children(".carts_number").addClass("hide");var e="/fun/?act=info_check&action="+t,a=(window.location.href,_GET("vip",location.hash.indexOf("vip=")>0?"?"+location.hash.substr(1):null));if(a){var i=encodeURIComponent(document.referrer);e+="&vip="+a+"&referrer_url="+i}$.ajax({type:"GET",url:e,dataType:"json",cache:!1,success:function(t){GLOBAL.login.getNUmber(t)}})},function(){$(this).removeClass("current").find("#js_cart_item_box,.cart_num").hide(),$(this).find(".sign_box").children(".carts_number").removeClass("hide")}),$(".child_list dd").hover(function(){$(this).addClass("on")},function(){$(this).removeClass("on")});var s=$("#top_seachBox");window.weltWidth=function(){$("#welt_top").width(s.outerWidth())},$(window).resize(function(t){GLOBAL.littleBanner(),weltWidth()}),GLOBAL.littleBanner(),weltWidth(),function(){function t(){return f.isOpen||_.isOpen}function e(){d===f.boxId?f.hide():d===_.boxId&&_.hide()}function a(){p===-1?c.trigger("click"):d===_.boxId?_.wrap.find("a").eq(p).trigger("click"):f.wrap.find("p").eq(p).trigger("click")}function i(){var t=null,e=null;t=d===_.boxId?_.wrap.find("a"):f.wrap.find("p"),p<t.length-1&&(p>-1&&t.eq(p).removeClass("hover"),e=t.eq(++p).addClass("hover"),l.val(d===_.boxId?e.text():e.find("strong").text()))}function n(){var t=null,e=null;p>0&&(t=d===_.boxId?_.wrap.find("a"):f.wrap.find("p"),t.eq(p).removeClass("hover"),e=t.eq(--p).addClass("hover"),l.val(d===_.boxId?e.text():e.find("strong").text()))}function o(t,e,a){var i,n,o,s,r,l=function(){var c=new Date-s;c<e&&c>=0?i=setTimeout(l,e-c):(i=null,a||(r=t.apply(o,n),o=n=null))};return function(){o=this,n=arguments,s=new Date;var c=a&&!i;return i||(i=setTimeout(l,e)),c&&(r=t.apply(o,n),o=n=null),r}}function s(t,e){for(var a,i=[],n=0;n<t.length;n++){a=!0;for(var o=0;o<e.length;o++)if(t[n].keyword==e[o]){t[n].url?e.splice(o,1):a=!1;break}a&&i.push(t[n])}return i}if(!(JS_LANG&&JS_LANG.length>0)){var r=$("#js_searchDropdownBox"),l=$("#js_topSeachInput"),c=$("#js_keyBtn"),d=null,p=-1,h=!0,u=50,g=null,f={boxId:1,wrap:$("#js_hotKeyWord"),isOpen:!1,show:o(function(){var t=JSON.parse($.cookie("searchCache")),e=t&&t instanceof Array?t:[];e=e.slice(0,5),g&&!g.status&&g.abort(),g=$.ajax({url:DOMAIN+"/index.php?m=synDataByES&act=showKeyword&cateId="+r.val()+"&keyword=",type:"GET"}).done(function(t){var a="",i=[];if(t="string"==typeof t?JSON.parse(t):t,0!=t.code)return!1;if(i=s(t.data,e).slice(0,6),e.length>0){a+='<dl><dt><h5>Recent Searches:</h5><span class="del js-del-all">clear history</span></dt><dd>';for(var n=0;n<e.length;n++)a+='<p data-type="H"><strong>'+e[n]+'</strong><span class="del js-del">delete</span></p>';a+="</dd></dl>",i.length>0&&(a+='<div class="split-line"></div>')}if(i.length>0){a+="<dl><dt><h5>Hot Searches:</h5></dt><dd>";for(var n=0;n<i.length;n++)a+='<p data-url="'+i[n].url+'"><strong>'+i[n].keyword+"</strong></p>";a+="</dd></dl>"}f.wrap.addClass("opened").find(".word-list").html(a),f.isOpen=!0,d=f.boxId})},u),hide:function(){f.wrap.removeClass("opened").find("p").eq(p).removeClass("hover"),f.isOpen=!1,p=-1}},_={boxId:2,wrap:$("#js_searchTips"),isOpen:!1,show:o(function(){var t=l.val();""===t?(_.hide(),f.show()):(f.hide(),h=!1,g&&!g.status&&g.abort(),g=$.ajax({url:DOMAIN+"/index.php?m=synDataByES&act=showKeyword&cateId="+r.val()+"&keyword="+t,type:"GET"}).done(function(t){var e=[];if(t="string"==typeof t?JSON.parse(t):t,0!=t.code)return!1;if(t=t.data,t.length>0){for(var a=0;a<t.length;a++)e.push('<li><a href="'+(t[a].url||"javascript:;")+'">'+t[a].keyword+"</a></li>");_.wrap.html("<ul>"+e.join("")+"</ul>").addClass("opened"),_.isOpen=!0,d=_.boxId}else _.hide()}).fail(function(t){_.hide()}).always(function(){h=!0}))},u),hide:function(){_.wrap.removeClass("opened").find("a").eq(p).removeClass("hover"),_.isOpen=!1,p=-1}};$(document).on("mousedown",function(a){t()&&0===$(a.target).closest(".welt_top").length&&e()}),l.on("focus",function(){""===l.val()?f.show():_.show(),c.data("siws",l.val())}).on("input",function(){_.show(),c.data("siws",l.val())}).on("keydown",function(o){o.stopPropagation(),t()?13===o.which?(o.preventDefault(),a()):9==o.which?e():40==o.which?(o.preventDefault(),i()):38==o.which&&(o.preventDefault(),n()):13===o.which&&(o.preventDefault(),c.trigger("click"))}).on("mousedown",function(t){t.stopPropagation()}),f.wrap.on("click","p",function(t){var e=$(this),a=e.data("url");return a?(location.href=a,!1):(l.val(e.find("strong").text()),f.hide(),void c.trigger("click"))}).on("click",".js-del-all",function(t){$.cookie("searchCache",null,{path:"/"}),f.show()}).on("click",".js-del",function(t){var e=JSON.parse($.cookie("searchCache"));e.splice($(this).parent().index(),1),$.cookie("searchCache",JSON.stringify(e),{path:"/"}),f.show(),t.stopPropagation()}),_.wrap.on("click","a",function(t){var e=$(this);l.val(e.text()),_.hide(),c.trigger("click")})}}(),$(".js_search_cate").find("dd").on("click","li",function(){GLOBAL.Search.selectCate($(this),"on")}),$("#js_keyBtn,#js_seachPage_seachBtn").click(function(){var t=$(this).parents("form").find("input.js_k"),e=$("#shop_name").val(),a=t.val(),i=JS_LANG&&JS_LANG.length>0?"/"+JS_LANG.split("/")[0]:"",n="/index.php"+i+"?m=abcindex&is_search=1";if(""!=$.trim(a)){for(var o=JSON.parse($.cookie("searchCache"))||[],s=Math.min(20,o.length),r=$("<div>").text(a).html(),l=0;l<s;l++)if(r==o[l]){o.splice(l,1);break}o.unshift(r),$.cookie("searchCache",JSON.stringify(o),{path:"/"})}return $.post(n,{shop_name:e,keyword:a},function(t){}),GLOBAL.Search.seach_submit($(this))}),$("form.no_seachForm").submit(function(t){return $(this).find("button").trigger("click"),!1}),$("#btn-subscribe").click(function(){var t=$("#txt-subscribe");return $.trim(t.val())==t.attr("placeholder")&&t.val(""),GLOBAL.newsletter(t)}),$("#btn-checkOrder").click(function(){var t=$("#txt-checkOrder");$.trim(t.val())==t.attr("placeholder")&&t.val(""),GLOBAL.checkOrder()}),$(".nav_cats").click(function(){var t=$(this);"none"==$("#js_nav_list").css("display")&&($("#js_nav_list").show(),t.parents("#topMian").addClass("top_zindex"),t.data("show","hide"))}).mouseleave(function(){var t=$(this);"hide"==$(this).data("show")&&($("#js_nav_list").hide(),t.parents("#topMian").removeClass("top_zindex"),$(this).data("show","show"))}),$("#js_top_search_more").on("click",function(){$("#js_top_cearch_all").show(),$(this).hide()}),$("#js_ngSwitcher").click(function(t){var e,a=$(this),i=a.find("dd"),n=$.cookie("countryCode")?$.cookie("countryCode"):"us",o=$.cookie("countryName")?$.cookie("countryName"):"United States",s=$.cookie("countryId")?$.cookie("countryId"):"41";e=$.cookie("customlizeCurrency")?$.cookie("bizhong"):0!=window.defaultCur?window.defaultCur:$.cookie("bizhong");var r="$ USD";SET_COUNTRY_CURRENCY||$.ajax({url:"/fun/index.php?act=area_country",type:"GET",dataType:"jsonp",success:function(t){SET_COUNTRY_CURRENCY=t,GLOBAL._getHtml()}}),a.hasClass("show-dropBox")?(a.removeClass("show-dropBox"),i.hide()):(a.addClass("show-dropBox"),i.show());for(var l in my_array_sign)e==l&&(r=my_array_sign[l]+"&nbsp;"+l);a.find(".list-title").attr("data-countrycode",n).attr("data-countryname",o.replace(/\+/g," ")).attr("data-countryid",s).html('<span class="css_flag css_'+n+'"><span class="country-text">'+o.replace(/\+/g," ")+"</span></span>"),a.find(".currency-title").attr("data-bizhong",e).html(r),t.stopPropagation()}),$(".js_dropBox").click(function(t){var e=$(".list-title"),a=$(".currency-title"),i=$(".list-container"),n=$(".currency-container");(e.hasClass("unfold")||a.hasClass("unfold"))&&(i.hide(),n.hide(),e.removeClass("unfold").addClass("fold"),a.removeClass("unfold").addClass("fold")),t.stopPropagation()}),$("#js_topCountryBox,#js_topLanguageBox,#js_topMoblieBox").click(function(t){var e=$(this),a=e.find("dd");e.hasClass("show-dropBox")?(e.removeClass("show-dropBox"),a.hide()):(e.addClass("show-dropBox"),a.show()),t.stopPropagation()}),$("#js_topLanguageBox").find(".js_google_translate_element").click(function(t){t.stopPropagation()}),$(document.body).click(function(){var t=$("#js_ngSwitcher"),e=$("#js_topCountryBox"),a=$("#js_topLanguageBox"),i=$("#js_topMoblieBox");(t.hasClass("show-dropBox")||a.hasClass("show-dropBox")||a.hasClass("show-dropBox")||i.hasClass("show-dropBox"))&&(t.removeClass("show-dropBox").find("dd").hide(),e.removeClass("show-dropBox").find("dd").hide(),a.removeClass("show-dropBox").find("dd").hide(),i.removeClass("show-dropBox").find("dd").hide())}),$(document).on("click",".verifycode",function(){var t=$(this);t.siblings("img").attr("src",t.attr("data-src")+"&"+(new Date).getTime())}),$(document.body).on("click",".n_video",function(t){t.preventDefault();for(var e=$(this),a=e.attr("data-vide"),i=[],n=a.split(","),o=0;o<n.length;o++)i.push(n[o]);if(i&&i.length>=2){var s=Math.floor(Math.random()*i.length);GLOBAL.show_reviewVido(i[s])}else GLOBAL.show_reviewVido($(this).data("vide"))}),$("#js_searchDropdownBox").length>0&&$("#js_searchDropdownBox").change(function(t){$(".js_navSearchFacade").find("span").html($(this).find("option:selected").html())}).trigger("change"),$(".nav-left").on("click",".js_navSearchFacade",function(){var t=$(".imitate_select");t.is(":hidden")||!t.hasClass("slideDown")?t.slideDown("fast").addClass("slideDown"):t.slideUp("fast").removeClass("slideDown")}),$(".imitate_select").on("click","li",function(){$(this).addClass("imitate_action"),$(this).siblings().removeClass("imitate_action"),$(".nav-search-label").text($(this).text()),$("#js_searchDropdownBox").val($(this).attr("data-value")),$("#js_searchDropdownBox").blur(),$(".imitate_select").hide().removeClass("slideDown")}),$(document.body).on("click",function(t){var e=$(".js_topSeachForm");e.is(t.target||t.srcElement)||0!==e.has(t.target||t.srcElement).length||$(".imitate_select").hide()})}),jQuery.validator&&(jQuery.validator.addMethod("includeNum",function(t,e){var a=/\d+/;return this.optional(e)||a.test(t)},jsLg.formMsg.mustContainNum),jQuery.validator.addMethod("phoneNum",function(t,e){var a=/^[0-9\-\+\(\)]+$/;return this.optional(e)||a.test(t)},jsLg.formMsg.phoneNum));var _graq=_graq||[];_graq.push(["_getlkid","gearBest"]),function(){var t=JS_IMG_URL+"minjs/",e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=t+"affl.min.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(e,a)}(),function(){var t,e=$(".nationalFlag").find("i"),a=$(".nationalFlag").find("span"),i=$(".nationalFlag").find("a")[0];t=navigator.language?navigator.language:navigator.browserLanguage,t.indexOf("en")>-1||(t.indexOf("ro")>-1?($(".nationalFlag").css("display","inline-block"),e.attr("class","ro"),a.html("Romania"),i.href="javascript: void(window.open('http://translate.google.com/translate?u='+escape(location.href)+'&amp;langpair=en%7Cro', 'English_to_Romanian', 'resizable,scrollbars,status'))"):t.indexOf("he")>-1?($(".nationalFlag").css("display","inline-block"),e.attr("class","he"),a.html("עִבְרִית"),i.href="javascript: void(window.open('http://translate.google.com/translate?u='+escape(location.href)+'&amp;langpair=en%7Che', 'English_to_Hebrew', 'resizable,scrollbars,status'))"):t.indexOf("el")>-1?($(".nationalFlag").css("display","inline-block"),e.attr("class","el"),a.html("Ελληνικ"),i.href="javascript: void(window.open('http://translate.google.com/translate?u='+escape(location.href)+'&amp;langpair=en%7Cel', 'English_to_Greek', 'resizable,scrollbars,status'))"):t.indexOf("da")>-1?($(".nationalFlag").css("display","inline-block"),e.attr("class","da"),a.html("Dansk"),i.href="javascript: void(window.open('http://translate.google.com/translate?u='+escape(location.href)+'&amp;langpair=en%7Cda', 'English_to_Denmark', 'resizable,scrollbars,status'))"):t.indexOf("no")>-1?($(".nationalFlag").css("display","inline-block"),e.attr("class","no"),a.html("Norsk"),i.href="javascript: void(window.open('http://translate.google.com/translate?u='+escape(location.href)+'&amp;langpair=en%7Cno', 'English_to_Norsk', 'resizable,scrollbars,status'))"):t.indexOf("nl")>-1?($(".nationalFlag").css("display","inline-block"),e.attr("class","nl"),a.html("Nederland"),i.href="javascript: void(window.open('http://translate.google.com/translate?u='+escape(location.href)+'&amp;langpair=en%7Cnl', 'English_to_Dutch', 'resizable,scrollbars,status'))"):t.indexOf("ar")>-1?($(".nationalFlag").css("display","inline-block"),e.attr("class","ar"),a.html("لغة عربية"),i.href="javascript: void(window.open('http://translate.google.com/translate?u='+escape(location.href)+'&amp;langpair=en%7Car', 'English_to_Arabic', 'resizable,scrollbars,status'))"):t.indexOf("ko")>-1?($(".nationalFlag").css("display","inline-block"),e.attr("class","ko"),a.html("Korea"),i.href="javascript: void(window.open('http://translate.google.com/translate?u='+escape(location.href)+'&amp;langpair=en%7Cko', 'English_to_Korean', 'resizable,scrollbars,status'))"):t.indexOf("ja")>-1?($(".nationalFlag").css("display","inline-block"),e.attr("class","ja"),a.html("Japan"),i.href="javascript: void(window.open('http://translate.google.com/translate?u='+escape(location.href)+'&amp;langpair=en%7Cja', 'English_to_Japanese', 'resizable,scrollbars,status'))"):t.indexOf("it")>-1?($(".nationalFlag").css("display","inline-block"),e.attr("class","it"),a.html("Italiano"),i.href="javascript: void(window.open('http://translate.google.com/translate?u='+escape(location.href)+'&amp;langpair=en%7Cit', 'English_to_Italian', 'resizable,scrollbars,status'))"):t.indexOf("fr")>-1?($(".nationalFlag").css("display","inline-block"),e.attr("class","fr"),a.html("Française"),i.href="javascript: void(window.open('http://translate.google.com/translate?u='+escape(location.href)+'&amp;langpair=en%7Cfr', 'English_to_French', 'resizable,scrollbars,status'))"):t.indexOf("de")>-1?($(".nationalFlag").css("display","inline-block"),e.attr("class","de"),a.html("Deutsch"),i.href="javascript: void(window.open('http://translate.google.com/translate?u='+escape(location.href)+'&amp;langpair=en%7Cde', 'English_to_German', 'resizable,scrollbars,status'))"):t.indexOf("pt")>-1&&t.indexOf("BR")==-1?($(".nationalFlag").css("display","inline-block"),e.attr("class","pt"),a.html("Português"),i.href="javascript: void(window.open('http://translate.google.com/translate?u='+escape(location.href)+'&amp;langpair=en%7Cpt', 'English_to_Portuguese', 'resizable,scrollbars,status'))"):t.indexOf("es")>-1?($(".nationalFlag").css("display","inline-block"),e.attr("class","es"),a.html("España"),i.href="javascript: void(window.open('http://translate.google.com/translate?u='+escape(location.href)+'&amp;langpair=en%7Ces', 'English_to_Spanish', 'resizable,scrollbars,status'))"):t.indexOf("ru")>-1?($(".nationalFlag").css("display","inline-block"),e.attr("class","ru"),a.html("Русский"),i.href="javascript: void(window.open('http://translate.google.com/translate?u='+escape(location.href)+'&amp;langpair=en%7Cru', 'English_to_Russian', 'resizable,scrollbars,status'))"):t.indexOf("BR")>-1&&t.indexOf("pt")>-1&&($(".nationalFlag").css("display","inline-block"),e.attr("class","br"),a.html("BR"),i.href="javascript: void(window.open('http://translate.google.com/translate?u='+escape(location.href)+'&amp;langpair=en%7Cpt-BR', 'English_to_pt-BR', 'resizable,scrollbars,status'))"))}(),function(){function t(t){return null!=$.cookie("age18")||void GLOBAL.PopObj.confirm({shade:[.8,"#000",!0],title:"Age Verification",offset:[($(window).height()-164)/2,"50%"],closeBtn:!1,dialog:{msg:"These items are for sale to adults only (18 years or older). By entering this website section, you certify that you are of legal age in the state/region you reside in",btn:[jsLg.user.yes,jsLg.user.no],yes:function(t){return $.cookie("age18","yes",{expires:365,path:"/",domain:COOKIESDIAMON}),layer.close(t),location.href=$linkApparell,flag,!0},no:function(t){layer.close(t),location.href=DOMAIN}}})}var e=$(".js-breadCrumbsBox"),a=0;e.length>0&&(a=e.find("li"),$.each(a,function(t,e){var a=$(e),i=[],n="";if(a.find("dl").length>0){i=JSON.parse(a.find("dt").attr("data-list"));for(var o in i)n+='<dd><a href="'+i[o].url+'">'+i[o].cat_name+"</a></dd>";a.find("dt").after(n)}})),$(".js-breadCrumbsBox dl dd, #js_cate_attr ul li").on("click","a",function(t){var e=$(this),a=e.attr("href"),i=e.text();if("Intimate Apparel"==i)return null!=$.cookie("age18")||(GLOBAL.PopObj.confirm({shade:[.8,"#000",!0],title:"Age Verification",offset:[($(window).height()-164)/2,"50%"],closeBtn:!1,dialog:{msg:"These items are for sale to adults only (18 years or older). By entering this website section, you certify that you are of legal age in the state/region you reside in",btn:[jsLg.user.yes,jsLg.user.no],yes:function(t){return $.cookie("age18","yes",{expires:365,path:"/",domain:COOKIESDIAMON}),layer.close(t),location.href=a,flag,!0},no:function(t){layer.close(t)}}}),!1)});var i=window.location.pathname,n=i.substring(i.length-6);parseInt(n.replace(/\//g,"")),i.indexOf("12181")>=0?t():i.indexOf("12182")>=0?t():i.indexOf("12183")>=0?t():i.indexOf("12184")>=0?t():i.indexOf("12185")>=0?t():i.indexOf("12186")>=0&&t()}(),function(){$("#PB-Page-Select").length>0&&$("#PB-Page-Select").change(function(){window.location.href=this.value})}(),function(){var t=$("#topMian"),e=t.find(".seo_fields").find(".none"),a=t.find(".morefields");a.on("click",function(){e.removeClass("none"),a.remove()})}(),function(){var t=$("#top-banner-ad"),e=t.find("img");"undefined"!=typeof sepcialTopBanner&&sepcialTopBanner!==!1&&(sepcialTopBanner.banner_id==e.data("sku")?12!=$.cookie("countryId")&&t.closest(".back-top-banner").remove():sepcialTopBanner&&12==$.cookie("countryId")&&(t.attr("href",sepcialTopBanner.banner_url),e.attr("data-sku",sepcialTopBanner.banner_id).attr("data-original",sepcialTopBanner.banner_image).data("original",sepcialTopBanner.banner_image)))}(),function(){window.getAsyncPrice=function(t,e){if(t&&t.length)return e=$.extend({callback:function(t,e){t.each(function(t){Number(e[t].displayPrice)>0&&$(this).attr("data-orgp",e[t].displayPrice)}),GLOBAL.currency.change_html(null,null,t)},complete:function(){t.css("visibility","visible")}},e),GOODSPRICE?void $.ajax({url:GOODSPRICE,type:"POST",timeout:2e3,contentType:"application/json",dataType:"json",data:JSON.stringify({domain:"gearbest",language:"en",filters:[{field:"skuId",values:$.map(t,function(t){var e=$.trim($(t).data("key")).split("#");return e[1]=e[1]||21,e.join("#")})}]})}).done(function(a){a&&a.data&&t.length==a.data.length?e.callback&&e.callback(t,a.data):console.log("async price request error")}).fail(function(e){t.css("visibility","visible"),console.log("async price request fail")}).always(function(){e.complete&&e.complete(t)}):void(e.complete&&e.complete(t))},window.getAsyncPrice_callback=function(t,e){t.each(function(t){Number(e[t].displayPrice)>0&&$(this).attr("data-orgp",e[t].displayPrice);var a=$(this).closest(".logsss_event_ps");if(a.length>0){var i=a.find(".cutOff_tag");if(i.length>0){var n=$(this).data("shop-price"),o=Math.round((n-e[t].displayPrice)/n*100),s=$(this).siblings(".ajax-costPrice");o>=1&&o<100?("tr/"==JS_LANG?i.html("%<strong>"+o+"</strong><i>OFF</i>").show():i.html("<strong>"+o+"</strong>%<i>OFF</i>").show(),s.show()):i.hide()}}var r=$(this).parents(".showZheKou");if(r&&r.length){var l=$(this).attr("data-orgin"),c=Math.round((l-Number(e[t].displayPrice))/l*100);c>=1&&c<100&&(r.find(".jsZheKou strong").text(c),r.find(".jsZheKou").show())}}),GLOBAL.currency.change_html(null,null,t)},window.getAsyncPrice($(".ajax-price"),{callback:window.getAsyncPrice_callback}),window.getAsyncPrice($(".ajax-red-price"),{callback:window.getAsyncPrice_callback})}(),function(){if(""==JS_LANG){var t=(new Date).getTime();$.ajax({type:"get",url:"/fun/?act=home_top_banner&_="+t,data:{},success:function(t){if(t=JSON.parse(t),0!=t.length&&$("#top-banner-ad")){var e=$("#top-banner-ad");e.attr("href",t.banner_url),setTimeout(function(){e.find("img").attr("src",t.banner_image)},500)}},error:function(t){console.log(t)}})}}();