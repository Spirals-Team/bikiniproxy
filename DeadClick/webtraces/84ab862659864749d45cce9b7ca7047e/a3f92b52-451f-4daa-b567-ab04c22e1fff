_sv=_sv||{},_sv.consts={GA:"GA",FEEDBACK:"FEEDBACK",SPA:"SPA",HIDE_AFTER_FINISH:"HIDE_AFTER_FINISH",CUSTOM_CSS:"CUSTOM_CSS",DELAY:"DELAY",LEAVE_INTENT:"LEAVE_INTENT",PAGE_SCROLL:"PAGE_SCROLL",API_COMMUNICATION:"API_COMMUNICATION",WOOPRA:"WOOPRA",SEGMENT:"SEGMENT",INTERCOM:"INTERCOM"},function(){document.querySelector||(document.querySelector=function(e){var t=document.documentElement.firstChild,s=document.createElement("STYLE");t.appendChild(s),document.__qsResult=[],s.styleSheet.cssText=e+"{x:expression(document.__qsResult.push(this))}",window.scrollBy(0,0),t.removeChild(s);var r=[];for(var n in document.__qsResult)r.push(document.__qsResult[n]);return r}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,s=Number(arguments[1])||0;for(s=0>s?Math.ceil(s):Math.floor(s),0>s&&(s+=t);t>s;s++)if(s in this&&this[s]===e)return s;return-1})}();var _sv=function(e){var t=Array.prototype,s=(Object.prototype,Function.prototype,t.forEach),r=Array.isArray,n=e.each=e.forEach=function(e,t,r){if(null==e)return e;if(s&&e.forEach===s)e.forEach(t,r);else if(e.length===+e.length){for(var n=0,i=e.length;i>n;n++)if(t.call(r,e[n],n,e)===breaker)return}else for(var o=_.keys(e),n=0,i=o.length;i>n;n++)if(t.call(r,e[o[n]],o[n],e)===breaker)return;return e};e.bind=function(e,t){var s=Array.prototype.slice.call(arguments,2);return function(){var r=s.concat(Array.prototype.slice.call(arguments));return e.apply(t,r)}};var i=function(e,t,s){t.addEventListener?t.addEventListener(e,s,!1):t.attachEvent?t.attachEvent("on"+e,s):t[e]=s};e.on=function(t,s,r){if(s)if(e.isArray(s)||e.isNodeList(s))for(var n=0;n<s.length;n+=1)i(t,s[n],r);else i(t,s,r)},e.hasClass=function(e,t){return e.className?e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)")):!1},e.removeClass=function(t,s){if(e.hasClass(t,s)){var r=new RegExp("(\\s|^)"+s+"(\\s|$)");t.className=t.className.replace(r," ")}},e.addClass=function(t,s){e.hasClass(t,s)||(t.className+=" "+s)},e.shuffleArray=function(e){for(var t=e.length-1;t>0;t--){var s=Math.floor(Math.random()*(t+1)),r=e[t];e[t]=e[s],e[s]=r}return e},e.shuffleArrayExceptLast=function(e){for(var t=e.length-2;t>0;t--){var s=Math.floor(Math.random()*(t+1)),r=e[t];e[t]=e[s],e[s]=r}return e};var o=Array.prototype.slice,a=Object.prototype.hasOwnProperty,u=function(e){for(var t=o.call(arguments,1),s=0;s<t.length;s++){var r=t[s];if(r)for(var n in r)e[n]=r[n]}return e},c=function(e){for(var t=o.call(arguments,1),s=0;s<t.length;s++){var r=t[s];if(r)for(var n in r)a.call(e,n)||(e[n]=r[n])}return e},l=new RegExp(/\{(\d+)\}/g),v=function(e){var t=o.call(arguments,1),s=e.replace(l,function(e,s){return+s<t.length?t[+s]:e});return s};e.str=function(e,t){return null===e||void 0===e?(t||"").toString():e.toString()},e.isObject=function(e){return e===Object(e)},e.extend=function(e){return n(o.call(arguments,1),function(t){if(t)for(var s in t)e[s]=t[s]}),e},e.isArray=r||function(e){return"[object Array]"==toString.call(e)},e.isNodeList=function(e){return"number"==typeof e.length&&"function"==typeof e.item?!0:!1},e.clone=function(t){return e.isObject(t)?e.isArray(t)?t.slice():e.extend({},t):t},e.log=function(){e.DEBUG&&console.log.apply(console,Array.prototype.slice.call(arguments))},e.removeUnsetAttributes=function(e){var t={};for(var s in e)e[s]&&(t[s]=e[s]);return t},e.getCSS=function(t){document.querySelectorAll(".surv-theme").length>=2&&setTimeout(function(){document.querySelectorAll(".surv-theme")[0].remove()},5e3);var s=document.createElement("link");s.setAttribute("rel","stylesheet"),s.setAttribute("type","text/css"),s.setAttribute("class","surv-theme"),s.setAttribute("href",e.host+t),"undefined"!=typeof s&&document.getElementsByTagName("head")[0].appendChild(s)},e.getSearchParameters=function(){var e={},t=window.location.search.substr(1);if(!t)return e;for(var s=t.split("&"),r=0;r<s.length;r++){var n=s[r].split("=");e[n[0]]=decodeURIComponent(n[1])}return e};var d=function(e){var t=e||window.event,s=t.keyCode||t.which;s=String.fromCharCode(s);var r=/[0-9]|\./;r.test(s)||(t.returnValue=!1,t.preventDefault&&t.preventDefault())};return e.utils={merge:u,reverseMerge:c,sprintf:v,validateNumbersOnly:d},e}(_sv||{}),_sv=_sv||{};_sv.host="//api.survicate.com",_sv.DEBUG=!1;var _sv=_sv||{};_sv.features={options:[_sv.consts.GA,_sv.consts.LEAVE_INTENT,_sv.consts.SPA,_sv.consts.HIDE_AFTER_FINISH,_sv.consts.CUSTOM_CSS,_sv.consts.DELAY,_sv.consts.FEEDBACK,_sv.consts.PAGE_SCROLL,_sv.consts.API_COMMUNICATION,_sv.consts.WOOPRA,_sv.consts.SEGMENT,_sv.consts.INTERCOM].filter(function(e){return!!e}),enabledList:[],disabledList:[],validate:function(e){_sv.DEBUG&&e.forEach(function(e){_sv.features.options.indexOf(e)<0&&console.error("Feature: ",e,"is not a valid feature. Options:",_sv.features)})},enable:function(e){_sv.features.validate(e),_sv.features.enabledList=e},disable:function(e){_sv.features.validate(e),_sv.features.disabledList=e},isEnabled:function(e){return _sv.features.validate([e]),_sv.features.disabledList.indexOf(e)<0&&_sv.features.enabledList.indexOf(e)>=0}},_sv.features.enable(_sv.features.options),function(e){function t(){return(++r).toString()}if(!window._sv.loaded){var s={},r=-1,n=function(e,t){for(var r=s[e],n=r?r.length:0;n--;)r[n].func(e,t)},i={};e.pubSubReset=function(){_sv.log("pubSubReset"),Object.keys(i).forEach(function(e){var t=i[e];clearTimeout(t.timeout),n(t.publish[0],t.publish[1]),delete i[e]});var t=s.reset,r=s.surveyFinished;s={},s.reset=t,s.surveyFinished=r,e.publish("reset",null,!0)},e.subscribe=function(e,r){_sv.log("PubSub#subscribe",e),s[e]||(s[e]=[]);var n=t();return s[e].push({token:n,func:r}),n},e.publish=function(e,r,o){if(_sv.log("PubSub#publish",e,r),!s[e])return!1;if(o)n(e,r);else{var a=t(),u=setTimeout(function(){i[a]&&(n(e,r),delete i[a])},0);i[a]={publish:[e,r],timeout:u}}return!0},e.unsubscribe=function(e){for(var t in s)if(s[t])for(var r=0,n=s[t].length;n>r;r++)if(s[t][r].token===e)return s[t].splice(r,1),e;return!1}}}(_sv||{}),function(e){if(!window._sv.loaded){var t=[],s=function(){e.DEBUG&&console.log("Timeouts#reset",t),t.forEach(function(e){clearTimeout(e)}),t=[]},r=function(){_sv.subscribe("reset",function(){s(),setTimeout(function(){r()},0)}),_sv.subscribe("setTimeout",function(e,s){t.push(s)})};r()}}(_sv);/*!
 * cookie-monster - a simple cookie library
 * v0.1.0
 * https://github.com/jgallen23/cookie-monster
 * copyright JGA 2013
 * MIT License
*/
var _monster={set:function(e,t,s){var r=new Date,n="",i=null,o=typeof t,a="";if(i=i||"/",s?(r.setTime(r.getTime()+60*s*1e3),n="; expires="+r.toGMTString()):(r.setTime(r.getTime()+63072e6),n="; expires="+r.toGMTString()),"object"===o&&"undefined"!==o){if(!("JSON"in window))throw"Bummer, your browser doesn't support JSON parsing.";a=JSON.stringify({v:t})}else a=escape(t);document.cookie=e+"="+a+n+"; path="+i},get:function(e){for(var t=e+"=",s=document.cookie.split(";"),r="",n="",i={},o=0;o<s.length;o++){for(var a=s[o];" "==a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(t))return r=a.substring(t.length,a.length),n=r.substring(0,1),"{"==n&&(i=JSON.parse(r),"v"in i)?i.v:"undefined"==r?void 0:unescape(r)}return null},remove:function(e){this.set(e,"",-1)},increment:function(e,t){var s=this.get(e)||0;this.set(e,parseInt(s,10)+1,days)},decrement:function(e,t){var s=this.get(e)||0;this.set(e,parseInt(s,10)-1,t)},extend_expire:function(e){this.set(e,this.get(_sv.cprefix+"__svve"),30)}},_sv=function(e){"use strict";if(!e.features.isEnabled(e.consts.API_COMMUNICATION))return e.req=function(){setTimeout(function(){callback&&callback("{}")},0)},e;var t=function(){this.callback&&this.callback(this.request.responseText,this.request.status)},s=function(){4==this.request.readyState&&this.callback&&this.callback(this.request.responseText,this.request.status)},r=function(e){var t,s=[],r=[];for(t in e)Object.hasOwnProperty.call(e,t)&&s.push(t);for(s.sort(),t=0;t<s.length;t++)r.push(encodeURIComponent(s[t])+"="+encodeURIComponent(e[s[t]]));return r.join("&")},n=function(n,i,o,a){var u=new XMLHttpRequest,c={callback:i,request:u};a=a||{},a.tracking_code=e.trackingCode,a.project_id=e.domain_id,"onload"in u?u.onload=e.bind(t,c):u.onreadystatechange=e.bind(s,c),a&&"GET"===o?n=n+"?"+r(a):"PWdHMoBRDgUxBKURtKcbOMJmDYAYyVMM"==e.trackingCode?a.cookies=(_monster.get("__svid")?"__svid="+_monster.get("__svid"):"")+(_monster.get("__svve")?"; __svve="+_monster.get("__svve"):""):a.cookies=document.cookie,u.open(o,n,!0),"setRequestHeader"in u&&u.setRequestHeader("Content-type","application/json;charset=UTF-8;"),a&&"GET"!==o?u.send(JSON.stringify(a)):u.send()},i=function(s,n,i,o){var a,u,c;a=new XDomainRequest,a&&(o=o||{},o.tracking_code=e.trackingCode,o.project_id=e.domain_id,c={callback:n,request:a},"GET"===i?(o.t=Date.now(),s=s+"?"+r(o)):("PWdHMoBRDgUxBKURtKcbOMJmDYAYyVMM"==e.trackingCode?o.cookies=(_monster.get("__svid")?"__svid="+_monster.get("__svid"):"")+(_monster.get("__svve")?"; __svve="+_monster.get("__svve"):""):o.cookies=document.cookie,u=JSON.stringify(o)),a.open(i,s),a.onload=e.bind(t,c),a.onerror=function(){},a.ontimeout=function(){},a.onprogress=function(){},setTimeout(function(){"GET"===i?a.send():a.send(u)},0))};return"withCredentials"in new XMLHttpRequest?e.req=n:"undefined"!=typeof XDomainRequest?e.req=i:e.req=function(){},e}(_sv||{}),_sv=function(e){"use strict";function t(){return _monster.get(e.cprefix+"__svid")}function s(t){return _monster.set(e.cprefix+"__svid",t)}var r=e.req;return e.req=function(n,i,o,a){if(!e.features.isEnabled(e.consts.API_COMMUNICATION))return void setTimeout(function(){i&&i("{}")},0);var u=function(e){var r={};try{r=JSON.parse(e)}catch(n){}if(Object.keys(r).length){var o=r.visitor_id||r[Object.keys(r)[0]].visitor_id;if(o&&o!=t()&&s(o),"function"==typeof i)return i(e)}};r(n,u,o,a)},e}(_sv||{}),_sv=function(e){"use strict";return e.features.isEnabled(e.consts.GA)?(e.ga={initTracking:function(){return e.enabledGA&&"_gaq"in window&&(e.isGA=!0),void(e.enabledUA&&"GoogleAnalyticsObject"in window&&(e.isUA=!0))},initUaTracking:function(){return e.enabledUA=!0,void("GoogleAnalyticsObject"in window&&(e.isUA=!0))},initGaTracking:function(){return e.enabledGA=!0,void("_gaq"in window&&(e.isGA=!0))},push:function(t){if(e.ga.initTracking(),e.tracking_ga&&e.isGA){var s="";e.GAtracker&&(s=e.GAtracker+".",t[0]=s+t[0]),_gaq.push(t)}if(e.tracking_ua&&e.isUA){var r="";e.UAtracker&&(r=e.UAtracker+"."),ga(r+"set","nonInteraction",!0),t.length<4?ga(r+"send","event",t[1],t[2]):ga(r+"send","event",t[1],t[2],t[3])}}},e):(e.ga={initTracking:function(){},initUaTracking:function(){},initGaTracking:function(){},push:function(){}},e)}(_sv||{});window._sv=window._sv||{};var _sv=function(e){"use strict";function t(t,s){e.visitor_id?t.apply(this,s):i.push({method:t,args:s})}function s(){e.visitor_id?(a.timer&&clearTimeout(a.timer),i.forEach(function(e){e.method.apply(this,e.args)}),i=[]):(a.retryCountMax-=1,a.retryCountMax>0&&(a.timer=setTimeout(function(){s()},o)))}function r(t,s){e.req(e.host+"/visitors/"+e.visitor_id,s,"PUT",{tracking_code:e.trackingCode,api_id:e.identity,visitor:t})}function n(e,t){return r({identity_attributes:e},t)}var i=[],o=100,a={timer:null,retryCountMax:100};s();var u={setUser:function(e){return e&&(e.user_id||e.email)?(e.email&&t(r,[{email:e.email}]),e.user_id&&t(n,[{intercom_id:e.user_id}])):console.error("Invalid Intercom user data: missing user_id or email"),null}},c={};return e.api={intercom:u,vero:c},e}(_sv||{}),_sv=function(e){"use strict";return e.drawings={ctx:null,total:null,colors:null,init:function(t,s,r){e.drawings.ctx=t.getContext("2d"),e.drawings.total=s,e.drawings.colors=r;var n=window.devicePixelRatio||1,i=e.drawings.ctx.webkitBackingStorePixelRatio||e.drawings.ctx.mozBackingStorePixelRatio||e.drawings.ctx.msBackingStorePixelRatio||e.drawings.ctx.oBackingStorePixelRatio||e.drawings.ctx.backingStorePixelRatio||1,o=n/i;if(n!==i){var a=t.width,u=t.height;t.width=Math.round(a*o),t.height=Math.round(u*o),t.style.width=a+"px",t.style.height=u+"px",e.drawings.ctx.scale(o,o)}},drawCountdown:function(t){var s=e.drawings.ctx,r=e.drawings.total;s.clearRect(0,0,120,120),s.strokeStyle=e.drawings.colors.bg,s.lineWidth=4,s.beginPath(),s.arc(61,61,47,0,2*Math.PI),s.stroke(),t!=r&&(s.strokeStyle=e.drawings.colors.fg,s.lineWidth=4,s.beginPath(),s.arc(61,61,47,Math.PI/-2,2*Math.PI*(1-t%r/r)+Math.PI/-2,!1),s.stroke()),s.font="30px sans-serif",s.fillStyle=e.drawings.colors.font,s.textAlign="center",s.fillText(t,60,72)}},e}(_sv||{}),_sv=function(e){"use strict";return e.overlay={initialized:!1,shown:!1,close_engaged:!0,init:function(t,s){if(!e.overlay.initialized){var r=document.createElement("div"),n=[];n.push("survicate-overlay"),n.push("surv-"+t),n.push("surv-hidden"),r.className=n.join(" "),r.id="survicate-overlay",document.body.appendChild(r),e.on("click",document.querySelector(".survicate-overlay"),function(t){e.overlay.hide()}),e.overlay.initialized=!0,e.overlay.close_engaged=s}},show:function(){if(e.overlay.initialized&&!e.overlay.shown){var t=document.querySelector(".survicate-overlay");e.hasClass(t,"surv-hidden")&&e.removeClass(t,"surv-hidden"),e.overlay.shown=!0}},hide:function(){if(e.overlay.initialized&&e.overlay.shown){var t=document.querySelector(".survicate-overlay");e.hasClass(t,"surv-hidden")||e.addClass(t,"surv-hidden")}},hideEngaged:function(){e.overlay.close_engaged&&e.overlay.hide()}},e}(_sv||{}),_sv=function(e){"use strict";return e.intercom={initialized:!1,init:function(){e.features.isEnabled(e.consts.INTERCOM)&&(e.intercom.initialized||(e.intercom.initialized=!0))},destroy:function(){e.intercom.initialized&&(e.intercom.show(),e.intercom.initialized=!1)},show:function(){if(e.intercom.initialized){var t=document.getElementById("intercom-container");t.style?t.style.display="block":t.styleSheet.display="block"}},hide:function(){if(e.intercom.initialized)var t=0,s=setInterval(function(){"undefined"!=typeof Intercom?(Intercom("hide"),clearInterval(s)):20===++t&&clearInterval(s)},200)}},e}(_sv||{});!function(e){"use strict";e.integrations={fetchFullstory:function(){var e;try{e=FS.getCurrentSessionURL()}catch(t){}return e},fetchSessioncam:function(){var e;try{e=window.sessionCamRecorder.sessionId()}catch(t){}return e}}}(_sv||{});var _sv=function(e){"use strict";return e.features.isEnabled(e.consts.FEEDBACK)?(e.feedback={init:function(t){if(!(t.hide_mobile&&e.mobile||document.querySelector("#survicate-feedback"))){var s=document.createElement("style");s.type="text/css",s.appendChild(document.createTextNode(t.css)),document.head.appendChild(s);var r=document.createElement("section"),n=[];n.push("survicate-feedback"),n.push("right"==t.position?"survi_right":"survi_left"),r.className=n.join(" "),r.id="survicate-feedback";var i=[];if(i.push('<div class="survi_expand-collapse"><div class="survi_rotate">'),i.push('<span class="survi_icon"><svg width="20" height="20" xmlns="http://www.w3.org/2000/svg"><path stroke="null" id="svg_1" d="m1.141784,2.431373c5.830412,0 11.660533,-0.000292 17.490654,0c0.000583,4.068753 0.000292,8.137507 0.000292,12.20626c-3.066505,0.000583 -6.132719,-0.000292 -9.199225,0.000583c-1.454688,1.183282 -2.907918,2.368605 -4.363189,3.551013c-0.000292,-1.183574 0.000292,-2.367439 -0.000583,-3.551304c-1.309219,-0.000292 -2.61873,0.000292 -3.92824,-0.000292c0.000292,-4.068753 -0.000583,-8.137507 0.000292,-12.20626m2.683447,4.215388c-0.000875,0.364109 -0.000292,0.72851 -0.000292,1.092911c4.027066,0.000292 8.054132,-0.000292 12.081198,0.000292c0.002041,-0.364109 0,-0.72851 0.001166,-1.092619c-4.027357,-0.001458 -8.054715,-0.000292 -12.082072,-0.000583m0,2.679075c-0.000583,0.364401 -0.000583,0.728802 0,1.093202c4.027066,-0.000292 8.054423,0.000292 12.081781,-0.000292c0,-0.364109 -0.000292,-0.728219 0,-1.092036c-4.027357,-0.002041 -8.054423,-0.000292 -12.081781,-0.000875z"/></svg></span>'),i.push('<span class="survi_teaser">'+(t.teaser_text||"Feedback")+"</span>"),i.push("</div></div>"),i.push('<div class="survi_feedback-close"><svg width="20" height="20" xmlns="http://www.w3.org/2000/svg"><path d="m2.670447,1.08493c0.270544,-0.312756 0.755988,-0.253275 1.007344,0.051806c2.081845,2.039633 4.14834,4.096534 6.226348,6.143842c1.81322,-1.794033 3.624521,-3.589984 5.437741,-5.384016c0.35305,-0.341538 0.669644,-0.734882 1.093688,-0.995832c0.481607,-0.166931 0.805876,0.301244 1.112876,0.581382c0.479688,0.535332 1.053394,0.984319 1.485114,1.559945c0.2149,0.331944 -0.026863,0.696507 -0.274381,0.924838c-2.051145,2.022364 -4.100372,4.050484 -6.149598,6.076685c2.04347,2.054983 4.090778,4.109965 6.138086,6.161111c0.2763,0.236006 0.516144,0.6754 0.220656,0.995832c-0.604407,0.677319 -1.256782,1.316263 -1.916833,1.937939c-0.274381,0.274381 -0.711857,0.165013 -0.942107,-0.105531c-2.07417,-2.066495 -4.134909,-4.150259 -6.205242,-6.220592c-2.033876,2.041551 -4.069672,4.081184 -6.097792,6.128492c-0.232169,0.247519 -0.594813,0.508469 -0.934432,0.283975c-0.575625,-0.439394 -1.028451,-1.018857 -1.563782,-1.504301c-0.270544,-0.305081 -0.732963,-0.619757 -0.577544,-1.09177c0.232169,-0.393344 0.594813,-0.684994 0.909488,-1.009263c1.853514,-1.855433 3.70319,-3.712784 5.552866,-5.570135c-2.051145,-2.026201 -4.098453,-4.054322 -6.149598,-6.076685c-0.301244,-0.2456 -0.519982,-0.713775 -0.197631,-1.036126c0.581382,-0.640863 1.201138,-1.251026 1.824733,-1.851595z"/></svg></div>'),i.push('<div class="survi_feedback-border"></div><div class="survi_feedback-form">'),t.hide_logo||i.push('<a href="http://survicate.com/" target="_blank"><div class="survi-logo"></div></a>'),i.push("<h2>"),i.push(t.intro_text||""),i.push("</h2>"),t.category){i.push('<select class="survi_input in-category'+(t.req_category?" required":"")+'">'),i.push('<option value="">'+(t.category_text||"Choose category")+"</option>");for(var o=t.category.split(";"),a=0;a<o.length;++a)i.push('<option value="'+o[a]+'">'+o[a]+"</option>");i.push("</select>")}i.push('<div class="surv-input-container">'),i.push('<label for="surv-feedback-name">'+(t.name_text||"Name")+"</label>"),i.push('<input id="surv-feedback-name" class="survi_input in-name'+(t.req_name?" required":"")+'" type="text" placeholder="'+(t.name_text||"Name")+'"/>'),i.push("</div>"),i.push('<div class="surv-input-container">'),i.push('<label for="surv-feedback-email">'+(t.email_text||"Email")+"</label>"),i.push('<input id="surv-feedback-email" class="survi_input in-email'+(t.req_email?" required":"")+'" type="text" placeholder="'+(t.email_text||"Email")+'"/>'),i.push("</div>"),i.push('<div class="surv-input-container">'),i.push('<label for="surv-feedback-msg">'+(t.message_text||"Message")+"</label>"),i.push('<textarea id="surv-feedback-msg" class="survi_input in-msg'+(t.req_msg?" required":"")+'" placeholder="'+(t.message_text||"Message")+'"></textarea>'),i.push("</div>"),i.push('<input type="submit" class="survi_submit" value="'),i.push(t.submit_text||"Submit"),i.push('"/>'),i.push('</div><div class="survi_feedback-thankyou">'),t.hide_logo||i.push('<a href="http://survicate.com/" target="_blank"><div class="survi-logo"></div></a>'),i.push("<h2>"),i.push(t.thankyou_text||"Thank You"),i.push("</h2></div>"),r.innerHTML=i.join(""),document.body.appendChild(r);var u=document.createElement("div");u.id="feedback-overlay",document.body.appendChild(u),this.styleWidget(t),this.bind()}},styleWidget:function(e){e.widget_border?(document.querySelector("#survicate-feedback .survi_feedback-border").style.boxShadow="0 0 25px "+e.widget_border,document.querySelector("#survicate-feedback .survi_feedback-border").style.MozBoxShadow="0 0 25px "+e.widget_border,document.querySelector("#survicate-feedback .survi_feedback-border").style.WebkitBoxShadow="0 0 25px "+e.widget_border,document.querySelector("#survicate-feedback .survi_expand-collapse").style.boxShadow="0 0 25px "+e.widget_border,document.querySelector("#survicate-feedback .survi_expand-collapse").style.MozBoxShadow="0 0 25px "+e.widget_border,document.querySelector("#survicate-feedback .survi_expand-collapse").style.WebkitBoxShadow="0 0 25px "+e.widget_border,document.querySelector("#survicate-feedback .survi_feedback-close").style.boxShadow="0 0 25px "+e.widget_border,document.querySelector("#survicate-feedback .survi_feedback-close").style.MozBoxShadow="0 0 25px "+e.widget_border,document.querySelector("#survicate-feedback .survi_feedback-close").style.WebkitBoxShadow="0 0 25px "+e.widget_border):(document.querySelector("#survicate-feedback .survi_feedback-border").style.boxShadow="0 0 25px #aaaaaa",document.querySelector("#survicate-feedback .survi_feedback-border").style.MozBoxShadow="0 0 25px #aaaaaa",document.querySelector("#survicate-feedback .survi_feedback-border").style.WebkitBoxShadow="0 0 25px #aaaaaa",document.querySelector("#survicate-feedback .survi_expand-collapse").style.boxShadow="0 0 25px #aaaaaa",document.querySelector("#survicate-feedback .survi_expand-collapse").style.MozBoxShadow="0 0 25px #aaaaaa",document.querySelector("#survicate-feedback .survi_expand-collapse").style.WebkitBoxShadow="0 0 25px #aaaaaa",document.querySelector("#survicate-feedback .survi_feedback-close").style.boxShadow="0 0 25px #aaaaaa",document.querySelector("#survicate-feedback .survi_feedback-close").style.MozBoxShadow="0 0 25px #aaaaaa",document.querySelector("#survicate-feedback .survi_feedback-close").style.WebkitBoxShadow="0 0 25px #aaaaaa"),document.querySelector("#survicate-feedback .survi_expand-collapse .survi_rotate").style.backgroundColor=e.teaser_bg||"#f0c40f",document.querySelector("#survicate-feedback .survi_expand-collapse .survi_rotate").style.color=e.teaser_font||"#29292a",document.querySelector("#survicate-feedback .survi_expand-collapse path").style.fill=e.teaser_font||"#29292a",document.querySelector("#survicate-feedback .survi_feedback-close").style.backgroundColor=e.teaser_bg||"#f0c40f",document.querySelector("#survicate-feedback .survi_feedback-close path").style.fill=e.teaser_font||"#29292a",document.querySelector("#survicate-feedback .survi_feedback-form").style.backgroundColor=e.widget_bg||"#ecf0f1",document.querySelector("#survicate-feedback .survi_feedback-thankyou").style.backgroundColor=e.widget_bg||"#ecf0f1",document.querySelector("#survicate-feedback .survi_feedback-form").style.color=e.widget_font||"#29292a",document.querySelector("#survicate-feedback .survi_feedback-thankyou").style.color=e.widget_font||"#29292a",document.querySelector("#survicate-feedback .survi_submit").style.backgroundColor=e.teaser_bg||"#f0c40f",document.querySelector("#survicate-feedback .survi_submit").style.color=e.teaser_font||"#29292a";for(var t=document.querySelectorAll("#survicate-feedback .survi_input"),s=0,r=t.length;r>s;s++)t[s].style.borderColor=e.teaser_bg||"#f0c40f"},bind:function(){var t=document.querySelector("#survicate-feedback");e.on("click",t.querySelectorAll(".survi_feedback-close"),this.toggleFeedback),e.on("click",t.querySelectorAll(".survi_expand-collapse"),this.toggleFeedback),e.on("click",t.querySelectorAll(".survi_submit"),this.submit),e.on("click",document.querySelector("#feedback-overlay"),this.toggleFeedback),e.on("keydown",document.querySelectorAll("#survicate-feedback .survi_input"),function(t){27==t.keyCode&&e.feedback.toggleFeedback()}),e.on("input",document.querySelectorAll("#survicate-feedback .survi_input"),function(t){t.target.value?e.addClass(t.target.parentNode,"surv-filled"):e.removeClass(t.target.parentNode,"surv-filled")}),e.on("focus",document.querySelectorAll("#survicate-feedback .survi_input"),function(t){e.addClass(t.target.parentNode,"surv-focused")}),e.on("blur",document.querySelectorAll("#survicate-feedback .survi_input"),function(t){e.removeClass(t.target.parentNode,"surv-focused")})},toggleFeedback:function(){var e=document.querySelector("#survicate-feedback .survi_feedback-form"),t=document.querySelector("#survicate-feedback .survi_expand-collapse"),s=document.querySelector("#survicate-feedback .survi_feedback-close"),r=document.querySelector("#feedback-overlay");-1==e.className.indexOf("survi_visible")?(t.classList.add("survi_hidden"),e.classList.add("survi_visible"),s.classList.add("survi_visible"),r.classList.add("survi_visible"),document.getElementById("surv-feedback-name").focus()):(e.classList.remove("survi_visible"),s.classList.remove("survi_visible"),r.classList.remove("survi_visible"),t.classList.remove("survi_hidden"))},submit:function(){var t=null;if(document.querySelector("#survicate-feedback .in-category")){if(-1!=document.querySelector("#survicate-feedback .in-category").className.indexOf("required")&&""==document.querySelector("#survicate-feedback .in-category").value)return void document.querySelector("#survicate-feedback .in-category").classList.add("error");document.querySelector("#survicate-feedback .in-category").classList.remove("error"),t=document.querySelector("#survicate-feedback .in-category").value}if(-1!=document.querySelector("#survicate-feedback .in-name").className.indexOf("required")){var s=document.querySelector("#survicate-feedback .in-name").value;if(""==s)return void document.querySelector("#survicate-feedback .in-name").classList.add("error")}if(document.querySelector("#survicate-feedback .in-name").classList.remove("error"),-1!=document.querySelector("#survicate-feedback .in-email").className.indexOf("required")){var r=document.querySelector("#survicate-feedback .in-email").value;if(""==r)return void document.querySelector("#survicate-feedback .in-email").classList.add("error");var n=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(!n.test(r))return void document.querySelector("#survicate-feedback .in-email").classList.add("error")}if(document.querySelector("#survicate-feedback .in-email").classList.remove("error"),-1!=document.querySelector("#survicate-feedback .in-msg").className.indexOf("required")){var i=document.querySelector("#survicate-feedback .in-msg").value;if(""==i)return void document.querySelector("#survicate-feedback .in-msg").classList.add("error")}document.querySelector("#survicate-feedback .in-msg").classList.remove("error"),e.req(e.host+"/visitors/send_feedback",e.feedback.postSubmit,"POST",{tracking_code:e.trackingCode,name:document.querySelector("#survicate-feedback .in-name").value,email:document.querySelector("#survicate-feedback .in-email").value,message:document.querySelector("#survicate-feedback .in-msg").value,category:t,url:document.location.toString(),browser:window.navigator.userAgent,os:window.navigator.platform})},postSubmit:function(){var t=document.querySelector("#survicate-feedback .survi_feedback-form"),s=document.querySelector("#survicate-feedback .survi_feedback-close"),r=document.querySelector("#feedback-overlay");t.classList.remove("survi_visible"),s.classList.remove("survi_visible"),r.classList.remove("survi_visible"),document.querySelector("#survicate-feedback .in-name").value="",document.querySelector("#survicate-feedback .in-email").value="",document.querySelector("#survicate-feedback .in-msg").value="";var t=document.querySelector("#survicate-feedback .survi_feedback-thankyou");t.classList.add("survi_visible"),e.publish("setTimeout",setTimeout(function(){var e=document.querySelector("#survicate-feedback .survi_feedback-thankyou");e.classList.remove("survi_visible")},3e3))}},e):(e.feedback=function(){},e)}(_sv||{});_sv=_sv||{},_sv.leaveIntent=function(e){var t=document.getElementsByTagName("html")[0],s=function(){var e=document.querySelector(".survicate-widget");e&&e.style?e.style.display="block":e&&(e.styleSheet.display="block"),_sv.overlay.show(),_sv.intercom.hide()};_sv.features.isEnabled(_sv.consts.LEAVE_INTENT)?t.addEventListener("mouseleave",function(e){e.clientY>20||s()}):s()};var _sv=_sv||{};_sv.pageScrollEvent=function(){var e=function(){var e=document.querySelector(".survicate-widget");e&&(e.style?e.style.display="block":e.styleSheet.display="block",_sv.overlay.show(),_sv.intercom.hide())};if(!_sv.features.isEnabled(_sv.consts.PAGE_SCROLL))return void e();var t=0;"number"==typeof window.innerWidth?t=window.innerHeight:document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?t=document.documentElement.clientHeight:document.body&&(document.body.clientWidth||document.body.clientHeight)&&(t=document.body.clientHeight);var s=0;s="undefined"!=typeof document.height?document.height:Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight);var r=0;"number"==typeof window.pageYOffset?r=window.pageYOffset:document.body&&(document.body.scrollLeft||document.body.scrollTop)?r=document.body.scrollTop:document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)&&(r=document.documentElement.scrollTop),s>t&&(scrollPercent=100*r/(s-t),scrollPercent<window.pageScrollPercent)||e()},_sv.pageScroll=function(e){_sv.features.isEnabled(_sv.consts.PAGE_SCROLL)&&(window.pageScrollPercent=e,window.attachEvent?window.attachEvent("onscroll",_sv.pageScrollEvent):window.addEventListener("scroll",_sv.pageScrollEvent,!1)),_sv.pageScrollEvent()};var _sv=function(e){"use strict";return e.spa={closeOnChange:!1,actualPage:!1,init:function(){e.features.isEnabled(e.consts.SPA)&&(e.spa.actualPage=window.location.href,e.publish("setInterval",setInterval(e.spa.checkStatus,1e3)))},checkStatus:function(){window.location.href!=e.spa.actualPage&&(e.spa.actualPage=window.location.href,e.spa.closeOnChange&&(e.spa.closeOnChange=!1,e.survey&&(e.survey.closed(),e.survey=null)),e.survey||e.app.getSurvey())}},e}(_sv||{}),_sv=_sv||{};_sv.Widget=function(){this.toggleSurvicate=function(){var e=document.querySelector(".survicate-widget");_sv.hasClass(e,"surv-hidden")?(_sv.removeClass(e,"surv-hidden"),_sv.seen!==!0&&(_sv.ga.push(["_trackEvent","Survicate - "+_sv.survey.name,"Seen",_sv.survey.name]),_sv.seen=!0),_sv.ga.push(["_trackEvent","Survicate - "+_sv.survey.name,"Maximized",_sv.survey.name])):(_sv.publish("minimalized"),_sv.addClass(e,"surv-hidden"),_sv.ga.push(["_trackEvent","Survicate - "+_sv.survey.name,"Minimized",_sv.survey.name]))},this.closeSurvicate=function(){var e=_sv.survey.name;_sv.publish("closed");var t=this;do t=t.parentElement;while(-1==t.className.indexOf("survicate-widget"));return _sv.ga.push(["_trackEvent","Survicate - "+e,"Closed",e]),!0},this.render=function(e){if("ChatSurvey"==e.survey.type&&"intercom"==e.survey.provider)return this.renderIntercom(e);var t=(document.body,document.createElement("div")),s=e.survey.run_minimalized,r=[];r.push("survicate-widget"),_sv.mobile&&(s=e.survey.run_minimalized_mobile,r.push("surv-mobile")),r.push(s?"surv-hidden":"surv-visible"),t.className=r.join(" "),t.id="survicate-box";var n=[];n.push('<div class="surv-window">'),e.survey.show_progress_bar&&(n.push('<div class="surv-progress-bg"></div>'),n.push('<div class="surv-progress"></div>')),"top"==e.survey.close_icon&&(e.survey.show_close&&n.push('<span title="Close" class="surv-close">X</span>'),e.survey.show_minimize&&n.push('<span title="Minimize" class="surv-minimize">&mdash;</span>')),n.push('<div class="surv-body">'),n.push("</div>"),n.push('<div class="surv-footer">'),"top"!=e.survey.close_icon&&(e.survey.show_close&&n.push('<span title="Close" class="surv-close">X</span>'),e.survey.show_minimize&&n.push('<span title="Minimize" class="surv-minimize">&mdash;</span>')),e.survey.show_subfooter&&(_sv.affiliate?n.push('<a href="'+_sv.affiliate.ref_url+"&utm_source=widget&utm_medium=footer&utm_content="+window.location.hostname+'" target="_blank" title="Survicate">Powered by Survicate</a>'):n.push('<a href="https://survicate.com/?utm_source=widget&utm_medium=footer&utm_content='+window.location.hostname+'" target="_blank" title="Survicate">Powered by Survicate</a>')),n.push("</div>"),n.push("</div>"),n.push('<div class="surv-closed">'),n.push('<span title="Show feedback" class="surv-maximize surv-toggle">Please answer our short survey.</span><span class="surv-maxbtn">+</span>'),n.push("</div>"),t.style?t.style.display="none":t.styleSheet.display="none",s!==!0&&(_sv.ga.push(["_trackEvent","Survicate - "+e.survey.name,"Seen",e.survey.name]),_sv.seen=!0),t.innerHTML=n.join(""),document.body.appendChild(t),this.renderCss(e.survey.css),e.survey.overlay&&_sv.overlay.init(e.survey.overlay,e.survey.overlay_close_engaged),this.bind()},this.renderIntercom=function(e){var t=(document.body,document.createElement("div")),s=!1,r=[];r.push("survicate-widget"),_sv.mobile&&r.push("surv-mobile"),r.push(s?"surv-hidden":"surv-visible"),t.className=r.join(" "),t.id="survicate-box";var n=[];n.push('<div class="surv-window">'),n.push('<div class="surv-header">'),n.push('<img src="'+(e.survey.avatar_url||"//assets.survicate.com/images/avatar.svg")+'" />'),n.push('<div class="surv-info"><p class="surv-author"><strong>'+e.survey.avatar_name+"</strong> "+e.survey.avatar_company+'</p><p class="surv-action">'+(e.survey.avatar_description||"Sent you a survey")+"</p></div>"),n.push("</div>"),n.push('<div class="surv-body">'),n.push("</div>"),n.push('<div class="surv-footer">'),e.survey.show_subfooter&&(_sv.affiliate?n.push('<a href="'+_sv.affiliate.ref_url+"&utm_source=widget&utm_medium=footer&utm_content="+window.location.hostname+'" target="_blank" title="Survicate">Powered by Survicate</a>'):n.push('<a href="https://survicate.com/?utm_source=widget&utm_medium=footer&utm_content='+window.location.hostname+'" target="_blank" title="Survicate">Powered by Survicate</a>')),n.push("</div>"),n.push("</div>"),n.push('<div class="surv-closed">'),n.push('<span title="Show feedback" class="surv-maximize surv-toggle">Please answer our short survey.</span><span class="surv-maxbtn">+</span>'),n.push("</div>"),e.survey.show_close&&n.push('<span title="Close" class="surv-close"><svg viewbox="0 0 40 40"><path style="stroke: white; fill: transparent; stroke-width: 1.5;" d="M 15,15 L 25,25 M 25,15 L 15,25" /></svg></span>'),e.survey.show_minimize&&n.push('<span title="Minimize" class="surv-minimize">&mdash;</span>'),t.style?t.style.display="none":t.styleSheet.display="none",s!==!0&&(_sv.ga.push(["_trackEvent","Survicate - "+e.survey.name,"Seen",e.survey.name]),_sv.seen=!0),t.innerHTML=n.join(""),document.body.appendChild(t),this.renderCss(e.survey.css),e.survey.overlay&&_sv.overlay.init(e.survey.overlay,e.survey.overlay_close_engaged),this.bind()},this.renderCss=function(e){var t=document.createElement("style");t.type="text/css",t.appendChild(document.createTextNode(e)),document.head.appendChild(t)},this.bind=function(){var e=this,t=document.querySelector(".survicate-widget");_sv.on("click",t.querySelectorAll(".surv-closed"),e.toggleSurvicate),_sv.on("click",t.querySelectorAll(".surv-close"),e.closeSurvicate),_sv.on("click",t.querySelectorAll(".surv-minimize"),e.toggleSurvicate)}},function(e){var t=function(e){_sv.pubSubReset(),_sv.disableFeatures&&_sv.features.disable(_sv.disableFeatures),_sv.app.survey&&_sv.app.survey.closed(),"ChatSurvey"==e.type&&"intercom"==e.provider?_sv.intercom.init():_sv.intercom.destroy();var t=new _sv.Widget;t.render({survey:e}),_sv.survey=new _sv.Survey(e),_sv.survey.render()};e.renderSurvey=function(s){e.setTimeout(function(){t(s)})}}(window),function(){!function(e){var t,s;return s={form:"form",question:"question",cta:"cta",nps:"nps"},_sv.Survey=t=function(){function e(e){_sv.extend(this,e),this.renderedPoints=[],this.$el=document.querySelector(".survicate-widget"),this.json={survey_id:this.id,tracking_code:_sv.trackingCode,visit_id:_sv.visit_id},_sv.subscribe("pointSubmit",function(e){return function(){return e.nextPoint(),_sv.overlay.hideEngaged()}}(this)),(_sv.tracking_ga=this.push_to_ga)&&(_sv.ga.initGaTracking(!1),this.ga_tracker&&(_sv.GAtracker=this.ga_tracker)),(_sv.tracking_ua=this.push_to_ua)&&(_sv.ga.initUaTracking(!1),this.ua_tracker&&(_sv.UAtracker=this.ua_tracker)),this.initPoints(),_sv.log("START SURVEY",this)}return e.prototype.pointTypes=s,e.prototype.initPoints=function(){var e;return e=[],_sv.each(this.points,function(t){return function(s){var r;switch(r=_sv.clone(s),s.target_type){case t.pointTypes.form:return e.push(new _sv.SurveyForm(r,t));case t.pointTypes.question:return e.push(new _sv.SurveyQuestion(r,t));case t.pointTypes.cta:return e.push(new _sv.SurveyCta(r,t));case t.pointTypes.nps:return e.push(new _sv.SurveyNps(r,t));default:return _sv.log("Missing: "+s.target_type)}}}(this)),this.points=e},e.prototype.bindMainEvents=function(){return _sv.subscribe("minimalized",function(e){return function(){return e.minimalized(),e.currentPoint.minimalized(),e.setClosedHeight(),_sv.overlay.hide()}}(this)),_sv.subscribe("closed",function(e){return function(){return e.closed(),e.currentPoint.closed(),_sv.overlay.hide()}}(this)),_sv.subscribe("pointFailure",function(e){return function(){return _sv.log("POINT FAILURE"),_sv.publish("closed"),_sv.overlay.hide()}}(this)),_sv.spa.closeOnChange=this.close_on_urlchange},e.prototype.calculateDelay=function(){return _sv.features.isEnabled(_sv.consts.DELAY)?1e3*parseInt(this.display_delay,10):0},e.prototype.render=function(){var e;if(_sv.publish("SurveyRender",this),0!==this.points.length){if(_sv.features.isEnabled(_sv.consts.API_COMMUNICATION)){if(!this.activated)return void _sv.message.show(this.disabled_text||"Survey unavailable");if(this.engaged)return void _sv.message.show(this.thankyou_text||"Thank you")}return _sv.addClass(this.$el,"surv-"+this.place_to_show),e=this.$el.querySelector(".surv-maximize"),e.setAttribute("title",this.tooltip||"Please answer our short survey."),e.innerHTML=this.tooltip||"Please answer our short survey.",this.show_progress_bar&&this.setMaxPaths(),this.bindMainEvents(),this.display(),this.renderPoint()}},e.prototype.renderPoint=function(e){return e||(e=this.points[0]),this.currentPoint=e,this.counter||(this.counter=0),this.currentPoint.beforeRender(),this.currentPoint.render(),this.renderedPoints.push(this.currentPoint.id),this.show_progress_bar?(this.counter+=1,this.currentPoint.setProgress(100*this.counter/(this.currentPoint.maxPath+this.counter))):void 0},e.prototype.getNextPoint=function(e,t){var s,r,n,i,o,a,u;if(null==t&&(t=this.currentPoint),e){for(a=this.points,r=0,i=a.length;i>r;r++)if(o=a[r],o.id===e&&-1===this.renderedPoints.indexOf(o.id))return o}else for(s=n=0,u=this.points.length-1;u>=0?u>=n:n>=u;s=u>=0?++n:--n)if(this.points[s].id===t.id&&s+1<this.points.length&&-1===this.renderedPoints.indexOf(this.points[s+1].id))return this.points[s+1];return null},e.prototype.setMaxPaths=function(){return this.points[0].getMaxPath()},e.prototype.nextSurvey=function(){return _sv.overlay.hide(),this.closed(),_sv.publish("setTimeout",setTimeout(function(e){return function(){return _sv.app.getSurvey()}}(this),0))},e.prototype.nextPoint=function(e){var t;return this.currentPoint.target_type===this.pointTypes.cta&&"button_next"!==this.currentPoint.answer_type&&"cookie"!==this.currentPoint.answer_type?(this.currentPoint.save({finished:!0},function(e){return function(){return e.nextSurvey()}}(this)),_sv.publish("surveyFinished")):(t=this.getNextPoint(this.currentPoint.nextPointId()),t?(this.currentPoint.save(),this.renderPoint(t)):(this.currentPoint.save({
finished:!0},function(e){return function(){return e.nextSurvey()}}(this)),_sv.publish("surveyFinished")))},e.prototype.display=function(){return"leaveintent"===this.appear_method?void _sv.leaveIntent(this.$el):"scroll"===this.appear_method?void _sv.pageScroll(this.display_scroll):_sv.publish("setTimeout",setTimeout(function(e){return function(){return _sv.overlay.show(),_sv.intercom.hide(),e.$el.style?e.$el.style.display="block":e.$el.styleSheet.display="block"}}(this),this.calculateDelay()))},e.prototype.minimalized=function(){var e;return e={id:this.id},e.minimalized=-1===this.$el.className.indexOf("visible"),_monster.set("_svsettings",{surveys:e})},e.prototype.closed=function(){var e,t;return _sv.intercom.show(),e=this.$el.parentNode,e?e.removeChild(this.$el):null!=(t=this.$el)&&"function"==typeof t.remove?t.remove():void 0},e.prototype.socialSubmit=function(){return this.currentPoint.socialSubmit()},e.prototype.isMobile=function(){return _sv.mobile},e.prototype.getType=function(){return this.type},e.prototype.setClosedHeight=function(){},e}()}(_sv||{})}.call(this),function(){!function(e){var t;return _sv.SurveyPoint=t=function(){function e(e,t){_sv.extend(this,e),this.$nodeWindow=document.querySelector(".surv-window"),this.$body=document.querySelector(".surv-body"),this.survey=t,this.json=this.survey.json,this.responses=[]}return e.prototype.beforeRender=function(){return _sv.subscribe("pointRendered",function(e){return function(){return e.afterRenderBindings()}}(this))},e.prototype.setContent=function(e){return this.$body.innerHTML=e,_sv.publish("setTimeout",setTimeout(function(){return _sv.publish("pointRendered")},0))},e.prototype.appendContent=function(e){var t;return t=document.createElement("div"),t.innerHTML=e,this.$body.appendChild(t),_sv.on("click",this.survey.$el.querySelector(".surv-submit"),function(e){return function(t){return e.onSubmitClick(t)}}(this))},e.prototype.cancelEvent=function(e){return e.preventDefault()},e.prototype.afterRenderBindings=function(){return _sv.on("click",this.survey.$el.querySelectorAll(".surv-radio"),function(e){return function(t){return e.onRadioClick(t)}}(this)),_sv.on("click",this.survey.$el.querySelectorAll(".surv-checkbox"),function(e){return function(t){return e.onCheckboxClick(t)}}(this)),_sv.on("click",this.survey.$el.querySelectorAll(".surv-form-checkbox"),function(e){return function(t){return e.onCheckboxClick(t)}}(this)),_sv.on("click",this.survey.$el.querySelectorAll(".surv-number-list"),function(e){return function(t){return e.onNumberClick(t)}}(this)),_sv.on("click",this.survey.$el.querySelectorAll(".surv-smiley"),function(e){return function(t){return e.onSmileyClick(t)}}(this)),_sv.on("click",this.survey.$el.querySelector(".surv-submit"),function(e){return function(t){return e.onSubmitClick(t)}}(this)),_sv.on("change",this.survey.$el.querySelector(".surv-inputSlider"),function(e){return function(t){return e.onInputRangeChange(t)}}(this)),_sv.on("touchend",this.survey.$el.querySelector(".surv-inputSlider"),function(e){return function(t){return e.onInputRangeChange(t)}}(this)),_sv.on("change",this.survey.$el.querySelector(".surv-inputSliderValue"),function(e){return function(t){return e.onInputNumberChange(t)}}(this)),_sv.on("keyup",this.survey.$el.querySelector(".surv-inputSliderValue"),function(e){return function(t){return e.onInputNumberChange(t)}}(this)),_sv.on("resize",window,function(e){return function(t){return e.setAlignerHeight(t),e.survey.setClosedHeight()}}(this)),this.setAlignerHeight(),this.survey.setClosedHeight()},e.prototype.setAlignerHeight=function(){var e,t,s,r,n,i,o;if(e=document.getElementById("survicate-box")){if(n=e.getElementsByClassName("surv-aligner-box")[0],o=window.innerHeight,i=e.getElementsByClassName("surv-window")[0],s=e.getElementsByClassName("surv-hgroup")[0].offsetHeight,t=e.getElementsByClassName("surv-footer")[0].offsetHeight,r=document.getElementById("survicate-header"),this.survey.isMobile())return"PageSurvey"===this.survey.getType()&&(window.onload=function(){var e;return r&&(e=r.offsetHeight),i.style.maxHeight=o-40-t-(e||0)+"px"}),n.style.maxHeight=o-(s||0)-20-t+"px";if("PageSurvey"===this.survey.getType())return window.onload=function(){var e;return r&&(e=r.offsetHeight),i.style.maxHeight=o-40-t-(e||0)+"px"}}},e.prototype.setProgress=function(e){var t;return t=document.querySelector(".surv-progress"),t?t.style.width=e+"%":void 0},e.prototype.onNumberClick=function(e){return e.stopImmediatePropagation(),_sv.addClass(e.currentTarget,"surv-selected"),_sv.publish("pointSubmit")},e.prototype.onSmileyClick=function(e){return e.stopImmediatePropagation(),_sv.addClass(e.currentTarget,"surv-selected"),_sv.publish("pointSubmit")},e.prototype.onRadioClick=function(e){var t,s,r,n,i;if(e.stopImmediatePropagation(),i=e.currentTarget,!_sv.hasClass(e.target,"surv-smallarea")&&!_sv.hasClass(i,"surv-readonly")){for(n=this.survey.$el.querySelectorAll(".surv-radio"),t=0,s=n.length;s>t;t++)r=n[t],_sv.removeClass(r,"surv-selected");if(_sv.addClass(i,"surv-selected"),i.querySelector(".surv-smallarea")){if(i.querySelector(".surv-smallarea").focus(),!this.survey.$el.querySelector(".surv-submit"))return this.appendContent(this.html.submit(this.survey.submit_text))}else if(!this.survey.$el.querySelector(".surv-submit"))return _sv.publish("pointSubmit")}},e.prototype.onCheckboxClick=function(e){var t,s;return e.stopImmediatePropagation(),s=e.currentTarget,_sv.hasClass(e.target,"surv-smallarea")?void 0:_sv.hasClass(e.target,"surv-excerpt")?(_sv.addClass(e.target,"surv-hidden"),void _sv.addClass(s.querySelector(".surv-fulllabel"),"surv-show")):_sv.hasClass(s,"surv-readonly")?void 0:_sv.hasClass(s,"surv-selected")?_sv.removeClass(s,"surv-selected"):(_sv.addClass(s,"surv-selected"),null!=(t=s.querySelector(".surv-smallarea"))?t.focus():void 0)},e.prototype.onSubmitClick=function(e){return e.stopImmediatePropagation(),_sv.publish("pointSubmit")},e.prototype.onInputRangeChange=function(e){return this.survey.$el.querySelector(".surv-inputSliderValue").value=e.target.value||0},e.prototype.onInputNumberChange=function(e){return this.survey.$el.querySelector(".surv-inputSlider").value=e.target.value||0},e.prototype.pointSuccess=function(){return _sv.publish("pointSuccess")},e.prototype.html={openBody:function(e){return e.unshift('<div class="surv-hgroup">'),e.push("</div>"),e.push('<div class="surv-aligner-box">'),e},openMessageBody:function(e){return e.unshift('<div class="surv-hgroup">'),e.push("</div>"),e.push('<div class="surv-aligner-box">'),e},closeBody:function(e){return e.push("</div>"),e},title:function(e,t){return this.div("surv-title",e,t)},buttonLink:function(e,t){var s;return s="_self",e.open_new_card&&(s="_blank"),t?"string"!=typeof t&&(t=t.join(" ")):t=["surv-btn-submit-block","surv-button"].join(" "),"<a target='"+s+"' href='"+e.link+"' class='"+t+"'>"+e.text+"</a>"},facebookLink:function(e){return"<a target='_blank' href='"+e+"' class='surv-btn-submit-block surv-button surv-track-button-click surv-facebook'> <span class='surv-btn-icon'> <svg width='20' height='20' xmlns='http://www.w3.org/2000/svg'> <path d='m6.490006,20l0,-9.12l2.95,0l0.44,-3.56l-3.39,0l0,-2.27a1.45,1.45 0 0 1 1.7,-1.73l1.81,0l0,-3.18a23.39,23.39 0 0 0 -2.64,-0.14c-2.61,0 -4.4,1.66 -4.4,4.7l0,2.62l-3,0l0,3.56l3,0l0,9.12l3.54,0l-0.01,0z'/> </svg> </span> <span class='surv-btn-social-inner'> Like </span> </a>"},twitterLink:function(e){return"<a target='_blank' href='"+e+"' class='surv-btn-submit-block surv-button surv-track-button-click surv-twitter'> <span class='surv-btn-icon'> <svg width='17' height='15' xmlns='http://www.w3.org/2000/svg'> <path d='m17,1.78a6.55,6.55 0 0 1 -2,0.6a3.76,3.76 0 0 0 1.53,-2.09a6.66,6.66 0 0 1 -2.21,0.92a3.36,3.36 0 0 0 -2.55,-1.2a3.65,3.65 0 0 0 -3.49,3.79a4.1,4.1 0 0 0 0.09,0.86a9.67,9.67 0 0 1 -7.19,-4a4,4 0 0 0 -0.47,1.9a3.88,3.88 0 0 0 1.55,3.15a3.27,3.27 0 0 1 -1.58,-0.47l0,0a3.72,3.72 0 0 0 2.8,3.71a3.23,3.23 0 0 1 -1.58,0.06a3.54,3.54 0 0 0 3.26,2.63a6.66,6.66 0 0 1 -4.33,1.62a6.56,6.56 0 0 1 -0.83,-0.05a9.32,9.32 0 0 0 5.35,1.7c6.42,0 9.92,-5.77 9.92,-10.77q0,-0.25 0,-0.49a7.45,7.45 0 0 0 1.73,-1.87z'/> </svg> </span> <span class='surv-btn-social-inner'> Follow </span> </a>"},googleLink:function(e){return"<a target='_blank' href='"+e+"' class='surv-btn-submit-block surv-button surv-track-button-click surv-google_plus'> <span class='surv-btn-icon'> <svg width='21' height='14' xmlns='http://www.w3.org/2000/svg'> <path d='m6.670001,6.000004c0,0.8 0,1.59 0,2.39c1.27,0 2.55,0 3.82,0a3.91,3.91 0 0 1 -6.43,2a4.63,4.63 0 0 1 0.18,-7a4.24,4.24 0 0 1 5.19,0.14a24.42,24.42 0 0 0 1.69,-1.84a6.58,6.58 0 0 0 -4.46,-1.73a6.81,6.81 0 0 0 -6.66,6.65a7,7 0 0 0 4.24,6.89a6.39,6.39 0 0 0 7.59,-2.12a8.35,8.35 0 0 0 1.2,-5.42c-2.11,0.03 -4.23,0.04 -6.36,0.04zm12.43,0c0,-0.67 0,-1.33 0,-2l-1.9,0c0,0.67 0,1.33 0,2l-1.91,0l0,2l1.91,0c0,0.67 0,1.33 0,2l1.9,0q0,-1 0,-2l1.91,0l0,-2l-1.91,0z'/> </svg> </span> <span class='surv-btn-social-inner'> Follow </span> </a>"},description:function(e,t){return this.div("surv-description",e,t)},submit:function(e){return e||(e="Submit"),"<div class='surv-submit surv-btn-submit-block' title='"+e+"'>"+e+"</div>"},textArea:function(e,t){return"<div class='surv-textarea'> <textarea name='"+e+"' class='surv-textarea-input' autofocus>"+t+"</textarea> </div>"},radio:function(e){return"<div class='surv-radio' data-user_tag='"+(e.user_tag||"")+"' data-value='"+e.id+"'> <span class='surv-radio-input'> <svg width='16' height='16' xmlns='http://www.w3.org/2000/svg'> <ellipse class='cls-1' ry='2.5' rx='2.5' id='svg_2' cy='8' cx='8'/> </svg> </span> <span class='surv-answer'>"+(e.possible_answer||"Answer "+(_sv.survey.currentPoint.answers.indexOf(e)+1))+"</span> </div>"},checkbox:function(e,t){return"<div class='surv-checkbox' data-user_tag='"+(t.user_tag||"")+"' data-value='"+t.id+"'> <span class='surv-checkbox-input'> <svg width='16' height='16' xmlns='http://www.w3.org/2000/svg'> <path d='m13.069765,5.920574l-6,6.09a0.22,0.22 0 0 1 -0.3,0l-3.53,-3.57a0.19,0.19 0 0 1 0,-0.3l1.45,-1.47a0.19,0.19 0 0 1 0.3,0l1.93,2l4.42,-4.48a0.19,0.19 0 0 1 0.3,0l1.45,1.47a0.19,0.19 0 0 1 -0.02,0.26z'/> </svg> </span> <span class='surv-answer'>"+(t.possible_answer||"Answer "+(_sv.survey.currentPoint.answers.indexOf(t)+1))+"</span> </div>"},radioComment:function(e){return"<div class='surv-radio' data-user_tag='"+(e.user_tag||"")+"' data-value='"+e.id+"'> <span class='surv-radio-input'> <svg width='16' height='16' xmlns='http://www.w3.org/2000/svg'> <ellipse class='cls-1' ry='2.5' rx='2.5' id='svg_2' cy='8' cx='8'/> </svg> </span> <span class='surv-answer'>"+(e.possible_answer||"Answer "+(_sv.survey.currentPoint.answers.indexOf(e)+1))+"</span> <textarea name='surv-comment' class='surv-smallarea'></textarea> </div>"},checkboxComment:function(e,t){return"<div class='surv-checkbox' data-user_tag='"+(t.user_tag||"")+"' data-value='"+t.id+"'> <span class='surv-checkbox-input'> <svg width='16' height='16' xmlns='http://www.w3.org/2000/svg'> <path d='m13.069765,5.920574l-6,6.09a0.22,0.22 0 0 1 -0.3,0l-3.53,-3.57a0.19,0.19 0 0 1 0,-0.3l1.45,-1.47a0.19,0.19 0 0 1 0.3,0l1.93,2l4.42,-4.48a0.19,0.19 0 0 1 0.3,0l1.45,1.47a0.19,0.19 0 0 1 -0.02,0.26z'/> </svg> </span> <span class='surv-answer'>"+(t.possible_answer||"Answer "+(_sv.survey.currentPoint.answers.indexOf(t)+1))+"</span> <textarea name='surv-comment' class='surv-smallarea'></textarea> </div>"},smileySad:function(e){return"<div class='surv-smiley surv-smiley-sad' data-value='"+e.id+"' data-user_tag='"+(e.user_tag||"")+"'> <svg width='60' height = '60'> <path d='M27,19.84c0,2.76-1.56,5-3.44,5s-3.38-2.29-3.38-5,1.49-5,3.38-5S27,17.07,27,19.84Zm13.18,0c0,2.76-1.56,5-3.44,5s-3.38-2.29-3.38-5,1.49-5,3.38-5S40.16,17.07,40.16,19.84ZM30,34.08a16,16,0,0,0-15,9.53L18.51,45A12.38,12.38,0,0,1,30,37.69,12.54,12.54,0,0,1,41.49,45.1L45,43.62A16.36,16.36,0,0,0,30,34.08Z'/> </svg> </div>"},smileyNeutral:function(e){return"<div class='surv-smiley surv-smiley-neutral' data-value='"+e.id+"' data-user_tag='"+(e.user_tag||"")+"'> <svg width='60' height = '60'> <path d='M27.16,19.84c0,2.76-1.56,5-3.44,5s-3.38-2.29-3.38-5,1.49-5,3.38-5S27.16,17.07,27.16,19.84Zm13.18,0c0,2.76-1.56,5-3.44,5s-3.38-2.29-3.38-5,1.49-5,3.38-5S40.35,17.07,40.35,19.84ZM17,38.5H43a1,1,0,0,1,1,1v2a1,1,0,0,1-1,1H17a1,1,0,0,1-1-1v-2A1,1,0,0,1,17,38.5Z'/> </svg> </div>"},smileyHappy:function(e){return"<div class='surv-smiley surv-smiley-happy' data-value='"+e.id+"' data-user_tag='"+(e.user_tag||"")+"'> <svg width='60' height = '60'> <path d='M27,19.84c0,2.76-1.56,5-3.44,5s-3.38-2.29-3.38-5,1.49-5,3.38-5S27,17.07,27,19.84Zm13.18,0c0,2.76-1.56,5-3.44,5s-3.38-2.29-3.38-5,1.49-5,3.38-5S40.16,17.07,40.16,19.84ZM30,45.48a16,16,0,0,1-15-9.53l3.51-1.42A12.38,12.38,0,0,0,30,41.87a12.54,12.54,0,0,0,11.49-7.41L45,35.95A16.36,16.36,0,0,1,30,45.48Z'/> </svg> </div>"},date:function(e,t){var s,r,n;for(s="",r=n=0;3>n;r=++n){switch(e[r]){case"D":s+="<input type='text' name='day' maxlength='2' placeholder='DD' "+(0===r?"autofocus":"")+"/>";break;case"M":s+="<input type='text' name='month' maxlength='2' placeholder='MM' "+(0===r?"autofocus":"")+"/>";break;case"Y":s+="<input type='text' name='year' maxlength='4' placeholder='YYYY' "+(0===r?"autofocus":"")+"/>"}(0===r||1===r)&&(s+=t)}return"<div class='surv-date'>"+s+"</div>"},div:function(e,t,s){return t&&s?"<div class='"+e+"'>"+t+"</div>":void 0}},e.prototype.getVisitPointId=function(e){var t;try{return this.currentVisitPointId=JSON.parse(e).currentVisitPointId}catch(s){return t=s,{}}},e.prototype.minimalized=function(){var e;if(!this.beenMinimalized)return e=_sv.extend(this.json,{survey_point_id:this.id,responses:{visit_point_id:this.currentVisitPointId,minimalized_counter:1}}),_sv.req(_sv.host+"/visitors/survey/submit",function(e){return function(t){return e.getVisitPointId(t)}}(this),"POST",e),this.beenMinimalized=!0},e.prototype.closed=function(){var e;return e=_sv.extend(this.json,{survey_point_id:this.id,responses:{visit_point_id:this.currentVisitPointId,force_close:!0}}),_sv.req(_sv.host+"/visitors/survey/submit",null,"POST",e)},e.prototype.displayed=function(){var e;return e=_sv.extend(this.json,{survey_point_id:this.id}),_sv.req(_sv.host+"/visitors/survey",function(e){return function(t){return e.getVisitPointId(t)}}(this),"POST",e)},e.prototype.lastPointFinish=function(){var e;return e=_sv.extend(this.json,{survey_point_id:this.id,responses:{finished:!0,visit_point_id:this.currentVisitPointId}}),_sv.req(_sv.host+"/visitors/survey/submit",null,"POST",e)},e.prototype.postSave=function(e,t){return _sv.features.isEnabled(_sv.consts.API_COMMUNICATION)?_sv.req(_sv.host+"/visitors/survey/submit",function(s){return function(r){return s.getVisitPointId(r),s.afterSave(e,r),t(),_sv.publish("pointSubmitted",[e,s])}}(this),"POST",e):_sv.publish("setTimeout",setTimeout(function(s){return function(){return t(),_sv.publish("pointSubmitted",[e,s])}}(this),0))},e.prototype.alertField=function(e){return _sv.addClass(e.parentNode,"surv-alertfield"),_sv.publish("setTimeout",setTimeout(function(){return _sv.removeClass(e.parentNode,"surv-alertfield")},600))},e.prototype.notifyGA=function(){},e.prototype.getSMClientId=function(e){var t,s;try{if(s=JSON.parse(e),s.sm_contact_id)return _monster.set("smclient",s.sm_contact_id)}catch(r){return t=r,{}}},e.prototype.beforeSave=function(){},e.prototype.afterSave=function(e,t){return this.notifyGA(e),this.getSMClientId(t)},e.prototype.destroy=function(){},e.prototype.save=function(e,t){var s,r;return t||(t=function(){return{}}),this.saved?!1:(r=this.getResponses(),r?(this.beforeSave(),this.destroy(),r.length>0&&(r[0].visit_point_id=this.currentVisitPointId,e&&(r[r.length-1]=_sv.extend(r[r.length-1],e))),s=_sv.extend(this.json,{responses:r,survey_point_id:this.id,page_url:document.location.toString(),integrations:{sessioncam_id:_sv.integrations.fetchSessioncam(),fullstory_url:_sv.integrations.fetchFullstory()}}),this.postSave(s,t),this.saved=!0):!1)},e}()}(_sv||{})}.call(this),function(){var e=function(e,s){function r(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return r.prototype=s.prototype,e.prototype=new r,e.__super__=s.prototype,e},t={}.hasOwnProperty;!function(t){var s,r;return r={single:"single",multiple:"multiple",text:"text",smiley_scale:"smiley_scale",single_email:"single_email",smiley_scale_email:"smiley_scale_email",date:"date"},_sv.SurveyQuestion=s=function(t){function s(){return s.__super__.constructor.apply(this,arguments)}return e(s,t),s.prototype.render=function(){var e;return e=this.getHtml(),this.$nodeWindow.className="surv-window surv-question",e?this.setContent(e):_sv.publish("setTimeout",setTimeout(function(){return _sv.publish("pointRendered")},0))},s.prototype.getHtml=function(){var e,t,s,n,i,o,a,u,c,l,v;switch(this.randomize_answers&&(this.randomize_except_last?_sv.shuffleArrayExceptLast(this.answers):_sv.shuffleArray(this.answers)),t=this.html.openBody([this.html.description(this.description,this.description_display),this.html.title(this.content,this.content_display)]),this.answer_type){case r.single:for(c=this.answers,s=0,o=c.length;o>s;s++)e=c[s],e.add_comment?t.push(this.html.radioComment(e)):t.push(this.html.radio(e));break;case r.multiple:for(l=this.answers,n=0,a=l.length;a>n;n++)e=l[n],e.add_comment?t.push(this.html.checkboxComment("multiple",e)):t.push(this.html.checkbox("multiple",e));t.push(this.html.submit(this.survey.submit_text));break;case r.text:t.push(this.html.textArea("text","")),t.push(this.html.submit(this.survey.submit_text)),_sv.publish("setTimeout",setTimeout(function(){return document.getElementsByClassName("surv-textarea-input")[0]?document.getElementsByClassName("surv-textarea-input")[0].focus():void 0},0));break;case r.smiley_scale:for(t.push('<div class="surv-smileys">'),v=this.answers,i=0,u=v.length;u>i;i++)switch(e=v[i],e.possible_answer){case"sad":t.push(this.html.smileySad(e));break;case"neutral":t.push(this.html.smileyNeutral(e));break;case"happy":t.push(this.html.smileyHappy(e))}t.push("</div>");break;case r.single_email:return this.doneEmail(),"";case r.smiley_scale_email:return this.doneEmail(),"";case r.date:t.push(this.html.date(this.answers[0].date_order,this.answers[0].date_separator)),t.push(this.html.submit(this.survey.submit_text)),_sv.subscribe("pointRendered",function(e){return function(){var t;return t=e.survey.$el.getElementsByClassName("surv-date")[0],t?(t.onkeypress=function(e){return e.charCode>=48&&e.charCode<=57},t.onkeyup=function(e){var t,s,r,n,i,o,a;if(s=e.srcElement,r=parseInt(s.attributes.maxlength.value,10),t=s.value.length,t>=r){for(o=[];(n=s.nextElementSibling)&&null!==n;){if("input"===n.tagName.toLowerCase()){n.focus();break}o.push(void 0)}return o}if(0===t&&8===e.keyCode){for(a=[];(i=s.previousElementSibling)&&null!==i;){if("input"===i.tagName.toLowerCase()){i.focus();break}a.push(void 0)}return a}}):void 0}}(this));break;default:return void _sv.publish("pointFailure")}return this.html.closeBody(t).join("")},s.prototype.doneEmail=function(){var e,t,s,r,n,i,o,a,u,c,l,v,d;for(_sv.DEBUG&&console.log("SurveyQuestion#doneEmail",this),c=_sv.getSearchParameters(),v={},a=["first_name","last_name","email","p","uid","attributes"],t=0,n=a.length;n>t;t++)d=a[t],c[d]&&(v[d]=c[d]);if("pardot"===v.p)for(r in v)o=v[r],v[r]=decodeURIComponent(o);for(l=null,u=this.answers,s=0,i=u.length;i>s;s++)e=u[s],e.id===parseInt(c.aid)&&(l=e.user_tag);return this.responses.push({survey_point_id:this.id,survey_question_answer_id:c.aid,user_tag:l,visitor:v}),_sv.publish("setTimeout",setTimeout(function(){return _sv.publish("pointSubmit")},100))},s.prototype.getMaxPath=function(){var e,t,s,n,i,o,a;if(!this.maxPath){if(o=[],t=[],this.answer_type===r.single||this.answer_type===r.single_email||this.answer_type===r.smiley_scale)for(a=this.answers,s=0,n=a.length;n>s;s++)e=a[s],-1===t.indexOf(e.next_survey_point_id)&&(t.push(e.next_survey_point_id),-1===e.next_survey_point_id?o.push(0):(i=this.survey.getNextPoint(e.next_survey_point_id,this),i?o.push(i.getMaxPath()+1):o.push(0)));else(this.answer_type===r.text||this.answer_type===r.multiple||this.answer_type===r.date)&&(-1===this.next_survey_point_id?o.push(0):(i=this.survey.getNextPoint(this.next_survey_point_id,this),i?o.push(i.getMaxPath()+1):o.push(0)));this.maxPath=Math.max.apply(null,o)}return this.maxPath},s.prototype.getResponses=function(){var e,t,s,n,i,o,a,u,c,l,v,d,h;if(this.responses.length>0)return this.responses;if(this.answer_type===r.single)for(v=this.survey.$el.getElementsByClassName("surv-radio"),i=0,u=v.length;u>i;i++)o=v[i],_sv.hasClass(o,"surv-selected")&&(e=o.querySelector("textarea"),l={survey_point_id:this.id,survey_question_answer_id:o.getAttribute("data-value"),user_tag:o.getAttribute("data-user_tag")},e&&(l.content=e.value),this.responses.push(l));else if(this.answer_type===r.multiple)for(d=this.survey.$el.getElementsByClassName("surv-checkbox"),a=0,c=d.length;c>a;a++)o=d[a],_sv.hasClass(o,"surv-selected")&&(e=o.querySelector("textarea"),l={survey_point_id:this.id,survey_question_answer_id:o.getAttribute("data-value"),user_tag:o.getAttribute("data-user_tag")},e&&(l.content=e.value),this.responses.push(l));else if(this.answer_type===r.text)h=this.survey.$el.getElementsByTagName("textarea"),this.responses.push({survey_point_id:this.id,content:h[0]&&h[0].value,user_tag:this.answers[0].user_tag});else if(this.answer_type===r.smiley_scale)n=this.survey.$el.querySelector("#survicate-box .surv-smiley.surv-selected"),this.responses.push({survey_point_id:this.id,survey_question_answer_id:n.getAttribute("data-value"),user_tag:n.getAttribute("data-user_tag")});else{if(this.answer_type!==r.date)return _sv.publish("pointFailure"),[];t=this.survey.$el.querySelector("#survicate-box .surv-date").getElementsByTagName("input"),s=t.year.value.length>0?t.year.value+"-"+t.month.value+"-"+t.day.value:"",this.responses.push({survey_point_id:this.id,content:s,user_tag:this.answers[0].user_tag})}return this.responses},s.prototype.nextPointId=function(){var e,t,s,n,i;if(i=this.getResponses()[0],!i)return null;if(this.answer_type===r.single||this.answer_type===r.single_email||this.answer_type===r.smiley_scale){for(n=this.answers,t=0,s=n.length;s>t;t++)if(e=n[t],e.id===parseInt(i.survey_question_answer_id,10))return e.next_survey_point_id}else if(this.answer_type===r.text||this.answer_type===r.multiple)return this.next_survey_point_id},s.prototype.dateValidation=function(){var e,t,s,r,n;return s=/^0[1-9]|[12]\d|3[01]$/,r=/^0[1-9]|1[0-2]$/,t=this.survey.$el.querySelector("#survicate-box .surv-date"),e=t.getElementsByTagName("input"),n=!0,(e.day.value.length>0||e.month.value.length>0||e.year.value.length>0)&&(s.test(e.day.value)||(this.alertField(e[0]),e.day.value="",n=!1),r.test(e.month.value)||(this.alertField(e[0]),e.month.value="",n=!1),4!==e.year.value.length&&(this.alertField(e[0]),e.year.value="",n=!1)),n},s.prototype.onSubmitClick=function(e){var t,s,n,i,o;if(e.stopImmediatePropagation(),this.answer_type!==r.date||this.dateValidation()){if(this.answer_type===r.single){for(t=!1,o=this.survey.$el.getElementsByClassName("surv-radio"),s=0,i=o.length;i>s;s++)n=o[s],_sv.hasClass(n,"surv-selected")&&(t=!0);if(!t)return}return _sv.publish("pointSubmit")}},s.prototype.getTextResponses=function(e){var t;switch(t=function(e){return function(t){var s,r,n,i;for(i=e.answers,r=0,n=i.length;n>r;r++)if(s=i[r],s.id===parseInt(t,10))return s.possible_answer}}(this),this.answer_type){case r.single:return e.map(function(e){return t(e.survey_question_answer_id)});case r.multiple:return e.map(function(e){return t(e.survey_question_answer_id)});case r.text:return e.map(function(e){return e.content});default:return[]}},s.prototype.notifyGA=function(e){return this.getTextResponses(e.responses).forEach(function(e){return function(t){return _sv.ga.push(["_trackEvent","Survicate - "+e.survey.name,""+e.content,t,1,!0])}}(this))},s}(_sv.SurveyPoint)}(_sv||{})}.call(this),function(){var extend=function(e,t){function s(){this.constructor=e}for(var r in t)hasProp.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;!function(sv){var SurveyCta,answerTypes;return answerTypes={empty:"empty",redirect_timeout:"redirect_timeout",redirect_instant:"redirect_instant",button_link:"button_link",button_next:"button_next",button_next_email:"button_next_email",js_action:"js_action",start_chat:"start_chat",cookie:"cookie",custom_cta:"custom_cta",social_cta:"social_cta"},_sv.SurveyCta=SurveyCta=function(superClass){function SurveyCta(){return SurveyCta.__super__.constructor.apply(this,arguments)}return extend(SurveyCta,superClass),SurveyCta.prototype.render=function(){var e;return e=this.getHtml(),this.$nodeWindow.className="surv-window surv-cta",e?this.setContent(e):_sv.publish("setTimeout",setTimeout(function(){return _sv.publish("pointRendered")},0))},SurveyCta.prototype.getHtml=function(){var body,button_link_html,facebook_link_html,google_plus_link_html,twitter_link_html;switch(body=this.html.openBody([this.html.description(this.description,this.description_display),this.html.title(this.content,this.content_display)]),_sv.DEBUG&&console.log("SurveyCta#getHtml",this),this.answer_type){case answerTypes.empty:this.answers.timeout_display&&_sv.subscribe("pointRendered",function(e){return function(){return _sv.publish("setTimeout",setTimeout(function(){return e.done()},1e3*parseInt(e.answers.timeout_display_count,10)))}}(this));break;case answerTypes.redirect_timeout:body.push("<canvas class='surv-countdown' width='120' height='120'></canvas>"),_sv.subscribe("pointRendered",function(e){return function(){return _sv.subscribe("pointSubmitted",function(t,s){return e.id===s[1].id?e.answers.open_new_card?window.open(e.answers.link):_sv.publish("setTimeout",setTimeout(function(){return window.location.href=e.answers.link},150)):void 0}),e.startCountdown(e.answers.timeout_display_count)}}(this));break;case answerTypes.redirect_instant:_sv.subscribe("pointRendered",function(e){return function(){return _sv.subscribe("pointSubmitted",function(t,s){return e.id===s[1].id?e.answers.open_new_card?window.open(e.answers.link):_sv.publish("setTimeout",setTimeout(function(){return window.location.href=e.answers.link},150)):void 0}),e.done()}}(this));break;case answerTypes.button_link:button_link_html=this.html.buttonLink(this.answers,"surv-btn-submit-block surv-button surv-track-button-click"),body.push(button_link_html),_sv.subscribe("pointRendered",function(e){return function(){return e.bindButtonLink()}}(this));break;case answerTypes.button_next:body.push(this.html.submit(this.answers.text));break;case answerTypes.button_next_email:return this.doneEmail(),"";case answerTypes.custom_cta:_sv.getCSS(this.answers.css),_sv.subscribe("pointRendered",function(e){return function(){return e.bindButtonLink()}}(this));break;case answerTypes.js_action:return _sv.subscribe("pointRendered",function(_this){return function(){return _sv.subscribe("pointSubmitted",function(){return eval(_this.answers.js_call)}),_this.done()}}(this)),"";case answerTypes.start_chat:return _sv.subscribe("pointRendered",function(e){return function(){return _sv.subscribe("pointSubmitted",function(){switch(e.answers.service){case"chatlio":return _chatlio.show({expanded:!0});case"chatra":return Chatra("openChat",!0);case"drift":return drift.api.openChat();case"intercom":return Intercom("showMessages");case"livechatinc":return LC_API.open_chat_window();case"olark":return olark("api.box.expand");case"smoochio":return Smooch.open();case"snapengage":return SnapEngage.startLink();case"userengage":return userengage("widget.open");case"tagove":return tagoveApp.startChat();case"zopim":return $zopim.livechat.window.show();default:_sv.publish("pointFailure")}}),e.done()}}(this)),"";case answerTypes.cookie:return _sv.subscribe("pointRendered",function(e){return function(){return _sv.subscribe("pointSubmitted",function(){return e.answers.timeout?_monster.set(e.answers.name,e.answers.value,e.answers.timeout_count):_monster.set(e.answers.name,e.answers.value,0)}),e.done()}}(this)),"";case answerTypes.social_cta:this.answers.facebook&&(facebook_link_html=this.html.facebookLink(this.answers.facebook_link),body.push(facebook_link_html)),this.answers.twitter&&(twitter_link_html=this.html.twitterLink(this.answers.twitter_link),body.push(twitter_link_html)),this.answers.google_plus&&(google_plus_link_html=this.html.googleLink(this.answers.google_plus_link),body.push(google_plus_link_html)),_sv.subscribe("pointRendered",function(e){return function(){return e.bindButtonLink()}}(this));break;default:return void _sv.publish("pointFailure")}return this.displayed(),this.html.closeBody(body).join("")},SurveyCta.prototype.getMaxPath=function(){var e;return this.maxPath||(this.answer_type===answerTypes.button_next||this.answer_type===answerTypes.cookie?-1===this.next_survey_point_id?this.maxPath=0:(e=this.survey.getNextPoint(this.next_survey_point_id,this),e?this.maxPath=e.getMaxPath()+1:this.maxPath=0):this.maxPath=0),this.maxPath},SurveyCta.prototype.bindButtonLink=function(){return _sv.on("click",this.survey.$el.querySelectorAll(".surv-track-button-click"),function(e){return function(t){var s,r,n;return t.stopImmediatePropagation(),t.preventDefault(),r=t.currentTarget,n=r.getAttribute("target"),s=r.getAttribute("href"),_sv.ga.push(["_trackEvent","Survicate - "+e.survey.name,""+e.content,"clicked",1,!0]),e.done(),_sv.publish("setTimeout",setTimeout(function(){return"_self"===n?window.location.href=s:window.open(s)},0))}}(this))},SurveyCta.prototype.startCountdown=function(e){var t,s;return s=e,t="ChatSurvey"===this.survey.type&&"intercom"===this.survey.provider?{bg:"#eff3f5",fg:"#667583",font:"#667583"}:{bg:"rgb(142, 142, 145)",fg:"#f1c40f",font:"#ffffff"},_sv.drawings.init(this.survey.$el.querySelector(".surv-countdown"),e,t),_sv.drawings.drawCountdown(s),_sv.publish("setInterval",setInterval(function(e){return function(){return s--,s>0?_sv.drawings.drawCountdown(s):0===s?(_sv.drawings.drawCountdown(s),e.done()):void 0}}(this),1e3)),!0},SurveyCta.prototype.done=function(e){return _sv.DEBUG&&console.log("SurveyCta#done",this),this.responses.push({content:e,cta_success:!0,finished:!0,survey_point_id:this.id,user_tag:this.answers.user_tag}),_sv.publish("pointSubmit")},SurveyCta.prototype.doneEmail=function(){return _sv.DEBUG&&console.log("SurveyQuestion#doneEmail",this),this.responses.push({cta_success:!0,survey_point_id:this.id,user_tag:this.answers.user_tag}),_sv.publish("setTimeout",setTimeout(function(){return _sv.publish("pointSubmit")},100))},SurveyCta.prototype.getResponses=function(){if(this.responses.length>0)return this.responses;switch(this.answer_type){case answerTypes.button_link:this.responses.push({survey_point_id:this.id,cta_success:!0,finished:!0,user_tag:this.answers.user_tag});break;case answerTypes.button_next:this.responses.push({survey_point_id:this.id,cta_success:!0,user_tag:this.answers.user_tag});break;case answerTypes.button_next_email:this.responses.push({survey_point_id:this.id,cta_success:!0,user_tag:this.answers.user_tag})}return this.responses},SurveyCta.prototype.afterSave=function(e,t){return e.responses[0]},SurveyCta.prototype.nextPointId=function(){return this.next_survey_point_id},SurveyCta}(_sv.SurveyPoint)}(_sv||{})}.call(this),function(){var e=function(e,s){function r(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return r.prototype=s.prototype,e.prototype=new r,e.__super__=s.prototype,e},t={}.hasOwnProperty;!function(t){var s;return _sv.SurveyForm=s=function(t){function s(){return s.__super__.constructor.apply(this,arguments)}return e(s,t),s.prototype.render=function(){var e;return e=this.getHtml(),this.$nodeWindow.className="surv-window surv-form",e&&this.setContent(e),_sv.on("keypress",document.querySelectorAll("#survicate-box input"),function(e){return function(t){return 13===t.keyCode?(1===document.querySelectorAll("#survicate-box input").length&&e.onSubmitClick(t),t.preventDefault(),!1):void 0}}(this)),_sv.on("input",document.querySelectorAll("#survicate-box input, #survicate-box textarea"),function(e){return function(e){return e.target.value?_sv.addClass(e.target.parentNode,"surv-filled"):_sv.removeClass(e.target.parentNode,"surv-filled")}}(this)),_sv.on("focus",document.querySelectorAll("#survicate-box input, #survicate-box textarea"),function(e){return function(e){return _sv.addClass(e.target.parentNode,"surv-focused")}}(this)),_sv.on("blur",document.querySelectorAll("#survicate-box input, #survicate-box textarea"),function(e){return function(e){return _sv.removeClass(e.target.parentNode,"surv-focused")}}(this))},s.prototype.getHtml=function(){var e,t,s,r,n,i;for(e=this.html.openBody([this.html.description(this.description,this.description_display),this.html.title(this.content,this.content_display)]),
s=[],i=this.fields,r=0,n=i.length;n>r;r++)t=i[r],"confirmation"===t.field_type?e.push(this.formFieldConfirmation(t.label,t.field_type)):"security_info"===t.field_type?s.push(this.formFieldSecurityInfo(t.label,t.field_type)):"form_id"===t.field_type||("comment"===t.field_type&&t.required?e.push(this.formCommentRequired(t.label,t.field_type,t.order_number)):"comment"===t.field_type?e.push(this.formComment(t.label,t.field_type,t.order_number)):t.required?e.push(this.formFieldRequired(t.label,t.field_type,t.order_number)):e.push(this.formField(t.label,t.field_type,t.order_number)));return e.push(this.html.submit(this.survey.submit_text)),e.push(s.join("")),this.html.closeBody(e).join("")},s.prototype.getMaxPath=function(){var e;return this.maxPath||(-1===this.next_survey_point_id?this.maxPath=0:(e=this.survey.getNextPoint(this.next_survey_point_id,this),e?this.maxPath=e.getMaxPath()+1:this.maxPath=0)),this.maxPath},s.prototype.getResponses=function(){var e,t,s,r,n,i,o,a;if(this.responses.length>0)return this.responses;for(i=this.survey.$el.getElementsByTagName("input"),e=0,r=i.length;r>e;e++)t=i[e],this.responses.push({survey_point_id:this.id,user_tag:this.user_tag,answer_type:t.name,content:t.value});for(o=this.survey.$el.getElementsByTagName("textarea"),s=0,n=o.length;n>s;s++)a=o[s],this.responses.push({survey_point_id:this.id,user_tag:this.user_tag,answer_type:a.name,content:a.value});return this.responses},s.prototype.nextPointId=function(){return this.next_survey_point_id},s.prototype.wrapElementList=function(e){return"<div class='surv-form-item'>"+e+"</div>"},s.prototype.formField=function(e,t,s){return this.wrapElementList("<span class='surv-label'>"+(e||"Field "+(s+1))+"</span><input type='text' class='surv-input' name='"+t+"' placeholder='"+(e||"Field "+(s+1))+"'>")},s.prototype.formFieldRequired=function(e,t,s){return this.wrapElementList("<span class='surv-label'>"+(e||"Field "+(s+1))+"*</span><input type='text' class='surv-input surv-required' name='"+t+"' placeholder='"+(e||"Field "+(s+1))+"*'>")},s.prototype.formComment=function(e,t,s){return this.wrapElementList("<span class='surv-label'>"+(e||"Field "+(s+1))+"</span><textarea class='surv-form-textarea' name='"+t+"' placeholder='"+(e||"Field "+(s+1))+"'></textarea>")},s.prototype.formCommentRequired=function(e,t,s){return this.wrapElementList("<span class='surv-label'>"+(e||"Field "+(s+1))+"*</span><textarea class='surv-form-textarea surv-required' name='"+t+"' placeholder='"+(e||"Field "+(s+1))+"*'></textarea>")},s.prototype.formFieldConfirmation=function(e,t){return"<div class='surv-form-checkbox surv-confirmation'> <span class='surv-checkbox-input' data-name='"+t+"'> <svg width='16' height='16' xmlns='http://www.w3.org/2000/svg'> <path d='m13.069765,5.920574l-6,6.09a0.22,0.22 0 0 1 -0.3,0l-3.53,-3.57a0.19,0.19 0 0 1 0,-0.3l1.45,-1.47a0.19,0.19 0 0 1 0.3,0l1.93,2l4.42,-4.48a0.19,0.19 0 0 1 0.3,0l1.45,1.47a0.19,0.19 0 0 1 -0.02,0.26z'/> </svg> </span> <span class='surv-checkbox-label'> "+e+" </span class='surv-checkbox-label'> </div>"},s.prototype.formFieldSecurityInfo=function(e,t){return"<div class='surv-form-security'> <span class='surv-security-icon'> <svg width='16' height='16' xmlns='http://www.w3.org/2000/svg'> <path d='M13.33,9.31a0.63,0.63,0,0,1,.47.2A0.67,0.67,0,0,1,14,10v4.81a0.67,0.67,0,0,1-.2.48,0.63,0.63,0,0,1-.47.2H6.67a0.63,0.63,0,0,1-.47-0.2A0.67,0.67,0,0,1,6,14.81V10a0.67,0.67,0,0,1,.2-0.48,0.63,0.63,0,0,1,.47-0.2H7.33V7.25a2.69,2.69,0,0,1,.78-1.94,2.6,2.6,0,0,1,3.77,0,2.69,2.69,0,0,1,.78,1.94V9.31h0.67ZM8.67,7.25V9.31h2.67V7.25a1.35,1.35,0,0,0-.39-1,1.31,1.31,0,0,0-1.89,0A1.35,1.35,0,0,0,8.67,7.25Z'/> </svg> </span> <span class='surv-security-label'> "+e+" </span> </div>"},s.prototype.onSubmitClick=function(e){var t,s,r,n,i,o,a,u,c,l,v,d,h,p;for(e.stopImmediatePropagation(),s=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,l=/^[\+\-0-9\(\)\s]+$/,v=this.survey.$el.getElementsByTagName("input"),r=0,a=v.length;a>r;r++){if(n=v[r],_sv.hasClass(n,"surv-required")&&0===n.value.toString().length)return void this.alertField(n);if("email"===n.name&&!s.test(n.value)&&n.value.toString().length>0)return void this.alertField(n);if("phone"===n.name&&!l.test(n.value)&&n.value.toString().length>0)return void this.alertField(n)}for(d=this.survey.$el.getElementsByTagName("textarea"),i=0,u=d.length;u>i;i++)if(p=d[i],_sv.hasClass(p,"surv-required")&&0===p.value.toString().length)return void this.alertField(p);for(h=this.survey.$el.getElementsByClassName("surv-confirmation"),o=0,c=h.length;c>o;o++)if(t=h[o],!_sv.hasClass(t,"surv-selected"))return;return _sv.publish("pointSubmit")},s}(_sv.SurveyPoint)}(_sv||{})}.call(this),function(){var e=function(e,s){function r(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return r.prototype=s.prototype,e.prototype=new r,e.__super__=s.prototype,e},t={}.hasOwnProperty;!function(t){var s,r;return r={nps:"nps",nps_email:"nps_email"},_sv.SurveyNps=s=function(t){function s(){return s.__super__.constructor.apply(this,arguments)}return e(s,t),s.prototype.render=function(){var e;return e=this.getHtml(),this.$nodeWindow.className="surv-window surv-nps",e?this.setContent(e):_sv.publish("setTimeout",setTimeout(function(){return _sv.publish("pointRendered")},0))},s.prototype.getHtml=function(){var e,t,s,n,i;switch(this.randomize_answers&&_sv.shuffleArray(this.answers),t=this.html.openBody([this.html.description(this.description,this.description_display),this.html.title(this.content,this.content_display)]),this.answer_type){case r.nps_email:return this.doneEmail(),"";default:for(i=this.answers,s=0,n=i.length;n>s;s++)e=i[s],t.push(this.nps(e))}return this.html.closeBody(t).join("")},s.prototype.doneEmail=function(){var e,t,s,r,n,i,o,a;for(_sv.DEBUG&&console.log("SurveyQuestion#doneEmail",this),i=_sv.getSearchParameters(),o={},n=["first_name","last_name","email","p","uid","attributes"],e=0,s=n.length;s>e;e++)a=n[e],i[a]&&(o[a]=i[a]);if("pardot"===o.p)for(t in o)r=o[t],o[t]=decodeURIComponent(r);return this.responses.push({survey_point_id:this.id,content:i.aid,user_tag:this.getUserTag(i.aid),visitor:o}),_sv.publish("setTimeout",setTimeout(function(){return _sv.publish("pointSubmit")},100))},s.prototype.getMaxPath=function(){var e,t,s,r,n,i,o;if(!this.maxPath){for(o=[],e=[],i=[this.answers[0].first_range_goto_id,this.answers[0].second_range_goto_id,this.answers[0].third_range_goto_id],t=0,s=i.length;s>t;t++)r=i[t],-1===e.indexOf(r)&&(e.push(r),-1===r?o.push(0):(n=this.survey.getNextPoint(r,this),n?o.push(n.getMaxPath()+1):o.push(0)));this.maxPath=Math.max.apply(null,o)}return this.maxPath},s.prototype.getResponses=function(){var e;return this.responses.length>0?this.responses:(e=this.getAnswer(),this.responses.push({survey_point_id:this.id,content:e.content,user_tag:e.user_tag}),this.responses)},s.prototype.nextPointId=function(){var e,t,s;return s=this.getResponses()[0],s?(e=parseInt(s.content,10),t=7>e?this.answers[0].first_range_goto_id:9>e?this.answers[0].second_range_goto_id:this.answers[0].third_range_goto_id):null},s.prototype.notifyGA=function(e){var t,s,r,n,i;for(r=e.responses,i=[],t=0,s=r.length;s>t;t++)n=r[t],i.push(_sv.ga.push(["_trackEvent","Survicate - "+this.survey.name,""+this.content,""+n.content,1,!0]));return i},s.prototype.getUserTag=function(e){return e=parseInt(e,10),7>e?this.answers[0].first_range_tag:9>e?this.answers[0].second_range_tag:this.answers[0].third_range_tag},s.prototype.getAnswer=function(){var e,t;return t=this.survey.$el.querySelector("#survicate-box .surv-number-list.surv-selected"),e=t.getAttribute("data-value"),{content:e,user_tag:this.getUserTag(e)}},s.prototype.nps=function(e){var t,s,r,n,i;for(t=[],s=0,t.push("<div class='surv-numbers'>"),s=r=0;6>=r;s=++r)t.push("<span class='surv-number-list' data-value='"+s+"'>"+s+"</span>");for(s=n=7;8>=n;s=++n)t.push("<span class='surv-number-list' data-value='"+s+"'>"+s+"</span>");for(s=i=9;10>=i;s=++i)t.push("<span class='surv-number-list' data-value='"+s+"'>"+s+"</span>");return t.push("</div>"),t.push("<div class='surv-texts'>"),t.push("<span class='surv-text-left'><span class='surv-text-inner'>0 - </span>"+_sv.str(e.text_on_the_left)+"</span>"),t.push("<span class='surv-text-right'><span class='surv-text-inner'>10 - </span>"+_sv.str(e.text_on_the_right)+"</span>"),t.push("</div>"),t.join("")},s}(_sv.SurveyPoint)}(_sv||{})}.call(this),function(e){"use strict";function t(){return window.woopra&&e.woopra&&e.woopra.enabled}if(!e.features.isEnabled(e.consts.WOOPRA))return e;if(window._sv.loaded)return e;var s="survicate survey shown",r="survicate survey answered";e.subscribe("reset",function(n){var i=null;e.subscribe("SurveyRender",function(e,r){i=r,t()&&window.woopra.track(s,{survey:i.name})}),e.subscribe("pointSubmitted",function(s,n){if(t()){var o=n[0],a=n[1];switch(e.log("SUBMITTED: ",o,"survey: ",i,"point: ",a),a.target_type){case i.pointTypes.form:return void o.responses.map(function(e){e.content&&e.content.length>0&&window.woopra.identify(e.answer_type,e.content).push()});case i.pointTypes.question:return void window.woopra.track(r,{survey:i.name,question:a.content,answer:a.getTextResponses(o.responses).join("; "),answer_type:a.answer_type,type:a.target_type});case i.pointTypes.nps:return void window.woopra.track(r,{survey:i.name,question:a.content,answer:o.responses[0].content,user_tag:o.responses[0].user_tag,type:a.target_type})}}})})}(_sv||{}),function(e){"use strict";function t(){return window.analytics&&e.segment&&e.segment.enabled}if(!e.features.isEnabled(e.consts.SEGMENT))return e;if(window._sv.loaded)return e;var s="survicate_survey_shown",r="survicate_survey_answered";e.subscribe("reset",function(n){var i=null;e.subscribe("SurveyRender",function(e,r){i=r,t()&&window.analytics.track(s,{survey:i.name})}),e.subscribe("pointSubmitted",function(e,s){if(t()){var n=s[0],o=s[1];switch(o.target_type){case i.pointTypes.form:return void window.analytics.identify(n.responses.reduce(function(e,t){return t.content&&t.content.length>0&&(e[t.answer_type]=t.content),e},{}));case i.pointTypes.question:return void window.analytics.track(r,{survey:i.name,question:o.content,answer:o.getTextResponses(n.responses).join("; "),answer_type:o.answer_type,type:o.target_type});case i.pointTypes.nps:return void window.analytics.track(r,{survey:i.name,question:o.content,answer:n.responses[0].content,user_tag:n.responses[0].user_tag,type:o.target_type})}}})})}(_sv||{});var __SV_LAST_ACTION=(new Date).getTime(),_sv=_sv||{};if(window.__sv=window.__sv||{},_sv.app=function(){function e(){var e;try{e=window.__ipGetId()}catch(t){}return{contact_hash:e}}function t(){window._sv.onload&&window._sv.onload(),window.onclick=u,window.onscroll=u,_sv.spa.init()}function s(){_sv.req(_sv.host+"/visitors/get_survey",n,"POST",{tracking_code:_sv.trackingCode,api_id:_sv.identity,traits:_sv.traits,visit:v(),integrations:{vero:window.__sv.vero||window._vero&&{id:window._vero.id},intercom:window.__sv.intercom,ipresso:e()},page_state:{optimizely:window.optimizely&&window.optimizely.data&&window.optimizely.data.state}})}function r(){_sv.req(_sv.host+"/visitors/get_survey",n,"POST",{api_id:_sv.identity,visit:v(),visitor:l()})}function n(e,t){if(404!=t)try{var s=JSON.parse(e);s.visitor_id&&(_monster.set("__svid",s.visitor_id),_sv.visitor_id=s.visitor_id),s.visit_id&&(_monster.set("__svve",s.visit_id,30),_sv.visit_id=s.visit_id),s.mobile&&(_sv.mobile=!0),s.survey&&renderSurvey(s.survey),s.feedback_widget&&i(s.feedback_widget),s.ab_testing&&o(s.ab_testing),s.affiliate_footer&&(_sv.affiliate=s.affiliate_footer),s.woopra&&(_sv.woopra=s.woopra),s.segment&&(_sv.segment=s.segment)}catch(r){}}function i(e){e.enabled&&_sv.feedback.init(e)}function o(e){for(var t=0;t<e.cookies.length;t++){var s=e.cookies[t].cookie_name;if(!_monster.get(s)){var r=e.cookies[t].cookie_random,n=Math.floor(Math.random()*parseInt(r)+1);_monster.set(s,n)}}}function a(){c()}function u(e){var t=((new Date).getTime()-__SV_LAST_ACTION)/1e3;t>3&&(__SV_LAST_ACTION=(new Date).getTime(),a())}function c(){_sv.visit_id&&_monster.set("__svve",_sv.visit_id,30)}function l(){return _sv.visitor_id||(_sv.visitor_id=_monster.get("__svid")),_sv.visitor_id}function v(){return{language:window.navigator.userLanguage||window.navigator.language,user_agent:window.navigator.userAgent,platform:window.navigator.platform,source_url:document.referrer,page_url:document.location.toString(),path:document.location.pathname,page_title:document.title}}return _sv.disableFeatures&&_sv.features.disable(_sv.disableFeatures),_sv.features.isEnabled(_sv.consts.API_COMMUNICATION)?(_sv.cprefix="",s(),t(),{getSurvey:r}):{getVisit:function(){},getSurvey:function(){setTimeout(function(){window.location.reload()},3e3)}}},!window._sv.loaded){window._sv.loaded=!0;var readyStateCheckInterval=setInterval(function(){if("complete"===document.readyState){try{window._sv.app=window._sv.app&&window._sv.app()}catch(e){}clearInterval(readyStateCheckInterval)}},10)}