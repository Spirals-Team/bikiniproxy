/*!
 * bv-analytics.js v3.6.1
 * Bazaarvoice Analytics Client
 * Copyright 2015 Bazaarvoice, Inc.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 * http://www.apache.org/licenses/LICENSE-2.0
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(t){function e(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return t[r].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var a=n(2),o=r(a),i=n(5),s=r(i),u=n(18),c="_bvaq",l="_bva";if(s["default"][c]=s["default"][c]||[],!s["default"][l]||s["default"][l]&&u(s["default"][l].version,"3.6.1")<0){var d=s["default"][l];s["default"][l]=new o["default"]({name:"default"}),d&&s["default"][l]._setStateFromTracker(d)}s["default"][c].length>0&&s["default"][l].push.apply(s["default"][l],s["default"][c]),s["default"][c]=s["default"][l]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t,e,n){"object"===("undefined"==typeof e?"undefined":i(e))&&(n=e,e=n.display||""),"object"===("undefined"==typeof t?"undefined":i(t))&&(n=t,e=n.display||"",t=n.client||""),n=n||{},this.name=n.name||"","string"==typeof t&&(n.client=t),"string"==typeof e&&(n.display=e),""!==this.name&&T["default"].trackers[this.name]&&I["default"].warn("A tracker with this name already exists: "+this.name),this._settings=u.extend({},this._defaults),this.version="3.6.1",this._shared={loadId:T["default"].loadId,tz:(new Date).getTimezoneOffset(),magpieJsVersion:this.version,source:n.source||null,environment:n.environment||null,client:n.client||null,dc:n.display||null,host:p["default"].host},this._batch=null,this._unloaded=!1;var r=this;f["default"].add(S["default"],"unload",function(){r._unload()}),f["default"].add(S["default"],"beforeunload",function(){r._unload()}),this._bvCookiesRequest=B,this._requestQueue=[],this._id=null,this._idQueue=[],T["default"].trackers[this.name]=this}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=n(3),u=a(s),c=n(4),l=r(c),d=n(7),f=r(d),h=n(8),p=r(h),g=n(9),m=a(g),v=n(10),_=r(v),y=n(14),b=r(y),k=n(5),S=r(k),E=n(15),T=r(E),A=n(19),w=r(A),C=n(12),I=r(C),x=_["default"],R={enableValidation:function(t){var e=t[t.length-1];return!e||"function"==typeof e||!!T["default"].trackers[e]}},N={"public":1,"private":1,internal:1},B=0,P=1,O=2,L=o.prototype;L.create=function(t){var e=t.name,n=T["default"].trackers[e];return n?(t.source&&n.setSource(t.source),t.environment&&n.setEnvironment(t.environment),t.client&&n.setClient(t.client),t.display&&n.setDisplay(t.display),n):new o(t)},L._defaults={trackerHostname:"network.bazaarvoice.com",anonTrackerHostname:"network-a.bazaarvoice.com",euTrackerHostname:"network-eu.bazaarvoice.com",euAnonTrackerHostname:"network-eu-a.bazaarvoice.com",customTrackerHostname:null,customAnonTrackerHostname:null,anonymous:!0,eu:!1,brandDomain:null,timing:!0,staging:!1,eventFilter:null},L._set=function(t,e){this._settings[t]=e},L._get=function(t){return this._settings[t]},L._filterClass=function(t){var e=this.getEventClassFilter();return e&&!e.exec(t)},L._getProtocol=function(){return"https:"},L._setStateFromTracker=function(t){if("number"!=typeof t.length){for(var e,n=["Client","Source","Display","Staging","Audience","Anonymous","LoadId","BrandDomain","Environment","EventClassFilter","TrackerHostname","AnonTrackerHostname"],r=0;r<n.length;r++)e=n[r],this["set"+e](t["get"+e]());return this}},L._trackerUrl=function(t,e){var n=this._getProtocol()+"//"+this.getTrackerHostname()+"/"+t;return e&&(n+="?_="+u.buster()),n},L._getPixel=function(t){var e=this.getAnonymous(),n=e?this.getAnonTrackerHostname():this.getTrackerHostname(),r=this._getBrandCookies();return new x(this.isValidating(),e,n,this._shared,r,t)},L._send=function(t){t.validating?this._sendValidatingRequest(t):t.anonymous?this._sendRequest(t.url):this._sendTrackedRequest(t)},L._sendTrackedRequest=function(t){var e=this;e._bvCookiesRequest===B&&e._setBVCookies(),e._bvCookiesRequest===O?e._sendRequest(t.url):e._requestQueue.push(t)},L._setBVCookies=function(){var t=this,e=t._trackerUrl("sid.gif",!0);t._sendRequest(e,function(){t._bvCookiesRequest=O,t._flushRequestQueue(),t._loadBVID()}),t._bvCookiesRequest=P},L._flushRequestQueue=function(){for(;this._requestQueue.length;)this._send(this._requestQueue.shift())},L._sendRequest=function(t,e){var n;n=new Image(1,1),u.isFunction(e)&&(n.onload=function(){n.onload=null,e()}),n.src=t},L._sendValidatingRequest=function(t){var e=this._get("validationCallback");l["default"].get(t.url,function(n){u.isFunction(e)?e(n,t.data):n.error&&I["default"].error("Invalid Magpie event: "+n)})},L._loadBVID=function(){var t=this,e=t._trackerUrl("id.json",!0),n=t.getTrackerHostname();l["default"].get(e,function(e){t._id=e,t._id.hostname=n,t._flushIdQueue()})},L._flushIdQueue=function(){for(var t,e=this._id,n=this._idQueue;n.length;)t=n.shift(),u.isFunction(t)&&t(e)},L._unload=function(){this._unloaded||(this.flushBatch(),this._unloaded=!0)},L._setBrandCookies=function(t){var e=1/48,n=365;t&&navigator.cookieEnabled&&(m.read("BVBRANDID")||m.create("BVBRANDID",u.uuid(),n,t),m.read("BVBRANDSID")||m.create("BVBRANDSID",u.uuid(),e,t))},L._getBrandCookies=function(){var t={BVBRANDID:null,BVBRANDSID:null};return null!==this.getBrandDomain()&&navigator.cookieEnabled&&(t.BVBRANDID=m.read("BVBRANDID")||null,t.BVBRANDSID=m.read("BVBRANDSID")||null),t},L._timing=function(){var t,e=S["default"].performance||S["default"].webkitPerformance||S["default"].mozPerformance||S["default"].oPerformance||S["default"].msPerformance||!1;return e!==!1&&e.timing?(t=e.timing,{dns:t.domainLookupEnd-t.domainLookupStart,con:t.connectEnd-t.connectStart,req:t.responseStart-t.connectEnd,res:t.responseEnd-t.responseStart,load:t.loadEventStart-t.responseEnd,tot:t.loadEventEnd-t.navigationStart}):{}},L._isPII=function(t){return t&&"pii"===t.substring(0,3).toLowerCase()},L.setClient=function(t){this._shared.client=t},L.getClient=function(){return this._shared.client},L.setDisplay=function(t){this._shared.dc=t},L.getDisplay=function(){return this._shared.dc},L.setAnonymous=function(t){this._set("anonymous",t)},L.getAnonymous=function(){return this._get("anonymous")},L.setEU=function(t){this._set("eu",t)},L.getEU=function(){return this._get("eu")},L.setTrackerHostname=function(t){this._set("customTrackerHostname",t),this._id=null,this._bvCookiesRequest=B},L.getTrackerHostname=function(){var t=this._get("customTrackerHostname");return t?t:this.getEU()?this._get("euTrackerHostname"):this._get("trackerHostname")},L.setAnonTrackerHostname=function(t){this._set("customAnonTrackerHostname",t)},L.getAnonTrackerHostname=function(){var t=this._get("customAnonTrackerHostname");return t?t:this.getEU()?this._get("euAnonTrackerHostname"):this._get("anonTrackerHostname")},L.setBrandDomain=function(t){u.isString(t)&&t.length>0?this._setBrandCookies(t):t=null,this._set("brandDomain",t)},L.getBrandDomain=function(){return this._get("brandDomain")},L.enableTiming=function(){this._set("timing",!0)},L.disableTiming=function(){this._set("timing",!1)},L.setSource=function(t){this._shared.source=t},L.getSource=function(){return this._shared.source},L.setEnvironment=function(t){this._shared.environment=t},L.getEnvironment=function(){return this._shared.environment},L.setAudience=function(t){var e=this._shared;N[t]&&("public"===t?delete e.audience:e.audience=t)},L.getAudience=function(){return this._shared.audience||"public"},L.enableValidation=function(t){this._set("validate",!0),u.isFunction(t)&&this._set("validationCallback",t),this._prevTracker=this.getTrackerHostname(),this._prevAnonTracker=this.getAnonTrackerHostname(),this.setTrackerHostname("schema.mag.bazaarvoice.com"),this.setAnonTrackerHostname("schema.mag.bazaarvoice.com")},L.disableValidation=function(){this._set("validate",!1),this._set("validationCallback",null),this._prevTracker&&(this.setTrackerHostname(this._prevTracker),this._prevTracker=null),this._prevAnonTracker&&(this.setAnonTrackerHostname(this._prevAnonTracker),this._prevAnonTracker=null)},L.isValidating=function(){return this._get("validate")},L.setStaging=function(t){this._set("staging",!!t),t&&(this.setTrackerHostname("network-stg.bazaarvoice.com"),this.setAnonTrackerHostname("network-stg-a.bazaarvoice.com"))},L.getStaging=function(){return this._get("staging")},L.getEventClassFilter=function(){return this._get("eventClassFilter")},L.setEventClassFilter=function(t){if(u.isString(t))try{t=new RegExp(t)}catch(e){I["default"].error("Invalid regex passed to event class filter.")}this._set("eventClassFilter",t)},L.getID=function(t){u.isFunction(t)&&(this._id?t(this._id):this._idQueue.push(t))},L.trackEvent=function(t,e){var n;if(!this._filterClass(t))if(e=e||{},e.cl=t,u.transformData(e,"Brand","brand"),this._isPII(t)){var r=this.getAnonymous();this.setAnonymous(!0),n=this._getPixel(e),this._send(n),this.setAnonymous(r);var a={bvProduct:e.bvProduct,cl:e.cl,detail1:e.detail1,name:e.name,productId:e.productId};T["default"].dispatcher.fireCallbacks(t,a,this.name)}else n=this._getPixel(e),this._send(n),T["default"].dispatcher.fireCallbacks(t,n.ev,this.name)},L.trackPageView=function(t){t=t||{},u.extend(t,p["default"]),this._get("timing")&&(t.t=this._timing()),this.trackEvent("PageView",t)},L.trackConversion=function(t){var e=b["default"].create(t);e&&(e.containsPII()&&this.trackEvent(b["default"].PII_EVENT_CLASS,e.getPIIData()),this.trackEvent(b["default"].EVENT_CLASS,e.getAnonymizedData()))},L.trackTransaction=function(t){function e(t){if(t=u.extend({},t||{}),"transaction_id"in t&&(t.orderId=t.transaction_id,delete t.transaction_id),"products"in t&&(t.items=t.products,delete t.products),u.isArray(t.items)){var e,n;for(e=0,n=t.items.length;e<n;e++)t.items[e].orderId=t.orderId,"product_id"in t.items[e]&&(t.items[e].sku=t.items[e].product_id,delete t.items[e].product_id)}var r={type:"Transaction",label:"TransactionThankYou",value:null};for(var a in r)"undefined"==typeof t[a]&&(t[a]=r[a]);return t}this.trackConversion(e(t))},L.addMeta=function(t,e){this._shared.meta||(this._shared.meta={}),this._shared.meta[t]=e},L.removeMeta=function(t){var e=this._shared.meta;t in e&&e.hasOwnProperty(t)&&delete e[t]},L.addBatch=function(t){this._batch&&this._batch.items.length>0&&this.flushBatch(),this._batch={data:t||{},items:[]}},L.addBatchItem=function(t,e){var n;if(!this._filterClass(t)){if(this._isPII(t))return this.trackEvent(t,e);e=e||{},e.cl=t,u.transformData(e,"Brand","brand"),T["default"].dispatcher.fireCallbacks(t,this._getPixel(e).ev,this.name),this._batch||this.addBatch(),this._batch.items.push(e),n=this._getPixel(this.getBatch()),n.tooLong&&(this._batch.items.pop(),0===this._batch.items.length?this._send(n):(this.flushBatch(),this._batch.items.push(e)))}},L.flushBatch=function(){this._batch&&this._batch.items&&0!==this._batch.items.length&&(this._send(this._getPixel(this.getBatch())),this._batch.items=[])},L.getBatch=function(){return this._batch?u.extend({batch:this._batch.items},this._batch.data):""},L.push=function(){try{for(var t=0,e=arguments.length;t<e;t++){var n=arguments[t];if(u.isFunction(n))n.call(S["default"]);else if(u.isArray(n)){if(0===n.length)continue;var r=n[0];if(!u.isString(r)||"_"===r.charAt(0))continue;if(!u.isFunction(this[r]))continue;var a=n.slice(1),o=a[a.length-1],i=T["default"].trackers[o];if(!i){var s=!R[r]&&this[r].length===a.length||R[r]&&R[r](a);if(!s){I["default"].warn("No tracker was found with the name "+o);var c={name:"Implementation Error",type:"Error",source:"analyticsjs",detail1:"Named tracker was not found",detail2:o,detail3:r};this.trackEvent("Error",c);continue}i=T["default"].trackers["default"]}i[r].apply(i,a)}}}catch(l){I["default"].error(l.stack)}return 1},L.resetLoadId=function(){T["default"].loadId=u.loadId(),this._shared.loadId=T["default"].loadId},L.setLoadId=function(t){T["default"].loadId=t,this._shared.loadId=t},L.getLoadId=function(){return this._shared.loadId},L.configureSCIProvider=function(t,e){var n=w["default"].create(t,e);this.registerListener("*",n,this.name)},L.registerListener=function(t,e,n){return"function"==typeof t&&(n=e,e=t,t="*"),"function"!=typeof e?void I["default"].warn("registerListener arg callback must be a function"):"string"!=typeof n||"undefined"==typeof n?void I["default"].warn("registerListener arg name must be a string."):void T["default"].dispatcher.registerCallback(t,e,n)},t.exports=o},function(t,e){"use strict";function n(t){var e,n,r=[].slice.call(arguments,1);for(var a in r)if(r.hasOwnProperty(a)){e=r[a];for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}return t}function r(){return Math.round(2147483647*Math.random()).toString(36)}function a(t){return"[object Array]"===p.call(t)}function o(t){return s(t)&&"[object Function]"===p.call(t)}function i(t){return"string"==typeof t||c(t)&&"[object String]"===p.call(t)}function s(t){var e="undefined"==typeof t?"undefined":h(t);return!!t&&("object"===e||"function"===e)}function u(t){return"number"==typeof t||c(t)&&"[object Number]"===p.call(t)}function c(t){return!!t&&"object"===("undefined"==typeof t?"undefined":h(t))}function l(){for(var t=16,e=20,n=Math.floor(Math.random()*(e-t+1)+t),r="",a=0;a++<n;)r+=(16*Math.random()|0).toString(16);return r}function d(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"===t?e:e%4+8;return n.toString(16)})}function f(t,e,n){"undefined"!=typeof t&&null!==t&&e!==n&&t.hasOwnProperty(e)&&(t[n]=t[e],delete t[e])}var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p=Object.prototype.toString;t.exports={extend:n,buster:r,isArray:a,isFunction:o,isString:i,isObject:s,isNumber:u,isObjectLike:c,loadId:l,uuid:d,transformData:f}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t,e,n){var r,a=(t||"").indexOf("?")===-1?"?":"&";return s.isFunction(e)&&(r="_bvajsonp"+ ++f,h[r]=function(t){try{delete h[r]}catch(n){h[r]=null}e(t)},d["default"].loadScript(t+a+(n||"callback")+"="+r)),r}var i=n(3),s=a(i),u=n(5),c=r(u),l=n(6),d=r(l),f=0,h=c["default"];t.exports={get:o}},function(t,e){"use strict";t.exports=new Function("return this;")()},function(t,e,n){function r(){return s.getElementsByTagName("script")[0]}function a(t){return!t||"loaded"===t||"complete"===t||"uninitialized"===t}function o(t,e,n){if(!t||"string"!=typeof t)throw new Error("`url` must be a string");if("number"!=typeof e.timeout)throw new Error("`options.timeout` must be a number");if(n&&"function"!=typeof n)throw new Error("`callback` must be a function")}var i=n(5),s=i.document,u=1e4;t.exports={loadScript:function(t,e,n){function i(t){d=!0,clearTimeout(f),l.onload=l.onreadystatechange=l.onerror=null,l.parentNode.removeChild(l),"function"==typeof n&&n(t)}"function"==typeof e&&(n=e,e=null),e=e||{},e.timeout=e.timeout||u,o(t,e,n);var c,l=s.createElement("script"),d=!1;if(e.attributes)for(c in e.attributes)l.setAttribute(c,e.attributes[c]);l.onreadystatechange=l.onload=function(){!d&&a(l.readyState)&&i()},l.onerror=function(){d||i(new Error("Error: could not load "+t))};var f=setTimeout(function(){d||i(new Error("Error: script timeout "+t))},e.timeout);setTimeout(function(){l.src=t;var e=r();e.parentNode.insertBefore(l,e)},0)},loadStyleSheet:function(t,e,n){function c(t){f=!0,clearTimeout(h),d.onload=d.onreadystatechange=d.onerror=null,"function"==typeof n&&n(t)}if("function"==typeof e&&(n=e,e=null),e=e||{},e.timeout=e.timeout||u,o(t,e,n),"injectionNode"in e&&!(e.injectionNode instanceof i.Element))throw new Error("`options.injectionNode` must be a DOM node");var l,d=s.createElement("link"),f=!1;if(e.attributes)for(l in e.attributes)d.setAttribute(l,e.attributes[l]);d.onreadystatechange=d.onload=function(){!f&&a(d.readyState)&&c()},d.onerror=function(){f||c(new Error("Error: could not load "+t))};var h=setTimeout(d.onerror,e.timeout);setTimeout(function(){d.media="only x",d.rel="stylesheet",d.type="text/css",d.href=t,setTimeout(function(){d.media="all"},0);var n=e.injectionNode||r().parentNode;try{n.appendChild(d)}catch(a){c(new Error("Error: could not append LINK element"))}},0)}}},function(t,e){"use strict";function n(t,e,n,r){t.addEventListener?t.addEventListener(e,n,!!r):t.attachEvent&&t.attachEvent("on"+e,n)}function r(t,e,n,r){t.removeEventListener?t.removeEventListener(e,n,!!r):t.detachEvent&&t.detachEvent("on"+e,n)}t.exports={add:n,remove:r}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var a,o,i=n(5),s=r(i),u=s["default"].navigator,c=s["default"].screen,l=document,d=l.getElementsByTagName("link"),f=d.length;for(o=0;o<f;o++)"canonical"===d[o].getAttribute("rel")&&(a=d[o].href);t.exports={host:s["default"].location.host,href:s["default"].location.href,ref:l.referrer,canurl:a,res:c?c.width+"x"+c.height:"-",lang:(u&&(u.language||u.browserLanguage)||"-").toLowerCase(),charset:l.characterSet||l.charset||"-",geo:navigator.geolocation?1:0,cookies:navigator.cookieEnabled?1:0}},function(t,e,n){var r=n(5);t.exports={create:function(t,e,n,a,o){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3);var s=n?";expires="+i.toGMTString():"",u=encodeURIComponent(t)+"="+encodeURIComponent(e)+s+";path=/"+(a?";domain="+a:"")+(o?";secure":"");r.document.cookie=u},read:function(t){var e,n=encodeURIComponent(t)+"=",a=r.document.cookie.split(";");for(e=0;e<a.length;e++){for(var o=a[e];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(n))return decodeURIComponent(o.substring(n.length,o.length))}return null},remove:function(t){this.create(t,"",-1)}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t,e,n,r,a,o){var i=(e?"a":"st")+(t?".json":".gif");this.anonymous=e,this.hostname=n,this._baseUrl=_+"://"+this.hostname+"/"+i,this._sharedData=r,this._brandCookies=a,this.data=o,this.tooLong=!1,this.validating=t,s.isObject(this.data)?(this.data.cl=this.data.cl||null,this.ev=this._buildEvent(this.data),this.url=this._buildUrl({ev:this.ev,ignoreTooLong:!1})):this.url=""}var i=n(3),s=a(i),u=n(11),c=r(u),l=n(12),d=r(l),f=n(13),h="r_",p=2036,g=f?p:8192,m={PageView:{ref:1}},v={cl:0,loadId:1,type:2},_="https";o.prototype._buildEvent=function(t){var e=s.extend({},this._sharedData,this._brandCookies,t);return e._=s.buster(),e},o.prototype._buildUrl=function(t){var e,n,r,a=t||{};return(e=this.encode(t.ev))?(n=this._baseUrl+"?"+e.required,r=g-n.length,r<0?(n=a.ignoreTooLong?"":this._urlTooLong(n,e),this.tooLong=!0):e.optional.length>0&&(n+=this.addOptional(e.optional,r)),n):""},o.prototype._urlTooLong=function(t,e){var n={cl:"Magpie",type:"LongUrl",length:(t||"").length,maxLength:g,targetCl:this.data.cl?this.data.cl.substr(0,200):null,longestField:e.longestField.substr(0,200)};return this._buildUrl({ev:this._buildEvent(n),ignoreTooLong:!0})},o.prototype.addOptional=function(t,e){var n,r,a,o,i="";for(t=t||[],o=t.length,n=0;e>0&&n<o;n++)r=t[n]||"",r.length+1>e&&(r=r.substr(0,e-1),r.indexOf("=")===-1)||(a="&"+r,i+=a,e-=a.length);return i},o.prototype.quoteParam=function(t,e){var n=null;if(void 0!==t&&void 0!==e)try{(s.isArray(e)||s.isObject(e))&&(t=h+t,e=c["default"].encode(e)),n=c["default"].quote(t)+"="+c["default"].quote(""+e)}catch(r){d["default"].error(r.stack)}return n},o.prototype.encode=function(t){var e,n,r=m[t.cl]||{},a=0,o=[],i=[],u={optional:[],longestField:null};if(!s.isObject(t))return null;for(e in t)if(t.hasOwnProperty(e)&&null!==t[e]&&t[e]===t[e]&&(n=this.quoteParam(e,t[e]),null!==n))if(r&&e in r)u.optional.push(n);else{if(e in v){var c=v[e];o.length>c?o.splice(c,0,n):o.push(n)}else i.push(n);n.length>a&&(u.longestField=e,a=n.length)}return u.required=o.concat(i).join("&"),u},t.exports=o},function(t,e){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r={};r.uri_ok={"~":!0,"!":!0,"*":!0,"(":!0,")":!0,"-":!0,_:!0,".":!0,",":!0,":":!0,"@":!0,$:!0,"'":!0,"/":!0},function(){for(var t=[],e=0;e<16;e++)for(var n=0;n<16;n++)if(e+n!==0){var a=String.fromCharCode(16*e+n);/\w|[\-_.\/~]/.test(a)||t.push("\\u00"+e.toString(16)+n.toString(16))}r.not_idchar=t.join("")}(),r.not_idchar=" \t\r\n\"<>\\[\\]{}'!=:(),*@$;&",r.not_idstart="-0123456789",function(){var t="[^"+r.not_idstart+r.not_idchar+"][^"+r.not_idchar+"]*";r.id_ok=new RegExp("^"+t+"$"),r.next_id=new RegExp(t,"g")}(),r.quote=function(t){var e=r.uri_ok;return/^[A-Za-z0-9_\-]*$/.test(t)?t:(t=t.replace(/([^A-Za-z0-9_\-])/g,function(t,n){var r=e[n];return r?n:encodeURIComponent(n)}),t.replace(/%20/g,"+"))},function(){var t={"'":!0,"!":!0},e={array:function(t){var r,a,o,i,s=["!("],u=t.length;for(o=0;o<u;o+=1)i=t[o],a=e["undefined"==typeof i?"undefined":n(i)],a&&(i=a(i),"string"==typeof i&&(r&&(s[s.length]=","),s[s.length]=i,r=!0));return s[s.length]=")",s.join("")},"boolean":function(t){return t?"!t":"!f"},"null":function(t){return"!n"},number:function(t){return isFinite(t)?String(t).replace(/\+/,""):"!n"},object:function(t){if(t){if(t instanceof Array)return e.array(t);if("object"===n(t.__prototype__)&&"undefined"!=typeof t.__prototype__.encode_rison)return t.encode_rison();var r,a,o,i,s,u=["("],c=[];for(o in t)c[c.length]=o;for(c.sort(),s=0;s<c.length;s++)o=c[s],i=t[o],a=e["undefined"==typeof i?"undefined":n(i)],a&&(i=a(i),"string"==typeof i&&(r&&(u[u.length]=","),u.push(e.string(o),":",i),r=!0));return u[u.length]=")",u.join("")}return"!n"},string:function(e){return""===e?"''":r.id_ok.test(e)?e:(e=e.replace(/(['!])/g,function(e,n){return t[n]?"!"+n:n}),"'"+e+"'")},undefined:function(t){return"!n"}};r.encode=function(t){return e["undefined"==typeof t?"undefined":n(t)](t)}}(),t.exports=r},function(t,e,n){function r(t,e){if(s!==h.OFF&&a.console){if(e=[].slice.call(e),"function"==typeof e[0]&&(e=e[0]()),o)return void console.log(e);try{(console[t]||console.log).apply(console,e)}catch(n){}}}var a=n(5),o=n(13),i=n(9),s=4,u={},c=i.read("_bvui_debug");if(c)for(var l,d=c.split(","),f=0;f<d.length;f++)l=d[f].split(":"),u[l[0]]=l[1];u.logLevel&&(s=u.logLevel);var h={DEBUG:-1,LOG:0,INFO:1,WARN:2,ERROR:3,OFF:4,getLogLevel:function(){return s},setLogLevel:function(t,e){s=!u.logLevel||e?t||h.LOG:u.logLevel,r("log",["Log level set to",s])},debug:function(){s<=h.DEBUG&&r("log",arguments)},log:function(){s<=h.LOG&&r("log",arguments)},info:function(){s<=h.INFO&&r("info",arguments)},warn:function(){s<=h.WARN&&r("warn",arguments)},error:function(){s<=h.ERROR&&r("error",arguments)},count:function(){s<h.INFO&&r("count",arguments)},time:function(){s<h.WARN&&r("time",arguments)},timeEnd:function(){s<h.WARN&&r("timeEnd",arguments)},group:function(t){var e=Array.prototype.slice.call(arguments,1);s<=t&&(r("group",e),r("time",e))},groupEnd:function(t){var e=Array.prototype.slice.call(arguments,1);s<=t&&(r("groupEnd",e),r("timeEnd",e))},assert:function(t,e){if(s!==h.OFF){if("function"==typeof t)return void h.assert.apply(null,t());if(!t)throw new Error("Assertion failed: "+e)}}};t.exports=h},function(t,e,n){var r=n(5).document;t.exports=function(){var t=function(t,e,n){for(var r=e.getElementsByTagName("i");e.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->",r[0];);return t>4?t:n}(3,r.createElement("div"));return t}()},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function a(t,e){var n=t&&t[e];return null!==n&&void 0!==n}function o(t,e){var n=e.length;if(!u.isObject(t)&&n<0)return!1;for(;n--;)if(!a(t,e[n]))return!1;return!0}function i(t){return o(t,f)}var s=n(3),u=r(s),c="Conversion",l="PII"+c,d={orderId:1,affiliation:1,total:1,tax:1,shipping:1,city:1,state:1,country:1,currency:1,items:1,locale:1,type:1,label:1,value:1,proxy:1,partnerSource:1,deploymentZone:1,TestCase:1,TestSession:1},f=["type"],h="public_",p=function(t){var e;this._data=t,this._anonymized={},this._hasPII=!1;for(e in t)t.hasOwnProperty(e)&&(d[e]||0===e.indexOf(h)?this._anonymized[e]=t[e]:this._hasPII=!0);this._hasPII===!0&&(this._anonymized.hadPII=!0)},g=p.prototype;g.containsPII=function(){return this._hasPII},g.getAnonymizedData=function(){return this._anonymized},g.getPIIData=function(){return this._data},t.exports={EVENT_CLASS:c,PII_EVENT_CLASS:l,create:function(t){return i(t)?new p(t):null}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var a=n(3),o=n(16),i=r(o),s=n(17),u=r(s),c=n(18),l=i["default"].namespace("BVA");try{l.registerProperty("trackers",{})}catch(d){}try{l.registerProperty("loadId",(0,a.loadId)())}catch(d){}try{l.registerProperty("dispatcher",new u["default"])}catch(d){var f=l.dispatcher.version,h=u["default"].prototype.version;1===c(h,f)&&(l.dispatcher=u["default"].copy(l.dispatcher))}t.exports=l},function(t,e,n){function r(t){this.name=t}var a=n(5);r.prototype.registerProperty=function(t,e){if(this.hasOwnProperty(t))throw new Error("Cannot register "+t+" because a property with that name already exists on window."+this.name);return this[t]=e,this},t.exports={namespace:function(t){if(void 0===a[t])a[t]=new r(t);else{if("object"!=typeof a[t])throw new Error("Namespace "+t+" cannot be created. A non-object variable is already assigned to window."+t);if(!(a[t]instanceof r)){r.call(a[t],t);for(var e in r.prototype)a[t][e]=r.prototype[e]}}return a[t]}}},function(t,e,n){"use strict";function r(){this.callbacks={"default":{"*":[]}}}r.prototype.registerCallback=function(t,e,n){this.callbacks[n]=this.callbacks[n]||{"*":[]},this.callbacks[n][t]=this.callbacks[n][t]||[],this.callbacks[n][t].push(e)},r.prototype.fireCallbacks=function(t,e,n){if("undefined"!=typeof this.callbacks[n]){var r=this.callbacks[n][t];r&&r.forEach(function(t){t(e)}),"*"!==t&&this.callbacks[n]["*"].forEach(function(t){t(e)})}},r.prototype.version="3.6.1",r.copy=function(t){var e=new r;return e.callbacks=t.callbacks,e},t.exports=r},function(t,e){t.exports=function(t,e){for(var n=t.split("."),r=e.split("."),a=0;a<3;a++){var o=Number(n[a]),i=Number(r[a]);if(o>i)return 1;if(i>o)return-1;if(!isNaN(o)&&isNaN(i))return 1;if(isNaN(o)&&!isNaN(i))return-1}return 0}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_global=__webpack_require__(5),_global2=_interopRequireDefault(_global),_logger=__webpack_require__(12),_logger2=_interopRequireDefault(_logger),vendorMap={ADOBE:"AdobeSiteCatalyst",IBM:"IBMDigitalAnalytics",GOOGLE:"GoogleAnalytics"},eventGroup="Bazaarvoice",delimiter=" : ",trackingMap={Ask:{label:["Button"]},Click:{label:["SecondaryContentLink","ViewProfileButton","Stars","ReadReviewsButton","SummaryStars","WriteReviewLabel","ReviewCount","SummaryQuestionStats","YesHelpfulVote","NoHelpfulVote","ReportLink","UserSubmittedMedia","YesVote","NoVote","Report","UserSubmittedPhoto"]},Close:{label:["Submission","SecondaryContent","UserSubmittedMedia","Search","UserSubmittedPhoto"]},Filter:{label:["1Star","2Stars","3Stars","4Stars","5Stars","Clear1Star","Clear2Stars","Clear3Stars","Clear4Stars","Clear5Stars","ClearAll"]},Hover:{label:["Histogram","Profile"]},Paginate:{label:["First","Last","Next","Prev"]},Search:{label:["UserGeneratedContent","SearchBarRatingSummary","TopicsAndReviews"]},Share:{label:["Button"]},Sort:{label:["featured","mostRecent","oldest","positive","negative","mostHelpful","mostUnhelpful","relevancy","recentQuestionsFirst","recentQuestionsLast","recentAnswersFirst","recentAnswersLast","mostAnsweredQuestionsFirst","mostAnsweredQuestionsLast","featuredQuestionsFirst","helpfulnessAnswersFirst","helpfulnessAnswersLast"]},Write:{label:["Button"]}},getSiteCatalystTracker=function(t){var e=t||"s",n=_global2["default"][e];return n&&"object"===("undefined"==typeof n?"undefined":_typeof(n))?n:void _logger2["default"].warn(e+" bad trackerRef")},getGoogleAnalyticsTracker=function getGoogleAnalyticsTracker(vendorTracker,method){var trackerRef=vendorTracker,trackerMethod=method,tracker,trackerType="object";if(trackerRef){if(!method)if("pageTracker"===trackerRef)trackerMethod="SYNCHRONOUS";else if("_gaq"===trackerRef)trackerMethod="ASYNCHRONOUS";else{if("ga"!==trackerRef)return void _logger2["default"].warn("getGoogleAnalyticsTracker: could not determine trackerMethod");trackerMethod="UNIVERSAL"}}else if(trackerMethod&&"SYNCHRONOUS"!==trackerMethod||"object"!==("undefined"==typeof pageTracker?"undefined":_typeof(pageTracker)))if(trackerMethod&&"ASYNCHRONOUS"!==trackerMethod||"object"!==_typeof(_global2["default"]._gaq)){if(trackerMethod&&"UNIVERSAL"!==trackerMethod||"function"!=typeof _global2["default"].ga)return void _logger2["default"].warn("getGoogleAnalyticsTracker: could not determine trackerRef");trackerRef="ga",trackerMethod="UNIVERSAL"}else trackerRef="_gaq",trackerMethod="ASYNCHRONOUS";else trackerRef="pageTracker",trackerMethod="SYNCHRONOUS";if("ga"!==trackerRef&&"UNIVERSAL"!==trackerMethod||(trackerType="function"),tracker=_global2["default"][trackerRef],!tracker||("undefined"==typeof tracker?"undefined":_typeof(tracker))!==trackerType){try{tracker=eval(trackerRef)}catch(e){return}if(!tracker||("undefined"==typeof tracker?"undefined":_typeof(tracker))!==trackerType)return void _logger2["default"].warn(trackerRef+" bad trackerRef")}return"SYNCHRONOUS"===trackerMethod?{trackEvent:function(t,e,n,r,a){tracker._trackEvent(t,e,n,r,a)}}:"ASYNCHRONOUS"===trackerMethod?{trackEvent:function(t,e,n,r,a){tracker.push(["_trackEvent",t,e,n,r,a])}}:"UNIVERSAL"===trackerMethod?{trackEvent:function(t,e,n,r,a){tracker("send","event",t,e,n,r,{nonInteraction:a})}}:void _logger2["default"].warn("getGoogleAnalyticsTracker: trackEvent could not be defined")},callWap=function(t,e){for(var n={},r=[],a=2;a<arguments.length;a++)r.push((arguments[a]||"").toString());var o=r.join("~#~");if(!n[o]){n[o]=!0;try{e.apply(t,[].slice.call(arguments,2))}catch(i){_logger2["default"].error("Error calling WAP: "+i.stack)}}},isEventTracked=function(t,e,n){if("Feature"===t&&e in trackingMap)for(var r=0;r<trackingMap[e].label.length;r++)if(trackingMap[e].label[r]===n||"ANY"===trackingMap[e].label[r])return!0;return!1},adobeSiteCatalystCallback=function(t){var e=t||{},n=getSiteCatalystTracker(e.tracker||null);return n?function(t){if(isEventTracked(t.cl,t.name,t.detail1)){var r=_global2["default"].event||_global2["default"],a=e.event,o=e.evar,i=t.detail1.charAt(0).toUpperCase()+t.detail1.slice(1),s=eventGroup+delimiter+t.bvProduct+delimiter+t.name+i;n.linkTrackEvents="event"+a,n.events="event"+a,n["eVar"+o]=s,n.linkTrackVars="events,evar"+o,n.products&&(n.linkTrackVars+=",products",n.products=n.products.replace(/([^,;]*;[^,;]*);[^,]*/g,"$1")),n.linkTrackVars+=",eVar"+o,callWap(n,n.tl,r,"o",s+delimiter+t.productId)}}:function(){}},ibmDigitalAnalyticsCallback=function(t){if("object"===_typeof(_global2["default"].cG7)&&isEventTracked(t.cl,t.name,t.detail1)){var e=_global2["default"].cG7.cM0[_global2["default"].cm_ClientID],n=eventGroup+delimiter+t.bvProduct,r=t.detail1.charAt(0).toUpperCase()+t.detail1.slice(1);callWap(_global2["default"],_global2["default"].cmCreateElementTag,t.name+r,n),_global2["default"].cG7.cM0[_global2["default"].cm_ClientID]=e;
}},googleAnalyticsCallback=function(t){var e=t||{},n=getGoogleAnalyticsTracker(e.tracker||null,e.method);return n?function(t){var e=eventGroup+delimiter+t.bvProduct+delimiter,r=_global2["default"].location.pathname;if("PageView"===t.cl&&t.bvProduct)callWap(n,n.trackEvent,"Bazaarvoice Content Loaded",e+"Product"+t.cl,r,void 0,!0);else if(isEventTracked(t.cl,t.name,t.detail1)){var a=t.detail1.charAt(0).toUpperCase()+t.detail1.slice(1);callWap(n,n.trackEvent,eventGroup+" "+t.bvProduct,e+t.name+a,r,void 0,!1)}}:function(){}};module.exports={create:function(t,e){switch(t){case vendorMap.ADOBE:return adobeSiteCatalystCallback(e);case vendorMap.IBM:return ibmDigitalAnalyticsCallback;case vendorMap.GOOGLE:return googleAnalyticsCallback(e)}throw _logger2["default"].error("Error creating vendor callback. The named vendor integration was not found."),new Error("The named vendor integration was not found.")},_getSiteCatalystTracker:getSiteCatalystTracker,_getGoogleAnalyticsTracker:getGoogleAnalyticsTracker,_isEventTracked:isEventTracked,_callWap:callWap}}]);