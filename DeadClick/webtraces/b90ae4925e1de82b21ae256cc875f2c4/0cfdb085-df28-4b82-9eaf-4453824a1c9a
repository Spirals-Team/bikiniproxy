function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(function(){function t(t,e){if(t!==e){var n=t===t,i=e===e;if(t>e||!n||t===x&&i)return 1;if(t<e||!i||e===x&&n)return-1}return 0}function e(t,e,n){for(var i=t.length,o=n?i:-1;n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function n(t,e,n){if(e!==e)return h(t,n);for(var i=n-1,o=t.length;++i<o;)if(t[i]===e)return i;return-1}function i(t){return"function"==typeof t||!1}function o(t){return"string"==typeof t?t:null==t?"":t+""}function a(t){return t.charCodeAt(0)}function s(t,e){for(var n=-1,i=t.length;++n<i&&e.indexOf(t.charAt(n))>-1;);return n}function r(t,e){for(var n=t.length;n--&&e.indexOf(t.charAt(n))>-1;);return n}function l(e,n){return t(e.criteria,n.criteria)||e.index-n.index}function c(e,n,i){for(var o=-1,a=e.criteria,s=n.criteria,r=a.length,l=i.length;++o<r;){var c=t(a[o],s[o]);if(c)return o>=l?c:c*(i[o]?1:-1)}return e.index-n.index}function d(t){return Ot[t]}function u(t){return Nt[t]}function p(t){return"\\"+qt[t]}function h(t,e,n){for(var i=t.length,o=e+(n?0:-1);n?o--:++o<i;){var a=t[o];if(a!==a)return o}return-1}function m(t){return!!t&&"object"==typeof t}function f(t){return t<=160&&t>=9&&t<=13||32==t||160==t||5760==t||6158==t||t>=8192&&(t<=8202||8232==t||8233==t||8239==t||8287==t||12288==t||65279==t)}function g(t,e){for(var n=-1,i=t.length,o=-1,a=[];++n<i;)t[n]===e&&(t[n]=F,a[++o]=n);return a}function b(t,e){for(var n,i=-1,o=t.length,a=-1,s=[];++i<o;){var r=t[i],l=e?e(r,i,t):r;i&&n===l||(n=l,s[++a]=r)}return s}function y(t){for(var e=-1,n=t.length;++e<n&&f(t.charCodeAt(e)););return e}function v(t){for(var e=t.length;e--&&f(t.charCodeAt(e)););return e}function w(t){return Ft[t]}function S(f){function Ot(t){if(m(t)&&!Ir(t)&&!(t instanceof jt)){if(t instanceof Ft)return t;if(Fa.call(t,"__chain__")&&Fa.call(t,"__wrapped__"))return oi(t)}return new Ft(t)}function Nt(){}function Ft(t,e,n){this.__wrapped__=t,this.__actions__=n||[],this.__chain__=!!e}function jt(t){this.__wrapped__=t,this.__actions__=null,this.__dir__=1,this.__dropCount__=0,this.__filtered__=!1,this.__iteratees__=null,this.__takeCount__=ws,this.__views__=null}function qt(){var t=this.__actions__,e=this.__iteratees__,n=this.__views__,i=new jt(this.__wrapped__);return i.__actions__=t?ne(t):null,i.__dir__=this.__dir__,i.__filtered__=this.__filtered__,i.__iteratees__=e?ne(e):null,i.__takeCount__=this.__takeCount__,i.__views__=n?ne(n):null,i}function Ht(){if(this.__filtered__){var t=new jt(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Wt(){var t=this.__wrapped__.value();if(!Ir(t))return tn(t,this.__actions__);var e=this.__dir__,n=e<0,i=zn(0,t.length,this.__views__),o=i.start,a=i.end,s=a-o,r=n?a:o-1,l=ms(s,this.__takeCount__),c=this.__iteratees__,d=c?c.length:0,u=0,p=[];t:for(;s--&&u<l;){r+=e;for(var h=-1,m=t[r];++h<d;){var f=c[h],g=f.iteratee,b=f.type;if(b==V){if(f.done&&(n?r>f.index:r<f.index)&&(f.count=0,f.done=!1),f.index=r,!f.done){var y=f.limit;if(!(f.done=y>-1?f.count++>=y:!g(m)))continue t}}else{var v=g(m);if(b==O)m=v;else if(!v){if(b==z)continue t;break t}}}p[u++]=m}return p}function Gt(){this.__data__={}}function $t(t){return this.has(t)&&delete this.__data__[t]}function Zt(t){return"__proto__"==t?x:this.__data__[t]}function Kt(t){return"__proto__"!=t&&Fa.call(this.__data__,t)}function Jt(t,e){return"__proto__"!=t&&(this.__data__[t]=e),this}function Xt(t){var e=t?t.length:0;for(this.data={hash:ds(null),set:new ns};e--;)this.push(t[e])}function te(t,e){var n=t.data;return("string"==typeof e||xo(e)?n.set.has(e):n.hash[e])?0:-1}function ee(t){var e=this.data;"string"==typeof t||xo(t)?e.set.add(t):e.hash[t]=!0}function ne(t,e){var n=-1,i=t.length;for(e||(e=_a(i));++n<i;)e[n]=t[n];return e}function ie(t,e){for(var n=-1,i=t.length;++n<i&&!1!==e(t[n],n,t););return t}function oe(t,e){for(var n=t.length;n--&&!1!==e(t[n],n,t););return t}function ae(t,e){for(var n=-1,i=t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function se(t,e){for(var n=-1,i=t.length,o=-1,a=[];++n<i;){var s=t[n];e(s,n,t)&&(a[++o]=s)}return a}function re(t,e){for(var n=-1,i=t.length,o=_a(i);++n<i;)o[n]=e(t[n],n,t);return o}function le(t){for(var e=-1,n=t.length,i=vs;++e<n;){var o=t[e];o>i&&(i=o)}return i}function ce(t){for(var e=-1,n=t.length,i=ws;++e<n;){var o=t[e];o<i&&(i=o)}return i}function de(t,e,n,i){var o=-1,a=t.length;for(i&&a&&(n=t[++o]);++o<a;)n=e(n,t[o],o,t);return n}function ue(t,e,n,i){var o=t.length;for(i&&o&&(n=t[--o]);o--;)n=e(n,t[o],o,t);return n}function pe(t,e){for(var n=-1,i=t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}function he(t){for(var e=t.length,n=0;e--;)n+=+t[e]||0;return n}function me(t,e){return t===x?e:t}function fe(t,e,n,i){return t!==x&&Fa.call(i,n)?t:e}function ge(t,e,n){var i=Ur(e);Xa.apply(i,Ns(e));for(var o=-1,a=i.length;++o<a;){var s=i[o],r=t[s],l=n(r,e[s],s,t,e);(l===l?l===r:r!==r)&&(r!==x||s in t)||(t[s]=l)}return t}function be(t,e){for(var n=-1,i=t.length,o=$n(i),a=e.length,s=_a(a);++n<a;){var r=e[n];s[n]=o?qn(r,i)?t[r]:x:t[r]}return s}function ye(t,e,n){n||(n={});for(var i=-1,o=e.length;++i<o;){var a=e[i];n[a]=t[a]}return n}function ve(t,e,n){var i=typeof t;return"function"==i?e===x?t:on(t,e,n):null==t?ha:"object"==i?Ve(t):e===x?va(t):ze(t,e)}function we(t,e,n,i,o,a,s){var r;if(n&&(r=o?n(t,i,o):n(t)),r!==x)return r;if(!xo(t))return t;var l=Ir(t);if(l){if(r=On(t),!e)return ne(t,r)}else{var c=qa.call(t),d=c==$;if(c!=K&&c!=j&&(!d||o))return Vt[c]?Fn(t,c,e):o?t:{};if(r=Nn(d?{}:t),!e)return Es(r,t)}a||(a=[]),s||(s=[]);for(var u=a.length;u--;)if(a[u]==t)return s[u];return a.push(t),s.push(r),(l?ie:Ee)(t,function(i,o){r[o]=we(i,e,n,o,t,a,s)}),r}function Se(t,e,n){if("function"!=typeof t)throw new Ua(N);return is(function(){t.apply(x,n)},e)}function xe(t,e){var i=t?t.length:0,o=[];if(!i)return o;var a=-1,s=Vn(),r=s==n,l=r&&e.length>=200?Bs(e):null,c=e.length;l&&(s=te,r=!1,e=l);t:for(;++a<i;){var d=t[a];if(r&&d===d){for(var u=c;u--;)if(e[u]===d)continue t;o.push(d)}else s(e,d,0)<0&&o.push(d)}return o}function Ie(t,e){var n=!0;return Ds(t,function(t,i,o){return n=!!e(t,i,o)}),n}function Ce(t,e,n,i){var o=t.length;for(n=null==n?0:+n||0,n<0&&(n=-n>o?0:o+n),i=i===x||i>o?o:+i||0,i<0&&(i+=o),o=n>i?0:i>>>0,n>>>=0;n<o;)t[n++]=e;return t}function Te(t,e){var n=[];return Ds(t,function(t,i,o){e(t,i,o)&&n.push(t)}),n}function _e(t,e,n,i){var o;return n(t,function(t,n,a){if(e(t,n,a))return o=i?n:t,!1}),o}function ke(t,e,n){for(var i=-1,o=t.length,a=-1,s=[];++i<o;){var r=t[i];if(m(r)&&$n(r.length)&&(Ir(r)||fo(r))){e&&(r=ke(r,e,n));var l=-1,c=r.length;for(s.length+=c;++l<c;)s[++a]=r[l]}else n||(s[++a]=r)}return s}function Le(t,e){return Rs(t,e,Oo)}function Ee(t,e){return Rs(t,e,Ur)}function Ae(t,e){return Ms(t,e,Ur)}function De(t,e){for(var n=-1,i=e.length,o=-1,a=[];++n<i;){var s=e[n];Tr(t[s])&&(a[++o]=s)}return a}function Pe(t,e,n){if(null!=t){n!==x&&n in ni(t)&&(e=[n]);for(var i=-1,o=e.length;null!=t&&++i<o;)var a=t=t[e[i]];return a}}function Re(t,e,n,i,o,a){if(t===e)return 0!==t||1/t==1/e;var s=typeof t,r=typeof e;return"function"!=s&&"object"!=s&&"function"!=r&&"object"!=r||null==t||null==e?t!==t&&e!==e:Me(t,e,Re,n,i,o,a)}function Me(t,e,n,i,o,a,s){var r=Ir(t),l=Ir(e),c=q,d=q;r||(c=qa.call(t),c==j?c=K:c!=K&&(r=Ao(t))),l||(d=qa.call(e),d==j?d=K:d!=K&&(l=Ao(e)));var u=c==K,p=d==K,h=c==d;if(h&&!r&&!u)return Rn(t,e,c);if(!o){var m=u&&Fa.call(t,"__wrapped__"),f=p&&Fa.call(e,"__wrapped__");if(m||f)return n(m?t.value():t,f?e.value():e,i,o,a,s)}if(!h)return!1;a||(a=[]),s||(s=[]);for(var g=a.length;g--;)if(a[g]==t)return s[g]==e;a.push(t),s.push(e);var b=(r?Pn:Mn)(t,e,n,i,o,a,s);return a.pop(),s.pop(),b}function Ue(t,e,n,i,o){for(var a=-1,s=e.length,r=!o;++a<s;)if(r&&i[a]?n[a]!==t[e[a]]:!(e[a]in t))return!1;for(a=-1;++a<s;){var l=e[a],c=t[l],d=n[a];if(r&&i[a])var u=c!==x||l in t;else(u=o?o(c,d,l):x)===x&&(u=Re(d,c,o,!0));if(!u)return!1}return!0}function Be(t,e){var n=-1,i=Os(t),o=$n(i)?_a(i):[];return Ds(t,function(t,i,a){o[++n]=e(t,i,a)}),o}function Ve(t){var e=Ur(t),n=e.length;if(!n)return pa(!0);if(1==n){var i=e[0],o=t[i];if(Zn(o))return function(t){return null!=t&&(t[i]===o&&(o!==x||i in ni(t)))}}for(var a=_a(n),s=_a(n);n--;)o=t[e[n]],a[n]=o,s[n]=Zn(o);return function(t){return null!=t&&Ue(ni(t),e,a,s)}}function ze(t,e){var n=Ir(t),i=Wn(t)&&Zn(e),o=t+"";return t=ii(t),function(a){if(null==a)return!1;var s=o;if(a=ni(a),(n||!i)&&!(s in a)){if(null==(a=1==t.length?a:Pe(a,Ge(t,0,-1))))return!1;s=yi(t),a=ni(a)}return a[s]===e?e!==x||s in a:Re(e,a[s],null,!0)}}function Oe(t,e,n,i,o){if(!xo(t))return t;var a=$n(e.length)&&(Ir(e)||Ao(e));if(!a){var s=Ur(e);Xa.apply(s,Ns(e))}return ie(s||e,function(r,l){if(s&&(l=r,r=e[l]),m(r))i||(i=[]),o||(o=[]),Ne(t,e,l,Oe,n,i,o);else{var c=t[l],d=n?n(c,r,l,t,e):x,u=d===x;u&&(d=r),!a&&d===x||!u&&(d===d?d===c:c!==c)||(t[l]=d)}}),t}function Ne(t,e,n,i,o,a,s){for(var r=a.length,l=e[n];r--;)if(a[r]==l)return void(t[n]=s[r]);var c=t[n],d=o?o(c,l,n,t,e):x,u=d===x;u&&(d=l,$n(l.length)&&(Ir(l)||Ao(l))?d=Ir(c)?c:Os(c)?ne(c):[]:_r(l)||fo(l)?d=fo(c)?Ro(c):_r(c)?c:{}:u=!1),a.push(l),s.push(d),u?t[n]=i(d,l,o,a,s):(d===d?d!==c:c===c)&&(t[n]=d)}function Fe(t){return function(e){return null==e?x:e[t]}}function je(t){var e=t+"";return t=ii(t),function(n){return Pe(n,t,e)}}function qe(t,e){for(var n=e.length;n--;){var i=parseFloat(e[n]);if(i!=o&&qn(i)){var o=i;os.call(t,i,1)}}return t}function He(t,e){return t+Ya(ys()*(e-t+1))}function We(t,e,n,i,o){return o(t,function(t,o,a){n=i?(i=!1,t):e(n,t,o,a)}),n}function Ge(t,e,n){var i=-1,o=t.length;e=null==e?0:+e||0,e<0&&(e=-e>o?0:o+e),n=n===x||n>o?o:+n||0,n<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var a=_a(o);++i<o;)a[i]=t[i+e];return a}function $e(t,e){var n;return Ds(t,function(t,i,o){return!(n=e(t,i,o))}),!!n}function Ze(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function Ke(t,e,n){var i=Bn(),o=-1;return e=re(e,function(t){return i(t)}),Ze(Be(t,function(t){return{criteria:re(e,function(e){return e(t)}),index:++o,value:t}}),function(t,e){return c(t,e,n)})}function Ye(t,e){var n=0;return Ds(t,function(t,i,o){n+=+e(t,i,o)||0}),n}function Qe(t,e){var i=-1,o=Vn(),a=t.length,s=o==n,r=s&&a>=200,l=r?Bs():null,c=[];l?(o=te,s=!1):(r=!1,l=e?[]:c);t:for(;++i<a;){var d=t[i],u=e?e(d,i,t):d;if(s&&d===d){for(var p=l.length;p--;)if(l[p]===u)continue t;e&&l.push(u),c.push(d)}else o(l,u,0)<0&&((e||r)&&l.push(u),c.push(d))}return c}function Je(t,e){for(var n=-1,i=e.length,o=_a(i);++n<i;)o[n]=t[e[n]];return o}function Xe(t,e,n,i){for(var o=t.length,a=i?o:-1;(i?a--:++a<o)&&e(t[a],a,t););return n?Ge(t,i?0:a,i?a+1:o):Ge(t,i?a+1:0,i?o:a)}function tn(t,e){var n=t;n instanceof jt&&(n=n.value());for(var i=-1,o=e.length;++i<o;){var a=[n],s=e[i];Xa.apply(a,s.args),n=s.func.apply(s.thisArg,a)}return n}function en(t,e,n){var i=0,o=t?t.length:i;if("number"==typeof e&&e===e&&o<=Is){for(;i<o;){var a=i+o>>>1,s=t[a];(n?s<=e:s<e)?i=a+1:o=a}return o}return nn(t,e,ha,n)}function nn(t,e,n,i){e=n(e);for(var o=0,a=t?t.length:0,s=e!==e,r=e===x;o<a;){var l=Ya((o+a)/2),c=n(t[l]),d=c===c;if(s)var u=d||i;else u=r?d&&(i||c!==x):i?c<=e:c<e;u?o=l+1:a=l}return ms(a,xs)}function on(t,e,n){if("function"!=typeof t)return ha;if(e===x)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,i,o){return t.call(e,n,i,o)};case 4:return function(n,i,o,a){return t.call(e,n,i,o,a)};case 5:return function(n,i,o,a,s){return t.call(e,n,i,o,a,s)}}return function(){return t.apply(e,arguments)}}function an(t){return $a.call(t,0)}function sn(t,e,n){for(var i=n.length,o=-1,a=hs(t.length-i,0),s=-1,r=e.length,l=_a(a+r);++s<r;)l[s]=e[s];for(;++o<i;)l[n[o]]=t[o];for(;a--;)l[s++]=t[o++];return l}function rn(t,e,n){for(var i=-1,o=n.length,a=-1,s=hs(t.length-o,0),r=-1,l=e.length,c=_a(s+l);++a<s;)c[a]=t[a];for(var d=a;++r<l;)c[d+r]=e[r];for(;++i<o;)c[d+n[i]]=t[a++];return c}function ln(t,e){return function(n,i,o){var a=e?e():{};if(i=Bn(i,o,3),Ir(n))for(var s=-1,r=n.length;++s<r;){var l=n[s];t(a,l,i(l,s,n),n)}else Ds(n,function(e,n,o){t(a,e,i(e,n,o),o)});return a}}function cn(t){return lo(function(e,n){var i=-1,o=null==e?0:n.length,a=o>2&&n[o-2],s=o>2&&n[2],r=o>1&&n[o-1];for("function"==typeof a?(a=on(a,r,5),o-=2):(a="function"==typeof r?r:null,o-=a?1:0),s&&Hn(n[0],n[1],s)&&(a=o<3?null:a,o=1);++i<o;){var l=n[i];l&&t(e,l,a)}return e})}function dn(t,e){return function(n,i){var o=n?Os(n):0;if(!$n(o))return t(n,i);for(var a=e?o:-1,s=ni(n);(e?a--:++a<o)&&!1!==i(s[a],a,s););return n}}function un(t){return function(e,n,i){for(var o=ni(e),a=i(e),s=a.length,r=t?s:-1;t?r--:++r<s;){var l=a[r];if(!1===n(o[l],l,o))break}return e}}function pn(t,e){function n(){return(this&&this!==Yt&&this instanceof n?i:t).apply(e,arguments)}var i=mn(t);return n}function hn(t){return function(e){for(var n=-1,i=da(Yo(e)),o=i.length,a="";++n<o;)a=t(a,i[n],n);return a}}function mn(t){return function(){var e=As(t.prototype),n=t.apply(e,arguments);return xo(n)?n:e}}function fn(t){function e(n,i,o){o&&Hn(n,i,o)&&(i=null);var a=Dn(n,t,null,null,null,null,null,i);return a.placeholder=e.placeholder,a}return e}function gn(t,e){return function(n,i,o){o&&Hn(n,i,o)&&(i=null);var s=Bn(),r=null==i;if(s===ve&&r||(r=!1,i=s(i,o,3)),r){var l=Ir(n);if(l||!Eo(n))return t(l?n:ei(n));i=a}return Un(n,i,e)}}function bn(t,n){return function(i,o,a){if(o=Bn(o,a,3),Ir(i)){var s=e(i,o,n);return s>-1?i[s]:x}return _e(i,o,t)}}function yn(t){return function(n,i,o){return n&&n.length?(i=Bn(i,o,3),e(n,i,t)):-1}}function vn(t){return function(e,n,i){return n=Bn(n,i,3),_e(e,n,t,!0)}}function wn(t){return function(){var e=arguments.length;if(!e)return function(){return arguments[0]};for(var n,i=t?e:-1,o=0,a=_a(e);t?i--:++i<e;){var s=a[o++]=arguments[i];if("function"!=typeof s)throw new Ua(N);var r=n?"":zs(s);n="wrapper"==r?new Ft([]):n}for(i=n?-1:e;++i<e;){s=a[i],r=zs(s);var l="wrapper"==r?Vs(s):null;n=l&&Gn(l[0])?n[zs(l[0])].apply(n,l[3]):1==s.length&&Gn(s)?n[r]():n.thru(s)}return function(){var t=arguments;if(n&&1==t.length&&Ir(t[0]))return n.plant(t[0]).value();for(var i=0,o=a[i].apply(this,t);++i<e;)o=a[i].call(this,o);return o}}}function Sn(t,e){return function(n,i,o){return"function"==typeof i&&o===x&&Ir(n)?t(n,i):e(n,on(i,o,3))}}function xn(t){return function(e,n,i){return"function"==typeof n&&i===x||(n=on(n,i,3)),t(e,n,Oo)}}function In(t){return function(e,n,i){return"function"==typeof n&&i===x||(n=on(n,i,3)),t(e,n)}}function Cn(t){return function(e,n,i){return(e=o(e))&&(t?e:"")+Ln(e,n,i)+(t?"":e)}}function Tn(t){var e=lo(function(n,i){var o=g(i,e.placeholder);return Dn(n,t,null,i,o)});return e}function _n(t,e){return function(n,i,o,a){var s=arguments.length<3;return"function"==typeof i&&a===x&&Ir(n)?t(n,i,o,s):We(n,Bn(i,a,4),o,s,e)}}function kn(t,e,n,i,o,a,s,r,l,c){function d(){for(var w=arguments.length,S=w,I=_a(w);S--;)I[S]=arguments[S];if(i&&(I=sn(I,i,o)),a&&(I=rn(I,a,s)),m||b){var _=d.placeholder,k=g(I,_);if((w-=k.length)<c){var L=r?ne(r):null,D=hs(c-w,0),P=m?k:null,R=m?null:k,M=m?I:null,U=m?null:I;e|=m?E:A,e&=~(m?A:E),f||(e&=~(C|T));var B=[t,e,n,M,P,U,R,L,l,D],V=kn.apply(x,B);return Gn(t)&&Fs(V,B),V.placeholder=_,V}}var z=p?n:this;return h&&(t=z[v]),r&&(I=Jn(I,r)),u&&l<I.length&&(I.length=l),(this&&this!==Yt&&this instanceof d?y||mn(t):t).apply(z,I)}var u=e&D,p=e&C,h=e&T,m=e&k,f=e&_,b=e&L,y=!h&&mn(t),v=t;return d}function Ln(t,e,n){var i=t.length;if(e=+e,i>=e||!us(e))return"";var o=e-i;return n=null==n?" ":n+"",na(n,Za(o/n.length)).slice(0,o)}function En(t,e,n,i){function o(){for(var e=-1,r=arguments.length,l=-1,c=i.length,d=_a(r+c);++l<c;)d[l]=i[l];for(;r--;)d[l++]=arguments[++e];return(this&&this!==Yt&&this instanceof o?s:t).apply(a?n:this,d)}var a=e&C,s=mn(t);return o}function An(t){return function(e,n,i,o){var a=Bn(i);return a===ve&&null==i?en(e,n,t):nn(e,n,a(i,o,1),t)}}function Dn(t,e,n,i,o,a,s,r){var l=e&T;if(!l&&"function"!=typeof t)throw new Ua(N);var c=i?i.length:0;if(c||(e&=~(E|A),i=o=null),c-=o?o.length:0,e&A){var d=i,u=o;i=o=null}var p=l?null:Vs(t),h=[t,e,n,i,o,d,u,a,s,r];if(p&&(Kn(h,p),e=h[1],r=h[9]),h[9]=null==r?l?0:t.length:hs(r-c,0)||0,e==C)var m=pn(h[0],h[2]);else m=e!=E&&e!=(C|E)||h[4].length?kn.apply(x,h):En.apply(x,h);return(p?Us:Fs)(m,h)}function Pn(t,e,n,i,o,a,s){var r=-1,l=t.length,c=e.length,d=!0;if(l!=c&&!(o&&c>l))return!1;for(;d&&++r<l;){var u=t[r],p=e[r];if(d=x,i&&(d=o?i(p,u,r):i(u,p,r)),d===x)if(o)for(var h=c;h--&&(p=e[h],!(d=u&&u===p||n(u,p,i,o,a,s))););else d=u&&u===p||n(u,p,i,o,a,s)}return!!d}function Rn(t,e,n){switch(n){case H:case W:return+t==+e;case G:return t.name==e.name&&t.message==e.message;case Z:return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case Y:case Q:return t==e+""}return!1}function Mn(t,e,n,i,o,a,s){var r=Ur(t),l=r.length;if(l!=Ur(e).length&&!o)return!1;for(var c=o,d=-1;++d<l;){var u=r[d],p=o?u in e:Fa.call(e,u);if(p){var h=t[u],m=e[u];p=x,i&&(p=o?i(m,h,u):i(h,m,u)),p===x&&(p=h&&h===m||n(h,m,i,o,a,s))}if(!p)return!1;c||(c="constructor"==u)}if(!c){var f=t.constructor,g=e.constructor;if(f!=g&&"constructor"in t&&"constructor"in e&&!("function"==typeof f&&f instanceof f&&"function"==typeof g&&g instanceof g))return!1}return!0}function Un(t,e,n){var i=n?ws:vs,o=i,a=o;return Ds(t,function(t,s,r){var l=e(t,s,r);((n?l<o:l>o)||l===i&&l===a)&&(o=l,a=t)}),a}function Bn(t,e,n){var i=Ot.callback||ua;return i=i===ua?ve:i,n?i(t,e,n):i}function Vn(t,e,i){var o=Ot.indexOf||fi;return o=o===fi?n:o,t?o(t,e,i):o}function zn(t,e,n){for(var i=-1,o=n?n.length:0;++i<o;){var a=n[i],s=a.size;switch(a.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=ms(e,t+s);break;case"takeRight":t=hs(t,e-s)}}return{start:t,end:e}}function On(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Fa.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function Nn(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=Pa),new e}function Fn(t,e,n){var i=t.constructor;switch(e){case J:return an(t);case H:case W:return new i(+t);case X:case tt:case et:case nt:case it:case ot:case at:case st:case rt:var o=t.buffer;return new i(n?an(o):o,t.byteOffset,t.length);case Z:case Q:return new i(t);case Y:var a=new i(t.source,_t.exec(t));a.lastIndex=t.lastIndex}return a}function jn(t,e,n){null==t||Wn(e,t)||(e=ii(e),t=1==e.length?t:Pe(t,Ge(e,0,-1)),e=yi(e));var i=null==t?t:t[e];return null==i?x:i.apply(t,n)}function qn(t,e){return t=+t,e=null==e?Ts:e,t>-1&&t%1==0&&t<e}function Hn(t,e,n){if(!xo(n))return!1;var i=typeof e;if("number"==i)var o=Os(n),a=$n(o)&&qn(e,o);else a="string"==i&&e in n;if(a){var s=n[e];return t===t?t===s:s!==s}return!1}function Wn(t,e){var n=typeof t;return!!("string"==n&&vt.test(t)||"number"==n)||!Ir(t)&&(!yt.test(t)||null!=e&&t in ni(e))}function Gn(t){var e=zs(t);return!!e&&t===Ot[e]&&e in jt.prototype}function $n(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Ts}function Zn(t){return t===t&&(0===t?1/t>0:!xo(t))}function Kn(t,e){var n=t[1],i=e[1],o=n|i,a=o<D,s=i==D&&n==k||i==D&&n==P&&t[7].length<=e[8]||i==(D|P)&&n==k;if(!a&&!s)return t;i&C&&(t[2]=e[2],o|=n&C?0:_);var r=e[3];if(r){var l=t[3];t[3]=l?sn(l,r,e[4]):ne(r),t[4]=l?g(t[3],F):ne(e[4])}return r=e[5],r&&(l=t[5],t[5]=l?rn(l,r,e[6]):ne(r),t[6]=l?g(t[5],F):ne(e[6])),r=e[7],r&&(t[7]=ne(r)),i&D&&(t[8]=null==t[8]?e[8]:ms(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=o,t}function Yn(t,e){t=ni(t);for(var n=-1,i=e.length,o={};++n<i;){var a=e[n];a in t&&(o[a]=t[a])}return o}function Qn(t,e){var n={};return Le(t,function(t,i,o){e(t,i,o)&&(n[i]=t)}),n}function Jn(t,e){for(var n=t.length,i=ms(e.length,n),o=ne(t);i--;){var a=e[i];t[i]=qn(a,n)?o[a]:x}return t}function Xn(t){var e;Ot.support;if(!m(t)||qa.call(t)!=K||!Fa.call(t,"constructor")&&"function"==typeof(e=t.constructor)&&!(e instanceof e))return!1;var n;return Le(t,function(t,e){n=e}),n===x||Fa.call(t,n)}function ti(t){for(var e=Oo(t),n=e.length,i=n&&t.length,o=Ot.support,a=i&&$n(i)&&(Ir(t)||o.nonEnumArgs&&fo(t)),s=-1,r=[];++s<n;){var l=e[s];(a&&qn(l,i)||Fa.call(t,l))&&r.push(l)}return r}function ei(t){return null==t?[]:$n(Os(t))?xo(t)?t:Pa(t):Wo(t)}function ni(t){return xo(t)?t:Pa(t)}function ii(t){if(Ir(t))return t;var e=[];return o(t).replace(wt,function(t,n,i,o){e.push(i?o.replace(Ct,"$1"):n||t)}),e}function oi(t){return t instanceof jt?t.clone():new Ft(t.__wrapped__,t.__chain__,ne(t.__actions__))}function ai(t,e,n){e=(n?Hn(t,e,n):null==e)?1:hs(+e||1,1);for(var i=0,o=t?t.length:0,a=-1,s=_a(Za(o/e));i<o;)s[++a]=Ge(t,i,i+=e);return s}function si(t){for(var e=-1,n=t?t.length:0,i=-1,o=[];++e<n;){var a=t[e];a&&(o[++i]=a)}return o}function ri(t,e,n){return(t?t.length:0)?((n?Hn(t,e,n):null==e)&&(e=1),Ge(t,e<0?0:e)):[]}function li(t,e,n){var i=t?t.length:0;return i?((n?Hn(t,e,n):null==e)&&(e=1),e=i-(+e||0),Ge(t,0,e<0?0:e)):[]}function ci(t,e,n){return t&&t.length?Xe(t,Bn(e,n,3),!0,!0):[]}function di(t,e,n){return t&&t.length?Xe(t,Bn(e,n,3),!0):[]}function ui(t,e,n,i){var o=t?t.length:0;return o?(n&&"number"!=typeof n&&Hn(t,e,n)&&(n=0,i=o),Ce(t,e,n,i)):[]}function pi(t){return t?t[0]:x}function hi(t,e,n){var i=t?t.length:0;return n&&Hn(t,e,n)&&(e=!1),i?ke(t,e):[]}function mi(t){return(t?t.length:0)?ke(t,!0):[]}function fi(t,e,i){var o=t?t.length:0;if(!o)return-1;if("number"==typeof i)i=i<0?hs(o+i,0):i;else if(i){var a=en(t,e),s=t[a];return(e===e?e===s:s!==s)?a:-1}return n(t,e,i||0)}function gi(t){return li(t,1)}function bi(){for(var t=[],e=-1,i=arguments.length,o=[],a=Vn(),s=a==n,r=[];++e<i;){var l=arguments[e];(Ir(l)||fo(l))&&(t.push(l),o.push(s&&l.length>=120?Bs(e&&l):null))}if((i=t.length)<2)return r;var c=t[0],d=-1,u=c?c.length:0,p=o[0];t:for(;++d<u;)if(l=c[d],(p?te(p,l):a(r,l,0))<0){for(e=i;--e;){var h=o[e];if((h?te(h,l):a(t[e],l,0))<0)continue t}p&&p.push(l),r.push(l)}return r}function yi(t){var e=t?t.length:0;return e?t[e-1]:x}function vi(t,e,n){var i=t?t.length:0;if(!i)return-1;var o=i;if("number"==typeof n)o=(n<0?hs(i+n,0):ms(n||0,i-1))+1;else if(n){o=en(t,e,!0)-1;var a=t[o];return(e===e?e===a:a!==a)?o:-1}if(e!==e)return h(t,o,!0);for(;o--;)if(t[o]===e)return o;return-1}function wi(){var t=arguments,e=t[0];if(!e||!e.length)return e;for(var n=0,i=Vn(),o=t.length;++n<o;)for(var a=0,s=t[n];(a=i(e,s,a))>-1;)os.call(e,a,1);return e}function Si(t,e,n){var i=[];if(!t||!t.length)return i;var o=-1,a=[],s=t.length;for(e=Bn(e,n,3);++o<s;){var r=t[o];e(r,o,t)&&(i.push(r),a.push(o))}return qe(t,a),i}function xi(t){return ri(t,1)}function Ii(t,e,n){var i=t?t.length:0;return i?(n&&"number"!=typeof n&&Hn(t,e,n)&&(e=0,n=i),Ge(t,e,n)):[]}function Ci(t,e,n){return(t?t.length:0)?((n?Hn(t,e,n):null==e)&&(e=1),Ge(t,0,e<0?0:e)):[]}function Ti(t,e,n){var i=t?t.length:0;return i?((n?Hn(t,e,n):null==e)&&(e=1),e=i-(+e||0),Ge(t,e<0?0:e)):[]}function _i(t,e,n){return t&&t.length?Xe(t,Bn(e,n,3),!1,!0):[]}function ki(t,e,n){return t&&t.length?Xe(t,Bn(e,n,3)):[]}function Li(t,e,i,o){if(!(t?t.length:0))return[];null!=e&&"boolean"!=typeof e&&(o=i,i=Hn(t,e,o)?null:e,e=!1);var a=Bn();return a===ve&&null==i||(i=a(i,o,3)),e&&Vn()==n?b(t,i):Qe(t,i)}function Ei(t){for(var e=-1,n=(t&&t.length&&le(re(t,Os)))>>>0,i=_a(n);++e<n;)i[e]=re(t,Fe(e));return i}function Ai(){for(var t=-1,e=arguments.length;++t<e;){var n=arguments[t];if(Ir(n)||fo(n))var i=i?xe(i,n).concat(xe(n,i)):n}return i?Qe(i):[]}function Di(t,e){var n=-1,i=t?t.length:0,o={};for(!i||e||Ir(t[0])||(e=[]);++n<i;){var a=t[n];e?o[a]=e[n]:a&&(o[a[0]]=a[1])}return o}function Pi(t){var e=Ot(t);return e.__chain__=!0,e}function Ri(t,e,n){return e.call(n,t),t}function Mi(t,e,n){return e.call(n,t)}function Ui(){return Pi(this)}function Bi(){return new Ft(this.value(),this.__chain__)}function Vi(t){for(var e,n=this;n instanceof Nt;){var i=oi(n);e?o.__wrapped__=i:e=i;var o=i;n=n.__wrapped__}return o.__wrapped__=t,e}function zi(){var t=this.__wrapped__;return t instanceof jt?(this.__actions__.length&&(t=new jt(this)),new Ft(t.reverse(),this.__chain__)):this.thru(function(t){return t.reverse()})}function Oi(){return this.value()+""}function Ni(){return tn(this.__wrapped__,this.__actions__)}function Fi(t,e,n){var i=Ir(t)?ae:Ie;return n&&Hn(t,e,n)&&(e=null),"function"==typeof e&&n===x||(e=Bn(e,n,3)),i(t,e)}function ji(t,e,n){var i=Ir(t)?se:Te;return e=Bn(e,n,3),i(t,e)}function qi(t,e){return Xs(t,Ve(e))}function Hi(t,e,n,i){var o=t?Os(t):0;return $n(o)||(t=Wo(t),o=t.length),!!o&&(n="number"!=typeof n||i&&Hn(e,n,i)?0:n<0?hs(o+n,0):n||0,"string"==typeof t||!Ir(t)&&Eo(t)?n<o&&t.indexOf(e,n)>-1:Vn(t,e,n)>-1)}function Wi(t,e,n){var i=Ir(t)?re:Be;return e=Bn(e,n,3),i(t,e)}function Gi(t,e){return Wi(t,va(e))}function $i(t,e,n){var i=Ir(t)?se:Te;return e=Bn(e,n,3),i(t,function(t,n,i){return!e(t,n,i)})}function Zi(t,e,n){if(n?Hn(t,e,n):null==e){t=ei(t);var i=t.length;return i>0?t[He(0,i-1)]:x}var o=Ki(t);return o.length=ms(e<0?0:+e||0,o.length),o}function Ki(t){t=ei(t);for(var e=-1,n=t.length,i=_a(n);++e<n;){var o=He(0,e);e!=o&&(i[e]=i[o]),i[o]=t[e]}return i}function Yi(t){var e=t?Os(t):0;return $n(e)?e:Ur(t).length}function Qi(t,e,n){var i=Ir(t)?pe:$e;return n&&Hn(t,e,n)&&(e=null),"function"==typeof e&&n===x||(e=Bn(e,n,3)),i(t,e)}function Ji(t,e,n){if(null==t)return[];n&&Hn(t,e,n)&&(e=null);var i=-1;return e=Bn(e,n,3),Ze(Be(t,function(t,n,o){return{criteria:e(t,n,o),index:++i,value:t}}),l)}function Xi(t,e,n,i){return null==t?[]:(i&&Hn(e,n,i)&&(n=null),Ir(e)||(e=null==e?[]:[e]),Ir(n)||(n=null==n?[]:[n]),Ke(t,e,n))}function to(t,e){return ji(t,Ve(e))}function eo(t,e){if("function"!=typeof e){if("function"!=typeof t)throw new Ua(N);var n=t;t=e,e=n}return t=us(t=+t)?t:0,function(){if(--t<1)return e.apply(this,arguments)}}function no(t,e,n){return n&&Hn(t,e,n)&&(e=null),e=t&&null==e?t.length:hs(+e||0,0),Dn(t,D,null,null,null,null,e)}function io(t,e){var n;if("function"!=typeof e){if("function"!=typeof t)throw new Ua(N);var i=t;t=e,e=i}return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}}function oo(t,e,n){function i(){p&&Ka(p),l&&Ka(l),l=p=h=x}function o(){var n=e-(dr()-d);if(n<=0||n>e){l&&Ka(l);var i=h;l=p=h=x,i&&(m=dr(),c=t.apply(u,r),p||l||(r=u=null))}else p=is(o,n)}function a(){p&&Ka(p),l=p=h=x,(g||f!==e)&&(m=dr(),c=t.apply(u,r),p||l||(r=u=null))}function s(){if(r=arguments,d=dr(),u=this,h=g&&(p||!b),!1===f)var n=b&&!p;else{l||b||(m=d);var i=f-(d-m),s=i<=0||i>f;s?(l&&(l=Ka(l)),m=d,c=t.apply(u,r)):l||(l=is(a,i))}return s&&p?p=Ka(p):p||e===f||(p=is(o,e)),n&&(s=!0,c=t.apply(u,r)),!s||p||l||(r=u=null),c}var r,l,c,d,u,p,h,m=0,f=!1,g=!0;if("function"!=typeof t)throw new Ua(N);if(e=e<0?0:+e||0,!0===n){var b=!0;g=!1}else xo(n)&&(b=n.leading,f="maxWait"in n&&hs(+n.maxWait||0,e),g="trailing"in n?n.trailing:g);return s.cancel=i,s}function ao(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new Ua(N);var n=function(){var i=arguments,o=n.cache,a=e?e.apply(this,i):i[0];if(o.has(a))return o.get(a);var s=t.apply(this,i);return o.set(a,s),s};return n.cache=new ao.Cache,n}function so(t){if("function"!=typeof t)throw new Ua(N);return function(){return!t.apply(this,arguments)}}function ro(t){return io(2,t)}function lo(t,e){if("function"!=typeof t)throw new Ua(N);return e=hs(e===x?t.length-1:+e||0,0),function(){for(var n=arguments,i=-1,o=hs(n.length-e,0),a=_a(o);++i<o;)a[i]=n[e+i];switch(e){case 0:return t.call(this,a);case 1:return t.call(this,n[0],a);case 2:return t.call(this,n[0],n[1],a)}var s=_a(e+1);for(i=-1;++i<e;)s[i]=n[i];return s[e]=a,t.apply(this,s)}}function co(t){if("function"!=typeof t)throw new Ua(N);return function(e){return t.apply(this,e)}}function uo(t,e,n){var i=!0,o=!0;if("function"!=typeof t)throw new Ua(N);return!1===n?i=!1:xo(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),zt.leading=i,zt.maxWait=+e,zt.trailing=o,oo(t,e,zt)}function po(t,e){return e=null==e?ha:e,Dn(e,E,null,[t],[])}function ho(t,e,n,i){return e&&"boolean"!=typeof e&&Hn(t,e,n)?e=!1:"function"==typeof e&&(i=n,n=e,e=!1),n="function"==typeof n&&on(n,i,1),we(t,e,n)}function mo(t,e,n){return e="function"==typeof e&&on(e,n,1),we(t,!0,e)}function fo(t){return $n(m(t)?t.length:x)&&qa.call(t)==j}function go(t){return!0===t||!1===t||m(t)&&qa.call(t)==H}function bo(t){return m(t)&&qa.call(t)==W}function yo(t){return!!t&&1===t.nodeType&&m(t)&&qa.call(t).indexOf("Element")>-1}function vo(t){if(null==t)return!0;var e=Os(t);return $n(e)&&(Ir(t)||Eo(t)||fo(t)||m(t)&&Tr(t.splice))?!e:!Ur(t).length}function wo(t,e,n,i){if(!(n="function"==typeof n&&on(n,i,3))&&Zn(t)&&Zn(e))return t===e;var o=n?n(t,e):x;return o===x?Re(t,e,n):!!o}function So(t){return m(t)&&"string"==typeof t.message&&qa.call(t)==G}function xo(t){var e=typeof t;return"function"==e||!!t&&"object"==e}function Io(t,e,n,i){var o=Ur(e),a=o.length;if(!a)return!0;if(null==t)return!1;if(n="function"==typeof n&&on(n,i,3),t=ni(t),!n&&1==a){var s=o[0],r=e[s];if(Zn(r))return r===t[s]&&(r!==x||s in t)}for(var l=_a(a),c=_a(a);a--;)r=l[a]=e[o[a]],c[a]=Zn(r);return Ue(t,o,l,c,n)}function Co(t){return ko(t)&&t!=+t}function To(t){return null!=t&&(qa.call(t)==$?Wa.test(Na.call(t)):m(t)&&Lt.test(t))}function _o(t){return null===t}function ko(t){return"number"==typeof t||m(t)&&qa.call(t)==Z}function Lo(t){return m(t)&&qa.call(t)==Y||!1}function Eo(t){return"string"==typeof t||m(t)&&qa.call(t)==Q}function Ao(t){return m(t)&&$n(t.length)&&!!Bt[qa.call(t)]}function Do(t){return t===x}function Po(t){var e=t?Os(t):0;return $n(e)?e?ne(t):[]:Wo(t)}function Ro(t){return ye(t,Oo(t))}function Mo(t,e,n){var i=As(t);return n&&Hn(t,e,n)&&(e=null),e?Es(i,e):i}function Uo(t){return De(t,Oo(t))}function Bo(t,e,n){var i=null==t?x:Pe(t,ii(e),e+"");return i===x?n:i}function Vo(t,e){if(null==t)return!1;var n=Fa.call(t,e);return n||Wn(e)||(e=ii(e),t=1==e.length?t:Pe(t,Ge(e,0,-1)),e=yi(e),n=null!=t&&Fa.call(t,e)),n}function zo(t,e,n){n&&Hn(t,e,n)&&(e=null);for(var i=-1,o=Ur(t),a=o.length,s={};++i<a;){var r=o[i],l=t[r];e?Fa.call(s,l)?s[l].push(r):s[l]=[r]:s[l]=r}return s}function Oo(t){if(null==t)return[];xo(t)||(t=Pa(t));var e=t.length;e=e&&$n(e)&&(Ir(t)||Ls.nonEnumArgs&&fo(t))&&e||0;for(var n=t.constructor,i=-1,o="function"==typeof n&&n.prototype===t,a=_a(e),s=e>0;++i<e;)a[i]=i+"";for(var r in t)s&&qn(r,e)||"constructor"==r&&(o||!Fa.call(t,r))||a.push(r);return a}function No(t,e,n){var i={};return e=Bn(e,n,3),Ee(t,function(t,n,o){i[n]=e(t,n,o)}),i}function Fo(t){for(var e=-1,n=Ur(t),i=n.length,o=_a(i);++e<i;){var a=n[e];o[e]=[a,t[a]]}return o}function jo(t,e,n){var i=null==t?x:t[e];return i===x&&(null==t||Wn(e,t)||(e=ii(e),t=1==e.length?t:Pe(t,Ge(e,0,-1)),i=null==t?x:t[yi(e)]),i=i===x?n:i),Tr(i)?i.call(t):i}function qo(t,e,n){if(null==t)return t;var i=e+"";e=null!=t[i]||Wn(e,t)?[i]:ii(e);for(var o=-1,a=e.length,s=a-1,r=t;null!=r&&++o<a;){var l=e[o];xo(r)&&(o==s?r[l]=n:null==r[l]&&(r[l]=qn(e[o+1])?[]:{})),r=r[l]}return t}function Ho(t,e,n,i){var o=Ir(t)||Ao(t);if(e=Bn(e,i,4),null==n)if(o||xo(t)){var a=t.constructor;n=o?Ir(t)?new a:[]:As(Tr(a)&&a.prototype)}else n={};return(o?ie:Ee)(t,function(t,i,o){return e(n,t,i,o)}),n}function Wo(t){return Je(t,Ur(t))}function Go(t){return Je(t,Oo(t))}function $o(t,e,n){return e=+e||0,void 0===n?(n=e,e=0):n=+n||0,t>=ms(e,n)&&t<hs(e,n)}function Zo(t,e,n){n&&Hn(t,e,n)&&(e=n=null);var i=null==t,o=null==e;if(null==n&&(o&&"boolean"==typeof t?(n=t,t=1):"boolean"==typeof e&&(n=e,o=!0)),i&&o&&(e=1,o=!1),t=+t||0,o?(e=t,t=0):e=+e||0,n||t%1||e%1){var a=ys();return ms(t+a*(e-t+parseFloat("1e-"+((a+"").length-1))),e)}return He(t,e)}function Ko(t){
return(t=o(t))&&t.charAt(0).toUpperCase()+t.slice(1)}function Yo(t){return(t=o(t))&&t.replace(Et,d).replace(It,"")}function Qo(t,e,n){t=o(t),e+="";var i=t.length;return n=n===x?i:ms(n<0?0:+n||0,i),(n-=e.length)>=0&&t.indexOf(e,n)==n}function Jo(t){return t=o(t),t&&mt.test(t)?t.replace(pt,u):t}function Xo(t){return t=o(t),t&&xt.test(t)?t.replace(St,"\\$&"):t}function ta(t,e,n){t=o(t),e=+e;var i=t.length;if(i>=e||!us(e))return t;var a=(e-i)/2,s=Ya(a);return n=Ln("",Za(a),n),n.slice(0,s)+t+n}function ea(t,e,n){return n&&Hn(t,e,n)&&(e=0),bs(t,e)}function na(t,e){var n="";if(t=o(t),(e=+e)<1||!t||!us(e))return n;do{e%2&&(n+=t),e=Ya(e/2),t+=t}while(e);return n}function ia(t,e,n){return t=o(t),n=null==n?0:ms(n<0?0:+n||0,t.length),t.lastIndexOf(e,n)==n}function oa(t,e,n){var i=Ot.templateSettings;n&&Hn(t,e,n)&&(e=n=null),t=o(t),e=ge(Es({},n||e),i,fe);var a,s,r=ge(Es({},e.imports),i.imports,fe),l=Ur(r),c=Je(r,l),d=0,u=e.interpolate||At,h="__p += '",m=Ra((e.escape||At).source+"|"+u.source+"|"+(u===bt?Tt:At).source+"|"+(e.evaluate||At).source+"|$","g"),f="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++Ut+"]")+"\n";t.replace(m,function(e,n,i,o,r,l){return i||(i=o),h+=t.slice(d,l).replace(Dt,p),n&&(a=!0,h+="' +\n__e("+n+") +\n'"),r&&(s=!0,h+="';\n"+r+";\n__p += '"),i&&(h+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),d=l+e.length,e}),h+="';\n";var g=e.variable;g||(h="with (obj) {\n"+h+"\n}\n"),h=(s?h.replace(lt,""):h).replace(ct,"$1").replace(dt,"$1;"),h="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var b=Wr(function(){return Ea(l,f+"return "+h).apply(x,c)});if(b.source=h,So(b))throw b;return b}function aa(t,e,n){var i=t;return(t=o(t))?(n?Hn(i,e,n):null==e)?t.slice(y(t),v(t)+1):(e+="",t.slice(s(t,e),r(t,e)+1)):t}function sa(t,e,n){var i=t;return t=o(t),t?(n?Hn(i,e,n):null==e)?t.slice(y(t)):t.slice(s(t,e+"")):t}function ra(t,e,n){var i=t;return t=o(t),t?(n?Hn(i,e,n):null==e)?t.slice(0,v(t)+1):t.slice(0,r(t,e+"")+1):t}function la(t,e,n){n&&Hn(t,e,n)&&(e=null);var i=R,a=M;if(null!=e)if(xo(e)){var s="separator"in e?e.separator:s;i="length"in e?+e.length||0:i,a="omission"in e?o(e.omission):a}else i=+e||0;if(t=o(t),i>=t.length)return t;var r=i-a.length;if(r<1)return a;var l=t.slice(0,r);if(null==s)return l+a;if(Lo(s)){if(t.slice(r).search(s)){var c,d,u=t.slice(0,r);for(s.global||(s=Ra(s.source,(_t.exec(s)||"")+"g")),s.lastIndex=0;c=s.exec(u);)d=c.index;l=l.slice(0,null==d?r:d)}}else if(t.indexOf(s,r)!=r){var p=l.lastIndexOf(s);p>-1&&(l=l.slice(0,p))}return l+a}function ca(t){return t=o(t),t&&ht.test(t)?t.replace(ut,w):t}function da(t,e,n){return n&&Hn(t,e,n)&&(e=null),t=o(t),t.match(e||Pt)||[]}function ua(t,e,n){return n&&Hn(t,e,n)&&(e=null),ve(t,e)}function pa(t){return function(){return t}}function ha(t){return t}function ma(t){return Ve(we(t,!0))}function fa(t,e){return ze(t,we(e,!0))}function ga(t,e,n){if(null==n){var i=xo(e),o=i&&Ur(e),a=o&&o.length&&De(e,o);(a?a.length:i)||(a=!1,n=e,e=t,t=this)}a||(a=De(e,Ur(e)));var s=!0,r=-1,l=Tr(t),c=a.length;!1===n?s=!1:xo(n)&&"chain"in n&&(s=n.chain);for(;++r<c;){var d=a[r],u=e[d];t[d]=u,l&&(t.prototype[d]=function(e){return function(){var n=this.__chain__;if(s||n){var i=t(this.__wrapped__);return(i.__actions__=ne(this.__actions__)).push({func:e,args:arguments,thisArg:t}),i.__chain__=n,i}var o=[this.value()];return Xa.apply(o,arguments),e.apply(t,o)}}(u))}return t}function ba(){return f._=Ha,this}function ya(){}function va(t){return Wn(t)?Fe(t):je(t)}function wa(t){return function(e){return Pe(t,ii(e),e+"")}}function Sa(t,e,n){n&&Hn(t,e,n)&&(e=n=null),t=+t||0,n=null==n?1:+n||0,null==e?(e=t,t=0):e=+e||0;for(var i=-1,o=hs(Za((e-t)/(n||1)),0),a=_a(o);++i<o;)a[i]=t,t+=n;return a}function xa(t,e,n){if((t=Ya(t))<1||!us(t))return[];var i=-1,o=_a(ms(t,Ss));for(e=on(e,n,1);++i<t;)i<Ss?o[i]=e(i):e(i);return o}function Ia(t){var e=++ja;return o(t)+e}function Ca(t,e){return(+t||0)+(+e||0)}function Ta(t,e,n){n&&Hn(t,e,n)&&(e=null);var i=Bn(),o=null==e;return i===ve&&o||(o=!1,e=i(e,n,3)),o?he(Ir(t)?t:ei(t)):Ye(t,e)}f=f?Qt.defaults(Yt.Object(),f,Qt.pick(Yt,Mt)):Yt;var _a=f.Array,ka=f.Date,La=f.Error,Ea=f.Function,Aa=f.Math,Da=f.Number,Pa=f.Object,Ra=f.RegExp,Ma=f.String,Ua=f.TypeError,Ba=_a.prototype,Va=Pa.prototype,za=Ma.prototype,Oa=(Oa=f.window)&&Oa.document,Na=Ea.prototype.toString,Fa=Va.hasOwnProperty,ja=0,qa=Va.toString,Ha=f._,Wa=Ra("^"+Xo(qa).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ga=To(Ga=f.ArrayBuffer)&&Ga,$a=To($a=Ga&&new Ga(0).slice)&&$a,Za=Aa.ceil,Ka=f.clearTimeout,Ya=Aa.floor,Qa=To(Qa=Pa.getOwnPropertySymbols)&&Qa,Ja=To(Ja=Pa.getPrototypeOf)&&Ja,Xa=Ba.push,ts=To(Pa.preventExtensions=Pa.preventExtensions)&&ts,es=Va.propertyIsEnumerable,ns=To(ns=f.Set)&&ns,is=f.setTimeout,os=Ba.splice,as=To(as=f.Uint8Array)&&as,ss=To(ss=f.WeakMap)&&ss,rs=function(){try{var t=To(t=f.Float64Array)&&t,e=new t(new Ga(10),0,1)&&t}catch(t){}return e}(),ls=function(){var t={1:0},e=ts&&To(e=Pa.assign)&&e;try{e(ts(t),"xo")}catch(t){}return!t[1]&&e}(),cs=To(cs=_a.isArray)&&cs,ds=To(ds=Pa.create)&&ds,us=f.isFinite,ps=To(ps=Pa.keys)&&ps,hs=Aa.max,ms=Aa.min,fs=To(fs=ka.now)&&fs,gs=To(gs=Da.isFinite)&&gs,bs=f.parseInt,ys=Aa.random,vs=Da.NEGATIVE_INFINITY,ws=Da.POSITIVE_INFINITY,Ss=Aa.pow(2,32)-1,xs=Ss-1,Is=Ss>>>1,Cs=rs?rs.BYTES_PER_ELEMENT:0,Ts=Aa.pow(2,53)-1,_s=ss&&new ss,ks={},Ls=Ot.support={};!function(t){var e=function(){this.x=t},n=[];e.prototype={valueOf:t,y:t};for(var i in new e)n.push(i);Ls.funcDecomp=/\bthis\b/.test(function(){return this}),Ls.funcNames="string"==typeof Ea.name;try{Ls.dom=11===Oa.createDocumentFragment().nodeType}catch(t){Ls.dom=!1}try{Ls.nonEnumArgs=!es.call(arguments,1)}catch(t){Ls.nonEnumArgs=!0}}(1,0),Ot.templateSettings={escape:ft,evaluate:gt,interpolate:bt,variable:"",imports:{_:Ot}};var Es=ls||function(t,e){return null==e?t:ye(e,Ns(e),ye(e,Ur(e),t))},As=function(){function t(){}return function(e){if(xo(e)){t.prototype=e;var n=new t;t.prototype=null}return n||f.Object()}}(),Ds=dn(Ee),Ps=dn(Ae,!0),Rs=un(),Ms=un(!0),Us=_s?function(t,e){return _s.set(t,e),t}:ha;$a||(an=Ga&&as?function(t){var e=t.byteLength,n=rs?Ya(e/Cs):0,i=n*Cs,o=new Ga(e);if(n){var a=new rs(o,0,n);a.set(new rs(t,0,n))}return e!=i&&(a=new as(o,i),a.set(new as(t,i))),o}:pa(null));var Bs=ds&&ns?function(t){return new Xt(t)}:pa(null),Vs=_s?function(t){return _s.get(t)}:ya,zs=function(){return Ls.funcNames?"constant"==pa.name?Fe("name"):function(t){for(var e=t.name,n=ks[e],i=n?n.length:0;i--;){var o=n[i],a=o.func;if(null==a||a==t)return o.name}return e}:pa("")}(),Os=Fe("length"),Ns=Qa?function(t){return Qa(ni(t))}:pa([]),Fs=function(){var t=0,e=0;return function(n,i){var o=dr(),a=B-(o-e);if(e=o,a>0){if(++t>=U)return n}else t=0;return Us(n,i)}}(),js=lo(function(t,e){return Ir(t)||fo(t)?xe(t,ke(e,!1,!0)):[]}),qs=yn(),Hs=yn(!0),Ws=lo(function(e,n){e||(e=[]),n=ke(n);var i=be(e,n);return qe(e,n.sort(t)),i}),Gs=An(),$s=An(!0),Zs=lo(function(t){return Qe(ke(t,!1,!0))}),Ks=lo(function(t,e){return Ir(t)||fo(t)?xe(t,e):[]}),Ys=lo(Ei),Qs=lo(function(t,e){return $n(t?Os(t):0)&&(t=ei(t)),be(t,ke(e))}),Js=ln(function(t,e,n){Fa.call(t,n)?++t[n]:t[n]=1}),Xs=bn(Ds),tr=bn(Ps,!0),er=Sn(ie,Ds),nr=Sn(oe,Ps),ir=ln(function(t,e,n){Fa.call(t,n)?t[n].push(e):t[n]=[e]}),or=ln(function(t,e,n){t[n]=e}),ar=lo(function(t,e,n){var i=-1,o="function"==typeof e,a=Wn(e),s=Os(t),r=$n(s)?_a(s):[];return Ds(t,function(t){var s=o?e:a&&null!=t&&t[e];r[++i]=s?s.apply(t,n):jn(t,e,n)}),r}),sr=ln(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),rr=_n(de,Ds),lr=_n(ue,Ps),cr=lo(function(t,e){if(null==t)return[];var n=e[2];return n&&Hn(e[0],e[1],n)&&(e.length=1),Ke(t,ke(e),[])}),dr=fs||function(){return(new ka).getTime()},ur=lo(function(t,e,n){var i=C;if(n.length){var o=g(n,ur.placeholder);i|=E}return Dn(t,i,e,n,o)}),pr=lo(function(t,e){e=e.length?ke(e):Uo(t);for(var n=-1,i=e.length;++n<i;){var o=e[n];t[o]=Dn(t[o],C,t)}return t}),hr=lo(function(t,e,n){var i=C|T;if(n.length){var o=g(n,hr.placeholder);i|=E}return Dn(e,i,t,n,o)}),mr=fn(k),fr=fn(L),gr=lo(function(t,e){return Se(t,1,e)}),br=lo(function(t,e,n){return Se(t,e,n)}),yr=wn(),vr=wn(!0),wr=Tn(E),Sr=Tn(A),xr=lo(function(t,e){return Dn(t,P,null,null,null,ke(e))}),Ir=cs||function(t){return m(t)&&$n(t.length)&&qa.call(t)==q};Ls.dom||(yo=function(t){return!!t&&1===t.nodeType&&m(t)&&!_r(t)});var Cr=gs||function(t){return"number"==typeof t&&us(t)},Tr=i(/x/)||as&&!i(as)?function(t){return qa.call(t)==$}:i,_r=Ja?function(t){if(!t||qa.call(t)!=K)return!1;var e=t.valueOf,n=To(e)&&(n=Ja(e))&&Ja(n);return n?t==n||Ja(t)==n:Xn(t)}:Xn,kr=cn(function(t,e,n){return n?ge(t,e,n):Es(t,e)}),Lr=lo(function(t){var e=t[0];return null==e?e:(t.push(me),kr.apply(x,t))}),Er=vn(Ee),Ar=vn(Ae),Dr=xn(Rs),Pr=xn(Ms),Rr=In(Ee),Mr=In(Ae),Ur=ps?function(t){if(t)var e=t.constructor,n=t.length;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&$n(n)?ti(t):xo(t)?ps(t):[]}:ti,Br=cn(Oe),Vr=lo(function(t,e){if(null==t)return{};if("function"!=typeof e[0]){var e=re(ke(e),Ma);return Yn(t,xe(Oo(t),e))}var n=on(e[0],e[1],3);return Qn(t,function(t,e,i){return!n(t,e,i)})}),zr=lo(function(t,e){return null==t?{}:"function"==typeof e[0]?Qn(t,on(e[0],e[1],3)):Yn(t,ke(e))}),Or=hn(function(t,e,n){return e=e.toLowerCase(),t+(n?e.charAt(0).toUpperCase()+e.slice(1):e)}),Nr=hn(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Fr=Cn(),jr=Cn(!0);8!=bs(Rt+"08")&&(ea=function(t,e,n){return(n?Hn(t,e,n):null==e)?e=0:e&&(e=+e),t=aa(t),bs(t,e||(kt.test(t)?16:10))});var qr=hn(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Hr=hn(function(t,e,n){return t+(n?" ":"")+(e.charAt(0).toUpperCase()+e.slice(1))}),Wr=lo(function(t,e){try{return t.apply(x,e)}catch(t){return So(t)?t:new La(t)}}),Gr=lo(function(t,e){return function(n){return jn(n,t,e)}}),$r=lo(function(t,e){return function(n){return jn(t,n,e)}}),Zr=gn(le),Kr=gn(ce,!0);return Ot.prototype=Nt.prototype,Ft.prototype=As(Nt.prototype),Ft.prototype.constructor=Ft,jt.prototype=As(Nt.prototype),jt.prototype.constructor=jt,Gt.prototype.delete=$t,Gt.prototype.get=Zt,Gt.prototype.has=Kt,Gt.prototype.set=Jt,Xt.prototype.push=ee,ao.Cache=Gt,Ot.after=eo,Ot.ary=no,Ot.assign=kr,Ot.at=Qs,Ot.before=io,Ot.bind=ur,Ot.bindAll=pr,Ot.bindKey=hr,Ot.callback=ua,Ot.chain=Pi,Ot.chunk=ai,Ot.compact=si,Ot.constant=pa,Ot.countBy=Js,Ot.create=Mo,Ot.curry=mr,Ot.curryRight=fr,Ot.debounce=oo,Ot.defaults=Lr,Ot.defer=gr,Ot.delay=br,Ot.difference=js,Ot.drop=ri,Ot.dropRight=li,Ot.dropRightWhile=ci,Ot.dropWhile=di,Ot.fill=ui,Ot.filter=ji,Ot.flatten=hi,Ot.flattenDeep=mi,Ot.flow=yr,Ot.flowRight=vr,Ot.forEach=er,Ot.forEachRight=nr,Ot.forIn=Dr,Ot.forInRight=Pr,Ot.forOwn=Rr,Ot.forOwnRight=Mr,Ot.functions=Uo,Ot.groupBy=ir,Ot.indexBy=or,Ot.initial=gi,Ot.intersection=bi,Ot.invert=zo,Ot.invoke=ar,Ot.keys=Ur,Ot.keysIn=Oo,Ot.map=Wi,Ot.mapValues=No,Ot.matches=ma,Ot.matchesProperty=fa,Ot.memoize=ao,Ot.merge=Br,Ot.method=Gr,Ot.methodOf=$r,Ot.mixin=ga,Ot.negate=so,Ot.omit=Vr,Ot.once=ro,Ot.pairs=Fo,Ot.partial=wr,Ot.partialRight=Sr,Ot.partition=sr,Ot.pick=zr,Ot.pluck=Gi,Ot.property=va,Ot.propertyOf=wa,Ot.pull=wi,Ot.pullAt=Ws,Ot.range=Sa,Ot.rearg=xr,Ot.reject=$i,Ot.remove=Si,Ot.rest=xi,Ot.restParam=lo,Ot.set=qo,Ot.shuffle=Ki,Ot.slice=Ii,Ot.sortBy=Ji,Ot.sortByAll=cr,Ot.sortByOrder=Xi,Ot.spread=co,Ot.take=Ci,Ot.takeRight=Ti,Ot.takeRightWhile=_i,Ot.takeWhile=ki,Ot.tap=Ri,Ot.throttle=uo,Ot.thru=Mi,Ot.times=xa,Ot.toArray=Po,Ot.toPlainObject=Ro,Ot.transform=Ho,Ot.union=Zs,Ot.uniq=Li,Ot.unzip=Ei,Ot.values=Wo,Ot.valuesIn=Go,Ot.where=to,Ot.without=Ks,Ot.wrap=po,Ot.xor=Ai,Ot.zip=Ys,Ot.zipObject=Di,Ot.backflow=vr,Ot.collect=Wi,Ot.compose=vr,Ot.each=er,Ot.eachRight=nr,Ot.extend=kr,Ot.iteratee=ua,Ot.methods=Uo,Ot.object=Di,Ot.select=ji,Ot.tail=xi,Ot.unique=Li,ga(Ot,Ot),Ot.add=Ca,Ot.attempt=Wr,Ot.camelCase=Or,Ot.capitalize=Ko,Ot.clone=ho,Ot.cloneDeep=mo,Ot.deburr=Yo,Ot.endsWith=Qo,Ot.escape=Jo,Ot.escapeRegExp=Xo,Ot.every=Fi,Ot.find=Xs,Ot.findIndex=qs,Ot.findKey=Er,Ot.findLast=tr,Ot.findLastIndex=Hs,Ot.findLastKey=Ar,Ot.findWhere=qi,Ot.first=pi,Ot.get=Bo,Ot.has=Vo,Ot.identity=ha,Ot.includes=Hi,Ot.indexOf=fi,Ot.inRange=$o,Ot.isArguments=fo,Ot.isArray=Ir,Ot.isBoolean=go,Ot.isDate=bo,Ot.isElement=yo,Ot.isEmpty=vo,Ot.isEqual=wo,Ot.isError=So,Ot.isFinite=Cr,Ot.isFunction=Tr,Ot.isMatch=Io,Ot.isNaN=Co,Ot.isNative=To,Ot.isNull=_o,Ot.isNumber=ko,Ot.isObject=xo,Ot.isPlainObject=_r,Ot.isRegExp=Lo,Ot.isString=Eo,Ot.isTypedArray=Ao,Ot.isUndefined=Do,Ot.kebabCase=Nr,Ot.last=yi,Ot.lastIndexOf=vi,Ot.max=Zr,Ot.min=Kr,Ot.noConflict=ba,Ot.noop=ya,Ot.now=dr,Ot.pad=ta,Ot.padLeft=Fr,Ot.padRight=jr,Ot.parseInt=ea,Ot.random=Zo,Ot.reduce=rr,Ot.reduceRight=lr,Ot.repeat=na,Ot.result=jo,Ot.runInContext=S,Ot.size=Yi,Ot.snakeCase=qr,Ot.some=Qi,Ot.sortedIndex=Gs,Ot.sortedLastIndex=$s,Ot.startCase=Hr,Ot.startsWith=ia,Ot.sum=Ta,Ot.template=oa,Ot.trim=aa,Ot.trimLeft=sa,Ot.trimRight=ra,Ot.trunc=la,Ot.unescape=ca,Ot.uniqueId=Ia,Ot.words=da,Ot.all=Fi,Ot.any=Qi,Ot.contains=Hi,Ot.detect=Xs,Ot.foldl=rr,Ot.foldr=lr,Ot.head=pi,Ot.include=Hi,Ot.inject=rr,ga(Ot,function(){var t={};return Ee(Ot,function(e,n){Ot.prototype[n]||(t[n]=e)}),t}(),!1),Ot.sample=Zi,Ot.prototype.sample=function(t){return this.__chain__||null!=t?this.thru(function(e){return Zi(e,t)}):Zi(this.value())},Ot.VERSION=I,ie(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){Ot[t].placeholder=Ot}),ie(["dropWhile","filter","map","takeWhile"],function(t,e){var n=e!=O,i=e==V;jt.prototype[t]=function(t,o){var a=this.__filtered__,s=a&&i?new jt(this):this.clone();return(s.__iteratees__||(s.__iteratees__=[])).push({done:!1,count:0,index:0,iteratee:Bn(t,o,1),limit:-1,type:e}),s.__filtered__=a||n,s}}),ie(["drop","take"],function(t,e){var n=t+"While";jt.prototype[t]=function(n){var i=this.__filtered__,o=i&&!e?this.dropWhile():this.clone();if(n=null==n?1:hs(Ya(n)||0,0),i)e?o.__takeCount__=ms(o.__takeCount__,n):yi(o.__iteratees__).limit=n;else{(o.__views__||(o.__views__=[])).push({size:n,type:t+(o.__dir__<0?"Right":"")})}return o},jt.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()},jt.prototype[t+"RightWhile"]=function(t,e){return this.reverse()[n](t,e).reverse()}}),ie(["first","last"],function(t,e){var n="take"+(e?"Right":"");jt.prototype[t]=function(){return this[n](1).value()[0]}}),ie(["initial","rest"],function(t,e){var n="drop"+(e?"":"Right");jt.prototype[t]=function(){return this[n](1)}}),ie(["pluck","where"],function(t,e){var n=e?"filter":"map",i=e?Ve:va;jt.prototype[t]=function(t){return this[n](i(t))}}),jt.prototype.compact=function(){return this.filter(ha)},jt.prototype.reject=function(t,e){return t=Bn(t,e,1),this.filter(function(e){return!t(e)})},jt.prototype.slice=function(t,e){t=null==t?0:+t||0;var n=t<0?this.takeRight(-t):this.drop(t);return e!==x&&(e=+e||0,n=e<0?n.dropRight(-e):n.take(e-t)),n},jt.prototype.toArray=function(){return this.drop(0)},Ee(jt.prototype,function(t,e){var n=Ot[e];if(n){var i=/^(?:filter|map|reject)|While$/.test(e),o=/^(?:first|last)$/.test(e);Ot.prototype[e]=function(){var e=arguments,a=(e.length,this.__chain__),s=this.__wrapped__,r=!!this.__actions__.length,l=s instanceof jt,c=e[0],d=l||Ir(s);d&&i&&"function"==typeof c&&1!=c.length&&(l=d=!1);var u=l&&!r;if(o&&!a)return u?t.call(s):n.call(Ot,this.value());var p=function(t){var i=[t];return Xa.apply(i,e),n.apply(Ot,i)};if(d){var h=u?s:new jt(this),m=t.apply(h,e);if(!o&&(r||m.__actions__)){(m.__actions__||(m.__actions__=[])).push({func:Mi,args:[p],thisArg:Ot})}return new Ft(m,a)}return this.thru(p)}}}),ie(["concat","join","pop","push","replace","shift","sort","splice","split","unshift"],function(t){var e=(/^(?:replace|split)$/.test(t)?za:Ba)[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:join|pop|replace|shift)$/.test(t);Ot.prototype[t]=function(){var t=arguments;return i&&!this.__chain__?e.apply(this.value(),t):this[n](function(n){return e.apply(n,t)})}}),Ee(jt.prototype,function(t,e){var n=Ot[e];if(n){var i=n.name;(ks[i]||(ks[i]=[])).push({name:e,func:n})}}),ks[kn(null,T).name]=[{name:"wrapper",func:null}],jt.prototype.clone=qt,jt.prototype.reverse=Ht,jt.prototype.value=Wt,Ot.prototype.chain=Ui,Ot.prototype.commit=Bi,Ot.prototype.plant=Vi,Ot.prototype.reverse=zi,Ot.prototype.toString=Oi,Ot.prototype.run=Ot.prototype.toJSON=Ot.prototype.valueOf=Ot.prototype.value=Ni,Ot.prototype.collect=Ot.prototype.map,Ot.prototype.head=Ot.prototype.first,Ot.prototype.select=Ot.prototype.filter,Ot.prototype.tail=Ot.prototype.rest,Ot}var x,I="3.7.0",C=1,T=2,_=4,k=8,L=16,E=32,A=64,D=128,P=256,R=30,M="...",U=150,B=16,V=0,z=1,O=2,N="Expected a function",F="__lodash_placeholder__",j="[object Arguments]",q="[object Array]",H="[object Boolean]",W="[object Date]",G="[object Error]",$="[object Function]",Z="[object Number]",K="[object Object]",Y="[object RegExp]",Q="[object String]",J="[object ArrayBuffer]",X="[object Float32Array]",tt="[object Float64Array]",et="[object Int8Array]",nt="[object Int16Array]",it="[object Int32Array]",ot="[object Uint8Array]",at="[object Uint8ClampedArray]",st="[object Uint16Array]",rt="[object Uint32Array]",lt=/\b__p \+= '';/g,ct=/\b(__p \+=) '' \+/g,dt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ut=/&(?:amp|lt|gt|quot|#39|#96);/g,pt=/[&<>"'`]/g,ht=RegExp(ut.source),mt=RegExp(pt.source),ft=/<%-([\s\S]+?)%>/g,gt=/<%([\s\S]+?)%>/g,bt=/<%=([\s\S]+?)%>/g,yt=/\.|\[(?:[^[\]]+|(["'])(?:(?!\1)[^\n\\]|\\.)*?)\1\]/,vt=/^\w*$/,wt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,St=/[.*+?^${}()|[\]\/\\]/g,xt=RegExp(St.source),It=/[\u0300-\u036f\ufe20-\ufe23]/g,Ct=/\\(\\)?/g,Tt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,_t=/\w*$/,kt=/^0[xX]/,Lt=/^\[object .+?Constructor\]$/,Et=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,At=/($^)/,Dt=/['\n\r\u2028\u2029\\]/g,Pt=function(){var t="[A-Z\\xc0-\\xd6\\xd8-\\xde]",e="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(t+"+(?="+t+e+")|"+t+"?"+e+"|"+t+"+|[0-9]+","g")}(),Rt=" \t\v\fÂ \ufeff\n\r\u2028\u2029áá ââââââââââââ¯âã",Mt=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","document","isFinite","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","window"],Ut=-1,Bt={};Bt[X]=Bt[tt]=Bt[et]=Bt[nt]=Bt[it]=Bt[ot]=Bt[at]=Bt[st]=Bt[rt]=!0,Bt[j]=Bt[q]=Bt[J]=Bt[H]=Bt[W]=Bt[G]=Bt[$]=Bt["[object Map]"]=Bt[Z]=Bt[K]=Bt[Y]=Bt["[object Set]"]=Bt[Q]=Bt["[object WeakMap]"]=!1;var Vt={};Vt[j]=Vt[q]=Vt[J]=Vt[H]=Vt[W]=Vt[X]=Vt[tt]=Vt[et]=Vt[nt]=Vt[it]=Vt[Z]=Vt[K]=Vt[Y]=Vt[Q]=Vt[ot]=Vt[at]=Vt[st]=Vt[rt]=!0,Vt[G]=Vt[$]=Vt["[object Map]"]=Vt["[object Set]"]=Vt["[object WeakMap]"]=!1;var zt={leading:!1,maxWait:0,trailing:!1},Ot={"Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã ":"a","Ã¡":"a","Ã¢":"a","Ã£":"a","Ã¤":"a","Ã¥":"a","Ã":"C","Ã§":"c","Ã":"D","Ã°":"d","Ã":"E","Ã":"E","Ã":"E","Ã":"E","Ã¨":"e","Ã©":"e","Ãª":"e","Ã«":"e","Ã":"I","Ã":"I","Ã":"I","Ã":"I","Ã¬":"i","Ã­":"i","Ã®":"i","Ã¯":"i","Ã":"N","Ã±":"n","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã²":"o","Ã³":"o","Ã´":"o","Ãµ":"o","Ã¶":"o","Ã¸":"o","Ã":"U","Ã":"U","Ã":"U","Ã":"U","Ã¹":"u","Ãº":"u","Ã»":"u","Ã¼":"u","Ã":"Y","Ã½":"y","Ã¿":"y","Ã":"Ae","Ã¦":"ae","Ã":"Th","Ã¾":"th","Ã":"ss"},Nt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Ft={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},jt={function:!0,object:!0},qt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ht=jt[typeof exports]&&exports&&!exports.nodeType&&exports,Wt=jt[typeof module]&&module&&!module.nodeType&&module,Gt=Ht&&Wt&&"object"==typeof global&&global&&global.Object&&global,$t=jt[typeof self]&&self&&self.Object&&self,Zt=jt[typeof window]&&window&&window.Object&&window,Kt=Wt&&Wt.exports===Ht&&Ht,Yt=Gt||Zt!==(this&&this.window)&&Zt||$t||this,Qt=S();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Yt._=Qt,define("lodash",[],function(){return Qt})):Ht&&Wt?Kt?(Wt.exports=Qt)._=Qt:Ht._=Qt:Yt._=Qt}).call(this),function(t,e){"function"==typeof define&&define.amd?define("common/util/inherits",[],e):t.inherits=e()}(this,function(){return"function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}),define("common/util/extends",["common/util/inherits","lodash"],function(t,e){return function(n,i,o){return t(n,i),n.prototype=e.extend(n.prototype,o),n}}),define("lib/ecmaScript5",[],function(){"bind"in Function.prototype||(Function.prototype.bind=function(t){var e=this;if(arguments.length<=1)return function(){return e.apply(t,arguments)};var n=Array.prototype.slice.call(arguments,1);return function(){return e.apply(t,0===arguments.length?n:n.concat(Array.prototype.slice.call(arguments)))}}),"trim"in String.prototype||(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),"indexOf"in Array.prototype||(Array.prototype.indexOf=function(t,e){void 0===e&&(e=0),e<0&&(e+=this.length),e<0&&(e=0);for(var n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1}),"lastIndexOf"in Array.prototype||(Array.prototype.lastIndexOf=function(t,e){for(void 0===e&&(e=this.length-1),e<0&&(e+=this.length),e>this.length-1&&(e=this.length-1),e++;e-- >0;)if(e in this&&this[e]===t)return e;return-1}),"forEach"in Array.prototype||(Array.prototype.forEach=function(t,e){for(var n=0,i=this.length;n<i;n++)n in this&&t.call(e,this[n],n,this)}),"map"in Array.prototype||(Array.prototype.map=function(t,e){for(var n=new Array(this.length),i=0,o=this.length;i<o;i++)i in this&&(n[i]=t.call(e,this[i],i,this));return n}),"filter"in Array.prototype||(Array.prototype.filter=function(t,e){for(var n,i=[],o=0,a=this.length;o<a;o++)o in this&&t.call(e,n=this[o],o,this)&&i.push(n);return i}),"every"in Array.prototype||(Array.prototype.every=function(t,e){for(var n=0,i=this.length;n<i;n++)if(n in this&&!t.call(e,this[n],n,this))return!1;return!0}),"some"in Array.prototype||(Array.prototype.some=function(t,e){for(var n=0,i=this.length;n<i;n++)if(n in this&&t.call(e,this[n],n,this))return!0;return!1})}),define("lib/domReady",[],function(){"use strict";function t(t){var e;for(e=0;e<t.length;e+=1)t[e](c)}function e(){var e=d;l&&e.length&&(d=[],t(e))}function n(){l||(l=!0,s&&clearInterval(s),e())}function i(t){return l?t(c):d.push(t),i}var o,a,s,r="undefined"!=typeof window&&window.document,l=!r,c=r?document:null,d=[];if(r){if(document.addEventListener)document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1);else if(window.attachEvent){window.attachEvent("onload",n),a=document.createElement("div");try{o=null===window.frameElement}catch(t){}a.doScroll&&o&&window.external&&(s=setInterval(function(){try{a.doScroll(),n()}catch(t){}},30))}"complete"===document.readyState&&n()}return i.version="2.0.1",i.load=function(t,e,n,o){o.isBuild?n(null):i(n)},i}),define("model/breakpoints",[],function(){return{0:{s:0,f:319},1:{s:320,f:399},2:{s:400,f:599},3:{s:600,f:1007},4:{s:1008,f:1e4}}}),function(t){function e(t,e,n,i,o){this._listener=e,this._isOnce=n,this.context=i,this._signal=t,this._priority=o||0}function n(t,e){if("function"!=typeof t)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",e))}function i(){this._bindings=[],this._prevParams=null;var t=this;this.dispatch=function(){i.prototype.dispatch.apply(t,arguments)}}e.prototype={active:!0,params:null,execute:function(t){var e,n;return this.active&&this._listener&&(n=this.params?this.params.concat(t):t,e=this._listener.apply(this.context,n),this._isOnce&&this.detach()),e},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},i.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(t,n,i,o){var a,s=this._indexOfListener(t,i);if(-1!==s){if(a=this._bindings[s],a.isOnce()!==n)throw new Error("You cannot add"+(n?"":"Once")+"() then add"+(n?"Once":"")+"() the same listener without removing the relationship first.")}else a=new e(this,t,n,i,o),this._addBinding(a);return this.memorize&&this._prevParams&&a.execute(this._prevParams),a},_addBinding:function(t){var e=this._bindings.length;do{--e}while(this._bindings[e]&&t._priority<=this._bindings[e]._priority);this._bindings.splice(e+1,0,t)},_indexOfListener:function(t,e){for(var n,i=this._bindings.length;i--;)if(n=this._bindings[i],n._listener===t&&n.context===e)return i;return-1},has:function(t,e){return-1!==this._indexOfListener(t,e)},add:function(t,e,i){return n(t,"add"),this._registerListener(t,!1,e,i)},addOnce:function(t,e,i){return n(t,"addOnce"),this._registerListener(t,!0,e,i)},remove:function(t,e){n(t,"remove");var i=this._indexOfListener(t,e);return-1!==i&&(this._bindings[i]._destroy(),this._bindings.splice(i,1)),t},removeAll:function(){for(var t=this._bindings.length;t--;)this._bindings[t]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(t){if(this.active){var e,n=Array.prototype.slice.call(arguments),i=this._bindings.length;if(this.memorize&&(this._prevParams=n),i){e=this._bindings.slice(),this._shouldPropagate=!0;do{i--}while(e[i]&&this._shouldPropagate&&!1!==e[i].execute(n))}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var o=i;o.Signal=i,"function"==typeof define&&define.amd?define("signals",[],function(){return o}):"undefined"!=typeof module&&module.exports?module.exports=o:t.signals=o}(this);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};define("model/mediaQuery",["lib/ecmaScript5","lib/domReady","model/breakpoints","signals","orb/api"],function(t,e,n,i,o){return new function(){var t,a=!1,s=new i.Signal,r=function(){return window.innerWidth};this.init=function(){t=this.getGroup(),o.layout(this.checkGroup.bind(this))},this.checkGroup=function(){var e=this.getGroup();e!=this.getCurrentGroup()&&(t=e,s.dispatch(e))},this.subscribe=function(t,e){switch(t){case"groupChanged":s.add(e)}},this.getCurrentGroup=function(){return t},this.isMobileDevice=function(){return isMobileDevice()},this.isTablet=function(t){var e=this.getGroup();return 3==e&&!1===t||!(3!=e&&4!=e||!t)},this.getGroup=function(){if(this.isFixedWidthLayout())return 4;var t=r();for(var e in n)if(t>=n[e].s&&t<=n[e].f)return Number(e)},this.isCurrentGroupInPermittedGroupString=function(t){var e;return void 0===t||""===t||("number"==typeof t&&(t=t.toString()),e=t.split("_"),"object"!=(void 0===e?"undefined":_typeof(e))&&(e=[t]),void 0!==this.getGroup()&&"function"==typeof this.getGroup().toString&&-1!=e.indexOf(this.getGroup().toString()))},this.setFixedWidthLayout=function(t){a=t},this.isFixedWidthLayout=function(){return a},e(this.init.bind(this))}}),function(t){"use strict";var e={};e.VERSION="0.9.2";var n,i={},o=function(t,e){return function(){return e.apply(t,arguments)}},a=function(){var t,e,n=arguments,i=n[0];for(e=1;e<n.length;e++)for(t in n[e])t in i||!n[e].hasOwnProperty(t)||(i[t]=n[e][t]);return i},s=function(t,e){return{value:t,name:e}};e.DEBUG=s(1,"DEBUG"),e.INFO=s(2,"INFO"),e.WARN=s(4,"WARN"),e.ERROR=s(8,"ERROR"),e.OFF=s(99,"OFF");var r=function(t){this.context=t,this.setLevel(t.filterLevel),this.log=this.info};r.prototype={setLevel:function(t){t&&"value"in t&&(this.context.filterLevel=t)},enabledFor:function(t){var e=this.context.filterLevel;return t.value>=e.value},debug:function(){this.invoke(e.DEBUG,arguments)},info:function(){this.invoke(e.INFO,arguments)},warn:function(){this.invoke(e.WARN,arguments)},error:function(){this.invoke(e.ERROR,arguments)},invoke:function(t,e){n&&this.enabledFor(t)&&n(e,a({level:t},this.context))}};var l=new r({filterLevel:e.OFF});!function(){var t=e;t.enabledFor=o(l,l.enabledFor),t.debug=o(l,l.debug),t.info=o(l,l.info),t.warn=o(l,l.warn),t.error=o(l,l.error),t.log=t.info}(),e.setHandler=function(t){n=t},e.setLevel=function(t){l.setLevel(t);for(var e in i)i.hasOwnProperty(e)&&i[e].setLevel(t)},e.get=function(t){return i[t]||(i[t]=new r(a({name:t},l.context)))},e.useDefaults=function(n){"console"in t&&(e.setLevel(n||e.DEBUG),e.setHandler(function(n,i){var o=t.console,a=o.log;i.name&&(n[0]="["+i.name+"] "+n[0]),i.level===e.WARN&&o.warn?a=o.warn:i.level===e.ERROR&&o.error?a=o.error:i.level===e.INFO&&o.info&&(a=o.info),"function"==typeof a&&a.apply(o,n)}))},"function"==typeof define&&define.amd?define("util/logger",e):"undefined"!=typeof module&&module.exports?module.exports=e:t.Logger=e}(window),define("model/dataModel",[],function(){function t(){}return t.prototype.init=function(t){this.setConfig(t)},t.prototype.setConfig=function(t){this.config=t},t.prototype.getData=function(){return this.data},t.prototype.setData=function(t){this.data=t},t.prototype.load=function(){},t}),define("model/pageData",["common/util/inherits","model/dataModel","signals"],function(t,e,n){function i(){this.updateSignal=new n.Signal,this.errorSignal=new n.Signal}return t(i,e),i.prototype.init=function(){this.setData({})},i.prototype.load=function(){var t={};void 0!==window.bespokePageData&&(t=window.bespokePageData),this.setData(t),this.updateSignal.dispatch(this,this.getData())},i.prototype.subscribe=function(t,e){switch(t){case"update":this.updateSignal.add(e);break;case"error":this.errorSignal.add(e)}},i}),define("model/digitalData",[],function(){return"undefined"!=typeof digitalData&&digitalData});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=e():"function"==typeof define&&define.amd?define("lib/spin",e):t.Spinner=e()}(this,function(){"use strict";function t(t,e){var n,i=document.createElement(t||"div");for(n in e)i[n]=e[n];return i}function e(t){for(var e=1,n=arguments.length;e<n;e++)t.appendChild(arguments[e]);return t}function n(t,e,n,i){var o=["opacity",e,~~(100*t),n,i].join("-"),a=.01+n/i*100,s=Math.max(1-(1-t)/e*(100-a),t),r=l.substring(0,l.indexOf("Animation")).toLowerCase(),c=r&&"-"+r+"-"||"";return d[o]||(u.insertRule("@"+c+"keyframes "+o+"{0%{opacity:"+s+"}"+a+"%{opacity:"+t+"}"+(a+.01)+"%{opacity:1}"+(a+e)%100+"%{opacity:"+t+"}100%{opacity:"+s+"}}",u.cssRules.length),d[o]=1),o}function i(t,e){var n,i,o=t.style;for(e=e.charAt(0).toUpperCase()+e.slice(1),i=0;i<c.length;i++)if(n=c[i]+e,void 0!==o[n])return n;if(void 0!==o[e])return e}function o(t,e){for(var n in e)t.style[i(t,n)||n]=e[n];return t}function a(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)void 0===t[i]&&(t[i]=n[i])}return t}function s(t,e){return"string"==typeof t?t:t[e%t.length]}function r(t){this.opts=a(t||{},r.defaults,p)}var l,c=["webkit","Moz","ms","O"],d={},u=function(){var n=t("style",{type:"text/css"});return e(document.getElementsByTagName("head")[0],n),n.sheet||n.styleSheet}(),p={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",
direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",position:"absolute"};r.defaults={},a(r.prototype,{spin:function(e){this.stop();var n=this,i=n.opts,a=n.el=o(t(0,{className:i.className}),{position:i.position,width:0,zIndex:i.zIndex});i.radius,i.length,i.width;if(o(a,{left:i.left,top:i.top}),e&&e.insertBefore(a,e.firstChild||null),a.setAttribute("role","progressbar"),n.lines(a,n.opts),!l){var s,r=0,c=(i.lines-1)*(1-i.direction)/2,d=i.fps,u=d/i.speed,p=(1-i.opacity)/(u*i.trail/100),h=u/i.lines;!function t(){r++;for(var e=0;e<i.lines;e++)s=Math.max(1-(r+(i.lines-e)*h)%u*p,i.opacity),n.opacity(a,e*i.direction+c,s,i);n.timeout=n.el&&setTimeout(t,~~(1e3/d))}()}return n},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=void 0),this},lines:function(i,a){function r(e,n){return o(t(),{position:"absolute",width:a.length+a.width+"px",height:a.width+"px",background:e,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/a.lines*d+a.rotate)+"deg) translate("+a.radius+"px,0)",borderRadius:(a.corners*a.width>>1)+"px"})}for(var c,d=0,u=(a.lines-1)*(1-a.direction)/2;d<a.lines;d++)c=o(t(),{position:"absolute",top:1+~(a.width/2)+"px",transform:a.hwaccel?"translate3d(0,0,0)":"",opacity:a.opacity,animation:l&&n(a.opacity,a.trail,u+d*a.direction,a.lines)+" "+1/a.speed+"s linear infinite"}),a.shadow&&e(c,o(r("#000","0 0 4px #000"),{top:"2px"})),e(i,e(c,r(s(a.color,d),"0 0 1px rgba(0,0,0,.1)")));return i},opacity:function(t,e,n){e<t.childNodes.length&&(t.childNodes[e].style.opacity=n)}});var h=o(t("group"),{behavior:"url(#default#VML)"});return!i(h,"transform")&&h.adj?function(){function n(e,n){return t("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',n)}u.addRule(".spin-vml","behavior:url(#default#VML)"),r.prototype.lines=function(t,i){function a(){return o(n("group",{coordsize:d+" "+d,coordorigin:-c+" "+-c}),{width:d,height:d})}function r(t,r,l){e(p,e(o(a(),{rotation:360/i.lines*t+"deg",left:~~r}),e(o(n("roundrect",{arcsize:i.corners}),{width:c,height:i.width,left:i.radius,top:-i.width>>1,filter:l}),n("fill",{color:s(i.color,t),opacity:i.opacity}),n("stroke",{opacity:0}))))}var l,c=i.length+i.width,d=2*c,u=2*-(i.width+i.length)+"px",p=o(a(),{position:"absolute",top:u,left:u});if(i.shadow)for(l=1;l<=i.lines;l++)r(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=i.lines;l++)r(l);return e(t,p)},r.prototype.opacity=function(t,e,n,i){var o=t.firstChild;i=i.shadow&&i.lines||0,o&&e+i<o.childNodes.length&&(o=o.childNodes[e+i],o=o&&o.firstChild,(o=o&&o.firstChild)&&(o.opacity=n))}}():l=i(h,"animation"),r}),define("module/loader",["lib/spin"],function(t){function e(t,e){this.spinner=null,this.init(t,e)}return e.prototype.init=function(e,n){var i={color:n,trail:10,shadow:!1,hwaccel:!0};this.spinner=new t(i).spin(e)},e.prototype.stop=function(){this.spinner.stop()},e.prototype.spin=function(t){this.spinner.spin(t)},e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hogan={};!function(t){function e(t,e,n){var i;return e&&"object"==(void 0===e?"undefined":_typeof(e))&&(void 0!==e[t]?i=e[t]:n&&e.get&&"function"==typeof e.get&&(i=e.get(t))),i}function n(t,e,n,i,o,a){function s(){}function r(){}s.prototype=t,r.prototype=t.subs;var l,c=new s;c.subs=new r,c.subsText={},c.buf="",i=i||{},c.stackSubs=i,c.subsText=a;for(l in e)i[l]||(i[l]=e[l]);for(l in i)c.subs[l]=i[l];o=o||{},c.stackPartials=o;for(l in n)o[l]||(o[l]=n[l]);for(l in o)c.partials[l]=o[l];return c}function i(t){return String(null===t||void 0===t?"":t)}function o(t){return t=i(t),d.test(t)?t.replace(a,"&amp;").replace(s,"&lt;").replace(r,"&gt;").replace(l,"&#39;").replace(c,"&quot;"):t}t.Template=function(t,e,n,i){t=t||{},this.r=t.code||this.r,this.c=n,this.options=i||{},this.text=e||"",this.partials=t.partials||{},this.subs=t.subs||{},this.buf=""},t.Template.prototype={r:function(t,e,n){return""},v:o,t:i,render:function(t,e,n){return this.ri([t],e||{},n)},ri:function(t,e,n){return this.r(t,e,n)},ep:function(t,e){var i=this.partials[t],o=e[i.name];if(i.instance&&i.base==o)return i.instance;if("string"==typeof o){if(!this.c)throw new Error("No compiler available.");o=this.c.compile(o,this.options)}if(!o)return null;if(this.partials[t].base=o,i.subs){e.stackText||(e.stackText={});for(key in i.subs)e.stackText[key]||(e.stackText[key]=void 0!==this.activeSub&&e.stackText[this.activeSub]?e.stackText[this.activeSub]:this.text);o=n(o,i.subs,i.partials,this.stackSubs,this.stackPartials,e.stackText)}return this.partials[t].instance=o,o},rp:function(t,e,n,i){var o=this.ep(t,n);return o?o.ri(e,n,i):""},rs:function(t,e,n){var i=t[t.length-1];if(!u(i))return void n(t,e,this);for(var o=0;o<i.length;o++)t.push(i[o]),n(t,e,this),t.pop()},s:function(t,e,n,i,o,a,s){var r;return(!u(t)||0!==t.length)&&("function"==typeof t&&(t=this.ms(t,e,n,i,o,a,s)),r=!!t,!i&&r&&e&&e.push("object"==(void 0===t?"undefined":_typeof(t))?t:e[e.length-1]),r)},d:function(t,n,i,o){var a,s=t.split("."),r=this.f(s[0],n,i,o),l=this.options.modelGet,c=null;if("."===t&&u(n[n.length-2]))r=n[n.length-1];else for(var d=1;d<s.length;d++)a=e(s[d],r,l),void 0!==a?(c=r,r=a):r="";return!(o&&!r)&&(o||"function"!=typeof r||(n.push(c),r=this.mv(r,n,i),n.pop()),r)},f:function(t,n,i,o){for(var a=!1,s=null,r=!1,l=this.options.modelGet,c=n.length-1;c>=0;c--)if(s=n[c],void 0!==(a=e(t,s,l))){r=!0;break}return r?(o||"function"!=typeof a||(a=this.mv(a,n,i)),a):!o&&""},ls:function(t,e,n,o,a){var s=this.options.delimiters;return this.options.delimiters=a,this.b(this.ct(i(t.call(e,o)),e,n)),this.options.delimiters=s,!1},ct:function(t,e,n){if(this.options.disableLambda)throw new Error("Lambda features disabled.");return this.c.compile(t,this.options).render(e,n)},b:function(t){this.buf+=t},fl:function(){var t=this.buf;return this.buf="",t},ms:function(t,e,n,i,o,a,s){var r,l=e[e.length-1],c=t.call(l);return"function"==typeof c?!!i||(r=this.activeSub&&this.subsText&&this.subsText[this.activeSub]?this.subsText[this.activeSub]:this.text,this.ls(c,l,n,r.substring(o,a),s)):c},mv:function(t,e,n){var o=e[e.length-1],a=t.call(o);return"function"==typeof a?this.ct(i(a.call(o)),o,n):a},sub:function(t,e,n,i){var o=this.subs[t];o&&(this.activeSub=t,o(e,n,this,i),this.activeSub=!1)}};var a=/&/g,s=/</g,r=/>/g,l=/\'/g,c=/\"/g,d=/[&<>\"\']/,u=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}}("undefined"!=typeof exports?exports:Hogan),function(t){function e(t){"}"===t.n.substr(t.n.length-1)&&(t.n=t.n.substring(0,t.n.length-1))}function n(t){return t.trim?t.trim():t.replace(/^\s*|\s*$/g,"")}function i(t,e,n){if(e.charAt(n)!=t.charAt(0))return!1;for(var i=1,o=t.length;i<o;i++)if(e.charAt(n+i)!=t.charAt(i))return!1;return!0}function o(e,n,i,r){var l=[],c=null,d=null,u=null;for(d=i[i.length-1];e.length>0;){if(u=e.shift(),d&&"<"==d.tag&&!(u.tag in S))throw new Error("Illegal content in < super tag.");if(t.tags[u.tag]<=t.tags.$||a(u,r))i.push(u),u.nodes=o(e,u.tag,i,r);else{if("/"==u.tag){if(0===i.length)throw new Error("Closing tag without opener: /"+u.n);if(c=i.pop(),u.n!=c.n&&!s(u.n,c.n,r))throw new Error("Nesting error: "+c.n+" vs. "+u.n);return c.end=u.i,l}"\n"==u.tag&&(u.last=0==e.length||"\n"==e[0].tag)}l.push(u)}if(i.length>0)throw new Error("missing closing tag: "+i.pop().n);return l}function a(t,e){for(var n=0,i=e.length;n<i;n++)if(e[n].o==t.n)return t.tag="#",!0}function s(t,e,n){for(var i=0,o=n.length;i<o;i++)if(n[i].c==t&&n[i].o==e)return!0}function r(t){var e=[];for(var n in t)e.push('"'+c(n)+'": function(c,p,t,i) {'+t[n]+"}");return"{ "+e.join(",")+" }"}function l(t){var e=[];for(var n in t.partials)e.push('"'+c(n)+'":{name:"'+c(t.partials[n].name)+'", '+l(t.partials[n])+"}");return"partials: {"+e.join(",")+"}, subs: "+r(t.subs)}function c(t){return t.replace(y,"\\\\").replace(f,'\\"').replace(g,"\\n").replace(b,"\\r").replace(v,"\\u2028").replace(w,"\\u2029")}function d(t){return~t.indexOf(".")?"d":"f"}function u(t,e){var n="<"+(e.prefix||""),i=n+t.n+x++;return e.partials[i]={name:t.n,partials:{}},e.code+='t.b(t.rp("'+c(i)+'",c,p,"'+(t.indent||"")+'"));',i}function p(t,e){e.code+="t.b(t.t(t."+d(t.n)+'("'+c(t.n)+'",c,p,0)));'}function h(t){return"t.b("+t+");"}var m=/\S/,f=/\"/g,g=/\n/g,b=/\r/g,y=/\\/g,v=/\u2028/,w=/\u2029/;t.tags={"#":1,"^":2,"<":3,$:4,"/":5,"!":6,">":7,"=":8,_v:9,"{":10,"&":11,_t:12},t.scan=function(o,a){function s(){h.length>0&&(f.push({tag:"_t",text:new String(h)}),h="")}function r(){for(var e=!0,n=y;n<f.length;n++)if(!(e=t.tags[f[n].tag]<t.tags._v||"_t"==f[n].tag&&null===f[n].text.match(m)))return!1;return e}function l(t,e){if(s(),t&&r())for(var n,i=y;i<f.length;i++)f[i].text&&((n=f[i+1])&&">"==n.tag&&(n.indent=f[i].text.toString()),f.splice(i,1));else e||f.push({tag:"\n"});g=!1,y=f.length}var c=o.length,d=0,u=null,p=null,h="",f=[],g=!1,b=0,y=0,v="{{",w="}}";for(a&&(a=a.split(" "),v=a[0],w=a[1]),b=0;b<c;b++)0==d?i(v,o,b)?(--b,s(),d=1):"\n"==o.charAt(b)?l(g):h+=o.charAt(b):1==d?(b+=v.length-1,p=t.tags[o.charAt(b+1)],u=p?o.charAt(b+1):"_v","="==u?(b=function(t,e){var i="="+w,o=t.indexOf(i,e),a=n(t.substring(t.indexOf("=",e)+1,o)).split(" ");return v=a[0],w=a[a.length-1],o+i.length-1}(o,b),d=0):(p&&b++,d=2),g=b):i(w,o,b)?(f.push({tag:u,n:n(h),otag:v,ctag:w,i:"/"==u?g-v.length:b+w.length}),h="",b+=w.length-1,d=0,"{"==u&&("}}"==w?b++:e(f[f.length-1]))):h+=o.charAt(b);return l(g,!0),f};var S={_t:!0,"\n":!0,$:!0,"/":!0};t.stringify=function(e,n,i){return"{code: function (c,p,i) { "+t.wrapMain(e.code)+" },"+l(e)+"}"};var x=0;t.generate=function(e,n,i){x=0;var o={code:"",subs:{},partials:{}};return t.walk(e,o),i.asString?this.stringify(o,n,i):this.makeTemplate(o,n,i)},t.wrapMain=function(t){return'var t=this;t.b(i=i||"");'+t+"return t.fl();"},t.template=t.Template,t.makeTemplate=function(t,e,n){var i=this.makePartials(t);return i.code=new Function("c","p","i",this.wrapMain(t.code)),new this.template(i,e,this,n)},t.makePartials=function(t){var e,n={subs:{},partials:t.partials,name:t.name};for(e in n.partials)n.partials[e]=this.makePartials(n.partials[e]);for(e in t.subs)n.subs[e]=new Function("c","p","t","i",t.subs[e]);return n},t.codegen={"#":function(e,n){n.code+="if(t.s(t."+d(e.n)+'("'+c(e.n)+'",c,p,1),c,p,0,'+e.i+","+e.end+',"'+e.otag+" "+e.ctag+'")){t.rs(c,p,function(c,p,t){',t.walk(e.nodes,n),n.code+="});c.pop();}"},"^":function(e,n){n.code+="if(!t.s(t."+d(e.n)+'("'+c(e.n)+'",c,p,1),c,p,1,0,0,"")){',t.walk(e.nodes,n),n.code+="};"},">":u,"<":function(e,n){var i={partials:{},code:"",subs:{},inPartial:!0};t.walk(e.nodes,i);var o=n.partials[u(e,n)];o.subs=i.subs,o.partials=i.partials},$:function(e,n){var i={subs:{},code:"",partials:n.partials,prefix:e.n};t.walk(e.nodes,i),n.subs[e.n]=i.code,n.inPartial||(n.code+='t.sub("'+c(e.n)+'",c,p,i);')},"\n":function(t,e){e.code+=h('"\\n"'+(t.last?"":" + i"))},_v:function(t,e){e.code+="t.b(t.v(t."+d(t.n)+'("'+c(t.n)+'",c,p,0)));'},_t:function(t,e){e.code+=h('"'+c(t.text)+'"')},"{":p,"&":p},t.walk=function(e,n){for(var i,o=0,a=e.length;o<a;o++)(i=t.codegen[e[o].tag])&&i(e[o],n);return n},t.parse=function(t,e,n){return n=n||{},o(t,"",[],n.sectionTags||[])},t.cache={},t.cacheKey=function(t,e){return[t,!!e.asString,!!e.disableLambda,e.delimiters,!!e.modelGet].join("||")},t.compile=function(e,n){n=n||{};var i=t.cacheKey(e,n),o=this.cache[i];if(o){var a=o.partials;for(var s in a)delete a[s].instance;return o}return o=this.generate(this.parse(this.scan(e,n.delimiters),e,n),e,n),this.cache[i]=o}}("undefined"!=typeof exports?exports:Hogan),"function"==typeof define&&define.amd&&define("hogan",Hogan),define("templates",["hogan"],function(t){var e={"ad-slot-adsense-all":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.d("meta-data.advertising.adSlots.adsense_mpu",t,e,1),t,e,0,46,72,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<wrapped-mpu0",t,e,"        "))}),t.pop()),i.fl()},partials:{"<wrapped-mpu0":{name:"wrapped-mpu",partials:{},subs:{}}},subs:{}}),"ad-slot-deferred":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b("<div "),i.b("\n"+n),i.b("    data-bbccom-advert-deferred "),i.b("\n"+n),i.b('    data-bbccom-advert-id="'),i.b(i.v(i.f("id",t,e,0))),i.b('"'),i.b("\n"+n),i.b('    data-bbccom-advert-groups="'),i.b(i.v(i.f("groups",t,e,0))),i.b('"></div>'),i.fl()},partials:{},subs:{}}),"ad-slot-ibroadcast-image-gallery":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div id="ad-slot-overlay" class="ad-slot-overlay">'),i.b("\n"+n),i.s(i.f("mpu",t,e,1),t,e,0,63,93,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<wrapped-mpu0",t,e,"        "))}),t.pop()),i.b("    <p>Click cross to continue slideshow</p>"),i.b("\n"+n),i.b('    <span class="close-gallery gelicon gelicon--no"></span>'),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{"<wrapped-mpu0":{name:"wrapped-mpu",partials:{},subs:{}}},subs:{}}),"ad-slot-infeed":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.d("meta-data.advertising.adSlots.infeed",t,e,1),t,e,0,41,60,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<ad-slot0",t,e,"    "))}),t.pop()),i.fl()},partials:{"<ad-slot0":{name:"ad-slot",partials:{},subs:{}}},subs:{}}),"ad-slot-infinite-mpu":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="mpu-wrapper">'),i.b("\n"+n),i.b(i.rp("<ad-slot-infinite0",t,e,"    ")),i.b("</div> "),i.fl()},partials:{"<ad-slot-infinite0":{name:"ad-slot-infinite",partials:{},subs:{}}},subs:{}}),"ad-slot-infinite":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div id="bbccom_'),i.b(i.v(i.f("id",t,e,0))),i.b("_"),i.b(i.v(i.f("groups",t,e,0))),i.b('" data-advert-groups="'),i.b(i.v(i.f("groups",t,e,0))),i.b('" class="bbccom_slot '),i.b(i.v(i.f("slot-class",t,e,0))),i.b('" aria-hidden="true">'),i.b("\n"+n),i.b('    <div class="bbccom_advert"></div>'),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{},subs:{}}),"ad-slot-leaderboard-deferred":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.d("meta-data.advertising.adSlots.leaderboard",t,e,1),t,e,0,46,73,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<ad-slot-deferred0",t,e,"    "))}),t.pop()),i.fl()},partials:{"<ad-slot-deferred0":{name:"ad-slot-deferred",partials:{},subs:{}}},subs:{}}),"ad-slot-leaderboard-primary":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.d("meta-data.advertising.adSlots.leaderboard-1_2_3",t,e,1),t,e,0,52,71,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<ad-slot0",t,e,"    "))}),t.pop()),i.fl()},partials:{"<ad-slot0":{name:"ad-slot",partials:{},subs:{}}},subs:{}}),"ad-slot-leaderboard-secondary":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.d("meta-data.advertising.adSlots.leaderboard-4",t,e,1),t,e,0,48,67,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<ad-slot0",t,e,"    "))}),t.pop()),i.fl()},partials:{"<ad-slot0":{name:"ad-slot",partials:{},subs:{}}},subs:{}}),"ad-slot-leaderboard":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.d("meta-data.advertising.adSlots.leaderboard",t,e,1),t,e,0,46,65,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<ad-slot0",t,e,"    "))}),t.pop()),i.fl()},partials:{"<ad-slot0":{name:"ad-slot",partials:{},subs:{}}},subs:{}}),"ad-slot-mpu-bottom-deferred":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.d("meta-data.advertising.adSlots.mpu_bottom",t,e,1),t,e,0,45,76,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<wrapped-mpu-deferred0",t,e,"    "))}),t.pop()),i.fl()},partials:{"<wrapped-mpu-deferred0":{name:"wrapped-mpu-deferred",partials:{},subs:{}}},subs:{}}),"ad-slot-mpu-bottom":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.d("meta-data.advertising.adSlots.mpu_bottom",t,e,1),t,e,0,45,71,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<wrapped-mpu0",t,e,"        "))}),t.pop()),i.fl()},partials:{"<wrapped-mpu0":{name:"wrapped-mpu",partials:{},subs:{}}},subs:{}}),"ad-slot-mpu-primary":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.d("meta-data.advertising.adSlots.mpu-1_2_3",t,e,1),t,e,0,44,70,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<wrapped-mpu0",t,e,"        "))}),t.pop()),i.fl()},partials:{"<wrapped-mpu0":{name:"wrapped-mpu",partials:{},subs:{}}},subs:{}}),"ad-slot-mpu-secondary":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.d("meta-data.advertising.adSlots.mpu-4",t,e,1),t,e,0,40,66,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<wrapped-mpu0",t,e,"        "))}),t.pop()),i.fl()},partials:{"<wrapped-mpu0":{name:"wrapped-mpu",partials:{},subs:{}}},subs:{}}),"ad-slot-native-side":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.d("meta-data.advertising.adSlots.native_side",t,e,1),t,e,0,46,68,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<wrapped-mpu0",t,e,"    "))}),t.pop()),i.fl()},partials:{"<wrapped-mpu0":{name:"wrapped-mpu",partials:{},subs:{}}},subs:{}}),"ad-slot-parallax":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b("\n"+n),i.s(i.d("meta-data.advertising.adSlots.parallax",t,e,1),t,e,0,44,117,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('    <div class="parallax-slot-wrapper">'),i.b("\n"+n),i.b(i.rp("<ad-slot0",t,e,"        ")),i.b("    </div>"),i.b("\n"+n)}),t.pop()),i.b("\n"),i.fl()},partials:{"<ad-slot0":{name:"ad-slot",partials:{},subs:{}}},subs:{}}),"ad-slot-promo-feature-2":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.d("meta-data.advertising.adSlots.promo_feature_2",t,e,1),t,e,0,50,72,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<wrapped-mpu0",t,e,"    "))}),t.pop()),i.fl()},partials:{"<wrapped-mpu0":{name:"wrapped-mpu",partials:{},subs:{}}},subs:{}}),"ad-slot-promo-feature-3":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.d("meta-data.advertising.adSlots.promo_feature_3",t,e,1),t,e,0,50,72,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<wrapped-mpu0",t,e,"    "))}),t.pop()),i.fl()},partials:{"<wrapped-mpu0":{name:"wrapped-mpu",partials:{},subs:{}}},subs:{}}),"ad-slot-sponsor-fake":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div data-advert-groups="'),i.b(i.v(i.f("groups",t,e,0))),i.b('" class="bbccom_slot bbccom_sponsor_section_slot bbccom_visible slot-visible-'),i.b(i.v(i.f("groups",t,e,0))),i.b('" aria-hidden="true" id="bbccom_sponsor_section_fake">'),i.b("\n"+n),i.b('    <div class="bbccom_advert " id="bbccom_sponsor_section">'),i.b("\n"+n),i.b('        <a class="bbccom_text" href="http://advertising.bbcworldwide.com/home/advertisewithus/bbc-storyworks-content" tabindex="-1">Partnered Content Presented By</a>'),i.b("\n"+n),i.b('        <div id="sponsor_section_ad_container">'),i.b("\n"+n),i.b('            <a href="'),i.b(i.v(i.f("replace-url",t,e,0))),i.b('">'),i.b("\n"+n),i.b(i.rp("<responsive-image-tag0",t,e,"                ")),i.b("            </a>"),i.b("\n"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{"<responsive-image-tag0":{name:"responsive-image-tag",partials:{},subs:{}}},subs:{}}),"ad-slot-sponsor-section-primary":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.d("meta-data.advertising.adSlots.sponsor-section-content",t,e,1),t,e,0,58,152,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<ad-slot0",t,e,"    ")),n.s(n.f("promo-module",t,e,1),t,e,0,98,134,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b(n.rp("<attribution-slot1",t,e,"        "))}),t.pop())}),t.pop()),i.fl()},partials:{"<ad-slot0":{name:"ad-slot",partials:{},subs:{}},"<attribution-slot1":{name:"attribution-slot",partials:{},subs:{}}},subs:{}}),"ad-slot-vertical-navbar":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.d("meta-data.advertising.adSlots.verticalnavbar",t,e,1),t,e,0,49,68,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<ad-slot0",t,e,"    "))}),t.pop()),i.fl()},partials:{"<ad-slot0":{name:"ad-slot",partials:{},subs:{}}},subs:{}}),"ad-slot":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.f("deferred",t,e,1),t,e,1,0,0,"")||(i.b("<div "),i.s(i.f("async",t,e,1),t,e,0,29,58,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b('id="bbccom_'),n.b(n.v(n.f("id",t,e,0))),n.b("_"),n.b(n.v(n.f("groups",t,e,0))),n.b('"')}),t.pop()),i.s(i.f("async",t,e,1),t,e,1,0,0,"")||(i.b('data-advert-groups="'),i.b(i.v(i.f("groups",t,e,0))),i.b('"')),i.b("\n"+n),i.b('     class="bbccom_slot" aria-hidden="true">'),i.b("\n"+n),i.b('    <div class="bbccom_advert'),i.s(i.f("async",t,e,1),t,e,1,0,0,"")||i.b(" bbccom_display_none"),i.b('">'),i.b("\n"+n),i.b('        <script type="text/javascript">'),i.b("\n"+n),i.b("            /*<![CDATA[*/"),i.b("\n"+n),i.s(i.f("text",t,e,1),t,e,0,328,552,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b("                if (window.bbcdotcom && bbcdotcom.slot"),i.s(i.f("async",t,e,1),t,e,0,393,398,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b("Async")}),t.pop()),i.b(") {"),i.b("\n"+n),i.b("                    bbcdotcom.slot"),i.s(i.f("async",t,e,1),t,e,0,456,461,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b("Async")}),t.pop()),i.b("('"),i.b(i.v(i.f("id",t,e,0))),i.b("', "),i.b(i.v(i.f("jsonGroups",t,e,0))),i.b(", false, '"),i.b(i.v(i.f("text",t,e,0))),i.b("');"),i.b("\n"+n),i.b("                }"),i.b("\n"+n)}),t.pop()),i.s(i.f("text",t,e,1),t,e,1,0,0,"")||(i.b("                if (window.bbcdotcom && bbcdotcom.slot"),i.s(i.f("async",t,e,1),t,e,0,652,657,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b("Async")}),t.pop()),i.b(") {"),i.b("\n"+n),i.b("                    bbcdotcom.slot"),i.s(i.f("async",t,e,1),t,e,0,715,720,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b("Async")}),t.pop()),i.b("('"),i.b(i.v(i.f("id",t,e,0))),i.b("', "),i.b(i.v(i.f("jsonGroups",t,e,0))),i.b(");"),i.b("\n"+n),i.b("                }"),i.b("\n"+n)),i.b("            /*]]>*/"),i.b("\n"+n),i.b("        <\/script>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.s(i.f("async",t,e,1),t,e,1,0,0,"")||(i.b('        <script type="text/javascript">'),i.b("\n"+n),i.b("            /*<![CDATA[*/"),i.b("\n"+n),i.b("            if (window.bbcdotcom && bbcdotcom.show) {"),i.b("\n"+n),i.b("                bbcdotcom.show()"),i.b("\n"+n),i.b("            }"),i.b("\n"+n),i.b("            /*]]>*/"),i.b("\n"+n),i.b("        <\/script>"),i.b("\n"+n)),i.b("</div>"),i.b("\n"+n)),i.fl()},partials:{},subs:{}}),"analytics-element-metadata":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.f("element-id",t,e,1),t,e,0,15,43,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b('data-cs-id="'),n.b(n.v(n.f("element-id",t,e,0))),n.b('" ')}),t.pop()),i.b("\n"+n),i.s(i.f("event",t,e,1),t,e,0,69,95,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b('data-cs-event="'),n.b(n.v(n.f("event",t,e,0))),n.b('" ')}),t.pop()),i.b("\n"+n),i.s(i.f("channel-name",t,e,1),t,e,0,123,163,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b('data-cs-channel-name="'),n.b(n.v(n.f("channel-name",t,e,0))),n.b('" ')}),t.pop()),i.b("\n"+n),i.s(i.f("channel-location",t,e,1),t,e,0,202,250,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b('data-cs-channel-location="'),n.b(n.v(n.f("channel-location",t,e,0))),n.b('" ')}),t.pop()),i.b("\n"+n),i.s(i.f("element-name",t,e,1),t,e,0,289,329,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b('data-cs-element-name="'),n.b(n.v(n.f("element-name",t,e,0))),n.b('" ')}),t.pop()),i.b("\n"+n),i.s(i.f("element-type",t,e,1),t,e,0,364,404,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b('data-cs-element-type="'),n.b(n.v(n.f("element-type",t,e,0))),n.b('" ')}),t.pop()),i.b("\n"+n),i.s(i.f("element-position",t,e,1),t,e,0,443,491,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b('data-cs-element-position="'),n.b(n.v(n.f("element-position",t,e,0))),n.b('" ')}),t.pop()),i.b("\n"+n),i.s(i.f("total-element-count",t,e,1),t,e,0,537,591,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b('data-cs-total-element-count="'),n.b(n.v(n.f("total-element-count",t,e,0))),n.b('" ')}),t.pop()),i.b("\n"+n),i.s(i.f("additional-data",t,e,1),t,e,0,636,682,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b('data-cs-additional-data="'),n.b(n.v(n.f("additional-data",t,e,0))),n.b('" ')}),t.pop()),i.b("\n"+n),i.s(i.f("section",t,e,1),t,e,0,715,745,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b('data-cs-section="'),n.b(n.v(n.f("section",t,e,0))),n.b('" ')}),t.pop()),i.b("\n"+n),i.s(i.f("page-type",t,e,1),t,e,0,772,806,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b('data-cs-page-type="'),n.b(n.v(n.f("page-type",t,e,0))),n.b('" ')}),t.pop()),i.b("\n"+n),i.s(i.f("interaction-type",t,e,1),t,e,0,842,890,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b('data-cs-interaction-type="'),n.b(n.v(n.f("interaction-type",t,e,0))),n.b('" ')}),t.pop()),i.b("\n"+n),i.s(i.f("tracking-method",t,e,1),t,e,0,932,978,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b('data-cs-tracking-method="'),n.b(n.v(n.f("tracking-method",t,e,0))),n.b('" ')}),t.pop()),i.fl()},partials:{},subs:{}}),"analytics-module-metadata":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.f("module",t,e,1),t,e,0,11,39,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b('data-cs-module="'),n.b(n.v(n.f("module",t,e,0))),n.b('" ')}),t.pop()),i.fl()},partials:{},subs:{}}),"anchor-capable-element-end":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.f("url",t,e,1),t,e,0,8,18,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b("    </a>"),i.b("\n"+n)}),t.pop()),i.fl()},partials:{},subs:{}}),"anchor-capable-element-start":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.f("url",t,e,1),t,e,0,8,126,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('    <a href="'),i.b(i.v(i.f("url",t,e,0))),i.b('" '),i.s(i.f("analytics-element-metadata",t,e,1),t,e,0,62,93,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<analytics-element-metadata0",t,e,""))}),t.pop()),i.b(">"),i.b("\n"+n)}),t.pop()),i.fl()},partials:{"<analytics-element-metadata0":{name:"analytics-element-metadata",partials:{},subs:{}}},subs:{}}),"anchor-tag":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<a  href="'),i.b(i.v(i.f("link",t,e,0))),i.b('">'),i.b(i.v(i.f("text",t,e,0))),i.b("</a>"),i.fl()},partials:{},subs:{}}),"around-the-bbc-footer":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div id="extra-footer" class="extra-footer" class="clearfix">'),i.b("\n"+n),i.b('    <div class="page-component-wrapper">'),i.b("\n"+n),i.b('        <div id="around-bbc" class="component-placeholder around-the-bbc"></div>'),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{},subs:{}}),"article-image":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.f("use-image-tag",t,e,1),t,e,0,18,296,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('<a class="responsive-image-wrapper '),i.b(i.v(i.f("additional-wrapper-class",t,e,0))),i.b('" href="'),i.b(i.v(i.f("replace-url",t,e,0))),i.b('" title="View '),i.b(i.v(i.f("caption",t,e,0))),i.b('" '),i.s(i.f("analytics-element-metadata",t,e,1),t,e,0,163,194,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<analytics-element-metadata0",t,e,""))}),t.pop()),i.b(">"),i.b("\n"+n),i.b(i.rp("<responsive-image-tag1",t,e,"    ")),i.b(i.rp("<responsive-image-overlay2",t,e,"    ")),i.b("</a>"),i.b("\n"+n)}),t.pop()),i.s(i.f("use-image-tag",t,e,1),t,e,1,0,0,"")||i.b(i.rp("<responsive-image-data-element-with-icon3",t,e,"")),i.fl()},partials:{"<analytics-element-metadata0":{name:"analytics-element-metadata",partials:{},subs:{}},"<responsive-image-tag1":{name:"responsive-image-tag",partials:{},subs:{}},"<responsive-image-overlay2":{name:"responsive-image-overlay",partials:{},subs:{}},"<responsive-image-data-element-with-icon3":{name:"responsive-image-data-element-with-icon",partials:{},subs:{}}},subs:{}}),"third-party-content-container":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b("<div "),i.s(i.f("id",t,e,1),t,e,0,12,23,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b('id="'),n.b(n.v(n.f("id",t,e,0))),n.b('"')}),t.pop()),i.b(' class="third-party-content">'),i.b("\n"+n),i.b('    <iframe data-tpc="frame" class="third-party-content__frame" src="'),i.b(i.v(i.f("iFrameURL",t,e,0))),i.b('" scrolling="no" frameborder="0" seamless height="'),i.b(i.v(i.f("defaultIframeHeight",t,e,0))),i.b('">'),i.b("\n"+n),i.b("    </iframe>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{},subs:{}}),"attribution-slot":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="sponsor-attribution slot-visible-'),i.b(i.v(i.f("groups",t,e,0))),i.b('">'),i.b("\n"+n),i.b('    <a class="sponsor-attribution__sponsor-link" href="http://advertising.bbcworldwide.com/home/advertisewithus/bbc-storyworks-content" tabindex="-1">Partnered Content Presented By</a>'),i.b("\n"+n),i.b('    <div class="sponsor-attribution__partner-name">'),i.b("\n"+n),i.b("        "),i.b(i.v(i.f("clientName",t,e,0))),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{},subs:{}}),banner:new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div id="banner-'),i.b(i.v(i.f("id",t,e,0))),i.b('" class="responsive-banner '),i.b(i.v(i.f("class",t,e,0))),i.b('">'),i.b("\n"+n),i.b('    <div class="responsive-banner-wrapper">'),i.b("\n"+n),i.b(i.rp("<anchor-capable-element-start0",t,e,"        ")),i.b('            <div class="responsive-banner__image-wrapper responsive-banner__image-wrapper--mobile">'),i.b("\n"+n),i.s(i.f("imageMobile",t,e,1),t,e,0,279,549,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.s(i.f("banner-full",t,e,1),t,e,0,316,516,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                        <div class="responsive-banner__image responsive-banner__image--full">'),i.b("\n"+n),i.b(i.rp("<responsive-image-tag1",t,e,"                            ")),i.b("                        </div>"),i.b("\n"+n)}),t.pop())}),t.pop()),i.b("            </div>"),i.b("\n"+n),i.s(i.f("imageTablet",t,e,1),t,e,0,613,1006,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                <div class="responsive-banner__image-wrapper responsive-banner__image-wrapper--tablet">'),i.b("\n"+n),i.s(i.f("banner-full",t,e,1),t,e,0,754,954,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                        <div class="responsive-banner__image responsive-banner__image--full">'),i.b("\n"+n),i.b(i.rp("<responsive-image-tag2",t,e,"                            ")),i.b("                        </div>"),i.b("\n"+n)}),t.pop()),i.b("                </div>"),i.b("\n"+n)}),t.pop()),i.s(i.f("imageDesktop",t,e,1),t,e,0,1052,1941,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                <div class="responsive-banner__image-wrapper responsive-banner__image-wrapper--desktop">'),i.b("\n"+n),i.s(i.f("banner-full",t,e,1),t,e,0,1194,1394,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                        <div class="responsive-banner__image responsive-banner__image--full">'),i.b("\n"+n),i.b(i.rp("<responsive-image-tag3",t,e,"                            ")),i.b("                        </div>"),i.b("\n"+n)}),t.pop()),i.s(i.f("banner-1",t,e,1),t,e,0,1444,1644,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                        <div class="responsive-banner__image responsive-banner__image--left">'),i.b("\n"+n),i.b(i.rp("<responsive-image-tag4",t,e,"                            ")),i.b("                        </div>"),i.b("\n"+n)}),t.pop()),i.s(i.f("banner-2",t,e,1),t,e,0,1691,1892,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                        <div class="responsive-banner__image responsive-banner__image--right">'),i.b("\n"+n),i.b(i.rp("<responsive-image-tag5",t,e,"                            ")),i.b("                        </div>"),i.b("\n"+n)}),t.pop()),i.b("                </div>"),i.b("\n"+n)}),t.pop()),i.b(i.rp("<anchor-capable-element-end6",t,e,"        ")),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{"<anchor-capable-element-start0":{name:"anchor-capable-element-start",partials:{},subs:{}},"<responsive-image-tag1":{
name:"responsive-image-tag",partials:{},subs:{}},"<responsive-image-tag2":{name:"responsive-image-tag",partials:{},subs:{}},"<responsive-image-tag3":{name:"responsive-image-tag",partials:{},subs:{}},"<responsive-image-tag4":{name:"responsive-image-tag",partials:{},subs:{}},"<responsive-image-tag5":{name:"responsive-image-tag",partials:{},subs:{}},"<anchor-capable-element-end6":{name:"anchor-capable-element-end",partials:{},subs:{}}},subs:{}}),"irregular-images-promo-unit":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.f("ad-slot",t,e,1),t,e,0,12,89,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('    <div class="promo-unit-wrapper advert">'),i.b("\n"+n),i.b(i.rp("<ad-slot0",t,e,"        ")),i.b("    </div>"),i.b("\n"+n)}),t.pop()),i.s(i.f("ad-slot",t,e,1),t,e,1,0,0,"")||(i.b('    <div class="promo-unit-wrapper">'),i.b("\n"+n),i.b("        <article>"),i.b("\n"+n),i.b('        <div class="promo-unit-overlay"></div>'),i.b("\n"+n),i.b(i.rp("<promo-unit1",t,e,"         ")),i.b("        </article>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n)),i.fl()},partials:{"<ad-slot0":{name:"ad-slot",partials:{},subs:{}},"<promo-unit1":{name:"promo-unit",partials:{},subs:{}}},subs:{}}),"irregular-images":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b(i.rp("<headed-section-start0",t,e,"")),i.b('   <div class="best-of-module best-of-irregular-images" '),i.s(i.f("analytics-module-metadata",t,e,1),t,e,0,112,142,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<analytics-module-metadata1",t,e,""))}),t.pop()),i.b(">"),i.b("\n"+n),i.s(i.f("promo-group",t,e,1),t,e,0,197,1151,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('          <div class="article-list '),i.s(i.f("class",t,e,1),t,e,0,243,265,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b("article-list-"),n.b(n.v(n.f("class",t,e,0)))}),t.pop()),i.b(" "),i.b(i.v(i.f("additional-class",t,e,0))),i.b('">'),i.b("\n"+n),i.b('            <div class="irregular-promo-unit-wrapper irregular-promo-unit-wrapper-first">'),i.b("\n"+n),i.s(i.f("item-one",t,e,1),t,e,0,414,474,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<irregular-images-promo-unit2",t,e,"              "))}),t.pop()),i.b("            </div>"),i.b("\n"+n),i.b('            <div class="irregular-promo-unit-wrapper irregular-promo-unit-wrapper-middle">'),i.b("\n"+n),i.s(i.f("item-two",t,e,1),t,e,0,623,683,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<irregular-images-promo-unit3",t,e,"              "))}),t.pop()),i.s(i.f("item-three",t,e,1),t,e,0,724,784,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<irregular-images-promo-unit4",t,e,"              "))}),t.pop()),i.b("            </div>"),i.b("\n"+n),i.b('            <div class="irregular-promo-unit-wrapper irregular-promo-unit-wrapper-last">'),i.b("\n"+n),i.s(i.f("item-four",t,e,1),t,e,0,934,994,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<irregular-images-promo-unit5",t,e,"              "))}),t.pop()),i.b("            </div>"),i.b("\n"+n),i.b("            "),i.b("\n"+n),i.s(i.f("items",t,e,1),t,e,1,0,0,"")||i.b(i.rp("<empty-list-notice6",t,e,"                ")),i.b("          </div>"),i.b("\n"+n)}),t.pop()),i.b("   </div>"),i.b("\n"+n),i.b(i.rp("<headed-section-end7",t,e,"")),i.fl()},partials:{"<headed-section-start0":{name:"headed-section-start",partials:{},subs:{}},"<analytics-module-metadata1":{name:"analytics-module-metadata",partials:{},subs:{}},"<irregular-images-promo-unit2":{name:"irregular-images-promo-unit",partials:{},subs:{}},"<irregular-images-promo-unit3":{name:"irregular-images-promo-unit",partials:{},subs:{}},"<irregular-images-promo-unit4":{name:"irregular-images-promo-unit",partials:{},subs:{}},"<irregular-images-promo-unit5":{name:"irregular-images-promo-unit",partials:{},subs:{}},"<empty-list-notice6":{name:"empty-list-notice",partials:{},subs:{}},"<headed-section-end7":{name:"headed-section-end",partials:{},subs:{}}},subs:{}}),"calendar-promo":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b("\x3c!--[if (gt IE 9)]>\x3c!--\x3e"),i.b("\n"+n),i.b('<div id="'),i.b(i.v(i.f("id",t,e,0))),i.b('" class="headed-section headed-section-calendar-promo">'),i.b("\n"+n),i.b('    <div class="headed-section-lining">'),i.b("\n"+n),i.b(i.rp("<event-filter-header0",t,e,"        ")),i.b('        <div class="section-body">'),i.b("\n"+n),i.b('            <div class="headed-section-content">'),i.b("\n"+n),i.b(i.rp("<event-filter1",t,e,"                ")),i.b("            </div>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("\x3c!--<![endif]--\x3e"),i.fl()},partials:{"<event-filter-header0":{name:"event-filter-header",partials:{},subs:{}},"<event-filter1":{name:"event-filter",partials:{},subs:{}}},subs:{}}),"google-add-to-calendar":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b("https://www.google.com/calendar/render?action=TEMPLATE&trp=true&text="),i.b(i.v(i.f("name",t,e,0))),i.b("&dates="),i.b(i.v(i.f("start_date",t,e,0))),i.b("/"),i.b(i.v(i.f("end_date",t,e,0))),i.b("&details="),i.b(i.v(i.f("description",t,e,0))),i.b("&location="),i.b(i.v(i.f("location",t,e,0))),i.b("&pli=1&uid=&sf=true&output=xml"),i.fl()},partials:{},subs:{}}),"ical-add-to-calendar":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b("BEGIN:VCALENDAR"),i.b("\n"+n),i.b("VERSION:2.0"),i.b("\n"+n),i.b("PRODID:-"),i.b("\n"+n),i.b("BEGIN:VEVENT"),i.b("\n"+n),i.b("ORGANIZER;CN=Organizer\\, Organizer e-mail:MAILTO:Organizer e-mail"),i.b("\n"+n),i.b("DTSTART:"),i.b(i.v(i.f("start_date",t,e,0))),i.b("\n"+n),i.b("DTEND:"),i.b(i.v(i.f("end_date",t,e,0))),i.b("\n"+n),i.b("SUMMARY:"),i.b(i.v(i.f("name",t,e,0))),i.b("\n"+n),i.b("DESCRIPTION:"),i.b(i.v(i.f("description",t,e,0))),i.b("\n"+n),i.b("LOCATION:"),i.b(i.v(i.f("location",t,e,0))),i.b("\n"+n),i.b("END:VEVENT"),i.b("\n"+n),i.b("END:VCALENDAR"),i.fl()},partials:{},subs:{}}),"outlook-add-to-calendar":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b("BEGIN:VCALENDAR"),i.b("\n"+n),i.b("VERSION:2.0"),i.b("\n"+n),i.b("BEGIN:VEVENT"),i.b("\n"+n),i.b("DTSTART:"),i.b(i.v(i.f("start_date",t,e,0))),i.b("T000000"),i.b("\n"+n),i.b("DTEND:"),i.b(i.v(i.f("end_date",t,e,0))),i.b("T000000"),i.b("\n"+n),i.b("SUMMARY:"),i.b(i.v(i.f("name",t,e,0))),i.b("\n"+n),i.b("DESCRIPTION:"),i.b(i.v(i.f("description",t,e,0))),i.b("\n"+n),i.b("LOCATION:"),i.b(i.v(i.f("location",t,e,0))),i.b("\n"+n),i.b("PRIORITY:3"),i.b("\n"+n),i.b("END:VEVENT"),i.b("\n"+n),i.b("END:VCALENDAR"),i.fl()},partials:{},subs:{}}),"yahoo-add-to-calendar":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b("http://calendar.yahoo.com/?v=60&view=d&type=20&title="),i.b(i.v(i.f("name",t,e,0))),i.b("&st="),i.b(i.v(i.f("start_date",t,e,0))),i.b("&dur=0000&desc="),i.b(i.v(i.f("description",t,e,0))),i.b("&in_loc="),i.b(i.v(i.f("location",t,e,0))),i.fl()},partials:{},subs:{}}),"callout-box":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b("\x3c!-- callout-box start --\x3e"),i.b("\n"+n),i.b('<div class="callout-box">'),i.b("\n"+n),i.b('    <div class="content">'),i.b("\n"+n),i.b('        <div class="callout-box-head">'),i.b("\n"+n),i.s(i.f("title",t,e,1),t,e,0,140,212,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                <p class="callout-box-title">'),i.b(i.v(i.f("title",t,e,0))),i.b("</p>"),i.b("\n"+n)}),t.pop()),i.s(i.f("subtitle",t,e,1),t,e,0,248,326,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                <p class="callout-box-subtitle">'),i.b(i.v(i.f("subtitle",t,e,0))),i.b("</p>"),i.b("\n"+n)}),t.pop()),i.b("        </div>"),i.b("\n"+n),i.b('        <div class="callout-box-body">'),i.b("\n"+n),i.b("            "),i.b(i.t(i.f("body",t,e,0))),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.b("\n"+n),i.b("\x3c!-- callout-box end --\x3e"),i.fl()},partials:{},subs:{}}),caption:new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.f("caption",t,e,1),t,e,0,12,279,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('<div class="caption-wrapper">'),i.b("\n"+n),i.b('    <div class="caption-lining">'),i.b("\n"+n),i.s(i.f("caption-title",t,e,1),t,e,0,102,179,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('        <p class="caption-text caption-title">'),i.b(i.v(i.f("caption-title",t,e,0))),i.b("</p>"),i.b("\n"+n)}),t.pop()),i.b('        <p class="caption-text caption-body">'),i.b(i.t(i.f("caption",t,e,0))),i.b("</p>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.b("\n"+n)}),t.pop()),i.fl()},partials:{},subs:{}}),column:new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.f("hero-unit",t,e,1),t,e,0,14,34,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<hero-unit0",t,e,"    "))}),t.pop()),i.b("\n"),i.fl()},partials:{"<hero-unit0":{name:"hero-unit",partials:{},subs:{}}},subs:{}}),"context-heading":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.f("hasContext",t,e,1),t,e,0,15,685,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('<ul class="seperated-list context-heading-list">'),i.b("\n"+n),i.s(i.f("contextItems",t,e,1),t,e,0,86,661,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('        <li class="seperated-list-item">'),i.b("\n"+n),i.s(i.f("isItemCollection",t,e,1),t,e,0,161,519,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                <ul class="seperated-list context-heading-sublist '),i.s(i.f("class",t,e,1),t,e,0,238,271,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b("context-heading-sublist-"),n.b(n.v(n.f("class",t,e,0)))}),t.pop()),i.b('">'),i.b("\n"+n),i.s(i.f("subItems",t,e,1),t,e,0,317,471,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                        <li class="seperated-list-item">'),i.b("\n"+n),i.b(i.rp("<context-item0",t,e,"                            ")),i.b("                        </li>"),i.b("\n"+n)}),t.pop()),i.b("                </ul>"),i.b("\n"+n)}),t.pop()),i.s(i.f("isItemCollection",t,e,1),t,e,1,0,0,"")||i.b(i.rp("<context-item1",t,e,"                ")),i.b("        </li>"),i.b("\n"+n)}),t.pop()),i.b("</ul>"),i.b("\n"+n)}),t.pop()),i.fl()},partials:{"<context-item0":{name:"context-item",partials:{},subs:{}},"<context-item1":{name:"context-item",partials:{},subs:{}}},subs:{}}),"context-item":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.f("context",t,e,1),t,e,0,12,356,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('    <span class="'),i.s(i.f("context-class",t,e,1),t,e,0,48,65,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.v(n.f("context-class",t,e,0)))}),t.pop()),i.s(i.f("context-class",t,e,1),t,e,1,0,0,"")||i.b("context-heading"),i.b('">'),i.b("\n"+n),i.s(i.f("context-url",t,e,1),t,e,0,163,253,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('            <a href="'),i.b(i.v(i.f("context-url",t,e,0))),i.b('" title="View '),i.b(i.v(i.f("context",t,e,0))),i.b('">  '),i.b(i.v(i.f("context",t,e,0))),i.b("</a>"),i.b("\n"+n)}),t.pop()),i.s(i.f("context-url",t,e,1),t,e,1,0,0,"")||(i.b("            "),i.b(i.v(i.f("context",t,e,0))),i.b("\n"+n)),i.b("    </span>"),i.b("\n"+n)}),t.pop()),i.fl()},partials:{},subs:{}}),"custom-embed":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div id="custom-embed">'),i.b("\n"+n),i.b('    <div id="custom-embed-content">'),i.b("\n"+n),i.b("        "),i.b(i.t(i.f("embedCode",t,e,0))),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{},subs:{}}),date:new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="date-item '),i.s(i.f("class",t,e,1),t,e,0,32,51,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b("date-item-"),n.b(n.v(n.f("class",t,e,0)))}),t.pop()),i.b('">'),i.b("\n"+n),i.s(i.f("date",t,e,1),t,e,0,77,174,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('        <div class="date-item-day-of-month"><p class="date-item-content">'),i.b(i.v(i.f("date",t,e,0))),i.b("</p></div>"),i.b("\n"+n)}),t.pop()),i.s(i.f("month",t,e,1),t,e,0,198,289,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('        <div class="date-item-month"><p class="date-item-content">'),i.b(i.v(i.f("month",t,e,0))),i.b("</p></div>"),i.b("\n"+n)}),t.pop()),i.b("</div>"),i.fl()},partials:{},subs:{}}),"destination-link":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="destination-link">'),i.b("\n"+n),i.b('    <a href="'),i.b(i.v(i.f("url",t,e,0))),i.b('">'),i.b("\n"+n),i.b('        <div class="destination-link-lining">'),i.b("\n"+n),i.b('            <span id="map-icon" class="gelicon gelicon--map"></span>'),i.b("\n"+n),i.b('            <span id="destination-name">'),i.b(i.v(i.f("name",t,e,0))),i.b("</span>"),i.b("\n"+n),i.b('            <span id="arrow-icon" class="gelicon gelicon--next-alternative"></span>'),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("    </a>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{},subs:{}}),"map-controls":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="map-controls '),i.b(i.v(i.f("controlsClass",t,e,0))),i.b('">'),i.b("\n"+n),i.b('    <button data-map-zoomin class="map-controls__button  map-controls__button--zoomin">'),i.b("\n"+n),i.b('        <span class="map-controls__button-label  visually-hidden">Zoom in</span>'),i.b("\n"+n),i.b("        <span class='gelicon gelicon--zoomin'></span>"),i.b("\n"+n),i.b("    </button>"),i.b("\n"),i.b("\n"+n),i.b('    <button data-map-zoomout class="map-controls__button  map-controls__button--zoomout">'),i.b("\n"+n),i.b('        <span class="map-controls__button-label  visually-hidden">Zoom out</span>'),i.b("\n"+n),i.b("        <span class='gelicon gelicon--zoomout'></span>"),i.b("\n"+n),i.b("    </button>"),i.b("\n"),i.b("\n"+n),i.b('    <button data-map-center class="map-controls__button  map-controls__button--location">'),i.b("\n"+n),i.b('        <span class="map-controls__button-label  visually-hidden">Reset map to default</span>'),i.b("\n"+n),i.b("        <span class='gelicon gelicon--location'></span>"),i.b("\n"+n),i.b("    </button>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{},subs:{}}),"map-popup":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="map-popup">'),i.b("\n"+n),i.b('    <div class="promo-unit '),i.s(i.f("class",t,e,1),t,e,0,61,70,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.v(n.f("class",t,e,0)))}),t.pop()),i.b('">'),i.b("\n"+n),i.b('        <div class="promo-unit-lining">'),i.b("\n"+n),i.b("            <div "),i.s(i.f("class",t,e,1),t,e,0,150,159,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.v(n.f("class",t,e,0)))}),t.pop()),i.b("\n"+n),i.b("                 "),i.s(i.f("brand",t,e,1),t,e,0,197,219,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b('data-brand="'),n.b(n.v(n.f("brand",t,e,0))),n.b('"')}),t.pop()),i.b(">"),i.b("\n"+n),i.b('                <div class="promo-unit-image">'),i.b("\n"+n),i.b('                    <div class="promo-unit-image-lining">'),i.b("\n"+n),i.s(i.f("image",t,e,1),t,e,0,370,388,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<article-image0",t,e,""))}),t.pop()),i.b("                    </div>"),i.b("\n"+n),i.b('                    <div class="promo-unit-overlay"></div>'),i.b("\n"+n),i.b("                </div>"),i.b("\n"+n),i.b('                <div class="promo-unit-copy">'),i.b("\n"+n),i.b('                    <div class="promo-unit-copy-lining">'),i.b("\n"+n),i.sub("header",t,e,n),i.b("                    </div>"),i.b("\n"+n),i.b("                </div>"),i.b("\n"+n),i.b("            </div>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{"<article-image0":{name:"article-image",partials:{},subs:{}},"<headercontext-heading1":{name:"context-heading",partials:{},subs:{}},"<headeranalytics-element-metadata2":{name:"analytics-element-metadata",partials:{},subs:{}}},subs:{header:function(t,e,n,i){n.b('                        <div class="promo-unit-header '),n.s(n.f("context",t,e,1),t,e,0,713,743,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b("promo-unit-header-with-context")}),t.pop()),n.b('">'),n.b("\n"+i),n.s(n.f("context",t,e,1),t,e,0,798,880,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b(n.rp("<headercontext-heading1",t,e,"                                "))}),t.pop()),n.b('                            <a href="'),n.b(n.v(n.f("url",t,e,0))),n.b('" '),n.s(n.f("analytics-element-metadata",t,e,1),t,e,0,970,1001,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b(n.rp("<headeranalytics-element-metadata2",t,e,""))}),t.pop()),n.b(">"),n.b("\n"+i),n.b('                                <h3 class="promo-unit-title">'),n.b(n.v(n.f("title",t,e,0))),n.b("</h3>"),n.b("\n"+i),n.b("                            </a>"),n.b("\n"+i),n.b("                        </div>"),n.b("\n"+i)}}}),"domestic-header":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="domestic-header-wrapper">'),i.b("\n"+n),i.b('    <div class="page-component-wrapper">'),i.b("\n"+n),i.b('        <div class="user-notice user-notice-header" id="">'),i.b("\n"+n),i.b('            <div class="user-notice-lining">'),i.b("\n"+n),i.b("                <p>"),i.b(i.t(i.f("user-notice",t,e,0))),i.b("</p>"),i.b("\n"+n),i.b("            </div>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{},subs:{}}),"empty-list-notice":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="empty-list-notice">'),i.b("\n"+n),i.b("    <h3>"),i.b(i.v(i.f("emptyListNoticeText",t,e,0))),i.b("</h3>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{},subs:{}}),"event-filter-story":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b("<div"),i.b("\n"+n),i.b("        "),i.s(i.f("brand",t,e,1),t,e,0,23,45,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b('data-brand="'),n.b(n.v(n.f("brand",t,e,0))),n.b('"')}),t.pop()),i.b("\n"+n),i.b('        class="promo-unit-layout-event '),i.s(i.f("class",t,e,1),t,e,0,105,114,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.v(n.f("class",t,e,0)))}),t.pop()),i.b('">'),i.b("\n"+n),i.b('    <a href="'),i.b(i.v(i.f("url",t,e,0))),i.b('" '),i.s(i.f("analytics-element-metadata",t,e,1),t,e,0,180,211,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<analytics-element-metadata0",t,e,""))}),t.pop()),i.b(">"),i.b("\n"+n),i.b('        <div class="promo-unit-image">'),i.b("\n"+n),i.b('            <div class="promo-unit-image-lining">'),i.b("\n"+n),i.s(i.f("image",t,e,1),t,e,0,359,422,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<responsive-image-tag1",t,e,"                    "))}),t.pop()),i.b("            </div>"),i.b("\n"+n),i.s(i.f("dates",t,e,1),t,e,0,474,590,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                <div class="date-list">'),i.b("\n"+n),i.b(i.rp("<start-end-date2",t,e,"                    ")),i.b("                </div>"),i.b("\n"+n)}),t.pop()),i.b('            <div class="promo-unit-overlay"></div>'),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b('        <div class="promo-unit-copy">'),i.b("\n"+n),i.b('            <div class="promo-unit-copy-lining">'),i.b("\n"),i.b("\n"+n),i.s(i.f("event-type-URL",t,e,1),t,e,0,790,997,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                    <div class="promo-unit-event-type">'),i.b("\n"+n),i.b('                        <a class="promo-unit-event-type-link" href="'),i.b(i.v(i.f("event-type-URL",t,e,0))),i.b('">'),i.b(i.v(i.f("event-type",t,e,0))),i.b("</a>"),i.b("\n"+n),i.b("                    </div>"),i.b("\n"+n)}),t.pop()),i.b("\n"+n),i.b('                <div class="promo-unit-header">'),i.b("\n"+n),i.b('                    <a href="'),i.b(i.v(i.f("url",t,e,0))),i.b('" '),i.s(i.f("analytics-element-metadata",t,e,1),t,e,0,1135,1166,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<analytics-element-metadata3",t,e,""))}),t.pop()),i.b(">"),i.b("\n"+n),i.b('                        <h3 class="promo-unit-title">'),i.b(i.v(i.f("title",t,e,0))),i.b("</h3>"),i.b("\n"+n),i.b("                    </a>"),i.b("\n"+n),i.b("                </div>"),i.b("\n"+n),i.s(i.f("location",t,e,1),t,e,0,1344,1488,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                    <div class="promo-unit-location">'),i.b("\n"+n),i.b("                        <p>"),i.b(i.t(i.f("location",t,e,0))),i.b("</p>"),i.b("\n"+n),i.b("                    </div>"),i.b("\n"+n)}),t.pop()),i.b("            </div>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("    </a>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{"<analytics-element-metadata0":{name:"analytics-element-metadata",partials:{},subs:{}},"<responsive-image-tag1":{name:"responsive-image-tag",partials:{},subs:{}},"<start-end-date2":{name:"start-end-date",partials:{},subs:{}},"<analytics-element-metadata3":{name:"analytics-element-metadata",partials:{},subs:{}}},subs:{}}),"event-list-two-column":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="event-list-groups">'),i.b("\n"+n),i.b('    <div class="primary-content" >'),i.b("\n"+n),i.b('        <div class="promo-group-1-wrapper">'),i.b("\n"+n),i.s(i.d("groups.group-1",t,e,1),t,e,0,142,184,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<promo-group0",t,e,"            "))}),t.pop()),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"),i.b("\n"+n),i.b('    <div class="secondary-content" >'),i.b("\n"+n),i.b('        <div class="promo-group-2-wrapper">'),i.b("\n"+n),i.s(i.d("groups.group-2",t,e,1),t,e,0,343,385,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<promo-group1",t,e,"            "))}),t.pop()),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.b("\n"),i.fl()},partials:{"<promo-group0":{name:"promo-group",partials:{},subs:{}},"<promo-group1":{name:"promo-group",partials:{},subs:{}}},subs:{}}),"figure-with-description":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b(i.rp("<media-with-description1",t,e,"")),i.fl()},partials:{"<media-with-description1":{name:"media-with-description",partials:{"<media-elementfigure0":{name:"figure",partials:{},subs:{}}},subs:{"media-element":function(t,e,n,i){n.s(n.f("figure",t,e,1),t,e,0,70,103,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b(n.rp("<media-elementfigure0",t,e,"            "))}),t.pop())}}}},subs:{}}),figure:new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b("<figure>"),i.b("\n"+n),i.b('    <div class="figure-lining">'),i.b("\n"+n),i.b(i.rp("<responsive-image-tag0",t,e,"        ")),i.b("    </div>"),i.b("\n"+n),i.s(i.f("caption",t,e,1),t,e,0,102,219,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('    <figcaption class="caption media-caption">'),i.b("\n"+n),i.b('        <p class="img-caption">'),i.b(i.v(i.f("caption",t,e,0))),i.b("</p>"),i.b("\n"+n),i.b("    </figcaption>"),i.b("\n"+n)}),t.pop()),i.b("</figure>"),i.fl()},partials:{"<responsive-image-tag0":{name:"responsive-image-tag",partials:{},subs:{}}},subs:{}}),filter:new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b(i.rp("<headed-section-start0",t,e,"")),i.b(i.rp("<link-box-list1",t,e,"    ")),i.b(i.rp("<headed-section-end2",t,e,"")),i.fl()},partials:{"<headed-section-start0":{name:"headed-section-start",partials:{},subs:{}},"<link-box-list1":{name:"link-box-list",partials:{},subs:{}},"<headed-section-end2":{name:"headed-section-end",partials:{},subs:{}}},subs:{}}),"follow-us":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b(i.rp("<headed-section-start0",t,e,"")),i.b('    <ul id="follow-us-items" class="'),i.s(i.f("class",t,e,1),t,e,0,72,97,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b("follow-us-items-"),n.b(n.v(n.f("class",t,e,0)))}),t.pop()),i.b('" '),i.s(i.f("analytics-module-metadata",t,e,1),t,e,0,139,169,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<analytics-module-metadata1",t,e,""))}),t.pop()),i.b(">"),i.b("\n"+n),i.s(i.f("shareItems",t,e,1),t,e,0,224,790,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('            <li class="follow-us-item follow-us-item-'),i.b(i.v(i.f("class",t,e,0))),i.b('">'),i.b("\n"+n),i.b('                <div class="follow-us-item-lining">'),i.b("\n"+n),i.b('                    <a target="_blank" href="'),i.b(i.v(i.f("url",t,e,0))),i.b('" '),i.s(i.f("analytics-element-metadata",t,e,1),t,e,0,427,458,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<analytics-element-metadata2",t,e,""))}),t.pop()),i.b(">"),i.b("\n"+n),i.b('                        <div class="icon-wrapper">'),i.b("\n"+n),i.b('                            <span class="icon '),i.b(i.v(i.f("icon-class",t,e,0))),i.b('"></span>'),i.b("\n"+n),i.b("                        </div>"),i.b("\n"+n),i.b('                        <div class="follow-us-item-text">'),i.b(i.v(i.f("text",t,e,0))),i.b("</div>"),i.b("\n"),i.b("\n"+n),i.b("                    </a>"),i.b("\n"+n),i.b("                </div>"),i.b("\n"+n),i.b("            </li>"),i.b("\n"+n)}),t.pop()),i.b("    </ul>"),i.b("\n"+n),i.b(i.rp("<headed-section-end3",t,e,"")),i.fl()},partials:{"<headed-section-start0":{name:"headed-section-start",partials:{},subs:{}},"<analytics-module-metadata1":{name:"analytics-module-metadata",partials:{},subs:{}},"<analytics-element-metadata2":{name:"analytics-element-metadata",partials:{},subs:{}},"<headed-section-end3":{name:"headed-section-end",partials:{},subs:{}}},subs:{}}),"form-select":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="form-select '),i.b(i.v(i.f("class",t,e,0))),i.b('">'),i.b("\n"+n),i.s(i.f("label",t,e,1),t,e,0,50,198,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('        <span class="form-select__label-wrapper">'),i.b("\n"+n),i.b('            <label class="form-select__label" for="'),i.b(i.v(i.f("id",t,e,0))),i.b('">'),i.b(i.v(i.f("label",t,e,0))),i.b("</label>"),i.b("\n"+n),i.b("        </span>"),i.b("\n"+n)}),t.pop()),i.b('    <div class="form-select__control-wrapper">'),i.b("\n"+n),i.b('        <select class="form-select__control" '),i.s(i.f("multiple",t,e,1),t,e,0,314,322,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b("multiple")}),t.pop()),i.b(' name="'),i.b(i.v(i.f("id",t,e,0))),i.b('" id="'),i.b(i.v(i.f("id",t,e,0))),i.b('">'),i.b("\n"+n),i.s(i.f("items",t,e,1),t,e,0,385,487,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b("            <option "),i.s(i.f("selected",t,e,1),t,e,0,419,427,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b("selected")}),t.pop()),i.b(' value="'),i.b(i.v(i.f("id",t,e,0))),i.b('">'),i.b(i.v(i.f("title",t,e,0))),i.b("</option>"),i.b("\n"+n)}),t.pop()),i.b("        </select>"),i.b("\n"+n),i.b('        <span class="form-select__icon"></span>'),i.b("\n"+n),i.b("     </div>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{},subs:{}}),"event-filter-header":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b("<header>"),i.b("\n"+n),i.b('    <div class="section-header">'),i.b("\n"+n),i.b('        <div class="section-title-wrapper">'),i.b("\n"+n),i.b('            <h2 class="section-title">'),i.b(i.v(i.f("title",t,e,0))),i.b("</h2>"),i.b("\n"+n),i.b('            <div id="calendar-deferred-slot">'),i.b("\n"+n),i.b("                <div"),i.b("\n"+n),i.b("                        data-bbccom-advert-deferred"),i.b("\n"+n),i.b('                        data-bbccom-advert-id="responsive_box_2"'),i.b("\n"+n),i.b('                        data-bbccom-advert-groups="1_2_3_4"></div>'),i.b("\n"+n),i.b("            </div>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</header>"),i.fl()},partials:{},subs:{}}),"event-filter":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<form action="'),i.b(i.v(i.f("action",t,e,0))),i.b('" name="event-filter" class="event-filter '),i.s(i.f("class",t,e,1),t,e,0,76,98,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b("event-filter-"),n.b(n.v(n.f("class",t,e,0)))}),t.pop()),i.b('" '),i.s(i.f("analytics-module-metadata",t,e,1),t,e,0,140,170,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<analytics-module-metadata0",t,e,""))}),t.pop()),i.b(">"),i.b("\n"+n),i.s(i.f("featured-events",t,e,1),t,e,0,226,332,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('        <div class="event-filter-features-event">'),i.b("\n"+n),i.b(i.rp("<event-filter-story1",t,e,"            ")),i.b("        </div>"),i.b("\n"+n)}),t.pop()),i.b('    <div class="event-filter-lining">'),i.b("\n"+n),i.s(i.f("region",t,e,1),t,e,0,410,486,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('            <div class="event-filter-region">'),i.b(i.rp("<select-box2",t,e,"")),i.b("</div>"),i.b("\n"+n)}),t.pop()),i.b('        <div class="event-filter-type-date-wrapper">'),i.b("\n"+n),i.b('            <div class="event-filter-type-date">'),i.b("\n"+n),i.s(i.f("type",t,e,1),t,e,0,625,715,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                    <div class="event-filter-type">'),i.b(i.rp("<select-box3",t,e,"")),i.b("</div>"),i.b("\n"+n)}),t.pop()),i.b("\n"+n),i.s(i.f("date",t,e,1),t,e,0,751,841,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                    <div class="event-filter-date">'),i.b(i.rp("<select-box4",t,e,"")),i.b("</div>"),i.b("\n"+n)}),t.pop()),i.b("            </div>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b('        <div class="event-filter-submit-wrapper">'),i.b("\n"+n),i.b('            <div class="event-filter-submit-lining">'),i.b("\n"+n),i.b('                <input id="event-filter-submit" type="submit" value="Find events" '),i.s(i.f("analytics-element-metadata",t,e,1),t,e,0,1101,1132,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<analytics-element-metadata5",t,e,""))}),t.pop()),i.b("></input>"),i.b("\n"+n),i.b("            </div>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</form>"),i.b("\n"),i.b("\n"),i.fl()},partials:{"<analytics-module-metadata0":{name:"analytics-module-metadata",partials:{},subs:{}},"<event-filter-story1":{name:"event-filter-story",partials:{},subs:{}},"<select-box2":{name:"select-box",partials:{},subs:{}},"<select-box3":{name:"select-box",partials:{},subs:{}},"<select-box4":{name:"select-box",partials:{},subs:{}},"<analytics-element-metadata5":{name:"analytics-element-metadata",partials:{},subs:{}}},subs:{}}),"select-box":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="form-control form-control-select">'),i.b("\n"+n),i.b('    <div class="form-control-label-wrapper">'),i.b("\n"+n),i.b('        <label for="'),i.b(i.v(i.f("id",t,e,0))),i.b('">'),i.b(i.v(i.f("title",t,e,0))),i.b(":</label>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b('    <div class="form-control-element-wrapper">'),i.b("\n"+n),i.b('        <div class="form-control-element">'),i.b("\n"),i.b("\n"+n),i.b("        <select "),i.s(i.f("multiple",t,e,1),t,e,0,270,278,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b("multiple")}),t.pop()),i.b(' name="'),i.b(i.v(i.f("id",t,e,0))),i.b('">'),i.b("\n"+n),i.s(i.f("items",t,e,1),t,e,0,329,431,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b("            <option "),i.s(i.f("selected",t,e,1),t,e,0,363,371,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b("selected")}),t.pop()),i.b(' value="'),i.b(i.v(i.f("id",t,e,0))),i.b('">'),i.b(i.v(i.f("title",t,e,0))),i.b("</option>"),i.b("\n"+n)}),t.pop()),i.b("        </select>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("     </div>"),i.b("\n"+n),i.b("</div>"),i.b("\n"),i.fl()},partials:{},subs:{}}),"fullsizeable-anchor":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<a id="'),i.b(i.v(i.f("id",t,e,0))),i.b('" class="responsive-image-wrapper fullsizeable" data-caption="'),i.b(i.v(i.f("caption",t,e,0))),i.b('" data-caption-title="'),i.b(i.v(i.f("caption-title",t,e,0))),i.b('" data-is-clickable="'),i.b(i.v(i.f("is-clickable",t,e,0))),i.b('" href="'),i.b(i.v(i.f("url",t,e,0))),i.b('"></a>'),i.fl()},partials:{},subs:{}}),"gallery-inline-image":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b("<p></p>"),i.b("\n"+n),i.b(i.rp("<inline-image0",t,e,"")),i.b("<p></p>"),i.fl()},partials:{"<inline-image0":{name:"inline-image",partials:{},subs:{}}},subs:{}}),"gallery-lead":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div id="gallery-lead-wrapper">'),i.b("\n"+n),i.b('    <div id="gallery-lead-asset" class="gallery-lead">'),i.b("\n"+n),i.s(i.f("gallery-images",t,e,1),t,e,0,114,238,"{{ }}")&&(i.rs(t,e,function(t,e,i){
i.b('            <div class="gallery-lead-image">'),i.b("\n"+n),i.b(i.rp("<responsive-image-data-element0",t,e,"                ")),i.b("            </div>"),i.b("\n"+n)}),t.pop()),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{"<responsive-image-data-element0":{name:"responsive-image-data-element",partials:{},subs:{}}},subs:{}}),"headed-section-end":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.f("title",t,e,1),t,e,0,10,63,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b("            </div>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.b("\n"+n)}),t.pop()),i.fl()},partials:{},subs:{}}),"headed-section-start":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.f("title",t,e,1),t,e,0,10,265,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('<div id="'),i.b(i.v(i.f("id",t,e,0))),i.b('" class="headed-section '),i.s(i.f("class",t,e,1),t,e,0,60,84,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b("headed-section-"),n.b(n.v(n.f("class",t,e,0)))}),t.pop()),i.b('">'),i.b("\n"+n),i.b('    <div class="headed-section-lining">'),i.b("\n"+n),i.b(i.rp("<section-header0",t,e,"        ")),i.b('        <div class="section-body">'),i.b("\n"+n),i.b('            <div class="headed-section-content">'),i.b("\n"+n)}),t.pop()),i.fl()},partials:{"<section-header0":{name:"section-header",partials:{},subs:{}}},subs:{}}),"headed-section-with-destination-end":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.f("title",t,e,1),t,e,0,10,63,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b("            </div>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.b("\n"+n)}),t.pop()),i.fl()},partials:{},subs:{}}),"headed-section-with-destination-start":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.f("title",t,e,1),t,e,0,10,970,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('<div id="'),i.b(i.v(i.f("id",t,e,0))),i.b('" class="headed-section headed-section-with-destination '),i.s(i.f("class",t,e,1),t,e,0,92,133,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b("headed-section-with-destination-"),n.b(n.v(n.f("class",t,e,0)))}),t.pop()),i.b('">'),i.b("\n"+n),i.b('    <div class="headed-section-lining">'),i.b("\n"+n),i.b("        <header>"),i.b("\n"+n),i.b('            <div class="section-header">'),i.b("\n"+n),i.b('                <div class="section-header-wrapper">'),i.b("\n"+n),i.b('                    <div class="section-title-wrapper">'),i.b("\n"+n),i.b('                        <h2 class="section-title">'),i.b(i.v(i.f("title",t,e,0))),i.b("</h2>"),i.b("\n"+n),i.b("                    </div>"),i.b("\n"+n),i.b('                    <div class="section-context-wrapper">'),i.b("\n"+n),i.s(i.f("context",t,e,1),t,e,0,535,598,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<context-item0",t,e,"                        "))}),t.pop()),i.b("                    </div>"),i.b("\n"+n),i.b("                </div>"),i.b("\n"+n),i.b('                <div class="section-header-adslot">'),i.b("\n"+n),i.s(i.f("adSlot",t,e,1),t,e,0,740,814,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<ad-slot-sponsor-section-primary1",t,e,"                    "))}),t.pop()),i.b("                </div>"),i.b("\n"+n),i.b("            </div>"),i.b("\n"+n),i.b("        </header>"),i.b("\n"+n),i.b('        <div class="section-body">'),i.b("\n"+n),i.b('            <div class="headed-section-content">'),i.b("\n"+n)}),t.pop()),i.fl()},partials:{"<context-item0":{name:"context-item",partials:{},subs:{}},"<ad-slot-sponsor-section-primary1":{name:"ad-slot-sponsor-section-primary",partials:{},subs:{}}},subs:{}}),"headed-section-with-image-end":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.f("title",t,e,1),t,e,0,10,63,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b("            </div>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.b("\n"+n)}),t.pop()),i.fl()},partials:{},subs:{}}),"headed-section-with-image-start":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.f("title",t,e,1),t,e,0,10,802,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('<div id="'),i.b(i.v(i.f("id",t,e,0))),i.b('" class="headed-section headed-section-with-image '),i.s(i.f("class",t,e,1),t,e,0,86,121,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b("headed-section-with-image-"),n.b(n.v(n.f("class",t,e,0)))}),t.pop()),i.b('">'),i.b("\n"+n),i.b('    <div class="headed-section-lining">'),i.b("\n"+n),i.b(i.rp("<anchor-capable-element-start0",t,e,"        ")),i.b("            <header>"),i.b("\n"+n),i.b('                <div class="section-header">'),i.b("\n"+n),i.b('                    <div class="section-header-image">'),i.b("\n"+n),i.s(i.f("image",t,e,1),t,e,0,371,446,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<responsive-image-tag1",t,e,"                        "))}),t.pop()),i.b("                    </div>"),i.b("\n"+n),i.b('                    <div class="section-title-wrapper">'),i.b("\n"+n),i.b('                        <h3 class="section-title">'),i.b(i.v(i.f("title",t,e,0))),i.b("</h3>"),i.b("\n"),i.b("\n"+n),i.b("                    </div>"),i.b("\n"+n),i.b("                </div>"),i.b("\n"+n),i.b("            </header>"),i.b("\n"+n),i.b(i.rp("<anchor-capable-element-end2",t,e,"        ")),i.b('        <div class="section-body">'),i.b("\n"+n),i.b('            <div class="headed-section-content">'),i.b("\n"+n)}),t.pop()),i.fl()},partials:{"<anchor-capable-element-start0":{name:"anchor-capable-element-start",partials:{},subs:{}},"<responsive-image-tag1":{name:"responsive-image-tag",partials:{},subs:{}},"<anchor-capable-element-end2":{name:"anchor-capable-element-end",partials:{},subs:{}}},subs:{}}),"hero-unit":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b("\x3c!-- hero-unit start --\x3e"),i.b("\n"+n),i.b("<div"),i.b("\n"+n),i.b('    class="hero-unit '),i.s(i.f("class",t,e,1),t,e,0,61,80,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b("hero-unit-"),n.b(n.v(n.f("class",t,e,0)))}),t.pop()),i.b('" data-hero-unit="true" '),i.s(i.f("analytics-module-metadata",t,e,1),t,e,0,144,174,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<analytics-module-metadata0",t,e,""))}),t.pop()),i.b(">"),i.b("\n"+n),i.b('    <div class="hero-unit-image-wrapper">'),i.b("\n"+n),i.b(i.rp("<anchor-capable-element-start1",t,e,"        ")),i.s(i.f("image",t,e,1),t,e,0,308,417,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('        <div class="responsive-image-wrapper">'),i.b("\n"+n),i.b(i.rp("<responsive-image-tag2",t,e,"            ")),i.b("        </div>"),i.b("\n"+n)}),t.pop()),i.b(i.rp("<anchor-capable-element-end3",t,e,"        ")),i.b("    </div>"),i.b("\n"+n),i.b('    <div class="hero-unit-overlay">'),i.b("\n"+n),i.b('        <div class="hero-unit-image-overlay-1"></div>'),i.b("\n"+n),i.b('        <div class="hero-unit-image-overlay-2"></div>'),i.b("\n"+n),i.b('        <div class="hero-unit-image-overlay-3"></div>'),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b('    <div class="hero-unit-lining">'),i.b("\n"+n),i.b('        <div class="hero-unit-header-wrapper">'),i.b("\n"+n),i.s(i.f("isVideo",t,e,1),t,e,0,794,928,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                <a href="#" id="play-video"  class="hero-video-icon">'),i.b("\n"+n),i.b(i.rp("<icon4",t,e,"                    ")),i.b("                </a>"),i.b("\n"+n)}),t.pop()),i.s(i.f("isVideo",t,e,1),t,e,1,0,0,"")||i.s(i.f("heading",t,e,1),t,e,0,994,1055,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<primary-header5",t,e,"                        "))}),t.pop()),i.b('            <div class="secondary-header-wrapper">'),i.b("\n"+n),i.s(i.d("meta-data.advertising.adSlots.sponsor-section-hero",t,e,1),t,e,0,1215,1389,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<ad-slot6",t,e,"                    ")),n.s(n.f("promo-module",t,e,1),t,e,0,1287,1355,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b(n.rp("<attribution-slot7",t,e,"                        "))}),t.pop())}),t.pop()),i.s(i.f("hero-unit-location",t,e,1),t,e,0,1484,1543,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<destination-link8",t,e,"                    "))}),t.pop()),i.b("\n"+n),i.b("            </div>"),i.b("\n"+n),i.s(i.f("dates",t,e,1),t,e,0,1609,1713,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('            <div class="date-list">'),i.b("\n"+n),i.b(i.rp("<start-end-date9",t,e,"                ")),i.b("            </div>"),i.b("\n"+n)}),t.pop()),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.b("\n"+n),i.b("\x3c!-- hero-unit end --\x3e"),i.b("\n"),i.fl()},partials:{"<analytics-module-metadata0":{name:"analytics-module-metadata",partials:{},subs:{}},"<anchor-capable-element-start1":{name:"anchor-capable-element-start",partials:{},subs:{}},"<responsive-image-tag2":{name:"responsive-image-tag",partials:{},subs:{}},"<anchor-capable-element-end3":{name:"anchor-capable-element-end",partials:{},subs:{}},"<icon4":{name:"icon",partials:{},subs:{}},"<primary-header5":{name:"primary-header",partials:{},subs:{}},"<ad-slot6":{name:"ad-slot",partials:{},subs:{}},"<attribution-slot7":{name:"attribution-slot",partials:{},subs:{}},"<destination-link8":{name:"destination-link",partials:{},subs:{}},"<start-end-date9":{name:"start-end-date",partials:{},subs:{}}},subs:{}}),"horizontal-partner-module":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="horizontal-partner-module '),i.s(i.f("type",t,e,1),t,e,0,47,82,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b("horizontal-partner-module--"),n.b(n.v(n.f("type",t,e,0)))}),t.pop()),i.b('" '),i.s(i.f("analytics-module-metadata",t,e,1),t,e,0,123,153,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<analytics-module-metadata0",t,e,""))}),t.pop()),i.b(">"),i.b("\n"+n),i.b('    <div class="horizontal-partner-module__wrapper">'),i.b("\n"+n),i.b('        <a class="horizontal-partner-module__advertisement" href="http://www.bbc.co.uk/faqs/online/adverts_general">Advertisement</a>'),i.b("\n"+n),i.b('        <div class="horizontal-partner-module__body">'),i.b("\n"+n),i.s(i.f("video",t,e,1),t,e,0,448,578,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                <div class="body__video">'),i.b("\n"+n),i.b(i.rp("<stand-alone-video-element1",t,e,"                    ")),i.b("                </div>"),i.b("\n"+n)}),t.pop()),i.s(i.f("video",t,e,1),t,e,1,0,0,"")||i.s(i.f("image",t,e,1),t,e,0,638,784,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                    <div class="body__promo-image">'),i.b("\n"+n),i.b(i.rp("<responsive-image-tag2",t,e,"                        ")),i.b("                    </div>"),i.b("\n"+n)}),t.pop()),i.b('            <div class="body__copy">'),i.b("\n"+n),i.s(i.f("title",t,e,1),t,e,0,881,937,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b("                    <h1>"),i.b(i.v(i.f("title",t,e,0))),i.b("</h1>"),i.b("\n"+n)}),t.pop()),i.s(i.f("partnerLogo",t,e,1),t,e,0,980,1270,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                    <a class="copy__partner-logo" href="'),i.b(i.v(i.f("replace-url",t,e,0))),i.b('" title="View '),i.b(i.v(i.f("anchor-title",t,e,0))),i.b('" '),i.s(i.f("analytics-element-metadata",t,e,1),t,e,0,1115,1146,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<analytics-element-metadata3",t,e,""))}),t.pop()),i.b(">"),i.b("\n"+n),i.b(i.rp("<responsive-image-tag4",t,e,"                        ")),i.b("                    </a>"),i.b("\n"+n)}),t.pop()),i.b('                <div class="copy__body">'),i.b("\n"+n),i.b("                    "),i.b(i.t(i.f("description",t,e,0))),i.b("\n"+n),i.s(i.f("moreInfoLink",t,e,1),t,e,0,1403,1602,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                        <a class="body__more-info-link" href="'),i.b(i.v(i.f("URL",t,e,0))),i.b('" '),i.s(i.f("analytics-element-metadata",t,e,1),t,e,0,1506,1537,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<analytics-element-metadata5",t,e,""))}),t.pop()),i.b(">"),i.b(i.v(i.f("text",t,e,0))),i.b("</a>"),i.b("\n"+n)}),t.pop()),i.b("                </div>"),i.b("\n"+n),i.b("            </div>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{"<analytics-module-metadata0":{name:"analytics-module-metadata",partials:{},subs:{}},"<stand-alone-video-element1":{name:"stand-alone-video-element",partials:{},subs:{}},"<responsive-image-tag2":{name:"responsive-image-tag",partials:{},subs:{}},"<analytics-element-metadata3":{name:"analytics-element-metadata",partials:{},subs:{}},"<responsive-image-tag4":{name:"responsive-image-tag",partials:{},subs:{}},"<analytics-element-metadata5":{name:"analytics-element-metadata",partials:{},subs:{}}},subs:{}}),"html5-video":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b(i.rp("<anchor-capable-element-start0",t,e,"")),i.b('    <video id="'),i.b(i.v(i.f("id",t,e,0))),i.b('"'),i.b("\n"+n),i.b("    "),i.s(i.f("loop",t,e,1),t,e,0,70,74,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b("loop")}),t.pop()),i.b("\n"+n),i.b("    "),i.s(i.f("autoplay",t,e,1),t,e,0,101,109,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b("autoplay")}),t.pop()),i.b("\n"+n),i.b("    "),i.s(i.f("preload",t,e,1),t,e,0,139,146,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b("preload")}),t.pop()),i.b("\n"+n),i.b('    poster="'),i.b(i.v(i.f("poster",t,e,0))),i.b('"'),i.b("\n"+n),i.b("    >"),i.b("\n"+n),i.s(i.f("formats",t,e,1),t,e,0,209,271,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('            <source src="'),i.b(i.v(i.f("url",t,e,0))),i.b('" type="'),i.b(i.v(i.f("format",t,e,0))),i.b('">'),i.b("\n"+n)}),t.pop()),i.b("    </video>"),i.b("\n"+n),i.b(i.rp("<anchor-capable-element-end1",t,e,"")),i.fl()},partials:{"<anchor-capable-element-start0":{name:"anchor-capable-element-start",partials:{},subs:{}},"<anchor-capable-element-end1":{name:"anchor-capable-element-end",partials:{},subs:{}}},subs:{}}),"ibroadcast-image-gallery-advertising-overlay":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="ad-slot-overlay">'),i.b("\n"+n),i.b(i.rp("<ad-slot-mpu-secondary0",t,e,"    ")),i.b("</div>"),i.b("\n"),i.fl()},partials:{"<ad-slot-mpu-secondary0":{name:"ad-slot-mpu-secondary",partials:{},subs:{}}},subs:{}}),"ibroadcast-image-gallery-selected-image-caption":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<h2 id="selected-image-caption-title" class="selected-image-caption-title">'),i.b(i.v(i.f("caption-title",t,e,0))),i.b("</h2>"),i.b("\n"+n),i.b('<p id="selected-image-caption" class="selected-image-caption">'),i.b(i.t(i.f("caption",t,e,0))),i.b("</p>"),i.fl()},partials:{},subs:{}}),"ibroadcast-image-gallery-selected-image-tag":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<img class="selected-image responsive '),i.b(i.v(i.f("additional-class",t,e,0))),i.b('" src="'),i.b(i.v(i.f("image-src",t,e,0))),i.b('" alt="'),i.b(i.v(i.f("alt-text",t,e,0))),i.b('" data-is-watermarked="'),i.b(i.v(i.f("is-watermarked",t,e,0))),i.b('"/>'),i.fl()},partials:{},subs:{}}),"ibroadcast-image-gallery-selected-image":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<a id="'),i.b(i.v(i.f("id",t,e,0))),i.b('" '),i.b("\n"+n),i.b('\tclass="responsive-image-wrapper fullsizeable"'),i.b("\n"+n),i.b('\tdata-caption="'),i.b(i.v(i.f("caption",t,e,0))),i.b('"'),i.b("\n"+n),i.b('\tdata-caption-title="'),i.b(i.v(i.f("caption-title",t,e,0))),i.b('"'),i.b("\n"+n),i.b('\tdata-is-clickable="'),i.b(i.v(i.f("is-clickable",t,e,0))),i.b('"'),i.b("\n"+n),i.b('\thref="'),i.b(i.v(i.f("fullsize-url",t,e,0))),i.b('">'),i.b("\n"+n),i.b("</a>"),i.b("\n"),i.fl()},partials:{},subs:{}}),"ibroadcast-image-gallery-thumbnail":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<li><a href="#"><img src="'),i.b(i.v(i.f("url",t,e,0))),i.b('" data-src-recipe="'),i.b(i.v(i.f("url",t,e,0))),i.b('" alt="'),i.b(i.v(i.f("alt",t,e,0))),i.b('" data-caption-title="'),i.b(i.v(i.f("caption-title",t,e,0))),i.b('" data-caption="'),i.b(i.v(i.f("caption",t,e,0))),i.b('" data-is-portrait="'),i.b(i.v(i.f("is-portrait",t,e,0))),i.b('" /></a></li>'),i.fl()},partials:{},subs:{}}),"ibroadcast-image-gallery":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div id="ib-gallery-'),i.b(i.v(i.f("id",t,e,0))),i.b('" data-gallery-id="'),i.b(i.v(i.f("id",t,e,0))),i.b('" class="ib-gallery '),i.b(i.v(i.f("id",t,e,0))),i.b('">'),i.b("\n"+n),i.b('    <div class="ib-gallery-wrapper">'),i.b("\n"+n),i.b('        <div id="slide-wrapper" class="slide-wrapper">'),i.b("\n"+n),i.b('            <a href="#" id="selected-image-nav-prev" class="icon-wrapper gel-icon-wrapper icon-wrapper-previous">'),i.b("\n"+n),i.b('                <div class="gelicon gelicon--previous"></div>'),i.b("\n"+n),i.b("            </a>"),i.b("\n"+n),i.b('            <a href="#" id="selected-image-nav-next" class="icon-wrapper gel-icon-wrapper icon-wrapper-next">'),i.b("\n"+n),i.b('                <div class="gelicon gelicon--next"></div>'),i.b("\n"+n),i.b("            </a>"),i.b("\n"+n),i.b('            <div class="selected-image-wrapper">'),i.b("\n"+n),i.b("            </div>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b('        <ul id="ib-gallery-thumbnail-carousel" class="ib-gallery-thumbnail-carousel">'),i.b("\n"+n),i.s(i.f("gallery-images",t,e,1),t,e,0,750,789,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<ibroadcast-image-gallery-thumbnail0",t,e,""))}),t.pop()),i.b("        </ul>"),i.b("\n"+n),i.b('        <div id="selected-image-caption-wrapper" class="selected-image-caption-wrapper">'),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.s(i.f("show-ads",t,e,1),t,e,0,955,1006,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<ad-slot-ibroadcast-image-gallery1",t,e,"        "))}),t.pop()),i.b("</div>"),i.fl()},partials:{"<ibroadcast-image-gallery-thumbnail0":{name:"ibroadcast-image-gallery-thumbnail",partials:{},subs:{}},"<ad-slot-ibroadcast-image-gallery1":{name:"ad-slot-ibroadcast-image-gallery",partials:{},subs:{}}},subs:{}}),icon:new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.f("icon-type",t,e,1),t,e,0,14,189,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('    <span id="'),i.b(i.v(i.f("id",t,e,0))),i.b('" class="icon-wrapper gel-icon-wrapper icon-wrapper-'),i.b(i.v(i.f("icon-type",t,e,0))),i.b('">'),i.b("\n"+n),i.b('        <i aria-hidden="true" class="gelicon gelicon--'),i.b(i.v(i.f("icon-type",t,e,0))),i.b('"></i>'),i.b("\n"+n),i.b("    </span>"),i.b("\n"+n)}),t.pop()),i.fl()},partials:{},subs:{}}),infographic:new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.f("infographic",t,e,1),t,e,0,16,229,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('    <div id="custom-embed">'),i.b("\n"+n),i.b('        <div id="custom-embed-content">'),i.b("\n"+n),i.b('            <iframe src="'),i.b(i.v(i.f("infographic",t,e,0))),i.b('" scrolling="no" frameborder="0" seamless height="500">'),i.b("\n"+n),i.b("            </iframe>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n)}),t.pop()),i.fl()},partials:{},subs:{}}),"inline-horizontal-partner-module":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b("<p></p>"),i.b("\n"+n),i.b('<div class="inline-media inline-horizontal-partner-module">'),i.b("\n"+n),i.b(i.rp("<horizontal-partner-module0",t,e,"    ")),i.b("</div>"),i.b("\n"+n),i.b("<p></p>"),i.fl()},partials:{"<horizontal-partner-module0":{name:"horizontal-partner-module",partials:{},subs:{}}},subs:{}}),"inline-ibroadcast-image-gallery":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="inline-media inline-gallery '),i.b(i.v(i.f("id",t,e,0))),i.b('">'),i.b("\n"+n),i.b(i.rp("<ibroadcast-image-gallery0",t,e,"    ")),i.b("</div>"),i.fl()},partials:{"<ibroadcast-image-gallery0":{name:"ibroadcast-image-gallery",partials:{},subs:{}}},subs:{}}),"inline-image":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="inline-media inline-image">'),i.b("\n"+n),i.b(i.rp("<responsive-image-data-element0",t,e,"    ")),i.b("</div>"),i.fl()},partials:{"<responsive-image-data-element0":{name:"responsive-image-data-element",partials:{},subs:{}}},subs:{}}),"inline-magnify":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div id="magnify'),i.b(i.v(i.f("id",t,e,0))),i.b('"class="inline-media inline-magnify">'),i.b("\n"+n),i.b(i.rp("<magnify0",t,e,"    ")),i.b("</div>"),i.fl()},partials:{"<magnify0":{name:"magnify",partials:{},subs:{}}},subs:{}}),"inline-video":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="inline-media inline-video">'),i.b("\n"+n),i.b(i.rp("<stand-alone-video-element0",t,e,"    ")),i.b("</div>"),i.fl()},partials:{"<stand-alone-video-element0":{name:"stand-alone-video-element",partials:{},subs:{}}},subs:{}}),"inline-youtube":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="inline-media inline-youtube">'),i.b("\n"+n),i.b(i.rp("<youtube0",t,e,"    ")),i.b("</div>"),i.fl()},partials:{"<youtube0":{name:"youtube",partials:{},subs:{}}},subs:{}}),intro:new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.f("intro",t,e,1),t,e,0,10,109,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('    <div class="introduction-wrapper">'),i.b("\n"+n),i.b('        <p class="introduction">'),i.b(i.t(i.f("intro",t,e,0))),i.b("</p>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n)}),t.pop()),i.fl()},partials:{},subs:{}}),"link-box-anchor-simple":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b("<a "),i.s(i.f("id",t,e,1),t,e,0,10,21,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b('id="'),n.b(n.v(n.f("id",t,e,0))),n.b('"')}),t.pop()),i.b(' href="'),i.b(i.v(i.f("url",t,e,0))),i.b('">'),i.b(i.v(i.f("title",t,e,0))),i.b(" </a>"),i.fl()},partials:{},subs:{}}),"link-box-anchor":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b("<a "),i.s(i.f("id",t,e,1),t,e,0,10,21,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b('id="'),n.b(n.v(n.f("id",t,e,0))),n.b('"')}),t.pop()),i.b("\n"+n),i.b('        href="'),i.b(i.v(i.f("url",t,e,0))),i.b('" '),i.s(i.f("analytics-element-metadata",t,e,1),t,e,0,83,114,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<analytics-element-metadata0",t,e,""))}),t.pop()),i.b(">"),i.b("\n"+n),i.b(i.rp("<link-box1",t,e,"    ")),i.b("</a>"),i.fl()},partials:{"<analytics-element-metadata0":{name:"analytics-element-metadata",partials:{},subs:{}},"<link-box1":{name:"link-box",partials:{},subs:{}}},subs:{}}),"link-box-list":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<ul class="link-box-list '),i.b(i.v(i.f("class",t,e,0))),i.b('">'),i.b("\n"+n),i.s(i.f("items",t,e,1),t,e,0,51,135,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('    <li class="link-box-list-item">'),i.b("\n"+n),i.b(i.rp("<link-box-anchor0",t,e,"            ")),i.b("    </li>"),i.b("\n"+n)}),t.pop()),i.b("</ul>"),i.fl()},partials:{"<link-box-anchor0":{name:"link-box-anchor",partials:{},subs:{}}},subs:{}}),"link-box":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="link-box '),i.b(i.v(i.f("class",t,e,0))),i.b('" >'),i.b("\n"+n),i.s(i.f("title",t,e,1),t,e,0,48,98,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('    <span class="link-text">'),i.b(i.v(i.f("title",t,e,0))),i.b("</span>"),i.b("\n"+n)}),t.pop()),i.s(i.f("icon",t,e,1),t,e,0,122,208,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('    <span class="icon-wrapper"><div class="icon-arrow-right-small"></div></span>'),i.b("\n"+n)}),t.pop()),i.b('    <div class="pointer"></div>'),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{},subs:{}}),"load-more":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.f("next-page",t,e,1),t,e,0,14,249,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('    <a id="'),i.b(i.v(i.f("id",t,e,0))),i.b('" href="'),i.b(i.v(i.f("url",t,e,0))),i.b('">'),i.b("\n"+n),i.b('        <div class="load-more-lining">'),i.b("\n"+n),i.b('            <span id="load-more-label">'),i.b(i.v(i.f("title",t,e,0))),i.b("</span>"),i.b("\n"+n),i.b('            <span id="loading-spinner" class="gelicon gelicon--refresh"></span>'),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("    </a>"),i.b("\n"+n)}),t.pop()),i.b("\n"),i.fl()},partials:{},subs:{}}),"lorem-ipsum":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b("Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut"),i.b("\n"+n),i.b("labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco"),i.b("\n"+n),i.b("laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit"),i.b("\n"+n),i.b("in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat"),i.b("\n"+n),i.b("cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum"),i.fl()},partials:{},subs:{}}),mapbox:new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.f("isMapDataAvailable",t,e,1),t,e,0,23,538,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b("<section"),i.b("\n"+n),i.b('    class="map '),i.b(i.v(i.f("class",t,e,0))),i.b('"'),i.b("\n"+n),i.b('    data-mapbox-latitude="'),i.b(i.v(i.f("latitude",t,e,0))),i.b('"'),i.b("\n"+n),i.b('    data-mapbox-longitude="'),i.b(i.v(i.f("longitude",t,e,0))),i.b('"'),i.b("\n"+n),i.b('    data-mapbox-zoomlevel="'),i.b(i.v(i.f("zoomLevel",t,e,0))),i.b('">'),i.b("\n"+n),i.b('    <div class="page-component-wrapper map__title-wrapper">'),i.b("\n"+n),i.b('        <h1 class="map__title">'),i.b(i.v(i.f("title",t,e,0))),i.b("</h1>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b('    <div id="'),i.b(i.v(i.f("mapContainerId",t,e,0))),i.b('" class="map__container"></div>'),i.b("\n"+n),i.b('    <div class="page-component-wrapper map__page-component-wrapper">'),i.b("\n"+n),i.b('        <div class="map__controls">'),i.b("\n"+n),i.b(i.rp("<map-controls0",t,e,"            ")),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</section>"),i.b("\n"+n)}),t.pop()),i.fl()},partials:{"<map-controls0":{name:"map-controls",partials:{},subs:{}}},subs:{}}),"media-with-description":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="media-with-introduction">'),i.b("\n"+n),i.b('    <div class="media">'),i.b("\n"+n),i.b('        <div class="media-lining">'),i.b("\n"+n),i.sub("media-element",t,e,n),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b(i.rp("<intro0",t,e,"    ")),i.b("</div>"),i.fl()},partials:{"<intro0":{name:"intro",partials:{},subs:{}}},subs:{"media-element":function(t,e,n,i){}}}),"more-amazing-stories":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="page-component-wrapper">'),i.b("\n"+n),i.b('    <div class="single-column">'),i.b("\n"+n),i.b('        <div class="primary-content" >'),i.b("\n"+n),i.b('            <div id="more-amazing-stories-primary" class="component-placeholder more-amazing-stories-list"></div>'),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{},subs:{}}),"more-stories-wrapper":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<ul id="more-stories-wrapper" class="article-list" data-cs-module="more-stories-wrapper"></ul>'),i.fl()},partials:{},subs:{}}),"most-popular":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.f("has-children",t,e,1),t,e,0,17,1532,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(i.rp("<headed-section-start0",t,e,"    ")),i.b('    <div class="most-popular '),i.b(i.v(i.f("class",t,e,0))),i.b('" '),i.s(i.f("analytics-module-metadata",t,e,1),t,e,0,118,148,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<analytics-module-metadata1",t,e,""))}),t.pop()),i.b(">"),i.b("\n"+n),i.s(i.d("first-promo.image",t,e,1),t,e,0,210,538,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('        <a href="'),i.b(i.v(i.f("replace-url",t,e,0))),i.b('" title="View '),i.b(i.v(i.f("title",t,e,0))),i.b('" class="most-popular-image-wrapper" '),i.s(i.d("first-promo.analytics-element-metadata",t,e,1),t,e,0,346,377,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<analytics-element-metadata2",t,e,""))}),t.pop()),i.b(">"),i.b("\n"+n),i.b(i.rp("<standard-image-tag3",t,e,"            ")),i.b('            <div class="most-popular-image-overlay"></div>'),i.b("\n"+n),i.b("        </a>"),i.b("\n"+n)}),t.pop()),i.b('        <ol class="most-popular-items">'),i.b("\n"+n),i.s(i.f("promos",t,e,1),t,e,0,624,1467,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('            <li class="most-popular-item most-popular-item-'),i.b(i.v(i.f("brand",t,e,0))),i.b('">'),i.b("\n"+n),i.b('                <div class="most-popular-image-overlay"></div>'),i.b("\n"+n),i.s(i.f("image",t,e,1),t,e,0,785,880,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                <div class="most-popular-image">'),i.b(i.rp("<standard-image-tag4",t,e,"")),i.b("</div>"),i.b("\n"+n)}),t.pop()),i.b('                <a class="most-popular-item-lining" href="'),i.b(i.v(i.f("url",t,e,0))),i.b('" title="View '),i.b(i.v(i.f("title",t,e,0))),i.b('" '),i.s(i.f("analytics-element-metadata",t,e,1),t,e,0,1012,1043,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<analytics-element-metadata5",t,e,""))}),t.pop()),i.b(">"),i.b("\n"),i.b("\n"),i.b("\n"+n),i.b('                    <div class="most-popular-item-title-wrapper">'),i.b("\n"+n),i.b('                        <div class="most-popular-item-title">'),i.b(i.v(i.f("title",t,e,0))),i.b("</div>"),i.b("\n"+n),i.b("                    </div>"),i.b("\n"+n),i.b('                    <div class="most-popular-item-rank-wrapper">'),i.b("\n"+n),i.b('                        <div class="most-popular-item-rank">'),i.b(i.v(i.f("rank",t,e,0))),i.b("</div>"),i.b("\n"+n),i.b("                    </div>"),i.b("\n"),i.b("\n"+n),i.b("                </a>"),i.b("\n"+n),i.b("            </li>"),i.b("\n"+n)}),t.pop()),i.b("        </ol>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b(i.rp("<headed-section-end6",t,e,"    "))}),t.pop()),i.fl()},partials:{"<headed-section-start0":{name:"headed-section-start",partials:{},subs:{}},"<analytics-module-metadata1":{name:"analytics-module-metadata",partials:{},subs:{}},"<analytics-element-metadata2":{name:"analytics-element-metadata",partials:{},subs:{}},"<standard-image-tag3":{name:"standard-image-tag",partials:{},subs:{}},"<standard-image-tag4":{name:"standard-image-tag",partials:{},subs:{}},"<analytics-element-metadata5":{name:"analytics-element-metadata",partials:{},subs:{}},"<headed-section-end6":{name:"headed-section-end",partials:{},subs:{}}},subs:{}}),"related-stories":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="related-stories-mvt '),i.s(i.f("class",t,e,1),t,e,0,42,81,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b("related-stories-mvt-variation-"),n.b(n.v(n.f("class",t,e,0)))}),t.pop()),i.b('">'),i.b("\n"+n),i.b('    <h2 class="related-stories-mvt__header">Related Stories</h2>'),i.b("\n"+n),i.b('    <ol class="related-stories-mvt__stories">'),i.b("\n"+n),i.s(i.d("promo-group.items",t,e,1),t,e,0,235,1564,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('        <li class="related-stories-mvt__story">'),i.b("\n"+n),i.b('            <a class="related-stories-mvt__story-link" href="'),i.b(i.v(i.f("url",t,e,0))),i.b('" '),i.s(i.f("analytics-element-metadata",t,e,1),t,e,0,385,416,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<analytics-element-metadata0",t,e,""))}),t.pop()),i.b(">"),i.b("\n"+n),i.b('                <div class="related-stories-mvt__image-container">'),i.b("\n"+n),i.s(i.f("image",t,e,1),t,e,0,542,655,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<responsive-image-tag1",t,e,"                    ")),n.b(n.rp("<responsive-image-overlay2",t,e,"                    "))}),t.pop()),i.b('                    <div class="related-stories-mvt__image-filter"></div>'),i.b("\n"+n),i.b("                </div>"),i.b("\n"+n),i.b("            </a>"),i.b("\n"+n),i.b('            <div class="related-stories-mvt__content">'),i.b("\n"+n),i.b('                <h3 class="related-stories-mvt__title">'),i.b("\n"+n),
i.b('                    <a class="related-stories-mvt__title-link" href="'),i.b(i.v(i.f("url",t,e,0))),i.b('" '),i.s(i.f("analytics-element-metadata",t,e,1),t,e,0,1e3,1031,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<analytics-element-metadata3",t,e,""))}),t.pop()),i.b(">"),i.b("\n"+n),i.b('                        <span class="related-stories-mvt__title-link-wrap">'),i.b(i.v(i.f("title",t,e,0))),i.b("</span>"),i.b("\n"+n),i.b("                    </a>"),i.b("\n"+n),i.b("                </h3>"),i.b("\n"+n),i.s(i.d("tags.items",t,e,1),t,e,0,1234,1507,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b("                    <a class='related-stories-mvt__tag-link' "),i.s(i.f("id",t,e,1),t,e,0,1303,1314,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b('id="'),n.b(n.v(n.f("id",t,e,0))),n.b('"')}),t.pop()),i.b(' href="'),i.b(i.v(i.f("url",t,e,0))),i.b('" '),i.s(i.f("analytics-element-metadata",t,e,1),t,e,0,1368,1399,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<analytics-element-metadata4",t,e,""))}),t.pop()),i.b(">"),i.b("\n"+n),i.b("                        "),i.b(i.v(i.f("title",t,e,0))),i.b("\n"+n),i.b("                    </a>"),i.b("\n"+n)}),t.pop()),i.b("            </div>"),i.b("\n"+n),i.b("        </li>"),i.b("\n"+n)}),t.pop()),i.b("    </ol>"),i.b("\n"+n),i.b("</div>"),i.b("\n"),i.fl()},partials:{"<analytics-element-metadata0":{name:"analytics-element-metadata",partials:{},subs:{}},"<responsive-image-tag1":{name:"responsive-image-tag",partials:{},subs:{}},"<responsive-image-overlay2":{name:"responsive-image-overlay",partials:{},subs:{}},"<analytics-element-metadata3":{name:"analytics-element-metadata",partials:{},subs:{}},"<analytics-element-metadata4":{name:"analytics-element-metadata",partials:{},subs:{}}},subs:{}}),"navigation-wrapper":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div id="nav-branding-wrapper">'),i.b("\n"+n),i.b('    <div id="nav-branding">'),i.b("\n"+n),i.b(i.rp("<page-header-branding0",t,e,"        ")),i.s(i.f("navigation",t,e,1),t,e,0,117,252,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.s(i.f("menu",t,e,1),t,e,0,139,234,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('            <div id="nav-top">'),i.b("\n"+n),i.b(i.rp("<navigation1",t,e,"                ")),i.b("            </div>"),i.b("\n"+n)}),t.pop())}),t.pop()),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{"<page-header-branding0":{name:"page-header-branding",partials:{},subs:{}},"<navigation1":{name:"navigation",partials:{},subs:{}}},subs:{}}),navigation:new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="navigation-wrapper '),i.b(i.v(i.f("wrapperClass",t,e,0))),i.b('" '),i.s(i.f("analytics-module-metadata",t,e,1),t,e,0,79,109,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<analytics-module-metadata0",t,e,""))}),t.pop()),i.b(">"),i.b("\n"+n),i.b('    <ul class="navigation-list" role="navigation" aria-label="'),i.b(i.v(i.f("label",t,e,0))),i.b('">'),i.b("\n"+n),i.s(i.f("items",t,e,1),t,e,0,233,826,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('        <li class="'),i.b(i.v(i.f("class",t,e,0))),i.b('">'),i.b("\n"+n),i.b('            <a href="'),i.b(i.v(i.f("url",t,e,0))),i.b('" class="navigation-link" '),i.s(i.f("analytics-element-metadata",t,e,1),t,e,0,350,381,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<analytics-element-metadata1",t,e,""))}),t.pop()),i.b(">"),i.b("\n"),i.b("\n"+n),i.b("                "),i.s(i.f("line1",t,e,1),t,e,0,441,481,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b('<div class="line1">'),n.b(n.v(n.f("line1",t,e,0))),n.b("&nbsp;</div>")}),t.pop()),i.b("\n"+n),i.s(i.f("line2",t,e,1),t,e,0,518,775,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                    <div class="line2">'),i.b("\n"+n),i.b("                        "),i.s(i.f("image",t,e,1),t,e,0,593,674,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b('<img width="'),n.b(n.v(n.d("image.width",t,e,0))),n.b('" height="'),n.b(n.v(n.d("image.height",t,e,0))),n.b('" src="'),n.b(n.v(n.d("image.url",t,e,0))),n.b('"></img>')}),t.pop()),i.b("\n"+n),i.b("                        <span>"),i.b(i.v(i.f("line2",t,e,0))),i.b("</span>"),i.b("\n"+n),i.b("                    </div>"),i.b("\n"+n)}),t.pop()),i.b("\n"+n),i.b("            </a>"),i.b("\n"+n),i.b("        </li>"),i.b("\n"+n)}),t.pop()),i.s(i.f("showAds",t,e,1),t,e,0,857,984,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('            <li class="featured featured-native last">'),i.b("\n"+n),i.b(i.rp("<ad-slot-vertical-navbar2",t,e,"                ")),i.b("            </li>"),i.b("\n"+n)}),t.pop()),i.b("    </ul>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{"<analytics-module-metadata0":{name:"analytics-module-metadata",partials:{},subs:{}},"<analytics-element-metadata1":{name:"analytics-element-metadata",partials:{},subs:{}},"<ad-slot-vertical-navbar2":{name:"ad-slot-vertical-navbar",partials:{},subs:{}}},subs:{}}),"nested-list":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<ul class="nested-list">'),i.b("\n"+n),i.s(i.f("items",t,e,1),t,e,0,39,596,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b("    <li>"),i.b("\n"+n),i.b("        "),i.b(i.rp("<anchor-capable-element-start0",t,e,"")),i.b(i.v(i.f("title",t,e,0))),i.b(i.rp("<anchor-capable-element-end1",t,e,"")),i.b("\n"),i.b("\n"+n),i.b("            <ul>"),i.b("\n"+n),i.s(i.f("items",t,e,1),t,e,0,171,553,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b("                <li>"),i.b("\n"+n),i.b("                    "),i.b(i.rp("<anchor-capable-element-start2",t,e,"")),i.b(i.v(i.f("title",t,e,0))),i.b(i.rp("<anchor-capable-element-end3",t,e,"")),i.b("\n"+n),i.b("                    <ul>"),i.b("\n"+n),i.s(i.f("items",t,e,1),t,e,0,346,482,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b("                            <li>"),i.b(i.rp("<anchor-capable-element-start4",t,e,"")),i.b(i.v(i.f("title",t,e,0))),i.b(i.rp("<anchor-capable-element-end5",t,e,"")),i.b("</li>"),i.b("\n"+n)}),t.pop()),i.b("                    </ul>"),i.b("\n"+n),i.b("                </li>"),i.b("\n"+n)}),t.pop()),i.b("            </ul>"),i.b("\n"+n),i.b("    </li>"),i.b("\n"+n)}),t.pop()),i.b("</ul>"),i.fl()},partials:{"<anchor-capable-element-start0":{name:"anchor-capable-element-start",partials:{},subs:{}},"<anchor-capable-element-end1":{name:"anchor-capable-element-end",partials:{},subs:{}},"<anchor-capable-element-start2":{name:"anchor-capable-element-start",partials:{},subs:{}},"<anchor-capable-element-end3":{name:"anchor-capable-element-end",partials:{},subs:{}},"<anchor-capable-element-start4":{name:"anchor-capable-element-start",partials:{},subs:{}},"<anchor-capable-element-end5":{name:"anchor-capable-element-end",partials:{},subs:{}}},subs:{}}),"news-feed-module-placeholder":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b("<p></p>"),i.b("\n"+n),i.b('<div id="news-feed-'),i.b(i.v(i.f("feed-id",t,e,0))),i.b('" class="news-feed-module-placeholder"></div>'),i.b("\n"+n),i.b("<p></p>"),i.fl()},partials:{},subs:{}}),"news-feed-promo-group":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="inline-media news-feed-module">'),i.b("\n"+n),i.s(i.f("title",t,e,1),t,e,0,58,1138,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('        <div id="'),i.b(i.v(i.f("id",t,e,0))),i.b('" class="headed-section '),i.s(i.f("class",t,e,1),t,e,0,116,140,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b("headed-section-"),n.b(n.v(n.f("class",t,e,0)))}),t.pop()),i.b('">'),i.b("\n"+n),i.b('            <div class="headed-section-lining">'),i.b("\n"+n),i.b("                <header>"),i.b("\n"+n),i.b('                    <div class="section-header">'),i.b("\n"+n),i.b('                        <div class="section-title-wrapper">'),i.b("\n"+n),i.s(i.f("feed-promo-image",t,e,1),t,e,0,384,867,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                                <div class="feed-promo-image">'),i.b("\n"+n),i.s(i.f("feed-URL",t,e,1),t,e,0,497,598,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                                        <a href="'),i.b(i.v(i.f("feed-URL",t,e,0))),i.b('">'),i.b("\n"+n)}),t.pop()),i.b('                                            <img src="'),i.b(i.v(i.f("image-URL",t,e,0))),i.b('" />'),i.b("\n"+n),i.s(i.f("feed-URL",t,e,1),t,e,0,733,815,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b("                                        </a>"),i.b("\n"+n)}),t.pop()),i.b("                                </div>")}),t.pop()),i.b("\n"+n),i.b('                            <h2 class="section-title">'),i.b(i.v(i.f("title",t,e,0))),i.b("</h2>"),i.b("\n"+n),i.b("                        </div>"),i.b("\n"+n),i.b("                    </div>"),i.b("\n"+n),i.b("                </header>"),i.b("\n"+n),i.b('            <div class="section-body">'),i.b("\n"+n),i.b('                <div class="headed-section-content">'),i.b("\n"+n)}),t.pop()),i.b('                    <div class="news-feed davos-news-feed" '),i.s(i.f("analytics-module-metadata",t,e,1),t,e,0,1238,1268,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<analytics-module-metadata0",t,e,""))}),t.pop()),i.b(">"),i.b("\n"+n),i.s(i.f("promo-group",t,e,1),t,e,0,1340,3692,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                            <ul class="article-list">'),i.b("\n"+n),i.s(i.f("items",t,e,1),t,e,0,1437,3477,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                                    <li class="news-feed-item-wrapper">'),i.b("\n"+n),i.b("                                        <article>"),i.b("\n"+n),i.b('                                            <div class="news-feed-item '),i.s(i.f("class",t,e,1),t,e,0,1641,1650,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.v(n.f("class",t,e,0)))}),t.pop()),i.b('">'),i.b("\n"+n),i.b('                                                <div class="news-feed-item-lining">'),i.b("\n"+n),i.b('                                                    <div class="news-feed-item-image">'),i.b("\n"+n),i.b('                                                        <div class="news-feed-item-image-lining">'),i.b("\n"+n),i.s(i.f("image",t,e,1),t,e,0,2002,2020,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<article-image1",t,e,""))}),t.pop()),i.b("                                                        </div>"),i.b("\n"+n),i.b('                                                        <div class="news-feed-item-overlay"></div>'),i.b("\n"+n),i.b("                                                    </div>"),i.b("\n"+n),i.b('                                                    <div class="news-feed-item-copy">'),i.b("\n"+n),i.b('                                                        <div class="news-feed-item-copy-lining">'),i.b("\n"+n),i.sub("header",t,e,n),i.b("                                                        </div>"),i.b("\n"+n),i.b("                                                    </div>"),i.b("\n"+n),i.b("                                                </div>"),i.b("\n"+n),i.b("                                            </div>"),i.b("\n"+n),i.b("                                        </article>"),i.b("\n"+n),i.b("                                    </li>"),i.b("\n"+n)}),t.pop()),i.s(i.f("items",t,e,1),t,e,1,0,0,"")||i.b(i.rp("<empty-list-notice3",t,e,"                                    ")),i.b("                            </ul>"),i.b("\n"+n)}),t.pop()),i.b("                    </div>"),i.b("\n"+n),i.s(i.f("title",t,e,1),t,e,0,3750,3823,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b("                </div>"),i.b("\n"+n),i.b("            </div>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n)}),t.pop()),i.b("</div>"),i.fl()},partials:{"<analytics-module-metadata0":{name:"analytics-module-metadata",partials:{},subs:{}},"<article-image1":{name:"article-image",partials:{},subs:{}},"<headeranalytics-element-metadata2":{name:"analytics-element-metadata",partials:{},subs:{}},"<empty-list-notice3":{name:"empty-list-notice",partials:{},subs:{}}},subs:{header:function(t,e,n,i){n.b('                                                                <div class="news-feed-item-header">'),n.b("\n"+i),n.b('                                                                    <a href="'),n.b(n.v(n.f("url",t,e,0))),n.b('" '),n.s(n.f("analytics-element-metadata",t,e,1),t,e,0,2724,2755,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b(n.rp("<headeranalytics-element-metadata2",t,e,""))}),t.pop()),n.b(">"),n.b("\n"+i),n.b('                                                                        <h3 class="news-feed-item-title">'),n.b(n.v(n.f("title",t,e,0))),n.b("</h3>"),n.b("\n"+i),n.b("                                                                    </a>"),n.b("\n"+i),n.b("                                                                </div>"),n.b("\n"+i)}}}),"options-list":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="options-list  '),i.s(i.f("class",t,e,1),t,e,0,36,58,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b("options-list-"),n.b(n.v(n.f("class",t,e,0)))}),t.pop()),i.b('">'),i.b("\n"+n),i.b(i.rp("<link-box-list0",t,e,"   ")),i.b("</div>"),i.b("\n"),i.fl()},partials:{"<link-box-list0":{name:"link-box-list",partials:{},subs:{}}},subs:{}}),"page-header-branding":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b("\x3c!-- page-header-branding start --\x3e"),i.b("\n"+n),i.b('<div id="branding">'),i.b("\n"+n),i.b('    <div id="branding-top">'),i.b("\n"+n),i.b('        <div class="branding-left"></div>'),i.b("\n"+n),i.b('        <div class="branding-right"></div>'),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.b("\n"+n),i.b('<div class="site-brand">'),i.b("\n"+n),i.b('    <div class="site-brand-lining">'),i.b("\n"+n),i.s(i.f("module",t,e,1),t,e,0,267,529,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('        <a href="/'),i.b(i.v(i.f("domain",t,e,0))),i.b('" id="brand">'),i.b(i.v(i.f("name",t,e,0))),i.b("</a>"),i.b("\n"+n),i.b('        <a id="sections-nav-button" href="#nav-bottom" role=".navigation" aria-label="secondary">'),i.b("\n"+n),i.b('            <span class="icon-sections"></span><span class="title-sections">Menu</span>'),i.b("\n"+n),i.b("        </a>"),i.b("\n"+n)}),t.pop()),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.b("\n"+n),i.b("\x3c!-- page-header-branding end --\x3e"),i.fl()},partials:{},subs:{}}),"page-header":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.f("domestic-messaging-header",t,e,1),t,e,0,30,56,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<domestic-header0",t,e,"    "))}),t.pop()),i.b(i.rp("<ad-slot-leaderboard1",t,e,"")),i.b("\x3c!-- page-header start --\x3e"),i.b("\n"+n),i.b(i.rp("<navigation-wrapper2",t,e,"")),i.b("\x3c!-- page-header end --\x3e"),i.b("\n"),i.fl()},partials:{"<domestic-header0":{name:"domestic-header",partials:{},subs:{}},"<ad-slot-leaderboard1":{name:"ad-slot-leaderboard",partials:{},subs:{}},"<navigation-wrapper2":{name:"navigation-wrapper",partials:{},subs:{}}},subs:{}}),"partner-promo":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div id="partner-promo" class="partner-promo">'),i.b("\n"+n),i.b('    <div class="partner-promo-wrapper">'),i.b("\n"+n),i.b('        <a href="'),i.b(i.v(i.f("URL",t,e,0))),i.b('">'),i.b("\n"+n),i.b('            <div class="partner-promo-left">'),i.b("\n"+n),i.b('                <div class="left-wrapper">'),i.b("\n"+n),i.b('                    <span class="title">'),i.b("\n"+n),i.b("                        Read more from"),i.b("\n"+n),i.s(i.f("partnerLogo",t,e,1),t,e,0,322,401,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<responsive-image-tag0",t,e,"                            "))}),t.pop()),i.b("                    </span>"),i.b("\n"+n),i.s(i.f("description",t,e,1),t,e,0,482,630,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                        <div class="description">'),i.b("\n"+n),i.b("                            "),i.b(i.t(i.f("description",t,e,0))),i.b("\n"+n),i.b("                        </div>"),i.b("\n"+n)}),t.pop()),i.b("                </div>"),i.b("\n"+n),i.b("            </div>"),i.b("\n"+n),i.b('            <div class="partner-promo-right">'),i.b("\n"+n),i.s(i.f("image",t,e,1),t,e,0,761,824,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<responsive-image-tag1",t,e,"                    "))}),t.pop()),i.b("            </div>"),i.b("\n"+n),i.b("        </a>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{"<responsive-image-tag0":{name:"responsive-image-tag",partials:{},subs:{}},"<responsive-image-tag1":{name:"responsive-image-tag",partials:{},subs:{}}},subs:{}}),"person-bio":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b(i.rp("<headed-section-start0",t,e,"")),i.b('    <div class="person-bio-text">'),i.b(i.t(i.f("bio",t,e,0))),i.b("</div>"),i.b("\n"+n),i.b(i.rp("<headed-section-end1",t,e,"")),i.fl()},partials:{"<headed-section-start0":{name:"headed-section-start",partials:{},subs:{}},"<headed-section-end1":{name:"headed-section-end",partials:{},subs:{}}},subs:{}}),pointer:new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="pointer"></div>'),i.fl()},partials:{},subs:{}}),"primary-header":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="primary-header-wrapper">'),i.b("\n"+n),i.b('    <div class="primary-header '),i.s(i.f("context",t,e,1),t,e,0,80,107,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b("primary-header-with-context")}),t.pop()),i.b('">'),i.b("\n"+n),i.b(i.rp("<icon0",t,e,"        ")),i.s(i.f("context",t,e,1),t,e,0,160,202,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<context-heading1",t,e,"            "))}),t.pop()),i.b(i.rp("<anchor-capable-element-start2",t,e,"        ")),i.b('        <h1 class="primary-heading" role="heading">'),i.b(i.v(i.f("heading",t,e,0))),i.b("</h1>"),i.b("\n"+n),i.b(i.rp("<anchor-capable-element-end3",t,e,"        ")),i.b("\n"),i.b("\n"+n),i.s(i.f("intro",t,e,1),t,e,0,385,417,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<intro4",t,e,"            "))}),t.pop()),i.b("    </div>"),i.b("\n"+n),i.b(" </div>"),i.b("\n"),i.fl()},partials:{"<icon0":{name:"icon",partials:{},subs:{}},"<context-heading1":{name:"context-heading",partials:{},subs:{}},"<anchor-capable-element-start2":{name:"anchor-capable-element-start",partials:{},subs:{}},"<anchor-capable-element-end3":{name:"anchor-capable-element-end",partials:{},subs:{}},"<intro4":{name:"intro",partials:{},subs:{}}},subs:{}}),"promo-group-list-items":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.f("items",t,e,1),t,e,0,10,293,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.s(i.f("ad-slot",t,e,1),t,e,0,27,118,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('        <li class="promo-unit-wrapper advert">'),i.b("\n"+n),i.b(i.rp("<ad-slot0",t,e,"            ")),i.b("        </li>"),i.b("\n"+n)}),t.pop()),i.s(i.f("ad-slot",t,e,1),t,e,1,0,0,"")||(i.b('        <li class="promo-unit-wrapper">'),i.b("\n"+n),i.b("            <article>"),i.b("\n"+n),i.b(i.rp("<promo-unit1",t,e,"             ")),i.b("            </article>"),i.b("\n"+n),i.b("        </li>"),i.b("\n"+n))}),t.pop()),i.s(i.f("items",t,e,1),t,e,1,0,0,"")||i.b(i.rp("<empty-list-notice2",t,e,"    ")),i.fl()},partials:{"<ad-slot0":{name:"ad-slot",partials:{},subs:{}},"<promo-unit1":{name:"promo-unit",partials:{},subs:{}},"<empty-list-notice2":{name:"empty-list-notice",partials:{},subs:{}}},subs:{}}),"promo-group-more-stories":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.f("groups",t,e,1),t,e,0,11,189,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.s(n.f("group-1",t,e,1),t,e,0,28,58,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b(n.rp("<promo-group0",t,e,"        "))}),t.pop()),n.s(n.f("group-2",t,e,1),t,e,0,87,117,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b(n.rp("<promo-group1",t,e,"        "))}),t.pop()),n.s(n.f("group-3",t,e,1),t,e,0,146,176,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b(n.rp("<promo-group2",t,e,"        "))}),t.pop())}),t.pop()),i.fl()},partials:{"<promo-group0":{name:"promo-group",partials:{},subs:{}},"<promo-group1":{name:"promo-group",partials:{},subs:{}},"<promo-group2":{name:"promo-group",partials:{},subs:{}}},subs:{}}),"promo-group-without-container":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.f("promo-group",t,e,1),t,e,0,16,49,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<promo-group-list-items0",t,e,"    "))}),t.pop()),i.fl()},partials:{"<promo-group-list-items0":{name:"promo-group-list-items",partials:{},subs:{}}},subs:{}}),"promo-group":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.d("promo-group.has-children",t,e,1),t,e,0,29,393,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(i.rp("<headed-section-start0",t,e,"    ")),i.s(i.f("promo-group",t,e,1),t,e,0,84,348,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('            <ul class="article-list '),i.s(i.f("class",t,e,1),t,e,0,131,153,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b("article-list-"),n.b(n.v(n.f("class",t,e,0)))}),t.pop()),i.b(" "),i.b(i.v(i.f("additional-class",t,e,0))),i.b('" '),i.s(i.f("analytics-module-metadata",t,e,1),t,e,0,216,246,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<analytics-module-metadata1",t,e,""))}),t.pop()),i.b(">"),i.b("\n"+n),i.b(i.rp("<promo-group-list-items2",t,e,"                ")),i.b("            </ul>"),i.b("\n"+n)}),t.pop()),i.b(i.rp("<headed-section-end3",t,e,"    "))}),t.pop()),i.fl()},partials:{"<headed-section-start0":{name:"headed-section-start",partials:{},subs:{}},"<analytics-module-metadata1":{name:"analytics-module-metadata",partials:{},subs:{}},"<promo-group-list-items2":{name:"promo-group-list-items",partials:{},subs:{}},"<headed-section-end3":{name:"headed-section-end",partials:{},subs:{}}},subs:{}}),"promo-index":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.f("hero-unit",t,e,1),t,e,0,14,34,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<hero-unit0",t,e,"    "))}),t.pop()),i.s(i.f("promo-group-1",t,e,1),t,e,0,67,90,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<promo-group1",t,e,"    "))}),t.pop()),i.fl()},partials:{"<hero-unit0":{name:"hero-unit",partials:{},subs:{}},"<promo-group1":{name:"promo-group",partials:{},subs:{}}},subs:{}}),"promo-module":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="promo-module '),i.s(i.f("class",t,e,1),t,e,0,35,44,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.v(n.f("class",t,e,0)))}),t.pop()),i.b('">'),i.b("\n"+n),i.b('    <div class="promo-module-lining">'),i.b("\n"),i.b("\n"+n),i.b('        <div class="promo-module-image">'),i.b("\n"+n),i.s(i.f("image",t,e,1),t,e,0,159,184,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<responsive-image-tag0",t,e,""))}),t.pop()),i.b("        </div>"),i.b("\n"+n),i.b('        <div class="promo-module-overlay"></div>'),i.b("\n"),i.b("\n"+n),i.s(i.f("logoImage",t,e,1),t,e,0,282,325,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<ad-slot-sponsor-fake1",t,e,"        "))}),t.pop()),i.b("\n"+n),i.b('        <div class="promo-module-copy">'),i.b("\n"+n),i.b('            <div class="promo-module-copy-lining">'),i.b("\n"+n),i.sub("header",t,e,n),i.s(i.f("summary",t,e,1),t,e,0,655,742,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                <div class="promo-module-summary">'),i.b(i.t(i.f("summary",t,e,0))),i.b("</div>"),i.b("\n"+n)}),t.pop()),i.s(i.f("CTA",t,e,1),t,e,0,779,1275,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                    <a class="promo-module__more-info-link" href="'),i.b(i.v(i.f("url",t,e,0))),i.b('" '),i.s(i.f("analytics-element-metadata",t,e,1),t,e,0,886,917,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<analytics-element-metadata2",t,e,""))}),t.pop()),i.b(">"),i.b("\n"+n),i.b('                        <div class="content">'),i.b("\n"+n),i.s(i.f("title",t,e,1),t,e,0,1034,1136,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                                <span class="link-text">'),i.b(i.v(i.f("title",t,e,0))),i.b("</span>"),i.b("\n"+n)}),t.pop()),i.b('                            <div class="pointer"></div>'),i.b("\n"+n),i.b("                        </div>"),i.b("\n"+n),i.b("                    </a>"),i.b("\n"+n)}),t.pop()),i.b("            </div>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{"<responsive-image-tag0":{name:"responsive-image-tag",partials:{},subs:{}},"<ad-slot-sponsor-fake1":{name:"ad-slot-sponsor-fake",partials:{},subs:{}},"<analytics-element-metadata2":{name:"analytics-element-metadata",partials:{},subs:{}}},subs:{header:function(t,e,n,i){n.b('                <div class="promo-module-header">'),n.b("\n"+i),n.b('                    <h3 class="promo-module-title">'),n.b(n.v(n.f("title",t,e,0))),n.b("</h3>"),n.b("\n"+i),n.b("                </div>"),n.b("\n"+i)}}}),"promo-unit-basic":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="promo-unit">'),i.b("\n"+n),i.b('    <div class="promo-unit-lining">'),i.b("\n"+n),i.b('        <div class="promo-unit-copy">'),i.b("\n"+n),i.b('            <div class="promo-unit-copy-lining">'),i.b("\n"+n),i.b('                <div class="promo-unit-header">'),i.b("\n"+n),i.b('                    <h3 class="promo-unit-title">'),i.b(i.v(i.f("title",t,e,0))),i.b("</h3>"),i.b("\n"+n),i.b("                </div>"),i.b("\n"+n),i.s(i.f("summary",t,e,1),t,e,0,311,390,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                <p class="promo-unit-summary">'),i.b(i.v(i.f("summary",t,e,0))),i.b("</p>"),i.b("\n"+n)}),t.pop()),i.b("            </div>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{},subs:{}}),"promo-unit-end":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{},subs:{}}),"promo-unit-layout-alternative":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b(i.rp("<anchor-capable-element-start0",t,e,"")),i.b('<div class="promo-unit-layout-alternative '),i.s(i.f("class",t,e,1),t,e,0,86,95,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.v(n.f("class",t,e,0)))}),t.pop()),i.b('">'),i.b("\n"+n),i.b('    <div class="promo-unit-image-wrapper">'),i.b("\n"+n),i.b('        <div class="promo-unit-header">'),i.b("\n"+n),i.b('            <div class="promo-unit-header-lining">'),i.b("\n"+n),i.sub("header",t,e,n),i.b("            </div>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b('        <div class="promo-unit-image">'),i.b("\n"+n),i.b('            <div class="promo-unit-image-lining">'),i.b("\n"+n),i.s(i.f("image",t,e,1),t,e,0,511,624,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<responsive-image-tag1",t,e,"                    ")),n.b(n.rp("<responsive-image-overlay2",t,e,"                    "))}),t.pop()),i.b("            </div>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b('        <div class="promo-unit-copy">'),i.b("\n"+n),i.b('            <div class="promo-unit-copy-lining">'),i.b("\n"+n),i.s(i.f("summary",t,e,1),t,e,0,784,863,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                <p class="promo-unit-summary">'),i.b(i.v(i.f("summary",t,e,0))),i.b("</p>"),i.b("\n"+n)}),t.pop()),i.b("            </div>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"),i.b("\n"+n),i.b("</div>"),i.b("\n"+n),i.b(i.rp("<anchor-capable-element-end3",t,e,"")),i.fl()},partials:{"<anchor-capable-element-start0":{name:"anchor-capable-element-start",partials:{},subs:{}},"<responsive-image-tag1":{name:"responsive-image-tag",partials:{},subs:{}},"<responsive-image-overlay2":{name:"responsive-image-overlay",partials:{},subs:{}},"<anchor-capable-element-end3":{name:"anchor-capable-element-end",partials:{},subs:{}}},subs:{header:function(t,e,n,i){n.b('                    <h3 class="promo-unit-title">'),n.b(n.v(n.f("title",t,e,0))),n.b("</h3>"),n.b("\n"+i)}}}),"promo-unit-layout-clip":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b("<div"),i.b("\n"+n),i.b("    "),i.s(i.f("brand",t,e,1),t,e,0,19,41,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b('data-brand="'),n.b(n.v(n.f("brand",t,e,0))),n.b('"')}),t.pop()),i.b("\n"+n),i.b('    class="promo-unit-layout-clip '),i.s(i.f("class",t,e,1),t,e,0,96,105,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.v(n.f("class",t,e,0)))}),t.pop()),i.b('">'),i.b("\n"+n),i.b('    <div class="promo-unit-image">'),i.b("\n"+n),i.b('        <div class="promo-unit-image-lining">'),i.b("\n"+n),i.s(i.f("image",t,e,1),t,e,0,221,239,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<article-image0",t,e,""))}),t.pop()),i.b("        </div>"),i.b("\n"+n),i.b('        <div class="promo-unit-overlay"></div>'),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b('    <div class="promo-unit-copy">'),i.b("\n"+n),i.b('        <div class="promo-unit-copy-lining">'),i.b("\n"+n),i.sub("header",t,e,n),i.s(i.f("summary",t,e,1),t,e,0,905,980,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                <p class="promo-unit-summary">'),i.b(i.v(i.f("summary",t,e,0))),i.b("</p>"),i.b("\n"+n)}),t.pop()),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{"<article-image0":{name:"article-image",partials:{},subs:{}},"<headercontext-heading1":{name:"context-heading",partials:{},subs:{}},"<headeranalytics-element-metadata2":{name:"analytics-element-metadata",partials:{},subs:{}}},subs:{header:function(t,e,n,i){n.b('            <div class="promo-unit-header '),n.s(n.f("context",t,e,1),t,e,0,480,510,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b("promo-unit-header-with-context")}),t.pop()),n.b('">'),n.b("\n"+i),n.s(n.f("context",t,e,1),t,e,0,553,611,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b(n.rp("<headercontext-heading1",t,e,"                    "))}),t.pop()),n.b('                <a href="'),n.b(n.v(n.f("url",t,e,0))),n.b('" '),n.s(n.f("analytics-element-metadata",t,e,1),t,e,0,689,720,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b(n.rp("<headeranalytics-element-metadata2",t,e,""))}),t.pop()),n.b(">"),n.b("\n"+i),n.b('                    <h3 class="promo-unit-title">'),n.b(n.v(n.f("title",t,e,0))),n.b("</h3>"),n.b("\n"+i),n.b("                </a>"),n.b("\n"+i),n.b("            </div>"),n.b("\n"+i)}}}),"promo-unit-layout-event":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b("<div"),i.b("\n"+n),i.b("    "),i.s(i.f("brand",t,e,1),t,e,0,19,41,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b('data-brand="'),n.b(n.v(n.f("brand",t,e,0))),n.b('"')}),t.pop()),i.b("\n"+n),i.b('    class="promo-unit-layout-event '),i.s(i.f("class",t,e,1),t,e,0,97,106,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.v(n.f("class",t,e,0)))}),t.pop()),i.b('">'),i.b("\n"+n),i.b('    <div class="promo-unit-image">'),i.b("\n"+n),i.b('        <div class="promo-unit-image-lining">'),i.b("\n"+n),i.s(i.f("image",t,e,1),t,e,0,222,240,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<article-image0",t,e,""))}),t.pop()),i.b("        </div>"),i.b("\n"+n),i.b('        <div class="promo-unit-overlay"></div>'),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b('    <div class="promo-unit-copy">'),i.b("\n"+n),i.b('        <div class="promo-unit-copy-lining">'),i.b("\n"+n),i.s(i.f("dates",t,e,1),t,e,0,425,529,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('            <div class="date-list">'),i.b("\n"+n),i.b(i.rp("<start-end-date1",t,e,"                ")),i.b("            </div>"),i.b("\n"+n)}),t.pop()),i.s(i.f("event-type-URL",t,e,1),t,e,0,571,750,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('            <div class="promo-unit-event-type">'),i.b("\n"+n),i.b('                <a class="promo-unit-event-type-link" href="'),i.b(i.v(i.f("event-type-URL",t,e,0))),i.b('">'),i.b(i.v(i.f("event-type",t,e,0))),i.b("</a>"),i.b("\n"+n),i.b("            </div>"),i.b("\n"+n)}),t.pop()),i.b("\n"+n),i.b('            <div class="promo-unit-header">'),i.b("\n"+n),i.b('                <a href="'),i.b(i.v(i.f("url",t,e,0))),i.b('">'),i.b("\n"+n),i.b('                    <h3 class="promo-unit-title">'),i.b(i.v(i.f("title",t,e,0))),i.b("</h3>"),i.b("\n"+n),i.b("                </a>"),i.b("\n"+n),i.b("            </div>"),i.b("\n"+n),i.s(i.f("location",t,e,1),t,e,0,979,1095,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('            <div class="promo-unit-location">'),i.b("\n"+n),i.b("                <p>"),
i.b(i.t(i.f("location",t,e,0))),i.b("</p>"),i.b("\n"+n),i.b("            </div>"),i.b("\n"+n)}),t.pop()),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{"<article-image0":{name:"article-image",partials:{},subs:{}},"<start-end-date1":{name:"start-end-date",partials:{},subs:{}}},subs:{}}),"promo-unit-layout-standard":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b("<div"),i.b("\n"+n),i.b("        "),i.s(i.f("brand",t,e,1),t,e,0,23,45,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b('data-brand="'),n.b(n.v(n.f("brand",t,e,0))),n.b('"')}),t.pop()),i.b("\n"+n),i.b('        class="promo-unit-layout-standard '),i.s(i.f("class",t,e,1),t,e,0,108,117,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.v(n.f("class",t,e,0)))}),t.pop()),i.b('">'),i.b("\n"+n),i.b('    <div class="promo-unit-image">'),i.b("\n"+n),i.b('        <div class="promo-unit-image-lining">'),i.b("\n"+n),i.s(i.f("image",t,e,1),t,e,0,233,251,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<article-image0",t,e,""))}),t.pop()),i.b("        </div>"),i.b("\n"+n),i.b('        <div class="promo-unit-overlay"></div>'),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b('    <div class="promo-unit-copy">'),i.b("\n"+n),i.b('        <div class="promo-unit-copy-lining">'),i.b("\n"+n),i.sub("header",t,e,n),i.s(i.f("summary",t,e,1),t,e,0,917,992,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                <p class="promo-unit-summary">'),i.b(i.v(i.f("summary",t,e,0))),i.b("</p>"),i.b("\n"+n)}),t.pop()),i.s(i.f("tags",t,e,1),t,e,0,1026,1074,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<link-box-list3",t,e,"                "))}),t.pop()),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.b("\n"),i.fl()},partials:{"<article-image0":{name:"article-image",partials:{},subs:{}},"<headercontext-heading1":{name:"context-heading",partials:{},subs:{}},"<headeranalytics-element-metadata2":{name:"analytics-element-metadata",partials:{},subs:{}},"<link-box-list3":{name:"link-box-list",partials:{},subs:{}}},subs:{header:function(t,e,n,i){n.b('            <div class="promo-unit-header '),n.s(n.f("context",t,e,1),t,e,0,492,522,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b("promo-unit-header-with-context")}),t.pop()),n.b('">'),n.b("\n"+i),n.s(n.f("context",t,e,1),t,e,0,565,623,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b(n.rp("<headercontext-heading1",t,e,"                    "))}),t.pop()),n.b('                <a href="'),n.b(n.v(n.f("url",t,e,0))),n.b('" '),n.s(n.f("analytics-element-metadata",t,e,1),t,e,0,701,732,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b(n.rp("<headeranalytics-element-metadata2",t,e,""))}),t.pop()),n.b(">"),n.b("\n"+i),n.b('                    <h3 class="promo-unit-title">'),n.b(n.v(n.f("title",t,e,0))),n.b("</h3>"),n.b("\n"+i),n.b("                </a>"),n.b("\n"+i),n.b("            </div>"),n.b("\n"+i)}}}),"promo-unit-start":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="promo-unit '),i.s(i.f("class",t,e,1),t,e,0,33,42,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.v(n.f("class",t,e,0)))}),t.pop()),i.b('">'),i.b("\n"+n),i.b('    <div class="promo-unit-lining">'),i.fl()},partials:{},subs:{}}),"promo-unit":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="promo-unit '),i.s(i.f("class",t,e,1),t,e,0,33,42,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.v(n.f("class",t,e,0)))}),t.pop()),i.b('">'),i.b("\n"+n),i.b('    <div class="promo-unit-lining">'),i.b("\n"+n),i.s(i.f("useAlternativeLayout",t,e,1),t,e,0,124,180,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<promo-unit-layout-alternative0",t,e,"            "))}),t.pop()),i.s(i.f("useStandardLayout",t,e,1),t,e,0,236,289,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<promo-unit-layout-standard1",t,e,"            "))}),t.pop()),i.s(i.f("useEventLayout",t,e,1),t,e,0,339,389,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<promo-unit-layout-event2",t,e,"            "))}),t.pop()),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{"<promo-unit-layout-alternative0":{name:"promo-unit-layout-alternative",partials:{},subs:{}},"<promo-unit-layout-standard1":{name:"promo-unit-layout-standard",partials:{},subs:{}},"<promo-unit-layout-event2":{name:"promo-unit-layout-event",partials:{},subs:{}}},subs:{}}),"responsive-image-data-element-with-icon":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<a data-replace-url="'),i.b(i.v(i.f("replace-url",t,e,0))),i.b('"'),i.b("\n"+n),i.b('   data-anchor-title="'),i.b(i.v(i.f("anchor-title",t,e,0))),i.b('"'),i.b("\n"+n),i.b('   data-caption="'),i.b(i.v(i.f("caption",t,e,0))),i.b('"'),i.b("\n"+n),i.b('   data-caption-title="'),i.b(i.v(i.f("caption-title",t,e,0))),i.b('"'),i.b("\n"+n),i.b('   data-replace-image="true"'),i.b("\n"+n),i.b('   data-is-portrait="'),i.b(i.v(i.f("is-portrait",t,e,0))),i.b('"'),i.b("\n"+n),i.b('   data-additional-wrapper-class="'),i.b(i.v(i.f("additional-wrapper-class",t,e,0))),i.b('"'),i.b("\n"+n),i.s(i.f("analytics-element-metadata",t,e,1),t,e,0,316,347,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<analytics-element-metadata0",t,e,""))}),t.pop()),i.b('   class="replace-image"'),i.b("\n"+n),i.b('   title="'),i.b(i.v(i.f("alt",t,e,0))),i.b('"'),i.b("\n"+n),i.b('   href="'),i.b(i.v(i.f("url",t,e,0))),i.b('">'),i.b("\n"+n),i.b('    <div class="replace-image-additional-content">'),i.b(i.rp("<responsive-image-overlay1",t,e,"")),i.b("</div>"),i.b("\n"+n),i.b("    View image of "),i.b(i.v(i.f("alt",t,e,0))),i.b("\n"+n),i.b("</a>"),i.fl()},partials:{"<analytics-element-metadata0":{name:"analytics-element-metadata",partials:{},subs:{}},"<responsive-image-overlay1":{name:"responsive-image-overlay",partials:{},subs:{}}},subs:{}}),"responsive-image-data-element":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<a data-replace-url="'),i.b(i.v(i.f("replace-url",t,e,0))),i.b('"'),i.b("\n"+n),i.b('   data-anchor-title="'),i.b(i.v(i.f("anchor-title",t,e,0))),i.b('"'),i.b("\n"+n),i.b('   data-caption="'),i.b(i.v(i.f("caption",t,e,0))),i.b('"'),i.b("\n"+n),i.b('   data-caption-title="'),i.b(i.v(i.f("caption-title",t,e,0))),i.b('"'),i.b("\n"+n),i.b('   data-replace-image="true"'),i.b("\n"+n),i.b('   data-is-portrait="'),i.b(i.v(i.f("is-portrait",t,e,0))),i.b('"'),i.b("\n"+n),i.b('   class="replace-image"'),i.b("\n"+n),i.b('   title="'),i.b(i.v(i.f("alt",t,e,0))),i.b('"'),i.b("\n"+n),i.b('   href="'),i.b(i.v(i.f("url",t,e,0))),i.b('">'),i.b("\n"+n),i.b("    View image of "),i.b(i.v(i.f("alt",t,e,0))),i.b("\n"+n),i.b("</a>"),i.fl()},partials:{},subs:{}}),"responsive-image-lazy-load-placeholder":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b("data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="),i.fl()},partials:{},subs:{}}),"responsive-image-overlay":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b(i.rp("<icon0",t,e,"")),i.b(i.rp("<pointer1",t,e,"")),i.fl()},partials:{"<icon0":{name:"icon",partials:{},subs:{}},"<pointer1":{name:"pointer",partials:{},subs:{}}},subs:{}}),"responsive-image-tag":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<img data-fixed-width-format="'),i.b(i.v(i.f("fixed-width-format",t,e,0))),i.b('"'),i.b("\n"+n),i.b('     width="'),i.b(i.v(i.f("width",t,e,0))),i.b('"'),i.b("\n"+n),i.b('     height="'),i.b(i.v(i.f("height",t,e,0))),i.b('"'),i.b("\n"+n),i.b('     title="'),i.b(i.v(i.f("alt",t,e,0))),i.b('"'),i.b("\n"+n),i.b('     alt="'),i.b(i.v(i.f("alt",t,e,0))),i.b('"'),i.b("\n"+n),i.b('     class="'),i.b(i.v(i.f("class",t,e,0))),i.b('"'),i.b("\n"+n),i.b('     data-caption="'),i.b(i.v(i.f("caption",t,e,0))),i.b('"'),i.b("\n"+n),i.b('     data-caption-title="'),i.b(i.v(i.f("caption-title",t,e,0))),i.b('"'),i.b("\n"+n),i.s(i.f("lazy-load",t,e,1),t,e,0,260,372,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('     data-lazy-load="true"'),i.b("\n"+n),i.b('     data-src="'),i.b(i.v(i.f("url",t,e,0))),i.b('"'),i.b("\n"+n),i.b('     src="'),i.b(i.rp("<responsive-image-lazy-load-placeholder0",t,e,"")),i.b('"'),i.b("\n"+n)}),t.pop()),i.s(i.f("lazy-load",t,e,1),t,e,1,0,0,"")||(i.b('     src="'),i.b(i.v(i.f("url",t,e,0))),i.b('"'),i.b("\n"+n)),i.s(i.f("is-portrait",t,e,1),t,e,0,467,492,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b("     data-portrait"),i.b("\n"+n)}),t.pop()),i.s(i.f("is-portrait",t,e,1),t,e,1,0,0,"")||(i.b("     data-landscape"),i.b("\n"+n)),i.b("/>"),i.fl()},partials:{"<responsive-image-lazy-load-placeholder0":{name:"responsive-image-lazy-load-placeholder",partials:{},subs:{}}},subs:{}}),"responsive-image-wrapper":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="responsive-image-wrapper">'),i.b("\n"+n),i.b(i.rp("<responsive-image-tag0",t,e,"    ")),i.b("</div>"),i.fl()},partials:{"<responsive-image-tag0":{name:"responsive-image-tag",partials:{},subs:{}}},subs:{}}),"responsive-image":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.f("replace-url",t,e,1),t,e,0,16,234,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('    <a class="responsive-image-wrapper '),i.b(i.v(i.f("additional-wrapper-class",t,e,0))),i.b('" href="'),i.b(i.v(i.f("replace-url",t,e,0))),i.b('" title="View '),i.b(i.v(i.f("anchor-title",t,e,0))),i.b('" '),i.s(i.f("analytics-element-metadata",t,e,1),t,e,0,170,201,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<analytics-element-metadata0",t,e,""))}),t.pop()),i.b(">"),i.b("\n"+n)}),t.pop()),i.b('        <div class="inline-image-wrapper">'),i.b("\n"+n),i.b(i.rp("<responsive-image-tag1",t,e,"            ")),i.b("            "),i.b(i.t(i.f("additional-content",t,e,0))),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b(i.rp("<caption2",t,e,"        ")),i.s(i.f("replace-url",t,e,1),t,e,0,421,431,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b("    </a>"),i.b("\n"+n)}),t.pop()),i.fl()},partials:{"<analytics-element-metadata0":{name:"analytics-element-metadata",partials:{},subs:{}},"<responsive-image-tag1":{name:"responsive-image-tag",partials:{},subs:{}},"<caption2":{name:"caption",partials:{},subs:{}}},subs:{}}),"search-results-status":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="search-results-status">'),i.b("\n"+n),i.b('    <div class="search-results-status-lining">'),i.b("\n"+n),i.s(i.f("results-found",t,e,1),t,e,0,109,333,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('            <h3 class="status">We\'ve found <span class="branded">'),i.b(i.v(i.f("results-count",t,e,0))),i.b("</span> matches for the keyword"),i.s(i.f("multiple-keywords",t,e,1),t,e,0,245,246,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b("s")}),t.pop()),i.b(' "<span class="branded">'),i.b(i.v(i.f("search-keywords",t,e,0))),i.b('</span>"</h3>'),i.b("\n"+n)}),t.pop()),i.s(i.f("results-found",t,e,1),t,e,1,0,0,"")||(i.b('            <h3 class="status">Unfortunately we couldn\'t find any results that match "<span class="branded">'),i.b(i.v(i.f("search-keywords",t,e,0))),i.b('</span>"</h3>'),i.b("\n"),i.b("\n"+n),i.b('            <div class="onward-journey-wrapper">'),i.b("\n"+n),i.b("                <h3>What can I do now?</h3>"),i.b("\n"+n),i.b("                <ul>"),i.b("\n"+n),i.b("                    <li><b>Search again</b> - try using a simple keyword</li>"),i.b("\n"+n),i.b('                    <li><a href="/'),i.b(i.v(i.d("module.domain",t,e,0))),i.b('">Browse our latest stories</a></li>'),i.b("\n"+n),i.b("                </ul>"),i.b("\n"+n),i.b("            </div>"),i.b("\n"),i.b("\n"+n)),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{},subs:{}}),"secondary-content-destination-results":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b(i.rp("<ad-slot-mpu-secondary0",t,e,"")),i.b("\n"+n),i.b(i.rp("<ad-slot-native-side1",t,e,"")),i.b("\n"+n),i.b('<div id="weather-forecast-secondary" class="component-placeholder"></div>'),i.b("\n"),i.b("\n"+n),i.s(i.f("best-of",t,e,1),t,e,0,141,220,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('<div id="best-of-secondary" class="best-of-list">'),i.b("\n"+n),i.b(i.rp("<promo-group2",t,e,"    ")),i.b("</div>"),i.b("\n"+n)}),t.pop()),i.b("\n"+n),i.s(i.f("follow-us",t,e,1),t,e,0,248,268,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<follow-us3",t,e,"    "))}),t.pop()),i.b("\n"+n),i.b(i.rp("<ad-slot-adsense-all4",t,e,"")),i.b("\n"+n),i.b(i.rp("<ad-slot-mpu-bottom5",t,e,"")),i.fl()},partials:{"<ad-slot-mpu-secondary0":{name:"ad-slot-mpu-secondary",partials:{},subs:{}},"<ad-slot-native-side1":{name:"ad-slot-native-side",partials:{},subs:{}},"<promo-group2":{name:"promo-group",partials:{},subs:{}},"<follow-us3":{name:"follow-us",partials:{},subs:{}},"<ad-slot-adsense-all4":{name:"ad-slot-adsense-all",partials:{},subs:{}},"<ad-slot-mpu-bottom5":{name:"ad-slot-mpu-bottom",partials:{},subs:{}}},subs:{}}),"secondary-content-standard":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b(i.rp("<ad-slot-mpu-secondary0",t,e,"")),i.b("\n"+n),i.b(i.rp("<ad-slot-native-side1",t,e,"")),i.b("\n"+n),i.s(i.f("best-of",t,e,1),t,e,0,66,145,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('<div id="best-of-secondary" class="best-of-list">'),i.b("\n"+n),i.b(i.rp("<promo-group2",t,e,"    ")),i.b("</div>"),i.b("\n"+n)}),t.pop()),i.b("\n"+n),i.s(i.f("follow-us",t,e,1),t,e,0,173,193,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<follow-us3",t,e,"    "))}),t.pop()),i.b("\n"+n),i.b(i.rp("<ad-slot-adsense-all4",t,e,"")),i.b("\n"+n),i.b(i.rp("<ad-slot-mpu-bottom5",t,e,"")),i.fl()},partials:{"<ad-slot-mpu-secondary0":{name:"ad-slot-mpu-secondary",partials:{},subs:{}},"<ad-slot-native-side1":{name:"ad-slot-native-side",partials:{},subs:{}},"<promo-group2":{name:"promo-group",partials:{},subs:{}},"<follow-us3":{name:"follow-us",partials:{},subs:{}},"<ad-slot-adsense-all4":{name:"ad-slot-adsense-all",partials:{},subs:{}},"<ad-slot-mpu-bottom5":{name:"ad-slot-mpu-bottom",partials:{},subs:{}}},subs:{}}),"secondary-content-story-simple":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b(i.rp("<ad-slot-mpu-secondary0",t,e,"")),i.fl()},partials:{"<ad-slot-mpu-secondary0":{name:"ad-slot-mpu-secondary",partials:{},subs:{}}},subs:{}}),"secondary-content-story":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b(i.rp("<ad-slot-mpu-secondary0",t,e,"")),i.b("\n"+n),i.b(i.rp("<ad-slot-native-side1",t,e,"")),i.b("\n"+n),i.b('<div id="related-stories-secondary" class="component-placeholder related-stories"></div>'),i.b("\n"),i.b("\n"+n),i.b('<div class="secondary-content__ad-slot">'),i.b("\n"+n),i.b(i.rp("<ad-slot-infeed2",t,e,"    ")),i.b("</div>"),i.b("\n"),i.b("\n"+n),i.b('<div id="weather-forecast-secondary" class="component-placeholder"></div>'),i.b("\n"),i.b("\n"+n),i.s(i.f("follow-us",t,e,1),t,e,0,306,326,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<follow-us3",t,e,"    "))}),t.pop()),i.b("\n"+n),i.s(i.f("calendar-promo",t,e,1),t,e,0,361,386,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<calendar-promo4",t,e,"    "))}),t.pop()),i.b("\n"),i.b("\n"+n),i.b('<div id="best-of-secondary" class="component-placeholder best-of-list"></div>'),i.b("\n"),i.b("\n"+n),i.b(i.rp("<ad-slot-adsense-all5",t,e,"")),i.b("\n"+n),i.b(i.rp("<ad-slot-mpu-bottom6",t,e,"")),i.fl()},partials:{"<ad-slot-mpu-secondary0":{name:"ad-slot-mpu-secondary",partials:{},subs:{}},"<ad-slot-native-side1":{name:"ad-slot-native-side",partials:{},subs:{}},"<ad-slot-infeed2":{name:"ad-slot-infeed",partials:{},subs:{}},"<follow-us3":{name:"follow-us",partials:{},subs:{}},"<calendar-promo4":{name:"calendar-promo",partials:{},subs:{}},"<ad-slot-adsense-all5":{name:"ad-slot-adsense-all",partials:{},subs:{}},"<ad-slot-mpu-bottom6":{name:"ad-slot-mpu-bottom",partials:{},subs:{}}},subs:{}}),"section-header":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b("<header>"),i.b("\n"+n),i.b('    <div class="section-header">'),i.b("\n"+n),i.b('        <div class="section-title-wrapper">'),i.b("\n"+n),i.b('            <h2 class="section-title">'),i.b(i.v(i.f("title",t,e,0))),i.b("</h2>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</header>"),i.fl()},partials:{},subs:{}}),"series-box":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<h4 class="series-list-title">'),i.b(i.v(i.f("title",t,e,0))),i.b(":</h4>"),i.b("\n"+n),i.b(i.rp("<link-box-list0",t,e,"")),i.fl()},partials:{"<link-box-list0":{name:"link-box-list",partials:{},subs:{}}},subs:{}}),"share-tool-item":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<li class="share-item">'),i.b("\n"+n),i.b('    <div class="share-item-lining">'),i.b("\n"+n),i.b("        <a "),i.b("\n"+n),i.b('            class="share-button '),i.b(i.v(i.f("class",t,e,0))),i.b('"'),i.b("\n"+n),i.b('            href="'),i.b(i.v(i.f("url",t,e,0))),i.b('"'),i.b("\n"+n),i.b('            data-share-destination="'),i.b(i.v(i.f("class",t,e,0))),i.b('"'),i.b("\n"+n),i.b('            data-tracking-id="'),i.b(i.v(i.f("trackingId",t,e,0))),i.b('"'),i.b("\n"+n),i.b('            target="_blank">'),i.b("\n"+n),i.b('            <span class="share-icon-wrapper share-icon-wrapper--social">'),i.b("\n"+n),i.b('                <span class="icon '),i.b(i.v(i.f("icon-class",t,e,0))),i.b('"></span>'),i.b("\n"+n),i.b("            </span>"),i.b("\n"+n),i.b('            <span class="share-item-text">'),i.b(i.v(i.f("text",t,e,0))),i.b("</span>"),i.b("\n"+n),i.sub("share-tool-additional-content",t,e,n),i.b("        </a>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</li>"),i.fl()},partials:{},subs:{"share-tool-additional-content":function(t,e,n,i){}}}),"share-tools-content":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<ul class="share share--mobile '),i.b(i.v(i.f("class",t,e,0))),i.b('">'),i.b("\n"+n),i.s(i.f("shareItemsMobile",t,e,1),t,e,0,64,90,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<share-tool-item0",t,e,"    "))}),t.pop()),i.b("</ul>"),i.b("\n"+n),i.b('<ul class="share share--desktop '),i.b(i.v(i.f("class",t,e,0))),i.b('">'),i.b("\n"+n),i.s(i.f("shareItemsDesktop",t,e,1),t,e,0,184,210,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<share-tool-item1",t,e,"    "))}),t.pop()),i.b("</ul>"),i.fl()},partials:{"<share-tool-item0":{name:"share-tool-item",partials:{},subs:{}},"<share-tool-item1":{name:"share-tool-item",partials:{},subs:{}}},subs:{}}),"share-tools-expandable-button-close":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<span class="share-tools-control-close">'),i.b("\n"+n),i.b('    <button class="share-tools-control-close-button" data-share-close>'),i.b("\n"+n),i.b('        <span class="share-tools-control-close-icon gelicon--no"></span>'),i.b("\n"+n),i.b('        <span class="share-tools-control-close-button-text">Close</span>'),i.b("\n"+n),i.b("    </button>"),i.b("\n"+n),i.b("</span>"),i.fl()},partials:{},subs:{}}),"share-tools-expandable":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="share-tools '),i.b(i.v(i.f("class",t,e,0))),i.b('" data-share aria-labelledby="share-tools-title">'),i.b("\n"+n),i.b('    <h2 id="share-tools-title" class="share-tools-title">'),i.b(i.v(i.f("title",t,e,0))),i.b("</h2>"),i.b("\n"+n),i.b('    <div class="share-tools-content" data-share-content>'),i.b("\n"+n),i.b('        <div class="share-tools-content-wrapper">'),i.b("\n"+n),i.b(i.rp("<share-tools-expandable-button-close0",t,e,"            ")),i.b(i.rp("<share-tools-content1",t,e,"            ")),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b('    <div class="share-tools-controls" data-share-controls>'),i.b("\n"+n),i.b('        <button class="share-tools-control" title="Toggle Share" data-share-toggle>'),i.b("\n"+n),i.b('            <span class="share-tools-control-label">'),i.b(i.v(i.f("title",t,e,0))),i.b("</span>"),i.b("\n"+n),i.b('            <span class="share-tools-control-share gelicon--share"></span>'),i.b("\n"),i.b("\n"+n),i.b('            <span class="share-tools-control-toggle">'),i.b("\n"+n),i.b('                <span class="share-tools-control-toggle-icon"></span>'),i.b("\n"+n),i.b("            </span>"),i.b("\n"+n),i.b("        </button>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{"<share-tools-expandable-button-close0":{name:"share-tools-expandable-button-close",partials:{},subs:{}},"<share-tools-content1":{name:"share-tools-content",partials:{},subs:{}}},subs:{}}),"share-tools":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b(i.rp("<headed-section-start0",t,e,"")),i.b(i.rp("<share-tools-content1",t,e,"    ")),i.b(i.rp("<headed-section-end2",t,e,"")),i.fl()},partials:{"<headed-section-start0":{name:"headed-section-start",partials:{},subs:{}},"<share-tools-content1":{name:"share-tools-content",partials:{},subs:{}},"<headed-section-end2":{name:"headed-section-end",partials:{},subs:{}}},subs:{}}),"slideshow-footer":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div id="fullsized_footer" class="open">'),i.b("\n"+n),i.b('    <a id="fullsized_footer_toggle_wrapper" href="#">'),i.b("\n"+n),i.b('        <span id="fullsize_footer_toggle_text">Hide image caption</span>'),i.b("\n"+n),i.b('        <span id="fullsize_footer_toggle_symbol"></span>'),i.b("\n"+n),i.b("    </a>"),i.b("\n"+n),i.b('    <div id="fullsized_footer_overlay">'),i.b("\n"+n),i.b('        <div id="fullsized_footer_lining">'),i.b("\n"+n),i.b('            <div id="fullsized_caption_wrapper">'),i.b("\n"+n),i.b('                <div id="fullsized_caption_lining">'),i.b("\n"+n),i.b('                    <span class="fullsized_caption_title"></span>'),i.b("\n"+n),i.b('                    <span class="fullsized_caption caption"></span>'),i.b("\n"+n),i.b("                </div>"),i.b("\n"+n),i.b("            </div>"),i.b("\n"+n),i.b('            <div id="fullsized_share_tools_wrapper">'),i.b("\n"+n),i.b('                <div id="fullsized_share_tools"></div>'),i.b("\n"+n),i.b("            </div>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{},subs:{}}),"sg-controls":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="sg-controls" data-sg="controls">'),i.b("\n"+n),i.b(i.rp("<sg-info-button0",t,e,"    ")),i.b(i.rp("<sg-prev-next1",t,e,"    ")),i.s(i.f("share-tools",t,e,1),t,e,0,111,195,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('    <div id="slideshow-gallery-share-tools">'),i.b(i.rp("<share-tools-expandable2",t,e,"")),i.b("</div>"),i.b("\n"+n)}),t.pop()),i.b(i.rp("<sg-progress3",t,e,"    ")),i.b("</div>"),i.fl()},partials:{"<sg-info-button0":{name:"sg-info-button",partials:{},subs:{}},"<sg-prev-next1":{name:"sg-prev-next",partials:{},subs:{}},"<share-tools-expandable2":{name:"share-tools-expandable",partials:{},subs:{}},"<sg-progress3":{name:"sg-progress",partials:{},subs:{}}},subs:{}}),"sg-end-slate-mpu":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="sg-ad-slot sg-ad-slot--end-slate">'),i.b("\n"+n),i.b("    <div data-sg-end-slate-mpu>"),i.b("\n"+n),i.b(i.rp("<ad-slot-mpu-bottom-deferred0",t,e,"        ")),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{"<ad-slot-mpu-bottom-deferred0":{name:"ad-slot-mpu-bottom-deferred",partials:{},subs:{}}},subs:{}}),"sg-end-slate-promo-group-items":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="sg-related-galleries-promo-group '),i.s(i.f("adsEnabled",t,e,1),t,e,0,60,105,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b("sg-related-galleries-promo-group--ads-enabled")}),t.pop()),i.b(" "),i.b(i.v(i.f("class",t,e,0))),i.b('">'),i.b("\n"+n),i.s(i.f("promo-group",t,e,1),t,e,0,149,372,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.s(i.f("items",t,e,1),t,e,0,164,299,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('        <div class="promo-unit-wrapper">'),i.b("\n"+n),i.b("            <article>"),i.b("\n"+n),i.b(i.rp("<promo-unit0",t,e,"             ")),i.b("            </article>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n)}),t.pop()),i.s(i.f("items",t,e,1),t,e,1,0,0,"")||i.b(i.rp("<empty-list-notice1",t,e,"        "))}),t.pop()),i.b("</div>"),i.fl()},partials:{"<promo-unit0":{name:"promo-unit",partials:{},subs:{}},"<empty-list-notice1":{name:"empty-list-notice",partials:{},subs:{}}},subs:{}}),"sg-end-slate-related-galleries":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="sg-related-galleries">'),i.b("\n"+n),i.b('    <div class="sg-related-galleries-wrapper">'),i.b("\n"+n),i.b('        <h2 class="sg-related-galleries-heading">More amazing galleries</h2>'),i.b("\n"+n),i.b('        <div class="sg-related-galleries-content">'),i.b("\n"+n),i.b('            <div class="sg-related-galleries-ad-slot">'),i.b("\n"+n),i.s(i.f("adsEnabled",t,e,1),t,e,0,296,355,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<sg-end-slate-mpu0",t,e,"                    "))}),t.pop()),i.b("            </div>"),i.b("\n"+n),i.s(i.d("related-galleries.groups.group-1",t,e,1),t,e,0,439,504,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<sg-end-slate-promo-group-items1",t,e,"                "))}),t.pop()),i.s(i.d("related-galleries.groups.group-2",t,e,1),t,e,0,591,656,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<sg-end-slate-promo-group-items2",t,e,"                "))}),t.pop()),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{"<sg-end-slate-mpu0":{name:"sg-end-slate-mpu",partials:{},subs:{}},"<sg-end-slate-promo-group-items1":{name:"sg-end-slate-promo-group-items",partials:{},subs:{}},"<sg-end-slate-promo-group-items2":{name:"sg-end-slate-promo-group-items",partials:{},subs:{}}},subs:{}}),"sg-end-slate":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="sg-end-slate" data-sg-slide data-sg-end-slate>'),i.b("\n"+n),i.b('    <div data-sg-slide-contents class="clearfix  sg-end-slate-inner" data-sg-slide-text>'),i.b("\n"+n),i.b(i.rp("<sg-end-slate-related-galleries0",t,e,"        ")),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{"<sg-end-slate-related-galleries0":{name:"sg-end-slate-related-galleries",partials:{},subs:{}}},subs:{}}),"sg-horizontal-banner":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.f("brand-banner",t,e,1),t,e,0,17,35,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<banner0",t,e,"    "))}),t.pop()),i.fl()},partials:{"<banner0":{name:"banner",partials:{},subs:{}}},subs:{}}),"sg-info-button":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<button class="sg-info-button gelicon--info" data-sg-info-button title="Toggle text">'),i.b("\n"+n),i.b('    <span class="sg-info-button-text">Toggle slide info text</span>'),i.b("\n"+n),i.b("</button>"),i.fl()},partials:{},subs:{}}),"sg-main":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div data-sg="main" class="sg-main">'),i.b("\n"+n),i.b(i.rp("<sg-controls0",t,e,"    ")),i.b(i.rp("<sg-start-overlay1",t,e,"    ")),i.b(i.rp("<sg-transition-overlay2",t,e,"    ")),i.b(i.rp("<sg-splash3",t,e,"    ")),i.b(i.rp("<sg-slides4",t,e,"    ")),i.b(i.rp("<sg-end-slate5",t,e,"    ")),i.b("</div>"),i.fl()},partials:{"<sg-controls0":{name:"sg-controls",partials:{},subs:{}},"<sg-start-overlay1":{name:"sg-start-overlay",partials:{},subs:{}},"<sg-transition-overlay2":{name:"sg-transition-overlay",partials:{},subs:{}},"<sg-splash3":{name:"sg-splash",partials:{},subs:{}},"<sg-slides4":{name:"sg-slides",partials:{},subs:{}},"<sg-end-slate5":{name:"sg-end-slate",partials:{},subs:{}}},subs:{}}),"sg-prev-next":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<button class="sg-slide-nav-button sg-slide-nav-button-prev gelicon gelicon--previous is-inactive" data-sg-prev>'),i.b("\n"+n),i.b('    <span class="sg-slide-nav-button-text">Previous slide</span>'),i.b("\n"+n),i.b("</button>"),i.b("\n"+n),i.b('<button class="sg-slide-nav-button sg-slide-nav-button-next gelicon gelicon--next is-inactive" data-sg-next>'),i.b("\n"+n),i.b('    <span class="sg-slide-nav-button-text">Next slide</span>'),i.b("\n"+n),i.b("</button>"),i.fl()},partials:{},subs:{}}),"sg-progress":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<span role="progressbar" class="sg-progress" data-sg-progress id="slide-info">'),i.b("\n"+n),i.b('    <span class="visually-hidden">Slide</span>'),i.b("\n"+n),i.b("    <span data-sg-progress-index></span>"),i.b("\n"+n),i.b('    <span class="visually-hidden">of</span>'),i.b("\n"+n),i.b('    <span class="sg-progress-total" data-sg-progress-total></span>'),i.b("\n"+n),i.b("</span>"),i.fl()},partials:{},subs:{}}),"sg-share-tools-button-close":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<span class="sg-share-tools-control-close">'),i.b("\n"+n),i.b('    <button class="sg-share-tools-control-close-button" data-sg-share-close>'),i.b("\n"+n),i.b('        <span class="sg-share-tools-control-close-icon gelicon--no"></span>'),i.b("\n"+n),i.b('        <span class="sg-share-tools-control-close-button-text">Close</span>'),i.b("\n"+n),i.b("    </button>"),i.b("\n"+n),i.b("</span>"),i.fl()},partials:{},subs:{}}),"sg-share-tools-content":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<ul class="share share--mobile '),i.b(i.v(i.f("class",t,e,0))),i.b('">'),i.b("\n"+n),i.s(i.f("shareItemsMobile",t,e,1),t,e,0,64,90,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<share-tool-item0",t,e,"    "))}),t.pop()),i.b("</ul>"),i.b("\n"),i.b("\n"+n),i.b('<ul class="share share--desktop '),i.b(i.v(i.f("class",t,e,0))),i.b('">'),i.b("\n"+n),i.s(i.f("shareItemsDesktop",t,e,1),t,e,0,185,211,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<share-tool-item1",t,e,"    "))}),t.pop()),i.b("</ul>"),i.fl()},partials:{"<share-tool-item0":{name:"share-tool-item",partials:{},subs:{}},"<share-tool-item1":{name:"share-tool-item",partials:{},subs:{}}},subs:{}}),"sg-share-tools":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.f("share-tools",t,e,1),t,e,0,16,997,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('    <div class="sg-share-tools" data-sg-share aria-labelledby="share-tools-title" id="slideshow-gallery-share-tools">'),i.b("\n"+n),i.b('        <h2 id="share-tools-title" class="sg-share-tools-title">'),i.b(i.v(i.f("title",t,e,0))),i.b("</h2>"),i.b("\n"+n),i.b('        <div class="sg-share-tools-content" data-sg-share-content>'),i.b("\n"+n),i.b('            <div class="sg-share-tools-content-wrapper">'),i.b("\n"+n),i.b(i.rp("<sg-share-tools-button-close0",t,e,"                ")),i.b(i.rp("<sg-share-tools-content1",t,e,"                ")),i.b("            </div>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b('        <div class="sg-share-tools-controls" data-sg-share-controls>'),i.b("\n"+n),i.b('            <button class="sg-share-tools-control" title="Toggle Share" data-sg-share-toggle>'),i.b("\n"+n),i.b('                <span class="sg-share-tools-control-label">'),i.b(i.v(i.f("title",t,e,0))),i.b("</span>"),i.b("\n"+n),i.b('                <span class="sg-share-tools-control-share gelicon--share"></span>'),i.b("\n"),i.b("\n"+n),i.b('                <span class="sg-share-tools-control-toggle">'),i.b("\n"+n),i.b('                    <span class="sg-share-tools-control-toggle-icon"></span>'),i.b("\n"+n),i.b("                </span>"),i.b("\n"+n),i.b("            </button>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n)}),t.pop()),i.fl()},partials:{"<sg-share-tools-button-close0":{name:"sg-share-tools-button-close",partials:{},subs:{}},"<sg-share-tools-content1":{name:"sg-share-tools-content",partials:{},subs:{}}},subs:{}}),"sg-slide-ambient-video":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.f("ambientVideo",t,e,1),t,e,0,17,291,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('    <video class="sg-ambient-video hidden" data-ambient-video'),i.b("\n"+n),i.b("           loop"),i.b("\n"+n),i.b("           mute"),i.b("\n"+n),
i.b('           preload="none"'),i.b("\n"+n),i.b('           poster="'),i.b(i.v(i.f("placeholderImageURL",t,e,0))),i.b('">'),i.b("\n"+n),i.s(i.f("formats",t,e,1),t,e,0,203,265,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('            <source src="'),i.b(i.v(i.f("URL",t,e,0))),i.b('" type="'),i.b(i.v(i.f("Format",t,e,0))),i.b('">'),i.b("\n"+n)}),t.pop()),i.b("    </video>"),i.b("\n"+n)}),t.pop()),i.fl()},partials:{},subs:{}}),"sg-slide-image-background":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="sg-slide-background-wrapper">'),i.b("\n"+n),i.b('    <div class="sg-slide-background '),i.s(i.f("is-portrait",t,e,1),t,e,0,94,122,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b("sg-slide-background-portrait")}),t.pop()),i.b(" "),i.s(i.f("is-portrait",t,e,1),t,e,1,0,0,"")||i.b("sg-slide-background-landscape"),i.b('" data-sg-full-height>'),i.b("\n"+n),i.b('        <div data-src="'),i.b(i.v(i.f("url",t,e,0))),i.b('" class="sg-slide-background-image" data-fixed-width-format="'),i.b(i.v(i.f("fixed-width-format",t,e,0))),i.b('" data-lazy-load="true" data-background '),i.s(i.f("is-portrait",t,e,1),t,e,0,392,405,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b("data-portrait")}),t.pop()),i.s(i.f("is-portrait",t,e,1),t,e,1,0,0,"")||i.b("data-landscape"),i.b("></div>"),i.b("\n"+n),i.b(i.rp("<sg-slide-ambient-video0",t,e,"        ")),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{"<sg-slide-ambient-video0":{name:"sg-slide-ambient-video",partials:{},subs:{}}},subs:{}}),"sg-slide-image-inline":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="sg-slide-inline-image  '),i.s(i.f("is-portrait",t,e,1),t,e,0,51,83,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b("sg-slide-inline-image--portrait ")}),t.pop()),i.b('" data-sg="inline-image">'),i.b("\n"+n),i.b('    <div class="sg-slide-inline-image-wrapper">'),i.b("\n"+n),i.b('        <div class="sg-slide-inline-image-responsive-box responsive-box '),i.s(i.f("is-portrait",t,e,1),t,e,0,261,291,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b("responsive-box--portrait-wide ")}),t.pop()),i.b(" "),i.s(i.f("is-portrait",t,e,1),t,e,1,0,0,"")||i.b("responsive-box--landscape"),i.b('">'),i.b("\n"+n),i.b('            <div class="responsive-box__content">'),i.b("\n"+n),i.b(i.rp("<responsive-image-tag0",t,e,"                ")),i.b("            </div>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b(i.rp("<caption1",t,e,"    ")),i.b("</div>"),i.fl()},partials:{"<responsive-image-tag0":{name:"responsive-image-tag",partials:{},subs:{}},"<caption1":{name:"caption",partials:{},subs:{}}},subs:{}}),"sg-slide-image":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.f("image",t,e,1),t,e,0,10,77,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<sg-slide-image-inline0",t,e,"    ")),n.b(n.rp("<sg-slide-image-background1",t,e,"    "))}),t.pop()),i.fl()},partials:{"<sg-slide-image-inline0":{name:"sg-slide-image-inline",partials:{},subs:{}},"<sg-slide-image-background1":{name:"sg-slide-image-background",partials:{},subs:{}}},subs:{}}),"sg-slide-layout-image-only":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b(i.rp("<sg-slide-image0",t,e,"")),i.fl()},partials:{"<sg-slide-image0":{name:"sg-slide-image",partials:{},subs:{}}},subs:{}}),"sg-slide-layout-overlay":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b(i.rp("<sg-slide-image0",t,e,"")),i.b("\n"+n),i.b('<div class="sg-slide-content-wrap  sg-slide-overlay-content-wrap" data-sg-slide-text>'),i.b("\n"+n),i.b('    <div class="sg-slide-content clearfix" data-sg-slide-contents>'),i.b("\n"+n),i.b('        <div class="sg-slide-inner sg-slide-overlay-content">'),i.b("\n"+n),i.b('            <div class="sg-slide-inner-lining">'),i.b("\n"+n),i.b('                <div class="sg-slide-overlay-content-holder" id="slide-label-'),i.b(i.v(i.f("slideIndex",t,e,0))),i.b('">'),i.b("\n"+n),i.b("                    "),i.b(i.t(i.f("body",t,e,0))),i.b("\n"+n),i.b("                </div>"),i.b("\n"+n),i.b("            </div>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{"<sg-slide-image0":{name:"sg-slide-image",partials:{},subs:{}}},subs:{}}),"sg-slide-layout-sidebar":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b(i.rp("<sg-slide-image0",t,e,"")),i.b("\n"+n),i.b('<div class="sg-slide-content-wrap">'),i.b("\n"+n),i.b('    <div class="sg-slide-content-wrap-inner" data-sg-full-height>'),i.b("\n"+n),i.b('        <div class="sg-slide-content sg-slide-sidebar-content" data-sg-slide-text>'),i.b("\n"+n),i.b('            <div class="sg-slide-inner sg-slide-sidebar-inner">'),i.b("\n"+n),i.b('                <div class="sg-slide-inner-lining sg-slide-sidebar-inner-lining">'),i.b("\n"+n),i.b('                    <h2 class="sg-slide-sidebar-title" id="slide-label-'),i.b(i.v(i.f("slideIndex",t,e,0))),i.b('">'),i.b(i.v(i.f("title",t,e,0))),i.b("</h2>"),i.b("\n"+n),i.b("                    "),i.b(i.t(i.f("body",t,e,0))),i.b("\n"+n),i.b("                </div>"),i.b("\n"+n),i.b("            </div>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{"<sg-slide-image0":{name:"sg-slide-image",partials:{},subs:{}}},subs:{}}),"sg-slide-layout-video":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.f("video",t,e,1),t,e,0,10,35,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<sg-slide-video0",t,e,"    "))}),t.pop()),i.fl()},partials:{"<sg-slide-video0":{name:"sg-slide-video",partials:{},subs:{}}},subs:{}}),"sg-slide-video-caption":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="sg-slide-video-caption">'),i.b("\n"+n),i.b('    <div class="sg-slide-video-caption-lining">'),i.b("\n"+n),i.s(i.f("title",t,e,1),t,e,0,103,193,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('            <h2 class="sg-slide-video-caption-text caption-title">'),i.b(i.v(i.f("title",t,e,0))),i.b("</h2>"),i.b("\n"+n)}),t.pop()),i.b('        <div class="sg-slide-video-caption-text caption-body">'),i.b(i.t(i.f("body",t,e,0))),i.b("</div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{},subs:{}}),"sg-slide-video":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="sg-slide-video" data-sg-video>'),i.b("\n"+n),i.b('    <div class="sg-slide-video-wrapper" data-sg-slide-contents>'),i.b("\n"+n),i.b(i.rp("<stand-alone-video-element0",t,e,"        ")),i.b(i.rp("<sg-slide-video-caption1",t,e,"        ")),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{"<stand-alone-video-element0":{name:"stand-alone-video-element",partials:{},subs:{}},"<sg-slide-video-caption1":{name:"sg-slide-video-caption",partials:{},subs:{}}},subs:{}}),"sg-slides":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="sg-slides">'),i.b("\n"+n),i.s(i.f("slides",t,e,1),t,e,0,39,1130,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.s(i.f("content",t,e,1),t,e,0,60,1113,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b("        <div"),i.b("\n"+n),i.b('            class="sg-slides-item"'),i.b("\n"+n),i.b("            data-sg-slide"),i.b("\n"+n),i.b("            data-sg-content-slide"),i.b("\n"+n),i.b('            data-sg-slide-text-color="'),i.b(i.v(i.f("textColor",t,e,0))),i.b('"'),i.b("\n"+n),i.b('            data-sg-slide-type="'),i.b(i.v(i.f("layoutOption",t,e,0))),i.b('"'),i.b("\n"+n),i.s(i.f("ambientVideo",t,e,1),t,e,0,301,362,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b("                data-sg-slide-has-ambient-video"),i.b("\n"+n)}),t.pop()),i.b('            aria-labelledby="slide-info slide-label-'),i.b(i.v(i.f("slideIndex",t,e,0))),i.b('">'),i.b("\n"+n),i.b('            <div class="sg-slide sg-slide-'),i.b(i.v(i.f("layoutOption",t,e,0))),i.b(" sg-slide-"),i.b(i.v(i.f("textColor",t,e,0))),i.b('" data-sg-full-height data-sg-info-content>'),i.b("\n"+n),i.s(i.f("useOverlayLayout",t,e,1),t,e,0,611,677,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<sg-slide-layout-overlay0",t,e,"                    "))}),t.pop()),i.s(i.f("useSidebarLayout",t,e,1),t,e,0,736,802,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<sg-slide-layout-sidebar1",t,e,"                    "))}),t.pop()),i.s(i.f("useVideoLayout",t,e,1),t,e,0,859,923,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<sg-slide-layout-video2",t,e,"                    "))}),t.pop()),i.s(i.f("useDefaultLayout",t,e,1),t,e,0,980,1049,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<sg-slide-layout-image-only3",t,e,"                    "))}),t.pop()),i.b("            </div>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n)}),t.pop())}),t.pop()),i.b("</div>"),i.fl()},partials:{"<sg-slide-layout-overlay0":{name:"sg-slide-layout-overlay",partials:{},subs:{}},"<sg-slide-layout-sidebar1":{name:"sg-slide-layout-sidebar",partials:{},subs:{}},"<sg-slide-layout-video2":{name:"sg-slide-layout-video",partials:{},subs:{}},"<sg-slide-layout-image-only3":{name:"sg-slide-layout-image-only",partials:{},subs:{}}},subs:{}}),"sg-spinner":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="sg-spinner">'),i.b("\n"+n),i.b('    <svg class="sg-spinner-svg" xmlns="http://www.w3.org/2000/svg">'),i.b("\n"+n),i.b('        <circle stroke-width="12%" r="44%" cx="50%" cy="50%" class="sg-spinner-svg-circle" />'),i.b("\n"+n),i.b("    </svg>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{},subs:{}}),"sg-splash-primary":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="sg-splash-primary">'),i.b("\n"),i.b("\n"+n),i.b('    <div class="sg-splash-column-lining">'),i.b("\n"),i.b("\n"+n),i.s(i.f("title",t,e,1),t,e,0,94,158,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('            <h1 class="sg-splash-title">'),i.b(i.v(i.f("title",t,e,0))),i.b("</h1>"),i.b("\n"+n)}),t.pop()),i.b("\n"+n),i.b('        <div class="sg-splash-attribution">'),i.b("\n"+n),i.s(i.f("author",t,e,1),t,e,0,237,318,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                <span class="sg-splash-author">By '),i.b(i.v(i.f("author",t,e,0))),i.b("</span>"),i.b("\n"+n)}),t.pop()),i.s(i.f("display-date",t,e,1),t,e,0,359,441,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                <span class="sg-splash-date">'),i.b(i.v(i.f("display-date",t,e,0))),i.b("</span>"),i.b("\n"+n)}),t.pop()),i.b("        </div>"),i.b("\n"),i.b("\n"+n),i.b('        <div class="sg-splash-sponsor">'),i.b("\n"+n),i.b('            <div class="sg-splash-sponsor__inner">'),i.b("\n"+n),i.b(i.rp("<ad-slot-sponsor-section-primary0",t,e,"            ")),i.b("            </div>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"),i.b("\n"+n),i.s(i.f("summary",t,e,1),t,e,0,670,736,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('            <p class="sg-splash-intro">'),i.b(i.t(i.f("summary",t,e,0))),i.b("</p>"),i.b("\n"+n)}),t.pop()),i.b("\n"+n),i.b(i.rp("<sg-splash-start1",t,e,"        ")),i.b(i.rp("<sg-splash-scroll2",t,e,"        ")),i.b("\n"+n),i.b("    </div>"),i.b("\n"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{"<ad-slot-sponsor-section-primary0":{name:"ad-slot-sponsor-section-primary",partials:{},subs:{}},"<sg-splash-start1":{name:"sg-splash-start",partials:{},subs:{}},"<sg-splash-scroll2":{name:"sg-splash-scroll",partials:{},subs:{}}},subs:{}}),"sg-splash-scroll":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<span class="sg-splash-scroll">'),i.b("\n"+n),i.b('    <span class="sg-splash-scroll-text">Scroll to view the gallery</span>'),i.b("\n"+n),i.b('    <span class="sg-splash-scroll-icon gelicon gelicon--down"></span>'),i.b("\n"+n),i.b("</span>"),i.fl()},partials:{},subs:{}}),"sg-splash-secondary":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="sg-splash-secondary">'),i.b("\n"+n),i.b('    <div class="sg-splash-column-lining">'),i.b("\n"+n),i.b('        <div class="sg-splash-secondary-content">'),i.b("\n"+n),i.s(i.f("adsEnabled",t,e,1),t,e,0,153,312,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('            <div class="sg-ad-slot sg-ad-slot--splash-desktop sg-ad-slot--desktop">'),i.b("\n"+n),i.b(i.rp("<ad-slot-mpu-secondary0",t,e,"                ")),i.b("            </div>"),i.b("\n"+n)}),t.pop()),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{"<ad-slot-mpu-secondary0":{name:"ad-slot-mpu-secondary",partials:{},subs:{}}},subs:{}}),"sg-splash-start":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<button class="sg-splash-start" data-sg-start aria-labelledby="splash-start-label">'),i.b("\n"+n),i.b('    <span class="sg-splash-start-label" id="splash-start-label">Start the gallery</span>'),i.b("\n"+n),i.b('    <span class="sg-splash-start-icon gelicon gelicon--next"></span>'),i.b("\n"+n),i.b("</button>"),i.fl()},partials:{},subs:{}}),"sg-splash":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="sg-splash" data-sg-slide data-sg-full-height>'),i.b("\n"),i.b("\n"+n),i.b('    <div class="sg-splash-inner" data-sg-full-height>'),i.b("\n"),i.b("\n"+n),i.b('        <div data-sg-slide-text class="sg-splash-content">'),i.b("\n"),i.b("\n"+n),i.b('            <div class="sg-splash-content-inner">'),i.b("\n"+n),i.s(i.f("image",t,e,1),t,e,0,250,453,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                <div data-src="'),i.b(i.v(i.f("url",t,e,0))),i.b('" class="sg-splash-background" data-background data-background-splash data-lazy-load="true" data-fixed-width-format="'),i.b(i.v(i.f("fixed-width-format",t,e,0))),i.b('"></div>'),i.b("\n"+n)}),t.pop()),i.b("\n"+n),i.b('                <div class="page-component-wrapper">'),i.b("\n"+n),i.b('                    <div class="sg-splash-wrapper" data-sg-slide-contents>'),i.b("\n"+n),i.b(i.rp("<sg-splash-primary0",t,e,"                        ")),i.b(i.rp("<sg-splash-secondary1",t,e,"                        ")),i.b("                    </div>"),i.b("\n"+n),i.b("                </div>"),i.b("\n"+n),i.b("            </div>"),i.b("\n"),i.b("\n"+n),i.b('            <div class="sg-splash-footer" data-sg-slide-contents>'),i.b("\n"+n),i.s(i.f("domestic-messaging-inline",t,e,1),t,e,0,871,929,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<domestic-header2",t,e,"                    "))}),t.pop()),i.s(i.f("brand-banner",t,e,1),t,e,0,993,1043,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<banner3",t,e,"                    "))}),t.pop()),i.b("            </div>"),i.b("\n"),i.b("\n"+n),i.b("        </div>"),i.b("\n"),i.b("\n"+n),i.b("    </div>"),i.b("\n"),i.b("\n"+n),i.s(i.f("adsEnabled",t,e,1),t,e,0,1128,1257,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('    <div class="sg-ad-slot sg-ad-slot--mobile sg-ad-slot--interstitial-mobile">'),i.b("\n"+n),i.b(i.rp("<ad-slot-mpu-primary4",t,e,"        ")),i.b("    </div>"),i.b("\n"+n)}),t.pop()),i.b("</div>"),i.fl()},partials:{"<sg-splash-primary0":{name:"sg-splash-primary",partials:{},subs:{}},"<sg-splash-secondary1":{name:"sg-splash-secondary",partials:{},subs:{}},"<domestic-header2":{name:"domestic-header",partials:{},subs:{}},"<banner3":{name:"banner",partials:{},subs:{}},"<ad-slot-mpu-primary4":{name:"ad-slot-mpu-primary",partials:{},subs:{}}},subs:{}}),"sg-start-overlay":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="sg-start-overlay" data-sg-start-overlay>'),i.b("\n"+n),i.b('    <div class="sg-start-overlay-loader">'),i.b("\n"+n),i.b(i.rp("<sg-spinner0",t,e,"        ")),i.b('        <span class="sg-start-overlay-loader-text">Loading gallery...</span>'),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{"<sg-spinner0":{name:"sg-spinner",partials:{},subs:{}}},subs:{}}),"sg-transition-overlay":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="sg-transition-overlay" data-sg-transition-overlay>'),i.b("\n"+n),i.b('    <div class="sg-transition-overlay-loader">'),i.b("\n"+n),i.b(i.rp("<sg-spinner0",t,e,"        ")),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{"<sg-spinner0":{name:"sg-spinner",partials:{},subs:{}}},subs:{}}),"app-cta":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="app-cta">'),i.b("\n"),i.b("\n"+n),i.b('    <h2 class="app-cta__title  app-cta__title--mobile-only">Create your own life story</h2>'),i.b("\n"+n),i.b('    <h2 class="app-cta__title  app-cta__title--tablet-only"></h2>'),i.b("\n"+n),i.b('    <h2 class="app-cta__title  app-cta__title--desktop-only"></h2>'),i.b("\n"),i.b("\n"+n),i.b('    <ul class="app-cta__buttons">'),i.b("\n"+n),i.b('        <li class="app-cta__buttons__item">'),i.b("\n"+n),i.b(i.rp("<button-google-play0",t,e,"            ")),i.b("        </li>"),i.b("\n"+n),i.b('        <li class="app-cta__buttons__item">'),i.b("\n"+n),i.b(i.rp("<button-app-store1",t,e,"            ")),i.b("        </li>"),i.b("\n"+n),i.b("    </ul>"),i.b("\n"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{"<button-google-play0":{name:"button-google-play",partials:{},subs:{}},"<button-app-store1":{name:"button-app-store",partials:{},subs:{}}},subs:{}}),"app-download":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="app-download">'),i.b("\n"+n),i.b('    <h1 class="app-download__title">'),i.b("\n"+n),i.b('        <span class="app-download__title-line1">'),i.s(i.f("catch-page",t,e,1),t,e,0,127,139,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.v(n.f("headline",t,e,0)))}),t.pop()),i.b("</span>"),i.b("\n"+n),i.b('        <span class="app-download__title-line2">'),i.s(i.f("catch-page",t,e,1),t,e,0,225,241,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.v(n.f("sub-headline",t,e,0)))}),t.pop()),i.b("</span>"),i.b("\n"+n),i.b('        <img class="app-download__title-signature" src="'),i.s(i.f("catch-page",t,e,1),t,e,0,335,371,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.v(n.f("attenborough-signature-image-url",t,e,0)))}),t.pop()),i.b('"/>'),i.b("\n"+n),i.b("    </h1>"),i.b("\n"),i.b("\n"+n),i.s(i.d("meta-data.advertising.adSlots.sponsor_section",t,e,1),t,e,0,455,608,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('        <div class="app-download__ad">'),i.b("\n"+n),i.b("            <h3>in association with</h3>"),i.b("\n"+n),i.b('            <div class="app-download__adslot"></div>'),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n)}),t.pop()),i.b("\n"+n),i.b('    <p class="app-download__content">'),i.s(i.f("catch-page",t,e,1),t,e,0,712,726,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.v(n.f("intro-copy",t,e,0)))}),t.pop()),i.b("</p>"),i.b("\n"),i.b("\n"+n),i.b('    <div class="app-download__cta">'),i.b("\n"+n),i.b(i.rp("<app-cta0",t,e,"        ")),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{"<app-cta0":{name:"app-cta",partials:{},subs:{}}},subs:{}}),"button-app-store":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<a class="button-app-store" target="_blank" href="'),i.s(i.f("catch-page",t,e,1),t,e,0,65,82,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.v(n.f("app-store-url",t,e,0)))}),t.pop()),i.b('">'),i.b("\n"+n),i.b('    <img class="button-image" alt="Download on the App Store" src="'),i.s(i.f("catch-page",t,e,1),t,e,0,182,212,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.v(n.f("app-store-button-image-url",t,e,0)))}),t.pop()),i.b('" />'),i.b("\n"+n),i.b("</a>"),i.fl()},partials:{},subs:{}}),"button-google-play":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<a class="button-google-play" target="_blank" href="'),i.s(i.f("catch-page",t,e,1),t,e,0,67,86,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.v(n.f("google-play-url",t,e,0)))}),t.pop()),i.b('">'),i.b("\n"+n),i.b('    <img class="button-image" alt="Get it on Google Play" src="'),i.s(i.f("catch-page",t,e,1),t,e,0,182,214,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.v(n.f("google-play-button-image-url",t,e,0)))}),t.pop()),i.b('" />'),i.b("\n"+n),i.b("</a>"),i.fl()},partials:{},subs:{}}),catch:new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="catch">'),i.b("\n"+n),i.s(i.d("meta-data.meta-tags.image",t,e,1),t,e,0,54,141,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('        <img class="catch__pinterest-image" src="'),i.b(i.v(i.f("url",t,e,0))),i.b('" width="0" height="0" />'),i.b("\n"+n)}),t.pop()),i.b('    <div class="catch__background desktop" style="background-image: url(\''),i.s(i.f("catch-page",t,e,1),t,e,0,260,281,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.v(n.f("desktop-image-url",t,e,0)))}),t.pop()),i.b("')\"></div>"),i.b("\n"+n),i.b('    <div class="catch__background tablet" style="background-image: url(\''),i.s(i.f("catch-page",t,e,1),t,e,0,394,414,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.v(n.f("tablet-image-url",t,e,0)))}),t.pop()),i.b("')\"></div>"),i.b("\n"+n),i.b('    <div class="catch__background mobile" style="background-image: url(\''),i.s(i.f("catch-page",t,e,1),t,e,0,527,547,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.v(n.f("mobile-image-url",t,e,0)))}),t.pop()),i.b("')\"></div>"),i.b("\n"+n),i.b('    <div class="catch__primary">'),i.b("\n"+n),i.b('        <div class="catch-primary__inner">'),i.b("\n"+n),i.b(i.rp("<app-download0",t,e,"            ")),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b('    <div class="catch__footer">'),i.b("\n"+n),i.b('        <div class="catch__footer__inner">'),i.b("\n"+n),i.s(i.f("continue-promo",t,e,1),t,e,0,811,860,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<continue-promo1",t,e,"                "))}),t.pop()),i.s(i.f("domestic-messaging-inline",t,e,1),t,e,0,922,972,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<domestic-header2",t,e,"                "))}),t.pop()),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{"<app-download0":{name:"app-download",partials:{},subs:{}},"<continue-promo1":{name:"continue-promo",partials:{},subs:{}},"<domestic-header2":{name:"domestic-header",partials:{},subs:{}}},subs:{}}),"continue-promo":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.f("URL",t,e,1),t,e,0,8,630,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('    <a class="continue-promo" href="'),i.b(i.v(i.f("URL",t,e,0))),i.b('">'),i.b("\n"+n),i.b('        <div class="continue-promo__content-col">'),i.b("\n"+n),i.b('            <div class="continue-promo__content-wrap">'),i.b("\n"+n),i.b('                <span class="continue-promo__title continue-promo__title1">Continue to watch</span>'),i.b("\n"+n),i.b('                <span class="continue-promo__title continue-promo__title2">'),i.b(i.v(i.f("title",t,e,0))),i.b("</span>"),i.b("\n"+n),i.s(i.f("image",t,e,1),t,e,0,378,576,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                    <span class="continue-promo__image"><img src="'),i.b(i.v(i.f("url",t,e,0))),i.b('" alt="'),i.b(i.v(i.f("title",t,e,0))),i.b('" '),i.s(i.f("pinterest-image",t,e,1),t,e,0,490,530,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b('data-pin-media="'),n.b(n.v(n.d("pinterest-image.url",t,e,0))),n.b('"')}),t.pop()),i.b("/></span>"),i.b("\n"+n)}),t.pop()),i.b("            </div>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("    </a>"),i.b("\n"+n)}),t.pop()),i.fl()},partials:{},subs:{}}),"source-attribution":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="byline">'),i.b("\n"+n),i.b('    <span class="byline-heading"></span>'),i.b("\n"+n),i.b('        <div class="source-attribution-wrapper">'),i.b("\n"+n),i.s(i.d("author.avatar",t,e,1),t,e,0,137,586,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('        <div class="source-attribution-image-wrapper">'),i.b("\n"+n),i.b('            <div class="source-attribution-image">'),i.b("\n"+n),i.b('            <img data-fixed-width-format="'),i.b(i.v(i.f("fixed-width-format",t,e,0))),i.b('"'),i.b("\n"+n),i.b('               title="'),i.b(i.v(i.f("alt",t,e,0))),i.b('"'),i.b("\n"+n),i.b('               alt="'),i.b(i.v(i.f("alt",t,e,0))),i.b('"'),i.b("\n"+n),i.b('               class="'),i.b(i.v(i.f("class",t,e,0))),i.b('"'),i.b("\n"+n),i.b('               data-caption="'),i.b(i.v(i.f("caption",t,e,0))),i.b('"'),i.b("\n"+n),i.b('               data-caption-title="'),i.b(i.v(i.f("caption-title",t,e,0))),i.b('"'),i.b("\n"+n),i.b('               src="'),i.b(i.v(i.f("url",t,e,0))),i.b('"'),i.b("\n"+n),i.b("            />"),i.b("\n"),i.b("\n"+n),i.b("            </div>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n)}),t.pop()),i.b('        <div class="source-attribution-detail" >'),i.b("\n"),i.b("\n"+n),i.b('        <ul class="seperated-list source-attribution">'),i.b("\n"+n),i.s(i.f("author",t,e,1),t,e,0,733,869,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                <li class="seperated-list-item source-attribution-author"><span class="index-body">By '),i.b(i.v(i.f("name",t,e,0))),i.b("</span></li>"),i.b("\n"+n)}),t.pop()),i.s(i.f("partner",t,e,1),t,e,0,905,1076,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                <li class="seperated-list-item source-attribution-partner"><span class="partner-attribution">From <a href="'),i.b(i.v(i.f("URL",t,e,0))),i.b('">'),i.b(i.v(i.f("title",t,e,0))),i.b("</a></span></li>"),i.b("\n"+n)}),t.pop()),i.b("        </ul>"),i.b("\n"),i.b("\n"+n),i.s(i.f("publication-date",t,e,1),t,e,0,1129,1212,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('        <span class="publication-date index-body">'),i.b(i.v(i.f("publication-date",t,e,0))),i.b("</span>"),i.b("\n"+n)}),t.pop()),i.b("    </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.b("\n"),i.fl()},partials:{},subs:{}}),"standard-image-tag":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<img    class="'),i.b(i.v(i.f("class",t,e,0))),i.b('"'),i.b("\n"+n),i.b('        src="'),i.b(i.v(i.f("url",t,e,0))),i.b('"'),i.b("\n"+n),i.b('        title="'),i.b(i.v(i.f("alt",t,e,0))),i.b('"'),i.b("\n"+n),i.b('        alt="'),i.b(i.v(i.f("alt",t,e,0))),i.b('"'),i.b("\n"+n),i.b("        />"),i.fl()},partials:{},subs:{}}),"start-end-date":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<span class="calendar-icon"></span>'),i.b("\n"+n),i.b('<div class="date-item-group">'),i.b("\n"+n),i.s(i.f("start-date",t,e,1),t,e,0,85,104,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<date0",t,e,"    "))}),t.pop()),i.b('    <div class="date-item-divider"></div>'),i.b("\n"+n),i.s(i.f("end-date",t,e,1),t,e,0,179,198,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<date1",t,e,"    "))}),t.pop()),i.b("</div>"),i.b("\n"),i.fl()},partials:{"<date0":{name:"date",partials:{},subs:{}},"<date1":{name:"date",partials:{},subs:{}}},subs:{}}),"story-content":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b("\x3c!-- story start --\x3e"),i.b("\n"+n),i.b('<div class="primary-content-lining">'),i.b("\n"+n),i.b("    \x3c!-- top-unit start --\x3e"),i.b("\n"+n),i.b('    <div class="top-unit">'),i.b("\n"+n),i.s(i.f("heading",t,e,1),t,e,0,133,170,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<primary-header0",t,e,"        "))}),t.pop()),i.b("\n"+n),i.b(i.rp("<intro1",t,e,"        ")),i.b('        <div id="share-tools-top">'),i.b("\n"+n),i.s(i.f("shareTools",t,e,1),t,e,0,265,307,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<share-tools2",t,e,"            "))}),t.pop()),i.b("        </div>"),i.b("\n"+n),i.s(i.f("assetCustom",t,e,1),t,e,0,362,397,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<custom-embed3",t,e,"        "))}),t.pop()),i.b("    </div>"),i.b("\n"+n),i.b("    \x3c!-- top-unit end --\x3e"),i.b("\n"+n),i.b("    \x3c!-- mid-unit start --\x3e"),i.b("\n"+n),i.b('    <div class="mid-unit"> </div>'),i.b("\n"+n),i.b("    \x3c!-- mid-unit end --\x3e"),i.b("\n"+n),i.b("    \x3c!-- bottom-unit start --\x3e"),i.b("\n"+n),i.b('    <div class="bottom-unit">'),i.b("\n"+n),i.b(i.rp("<source-attribution4",t,e,"        ")),i.b("\n"+n),i.b(i.rp("<infographic5",t,e,"        ")),i.b("\n"+n),i.b('        <div class="body-content">'),i.b("\n"+n),i.b("            "),i.b(i.t(i.f("body",t,e,0))),i.b("\n"+n),i.b("        </div>"),i.b("\n"),i.b("\n"+n),i.s(i.f("partner",t,e,1),t,e,0,753,793,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<partner-promo6",t,e,"            "))}),t.pop()),i.b("    </div>"),i.b("\n"+n),i.b("    \x3c!-- bottom-unit end --\x3e"),i.b("\n"+n),i.b('    <div class="clearfix"></div>'),i.b("\n"+n),i.b("    <section>"),i.b("\n"+n),i.b('        <div id="share-tools-bottom"></div>'),i.b("\n"+n),i.b("    </section>"),i.b("\n"+n),i.b("</div>"),i.b("\n"+n),i.b("        \x3c!-- story end --\x3e"),i.fl()},partials:{"<primary-header0":{name:"primary-header",partials:{},subs:{}},"<intro1":{name:"intro",partials:{},subs:{}},"<share-tools2":{name:"share-tools",partials:{},subs:{}},"<custom-embed3":{name:"custom-embed",partials:{},subs:{}},"<source-attribution4":{name:"source-attribution",partials:{},subs:{}},"<infographic5":{name:"infographic",partials:{},subs:{}},"<partner-promo6":{name:"partner-promo",partials:{},subs:{}}},subs:{}}),"story-page-related-footer":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="page-component-wrapper">'),i.b("\n"+n),i.b('    <div class="single-column">'),i.b("\n"+n),i.b('        <div class="primary-content" >'),i.b("\n"+n),i.s(i.f("related-stories",t,e,1),t,e,0,140,186,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<promo-group0",t,e,"                "))}),t.pop()),i.s(i.f("related-stories",t,e,1),t,e,1,0,0,"")||(i.b('                <div id="related-stories-primary" class="component-placeholder related-stories"></div>'),i.b("\n"+n)),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.b("\n"+n),i.b(i.rp("<more-amazing-stories1",t,e,"")),i.fl()},partials:{"<promo-group0":{name:"promo-group",partials:{},subs:{}},"<more-amazing-stories1":{name:"more-amazing-stories",partials:{},subs:{}}},subs:{}}),"super-section-ad-slot-mpu-primary":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.d("meta-data.advertising.adSlots.mpu-1_2_3",t,e,1),t,e,0,44,70,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<wrapped-mpu0",t,e,"        "))}),t.pop()),i.fl()},partials:{"<wrapped-mpu0":{name:"wrapped-mpu",partials:{},subs:{}}},subs:{}}),"super-section-ad-slot-mpu-secondary":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.d("meta-data.advertising.adSlots.mpu-3_4",t,e,1),t,e,0,42,64,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<wrapped-mpu0",t,e,"    "))}),t.pop()),i.fl()},partials:{"<wrapped-mpu0":{name:"wrapped-mpu",partials:{},subs:{}}},subs:{}}),"super-section-leaderboard":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="top-leaderboard-wrapper">'),i.b("\n"+n),i.b('  <div class="top-leaderboard fixed-position-hack">'),i.b("\n"+n),i.b(i.rp("<ad-slot-leaderboard0",t,e,"    ")),i.b("  </div>"),i.b("\n"+n),i.b("</div>"),i.b("\n"),i.fl()},partials:{"<ad-slot-leaderboard0":{name:"ad-slot-leaderboard",partials:{},subs:{}}},subs:{}}),"super-section-primary-content-meta-data":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b(i.rp("<super-section-ad-slot-mpu-primary0",t,e,"")),i.b("\n"+n),i.b('<div class="clearfix">'),i.b("\n"+n),i.b(i.rp("<ad-slot-sponsor-section-primary1",t,e,"  ")),i.b("</div>"),i.b("\n"),i.b("\n"+n),i.s(i.f("assetCustom",t,e,1),t,e,0,126,147,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<custom-embed2",t,e,"  "))}),t.pop()),i.fl()},partials:{"<super-section-ad-slot-mpu-primary0":{name:"super-section-ad-slot-mpu-primary",partials:{},subs:{}},"<ad-slot-sponsor-section-primary1":{name:"ad-slot-sponsor-section-primary",partials:{},subs:{}},"<custom-embed2":{name:"custom-embed",partials:{},subs:{}}},subs:{}}),"super-section-secondary-content-meta-data":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b(i.rp("<source-attribution0",t,e,"")),i.b("\n"+n),i.s(i.f("heading",t,e,1),t,e,0,37,179,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.s(i.f("context",t,e,1),t,e,0,52,166,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.s(i.f("hasContext",t,e,1),t,e,0,72,148,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('    <h2 class="context-list-title">Tags:</h2>'),i.b("\n"+n),
i.b(i.rp("<context-heading1",t,e,"    "))}),t.pop())}),t.pop())}),t.pop()),i.b("\n"),i.fl()},partials:{"<source-attribution0":{name:"source-attribution",partials:{},subs:{}},"<context-heading1":{name:"context-heading",partials:{},subs:{}}},subs:{}}),"super-section-secondary-content-story":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="sticky-side-wrapper">'),i.b("\n"+n),i.b('  <div class="sticky-side fixed-position-hack">'),i.b("\n"+n),i.b(i.rp("<super-section-ad-slot-mpu-secondary0",t,e,"    ")),i.b("  </div>"),i.b("\n"+n),i.b("</div>"),i.b("\n"+n),i.b('<div class="bottom-sticked-side-wrapper">'),i.b("\n"+n),i.b('  <div class="bottom-sticked-side">'),i.b("\n"),i.b("\n"+n),i.s(i.f("related-articles",t,e,1),t,e,0,247,274,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<promo-group1",t,e,"    \t"))}),t.pop()),i.b("\n"+n),i.s(i.f("related-articles",t,e,1),t,e,1,0,0,"")||(i.b('    <div id="related-stories-secondary" class="component-placeholder related-stories"></div>'),i.b("\n"+n)),i.b("\n"),i.b("\n"+n),i.b("  </div>"),i.b("\n"+n),i.b("</div>"),i.b("\n"),i.fl()},partials:{"<super-section-ad-slot-mpu-secondary0":{name:"super-section-ad-slot-mpu-secondary",partials:{},subs:{}},"<promo-group1":{name:"promo-group",partials:{},subs:{}}},subs:{}}),"super-section-story-content":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b("\x3c!-- story start --\x3e"),i.b("\n"+n),i.b('<div class="primary-content-lining">'),i.b("\n"+n),i.b("    \x3c!-- top-unit start --\x3e"),i.b("\n"+n),i.b('    <div class="top-unit">'),i.b("\n"+n),i.b(i.rp("<super-section-primary-content-meta-data0",t,e,"        ")),i.b("    </div>"),i.b("\n"+n),i.b("    \x3c!-- top-unit end --\x3e"),i.b("\n"+n),i.b("    \x3c!-- mid-unit start --\x3e"),i.b("\n"+n),i.b('    <div class="mid-unit"> </div>'),i.b("\n"+n),i.b("    \x3c!-- mid-unit end --\x3e"),i.b("\n"+n),i.b("    \x3c!-- bottom-unit start --\x3e"),i.b("\n"+n),i.b('    <div class="bottom-unit">'),i.b("\n"),i.b("\n"+n),i.b(i.rp("<infographic1",t,e,"        ")),i.b("\n"+n),i.b('        <div class="body-content">'),i.b("\n"+n),i.b("            "),i.b(i.t(i.f("body",t,e,0))),i.b("\n"+n),i.b("        </div>"),i.b("\n"),i.b("\n"+n),i.s(i.f("partner",t,e,1),t,e,0,473,513,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<partner-promo2",t,e,"            "))}),t.pop()),i.b("    </div>"),i.b("\n"+n),i.b("    \x3c!-- bottom-unit end --\x3e"),i.b("\n"+n),i.b('    <div class="clearfix"></div>'),i.b("\n"+n),i.b("    <section>"),i.b("\n"+n),i.b('        <div id="share-tools-bottom">'),i.b("\n"+n),i.s(i.f("shareTools",t,e,1),t,e,0,678,720,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<share-tools3",t,e,"            "))}),t.pop()),i.b("        </div>"),i.b("\n"+n),i.b("    </section>"),i.b("\n"+n),i.b("</div>"),i.b("\n"+n),i.b("        \x3c!-- story end --\x3e"),i.b("\n"),i.fl()},partials:{"<super-section-primary-content-meta-data0":{name:"super-section-primary-content-meta-data",partials:{},subs:{}},"<infographic1":{name:"infographic",partials:{},subs:{}},"<partner-promo2":{name:"partner-promo",partials:{},subs:{}},"<share-tools3":{name:"share-tools",partials:{},subs:{}}},subs:{}}),"super-section-story-contents":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div id="story-page" class="'),i.s(i.f("type",t,e,1),t,e,0,37,57,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(" story-type-"),n.b(n.v(n.f("type",t,e,0)))}),t.pop()),i.b('">'),i.b("\n"+n),i.s(i.f("hero-unit",t,e,1),t,e,0,85,101,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<hero-unit0",t,e," "))}),t.pop()),i.b('  <div id="story-content" class="page-component-wrapper standard article-content">'),i.b("\n"+n),i.s(i.f("intro",t,e,1),t,e,0,213,380,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('    <div class="primary-content-top" id="primary-content-top" role="main">'),i.b("\n"+n),i.b('      <div class="primary-content-wrapper">'),i.b("\n"+n),i.b(i.rp("<intro1",t,e,"        ")),i.b("      </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n)}),t.pop()),i.b("    \x3c!-- secondary content start --\x3e"),i.b("\n"+n),i.b('    <div class="secondary-content-top" id="secondary-content-top">'),i.b("\n"+n),i.b('      <div class="secondary-content-wrapper">'),i.b("\n"+n),i.b(i.rp("<super-section-secondary-content-meta-data2",t,e,"        ")),i.b("      </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("    \x3c!-- secondary content end --\x3e"),i.b("\n"+n),i.b("    \x3c!-- primary content start --\x3e"),i.b("\n"+n),i.b('    <div class="primary-content" id="primary-content" role="main">'),i.b("\n"+n),i.b('      <div class="primary-content-wrapper">'),i.b("\n"+n),i.s(i.f("brand-banner",t,e,1),t,e,0,826,840,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<banner3",t,e," "))}),t.pop()),i.b(i.rp("<super-section-story-content4",t,e," ")),i.b("      </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("    \x3c!-- primary content end --\x3e"),i.b("\n"+n),i.b("    \x3c!-- secondary content start --\x3e"),i.b("\n"+n),i.b('    <div class="secondary-content" id="secondary-content">'),i.b("\n"+n),i.b('      <div class="secondary-content-wrapper">'),i.b("\n"+n),i.b(i.rp("<super-section-secondary-content-story5",t,e,"        ")),i.b("      </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("    \x3c!-- secondary content end --\x3e"),i.b("\n"+n),i.b("  </div>"),i.b("\n"+n),i.b(i.rp("<more-amazing-stories6",t,e,"  ")),i.b("</div>"),i.b("\n"),i.fl()},partials:{"<hero-unit0":{name:"hero-unit",partials:{},subs:{}},"<intro1":{name:"intro",partials:{},subs:{}},"<super-section-secondary-content-meta-data2":{name:"super-section-secondary-content-meta-data",partials:{},subs:{}},"<banner3":{name:"banner",partials:{},subs:{}},"<super-section-story-content4":{name:"super-section-story-content",partials:{},subs:{}},"<super-section-secondary-content-story5":{name:"super-section-secondary-content-story",partials:{},subs:{}},"<more-amazing-stories6":{name:"more-amazing-stories",partials:{},subs:{}}},subs:{}}),"super-section-story-detail":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.sub("content",t,e,n),i.b("</div>"),i.b("\n"),i.b("\n"),i.b("\n"),i.fl()},partials:{"<contentsuper-section-leaderboard0":{name:"super-section-leaderboard",partials:{},subs:{}},"<contentsuper-section-story-contents1":{name:"super-section-story-contents",partials:{},subs:{}}},subs:{content:function(t,e,n,i){n.b(n.rp("<contentsuper-section-leaderboard0",t,e,"   ")),n.b(n.rp("<contentsuper-section-story-contents1",t,e,"  "))}}}),"topbar-menu-desktop":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="topbar-menu-desktop">'),i.b("\n"+n),i.b(i.rp("<topbar-menu0",t,e,"    ")),i.b("</div>"),i.fl()},partials:{"<topbar-menu0":{name:"topbar-menu",partials:{},subs:{}}},subs:{}}),"topbar-menu-mobile":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="topbar-menu-mobile" data-topbar-menu-mobile>'),i.b("\n"+n),i.b(i.rp("<topbar-menu-toggle0",t,e,"    ")),i.b('    <div data-topbar-menu-drop-down class="topbar-menu-mobile-panel">'),i.b("\n"+n),i.b('        <div class="topbar-menu-mobile-wrapper">'),i.b("\n"+n),i.b('            <div class="topbar-menu-mobile-lining">'),i.b("\n"+n),i.b(i.rp("<topbar-menu1",t,e,"                ")),i.b("            </div>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{"<topbar-menu-toggle0":{name:"topbar-menu-toggle",partials:{},subs:{}},"<topbar-menu1":{name:"topbar-menu",partials:{},subs:{}}},subs:{}}),"topbar-menu-noscript":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b("<noscript>"),i.b("\n"+n),i.b('    <div id="menu-bottom" class="topbar-menu-noscript">'),i.b("\n"+n),i.b(i.rp("<topbar-menu-mobile0",t,e,"        ")),i.b("    </div>"),i.b("\n"+n),i.b("</noscript>"),i.fl()},partials:{"<topbar-menu-mobile0":{name:"topbar-menu-mobile",partials:{},subs:{}}},subs:{}}),"topbar-menu-toggle":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<a class="topbar-menu-toggle" role="navigation" aria-label="secondary" data-topbar-menu-toggle href="#menu-bottom">'),i.b("\n"+n),i.b('    <span class="topbar-menu-toggle-text">Menu</span>'),i.b("\n"+n),i.b('    <span class="topbar-menu-toggle-icon">'),i.b("\n"+n),i.b('        <svg class="topbar-menu-toggle-icon-svg" viewBox="0 0 28 21" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">'),i.b("\n"+n),i.b('            <defs><rect id="rect" x="0" width="28" height="3"></rect></defs>'),i.b("\n"+n),i.b('            <g fill="currentColor">'),i.b("\n"+n),i.b('                <use xlink:href="#rect" y="0" />'),i.b("\n"+n),i.b('                <use xlink:href="#rect" y="9" />'),i.b("\n"+n),i.b('                <use xlink:href="#rect" y="18" />'),i.b("\n"+n),i.b("            </g>"),i.b("\n"+n),i.b("        </svg>"),i.b("\n"+n),i.b("    </span>"),i.b("\n"+n),i.b("</a>"),i.fl()},partials:{},subs:{}}),"topbar-menu":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="topbar-menu '),i.b(i.v(i.f("wrapperClass",t,e,0))),i.b('" '),i.s(i.f("analytics-module-metadata",t,e,1),t,e,0,72,102,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<analytics-module-metadata0",t,e,""))}),t.pop()),i.b(">"),i.b("\n"+n),i.b('    <ul class="topbar-menu-list" role="navigation" aria-label="'),i.b(i.v(i.f("label",t,e,0))),i.b('">'),i.b("\n"+n),i.s(i.f("items",t,e,1),t,e,0,227,743,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('            <li class="topbar-menu-list-item '),i.b(i.v(i.f("class",t,e,0))),i.b('">'),i.b("\n"+n),i.b('                <a href="'),i.b(i.v(i.f("url",t,e,0))),i.b('" class="topbar-menu-link" '),i.s(i.f("analytics-element-metadata",t,e,1),t,e,0,375,406,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<analytics-element-metadata1",t,e,""))}),t.pop()),i.b(">"),i.b("\n"+n),i.s(i.f("is_featured",t,e,1),t,e,1,0,0,"")||(i.b("                        "),i.s(i.f("line1",t,e,1),t,e,0,510,519,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.v(n.f("line1",t,e,0)))}),t.pop()),i.b("\n"+n)),i.b("\n"+n),i.s(i.f("is_featured",t,e,1),t,e,0,604,679,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b("                        "),i.s(i.f("line2",t,e,1),t,e,0,639,648,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.v(n.f("line2",t,e,0)))}),t.pop()),i.b("\n"+n)}),t.pop()),i.b("                </a>"),i.b("\n"+n),i.b("            </li>"),i.b("\n"+n)}),t.pop()),i.b("    </ul>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{"<analytics-module-metadata0":{name:"analytics-module-metadata",partials:{},subs:{}},"<analytics-element-metadata1":{name:"analytics-element-metadata",partials:{},subs:{}}},subs:{}}),topbar:new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="topbar-wrapper">'),i.b("\n"+n),i.b('<div class="topbar" id="nav-branding">'),i.b("\n"+n),i.s(i.f("navigation",t,e,1),t,e,0,87,349,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('    <div class="topbar-inner">'),i.b("\n"+n),i.b('        <div class="topbar-lining">'),i.b("\n"+n),i.b('            <a href="'),i.b(i.v(i.f("url",t,e,0))),i.b('" class="topbar-logo">'),i.b(i.v(i.f("name",t,e,0))),i.b("</a>"),i.b("\n"+n),i.s(i.f("menu",t,e,1),t,e,0,239,263,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<topbar-menu-desktop0",t,e,""))}),t.pop()),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.s(i.f("menu",t,e,1),t,e,0,312,335,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<topbar-menu-mobile1",t,e,""))}),t.pop())}),t.pop()),i.b("</div>"),i.b("\n"+n),i.b("</div>"),i.b("\n"),i.fl()},partials:{"<topbar-menu-desktop0":{name:"topbar-menu-desktop",partials:{},subs:{}},"<topbar-menu-mobile1":{name:"topbar-menu-mobile",partials:{},subs:{}}},subs:{}}),"twitter-feed":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b(i.rp("<headed-section-start0",t,e,"")),i.b('    <div id="'),i.b(i.v(i.f("id",t,e,0))),i.b('" class="'),i.b(i.v(i.f("class",t,e,0))),i.b('" >'),i.b("\n"+n),i.b('        <ul class="twitter-feed-posts">'),i.b("\n"+n),i.s(i.f("posts",t,e,1),t,e,0,129,538,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('            <li class="twitter-feed-post">'),i.b("\n"+n),i.b('                <div class="twitter-feed-post-entry">'),i.b("\n"+n),i.b("                    <p>"),i.b(i.t(i.f("entry",t,e,0))),i.b("</p>"),i.b("\n"+n),i.b("                </div>"),i.b("\n"+n),i.b('                <div class="twitter-feed-post-details">'),i.b("\n"+n),i.b('                    <p>Posted by <a href="'),i.b(i.v(i.f("accountURL",t,e,0))),i.b('" title="Goto '),i.b(i.v(i.f("account",t,e,0))),i.b(' twitter account">'),i.b(i.v(i.f("account",t,e,0))),i.b("</a> "),i.b(i.v(i.f("elapsed-time",t,e,0))),i.b(" ago</p>"),i.b("\n"+n),i.b("                </div>"),i.b("\n"+n),i.b("            </li>"),i.b("\n"+n)}),t.pop()),i.b("        </ul>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b(i.rp("<headed-section-end1",t,e," ")),i.fl()},partials:{"<headed-section-start0":{name:"headed-section-start",partials:{},subs:{}},"<headed-section-end1":{name:"headed-section-end",partials:{},subs:{}}},subs:{}}),"two-column":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b("\n"+n),i.b('        <div class="'),i.b(i.v(i.d("page.class",t,e,0))),i.b('" id="'),i.b(i.v(i.d("page.id",t,e,0))),i.b('">'),i.b("\n"+n),i.b('            <div class="primary-content"  role="main">'),i.b("\n"+n),i.sub("two-column-primary-content",t,e,n),i.b("            </div>"),i.b("\n"+n),i.b('            <div class="secondary-content">'),i.b("\n"+n),i.sub("two-column-secondary-content",t,e,n),i.b("            </div>"),i.b("\n"+n),i.b("        </div>"),i.fl()},partials:{},subs:{"two-column-primary-content":function(t,e,n,i){},"two-column-secondary-content":function(t,e,n,i){}}}),"video-player-prototype":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div id="video-player-prototype-placeholder"'),i.b("\n"+n),i.b('     class="video-player"'),i.b("\n"+n),i.b('     data-video-title="My Test Video"'),i.b("\n"+n),i.b('     data-video-player-vpid="p03tqf0s"'),i.b("\n"+n),i.b('     data-video-player-mediator="mc"'),i.b("\n"+n),i.b('     data-brand-color="#589e50"'),i.b("\n"+n),i.b('     data-video-player-image-url="http://ichef.bbci.co.uk/wwfeatures/live/original/images/live/p0/3t/qd/p03tqddv.jpg"'),i.b("\n"+n),i.b('     data-show-ads="false"'),i.b("\n"+n),i.b(">"),i.b("\n"+n),i.b("    <noscript>"),i.b("\n"+n),i.b('        <div class="warning">'),i.b("\n"+n),i.b("            <p><strong>This media cannot be played on your device.</strong></p>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("    </noscript>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{},subs:{}}),magnify:new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<iframe src="http://bbcworldwide.magnify.net/video/'),i.b(i.v(i.f("id",t,e,0))),i.b('/player?layout=&amp;read_more=1" width="420" height="395" frameborder="0" scrolling="no"></iframe>'),i.b("\n"),i.fl()},partials:{},subs:{}}),"stand-alone-video-element":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div id="'),i.b(i.v(i.f("id",t,e,0))),i.b('"'),i.b("\n"+n),i.b('     class="'),i.b(i.v(i.f("class",t,e,0))),i.b(' video-player"'),i.b("\n"+n),i.b("     data-video-player"),i.b("\n"+n),i.b('     data-video-title="'),i.b(i.v(i.f("title",t,e,0))),i.b('"'),i.b("\n"+n),i.b('     data-video-player-vpid="'),i.b(i.v(i.f("vpid",t,e,0))),i.b('"'),i.b("\n"+n),i.b('     data-video-player-mediator="'),i.b(i.v(i.f("mediator",t,e,0))),i.b('"'),i.b("\n"+n),i.b('     data-brand-color="'),i.b(i.v(i.f("brand-color",t,e,0))),i.b('"'),i.b("\n"+n),i.b('     data-video-player-image-url="'),i.b(i.v(i.f("image-url",t,e,0))),i.b('"'),i.b("\n"+n),i.b('     data-show-ads="'),i.b(i.v(i.f("show-ads",t,e,0))),i.b('"'),i.b("\n"+n),i.b("        >"),i.b("\n"+n),i.b("    <noscript>"),i.b("\n"+n),i.b('        <div class="warning">'),i.b("\n"+n),i.b("            <p><strong>This media cannot be played on your device.</strong></p>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("    </noscript>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{},subs:{}}),"video-lead":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div id="video-lead-wrapper" class="disabled">'),i.b("\n"+n),i.b(i.rp("<stand-alone-video-element0",t,e,"    ")),i.b("</div>"),i.fl()},partials:{"<stand-alone-video-element0":{name:"stand-alone-video-element",partials:{},subs:{}}},subs:{}}),"vpp-additional-controls":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="vpp-additional-controls">'),i.b("\n"+n),i.b('    <span class="vpp-additional-controls__skip">'),i.b("\n"+n),i.b(i.rp("<vpp-skip-control0",t,e,"        ")),i.b("    </span>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{"<vpp-skip-control0":{name:"vpp-skip-control",partials:{},subs:{}}},subs:{}}),"vpp-control-panel-metadata":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.f("clip-metadata",t,e,1),t,e,0,18,46,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<vpp-clip-metadata0",t,e,"    "))}),t.pop()),i.b("\n"+n),i.s(i.f("playlist-metadata",t,e,1),t,e,0,88,277,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('<div class="vpp-control-panel__playlist-metadata">'),i.b("\n"+n),i.b('    <div class="m-vpp-playlist-metadata--compact m-vpp-playlist-metadata-author--alt">'),i.b("\n"+n),i.b(i.rp("<vpp-playlist-metadata1",t,e,"    ")),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.b("\n"+n)}),t.pop()),i.fl()},partials:{"<vpp-clip-metadata0":{name:"vpp-clip-metadata",partials:{},subs:{}},"<vpp-playlist-metadata1":{name:"vpp-playlist-metadata",partials:{},subs:{}}},subs:{}}),"vpp-control-panel":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="vpp-control-panel" vpp-control-panel>'),i.b("\n"+n),i.b('    <div class="vpp-control-panel__metadata" data-vpp-control-panel-metadata>'),i.b("\n"+n),i.b(i.rp("<vpp-control-panel-metadata0",t,e,"    ")),i.b("    </div>"),i.b("\n"),i.b("\n"+n),i.b('    <div class="vpp-control-panel__additional-controls">'),i.b("\n"+n),i.b(i.rp("<vpp-additional-controls1",t,e,"    ")),i.b("    </div>"),i.b("\n"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{"<vpp-control-panel-metadata0":{name:"vpp-control-panel-metadata",partials:{},subs:{}},"<vpp-additional-controls1":{name:"vpp-additional-controls",partials:{},subs:{}}},subs:{}}),"vpp-clip-metadata-duration":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<span class="vpp-clip-metadata__running-time-icon gelicon gelicon--duration"></span>'),i.b("\n"+n),i.b('<span class="vpp-clip-metadata__running-time-text">'),i.b(i.v(i.f("minutes",t,e,0))),i.b(":"),i.b(i.v(i.f("seconds",t,e,0))),i.b("</span>"),i.fl()},partials:{},subs:{}}),"vpp-clip-metadata":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="vpp-clip-metadata">'),i.b("\n"),i.b("\n"+n),i.b('    <h1 class="vpp-clip-metadata__title">'),i.b(i.v(i.f("title",t,e,0))),i.b("</h1>"),i.b("\n"),i.b("\n"+n),i.b('    <p class="vpp-clip-metadata__description">'),i.b(i.v(i.f("description",t,e,0))),i.b("</p>"),i.b("\n"),i.b("\n"+n),i.s(i.f("duration",t,e,1),t,e,0,174,283,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('    <span class="vpp-clip-metadata__running-time">'),i.b("\n"+n),i.b(i.rp("<vpp-clip-metadata-duration0",t,e,"        ")),i.b("    </span>"),i.b("\n"+n)}),t.pop()),i.b("</div>"),i.b("\n"),i.fl()},partials:{"<vpp-clip-metadata-duration0":{name:"vpp-clip-metadata-duration",partials:{},subs:{}}},subs:{}}),"vpp-clip-preview-image-item":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<span class="vpp-clip-viewer-preview-image '),i.b(i.v(i.f("class",t,e,0))),i.b('">'),i.b("\n"+n),i.b('    <span class="vpp-clip-viewer-preview-image__item" style="background-image: url('),i.b(i.v(i.f("url",t,e,0))),i.b(')"></span>'),i.b("\n"+n),i.b("</span>"),i.fl()},partials:{},subs:{}}),"vpp-clip-promo-icon":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.f("icon-type",t,e,1),t,e,0,14,71,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('    <span class="vpp-clip-promo__icon">'),i.b(i.rp("<icon0",t,e,"")),i.b("</span>"),i.b("\n"+n)}),t.pop()),i.fl()},partials:{"<icon0":{name:"icon",partials:{},subs:{}}},subs:{}}),"vpp-clip-promo-image":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.f("image",t,e,1),t,e,0,10,274,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('    <div class="vpp-clip-promo__media">'),i.b("\n"+n),i.b('        <div class="vpp-clip-promo__image-wrapper">'),i.b("\n"+n),i.b(i.rp("<responsive-image-tag0",t,e,"        ")),i.b(i.rp("<vpp-clip-promo-icon1",t,e,"        ")),i.b(i.rp("<vpp-clip-promo-status2",t,e,"        ")),i.b(i.rp("<responsive-image-overlay-text3",t,e,"        ")),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n)}),t.pop()),i.fl()},partials:{"<responsive-image-tag0":{name:"responsive-image-tag",partials:{},subs:{}},"<vpp-clip-promo-icon1":{name:"vpp-clip-promo-icon",partials:{},subs:{}},"<vpp-clip-promo-status2":{name:"vpp-clip-promo-status",partials:{},subs:{}},"<responsive-image-overlay-text3":{name:"responsive-image-overlay-text",partials:{},subs:{}}},subs:{}}),"vpp-clip-promo-status":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<span class="vpp-clip-promo__status">Now Playing</span>'),i.b("\n"),i.fl()},partials:{},subs:{}}),"vpp-clip-promo":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<article class="vpp-clip-promo'),i.s(i.f("is-active",t,e,1),t,e,0,44,70,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(" vpp-clip-promo--is-active")}),t.pop()),i.b('" data-vpp-clip-promo-button'),i.s(i.f("vpid",t,e,1),t,e,0,121,132,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b('="'),n.b(n.v(n.f("vpid",t,e,0))),n.b('"')}),t.pop()),i.b(">"),i.b("\n"+n),i.b('    <button class="vpp-clip-promo__button">'),i.b("\n"+n),i.b('        <div class="vpp-clip-promo__wrapper">'),i.b("\n"+n),i.b(i.rp("<vpp-clip-promo-image0",t,e,"            ")),i.s(i.f("title",t,e,1),t,e,0,293,446,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('            <div class="vpp-clip-promo__title-wrapper">'),i.b("\n"+n),i.b('                <h2 class="vpp-clip-promo__title">'),i.b(i.v(i.f("title",t,e,0))),i.b("</h2>"),i.b("\n"+n),i.b("            </div>"),i.b("\n"+n)}),t.pop()),i.b("        </div>"),i.b("\n"+n),i.b("    </button>"),i.b("\n"+n),i.b("</article>"),i.fl()},partials:{"<vpp-clip-promo-image0":{name:"vpp-clip-promo-image",partials:{},subs:{}}},subs:{}}),"vpp-clip-viewer-player":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="vpp-clip-viewer-player" data-vpp-clip-viewer-player>'),i.b("\n"+n),i.b('    <div class="vpp-clip-viewer-player__video">'),i.b("\n"+n),i.b(i.rp("<vpp-video0",t,e,"        ")),i.b("    </div>"),i.b("\n"+n),i.b('    <div class="vpp-clip-viewer-player__control-panel">'),i.b("\n"+n),i.b(i.rp("<vpp-control-panel1",t,e,"        ")),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{"<vpp-video0":{name:"vpp-video",partials:{},subs:{}},"<vpp-control-panel1":{name:"vpp-control-panel",partials:{},subs:{}}},subs:{}}),"vpp-clip-viewer-preview-image":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.f("responsive-images",t,e,1),t,e,0,22,240,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.s(i.f("small",t,e,1),t,e,0,37,83,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<vpp-clip-preview-image-item0",t,e,"        "))}),t.pop()),i.b("\n"+n),i.s(i.f("medium",t,e,1),t,e,0,110,156,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<vpp-clip-preview-image-item1",t,e,"        "))}),t.pop()),i.b("\n"+n),i.s(i.f("large",t,e,1),t,e,0,183,229,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<vpp-clip-preview-image-item2",t,e,"        "))}),t.pop())}),t.pop()),i.b("\n"+n),i.s(i.f("responsive-images",t,e,1),t,e,1,0,0,"")||i.s(i.f("image",t,e,1),t,e,0,301,347,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<vpp-clip-preview-image-item3",t,e,"        "))}),t.pop()),i.fl()},partials:{"<vpp-clip-preview-image-item0":{name:"vpp-clip-preview-image-item",partials:{},subs:{}},"<vpp-clip-preview-image-item1":{name:"vpp-clip-preview-image-item",partials:{},subs:{}},"<vpp-clip-preview-image-item2":{name:"vpp-clip-preview-image-item",partials:{},subs:{}},"<vpp-clip-preview-image-item3":{name:"vpp-clip-preview-image-item",partials:{},subs:{}}},subs:{}}),"vpp-clip-viewer-preview":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="vpp-clip-viewer-preview" data-vpp-clip-viewer-preview>'),i.b("\n"+n),i.b('    <span class="vpp-clip-viewer-preview__image">'),i.b("\n"+n),i.b(i.rp("<vpp-clip-viewer-preview-image0",t,e,"        ")),i.b('        <div class="vpp-clip-viewer-preview__play-control">'),i.b("\n"+n),i.b('            <span class="m-vpp-play-control--icon-only--tablet-and-down  m-vpp-play-control--icon-only-big--tablet-only">'),i.b("\n"+n),i.b(i.rp("<vpp-play-control1",t,e,"            ")),i.b("            </span>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("    </span>"),i.b("\n"+n),i.b('    <div class="vpp-clip-viewer-preview__playlist-metadata">'),i.b("\n"+n),i.b('        <div class="m-vpp-playlist-metadata--centered--tablet-and-down">'),i.b("\n"+n),i.b(i.rp("<vpp-playlist-metadata2",t,e,"            ")),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{"<vpp-clip-viewer-preview-image0":{name:"vpp-clip-viewer-preview-image",partials:{},subs:{}},"<vpp-play-control1":{name:"vpp-play-control",partials:{},subs:{}},"<vpp-playlist-metadata2":{name:"vpp-playlist-metadata",partials:{},subs:{}}},subs:{}}),"vpp-clip-viewer":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="vpp-clip-viewer">'),i.b("\n"+n),i.b('    <div class="vpp-clip-viewer__preview vpp-clip-viewer__preview--is-active" data-vpp-clip-viewer-preview-container>'),i.b("\n"+n),i.b(i.rp("<vpp-clip-viewer-preview0",t,e,"    ")),i.b("    </div>"),i.b("\n"+n),i.b('    <div class="vpp-clip-viewer__player" data-vpp-clip-viewer-player-container>'),i.b("\n"+n),i.b(i.rp("<vpp-clip-viewer-player1",t,e,"    ")),i.b("    </div>"),i.b("\n"+n),i.s(i.f("share-tools",t,e,1),t,e,0,335,468,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('        <div class="vpp-clip-viewer__share-tools" data-vpp-share-tools>'),i.b("\n"+n),i.b(i.rp("<share-tools-expandable2",t,e,"            ")),i.b("        </div>"),i.b("\n"+n)}),t.pop()),i.b("</div>"),i.fl()},partials:{"<vpp-clip-viewer-preview0":{name:"vpp-clip-viewer-preview",partials:{},subs:{}},"<vpp-clip-viewer-player1":{name:"vpp-clip-viewer-player",partials:{},subs:{}},"<share-tools-expandable2":{name:"share-tools-expandable",partials:{},subs:{}}},subs:{}}),"vpp-main":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="vpp-main" data-vpp-main>'),i.b("\n"+n),i.b('    <article class="vpp-main__viewer">'),i.b("\n"+n),i.b(i.rp("<vpp-clip-viewer0",t,e,"    ")),i.b("    </article>"),i.b("\n"+n),i.b('    <aside class="vpp-main__playlist">'),i.b("\n"+n),i.b('        <div class="m-vpp-playlist--dark--desktop-only  m-vpp-clip-promo--light-text--desktop-only  m-vpp-clip-promo--big--tablet-only">'),i.b("\n"+n),i.b(i.rp("<vpp-playlist1",t,e,"            ")),i.b("        </div>"),i.b("\n"+n),i.b("    </aside>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{"<vpp-clip-viewer0":{name:"vpp-clip-viewer",partials:{},subs:{}},"<vpp-playlist1":{name:"vpp-playlist",partials:{},subs:{}}},subs:{}}),"vpp-play-control":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<button class="vpp-play-control" data-vpp-control-play>'),i.b("\n"+n),i.b('    <span class="vpp-play-control__icon">'),i.b("\n"+n),i.b('        <span class="icon-wrapper gel-icon-wrapper icon-wrapper-play">'),i.b("\n"+n),i.b('            <i aria-hidden="true" class="gelicon gelicon--play"></i>'),i.b("\n"+n),i.b("        </span>"),i.b("\n"+n),i.b("    </span>"),i.b("\n"+n),i.s(i.f("play-control-text",t,e,1),t,e,0,292,393,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('        <span class="vpp-play-control__text">'),i.b("\n"+n),i.b("            "),i.b(i.v(i.f("play-control-text",t,e,0))),i.b("\n"+n),i.b("        </span>"),i.b("\n"+n)}),t.pop()),i.b("</button>"),i.fl()},partials:{},subs:{}}),"vpp-playlist-metadata-author":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<h2 class="vpp-playlist-metadata-author">'),i.b("\n"+n),i.b('    <span class="vpp-playlist-metadata-author__prefix">by</span>'),i.b("\n"+n),i.b('    <span class="vpp-playlist-metadata-author__name">'),i.b(i.v(i.f("curatorName",t,e,0))),i.b("</span>"),i.b("\n"+n),i.b("</h2>"),i.b("\n"),i.fl()},partials:{},subs:{}}),"vpp-playlist-metadata":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="vpp-playlist-metadata" data-vpp-playlist-metadata '),i.s(i.f("class",t,e,1),t,e,0,72,89,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b('class="'),n.b(n.v(n.f("class",t,e,0))),n.b('"')}),t.pop()),i.b(">"),i.b("\n"),i.b("\n"+n),i.s(i.f("title",t,e,1),t,e,0,116,320,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('    <h2 class="vpp-playlist-metadata__title">'),i.b("\n"+n),i.b('        <span class="vpp-playlist-metadata__title-prefix">From</span>'),i.b("\n"+n),i.b('        <span class="vpp-playlist-metadata__title-text">'),i.b(i.v(i.f("title",t,e,0))),i.b("</span>"),i.b("\n"+n),i.b("    </h2>"),i.b("\n"+n)}),t.pop()),i.b("\n"+n),i.s(i.f("curatorName",t,e,1),t,e,0,352,446,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('    <span class="vpp-playlist-metadata__author">'),i.b(i.rp("<vpp-playlist-metadata-author0",t,e,"")),i.b("</span>"),i.b("\n"+n)}),t.pop()),i.b("\n"+n),i.s(i.f("description",t,e,1),t,e,0,484,559,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('    <p class="vpp-playlist-metadata__description">'),i.b(i.v(i.f("description",t,e,0))),i.b("</p>"),i.b("\n"+n)}),t.pop()),i.b("\n"+n),i.b("</div>"),i.b("\n"),i.fl()},partials:{"<vpp-playlist-metadata-author0":{name:"vpp-playlist-metadata-author",partials:{},subs:{}}},subs:{}}),"vpp-playlist":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="vpp-playlist" data-vpp-playlist>'),i.b("\n"+n),i.b('    <div class="vpp-playlist__ad-wrapper">'),i.b("\n"+n),i.b(i.rp("<ad-slot-leaderboard-primary0",t,e,"    ")),i.b(i.rp("<ad-slot-mpu-secondary1",t,e,"    ")),i.b("    </div>"),i.b("\n"+n),i.s(i.f("playlist-header-text",t,e,1),t,e,0,196,332,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('    <div class="vpp-playlist__heading-wrapper">'),i.b("\n"+n),i.b('        <h2 class="vpp-playlist__heading">'),i.b(i.v(i.f("playlist-header-text",t,e,0))),i.b("</h2>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n)}),t.pop()),i.b('    <div class="vpp-playlist__sponsor-wrapper">'),i.b("\n"+n),i.b('        <div class="vpp-sponsor">'),i.b("\n"+n),i.b(i.rp("<ad-slot-sponsor-section-primary2",t,e,"        ")),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b('    <ul class="vpp-playlist__items">'),i.b("\n"+n),i.s(i.f("clipList",t,e,1),t,e,0,565,686,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('        <li class="vpp-playlist__item" '),i.s(i.f("vpid",t,e,1),t,e,0,614,647,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b('data-vpp-playlist-item="'),n.b(n.v(n.f("vpid",t,e,0))),n.b('"')}),t.pop()),i.b(">"),i.b(i.rp("<vpp-clip-promo3",t,e,"")),i.b("</li>"),i.b("\n"+n)}),t.pop()),i.b("    </ul>"),i.b("\n"+n),i.b("</div>"),i.b("\n"),i.fl()},partials:{"<ad-slot-leaderboard-primary0":{name:"ad-slot-leaderboard-primary",partials:{},subs:{}},"<ad-slot-mpu-secondary1":{name:"ad-slot-mpu-secondary",partials:{},subs:{}},"<ad-slot-sponsor-section-primary2":{name:"ad-slot-sponsor-section-primary",partials:{},subs:{}},"<vpp-clip-promo3":{name:"vpp-clip-promo",partials:{},subs:{}}},subs:{}}),"vpp-skip-control":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<button class="vpp-skip-control" data-vpp-control-skip>'),i.b("\n"+n),i.b('    <span class="vpp-skip-control__text">Skip</span>'),i.b("\n"+n),
i.b('    <span class="vpp-skip-control__icon">'),i.b("\n"+n),i.b('        <span aria-hidden="true" class="gelicon gelicon--next"></span>'),i.b("\n"+n),i.b("    </span>"),i.b("\n"+n),i.b("</button>"),i.fl()},partials:{},subs:{}}),"vpp-smp-placeholder":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="vpp-smp-placeholder" data-vpp-smp data-vpp-smp-brand-color="'),i.b(i.v(i.f("brand-color",t,e,0))),i.b('" data-vpp-smp-show-ads="'),i.b(i.v(i.f("show-ads",t,e,0))),i.b('">'),i.b("\n"+n),i.b("    <noscript>"),i.b("\n"+n),i.b('        <div class="warning">'),i.b("\n"+n),i.b("            <p><strong>This media cannot be played on your device.</strong></p>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("    </noscript>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{},subs:{}}),"vpp-video-player":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.s(i.f("video",t,e,1),t,e,0,10,46,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<stand-alone-video-element0",t,e,"    "))}),t.pop()),i.fl()},partials:{"<stand-alone-video-element0":{name:"stand-alone-video-element",partials:{},subs:{}}},subs:{}}),"vpp-video":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="vpp-video">'),i.b("\n"+n),i.b('    <div class="vpp-video__player" data-vpp-video>'),i.b("\n"+n),i.b(i.rp("<vpp-smp-placeholder0",t,e,"        ")),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{"<vpp-smp-placeholder0":{name:"vpp-smp-placeholder",partials:{},subs:{}}},subs:{}}),youtube:new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<iframe id="ytplayer'),i.b(i.v(i.f("id",t,e,0))),i.b('" type="text/html" src="http://www.youtube.com/embed/'),i.b(i.v(i.f("id",t,e,0))),i.b('" frameborder="0"></iframe>'),i.fl()},partials:{},subs:{}}),"weather-forecast-clean":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div id="weather-module" class="weather-module">'),i.b("\n"+n),i.b('    <div class="weather-module-lining">'),i.b("\n"+n),i.b(i.rp("<weather-forecast-header0",t,e,"        ")),i.b("        "),i.s(i.f("weatherURL",t,e,1),t,e,0,149,174,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b('<a href="'),n.b(n.v(n.f("weatherURL",t,e,0))),n.b('">')}),t.pop()),i.b("\n"+n),i.b('            <div class="today-forecast">'),i.b("\n"+n),i.b('                <div class="today-forecast-lining">'),i.b("\n"+n),i.s(i.f("todayForecast",t,e,1),t,e,0,321,763,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                        <p class="temperature">'),i.b("\n"+n),i.b('                            <span class="day-name">'),i.b(i.v(i.f("dayNameAbbreviation",t,e,0))),i.b("</span>"),i.b("\n"+n),i.b('                            <span class="weather-icon '),i.s(i.f("weatherCode",t,e,1),t,e,0,522,543,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b("wi-"),n.b(n.v(n.f("weatherCode",t,e,0))),n.b("-xl")}),t.pop()),i.b('">'),i.b(i.v(i.f("weatherCaption",t,e,0))),i.b("</span>"),i.s(i.f("temperature",t,e,1),t,e,0,602,697,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b("\n"+n),i.b(i.rp("<weather-forecast-temperature1",t,e,"                                "))}),t.pop()),i.b("                        </p>"),i.b("\n"+n)}),t.pop()),i.b('                    <p class="location-name">'),i.b(i.v(i.f("locationName",t,e,0))),i.b("</p>"),i.b("\n"+n),i.b('                    <p class="country-name">'),i.b(i.v(i.f("countryName",t,e,0))),i.b("</p>"),i.b("\n"+n),i.b("                </div>"),i.b("\n"+n),i.b("            </div>"),i.b("\n"+n),i.b('            <div class="forecast">'),i.b("\n"+n),i.b('                <div class="forecast-lining">'),i.b("\n"+n),i.b('                    <ul class="forecast-list">'),i.b("\n"+n),i.s(i.f("todayForecast",t,e,1),t,e,0,1124,1770,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                            <li class="forecast-item forecast-item-today">'),i.b("\n"+n),i.b('                                <span class="day-name">'),i.b(i.v(i.f("dayNameAbbreviation",t,e,0))),i.b("</span>"),i.b("\n"+n),i.b('                                <span class="weather-icon '),i.s(i.f("weatherCode",t,e,1),t,e,0,1360,1389,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b("wi-"),n.b(n.v(n.f("weatherCode",t,e,0))),n.b(" responsive")}),t.pop()),i.b('">'),i.b(i.v(i.f("weatherCaption",t,e,0))),i.b("</span>"),i.b("\n"+n),i.b('                                <span class="temperature">'),i.b("\n"+n),i.s(i.f("temperature",t,e,1),t,e,0,1544,1655,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<weather-forecast-temperature2",t,e,"                                        "))}),t.pop()),i.b("                                </span>"),i.b("\n"+n),i.b("                            </li>"),i.b("\n"+n)}),t.pop()),i.s(i.f("forecast",t,e,1),t,e,0,1826,2458,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                            <li class="forecast-item">'),i.b("\n"+n),i.b('                                <span class="day-name">'),i.b(i.v(i.f("dayNameAbbreviation",t,e,0))),i.b("</span>"),i.b("\n"+n),i.b('                                <span class="weather-icon '),i.s(i.f("weatherCode",t,e,1),t,e,0,2042,2071,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b("wi-"),n.b(n.v(n.f("weatherCode",t,e,0))),n.b(" responsive")}),t.pop()),i.b('">'),i.b(i.v(i.f("weatherCaption",t,e,0))),i.b("</span>"),i.b("\n"+n),i.b('                                <span class="temperature">'),i.b("\n"+n),i.s(i.f("maxTemperature",t,e,1),t,e,0,2229,2340,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<weather-forecast-temperature3",t,e,"                                        "))}),t.pop()),i.b("                                </span>"),i.b("\n"+n),i.b("                            </li>"),i.b("\n"+n)}),t.pop()),i.b("                    </ul>"),i.b("\n"+n),i.b("                </div>"),i.b("\n"+n),i.b("            </div>"),i.b("\n"+n),i.b("        "),i.s(i.f("weatherURL",t,e,1),t,e,0,2563,2567,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b("</a>")}),t.pop()),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{"<weather-forecast-header0":{name:"weather-forecast-header",partials:{},subs:{}},"<weather-forecast-temperature1":{name:"weather-forecast-temperature",partials:{},subs:{}},"<weather-forecast-temperature2":{name:"weather-forecast-temperature",partials:{},subs:{}},"<weather-forecast-temperature3":{name:"weather-forecast-temperature",partials:{},subs:{}}},subs:{}}),"weather-forecast-header":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="module-header">'),i.b("\n"+n),i.b('    <div class="module-header-lining">'),i.b("\n"+n),i.b('        <div class="module-header-section">'),i.b("\n"+n),i.b('            <h2 class="module-header-section-title"><span class="weather-module-title-intro">Weather in </span>'),i.b(i.v(i.f("locationName",t,e,0))),i.b("</h2>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b('        <div class="module-header-section module-header-section-controls">'),i.b("\n"+n),i.b('            <button data-weather-settings-button="fahrenheit" class="settings-control-text settings-control-text-fahrenheit" title="Fahrenheit">'),i.b("\n"+n),i.b('                <span class="settings-control-text-part1">F</span><span class="settings-control-text-part2">ahrenheit</span>'),i.b("\n"+n),i.b("            </button>"),i.b("\n"+n),i.b('            <span class="settings-control-sep"></span>'),i.b("\n"+n),i.b('            <button data-weather-settings-button="centigrade" class="settings-control-text settings-control-text-centigrade" title="Celsius">'),i.b("\n"+n),i.b('                <span class="settings-control-text-part1">C</span><span class="settings-control-text-part2">elsius</span>'),i.b("\n"+n),i.b("            </button>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{},subs:{}}),"weather-forecast-temperature":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<span data-weather-icon="centigrade" class="centigrade is-hidden">'),i.b("\n"+n),i.b("    "),i.b(i.v(i.f("centigrade",t,e,0))),i.b('&deg;<span class="units" aria-label="celsius">c</span>'),i.b("\n"+n),i.b("</span>"),i.b("\n"+n),i.b('<span data-weather-icon="fahrenheit" class="fahrenheit is-hidden">'),i.b("\n"+n),i.b("    "),i.b(i.v(i.f("fahrenheit",t,e,0))),i.b('&deg;<span class="units" aria-label="fahrenheit">f</span>'),i.b("\n"+n),i.b("</span>"),i.fl()},partials:{},subs:{}}),"weather-forecast-toggle":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<span id="settings-button" class="settings-control">'),i.b("\n"+n),i.b('    <button data-weather-settings-button="toggle" class="settings-control-toggle weather-icon"></button>'),i.b("\n"+n),i.b("</span>"),i.fl()},partials:{},subs:{}}),"weather-forecast":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div id="weather-module" class="weather-module">'),i.b("\n"+n),i.b('    <div class="weather-module-lining">'),i.b("\n"+n),i.b('        <a href="'),i.b(i.v(i.f("weatherURL",t,e,0))),i.b('">'),i.b("\n"+n),i.b('            <div class="today-forecast">'),i.b("\n"+n),i.b(i.rp("<weather-forecast-toggle0",t,e,"                ")),i.b('                <div class="today-forecast-lining">'),i.b("\n"+n),i.s(i.f("todayForecast",t,e,1),t,e,0,299,687,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                        <p class="temperature">'),i.b("\n"+n),i.b('                            <span class="weather-icon '),i.s(i.f("weatherCode",t,e,1),t,e,0,418,438,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b("wi-"),n.b(n.v(n.f("weatherCode",t,e,0))),n.b("-l")}),t.pop()),i.b('">'),i.b(i.v(i.f("weatherCaption",t,e,0))),i.b("</span>"),i.b("\n"+n),i.s(i.f("temperature",t,e,1),t,e,0,526,621,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b(n.rp("<weather-forecast-temperature1",t,e,"                                "))}),t.pop()),i.b("                        </p>"),i.b("\n"+n)}),t.pop()),i.b('                    <p class="location-name">'),i.b(i.v(i.f("locationName",t,e,0))),i.b("</p>"),i.b("\n"+n),i.b('                    <p class="country-name">'),i.b(i.v(i.f("countryName",t,e,0))),i.b("</p>"),i.b("\n"+n),i.b("                </div>"),i.b("\n"+n),i.b("            </div>"),i.b("\n"+n),i.b('            <div class="forecast">'),i.b("\n"+n),i.b('                <div class="forecast-lining">'),i.b("\n"+n),i.b('                    <ul class="forecast-list">'),i.b("\n"+n),i.s(i.f("forecast",t,e,1),t,e,0,1043,1381,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                            <li class="forecast-item">'),i.b("\n"+n),i.b('                                <span class="day-name">'),i.b(i.v(i.f("dayNameAbbreviation",t,e,0))),i.b("</span>"),i.b("\n"+n),i.b('                                <span class="weather-icon '),i.s(i.f("weatherCode",t,e,1),t,e,0,1259,1279,"{{ }}")&&(i.rs(t,e,function(t,e,n){n.b("wi-"),n.b(n.v(n.f("weatherCode",t,e,0))),n.b("-m")}),t.pop()),i.b('">'),i.b(i.v(i.f("weatherCaption",t,e,0))),i.b("</span>"),i.b("\n"+n),i.b("                            </li>"),i.b("\n"+n)}),t.pop()),i.b("                    </ul>"),i.b("\n"+n),i.b("                </div>"),i.b("\n"+n),i.b("            </div>"),i.b("\n"+n),i.b("        </a>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{"<weather-forecast-toggle0":{name:"weather-forecast-toggle",partials:{},subs:{}},"<weather-forecast-temperature1":{name:"weather-forecast-temperature",partials:{},subs:{}}},subs:{}}),"wrapped-mpu-deferred":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="mpu-wrapper">'),i.b("\n"+n),i.b(i.rp("<ad-slot-deferred0",t,e,"    ")),i.b("</div>"),i.fl()},partials:{"<ad-slot-deferred0":{name:"ad-slot-deferred",partials:{},subs:{}}},subs:{}}),"wrapped-mpu":new t.Template({code:function(t,e,n){var i=this;return i.b(n=n||""),i.b('<div class="mpu-wrapper">'),i.b("\n"+n),i.b(i.rp("<ad-slot0",t,e,"    ")),i.b("</div>"),i.fl()},partials:{"<ad-slot0":{name:"ad-slot",partials:{},subs:{}}},subs:{}})},n=function(t){var n=e[t];return function(t,i,o){return n.render(t,i||e,o)}};return{"ad-slot-adsense-all":n("ad-slot-adsense-all"),"ad-slot-deferred":n("ad-slot-deferred"),"ad-slot-ibroadcast-image-gallery":n("ad-slot-ibroadcast-image-gallery"),"ad-slot-infeed":n("ad-slot-infeed"),"ad-slot-infinite-mpu":n("ad-slot-infinite-mpu"),"ad-slot-infinite":n("ad-slot-infinite"),"ad-slot-leaderboard-deferred":n("ad-slot-leaderboard-deferred"),"ad-slot-leaderboard-primary":n("ad-slot-leaderboard-primary"),"ad-slot-leaderboard-secondary":n("ad-slot-leaderboard-secondary"),"ad-slot-leaderboard":n("ad-slot-leaderboard"),"ad-slot-mpu-bottom-deferred":n("ad-slot-mpu-bottom-deferred"),"ad-slot-mpu-bottom":n("ad-slot-mpu-bottom"),"ad-slot-mpu-primary":n("ad-slot-mpu-primary"),"ad-slot-mpu-secondary":n("ad-slot-mpu-secondary"),"ad-slot-native-side":n("ad-slot-native-side"),"ad-slot-parallax":n("ad-slot-parallax"),"ad-slot-promo-feature-2":n("ad-slot-promo-feature-2"),"ad-slot-promo-feature-3":n("ad-slot-promo-feature-3"),"ad-slot-sponsor-fake":n("ad-slot-sponsor-fake"),"ad-slot-sponsor-section-primary":n("ad-slot-sponsor-section-primary"),"ad-slot-vertical-navbar":n("ad-slot-vertical-navbar"),"ad-slot":n("ad-slot"),"analytics-element-metadata":n("analytics-element-metadata"),"analytics-module-metadata":n("analytics-module-metadata"),"anchor-capable-element-end":n("anchor-capable-element-end"),"anchor-capable-element-start":n("anchor-capable-element-start"),"anchor-tag":n("anchor-tag"),"around-the-bbc-footer":n("around-the-bbc-footer"),"article-image":n("article-image"),"third-party-content-container":n("third-party-content-container"),"attribution-slot":n("attribution-slot"),banner:n("banner"),"irregular-images-promo-unit":n("irregular-images-promo-unit"),"irregular-images":n("irregular-images"),"calendar-promo":n("calendar-promo"),"google-add-to-calendar":n("google-add-to-calendar"),"ical-add-to-calendar":n("ical-add-to-calendar"),"outlook-add-to-calendar":n("outlook-add-to-calendar"),"yahoo-add-to-calendar":n("yahoo-add-to-calendar"),"callout-box":n("callout-box"),caption:n("caption"),column:n("column"),"context-heading":n("context-heading"),"context-item":n("context-item"),"custom-embed":n("custom-embed"),date:n("date"),"destination-link":n("destination-link"),"map-controls":n("map-controls"),"map-popup":n("map-popup"),"domestic-header":n("domestic-header"),"empty-list-notice":n("empty-list-notice"),"event-filter-story":n("event-filter-story"),"event-list-two-column":n("event-list-two-column"),"figure-with-description":n("figure-with-description"),figure:n("figure"),filter:n("filter"),"follow-us":n("follow-us"),"form-select":n("form-select"),"event-filter-header":n("event-filter-header"),"event-filter":n("event-filter"),"select-box":n("select-box"),"fullsizeable-anchor":n("fullsizeable-anchor"),"gallery-inline-image":n("gallery-inline-image"),"gallery-lead":n("gallery-lead"),"headed-section-end":n("headed-section-end"),"headed-section-start":n("headed-section-start"),"headed-section-with-destination-end":n("headed-section-with-destination-end"),"headed-section-with-destination-start":n("headed-section-with-destination-start"),"headed-section-with-image-end":n("headed-section-with-image-end"),"headed-section-with-image-start":n("headed-section-with-image-start"),"hero-unit":n("hero-unit"),"horizontal-partner-module":n("horizontal-partner-module"),"html5-video":n("html5-video"),"ibroadcast-image-gallery-advertising-overlay":n("ibroadcast-image-gallery-advertising-overlay"),"ibroadcast-image-gallery-selected-image-caption":n("ibroadcast-image-gallery-selected-image-caption"),"ibroadcast-image-gallery-selected-image-tag":n("ibroadcast-image-gallery-selected-image-tag"),"ibroadcast-image-gallery-selected-image":n("ibroadcast-image-gallery-selected-image"),"ibroadcast-image-gallery-thumbnail":n("ibroadcast-image-gallery-thumbnail"),"ibroadcast-image-gallery":n("ibroadcast-image-gallery"),icon:n("icon"),infographic:n("infographic"),"inline-horizontal-partner-module":n("inline-horizontal-partner-module"),"inline-ibroadcast-image-gallery":n("inline-ibroadcast-image-gallery"),"inline-image":n("inline-image"),"inline-magnify":n("inline-magnify"),"inline-video":n("inline-video"),"inline-youtube":n("inline-youtube"),intro:n("intro"),"link-box-anchor-simple":n("link-box-anchor-simple"),"link-box-anchor":n("link-box-anchor"),"link-box-list":n("link-box-list"),"link-box":n("link-box"),"load-more":n("load-more"),"lorem-ipsum":n("lorem-ipsum"),mapbox:n("mapbox"),"media-with-description":n("media-with-description"),"more-amazing-stories":n("more-amazing-stories"),"more-stories-wrapper":n("more-stories-wrapper"),"most-popular":n("most-popular"),"related-stories":n("related-stories"),"navigation-wrapper":n("navigation-wrapper"),navigation:n("navigation"),"nested-list":n("nested-list"),"news-feed-module-placeholder":n("news-feed-module-placeholder"),"news-feed-promo-group":n("news-feed-promo-group"),"options-list":n("options-list"),"page-header-branding":n("page-header-branding"),"page-header":n("page-header"),"partner-promo":n("partner-promo"),"person-bio":n("person-bio"),pointer:n("pointer"),"primary-header":n("primary-header"),"promo-group-list-items":n("promo-group-list-items"),"promo-group-more-stories":n("promo-group-more-stories"),"promo-group-without-container":n("promo-group-without-container"),"promo-group":n("promo-group"),"promo-index":n("promo-index"),"promo-module":n("promo-module"),"promo-unit-basic":n("promo-unit-basic"),"promo-unit-end":n("promo-unit-end"),"promo-unit-layout-alternative":n("promo-unit-layout-alternative"),"promo-unit-layout-clip":n("promo-unit-layout-clip"),"promo-unit-layout-event":n("promo-unit-layout-event"),"promo-unit-layout-standard":n("promo-unit-layout-standard"),"promo-unit-start":n("promo-unit-start"),"promo-unit":n("promo-unit"),"responsive-image-data-element-with-icon":n("responsive-image-data-element-with-icon"),"responsive-image-data-element":n("responsive-image-data-element"),"responsive-image-lazy-load-placeholder":n("responsive-image-lazy-load-placeholder"),"responsive-image-overlay":n("responsive-image-overlay"),"responsive-image-tag":n("responsive-image-tag"),"responsive-image-wrapper":n("responsive-image-wrapper"),"responsive-image":n("responsive-image"),"search-results-status":n("search-results-status"),"secondary-content-destination-results":n("secondary-content-destination-results"),"secondary-content-standard":n("secondary-content-standard"),"secondary-content-story-simple":n("secondary-content-story-simple"),"secondary-content-story":n("secondary-content-story"),"section-header":n("section-header"),"series-box":n("series-box"),"share-tool-item":n("share-tool-item"),"share-tools-content":n("share-tools-content"),"share-tools-expandable-button-close":n("share-tools-expandable-button-close"),"share-tools-expandable":n("share-tools-expandable"),"share-tools":n("share-tools"),"slideshow-footer":n("slideshow-footer"),"sg-controls":n("sg-controls"),"sg-end-slate-mpu":n("sg-end-slate-mpu"),"sg-end-slate-promo-group-items":n("sg-end-slate-promo-group-items"),"sg-end-slate-related-galleries":n("sg-end-slate-related-galleries"),"sg-end-slate":n("sg-end-slate"),"sg-horizontal-banner":n("sg-horizontal-banner"),"sg-info-button":n("sg-info-button"),"sg-main":n("sg-main"),"sg-prev-next":n("sg-prev-next"),"sg-progress":n("sg-progress"),"sg-share-tools-button-close":n("sg-share-tools-button-close"),"sg-share-tools-content":n("sg-share-tools-content"),"sg-share-tools":n("sg-share-tools"),"sg-slide-ambient-video":n("sg-slide-ambient-video"),"sg-slide-image-background":n("sg-slide-image-background"),"sg-slide-image-inline":n("sg-slide-image-inline"),"sg-slide-image":n("sg-slide-image"),"sg-slide-layout-image-only":n("sg-slide-layout-image-only"),"sg-slide-layout-overlay":n("sg-slide-layout-overlay"),"sg-slide-layout-sidebar":n("sg-slide-layout-sidebar"),"sg-slide-layout-video":n("sg-slide-layout-video"),"sg-slide-video-caption":n("sg-slide-video-caption"),"sg-slide-video":n("sg-slide-video"),"sg-slides":n("sg-slides"),"sg-spinner":n("sg-spinner"),"sg-splash-primary":n("sg-splash-primary"),"sg-splash-scroll":n("sg-splash-scroll"),"sg-splash-secondary":n("sg-splash-secondary"),"sg-splash-start":n("sg-splash-start"),"sg-splash":n("sg-splash"),"sg-start-overlay":n("sg-start-overlay"),"sg-transition-overlay":n("sg-transition-overlay"),"app-cta":n("app-cta"),"app-download":n("app-download"),"button-app-store":n("button-app-store"),"button-google-play":n("button-google-play"),catch:n("catch"),"continue-promo":n("continue-promo"),"source-attribution":n("source-attribution"),"standard-image-tag":n("standard-image-tag"),"start-end-date":n("start-end-date"),"story-content":n("story-content"),"story-page-related-footer":n("story-page-related-footer"),"super-section-ad-slot-mpu-primary":n("super-section-ad-slot-mpu-primary"),"super-section-ad-slot-mpu-secondary":n("super-section-ad-slot-mpu-secondary"),"super-section-leaderboard":n("super-section-leaderboard"),"super-section-primary-content-meta-data":n("super-section-primary-content-meta-data"),"super-section-secondary-content-meta-data":n("super-section-secondary-content-meta-data"),"super-section-secondary-content-story":n("super-section-secondary-content-story"),"super-section-story-content":n("super-section-story-content"),"super-section-story-contents":n("super-section-story-contents"),"super-section-story-detail":n("super-section-story-detail"),"topbar-menu-desktop":n("topbar-menu-desktop"),"topbar-menu-mobile":n("topbar-menu-mobile"),"topbar-menu-noscript":n("topbar-menu-noscript"),"topbar-menu-toggle":n("topbar-menu-toggle"),"topbar-menu":n("topbar-menu"),topbar:n("topbar"),"twitter-feed":n("twitter-feed"),"two-column":n("two-column"),"video-player-prototype":n("video-player-prototype"),magnify:n("magnify"),"stand-alone-video-element":n("stand-alone-video-element"),"video-lead":n("video-lead"),"vpp-additional-controls":n("vpp-additional-controls"),"vpp-control-panel-metadata":n("vpp-control-panel-metadata"),"vpp-control-panel":n("vpp-control-panel"),"vpp-clip-metadata-duration":n("vpp-clip-metadata-duration"),"vpp-clip-metadata":n("vpp-clip-metadata"),"vpp-clip-preview-image-item":n("vpp-clip-preview-image-item"),"vpp-clip-promo-icon":n("vpp-clip-promo-icon"),"vpp-clip-promo-image":n("vpp-clip-promo-image"),"vpp-clip-promo-status":n("vpp-clip-promo-status"),"vpp-clip-promo":n("vpp-clip-promo"),"vpp-clip-viewer-player":n("vpp-clip-viewer-player"),"vpp-clip-viewer-preview-image":n("vpp-clip-viewer-preview-image"),"vpp-clip-viewer-preview":n("vpp-clip-viewer-preview"),"vpp-clip-viewer":n("vpp-clip-viewer"),"vpp-main":n("vpp-main"),"vpp-play-control":n("vpp-play-control"),"vpp-playlist-metadata-author":n("vpp-playlist-metadata-author"),"vpp-playlist-metadata":n("vpp-playlist-metadata"),"vpp-playlist":n("vpp-playlist"),"vpp-skip-control":n("vpp-skip-control"),"vpp-smp-placeholder":n("vpp-smp-placeholder"),"vpp-video-player":n("vpp-video-player"),"vpp-video":n("vpp-video"),youtube:n("youtube"),"weather-forecast-clean":n("weather-forecast-clean"),"weather-forecast-header":n("weather-forecast-header"),"weather-forecast-temperature":n("weather-forecast-temperature"),"weather-forecast-toggle":n("weather-forecast-toggle"),"weather-forecast":n("weather-forecast"),"wrapped-mpu-deferred":n("wrapped-mpu-deferred"),"wrapped-mpu":n("wrapped-mpu")}}),require([],function(){return String.prototype.ucfirst=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String}),define("extension/String",function(){}),define("lib/jquery.inview",["jquery"],function(t){!function(t){function e(){var e,n,i={height:l.innerHeight,width:l.innerWidth};return i.height||!(e=r.compatMode)&&t.support.boxModel||(n="CSS1Compat"===e?c:r.body,i={height:n.clientHeight,width:n.clientWidth}),i}function n(){return{top:l.pageYOffset||c.scrollTop||r.body.scrollTop,left:l.pageXOffset||c.scrollLeft||r.body.scrollLeft}}function i(){var i,r=t(),l=0;if(t.each(s,function(t,e){var n=e.data.selector,i=e.$element;r=r.add(n?i.find(n):i)}),i=r.length)for(o=o||e(),a=a||n();l<i;l++)if(t.contains(c,r[l])){var d,u,p,h=t(r[l]),m={height:h.height(),width:h.width()},f=h.offset(),g=h.data("inview");if(!a||!o)return;f.top+m.height>a.top&&f.top<a.top+o.height&&f.left+m.width>a.left&&f.left<a.left+o.width?(d=a.left>f.left?"right":a.left+o.width<f.left+m.width?"left":"both",u=a.top>f.top?"bottom":a.top+o.height<f.top+m.height?"top":"both",p=d+"-"+u,g&&g===p||h.data("inview",p).trigger("inview",[!0,d,u])):g&&h.data("inview",!1).trigger("inview",[!1])}}var o,a,s={},r=document,l=window,c=r.documentElement,d=t.expando;t.event.special.inview={add:function(e){s[e.guid+"-"+this[d]]={data:e,$element:t(this)}},remove:function(t){try{delete s[t.guid+"-"+this[d]]}catch(t){}}},t(l).bind("scroll resize",function(){o=a=null}),!c.addEventListener&&c.attachEvent&&c.attachEvent("onfocusin",function(){a=null}),setInterval(i,250)}(t)}),define("lib/jquery.getSelector",["jquery"],function(t){!function(t){var e=function(t){for(pieces=[];t&&void 0!==t.tagName;t=t.parentNode){if(t.className){var e=t.className.split(" ");for(var n in e)e.hasOwnProperty(n)&&e[n]&&(pieces.unshift(e[n]),pieces.unshift("."))}t.id&&!/\s/.test(t.id)&&(pieces.unshift(t.id),pieces.unshift("#")),pieces.unshift(t.tagName),pieces.unshift(" > ")}return pieces.slice(1).join("")};t.fn.getSelector=function(n){return!0===n?e(this[0]):t.map(this,function(t){return e(t)})}}(t)}),define("lib/jquery.dataDom",["jquery","extension/String"],function(t,e){t.fn.dataDom=function(t,e){var n,i,o="";if(void 0!==e){for(n=t.split("-"),i=0;i<n.length;i++)o+=0!=i?n[i].ucfirst():n[i];t="data-"+t,this.data(o,e),this.attr(t,e)}}}),define("util/getQuadrentOfCoordinateInContainer",["jquery"],function(t){var e=function(t,e,n){return t>=e&&t<=n},n=function(t,n){return!(!e(t.x,n.left,n.right)||!e(t.y,n.top,n.bottom))},i=function(t){var e={left:t.left,right:t.left+(t.right-t.left)/3,top:t.top,bottom:t.top+(t.bottom-t.top)/3},n={left:e.right,right:e.right+(t.right-t.left)/3,top:t.top,bottom:e.bottom},i={left:n.right,right:t.right,top:t.top,bottom:e.bottom},o={left:e.left,right:e.right,top:e.bottom,bottom:e.bottom+(t.bottom-t.top)/3},a={left:n.left,right:n.right,top:o.top,bottom:o.bottom},s={left:i.left,right:i.right,top:o.top,bottom:o.bottom},r={left:e.left,right:e.right,top:o.bottom,bottom:t.bottom};return{"top-left":e,"top-center":n,"top-right":i,"mid-left":o,"mid-center":a,"mid-right":s,"bottom-left":r,"bottom-center":{left:n.left,right:n.right,top:r.top,bottom:r.bottom},"bottom-right":{left:i.left,right:i.right,top:r.top,bottom:r.bottom}}};return function(t,e){var o=i(e);for(var a in o){var s=o[a];if(n(t,s))return a}return!1}}),define("common/util/getter-setter",["lodash"],function(t){function e(){this.data={}}return t.extend(e.prototype,{set:function(t){this.data=t},setProperty:function(t,e){this.data[t]=e},get:function(){return this.data}}),e}),define("common/config",["lodash","common/util/extends","common/util/getter-setter"],function(t,e,n){function i(){n.call(this)}return e(i,n,{}),new i}),define("model/exposed-config",["lodash","common/config"],function(t,e){return t.has(window,"_config")?(t.has(_config,"module")&&t.has(_config.module,"domain")&&(_config.api={version:"v1",url:"/"+_config.module.domain+"/data"}),_config):{}}),define("common/util/logger",["lodash","common/util/extends","common/util/getter-setter"],function(t,e,n){function i(){n.call(this),this.data={debug:function(){},warn:function(){},info:function(){},error:function(){}}}return e(i,n,{}),new i}),define("common/util/accessor",["lodash"],function(t){function e(t,e){this.init(t,e)}return t.extend(e.prototype,{init:function(e,n){t.extend(this,e)},get:function(e,n){return t.has(this,e)&&!t.isNull(this[e])?this[e]:!t.isUndefined(n)&&n},set:function(t,e){return this[t]=e,this.get(t)},delete:function(e){t.has(this,e)&&delete this[e]},map:function(e,n){t.has(this,e)&&this[e]&&this.set(n,this.get(e)),this.delete(e)}}),e}),define("common/entity/factory",["lodash"],function(t){function e(e){this.entities={},t.each(e,function(t,e){this.set(e,t)},this)}return t.extend(e.prototype,{set:function(t,e){this.entities[t]=e},get:function(e){return!!t.has(this.entities,e)&&this.entities[e]},create:function(t,e,n){var i=this.get(t);if(i)return new i(e,n);throw new Error("Function EntityFactory.create cannot find "+t+" entity")},canProvide:function(e){return t.every(e,function(e){return!t.isUndefined(this.entities[e])},this)}}),e}),define("common/entity/base",["lodash","common/util/extends","common/util/accessor","common/entity/factory"],function(t,e,n,i,o){function a(e,i){var o={};n.call(this,t.extend(o,e),i)}return e(a,n,{init:function(e,o){t.isUndefined(e)||n.prototype.init.apply(this,arguments),(t.isUndefined(o)||t.isUndefined(o.canProvide))&&(o=new i),this.setEntityFactory(o)},getClass:function(){return this.get("class")?this.get("class"):""},setClass:function(t){this.class=t},entityFactoryDependencies:[],setEntityFactory:function(t){if(!t.canProvide(this.entityFactoryDependencies))throw new Error("BaseEntity.setEntityFactory called factory must support methods ("+this.entityFactoryDependencies.join(",")+")");this.entityFactory=t},getEntityFactory:function(){return this.entityFactory}}),a}),define("common/entity/config",["lodash","common/util/extends","common/entity/base"],function(t,e,n){function i(t){n.call(this,t)}return e(i,n,{getDefaults:function(){return this.get("defaults",{})}}),i}),define("common/util/interface",["lodash"],function(t){var e=function(t,e){if(2!=arguments.length)throw new Error("Interface constructor called with "+arguments.length+"arguments, but expected exactly 2.");this.name=t,this.methods=[];for(var n=0,i=e.length;n<i;n++){if("string"!=typeof e[n])throw new Error("Interface constructor expects method names to be passed in as a string.");this.methods.push(e[n])}};return e.ensureImplements=function(t){if(arguments.length<2)throw new Error("Function Interface.ensureImplements called with "+arguments.length+"arguments, but expected at least 2.");for(var n=1,i=arguments.length;n<i;n++){var o=arguments[n];if(o.constructor!==e)throw new Error("Function Interface.ensureImplements expects arguments two and above to be instances of Interface.");for(var a=0,s=o.methods.length;a<s;a++){var r=o.methods[a];if(!t[r]||"function"!=typeof t[r])throw new Error("Function Interface.ensureImplements:  "+t.constructor.name+" does not implement the "+o.name+" interface. Method "+r+" was not found.")}}},e}),define("common/interface/entity/base",["lodash","common/util/interface"],function(t,e){return new e("BaseEntity",["get","set","map","getClass","setClass"])}),define("common/view/model-v2/base",["lodash","common/util/logger","signals","common/entity/config","common/util/interface","common/entity/base","common/entity/factory","common/interface/entity/base"],function(t,e,n,i,o,a,s,r){var l=function(e,i){t.isUndefined(e)&&(e=new a),this.setConfig(i,!1),t.extend(this,this.getConfig().getDefaults()),this.setEntity(e),this.signals={updated:new n.Signal}};return t.extend(l.prototype,{entityInterface:r,setConfig:function(t,e){this.config=new i(t),!0===e&&this.updateViewData()},getConfig:function(){return this.config},updateViewData:function(){this.setViewData(),this.signals.updated.dispatch(this.getViewData())},setViewData:function(){this.viewData=this.getEntity()},getViewData:function(){return this.viewData},setEntity:function(t){o.ensureImplements(t,this.entityInterface),this.entity=t},getEntity:function(){return this.entity},setSourceData:function(t,e){return!1!==e&&this.getEntity().init(t,this.getEntity().getEntityFactory()),this.updateViewData(),this.getViewData()},subscribe:function(t,e){switch(t){case"update":this.signals.updated.add(e)}}}),l}),define("common/interface/entity/link",["lodash","common/util/interface","common/interface/entity/base"],function(t,e,n){return new e("Link",n.methods.concat(["getId","getTitle","getURL","getImage"]))}),
define("common/interface/entity/promo",["lodash","common/util/interface","common/interface/entity/link"],function(t,e,n){return new e("PromoEntity",n.methods.concat(["getContext","getShortName","getClientName","getSummary","setSummary","getSummaryLong","getIconType","getType","getRelatedLinks"]))}),define("common/interface/entity/document/base",["lodash","common/util/interface","common/interface/entity/promo"],function(t,e,n){return new e("DocumentEntity",n.methods.concat(["getKeywords","getAuthor","getPartner","getAdZoneId","getAdSlots","getSearchTerms","getError","areAdvertsDisabled"]))}),define("common/util/request",["lodash","common/util/extends","common/util/getter-setter"],function(t,e,n){function i(){n.call(this),this.data={isUK:{},contentRegion:!1,request:{}}}return e(i,n,{}),new i}),define("common/interface/entity/image",["lodash","common/util/interface","common/interface/entity/base"],function(t,e,n){return new e("ImageEntity",n.methods.concat(["getId","getURL","getTitle","getWidth","getHeight","getSynopsisShort","getSynopsisMedium","getSynopsisLong","getIconType","setIconType","getReplaceURL","setReplaceURL"]))}),define("common/interface/entity/analytics/interaction-element-meta-data",["lodash","common/util/interface","common/interface/entity/base"],function(t,e,n){return new e("AnalyticsInteractionElementMetaData",n.methods.concat(["getElementId","getEvent","getChannelName","getChannelLocation","getElementName","getElementType","getElementPosition","getTotalElementCount","getAdditionalData","getSection","getPageType","getInteractionType","getTrackingMethod"]))}),define("common/view/model-v2/analytics/interaction-element-meta-data",["lodash","common/util/extends","common/view/model-v2/base","common/interface/entity/analytics/interaction-element-meta-data"],function(t,e,n,i){function o(){n.apply(this,arguments)}return e(o,n,{entityInterface:i,setViewData:function(){var t=this.getEntity();this.viewData={"element-id":t.getElementId(),event:t.getEvent(),"channel-name":t.getChannelName(),"channel-location":t.getChannelLocation(),"element-name":t.getElementName(),"element-type":t.getElementType(),"element-position":t.getElementPosition(),"total-element-count":t.getTotalElementCount(),"additional-data":t.getAdditionalData(),section:t.getSection(),"page-type":t.getPageType(),"interaction-type":t.getInteractionType(),"tracking-method":t.getTrackingMethod()}}}),o}),define("common/entity/vanilla/analytics/interaction-element-meta-data",["lodash","common/util/extends","common/entity/base"],function(t,e,n){function i(e){var i={elementId:!1,event:"click",channelName:!1,channelLocation:!1,elementName:!1,elementType:!1,elementPosition:!1,totalElementCount:!1,additionalData:!1,section:!1,pageType:!1,interactionType:!1,trackingMethod:!1};n.call(this,t.extend(i,e))}return e(i,n,{getElementId:function(){return this.elementId},getEvent:function(){return this.event},getChannelName:function(){return this.channelName},getChannelLocation:function(){return this.channelLocation},getElementName:function(){return this.elementName},getElementType:function(){return this.elementType},getElementPosition:function(){return this.elementPosition},getTotalElementCount:function(){return this.totalElementCount},getAdditionalData:function(){return this.additionalData},getSection:function(){return this.section},getPageType:function(){return this.pageType},getInteractionType:function(){return this.interactionType},getTrackingMethod:function(){return this.trackingMethod}}),i}),define("common/interface/entity/analytics/module-meta-data",["lodash","common/util/interface","common/interface/entity/base"],function(t,e,n){return new e("AnalyticsModuleMetaData",n.methods.concat(["getModule"]))}),define("common/view/model-v2/analytics/module-meta-data",["lodash","common/util/extends","common/view/model-v2/base","common/interface/entity/analytics/module-meta-data"],function(t,e,n,i){function o(){n.apply(this,arguments)}return e(o,n,{entityInterface:i,setViewData:function(){var t=this.getEntity();this.viewData={module:t.getModule()}}}),o}),define("common/entity/vanilla/analytics/module-meta-data",["lodash","common/util/extends","common/entity/base"],function(t,e,n){function i(e){var i={module:!1};n.call(this,t.extend(i,e))}return e(i,n,{getModule:function(){return this.module}}),i}),define("common/view/model-v2/analytics/factory",["lodash","common/util/logger","common/view/model-v2/analytics/interaction-element-meta-data","common/entity/vanilla/analytics/interaction-element-meta-data","common/view/model-v2/analytics/module-meta-data","common/entity/vanilla/analytics/module-meta-data"],function(t,e,n,i,o,a){return{getModuleMetadata:function(t){try{if("string"!=typeof t||t.length<1)throw new Error("moduleName is not defined");return new o(new a({module:t}),{}).setSourceData({},!1)}catch(t){return e.get().error(t),{}}},getElementMetadata:function(t,o,a){try{if("string"!=typeof t||t.length<1)throw new Error("elementId is not defined");if("string"!=typeof o||o.length<1)throw new Error("elementName is not defined");var s={elementId:t,elementName:o};return"string"==typeof a&&a.length>0&&(s.elementType=a),new n(new i(s),{}).setSourceData({},!1)}catch(t){return e.get().error(t),{}}}}}),define("common/view/model-v2/image/html-element",["lodash","common/config","common/util/extends","common/view/model-v2/base","common/interface/entity/image","templates","common/util/logger","common/view/model-v2/analytics/factory"],function(t,e,n,i,o,a,s,r){function l(){i.apply(this,arguments)}return n(l,i,{entityInterface:o,setViewData:function(){var n=this.getEntity(),i=(n.getHeight(),this.getEntity().getURL()),o="{x}_{y}",a=this.getImageFormat(),s=this.getConfig().get("captionStyle","short"),l={},c=n.getSynopsisShort(),d=e.get(),u=this.getConfig().get("imageAnalyticsConfig",!1);if(this.getConfig().get("travelCaptionOverride",!1)&&(c=n.getTitle()),l["use-image-tag"]=this.getConfig().get("useImageTag",!1),l["anchor-title"]=c,l["icon-type"]=n.getIconType(),l["replace-url"]=n.getReplaceURL(),l.class=this.getConfig().get("class",this.getEntity().getClass()),l["is-portrait"]=a.isPortrait,l.title=n.getTitle(),l.alt=this.getAltTag(c,n.getSynopsisLong()),l["lazy-load"]=this.getConfig().get("lazyLoad",!1),t.has(a,"useOriginal")&&!0===a.useOriginal?o="original":t.has(a,"x")&&t.has(a,"y")?(o=o.replace("{x}",a.x),o=o.replace("{y}",a.y)):o=!1,i&&!1!==o){var p="";!0===t.has(d,"image_recipe.watermarking_enabled")&&!0===d.image_recipe.watermarking_enabled&&!0===this.getConfig().get("isWatermarked",!1)&&(p+="wm/"),t.has(d,"image_recipe.recipe_prefix")&&(p+=d.image_recipe.recipe_prefix),o=p+o,i=i.replace("$recipe",o),l.url=i,l.width=a.x,l.height=a.y,l["is-portrait"]=a.isPortrait}if(this.getConfig().get("includeCaption",!0)){switch(s){case"long":l.caption=this.replaceLongSynopsisLinks(n.getSynopsisLong()),l["caption-title"]=c;break;default:l.caption=n.getSynopsisMedium()}l.caption=l.caption.replace(/\r?\n/g,"<br />")}this.getConfig().get("additional-wrapper-class")&&(l["additional-wrapper-class"]=this.getConfig().get("additional-wrapper-class")),!0===this.getConfig().get("showBrandedBorder",!1)&&(l["additional-wrapper-class"]="branded-border"),!1!==u&&(l["analytics-element-metadata"]=r.getElementMetadata(u.elementId,u.elementName,u.elementType)),this.viewData=l},getImageFormat:function(){var e=this.getEntity(),n=e.getWidth(),i=e.getHeight(),o=this.getConfig().get("format"),a={x:"130",y:"73"},s={x:"90",y:"130"},r=!1;return t.has(o,"useOriginal")&&!0===o.useOriginal?{useOriginal:!0}:(t.has(o,"landscape")&&(a=o.landscape),t.has(o,"portrait")&&(s=o.portrait),t.has(o,"portraitPermitted")&&(r=o.portraitPermitted),n<i&&r?(s.isPortrait=!0,s):(a.isPortrait=!1,a))},getClass:function(){return""!==this.getEntity().getClass()?this.getEntity().getClass():this.getConfig().get("class",this.getEntity().getClass())},replaceLongSynopsisLinks:function(e){var n=/\*?\*?\[.[^\(\)]+\]\(.[^\(\)]+\)\*?\*?/g,i=e.match(n);return t.each(i,function(t){var n=/\[.+\]/,i=/\(.+\)/,o=t.match(n),s=t.match(i);if(null!==o&&o.length>0&&null!==s&&s.length>0){o=o[0],s=s[0];var r=o.substr(1,o.length-2),l=s.substr(1,s.length-2),c=a["anchor-tag"]({link:l,text:r});e=e.replace(t,c)}},this),e},getAltTag:function(t,e){return-1===t.toLowerCase().indexOf("credit:")?t+" "+this.getImageCredit(e):t},getImageCredit:function(t){var e,n=/\([^\(\)]+\)$/g;if(null!==(e=t.match(n))&&e.length>0){var i=e[e.length-1];return i=i.slice(0,1)+"Credit: "+i.slice(1,i.length)}return""}}),l}),define("common/view/model-v2/document/meta-data/meta-tags",["lodash","common/util/logger","common/util/extends","common/view/model-v2/base","common/view/model-v2/image/html-element","common/interface/entity/document/base","common/config"],function(t,e,n,i,o,a,s){function r(){i.apply(this,arguments)}return n(r,i,{entityInterface:a,imageConfig:{format:{landscape:{x:"624",y:"351"}}},setViewData:function(){this.viewData={title:this.getTitle(),"short-title":this.getEntity().getTitle(),image:this.getImage(),author:!1,url:this.getEntity().getURL(),description:this.getEntity().getSummary(),video:this.getEntity().get("video"),type:this.getPageType(),"og-type":this.getOGType(),keywords:this.getKeywords(),"no-index":this.shouldIndex(),"alternate-links":this.getAlternateLinks(),"twitter-username":this.getTwitterUserName(),"canonical-url":this.getCanonicalUrl(),"fb-page-ids":this.getFacebookPageIds()},this.getEntity().getAuthor()&&(this.viewData.author=this.getEntity().getAuthor().getName())},getPageType:function(){return this.getEntity().getType()},getOGType:function(){var t=this.getEntity().getType();return t=""===t?"website":"article"},getImage:function(){return!!this.getEntity().getImage()&&new o(this.getEntity().getImage(),this.imageConfig).setSourceData({},!1)},getTitle:function(){var e=this.getEntity(),n=["BBC"];return t.has(this.getConfig(),"module")&&t.has(this.getConfig().module,"name")&&n.push(this.getConfig().module.name),n.push(e.getTitle()),n.join(" - ")},getKeywords:function(){var e=this.getEntity().getKeywords(),n=[];return t.each(e,function(t,e){"1"==t?n.push(e):n.push(t)}),n.join(", ")},getAlternateLinks:function(){var e=this.getConfig(),n=e.get("alternate-links",{}),i=[];return n.is_enabled&&t.has(n,"links")&&t.each(n.links,function(t,e){i.push({lang:e,URL:t})},this),i},getCanonicalUrl:function(){var e=this.getConfig(),n=e.get("canonical-url",!1);return!!(t.has(n,"is_enabled")&&n.is_enabled&&t.has(n,"url"))&&e["canonical-url"]},shouldIndex:function(){return!0===this.getConfig().get("robotsNoIndex",!1)},getTwitterUserName:function(){var e=s.get();return!!t.has(e,"socialLinks.twitter.username")&&e.socialLinks.twitter.username},getFacebookPageIds:function(){var e=s.get();return!(!t.has(e,"facebookPageIds")||"string"!=typeof e.facebookPageIds)&&e.facebookPageIds}}),r}),define("common/entity/habitat/base",["lodash","common/util/extends","common/entity/base"],function(t,e,n){function i(){n.apply(this,arguments)}return e(i,n,{init:function(t,e){n.prototype.init.apply(this,arguments),this.mapProperties(),this.getId()&&this.set("shortId",this.generateShortId())},mapProperties:function(){var e=this.get("Content");t.extend(e,this.get("Metadata",{})),t.each(e,function(e,n){t.isString(n)&&(n=n.substr(0,1).toLowerCase()+n.substr(1),this.set(n,e))},this),this.map("Urn","urn"),this.map("entity","entityType")},getEntityType:function(){return this.entityType},getId:function(t){return t?this.shortId:this.id},generateShortId:function(){var e=this.getId().split("/");return t.last(e)},getArrayNestedAsset:function(e){var n=this.get(e,!1);if(t.isArray(n)&&n.length>0){var i=n[0];return(!t.isString(i)||"urn:"!==i.substr(0,4))&&n[0]}return!1}}),i}),define("common/entity/habitat/image/base",["lodash","common/util/extends","common/entity/habitat/base","common/util/logger"],function(t,e,n,i){function o(e){var i={URL:!1,templateUrl:"",sourceUrl:"",title:"",sourceWidth:2,sourceHeight:1,synopsisShort:"",synopsisMedium:"",synopsisLong:"",class:"",replaceUrl:"",iconType:""};n.call(this,t.extend(i,e)),this.setURL(this.templateUrl,this.sourceUrl)}var a=function(t){return t.split(".").pop()};return e(o,n,{setURL:function(t,e){var n=a(t),i=a(e);n.length>0&&i.length>0&&n!==i?this.URL=t.substr(0,t.lastIndexOf("."))+"."+i:this.URL=t},getURL:function(){return this.URL},getTitle:function(){return this.title},getWidth:function(){return this.sourceWidth},getHeight:function(){return this.sourceHeight},getSynopsisShort:function(){return this.synopsisShort},getSynopsisMedium:function(){return this.synopsisMedium},getSynopsisLong:function(){return this.synopsisLong},getIconType:function(){return this.iconType},setIconType:function(t){this.iconType=t},getReplaceURL:function(){return this.replaceUrl},setReplaceURL:function(t){this.replaceUrl=t}}),o}),function(){var t=function(t){function e(t,e){if(t.indexOf)return t.indexOf(e);for(var n=t.length;n--;)if(t[n]===e)return n;return-1}function n(t,n){var i=e(t,n);-1!==i&&t.splice(i,1)}function i(t,e){return"[object "+e+"]"===Object.prototype.toString.call(t)}function o(t){return i(t,"RegExp")}function a(t){return i(t,"Array")}function s(t){return"function"==typeof t}function r(t){return null===t||"null"===t?null:"true"===t||"false"!==t&&(t===m||"undefined"===t?m:""===t||isNaN(t)?t:parseFloat(t))}function l(t){for(var e=t.length,n=[];e--;)n[e]=r(t[e]);return n}function c(t,e){for(var n,i,o,s,l=(t||"").replace("?","").split("&"),c=-1,d={};i=l[++c];)n=i.indexOf("="),s=i.substring(0,n),o=decodeURIComponent(i.substring(n+1)),!1!==e&&(o=r(o)),s in d?a(d[s])?d[s].push(o):d[s]=[d[s],o]:d[s]=o;return d}function d(){this.bypassed=new t.Signal,this.routed=new t.Signal,this._routes=[],this._prevRoutes=[],this._piped=[],this.resetState()}function u(e,n,i,a){var s=o(e),r=a.patternLexer;this._router=a,this._pattern=e,this._paramsIds=s?null:r.getParamIds(e),this._optionalParamsIds=s?null:r.getOptionalParamsIds(e),this._matchRegexp=s?e:r.compilePattern(e,a.ignoreCase),this.matched=new t.Signal,this.switched=new t.Signal,n&&this.matched.add(n),this._priority=i||0}var p,h,m;return h=""===/t(.+)?/.exec("t")[1],d.prototype={greedy:!1,greedyEnabled:!0,ignoreCase:!0,ignoreState:!1,shouldTypecast:!1,normalizeFn:null,resetState:function(){this._prevRoutes.length=0,this._prevMatchedRequest=null,this._prevBypassedRequest=null},create:function(){return new d},addRoute:function(t,e,n){var i=new u(t,e,n,this);return this._sortedInsert(i),i},removeRoute:function(t){n(this._routes,t),t._destroy()},removeAllRoutes:function(){for(var t=this.getNumRoutes();t--;)this._routes[t]._destroy();this._routes.length=0},parse:function(t,e){if(t=t||"",e=e||[],this.ignoreState||t!==this._prevMatchedRequest&&t!==this._prevBypassedRequest){var n,i=this._getMatchedRoutes(t),o=0,a=i.length;if(a)for(this._prevMatchedRequest=t,this._notifyPrevRoutes(i,t),this._prevRoutes=i;o<a;)n=i[o],n.route.matched.dispatch.apply(n.route.matched,e.concat(n.params)),n.isFirst=!o,this.routed.dispatch.apply(this.routed,e.concat([t,n])),o+=1;else this._prevBypassedRequest=t,this.bypassed.dispatch.apply(this.bypassed,e.concat([t]));this._pipeParse(t,e)}},_notifyPrevRoutes:function(t,e){for(var n,i=0;n=this._prevRoutes[i++];)n.route.switched&&this._didSwitch(n.route,t)&&n.route.switched.dispatch(e)},_didSwitch:function(t,e){for(var n,i=0;n=e[i++];)if(n.route===t)return!1;return!0},_pipeParse:function(t,e){for(var n,i=0;n=this._piped[i++];)n.parse(t,e)},getNumRoutes:function(){return this._routes.length},_sortedInsert:function(t){var e=this._routes,n=e.length;do{--n}while(e[n]&&t._priority<=e[n]._priority);e.splice(n+1,0,t)},_getMatchedRoutes:function(t){for(var e,n=[],i=this._routes,o=i.length;(e=i[--o])&&((!n.length||this.greedy||e.greedy)&&e.match(t)&&n.push({route:e,params:e._getParamsArray(t)}),this.greedyEnabled||!n.length););return n},pipe:function(t){this._piped.push(t)},unpipe:function(t){n(this._piped,t)},toString:function(){return"[crossroads numRoutes:"+this.getNumRoutes()+"]"}},p=new d,p.VERSION="0.12.2",p.NORM_AS_ARRAY=function(t,e){return[e.vals_]},p.NORM_AS_OBJECT=function(t,e){return[e]},u.prototype={greedy:!1,rules:void 0,match:function(t){return t=t||"",this._matchRegexp.test(t)&&this._validateParams(t)},_validateParams:function(t){var e,n=this.rules,i=this._getParamsObject(t);for(e in n)if("normalize_"!==e&&n.hasOwnProperty(e)&&!this._isValidParam(t,e,i))return!1;return!0},_isValidParam:function(t,n,i){var r=this.rules[n],l=i[n],c=!1,d=0===n.indexOf("?");return null==l&&this._optionalParamsIds&&-1!==e(this._optionalParamsIds,n)?c=!0:o(r)?(d&&(l=i[n+"_"]),c=r.test(l)):a(r)?(d&&(l=i[n+"_"]),c=this._isValidArrayRule(r,l)):s(r)&&(c=r(l,t,i)),c},_isValidArrayRule:function(t,n){if(!this._router.ignoreCase)return-1!==e(t,n);"string"==typeof n&&(n=n.toLowerCase());for(var i,o=t.length;o--;)if(i=t[o],("string"==typeof i?i.toLowerCase():i)===n)return!0;return!1},_getParamsObject:function(t){for(var n,i,o=this._router.shouldTypecast,a=this._router.patternLexer.getParamValues(t,this._matchRegexp,o),s={},l=a.length;l--;)i=a[l],this._paramsIds&&(n=this._paramsIds[l],0===n.indexOf("?")&&i&&(s[n+"_"]=i,i=c(i,o),a[l]=i),h&&""===i&&-1!==e(this._optionalParamsIds,n)&&(i=void 0,a[l]=i),s[n]=i),s[l]=i;return s.request_=o?r(t):t,s.vals_=a,s},_getParamsArray:function(t){var e=this.rules?this.rules.normalize_:null;return e=e||this._router.normalizeFn,e&&s(e)?e(t,this._getParamsObject(t)):this._getParamsObject(t).vals_},interpolate:function(t){var e=this._router.patternLexer.interpolate(this._pattern,t);if(!this._validateParams(e))throw new Error("Generated string doesn't validate against `Route.rules`.");return e},dispose:function(){this._router.removeRoute(this)},_destroy:function(){this.matched.dispose(),this.switched.dispose(),this.matched=this.switched=this._pattern=this._matchRegexp=null},toString:function(){return'[Route pattern:"'+this._pattern+'", numListeners:'+this.matched.getNumListeners()+"]"}},d.prototype.patternLexer=function(){function t(t,e){var n,i=[];for(t.lastIndex=0;n=t.exec(e);)i.push(n[1]);return i}function e(e){return t(p,e)}function n(e){return t(h.OP.rgx,e)}function i(t,e){return t=t||"",t&&(b===m?t=t.replace(d,""):b===g&&(t=t.replace(u,"")),t=o(t,"rgx","save"),t=t.replace(c,"\\$&"),t=o(t,"rRestore","res"),b===m&&(t="\\/?"+t)),b!==f&&(t+="\\/?"),new RegExp("^"+t+"$",e?"i":"")}function o(t,e,n){var i,o;for(o in h)h.hasOwnProperty(o)&&(i=h[o],t=t.replace(i[e],i[n]));return t}function s(t,e,n){var i=e.exec(t);return i&&(i.shift(),n&&(i=l(i))),i}function r(t,e){if(e=e||{},"string"!=typeof t)throw new Error("Route pattern should be a string.");var n=function(t,n){var i;if(n="?"===n.substr(0,1)?n.substr(1):n,null!=e[n]){if("object"==typeof e[n]){var o,s=[];for(var r in e[n])if(o=e[n][r],a(o))for(var l in o)"[]"==r.slice(-2)?s.push(encodeURI(r.slice(0,-2))+"[]="+encodeURI(o[l])):s.push(encodeURI(r+"="+o[l]));else s.push(encodeURI(r+"="+o));i="?"+s.join("&")}else i=String(e[n]);if(-1===t.indexOf("*")&&-1!==i.indexOf("/"))throw new Error('Invalid value "'+i+'" for segment "'+t+'".')}else{if(-1!==t.indexOf("{"))throw new Error("The segment "+t+" is required.");i=""}return i};return h.OS.trail||(h.OS.trail=new RegExp("(?:"+h.OS.id+")+$")),t.replace(h.OS.rgx,h.OS.save).replace(p,n).replace(h.OS.trail,"").replace(h.OS.rRestore,"/")}var c=/[\\.+*?\^$\[\](){}\/'#]/g,d=/^\/|\/$/g,u=/\/$/g,p=/(?:\{|:)([^}:]+)(?:\}|:)/g,h={OS:{rgx:/([:}]|\w(?=\/))\/?(:|(?:\{\?))/g,save:"$1{{id}}$2",res:"\\/?"},RS:{rgx:/([:}])\/?(\{)/g,save:"$1{{id}}$2",res:"\\/"},RQ:{rgx:/\{\?([^}]+)\}/g,res:"\\?([^#]+)"},OQ:{rgx:/:\?([^:]+):/g,res:"(?:\\?([^#]*))?"},OR:{rgx:/:([^:]+)\*:/g,res:"(.*)?"},RR:{rgx:/\{([^}]+)\*\}/g,res:"(.+)"},RP:{rgx:/\{([^}]+)\}/g,res:"([^\\/?]+)"},OP:{rgx:/:([^:]+):/g,res:"([^\\/?]+)?/?"}},m=1,f=2,g=3,b=m;return function(){var t,e;for(t in h)h.hasOwnProperty(t)&&(e=h[t],e.id="__CR_"+t+"__",e.save="save"in e?e.save.replace("{{id}}",e.id):e.id,e.rRestore=new RegExp(e.id,"g"))}(),{strict:function(){b=f},loose:function(){b=m},legacy:function(){b=g},getParamIds:e,getOptionalParamsIds:n,getParamValues:s,compilePattern:i,interpolate:r}}(),p};"function"==typeof define&&define.amd?define("crossroads",["signals"],t):"undefined"!=typeof module&&module.exports?module.exports=t(require("signals")):window.crossroads=t(window.signals)}(),define("common/view/entity-URL-router",["lodash","common/config","crossroads","common/util/logger"],function(t,e,n,i){var o;return{setRoutes:function(t){this.routes=t},getRoutes:function(t){return this.routes},init:function(e){var i=[];o=n.create(),o.ignoreState=!0,o.normalizeFn=n.NORM_AS_OBJECT,t.each(e,function(t){i.push({entityRoute:o.addRoute(t["entity-mapping"]),URLRoute:o.addRoute(t.route)})}),this.setRoutesMapping(e),this.setRoutes(i)},getFullURL:function(t){var e=this.getURL(t);return this.getDomain()+e},getFullURLWithQuery:function(t,e){var n=this.getURLWithQuery(t,e);return this.getDomain()+n},getURLWithQuery:function(e,n){var i="";return!1!==n?t.some(this.routes,function(t){if(!0===t.entityRoute.match(e))return i=t.URLRoute.interpolate({query:n}),!0},this):i=this.getURL(e),i},getDomain:function(){var n=e.get();return t.has(n,"domain")?"http://"+n.domain:""},getURL:function(e){var n="",i={};return t.some(this.routes,function(t){if(i=this.getParametersFromRouteForEntity(t,e))return n=t.URLRoute.interpolate(i),!0},this),n},setRoutesMapping:function(t){this.routesMapping=t},getRoutesMapping:function(){return this.routesMapping},getMappingFromIndex:function(e){var n=this.getRoutesMapping();return!!t.has(n,e)&&n[e]["entity-mapping"]},getFullURLWithIndex:function(t){var e=this.getURLWithIndex(t);return this.getDomain()+e},getURLWithIndex:function(t){var e=this.getMappingFromIndex(t);return!!e&&this.getURL(e)},getVideoEpisodeURL:function(e,n){var i=this.getURLParameters(e),o=e;return t.isObject(i)&&t.has(i,"id")&&(o=n+"/"+i.id),this.getURL(o)},getURLParameters:function(e){var n={};return t.some(this.routes,function(t){if(n=this.getParametersFromRouteForEntity(t,e))return!0},this),n},getParametersFromRouteForEntity:function(e,n){var i=["vals_","request_","0"],o=function(e,n){if(t.contains(i,n))return!0};return!0===e.entityRoute.match(n)&&t.omit(e.entityRoute._getParamsObject(n),o)},getEntityId:function(e,n,i){if(t.has(e,"module")&&t.has(e.module,"id"))return e.module.id+"/"+n+"/"+i},getWeatherForecastURL:function(n){var i=e.get(),o="";return t.has(i,"weather_api")&&t.has(i.weather_api,"full_forecast_url")&&(o=i.weather_api.full_forecast_url+n),o}}}),define("common/entity/vanilla/image",["lodash","common/util/extends","common/entity/base"],function(t,e,n){function i(e){var i={id:0,URL:"",title:"",width:2,height:1,synopsisShort:"",synopsisMedium:"",synopsisLong:"",replaceURL:"",iconType:""};n.call(this,t.extend(i,e))}return e(i,n,{getId:function(){return this.id},getURL:function(){return this.URL},getTitle:function(){return this.title},getWidth:function(){return this.width},getHeight:function(){return this.height},getSynopsisShort:function(){return this.synopsisShort},getSynopsisMedium:function(){return this.synopsisMedium},getSynopsisLong:function(){return this.synopsisLong},getIconType:function(){return this.iconType},setIconType:function(t){this.iconType=t},getReplaceURL:function(){return this.replaceURL},setReplaceURL:function(t){this.replaceURL=t}}),i}),define("common/helper/placeholder-images",["lodash","common/config","common/entity/vanilla/image"],function(t,e,n){return{get:function(i){var o=e.get();if(t.has(o,"images")){if(t.has(o.images,i))return new n(o.images[i]);if(t.has(o.images,"default"))return new n(o.images.default)}}}}),define("common/entity/habitat/link",["lodash","common/util/extends","common/entity/habitat/base","common/entity/habitat/image/base","common/view/entity-URL-router","common/helper/placeholder-images"],function(t,e,n,i,o,a){function s(e,i){var o={URL:"",shortURL:"",title:"",id:!1,image:!1};n.call(this,t.extend(o,e),i)}return e(s,n,{init:function(){n.prototype.init.apply(this,arguments),this.initURL()},initURL:function(){var t=o.getURL(this.getId());this.set("URL",t),this.set("shortURL",t)},initFullURL:function(){!1!==this.getId()?this.set("URL",o.getFullURL(this.getId())):this.set("URL",!1)},getURL:function(){return this.URL},getShortURL:function(){return this.shortURL},getTitle:function(){return this.title},getImage:function(){return this.image},initImage:function(t,e,n){var o;o=e?new i(e):a.get(n),this.set(t,o)}}),s}),define("common/entity/habitat/partner",["lodash","common/util/extends","common/entity/habitat/link"],function(t,e,n){function i(e){var i={partnerLogo:!1,readMorePromoImage:!1,title:"",description:"",URL:""};n.call(this,t.extend(i,e))}return e(i,n,{init:function(t){n.prototype.init.call(this,t),this.map("linkUrl","URL"),this.map("name","title"),this.initImage("partnerLogo",this.getArrayNestedAsset("assetImage")),this.initImage("image",this.getArrayNestedAsset("promoImage"))},getPartnerLogo:function(){return this.partnerLogo},getReadMorePromoImage:function(){return this.readMorePromoImage},getDescription:function(){return this.description}}),i}),define("common/entity/habitat/promo",["lodash","common/util/extends","common/entity/habitat/link","common/entity/habitat/image/base","common/view/entity-URL-router"],function(t,e,n,i,o){function a(e,i){var o={name:"",clientName:"",summary:"",type:"",iconType:"",context:!1,relatedLinks:!1};n.call(this,t.extend(o,e),i)}return e(a,n,{init:function(){n.prototype.init.apply(this,arguments)},getSummary:function(){return this.summary},setSummary:function(t){this.summary=t},getShortName:function(){return this.name},getClientName:function(){return this.clientName},getSummaryLong:function(){return this.getSummary()},getContext:function(){return this.context},getIconType:function(){return this.iconType},getType:function(){return this.type},getRelatedLinks:function(){return this.relatedLinks},setRelatedLinks:function(t){this.relatedLinks=t}}),a}),define("common/entity/habitat/campaign/promo",["lodash","common/util/extends","common/util/logger","common/entity/habitat/promo"],function(t,e,n,i){function o(e){var n={campaignCover:!1,campaignLogo:!1};i.call(this,t.extend(n,e))}return e(o,i,{init:function(t){i.prototype.init.call(this,t),this.map("description","summary"),this.map("name","title"),this.map("linkUrl","URL"),this.initImage("logoImage",this.getArrayNestedAsset("assetImage"),"campaignLogo"),this.initImage("coverImage",this.getArrayNestedAsset("coverAssetImage"),"campaignCover")},getImage:function(t){return t?this.logoImage:this.coverImage}}),o}),define("common/view/model-v2/document/meta-data/digital-data-layer/document",["lodash","common/util/extends","common/util/logger","common/util/interface","common/view/model-v2/base","common/entity/base","common/interface/entity/document/base","common/interface/entity/link","common/entity/habitat/partner","common/entity/habitat/campaign/promo"],function(t,e,n,i,o,a,s,r,l,c){function d(){o.apply(this,arguments)}return e(d,o,{entityInterface:s,setViewData:function(){var t=this.getEntity(),e={environment:this.getConfig().get("environment",""),pageInstanceID:this.getPageInstanceID(t),module:this.getConfig().get("module",{}),page:this.getPageData(t)};this.viewData=e},getPageInstanceID:function(e){var n=e.getURL();return t.isString(n)?n.replace("http://",""):""},getPageData:function(t){return{attributes:{country:"GB",language:"en-GB"},pageInfo:this.getPageInfo(t),keywords:t.getKeywords(),tags:this.getTags(t.getKeywords()),category:this.getCategories()}},getTags:function(e){var n=[];return t.each(e,function(t,e){"1"==t?n.push(e):n.push(t)}),n},getCategories:function(){var e=this.getEntity(),n=new a(e.getKeywords()),i=t.clone(n);return i.column=n.get("column"),i.pageType=n.get("pageType",""),i.primaryCategory="",i.section=n.get("section"),t.has(this.getConfig(),"module")&&t.has(this.getConfig().module,"domain")&&(i.primaryCategory=this.getConfig().module.domain),i},getPageInfo:function(t){var e={affiliate:!1,author:"",pageID:t.getId(),shortPageID:this.getShortPageID(t.getId()),pageName:t.getTitle(),description:t.getSummary(),partner:this.getPartner(t),publicationDate:t.get("publicationDate"),"business-unit":t.get("business-unit","BBC.com"),destinationURL:t.get("uri",""),bodyTextCharacterLength:this.getBodyTextCharacterLength(t.get("body"))};return this.getEntity().getAuthor()&&(e.author=this.getEntity().getAuthor().getName()),e},getShortPageID:function(t){if(!1!==t){var e,n=t.split("/");return 3==n.length?(e=n[2].split("-"),e.length>1?e.splice(1).join("-"):n[2]):t}return""},getBodyTextCharacterLength:function(t){return this.sanitiseHTMLString(t).length||!1},sanitiseHTMLString:function(e){return t.isString(e)&&e.length>0?e.replace(/<\/?[^>]+(>|$)|\s|\t|\l/gim,""):""},getPartner:function(){var t=this.getEntity();if(t.get("partner",!1)){var e=new l(t.get("partner"));return i.ensureImplements(e,r),e.getTitle()}if(t.get("campaign",!1)){var n=new c(t.get("campaign"));return i.ensureImplements(n,r),n.getTitle()}return!1}}),d}),define("common/interface/entity/document/article",["lodash","common/util/interface","common/interface/entity/document/base"],function(t,e,n){return new e("ArticleEntity",n.methods.concat(["getPublicationDate","getDisplayDate","getRelatedArticles","getGalleryImages","getIntro","getBody","getVideo","getCustomEmbed","getInfographic","getPromoModule","hasLeadAssetModule","getHorizontal","getSupersection","getTheme"]))}),define("common/view/model-v2/document/meta-data/digital-data-layer/story",["lodash","common/util/extends","common/util/logger","common/util/interface","common/view/model-v2/document/meta-data/digital-data-layer/document","common/entity/base","common/interface/entity/document/article","common/interface/entity/link","common/entity/habitat/partner","common/entity/habitat/campaign/promo"],function(t,e,n,i,o,a,s,r,l,c){function d(){o.apply(this,arguments)}return e(d,o,{entityInterface:s,getCategories:function(){var e=this.getEntity(),n={horizontal:!1,supersection:!1};return e.getHorizontal()&&(n.horizontal=e.getHorizontal().getName()),e.getSupersection()&&(n.supersection=e.getSupersection().getTitle()),t.extend(o.prototype.getCategories.call(this),n)},getPageInfo:function(e){return t.extend(o.prototype.getPageInfo.call(this,e),{publicationDate:e.get("publicationDate"),bodyTextCharacterLength:this.getBodyTextCharacterLength(e.get("body"))})},getBodyTextCharacterLength:function(t){return this.sanitiseHTMLString(t).length||!1},sanitiseHTMLString:function(e){return t.isString(e)&&e.length>0?e.replace(/<\/?[^>]+(>|$)|\s|\t|\l/gim,""):""}}),d}),define("common/helper/analytics",["lodash"],function(t){return{sanitisePageName:function(t){return"string"!=typeof t?t:t.toLowerCase().replace(/[\s]/g,"_").replace(/[^a-zA-Z0-9\-\._]/g,"").replace(/_{2,}/g,"_")},getSectionData:function(e){var n="";return t.has(e,"supersection")&&!1!==e.supersection?n="supersection."+e.supersection:t.has(e,"horizontal")&&!1!==e.horizontal?n="horizontal."+e.horizontal:t.has(e,"section")&&!1!==e.section?n="section."+e.section:t.has(e,"column")&&!1!==e.column&&(n="column."+e.column),this.sanitisePageName(n)},getSubSectionData:function(e){var n=[];return n[0]=e.primaryCategory,t.has(e,"column")&&!1!==e.column?n[1]=e.column:t.has(e,"section")&&!1!==e.section?n[1]=e.section:t.has(e,"sectn")&&!1!==e.sectn?n[1]=e.sectn:n[1]=!1,t.has(e,"subsect")&&!1!==e.subsect?n[2]=e.subsect:n[2]=!1,n},getPageType:function(t){var e={index:"idx|na",column:"idx|col",section:"idx|sec",tag:"idx|tag","calendar-index":"idx|cal",story:"sty|na",image:"sty|img",audio:"sty|aud",video:"sty|vid",slideshow:"sty|sli","slideshow-gallery":"sty|sli",event:"sty|evt",infographic:"sty|tpc"};return void 0!==e[t]?e[t]:"na|na"}}}),define("common/helper/url",[],function(){return{sanitiseUrl:function(t){return"string"!=typeof t?t:t=decodeURIComponent(t).replace(/<([a-zA-Z0-9]*)\b[^>]*>(.*?)<\/[a-zA-Z0-9]*>|<\/[a-zA-Z0-9]*>|['"<>\(\)]/gi,"")}}}),
define("common/view/model-v2/document/meta-data/comscore",["lodash","common/util/extends","common/view/model-v2/base","common/interface/entity/document/base","common/util/logger","common/util/request","common/view/model-v2/document/meta-data/meta-tags","common/view/model-v2/document/meta-data/digital-data-layer/document","common/view/model-v2/document/meta-data/digital-data-layer/story","common/helper/analytics","common/helper/url"],function(t,e,n,i,o,a,s,r,l,c,d){function u(){n.apply(this,arguments)}return e(u,n,{entityInterface:i,setViewData:function(){var t=this.getConfig(),e={comscoreActive:!1,noScriptURL:!1,exposedKeyValues:!1};if(this.comscoreIsEnabled()){e.comscoreActive=!0;var n=this.getKeyValues();e.exposedKeyValues=JSON.stringify(n),e.noScriptURL=this.getNoScriptURL(n)}else o.get().warn("ComscoreDataViewModel:setViewData:Comscore Analytics not enabled or unexpected config",t);this.viewData=e},comscoreIsEnabled:function(){var e=this.getConfig();return!(!t.has(e,"analytics")||!0!==e.analytics.is_enabled||!t.has(e.analytics,"comscore")||!0!==e.analytics.comscore.is_enabled)},getKeyValues:function(){var e,n=this.getEntity(),i=this.getConfig(),o=i.analytics.comscore,u=new r(n,i).setSourceData({},!1),p=new s(n,i).setSourceData({},!1),h={},m=c.sanitisePageName(p.title),f=i.get("module").domain,g=c.getSectionData(u.page.category);if(subSectionStrings=c.getSubSectionData(u.page.category),h.c2=o.customer_id,h.ns_site=o.suite,h.name=m,h.b_vs_un="bc",h.c7=d.sanitiseUrl(n.get("URL")),h.b_c7=d.sanitiseUrl(n.get("URL")),h.c8=m,h.b_app_type="web",h.b_app_name=f+"|"+i.get("version"),h.b_code_ver=i.get("version"),h.b_imp_ver=i.get("version"),h.b_imp_src="wwf",h.b_site_section=g,h.b_site_channel=f,h.b_site_subsec1=subSectionStrings[1]===subSectionStrings[0]?"":subSectionStrings[1],h.b_edition="international",h.b_column=u.page.category.column,h.b_page_type=c.getPageType(p.type),!1!==n.getSearchTerms()&&(h.ns_search_term=n.get("searchTerms")),!1!==n.getError()&&(h.ns_type="hidden",h.ns_http_status=n.getError().status),"story"===u.page.category.pageType){var b=new l(n,i).setSourceData({},!1),y=b.page.pageInfo,v=c.getSectionData(b.page.category);parsedDate=new Date(y.publicationDate).getTime(),h.b_site_section=v,h.b_article_title=y.pageName,h.b_article_id=y.pageID,h.b_article_author=y.author,h.b_article_partner=y.partner,h.b_article_theme=b.page.keywords.tags.join("|"),h.b_article_date=parsedDate,h.b_article_update=parsedDate,h.b_article_length=y.bodyTextCharacterLength}if(void 0!==(e=a.get())&&t.has(e,"request")){t.has(e,"contentRegion")&&!1!==e.contentRegion&&(h.b_edition=e.contentRegion);var w,S=e.request,x=S.headers;w=t.has(x,"referer")&&void 0!==x.referer?x.referer.substr(0,255):"",h.c9=d.sanitiseUrl(w),h.b_c9=d.sanitiseUrl(w),h.b_c7=d.sanitiseUrl(n.get("URL")),h.c7=h.b_c7}return h=this.sanitiseKeyValues(h)},getNoScriptURL:function(e){var n=this.getConfig(),i=n.analytics.comscore,o="[url]?c1=2",a=["b_code_ver"];return void 0!==e&&(o=o.replace("[url]",i.url_ssc_http),t.each(e,function(n,i){t.contains(a,i)||(o+="&amp;"+i+"="+this.encodeValue(e[i]))},this),o)},sanitiseKeyValues:function(t){var e,n={};for(e in t)if(void 0!==t[e]&&!1!==t[e]&&""!==t[e]&&null!==t[e]&&"na"!==t[e]){var i=isNaN(t[e])?t[e]:String(t[e]);n[e]=i.toLowerCase()}return n},encodeValue:function(t){return/^\{[a-zA-Z0-9\-_]+\}$/.test(t)?t:encodeURIComponent(t)}}),u}),define("optimizely-dax",[],function(){function t(t){return t.toLowerCase().replace(r,"_")}function e(t){return t.replace(r,"-")}function n(n,i){var o=i.experiment.id,a=window.optimizely.get("visitor");if(a&&(!a.custom||a.custom&&!a.custom[o])){var s={};if(s[o]=!0,window.optimizely.push({type:"user",attributes:s}),!i.isInCampaignHoldback){var r={},l=i.experiment.name,c=i.variation.name;r.mvt_experience=e(l+"."+c),r[t("mvt_"+l)]=e(c),n.log("ab-test","optimizely",r)}}}function i(t,e){n(e,window.optimizely.get("state").getCampaignStates({isActive:!0})[t])}function o(t){window.optimizely=window.optimizely||[],window.optimizely.push({type:"addListener",filter:{type:"lifecycle",name:"campaignDecided"},handler:function(e){i(e.data.campaign.id,t)}})}function a(t){window.optimizely=window.optimizely||[];var e=window.optimizely.get&&window.optimizely.get("state");if(e){var n=e.getCampaignStates({isActive:!0});for(var o in n)n.hasOwnProperty(o)&&i(o,t)}}function s(t){a(t),o(t)}var r=/[^A-Za-z0-9.]/g;return{init:s}}),define("module/analytics/comscore-optimizely-dax",["istats-1","optimizely-dax"],function(t,e){return{init:function(){t.isReady(function(){e.init(t)})}}}),define("module/analytics/vendors/comscore",["lodash","util/logger","common/view/model-v2/document/meta-data/comscore","model/exposed-config","module/analytics/comscore-optimizely-dax"],function(t,e,n,i,o){var a=!1,s=function(){try{if(void 0===window.comscore)throw new Error("comscore global is not defined");a=window.comscore}catch(t){e.get().error("ComscoreAnalyticsModule:init:Cant init comscore vendor module",t)}return this},r=function(t){try{if(void 0!==t&&!1!==i){var o=new n(t,i).setSourceData({},!1);a.trackPageView(JSON.parse(o.exposedKeyValues))}else a.trackPageView()}catch(t){e.error('ComscoreModule:page:exception: "'+t.message+'"',t)}},l=function(t){try{a.trackInteraction(t)}catch(t){e.error('ComscoreModule:page:exception: "'+t.message+'"',t)}},c=function(t){try{a.startPlaylist(t)}catch(t){e.error('ComscoreModule:page:exception: "'+t.message+'"',t)}},d=function(t){try{a.startAdvert(t)}catch(t){e.error('ComscoreModule:page:exception: "'+t.message+'"',t)}},u=function(t){try{a.endAdvert(t)}catch(t){e.error('ComscoreModule:page:exception: "'+t.message+'"',t)}},p=function(t){try{a.startClip(t)}catch(t){e.error('ComscoreModule:page:exception: "'+t.message+'"',t)}},h=function(t){try{a.startPause(t)}catch(t){e.error('ComscoreModule:page:exception: "'+t.message+'"',t)}},m=function(t){try{a.endPause(t)}catch(t){e.error('ComscoreModule:page:exception: "'+t.message+'"',t)}},f=function(t){try{a.startSeek(t)}catch(t){e.error('ComscoreModule:page:exception: "'+t.message+'"',t)}},g=function(t){try{a.endSeek(t)}catch(t){e.error('ComscoreModule:page:exception: "'+t.message+'"',t)}},b=function(t){try{a.endClip(t)}catch(t){e.error('ComscoreModule:page:exception: "'+t.message+'"',t)}},y=function(t){try{a.endPlaylist(t)}catch(t){e.error('ComscoreModule:page:exception: "'+t.message+'"',t)}},v=function(t){o.init()};return t.extend(v.prototype,{init:s,page:r,trackInteraction:l,startPlaylist:c,startAdvert:d,endAdvert:u,startClip:p,startPause:h,endPause:m,startSeek:f,endSeek:g,endClip:b,endPlaylist:y,isPlaylistStarted:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){return isPlaylistStarted})}),v}),define("module/analytics/vendors/vendor-manager",["model/exposed-config","module/analytics/vendors/comscore","util/logger"],function(t,e,n){var i={},o={},a=function(t,e){var i,a=Array.prototype.slice.call(e);for(i in o)void 0!==o[i][t]?o[i][t].apply(this,a):n.error("AnalyticsManager:executeMethod:Vendor: "+i+" is missing Method: "+t)},s=function(){var o=t;void 0!==o.analytics&&void 0!==o.analytics.comscore?!0===o.analytics.is_enabled?!0===o.analytics.comscore.is_enabled&&i.registerVendor("comScore",new e(o.analytics.comscore)):n.warn("Analytics is not enabled"):n.error("Unexpected analytics config")};return i.registerVendor=function(t,e){o[t]=e},i.init=function(){return n.debug("Init analytics"),s(),a("init",arguments),this},i.page=function(){return n.debug("Page Track"),a("page",arguments),this},i.trackInteraction=function(){return n.debug("Track Interaction"),a("trackInteraction",arguments),this},i.startPlaylist=function(){return n.debug("Start Playlist"),a("startPlaylist",arguments),this},i.endPlaylist=function(){return n.debug("End Playlist"),a("endPlaylist",arguments),this},i.adRequest=function(){return n.debug("adRequest"),a("adRequest",arguments),this},i.adManagerLoaded=function(){return n.debug("Ad Manager Loaded"),a("adManagerLoaded",arguments),this},i.startAdvert=function(){return n.debug("Start Advert"),a("startAdvert",arguments),this},i.endAdvert=function(){return n.debug("End Advert"),a("endAdvert",arguments),this},i.startClip=function(){return n.debug("Start Clip"),a("startClip",arguments),this},i.endClip=function(){return n.debug("End Clip"),a("endClip",arguments),this},i.startPause=function(){return n.debug("Start Pause"),a("startPause",arguments),this},i.endPause=function(){return n.debug("End Pause"),a("endPause",arguments),this},i.startSeek=function(){return n.debug("Start Seek"),a("startSeek",arguments),this},i.endSeek=function(){return n.debug("End Seek"),a("endSeek",arguments),this},isPlaylistStarted=function(){return a("isPlaylistStarted",arguments)},i.r=function(){return o={},this},i}),define("module/youtubeHelper",["jquery","lib/ecmaScript5","signals"],function(t,e,n){return function(){var t,e,i=new n.Signal;this.setPlayerId=function(t){e=t,this.loadAPI(),window.onYouTubePlayerAPIReady=this.setupPlayer.bind(this)},this.stateChanged=function(t){1==t.data&&i.dispatch()},this.setupPlayer=function(){var n=this.getFrameID(e);n&&(t=new YT.Player(n,{events:{onStateChange:this.stateChanged.bind(this)}}))},this.getFrameID=function(t){var e=document.getElementById(t);if(e){if(/^iframe$/i.test(e.tagName))return t;var n=e.getElementsByTagName("iframe");if(!n.length)return null;for(var i=0;i<n.length&&!/^https?:\/\/(?:www\.)?youtube(?:-nocookie)?\.com(\/|$)/i.test(n[i].src);i++);if(e=n[i],e.id)return e.id;do{t+="-frame"}while(document.getElementById(t));return e.id=t,t}return null},this.loadAPI=function(){!function(){var t=document.createElement("script");t.src=("https:"==location.protocol?"https":"http")+"://www.youtube.com/player_api";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()},this.subscribe=function(t,e){switch(t){case"play":i.add(e)}}}}),define("util/content-loader-event-handler",["lodash"],function(t){var e={};return{ACTION_LAZY_LOADED_STORY:"lazyload:story",ACTION_LAZY_LOADED_CONTENTS:"lazyload:contents",ACTION_STORY_BLOCK_CHANGED:"storyblock:changed",TYPE_RESPONSIVE_IMAGE:"responsiveImage",TYPE_LEAD_GALLERY:"leadGallery",TYPE_INLINE_GALLERY:"inlineGallery",TYPE_FULL_STORY:"fullStory",on:function(t,n){e[t]||(e[t]=[]),e[t].push(n)},trigger:function(n){var i=arguments;t.has(e,n)&&t.each(e[n],function(t){t.apply(null,i)})}}}),define("module/analytics/main",["lodash","lib/ecmaScript5","extension/String","lib/domReady","jquery","lib/jquery.inview","lib/jquery.getSelector","lib/jquery.dataDom","util/getQuadrentOfCoordinateInContainer","module/analytics/vendors/vendor-manager","module/youtubeHelper","model/exposed-config","util/content-loader-event-handler"],function(t,e,n,i,o,a,s,r,l,c,d,u,p){return new function(){var e,n,a,s=this,r={news:"bbc.co.uk/news/",culture:"/culture/",travel:"/travel/",capital:"/capital/",autos:"/autos/",future:"/future/",earth:"/earth/",britain:"/britain/"},h=["click","inview","mouseover","submit","track","youtube"],m=!1;this.init=function(){if(!1===u||!t.has(u,"analytics"))throw new Error("AnalyticsManager:init:invalid config");a=u.analytics,o("#content-wrapper").length?this.setContentSelector("#content-wrapper"):this.setContentSelector("#wwfeatures-container"),this.setContentContainer(),this.setupVendorManager(),this.addEventListeners()},this.setupVendorManager=function(){var t=c;t.init(),m=t},this.addEventListeners=function(){var t,e;for(var n in this.getSupportedEvents())t=this.getSupportedEvents()[n],e="[data-cs-event='"+t+"']",o(document).on(this.getNamespacedEvent(t),e,this.trackInteraction.bind(this));this.setupInfiniteScrollPageTracking(),this.simulateYoutubeEvents()},this.setupInfiniteScrollPageTracking=function(){p.on(p.ACTION_STORY_BLOCK_CHANGED,function(t,e,n,i,o){i>0&&void 0!==e&&!0===e.firstAppearance&&m.page(e.storyEntity)})},this.simulateYoutubeEvents=function(){o(document).find("[data-cs-event='youtube']").each(function(){s.simulateYoutubeEventForElement(o(this))})},this.simulateYoutubeEventForElement=function(t){var e=new d;e.subscribe("play",function(){t.trigger(this.getNamespacedEvent("youtube"))}),e.setPlayerId(t.attr("id"))},this.getNamespacedEvent=function(t){return t+"."+this.getEventNamespace()},this.getTrackingDataFromTarget=function(t){var e={id:t.data("csId"),pageName:t.data("csPageName"),channelName:t.data("csChannelName")||this.getChannel(t),channelLocation:t.data("csChannelLocation"),elementName:t.data("csElementName"),elementType:t.data("csElementType"),additionalData:t.data("csAdditionalData"),section:t.data("csSection"),pageType:t.data("csPageType"),event:t.data("csEvent"),elementPosition:t.data("csElementPosition"),totalElementCount:t.data("csTotalElementCount"),interactionType:t.data("csInteractionType")||this.getDefaultInteractionType(),trackingMethod:this.getTrackingMethod(t.data("csTrackingMethod"))},n=t.closest("ul[data-cs-module],div[data-cs-module],section[data-cs-module],form[data-cs-module]");return n&&n.length>0&&(e.moduleName=n.data("csModule"),this.setContentContainer(),e.modulePlacement=this.getModulePagePlacement(n),void 0===e.elementPosition&&(e.elementPosition=this.getTargetPosition(t,n)),void 0===e.totalElementCount&&(e.totalElementCount=this.getModuleElementCount(n))),"link"==e.interactionType&&(t.is("a")||t.find("a:first-child").length>0&&(t=t.find("a:first-child")),e.domElement=t.get(0)),e},this.trackInteraction=function(t){var e=o(t.currentTarget),n=this.getTrackingDataFromTarget(e);n.event=t,m.trackInteraction(n)},this.trackAVEvent=function(t,e){m[t](e)},this.addTrackingForSelector=function(t,e){var n=o(t),i=e.event||"click";n.length>0&&(this.addTrackingAttribute(n,"id",e.id,!0),this.addTrackingAttribute(n,"page-name",e.pageName),this.addTrackingAttribute(n,"event",i,!0),this.addTrackingAttribute(n,"channel-name",e.channelName),this.addTrackingAttribute(n,"channel-location",e.channelLocation),this.addTrackingAttribute(n,"element-name",e.elementName),this.addTrackingAttribute(n,"element-type",e.elementType),this.addTrackingAttribute(n,"element-position",e.elementPosition),this.addTrackingAttribute(n,"total-element-count",e.totalElementCount),this.addTrackingAttribute(n,"additional-data",e.additionalData),this.addTrackingAttribute(n,"section",e.section),this.addTrackingAttribute(n,"page-type",e.pageType),this.addTrackingAttribute(n,"interaction-type",e.interactionType),this.addTrackingAttribute(n,"tracking-method",e.trackingMethod))},this.addTrackingForModule=function(t,e){var n=o(t);this.addTrackingAttribute(n,"module",e.module,!0)},this.addTrackingAttribute=function(t,e,n,i){void 0!==n&&(e="cs-"+e,i?t.dataDom(e,n):t.data(e,n))},this.getChannel=function(t,e){var n;if(void 0===e){n=t.attr("href");for(var i in this.getChannels())if(-1!=n.indexOf(r[i]))return i}return e},this.setContentContainer=function(){var t=e.offset();n={left:t.left,right:t.left+e.width(),top:t.top,bottom:t.top+e.height()}},this.getModulePagePlacement=function(t){var e=this.getContentContainer(),n=t.offset();return coordinate={x:n.left+t.width()/2,y:n.top+t.height()/2},l(coordinate,e)},this.getTargetPosition=function(t,e){var n=e.find("[data-cs-id]"),i=0,a=0,s="";return n.each(function(e,n){s!==o(n).data("csId")&&(a++,s=o(n).data("csId")),s===t.data("csId")&&(i=a)}),i},this.getModuleElementCount=function(t){return t.find("[data-cs-id]").length},this.getTrackingMethod=function(t){switch(t){case"cookie":return"ck";case"page-load":return"pl";case"ajax":return"aj";default:return"cl"}},this.getEventNamespace=function(){return"analytics"},this.setContentSelector=function(t){e=o(t)},this.getContentSelector=function(){return e},this.getSupportedEvents=function(){return h},this.getContentContainer=function(){return n},this.getChannels=function(){return r},this.getDefaultInteractionType=function(){return"link"},this.getDefaultEventType=function(){return"click"},this.formatMultiOptionVariable=function(t){return t.length>0?t.replace(",","/"):"na"},this.formatArrayVariable=function(t){return t.length>0?t.join("/"):"na"},i(this.init.bind(this))}}),define("module/heroUnit",["lib/ecmaScript5","jquery","module/loader","model/mediaQuery","signals","orb/api","templates","module/analytics/main"],function(t,e,n,i,o,a,s,r){function l(t,n){n=n||"",this.height=0,this.storyBlock=n,this.playButtonSelector=this.getStoryBlock()+"#play-video",this.overlaySelector=this.getStoryBlock()+".hero-unit-overlay",this.videoLinkSelector=this.getStoryBlock()+"> a",this.imageWrapperSelector=this.getStoryBlock()+".hero-unit-image-wrapper",this.headingLinkSelector=this.getStoryBlock()+".hero-unit-lining .primary-header > a",this.headingSelector=this.headingLinkSelector+" h1.primary-heading",this.navBrandingSelector=this.getStoryBlock()+"#nav-branding-wrapper",this.overlayThreeElement=e(this.getStoryBlock()+".hero-unit-image-overlay-3"),this.selector=this.getStoryBlock()+".hero-unit",this.el=e(this.selector),this.videoIconSelector=this.getStoryBlock()+".hero-video-icon",this.playVideoSignal=new o.Signal,this.storyModel=t,this.addEventListeners(),this.reset()}return l.prototype.getUrl=function(){var t=this.el.find(".hero-unit-image-wrapper > a");return t.length>0&&t.attr("href")},l.prototype.addEventListeners=function(){this.hasVideo()&&e(this.playButtonSelector).click(this.playVideo.bind(this)),this.storyModel.subscribe("update",this.checkVideoHeader.bind(this)),this.storyModel.subscribe("update",this.checkCalendarEventHeader.bind(this)),a.layout(this.resize.bind(this)),"function"==typeof window.requestAnimationFrame&&e(window).on("scroll",window.requestAnimationFrame.bind(window,this.scroll.bind(this)))},l.prototype.resize=function(){this.reset()},l.prototype.isScrollable=function(){return!(this.el.hasClass("hero-unit-minor")||this.hasVideo()||i.isMobileDevice())},l.prototype.hasVideo=function(t){return this.el.hasClass("hero-unit-video")},l.prototype.scroll=function(t){var e,n,o;o=this.getScroll(),4==i.getGroup()&&this.isScrollable()&&!i.isFixedWidthLayout()&&(this.overlayThreeElement.addClass("notransition"),n=o/this.getHeight(),e=this.getHeight()-o/2,o<this.getHeight()&&(this.el.height(e),this.overlayThreeElement.css("opacity",n)))},l.prototype.getOffset=function(){var t=""===this.storyBlock?e("#nav-branding").offset():this.el.offset();return void 0!==t.top?t.top:0},l.prototype.getScroll=function(){var t=e(window).scrollTop(),n=this.getOffset();return t<n?0:t-n},l.prototype.reset=function(){this.isScrollable()&&(this.overlayThreeElement.removeClass("notransition"),this.el.height("auto"),this.overlayThreeElement.css("opacity",0),this.setHeight())},l.prototype.getHeight=function(){return this.height},l.prototype.setHeight=function(){this.height=e(this.imageWrapperSelector).height()},l.prototype.checkVideoHeader=function(t){if(void 0!==t.getData()["video-header"]&&4==i.getGroup()&&!i.isFixedWidthLayout()&&!i.isMobileDevice()){this.addVideoHeader(t.getData()["video-header"]);var e=this.el.find(this.videoLinkSelector),n=this.el.find(this.headingSelector);r.addTrackingForSelector(e,{id:"hero-image",elementType:"hero",elementName:n.text(),elementPosition:1,totalLinkCount:1})}},l.prototype.removeImage=function(){e(this.imageWrapperSelector).find("img").remove()},l.prototype.getStoryBlock=function(){return this.storyBlock+" "},l.prototype.addVideoHeader=function(t){var e=t.url=this.getUrl();e&&(t.url=e),t.preload=!0,t.autoplay=!0,t.id="hero-unit-video";var n=s["html5-video"](t);this.el.append(n)},l.prototype.playVideo=function(t){void 0!==t&&t.preventDefault(),this.playVideoSignal.dispatch(this)},l.prototype.subscribe=function(t,e){switch(t){case"playVideo":this.playVideoSignal.add(e)}},l.prototype.showVideoLoader=function(){var t=e(this.videoIconSelector+" .icon-wrapper");t.append('<div class="loader"></div>');var i=e(this.videoIconSelector+" .loader");e(this.videoIconSelector+" .gelicon");i.css({position:"inital",height:t.width(),top:0}),this.loader=new n(i.get(0),"white")},l.prototype.activateVideoUI=function(){e(this.playButtonSelector).addClass("active"),e(this.videoIconSelector).addClass("active"),this.loader.stop()},l.prototype.softenOverlay=function(){e(this.overlaySelector).addClass("soften")},l.prototype.softenOverlay=function(){e(this.overlaySelector).addClass("soften")},l.prototype.getVerticalSpace=function(){return this.el.height()-e(this.navBrandingSelector).height()},l.prototype.checkCalendarEventHeader=function(t){void 0===t.getData()["calendar-event"]||i.isFixedWidthLayout()||i.isMobileDevice()||this.addCalendarEventHeader(t.getData()["calendar-event"])},l.prototype.addCalendarEventHeader=function(t){var e=new Date(t["start-date"]),n=new Date(t["end-date"]),i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.startDateDay=("0"+e.getUTCDate()).slice(-2),t.startDateMonth=i[e.getUTCMonth()],t.endDateDay=("0"+n.getUTCDate()).slice(-2),t.endDateMonth=i[n.getUTCMonth()],e.getTime()===n.getTime()?t.dateRange=t.startDateDay:t.dateRange=t.startDateDay+" - "+t.endDateDay;var o=s["calendar-event"](t),a=this.el.find(".hero-unit-header-wrapper .secondary-header-wrapper");a.append(o),t.startDateMonth===t.endDateMonth&&a.find(".calendar-event").addClass("single-month")},l}),define("module/topbar-menu",["jquery","lib/ecmaScript5"],function(t,e){var n=function(t){return this.selector=t,this};return n.prototype.init=function(){var t=this.getSelector();this.setSelector(t)&&(this.setOpened(!1),this.setupSelectors(),this.setupUIEvents())},n.prototype.setupSelectors=function(t){this.dropDownSelector="[data-topbar-menu-drop-down]",this.toggleButtonSelector="[data-topbar-menu-toggle]",this.$dropDown=this.getSelector().find(this.dropDownSelector),this.$toggleButton=this.getSelector().find(this.toggleButtonSelector),this.openedClass="is-active"},n.prototype.open=function(){this.setOpened(!0),this.getSelector().addClass(this.openedClass),this.$dropDown.slideDown()},n.prototype.close=function(){var t=this;this.setOpened(!1),this.$dropDown.slideUp("fast",function(){t.getSelector().removeClass(t.openedClass)})},n.prototype.isOpen=function(){return this.opened},n.prototype.setOpened=function(t){_.isBoolean(t)&&(this.opened=t)},n.prototype.toggle=function(){return this.isOpen()?this.close():this.open()},n.prototype.handleToggleButtonClick=function(t){t.preventDefault(),this.toggle()},n.prototype.bindToggleButtonEvents=function(){this.$toggleButton.on("click",this.handleToggleButtonClick)},n.prototype.setupUIEvents=function(){this.handleToggleButtonClick=this.handleToggleButtonClick.bind(this),this.bindToggleButtonEvents()},n.prototype.setSelector=function(e){return this.selector=t(e),this.selector.length>0},n.prototype.getSelector=function(){return this.selector},n}),define("layouts/base",["lodash","lib/ecmaScript5","jquery","lib/domReady","orb/api","model/pageData","model/digitalData","module/heroUnit","module/topbar-menu"],function(t,e,n,i,o,a,s,r,l){var c=function(t){this.heroUnitSelector="[data-hero-unit]",this.topBarMenuMobileSelector="[data-topbar-menu-mobile]",this.setSelector(t),this.model=new a,this.model.init({url:s.page.pageInfo.destinationURL}),this.initUIComponents(),this.model.load()};return t.extend(c.prototype,{initUIComponents:function(){this.initHeroUnit(),this.initTopBar()},initHeroUnit:function(){n(this.heroUnitSelector).length>0&&(this.heroUnit=new r(this.model))},initTopBar:function(){n(this.topBarMenuMobileSelector).length>0&&(this.topbar=new l(this.topBarMenuMobileSelector),this.topbar.init())},setSelector:function(t){this.selector=n(t)},getSelector:function(){return this.selector}}),c}),define("module/navigation/primary",["jquery","!lib/domReady"],function(t,e){return function(n){var i;this.init=function(){this.setSelector(n)},this.toggleOverlay=function(){this.getSelector().toggleClass("overlay-enabled")},this.disableOverlay=function(){this.getSelector().removeClass("overlay-enabled")},this.setSelector=function(e){i=t(e)},this.getSelector=function(){return i},e(this.init.bind(this))}}),define("module/navigation/toggle",["jquery","signals","!lib/domReady","lib/ecmaScript5"],function(t,e,n){return function(i){var o,a=new e.Signal;this.init=function(){this.setSelector(i),this.addEventListeners()},this.addEventListeners=function(){this.getSelector().click(this.toggle.bind(this))},this.toggle=function(t){return t.preventDefault(),this.toggleActivate(),a.dispatch(),!1},this.toggleActivate=function(t){this.getSelector().toggleClass("active")},this.deactivate=function(){this.getSelector().hasClass("active")&&this.toggleActivate()},this.subscribe=function(t,e){switch(t){case"toggle":a.add(e)}},this.setSelector=function(e){o=t(e)},this.getSelector=function(){return o},n(this.init.bind(this))}}),define("actual",["jquery"],function(t){!function(t){t.fn.addBack=t.fn.addBack||t.fn.andSelf,t.fn.extend({actual:function(e,n){if(!this[e])throw'$.actual => The jQuery method "'+e+'" you called does not exist';var i,o,a={absolute:!1,clone:!1,includeMargin:!1},s=t.extend(a,n),r=this.eq(0);if(!0===s.clone)i=function(){r=r.clone().attr("style","position: absolute !important; top: -1000 !important; ").appendTo("body")},o=function(){r.remove()};else{var l,c=[],d="";i=function(){l=r.parents().addBack().filter(":hidden"),d+="visibility: hidden !important; display: block !important; ",!0===s.absolute&&(d+="position: absolute !important; "),l.each(function(){var e=t(this),n=e.attr("style");c.push(n),e.attr("style",n?n+";"+d:d)})},o=function(){l.each(function(e){var n=t(this),i=c[e];void 0===i?n.removeAttr("style"):n.attr("style",i)})}}i();var u=/(outer)/.test(e)?r[e](s.includeMargin):r[e]();return o(),u}})}(t)}),define("module/responsiveImages/responsiveImage",["lodash","lib/ecmaScript5","jquery","model/mediaQuery","actual","util/content-loader-event-handler"],function(t,e,n,i,o,a){var s=function(t,e,i){this.loadedImages={},this.el=t,this.arrFormats=e,this.imageReplacedCallback=i,this.isInitialised=!1,this.setLazyLoad(!!n(this.el).attr("data-lazy-load")),this.srcAttr=this.isLazyLoad()?"data-src":"src",this.setInitialFormat()};return s.prototype.setInitialFormat=function(){var t,e,i=n(this.el).attr(this.srcAttr);for(t in this.arrFormats)if(e=this.arrFormats[t],e.src==i){this.objCurrentFormat=e,this.isInitialised=!0;break}},s.prototype.executeCallbacks=function(t){void 0!==this.imageReplacedCallback&&this.imageReplacedCallback(this),"function"==typeof t&&t.apply(this),a.trigger(a.ACTION_LAZY_LOADED_CONTENTS,a.TYPE_RESPONSIVE_IMAGE,this)},s.prototype.loadLazyImage=function(t){var e=n(this.el).attr("data-src");this.isLazyLoad()&&(void 0===e?this.executeCallbacks(t):this.isLazyLoaded(n(this.el))?this.executeCallbacks(t):this.loadImage(e,t))},s.prototype.isLazyLoaded=function(){var t=n(this.el).attr("data-src"),e=this.getSrc();return t&&e&&t===e},s.prototype.getSrc=function(){return this.isBackgroundImage()?this.getBackgroundImageSrc():this.getInlineImageSrc()},s.prototype.respond=function(){var t,e=n(this.el).parent().actual("width");this.isInitialised&&(n(this.el).data("fixedWidthFormat")&&i.isFixedWidthLayout()?this.loadFormat(this.getFormatByName(n(this.el).data("fixedWidthFormat"))):(t=this.getFormatForWidth(e),this.isLargerFormat(t)||this.hasRatioChanged(t)?this.loadFormat(t):void 0!==this.imageReplacedCallback&&this.imageReplacedCallback(this.el)))},s.prototype.getFormatForWidth=function(t){var e;for(var n in this.arrFormats)if(e=this.arrFormats[n],void 0!==e.dimensions&&e.dimensions.width>t)break;return e},s.prototype.hasRatioChanged=function(t){return this.getRatioOfFormat(t)!=this.getRatioOfFormat(this.objCurrentFormat)},s.prototype.getFormatByName=function(t){for(var e in this.arrFormats)if(void 0!==this.arrFormats[e].name&&this.arrFormats[e].name==t)return this.arrFormats[e];return!1},s.prototype.loadFormat=function(t){t.name!==this.objCurrentFormat.name&&(this.objCurrentFormat=t,this.loadedImages[t.name]=!0,this.isLazyLoad()?this.setImageDataSrc(t.src):"string"!=typeof t.preload||this.isFormatLoaded(t.name)?this.loadImage(t.src):this.loadImage(t.preload,this.loadImage.bind(this,t.src)),this.setFormatLoaded(t))},s.prototype.setImageDataSrc=function(t){void 0!==t&&n(this.el).attr(this.srcAttr,t)},s.prototype.getBackgroundImageSrc=function(){var t=n(this.el).css("background-image");return!!t&&t.replace(/.*\s?url\([\'\"]?/,"").replace(/[\'\"]?\).*/,"")},s.prototype.getInlineImageSrc=function(){return this.el.src},s.prototype.isLazyLoad=function(){return!!this.lazyLoad},s.prototype.setLazyLoad=function(t){if(!0===t)return void(this.lazyLoad=!0);this.lazyLoad=!1},s.prototype.setFormatLoaded=function(t){this.loadedImages[t.name]=!0},s.prototype.isFormatLoaded=function(t){return void 0!==this.loadedImages[t.name]},s.prototype.loadImage=function(t,e){return this.isBackgroundImage()?this.loadBackgroundImage(t,e):this.loadInlineImage(t,e)},s.prototype.loadInlineImage=function(t,e){var n=this;this.el.onload=function(){n.executeCallbacks(e)},this.el.src=t},s.prototype.loadBackgroundImage=function(t,e){var i=this,o=new Image;o.onload=function(){i.setBackgroundImageSrc(n(i.el),t),i.executeCallbacks(e)},o.onerror=function(){i.executeCallbacks(e)},o.src=t},s.prototype.isBackgroundImage=function(){return n(this.el).is("[data-background]")},s.prototype.setBackgroundImageSrc=function(t,e){t.css({"background-image":"url("+e+")"})},s.prototype.isLargerFormat=function(t){return t.dimensions.width>this.objCurrentFormat.dimensions.width},s.prototype.getRatioOfFormat=function(t){return t.dimensions.height/t.dimensions.width},s}),define("module/responsiveImages/main",["lib/ecmaScript5","jquery","module/responsiveImages/responsiveImage"],function(t,e,n){var i=function(){return this._arrImages=[],this};return i.prototype.add=function(t,e,n){t.each(this.addResponsiveImage.bind(this,e,n))},i.prototype.addResponsiveImage=function(t,i,o,a){if(!this.isAdded(a)){var s,r=new t(a,i);s=new n(a,r.getFormatsForImage()),this.addToImagesArray(s),e(a).data("responsiveImagesIsAdded",!0)}},i.prototype.addToImagesArray=function(t){this._arrImages.push(t)},i.prototype.isAdded=function(t){return!!e(t).data("responsiveImagesIsAdded")},i.prototype.getImages=function(){return this._arrImages},i.prototype.respond=function(){this.getImages().forEach(function(t){t.respond()},this)},i.prototype.loadLazyImages=function(){this.getImages().forEach(function(t){t.loadLazyImage()},this)},i}),define("module/responsiveImages/formats/wwfeatures16x9",["jquery"],function(t){var e=function(t,e){this.image=t,this.requiredRatio=e,this.imageNamespace="wwfeatures",this.arrFormats=[{name:"wwfeatures-130-73",dimensions:{width:130,height:73}},{name:"wwfeatures-160-90",dimensions:{width:160,height:90}},{name:"wwfeatures-224-126",dimensions:{width:224,height:126}},{name:"wwfeatures-384-216",dimensions:{width:384,height:216}},{name:"wwfeatures-464-261",dimensions:{width:464,height:261}},{name:"wwfeatures-624-351",dimensions:{width:624,height:351}},{name:"wwfeatures-976-549",dimensions:{width:976,height:549}},{name:"wwfeatures-1280-720",dimensions:{width:1280,height:720}},{name:"wwfeatures-1600-900",dimensions:{width:1600,height:900}}]};return e.prototype.isImageCompliant=function(t){return t[3]==this.imageNamespace},e.prototype.isLazyLoad=function(e){return!!t(e).data("lazyLoad")},e.prototype.getFormatsForImage=function(){var e,n,i=this.isLazyLoad(this.image)?"data-src":"src",o=t(this.image).attr(i).replace(/\/\s*$/,"").split("/"),a=[];if(!this.isImageCompliant(o))return[];o.shift();for(e in this.arrFormats)if(void 0!==this.arrFormats[e].dimensions){var s=4;"wm"===o[3]&&s++,o[s]=this.arrFormats[e].dimensions.width+"_"+this.arrFormats[e].dimensions.height,n=this.arrFormats[e].dimensions.height/this.arrFormats[e].dimensions.width,this.arrFormats[e].src="http:/"+o.join("/"),void 0!==this.arrFormats[e].preload&&(o[s]=this.arrFormats[e].preload.width+"_"+this.arrFormats[e].preload.height,this.arrFormats[e].preload="http:/"+o.join("/")),void 0!==this.requiredRatio&&this.requiredRatio!=n.toFixed(2)||a.push(this.arrFormats[e])}return a},e}),
define("module/responsiveImages/formats/wwfeaturesHero",["jquery","module/responsiveImages/formats/wwfeatures16x9","common/util/inherits"],function(t,e,n){function i(t){this.image=t,this.imageNamespace="wwfeatures",this.arrFormats=[{name:"wwfeatures-130-73",dimensions:{width:130,height:73}},{name:"wwfeatures-300-150",dimensions:{width:300,height:150}},{name:"wwfeatures-300-120",dimensions:{width:300,height:120}},{name:"wwfeatures-304-171",dimensions:{width:304,height:171}},{name:"wwfeatures-384-216",dimensions:{width:384,height:216}},{name:"wwfeatures-464-261",dimensions:{width:464,height:261}},{name:"wwfeatures-624-351",dimensions:{width:624,height:351}},{name:"wwfeatures-976-549",dimensions:{width:976,height:549}},{name:"wwfeatures-1280-640",dimensions:{width:1280,height:640}},{name:"wwfeatures-1600-640",dimensions:{width:1600,height:640}}]}return n(i,e),i}),define("module/responsiveImages/formats/wwfeatures83x120",["jquery","module/responsiveImages/formats/wwfeatures16x9","common/util/inherits"],function(t,e,n){function i(t){this.image=t,this.imageNamespace="wwfeatures",this.arrFormats=[{name:"wwfeatures-90-130",dimensions:{width:90,height:130}},{name:"wwfeatures-111-160",dimensions:{width:111,height:160}},{name:"wwfeatures-155-224",dimensions:{width:155,height:224}},{name:"wwfeatures-266-384",dimensions:{width:266,height:384}},{name:"wwfeatures-321-464",dimensions:{width:321,height:464}},{name:"wwfeatures-432-624",dimensions:{width:432,height:624}},{name:"wwfeatures-498-720",dimensions:{width:498,height:720}},{name:"wwfeatures-747-1080",dimensions:{width:747,height:1080}},{name:"wwfeatures-885-1280",dimensions:{width:885,height:1280}}]}return n(i,e),i}),define("module/responsiveImages/formats/wwfeaturesBanner",["jquery","module/responsiveImages/formats/wwfeatures16x9","common/util/inherits"],function(t,e,n){function i(t){this.image=t,this.imageNamespace="wwfeatures",this.arrFormats=[{name:"wwfeatures-288-72",dimensions:{width:288,height:72}},{name:"wwfeatures-600-150",dimensions:{width:600,height:150}},{name:"wwfeatures-960-240",dimensions:{width:960,height:240}}]}return n(i,e),i}),define("module/imageReplacer",["lodash","lib/ecmaScript5","jquery","templates"],function(t,e,n,i){var o=function(){};return o.prototype.renderImage=function(e,o,a){var s={id:a.id,url:a.href,alt:a.title,class:e,"additional-wrapper-class":n(a).data("additionalWrapperClass"),"is-watermarked":n(a).data("isWatermarked"),"replace-url":n(a).data("replaceUrl"),"anchor-title":n(a).data("anchorTitle"),caption:n(a).data("caption"),"caption-title":n(a).data("captionTitle"),"additional-content":n(a).find(".replace-image-additional-content").html()},r=n(a).data("csId");if(r&&""!==r){var l={"element-id":"csId",event:"csEvent","channel-name":"csChannelName","channel-location":"csChannelLocation","element-name":"csElementName","element-type":"csElementType","element-position":"csElementPosition","total-element-count":"csTotalElementCount","additional-data":"csAdditionalData",section:"csSection","page-type":"csPageType","interaction-type":"csInteractionType","tracking-method":"csTrackingMethod"},c={};t.each(l,function(t,e){var i=n(a).data(t);i&&""!==i&&(c[e]=i)},this),s["analytics-element-metadata"]=c}n(a).data("href")&&""!==n(a).data("href")&&(s.url=n(a).data("href")),n(a).replaceWith(i["responsive-image"](s))},o.prototype.replace=function(t,e){n(t).each(this.renderImage.bind(this,e))},o}),define("config",[],function(){return new function(){var t;this.setup=function(e){t=e},this.getConfig=function(){return t}}}),define("module/search",["jquery","config","common/config","util/logger"],function(t,e,n,i){return function(e){var i=t(e);i.submit(function(t){t.preventDefault(),window.location="/"+n.get().module.domain+"/search/"+i.find("input[name='q']").val()})}}),define("module/responsiveFrame",["jquery","lib/ecmaScript5","orb/api"],function(t,e,n){var i=function(t){this.el=t};return i.prototype.init=function(){t(window).scroll(this.sendScroll.bind(this)),window.addEventListener?window.addEventListener("message",this.messageReceived.bind(this)):window.attachEvent&&window.attachEvent("onmessage",this.messageReceived.bind(this)),n.layout(this.sendScroll.bind(this)),this.sendMessage({event:"init"}),this.sendMessage({event:"resize"})},i.prototype.messageReceived=function(t){if(void 0!==t.data){var e=this.parseMessage(t.data);!1!==e&&void 0!==e.event&&"resize"==e.event&&void 0!==e.height&&this.el.attr("height",e.height)}},i.prototype.parseMessage=function(t){try{return JSON.parse(t)}catch(e){return console.log("Failed to parse message: "+t+", error: "+e.message),!1}},i.prototype.sendScroll=function(e){var n=t(window).scrollTop()-this.getOffset();if(n>0&&n<this.el.height()){var i='{"event":"scroll","top":'+n+"}";this.sendMessage(i)}},i.prototype.sendMessage=function(t){this.el.get(0).contentWindow.postMessage(t,"*")},i.prototype.getOffset=function(){var t=this.el.offset();return void 0!==t.top?t.top:0},i}),define("module/responsiveFrameManager",["lib/ecmaScript5","jquery","module/responsiveFrame"],function(t,e,n){var i=function(){};return i.prototype.init=function(){e("iframe.responsive-frame").each(this.add.bind(this))},i.prototype.add=function(t,i){new n(e(i)).init()},new i}),define("interaction-controller/base",["lodash","jquery","templates","common/util/accessor","module/imageReplacer","module/responsiveImages/main","module/responsiveImages/formats/wwfeatures16x9","module/responsiveImages/formats/wwfeatures83x120","module/responsiveImages/formats/wwfeaturesHero"],function(t,e,n,i,o,a,s,r,l){var c=function(t){this.setConfig(t)};return t.extend(c.prototype,{init:function(t,e){this.component=e,this.el=t},setConfig:function(t){this.config=new i(t)},getConfig:function(){return this.config},refresh:function(t){var e=new o,n=new a;e.replace("a[data-replace-image='true'][data-is-portrait='false']","responsive landscape"),e.replace("a[data-replace-image='true'][data-is-portrait='true']","responsive portrait"),n.add(this.el.find("img.responsive.landscape"),s),n.add(this.el.find("img.responsive.portrait"),r),n.respond()}}),c}),define("module/component-loader",["lib/ecmaScript5","lodash","jquery","templates","module/loader","interaction-controller/base","util/logger"],function(t,e,n,i,o,a,s){var r=function(t,n,i){try{this.interactionController=new a,this.mode="replace",this.isContentRendered=!1,this.loaderHeight=308,this.isInitalRenderDisabled=!1,this.component=n,this.el=t,e.isObject(i)&&e.extend(this,i),this.isContentRendered&&(this.isInitalRenderDisabled=!0),this.component.subscribe("update",this.render.bind(this)),this.interactionController.init(t,n)}catch(t){console.log(t)}};return e.extend(r.prototype,{render:function(t){!1===this.isInitalRenderDisabled?(this.prepareRender(),this.el.css({height:"auto"}),this.el.append(t),this.interactionController.refresh()):this.isInitalRenderDisabled=!1},load:function(){try{return this.showLoader(),this.component.load().then(this.componentLoaded.bind(this)).fail(this.loadingError.bind(this))}catch(t){console.error(t)}},componentLoaded:function(){},removeSpinner:function(){e.isObject(this.spinner)&&e.isFunction(this.spinner.stop)&&this.spinner.stop()},showLoader:function(){!1===this.isInitalRenderDisabled&&(this.el.css({position:"relative",height:this.loaderHeight}),this.spinner=new o(this.el.get(0),"#333"))},loadingError:function(t){this.prepareRender(),this.empty(),this.el.css({height:"auto"}),s.error("Error loading component:",t)},prepareRender:function(){this.removeSpinner(),"replace"==this.mode&&this.empty()},empty:function(){this.el.empty()}}),r});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){if("function"==typeof bootstrap)bootstrap("promise",t);else if("object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"===("undefined"==typeof module?"undefined":_typeof(module)))module.exports=t();else if("function"==typeof define&&define.amd)define("q",t);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=t}else Q=t()}(function(){"use strict";function t(t){return function(){return W.apply(t,arguments)}}function e(t){return t===Object(t)}function n(t){return"[object StopIteration]"===X(t)||t instanceof F}function i(t,e){if(O&&e.stack&&"object"===(void 0===t?"undefined":_typeof(t))&&null!==t&&t.stack&&-1===t.stack.indexOf(tt)){for(var n=[],i=e;i;i=i.source)i.stack&&n.unshift(i.stack);n.unshift(t.stack);var a=n.join("\n"+tt+"\n");t.stack=o(a)}}function o(t){for(var e=t.split("\n"),n=[],i=0;i<e.length;++i){var o=e[i];r(o)||a(o)||!o||n.push(o)}return n.join("\n")}function a(t){return-1!==t.indexOf("(module.js:")||-1!==t.indexOf("(node.js:")}function s(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var i=/.*@(.+):(\d+)$/.exec(t);return i?[i[1],Number(i[2])]:void 0}function r(t){var e=s(t);if(!e)return!1;var n=e[0],i=e[1];return n===N&&i>=j&&i<=ot}function l(){if(O)try{throw new Error}catch(i){var t=i.stack.split("\n"),e=t[0].indexOf("@")>0?t[1]:t[2],n=s(e);if(!n)return;return N=n[0],n[1]}}function c(t){return t instanceof h?t:b(t)?_(t):T(t)}function d(){function t(t){e=t,a.source=t,$(n,function(e,n){H(function(){t.promiseDispatch.apply(t,n)})},void 0),n=void 0,i=void 0}var e,n=[],i=[],o=Y(d.prototype),a=Y(h.prototype);if(a.promiseDispatch=function(t,o,a){var s=G(arguments);n?(n.push(s),"when"===o&&a[1]&&i.push(a[1])):H(function(){e.promiseDispatch.apply(e,s)})},a.valueOf=function(){if(n)return a;var t=f(e);return g(t)&&(e=t),t},a.inspect=function(){return e?e.inspect():{state:"pending"}},c.longStackSupport&&O)try{throw new Error}catch(t){a.stack=t.stack.substring(t.stack.indexOf("\n")+1)}return o.promise=a,o.resolve=function(n){e||t(c(n))},o.fulfill=function(n){e||t(T(n))},o.reject=function(n){e||t(C(n))},o.notify=function(t){e||$(i,function(e,n){H(function(){n(t)})},void 0)},o}function u(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var e=d();try{t(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}return e.promise}function p(t){return u(function(e,n){for(var i=0,o=t.length;i<o;i++)c(t[i]).then(e,n)})}function h(t,e,n){void 0===e&&(e=function(t){return C(new Error("Promise does not support operation: "+t))}),void 0===n&&(n=function(){return{state:"unknown"}});var i=Y(h.prototype);if(i.promiseDispatch=function(n,o,a){var s;try{s=t[o]?t[o].apply(i,a):e.call(i,o,a)}catch(t){s=C(t)}n&&n(s)},i.inspect=n,n){var o=n();"rejected"===o.state&&(i.exception=o.reason),i.valueOf=function(){var t=n();return"pending"===t.state||"rejected"===t.state?i:t.value}}return i}function m(t,e,n,i){return c(t).then(e,n,i)}function f(t){if(g(t)){var e=t.inspect();if("fulfilled"===e.state)return e.value}return t}function g(t){return e(t)&&"function"==typeof t.promiseDispatch&&"function"==typeof t.inspect}function b(t){return e(t)&&"function"==typeof t.then}function y(t){return g(t)&&"pending"===t.inspect().state}function v(t){return!g(t)||"fulfilled"===t.inspect().state}function w(t){return g(t)&&"rejected"===t.inspect().state}function S(){et.length=0,nt.length=0,it||(it=!0)}function x(t,e){it&&(nt.push(t),e&&void 0!==e.stack?et.push(e.stack):et.push("(no stack) "+e))}function I(t){if(it){var e=Z(nt,t);-1!==e&&(nt.splice(e,1),et.splice(e,1))}}function C(t){var e=h({when:function(e){return e&&I(this),e?e(t):this}},function(){return this},function(){return{state:"rejected",reason:t}});return x(e,t),e}function T(t){return h({when:function(){return t},get:function(e){return t[e]},set:function(e,n){t[e]=n},delete:function(e){delete t[e]},post:function(e,n){return null===e||void 0===e?t.apply(void 0,n):t[e].apply(t,n)},apply:function(e,n){return t.apply(e,n)},keys:function(){return J(t)}},void 0,function(){return{state:"fulfilled",value:t}})}function _(t){var e=d();return H(function(){try{t.then(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}}),e.promise}function k(t){return h({isDef:function(){}},function(e,n){return R(t,e,n)},function(){return c(t).inspect()})}function L(t,e,n){return c(t).spread(e,n)}function E(t){return function(){function e(t,e){var s;if("undefined"==typeof StopIteration){try{s=i[t](e)}catch(t){return C(t)}return s.done?c(s.value):m(s.value,o,a)}try{s=i[t](e)}catch(t){return n(t)?c(t.value):C(t)}return m(s,o,a)}var i=t.apply(this,arguments),o=e.bind(e,"next"),a=e.bind(e,"throw");return o()}}function A(t){c.done(c.async(t)())}function D(t){throw new F(t)}function P(t){return function(){return L([this,M(arguments)],function(e,n){return t.apply(e,n)})}}function R(t,e,n){return c(t).dispatch(e,n)}function M(t){return m(t,function(t){var e=0,n=d();return $(t,function(i,o,a){var s;g(o)&&"fulfilled"===(s=o.inspect()).state?t[a]=s.value:(++e,m(o,function(i){t[a]=i,0==--e&&n.resolve(t)},n.reject,function(t){n.notify({index:a,value:t})}))},void 0),0===e&&n.resolve(t),n.promise})}function U(t){return m(t,function(t){return t=K(t,c),m(M(K(t,function(t){return m(t,q,q)})),function(){return t})})}function B(t){return c(t).allSettled()}function V(t,e){return c(t).then(void 0,void 0,e)}function z(t,e){return c(t).nodeify(e)}var O=!1;try{throw new Error}catch(t){O=!!t.stack}var N,F,j=l(),q=function(){},H=function(){function t(){for(;e.next;){e=e.next;var n=e.task;e.task=void 0;var o=e.domain;o&&(e.domain=void 0,o.enter());try{n()}catch(e){if(a)throw o&&o.exit(),setTimeout(t,0),o&&o.enter(),e;setTimeout(function(){throw e},0)}o&&o.exit()}i=!1}var e={task:void 0,next:null},n=e,i=!1,o=void 0,a=!1;if(H=function(t){n=n.next={task:t,domain:a&&process.domain,next:null},i||(i=!0,o())},"undefined"!=typeof process&&process.nextTick)a=!0,o=function(){process.nextTick(t)};else if("function"==typeof setImmediate)o="undefined"!=typeof window?setImmediate.bind(window,t):function(){setImmediate(t)};else if("undefined"!=typeof MessageChannel){var s=new MessageChannel;s.port1.onmessage=function(){o=r,s.port1.onmessage=t,t()};var r=function(){s.port2.postMessage(0)};o=function(){setTimeout(t,0),r()}}else o=function(){setTimeout(t,0)};return H}(),W=Function.call,G=t(Array.prototype.slice),$=t(Array.prototype.reduce||function(t,e){var n=0,i=this.length;if(1===arguments.length)for(;;){if(n in this){e=this[n++];break}if(++n>=i)throw new TypeError}for(;n<i;n++)n in this&&(e=t(e,this[n],n));return e}),Z=t(Array.prototype.indexOf||function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1}),K=t(Array.prototype.map||function(t,e){var n=this,i=[];return $(n,function(o,a,s){i.push(t.call(e,a,s,n))},void 0),i}),Y=Object.create||function(t){function e(){}return e.prototype=t,new e},Q=t(Object.prototype.hasOwnProperty),J=Object.keys||function(t){var e=[];for(var n in t)Q(t,n)&&e.push(n);return e},X=t(Object.prototype.toString);F="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var tt="From previous event:";c.resolve=c,c.nextTick=H,c.longStackSupport=!1,c.defer=d,d.prototype.makeNodeResolver=function(){var t=this;return function(e,n){e?t.reject(e):arguments.length>2?t.resolve(G(arguments,1)):t.resolve(n)}},c.Promise=u,c.promise=u,u.race=p,u.all=M,u.reject=C,u.resolve=c,c.passByCopy=function(t){return t},h.prototype.passByCopy=function(){return this},c.join=function(t,e){return c(t).join(e)},h.prototype.join=function(t){return c([this,t]).spread(function(t,e){if(t===e)return t;throw new Error("Can't join: not the same: "+t+" "+e)})},c.race=p,h.prototype.race=function(){return this.then(c.race)},c.makePromise=h,h.prototype.toString=function(){return"[object Promise]"},h.prototype.then=function(t,e,n){function o(e){try{return"function"==typeof t?t(e):e}catch(t){return C(t)}}function a(t){if("function"==typeof e){i(t,r);try{return e(t)}catch(t){return C(t)}}return C(t)}function s(t){return"function"==typeof n?n(t):t}var r=this,l=d(),u=!1;return H(function(){r.promiseDispatch(function(t){u||(u=!0,l.resolve(o(t)))},"when",[function(t){u||(u=!0,l.resolve(a(t)))}])}),r.promiseDispatch(void 0,"when",[void 0,function(t){var e,n=!1;try{e=s(t)}catch(t){if(n=!0,!c.onerror)throw t;c.onerror(t)}n||l.notify(e)}]),l.promise},c.when=m,h.prototype.thenResolve=function(t){return this.then(function(){return t})},c.thenResolve=function(t,e){return c(t).thenResolve(e)},h.prototype.thenReject=function(t){return this.then(function(){throw t})},c.thenReject=function(t,e){return c(t).thenReject(e)},c.nearer=f,c.isPromise=g,c.isPromiseAlike=b,c.isPending=y,h.prototype.isPending=function(){return"pending"===this.inspect().state},c.isFulfilled=v,h.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},c.isRejected=w,h.prototype.isRejected=function(){return"rejected"===this.inspect().state};var et=[],nt=[],it=!0;c.resetUnhandledRejections=S,c.getUnhandledReasons=function(){return et.slice()},c.stopUnhandledRejectionTracking=function(){S(),it=!1},S(),c.reject=C,c.fulfill=T,c.master=k,c.spread=L,h.prototype.spread=function(t,e){return this.all().then(function(e){return t.apply(void 0,e)},e)},c.async=E,c.spawn=A,c.return=D,c.promised=P,c.dispatch=R,h.prototype.dispatch=function(t,e){var n=this,i=d();return H(function(){n.promiseDispatch(i.resolve,t,e)}),i.promise},c.get=function(t,e){return c(t).dispatch("get",[e])},h.prototype.get=function(t){return this.dispatch("get",[t])},c.set=function(t,e,n){return c(t).dispatch("set",[e,n])},h.prototype.set=function(t,e){return this.dispatch("set",[t,e])},c.del=c.delete=function(t,e){return c(t).dispatch("delete",[e])},h.prototype.del=h.prototype.delete=function(t){return this.dispatch("delete",[t])},c.mapply=c.post=function(t,e,n){return c(t).dispatch("post",[e,n])},h.prototype.mapply=h.prototype.post=function(t,e){return this.dispatch("post",[t,e])},c.send=c.mcall=c.invoke=function(t,e){return c(t).dispatch("post",[e,G(arguments,2)])},h.prototype.send=h.prototype.mcall=h.prototype.invoke=function(t){return this.dispatch("post",[t,G(arguments,1)])},c.fapply=function(t,e){return c(t).dispatch("apply",[void 0,e])},h.prototype.fapply=function(t){return this.dispatch("apply",[void 0,t])},c.try=c.fcall=function(t){return c(t).dispatch("apply",[void 0,G(arguments,1)])},h.prototype.fcall=function(){return this.dispatch("apply",[void 0,G(arguments)])},c.fbind=function(t){var e=c(t),n=G(arguments,1);return function(){return e.dispatch("apply",[this,n.concat(G(arguments))])}},h.prototype.fbind=function(){var t=this,e=G(arguments);return function(){return t.dispatch("apply",[this,e.concat(G(arguments))])}},c.keys=function(t){return c(t).dispatch("keys",[])},h.prototype.keys=function(){return this.dispatch("keys",[])},c.all=M,h.prototype.all=function(){return M(this)},c.allResolved=function(t,e,n){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e+" is deprecated, use "+n+" instead.",new Error("").stack),t.apply(t,arguments)}}(U,"allResolved","allSettled"),h.prototype.allResolved=function(){return U(this)},c.allSettled=B,h.prototype.allSettled=function(){return this.then(function(t){return M(K(t,function(t){function e(){return t.inspect()}return t=c(t),t.then(e,e)}))})},c.fail=c.catch=function(t,e){return c(t).then(void 0,e)},h.prototype.fail=h.prototype.catch=function(t){return this.then(void 0,t)},c.progress=V,h.prototype.progress=function(t){return this.then(void 0,void 0,t)},c.fin=c.finally=function(t,e){return c(t).finally(e)},h.prototype.fin=h.prototype.finally=function(t){return t=c(t),this.then(function(e){return t.fcall().then(function(){return e})},function(e){return t.fcall().then(function(){throw e})})},c.done=function(t,e,n,i){return c(t).done(e,n,i)},h.prototype.done=function(t,e,n){var o=function(t){H(function(){if(i(t,a),!c.onerror)throw t;c.onerror(t)})},a=t||e||n?this.then(t,e,n):this;"object"===("undefined"==typeof process?"undefined":_typeof(process))&&process&&process.domain&&(o=process.domain.bind(o)),a.then(void 0,o)},c.timeout=function(t,e,n){return c(t).timeout(e,n)},h.prototype.timeout=function(t,e){var n=d(),i=setTimeout(function(){e&&"string"!=typeof e||(e=new Error(e||"Timed out after "+t+" ms"),e.code="ETIMEDOUT"),n.reject(e)},t);return this.then(function(t){clearTimeout(i),n.resolve(t)},function(t){clearTimeout(i),n.reject(t)},n.notify),n.promise},c.delay=function(t,e){return void 0===e&&(e=t,t=void 0),c(t).delay(e)},h.prototype.delay=function(t){return this.then(function(e){var n=d();return setTimeout(function(){n.resolve(e)},t),n.promise})},c.nfapply=function(t,e){return c(t).nfapply(e)},h.prototype.nfapply=function(t){var e=d(),n=G(t);return n.push(e.makeNodeResolver()),this.fapply(n).fail(e.reject),e.promise},c.nfcall=function(t){var e=G(arguments,1);return c(t).nfapply(e)},h.prototype.nfcall=function(){var t=G(arguments),e=d();return t.push(e.makeNodeResolver()),this.fapply(t).fail(e.reject),e.promise},c.nfbind=c.denodeify=function(t){var e=G(arguments,1);return function(){var n=e.concat(G(arguments)),i=d();return n.push(i.makeNodeResolver()),c(t).fapply(n).fail(i.reject),i.promise}},h.prototype.nfbind=h.prototype.denodeify=function(){var t=G(arguments);return t.unshift(this),c.denodeify.apply(void 0,t)},c.nbind=function(t,e){var n=G(arguments,2);return function(){function i(){return t.apply(e,arguments)}var o=n.concat(G(arguments)),a=d();return o.push(a.makeNodeResolver()),c(i).fapply(o).fail(a.reject),a.promise}},h.prototype.nbind=function(){var t=G(arguments,0);return t.unshift(this),c.nbind.apply(void 0,t)},c.nmapply=c.npost=function(t,e,n){return c(t).npost(e,n)},h.prototype.nmapply=h.prototype.npost=function(t,e){var n=G(e||[]),i=d();return n.push(i.makeNodeResolver()),this.dispatch("post",[t,n]).fail(i.reject),i.promise},c.nsend=c.nmcall=c.ninvoke=function(t,e){var n=G(arguments,2),i=d();return n.push(i.makeNodeResolver()),c(t).dispatch("post",[e,n]).fail(i.reject),i.promise},h.prototype.nsend=h.prototype.nmcall=h.prototype.ninvoke=function(t){var e=G(arguments,1),n=d();return e.push(n.makeNodeResolver()),this.dispatch("post",[t,e]).fail(n.reject),n.promise},c.nodeify=z,h.prototype.nodeify=function(t){if(!t)return this;this.then(function(e){H(function(){t(null,e)})},function(e){H(function(){t(e)})})};var ot=l();return c}),define("common/view/entity/base",["lodash"],function(t){function e(e){t.extend(this,e),this.init(e)}return t.extend(e.prototype,{init:function(t){},get:function(e,n){return t.has(this,e)&&!t.isNull(this[e])?this[e]:!t.isUndefined(n)&&n},set:function(t,e){return this[t]=e,this.get(t)},delete:function(e){t.has(this,e)&&delete this[e]},map:function(e,n){t.has(this,e)&&this.set(n,this.get(e)),this.delete(e)}}),e}),define("common/view/entity/config",["lodash","common/util/extends","common/view/entity/base"],function(t,e,n){function i(t){n.call(this,t)}return e(i,n,{init:function(){},getDefaults:function(){return this.get("defaults",{})}}),i}),define("common/view/model/base",["lodash","signals","common/view/entity/base","common/view/entity/config"],function(t,e,n,i){var o=function(n){this.setConfig(n,!1),t.extend(this,this.config.getDefaults()),this.signals={updated:new e.Signal}};return t.extend(o.prototype,{rawData:{},setConfig:function(e,n){t.isUndefined(n)&&(n=!0),this.config=new i(e),!0===n&&this.updateViewData()},updateViewData:function(){this.setViewData(),this.signals.updated.dispatch(this.getViewData())},setViewData:function(){this.viewData=t.clone(this.getEntity())},getViewData:function(){return this.viewData},setEntity:function(t){this.entity=new n(t)},getEntity:function(){return this.entity},setRawData:function(t){this.rawData=t},getRawData:function(){return this.rawData},setSourceData:function(t){return this.setRawData(t),this.setEntity(t),this.updateViewData(),this.getViewData()},subscribe:function(t,e){switch(t){case"update":this.signals.updated.add(e)}}}),o}),define("common/service/MVM-component",["q","lib/ecmaScript5","lodash","common/view/model/base"],function(t,e,n,i){function o(t,e){this.model=t,n.isUndefined(e)&&(e=new i),this.viewModel=e}return n.extend(o.prototype,{getModel:function(){return this.model},getViewModel:function(){return this.viewModel},init:function(){var e=t.defer(),n=this;return this.getModel().init().then(function(){n.setViewModelSourceData(),e.resolve()}).fail(function(t){e.reject(t)}),e.promise},setViewModelSourceData:function(){this.getViewModel().setSourceData(this.getModel().getData())},getViewData:function(){return this.getViewModel().getViewData()},getData:function(){return this.getModel().getData()}}),o}),define("module/MVVM-component",["lib/ecmaScript5","lodash","common/service/MVM-component","jquery","signals"],function(t,e,n,i,o){function a(t,i,a,s){this.shouldUpdate=!0,this.MVMcomponent=new n(t,i),this.model=t,this.viewModel=i,this.template=a,this.signals={updated:new o.Signal},e.extend(this,s)}return e.extend(a.prototype,{load:function(){return this.MVMcomponent.init().then(this.componentReady.bind(this))},getModel:function(){return this.model},getViewModel:function(){return this.viewModel},getEntity:function(){return this.getViewModel().getEntity()},getViewData:function(){return this.getViewModel().getViewData()},componentReady:function(t){this.shouldUpdate&&this.getModel().subscribe("update",this.modelUpdated.bind(this)),this.update()},modelUpdated:function(t){this.viewModel.setSourceData(t.getData()),this.update()},updateViewConfig:function(t){this.viewModel.setConfig(t),this.update()},updateModelConfig:function(t){this.getModel().update(t)},update:function(){this.signals.updated.dispatch(this.render())},render:function(){return this.template(this.MVMcomponent.getViewData())},subscribe:function(t,e){switch(t){case"update":this.signals.updated.add(e)}}}),a}),define("common/view/model-v2/link/link-box",["lodash","common/util/extends","common/view/model-v2/base","common/interface/entity/link","templates","common/view/model-v2/analytics/factory"],function(t,e,n,i,o,a){function s(){n.apply(this,arguments)}return e(s,n,{entityInterface:i,setViewData:function(){var e={class:this.getConfig().get("class",""),title:this.getEntity().getTitle(),id:this.getEntity().getId(),icon:this.getConfig().get("icon",""),url:this.getEntity().getURL()},n=this.getConfig().get("analyticsConfig",!1);t.has(this.getEntity(),"selected")&&(e.selected=this.getEntity().selected),!1!==n&&(e["analytics-element-metadata"]=a.getElementMetadata(n.elementId,n.elementName)),this.viewData=e}}),s}),define("common/helper/domain-brand-mapper",["lodash"],function(t){var e={"bbc.co.uk/news/":"news","/culture/":"culture","/earth/":"earth","/travel/":"travel","/capital/":"capital","/autos/":"autos","/future/":"future"};return{getBrand:function(t){if("string"==typeof t&&t.length>0)for(var n in e)if(e.hasOwnProperty(n)&&-1!=t.search(n))return e[n];return!1}}}),define("common/helper/context-data/item",["lodash"],function(t){function e(t,e,n){this.context=t,this["context-url"]=e,this["context-class"]=n}return e}),define("common/view/model-v2/promo/context-heading-types",[],function(){return{DOMAIN:"domain",NONE:"none"}}),define("common/view/model-v2/promo/context-heading",["lodash","common/util/extends","common/util/logger","common/view/model-v2/base","common/interface/entity/promo","common/helper/domain-brand-mapper","common/helper/context-data/item","./context-heading-types"],function(t,e,n,i,o,a,s,r){function l(){i.apply(this,arguments)}return e(l,i,{entityInterface:o,setViewData:function(){var e,n=!1;switch(this.getConfig().get("type")){case r.NONE:e=[];break;case r.DOMAIN:e=this.getBrandContext();break;default:e=this.getEntity().getContext(this.getConfig())}t.isArray(e)&&e.length>0&&(n=!0),this.viewData={contextItems:e,hasContext:n}},getBrandContext:function(){var t=a.getBrand(this.getEntity().getURL());return!1===t?[]:[new s("BBC "+t.ucfirst(),"/"+t,"brand-"+t+" context-heading")]}}),l}),define("common/helper/page-type",[],function(){function t(t){return!!(_.isString(t)&&t.length>0&&"story"===e(t))}function e(t){var e={index:"index",column:"index",section:"index",tag:"index","calendar-index":"index","video-index":"index",story:"story",image:"story",audio:"story",video:"story",slideshow:"story",infographic:"story",event:"event","slideshow-gallery":"slideshow"};return void 0!==e[t]&&e[t]}return{isStoryType:t,getPageType:e}}),define("common/view/model-v2/promo/promo-unit",["lodash","common/util/extends","common/util/logger","common/view/model-v2/base","common/view/model-v2/image/html-element","common/view/model-v2/link/link-box","common/view/model-v2/promo/context-heading","common/view/model-v2/analytics/interaction-element-meta-data","common/entity/vanilla/analytics/interaction-element-meta-data","common/helper/domain-brand-mapper","common/interface/entity/promo","common/helper/page-type"],function(t,e,n,i,o,a,s,r,l,c,d,u){function p(){i.apply(this,arguments)}return e(p,i,{entityInterface:d,setViewData:function(){var t=c.getBrand(this.getEntity().getURL()),e=this.getAnalytics(),n={title:this.getEntity().getTitle(),url:this.getEntity().getURL(),summary:this.getEntity().getSummary(),"icon-type":this.getEntity().getIconType(),brand:t,class:this.getConfig().get("class",""),context:this.getContext(),image:this.getImage(),tags:this.getRelatedLinks(),useStandardLayout:function(){return!this.useAlternativeLayout()},useAlternativeLayout:function(){return"alternative"===this.class.substring(0,11)},"analytics-element-metadata":e};this.getConfig().get("use-long-summary")&&(n.summary=this.getEntity().getSummaryLong()),this.getConfig().get("include-branded-class")&&(n.class+=" "+this.getBrandedClass(t)),this.viewData=n},getBrandedClass:function(e){return t.isString(e)?"brand-"+e:""},getImage:function(){var e=this.getEntity().getImage(),n=this.getConfig().get("displayImage",!0),i={class:"responsive landscape",includeCaption:!1,imageAnalyticsConfig:this.getImageAnalyticsConfig()},a=t.merge(i,this.getConfig().get("image",{}));return!!n&&(e?(e.setIconType(this.getEntity().getIconType()),e.setReplaceURL(this.getEntity().getURL()),new o(e,a).setSourceData(!1,{})):{})},getRelatedLinks:function(){var e={items:[]};return this.getEntity().getRelatedLinks()&&t.each(this.getEntity().getRelatedLinks().getListItems(),function(t){e.items.push(new a(t,this.getConfig().get("link",{})).setSourceData({},!1))},this),e},getContext:function(){return new s(this.getEntity(),{type:this.getConfig().get("context","any")}).setSourceData({},!1)},getImageAnalyticsConfig:function(){var e=this.getConfig(),n=e.get("image",!1),i=u.getPageType(this.getEntity().getType()),o=!1!==i?i+"-promo-image":"promo-image",a={elementId:o,elementType:o,elementName:this.getEntity().getTitle()},s=e.get("analyticsConfig",{});return t.has(n,"imageAnalyticsConfig")&&t.extend(a,n.imageAnalyticsConfig),t.has(s,"elementId")&&(a.elementId=s.elementId+"-"+a.elementId),a},getLinkAnalyticsConfig:function(){var e=this.getConfig(),n=u.getPageType(this.getEntity().getType()),i={elementType:!1!==n?n+"-promo-link":"promo-link",elementName:this.getEntity().getTitle()},o=e.get("analyticsConfig",{}),a={};return t.merge(a,i,o),t.has(o,"elementId")&&(a.elementId=o.elementId+"-"+i.elementType),a},getAnalytics:function(){this.getEntity(),this.getConfig();return new r(new l(this.getLinkAnalyticsConfig()),this.getLinkAnalyticsConfig()).setSourceData({},!1)}}),p}),define("common/interface/entity/event-promo",["lodash","common/util/interface","common/interface/entity/promo"],function(t,e,n){return new e("EventPromoEntity",n.methods.concat(["getEventType","getLocation","getStartDate","getEndDate"]))}),define("common/helper/date-formatter",["lodash"],function(t){var e=new Array("January","February","March","April","May","June","July","August","September","October","November","December");return{getFormattedDate:function(t){var n=new Date(t),i=n.getUTCDate(),o=n.getUTCMonth(),a=n.getUTCFullYear();return i+" "+e[o]+" "+a},getShortMonthFromDate:function(n){if(t.isDate(n)){return e[n.getUTCMonth()].substring(0,3)}},
getDayWithLeadingZeroFromDate:function(e){if(t.isDate(e))return String("00"+e.getUTCDate()).slice(-2)},timeSince:function(e,n){var i,o;return!(!t.isDate(e)||!t.isDate(n))&&(i=Math.floor((e-n)/1e3),(o=Math.floor(i/31536e3))>1?o+" years":(o=Math.floor(i/2592e3))>1?o+" months":(o=Math.floor(i/86400))>1?o+" days":(o=Math.floor(i/3600))>1?o+" hours":(o=Math.floor(i/60),o>1?o+" minutes":Math.floor(i)+" seconds"))},secondsToMinutesAndSeconds:function(e){if(t.isNumber(e)){return{minutes:Math.floor(e/60),seconds:e%60}}return!1},padZero:function(t){return t<10?"0"+t:t}}}),define("common/view/model-v2/promo/event/dates",["lodash","common/util/extends","common/util/logger","common/view/model-v2/base","common/interface/entity/event-promo","common/helper/date-formatter"],function(t,e,n,i,o,a){function s(){i.apply(this,arguments)}return e(s,i,{entityInterface:o,setViewData:function(){this.viewData={"start-date":this.getDate(this.getEntity().getStartDate(),"start-date"),"end-date":this.getDate(this.getEntity().getEndDate(),"end-date")}},getDate:function(e,n){if(t.isDate(e))return{date:a.getDayWithLeadingZeroFromDate(e),month:a.getShortMonthFromDate(e),class:n}}}),s}),define("common/entity/vanilla/link/base",["lodash","common/util/extends","common/entity/base"],function(t,e,n){function i(e){var i={URL:"",title:"",id:!1,image:!1,entityType:""};n.call(this,t.extend(i,e))}return e(i,n,{getId:function(){return this.id},getURL:function(){return this.URL},getTitle:function(){return this.title},getImage:function(){return this.image},getEntityType:function(){return this.entityType}}),i}),define("common/interface/entity/location",["lodash","common/util/interface","common/interface/entity/base"],function(t,e,n){return new e("Location",n.methods.concat(["getVenue","getCity","getCountry","getRegion"]))}),define("common/helper/location-formatter",["lodash","common/util/interface","common/interface/entity/location"],function(t,e,n){return{asString:function(t,i){e.ensureImplements(t,n);var o=[];return t.getVenue()&&o.push(t.getVenue()),t.getCity()&&o.push(t.getCity()),t.getCountry()&&o.push(t.getCountry()),t.getRegion()&&o.push(t.getRegion()),o.join(i)}}}),define("common/view/model-v2/promo/event/promo-unit",["lodash","common/util/extends","common/util/logger","common/view/model-v2/promo/promo-unit","common/view/model-v2/promo/event/dates","common/interface/entity/event-promo","common/view/model-v2/link/link-box","common/entity/vanilla/link/base","common/helper/location-formatter","common/view/entity-URL-router"],function(t,e,n,i,o,a,s,r,l,c){function d(){i.apply(this,arguments)}return e(d,i,{entityInterface:a,setViewData:function(){i.prototype.setViewData.apply(this,arguments),this.viewData.title=this.getEntity().getShortName(),this.viewData.dates=this.getDates(),t.isString(this.getEntity().getEventType())&&(this.viewData["event-type-URL"]=c.getURLWithIndex("event-index")+"?type="+this.getEntity().getEventType().toLowerCase(),this.viewData["event-type"]=this.getEntity().getEventType()),this.getEntity().getLocation()&&this.getConfig().get("showLocation",!0)&&(this.viewData.location=l.asString(this.getEntity().getLocation(),"<br />")),this.viewData.useStandardLayout=function(){return!1},this.viewData.useEventLayout=function(){return!0}},getDates:function(){return new o(this.getEntity(),{}).setSourceData({},!1)}}),d}),define("common/interface/entity/list/base",["lodash","common/util/interface","common/interface/entity/base"],function(t,e,n){return new e("ListEntity",n.methods.concat(["getId","getTitle","getListItems"]))}),define("common/helper/advertising",["lodash","common/config"],function(t,e){var n={column:"column",video:"series",tag:"tags",destination:"dest"};return t.has(e.get(),"tags")&&(n.tag=e.get().tags.adPrefix),t.has(e.get(),"columns")&&(n.column=e.get().columns.adPrefix),{isAsyncAdsEnabled:function(){return t.has(e.get(),["advertising","async"])&&!0===e.get().advertising.async},generateIndexZoneForHabitatEntity:function(t,e){return this.generateZoneForHabitatEntity(t,e,"index")},generateZoneForHabitatEntity:function(t,e,n){return this.generateZone(t,e.getId(!0),n)},generateIndexZone:function(t){return this.generateZone(t,void 0,"index")},generateContentZone:function(t){return this.generateZone(t,void 0,"content")},generateZone:function(e,n,i){var o=[this.mapEntityPrefix(e)];return t.isUndefined(n)||o.push(n),t.isUndefined(i)||o.push(i),o.join("-")},mapEntityPrefix:function(e){return t.has(n,e)?n[e]:e},replaceMappedEntityInString:function(e){return t.isString(e)&&t.each(n,function(t,n){-1!=e.search(n)&&(e=e.replace(n,t))}),e},getAdSlot:function(e,n,i){return t.has(n,"id")&&(e=n.id),t.has(n,"groups")||(n.groups=[1,2,3,4]),t.has(n,"groups")&&t.isArray(n.groups)&&(n.jsonGroups=JSON.stringify(n.groups),n.groups=n.groups.join("_")),n.id=e,this.isAsyncAdsEnabled()&&(n.async=!0),!0===i&&(n.deferred=!0),n},getNativeAdSlots:function(e){var n=this.getDefaultAdSlots(e);return t.has(n,"sponsor-section-content")&&(n["sponsor-section-content"].text="Partnered Content Presented By"),t.has(n,"sponsor-section-hero")&&(n["sponsor-section-hero"].text="Partnered Content Presented By"),t.has(n,"adsense_mpu")&&delete n.adsense_mpu,t.has(n,"native_side")&&delete n.native_side,t.has(n,"native_responsive")&&delete n.native_responsive,n},getDefaultAdSlots:function(n){var i,o=e.get(),a={parallax:{},leaderboard:{},"leaderboard-1_2_3":{id:"leaderboard",groups:[1,2,3]},"leaderboard-4":{id:"leaderboard",groups:[4]},"mpu-1_2_3":{id:"mpu",groups:[1,2,3]},"mpu-4":{id:"mpu",groups:[4]},"mpu-1_2":{id:"mpu",groups:[1,2]},"mpu-3_4":{id:"mpu",groups:[3,4]},mpu_bottom:{},native_side:{},native_responsive:{},promo_feature_responsive:{},promo_feature_2:{},promo_feature_3:{},adsense_mpu:{},responsive_box_1:{},responsive_box_2:{},verticalnavbar:{},infeed:{}};return!0===n?a["sponsor-section-content"]={id:"sponsor_section",groups:[1,2,3,4],text:"IN ASSOCIATION WITH"}:(a["sponsor-section-content"]={id:"sponsor_section",groups:[1,2,3],text:"IN ASSOCIATION WITH"},a["sponsor-section-hero"]={id:"sponsor_section",groups:[4],text:"IN ASSOCIATION WITH"}),t.has(o,"advertising")&&t.has(o.advertising,"excluded-ad-slots")&&(i=o.advertising["excluded-ad-slots"],t.isArray(i)&&t.each(i,function(e){t.has(a,e)&&delete a[e]},this)),a}}}),define("common/view/model-v2/list/promo-group/base",["lodash","common/util/extends","common/util/logger","common/view/model-v2/base","common/view/model-v2/promo/promo-unit","common/view/model-v2/promo/event/promo-unit","common/interface/entity/list/base","common/helper/advertising","common/view/model-v2/analytics/module-meta-data","common/entity/vanilla/analytics/module-meta-data"],function(t,e,n,i,o,a,s,r,l,c){function d(){i.apply(this,arguments)}return e(d,i,{entityInterface:s,setViewData:function(){var e=this.getEntity(),n=this.getConfig().get("title"),i=this.getConfig().get("analyticsConfig"),o=this.getPromoUnits(e.getListItems()),a={id:this.getConfig().get("id",""),class:this.getConfig().get("class",""),title:e.getTitle(),"promo-group":{"has-children":!1,items:o}};t.isArray(o)&&o.length>0&&(a["promo-group"]["has-children"]=!0),!1!==n&&(a.title=n),!1!==i&&t.has(i,"module")&&(a["analytics-module-metadata"]=new l(new c({module:i.module},this.getConfig().get("analyticsConfig",{}))).setSourceData({},!1)),a["promo-group"].items=this.insertAdSlotsIntoList(this.getConfig().get("adSlots",[]),a["promo-group"].items),this.viewData=a},getPromoUnits:function(e){var n,i,o=[],a=this.getConfig().get("excludedId"),s=this.getConfig().get("groupStart",0),r=this.getConfig().get("groupEnd",e.length);return i=a?e.slice(s,r+1):e.slice(s,r),t.each(i,function(t,e){if((!1===a||t.getId()!=a)&&(n=this.getPromoUnit(t,e+1,i.length),o.push(n),o.length>=r-s))return!1},this),o},getPromoUnit:function(e,n,i,s){var r,l;switch(s=s||{},e.getType()){case"event":r=a;break;default:r=o}var c=this.getPromoAnalyticsConfig(e,n,i);return l=new r(e,t.merge({analyticsConfig:c},this.getConfig().get("promoUnit",{}),s)),l.setSourceData({},!1)},getPromoAnalyticsConfig:function(e,n,i){var o=this.getConfig().get("analyticsConfig",{}),a={};return t.has(o,"module")?a.elementId=o.module+"-"+n:a.elementId=n,!0===o.paginated&&(a.additionalData=this.getCurrentPage()),t.has(o,"totalLinkCount")?a.totalElementCount=o.totalElementCount:a.totalElementCount=i,a},getCurrentPage:function(){var e=this.getEntity(),n=e.get("paging");return!1!==n&&t.has(n,"page")?"page-"+n.page:""},insertAdSlotsIntoList:function(e,n){var i=t.cloneDeep(n);return t.each(e,function(t,e){i.splice(t.index,0,this.getAdSlot(t.slotId,t))},this),i},getAdSlot:function(t,e){return{"ad-slot":r.getAdSlot(t,e)}}}),d}),define("component/promo-group/base",["lodash","module/MVVM-component","common/view/model-v2/list/promo-group/base","templates"],function(t,e,n,i){return function(o,a,s,r){t.isUndefined(r)&&(r="promo-group-without-container");var l=new n(a,s);return new e(o,l,i[r])}}),define("requestLoader",["q","jquery"],function(t,e){var n=function(){};return n.prototype.load=function(n){var i=t.defer();return e.ajax({url:n.url,dataType:"json",headers:n.additionalHeaders}).then(function(t){i.resolve({data:t})}).fail(function(){i.reject(new Error("Cannot load "+n.url))}),i.promise},n}),define("common/model/filter/default",["lodash","common/util/extends"],function(t,e){function n(t){}return e(n,Object,{filter:function(t,e){return t}}),n}),define("common/interface/filter",["lodash","common/util/interface"],function(t,e){return new e("Filter",["filter"])}),define("common/model/base",["q","lodash","signals","common/model/filter/default","common/util/interface","common/interface/filter"],function(t,e,n,i,o,a){function s(t){e.has(t,"defaults")&&e.extend(this,t.defaults),this.setConfig(t),this.signals={updated:new n.Signal},this.setFilter(new i)}return e.extend(s.prototype,{type:"default",arrRequiredConfig:[],setConfig:function(t){e.isObject(t)||(t={}),e.each(this.arrRequiredConfig,function(n,i,o){if(!e.has(t,n))throw Error("Model requires config field "+n)}),this.config=t},update:function(t){var e=this;return this.updateConfig(t),this.init().then(function(){e.signals.updated.dispatch(e)})},updateConfig:function(t){var n=e.cloneDeep(this.config);e.extend(n,t),this.setConfig(n)},init:function(){return this.defered=t.defer(),this.defered.resolve(this.getData()),this.defered.promise},getData:function(){return this.getFilter().filter(this.data,this.config)},setData:function(t){this.data=t},getFilter:function(){return this.filter},setFilter:function(t){o.ensureImplements(t,a),this.filter=t},getJSONString:function(){return JSON.stringify(this.getData())},subscribe:function(t,e){switch(t){case"update":this.signals.updated.add(e)}}}),s}),define("common/service/request-builder/base",["lodash","common/util/logger"],function(t,e){function n(){}return t.extend(n.prototype,{getRequestData:function(t,e,n){return this.checkArguments(t,e,n),{url:this.getRequestURL(t,n),dataType:e,additionalHeaders:this.getAdditionalHeaders(n)}},getRequestURL:function(t,e){return this.buildURLScheme(t,e)},getAdditionalHeaders:function(t){return{}},buildURLScheme:function(e,n){var i,o=e.match(/{.*?}/g);return t.each(o,function(o,a,s){i=o.substring(1,o.length-1),t.has(n,i)&&(e=e.replace(o,n[i]))}),e},checkArguments:function(t,e,n){if(arguments.length<3)throw Error("All arguments must be provided to request builder")}}),n}),define("common/model/remote",["lib/ecmaScript5","lodash","requestLoader","q","common/util/extends","common/model/base","common/service/request-builder/base","common/util/logger"],function(t,e,n,i,o,a,s,r){function l(t){a.call(this,t),this.resetLoadState()}return o(l,a,{URLScheme:"/{url}",dataType:"json",type:"remote",isLoaded:!1,customApiVersion:null,requestBuilder:new s,getRequestData:function(){return this.requestData},setRequestData:function(t){this.requestData=t},resetLoadState:function(){this.defered=i.defer(),this.isLoaded=!1,this.prepareInput();var t=e.cloneDeep(this.config);null!==this.customApiVersion&&(t.api.version=this.customApiVersion.toLowerCase()),this.setRequestData(this.requestBuilder.getRequestData(this.URLScheme,this.dataType,t))},setApiVersion:function(t){if("string"!=typeof t||0===t.trim().length)throw new Error("API version has to be a non empty string");this.customApiVersion=t,this.resetLoadState()},prepareInput:function(){},init:function(){return this.load()},update:function(t){return this.updateConfig(t),this.resetLoadState(),a.prototype.update.call(this,t)},load:function(){if(this.isLoaded)this.defered.resolve(this.getData());else{new n({requestTimeout:this.config.requestTimeout}).load(this.getRequestData()).then(this.dataLoaded.bind(this)).fail(this.loadError.bind(this))}return this.defered.promise},dataLoaded:function(t){var e;try{e=this.parseData(t.data,this.config)}catch(n){this.defered.reject(n),r.get().warn("RemoteDataModel:dataLoaded: error parsing data ",this.requestData)}if(e)this.isLoaded=!0,this.setData(e),this.defered.resolve(this.getData());else{var n=new Error("Not found");n.status=404,this.defered.reject(n),r.get().warn("RemoteDataModel:dataLoaded: data cannot be parsed ",this.requestData)}},parseData:function(t,e){return t},loadError:function(t){this.defered.reject(t),r.get().warn("RemoteDataModel:loadError:"+t.message)},populate:function(t){this.isLoaded=!0,this.setData(t)}}),l}),define("common/service/request-builder/habitat",["lodash","common/util/extends","common/service/request-builder/base"],function(t,e,n){function i(t){n.call(this,t)}return e(i,n,{getRequestURL:function(t,e){return e.api.url+"/"+e.api.version+this.buildURLScheme(t,e)},getAdditionalHeaders:function(e){return t.has(e,"api")&&t.has(e.api,"request-key")?{"X-HabitatRequestKey":e.api["request-key"]}:{}},checkArguments:function(e,n,i){if(arguments.length<3)throw Error("All arguments must be provided to request builder");if(!t.has(i,"api")||!t.has(i.api,"url")||!t.has(i.api,"version"))throw Error("API data must be set in config")}}),i}),define("common/model/habitat",["lodash","common/util/extends","common/model/remote","common/service/request-builder/habitat"],function(t,e,n,i){function o(t){n.call(this,t)}return e(o,n,{requestBuilder:new i}),o}),define("common/entity/external/around-bbc/promo",["lodash","common/util/extends","common/util/logger","common/entity/base","common/entity/vanilla/image","common/helper/context-data/item"],function(t,e,n,i,o,a){function s(e,n){var o={id:!1,PromoUrl:"",Headline:"",image:!1,description:"",iconType:"",context:!1,type:""};i.call(this,t.extend(o,e),n)}return e(s,i,{init:function(e,n){i.prototype.init.apply(this,arguments),t.has(e,"ImageUrl")&&this.set("image",new o({URL:e.ImageUrl,replaceURL:e.PromoUrl})),t.has(e,"ContextName")&&this.set("context",[new a(e.ContextName,e.ContextUrl)])},getId:function(){return this.id},getURL:function(){return this.PromoUrl},getTitle:function(){return this.Headline},getImage:function(){return this.image},getShortName:function(){return this.Headline},getClientName:function(){return this.clientName},setSummary:function(t){this.description=t},getSummary:function(){return this.description},getSummaryLong:function(){return this.getSummary()},getContext:function(){return this.context},getIconType:function(){return this.iconType},getType:function(){return this.type},getRelatedLinks:function(){return!1}}),s}),define("common/data/uk-blacklist",[],function(){return["autos","travel"]}),define("common/helper/geo-location",["lodash","common/util/request","common/data/uk-blacklist","common/helper/domain-brand-mapper"],function(t,e,n,i){return{isURLPermitted:function(e){var o=i.getBrand(e);return!this.isUK()||!t.contains(n,o)},isUK:function(){return e.get("data").isUK}}}),define("common/model/external/around-the-bbc",["lodash","common/util/extends","common/model/habitat","common/entity/external/around-bbc/promo","common/helper/geo-location"],function(t,e,n,i,o){function a(t){n.call(this,t)}return e(a,n,{URLScheme:"/external/around-the-bbc/{moduleId}",parseData:function(e){var n,a=[];return!!t.isArray(e)&&(t.each(e,function(t){n=new i(t),o.isURLPermitted(n.getURL())&&a.push(t)}),{items:a})}}),a}),define("common/entity/list/base",["lodash","common/util/extends","common/entity/base"],function(t,e,n){function i(e,i){var o={id:!1,title:"",listItems:[]};n.call(this,t.extend(o,e),i)}return e(i,n,{getId:function(){return this.id},getTitle:function(){return this.title},getListItems:function(){return this.listItems}}),i}),define("common/entity/list/entity",["lodash","common/util/extends","common/util/logger","common/entity/list/base"],function(t,e,n,i){function o(e,n){var o={id:!1,title:"",listItems:[]};i.call(this,t.extend(o,e),n)}return e(o,i,{init:function(t){i.prototype.init.apply(this,arguments),this.initListItems()},entityFactoryDependencies:["listItem"],initListItems:function(){var e,n=this.getListItems();this.flushListItems(),t.each(n,function(t){!1!==(e=this.createEntity(t))&&this.addListItem(e)},this)},createEntity:function(t){return this.getEntityFactory().create("listItem",t)},addListItem:function(t){this.getListItems().push(t)},flushListItems:function(){this.listItems=[]},getListItems:function(){return this.listItems}}),o}),define("common/entity/external/around-bbc/list",["lodash","common/util/extends","common/util/logger","common/entity/list/entity","common/entity/external/around-bbc/promo"],function(t,e,n,i,o){function a(t,e){i.apply(this,arguments)}return e(a,i,{entityFactoryDependencies:[],flushListItems:function(){this.items=[]},getListItems:function(){return this.items},createEntity:function(t){return new o(t)}}),a}),define("component/promo-group/around-the-bbc",["lodash","common/config","component/promo-group/base","common/model/external/around-the-bbc","common/entity/external/around-bbc/list","templates"],function(t,e,n,i,o,a){return function(a,s){return n(new i(e.get()),new o,t.extend({title:"Around the BBC"},s),"promo-group")}}),define("layouts/page",["lodash","lib/ecmaScript5","jquery","lib/domReady","model/mediaQuery","module/navigation/primary","module/navigation/toggle","module/responsiveImages/main","module/responsiveImages/formats/wwfeaturesHero","module/responsiveImages/formats/wwfeatures16x9","module/responsiveImages/formats/wwfeatures83x120","module/responsiveImages/formats/wwfeaturesBanner","module/imageReplacer","module/search","module/responsiveFrameManager","module/component-loader","component/promo-group/around-the-bbc","common/config"],function(t,e,n,i,o,a,s,r,l,c,d,u,p,h,m,f,g,b){var y=function(t,e,n){this.imageRatio=n,this.setSelector(t),this.hiddenClass="hidden",this._isNative=this.getSelector().hasClass("native"),this.aroundTheBBCSelector="#around-bbc"};return t.extend(y.prototype,{init:function(){var t=new p;new h("#orb-search-form");this.navigation=new a("#nav-top"),this.toggle=new s("#sections-nav-button"),this.toggle.subscribe("toggle",this.navigation.toggleOverlay.bind(this.navigation)),t.replace("a[data-replace-image='true'][data-is-portrait='false']","responsive landscape"),t.replace("div[data-replace-image='true'][data-is-portrait='false']","responsive landscape"),t.replace("a[data-replace-image='true'][data-is-portrait='true']","responsive portrait"),t.replace("div[data-replace-image='true'][data-is-portrait='true']","responsive portrait"),this.setupResponsiveImages(),m.init(),this.setupAroundTheBBCComponent()},layout:function(){this.responsiveImages.respond(),o.isTablet(!0)&&(this.navigation.disableOverlay(),this.toggle.deactivate())},setupResponsiveImages:function(){this.responsiveImages=new r,this.responsiveImages.add(n("img.responsive-hero"),l),this.responsiveImages.add(n("img.responsive.landscape"),c,this.imageRatio),this.responsiveImages.add(n("img.responsive.portrait"),d),this.responsiveImages.add(n("img.responsive-banner"),u)},setupAroundTheBBCComponent:function(){if(t.has(b.get(),"module")&&t.has(b.get().module,"backendModuleId")&&n(this.aroundTheBBCSelector).length>0){var e=new g(b.get().module.backendModuleId,{groupEnd:6,class:"single-column-primary",promoUnit:{class:"around-the-bbc",image:{useImageTag:!0,format:{landscape:{x:"464",y:"261"}}}},analyticsConfig:{module:"around-the-bbc",totalElementCount:6}});new f(n(this.aroundTheBBCSelector),e,{}).load()}},isNative:function(){return this._isNative},show:function(){this.getSelector().hasClass(this.hiddenClass)&&this.toggleHide()},toggleHide:function(){this.getSelector().toggleClass(this.hiddenClass)},setSelector:function(t){this.selector=n(t)},getSelector:function(){return this.selector}}),y});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define("mresize",["jquery"],t):"object"==("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=t:t(jQuery)}(function(t){t.event.special.mresize={add:function(){var e=t(this);e.data("mresize")||("static"===e.css("position")&&e.css("position","relative"),e.append("<div class='resize' style='position:absolute; width:auto; height:auto; top:0; right:0; bottom:0; left:0; margin:0; padding:0; overflow:hidden; visibility:hidden; z-index:-1'><iframe style='width:100%; height:0; border:0; visibility:visible; margin:0' /><iframe style='width:0; height:100%; border:0; visibility:visible; margin:0' /></div>").data("mresize",{w:e.width(),h:e.height(),t:null,throttle:100}).find(".resize iframe").each(function(){t(this.contentWindow||this).on("resize",function(){var t=e.data("mresize");(t.w!==e.width()||t.h!==e.height())&&(t.t&&clearTimeout(t.t),t.t=setTimeout(function(){e.triggerHandler("mresize"),t.w=e.width(),t.h=e.height()},t.throttle))})}))},remove:function(){t(this).removeData("mresize").find(".resize").remove()}}}),define("module/scroller",["jquery","lodash"],function(t,e){function n(){this.speed=0}return n.prototype.scrollTo=function(e){if(e.$target&&1===e.$target.length){var n=e.$target.offset().top,i=e.speed||this.speed;t("html,body").animate({scrollTop:n},i)}},n.prototype.scrollToTop=function(e){var n=e||this.speed;t("html,body").animate({scrollTop:0},n)},n.prototype.jumpToTop=function(){t("body")[0].scrollIntoView()},n}),define("module/slideshow-gallery/start-overlay",["jquery"],function(t){function e(){this.selector="[data-sg-start-overlay]",this.init()}return e.prototype.init=function(){var t=this.getSelector();this.setSelector(t)},e.prototype.hide=function(t){this.$selector.fadeOut("fast",function(){"function"==typeof t&&t()})},e.prototype.setSelector=function(e){this.$selector=t(e)},e.prototype.getSelector=function(){return this.selector},e}),define("module/slideshow-gallery/transition-overlay",["jquery"],function(t){function e(){this.selector="[data-sg-transition-overlay]",this.animationDuration=100,this.init()}return e.prototype.init=function(){var t=this.getSelector();this.setSelector(t)},e.prototype.hide=function(){this.getSelector().fadeOut(this.animationDuration)},e.prototype.show=function(){this.getSelector().fadeIn(this.animationDuration)},e.prototype.setSelector=function(e){this.selector=t(e)},e.prototype.getSelector=function(){return this.selector},e}),define("module/slideshow-gallery/layout",["jquery","lodash","lib/ecmaScript5","lib/domReady","model/mediaQuery"],function(t,e,n,i,o){var a=function(){this.cachedLayout="",this.verticalScrollLayoutName="vertical-scroll",this.slideshowLayoutName="slideshow",this.cachedLayoutChanged=!1,this.init()};return a.prototype.init=function(){var t=this.getCurrentLayout();this.setCachedLayout(t),this.bindWindowEvents()},a.prototype.isVerticalScroll=function(){return!!o.isFixedWidthLayout()||o.getGroup()<4},a.prototype.isSlideshow=function(){return!o.isFixedWidthLayout()&&!this.isVerticalScroll()},a.prototype.hasChanged=function(){return this.getCachedLayoutChanged()},a.prototype.hasChangedToSlideshow=function(){return!(!this.getCachedLayoutChanged()||!this.isSlideshow())},a.prototype.hasChangedToVerticalScroll=function(){return!(!this.getCachedLayoutChanged()||!this.isVerticalScroll())},a.prototype.getCurrentLayout=function(){return this.isVerticalScroll()?this.verticalScrollLayoutName:this.slideshowLayoutName},a.prototype.getCachedLayout=function(){return this.cachedLayout},a.prototype.setCachedLayout=function(t){this.cachedLayout=t},a.prototype.getCachedLayoutChanged=function(){return this.cachedLayoutChanged},a.prototype.setCachedLayoutChanged=function(t){e.isBoolean(t)&&(this.cachedLayoutChanged=t)},a.prototype.updateCachedLayoutChanged=function(){var t=this.getCachedLayout();return this.getCurrentLayout()===t?this.setCachedLayoutChanged(!1):this.setCachedLayoutChanged(!0)},a.prototype.updateCachedLayout=function(){if(this.cachedLayoutChanged){var t=this.getCurrentLayout();this.setCachedLayout(t)}},a.prototype.handleWindowResize=function(){this.updateCachedLayoutChanged(),this.updateCachedLayout()},a.prototype.bindWindowEvents=function(){t(window).on("resize",this.handleWindowResize.bind(this))},a}),define("module/slideshow-gallery/navigation",["jquery","lib/domReady","lib/ecmaScript5","module/slideshow-gallery/layout"],function(t,e,n,i){function o(t,e){return this.selector=e,this.slideshow=t,this.layout=new i,this.init(),this}return o.prototype.init=function(){var t=this.getSelector();this.setSelector(t),this.slideshow&&this.getSelector().length&&(this.setupSelectors(),this.bindNavigationEvents(),this.bindKeyboardEvents())},o.prototype.setupSelectors=function(){this.startSelector="[data-sg-start]",this.prevSelector="[data-sg-prev]",this.nextSelector="[data-sg-next]",this.activeClass="is-active",this.inactiveClass="is-inactive",this.$nextButton=this.getSelector().find(this.nextSelector),this.$prevButton=this.getSelector().find(this.prevSelector),this.$startButton=this.getSelector().find(this.startSelector)},o.prototype.focusElement=function(t){t.length>0&&t.focus()},o.prototype.updateNavigation=function(t,e){switch(!0){case t:this.updateButton(this.$nextButton,"hide"),this.updateButton(this.$prevButton,"hide"),this.focusElement(this.$startButton);break;case e:this.updateButton(this.$nextButton,"hide"),this.updateButton(this.$prevButton,"show"),this.focusElement(this.$prevButton);break;default:this.updateButton(this.$nextButton,"show"),this.updateButton(this.$prevButton,"show"),"forwards"===this.getDirection()?this.focusElement(this.$nextButton):"backwards"===this.getDirection()&&this.focusElement(this.$prevButton)}},o.prototype.updateButton=function(t,e){if(t.length>0){var n,i,o;switch(e){case"show":n=this.inactiveClass,i=this.activeClass,o=!1;break;case"hide":n=this.activeClass,i=this.inactiveClass,o=!0;break;default:n=this.activeClass,i=this.inactiveClass,o=!0}t.removeClass(n).addClass(i).attr("aria-hidden",o)}},o.prototype.handleStart=function(t){t.preventDefault(),this.getSlideshow().handleStart(),this.setDirection("forwards")},o.prototype.handlePrev=function(t){t.preventDefault(),this.setDirection("backwards"),this.getSlideshow().handleSlideChange("backwards")},o.prototype.handleNext=function(t){t.preventDefault(),this.setDirection("forwards"),this.getSlideshow().handleSlideChange("forwards")},o.prototype.handleKeyup=function(t){if(this.layout.isSlideshow())switch(t.which){case 37:this.handlePrev(t);break;case 39:this.handleNext(t)}},o.prototype.setDirection=function(t){["forwards","backwards"].indexOf(t)>-1&&(this.direction=t)},o.prototype.getDirection=function(){return this.direction},o.prototype.setSelector=function(e){this.selector=t(e)},o.prototype.getSelector=function(){return this.selector},o.prototype.getSlideshow=function(){return this.slideshow},o.prototype.bindNavigationEvents=function(){this.$prevButton.on("click",this.handlePrev.bind(this)),this.$nextButton.on("click",this.handleNext.bind(this)),this.$startButton.on("click",this.handleStart.bind(this))},o.prototype.bindKeyboardEvents=function(){t(window).on("keyup",this.handleKeyup.bind(this))},o}),define("module/responsiveImages/formats/wwfeatures4x5",["jquery","module/responsiveImages/formats/wwfeatures16x9","common/util/inherits"],function(t,e,n){function i(t){this.image=t,this.imageNamespace="wwfeatures",this.heightToWidthRatio=5/4,this.heights=[300,500,600,700,800,900,1e3,1280],this.arrFormats=[];for(var e=0;e<this.heights.length;e++){var n=this.heights[e],i=n/this.heightToWidthRatio;this.arrFormats.push({name:"wwfeatures-"+i+"-"+n,dimensions:{width:i,height:n}})}}return n(i,e),i}),define("module/responsiveImages/formats/wwfeaturesSGSplash",["jquery","module/responsiveImages/formats/wwfeatures16x9","common/util/inherits"],function(t,e,n){function i(t){this.image=t,this.imageNamespace="wwfeatures",this.arrFormats=[{name:"wwfeatures-130-73",dimensions:{width:130,height:73}},{name:"wwfeatures-240-300",dimensions:{width:240,height:300}},{name:"wwfeatures-400-500",dimensions:{width:400,height:500}},{name:"wwfeatures-480-600",dimensions:{width:480,height:600}},{name:"wwfeatures-560-700",dimensions:{width:560,height:700}},{name:"wwfeatures-624-351",dimensions:{width:624,height:351}},{name:"wwfeatures-976-549",dimensions:{width:976,height:549}},{name:"wwfeatures-1280-720",dimensions:{width:1280,height:720}},{name:"wwfeatures-1600-900",dimensions:{width:1600,height:900}}]}return n(i,e),i}),define("module/slideshow-gallery/background-manager",["lodash","jquery","module/slideshow-gallery/layout","module/responsiveImages/main","module/responsiveImages/formats/wwfeatures16x9","module/responsiveImages/formats/wwfeatures4x5","module/responsiveImages/formats/wwfeaturesSGSplash"],function(t,e,n,i,o,a,s){function r(){this.backgroundSelector="[data-background]",this.backgroundPortraitSelector="[data-portrait]"+this.backgroundSelector,this.backgroundLandscapeSelector="[data-landscape]"+this.backgroundSelector,this.splashBackgroundSelector="[data-background-splash]",this.layout=new n,this.responsiveImages=new i,this.initialised=!1}return r.prototype.init=function(){this.setupImages(),this.bindWindowEvents()},r.prototype.setupImages=function(){this.responsiveImages.add(e(this.backgroundPortraitSelector),a),this.responsiveImages.add(e(this.backgroundLandscapeSelector),o),this.responsiveImages.add(e(this.splashBackgroundSelector),s)},r.prototype.respondAll=function(){this.responsiveImages.respond()},r.prototype.load=function(n,i){var o=this.responsiveImages.getImages();t.each(o,function(t){e(t.el).is(n)&&(t.respond(),t.loadLazyImage(function(){"function"==typeof i&&i()}))})},r.prototype.handleWindowResize=function(){},r.prototype.bindWindowEvents=function(){e(window).on("resize",this.handleWindowResize.bind(this))},r}),define("module/slideshow-gallery/slideshow-gallery",["jquery","lodash","signals","mresize","lib/ecmaScript5","lib/domReady","actual","module/scroller","module/slideshow-gallery/start-overlay","module/slideshow-gallery/transition-overlay","module/slideshow-gallery/layout","module/slideshow-gallery/navigation","module/slideshow-gallery/background-manager"],function(t,e,n,i,o,a,s,r,l,c,d,u,p){var h=function(t){this.selector=t,this.backgroundSelector="[data-background]",this.slideSelector="[data-sg-slide]",this.slideContentsSelector="[data-sg-slide-contents]",this.slideTextSelector="[data-sg-slide-text]",this.textInvisibleClass="is-invisible",this.contentSlideSelector="[data-sg-content-slide]",this.endSlateSelector="[data-sg-end-slate]",this.slideTypeDataAttr="data-sg-slide-type",this.slideTextColorDataAttr="data-sg-slide-text-color",this.slideHasAmbientVideoDataAttr="[data-sg-slide-has-ambient-video]",this.fullHeightElementSelector="[data-sg-full-height]",this.currentClass="is-current",this.firstContentSlideClass="is-first-content-slide",this.setupSignals(),this.startOverlay=new l,this.transitionOverlay=new c,this.scroller=new r,this.layout=new d,this.navigation=new u(this,t),this.isSlideTransitioning=!1,this.backgroundManager=new p};return h.prototype.init=function(){var t=this.getSelector();this.setSelector(t),this.selector.length>0&&(this.backgroundManager.init(),this.setFirstContentSlideClass(),
this.bindWindowEvents(),this.startGallery(0),this.bindBodyEvents(),this.dispatchSignal("gallery-initialised"),this.setupAccessibility())},h.prototype.setFirstContentSlideClass=function(){this.getFirstContentSlide().addClass(this.firstContentSlideClass)},h.prototype.setupSignals=function(){this.slideChangeInitialiasedSignal=new n.Signal,this.slideChangeBackgroundLoadedSignal=new n.Signal,this.slideChangeTransitionEndSignal=new n.Signal,this.galleryStartedSignal=new n.Signal,this.galleryInitialisedSignal=new n.Signal,this.galleryStartOverlayHiddenSignal=new n.Signal},h.prototype.subscribe=function(t,e){switch(t){case"slide-change-initialised":this.slideChangeInitialiasedSignal.add(e);break;case"slide-change-background-loaded":this.slideChangeBackgroundLoadedSignal.add(e);break;case"slide-change-transition-end":this.slideChangeTransitionEndSignal.add(e);break;case"gallery-started":this.galleryStartedSignal.add(e);break;case"gallery-initialised":this.galleryInitialisedSignal.add(e);break;case"gallery-start-overlay-hidden":this.galleryStartOverlayHiddenSignal.add(e)}},h.prototype.startGallery=function(t){if(!this.isValidSlideIndex(t))return!1;var e=this,n=this.getSlideByIndex(t);this.backgroundManager.respondAll(),this.setCurrentSlide(n),this.setTextInvisible(),this.setIsSlideTransitioning(!0);var i=n.find(e.backgroundSelector);i&&i.length?this.loadBackground(i,e.handleGalleryStarted.bind(e)):this.handleGalleryStarted.bind(e)},h.prototype.handleGalleryStarted=function(){this.setLayout(),this.setTextVisible(),this.setIsSlideTransitioning(!1),this.startOverlay.hide(this.dispatchSignal("gallery-start-overlay-hidden"))},h.prototype.getViewportHeight=function(){return t(window).height()},h.prototype.getViewportWidth=function(){return t(window).width()},h.prototype.getSlideHeight=function(){return this.getViewportHeight()-this.getContainerOffset()},h.prototype.getSlides=function(){return this.getSelector().find(this.slideSelector)},h.prototype.getSlideContentHeight=function(e){var n=0;return e.find(this.slideContentsSelector).each(function(){n+=t(this).actual("outerHeight",{includeMargin:!0})}),n},h.prototype.getContainerOffset=function(){return this.getSelector().offset().top},h.prototype.getIsSlideTransitioning=function(){return this.isSlideTransitioning},h.prototype.setIsSlideTransitioning=function(t){e.isBoolean(t)&&(this.isSlideTransitioning=t)},h.prototype.getSlideMinHeight=function(t){var n=[this.getSlideHeight(),this.getSlideContentHeight(t)];return e.max(n)},h.prototype.setHeights=function(){e.each(this.getSlides(),function(e){this.setElementHeight(t(e))},this),this.setContainerHeight()},h.prototype.unsetHeights=function(){e.each(this.getSlides(),function(e){this.setElementHeight(t(e),"auto")},this),this.unsetContainerHeight()},h.prototype.setContainerHeight=function(t){var e=t||this.getCurrentSlide(),n=this.getSlideMinHeight(e);this.getSelector().css({height:n})},h.prototype.unsetContainerHeight=function(){this.getSelector().css({height:"auto"})},h.prototype.setElementHeight=function(e,n){var i=n||this.getSlideMinHeight(e);e.css({"min-height":i}).find(t(this.fullHeightElementSelector)).css({height:i})},h.prototype.getSlideIndex=function(t){return this.getSlides().index(t)},h.prototype.getCurrentSlideIndex=function(){var t=this.getCurrentSlide();return this.getSlideIndex(t)},h.prototype.getSlideByIndex=function(t){var e=this.getSlides();return!!e.eq(t)&&e.eq(t)},h.prototype.isValidSlideIndex=function(t){var e=this.getTotalSlides(),n=e-1;return t>=0&&t<=n},h.prototype.unsetCurrentSlide=function(t){return t.removeClass(this.currentClass)},h.prototype.setCurrentSlide=function(t){return t.addClass(this.currentClass)},h.prototype.isCurrentSlide=function(t){return t.hasClass(this.currentClass)},h.prototype.getCurrentSlide=function(){var n=this,i=this.getSlides(),o=e.filter(i,function(e){return n.isCurrentSlide(t(e))});return t(o[0])},h.prototype.getTotalSlides=function(){return this.getSlides().length},h.prototype.isProgressSlide=function(t){return this.isContentSlide(t)||this.isEndSlate(t)},h.prototype.getProgressSlides=function(){var n=this,i=this.getSlides(),o=e.filter(i,function(e){return n.isProgressSlide(t(e))});return t(o)},h.prototype.isValidProgressIndex=function(t){return t&&e.isNumber(t)},h.prototype.isValidProgressTotal=function(t){return t&&e.isNumber(t)},h.prototype.getProgress=function(t){var e=this.getProgressIndex(t),n=this.getProgressTotal();return!(!this.isValidProgressIndex(e)||!this.isValidProgressTotal(n))&&{index:e,total:n}},h.prototype.getProgressTotal=function(){return this.getProgressSlides().length},h.prototype.getProgressDisplayIndex=function(t){return t+1},h.prototype.getProgressIndex=function(t){var e=this.getProgressSlides();return-1!==e.index(t)&&this.getProgressDisplayIndex(e.index(t))},h.prototype.getSplash=function(){var e=this.getSlides();return t(e[0])},h.prototype.getFirstContentSlide=function(){var e=this.getSlides();return t(e[1])},h.prototype.getLastSlide=function(){var e=this.getSlides(),n=this.getTotalSlides();return t(e[n-1])},h.prototype.getNextSlide=function(){var t=this.getCurrentSlide(),e=this.getSlideIndex(t),n=this.getSlideByIndex(e+1);return n.length?n:this.getSplash()},h.prototype.getPrevSlide=function(){var t=this.getCurrentSlide(),e=this.getSlideIndex(t),n=this.getSlideByIndex(e-1);return n.length?n:this.getLastSlide()},h.prototype.handleStart=function(){var t=this.layout.isVerticalScroll();return this.dispatchSignal("gallery-started"),t?this.handleStartVerticalScroll():this.changeSlide(this.getCurrentSlide(),this.getNextSlide())},h.prototype.handleSlideChange=function(t){if(e.isString(t)){switch(t){case"backwards":this.changeSlide(this.getCurrentSlide(),this.getPrevSlide());break;case"forwards":this.changeSlide(this.getCurrentSlide(),this.getNextSlide())}this.dispatchSignal("slide-change-initialised"),this.setIsSlideTransitioning(!0)}},h.prototype.dispatchSignal=function(t,n){var i=this.getCurrentSlide(),o={contentSlideType:this.getContentSlideType(i),textColor:this.getSlideTextColor(i),currentSlideIndex:this.getSlideIndex(i),firstContentSlideTextColor:this.getSlideTextColor(this.getFirstContentSlide()),totalSlides:this.getTotalSlides(),isSplash:this.isSplash(i),isFirstContentSlide:this.isFirstContentSlide(i),isContentSlide:this.isContentSlide(i),isImageOnlySlide:this.isImageOnlySlide(i),isVideoOnlySlide:this.isVideoOnlySlide(i),isSidebarSlide:this.isSidebarSlide(i),isEndSlate:this.isEndSlate(i),hasAmbientVideo:this.hasAmbientVideo(i),progress:this.getProgress(i),slideSelector:this.slideSelector,slideType:this.getSlideType(i)};switch(n=e.extend(o,n||{}),t){case"slide-change-initialised":this.slideChangeInitialiasedSignal.dispatch(n);break;case"slide-change-background-loaded":this.slideChangeBackgroundLoadedSignal.dispatch(n);break;case"slide-change-transition-end":this.slideChangeTransitionEndSignal.dispatch(n);break;case"gallery-started":this.galleryStartedSignal.dispatch(n);break;case"gallery-initialised":this.galleryInitialisedSignal.dispatch(n);break;case"gallery-start-overlay-hidden":this.galleryStartOverlayHiddenSignal.dispatch(n)}},h.prototype.handleStartVerticalScroll=function(){var t=this.getSplash(),e=this.getFirstContentSlide();$slides=this.getSlides(),this.unsetHeights(),this.unsetCurrentSlide(t),this.setCurrentSlide(e),$slides.show(),this.scroller.scrollTo({$target:e,speed:500})},h.prototype.setTextVisible=function(){t(this.slideTextSelector).removeClass(this.textInvisibleClass)},h.prototype.setTextInvisible=function(){t(this.slideTextSelector).addClass(this.textInvisibleClass)},h.prototype.handleSlideShown=function(t,e){var n=this;this.scroller.scrollToTop(200),this.unsetCurrentSlide(t),this.setCurrentSlide(e),this.setHeights(),this.navigation.updateNavigation(n.isSplash(e),n.isEndSlate(e)),t.hide(),e.show(),this.updateARIAHiddenState(t,!0),this.updateARIAHiddenState(e,!1),this.transitionOverlay.hide(),this.dispatchSignal("slide-change-transition-end"),this.setTextVisible(),this.setLayout(),this.setIsSlideTransitioning(!1)},h.prototype.updateARIAHiddenState=function(t,n){e.isBoolean(n)&&t.length>0&&t.attr("aria-hidden",n)},h.prototype.setupAccessibility=function(){this.updateARIAHiddenState(this.getSlides(),!0),this.updateARIAHiddenState(this.getSplash(),!1)},h.prototype.transitionSlideHeights=function(t,e){var n=this.getSlideMinHeight(t),i=this.getSlideMinHeight(e);n<i?(this.setElementHeight(t,i),this.setElementHeight(e,i),this.setContainerHeight(e)):this.layout.isSlideshow()&&this.setHeights()},h.prototype.changeSlide=function(t,e){if(this.isValidNavigationStep(t,e)){var n=this;if(this.transitionOverlay.show(),this.layout.isSlideshow()){e.find(n.backgroundSelector).length?this.loadBackground(e.find(n.backgroundSelector),n.handleBackgroundLoaded.bind(n,t,e)):this.handleBackgroundLoaded(t,e)}}},h.prototype.handleBackgroundLoaded=function(t,e){var n=this;this.scroller.scrollToTop(200),this.dispatchSignal("slide-change-background-loaded"),this.setTextInvisible(),this.transitionSlideHeights(t,e),e.hide(),e.fadeIn(200,function(){n.handleSlideShown(t,e)})},h.prototype.isValidNavigationStep=function(t,e){return!(this.isSplash(t)&&this.isEndSlate(e)||this.isSplash(e)&&this.isEndSlate(t))},h.prototype.loadBackground=function(t,e){this.backgroundManager.load(t,e)},h.prototype.setLayout=function(){this.layout.isVerticalScroll()?this.setVerticalScrollLayout():this.setSlideshowLayout()},h.prototype.isSplash=function(t){return 0===this.getSlideIndex(t)},h.prototype.isFirstContentSlide=function(t){return 1===this.getSlideIndex(t)},h.prototype.isContentSlide=function(t){return t.is(this.contentSlideSelector)},h.prototype.isImageOnlySlide=function(t){return"image-only"===this.getContentSlideType(t)},h.prototype.isVideoOnlySlide=function(t){return"video-only"===this.getContentSlideType(t)},h.prototype.isSidebarSlide=function(t){return/^text-/.test(this.getContentSlideType(t))},h.prototype.getSlideType=function(t){return this.isSplash(t)?"splash":this.isContentSlide(t)?"content-slide":!!this.isEndSlate(t)&&"end-slate"},h.prototype.isEndSlate=function(t){return t.is(this.endSlateSelector)},h.prototype.setVerticalScrollLayout=function(){this.unsetHeights(),this.getSplash().show(),this.getSlides().show()},h.prototype.setSlideshowLayout=function(){var t=this.getCurrentSlide(),e=this.getSlides().not(t);this.setHeights(),e.hide(),this.loadBackground(t.find(this.backgroundSelector)),t.show()},h.prototype.isGalleryElement=function(t){return this.getSelector().find(t).length>0},h.prototype.handleWindowResize=function(){this.setLayout()},h.prototype.handleWindowClick=function(t){this.isGalleryElement(t.target)||this.setLayout()},h.prototype.bindWindowEvents=function(){t(window).on("click",this.handleWindowClick.bind(this)).on("resize",this.handleWindowResize.bind(this))},h.prototype.bindBodyEvents=function(){this.layout.isSlideshow()&&(t("body").on("mresize",this.handleBodyResize.bind(this)),t("body").data("mresize").throttle=20)},h.prototype.handleBodyResize=function(){this.getIsSlideTransitioning()||this.setLayout()},h.prototype.setSelector=function(e){this.selector=t(e)},h.prototype.getSelector=function(){return this.selector},h.prototype.getContentSlideType=function(t){return t.attr(this.slideTypeDataAttr)},h.prototype.getSlideTextColor=function(t){return t.attr(this.slideTextColorDataAttr)},h.prototype.hasAmbientVideo=function(t){return t.is(this.slideHasAmbientVideoDataAttr)},h}),define("util/transition-event-prefixer",[],function(){return function(){var t,e=document.createElement("div"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in n)if(void 0!==e.style[t])return n[t]}}),define("module/share-tools/base",["jquery","lodash","lib/ecmaScript5","lib/domReady","util/transition-event-prefixer","model/mediaQuery"],function(t,e,n,i,o,a){var s=function(t){return this.defaults={viewportModeGroups:{docked:[1,2,3],floating:[4]},class:""},this.settings=e.merge(this.defaults,t),this.viewportModeGroups=this.settings.viewportModeGroups,this.selector=this.settings.selector,this.transitionEvent=o(),this};return s.prototype.init=function(){var t=this.getSelector();this.setSelector(t)&&(this.setupListeners(),this.setupSelectors(),this.setupUIEvents(),this.setShouldBeShown(!0),this.toggleVisibility(),this.bindKeyboardEvents(),this.bindElementTransitionEvents(),this.updateTabIndexes(!1),this.setViewportMode(a.getGroup()))},s.prototype.setupListeners=function(){a.subscribe("groupChanged",this.handleMediaGroupChange.bind(this))},s.prototype.handleMediaGroupChange=function(t){this.setViewportModeChanged(this.hasViewportModeChanged(t)),this.setViewportMode(t)},s.prototype.getGroupNameByGroupNumber=function(t){var n;return e.each(this.viewportModeGroups,function(i,o){e.contains(i,t)&&(n=o)},this),n},s.prototype.setViewportModeChanged=function(t){e.isBoolean(t)&&(this.viewportModeChanged=t)},s.prototype.getViewportModeChanged=function(t){return this.viewportModeChanged},s.prototype.hasViewportModeChanged=function(t){return this.getViewportMode()!==this.getGroupNameByGroupNumber(t)},s.prototype.setViewportMode=function(t){if(e.isNumber(t)){var n=this.getGroupNameByGroupNumber(t);e.isString(n)&&(this.viewportMode=n)}},s.prototype.getViewportMode=function(){return this.viewportMode},s.prototype.setupSelectors=function(){this.toggleSelector="[data-share-toggle]",this.closeSelector="[data-share-close]",this.controlsSelector="[data-share-controls]",this.contentSelector="[data-share-content]",this.shareButton=".share-button",this.$toggle=this.getSelector().find(this.toggleSelector),this.$close=this.getSelector().find(this.closeSelector),this.$content=this.getSelector().find(this.contentSelector),this.$controls=this.getSelector().find(this.controlsSelector),this.openedClass="is-opened",this.readyClass="is-ready",this.getSelector().addClass(this.settings.class)},s.prototype.setupUIEvents=function(){this.handleToggleClick=this.handleToggleClick.bind(this),this.handleCloseClick=this.handleCloseClick.bind(this),this.handleWindowResize=this.handleWindowResize.bind(this),this.bindElementEvents(),this.bindWindowEvents()},s.prototype.bindElementEvents=function(){t("body").on("click",this.handleWindowClick.bind(this)),this.$toggle.on("click",this.handleToggleClick),this.$close.on("click",this.handleCloseClick)},s.prototype.bindWindowEvents=function(){t(window).on("resize",this.handleWindowResize)},s.prototype.handleToggleClick=function(){this.toggle()},s.prototype.handleCloseClick=function(){this.close()},s.prototype.handleWindowClick=function(t){var e=this.getTargetElementFromEvent(t);this.isOpen()&&!this.isWithinParent(e)&&(this.canDock()&&t.preventDefault(),this.close())},s.prototype.handleWindowResize=function(){this.handleViewportChange()},s.prototype.handleViewportChange=function(){this.getViewportModeChanged()&&(this.isOpen()&&this.canDock()?this.close():this.canFloat()&&this.updateTabIndexes(!1)),this.toggleVisibility()},s.prototype.toggleVisibility=function(){this.toggleDockedVisibility(),this.toggleFloatingVisibility()},s.prototype.toggleDockedVisibility=function(){this.canDock()&&this.show()},s.prototype.toggleFloatingVisibility=function(){this.canFloat()&&(this.getShouldBeShown()?this.show():this.hide())},s.prototype.getShouldBeShown=function(){return this.shouldBeShown},s.prototype.setShouldBeShown=function(t){e.isBoolean(t)&&(this.shouldBeShown=t)},s.prototype.toggle=function(){this.isOpen()?this.close():this.open()},s.prototype.close=function(){this.setOpened(!1),this.getSelector().removeClass(this.openedClass).attr("aria-expanded",!1)},s.prototype.open=function(){this.setOpened(!0),this.getSelector().addClass(this.openedClass).attr("aria-expanded",!0)},s.prototype.show=function(){this.getSelector().addClass(this.readyClass)},s.prototype.hide=function(){this.getSelector().removeClass(this.readyClass)},s.prototype.getTargetElementFromEvent=function(e){return!(!e||!e.target)&&t(e.target)},s.prototype.getSelector=function(){return this.selector},s.prototype.isWithinParent=function(t){return this.getSelector().find(t).length>0},s.prototype.isOpen=function(){return this.opened},s.prototype.setOpened=function(t){e.isBoolean(t)&&(this.opened=t)},s.prototype.setSelector=function(e){return this.selector=t(e),this.selector.length>0},s.prototype.handleKeyup=function(t){switch(t.which){case 27:this.isOpen()&&this.close()}},s.prototype.updateFocusState=function(t){t.length>0&&e.each([this.$controls,this.$content],function(e){t.is(e)&&(this.isOpen()?(this.focusElement(this.$close),this.updateTabIndexes(!0)):(this.focusElement(this.$toggle),this.updateTabIndexes(!1)))},this)},s.prototype.handleControlsTransitionEnd=function(t){this.handleTransition(t)},s.prototype.handleContentTransitionEnd=function(t){this.handleTransition(t)},s.prototype.handleTransition=function(e){this.updateFocusState(t(e.target))},s.prototype.focusElement=function(t){t.length>0&&t.focus()},s.prototype.updateTabIndexes=function(t){var e=this.getSelector().find(this.shareButton);a.getGroup();this.canFloat()?!0===t?(e.add(this.$close).removeAttr("tabindex"),this.$toggle.attr("tabindex",-1)):(e.add(this.$close).attr("tabindex",-1),this.$toggle.removeAttr("tabindex")):this.canDock()&&e.add(this.$close).add(this.$toggle).removeAttr("tabindex")},s.prototype.canFloat=function(){return a.isCurrentGroupInPermittedGroupString(this.viewportModeGroups.floating.join("_"))},s.prototype.canDock=function(){return a.isCurrentGroupInPermittedGroupString(this.viewportModeGroups.docked.join("_"))},s.prototype.bindKeyboardEvents=function(){t(window).on("keyup",this.handleKeyup.bind(this))},s.prototype.bindElementTransitionEvents=function(){this.$controls.on(this.transitionEvent,this.handleControlsTransitionEnd.bind(this)),this.$content.on(this.transitionEvent,this.handleContentTransitionEnd.bind(this))},s}),define("module/share-tools/slideshow-gallery",["common/util/extends","jquery","lodash","lib/ecmaScript5","lib/domReady","module/share-tools/base","util/transition-event-prefixer","module/slideshow-gallery/layout","model/mediaQuery"],function(t,e,n,i,o,a,s,r,l){function c(t){return a.apply(this,arguments),this.defaults={slideshowMediator:null},this.settings=n.merge(this.settings,this.defaults,t),this.slideshowMediator=this.settings.slideshowMediator,this.layout=new r,this}return t(c,a,{init:function(){a.prototype.init.apply(this,arguments);var t=this.getSelector();this.setSelector(t)&&(this.setShouldBeShown(!1),this.toggleVisibility(),this.setupSpacer())},setupListeners:function(){a.prototype.setupListeners.apply(this,arguments);var t=this.getSlideshowMediator();t.subscribe&&(t.subscribe("gallery-started",this.handleGalleryStarted.bind(this)),t.subscribe("slide-change-transition-end",this.handleSlideChangeTransitionEnd.bind(this)))},getSlideshowMediator:function(){return this.slideshowMediator},setupSelectors:function(){a.prototype.setupSelectors.apply(this,arguments),this.spacerAttr="data-sg-spacer",this.spacer="["+this.spacerAttr+"]"},toggleVisibility:function(){a.prototype.toggleVisibility.apply(this,arguments),this.toggleSpacer()},handleGalleryStarted:function(t){this.setDisplayState(t),this.toggleVisibility()},handleSlideChangeTransitionEnd:function(t){this.setDisplayState(t),this.toggleVisibility()},setDisplayState:function(t){t&&n.has(t,"isContentSlide")&&t.isContentSlide?this.setShouldBeShown(!0):this.setShouldBeShown(!1)},setupSpacer:function(){if(e(this.spacer).length<1){var t=e("<div "+this.spacerAttr+"></div>").hide();e("body").append(t)}},toggleSpacer:function(){var t=e(this.spacer);if(this.layout.isVerticalScroll()){var n=this.getToggleHeight();t.css({height:n}),t.show()}else t.hide()},getToggleHeight:function(){return this.$toggle.height()}}),c}),define("waypoints",["jquery"],function(t){!function(){"use strict";function t(i){if(!i)throw new Error("No options passed to Waypoint constructor");if(!i.element)throw new Error("No element option passed to Waypoint constructor");if(!i.handler)throw new Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+e,this.options=t.Adapter.extend({},t.defaults,i),this.element=this.options.element,this.adapter=new t.Adapter(this.element),this.callback=i.handler,this.axis=this.options.horizontal?"horizontal":"vertical",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=t.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=t.Context.findOrCreateByElement(this.options.context),t.offsetAliases[this.options.offset]&&(this.options.offset=t.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),n[this.key]=this,e+=1}var e=0,n={};t.prototype.queueTrigger=function(t){this.group.queueTrigger(this,t)},t.prototype.trigger=function(t){this.enabled&&this.callback&&this.callback.apply(this,t)},t.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete n[this.key]},t.prototype.disable=function(){return this.enabled=!1,this},t.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},t.prototype.next=function(){return this.group.next(this)},t.prototype.previous=function(){return this.group.previous(this)},t.invokeAll=function(t){var e=[];for(var i in n)e.push(n[i]);for(var o=0,a=e.length;o<a;o++)e[o][t]()},t.destroyAll=function(){t.invokeAll("destroy")},t.disableAll=function(){t.invokeAll("disable")},t.enableAll=function(){t.invokeAll("enable")},t.refreshAll=function(){t.Context.refreshAll()},t.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},t.viewportWidth=function(){return document.documentElement.clientWidth},t.adapters=[],t.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0},t.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=t}(),function(){"use strict";function t(t){window.setTimeout(t,1e3/60)}function e(t){this.element=t,this.Adapter=o.Adapter,this.adapter=new this.Adapter(t),this.key="waypoint-context-"+n,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},t.waypointContextKey=this.key,i[t.waypointContextKey]=this,n+=1,this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}var n=0,i={},o=window.Waypoint,a=window.onload;e.prototype.add=function(t){var e=t.options.horizontal?"horizontal":"vertical";this.waypoints[e][t.key]=t,this.refresh()},e.prototype.checkEmpty=function(){var t=this.Adapter.isEmptyObject(this.waypoints.horizontal),e=this.Adapter.isEmptyObject(this.waypoints.vertical);t&&e&&(this.adapter.off(".waypoints"),delete i[this.key])},e.prototype.createThrottledResizeHandler=function(){function t(){e.handleResize(),e.didResize=!1}var e=this;this.adapter.on("resize.waypoints",function(){e.didResize||(e.didResize=!0,o.requestAnimationFrame(t))})},e.prototype.createThrottledScrollHandler=function(){function t(){e.handleScroll(),e.didScroll=!1}var e=this;this.adapter.on("scroll.waypoints",function(){e.didScroll&&!o.isTouch||(e.didScroll=!0,o.requestAnimationFrame(t))})},e.prototype.handleResize=function(){o.Context.refreshAll()},e.prototype.handleScroll=function(){var t={},e={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};for(var n in e){var i=e[n],o=i.newScroll>i.oldScroll,a=o?i.forward:i.backward;for(var s in this.waypoints[n]){var r=this.waypoints[n][s],l=i.oldScroll<r.triggerPoint,c=i.newScroll>=r.triggerPoint,d=l&&c,u=!l&&!c;(d||u)&&(r.queueTrigger(a),t[r.group.id]=r.group)}}for(var p in t)t[p].flushTriggers();this.oldScroll={x:e.horizontal.newScroll,y:e.vertical.newScroll}},e.prototype.innerHeight=function(){return this.element==this.element.window?o.viewportHeight():this.adapter.innerHeight()},e.prototype.remove=function(t){delete this.waypoints[t.axis][t.key],this.checkEmpty()},e.prototype.innerWidth=function(){return this.element==this.element.window?o.viewportWidth():this.adapter.innerWidth()},e.prototype.destroy=function(){var t=[];for(var e in this.waypoints)for(var n in this.waypoints[e])t.push(this.waypoints[e][n]);for(var i=0,o=t.length;i<o;i++)t[i].destroy()},e.prototype.refresh=function(){var t,e=this.element==this.element.window,n=e?void 0:this.adapter.offset(),i={};this.handleScroll(),t={horizontal:{contextOffset:e?0:n.left,contextScroll:e?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:e?0:n.top,contextScroll:e?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};for(var a in t){var s=t[a];for(var r in this.waypoints[a]){var l,c,d,u,p,h=this.waypoints[a][r],m=h.options.offset,f=h.triggerPoint,g=0,b=null==f;h.element!==h.element.window&&(g=h.adapter.offset()[s.offsetProp]),"function"==typeof m?m=m.apply(h):"string"==typeof m&&(m=parseFloat(m),h.options.offset.indexOf("%")>-1&&(m=Math.ceil(s.contextDimension*m/100))),l=s.contextScroll-s.contextOffset,h.triggerPoint=g+l-m,c=f<s.oldScroll,d=h.triggerPoint>=s.oldScroll,u=c&&d,p=!c&&!d,!b&&u?(h.queueTrigger(s.backward),i[h.group.id]=h.group):!b&&p?(h.queueTrigger(s.forward),i[h.group.id]=h.group):b&&s.oldScroll>=h.triggerPoint&&(h.queueTrigger(s.forward),i[h.group.id]=h.group)}}return o.requestAnimationFrame(function(){for(var t in i)i[t].flushTriggers()}),this},e.findOrCreateByElement=function(t){return e.findByElement(t)||new e(t)},e.refreshAll=function(){for(var t in i)i[t].refresh()},e.findByElement=function(t){return i[t.waypointContextKey]},window.onload=function(){a&&a(),e.refreshAll()},o.requestAnimationFrame=function(e){(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||t).call(window,e)},o.Context=e}(),function(){"use strict";function t(t,e){return t.triggerPoint-e.triggerPoint}function e(t,e){return e.triggerPoint-t.triggerPoint}function n(t){this.name=t.name,this.axis=t.axis,this.id=this.name+"-"+this.axis,this.waypoints=[],this.clearTriggerQueues(),i[this.axis][this.name]=this}var i={vertical:{},horizontal:{}},o=window.Waypoint;n.prototype.add=function(t){this.waypoints.push(t)},n.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},n.prototype.flushTriggers=function(){for(var n in this.triggerQueues){var i=this.triggerQueues[n],o="up"===n||"left"===n;i.sort(o?e:t);for(var a=0,s=i.length;a<s;a+=1){var r=i[a];(r.options.continuous||a===i.length-1)&&r.trigger([n])}}this.clearTriggerQueues()},n.prototype.next=function(e){this.waypoints.sort(t);var n=o.Adapter.inArray(e,this.waypoints);return n===this.waypoints.length-1?null:this.waypoints[n+1]},n.prototype.previous=function(e){this.waypoints.sort(t);var n=o.Adapter.inArray(e,this.waypoints);return n?this.waypoints[n-1]:null},n.prototype.queueTrigger=function(t,e){this.triggerQueues[e].push(t)},n.prototype.remove=function(t){var e=o.Adapter.inArray(t,this.waypoints);e>-1&&this.waypoints.splice(e,1)},n.prototype.first=function(){return this.waypoints[0]},n.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},n.findOrCreate=function(t){return i[t.axis][t.name]||new n(t)},o.Group=n}(),function(){"use strict";function t(t){this.$element=e(t)}var e=window.jQuery,n=window.Waypoint;e.each(["innerHeight","innerWidth","off","offset","on","outerHeight","outerWidth","scrollLeft","scrollTop"],function(e,n){t.prototype[n]=function(){var t=Array.prototype.slice.call(arguments);return this.$element[n].apply(this.$element,t)}}),e.each(["extend","inArray","isEmptyObject"],function(n,i){t[i]=e[i]}),n.adapters.push({name:"jquery",Adapter:t}),n.Adapter=t}(),function(){"use strict";function t(t){return function(){var n=[],i=arguments[0];return t.isFunction(arguments[0])&&(i=t.extend({},arguments[1]),i.handler=arguments[0]),this.each(function(){var o=t.extend({},i,{element:this});"string"==typeof o.context&&(o.context=t(this).closest(o.context)[0]),n.push(new e(o))}),n}}var e=window.Waypoint;window.jQuery&&(window.jQuery.fn.waypoint=t(window.jQuery)),window.Zepto&&(window.Zepto.fn.waypoint=t(window.Zepto))}()}),define("module/slideshow-gallery/inline-image-manager",["lodash","jquery","module/slideshow-gallery/layout","module/responsiveImages/main","module/responsiveImages/formats/wwfeatures16x9","module/responsiveImages/formats/wwfeatures4x5","waypoints"],function(t,e,n,i,o,a,s){function r(t,e){this.selector=t,this.slideshowMediator=e,this.layout=new n,this.responsiveImages=new i,this.initialised=!1}return r.prototype.init=function(){var t=this.getSelector();this.setSelector(t)&&(this.setupSelectors(),this.setupSettings(),this.setupListeners(),this.setupResponsiveImages(),this.bindWindowEvents())},r.prototype.setupSelectors=function(){this.lazyLoadSelector="img[data-lazy-load=true]",this.$lazyLoadSelector=this.getSelector().find(this.lazyLoadSelector),this.landscapeSelector="[data-landscape]"+this.lazyLoadSelector,this.portraitSelector="[data-portrait]"+this.lazyLoadSelector},r.prototype.setupSettings=function(){this.lazyLoadOffset="100%",this.lazyLoadedClass="is-lazy-loaded",this.enableDelay=200,this.lazyLoadAddClassDelay=200},r.prototype.setupListeners=function(){var t=this.getSlideshowMediator();t.subscribe&&(t.subscribe("gallery-start-overlay-hidden",this.handleGalleryStartOverlayHidden.bind(this)),t.subscribe("slide-change-transition-end",this.handleSlideChangeTransitionEnd.bind(this)))},r.prototype.getSlideshowMediator=function(){return this.slideshowMediator},r.prototype.setupResponsiveImages=function(){this.responsiveImages.add(this.getSelector().find(this.portraitSelector),a),this.responsiveImages.add(this.getSelector().find(this.landscapeSelector),o)},r.prototype.initWaypoints=function(){var t=this,e={handler:function(e){t.lazyLoad(this.element)},offset:t.lazyLoadOffset};this.setInitialised(!0),this.$lazyLoadSelector.waypoint(e)},r.prototype.lazyLoad=function(n){var i=this.responsiveImages.getImages(),o=this,a=e(n);t.each(i,function(t){e(t.el).is(a)&&(t.respond(),t.loadLazyImage(function(){setTimeout(function(){a.addClass(o.lazyLoadedClass)},this.lazyLoadAddClassDelay)}))})},r.prototype.disableWaypoints=function(){Waypoint.disableAll()},r.prototype.enableWaypoints=function(){Waypoint.enableAll()},r.prototype.handleGalleryStartOverlayHidden=function(t){this.layout.isVerticalScroll()&&this.initWaypoints()},r.prototype.handleSlideChangeTransitionEnd=function(n){t.each(this.$lazyLoadSelector,function(t){e(t).is(":visible")&&this.lazyLoad(t)},this)},r.prototype.isInitialised=function(){return this.initialised},r.prototype.setInitialised=function(e){t.isBoolean(e)&&(this.initialised=e)},r.prototype.handleChangeToVerticalScroll=function(){var t=this;this.isInitialised()?setTimeout(function(){t.enableWaypoints()},this.enableDelay):setTimeout(function(){t.initWaypoints()},this.enableDelay)},r.prototype.handleWindowResize=function(){this.layout.isSlideshow()?this.disableWaypoints():this.layout.hasChangedToVerticalScroll()&&this.handleChangeToVerticalScroll()},r.prototype.bindWindowEvents=function(){e(window).on("resize",this.handleWindowResize.bind(this))},r.prototype.getSelector=function(){return this.selector},r.prototype.setSelector=function(t){return this.selector=e(t),this.selector.length>0},r}),define("lib/jquery-cookie",["jquery"],function(t){return t.cookie=function(e,n,i){if(arguments.length>1&&"[object Object]"!==String(n)){if(i=t.extend({},i),null!==n&&void 0!==n||(i.expires=-1),"number"==typeof i.expires){var o=i.expires,a=i.expires=new Date;a.setDate(a.getDate()+o)}return n=String(n),
document.cookie=[encodeURIComponent(e),"=",i.raw?n:encodeURIComponent(n),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}i=n||{};var s,r=i.raw?function(t){return t}:decodeURIComponent;return(s=new RegExp("(?:^|; )"+encodeURIComponent(e)+"=([^;]*)").exec(document.cookie))?r(s[1]):null},t}),define("model/geolocation",[],function(){var t=!1;return"undefined"!=typeof orb&&void 0!==orb.fig&&1==orb.fig("uk")&&(t=!0),{isUK:function(){return t}}}),define("module/video/adPolicyMonitor",["lodash","lib/jquery-cookie","util/logger","common/config","model/geolocation"],function(t,e,n,i,o){function a(){if(null!==s)throw new Error("Cannot instantiate more than one AdPolicyMonitor, use AdPolicyMonitor.getInstance()");this.initialize()}var s=null;return a.prototype={initialize:function(){this.isAdpolicyFrequencySet()||this.setupAdPolicyDisplayFrequency()},shouldShowAds:function(){return!this.isAdvertisingDisabled()&&!o.isUK()},isAdvertisingDisabled:function(){return void 0!==window.advertising&&void 0!==window.advertising.adsDisabled&&!0===window.advertising.adsDisabled},isAdpolicyFrequencySet:function(){return null!==e.cookie("adpolicyAdDisplayFrequency")},setupAdPolicyDisplayFrequency:function(){t.has(i.get(),"adpolicy")&&t.has(i.get().adpolicy,"ad-display-frequency")&&self.setAdDisplayFrequency(i.get().adpolicy["ad-display-frequency"])},setAdDisplayFrequency:function(t){var n=new Date;n.setSeconds(n.getSeconds()+t),e.cookie("adpolicyAdDisplayFrequency",t,{expires:n,path:i.get().domain})}},a.getInstance=function(){return null===s&&(s=new a),s},a.getInstance()}),define("module/bbcdotcomMediator",["bbcdotcom/av/emp/adverts","util/logger","config"],function(t,e,n){return new function(){this.init=function(){this.enableCompanions()},this.addVideo=function(n,i){try{t.addSmpPlugin(n,i)}catch(t){e.warn(t)}},this.layoutAds=function(){try{bbcdotcom.adverts.layout.reset()}catch(t){e.warn(t)}},this.enableCompanions=function(){try{t.enableCompanions()}catch(t){e.warn(t)}}}}),define("module/analytics/HTML5VideoMediator",["lodash"],function(t){"use strict";function e(t,e){n=t,o=e,i=null,a=[],s={player:{},data:{videoPlaysAutomatically:!0,mediaId:"",mediaPlayerAdsEnabled:""},flags:{playlistStarted:!1,programStarted:!1,isPaused:!1,isSeeking:!1,adRequestOrPlaybackInProgress:!1,ended:!1,playlistEnded:!1,trackProgramStartOnNextTimeupdate:!1}}}var n={},i=null,o={},a=[],s={};return t.extend(e.prototype,{reset:function(t){t.flags.playlistStarted=!1,t.flags.programStarted=!1,t.flags.metadataLoaded=!1,t.flags.isPaused=!1,t.flags.isSeeking=!1,t.flags.adRequestOrPlaybackInProgress=!1,t.flags.ended=!1,t.flags.playlistEnded=!1,t.flags.trackProgramStartOnNextTimeupdate=!1},updateMetadata:function(e){e.data.mediaType=e.player.kind(),e.data.mediaPlayerName=e.player.name(),e.data.mediaPlayerVolume=(100*e.player.volume()).toString(),e.data.adId=null,t.has(e.player,"bumpVersion")&&(e.data.mediaPlayerVersion=e.player.bumpVersion);var n=e.player.width(),i=e.player.height();t.isString(n)&&t.isString(i)?e.data.mediaPlayerSize=n+"x"+i:e.data.mediaPlayerSize=null},track:function(t,i,a){if(void 0===n)return!1;e.prototype.updateMetadata(i),!0===a&&(i.data.mediaOffset=0),o.debug("HTML5VideoMediator:track: "+t,i.data),n.trackAVEvent(t,i.data)},checkIfPlaylistHasStarted:function(t){t.flags.playlistStarted||(t.flags.playlistStarted=!0,e.prototype.track("startPlaylist",t))},addEventListeners:function(n,i){s.player=n,t.isObject(i)&&(t.has(i,"mediaId")&&(s.data.mediaId=i.mediaId),t.has(i,"isAutoplay")&&(s.data.videoPlaysAutomatically=i.isAutoplay),t.has(i,"hasAdverts")&&(s.data.mediaPlayerAdsEnabled=i.hasAdverts)),a.push(s),s.player.bind("playlistLoading",e.prototype.handlePlaylistLoading),s.player.bind("playlistLoaded",e.prototype.handlePlaylistLoaded),s.player.bind("loadedmetadata",e.prototype.handleMetaDataLoaded),s.player.bind("userPlay",e.prototype.handleUserPlay),s.player.bind("playing",e.prototype.handlePlaying),s.player.bind("pause",e.prototype.handlePause),s.player.bind("timeupdate",e.prototype.handleTimeUpdate),s.player.bind("seeking",e.prototype.handleSeeking),s.player.bind("ended",e.prototype.handleEnded),s.player.bind("playlistEnded",e.prototype.handlePlaylistEnded),s.player.bind("adsPlugin",e.prototype.handleAdsPlugin)},handlePlaylistLoading:function(t){o.debug("HTML5VideoMediator:playlistLoading:event",t)},handlePlaylistLoaded:function(t){o.debug("HTML5VideoMediator:playlistLoaded:event",t),e.prototype.reset(s),s.data.mediaName=t.playlist.title;var n=t.playlist.items;s.data.isLive=n[n.length-1].live},setMetadataLoaded:function(t){s.flags.metadataLoaded||(s.flags.metadataLoaded=!0)},handleMetaDataLoaded:function(t){o.debug("HTML5VideoMediator:loaded metadata:event",t),e.prototype.setMetadataLoaded(t)},handleUserPlay:function(t){o.debug("HTML5VideoMediator:userPlay:event",t),s.data.videoPlaysAutomatically=!1},trackPlaying:function(n){e.prototype.checkIfPlaylistHasStarted(s),o.debug("HTML5VideoMediator:TrackPlaying statuses",{"playerAndData.flags.programStarted":s.flags.programStarted,"playerAndData.flags.adRequestOrPlaybackInProgress":s.flags.adRequestOrPlaybackInProgress,"playerAndData.flags.metadataLoaded":s.flags.metadataLoaded,"playerAndData.flags.isPaused":s.flags.isPaused}),o.debug("HTML5VideoMediator:TrackPlaying event",n),t.has(n,"type")&&"playing"==t.trim(n.type).toLowerCase()&&t.has(n,"identifier")&&t.has(n,"kind")&&"programme"==t.trim(n.kind).toLowerCase()&&(o.debug("HTML5VideoMediator:TrackPlaying START CLIP"),s.data.mediaId=t.trim(n.identifier).toLowerCase(),s.flags.isSeeking?(s.flags.isSeeking=!1,e.prototype.track("endSeek",s,!1)):s.flags.isPaused?(s.flags.isPaused=!1,e.prototype.track("endPause",s,!1)):s.flags.programStarted||(s.flags.programStarted=!0,e.prototype.track("startClip",s,!0)))},handlePlaying:function(t){o.debug("HTML5VideoMediator:playing:event",t),i=t},handlePause:function(t){o.debug("HTML5VideoMediator:pause:event",t),e.prototype.updateMetadata(s),(0===s.data.mediaLength||s.data.mediaOffset+1<s.data.mediaLength)&&(s.flags.isPaused=!0,e.prototype.track("startPause",s))},handleTimeUpdate:function(t){o.debug("HTML5VideoMediator:timeupdate:event",t),s.data.mediaLength=t.duration,s.data.mediaOffset=t.currentTime,null!==i&&(i.duration=s.data.mediaLength,i.currentTime=s.data.mediaOffset,e.prototype.trackPlaying(i),i=null),s.flags.isSeeking&&(s.flags.isSeeking=!1,e.prototype.track("endSeek",s))},handleSeeking:function(t){o.debug("HTML5VideoMediator:seeking:event",t),s.flags.isSeeking=!0,e.prototype.track("startSeek",s)},handleEnded:function(t){o.debug("HTML5VideoMediator:ended:event",t),s.flags.ended=!0,e.prototype.track("endClip",s),s.flags.playlistEnded&&e.prototype.track("endPlaylist",s)},handlePlaylistEnded:function(t){o.debug("HTML5VideoMediator:playlistEnded:event",t),s.flags.playlistEnded=!0,s.flags.ended&&e.prototype.track("endPlaylist",s)},handleAdsPlugin:function(t){switch(o.debug("HTML5VideoMediator:adsPlugin:event",t),!0===s.flags.playlistEnded&&(delete s.data.mediaLength,delete s.data.mediaOffset),t.id){case"adRequest":s.flags.adRequestOrPlaybackInProgress=!0,e.prototype.checkIfPlaylistHasStarted(s);break;case"adEnded":s.flags.adRequestOrPlaybackInProgress=!1,e.prototype.setMetadataLoaded(t),e.prototype.track("endAdvert",s);break;case"adStarted":e.prototype.checkIfPlaylistHasStarted(s),e.prototype.track("startAdvert",s);break;case"adError":s.flags.adRequestOrPlaybackInProgress=!1}}}),e}),define("model/isBBCVerticalURL",[],function(){var t=["autos","capital","culture","future","travel","earth","earth"];return function(e){var n=/\.rss|\.atom/,i=!1,o=e||"";for(var a in t)if(verticaPattern="/"+t[a],-1!=window.document.referrer.indexOf(verticaPattern)){i=!0;break}return i&&!n.test(o)}});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};define("module/video/SMPPlayer",["util/logger","lib/ecmaScript5","lib/domReady","orb/api","bump-3","module/video/adPolicyMonitor","module/bbcdotcomMediator","module/analytics/main","module/analytics/HTML5VideoMediator","model/isBBCVerticalURL","model/geolocation","module/responsiveImages/responsiveImage","module/responsiveImages/formats/wwfeatures16x9","signals"],function(t,e,n,i,o,a,s,r,l,c,d,u,p,h){var m=function(t,e){return this.mp={},this.strSelector=t,this.config=e,this.playlistLoadedSignal=new h.Signal,this.playlistEndedSignal=new h.Signal,this.videoPlayingSignal=new h.Signal,this.errorSignal=new h.Signal,this};return m.prototype.init=function(){this.setConfig(this.config),this.setSelector(this.strSelector)&&this.setupPlayer()},m.prototype.setConfig=function(t){var e=["canAutoplay","canAutoplayInUK","defaultMediaProfile"];void 0===t&&(t={});for(var n in e)void 0===t[e[n]]&&(t[e[n]]=!1);!1===t.defaultMediaProfile&&(t.defaultMediaProfile="mc"),this.config=t},m.prototype.getConfig=function(){return this.config},m.prototype.subscribe=function(t,e){switch(t){case"playlistLoaded":this.playlistLoadedSignal.add(e);break;case"playlistEnded":this.playlistEndedSignal.add(e);break;case"videoPlaying":this.videoPlayingSignal.add(e);break;case"error":this.errorSignal.add(e)}},m.prototype.playlistLoaded=function(){this.playlistLoadedSignal.dispatch(this.getPlayer())},m.prototype.playlistEnded=function(){this.playlistEndedSignal.dispatch(this.getPlayer())},m.prototype.videoPlaying=function(){this.videoPlayingSignal.dispatch(this.getPlayer())},m.prototype.error=function(e){t.error(e),this.errorSignal.dispatch(this.getPlayer(),e)},m.prototype.setupPlayer=function(){var e,n={product:"news",ui:{colour:this.getSelector().data("brandColor")},autoplay:this.isAutoplay(),playerProfile:"smp",mediaProfile:this.getConfig().defaultMediaProfile,mediator:{host:"open.live.bbc.co.uk"},responsive:!0};e=this.getSelector().player(n),this.setPlayer(e),this.resize(),s.addVideo(this.getSelector().attr("id"),e),this.addEventListeners(),e.load(),new l(r,t).addEventListeners(this.getPlayer(),{isAutoplay:this.isAutoplay(),hasAdverts:this.showAdverts()})},m.prototype.showAdverts=function(){return a.shouldShowAds()},m.prototype.addEventListeners=function(){this.getPlayer().bind("playlistLoaded",this.playlistLoaded.bind(this)),this.getPlayer().bind("playlistEnded",this.playlistEnded.bind(this)),this.getPlayer().bind("playing",this.videoPlaying.bind(this)),this.getPlayer().bind("error",this.error.bind(this)),i.layout(this.resize.bind(this))},m.prototype.isAutoplay=function(){return!!(this.getConfig().canAutoplayInUK||this.getConfig().canAutoplay&&!d.isUK())},m.prototype.getHoldingImage=function(t){if(void 0!==t){var e,n,i=new Image,o=this.getVideoPlayerDimensions(),a=new p(i);if(i.src=t,e=new u(i,a.getFormatsForImage()),void 0!==(n=e.getFormatForWidth(o.width)))return n.src}return t},m.prototype.loadVideo=function(t){try{if("object"!==(void 0===t?"undefined":_typeof(t))||"string"!=typeof t.title||"string"!=typeof t.vpid)throw new Error("Invalid parameters provided for loading video",t);var e={title:t.title,holdingImageURL:this.getHoldingImage(t.imageURL),items:[{vpid:t.vpid}]};this.showAdverts()&&!0===t.showAds&&e.items.unshift({kind:"advert"}),"string"==typeof t.mediaProfile&&t.mediaProfile!==this.getCurrentMediaProfile()&&this.updateSettings({mediaProfile:t.mediaProfile}),this.loadPlaylist(e)}catch(t){this.error(t)}},m.prototype.updateSettings=function(t){this.getPlayer().settings(t)},m.prototype.getCurrentMediaProfile=function(){return this.getPlayer().settings().mediaProfile},m.prototype.loadPlaylist=function(t){this.getPlayer().loadPlaylist(t,{autoplay:this.isAutoplay()})},m.prototype.setPlayer=function(t){this.mp=t},m.prototype.getPlayer=function(){return this.mp},m.prototype.play=function(){this.getPlayer().play()},m.prototype.pause=function(){this.getPlayer().pause()},m.prototype.next=function(){this.getPlayer().next()},m.prototype.resize=function(){var t=this.getVideoPlayerDimensions();this.getSelector().width(t.width),this.getSelector().height(t.height)},m.prototype.getVideoPlayerDimensions=function(){var t=o(this.strSelector).parent(),e=Math.round(t.width()),n=Math.round(e/16*9);return{width:e.toString(),height:n.toString()}},m.prototype.setSelector=function(t){return this.selector=o(t),this.selector.length>0},m.prototype.getSelector=function(){return this.selector},m}),define("module/video/StandAloneVideoPlayer",["lib/ecmaScript5","lib/domReady","jquery","module/video/SMPPlayer"],function(t,e,n,i){var o=function(t,e){return this.selector=t,this.config=void 0!==e?e:{},this.initialised=!1,this};return o.prototype.init=function(){if(!this.isInitialised()&&this.setSelector(this.selector)){var t=new i(this.getSelector(),this.config);t.init(),this.setPlayer(t),this.loadVideo(),this.setInitialised(!0)}},o.prototype.setSelector=function(t){return this.selector=n(t),this.selector.length>0},o.prototype.getSelector=function(){return this.selector},o.prototype.subscribe=function(t,e){this.getPlayer().subscribe(t,e)},o.prototype.setPlayer=function(t){this.mp=t},o.prototype.getPlayer=function(){return this.mp},o.prototype.play=function(){this.getPlayer().play()},o.prototype.pause=function(){this.getPlayer().pause()},o.prototype.loadVideo=function(){var t=this.getVideoMetadata();this.getPlayer().loadVideo(t)},o.prototype.loadPlaylist=function(t){this.getPlayer().loadPlaylist(t)},o.prototype.getVideoMetadata=function(){var t=this.getSelector();return{vpid:t.data("videoPlayerVpid"),title:t.data("videoTitle"),imageURL:t.data("videoPlayerImageUrl"),mediaProfile:t.data("videoPlayerMediator"),showAds:t.data("showAds")}},o.prototype.next=function(){this.getPlayer().next()},o.prototype.resize=function(){this.getPlayer().resize()},o.prototype.isAutoplay=function(){return this.getPlayer().isAutoplay()},o.prototype.isInitialised=function(){return this.initialised},o.prototype.setInitialised=function(t){"boolean"==typeof t&&(this.initialised=t)},o}),define("module/slideshow-gallery/stand-alone-video-player-manager",["lodash","jquery","module/slideshow-gallery/layout","module/video/StandAloneVideoPlayer","waypoints"],function(t,e,n,i,o){function a(t,e){this.selector=t,this.layout=new n,this.slideshowMediator=e,this.videoPlayers=[],this.initialised=!1}return a.prototype.init=function(){var t=this.getSelector();this.setSelector(t)&&(this.setupSelectors(),this.setupVideoPlayerList(),this.setupSettings(),this.setupListeners(),this.bindWindowEvents())},a.prototype.setupSelectors=function(){this.videoPlayerSelector="[data-video-player]",this.sgVideoSelector="[data-sg-video] "+this.videoPlayerSelector,this.$inlineVideoSelector=this.getSelector().find(this.sgVideoSelector)},a.prototype.setupVideoPlayerList=function(){t.each(this.$inlineVideoSelector,function(t){this.videoPlayers.push(new i(t,{}))},this)},a.prototype.setupSettings=function(){this.lazyLoadOffset="100%",this.enableDelay=200},a.prototype.initWaypoints=function(){var t=this,e={handler:function(e){t.lazyLoad(this.element)},offset:t.lazyLoadOffset};this.setInitialised(!0),this.$inlineVideoSelector.waypoint(e)},a.prototype.lazyLoad=function(n){t.each(this.videoPlayers,function(t){e(t.getSelector()).is(n)&&this.initialiseVideoPlayer(t)},this)},a.prototype.disableWaypoints=function(){Waypoint.disableAll()},a.prototype.enableWaypoints=function(){Waypoint.enableAll()},a.prototype.isInitialised=function(){return this.initialised},a.prototype.setInitialised=function(e){t.isBoolean(e)&&(this.initialised=e)},a.prototype.setupListeners=function(){var t=this.getSlideshowMediator();t.subscribe&&(t.subscribe("gallery-start-overlay-hidden",this.handleGalleryStartOverlayHidden.bind(this)),t.subscribe("slide-change-transition-end",this.handleSlideChangeTransitionEnd.bind(this)))},a.prototype.getSlideshowMediator=function(){return this.slideshowMediator},a.prototype.handleGalleryStartOverlayHidden=function(t){this.layout.isVerticalScroll()&&this.initWaypoints()},a.prototype.handleSlideChangeTransitionEnd=function(n){n&&t.has(n,"isVideoOnlySlide")&&n.isVideoOnlySlide&&t.each(this.videoPlayers,function(t){e(t.getSelector()).is(":visible")&&this.initialiseVideoPlayer(t)},this)},a.prototype.initialiseVideoPlayer=function(t){t.isInitialised()?t.resize():t.init()},a.prototype.handleChangeToVerticalScroll=function(){var t=this;this.isInitialised()?setTimeout(function(){t.enableWaypoints()},this.enableDelay):setTimeout(function(){t.initWaypoints()},this.enableDelay)},a.prototype.handleWindowResize=function(){this.layout.isSlideshow()?this.disableWaypoints():this.layout.hasChangedToVerticalScroll()&&this.handleChangeToVerticalScroll()},a.prototype.bindWindowEvents=function(){e(window).on("resize",this.handleWindowResize.bind(this))},a.prototype.setSelector=function(t){return this.selector=e(t),this.selector.length>0},a.prototype.getSelector=function(){return this.selector},a}),define("module/slideshow-gallery/ambient-video-manager",["lodash","jquery","module/slideshow-gallery/layout","model/mediaQuery"],function(t,e,n,i){function o(t,e){this.selector=t,this.layout=new n,this.slideshowMediator=e}return o.prototype.init=function(){var t=this.getSelector();this.setSelector(t)&&this.shouldDisplayAmbientVideo()&&(this.setupSelectors(),this.showAmbientVideos(),this.setupListeners(),this.bindWindowEvents())},o.prototype.shouldDisplayAmbientVideo=function(){return hasTheMustard()&&!i.isFixedWidthLayout()&&!i.isMobileDevice()},o.prototype.showAmbientVideos=function(){t.each(this.$ambientVideosSelector,function(t){e(t).toggleClass("hidden")},this)},o.prototype.setupSelectors=function(){this.ambientVideosSelector="[data-ambient-video]",this.$ambientVideosSelector=this.getSelector().find(this.ambientVideosSelector)},o.prototype.setupSettings=function(){},o.prototype.isInitialised=function(){return this.initialised},o.prototype.setInitialised=function(e){t.isBoolean(e)&&(this.initialised=e)},o.prototype.setupListeners=function(){var t=this.getSlideshowMediator();t.subscribe&&(t.subscribe("slide-change-transition-end",this.handleSlideChangeTransitionEnd.bind(this)),t.subscribe("slide-change-initialised",this.handleSlideChangeInitialised.bind(this)))},o.prototype.getSlideshowMediator=function(){return this.slideshowMediator},o.prototype.playVisiblePlayer=function(){t.each(this.$ambientVideosSelector,function(t){e(t).is(":visible")&&t.play()},this)},o.prototype.pauseVisiblePlayer=function(){t.each(this.$ambientVideosSelector,function(t){e(t).is(":visible")&&t.pause()},this)},o.prototype.pauseAllPlayers=function(){t.each(this.$ambientVideosSelector,function(t){t.pause()},this)},o.prototype.handleSlideChangeInitialised=function(e){e&&t.has(e,"hasAmbientVideo")&&e.hasAmbientVideo&&this.pauseVisiblePlayer()},o.prototype.handleSlideChangeTransitionEnd=function(e){e&&t.has(e,"hasAmbientVideo")&&e.hasAmbientVideo&&this.playVisiblePlayer()},o.prototype.handleChangeToSlideshow=function(){this.playVisiblePlayer()},o.prototype.handleChangeToVerticalScroll=function(){this.pauseAllPlayers()},o.prototype.handleWindowResize=function(){this.layout.isSlideshow()?this.handleChangeToSlideshow():this.layout.hasChangedToVerticalScroll()&&this.handleChangeToVerticalScroll()},o.prototype.bindWindowEvents=function(){e(window).on("resize",this.handleWindowResize.bind(this))},o.prototype.setSelector=function(t){return this.selector=e(t),this.selector.length>0},o.prototype.getSelector=function(){return this.selector},o}),define("module/slideshow-gallery/progress",["jquery","lib/domReady","lib/ecmaScript5"],function(t,e,n){function i(t,e){return this.selector=t,this.slideshowMediator=e,this.min=1,this}return i.prototype.init=function(){var t=this.getSelector();this.setSelector(t),this.getSelector().length&&(this.setupListeners(),this.setupSelectors(),this.toggleVisibility())},i.prototype.setupSelectors=function(){this.indexSelector="[data-sg-progress-index]",this.totalSelector="[data-sg-progress-total]",this.$indexSelector=this.getSelector().find(this.indexSelector),this.$totalSelector=this.getSelector().find(this.totalSelector),this.visibleClass="is-active"},i.prototype.setupListeners=function(){var t=this.getSlideshowMediator();t.subscribe&&(t.subscribe("gallery-started",this.handleGalleryStarted.bind(this)),t.subscribe("slide-change-transition-end",this.handleSlideChangeTransitionEnd.bind(this)))},i.prototype.getSlideshowMediator=function(){return this.slideshowMediator},i.prototype.toggleVisibility=function(t){t&&_.has(t,"isContentSlide")&&t.isContentSlide?this.setVisible():this.setInvisible()},i.prototype.setVisible=function(){this.getSelector().addClass(this.visibleClass)},i.prototype.setInvisible=function(){this.getSelector().removeClass(this.visibleClass)},i.prototype.renderProgress=function(){this.renderIndex(this.currentIndex),this.renderTotal(this.total)},i.prototype.renderIndex=function(t){this.$indexSelector.html(t)},i.prototype.renderTotal=function(t){this.$totalSelector.html(t)},i.prototype.handleGalleryStarted=function(t){this.setProgressData(t),this.setInvisible(),this.renderProgress(),this.toggleVisibility(t),this.setDefaultARIAAttributes(this.currentIndex,this.min,this.total)},i.prototype.setProgressData=function(t){t&&_.has(t,"progress")&&!1!==t.progress&&(this.min=1,this.total=t.progress.total,this.currentIndex=t.progress.index)},i.prototype.handleSlideChangeTransitionEnd=function(t){this.setProgressData(t),this.setInvisible(),this.renderProgress(),this.toggleVisibility(t),this.updateARIAAttributes(this.currentIndex,this.total)},i.prototype.setSelector=function(e){this.selector=t(e)},i.prototype.getSelector=function(){return this.selector},i.prototype.updateARIAAttributes=function(t,e){this.getSelector().attr("aria-valuenow",t).attr("aria-valuemax",e)},i.prototype.setDefaultARIAAttributes=function(t,e,n){this.getSelector().attr("aria-valuenow",t).attr("aria-valuemin",e).attr("aria-valuemax",n)},i}),define("module/slideshow-gallery/sg-mediator",["lodash","lib/ecmaScript5","signals"],function(t,e,n){function i(){this.libs=[],this.slideChangeInitialisedSignal=new n.Signal,this.slideChangeBackgroundLoadedSignal=new n.Signal,this.slideChangeTransitionEndSignal=new n.Signal,this.galleryStartedSignal=new n.Signal,this.galleryInitialisedSignal=new n.Signal,this.galleryStartOverlayHiddenSignal=new n.Signal}return i.prototype.addEventListeners=function(t){this.libs.push(t),t.subscribe("gallery-started",this.handleGalleryStarted.bind(this)),t.subscribe("gallery-start-overlay-hidden",this.handleGalleryStartOverlayHidden.bind(this)),t.subscribe("gallery-initialised",this.handleGalleryInitialised.bind(this)),t.subscribe("slide-change-initialised",this.handleSlideChangeInitialised.bind(this)),t.subscribe("slide-change-background-loaded",this.handleSlideChangeBackgroundLoaded.bind(this)),t.subscribe("slide-change-transition-end",this.handleSlideChangeTransitionEnd.bind(this))},i.prototype.handleSlideChangeInitialised=function(t){this.slideChangeInitialisedSignal.dispatch(t)},i.prototype.handleSlideChangeBackgroundLoaded=function(t){this.slideChangeBackgroundLoadedSignal.dispatch(t)},i.prototype.handleSlideChangeTransitionEnd=function(t){this.slideChangeTransitionEndSignal.dispatch(t)},i.prototype.handleGalleryStarted=function(t){this.galleryStartedSignal.dispatch(t)},i.prototype.handleGalleryInitialised=function(t){this.galleryInitialisedSignal.dispatch(t)},i.prototype.handleGalleryStartOverlayHidden=function(t){this.galleryStartOverlayHiddenSignal.dispatch(t)},i.prototype.subscribe=function(t,e){switch(t){case"slide-change-initialised":this.slideChangeInitialisedSignal.add(e);break;case"slide-change-background-loaded":this.slideChangeBackgroundLoadedSignal.add(e);break;case"slide-change-transition-end":this.slideChangeTransitionEndSignal.add(e);break;case"gallery-started":this.galleryStartedSignal.add(e);break;case"gallery-initialised":this.galleryInitialisedSignal.add(e);break;case"gallery-start-overlay-hidden":this.galleryStartOverlayHiddenSignal.add(e)}},new i}),define("module/slideshow-gallery/style-manager",["lodash","lib/ecmaScript5","signals"],function(t,e,n){function i(t,e){this.slideshowMediator=e,this.setSelector(t),this.themeDarkClass="sg-theme--dark",this.themeLightClass="sg-theme--light",this.themeClasses=[this.themeDarkClass,this.themeLightClass],this.sidebarLeftClass="sg-slide-layout--sidebar-left",this.sidebarRightClass="sg-slide-layout--sidebar-right",this.sidebarClasses=[this.sidebarLeftClass,this.sidebarRightClass],this.setupListeners()}return i.prototype.setSelector=function(t){return t=$(t),t.length>0&&(this.selector=t,!0)},i.prototype.getSelector=function(){return this.selector},i.prototype.getSlideshowMediator=function(){return this.slideshowMediator},i.prototype.setupListeners=function(){var t=this.getSlideshowMediator();t.subscribe&&(t.subscribe("gallery-initialised",this.handleGalleryInitialised.bind(this)),t.subscribe("slide-change-transition-end",this.handleSlideChangeTransitionEnd.bind(this)))},i.prototype.handleGalleryInitialised=function(t){this.initialUIState(t)},i.prototype.handleSlideChangeTransitionEnd=function(t){this.updateUIState(t)},i.prototype.setTheme=function(t){var e;switch(t){case"white":e=this.themeLightClass;break;case"black":e=this.themeDarkClass;break;default:e=this.themeLightClass}e&&this.getSelector().removeClass(this.themeClasses.join(" ")).addClass(e)},i.prototype.setContentSlideType=function(t){var e;switch(this.getSelector().removeClass(this.sidebarClasses.join(" ")),t){case"text-left":e=this.sidebarLeftClass;break;case"text-right":e=this.sidebarRightClass}e&&this.getSelector().addClass(e)},i.prototype.initialUIState=function(e){t.has(e,"textColor")&&this.setTheme(e.firstContentSlideTextColor)},i.prototype.updateUIState=function(e){t.has(e,"textColor")&&(t.has(e,"isSplash")&&e.isSplash?this.setTheme(e.firstContentSlideTextColor):this.setTheme(e.textColor)),t.has(e,"contentSlideType")&&this.setContentSlideType(e.contentSlideType)},i}),define("module/slideshow-gallery/info-manager",["jquery","lib/domReady","lib/ecmaScript5"],function(t,e,n){function i(t,e){return this.selector=t,this.slideshowMediator=e,this}return i.prototype.init=function(){var t=this.getSelector();this.setSelector(t),this.getSelector().length&&(this.setupListeners(),this.setupSelectors(),this.setupEvents(),this.setControlShouldBeVisible(!1),this.open(),this.toggleControlVisibility())},i.prototype.setupSelectors=function(){this.controlVisibleClass="is-visible",this.isAnimationAllowedClass="is-sg-info-animation-allowed",this.closedClass="is-sg-info-closed",this.controlSelector="[data-sg-info-button]",this.$controlSelector=this.getSelector().find(this.controlSelector)},i.prototype.setupListeners=function(){var t=this.getSlideshowMediator();t.subscribe&&(t.subscribe("gallery-started",this.handleGalleryStarted.bind(this)),t.subscribe("slide-change-transition-end",this.handleSlideChangeTransitionEnd.bind(this)))},i.prototype.getSlideshowMediator=function(){return this.slideshowMediator},i.prototype.toggleControlVisibility=function(){this.getControlShouldBeVisible()?this.setControlVisible():this.setControlInvisible()},i.prototype.toggle=function(){this.getIsOpen()?this.close():this.open()},i.prototype.open=function(){this.setIsOpen(!0),this.setOpened()},i.prototype.close=function(){this.setIsOpen(!1),this.setClosed()},i.prototype.updateARIAHiddenState=function(t){_.isBoolean(t)&&this.$controlSelector.attr("aria-hidden",t)},i.prototype.setControlVisible=function(){this.$controlSelector.addClass(this.controlVisibleClass),this.updateARIAHiddenState(!1)},i.prototype.setControlInvisible=function(){this.$controlSelector.removeClass(this.controlVisibleClass),this.updateARIAHiddenState(!0)},i.prototype.setOpened=function(){this.getSelector().removeClass(this.closedClass)},i.prototype.setClosed=function(){this.getSelector().addClass(this.closedClass)},i.prototype.setControlDisplayState=function(t){t&&_.has(t,"isContentSlide")&&t.isContentSlide&&_.has(t,"isSidebarSlide")&&!0===t.isSidebarSlide?this.setControlShouldBeVisible(!0):this.setControlShouldBeVisible(!1)},i.prototype.getControlShouldBeVisible=function(){return this.shouldControlBeVisible},i.prototype.setControlShouldBeVisible=function(t){_.isBoolean(t)&&(this.shouldControlBeVisible=t)},i.prototype.getIsOpen=function(){return this.isOpen},i.prototype.setIsOpen=function(t){_.isBoolean(t)&&(this.isOpen=t)},i.prototype.enableAnimations=function(){this.getSelector().addClass(this.isAnimationAllowedClass)},i.prototype.disableAnimations=function(){this.getSelector().removeClass(this.isAnimationAllowedClass)},i.prototype.handleGalleryStarted=function(t){this.setControlDisplayState(t),this.toggleControlVisibility(),this.disableAnimations(),this.getControlShouldBeVisible()&&this.open()},i.prototype.handleSlideChangeTransitionEnd=function(t){this.setControlDisplayState(t),this.toggleControlVisibility(),this.disableAnimations(),this.getControlShouldBeVisible()&&this.open()},i.prototype.setupEvents=function(){this.handleToggleClick=this.handleToggleClick.bind(this),this.bindElementEvents()},i.prototype.bindElementEvents=function(){this.$controlSelector.on("click",this.handleToggleClick)},i.prototype.handleToggleClick=function(){this.enableAnimations(),this.toggle()},i.prototype.setSelector=function(e){this.selector=t(e)},i.prototype.getSelector=function(){return this.selector},i}),define("module/slideshow-gallery/controls-manager",["jquery","lib/domReady","lib/ecmaScript5"],function(t,e,n){function i(t,e){return this.selector=t,this.slideshowMediator=e,this}return i.prototype.init=function(){var t=this.getSelector();this.setSelector(t),this.getSelector().length&&(this.setupListeners(),this.setupSelectors())},i.prototype.setupSelectors=function(){this.invisibleClass="is-invisible"},i.prototype.setupListeners=function(){var t=this.getSlideshowMediator();t.subscribe&&(t.subscribe("slide-change-background-loaded",this.handleSlideChangeBackgroundLoaded.bind(this)),t.subscribe("slide-change-transition-end",this.handleSlideChangeTransitionEnd.bind(this)))},i.prototype.setVisible=function(){this.getSelector().removeClass(this.invisibleClass)},i.prototype.setInvisible=function(){this.getSelector().addClass(this.invisibleClass)},i.prototype.handleSlideChangeTransitionEnd=function(t){this.setVisible()},i.prototype.handleSlideChangeBackgroundLoaded=function(t){this.setInvisible()},i.prototype.getSlideshowMediator=function(){return this.slideshowMediator},i.prototype.setSelector=function(e){this.selector=t(e)},i.prototype.getSelector=function(){return this.selector},i}),define("module/adverts/deferredAdSlotRenderer",["jquery","lodash"],function(t,e){return new function(){this.renderSlot=function(n){t(n).length>0&&t("[data-bbccom-advert-deferred]").each(function(){var n=t(this),i=n.data("bbccomAdvertId"),o=n.data("bbccomAdvertGroups")+"";e.isString(i)&&e.isString(o)&&(o=o.split("_"),o.length>0&&void 0!==bbcdotcom.slotInfinite&&bbcdotcom.slotInfinite(i,o,n[0],!0))})}}}),define("module/slideshow-gallery/ad-end-slate-mpu",["jquery","lib/domReady","lib/ecmaScript5","module/adverts/deferredAdSlotRenderer","module/slideshow-gallery/layout"],function(t,e,n,i,o){function a(t,e){return this.selector=t,this.slideshowMediator=e,this.layout=new o,this.rendered=!1,this}return a.prototype.init=function(){this.getSelector().length&&(this.setupListeners(),this.setupEvents())},a.prototype.setupListeners=function(){var t=this.getSlideshowMediator();t.subscribe&&(t.subscribe("gallery-initialised",this.handleGalleryInitialised.bind(this)),t.subscribe("slide-change-transition-end",this.handleSlideChangeTransitionEnd.bind(this)))},a.prototype.isRendered=function(){return this.rendered},a.prototype.setRendered=function(t){_.isBoolean(t)&&(this.rendered=t)},a.prototype.getSlideshowMediator=function(){return this.slideshowMediator},a.prototype.handleGalleryInitialised=function(t){this.layout.isVerticalScroll()&&this.renderIfNotRendered()},
a.prototype.handleSlideChangeTransitionEnd=function(t){t&&_.has(t,"isEndSlate")&&!0===t.isEndSlate&&this.renderIfNotRendered()},a.prototype.setupEvents=function(){t(window).on("resize",this.handleWindowResize.bind(this))},a.prototype.handleWindowResize=function(){this.layout.hasChangedToVerticalScroll()&&this.renderIfNotRendered()},a.prototype.renderIfNotRendered=function(){this.isRendered()||this.render()},a.prototype.render=function(){this.setRendered(!0),i.renderSlot(this.selector)},a.prototype.getSelector=function(){return this.selector},a}),define("module/slideshow-gallery/analytics/slide-view",["lodash","jquery","module/analytics/main","module/slideshow-gallery/layout"],function(t,e,n,i){var o=function(t,e,n){this.selector=t,this.channelName=n,this.slidesModuleName="sg-main",this.slideshowMediator=e,this.layout=new i};return o.prototype.init=function(){var t=this.getSelector();this.setSelector(t),this.getSelector().length&&this.layout.isSlideshow()&&(this.initSlidesModule(),this.setupListeners())},o.prototype.setupListeners=function(){var t=this.getSlideshowMediator();t.subscribe&&(t.subscribe("gallery-initialised",this.handleGalleryInitialised.bind(this)),t.subscribe("slide-change-transition-end",this.handleSlideChangeTransitionEnd.bind(this)))},o.prototype.trackSlideView=function(t){var e=this.$slides.eq(t.currentSlideIndex);n.addTrackingForSelector(e.getSelector(!0),this.getTrackingData(t)),e.trigger("track")},o.prototype.getTrackingData=function(t){var e=t.currentSlideIndex+1;return{channelName:this.channelName,interactionType:"custom",event:"track",elementPosition:e,elementType:t.slideType,elementName:"slide "+e+" "+t.totalSlides,totalElementCount:t.totalSlides}},o.prototype.setSlides=function(t){this.$slides=e(t.slideSelector)},o.prototype.initSlidesModule=function(){n.addTrackingForModule(this.selector,{module:this.slidesModuleName})},o.prototype.handleGalleryInitialised=function(t){this.setSlides(t),this.trackSlideView(t)},o.prototype.handleSlideChangeTransitionEnd=function(t){this.trackSlideView(t)},o.prototype.getSlideshowMediator=function(){return this.slideshowMediator},o.prototype.setSelector=function(t){this.selector=e(t)},o.prototype.getSelector=function(){return this.selector},o}),define("model/shareTrackingData",[],function(){return function(t){return{facebook:{id:"facebook-share",elementType:"facebook-share",elementName:t},twitter:{id:"twitter-share",elementType:"twitter-share",elementName:t},google:{id:"google-share",elementType:"google-share",elementName:t},email:{id:"email-share",elementType:"email-share",elementName:t},linkedin:{id:"linkedin-share",elementType:"linkedin-share",elementName:t},reddit:{id:"reddit-share",elementType:"reddit-share",elementName:t},stumbleupon:{id:"stumbleupon-share",elementType:"stumbleupon-share",elementName:t},whatsapp:{id:"whatsapp-share",elementType:"whatsapp-share",elementName:t},pinterest:{id:"pinterest-share",elementType:"pinterest-share",elementName:t}}}}),define("module/responsiveShareTools",["jquery","lib/ecmaScript5","model/digitalData","model/shareTrackingData","module/analytics/main"],function(t,e,n,i,o){function a(t,e,n){this.setModuleSelectors(t),this.setItemListSelector(e),this.setItemSelector(n),this.setupAnalytics()}return a.prototype.setupAnalytics=function(){var e=this.getItemSelector(),n=t(e),i=this.getTrackingData(),a=this,s=1;this.getModuleSelectors().forEach(function(t){o.addTrackingForModule(t,{module:t})}),n.each(function(n,r){var l,c=t(r).attr("data-tracking-id"),d=t(r),u=a.getTotalLinkCount(d);if(s>u&&(s=1),l=s,c.length>0){var p=a.getItemListSelector()+" "+e+"[data-tracking-id="+c+"]";o.addTrackingForSelector(p,_.extend(i[c],{totalElementCount:u,elementPosition:l}))}s++})},a.prototype.getTotalLinkCount=function(t){return t.closest(this.getItemListSelector()).find(this.getItemSelector()).length},a.prototype.getTrackingData=function(){return i(n.page.pageInfo.pageID)},a.prototype.getModuleSelectors=function(){return this.moduleSelectors},a.prototype.setModuleSelectors=function(t){this.moduleSelectors=t},a.prototype.getItemListSelector=function(){return this.itemListSelector},a.prototype.setItemListSelector=function(t){this.itemListSelector=t},a.prototype.getItemSelector=function(){return this.itemSelector},a.prototype.setItemSelector=function(t){this.itemSelector=t},a}),define("module/slideshow-gallery/analytics/share-tools",["lodash","jquery","module/analytics/main","module/responsiveShareTools"],function(t,e,n,i){var o=function(t,e){this.selector=t,this.slideshowMediator=e,this.shareToolsSelectors=["#slideshow-gallery-share-tools"],this.shareToolsItemListSelector=".share",this.shareToolsItemSelector=".share-item .share-button"};return o.prototype.init=function(){var t=this.getSelector();this.setSelector(t),this.getSelector().length&&this.setupAnalytics()},o.prototype.setupAnalytics=function(){this.responsiveShareTools=new i(this.shareToolsSelectors,this.shareToolsItemListSelector,this.shareToolsItemSelector)},o.prototype.setSelector=function(t){this.selector=e(t)},o.prototype.getSelector=function(){return this.selector},o}),define("module/slideshow-gallery/analytics/main",["lodash","jquery","module/slideshow-gallery/analytics/slide-view","module/slideshow-gallery/analytics/share-tools"],function(t,e,n,i){var o=function(t,e){this.selector=t,this.channelName="slideshow-gallery",this.slideshowMediator=e};return o.prototype.init=function(){this.initSlideViewAnalytics(),this.initShareToolsAnalytics()},o.prototype.initSlideViewAnalytics=function(){this.slideViewAnalytics=new n(this.selector,this.slideshowMediator,this.channelName).init()},o.prototype.initShareToolsAnalytics=function(){this.shareToolsAnalytics=new i(this.selector,this.slideshowMediator).init()},o}),define("layouts/slideshow-gallery",["lodash","lib/ecmaScript5","jquery","lib/domReady","util/logger","common/util/extends","layouts/base","module/slideshow-gallery/slideshow-gallery","module/share-tools/slideshow-gallery","module/slideshow-gallery/inline-image-manager","module/slideshow-gallery/stand-alone-video-player-manager","module/slideshow-gallery/ambient-video-manager","module/slideshow-gallery/progress","module/slideshow-gallery/sg-mediator","module/slideshow-gallery/style-manager","module/slideshow-gallery/info-manager","module/slideshow-gallery/controls-manager","module/slideshow-gallery/ad-end-slate-mpu","module/slideshow-gallery/analytics/main"],function(t,e,n,i,o,a,s,r,l,c,d,u,p,h,m,f,g,b,y){function v(t,e){s.call(this,t),this.selector=t}return a(v,s,{init:function(){o.debug("SlideshowGalleryLayout:init"),this.selector&&(this.setupMediator(),this.setupInlineImageManager(),this.setupStandAloneMediaPlayerManager(),this.setupAmbientVideoManager(),this.setupStyleManager(),this.setupAdEndSlateMpu(),this.setupAnalytics(),this.setupSlideshowGallery(),this.setupShareTools(),this.setupProgress(),this.setupInfoManager(),this.setupControlsManager())},setupMediator:function(){this.sgMediator=h},setupStyleManager:function(){this.styleManager=new m('[data-sg="main"]',this.sgMediator)},setupSlideshowGallery:function(){var t=new r(this.selector);this.sgMediator.addEventListeners(t),t.init()},setupShareTools:function(){var t=this.selector+" [data-share]";new l({selector:t,slideshowMediator:this.sgMediator,class:"share-tools--slideshow-gallery"}).init()},setupProgress:function(){var t=this.selector+" [data-sg-progress]";new p(t,this.sgMediator).init()},setupInlineImageManager:function(){new c('[data-sg="main"]',this.sgMediator).init()},setupStandAloneMediaPlayerManager:function(){new d('[data-sg="main"]',this.sgMediator).init()},setupAmbientVideoManager:function(){new u('[data-sg="main"]',this.sgMediator).init()},setupInfoManager:function(){new f('[data-sg="main"]',this.sgMediator).init()},setupControlsManager:function(){var t=this.selector+' [data-sg="controls"]';new g(t,this.sgMediator).init()},setupAdEndSlateMpu:function(){var t=this.selector+" [data-sg-end-slate-mpu]";new b(t,this.sgMediator).init()},setupAnalytics:function(){new y(this.selector,this.sgMediator).init()}}),v}),define("layouts/third-party-content",["lodash","lib/ecmaScript5","jquery","lib/domReady","util/logger","common/util/extends","layouts/base","module/responsiveFrame"],function(t,e,n,i,o,a,s,r){function l(t){s.call(this,t),this.selector=t}return a(l,s,{init:function(){o.debug("ThirdPartyContentLayout:init"),this.setSelector(this.getSelector()),this.selector.length>0&&(this.responsiveIframe=new r(this.getSelector()),this.responsiveIframe.init())},setSelector:function(t){this.selector=n(t)},getSelector:function(){return this.selector}}),l}),define("model/exposed-data",["lodash"],function(t){_exposedData;return t.isUndefined(_entityMapping)||(_exposedData.entityMapping=_entityMapping),_exposedData}),define("common/entity/habitat/paging",["lodash","common/util/extends","common/util/logger","common/entity/base"],function(t,e,n,i){function o(e,n){var o={page:1,totalPages:1,itemsPerPage:1,totalItems:0};i.call(this,t.extend(o,e),n)}return e(o,i,{getPage:function(){return this.page},setPage:function(t){this.page=t},getTotalPages:function(){return this.totalPages},getTotalItems:function(){return this.totalItems},getItemsPerPage:function(){return this.itemsPerPage}}),o}),define("common/entity/habitat/paged-list",["lodash","common/util/extends","common/util/logger","common/entity/list/entity","common/entity/habitat/paging"],function(t,e,n,i,o){function a(e,n){var o={id:!1,title:"",results:[]};i.call(this,t.extend(o,e),n)}return e(a,i,{init:function(t){i.prototype.init.apply(this,arguments),this.setPaging(t.paging)},getId:function(){return this.id},getTitle:function(){return this.title},getListItems:function(){return this.results},flushListItems:function(){this.results=[]},setPaging:function(t){this.paging=new o(t)},getPaging:function(){return this.paging},getPage:function(){return this.getPaging().getPage()},getTotalPages:function(){return this.getPaging().getTotalPages()},getTotalItems:function(){return this.getPaging().getTotalItems()},getItemsPerPage:function(){return this.getPaging().getItemsPerPage()}}),a}),define("common/interface/entity/list/paged",["lodash","common/util/interface","common/interface/entity/list/base"],function(t,e,n){return new e("PagedListEntity",n.methods.concat(["getPage","getTotalPages","getItemsPerPage","getTotalItems"]))}),define("common/view/model-v2/list/load-more",["lodash","common/util/extends","common/util/logger","common/view/model-v2/base","common/interface/entity/list/paged"],function(t,e,n,i,o){function a(){i.apply(this,arguments)}return e(a,i,{entityInterface:o,setViewData:function(){var e=t.extend({id:this.getConfig().get("id",""),title:this.getConfig().get("title","Load more items")},this.getPagingData());this.viewData=e},getPagingData:function(){var t,e={url:"",class:"load-more-button disabled"},n=this.getEntity().getPage();return n<this.getEntity().getTotalPages()&&(t=n+1,e["next-page"]=t,e.class="load-more-button",e.url=this.getPageURL(t)),e},getPageURL:function(t){var e,n=this.getConfig().get("baseUrl"),i="";return n&&(e=n.indexOf("?"),e>0?(i=n.substr(0,e),i+="/"+t+n.substr(e)):i=n+"/"+t),i}}),a}),define("component/load-more",["lodash","module/MVVM-component","common/view/model-v2/list/load-more","templates"],function(t,e,n,i){return function(t,o,a){var s=new n(o,a);return new e(t,s,i["load-more"])}}),define("common/interface/model/paginated",["lodash","common/util/interface"],function(t,e){return new e("PaginatedModel",["setPage","setItemsPerPage","getPage","getItemsPerPage"])}),define("interaction-controller/pagination/base",["jquery","lodash","common/util/extends","common/util/interface","common/interface/entity/list/paged","common/interface/model/paginated","interaction-controller/base","module/analytics/main"],function(t,e,n,i,o,a,s,r){var l=function(){s.apply(this,arguments)};return n(l,s,{init:function(t,e){i.ensureImplements(e.getEntity(),o),i.ensureImplements(e.getModel(),a),s.prototype.init.apply(this,arguments)},refresh:function(){s.prototype.refresh.call(this);var t=this.el.find("a");t.click(this.paginate.bind(this)),this.setupAnalytics(t)},showLoading:function(){this.el.find("#loading-spinner").addClass("gelicon--rotate-anticlockwise")},setupAnalytics:function(){r.addTrackingForSelector(this.el.find("a"),{id:"load-more-button",elementName:"Load More",interactionType:"custom"})},trackPagination:function(t){r.trackInteraction(t)}}),l}),define("interaction-controller/pagination/paged",["jquery","lodash","common/util/extends","common/util/interface","common/interface/entity/list/paged","interaction-controller/pagination/base"],function(t,e,n,i,o,a){var s=function(){a.apply(this,arguments)};return n(s,a,{init:function(t,e){a.prototype.init.apply(this,arguments)},paginate:function(t){t.preventDefault(),t.stopPropagation();var e=this.component.getEntity().getPage()+1;this.showLoading(),this.component.getModel().setPage(e),this.component.updateModelConfig(),this.trackPagination(t)}}),s}),define("module/paginated-entity-list",["lodash","lib/ecmaScript5","component/load-more","component/promo-group/base","module/component-loader","interaction-controller/pagination/paged"],function(t,e,n,i,o,a){function s(t,e,i,s,r,l,c){var d=this.getListComponent(t,e,r,l,c),u=n(t,e),p=new o(i,d,{mode:"append",isContentRendered:!0});new o(s,u,{mode:"replace",interactionController:new a});this.listComponentLoader=p,this.loadMoreComponentLoader=u}return t.extend(s.prototype,{getListComponent:function(e,n,o,a,s){return t.isFunction(a)?a(e,n,o,s):i(e,n,o)},load:function(){var t=this;this.listComponentLoader.load().then(function(){t.loadMoreComponentLoader.load()})}}),s}),define("common/entity/vanilla/promo",["lodash","common/util/extends","common/entity/vanilla/link/base"],function(t,e,n){function i(e){var i={relatedItems:!1,name:"",summary:"",summaryLong:"",iconType:"",context:!1,type:"",clientName:"",locations:[],longitude:!1,latitude:!1};n.call(this,t.extend(i,e))}return e(i,n,{getShortName:function(){return this.name},getSummary:function(){return this.summary},setSummary:function(t){this.summary=t},getSummaryLong:function(){return this.summaryLong},getContext:function(){return this.context},getIconType:function(){return this.iconType},getType:function(){return this.type},getRelatedLinks:function(){return this.relatedItems},getClientName:function(){return this.clientName},getLongitude:function(){return this.longitude},getLatitude:function(){return this.latitude}}),i}),define("layouts/index/base",["jquery","lodash","common/util/extends","layouts/base","common/config","common/model/base","model/exposed-data","common/entity/habitat/paging","common/entity/factory","common/entity/habitat/paged-list","module/paginated-entity-list","common/entity/vanilla/promo","component/promo-group/base"],function(t,e,n,i,o,a,s,r,l,c,d,u,p){function h(t,n){i.call(this,t);var a=this.getPagingData(),s=e.extend({page:a.getPage()+1,items:a.getItemsPerPage()},o.get());this.setModel(s),this.setupPagination()}return n(h,i,{listConfig:{},listItemEntity:u,loadMoreWrapperSelector:"#load-more-wrapper",promoGroupComponent:p,setModel:function(t){},getModel:function(){return this.model},getPagingData:function(){var t;if(e.has(s,"promos")&&e.has(s.promos,"paging"))return t=new r(s.promos.paging),t.setPage(t.getPage()-1),t},getListConfig:function(){return this.listConfig},getListItemEntity:function(){return this.listItemEntity},getPaginatedList:function(e){var n=new l({listItem:this.getListItemEntity()}),i=new c({},n);return new d(this.getModel(),i,t(this.moreResultsSelector),t(this.loadMoreWrapperSelector),this.getListConfig(),this.getPromoGroupComponent(),this.getPromoGroupTemplate())},getPromoGroupComponent:function(){return this.promoGroupComponent},getPromoGroupTemplate:function(){return this.promoGroupTemplate},setupPagination:function(){this.getPaginatedList().load()}}),h}),define("common/entity/proxy/base",["lodash","common/util/extends","common/util/logger","common/entity/base"],function(t,e,n,i){function o(t){i.apply(this,arguments)}return e(o,i,{init:function(t){i.prototype.init.apply(this,arguments),this.initProxy(t)},initProxy:function(t){this.setProxy(new i(t))},getProxy:function(){return this.proxy},setProxy:function(t){this.proxy=t}}),o}),define("common/entity/proxy/link",["lodash","common/util/extends","common/util/logger","common/entity/proxy/base","common/entity/vanilla/link/base"],function(t,e,n,i,o){function a(t){i.apply(this,arguments)}return e(a,i,{initProxy:function(t){this.setProxy(new o(t))},getId:function(t){return this.getProxy().getId(t)},getURL:function(){return this.getProxy().getURL()},getTitle:function(){return this.getProxy().getTitle()},getImage:function(){return this.getProxy().getImage()}}),a}),define("common/entity/proxy/promo",["lodash","common/util/extends","common/util/logger","common/entity/proxy/link","common/entity/vanilla/promo"],function(t,e,n,i,o){function a(t){i.apply(this,arguments)}return e(a,i,{initProxy:function(t){this.setProxy(new o(t))},getShortName:function(){return this.getProxy().getShortName()},getClientName:function(){return this.getProxy().getClientName()},getSummary:function(){return this.getProxy().getSummary()},setSummary:function(t){return this.getProxy().setSummary(t)},getSummaryLong:function(){return this.getProxy().getSummaryLong()},getContext:function(t){return this.getProxy().getContext(t)},getIconType:function(){return this.getProxy().getIconType()},getType:function(){return this.getProxy().getType()},getRelatedLinks:function(){return this.getProxy().getRelatedLinks()}}),a}),define("common/entity/habitat/collection/base",["lodash","common/util/extends","common/util/logger","common/entity/habitat/promo"],function(t,e,n,i){function o(e){var n={};i.call(this,t.extend(n,e))}return e(o,i,{init:function(t){i.prototype.init.call(this,t),this.map("collectionType","type"),this.map("description","summary"),this.initImage("image",this.getArrayNestedAsset("assetImage"),this.get("type"))}}),o}),define("common/entity/habitat/collection/promo",["lodash","common/util/extends","common/entity/habitat/collection/base"],function(t,e,n){function i(t){n.call(this,t)}return e(i,n,{}),i}),define("common/entity/habitat/tag/promo",["lodash","common/util/extends","common/util/logger","common/entity/habitat/promo"],function(t,e,n,i){function o(e){var n={URL:"",name:"",description:""};i.call(this,t.extend(n,e))}return e(o,i,{init:function(t){i.prototype.init.call(this,t),this.map("name","title"),this.initImage("image",this.getArrayNestedAsset("assetImage"),"tag")}}),o}),define("common/entity/habitat/destination/link",["lodash","common/util/extends","common/util/logger","common/entity/habitat/promo","common/view/entity-URL-router"],function(t,e,n,i,o){function a(e){var n={name:"",description:""};i.call(this,t.extend(n,e))}return e(a,i,{init:function(t){i.prototype.init.call(this,t),this.map("name","title"),this.map("description","summary"),this.initImage("image",this.getArrayNestedAsset("assetImage"),"destination"),this.set("id",this.getPathId()),this.initURL()},getPathId:function(){var e,n=this.getId(),i=this.get("path");return t.isString(n)&&i?(e=this.get("id","").split("/"),e.pop(),e.join("/")+"/"+i):n}}),a}),define("common/entity/habitat/document",["lodash","common/util/extends","common/entity/habitat/promo","common/entity/habitat/image/base","common/view/entity-URL-router"],function(t,e,n,i,o){function a(e,i){var o={keywords:[],author:!1,adZoneId:"",adSlots:!1,partner:!1,searchTerms:!1,error:!1,advertsDisabled:!1};n.call(this,t.extend(o,e),i)}return e(a,n,{init:function(){n.prototype.init.apply(this,arguments)},getKeywords:function(){return this.keywords},getAuthor:function(){return this.author},getPartner:function(){return this.partner},getAdZoneId:function(){return this.adZoneId},getAdSlots:function(){return this.adSlots},getSearchTerms:function(){return this.searchTerms},getError:function(){return this.error},areAdvertsDisabled:function(){return this.advertsDisabled}}),a}),define("common/entity/habitat/story/link",["lodash","common/util/extends","common/util/logger","common/entity/habitat/document"],function(t,e,n,i){function o(e,n){var o={};i.call(this,t.extend(o,e),n)}return e(o,i,{init:function(t,e){i.prototype.init.apply(this,arguments),this.map("headlineShort","title"),this.initImage("image",this.getLeadImage(),"story")},getLeadImage:function(){var t=this.getArrayNestedAsset("assetImagePromo"),e=this.getArrayNestedAsset("promoImageOverride");return t||(e||this.getArrayNestedAsset("assetImage"))}}),o}),define("common/entity/habitat/external-promotion/promo",["lodash","common/util/extends","common/util/logger","common/entity/habitat/promo","common/helper/context-data/item"],function(t,e,n,i,o){function a(e,n){var o={linkUrl:""};i.call(this,t.extend(o,e),n)}return e(a,i,{init:function(t,e){i.prototype.init.apply(this,arguments),this.map("name","title"),this.map("name","title"),this.set("iconType","external"),this.map("summaryLong","summary"),this.initImage("image",this.getArrayNestedAsset("assetImage"),this.getPlaceholderName(this.getURL()))},getURL:function(){return this.linkUrl},getPlaceholderName:function(e){if(t.isString(e)){var n=e.split("/");if(n.length>=4)return n[3]+"-external-promotion"}return"story"}}),a}),define("common/entity/habitat/slideshow-gallery/link",["lodash","common/util/extends","common/util/logger","common/entity/habitat/document"],function(t,e,n,i){function o(e,n){var o={};i.call(this,t.extend(o,e),n)}return e(o,i,{init:function(t,e){i.prototype.init.apply(this,arguments)}}),o}),define("common/_modules/third-party-content/entities/link",["lodash","common/util/extends","common/entity/habitat/link"],function(t,e,n){function i(e){var i={};n.call(this,t.extend(i,e))}return e(i,n,{init:function(t){n.prototype.init.call(this,t),this.map("headlineShort","title"),this.initURL(),this.initPromoImage()},initPromoImage:function(){var t=this.getArrayNestedAsset("assetImagePromo");!1!==t&&this.initImage("image",t,"third-party-content-splash")}}),i}),define("common/entity/habitat/mixed/link",["lodash","common/util/extends","common/util/logger","common/entity/proxy/promo","common/entity/habitat/base","common/entity/habitat/collection/promo","common/entity/habitat/tag/promo","common/entity/habitat/destination/link","common/entity/habitat/story/link","common/entity/habitat/external-promotion/promo","common/entity/vanilla/link/base","common/entity/habitat/slideshow-gallery/link","common/_modules/third-party-content/entities/link"],function(t,e,n,i,o,a,s,r,l,c,d,u,p){function h(t){i.apply(this,arguments)}return e(h,i,{initProxy:function(t){var e,n=new o(t);switch(n.getEntityType()){case"collection":e=this.getCollectionEntity(t);break;case"tag":e=this.getTagEntity(t);break;case"destination":e=this.getDestinationEntity(t);break;case"story":case"native-story":e=this.getStoryEntity(t);break;case"slideshow-gallery":e=this.getSlideshowGalleryEntity(t);break;case"thirdpartycontent":e=this.getThirdPartyContentEntity(t);break;case"external":e=this.getExternalPromotionEntity(t);break;default:e=this.getDefaultEntity(t)}this.setProxy(e)},getCollectionEntity:function(t){return new a(t)},getExternalPromotionEntity:function(t){return new c(t)},getTagEntity:function(t){return new s(t)},getStoryEntity:function(t){return new l(t)},getSlideshowGalleryEntity:function(t){return new u(t)},getThirdPartyContentEntity:function(t){return new p(t)},getDestinationEntity:function(t){return new r(t)},getDefaultEntity:function(t){return new d(t)}}),h}),define("common/helper/entity/list",["lodash","common/entity/factory","common/entity/list/entity"],function(t,e,n){return{getList:function(i,o){var a;return!!(t.isArray(i)&&i.length>0)&&(a=new e({listItem:o}),new n({listItems:i},a))}}}),define("common/entity/vanilla/list",["lodash","common/util/extends","common/entity/list/base"],function(t,e,n){function i(e,i){var o={URL:"",image:!1,page:1,totalPages:1,itemsPerPage:1,totalItems:0};n.call(this,t.extend(o,e),i)}return e(i,n,{getURL:function(){return this.URL},getImage:function(){return this.image},getPage:function(){return this.page},getTotalPages:function(){return this.totalPages},getTotalItems:function(){return this.totalItems},getItemsPerPage:function(){return this.itemsPerPage}}),i}),require([],function(){return String.prototype.ucfirst=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.insert=function(t,e){return t>0?this.substring(0,t)+e+this.substring(t,this.length):e+this},String}),define("common/util/string-extension",function(){}),define("common/helper/context-data/promo",["lodash","common/util/extends","common/entity/base","common/helper/context-data/item","common/helper/domain-brand-mapper","common/util/string-extension","common/util/logger","common/helper/date-formatter","common/config"],function(t,e,n,i,o,a,s,r,l){function c(t){var e=["destination","tag","collection"];if(!t.canProvide(e))throw new Error("PromoContextHelper.constructor called factory must support methods ("+e.join(",")+")");this.entityFactory=t}return t.extend(c.prototype,{getEntityFactory:function(){return this.entityFactory},getContext:function(e,i){var o,a,s=new n(i),r=s.get("type",!1);switch(!1===r&&(r=l.get()["default-context"]),r){case"destination":o=this.getDestinationContext(e,s);break;case"collection":a=this.createCollectionContextItem(e,s);break;case"tag":a=this.createTagContextItem(e,s);break;case"tags":o=this.getTagsContext(e,s),o=o.slice(0,3);break;case"destination-and-tag":o=this.createDestinationAndTagContext(e,s);break;case"collection-and-tags":o=this.createCollectionAndTagContext(e,s);break;case"collection-and-tag":o=this.createCollectionAndTagContext(e,s,1);break;case"date":a=this.getDateContext(e,s);break;case"any":default:a=this.getAnyContext(e,s)}return t.isUndefined(a)||!1===a||(o=[a]),o},getAnyContext:function(t,e){var n;return(n=this.createCollectionContextItem(t,e))?n:(n=this.createTagContextItem(t,e))||void 0},getDateContext:function(t,e){return this.createContextItem(r.getFormattedDate(t.get("displayDate")))},createDestinationAndTagContext:function(t,e){var n=this.createDestinationContext(t,e),i=this.createTagContextItem(t,e),o=[];if(!1!==n){var a=function(){return!0},s={isItemCollection:a,class:"destination",subItems:n};o.push(s)}return!1!==i&&o.push(i),o},createCollectionAndTagContext:function(e,n,i){var o=this.createCollectionContextItem(e,n),a=this.getTagsContext(e,n),s=[],r=3;if(void 0===i&&(i=10),t.isObject(o)&&(s.push(o),r--),t.isArray(a))for(var l=0;l<r&&l<i&&l<a.length;l++)s.push(a[l]);return s},getDestinationContext:function(t,e){var n;switch(t.getEntityType()){case"destination":n=this.getDestinationContextItems(t,e.get("maxDepth",4),e.get("excludeRootDestination",!1));break;case"story":n=this.createDestinationContext(t,e);break;default:n=!1}return n},createDestinationContext:function(t,e){var n=t.get("location",!1),i=!1;if(null!==n&&!1!==n&&n.length>0){var o=n[0],a=e.get("maxDepth",4),s=e.get("excludeRootDestination",!1);i=this.getDestinationContextItems(o,a,s)}return i},getDestinationContextItems:function(t,e,n){var i=[],o=this.getEntityFactory().create("destination",t);return this.getDestinationContextItem(o.getId(),i,t,1,e,n),i},getDestinationContextItem:function(t,e,n,i,o,a){var s=this.getEntityFactory().create("destination",n),r=s.get("parent",!1);null!==r&&!1!==r&&r.length>0&&r[0]instanceof Object&&i<o&&this.getDestinationContextItem(t,e,r[0],i+1,o,a),a&&s.getId()===t||e.push(this.createContextItem(s.getTitle(),s.getURL(),""))},createTagContextItem:function(e,n){var i=this.getTagsContext(e,n);return!(!t.isArray(i)||!t.isObject(t.first(i)))&&i[0]},getTagsContext:function(e,n){var i,o,a,s=e.get("tags",!1),r=[];return!!(t.isArray(s)&&s.length>0)&&(t.each(s,function(t){a=this.getEntityFactory().create("tag",t),i=a.getTitle(),o=a.getURL(),r.push(this.createContextItem(i,o,""))},this),r)},createCollectionContextItem:function(e,n){var i,o,a,s=e.get("collection");return!!t.isObject(s)&&(i=this.getEntityFactory().create("collection",s),o=i.getTitle(),a=i.getURL(),this.createContextItem(o,a,""))},createContextItem:function(t,e,n){return new i(t,e,n)}}),c}),define("common/helper/icon-type-helper",[],function(){return{getIconType:function(t){switch(t){case"play":case"video":return"play";case"audio":return"listen";case"slideshow":case"slideshow-gallery":return"image";case"infographic":case"thirdpartycontent":return"info";case"event":return"calendar";case"external":return"external"}return""}}}),define("common/entity/habitat/story/promo",["lodash","common/util/extends","common/entity/habitat/story/link","common/helper/entity/list","common/entity/habitat/mixed/link","common/entity/habitat/tag/promo","common/entity/habitat/destination/link","common/entity/habitat/collection/base","common/entity/list/entity","common/entity/vanilla/list","common/entity/factory","common/helper/context-data/promo","common/helper/icon-type-helper"],function(t,e,n,i,o,a,s,r,l,c,d,u,p){function h(e){var i={summary:"",type:"",iconType:"",collection:!1,longitude:!1,latitude:!1};n.call(this,t.extend(i,e))}return e(h,n,{init:function(t){n.prototype.init.apply(this,arguments),this.setContextHelper(new u(new d({destination:s,tag:a,collection:r}))),this.map("storyType","type"),this.map("tag","tags"),this.set("collection",this.getArrayNestedAsset("collection")),this.map("summaryShort","summary"),this.initIconType(),this.initRelatedLinks()},initIconType:function(){"story"===this.get("entityType")?this.set("iconType",p.getIconType(this.get("type"))):this.set("iconType",p.getIconType(this.get("entityType")))},initRelatedLinks:function(){var e=this.get("location",[]).concat(this.get("tags",[])),n=i.getList(e,o),a=[],s=[];n&&(t.each(n.getListItems(),function(e,n,i){t.contains(a,e.getId())||s.push(e),a.push(e.getId())}),this.setRelatedLinks(new c({listItems:s})))},setContextHelper:function(t){this.contextHelper=t},getContextHelper:function(){return this.contextHelper},getContext:function(t){return this.getContextHelper().getContext(this,t)},getSummaryLong:function(){return this.summaryLong},getLatitude:function(){return this.latitude},getLongitude:function(){return this.longitude}}),h}),define("common/entity/habitat/slideshow-gallery/promo",["lodash","common/util/extends","common/entity/habitat/slideshow-gallery/link","common/helper/entity/list","common/entity/habitat/mixed/link","common/entity/habitat/tag/promo","common/entity/habitat/destination/link","common/entity/habitat/collection/base","common/entity/list/entity","common/entity/vanilla/list","common/entity/factory","common/helper/context-data/promo","common/helper/icon-type-helper"],function(t,e,n,i,o,a,s,r,l,c,d,u,p){function h(e){var i={image:!1,title:"",summary:""};n.call(this,t.extend(i,e))}return e(h,n,{init:function(t){n.prototype.init.call(this,t),this.map("tag","tags"),this.set("collection",this.getArrayNestedAsset("collection")),this.map("headlineShort","title"),this.map("summaryShort","summary"),this.set("iconType",p.getIconType("slideshow")),this.initImage(),this.initContextHelper(),this.initRelatedLinks()},initRelatedLinks:function(){var e=this.get("location",[]).concat(this.get("tags",[])),n=i.getList(e,o),a=[],s=[];n&&(t.each(n.getListItems(),function(e,n,i){t.contains(a,e.getId())||s.push(e),a.push(e.getId())}),this.setRelatedLinks(new c({listItems:s})))},initContextHelper:function(){this.setContextHelper(new u(new d({destination:s,tag:a,collection:r})))},setContextHelper:function(t){this.contextHelper=t},getContextHelper:function(){return this.contextHelper},getContext:function(t){return this.getContextHelper().getContext(this,t)},getSummaryLong:function(){return this.summaryLong},initImage:function(){var e=this.get("slides",!1);t.has(this,"promoImageOverride")&&t.isArray(this.promoImageOverride)?this.set("image",this.get("promoImageOverride")):t.isArray(e)&&e.length>0&&t.isObject(e[0],"ImagePid")&&this.set("image",e[0].ImagePid),
n.prototype.initImage.call(this,"image",this.getArrayNestedAsset("image"),"slideshow-gallery-promo")}}),h}),define("common/_modules/third-party-content/entities/promo",["lodash","common/util/extends","common/_modules/third-party-content/entities/link","common/helper/context-data/promo","common/helper/icon-type-helper","common/entity/factory","common/entity/habitat/collection/base","common/entity/habitat/tag/promo","common/entity/habitat/destination/link","common/entity/list/entity","common/entity/vanilla/list","common/helper/entity/list","common/entity/habitat/mixed/link"],function(t,e,n,i,o,a,s,r,l,c,d,u,p){function h(e){var i={summary:!1,iconType:!1,relatedLinks:!1,collection:!1,tags:!1,clientName:!1};n.call(this,t.extend(i,e))}return e(h,n,{init:function(t){n.prototype.init.call(this,t),this.map("summaryShort","summary"),this.map("tag","tags"),this.set("iconType",o.getIconType("infographic")),this.set("collection",this.getArrayNestedAsset("collection")),this.initContextHelper(),this.initRelatedLinks()},getShortName:function(){return this.getTitle()},getSummary:function(){return this.summary},getSummaryLong:function(){return this.getSummary()},setSummary:function(t){this.summary=t},initContextHelper:function(){this.setContextHelper(new i(new a({destination:l,tag:r,collection:s})))},setContextHelper:function(t){this.contextHelper=t},getContextHelper:function(){return this.contextHelper},getContext:function(t){return this.getContextHelper().getContext(this,t)},initRelatedLinks:function(){var e=this.get("location",[]).concat(this.get("tags",[])),n=u.getList(e,p),i=[],o=[];n&&(t.each(n.getListItems(),function(e,n,a){t.contains(i,e.getId())||o.push(e),i.push(e.getId())}),this.setRelatedLinks(new d({listItems:o})))},setRelatedLinks:function(t){this.relatedLinks=t},getRelatedLinks:function(){return this.relatedLinks},getClientName:function(){return this.clientName},getIconType:function(){return this.iconType},getType:function(){return this.type}}),h}),define("common/entity/habitat/mixed/promo",["lodash","common/util/extends","common/util/logger","common/entity/habitat/mixed/link","common/entity/habitat/story/promo","common/entity/habitat/slideshow-gallery/promo","common/_modules/third-party-content/entities/promo","common/entity/vanilla/promo"],function(t,e,n,i,o,a,s,r){function l(t){i.apply(this,arguments)}return e(l,i,{getSlideshowGalleryEntity:function(t){return new a(t)},getThirdPartyContentEntity:function(t){return new s(t)},getStoryEntity:function(t){return new o(t)},getDefaultEntity:function(t){return new r(t)}}),l}),define("module/responsiveLists/list",["lib/ecmaScript5","lib/domReady","jquery"],function(t,e,n){return function(t,e){var i=e,o=n(t);this.getRequest=function(){return i},this.getSelector=function(){return o}}}),define("module/responsiveLists/request",[],function(){return function(t,e,n,i){var o=t,a=i,s=e,r=n,l=!1;this.getType=function(){return o},this.getGroups=function(){return a},this.getStartIndex=function(){return s},this.getLength=function(){return r},this.setCompleted=function(t){l=t},this.isCompleted=function(){return l}}}),define("lib/jquery.insertAt",["jquery"],function(t){t.fn.insertAt=function(t,e){return this.each(function(){0===t?e.prepend(this):e.children().eq(t-1).after(this)})}}),define("module/responsiveLists/transaction",[],function(){return function(t,e){var n=t,i=e;this.getSource=function(){return n},this.getDestination=function(){return i}}}),define("module/responsiveLists/exchange",["lib/ecmaScript5","lib/domReady","jquery","lib/jquery.insertAt","model/breakpoints","model/mediaQuery","module/responsiveLists/transaction","util/logger"],function(t,e,n,i,o,a,s,r){return new function(){var t={source:[],destination:[]},i=[];this.init=function(){a.subscribe("groupChanged",this.respond.bind(this))},this.addList=function(e){t[e.getRequest().getType()].push(e)},this.getLists=function(){return t},this.updateList=function(e,n,i){"undefined"!=t[e][n]&&(t[e][n]=i)},this.removeList=function(e,n){"undefined"!=t[e]&&t[e].splice(n,1)},this.respond=function(t){try{this.replaceCompletedTransactionsForMediaGroup(t),this.updateListsForMediaGroup(t)}catch(t){r.error(t)}},this.updateListsForMediaGroup=function(t){for(var e,i,o=0;o<this.getLists().source.length;o++)if(e=this.getLists().source[o],e.getRequest().getGroups(),-1!=n.inArray(t,e.getRequest().getGroups())&&!e.getRequest().isCompleted()){if(!(i=this.getDestinationListForSource(e,t)))throw new Error("You must provide a source and destination list");this.performExchange(e.getSelector(),e.getRequest().getStartIndex(),e.getRequest().getLength(),i.list.getSelector(),i.list.getRequest().getStartIndex()),i.list.getRequest().setCompleted(!0),e.getRequest().setCompleted(!0),this.updateList("destination",i.index,i.list),this.updateList("source",o,e),this.createTransaction(e,i.list)}this.removeCompletedLists()},this.getDestinationListForSource=function(t,e){for(var i,o=0;o<this.getLists().destination.length;o++)if(i=this.getLists().destination[o],-1!=n.inArray(e,i.getRequest().getGroups())&&!i.getRequest().isCompleted()&&i.getRequest().getLength()==t.getRequest().getLength())return{list:i,index:o};return!1},this.replaceCompletedTransactionsForMediaGroup=function(t){for(var e,o,a=[],s=i.length-1;s>=0;s--)e=i[s].getSource(),o=i[s].getDestination(),-1==n.inArray(t,e.getRequest().getGroups())&&-1==n.inArray(t,o.getRequest().getGroups())&&(this.performExchange(o.getSelector(),o.getRequest().getStartIndex(),o.getRequest().getLength(),e.getSelector(),e.getRequest().getStartIndex()),e.getRequest().setCompleted(!1),o.getRequest().setCompleted(!1),this.addList(e),this.addList(o),a.push(s));for(var r in a)i.splice(a[r],1)},this.performExchange=function(t,e,n,i,o){t.children().slice(e,e+n).insertAt(o,i)},this.createTransaction=function(t,e){var n=new s(t,e);i.push(n)},this.removeCompletedLists=function(){var t,e,n={},i=this.getLists();for(t in i){n[t]=[];for(e in i[t])i[t][e].getRequest().isCompleted()&&n[t].push(e);for(e in n[t])this.removeList(t,n[t][e])}},e(this.init.bind(this))}}),define("common/view/model-v2/list/promo-group/set",["lodash","common/util/extends","common/view/model-v2/base","common/view/model-v2/list/promo-group/base","common/interface/entity/list/base","common/entity/vanilla/list"],function(t,e,n,i,o,a){function s(){n.apply(this,arguments)}return e(s,n,{entityInterface:o,setViewData:function(){var e={},n=this.getEntity().getListItems();t.each(this.getConfig().get("groups"),function(t){n.length>t.start&&(e[t.name]=this.getPromoGroup(n,t.start,t.end,t.title,t.class,t.adSlots))},this),this.viewData={groups:e}},getPromoGroup:function(t,e,n,o,s,r){return new i(new a,{analyticsConfig:this.getConfig().get("analyticsConfig"),promoUnit:this.getConfig(),title:o,class:s,adSlots:r,groupStart:e,groupEnd:n}).setSourceData({listItems:t})}}),s}),define("component/promo-group/set",["lodash","module/MVVM-component","common/view/model-v2/list/promo-group/set","templates"],function(t,e,n,i){return function(o,a,s,r){t.isUndefined(r)&&(r="promo-group");var l=new n(a,s);return new e(o,l,i[r])}}),define("layouts/index/story/base",["jquery","lodash","common/util/extends","layouts/index/base","common/config","common/entity/factory","common/entity/habitat/paged-list","common/entity/habitat/mixed/promo","module/paginated-entity-list","module/responsiveLists/list","module/responsiveLists/request","module/responsiveLists/exchange","model/mediaQuery","component/promo-group/set"],function(t,e,n,i,o,a,s,r,l,c,d,u,p,h){function m(e,n){i.call(this,e),"homepage-three-column"==t(e).attr("id")&&this.setupListExchange()}return n(m,i,{setupListExchange:function(){var e,n,i,o,a,s;e=new c(".article-list-group-1",new d("source",2,1,[3])),n=new c(".article-list-group-3",new d("destination",0,1,[3])),u.addList(e),u.addList(n);var r=t(".article-list-group-2").children().length,l=t(".article-list-group-3").children().length,h=t(".article-list-group-4").children().length;i=new c(".article-list-group-4",new d("source",0,h/2,[3])),o=new c(".article-list-group-2",new d("destination",r,h/2,[3])),u.addList(i),u.addList(o),a=new c(".article-list-group-4",new d("source",0,h/2,[3])),s=new c(".article-list-group-3",new d("destination",l,h/2,[3])),u.addList(a),u.addList(s),u.respond(p.getGroup())},moreResultsSelector:"#more-stories-wrapper",listItemEntity:r,listConfig:{promoUnit:{context:"any"},analyticsConfig:{module:"story-index",paginated:!0}}}),m}),define("common/service/request-builder/habitat-paging",["lodash","common/util/extends","common/service/request-builder/habitat"],function(t,e,n){function i(t){n.call(this,t)}return e(i,n,{getRequestURL:function(e,i){var o={page:1,items:10};return i=t.extend(o,i),-1===e.indexOf("?")?e+="?":e+="&",e+="page={page}&itemsPerPage={items}",n.prototype.getRequestURL(e,i)}}),i}),define("common/parser/habitat",["lodash"],function(t){return function(e){if(t.has(e,"meta")&&t.has(e.meta,"results")&&t.has(e,"results"))return{results:e.results,paging:e.meta.results};throw new Error("Habitat parser cannot parse data, unexpected format")}}),define("common/model/habitat-result-set",["lodash","common/util/extends","common/model/habitat","common/service/request-builder/habitat-paging","common/parser/habitat"],function(t,e,n,i,o){function a(t){n.call(this,t)}return e(a,n,{requestBuilder:new i,parseData:function(t,e){return this.parseHabitatData(o(t))},parseHabitatData:function(t){return t},getPage:function(t){return this.config.page},getItemsPerPage:function(){return this.config.items},setPage:function(t){this.config.page=t},setItemsPerPage:function(t){this.config.items=t}}),a}),define("common/model/front-page/front-page-stories",["lodash","common/util/extends","common/model/habitat-result-set"],function(t,e,n){function i(t){n.call(this,t)}return e(i,n,{URLScheme:"/search/frontpage/{moduleId}"}),i}),define("module/bestOf",["jquery","lib/ecmaScript5","module/analytics/main","util/logger"],function(t,e,n,i){function o(t,e){this.setModuleSelector(t),this.setItemSelector(e),this.setupAnalytics()}return o.prototype.setupAnalytics=function(){var e=this.getItemSelector(),i=t(e);n.addTrackingForModule(this.getModuleSelector(),{module:"best-of"}),i.each(function(e,i){var o=t(i),a=o.find(".promo-unit-image a.responsive-image-wrapper"),s=o.find(".promo-unit-copy .promo-unit-header > a"),r=s.find(".promo-unit-title");n.addTrackingForSelector(a,{id:"best-of-"+e,elementType:"image",elementName:r.text()}),n.addTrackingForSelector(s,{id:"best-of-"+e,elementType:"headline",elementName:r.text()})})},o.prototype.getModuleSelector=function(){return this.moduleSelector},o.prototype.setModuleSelector=function(t){this.moduleSelector=t},o.prototype.getItemSelector=function(){return this.itemSelector},o.prototype.setItemSelector=function(t){this.itemSelector=t},o}),define("module/calendar/filter/selectors",["lodash","jquery"],function(t,e){var n=function(t){this.setSelector(t)};return t.extend(n.prototype,{setSelector:function(t){this.selector=e(t)},getSelector:function(){return this.selector},getRegion:function(){return this.getSelector().find(".event-filter-region")},getType:function(){return this.getSelector().find(".event-filter-type")},getDate:function(){return this.getSelector().find(".event-filter-date")}}),n}),define("module/calendar/filter/ui",["lodash","jquery","module/calendar/filter/selectors"],function(t,e,n){return function(t){var i=new n(t);e(t).show(),i.getRegion().find("select").selectivity({placeholder:"All regions"}),i.getType().find("select").selectivity({placeholder:"All types"}),i.getDate().find("select").selectivity({showSearchInputInDropdown:!1,placeholder:"All dates"})}}),define("module/calendar/analytics",["lodash","jquery","module/analytics/main"],function(t,e,n){var i=function(){};return t.extend(i.prototype,{trackFilter:function(t,e){var i="calendar-filter-"+n.formatArrayVariable(e.type)+"_"+n.formatArrayVariable(e.region)+"_"+n.formatArrayVariable(e.date);n.addTrackingForSelector(t,{id:i,channelName:"calendar",elementType:"search",interactionType:"link",event:"track"}),t.trigger("track")},addTrackingToAddToCalendarToggle:function(t,i,o){n.addTrackingForSelector(e(t).getSelector(!0),{id:i,channelName:"calendar",elementName:o,elementType:"add-to-calendar",interactionType:"custom"})},addTrackingToAddToCalendarItem:function(t,i,o){n.addTrackingForSelector(e(t).getSelector(!0),{id:i,channelName:"calendar",elementType:"add-to-calendar",additionalData:o,interactionType:"custom"})},addTrackingToEventPromo:function(t,e){n.addTrackingForSelector(t,{id:e,channelName:"calendar",elementType:"event",trackingMethod:"ajax",pageName:"bbc | culture | cultural calendar |"+e})},addModuleTrackingForGroup:function(t,e){n.addTrackingForModule(e,{module:t})},trackInteraction:function(t){n.trackInteraction(t)}}),new i}),define("module/calendar/filter/main",["lodash","jquery","module/calendar/filter/ui","module/calendar/filter/selectors","module/calendar/analytics","signals"],function(t,e,n,i,o,a){var s=function(t,e){this.preventFormSubmit=e,this.filterSelectors=new i(t),this.filterUI=new n(t),this.submitSignal=new a.Signal,this.setSelector(t),this.setupAnalytics(),this.addEventListeners()};return t.extend(s.prototype,{addEventListeners:function(){this.getSelector().find("#event-filter-submit").click(this.submitForm.bind(this))},setupAnalytics:function(){var t=this.getSelector();this.subscribe("submit",function(e){o.trackFilter(t,e)})},subscribe:function(t,e){switch(t){case"submit":this.submitSignal.add(e)}},submitForm:function(t){!0===this.preventFormSubmit&&(t.preventDefault(),t.stopPropagation());var e=this.getFormValues();this.submitSignal.dispatch(e)},getFormValues:function(){return{region:this.filterSelectors.getRegion().find(".selectivity-input").selectivity("value"),type:this.filterSelectors.getType().find(".selectivity-input").selectivity("value"),date:[this.filterSelectors.getDate().find(".selectivity-input").selectivity("value")]}},setSelector:function(t){this.selector=e(t)},getSelector:function(){return this.selector}}),s}),define("layouts/index/story/front-page",["lodash","common/util/extends","layouts/index/story/base","model/exposed-data","common/config","common/model/front-page/front-page-stories","module/bestOf","module/calendar/filter/main","module/adverts/deferredAdSlotRenderer"],function(t,e,n,i,o,a,s,r,l){function c(t,e){n.call(this,t),this.calendarPromoSelector=".event-filter",this.bestOfModuleSelector="div.best-of-list",this.bestOfItemSelector=".best-of-list li.promo-unit-wrapper div.promo-unit",this.setupModules()}return e(c,n,{setModel:function(t){this.model=new a(t)},setupModules:function(){this.bestOfModule=new s(this.bestOfModuleSelector,this.bestOfItemSelector),$(this.calendarPromoSelector).length>0&&(this.calendarFilter=new r(this.calendarPromoSelector),l.renderSlot("#calendar-deferred-slot"))}}),c}),define("common/model/story/story-by",["lodash","common/util/extends","common/model/habitat-result-set"],function(t,e,n){function i(t){n.call(this,t)}return e(i,n,{}),i}),define("common/model/story/story-by-collection",["lodash","common/util/extends","common/model/story/story-by"],function(t,e,n){function i(t){n.call(this,t)}return e(i,n,{arrRequiredConfig:["id","type"],URLScheme:"/search/story-by-{type}/{moduleId}/{id}"}),i}),define("layouts/index/story/collection",["lodash","common/util/extends","layouts/index/story/base","model/exposed-data","common/config","common/model/story/story-by-collection"],function(t,e,n,i,o,a){function s(t,e,i){this.collectionId=i,this.collectionType=e,n.call(this,t)}return e(s,n,{setModel:function(e){this.model=new a(t.extend({type:this.collectionType,id:this.collectionId},e))}}),s}),define("layouts/index/entity/base",["lodash","common/util/extends","layouts/index/base"],function(t,e,n){function i(t){n.call(this,t)}return e(i,n,{moreResultsSelector:"#entity-index-more-results",listConfig:{promoUnit:{class:"alternative",image:{showBrandedBorder:!0,format:{landscape:{x:"464",y:"261"}}}}}}),i}),define("common/model/collection/collection-by-type",["lodash","common/util/extends","common/model/habitat-result-set"],function(t,e,n){function i(t){n.call(this,t)}return e(i,n,{arrRequiredConfig:["type"],URLScheme:"/search/collection-by-type/{moduleId}/{type}"}),i}),define("layouts/index/entity/collection",["lodash","common/util/extends","layouts/index/entity/base","model/exposed-data","common/config","common/model/collection/collection-by-type","common/entity/habitat/collection/promo"],function(t,e,n,i,o,a,s){function r(t,e){this.collectionType=e,n.call(this,t)}return e(r,n,{listItemEntity:s,setModel:function(e){this.model=new a(t.extend({type:this.collectionType},e))}}),r}),define("common/model/story/story-by-tag",["lodash","common/util/extends","common/model/story/story-by"],function(t,e,n){function i(t){n.call(this,t)}return e(i,n,{arrRequiredConfig:["id"],URLScheme:"/search/story-by-tag/{moduleId}/{id}"}),i}),define("layouts/index/story/tag",["lodash","common/util/extends","layouts/index/story/base","model/exposed-data","common/config","common/model/story/story-by-tag"],function(t,e,n,i,o,a){function s(t,e){this.tagId=e,n.call(this,t)}return e(s,n,{setModel:function(e){this.model=new a(t.extend({id:this.tagId},e))}}),s}),define("common/model/tag/tag-index",["lodash","common/util/extends","common/model/habitat-result-set"],function(t,e,n){function i(t){n.call(this,t)}return e(i,n,{URLScheme:"/search/tags/{moduleId}"}),i}),define("layouts/index/entity/tag",["lodash","common/util/extends","layouts/index/entity/base","model/exposed-data","common/config","common/model/tag/tag-index","common/entity/habitat/tag/promo"],function(t,e,n,i,o,a,s){function r(t){n.call(this,t)}return e(r,n,{listItemEntity:s,setModel:function(t){this.model=new a(t)}}),r}),define("common/model/search/story-search-by-keyword",["lodash","common/util/extends","common/model/habitat-result-set","common/util/logger"],function(t,e,n,i){function o(e){n.call(this,e);var i=this.config.searchKeywords;(i&&t.isString(i)&&i.length<=2||!i)&&this.populate({results:[]})}return e(o,n,{URLScheme:"/search/keyword/{moduleId}?query={searchKeywords}",prepareInput:function(){if(t.has(this.config,"searchKeywords")&&!t.isUndefined(this.config.searchKeywords)&&this.config.searchKeywords.length>2){var e=this.config.searchKeywords;e=e.replace(/(\%22|'|\%27|!|;|\.|:|-|_|,|\{|\}|\%7B|\%7D|\[|\%5B|\%5D|\]|\(|\)|\%3C|\%3E|\%7C)/gi,""),this.config.searchKeywords=e}}}),o}),define("layouts/index/story/search-results",["lodash","common/util/extends","layouts/index/story/base","model/exposed-data","common/config","common/model/search/story-search-by-keyword"],function(t,e,n,i,o,a){function s(t,e){this.keywords=e,n.call(this,t)}return e(s,n,{setModel:function(e){this.model=new a(t.extend({searchKeywords:this.keywords},e))}}),s}),function(){function t(t){var e,n,i,o=t.currentTarget||t.srcElement;if("load"===t.type||a.test(o.readyState)){for(n=o.getAttribute("data-requiremodule"),r[n]=!0,e=0;(i=s[e])&&r[i.name];e++)i.req([i.name],i.onLoad);e>0&&s.splice(0,e),setTimeout(function(){o.parentNode.removeChild(o)},15)}}function e(t){var e,n,i;for(t.setAttribute("data-orderloaded","loaded"),e=0;(i=c[e])&&((n=l[i])&&"loaded"===n.getAttribute("data-orderloaded"));e++)delete l[i],require.addScriptToDom(n);e>0&&c.splice(0,e)}var n="undefined"!=typeof document&&"undefined"!=typeof window&&document.createElement("script"),i=n&&(n.async||window.opera&&"[object Opera]"===Object.prototype.toString.call(window.opera)||"MozAppearance"in document.documentElement.style),o=n&&"uninitialized"===n.readyState,a=/^(complete|loaded)$/,s=[],r={},l={},c=[];n=null,define("lib/order",{version:"1.0.5",load:function(n,a,r,d){var u,p,h,m=!!a.nameToUrl;if(!m)return void a([n],r);u=a.nameToUrl(n,null),require.s.skipAsync[u]=!0,i||d.isBuild?a([n],r):o?(h=require.s.contexts._,h.urlFetched[u]||h.loaded[n]||(h.urlFetched[u]=!0,require.resourcesReady(!1),h.scriptCount+=1,p=require.attach(u,h,n,null,null,e),l[n]=p,c.push(n)),a([n],r)):a.specified(n)?a([n],r):(s.push({name:n,req:a,onLoad:r}),require.attach(u,null,n,t,"script/cache"))}})}(),define("module/brightcove",["lib/ecmaScript5","lib/domReady","orb/api","jquery","lib/order!http://admin.brightcove.com/js/BrightcoveExperiences.js"],function(t,e,n,i){return function(t){var o,a,s,r={forceHTML:"true",includeAPI:"true",templateReadyHandler:"onBrightcoveReady"};this.init=function(){this.setSelector(t),this.addParams()},this.addParams=function(){for(var t in r)this.getSelector().append('<param name="'+t+'" value="'+r[t]+'" />')},this.setupPlayer=function(){var t=brightcove.api.getExperience(this.getSelector().attr("id")),e=brightcove.api.modules.APIModules;t.getModule(e.VIDEO_PLAYER);a=t.getModule(e.EXPERIENCE),this.addEventListeners()},this.getParent=function(){return s},this.setPlayer=function(t){a=t},this.getPlayer=function(){return a},this.addEventListeners=function(){n.layout(this.resize.bind(this))},this.resize=function(){var t=this.getVideoPlayerDimensions();a.setSize(t.width,t.height)},this.getVideoPlayerDimensions=function(){var t=Math.round(this.getParent().width()),e=Math.round(t/16*9);return{width:t.toString(),height:e.toString()}},this.setSelector=function(t){o=i(t),s=o.parent()},this.getSelector=function(){return o},e(this.init.bind(this)),window.onBrightcoveReady=this.setupPlayer.bind(this)}}),define("module/customEmbed",["jquery","lib/ecmaScript5","lib/domReady","module/brightcove","module/responsiveFrame"],function(t,e,n,i,o){return function(e){var a;this.init=function(){if(this.setSelector(e),this.isMediaPlayer()&&(this.addMediaPlayerClass(),this.isMagnify()&&this.loadAppropriateMagnifyVideo(),this.isBrightcove())){this.getBrightCoveElement(),new i(".BrightcoveExperience")}new o(this.getFrame()).init()},this.loadAppropriateMagnifyVideo=function(){var t,e=this.getFrame(),n=this.getVideoPlayerDimensions();this.getSelector().width()<e.attr("width")&&(t=e.clone(),t.attr("width",n.width+"px"),t.attr("height",n.height+"px"),e.remove(),this.getSelector().append(t))},this.getVideoPlayerDimensions=function(){var t=Math.round(this.getSelector().width()),e=Math.round(.5625*t);return{width:t.toString(),height:e.toString()}},this.isMediaPlayer=function(){return!!(this.isMagnify()||this.isYoutube()||this.isBrightcove())},this.isMagnify=function(){return this.frameHrefContainString("magnify.net")},this.isYoutube=function(){return this.frameHrefContainString("youtube.com")},this.isBrightcove=function(){return 0!==this.getBrightCoveElement().length},this.getBrightCoveElement=function(){return this.getSelector().find(".BrightcoveExperience")},this.getFrame=function(){var t=this.getSelector().find("iframe");return t||!1},this.frameHrefContainString=function(t){var e,n=this.getFrame();return!(!n||!(e=n.attr("src"))||-1==e.search(t))},this.addMediaPlayerClass=function(){this.getSelector().addClass("iframe-video-player")},this.setSelector=function(e){a=t(e)},this.getSelector=function(){return a},n(this.init.bind(this))}}),define("module/responsiveInfographic",["jquery","lib/ecmaScript5","model/mediaQuery","module/loader","templates"],function(t,e,n,i,o){var a=function(){this.loaderHeight=300};return a.prototype.init=function(t,e){this.setSelector(t),this.storyModel=e,this.storyModel.subscribe("update",this.setupInfographic.bind(this)),this.getSelector().empty(),this.showLoader()},a.prototype.showLoader=function(){this.getSelector().css({position:"relative"}),this.spinner=new i(this.getSelector().get(0),"#333")},a.prototype.setupInfographic=function(t){var e;void 0!==t.getData().infographic&&(this.formats=t.getData().infographic.formats,e=this.getFormat(),this.format=e,this.render())},a.prototype.render=function(){var t,e;void 0!==this.format&&(this.getSelector().width(),e=this.getDimensions(),t=o.infographic({url:this.format.url,width:e.width,height:e.height,scrolling:"no",seamless:"seamless"}),void 0!==this.iframe&&this.iframe.remove(),this.getSelector().append(t),this.iframe=this.getSelector().find("iframe"),this.spinner.spin(this.getSelector().get(0)),this.iframe.load(this.iframeLoaded.bind(this)))},a.prototype.iframeLoaded=function(){this.spinner.stop();var t=this.iframe.get(0),e=t.contentDocument.body;e.style.padding=0,e.style.margin=0},a.prototype.getDimensions=function(){var t=this.getSelector().width();return{width:t,height:t*this.getRatio(this.format)}},a.prototype.getRatio=function(t){return this.format.dimensions.height/this.format.dimensions.width},a.prototype.getFormat=function(){var t=this.formats[this.formats.length-1],e=this.getSelector().width();return this.formats.every(function(n){return!(n.dimensions.width>=e)||(t=n,!1)}),t},a.prototype.resize=function(){var t=this.getDimensions(),e=this.getFormat();this.format.url!=e.url?(this.format=e,this.render()):void 0!==this.iframe&&this.iframe.attr({width:t.width,height:t.height})},a.prototype.setSelector=function(e){_selector=t(e)},a.prototype.getSelector=function(){return _selector},a}),define("model/shareData",[],function(){return function(t,e){return[{text:"facebook","icon-class":"gelicon--facebook",class:"facebook",url:"https://www.facebook.com/sharer/sharer.php?u="+encodeURI(e)+"&title="+t},{text:"Twitter","icon-class":"gelicon--twitter",class:"twitter",url:"https://twitter.com/intent/tweet?text="+t+"&url="+encodeURI(e)},{text:"Google +","icon-class":"gelicon--google-plus",class:"google",url:"https://plus.google.com/share?url="+encodeURI(e)},{text:"Email","icon-class":"gelicon--mail",class:"email",url:"mailto:?subject=Shared from BBC:"+t+"&body="+encodeURI(e)}]}}),define("lib/jquery.slideshow",["jquery","templates","model/shareData","model/digitalData","model/mediaQuery"],function(t,e,n,i,o){(function(){var a,s,r,l,c,d,u,p,h,m,f,g,b,y,v,w,S,x,I,C,T,_,k,L,E,A,D,P,R,M,U,B,V,z,O;a=t,u="#jquery-fullsizable",f="#fullsized_image_holder",A="fullsized_spinner",s=a('<div id="jquery-fullsizable"><div id="fullsized_image_holder"></div></div>'),g=[],p=0,I=null,D=null,k=function(){var t;return t=g[p],null==t.ratio&&(t.ratio=(t.naturalHeight/t.naturalWidth).toFixed(2)),a(window).height()/t.ratio>a(window).width()?(a(t).width(a(window).width()),a(t).height(a(window).width()*t.ratio),a(t).css("margin-top",(a(window).height()-a(t).height())/2)):(a(t).height(a(window).height()),a(t).width(a(window).height()/t.ratio),a(t).css("margin-top",0))},b=function(t){if(27===t.keyCode&&d(),37===t.keyCode&&_(!1),39===t.keyCode)return S(!1)},_=function(t){if(null==t&&(t=!1),p>0)return E(g[p-1],-1,t)},S=function(t){if(null==t&&(t=!1),p<g.length-1)return E(g[p+1],1,t)},E=function(t,s,r){if(null==s&&(s=1),null==r&&(r=!1),V.html(t.captionTitle),z.html(t.caption),O.empty(),o.isCurrentGroupInPermittedGroupString("3_4")&&void 0!==i.pageInstanceID&&void 0!==i.page.pageInfo.pageName){var l=i.page.pageInfo.pageName;""!=t.captionTitle&&t.captionTitle,O.append(e["share-tools"]({shareItems:n(l,"http://"+i.pageInstanceID+"#"+t.id)}))}return p=t.index,a(f).hide(),a(f).html(t),I.navigation&&(!0===r?m():L()),null!=t.loaded?(a(u).removeClass(A),k(),a(f).fadeIn("fast"),C(s)):(a(u).addClass(A),t.onload=function(){return k(),a(f).fadeIn("slow",function(){return a(u).removeClass(A)}),this.loaded=!0,C(s)},t.src=t.buffer_src)},C=function(t){var e;if(1===t&&p<g.length-1)e=g[p+1];else{if(-1!==t&&p!==g.length-1||!(p>0))return;e=g[p-1]}if(e.onload=function(){return this.loaded=!0},""===e.src)return e.src=e.buffer_src},x=function(t,e){return a("body").append(s),a(window).bind("resize",k),E(t),a(u).hide().fadeIn(function(){return null!=I.detach_id&&(D=a(window).scrollTop(),a("#"+I.detach_id).css("display","none"),k()),r(),a(document).trigger("fullsizable:opened",e)})},d=function(){return null!=I.detach_id&&(a("#"+I.detach_id).css("display","block"),a(window).scrollTop(D)),a(u).fadeOut(function(){return s.remove()}),c(),a(u).removeClass(A),R(),a(window).unbind("resize",k)},y=function(){return g.length=0,a(I.selector).each(function(){var t;if(t=new Image,t.buffer_src=a(this).attr("href"),t.caption=a(this).data("caption"),t.id=a(this).attr("id"),t.captionTitle=a(this).data("captionTitle"),t.index=g.length,g.push(t),I.openOnClick&&!0===a(this).data("is-clickable"))return a(this).click(function(e){return e.preventDefault(),I.reloadOnOpen&&y(),x(t,this)})})},T=function(){switch(s.append(e["slideshow-footer"]({})),M=s.find("#fullsized_footer"),U=s.find("#fullsized_footer #fullsized_footer_toggle_wrapper"),B=s.find("#fullsized_footer #fullsized_footer_toggle_wrapper #fullsize_footer_toggle_text"),V=s.find("#fullsized_caption_wrapper .fullsized_caption_title"),z=s.find("#fullsized_caption_wrapper .fullsized_caption"),O=s.find("#fullsized_share_tools"),I.navigation&&(s.append('<a id="fullsized_go_prev" class="icon-wrapper" href="#prev"><div class="slideshow-icon gelicon--previous"></div></a><a  id="fullsized_go_next" class="icon-wrapper" href="#next"><div class="slideshow-icon gelicon--next"></div></a>'),a(document).on("click","#fullsized_go_prev",function(t){return t.preventDefault(),t.stopPropagation(),_()}),a(document).on("click","#fullsized_go_next",function(t){return t.preventDefault(),t.stopPropagation(),S()})),I.closeButton&&(s.append('<a id="fullsized_close" class=" slideshow-icon gelicon--no" href="#close"></a>'),a(document).on("click","#fullsized_close",function(t){return t.preventDefault(),t.stopPropagation(),d()})),I.fullscreenButton&&h()&&(s.append('<a id="fullsized_fullscreen" class="slideshow-icon gelicon--fullscreen"href="#fullscreen"></a>'),a(document).on("click","#fullsized_fullscreen",function(t){return t.preventDefault(),t.stopPropagation(),P()})),I.overlayToggle&&(U.show(),a(document).on("click","#fullsized_footer #fullsized_footer_toggle_wrapper",function(t){return t.preventDefault(),t.stopPropagation(),l()})),I.clickBehaviour){case"close":return a(document).on("click",u,d);case"next":return a(document).on("click",u,function(){return S(!0)})}},r=function(){return a(document).bind("keydown",b),a(document).bind("fullsizable:next",function(){return S(!0)}),a(document).bind("fullsizable:prev",function(){return _(!0)}),a(document).bind("fullsizable:close",d)},R=function(){return a(document).unbind("keydown",b),a(document).unbind("fullsizable:next"),a(document).unbind("fullsizable:prev"),a(document).unbind("fullsizable:close")},m=function(){var t;if(t=s.find("a"),!0===t.is(":visible"))return t.toggle(!1),s.bind("mousemove",v)},w=null,v=function(t){if(null===w&&(w=[t.clientX,t.clientY]),Math.round(Math.sqrt(Math.pow(w[1]-t.clientY,2)+Math.pow(w[0]-t.clientX,2)))>=10)return s.unbind("mousemove",v),w=null,L()},L=function(){return a("#fullsized_close, #fullsized_fullscreen").toggle(!0),a("#fullsized_go_prev").toggle(0!==p),a("#fullsized_go_next").toggle(p!==g.length-1)},a.fn.fullsizable=function(t){return I=a.extend({selector:this.selector,detach_id:null,navigation:!0,closeButton:!0,fullscreenButton:!0,openOnClick:!0,clickBehaviour:"close",preload:!0,reloadOnOpen:!1,overlayToggle:!0},t||{}),T(),I.preload&&y(),a(document).bind("fullsizable:reload",y),a(document).bind("fullsizable:open",function(t,e){var n,i,o,s;for(I.reloadOnOpen&&y(),s=[],i=0,o=g.length;i<o;i++)n=g[i],n.buffer_src===a(e).attr("href")?s.push(x(n,e)):s.push(void 0);return s}),this},h=function(){var t;return t=s.get(0),!!(t.requestFullScreen||t.webkitRequestFullScreen||t.mozRequestFullScreen)},c=function(){return P(!0)},l=function(){M.hasClass("open")?(M.removeClass("open"),B.text("Show image caption")):(M.addClass("open"),B.text("Hide image caption"))},P=function(t){var e;return e=s.get(0),e.requestFullScreen?document.fullScreen||t?document.exitFullScreen():e.requestFullScreen():e.webkitRequestFullScreen?document.webkitIsFullScreen||t?document.webkitCancelFullScreen():e.webkitRequestFullScreen():e.mozRequestFullScreen?document.mozFullScreen||t?document.mozCancelFullScreen():e.mozRequestFullScreen():void 0}}).call(this)}),
define("module/gallery",["lib/ecmaScript5","jquery","lib/jquery.slideshow","module/responsiveImages/responsiveImage","module/responsiveImages/formats/wwfeatures16x9","module/responsiveImages/formats/wwfeatures83x120","templates"],function(t,e,n,i,o,a,s){function r(t){this.images=t,this.init()}return r.prototype.getImages=function(){return this.images},r.prototype.init=function(){this.getImages().forEach(this.addImageToGallery.bind(this)),e(".fullsizeable ").fullsizable({clickBehaviour:"close",navigation:!0}),this.navigateToImage()},r.prototype.navigateToImage=function(t){var n=window.location.hash,i=e(n).offset();i&&window.scrollTo(i.left,i.top)},r.prototype.getPidFromUrl=function(t){var e=t.split("/");return e[e.length-1].split(".")[0]},r.prototype.addImageToGallery=function(t){image=e(t.image);var n,i,o;o=image.hasClass("portrait")?"portrait":"landscape",n=this.getFullsizeImage(image.attr("src"),o),i=!0===t.isClickable?s["fullsizeable-anchor"]({id:this.getPidFromUrl(n),url:n,caption:image.data("caption"),"caption-title":image.data("caption-title"),"is-clickable":!0}):s["fullsizeable-anchor"]({id:this.getPidFromUrl(n),url:n,caption:image.data("caption"),"caption-title":image.data("caption-title"),"is-clickable":!1}),this.getOverlay().insertAfter(image),image.wrap(i)},r.prototype.getOverlay=function(){return e(s.icon({"icon-type":"fullscreen"}))},r.prototype.getFullsizeImage=function(t,n){if(void 0!==t){var s,r,l,c=new Image;if(l="portrait"===n?new a(c):new o(c),c.src=t,s=new i(c,l.getFormatsForImage()),void 0!==(r=s.getFormatForWidth(e(window).width())))return r.src}return t},r}),define("module/listResizer",["lib/ecmaScript5","jquery","model/mediaQuery"],function(t,e,n){function i(t,n){this.module=t,this.resized=!1,this.primaryContent=e(n.primaryContentSelector),this.secondaryContent=e(n.secondaryContentSelector),this.averageHeight=280,this.currentItemsCount=0,this.defaultItemsCount=this.module.model.maxItems,this.offset=88,this.renderDelayed=!1}return i.prototype.init=function(){setTimeout(this.delayedRender.bind(this),2e3)},i.prototype.delayedRender=function(){this.renderDelayed=!0,this.layout()},i.prototype.resize=function(){this.updateModel()&&(this.module.prepareRender(),this.module.load())},i.prototype.updateModel=function(){var t=this.getRequiredItems();return t!=this.currentItemsCount&&(this.module.model.maxItems=t>0?t:0,this.currentItemsCount=this.module.model.maxItems,!0)},i.prototype.getRequiredItems=function(){return 4==n.getGroup()?(this.module.prepareRender(),Math.ceil(this.getRequiredHeight()/this.averageHeight)):this.defaultItemsCount},i.prototype.getRequiredHeight=function(){return this.primaryContent.height()-(this.secondaryContent.height()+this.offset)},i.prototype.layout=function(){this.renderDelayed&&this.resize()},i}),define("lib/jquery.elastislide",["lodash","jquery"],function(t,e){!function(e){var n,i,o=e.event;n=o.special.debouncedresize={setup:function(){e(this).on("resize",n.handler)},teardown:function(){e(this).off("resize",n.handler)},handler:function(t,e){var a=this,s=arguments,r=function(){t.type="debouncedresize",o.dispatch.apply(a,s)};i&&clearTimeout(i),e?r():i=setTimeout(r,n.threshold)},threshold:150};var a="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";e.fn.imagesLoaded=function(t){function n(){var n=e(d),i=e(u);s&&(u.length?s.reject(l,n,i):s.resolve(l)),e.isFunction(t)&&t.call(o,l,n,i)}function i(t,i){t.src!==a&&-1===e.inArray(t,c)&&(c.push(t),i?u.push(t):d.push(t),e.data(t,"imagesLoaded",{isBroken:i,src:t.src}),r&&s.notifyWith(e(t),[i,l,e(d),e(u)]),l.length===c.length&&(setTimeout(n),l.unbind(".imagesLoaded")))}var o=this,s=e.isFunction(e.Deferred)?e.Deferred():0,r=e.isFunction(s.notify),l=o.find("img").add(o.filter("img")),c=[],d=[],u=[];return e.isPlainObject(t)&&e.each(t,function(e,n){"callback"===e?t=n:s&&s[e](n)}),l.length?l.bind("load.imagesLoaded error.imagesLoaded",function(t){i(t.target,"error"===t.type)}).each(function(t,n){var o=n.src,s=e.data(n,"imagesLoaded");return s&&s.src===o?void i(n,s.isBroken):n.complete&&void 0!==n.naturalWidth?void i(n,0===n.naturalWidth||0===n.naturalHeight):void((n.readyState||n.complete)&&(n.src=a,n.src=o))}):n(),s?s.promise(o):o};var s=e(window);e.Elastislide=function(t,n){this.$el=e(n),this._init(t)},e.Elastislide.defaults={orientation:"horizontal",speed:500,easing:"ease-in-out",minItems:3,start:0,onClick:function(t,e,n){return!1},onReady:function(){return!1},onBeforeSlide:function(){return!1},onAfterSlide:function(){return!1}},e.Elastislide.prototype={_init:function(t){this.options=e.extend(!0,{},e.Elastislide.defaults,t);var n=this;if(this.transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},this.support=hasTheMustard(),this.current=this.options.start,this.isSliding=!1,this.$items=this.$el.children("li"),this.itemsCount=this.$items.length,0===this.itemsCount)return!1;this._validate(),this.$items.detach(),this.$el.empty(),this.$el.append(this.$items),this.$el.wrap('<div class="elastislide-wrapper elastislide-loading elastislide-'+this.options.orientation+'"></div>'),this.hasTransition=!1,this.hasTransitionTimeout=setTimeout(function(){n._addTransition()},100),this.$el.imagesLoaded(function(){n.$el.show(),n._layout(),n._configure(),n.hasTransition?(n._removeTransition(),n._slideToItem(n.current),n.$el.on(n.transEndEventName,function(){n.$el.off(n.transEndEventName),n._setWrapperSize(),n._addTransition(),n._initEvents()})):(clearTimeout(n.hasTransitionTimeout),n._setWrapperSize(),n._initEvents(),n._slideToItem(n.current),setTimeout(function(){n._addTransition()},25)),n.options.onReady()})},_validate:function(){this.options.speed<0&&(this.options.speed=500),this.options.minItems<1&&(this.options.minItems=1),(this.options.start<0||this.options.start>this.itemsCount-1)&&(this.options.start=0),"horizontal"!=this.options.orientation&&"vertical"!=this.options.orientation&&(this.options.orientation="horizontal")},_layout:function(){this.$el.wrap('<div class="elastislide-carousel"></div>'),this.$carousel=this.$el.parent(),this.$wrapper=this.$carousel.parent().removeClass("elastislide-loading");var t=this.$items.find("img:first");this.imgSize={width:t.outerWidth(!0),height:t.outerHeight(!0)},this._setItemsSize(),"horizontal"===this.options.orientation?this.$el.css("max-height",this.imgSize.height):this.$el.css("height",this.options.minItems*this.imgSize.height),this._addControls()},_addTransition:function(){this.support&&this.$el.css("transition","all "+this.options.speed+"ms "+this.options.easing),this.hasTransition=!0},_removeTransition:function(){this.support&&this.$el.css("transition","all 0s"),this.hasTransition=!1},_addControls:function(){var t=this;this.$navigation=e('<nav><span id="elastislide-prev" class="icon-wrapper gel-icon-wrapper icon-wrapper-previous"><div class="gelicon gelicon--previous"></div></span><span id="elastislide-next" class="icon-wrapper gel-icon-wrapper icon-wrapper-next"><div class="gelicon gelicon--next"></div></span></nav>').appendTo(this.$wrapper),this.$navPrev=this.$navigation.find("span#elastislide-prev").on("mousedown.elastislide",function(n){return e(n.target).closest("span.icon-wrapper").hasClass("disabled")||t._slide("prev"),!1}),this.$navNext=this.$navigation.find("span#elastislide-next").on("mousedown.elastislide",function(n){return e(n.target).closest("span.icon-wrapper").hasClass("disabled")||t._slide("next"),!1})},_setItemsSize:function(){var t="horizontal"===this.options.orientation?100*Math.floor(this.$carousel.width()/this.options.minItems)/this.$carousel.width():100;this.$items.css({width:t+"%","max-width":this.imgSize.width,"max-height":this.imgSize.height}),"vertical"===this.options.orientation&&this.$wrapper.css("max-width",this.imgSize.width+parseInt(this.$wrapper.css("padding-left"))+parseInt(this.$wrapper.css("padding-right")))},_setWrapperSize:function(){"vertical"===this.options.orientation&&this.$wrapper.css({height:this.options.minItems*this.imgSize.height+parseInt(this.$wrapper.css("padding-top"))+parseInt(this.$wrapper.css("padding-bottom"))})},_configure:function(){this.fitCount="horizontal"===this.options.orientation?this.$carousel.width()<this.options.minItems*this.imgSize.width?this.options.minItems:Math.floor(this.$carousel.width()/this.imgSize.width):this.$carousel.height()<this.options.minItems*this.imgSize.height?this.options.minItems:Math.floor(this.$carousel.height()/this.imgSize.height)},_initEvents:function(){var n=this;s.on("debouncedresize.elastislide",function(){n._setItemsSize(),n._configure(),n._slideToItem(n.current)}),t.forEach(this.transEndEventNames,function(t){this.$el.on(t,function(){n._onEndTransition()})},this),"horizontal"===this.options.orientation?this.$el.on({swipeleft:function(){n._slide("next")},swiperight:function(){n._slide("prev")}}):this.$el.on({swipeup:function(){n._slide("next")},swipedown:function(){n._slide("prev")}}),this.$el.on("click.elastislide","li",function(t){var i=e(this);n.options.onClick(i,i.index(),t)})},_destroy:function(e){t.forEach(this.transEndEventNames,function(t){this.$el.off(t).off("swipeleft swiperight swipeup swipedown .elastislide")},this),s.off(".elastislide"),this.$el.css({"max-height":"none",transition:"none"}).unwrap(this.$carousel).unwrap(this.$wrapper),this.$items.css({width:"auto","max-width":"none","max-height":"none"}),this.$navigation.remove(),this.$wrapper.remove(),e&&e.call()},_toggleControls:function(t,e){e?"next"===t?this.$navNext.removeClass("disabled"):this.$navPrev.removeClass("disabled"):"next"===t?this.$navNext.addClass("disabled"):this.$navPrev.addClass("disabled")},_slide:function(t,n){if(this.isSliding)return!1;this.options.onBeforeSlide(),this.isSliding=!0;var i=this,o=this.translation||0,a="horizontal"===this.options.orientation?this.$items.outerWidth(!0):this.$items.outerHeight(!0),s=this.itemsCount*a,r="horizontal"===this.options.orientation?this.$carousel.width():this.$carousel.height();if(void 0===n){var l=this.fitCount*a;if(l<0)return!1;if("next"===t&&s-(Math.abs(o)+l)<r)l=s-(Math.abs(o)+r),this._toggleControls("next",!1),this._toggleControls("prev",!0);else if("prev"===t&&Math.abs(o)-l<0)l=Math.abs(o),this._toggleControls("next",!0),this._toggleControls("prev",!1);else{var c="next"===t?Math.abs(o)+Math.abs(l):Math.abs(o)-Math.abs(l);c>0?this._toggleControls("prev",!0):this._toggleControls("prev",!1),c<s-r?this._toggleControls("next",!0):this._toggleControls("next",!1)}n="next"===t?o-l:o+l}else{var l=Math.abs(n);Math.max(s,r)-l<r&&(n=-(Math.max(s,r)-r)),l>0?this._toggleControls("prev",!0):this._toggleControls("prev",!1),Math.max(s,r)-r>l?this._toggleControls("next",!0):this._toggleControls("next",!1)}if(this.translation=n,o===n)return this._onEndTransition(),!1;if(this.support)"horizontal"===this.options.orientation?this.$el.css("transform","translateX("+n+"px)"):this.$el.css("transform","translateY("+n+"px)");else{e.fn.applyStyle=this.hasTransition?e.fn.animate:e.fn.css;var d="horizontal"===this.options.orientation?{left:n}:{top:n};this.$el.stop().applyStyle(d,e.extend(!0,[],{duration:this.options.speed,complete:function(){i._onEndTransition()}}))}this.hasTransition||this._onEndTransition()},_onEndTransition:function(){this.isSliding=!1,this.options.onAfterSlide()},_slideTo:function(t){var t=t||this.current,e=Math.abs(this.translation)||0,n="horizontal"===this.options.orientation?this.$items.outerWidth(!0):this.$items.outerHeight(!0),i=e+this.$carousel.width(),o=Math.abs(t*n);(o+n>i||o<e)&&this._slideToItem(t)},_slideToItem:function(t){var e="horizontal"===this.options.orientation?t*this.$items.outerWidth(!0):t*this.$items.outerHeight(!0);this._slide("",-e)},add:function(t){var e=this,n=this.current,i=this.$items.eq(this.current);this.$items=this.$el.children("li"),this.itemsCount=this.$items.length,this.current=i.index(),this._setItemsSize(),this._configure(),this._removeTransition(),n<this.current?this._slideToItem(this.current):this._slide("next",this.translation),setTimeout(function(){e._addTransition()},25),t&&t.call()},setCurrent:function(t,e){this.current=t,this._slideTo(),e&&e.call()},next:function(){self._slide("next")},previous:function(){self._slide("prev")},slideStart:function(){this._slideTo(0)},slideEnd:function(){this._slideTo(this.itemsCount-1)},destroy:function(t){this._destroy(t)}};var r=function(t){window.console&&window.console.error(t)};e.fn.elastislide=function(t){var n=e.data(this,"elastislide");if("string"==typeof t){var i=Array.prototype.slice.call(arguments,1);this.each(function(){return n?e.isFunction(n[t])&&"_"!==t.charAt(0)?void n[t].apply(n,i):void r("no such method '"+t+"' for elastislide self"):void r("cannot call methods on elastislide prior to initialization; attempted to call method '"+t+"'")})}else this.each(function(){n?n._init():n=e.data(this,"elastislide",new e.Elastislide(t,this))});return n}}(e)}),define("common/view/entity/habitat",["lodash","common/util/extends","common/view/entity/base"],function(t,e,n){function i(t){n.call(this,t)}return e(i,n,{init:function(){var e=this.get("Content");t.extend(e,this.get("Metadata",{})),t.each(e,function(e,n){t.isString(n)&&(n=n.substr(0,1).toLowerCase()+n.substr(1),this.set(n,e))},this),this.map("Urn","urn"),this.map("entity","entityType"),this.get("id")&&this.set("shortId",this.getShortId(this.get("id"))),this.parseHabitatData()},getShortId:function(e){var n=e.split("/");return t.last(n)},parseHabitatData:function(){},getArrayNestedAsset:function(e){var n=this.get(e,!1);if(t.isArray(n)&&n.length>0){var i=n[0];return(!t.isString(i)||"urn:"!==i.substr(0,4))&&n[0]}return!1}}),i}),define("common/view/entity/image",["lodash","common/util/extends","common/view/entity/habitat"],function(t,e,n){function i(t){n.call(this,t)}return e(i,n,{parseHabitatData:function(){this.map("templateUrl","url")}}),i}),define("common/view/entity/ibroadcast-gallery",["lodash","common/util/extends","common/view/entity/habitat"],function(t,e,n){function i(t){n.call(this,t)}return e(i,n,{parseHabitatData:function(){var e=t.last(this.get("urn","").split(":"));this.set("id",e),this.map("Image","images")}}),i}),define("common/helper/video-provider",[],function(){return{getMediator:function(t){switch(t){case"ibroadcast":return"mc";case"mps":return"journalism-flash-mobile"}return""}}}),define("common/view/entity/video",["lodash","common/util/extends","common/view/entity/habitat","common/helper/video-provider"],function(t,e,n,i){function o(t){n.call(this,t)}return e(o,n,{parseHabitatData:function(){this.map("Vpid","vpid"),this.map("Provider","provider"),this.set("mediator",i.getMediator(this.get("provider")))}}),o}),define("common/view/entity/story",["lodash","common/util/extends","common/view/entity/habitat","common/view/entity/image","common/view/entity/ibroadcast-gallery","common/view/entity/video","common/helper/icon-type-helper","common/helper/placeholder-images"],function(t,e,n,i,o,a,s,r){function l(t){n.call(this,t)}return e(l,n,{parseHabitatData:function(){this.map("bodyHtml","bodyMarkdown"),this.map("assetInfographic","infographic"),this.map("relatedStory","relatedStories"),this.map("relatedTag","relatedTags"),this.map("storyType","type"),this.map("tag","tags"),this.set("assetCustom",this.getAssetCustom()),this.set("mainIBroadcastImageGallery",this.getMainIBroadcastImageGallery()),this.set("inlineImageLibrary",this.getInlineImageLibrary()),this.set("inlineVideoLibrary",this.getInlineVideoLibrary()),this.set("leadImage",this.getArrayNestedAsset("assetImage")),this.set("collection",this.getArrayNestedAsset("collection")),this.set("author",this.getArrayNestedAsset("author")),!1===this.get("leadImage")&&this.set("leadImage",r.get("story")),this.set("indexImageOverride",this.getIndexImage());var e=this.get("assetVideoIb2"),n=this.get("assetVideoMps"),i=!1;e instanceof Array&&e.length>0?(i=e[0],i=t.extend({Provider:"ibroadcast"},i)):n instanceof Array&&n.length>0&&(i=n[0],i=t.extend({Provider:"mps"},i)),!1!==i&&this.set("leadVideo",i),this.set("iconType",s.getIconType(this.get("type")))},getIndexImage:function(){var t=this.getArrayNestedAsset("assetImagePromo");return!1!==t?t:this.get("leadImage")},getAssetCustom:function(){var t=this.get("assetCustom","");if(""!==t)return{embedCode:t}},getMainIBroadcastImageGallery:function(){var e=this.get("assetIbroadcast",!1);return!!(t.isArray(e)&&e.length>0&&t.has(e[0],"Image"))&&e[0]},getInlineImageLibrary:function(){var e=this.get("assetInline",!1);return!!(t.isArray(e)&&e.length>0)&&e},getInlineVideoLibrary:function(){var e=this.get("assetInline",!1);return!!(t.isArray(e)&&e.length>0&&t.has(e[1],"Video"))&&e[1].Video},getInlineImageData:function(t){var e,n=this.get("inlineImageLibrary");if(n)for(var o=0;o<n.length;o++)if(e=new i(n[o]),e.id===t)return n[o];return!1},getInlineGalleryData:function(t){var e,n=this.get("inlineImageLibrary");if(n)for(var i=0;i<n.length;i++)if(e=new o(n[i]),e.id===t)return n[i];return!1},getInlineVideoData:function(t){var e,n=this.get("inlineVideoLibrary");if(n)for(var i=0;i<n.length;i++)if(e=new a(n[i]),e.vpid===t)return n[i];return!1}}),l}),define("common/view/entity/collection",["lodash","common/util/extends","common/view/entity/habitat","common/helper/placeholder-images"],function(t,e,n,i){function o(t){n.call(this,t)}return e(o,n,{parseHabitatData:function(){this.map("collectionType","type"),this.set("image",this.getArrayNestedAsset("assetImage")),!1===this.get("image")&&this.set("image",i.get(this.get("type")))}}),o}),define("common/view/entity/destination",["lodash","common/util/extends","common/view/entity/habitat","common/helper/placeholder-images"],function(t,e,n,i){function o(t){n.call(this,t)}return e(o,n,{parseHabitatData:function(){this.set("image",this.getArrayNestedAsset("assetImage")),this.set("id",this.getPathId()),!1===this.get("image")&&this.set("image",i.get("destination"))},getPathId:function(){var e,n=this.get("id",""),i=this.get("path");return t.isString(n)&&i?(e=this.get("id","").split("/"),e.pop(),e.join("/")+"/"+i):n},getDestinationRelationshipArray:function(t){var e=[];return void 0===t&&(t=10),this.getDestinationContextItem(e,this,1,t),e},getDestinationContextItem:function(t,e,n,i){var a=new o(e),s=a.get("parent",!1);null!==s&&!1!==s&&s.length>0&&s[0]instanceof Object&&n<i&&this.getDestinationContextItem(t,s[0],n+1,i),t.push(a)}}),o}),define("common/view/entity/tag",["lodash","common/util/extends","common/view/entity/habitat","common/helper/placeholder-images"],function(t,e,n,i){function o(t){n.call(this,t)}return e(o,n,{parseHabitatData:function(){this.set("image",this.getArrayNestedAsset("assetImage")),!1===this.get("image")&&this.set("image",i.get("tag"))}}),o}),define("common/view/entity/author",["lodash","common/util/extends","common/view/entity/habitat"],function(t,e,n){function i(t){n.call(this,t)}return e(i,n,{parseHabitatData:function(){this.set("image",this.getArrayNestedAsset("image"))}}),i}),define("common/view/entity/meta-data",["lodash","common/util/extends","common/util/logger","common/view/entity/base","common/view/entity/author","common/view/entity-URL-router"],function(t,e,n,i,o,a){function s(t){i.call(this,t)}return e(s,i,{init:function(){var t=new o(this.get("author")),e=new i(this.get("config"));this.set("module",e.get("module")),this.set("domain",e.get("domain")),this.set("author",t.get("name")),this.set("uri",a.getURL(this.get("id"))),this.set("url","http://"+this.get("domain")+this.get("uri"))}}),s}),define("common/view/model/image",["lodash","common/util/extends","common/view/model/base","common/view/entity/image","templates","common/util/logger"],function(t,e,n,i,o,a){function s(t){n.call(this,t)}return e(s,n,{setEntity:function(t){this.entity=new i(t)},setViewData:function(){var e=this.getEntity(),n=t.clone(e),i="",o="{x}_{y}",a=this.getImageFormat();this.getEntity().get("url")&&t.has(a,"x")&&t.has(a,"y")&&(i=e.get("url"),o=o.replace("{x}",a.x),o=o.replace("{y}",a.y),i=i.replace("$recipe",o),n.url=i,n.width=a.x,n.height=a.y,n["is-portrait"]=a.isPortrait),n["use-image-tag"]=this.config.get("useImageTag",!1);var s=this.config.get("captionStyle","short");if(this.config.get("includeCaption",!0))switch(s){case"long":n.caption=this.replaceLongSynopsisLinks(),n["caption-title"]=e.get("title","");break;default:n.caption=e.get("synopsisMedium","")}n["anchor-title"]=e.get("synopsisShort",""),!0===this.config.get("showBrandedBorder",!1)&&(n["additional-wrapper-class"]="branded-border"),n.alt=this.getAltTag(),n["icon-type"]=e.get("iconType",""),n["replace-url"]=e.get("replaceUrl",""),this.viewData=n},getImageFormat:function(){var e=this.getEntity(),n=e.get("sourceWidth",2),i=e.get("sourceHeight",1),o=this.config.get("format"),a={x:"130",y:"73"},s={x:"90",y:"130"},r=!1;return t.has(o,"landscape")&&(a=o.landscape),t.has(o,"portrait")&&(s=o.portrait),t.has(o,"portraitPermitted")&&(r=o.portraitPermitted),n<i&&r?(s.isPortrait=!0,s):(a.isPortrait=!1,a)},replaceLongSynopsisLinks:function(){var e=this.getEntity(),n=e.get("synopsisLong",""),i=/\*?\*?\[.[^\(\)]+\]\(.[^\(\)]+\)\*?\*?/g,a=n.match(i);return t.each(a,function(t){var e=/\[.+\]/,i=/\(.+\)/,a=t.match(e),s=t.match(i);if(null!==a&&a.length>0&&null!==s&&s.length>0){a=a[0],s=s[0];var r=a.substr(1,a.length-2),l=s.substr(1,s.length-2),c=o["anchor-tag"]({link:l,text:r});n=n.replace(t,c)}},this),n},getAltTag:function(){var t=this.getEntity(),e=this.getImageCredit();return t.get("synopsisShort","")+" "+e},getImageCredit:function(){var t,e=this.getEntity(),n=e.get("synopsisLong",""),i=/\([^\(\)]+\)/g;if(null!==(t=n.match(i))&&t.length>0){var o=t[t.length-1];return o=o.slice(0,1)+"Credit: "+o.slice(1,o.length)}return""}}),s}),define("common/view/model/meta-data/meta-tags",["lodash","common/util/extends","common/view/model/base","common/view/model/image"],function(t,e,n,i){function o(t){n.call(this,t)}return e(o,n,{imageConfig:{format:{landscape:{x:"624",y:"351"}}},setViewData:function(){var e=this.getEntity(),n=t.clone(e),o=e.get("type"),a=e.get("image"),s=e.get("video");n.title=this.getTitle(e),this.config.get("shortOGTitle",!1)?n["og-title"]=e.get("title"):n["og-title"]=n.title,n.keywords=this.getKeywords(e.get("keywords")),o||(n.type="website"),a&&(n.image=new i(this.imageConfig).setSourceData(a)),s&&(n.type="video"),this.viewData=n},getTitle:function(e){var n=["BBC"];return t.has(this.config,"module")&&t.has(this.config.module,"name")&&n.push(this.config.module.name),e.get("title")&&n.push(e.get("title")),n.join(" - ")},getKeywords:function(e){var n=[];return t.each(e,function(t,e){"1"==t?n.push(e):n.push(t)}),n.join(", ")}}),o}),define("common/view/model/meta-data/digital-data-layer",["lodash","common/util/extends","common/util/logger","common/view/model/base","common/view/entity/base","common/view/entity/meta-data","common/view/entity-URL-router"],function(t,e,n,i,o,a,s){function r(t){i.call(this,t)}return e(r,i,{setViewData:function(){var t=this.getEntity(),e={environment:this.config.get("environment",""),pageInstanceID:this.getPageInstanceID(t),module:this.entity.get("module",{}),page:this.getPageData(t)};this.viewData=e},getPageInstanceID:function(e){var n=e.get("url");return t.isString(n)?n.replace("http://",""):""},getPageData:function(t){return{attributes:{country:"GB",language:"en-GB"},pageInfo:this.getPageInfo(t),keywords:t.get("keywords",{}),tags:this.getTags(t.get("keywords",{})),category:this.getCategories()}},getTags:function(e){var n=[];return t.each(e,function(t,e){"1"==t?n.push(e):n.push(t)}),n},getCategories:function(){var e=this.getEntity(),n=new o(e.get("keywords"),{}),i=t.clone(n);return i.column=n.get("column"),i.pageType=n.get("pageType",""),i.primaryCategory="",i.section=n.get("section"),t.has(this.config,"module")&&t.has(this.config.module,"domain")&&(i.primaryCategory=this.config.module.domain),i},getPageInfo:function(t){return{affiliate:t.get("affiliate"),author:t.get("author"),pageID:t.get("id",""),shortPageID:this.getShortPageID(t.get("id")),pageName:t.get("title",""),description:t.get("description",""),partner:t.get("partner"),publicationDate:t.get("publicationDate"),"business-unit":t.get("business-unit","BBC.com"),destinationURL:t.get("uri","")}},getShortPageID:function(t){if(!1!==t){var e,n=t.split("/");return 3==n.length?(e=n[2].split("-"),e.length>1?e.splice(1).join("-"):n[2]):t}return""}}),r}),define("common/view/model/meta-data/advertising",["lodash","common/util/extends","common/view/model/base","common/helper/advertising"],function(t,e,n,i){function o(t){n.call(this,t)}function a(e,n){var i=n.get("advertising",""),o=e.get("zoneId"),a="";return t.has(i,"topLevelZone")&&(a=i.topLevelZone),!o&&t.has(i,"defaultZoneId")&&(o=i.defaultZoneId),t.has(i,"prefix")&&(o=i.prefix+"_"+o),o&&(a+="/"+c(o)),a}function s(e){var n=[];return t.each(e,function(e,i){t.has(e,"id")&&!t.contains(n,e.id)&&n.push(e.id)}),n}function r(e){var n={};return t.has(e,"page")&&(e.page=i.replaceMappedEntityInString(e.page)),e=l(e),t.each(e,function(e,i){t.isString(e)&&(n[c(i)]=c(e)),t.isArray(e)&&(t.each(e,function(t,n){e[n]=c(t)}),n[c(i)]=e.join(","))}),n}function l(e){var n={column:"sectn",section:"subsect"};return t.each(e,function(i,o){t.has(n,o)&&(e[n[o]]=i)}),e}function c(e){return t.isString(e)&&(e=e.replace(/[\W_]+/g," "),e=e.replace(/[ ]+/g,"_")),e}return e(o,n,{setViewData:function(){var t=this.getEntity(),e=r(t.get("keywords",{})),n=this.getAdSlots(t.get("adSlots",this.getDefaultAdSlots()));data={keywords:e,adUnit:a(t,this.config),adSlots:n,adsToDisplay:s(n)},data.JSONString=JSON.stringify(data),this.viewData=data},getAdSlots:function(e){return t.each(e,function(t,n){e[n]=i.getAdSlot(n,t)},this),e},getDefaultAdSlots:function(){return{parallax:{},leaderboard:{},"mpu-1_2_3":{id:"mpu",groups:[1,2,3]},"mpu-4":{id:"mpu",groups:[4]},mpu_bottom:{},native_side:{},promo_feature_2:{},promo_feature_3:{},adsense_mpu:{},"sponsor-section-content":{id:"sponsor_section",groups:[1,2,3]},"sponsor-section-hero":{id:"sponsor_section",groups:[4]}}}}),o}),define("common/view/model/meta-data/bespoke-data",["lodash","common/util/extends","common/view/model/base"],function(t,e,n){function i(t){n.call(this,t)}return e(i,n,{setViewData:function(){var t={url:this.getBespokeDataUrl()};this.viewData=t},getBespokeDataUrl:function(){var e,n=this.getEntity(),i=n.get("uri"),o=!1;if(t.has(this.config,"bbc")&&t.has(this.config.bbc,"bespoke")&&t.has(this.config.bbc.bespoke,"url")&&(o=this.config.bbc.bespoke.url),!1!==i&&!1!==o){switch(this.config.get("environment","")){case"live":case"staging":e="live";break;default:e="test"}var a=i.split("/");return a.splice(2,0,"config",e),o+a.join("/")+"/config.json"}return""}}),i}),define("common/view/model/meta-data/chartbeat",["lodash","common/util/logger","common/util/extends","common/view/model/base"],function(t,e,n,i){function o(t){i.call(this,t)}return n(o,i,{setViewData:function(){var e=this.getEntity(),n={author:e.get("author"),sections:this.getSections(e.get("keywords",{}))};t.has(this.config,"chartbeat")&&t.has(this.config.chartbeat,"uid")&&t.has(this.config.chartbeat,"domain")&&(n.uid=this.config.chartbeat.uid,n.domain=this.config.chartbeat.domain),this.viewData=n},getSections:function(e){var n=[];return t.has(e,"column")&&n.push(e.column),t.isArray(e.destination)&&(n=n.concat(e.destination)),t.isArray(e.tags)&&(n=n.concat(e.tags)),n.join(",")}}),o}),define("common/view/model/meta-data/document",["lodash","common/util/extends","common/view/model/base","common/view/entity/meta-data","common/view/model/meta-data/meta-tags","common/view/model/meta-data/digital-data-layer","common/view/model/meta-data/advertising","common/view/model/meta-data/bespoke-data","common/view/model/meta-data/chartbeat","common/view/entity-URL-router"],function(t,e,n,i,o,a,s,r,l,c){function d(t){n.call(this,t)}return e(d,n,{setEntity:function(e){var n=t.clone(e,!0);n.config=this.config,this.entity=new i(n)},setViewData:function(){var t={};t["meta-tags"]=new o(this.config).setSourceData(this.entity),t["digital-data-layer"]=JSON.stringify(new a(this.config).setSourceData(this.entity)),t.chartbeat=new l(this.config).setSourceData(this.entity);var e=this.entity.get("advertising",{});e.keywords=this.entity.get("keywords"),t.advertising=new s(this.config).setSourceData(e),t["bespoke-data"]=new r(this.config).setSourceData(this.entity),this.viewData=t}}),d}),define("common/view/model/meta-data/story",["lodash","common/util/extends","common/util/logger","common/view/model/base","common/view/entity/story","common/view/entity/collection","common/view/entity/destination","common/view/entity/tag","common/view/model/meta-data/document","common/helper/advertising"],function(t,e,n,i,o,a,s,r,l,c){function d(t){i.call(this,t)}return e(d,i,{setEntity:function(t){this.entity=new o(t)},setViewData:function(){var e=this.getEntity(),n={title:e.get("headlineShort"),id:e.get("id"),image:e.get("leadImage"),author:e.get("author"),publicationDate:e.get("creationDateTime"),description:e.get("summaryShort"),keywords:this.getKeywords(e),advertising:{zoneId:this.getZoneId(e.get("collection"),e.get("location"),e.get("tags"))}},i=new l(t.extend({shortOGTitle:!0},this.config));this.viewData=i.setSourceData(n)},getZoneId:function(e,n,i){var o,l="";return e&&(o=new a(e),l+=c.generateZoneForHabitatEntity(o.get("type"),o)),t.isArray(n)&&n.length>0?(e&&(l+="-"),t.each(n,function(t,e){o=new s(t),l+=0===e?c.generateZoneForHabitatEntity("destination",o):c.generateZoneForHabitatEntity(void 0,o)})):t.isArray(i)&&i.length>0&&(e&&(l+="-"),o=new r(t.first(i)),l+=c.generateZoneForHabitatEntity("tag",o)),l=c.generateContentZone(l)},getMetaType:function(){},getKeywords:function(e){var n,i,o={pageType:"story",STORY:"1",asset_type:e.get("type",""),media:e.get("type",""),tags:[],destination:[]},l=new a(e.get("collection")),c=l.get("type"),d=l.get("shortId");return!1!==c&&!1!==d&&(o[c]=d),t.each(e.get("tags",[]),function(t){n=new r(t),i=n.get("shortId"),o[i]="1",o.tags.push(i)}),t.each(e.get("location",[]),function(t){n=new s(t),i=n.get("shortId"),o[i]="1",o.destination.push(i)}),o}}),d}),define("module/ibroadcast-image-gallery/ibroadcast-image-gallery",["lodash","lib/ecmaScript5","jquery","lib/jquery.elastislide","util/logger","templates","module/loader","module/responsiveImages/main","module/responsiveImages/responsiveImage","module/responsiveImages/formats/wwfeatures16x9","module/responsiveImages/formats/wwfeatures83x120","module/gallery","model/exposed-data","common/config","common/view/model/meta-data/story","model/mediaQuery"],function(t,e,n,i,o,a,s,r,l,c,d,u,p,h,m,f){var g=function(t,e){this.setSelectors(t),this.setupConfig(e),this.setupModuleState(),this.setupThumbnails(),this.setupNavListeners(),this.setupAds(),this.setupResponsiveImages()};return t.extend(g.prototype,{setSelectors:function(t){this.ibGallerySelector=n(t),this.thumbnailsContainerSelector=this.ibGallerySelector.find("#ib-gallery-thumbnail-carousel"),this.selectedImageContainerSelector=this.ibGallerySelector.find("#slide-wrapper"),this.selectedImageCaptionContainerSelector=this.ibGallerySelector.find("#selected-image-caption-wrapper"),this.adOverlaySelector=this.ibGallerySelector.find("div.ad-slot-overlay"),this.items=this.thumbnailsContainerSelector.find("li")},setupModuleState:function(){this.current=0,this.itemsCount=this.items.length,this.isAnimating=!0,this.isLoaded=!1,this.showAds=!1,this.isAdvertising=!1},setupConfig:function(e){window.innerWidth>=600?t.has(e,"minItems")&&t.isNumber(e.minItems)?this.minItems=e.minItems:this.minItems=6:this.minItems=3,t.has(e,"adFrequency")&&t.isNumber(e.adFrequency)?this.adFrequency=e.adFrequency:this.adFrequency=3,t.has(e,"onLoadCallback")&&t.isFunction(e.onLoadCallback)&&(this.onLoadCallback=e.onLoadCallback),t.has(e,"onUpdateCallback")&&t.isFunction(e.onUpdateCallback)&&(this.onUpdateCallback=e.onUpdateCallback)},setupThumbnails:function(){var e=this
;this.thumbnailsContainerSelector.length>0&&this.itemsCount>1&&(this.carousel=this.thumbnailsContainerSelector.show().elastislide({minItems:this.minItems,current:e.current,onClick:function(t,n,i){return i.preventDefault(),e.isAdvertising?void e.updateAdvertisingState():!e.isAnimating&&(e.isAnimating=!0,e.current=t.index(),e.showImage(t),void e.updateAdvertisingState())},onReady:function(){e.showImage(e.items.eq(e.current)),e.isLoaded=!0,t.isFunction(e.onLoadCallback)&&e.onLoadCallback()}}))},setupNavListeners:function(){var t=this,e=this.selectedImageContainerSelector.find("#selected-image-nav-prev"),i=this.selectedImageContainerSelector.find("#selected-image-nav-next");this.itemsCount>1&&(e.show(),i.show(),e.click(function(e){e.preventDefault(),t.navigate("prev")}),i.click(function(e){e.preventDefault(),t.navigate("next")}),n(document).keydown(function(e){switch(e.which){case 37:t.navigate("prev");break;case 39:t.navigate("next");break;default:return}e.preventDefault()}))},setupResponsiveImages:function(){this.responsiveImages=new r},navigate:function(t){return this.isAdvertising?void this.updateAdvertisingState():!this.isAnimating&&(this.isAnimating=!0,"prev"===t?this.current-1<0?this.current=this.itemsCount-1:this.current--:"next"===t&&(this.current+1>=this.itemsCount?this.current=0:this.current++),this.showImage(this.items.eq(this.current)),void this.updateAdvertisingState())},showImage:function(t){o.get().debug("FeaturedImageGalleryModule:showImage:item",t),this.items.removeClass("selected"),t.addClass("selected"),this.carousel.setCurrent(this.current);var e=this,i=t.find("img"),r=i.data("src-recipe"),l=i.data("caption-title"),c=i.data("is-portrait"),d=c?"portrait":"landscape",u=i.data("caption"),p=new s(e.selectedImageContainerSelector.get(0),"#000");n("<img/>").load(function(){var t=e.getFullsizeImage(r,d),s=n(a["ibroadcast-image-gallery-selected-image"]({id:e.getPidFromUrl(t),"fullsize-url":t,caption:u,"caption-title":l,"is-clickable":!0})),c=n(a["ibroadcast-image-gallery-selected-image-tag"]({"image-src":r,"alt-text":i.attr("alt"),"additional-class":d,"is-watermarked":!0})),h=a["ibroadcast-image-gallery-selected-image-caption"]({"caption-title":l,caption:u}),m=e.selectedImageContainerSelector.find("div.selected-image-wrapper"),g=n(a.icon({"icon-type":"fullscreen",id:"selected-image-fullscreen"}));m.empty(),f.isMobileDevice()?m.append(c):(s.appendTo(m).append(c).click(function(t){t.preventDefault(),n(document).trigger("fullsizable:open",this)}),g.insertAfter(s)),e.selectedImageCaptionContainerSelector.show().empty().append(h),o.get().debug("Wrapper:",s),p.stop(),e.respondSelectedImage(),e.triggerUpdate(),e.isAnimating=!1}).attr("src",r)},respondSelectedImage:function(){this.responsiveImages.add(this.selectedImageContainerSelector.find("img.responsive.portrait"),d),this.responsiveImages.add(this.selectedImageContainerSelector.find("img.responsive.landscape"),c),this.responsiveImages.respond()},triggerUpdate:function(){!0===this.isLoaded&&t.isFunction(this.onUpdateCallback)&&this.onUpdateCallback()},setupAds:function(){var t=this;t.adOverlaySelector.length>0&&(this.showAds=!0,this.actionsUntilAd=0,this.adOverlaySelector.click(function(){t.updateAdvertisingState()}),this.adOverlaySelector.show(),this.isAdvertising=!0)},updateAdvertisingState:function(){!0===this.showAds&&(!0===this.isAdvertising?(this.removeAd(),this.actionsUntilAd=this.adFrequency+1,this.isAdvertising=!1):--this.actionsUntilAd<=0&&(this.displayAd(),this.isAdvertising=!0))},displayAd:function(){this.adOverlaySelector.show(),window.bbcdotcom&&bbcdotcom.refreshAd&&bbcdotcom.refreshAd("mpu","300x250")},removeAd:function(){o.get().debug("IBroadcastImageGallery:removeAd"),this.adOverlaySelector.hide()},getPidFromUrl:function(t){var e=t.split("/");return e[e.length-1].split(".")[0]},getFullsizeImage:function(t,e){if(void 0!==t){var i,o,a,s=new Image;if(a="portrait"===e?new d(s):new c(s),s.src=t,i=new l(s,a.getFormatsForImage()),void 0!==(o=i.getFormatForWidth(n(window).width())))return o.src}return t}}),g}),define("module/ibroadcast-image-gallery/main",["lodash","lib/ecmaScript5","jquery","module/ibroadcast-image-gallery/ibroadcast-image-gallery"],function(t,e,n,i){return new function(){this._arrGalleries=[],this.add=function(t,e){n(t).each(this.addGallery.bind(this,e))},this.addGallery=function(t,e,o){if(!this.isAdded(o)){var a=new i(o,t);this.addToGalleryArray(a),n(o).data("galleryIsAdded",!0)}},this.addToGalleryArray=function(t){this._arrGalleries.push(t)},this.isAdded=function(t){return!!n(t).data("galleryIsAdded")},this.getGalleries=function(){return this._arrGalleries},this.triggerUpdate=function(){t.each(this._arrGalleries,function(t,e){t.triggerUpdate()})}}}),define("common/model/story/story-by-destination",["lodash","common/util/extends","common/model/story/story-by"],function(t,e,n){function i(t){n.call(this,t)}return e(i,n,{arrRequiredConfig:["id"],URLScheme:"/search/story-by-destination/{moduleId}/{id}"}),i}),define("common/entity/habitat/mixed/list/promo",["lodash","common/util/extends","common/util/logger","common/entity/habitat/paged-list","common/entity/habitat/mixed/promo"],function(t,e,n,i,o){function a(t,e){i.apply(this,arguments)}return e(a,i,{entityFactoryDependencies:[],createEntity:function(t){return new o(t)}}),a}),define("common/entity/habitat/destination/promo",["lodash","common/util/extends","common/entity/habitat/destination/link"],function(t,e,n){function i(t){n.call(this,t)}return e(i,n,{init:function(t){n.prototype.init.apply(this,arguments),this.set("destinationRelationships",this.generateDestinationRelationshipArray())},getDestinationRelationships:function(){return this.destinationRelationships},generateDestinationRelationshipArray:function(t){var e=[];return void 0===t&&(t=10),this.getDestinationContextItem(e,this,1,t),e},getDestinationContextItem:function(t,e,i,o){var a=new n(e),s=a.get("parent",!1);null!==s&&!1!==s&&s.length>0&&s[0]instanceof Object&&i<o&&this.getDestinationContextItem(t,s[0],i+1,o),t.push(a)}}),i}),define("common/entity/habitat/author",["lodash","common/util/extends","common/entity/habitat/image/base","common/entity/habitat/base"],function(t,e,n,i){function o(e){var n={id:0,name:"",bio:"",avatar:!1};i.call(this,t.extend(n,e))}return e(o,i,{init:function(t){i.prototype.init.call(this,t),this.map("description","bio"),this.initImage()},initImage:function(){var t=this.getArrayNestedAsset("assetImage");t&&this.set("avatar",new n(t))},getId:function(){return this.id},getName:function(){return this.name},getBio:function(){return this.bio},getAvatar:function(){return this.avatar}}),o}),define("common/entity/habitat/video",["lodash","common/util/extends","common/entity/base","common/entity/habitat/image/base","common/helper/video-provider"],function(t,e,n,i,o){function a(e,i){var o={id:!1,Title:"",Vpid:!1,image:!1,Thumbnail:!1,Provider:!1,mediator:!1};n.call(this,t.extend(o,e),i)}return e(a,n,{init:function(){n.prototype.init.apply(this,arguments),this.setId(),this.set("mediator",o.getMediator(this.getProvider())),this.initImage(this.getArrayNestedAsset("Thumbnail"))},setId:function(){if(t.has(this,"Metadata")&&t.has(this.Metadata,"Id")&&this.Metadata.Id.length>0)this.id=this.Metadata.Id;else if(t.has(this,"Urn")){var e=this.Urn.split(":");e.length>0&&(this.id=e[e.length-1])}},initImage:function(t){if(t){var e=new i(t);this.setImage(e)}else this.setImage(!1)},getId:function(){return this.id},getTitle:function(){return this.Title},getVpid:function(){return this.Vpid},getImage:function(){return this.image},setImage:function(t){this.image=t},getThumbnail:function(){return this.Thumbnail},setProvider:function(t){this.Provider=t,this.set("mediator",o.getMediator(t))},getProvider:function(){return this.Provider},getMediator:function(){return this.mediator},getArrayNestedAsset:function(e){var n=this.get(e,!1);if(t.isArray(n)&&n.length>0){var i=n[0];return(!t.isString(i)||"urn:"!==i.substr(0,4))&&n[0]}return!1}}),a}),define("common/entity/habitat/ib-gallery",["lodash","common/util/extends","common/util/logger","common/entity/habitat/base","common/entity/habitat/image/base"],function(t,e,n,i,o){function a(e){var n={id:0,images:[]};i.call(this,t.extend(n,e))}return e(a,i,{init:function(e){i.prototype.init.apply(this,arguments);var n=t.last(this.get("urn","").split(":"));this.set("id",n),this.initListItems()},initListItems:function(){var e,i=this.get("Image",[]);this.listItems=[],n.get().debug("IBGalleryEntity::initListItems::Image",this),t.each(i,function(t){e=new o(t),this.listItems.push(e)},this)},getId:function(){return this.id},getTitle:function(){return!1},getListItems:function(){return this.listItems}}),a}),define("common/helper/habitat/entity-type-resolver",["lodash"],function(t){return function(e){var n;return!!(t.has(e,"Urn")&&(n=e.Urn.split(":"),n.length>4))&&n[3]}}),define("common/entity/habitat/callout-box",["lodash","common/util/extends","common/util/logger","common/entity/base"],function(t,e,n,i){function o(e){var n={title:"",subtitle:"",body:"",position:""};i.call(this,t.extend(n,e))}return e(o,i,{init:function(t,e){i.prototype.init.call(this,t),this.map("CalloutTitle","title"),this.map("CalloutSubtitle","subtitle"),this.map("CalloutBody","body"),this.map("CalloutPosition","position"),this.body=this.body.replace(/<p><\/p>|<p>&nbsp;<\/p>/gi,"")},getTitle:function(){return this.title},getSubtitle:function(){return this.subtitle},getBody:function(){return this.body},getPosition:function(){return this.position}}),o}),define("common/entity/habitat/horizontal/banner",["lodash","common/util/extends","common/entity/habitat/base"],function(t,e,n){function i(e){var i={title:"",URL:!1,image:!1,brandId:!1};n.call(this,t.extend(i,e))}return e(i,n,{init:function(t){n.prototype.init.call(this,t),this.map("headline","title"),this.map("horizontalUrl","URL"),this.getId()&&this.set("brandId",this.getId())},getURL:function(){return this.URL},getTitle:function(){return this.title},getImage:function(){return this.image},getBrandId:function(){return this.brandId}}),i}),define("common/entity/habitat/horizontal/partner",["lodash","common/util/extends","common/entity/habitat/link","common/entity/habitat/image/base","common/entity/habitat/video","common/util/logger"],function(t,e,n,i,o,a){function s(e){var i={partnerLogo:!1,description:"",video:!1,type:!1,partnerEnabled:!1};n.call(this,t.extend(i,e))}return e(s,n,{init:function(t){n.prototype.init.call(this,t),this.map("partnerHeadline","title"),this.map("partnerUrl","URL"),this.map("partnerBody","description"),this.map("partnerAssetSelect","type"),this.initImages(),this.initVideo()},initImages:function(){var t=this.getArrayNestedAsset("partnerBackground"),e=this.getArrayNestedAsset("partnerImage");!1!==t&&this.initImage("image",t),!1!==e&&this.initImage("partnerLogo",e)},initVideo:function(){var t=this.getArrayNestedAsset("partnerVideo"),e=this.getArrayNestedAsset("partnerVideoImage");!1!==t&&(0===t.Thumbnail.length&&!1!==e&&t.Thumbnail.push(e),this.set("video",new o(t)))},getPartnerLogo:function(){return this.partnerLogo},getDescription:function(){return this.description},getVideo:function(){return this.video},getType:function(){return this.type},isEnabled:function(){return this.partnerEnabled}}),s}),define("common/entity/habitat/horizontal/horizontal",["lodash","common/util/extends","common/entity/habitat/base","common/entity/habitat/horizontal/banner","common/entity/habitat/horizontal/partner"],function(t,e,n,i,o){function a(e){var i={enabled:!1,URL:!1,name:"",headline:"",banner:!1,partner:!1};n.call(this,t.extend(i,e))}return e(a,n,{init:function(t){n.prototype.init.call(this,t),this.map("horizontalUrl","URL"),this.map("horizontalEnabled","enabled"),this.setupBanner(this),this.setupPartner(this)},setupBanner:function(t){var e=new i(t);e&&this.setBanner(e)},setupPartner:function(t){var e=new o(t);e&&this.setPartner(e)},setBanner:function(t){this.banner=t},setPartner:function(t){this.partner=t},isEnabled:function(){return this.enabled},getURL:function(){return this.URL},getName:function(){return this.name},getHeadline:function(){return this.headline},getBanner:function(){return this.banner},getPartner:function(){return this.partner}}),a}),define("common/_modules/super-section-index/entities/banner",["lodash","common/util/extends","common/entity/habitat/base","common/view/entity-URL-router"],function(t,e,n,i){function o(e){var i={id:!1,title:!1,URL:!1,image:!1,brandId:!1,adZoneId:!1,theme:!1,primaryVertical:!1};n.call(this,t.extend(i,e))}return e(o,n,{init:function(e){n.prototype.init.call(this,e),t.has(this,"general.Name")&&(this.title=this.general.Name),!1!==this.id&&(this.brandId=this.id,this.URL=i.getURL(this.id)),t.has(this,"general.AdTargetingId")&&(this.adZoneId=this.general.AdTargetingId),t.has(this,"general.Theme")&&(this.theme=this.general.Theme),t.has(this,"general.PrimaryVertical")&&(this.primaryVertical=this.general.PrimaryVertical)},getTitle:function(){return this.title},getURL:function(){return this.URL},getImage:function(){return this.image},getBrandId:function(){return this.brandId},getAdZoneId:function(){return this.adZoneId},getTheme:function(){return this.theme},getPrimaryVertical:function(){return this.primaryVertical}}),o}),define("common/entity/habitat/story/article",["lodash","common/util/extends","common/util/logger","common/entity/factory","common/helper/entity/list","common/entity/habitat/base","common/entity/habitat/story/promo","common/entity/habitat/collection/promo","common/entity/habitat/tag/promo","common/entity/habitat/destination/promo","common/entity/habitat/author","common/entity/habitat/partner","common/entity/list/entity","common/entity/habitat/mixed/promo","common/entity/habitat/image/base","common/entity/vanilla/image","common/entity/habitat/video","common/entity/habitat/ib-gallery","common/helper/icon-type-helper","common/helper/habitat/entity-type-resolver","common/helper/advertising","common/entity/habitat/callout-box","common/entity/habitat/horizontal/horizontal","common/_modules/super-section-index/entities/banner","common/helper/geo-location"],function(t,e,n,i,o,a,s,r,l,c,d,u,p,h,m,f,g,b,y,v,w,S,x,I,C){function T(e){var n={intro:"",body:"",leadVideo:!1,displayDate:!1,publicationDate:!1,relatedArticles:!1,galleryImages:!1,customEmbed:!1,infographic:!1,promoModule:!1,hasLeadAsset:!1,relatedTags:!1,calloutBox:!1,calloutTitle:!1,horizontal:!1,superSection:!1,advertsDisabled:!1,theme:!1};s.call(this,t.extend(n,e))}return e(T,s,{init:function(t){s.prototype.init.call(this,t),this.map("bodyHtml","body"),this.map("assetInfographic","infographic"),this.map("relatedStory","relatedStories"),this.map("relatedTag","relatedTags"),this.map("creationDateTime","publicationDate"),this.map("summaryLong","summary"),this.map("headlineLong","title"),this.map("disableAdverts","advertsDisabled"),this.formatIntro(this.get("intro","")),this.initCustomEmbed(),this.indexInlineEntities(),this.initGalleryImages(),this.initRelatedArticles(),this.initAuthor(this.getArrayNestedAsset("author")),this.initPartner(this.getArrayNestedAsset("partner")),this.initVideo(),this.initSuperSectionEntity(this.getArrayNestedAsset("superSection")),this.initHorizontalEntity(this.getArrayNestedAsset("horizontal")),this.initKeywords(this.get("collection"),this.get("location"),this.get("tags")),this.initAdZoneId(this.get("collection"),this.get("location"),this.get("tags")),this.initFullURL(),this.initHasLeadAssetModule(),this.initAdSLots(),this.initTheme(),this.initCalloutBox({CalloutTitle:this.calloutTitle,CalloutSubtitle:this.calloutSubtitle,CalloutBody:this.calloutBody,CalloutPosition:this.calloutPosition})},initCalloutBox:function(e){t.isUndefined(this.calloutTitle)||!1===this.calloutTitle||0===this.calloutTitle.length||this.set("calloutBox",new S(e))},initAdSLots:function(){var t;this.areAdvertsDisabled()?t=[]:(t=w.getDefaultAdSlots(this.hasLeadAssetModule()),this.isSuperSectionLayout()&&(t["sponsor-section-hero"].groups=[1,2,3,4])),this.set("adSlots",t)},initTheme:function(){this.isSuperSectionLayout()&&(this.theme=this.getSupersection().getTheme())},getTheme:function(){return this.theme},initHasLeadAssetModule:function(){var t=!1;this.getVideo()?t=!0:"image"==this.getType()&&this.getGalleryImages()&&(t=!0),this.set("hasLeadAsset",t)},getLeadImage:function(){return this.getArrayNestedAsset("assetImage")},initCustomEmbed:function(){var t=this.get("assetCustom");t&&this.set("customEmbed",{embedCode:t})},initKeywords:function(e,n,i){var o,a,s,d={pageType:this.getEntityType(),STORY:"1",asset_type:this.getEntityType(),media:this.getType(),tags:[],destination:[]},u=this.getSuperSectionAdZoneId();return e&&(o=new r(e),d[o.getType()]=o.getId(!0)),t.each(n,function(t,e){s=new c(t),d.destination.push(s.getId(!0))}),t.each(i,function(t,e){a=new l(t),d.tags.push(a.getId(!0))}),u&&(d.column="super_"+u,d.wwsupersection=u),this.set("keywords",d)},initAdZoneId:function(e,n,i){var o,a="";return e&&(o=new r(e),a+=w.generateZoneForHabitatEntity(o.get("type"),o)),t.isArray(n)&&n.length>0?(e&&(a+="-"),t.each(n,function(t,e){o=new c(t),a+=0===e?w.generateZoneForHabitatEntity("destination",o):w.generateZoneForHabitatEntity(void 0,o)})):t.isArray(i)&&i.length>0&&(e&&(a+="-"),o=new l(t.first(i)),a+=w.generateZoneForHabitatEntity("tag",o)),a=w.generateContentZone(a),this.set("adZoneId",a)},initGalleryImages:function(){var e=[],n=this.get("assetIbroadcast",[]),i=this.get("assetImage",[]),o=!1;n instanceof Array&&n.length>0&&t.has(n[0],"Image")?(e=e.concat(n[0].Image),o=new b(n[0])):i instanceof Array&&i.length>1&&(e=e.concat(i),o=new b({Image:i})),o&&this.set("galleryImages",o)},initRelatedArticles:function(){this.set("relatedArticles",o.getList(this.get("relatedStories"),h))},initVideo:function(){var e=this.get("assetVideoIb2"),n=this.get("assetVideoMps"),i=!1;e instanceof Array&&e.length>0?(i=e[0],i=t.extend({Provider:"ibroadcast"},i)):n instanceof Array&&n.length>0&&(i=n[0],i=t.extend({Provider:"mps"},i)),!1!==i&&this.set("leadVideo",new g(i))},initAuthor:function(t){if(t){var e=new d(t);this.set("author",e)}else this.set("author",!1)},initPartner:function(t){if(t){var e=new u(t);this.set("partner",e)}else this.set("partner",!1)},initSuperSectionEntity:function(t){if(t){var e=new I(t);this.set("superSection",e)}else this.set("superSection",!1)},initHorizontalEntity:function(t){if(t){var e=new x(t);this.set("horizontal",e)}else this.set("horizontal",!1)},isHorizontalBannerAvailable:function(){var t=this.getHorizontal();return!C.isUK()&&!1!==t&&!0===t.isEnabled()},isSuperSectionBannerAvailable:function(){return!1!==this.getSupersection()},getSuperSectionAdZoneId:function(){return!(this.isHorizontalBannerAvailable()||!this.isSuperSectionBannerAvailable())&&this.getSupersection().getAdZoneId()},formatIntro:function(t){this.intro=t.replace(/\r?\n/g,"<br />")},getSupersection:function(){return this.superSection},getHorizontal:function(){return this.horizontal},getVideo:function(e){return t.isUndefined(e)?this.leadVideo:this.getIndexedAsset("Video",e)},getImage:function(e){return t.isUndefined(e)?this.image:this.getIndexedAsset("Image",e)},getIndexedAssets:function(t){return this["indexed"+t]},getIndexedAsset:function(e,n){return!!t.has(this.getIndexedAssets(e),n)&&this.getIndexedAssets(e)[n]},indexInlineEntities:function(){var e,n={},i={},o={},a=this.get("assetInline",!1);t.isArray(a)&&a.length>0&&(t.each(a,function(t){switch(v(t)){case"videopid":e=new g(t),i[e.getId()]=e;break;case"gallery":e=new b(t),o[e.getId()]=e;break;default:e=new m(t),n[e.getId()]=e}},this),this.set("indexedVideo",i),this.set("indexedImage",n),this.set("indexedGallery",o))},getPublicationDate:function(){return this.publicationDate},getRelatedArticles:function(){return this.relatedArticles},getRelatedTags:function(){return this.relatedTags},getLocation:function(){return this.location},getGalleryImages:function(e){return t.isUndefined(e)?this.galleryImages:this.getIndexedAsset("Gallery",e)},getDisplayDate:function(){return this.displayDate},getIntro:function(){return this.intro},getBody:function(){return this.body},getSummary:function(){return this.summary},getCustomEmbed:function(){return this.customEmbed},getInfographic:function(){return this.infographic},getPromoModule:function(){return this.promoModule},hasLeadAssetModule:function(){return this.hasLeadAsset},getCalloutBox:function(){return this.calloutBox},areAdvertsDisabled:function(){return this.advertsDisabled},isSuperSectionLayout:function(){var t=["story","image","audio"];return this.isSuperSectionStory()&&-1!==t.indexOf(this.getType())&&!this.hasLeadAssetModule()&&!this.hasEmbeddedContent()},isBroadcastGallery:function(){return!!this.galleryImages},isSuperSectionStory:function(){return!!this.getSuperSection()},getSuperSection:function(){return this.superSection},hasEmbeddedContent:function(){return!1!==this.getInfographic()||!1!==this.getCustomEmbed()}}),T}),define("component/related-stories",["lodash","module/MVVM-component","common/config","common/model/remote","common/model/story/story-by-destination","common/model/story/story-by-tag","common/view/model-v2/list/promo-group/base","common/entity/habitat/mixed/list/promo","common/entity/habitat/story/article","common/entity/habitat/tag/promo","common/entity/habitat/destination/promo","templates"],function(t,e,n,i,o,a,s,r,l,c,d,u){function p(e){var s=!1,r=e.getRelatedArticles(),l=e.getRelatedTags(),u=e.getLocation();if(r&&e.get("relatedStories")instanceof Array&&e.get("relatedStories").length>0)s=new i,s.populate({results:e.get("relatedStories",[])});else if(l instanceof Array&&l.length>0){var p=new c(l[0]);s=new a(t.extend({id:p.get("shortId",""),items:4},n.get()))}else if(u instanceof Array&&u.length>0){var h=new d(u[0]);s=new o(t.extend({id:h.get("shortId",""),items:4},n.get()))}return s}return function(n,i,o){if(void 0!==i){var a=p(i);if(!1!==a){var l="promo-group";"number"==typeof o&&o>0&&(l="related-stories");var c=new s(new r,t.extend({groupEnd:6,excludedId:i.id},n));return new e(a,c,u[l])}throw new Error("Required story data not found")}throw new Error("ExposedData.story not found")}}),define("module/related-stories-mvt",["lib/ecmaScript5","jquery","common/config","model/exposed-data","module/component-loader","component/related-stories"],function(t,e,n,i,o,a){function s(t,i,s){if(_.has(n.get(),"moduleId")&&e(t).length>0)try{var r=new a({class:s,analyticsConfig:{module:"related-stories"}},i,s);new o(e(t),r).load()}catch(t){console.log(t.message)}}return function(t,e){var n,i=document.querySelector(t);i&&i.getAttribute("data-variation-number")&&(n=parseFloat(i.getAttribute("data-variation-number")),s(t,e,n))}}),define("common/parser/first-item-from-results-set",["lodash"],function(t){return function(e,n){if(t.isArray(e))return t.first(e);throw new Error("Data   in unexpected format")}}),define("common/model/habitat-object",["lodash","common/util/extends","common/model/habitat","common/parser/habitat","common/parser/first-item-from-results-set"],function(t,e,n,i,o){function a(t){n.call(this,t)}return e(a,n,{parseData:function(t,e){var n=o(i(t).results);return this.parseHabitatData(n)},parseHabitatData:function(t){return t}}),a}),define("common/model/story/story",["lodash","common/util/logger","common/util/extends","common/model/habitat-object"],function(t,e,n,i,o){function a(t){i.call(this,t)}return n(a,i,{arrRequiredConfig:["id"],URLScheme:"/{moduleId}/story/{id}",parseHabitatData:function(t){return this.sanitiseStoryData(t)},sanitiseStoryData:function(e){return t.has(e,"Content")&&t.has(e.Content,"BodyHtml")&&(e.Content.BodyHtml=e.Content.BodyHtml.replace(/<script type=("|')text\/javascript("|')>([\s\S]*?)<\/script>/gi,"")),e}}),a}),define("common/service/request-builder/weather",["lodash","common/util/extends","common/service/request-builder/base"],function(t,e,n){function i(t){n.call(this,t)}return e(i,n,{getRequestURL:function(t,e){return"/"+e.module.domain+this.buildURLScheme(t,e)},checkArguments:function(e,n,i){if(arguments.length<3)throw Error("All arguments must be provided to request builder");if(!t.has(i,"weather_api")||!t.has(i.weather_api,"url"))throw Error("API data must be set in config")}}),i}),define("common/model/weather/weather",["lodash","common/util/extends","common/model/remote","common/service/request-builder/weather"],function(t,e,n,i){function o(t){n.call(this,t)}return e(o,n,{requestBuilder:new i}),o}),define("common/model/weather/five-day-forecast",["lodash","common/util/extends","common/model/weather/weather"],function(t,e,n){function i(t){n.call(this,t)}return e(i,n,{arrRequiredConfig:["weatherId"],URLScheme:"/weather/feeds/en/{weatherId}/5dayforecast.json",parseData:function(e){return!(!t.isObject(e)||!t.has(e,"forecastContent"))&&e}}),i}),define("common/interface/entity/weather/forecast-collection",["lodash","common/util/interface","common/interface/entity/base"],function(t,e,n){return new e("WeatherForecastCollectionEntity",n.methods.concat(["getId","getURL","getLocation","getCountry","getForecasts"]))}),define("common/interface/entity/weather/forecast",["lodash","common/util/interface","common/interface/entity/base"],function(t,e,n){return new e("WeatherForecastEntity",n.methods.concat(["getDay","getNight","getDayText"]))}),define("common/interface/entity/weather/forecast-period",["lodash","common/util/interface","common/interface/entity/base"],function(t,e,n){return new e("WeatherForecastPeriodEntity",n.methods.concat(["getMinTemps","getMaxTemps","getCode","getCaption"]))}),define("common/view/model-v2/weather/widget",["lodash","common/util/extends","common/util/interface","common/view/model-v2/base","common/interface/entity/weather/forecast-collection","common/interface/entity/weather/forecast","common/interface/entity/weather/forecast-period"],function(t,e,n,i,o,a,s){function r(){i.apply(this,arguments)}return e(r,i,{entityInterface:o,setViewData:function(){this.viewData={countryName:this.getEntity().getCountry(),locationName:this.getEntity().getLocation(),todayForecast:this.getForecastByDay(0),tomorrowForecast:this.getForecastByDay(1),forecast:this.getForecast(),weatherURL:this.getEntity().getURL()}},getForecastByDay:function(e){var i,o=this.getEntity().getForecasts(),r=!1;return!!(t.isNumber(e)&&e<o.length)&&(o.length>0&&(i=o[e],n.ensureImplements(i,a),r={dayNameAbbreviation:i.getDayText()},i.getDay()?(n.ensureImplements(i.getDay(),s),r.temperature=i.getDay().getMaxTemps(),r.weatherCode=i.getDay().getCode().toString(),r.weatherCaption=i.getDay().getCaption()):(n.ensureImplements(i.getNight(),s),r.temperature=i.getNight().getMinTemps(),r.weatherCode=i.getNight().getCode().toString(),r.weatherCaption=i.getNight().getCaption())),r)},getForecast:function(e){var i=this.getEntity().getForecasts(),o=[],r=this.getConfig().get("forecastRange",!1);return i=t.isObject(r)&&t.has(r,"start")&&t.has(r,"end")?i.slice(r.start,r.end+1):i.slice(1,i.length),t.each(i,function(t){n.ensureImplements(t,a),n.ensureImplements(t.getDay(),s),n.ensureImplements(t.getNight(),s),o.push({dayNameAbbreviation:t.getDayText(),maxTemperature:t.getDay().getMaxTemps(),minTemperature:t.getNight().getMinTemps(),weatherCode:t.getDay().getCode().toString(),weatherCaption:t.getDay().getCaption()})},this),o}}),r}),define("common/entity/external/weather/forecast-period",["lodash","common/util/extends","common/entity/base"],function(t,e,n){function i(e,i){var o={isProvided:!1,maxTemps:{centigrade:0,fahrenheit:0},minTemps:{centigrade:0,fahrenheit:0},code:0,caption:""};n.call(this,t.extend(o,e),i)}return e(i,n,{init:function(e,i){n.prototype.init.call(this,e),t.has(e,"maxTemperature")&&!t.isNull(e.maxTemperature)&&(this.isProvided=!0,this.maxTemps=e.maxTemperature),t.has(e,"minTemperature")&&!t.isNull(e.minTemperature)&&(this.minTemps=e.minTemperature),t.has(e,"weatherCode")&&!t.isNull(e.weatherCode)&&(this.code=e.weatherCode),t.has(e,"weatherType")&&!t.isNull(e.weatherType)&&(this.caption=e.weatherType)},getMinTemps:function(){return this.minTemps},getMaxTemps:function(){return this.maxTemps},getCode:function(){return this.code},getCaption:function(){return this.caption},isProvided:function(){return this.isProvided}}),i}),define("common/entity/external/weather/forecast",["lodash","common/util/extends","common/entity/base","common/entity/external/weather/forecast-period"],function(t,e,n,i){function o(e,i){var o={night:!1,day:!1,dayText:""};n.call(this,t.extend(o,e),i)}function a(e,n){return!(!t.has(e,n)||!t.has(e[n],"weatherCode")||t.isNull(e[n].weatherCode))&&e[n]}return e(o,n,{init:function(e,o){n.prototype.init.call(this,e);var s=a(e,"day"),r=a(e,"night");this.day=!1,this.night=!1,s&&(this.day=new i(s)),r&&(this.night=new i(r)),t.has(e,"dayNameAbbreviation")&&(this.dayText=e.dayNameAbbreviation)},getNight:function(){return this.night},getDay:function(){return this.day},getDayText:function(){return this.dayText}}),o}),define("common/entity/external/weather/forecast-collection",["lodash","common/util/extends","common/entity/base","common/entity/external/weather/forecast"],function(t,e,n,i){function o(e,i){var o={id:"",URL:"",location:"",country:"",forecasts:[]};n.call(this,t.extend(o,e),i)}return e(o,n,{init:function(e,i){n.prototype.init.call(this,e),t.has(e,"forecastContent")&&(t.has(e.forecastContent,"forecasts")&&this.setForecasts(e.forecastContent.forecasts),t.has(e.forecastContent,"location")&&t.has(e.forecastContent.location,"locationName")&&t.has(e.forecastContent.location,"country"),t.has(e.forecastContent.location,"id")&&(this.set("location",e.forecastContent.location.locationName),this.set("country",e.forecastContent.location.country),this.set("id",e.forecastContent.location.id),t.has(i,"full_forecast_url")&&this.set("URL",i.full_forecast_url+this.getId())))},getId:function(){return this.id},getURL:function(){return this.URL},getLocation:function(){return this.location},getCountry:function(){return this.country},setForecasts:function(e){var n=[];t.each(e,function(t){n.push(new i(t))}),this.set("forecasts",n)},getForecasts:function(){return this.forecasts}}),o}),define("component/weather-forecast",["lodash","module/MVVM-component","common/config","common/model/weather/five-day-forecast","common/view/model-v2/weather/widget","common/entity/external/weather/forecast-collection","templates","util/logger"],function(t,e,n,i,o,a,s,r){return function(r,l,c){t.isUndefined(c)&&(c=s["weather-forecast"]);var d=new i(t.extend({weatherId:r},n.get())),u=new o(new a,l);return new e(d,u,c)}}),define("interaction-controller/weather-module",["jquery","lodash","common/util/extends","interaction-controller/base","module/weather"],function(t,e,n,i,o){var a=function(){i.call(this)};return n(a,i,{init:function(t,e){i.prototype.init.call(this,t,e),this.weatherPersonalisationCookieName="ckps_travel_weather"},refresh:function(){i.prototype.refresh.call(this),this.initUIState()},initUIState:function(){var e;this.simpleFahrenheitUnit="f",this.simpleCentigradeUnit="c",this.unitMap={fahrenheit:this.simpleFahrenheitUnit,centigrade:this.simpleCentigradeUnit},this.weatherIconFahrenheit="wi-toggle-fahrenheit",this.weatherIconCentigrade="wi-toggle-centigrade",this.activeClass="is-active",this.hiddenClass="is-hidden",this.settingsButtonToggleIcon=this.el.find('[data-weather-settings-button="toggle"]'),this.centigradeElement=this.el.find('[data-weather-icon="centigrade"]'),this.centigradeSettingsButton=this.el.find('[data-weather-settings-button="centigrade"]'),this.fahrenheitElement=this.el.find('[data-weather-icon="fahrenheit"]'),this.fahrenheitSettingsButton=this.el.find('[data-weather-settings-button="fahrenheit"]'),t.cookie(this.weatherPersonalisationCookieName)?(e=JSON.parse(t.cookie(this.weatherPersonalisationCookieName)),this.setUnit(e.temperature),this.updateUI(e.temperature)):(this.setUnit(this.simpleFahrenheitUnit),this.updateUI(this.simpleFahrenheitUnit)),this.setupUIEventListeners()},setupUIEventListeners:function(){var e=this;t(this.settingsButtonToggleIcon).on("click",function(t){
e.handleSettingsToggle(t)}),t(this.centigradeSettingsButton).add(this.fahrenheitSettingsButton).on("click",function(t){e.handleSettingsSelection(t)})},toggleUnitSetting:function(){this.getUnit()===this.simpleFahrenheitUnit?this.changeUnitSetting(this.simpleCentigradeUnit):this.changeUnitSetting(this.simpleFahrenheitUnit)},changeUnitSetting:function(t){this.isValidUnit(t)&&(this.updateUI(t),this.setCookie(t),this.setUnit(t))},handleSettingsToggle:function(t){t.preventDefault(),this.toggleUnitSetting()},handleSettingsSelection:function(n){if(n.preventDefault(),e.has(n,"currentTarget")){var i=t(n.currentTarget),o=this.getConvertedUnitString(i.attr("data-weather-settings-button"));this.changeUnitSetting(o)}},getConvertedUnitString:function(t){return!!e.isString(t)&&(this.unitMap[t]||!1)},updateUI:function(t){t===this.simpleCentigradeUnit?(this.settingsButtonToggleIcon.removeClass(this.weatherIconCentigrade).addClass(this.weatherIconFahrenheit).attr("aria-label","Celsius - Switch to Fahrenheit"),this.centigradeSettingsButton.addClass(this.activeClass),this.centigradeElement.removeClass(this.hiddenClass),this.fahrenheitSettingsButton.removeClass(this.activeClass),this.fahrenheitElement.addClass(this.hiddenClass)):t===this.simpleFahrenheitUnit&&(this.settingsButtonToggleIcon.removeClass(this.weatherIconFahrenheit).addClass(this.weatherIconCentigrade).attr("aria-label","Fahrenheit - Switch to Celsius"),this.fahrenheitSettingsButton.addClass(this.activeClass),this.fahrenheitElement.removeClass(this.hiddenClass),this.centigradeSettingsButton.removeClass(this.activeClass),this.centigradeElement.addClass(this.hiddenClass))},isValidUnit:function(t){return e.isString(t)&&e.contains([this.simpleFahrenheitUnit,this.simpleCentigradeUnit],t)},setUnit:function(t){return this.isValidUnit(t)&&(this.unit=t),!1},getUnit:function(){return this.unit},setCookie:function(e){t.cookie(this.weatherPersonalisationCookieName,null);var n={};e&&(n.temperature=e),t.cookie(this.weatherPersonalisationCookieName,JSON.stringify(n),{expires:360,path:"/"})}}),a}),define("module/weather",["lodash","lib/jquery-cookie","util/logger","lib/domReady","component/weather-forecast","module/component-loader","interaction-controller/weather-module"],function(t,e,n,i,o,a,s){var r=function(t,e,n,i){this.setSelector(t),this.setupComponents(e,n,i)};return t.extend(r.prototype,{setupComponents:function(t,e,n){var i=new o(t,e,n),r=new a(this.selector,i,{mode:"replace",interactionController:new s});this.weatherModuleComponentLoader=r},load:function(){var t=this;this.weatherModuleComponentLoader.load().then(function(){t.initUIState()})},setSelector:function(t){this.selector=e(t)},getSelector:function(){return this.selector}}),r}),define("common/view/model-v2/list/promo-group/irregular-images",["lodash","common/util/extends","common/util/logger","common/view/model-v2/list/promo-group/base","common/interface/entity/list/base"],function(t,e,n,i,o){function a(){i.apply(this,arguments)}return e(a,i,{entityInterface:o,setViewData:function(){i.prototype.setViewData.apply(this,arguments);var e={"item-one":this.getPromoUnitByIndex(0),"item-two":this.getPromoUnitByIndex(1),"item-three":this.getPromoUnitByIndex(2),"item-four":this.getPromoUnitByIndex(3)};e=t.merge(this.getViewData()["promo-group"],e)},getPromoUnitByIndex:function(e){var n=this.viewData["promo-group"].items;return!!(t.isNumber(e)&&e<n.length)&&n[e]}}),a}),define("component/promo-group/irregular-images",["lodash","module/MVVM-component","common/view/model-v2/list/promo-group/irregular-images","templates"],function(t,e,n,i){return function(o,a,s,r){t.isUndefined(r)&&(r="promo-group-without-container");var l=new n(a,s);return new e(o,l,i[r])}}),define("common/model/module-collection-facade",["lodash","common/util/extends","common/model/habitat-object"],function(t,e,n){function i(t){n.call(this,t)}return e(i,n,{arrRequiredConfig:["id"],URLScheme:"/{moduleId}/module/{id}",parseHabitatData:function(e){return t.has(e,"Content")&&t.has(e.Content,"Stories")&&(e.Content.CollectionOverrides=e.Content.Stories),e}}),i}),define("common/model/best-of/best-of",["lodash","common/util/extends","common/model/module-collection-facade"],function(t,e,n){function i(t){n.call(this,t)}return e(i,n,{arrRequiredConfig:[],URLScheme:"/{moduleId}/module/best-of"}),i}),define("common/entity/habitat/collection/story-list",["lodash","common/util/extends","common/util/logger","common/entity/habitat/link","common/entity/habitat/mixed/promo"],function(t,e,n,i,o){function a(t,e){i.apply(this,arguments)}return e(a,i,{init:function(t){i.prototype.init.apply(this,arguments),this.initListItems()},initListItems:function(){var e,n=this.get("collectionOverrides",[]);this.listItems=[],t.each(n,function(t){e=new o(t),this.listItems.push(e)},this)},getListItems:function(){return this.listItems}}),a}),define("component/promo-group/best-of",["lodash","common/config","component/promo-group/base","component/promo-group/irregular-images","common/model/best-of/best-of","common/entity/habitat/collection/story-list"],function(t,e,n,i,o,a){return function(s,r,l){r=t.extend(r,{groupEnd:4});var c=e.get();return t.has(c,"moduleId")&&"wwfuture"===c.moduleId?i(new o(c),new a,r,"irregular-images"):n(new o(c),new a,r,"promo-group")}}),define("component/more-amazing-stories",["lodash","module/MVVM-component","common/config","common/model/front-page/front-page-stories","common/view/model-v2/list/promo-group/base","common/entity/habitat/mixed/list/promo","common/entity/habitat/story/promo","templates","model/exposed-data"],function(t,e,n,i,o,a,s,r,l){return function(c){if(t.has(l,"story")&&t.has(c,"moduleId")){var d=new s(l.story),u=new i(t.extend({moduleId:c.moduleId},n.get()));if(!1!==u){var p=new o(new a,t.extend({groupEnd:6,excludedId:d.getId()},c));return new e(u,p,r["promo-group"])}throw new Error("Story doesnt contain tags")}throw new Error("ExposedData.story not found")}}),define("common/view/model-v2/list/promo-group/news-feed",["lodash","common/util/extends","common/util/logger","common/view/model-v2/list/promo-group/base","common/interface/entity/list/base"],function(t,e,n,i,o){function a(){i.apply(this,arguments)}return e(a,i,{entityInterface:o,setViewData:function(){i.prototype.setViewData.apply(this,arguments);var e={},n=this.getConfig(),o=n.get("feedPromoImage",!1);!1!==o&&(e["feed-promo-image"]={"image-URL":o.imageURL,"feed-URL":o.feedURL}),this.viewData=t.extend(this.getViewData(),e)}}),a}),define("component/promo-group/news-feed",["lodash","module/MVVM-component","common/view/model-v2/list/promo-group/news-feed","templates"],function(t,e,n,i){return function(o,a,s,r){t.isUndefined(r)&&(r="news-feed-promo-group");var l=new n(a,s);return new e(o,l,i[r])}}),define("common/model/external/news/davos",["lodash","common/util/extends","common/model/habitat"],function(t,e,n){function i(t){n.call(this,t)}return e(i,n,{URLScheme:"/external/bbc-news-davos",parseData:function(e){return!!t.isArray(e)&&{items:e}}}),i}),define("common/entity/external/news/davos/promo",["lodash","common/util/extends","common/util/logger","common/entity/base","common/entity/vanilla/image","common/helper/context-data/item"],function(t,e,n,i,o,a){function s(e,n){var o={id:!1,PromoUrl:"",Headline:"",image:!1,description:"",iconType:"",context:!1,type:""};i.call(this,t.extend(o,e),n)}return e(s,i,{init:function(e,n){i.prototype.init.apply(this,arguments),t.has(e,"ImageUrl")&&this.set("image",new o({URL:e.ImageUrl,replaceURL:e.PromoUrl})),t.has(e,"ContextName")&&this.set("context",[new a(e.ContextName,e.ContextUrl)])},getId:function(){return this.id},getURL:function(){return this.PromoUrl},getTitle:function(){return this.Headline},getImage:function(){return this.image},getShortName:function(){return this.Headline},getClientName:function(){return this.clientName},setSummary:function(t){this.description=t},getSummary:function(){return this.description},getSummaryLong:function(){return this.getSummary()},getContext:function(){return this.context},getIconType:function(){return this.iconType},getType:function(){return this.type},getRelatedLinks:function(){return!1}}),s}),define("common/entity/external/news/davos/list",["lodash","common/util/extends","common/util/logger","common/entity/list/entity","common/entity/external/news/davos/promo"],function(t,e,n,i,o){function a(t,e){i.apply(this,arguments)}return e(a,i,{entityFactoryDependencies:[],flushListItems:function(){this.items=[]},getListItems:function(){return this.items},createEntity:function(t){return new o(t)}}),a}),define("component/promo-group/davos-news-feed",["lodash","common/config","component/promo-group/news-feed","common/model/external/news/davos","common/entity/external/news/davos/list","templates"],function(t,e,n,i,o,a){return function(a){return n(new i(e.get()),new o,t.extend({title:"More on Davos",groupEnd:6,class:"news-feed",feedPromoImage:{imageURL:"http://news.bbcimg.co.uk/nol/shared/img/bbc_news_120x60.gif",feedURL:"http://www.bbc.co.uk/news/business-35233481"},promoGroup:{id:"extra-footer",class:"single-column-primary"},promoUnit:{class:"news-feed"}},a),"news-feed-promo-group")}}),define("common/view/model-v2/link/share-tools",["lodash","common/util/extends","common/view/model-v2/base","common/interface/entity/link","common/config","common/util/logger","common/view/model-v2/image/html-element"],function(t,e,n,i,o,a,s){function r(){n.apply(this,arguments)}return e(r,n,{entityInterface:i,setViewData:function(){var t=this.getMetaData();if(""===t.title||""===t.url)return void(this.viewData={});this.viewData={title:t.title,class:this.getConfig().get("class",""),shareItemsDesktop:this.getShareItems("desktop"),shareItemsMobile:this.getShareItems("mobile")}},getMetaData:function(){var t=this.getEntity();return{title:this.getConfig().get("title"),url:t.getURL(),encodedTitle:encodeURIComponent(t.getTitle()),twitterUsername:this.getTwitterUserName()}},getSocialIconsConfig:function(){var e=o.get(),n=t.get(e,"socialIcons",!1),i=this.getConfig().get("socialIconsListType",!1);return t.has(n,i)?n[i]:!!t.has(n,"default")&&n.default},encodeUrlWithShareSource:function(t,e){var n="ocid=ww.social.link."+e,i=t+(t.indexOf("?")>-1?"&":"?");return i+=n,encodeURIComponent(i)},getShareItems:function(e){var n=this.getSocialIconsConfig();if(e&&t.has(n,e)){var i=this.getBaseShareItems(),o=[];return t.each(n[e],function(e){var n=t.find(i,function(t){return t.id===e});this.setShareItemText(e,n),t.isUndefined(n)?a.get().debug('"'+e+'" icon content not found in base share items'):o.push(this.getShareItem(n))},this),o}return!1},getTwitterUserName:function(){var e=o.get();return!!t.has(e,"socialLinks.twitter.username")&&e.socialLinks.twitter.username},getShareItem:function(e){return!!t.isObject(e)&&{text:e.text,url:e.url,"icon-class":e.iconClass,class:e.class,trackingId:e.trackingId}},getImage:function(){var t=this.getEntity().getImage();return!!t&&new s(t,this.getImageConfig()).setSourceData({},!1)},getImageConfig:function(){var e=this.getConfig().get("image",{});return t.extend({},{format:{landscape:{x:"960",y:"540"}},isWatermarked:!0},e)},setShareItemText:function(e,n){if(t.has(n,"id")&&n.id===e){var i=t.get(this.getText(),e)||"";n.text=i}},getBaseShareItems:function(){var t=this.getMetaData(),e=(t.title,t.url),n=t.encodedTitle,i=t.twitterUsername,o=this.getImage(),a=encodeURIComponent(o.url);return[{id:"facebook",url:"https://www.facebook.com/sharer/sharer.php?u="+this.encodeUrlWithShareSource(e,"facebook")+"&t="+n,class:"facebook",iconClass:"gelicon--facebook",trackingId:"facebook"},{id:"twitter",url:"https://twitter.com/intent/tweet?text="+n+"&url="+this.encodeUrlWithShareSource(e,"twitter")+(!1!==i?"&via="+i:""),class:"twitter",iconClass:"gelicon--twitter",trackingId:"twitter"},{id:"google",url:"https://plus.google.com/share?url="+this.encodeUrlWithShareSource(e,"googleplus"),class:"google",iconClass:"gelicon--google-plus",trackingId:"google"},{id:"email",url:"mailto:?subject=Shared from BBC:"+n+"&body="+this.encodeUrlWithShareSource(e,"email"),class:"email",iconClass:"gelicon--mail",trackingId:"email"},{id:"linkedin",url:"https://www.linkedin.com/shareArticle?mini=true&url="+this.encodeUrlWithShareSource(e,"linkedin")+"&title="+n,class:"linkedin",iconClass:"gelicon--linkedin",trackingId:"linkedin"},{id:"reddit",url:"https://www.reddit.com/submit?url="+this.encodeUrlWithShareSource(e,"reddit")+"&title="+n,class:"reddit",iconClass:"gelicon--reddit",trackingId:"reddit"},{id:"stumbleupon",url:"http://www.stumbleupon.com/submit?url="+this.encodeUrlWithShareSource(e,"stumbleupon"),class:"stumbleupon",iconClass:"gelicon--stumbleupon",trackingId:"stumbleupon"},{id:"whatsapp",url:"whatsapp://send?text="+n+": "+this.encodeUrlWithShareSource(e,"whatsapp"),class:"whatsapp",iconClass:"gelicon--whatsapp",trackingId:"whatsapp"},{id:"pinterest",url:"http://pinterest.com/pin/create/button/?url="+this.encodeUrlWithShareSource(e,"pinterest")+"&description="+n+"&media="+a,class:"pinterest",iconClass:"gelicon--pinterest",trackingId:"pinterest"}]},getText:function(){return{email:"Share by Email",facebook:"Share on Facebook",google:"Share on Google+",linkedin:"Share on LinkedIn",pinterest:"Share on Pinterest",reddit:"Share on Reddit",stumbleupon:"Share on StumbleUpon",twitter:"Share on Twitter",whatsapp:"Share on WhatsApp"}}}),r}),define("common/view/model-v2/link/article-share-tools",["lodash","common/util/extends","common/view/model-v2/link/share-tools","common/interface/entity/link","common/config","common/util/logger","common/view/model-v2/image/html-element"],function(t,e,n,i,o,a,s){function r(){n.apply(this,arguments)}return e(r,n,{}),r}),define("component/share-tools",["lodash","common/config","module/MVVM-component","common/view/model-v2/link/article-share-tools","templates","model/exposed-data"],function(t,e,n,i,o,a){return function(t,e){var a=new i(e,{class:"small share--article",title:"Share this article:"});return new n(t,a,o["share-tools"])}}),define("model/analytics",[],function(){return new function(){var t;this.setup=function(e){t=e},this.getAnalytics=function(){return t}}}),define("layouts/story",["lodash","lib/ecmaScript5","jquery","lib/domReady","orb/api","module/video/StandAloneVideoPlayer","module/customEmbed","module/heroUnit","module/responsiveInfographic","module/gallery","module/listResizer","module/responsiveShareTools","module/calendar/filter/main","module/ibroadcast-image-gallery/main","module/related-stories-mvt","model/mediaQuery","model/pageData","model/digitalData","common/config","model/exposed-data","templates","common/model/story/story","common/entity/habitat/story/article","common/entity/habitat/destination/promo","module/component-loader","module/MVVM-component","module/weather","component/promo-group/best-of","component/related-stories","component/more-amazing-stories","component/promo-group/davos-news-feed","component/share-tools","layouts/base","model/analytics","util/content-loader-event-handler"],function(t,e,n,i,o,a,s,r,l,c,d,u,p,h,m,f,g,b,y,v,w,S,x,I,C,T,_,k,L,E,A,D,P,R,M){var U=function(t,e){this.setSelector(t),this.setStoryData(e),this.setupContentSelectors(),this.videoSelector="#video-lead-asset",this.inlineVideoSelector=".inline-video .video-player",this.inlineMagnifySelector=".inline-magnify",this.inlineHorizontalPartnerVideoSelector=".horizontal-partner-module__body .body__video #partner-video",this.customEmbedSelector="#custom-embed-content",this.bodyContentSelector=".body-content",this.leadVideoSelector="#video-lead-asset",this.leadVideoWrapperSelector="#video-lead-wrapper",this.infographicSelector=".infographic",this.bestOfSecondarySelector="#best-of-secondary",this.bestOfPrimarySelector="#best-of-primary",this.shareToolsSelectors=["#share-tools-top"],this.shareToolsItemListSelector=".share",this.shareToolsItemSelector=".share-item .share-button",this.relatedStoriesSecondarySelector="#related-stories-secondary",this.relatedStoriesPrimarySelector="#related-stories-primary",this.moreAmazingStoriesSecondarySelector="#related-stories-secondary",this.moreAmazingStoriesPrimarySelector="#more-amazing-stories-primary",this.weatherForecastSecondarySelector="#weather-forecast-secondary",this.isVideoDisplayed=!1,this.leadIBroadcastImageGallerySelector="#lead-gallery-wrapper .ib-gallery",this.leadIBroadcastImageWrapperSelector="#lead-gallery-wrapper",this.inlineIBroadcastImageGallerySelector=".inline-gallery .ib-gallery",this.inlineDavosNewsFeedSelector="#news-feed-davos, #news-feed-davos2016",this.calendarFilterSelector=".event-filter",this.isLeadGalleryDisplayed=!1};return t.extend(U.prototype,{setupContentSelectors:function(){this.storyContentSelector="#story-content",this.storyContentElement=n(this.storyContentSelector),this.primaryContentSelector="#story-content .primary-content",this.secondaryContentSelector="#story-content .secondary-content"},init:function(){this.initStoryData(),this.model=new g,this.model.init({url:b.page.pageInfo.destinationURL}),this.setShortStory(),this.setSecondaryContent(),this.heroUnit=new r(this.model),this.heroUnit.showVideoLoader(),this.setupPageComponents(),this.model.load(),this.setupMedia(),this.setupCalendarComponent(),this.addEventListeners()},initStoryData:function(){void 0!==this.getStoryData()?(this.storyModel=new S(t.extend({id:!1},y.get())),this.storyModel.populate(this.getStoryData()),this.storyEntity=new x(this.storyModel.getData()),this.storyDataInitialised=!0):this.storyDataInitialised=!1},setStoryData:function(e){void 0!==e?this.storyData=e:t.has(v,"story")&&(this.storyData=v.storyData)},getStoryData:function(){return this.storyData},getStoryModel:function(){return this.storyModel},getStoryEntity:function(){return this.storyEntity},addEventListeners:function(){o.layout(this.layout.bind(this)),this.getVideoPlayer()&&(this.getVideoPlayer().subscribe("playlistLoaded",this.videoPlayerReady.bind(this)),this.getVideoPlayer().subscribe("videoPlaying",this.revealVideo.bind(this)),this.getVideoPlayer().subscribe("error",this.videoPlayerError.bind(this)),this.heroUnit.subscribe("playVideo",this.playVideo.bind(this)))},layout:function(){this.isVideoDisplayed&&this.revealVideo(),(this.isLeadGalleryDisplayed||this.isInlineGalleryDisplayed)&&h.triggerUpdate(),void 0!==this.bestofResizer&&this.bestofResizer.layout(),void 0!==this.infographic&&this.infographic.resize()},setupMedia:function(){this.setupVideo(),this.setupInlineVideo(),this.setupCustomEmbed()},setupInlineVideo:function(){this.getSelector().find(this.inlineVideoSelector).each(function(t,e){new a("#"+n(e).attr("id")).init()}),this.getSelector().find(this.inlineMagnifySelector).each(function(t,e){new s("#"+n(e).attr("id")).init()}),this.getSelector().find(this.inlineHorizontalPartnerVideoSelector).each(function(t,e){new a("#"+n(e).attr("id")).init()})},getVideoPlayer:function(){return this.videoPlayer},setVideoPlayer:function(t){this.videoPlayer=t},hasVideo:function(){return void 0!==this.getVideoPlayer()},setupVideo:function(){var t,e=this.getElement(this.videoSelector);e&&(t=new a(this.videoSelector,{canAutoplay:!0}),t.init(),this.setVideoPlayer(t))},videoPlayerReady:function(t){this.heroUnit.activateVideoUI(),this.revealVideo()},videoPlayerError:function(t,e){this.revealVideo()},playVideo:function(){this.revealVideo(),this.getVideoPlayer().play()},revealVideo:function(t){!1===this.isVideoDisplayed&&(this.storyContentElement.css({"margin-top":-this.heroUnit.getVerticalSpace()}),n(this.leadVideoWrapperSelector).removeClass("disabled"),n(this.leadVideoWrapperSelector).height(n(this.leadVideoSelector).height()),this.heroUnit.softenOverlay(),this.isVideoDisplayed=!0)},revealLeadGallery:function(){n(this.leadIBroadcastImageWrapperSelector).length>0&&(this.storyContentElement.css({"margin-top":-this.heroUnit.getVerticalSpace()}),n(this.leadIBroadcastImageWrapperSelector).height(n(this.leadIBroadcastImageGallerySelector).height()),this.heroUnit.softenOverlay(),this.isLeadGalleryDisplayed=!0)},setupCustomEmbed:function(){this.getElement(this.customEmbedSelector)&&new s(this.customEmbedSelector)},getElement:function(t){var e=this.getSelector().find(t);return e.length>0&&e},setSelector:function(t){this.selector=n(t)},getSelector:function(){return this.selector},setupPageComponents:function(){this.addBottomShareTools().then(this.setupShareTools.bind(this)),this.setupIBroadcastGalleries(),this.setupFullscreenGallery(),this.setupRelatedStoriesSecondary(),this.initBestOf(),this.setupRelatedStoriesPrimary(),this.setupMoreAmazingStoriesPrimary(),this.setupWeatherForecastSecondary(),this.setupDavosNewsFeedComponent()},setupShareTools:function(){this.responsiveShareTools=new u(this.shareToolsSelectors,this.shareToolsItemListSelector,this.shareToolsItemSelector)},initBestOf:function(){var e=y.get();t.has(e,"moduleId")&&"wwfuture"===e.moduleId?this.setupBestOfPrimary():this.setupBestOfSecondary()},setupBestOf:function(e,i){if(t.has(y.get(),"moduleId")&&n(i).length>0){var o=new k(y.get().moduleId,{promoGroup:{id:"best-of",class:e},analyticsConfig:{module:"best-of"}},i);new C(n(i),o).load()}},setupBestOfSecondary:function(){this.setupBestOf("best-of",this.bestOfSecondarySelector)},setupBestOfPrimary:function(){this.setupBestOf("single-column-primary",this.bestOfPrimarySelector)},setupRelatedStories:function(e,i){if(t.has(y.get(),"moduleId")&&n(i).length>0)try{var o=new L({title:"Related Stories",id:"related-stories",class:e,analyticsConfig:{module:"related-stories"},promoUnit:{class:"secondary-branded"}},this.getStoryEntity());new C(n(i),o).load()}catch(t){console.log(t.message)}},setupRelatedStoriesSecondary:function(){n("body[data-optmzly-experiment-enabled=true]").length>0?m(this.relatedStoriesSecondarySelector,this.getStoryEntity()):this.setupRelatedStories("related-stories",this.relatedStoriesSecondarySelector)},setupRelatedStoriesPrimary:function(){this.setupRelatedStories("related-stories",this.relatedStoriesPrimarySelector)},setupMoreAmazingStories:function(e,i){if(t.has(y.get(),"moduleId")&&n(i).length>0)try{var o=y.get(),a="More amazing "+o.module.name+" stories",s=new E({title:a,id:"more-amazing-stories",class:e,promoUnit:{class:"secondary-unbranded"},moduleId:o.moduleId,analyticsConfig:{module:"more-amazing-stories"}});new C(n(i),s).load()}catch(t){console.log(t.message)}},setupMoreAmazingStoriesSecondary:function(){this.setupMoreAmazingStories("more-amazing-stories",this.moreAmazingStoriesSecondarySelector)},setupMoreAmazingStoriesPrimary:function(){this.setupMoreAmazingStories("more-amazing-stories",this.moreAmazingStoriesPrimarySelector)},setupWeatherForecastSecondary:function(){if(!0===this.storyDataInitialised){var e,n,i=this.getStoryEntity().get("location");if("wwtravel"===this.getStoryEntity().get("primaryVertical",!1)&&t.isArray(i)&&i.length>0&&(e=new I(i[0]),!1!==(n=e.get("weatherId"))&&n.length>0)){new _(this.weatherForecastSecondarySelector,n,{}).load()}}},raiseContentLoaded:function(t,e){M.trigger(M.ACTION_LAZY_LOADED_CONTENTS,t,e)},setupIBroadcastGalleries:function(){var t=this;n(this.leadIBroadcastImageGallerySelector).length>0&&h.add(this.leadIBroadcastImageGallerySelector,{onLoadCallback:function(){t.revealLeadGallery(),t.raiseContentLoaded(M.TYPE_LEAD_GALLERY)},onUpdateCallback:function(){t.isLeadGalleryDisplayed&&(t.revealLeadGallery(),t.raiseContentLoaded(M.TYPE_LEAD_GALLERY))}}),n(this.inlineIBroadcastImageGallerySelector).each(function(e,i){var o=function(){var e=n(i),o=e.closest(".inline-media.inline-gallery");o.length>0&&o.height(e.height()),t.raiseContentLoaded(M.TYPE_INLINE_GALLERY)};h.add(i,{minItems:4,onLoadCallback:o,onUpdateCallback:o}),t.isInlineGalleryDisplayed=!0})},setupFullscreenGallery:function(){if(!f.isMobileDevice()){var t=[];n(this.leadIBroadcastImageGallerySelector).find("img").each(function(e,n){t.push({image:n,isClickable:!1})}),n(this.inlineIBroadcastImageGallerySelector+" img").each(function(e,n){t.push({image:n,isClickable:!1})}),n(this.bodyContentSelector).find("img.responsive").each(function(e,n){t.push({image:n,isClickable:!0})}),this.fullscreenGallery=new c(t)}},setupDavosNewsFeedComponent:function(){if(this.getElement(this.inlineDavosNewsFeedSelector)){var t=new A;new C(n(this.inlineDavosNewsFeedSelector),t).load()}},setupShortStory:function(){},setupLongStory:function(){this.addBottomShareTools().then(this.setupShareTools.bind(this))},addBottomShareTools:function(){if(!0===this.storyDataInitialised){var t=new D(this.getStoryModel(),this.getStoryEntity());return t=new C(n("#share-tools-bottom"),t).load(),this.shareToolsSelectors.push("#share-tools-bottom"),t}},isShortStory:function(){return this._isShortStory},setShortStory:function(){n(this.primaryContentSelector).height()>n(this.secondaryContentSelector).height()?this._isShortStory=!1:this._isShortStory=!0},setSecondaryContent:function(){n(this.secondaryContentSelector).height()>16?this._hasSecondaryContent=!0:this._hasSecondaryContent=!1},setupInfographic:function(){this.getElement(this.infographicSelector)&&(this.infographic=new l,this.infographic.init(this.infographicSelector,this.model))},setupCalendarComponent:function(){n(".event-filter").length>0&&(this.calendarFilter=new p(".event-filter"))}}),U}),define("component/responsive-images-renderer",["lodash","jquery","module/responsiveImages/main","module/responsiveImages/formats/wwfeaturesHero","module/responsiveImages/formats/wwfeatures16x9","module/responsiveImages/formats/wwfeatures83x120","module/responsiveImages/formats/wwfeaturesBanner","module/imageReplacer"],function(t,e,n,i,o,a,s,r){var l=function(t,e,n){this.imageRatio=n,this.setSelector(t)};return t.extend(l.prototype,{init:function(){var t=new r;t.replace("a[data-replace-image='true'][data-is-portrait='false']","responsive landscape"),t.replace("div[data-replace-image='true'][data-is-portrait='false']","responsive landscape"),t.replace("a[data-replace-image='true'][data-is-portrait='true']","responsive portrait"),t.replace("div[data-replace-image='true'][data-is-portrait='true']","responsive portrait"),this.setupResponsiveImages(),this.responsiveImages.respond()},setupResponsiveImages:function(){this.responsiveImages=new n,this.responsiveImages.add(e(this.getSelector()+"img.responsive-hero"),i),this.responsiveImages.add(e(this.getSelector()+"img.responsive.landscape"),o,this.imageRatio),this.responsiveImages.add(e(this.getSelector()+"img.responsive.portrait"),a),this.responsiveImages.add(e(this.getSelector()+"img.responsive-banner"),s)},setSelector:function(t){this.selector=t},getSelector:function(){return this.selector+" "}}),l}),define("layouts/super-section-story",["lodash","jquery","orb/api","module/video/StandAloneVideoPlayer","module/customEmbed","module/responsiveShareTools","module/ibroadcast-image-gallery/main","model/mediaQuery","model/pageData","model/digitalData","common/config","model/exposed-data","templates","common/model/story/story","common/entity/habitat/story/article","common/entity/habitat/destination/promo","module/component-loader","module/MVVM-component","component/related-stories","component/more-amazing-stories","module/gallery","component/share-tools","model/analytics","util/content-loader-event-handler","layouts/page","module/bbcdotcomMediator","component/responsive-images-renderer"],function(t,e,n,i,o,a,s,r,l,c,d,u,p,h,m,f,g,b,y,v,w,S,x,I,C,T,_){var k=function(t,e){this.setStoryBlock(t),this.setStoryData(e),this.setupContentSelectors(),this.inlineVideoSelector=this.getStoryBlock()+".inline-video .video-player",this.inlineMagnifySelector=this.getStoryBlock()+".inline-magnify",this.inlineHorizontalPartnerVideoSelector=this.getStoryBlock()+".horizontal-partner-module__body .body__video #partner-video",this.customEmbedSelector=this.getStoryBlock()+"#custom-embed-content",this.bodyContentSelector=this.getStoryBlock()+".body-content",this.shareToolsSelectors=[this.getStoryBlock()+"#share-tools-top"],this.shareToolsItemListSelector=this.getStoryBlock()+".share",this.shareToolsItemSelector=this.getStoryBlock()+".share-item .share-button",this.shareToolsBottomSelector=this.getStoryBlock()+"#share-tools-bottom",this.relatedStoriesSecondarySelector=this.getStoryBlock()+"#related-stories-secondary",this.relatedStoriesPrimarySelector=this.getStoryBlock()+"#related-stories-primary",this.moreAmazingStoriesSecondarySelector=this.getStoryBlock()+"#related-stories-secondary",this.moreAmazingStoriesPrimarySelector=this.getStoryBlock()+"#more-amazing-stories-primary",this.inlineIBroadcastImageGallerySelector=this.getStoryBlock()+".inline-gallery .ib-gallery"};return t.extend(k.prototype,{setupContentSelectors:function(){this.storyContentSelector=this.getStoryBlock()+"#story-content",this.storyContentElement=e(this.storyContentSelector),this.primaryContentSelector=this.getStoryBlock()+"#story-content .primary-content",this.secondaryContentSelector=this.getStoryBlock()+"#story-content .secondary-content"},init:function(){this.initStoryData(),this.model=new l,this.model.init({url:c.page.pageInfo.destinationURL}),this.setShortStory(),this.setSecondaryContent(),this.setupPageComponents(),this.model.load(),this.setupMedia(),this.addEventListeners()},initStoryData:function(){void 0!==this.getStoryData()&&!1!==this.getStoryData()?(this.storyModel=new h(t.extend({id:!1},d.get())),this.storyModel.populate(this.getStoryData()),this.storyEntity=new m(this.storyModel.getData()),this.storyDataInitialised=!0):this.storyDataInitialised=!1},setStoryBlock:function(t){this.storyBlock=t},getStoryBlock:function(t){return this.storyBlock+" "},setStoryData:function(e){void 0!==e?this.storyData=e:t.has(u,"story")&&(this.storyData=u.storyData)},getStoryData:function(){return this.storyData},getStoryModel:function(){return this.storyModel},getStoryEntity:function(){return this.storyEntity},addEventListeners:function(){n.layout(this.layout.bind(this)),this.getVideoPlayer()&&this.getVideoPlayer().subscribe("error",this.videoPlayerError.bind(this))},layout:function(){this.isInlineGalleryDisplayed&&s.triggerUpdate()},setupMedia:function(){this.setupInlineVideo(),this.setupCustomEmbed(),this.setupRenderImages()},rgb2hex:t.memoize(function(t){return t=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i),t&&4===t.length?"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):""}),themePlayer:function(t){if(this.isSuperSectionStory()){var n=e(".super-section-theme .primary-content-top .introduction-wrapper");if(n.length>0){var i=n.css("background-color");i&&e(t).attr("data-brand-color",this.rgb2hex(i))}}},setupInlineVideo:function(){var t=this;e(this.inlineVideoSelector).each(function(n,o){t.themePlayer("#"+e(o).attr("id")),new i("#"+e(o).attr("id")).init()}),e(this.inlineMagnifySelector).each(function(t,n){new o("#"+e(n).attr("id")).init()}),e(this.inlineHorizontalPartnerVideoSelector).each(function(n,o){t.themePlayer("#"+e(o).attr("id")),new i("#"+e(o).attr("id")).init()})},setupRenderImages:function(){new _(this.getStoryBlock()).init()},getVideoPlayer:function(){return this.videoPlayer},setVideoPlayer:function(t){this.videoPlayer=t},setupCustomEmbed:function(){e(this.customEmbedSelector).length>0&&new o(this.customEmbedSelector)},setupPageComponents:function(){var t=this;setTimeout(function(){t.addBottomShareTools().then(t.setupShareTools.bind(t)),t.setupIBroadcastGalleries(),t.setupFullscreenGallery(),t.setupRelatedStoriesSecondary(),t.setupMoreAmazingStoriesPrimary()},1e3)},isSuperSectionStory:function(){return e(this.getStoryBlock()+".article-page-super-section-container").length>0},setupShareTools:function(){this.responsiveShareTools=new a(this.shareToolsSelectors,this.shareToolsItemListSelector,this.shareToolsItemSelector)},setupRelatedStories:function(n,i){if(t.has(d.get(),"moduleId")&&e(i).length>0&&!0===this.storyDataInitialised)try{var o=new y({title:"Related Stories",id:"related-stories",class:n,analyticConfig:{module:"related-stories"},promoUnit:{class:"secondary-branded"}},this.getStoryEntity())
;new g(e(i),o).load()}catch(t){console.log(t.message)}},setupRelatedStoriesSecondary:function(){this.setupRelatedStories("related-stories",this.relatedStoriesSecondarySelector)},setupMoreAmazingStories:function(n,i){if(t.has(d.get(),"moduleId")&&e(i).length>0)try{var o=d.get(),a="More amazing "+o.module.name+" stories",s=new v({title:a,id:"more-amazing-stories",class:n,promoUnit:{class:"secondary-unbranded"},moduleId:o.moduleId,analyticsConfig:{module:"more-amazing-stories"}});new g(e(i),s).load()}catch(t){console.log(t.message)}},setupMoreAmazingStoriesPrimary:function(){this.setupMoreAmazingStories("more-amazing-stories",this.moreAmazingStoriesPrimarySelector)},raiseContentLoaded:function(t,e){I.trigger(I.ACTION_LAZY_LOADED_CONTENTS,t,e)},setupIBroadcastGalleries:function(){var t=this;e(this.inlineIBroadcastImageGallerySelector).each(function(n,i){var o=function(){var n=e(i),o=n.closest(".inline-media.inline-gallery");o.length>0&&o.height(n.height()),t.raiseContentLoaded(I.TYPE_INLINE_GALLERY)};s.add(i,{minItems:4,onLoadCallback:o,onUpdateCallback:o}),t.isInlineGalleryDisplayed=!0})},setupFullscreenGallery:function(){if(!r.isMobileDevice()){var t=[];e(this.inlineIBroadcastImageGallerySelector+" img").each(function(e,n){t.push({image:n,isClickable:!1})}),e(this.bodyContentSelector).find("img.responsive").each(function(e,n){t.push({image:n,isClickable:!0})}),this.fullscreenGallery=new w(t)}},setupShortStory:function(){},setupLongStory:function(){this.addBottomShareTools().then(this.setupShareTools.bind(this))},addBottomShareTools:function(){if(!0===this.storyDataInitialised){var t=new S(this.getStoryModel(),this.getStoryEntity());return t=new g(e(this.shareToolsBottomSelector),t).load(),this.shareToolsSelectors.push(this.shareToolsBottomSelector),t}},isShortStory:function(){return this._isShortStory},setShortStory:function(){e(this.primaryContentSelector).height()>e(this.secondaryContentSelector).height()?this._isShortStory=!1:this._isShortStory=!0},setSecondaryContent:function(){e(this.secondaryContentSelector).height()>16?this._hasSecondaryContent=!0:this._hasSecondaryContent=!1}}),k}),define("component/story-way-points",["lodash","jquery","model/mediaQuery","util/content-loader-event-handler","util/logger"],function(t,e,n,i,o){function a(t,e){this.selector=t,this.activateOnMobile=e,this.active=!1,this.docked=!1,this.eventNamespace=this.selector.replace(/\s\./,""),this.stickOffset=0,this.onScrollCallbacks=[],this.onResizeCallbacks=[],this.onActivateActions=[],this.elementDirection=[],this.orginalElementData={},this.cachedData={},this.stuckedClass="stucked",this.initCache(),this.catchElementData(t)}return t.extend(a.prototype,{init:function(){return this.registerWindowScroll(),this.registerWindowResize(),this.onWindowResize(),this},registerWindowScroll:function(){var n=this;e(window).on("scroll."+this.eventNamespace,t.throttle(function(){n.isActive()&&n.isAvailable()&&t.each(n.onScrollCallbacks,function(t){t()})},10))},unregisterWindowScroll:function(){e(window).off("scroll."+this.eventNamespace)},getOutsideViewPoint:function(t){var e=this.getScrollPosition(),n=this.getBottom(t),i=this.getTop(t),o=this.getHeight(t);return e>=n?0:e<i?100:100*(n-e)/o},registerWindowResize:function(){var n=this;this.addResizeCallback(this.onWindowResize.bind(this)),this.addResizeCallback(this.resetStuckedWidth.bind(this)),e(window).on("resize",t.debounce(function(){t.each(n.onResizeCallbacks,function(t){t()})},100))},addResizeCallback:function(t){this.onResizeCallbacks.push(t)},resetStuckedWidth:function(){t.each(e("."+this.stuckedClass),function(t){var n=e(t);n.width(n.parent().outerWidth(!0))})},onWindowResize:function(){this.reset(),this.clearCache(),this.isAvailable()?this.setActive(!0):this.isActive()&&this.setActive(!1)},onScroll:function(t,n,i){var o="DOWN",a=e(window).scrollTop(),s=this.getWrapper(t).offset();a+n<(s?s.top:0)&&(o="UP"),this.elementDirection[t]&&this.elementDirection[t]===o||(i(o,t),this.elementDirection[t]=o)},toggleStuck:function(t,e,n){var i=this.getElement(e),o=this.getWrapper(e),a="DOWN"===t,s=a?i.outerHeight(!0):"",r=a?i.outerWidth(!0):"",l=a?n:"";o.height(s),i.toggleClass(this.stuckedClass,a).width(r).css("top",l)},shrinkWithScroll:function(t,e){t=t||1.5;var n=null,i=this,o=i.getHeight(this.selector);i.onResizeCallbacks.push(function(){o=i.getHeight(i.selector)}),e&&(this.catchElementData(e),n=this.getElement(e)),this.onWindowScroll(function(){var e,a,s=i.getElement(i.selector),r=i.getElementScroll(i.selector);e=o-r/t,r<o&&(s.height(e),null!==n&&(a=r/i.getHeight(i.selector),n.css("opacity",a)))})},getElementScroll:function(t){var e=this.getScrollPosition(),n=this.getTop(t);return e<n?0:e-n},initCache:function(){this.cachedData={elements:{},top:{},bottom:{}}},clearCache:function(){this.initCache()},getElement:function(n){return t.has(this.cachedData.elements,n)||(this.cachedData.elements[n]=e(n)),this.cachedData.elements[n]},getWrapper:function(t){return this.getElement(t+"-wrapper")},getHeight:function(t){return this.getElement(t).outerHeight(!0)},getHeightFixed:t.memoize(function(t){return this.getHeight(t)}),getTop:function(t){var e=this.getElement(t).offset();return e?e.top:0},getBottom:function(e){return t.has(this.cachedData.bottom,e)||(this.cachedData.bottom[e]=this.getTop(e)+this.getHeight(e)),this.cachedData.bottom[e]},getCssValue:function(t,e){return parseFloat(this.getElement(t).css(e))},getPassedthrough:function(t,e){e=e||this.getHeight(t);var n=this.getScrollPosition(),i=this.getTop(t);return n>=i+e?100:n<=i?0:100*(n-i)/e},getScrollPosition:function(){return e(window).scrollTop()},onWindowScroll:function(t){this.onScrollCallbacks.push(t)},isAvailable:function(){return!!this.activateOnMobile||!this.isMobile()},isMobile:function(){return!(4===n.getGroup()&&!n.isFixedWidthLayout())},onStickySideScroll:function(t,e,n,i){i=i||0;var o="UP",a=this.getElement(t),s=i-this.stickOffset,r=i;"before"===n?(s+=this.getTop(e),r+=this.getHeight(e)+this.getCssValue(e,"bottom")):s+=this.getBottom(e),this.getScrollPosition()+a.outerHeight(!0)>=s&&(o="DOWN"),a.hasClass(this.stuckedClass)&&"DOWN"===o?(a.toggleClass(this.stuckedClass,!1).css({top:"",bottom:r,position:"absolute"}),this.dock(),this.unregisterWindowScroll()):this.elementDirection[e]&&this.elementDirection[e]!==o&&a.toggleClass(this.stuckedClass,!0).css({top:this.stickOffset,bottom:"",position:""}),this.elementDirection[e]=o},reset:function(){var e=this;t.each(this.orginalElementData,function(t,n){e.getElement(n).attr("class",t.class).attr("style",t.style)})},runActivateActions:function(){t.each(this.onActivateActions,function(t){t()})},onActivate:function(t){this.onActivateActions.push(t)},isActive:function(){return this.active},setActive:function(t){this.active=t,this.isActive()?this.runActivateActions():this.reset()},isDocked:function(){return this.docked},dock:function(){this.docked=!0},undock:function(){this.docked=!1},start:function(){this.active=!0},stop:function(){this.active=!1},catchElementData:function(t){var e=this.getElement(t);this.orginalElementData[t]={class:e.attr("class")?e.attr("class"):"",style:e.attr("style")?e.attr("style"):""}},slideUpDownWith:function(t,e){e=e||1;var n=this,i=this.selector;return this.onWindowScroll(function(){var o=n.getPassedthrough(t),a=Math.floor(n.getHeight(i)*o/-100*e);n.getElement(i).css("top",a)}),this},showOnSlideUp:function(t){var e=this,n=this.selector,i=this.getWrapper(this.selector).height(),o=e.getScrollPosition();return t=t||i,this.onWindowScroll(function(){if(e.getElement(n).hasClass(e.stuckedClass)){var a=e.getScrollPosition();a+10*t<o?(e.getElement(n).css("top",0),o=a):a>o&&(e.getElement(n).css("top",-2*i),o=a)}}),this},onPassedThrought:function(t,e){var n=this.selector,i=this;return this.onWindowScroll(function(){if(i.isActive()){var o="top"===t?i.getPassedthrough(n):i.getOutsideViewPoint(n);e(o)}}),this},stopBefore:function(t,e){var n=this,i=this.selector;return this.catchElementData(t),this.onActivate(function(){n.getElement(t).addClass("absolute-bottom")}),this.onWindowScroll(function(){n.onStickySideScroll(i,t,"before",e)}),this},stopAtBottomOf:function(t,e){var n=this,i=this.selector;return this.catchElementData(t),this.onWindowScroll(function(){n.onStickySideScroll(i,t,"bottom",e)}),this},stick:function(t){t=t||0,this.stickOffset=t;var e=this,n=this.selector;return this.catchElementData(n+"-wrapper"),this.onWindowScroll(function(){e.onScroll(n,t,function(n,i){e.toggleStuck(n,i,t)})}),this},matchHeightWith:function(t){this.catchElementData(t);var e=this.selector;this.isAvailable()&&this.getElement(e).height(this.getHeight(t))}}),a}),define("component/story-way-points-collection",["lodash","jquery"],function(t,e){function n(t){this.storyWayPoints=[],this.html="",this.id=t}return t.each(["init","reset","runActivateActions","clearCache"],function(t){n.prototype[t]=function(){return this.callStoryWayPointsMethod(t,arguments),this}}),t.extend(n.prototype,{callStoryWayPointsMethod:function(e,n){t.each(this.getStoryWayPoints(),function(t){t[e].apply(t,n)})},stop:function(){this.callStoryWayPointsMethod("stop",arguments)},start:function(){this.callStoryWayPointsMethod("start",arguments)},add:function(t){return this.storyWayPoints.push(t)},getStoryWayPoints:function(){return this.storyWayPoints}}),n}),define("component/story-detail-way-points-collection",["lodash","jquery","common/util/extends","component/story-way-points","component/story-way-points-collection","util/content-loader-event-handler","model/geolocation"],function(t,e,n,i,o,a,s){function r(){o.apply(this,arguments),this.setup(),this.init(),r.instances[this.id]=this}return t.extend(r,{instances:{},getBlockInstance:function(e){return!!t.has(r.instances,e)&&r.instances[e]},getAllInstances:function(){return r.instances}}),n(r,o,{setup:function(){this.initHeroBanner(),this.shouldShowAds()&&this.initStickyAds()},initStickyAds:function(){var t=this.id,n=!1,o=new i(t+" .sticky-side"),s=new i(t+" .top-leaderboard"),r=new i(t+" .secondary-content"),l=o.getHeight()+e(t+" .bottom-sticked-side-wrapper").height()+100,c=o.getHeight(".topbar")+16;s.stick().slideUpDownWith(t+" .hero-unit",1),r.matchHeightWith(t+" .primary-content"),this.add(s),this.add(r),e(t+" .primary-content").height()>l&&(o.stick(c).stopBefore(t+" .bottom-sticked-side-wrapper"),this.add(o),n=!0);var d=function(i,a,s){r.matchHeightWith(t+" .primary-content"),!n&&e(t+" .primary-content").height()>l&&(o.stick(c).stopBefore(t+".bottom-sticked-side-wrapper"),o.runActivateActions(),n=!0)};r.onActivate(d),a.on(a.ACTION_LAZY_LOADED_CONTENTS,d)},initHeroBanner:function(){var t=this.id,e=new i(t+" .hero-unit",!0);e.shrinkWithScroll(2,t+" .hero-unit-image-overlay-3"),this.add(e)},shouldShowAds:function(){return!this.isAdvertisingDisabled()},isAdvertisingDisabled:function(){return void 0!==window.advertising&&void 0!==window.advertising.adsDisabled&&!0===window.advertising.adsDisabled}}),r}),define("common/model/story/story-by-id",["lodash","common/util/extends","common/model/story/story"],function(t,e,n){function i(t){n.call(this,t)}return e(i,n,{URLScheme:"/{id}"}),i}),define("common/view/entity/column",["lodash","common/util/extends","common/view/entity/habitat"],function(t,e,n){function i(t){n.call(this,t)}return e(i,n,{parseHabitatData:function(){this.set("leadImage",this.getArrayNestedAsset("assetImage"))}}),i}),define("common/view/model/heading",["lodash","common/util/extends","common/view/model/base"],function(t,e,n){function i(t){n.call(this,t)}return e(i,n,{setViewData:function(){var e=this.getEntity(),n=t.clone(e);n.heading=e.get("title",n.heading),this.viewData=n}}),i}),define("common/view/model/hero-unit/base",["lodash","common/util/extends","common/view/model/base","common/view/model/heading","common/view/model/image"],function(t,e,n,i,o){function a(t){n.call(this,t)}return e(a,n,{setViewData:function(){var e=this.getEntity(),n=t.clone(e),a=e.get("image"),s={format:{x:624,y:351}},r=this.config.get("showIntro",!1);if(e.get("heading")){var l={heading:e.get("heading",""),context:e.get("context",!1),intro:!1};!0===r&&(l.intro=e.get("intro","")),n.heading=new i(this.config).setSourceData(l)}s&&a&&(n.image=new o(s).setSourceData(t.extend({class:"responsive-hero","fixed-width-format":"wwfeatures-1280-640"},a))),n.class=e.get("class","")+" "+this.config.get("class",""),n.isVideo=function(){return"video"===e.get("class")},this.viewData=n}}),a}),define("common/view/model/context/story",["lodash","common/util/extends","common/view/model/base","common/view/entity/story","common/view/entity/collection","common/view/entity/destination","common/view/entity/tag","common/view/entity-URL-router","common/helper/domain-brand-mapper","common/util/string-extension","common/util/logger"],function(t,e,n,i,o,a,s,r,l,c,d){function u(t){n.call(this,t)}return e(u,n,{setEntity:function(t){this.entity=new i(t)},setViewData:function(){var e,n;switch(this.config.get("contextType",!1)){case"destination":e=this.createDestinationContext();break;case"collection":n=this.createCollectionContext();break;case"domain":n=this.createDomainContext();break;case"tags":n=this.createTagContext();break;case"destination-and-tag":e=this.createDestinationAndTagContext();break;case"any":n=this.getAnyContext();break;default:e=[]}t.isUndefined(n)||!1===n||(e=[n]),e&&(this.viewData={contextItems:e})},getAnyContext:function(){var t;return(t=this.createCollectionContext())?t:(t=this.createTagContext())||void 0},createDestinationAndTagContext:function(){var t=this.createDestinationContext(),e=this.createTagContext(),n=[];if(!1!==t){var i=function(){return!0},o={isItemCollection:i,class:"destination",subItems:t};n.push(o)}return!1!==e&&n.push(e),n},createDestinationContext:function(){var t=this.getEntity(),e=this.config,n=t.get("location",!1),i=!1;if(null!==n&&!1!==n&&n.length>0){var o=n[0],a=e.get("maxDepth",4);i=this.getDestinationContextItems(o,a)}return i},getDestinationContextItems:function(t,e){var n=[];return this.getDestinationContextItem(n,t,1,e),n},getDestinationContextItem:function(t,e,n,i){var o=new a(e),s=o.get("parent",!1);null!==s&&!1!==s&&s.length>0&&s[0]instanceof Object&&n<i&&this.getDestinationContextItem(t,s[0],n+1,i),t.push(this.createContextItem(o.get("name",""),r.getURL(o.get("id","")),""))},createTagContext:function(){var e,n,i,o=this.getEntity(),a=o.get("tags",!1);return!(!t.isArray(a)||!t.isObject(t.first(a)))&&(i=new s(a[0]),e=i.get("name",""),n=r.getURL(i.get("id","")),this.createContextItem(e,n,""))},createCollectionContext:function(){var e,n,i,a=this.getEntity(),s=a.get("collection");if(t.isObject(s))return e=new o(s),n=e.get("name",""),i=r.getURL(e.get("id","")),this.createContextItem(n,i,"")},createDomainContext:function(){var t=this.getEntity(),e=r.getURL(t.get("id","")),n=l.getBrand(e);if(!1===n)return!1;var i="BBC "+n.ucfirst(),o="/"+n,a="brand-"+n+" context-heading";return this.createContextItem(i,o,a)},createContextItem:function(t,e,n){return{context:t,"context-url":e,"context-class":n}}}),u}),define("common/view/model/hero-unit/link/base",["lodash","common/util/extends","common/view/model/base"],function(t,e,n){function i(t){n.call(this,t)}return e(i,n,{setViewData:function(){var e=this.getEntity(),n=t.clone(e);this.viewData=n}}),i}),define("common/view/model/hero-unit/link/destination",["lodash","common/util/extends","common/view/entity/destination","common/view/model/base","common/view/model/hero-unit/link/base","common/view/entity-URL-router"],function(t,e,n,i,o,a){function s(t){i.call(this,t)}return e(s,i,{setEntity:function(t){this.entity=new n(t)},setViewData:function(){for(var t=this.getEntity(),e=this.config,n=t.getDestinationRelationshipArray(e.get("maxDepth",2)),i={url:a.getURL(t.get("id","")),name:""},s=n.length-1;s>-1;s--){var r=n[s];i.name+=r.get("name",""),0!==s&&(i.name+=", ")}return""!==i.name&&(this.viewData=new o(this.config).setSourceData(i)),!1}}),s}),define("common/view/model/hero-unit/story",["lodash","common/util/extends","common/view/entity/story","common/view/model/base","common/view/model/hero-unit/base","common/view/model/context/story","common/view/model/hero-unit/link/destination","common/view/entity-URL-router"],function(t,e,n,i,o,a,s,r){function l(t){i.call(this,t)}return e(l,i,{setEntity:function(t){this.entity=new n(t)},setViewData:function(){this.viewData=this.getHeroUnit()},getHeroUnit:function(){var t=this.getEntity();return new o(this.config).setSourceData(this.getHeroUnitData(t))},getHeroUnitData:function(e){var n={heading:e.get("headlineLong"),image:e.get("leadImage"),"icon-type":e.get("iconType"),context:new a(this.config).setSourceData(this.getRawData())};if(this.config.get("use-image-override")&&(n.image=e.get("indexImageOverride")),this.config.get("is-anchor")&&(n.url=r.getURL(e.get("id"))),this.config.get("lead-element-possible",!1)&&("video"===e.get("type")||"image"===e.get("type")&&!1!==e.get("mainIBroadcastImageGallery",!1))&&t.extend(n,{class:"video"}),!0===this.config.get("include-location")){var i=e.get("location");null!==i&&!1!==i&&i.length>0&&t.extend(n,{"hero-unit-location":new s(this.config).setSourceData(i[0])})}return n}}),l}),define("common/view/model/source-attribution",["lodash","common/util/extends","common/view/model/base","common/view/entity/author"],function(t,e,n,i){function o(t){n.call(this,t)}return e(o,n,{setEntity:function(t){this.entity=new i(t)},setViewData:function(){var e=this.getEntity(),n=t.clone(e);n.name=e.get("name",""),this.viewData=n}}),o}),define("common/view/model/share-tools/base",["lodash","common/util/extends","common/view/model/base","common/config"],function(t,e,n,i){function o(t){n.call(this,t)}return e(o,n,{setViewData:function(){var e=this.getEntity(),n=t.clone(e),i=e.get("title",""),o=e.get("url","");if(""===i||""===o)return void(this.viewData={});n.title=e.get("heading","");var a=encodeURIComponent(i),s=this.getTwitterUserName();n.shareItems=[{text:"facebook",url:"https://www.facebook.com/sharer/sharer.php?u="+o+"&t="+a,"icon-class":"gelicon--facebook",class:"facebook"},{text:"Twitter",url:"https://twitter.com/intent/tweet?text="+a+"&amp;url="+e.get("url","")+(!1!==s?"&via="+s:""),"icon-class":"gelicon--twitter",class:"twitter"},{text:"Google +",url:"https://plus.google.com/share?url="+o,"icon-class":"gelicon--google-plus",class:"google"},{text:"Email",url:"mailto:?subject=Shared from BBC:"+a+"&body="+o,"icon-class":"gelicon--mail",class:"email"}],this.viewData=n},getTwitterUserName:function(){var e=i.get();return!!t.has(e,"socialLinks.twitter.username")&&e.socialLinks.twitter.username}}),o}),define("common/view/model/share-tools/story",["lodash","common/util/extends","common/view/model/base","common/view/entity/story","common/view/model/share-tools/base","common/view/entity-URL-router"],function(t,e,n,i,o,a){function s(t){n.call(this,t)}return e(s,n,{setEntity:function(t){this.entity=new i(t)},setViewData:function(){var t=this.getEntity(),e=(new o).setSourceData({title:t.get("headlineShort"),heading:this.config.get("heading"),url:a.getFullURL(t.get("id"))});this.viewData=e}}),s}),define("common/view/model/promo-group/base",["lodash","common/util/extends","common/view/model/base","common/view/model/meta-data/advertising"],function(t,e,n,i){function o(t){n.call(this,t)}return e(o,n,{setViewData:function(){var t=this.getEntity(),e={id:this.config.get("id",""),class:this.config.get("class",""),title:t.get("title",""),"promo-group":{class:this.config.get("class",""),items:t.get("items",[])}};e["promo-group"].items=this.insertAdSlotsIntoList(this.config.get("adSlots",[]),e["promo-group"].items),this.viewData=e},insertAdSlotsIntoList:function(e,n){var i=t.cloneDeep(n);return t.each(e,function(t,e){i.splice(t.index,0,this.getAdSlot(t.slotId,t))},this),i},getAdSlot:function(t,e){return{"ad-slot":(new i).getAdSlot(t,e)}}}),o}),define("common/view/model/link-box/base",["lodash","common/util/extends","common/view/model/base","common/view/entity/base"],function(t,e,n,i){function o(t){n.call(this,t)}return e(o,n,{setViewData:function(){var e=this.getEntity(),n=t.clone(e);this.viewData=n}}),o}),define("common/view/model/link-box/tag",["lodash","common/util/extends","common/view/model/base","common/view/entity/tag","common/view/entity-URL-router","common/view/model/link-box/base"],function(t,e,n,i,o,a){function s(t){n.call(this,t)}return e(s,n,{setEntity:function(t){this.entity=new i(t)},setViewData:function(){var t=this.getEntity(),e=this.config,n={class:e.get("class",""),title:t.get("name",""),icon:e.get("icon",""),url:o.getURL(t.get("id",""))};this.viewData=new a(e).setSourceData(n)}}),s}),define("common/view/model/link-box/destination",["lodash","common/util/extends","common/view/model/base","common/view/entity/destination","common/view/entity-URL-router","common/view/model/link-box/base"],function(t,e,n,i,o,a){function s(t){n.call(this,t)}return e(s,n,{setEntity:function(t){this.entity=new i(t)},setViewData:function(){var t=this.getEntity(),e=this.config,n={class:e.get("class",""),title:t.get("name",""),icon:e.get("icon",""),url:o.getURL(t.get("id",""))};this.viewData=new a(e).setSourceData(n)}}),s}),define("common/view/model/promo-unit/base",["lodash","common/util/extends","common/view/model/base","common/view/model/image","common/view/model/link-box/tag","common/view/model/link-box/destination"],function(t,e,n,i,o,a){function s(t){n.call(this,t)}return e(s,n,{setViewData:function(){var e=this.getEntity(),n=t.clone(e),o=e.get("image"),a={class:"responsive",format:{x:"224",y:"126"}},s=this.config.get("image",{}),r=t.merge(a,s),l=e.get("tags"),c=e.get("destinations");n["icon-type"]=e.get("iconType"),r&&o&&(o=t.extend({iconType:e.get("iconType",""),replaceUrl:n.url,class:r.class},o),n.image=new i(t.extend({includeCaption:!1},r)).setSourceData(o));var d=[];!1!==c&&(d=d.concat(this.getDestinationLinkBoxes(c.slice(0,1)))),!1!==l&&(d=d.concat(this.getTagLinkBoxes(l))),n.tags={items:d},n.class=this.config.get("class",""),n.useAlternativeLayout=function(){return"alternative"===n.class.substring(0,11)},this.viewData=n},getDestinationLinkBoxes:function(e){var n=[];return t.each(e,function(t){n.push(new a(this.config.get("linkBox",{})).setSourceData(t))},this),n},getTagLinkBoxes:function(e){var n=[];return t.each(e,function(t){n.push(new o(this.config.get("linkBox",{})).setSourceData(t))},this),n}}),s}),define("common/view/model/promo-group/builder",["lodash","common/util/extends","common/view/model/base","common/view/model/promo-group/base","common/view/model/promo-unit/base"],function(t,e,n,i,o){function a(t){n.call(this,t)}return e(a,n,{setViewData:function(){var t=(this.getEntity(),{});t=this.getPromoGroup(),this.viewData=t},getPromoGroup:function(){return new i(this.config.get("promoGroup",this.config)).setSourceData({title:this.getTitle(),items:this.getPromoUnits(this.getDataItems())})},getTitle:function(){var t=this.getEntity(),e=this.config,n=t.get("title",""),i=e.get("titleOverride",!1);return!1!==i?i.replace("{title}",n):n},getDataItems:function(t){return this.getEntity().get("items",[])},getPromoUnits:function(e){var n=[],i=this.config.get("groupEnd",e.length);return t.each(e,function(t,e){var o=this.getPromoUnit(t);if(!1!==o&&n.push(o),n.length>=i)return!1},this),n},getPromoUnit:function(t){return new o(this.config.get("promoUnit",{})).setSourceData(t)}}),a}),define("common/view/model/promo-unit/story",["lodash","common/util/extends","common/view/model/base","common/view/entity/story","common/view/entity-URL-router","common/view/model/promo-unit/base","common/view/model/context/story","common/util/logger"],function(t,e,n,i,o,a,s,r){function l(t){n.call(this,t)}return e(l,n,{setEntity:function(t){this.entity=new i(t)},setViewData:function(){var e=this.getEntity(),n=this.config,i=n.get("contextType",!1),s=n.get("useLongHeadline",!0),r={image:e.get("indexImageOverride"),url:o.getURL(e.get("id","")),iconType:e.get("iconType"),tags:e.get("tags",[]),destinations:e.get("location",[]),summary:e.get("summaryLong","")};r.title=!0===s?e.get("headlineLong",""):e.get("headlineShort",""),!1!==i&&t.extend(r,{context:this.getContext(i)}),this.viewData=new a(n).setSourceData(r)},getContext:function(t){return new s(this.config).setSourceData(this.getRawData())}}),l}),define("common/view/entity/external-promotion",["lodash","common/util/extends","common/view/entity/habitat","common/helper/icon-type-helper"],function(t,e,n,i){function o(t){n.call(this,t)}return e(o,n,{parseHabitatData:function(){this.set("leadImage",this.getArrayNestedAsset("assetImage")),this.map("tag","tags"),this.map("linkUrl","url"),this.set("iconType",i.getIconType("external"))}}),o}),define("common/view/model/promo-unit/external-promotion",["lodash","common/util/extends","common/view/model/base","common/view/entity/external-promotion","common/view/entity-URL-router","common/view/model/promo-unit/base"],function(t,e,n,i,o,a){function s(t){n.call(this,t)}return e(s,n,{setEntity:function(t){this.entity=new i(t)},setViewData:function(){var t=this.getEntity(),e=this.config,n=(e.get("contextType",!1),e.get("useLongHeadline",!0)),i={image:t.get("leadImage"),url:t.get("url"),iconType:t.get("iconType"),tags:t.get("tags",[])};i.title=!0===n?t.get("summaryLong",""):t.get("summaryShort",""),this.viewData=new a(e).setSourceData(i)}}),s}),define("common/view/model/promo-group/story",["lodash","common/util/extends","common/view/model/promo-group/builder","common/view/model/promo-unit/story","common/view/model/promo-unit/external-promotion","common/view/entity/habitat"],function(t,e,n,i,o,a){function s(t){n.call(this,t)}return e(s,n,{getPromoUnit:function(t){var e=new a(t),n=!1;if(e.get("id")!==this.config.get("excludedStoryId"))switch(e.get("entityType")){case"external":n=new o(this.config.get("promoUnit",{})).setSourceData(t);break;default:n=new i(this.config.get("promoUnit",{})).setSourceData(t)}return n},getDataItems:function(){return this.getEntity().get("stories",[])}}),s}),define("common/view/model/ibroadcast-gallery",["lodash","common/util/extends","common/view/entity/ibroadcast-gallery","common/view/model/base","common/view/model/image","common/util/logger","common/util/request"],function(t,e,n,i,o,a,s){function r(t){i.call(this,t)}return e(r,i,{setEntity:function(t){this.entity=new n(t)},setViewData:function(){var e=this.getEntity(),n={},i=(e.get("urn",""),e.get("images",[]));n.id=e.get("id"),t.isArray(i)&&(n["gallery-images"]=[],t.each(i,function(t,e){n["gallery-images"][e]=this.createGalleryImage(t)},this)),n["show-ads"]=this.checkAdStatus(),this.viewData=n},createGalleryImage:function(e){var n=this.config.get("image",{captionStyle:"long",format:{portraitPermitted:!0,landscape:{x:"624",y:"351"}}});return n=t.merge({captionStyle:"long",format:{portraitPermitted:!0}},n),new o(n).setSourceData(e)},checkAdStatus:function(){var e=this.config.get("ibroadcast_gallery");return!(!1===e||!t.has(e,"showAds")||!0!==e.showAds||!0===s.get().isUK)}}),r}),define("common/view/model/video/video",["lodash","common/util/extends","common/view/model/base","common/view/entity/video","common/view/model/image"],function(t,e,n,i,o){function a(t){n.call(this,t)}return e(a,n,{setEntity:function(t){this.entity=new i(t)},setViewData:function(){var e=this.getEntity(),n=t.clone(e),i=this.config,a=i.get("image"),s=e.get("image");if(a&&s){var r=new o(a);r.setSourceData(s),n["image-url"]=r.getViewData().url}i.get("id")?n.id=i.get("id"):n.id=e.get("vpid"),n.class=i.get("class",""),n["brand-color"]=i.get("brandColor",""),n.vpid=e.get("vpid",""),this.viewData=n}}),a}),define("common/helper/strip-tags",[],function(){return{stripTags:function(t,e){e=(((e||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var n=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,i=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;return t.replace(i,"").replace(n,function(t,n){return e.indexOf("<"+n.toLowerCase()+">")>-1?t:""})}}}),define("common/helper/article-body-renderer",["lodash","common/view/entity/story","common/view/entity/ibroadcast-gallery","common/view/model/meta-data/story","common/view/model/image","common/view/model/ibroadcast-gallery","common/view/model/video/video","common/view/entity/config","common/helper/strip-tags","templates","common/util/logger"],function(t,e,n,i,o,a,s,r,l,c,d){var u=function(t,e){this.storyEntity=t,this.config=new r(e),this.setupPagingVars()};return t.extend(u.prototype,{setConfig:function(t){this.config=new r(t)},getConfig:function(){return this.config},setStoryEntity:function(t){t instanceof e&&(this.storyEntity=t)},getBody:function(){return this.body},setBody:function(t){this.body=t},render:function(){return this.setBody(this.storyEntity.get("bodyMarkdown","")),this.removeEmptyParagraphTags(),this.replaceInlineElements(),this.config.get("appendGallery",!1)&&this.appendGalleryImagesToStory(),this.dividePage(),this.getBody()},removeEmptyParagraphTags:function(){var t=this.getBody().replace(/<p><\/p>|<p>&nbsp;<\/p>/gi,"");this.setBody(t)},replaceInlineElements:function(){var t=this.getBody(),e=/{"image".*?}}/gi,n=/{"gallery".*?}}/gi,i=/{"video".*?}}/gi,o=/{"youtube".*?}}/gi,a=/{"magnify".*?}}/gi;t=t.replace(e,this.replaceInlineImage.bind(this)),t=t.replace(n,this.replaceInlineGallery.bind(this)),t=t.replace(i,this.replaceInlineVideo.bind(this)),t=t.replace(o,this.replaceInlineYoutube.bind(this)),t=t.replace(a,this.replaceInlineMagnify.bind(this)),this.setBody(t)},replaceInlineImage:function(e){var n,i,a=this.getElementProperties(e,"image");return t.has(a,"pid")?(n=this.storyEntity.getInlineImageData(a.pid),!1!==n?(i=new o(t.merge({format:{portraitPermitted:!0}},this.getConfig().get("image"))).setSourceData(t.extend(n,{iconType:"fullscreen"})),c["inline-image"](i)):""):""},replaceInlineGallery:function(e){var n,o,s,r=this.getElementProperties(e,"gallery");return t.has(r,"pid")?(n=this.storyEntity.getInlineGalleryData(r.pid),!1!==n?(o=new a(t.merge({format:{portraitPermitted:!0}},this.getConfig().get("image"))).setSourceData(n),s=(new i).setSourceData(this.storyEntity),c["inline-ibroadcast-image-gallery"](t.extend(o,{"meta-data":s}))):""):""},appendGalleryImagesToStory:function(){var t,e,i=this.storyEntity.get("mainIBroadcastImageGallery"),o=this.storyEntity.get("assetImage",[]);if(!1!==i&&(t=new n(i),(e=t.get("images"))instanceof Array&&e.length>0))return void this.appendImagesToBody(e);o instanceof Array&&o.length>1&&this.appendImagesToBody(o)},appendImagesToBody:function(e){var n=this.getBody();t.each(e,function(e,i){var a=new o(t.merge({captionStyle:"long",format:{portraitPermitted:!0}},this.getConfig().get("image"))).setSourceData(t.extend(e,{iconType:"fullscreen"}));n+=c["gallery-inline-image"](a)},this),this.setBody(n)},replaceInlineVideo:function(e){var n,i,o,a=this.getElementProperties(e,"video");return t.has(this.config,"module")&&t.has(this.config.module,"brandColor")&&(o=this.config.module.brandColor),t.has(a,"pid")?(n=this.storyEntity.getInlineVideoData(a.pid),!1!==n?(i=new s({class:"inline-video",brandColor:o}).setSourceData(n),c["inline-video"](i)):""):""},replaceInlineYoutube:function(e){var n,i=this.getElementProperties(e,"youtube");return t.has(i,"id")?(n={id:i.id},c["inline-youtube"](n)):""},replaceInlineMagnify:function(e){var n,i=this.getElementProperties(e,"magnify");return t.has(i,"id")?(n={id:i.id},c["inline-magnify"](n)):""},getElementProperties:function(t,e){var n=JSON.parse(t);return n instanceof Object&&this.getElementDataWithType(n,e)},getElementDataWithType:function(e,n){return!!t.has(e,n)&&e[n]},setupPagingVars:function(){this.pages=["",""],this.blockTags=["table","div","blockquote","pre","p","ul","ol","dl","iframe"],this.inlineTags=["br","br /","li","strong","a","em","tr","th","td","dd","dt","img"],this.divideOnBlock=6},setPages:function(t){this.pages=t},getFirstHalf:function(){return this.pages[0]},getSecondHalf:function(){return this.pages[1]},dividePage:function(){var e=this.getBody(),n=l.stripTags(e,"<"+this.blockTags.join("><")+"><"+this.inlineTags.join("><")+">"),i=0,o=0,a=["",""],s=this.parseToBlocks(n),r=s.length,c=0
;r>this.divideOnBlock-1&&(r=this.divideOnBlock),t.each(s,function(t,e){var n=this.countBlock(t);a[i]=a[i]+t,o+=n,c===r&&0===i&&(i++,o=0),c++},this),this.setPages(a)},parseToBlocks:function(t){var e=new RegExp("<("+this.blockTags.join("|")+")>","gmi"),n=new RegExp("</("+this.blockTags.join("|")+")>","gmi");return t=t.replace(e,"<BLOCK>$&"),t=t.replace(n,"$&<BLOCK>"),t.split("<BLOCK>")},countBlock:function(t){return t=t.replace("</li>","</li>\n"),t.split(/\s+/).length}}),u}),define("common/view/model/story/image",["lodash","common/util/extends","common/view/model/base","common/view/entity/base","common/view/entity/column","common/view/entity/story","common/view/entity/collection","common/view/model/hero-unit/story","common/view/model/source-attribution","common/view/model/share-tools/story","common/view/model/promo-group/story","common/view/model/image","common/view/model/context/story","common/view/model/heading","common/view/model/ibroadcast-gallery","common/view/entity-URL-router","common/helper/article-body-renderer","common/util/logger"],function(t,e,n,i,o,a,s,r,l,c,d,u,p,h,m,f,g,b){function y(t){n.call(this,t)}return e(y,n,{setEntity:function(t){this.entity=new a(t)},setViewData:function(){this.viewData=this.getDefaultFields()},getDefaultFields:function(){var e=this.getEntity(),n=t.clone(e);return n.body=this.getArticleBody(),n["hero-unit"]=new r({"lead-element-possible":!0,contextType:"destination-and-tag"}).setSourceData(this.getRawData()),n.author=this.getAuthor(),n["publication-date"]=this.getFormattedDate(n.displayDate),n["related-stories"]=this.getRelatedStories(),n.shareTools=(new c).setSourceData(e),"image"===e.get("type")&&!1!==e.get("mainIBroadcastImageGallery")&&(n.heading=this.getHeading(),n.leadGallery=this.getFeaturedImagesGallery()),n},getArticleBody:function(){return new g(this.getEntity(),this.config).render()},getAuthor:function(){var t=this.getEntity(),e=t.get("author");return!!e&&new l(this.config).setSourceData(e)},getFormattedDate:function(t){var e=new Date(t),n=new Array("January","February","March","April","May","June","July","August","September","October","November","December"),i=e.getDate(),o=e.getMonth(),a=e.getFullYear();return i+" "+n[o]+" "+a},getRelatedStories:function(){var t=this.getEntity(),e=t.get("relatedStories");return!!e&&new d(this.config.get("relatedStories",{})).setSourceData({title:"Related Stories",stories:e})},getHeading:function(){var t=this.getEntity();return new h(this.config).setSourceData({heading:t.get("headlineLong"),intro:!1,context:new p({contextType:"destination-and-tag"}).setSourceData(this.getRawData())})},getFeaturedImagesGallery:function(){var t=this.getEntity(),e=t.get("mainIBroadcastImageGallery");return new m(this.config).setSourceData(e)}}),y}),define("common/view/model/story/video",["lodash","common/util/extends","common/view/model/story/image","common/view/model/heading","common/view/entity/story","common/view/model/video/video","common/view/model/context/story"],function(t,e,n,i,o,a,s){function r(t){n.call(this,t)}return e(r,n,{setViewData:function(){var t=this.getDefaultFields();t.leadVideo=this.getLeadVideo(),t.heading=this.getHeading(),t.shareTools=(new i).setSourceData({class:"small",title:"Share this article:",shareItems:t.shareTools.shareItems}),this.viewData=t},getLeadVideo:function(){var e=this.getEntity(),n=this.config,i=n.get("module"),o=!1;return i&&t.has(i,"brandColor")&&(o=i.brandColor),new a(t.extend({id:"video-lead-asset",brandColor:o,image:{format:{landscape:{x:"224",y:"125"}}}},this.config)).setSourceData(t.extend({image:e.get("leadImage")},e.get("leadVideo")))}}),r}),define("common/view/model/story/slideshow",["lodash","common/util/extends","common/view/model/story/image","common/view/model/heading","common/helper/article-body-renderer"],function(t,e,n,i,o){function a(t){n.call(this,t)}return e(a,n,{setViewData:function(){var t=this.getEntity(),e=this.getDefaultFields();e.intro=t.get("summaryLong",""),e.shareTools=(new i).setSourceData({class:"small",title:"Share this article:",shareItems:e.shareTools.shareItems}),this.viewData=e},getArticleBody:function(){return new o(this.getEntity(),t.extend({appendGallery:!0},this.config)).render()}}),a}),define("common/view/model/story/base",["lodash","common/util/extends","common/view/model/base","common/view/model/story/video","common/view/model/story/slideshow","common/view/model/story/image","common/view/entity/story","common/view/model/hero-unit/base"],function(t,e,n,i,o,a,s,r){function l(t){n.call(this,t)}return e(l,n,{setEntity:function(t){this.entity=new s(t)},setViewData:function(){var e,n=this.getEntity(),s=t.clone(n);switch(n.get("type")){case"video":e=new i(this.config);break;case"slideshow":e=new o(this.config);break;default:e=new a(this.config)}s=e.setSourceData(n),this.viewData=s}}),l}),define("common/interface/entity/video/video",["lodash","common/util/interface","common/interface/entity/base"],function(t,e,n){return new e("VideoEntity",n.methods.concat(["getImage","setImage","getId","getVpid","getTitle","setProvider","getProvider","getMediator"]))}),define("common/view/model-v2/video/stand-alone-html-element",["lodash","common/util/extends","common/view/model-v2/base","common/view/model-v2/image/html-element","common/entity/vanilla/image","common/interface/entity/video/video"],function(t,e,n,i,o,a){function s(){n.apply(this,arguments)}return e(s,n,{entityInterface:a,setViewData:function(){this.viewData={id:this.getId(),vpid:this.getEntity().getVpid(),mediator:this.getEntity().getMediator(),"image-url":this.getImageURL(),class:this.getConfig().get("class",""),"brand-color":this.getConfig().get("brandColor",""),"show-ads":this.getConfig().get("showAds",!0)}},getId:function(){var t=this.getEntity().getId();return this.getConfig().get("id")?this.getConfig().get("id"):this.getConfig().get("idPrefix")&&!1!==t?this.getConfig().get("idPrefix")+"-"+t:t},getImageURL:function(){var t=this.getConfig().get("image"),e=this.getConfig().get("placeholderImageOverride"),n=this.getEntity().getImage();if(!1===n&&e&&(n=new o({URL:e})),t&&n){var a=new i(n,t);return a.setSourceData({},!1),a.getViewData().url}return""}}),s}),define("common/view/model-v2/list/gallery",["lodash","common/util/extends","common/util/interface","common/view/model-v2/base","common/view/model-v2/image/html-element","common/interface/entity/list/base","common/interface/entity/image","common/util/logger","common/util/request"],function(t,e,n,i,o,a,s,r,l){function c(){i.apply(this,arguments)}return e(c,i,{entityInterface:a,setViewData:function(){this.viewData={id:this.getEntity().getId(),"gallery-images":this.getGalleryImages(),"show-ads":this.checkAdStatus()}},getGalleryImages:function(){var e=[],i={captionStyle:"long",format:{landscape:{x:"624",y:"351"}},isWatermarked:!0},a=this.getConfig().get("image"),r=t.merge(i,a);return t.each(this.getEntity().getListItems(),function(t,i){n.ensureImplements(t,s),t.setIconType("fullscreen"),e.push(new o(t,r).setSourceData({},!1))},this),e},checkAdStatus:function(){var e=this.getConfig().get("ibroadcast_gallery");return r.get().debug("IBroadcastGallery:checkAdStatus:isUK",l.get().isUK),!(!1===e||!t.has(e,"showAds")||!0!==e.showAds||!0===l.get().isUK)}}),c}),define("common/interface/entity/partner-promo",["lodash","common/util/interface","common/interface/entity/link"],function(t,e,n){return new e("PartnerPromoEntity",n.methods.concat(["getPartnerLogo","getDescription"]))});define("common/view/model-v2/promo/partner-promo",["lodash","common/util/extends","common/util/logger","common/view/model-v2/base","common/view/model-v2/image/html-element","common/interface/entity/partner-promo"],function(t,e,n,i,o,a){function s(){i.apply(this,arguments)}return e(s,i,{entityInterface:a,partnerLogoConfig:{format:{landscape:{x:88,y:31}},imageAnalyticsConfig:{elementId:"partner-logo",elementName:"Partner Logo"}},setViewData:function(){var t=this.getEntity(),e={title:t.getTitle(),description:t.getDescription(),URL:t.getURL(),partnerLogo:this.getImage(t.getPartnerLogo(),this.partnerLogoConfig),image:this.getImage(t.getImage(),{format:{landscape:{x:224,y:126}}})},n=this.getConfig().get("titleOverride",!1);n&&(e.title=n),this.viewData=e},getImage:function(e,n){var i=t.merge(this.getConfig().get("image",{}),n);return e?(e.setReplaceURL(this.getEntity().getURL()),new o(e,i).setSourceData(!1,{})):{}}}),s}),define("common/interface/entity/horizontal/partner-promo",["lodash","common/util/interface","common/interface/entity/partner-promo"],function(t,e,n){return new e("PartnerPromoEntity",n.methods.concat(["getVideo","getType","isEnabled"]))}),define("common/view/model-v2/promo/horizontal-partner-promo",["lodash","common/util/extends","common/util/logger","common/view/model-v2/promo/partner-promo","common/view/model-v2/video/stand-alone-html-element","common/interface/entity/horizontal/partner-promo","common/interface/entity/video/video","common/util/interface","common/view/model-v2/analytics/factory"],function(t,e,n,i,o,a,s,r,l){function c(){i.apply(this,arguments)}return e(c,i,{entityInterface:a,setViewData:function(){var t,e=this.getEntity();switch(this.partnerLogoConfig.format.useOriginal=!0,this.partnerLogoConfig.imageAnalyticsConfig.elementName=e.getTitle(),i.prototype.setViewData.apply(this,arguments),this.viewData.type=e.getType(),this.viewData["analytics-module-metadata"]=l.getModuleMetadata("horizontal-partner-promo"),!1!==e.getURL()&&e.getURL().length>0&&(t="Click here to find out more",this.viewData.moreInfoLink={URL:e.getURL(),text:t,"analytics-element-metadata":l.getElementMetadata("more-info",t)}),e.getType()){case"text":this.viewData.video=!1;break;case"video":this.viewData.video=this.configureVideo();break;default:n.get().warn("HorizontalPartnerPromoViewModel:setViewData:Unrecognised partner promo type",{id:e.getId(),type:e.getType()})}n.get().debug("Partner promo data",this.viewData)},configureVideo:function(){var e=this.getEntity(),n=e.getVideo();if(n)return r.ensureImplements(n,s),new o(n,t.extend({id:"partner-video",image:{format:{landscape:{x:"224",y:"125"}}},showAds:!1},this.getConfig().get("video",{}))).setSourceData({},!1)}}),c}),define("common/view/model-v2/document/article/body",["lodash","common/util/extends","common/util/logger","common/view/model-v2/base","common/view/model-v2/image/html-element","common/view/model-v2/video/stand-alone-html-element","common/view/model-v2/list/gallery","common/view/model-v2/promo/horizontal-partner-promo","common/interface/entity/document/article","common/helper/strip-tags","common/helper/advertising","common/helper/geo-location","templates"],function(t,e,n,i,o,a,s,r,l,c,d,u,p){function h(){i.apply(this,arguments),String.prototype.insertAt=function(t,e){return this.substr(0,t)+e+this.substr(t)}}return e(h,i,{entityInterface:l,setViewData:function(){this.setupPagingVars(),this.setBody(this.getEntity().getBody()),this.removeEmptyParagraphTags(),this.replaceInlineElements(),this.getConfig().get("appendGallery",!1)&&this.appendGalleryImagesToStory(),this.injectHorizontalPartnerModule(),this.injectNewsFeedModule(),this.injectCalloutBox(),this.dividePage(),this.viewData=this.getBody()},injectCalloutBox:function(){var e=this.getEntity().getCalloutBox(),n=this.getEntity().getType();if(!t.isUndefined(e)&&!1!==e&&"slideshow"!==n){for(var i=p["callout-box"](e),o=/<\/p>/gi,a=[];null!==(match=o.exec(this.getBody()));)a[a.length]=match.index+4;var s;switch(e.getPosition()){case"top":s=0;break;case"bottom":s=Math.max(0,a.length-4);break;default:s=Math.floor(a.length/2)}this.setBody(this.getBody().insertAt(a[s],i))}},injectNewsFeedModule:function(){var t,e=this.identifyStoryNewsFeedId(),n=this.getBody();!1!==e&&(t=p["news-feed-module-placeholder"]({"feed-id":e}),this.getConfig().get("appendGallery",!1)?n+=t:n=n.insert(this.getLocationInBodyText(8),t),this.setBody(n))},identifyStoryNewsFeedId:function(){var e,i,o=this.getEntity().getKeywords(),a=this.getConfig().get("news-feeds");if(t.has(o,"tags")&&t.isArray(o.tags)&&!1!==a){e=o.tags;for(var s=0;s<e.length;s++)if(n.get().debug("Tag",e[s]),i=e[s].toLowerCase(),t.contains(a,i))return i}return!1},getImageConfig:function(){var e={format:{portraitPermitted:!0},isWatermarked:!0};return t.merge(e,this.getConfig().get("image",{}))},getBody:function(){return this.body},setBody:function(t){this.body=t},removeEmptyParagraphTags:function(){var t=this.getBody().replace(/<p><\/p>|<p>&nbsp;<\/p>/gi,"");this.setBody(t)},injectHorizontalPartnerModule:function(){var e,n,i,o,a,s=this.getEntity().getHorizontal(),l=this.getConfig(),c=this.getBody(),d={brandColor:"#505050"};this.isHorizontalPartnerModuleRequired(s)&&(t.has(l,"horizontal-partner-module")&&(e=l["horizontal-partner-module"],t.has(e,"video-player-color")&&(d.brandColor=e["video-player-color"])),n=s.getPartner(),i=new r(n,{image:this.getImageConfig(),video:d}).setSourceData({},!1),o=p["inline-horizontal-partner-module"](i),this.getConfig().get("appendGallery",!1)?c+=o:(a=this.getLocationInBodyText(2),c=c.insert(a,o)),this.setBody(c))},getLocationInBodyText:function(t){for(var e,n,i=/<\/p>/gi,o=[];e=i.exec(this.getBody());)o.push(e.index);return n=o.length>=t+1?o[t]:o.length>0?o[o.length-1]:0,n+=4},isHorizontalPartnerModuleRequired:function(t){var e;return!(u.isUK()||!1===t||!t.isEnabled()||!1===(e=t.getPartner())||!e.isEnabled())},replaceInlineElements:function(){var t=this.getBody(),e=/{"image".*?}}/gi,n=/{"video".*?}}/gi,i=/{"gallery".*?}}/gi,o=/{"youtube".*?}}/gi,a=/{"magnify".*?}}/gi,s=this.getImageConfig();t=t.replace(e,this.replaceInlineImage.bind(this,s)),t=t.replace(i,this.replaceInlineGallery.bind(this,s)),t=t.replace(n,this.replaceInlineVideo.bind(this)),t=t.replace(o,this.replaceInlineYoutube.bind(this)),t=t.replace(a,this.replaceInlineMagnify.bind(this)),this.setBody(t)},replaceInlineImage:function(e,i){var a,s,r=this.getElementProperties(i,"image");return t.has(r,"pid")?(a=this.getEntity().getImage(r.pid),!1!==a?(a.setIconType("fullscreen"),s=new o(a,e).setSourceData({},!1),p["inline-image"](s)):""):(n.get().error("ArticleBodyRenderer:replaceInlineImage:Inline image missing expected properties",r),"")},replaceInlineGallery:function(e,i){var o,a,s=this.getElementProperties(i,"gallery");return t.has(s,"pid")?(o=this.getEntity().getGalleryImages(s.pid),!1!==o?(a=this.getGalleryViewData(o),a.adSlot=d.getAdSlot("mpu",{}),p["inline-ibroadcast-image-gallery"](a)):""):(n.get().error("ArticleBodyRenderer:replaceInlineGallery:Inline gallery missing expected properties",s),"")},appendGalleryImagesToStory:function(){var e,n,i=this.getEntity().getGalleryImages();i&&(e=this.getGalleryViewData(i),n=this.getBody(),t.each(e["gallery-images"],function(t){n+=p["gallery-inline-image"](t)},this),this.setBody(n))},getGalleryViewData:function(t){return new s(t,{image:this.getImageConfig()}).setSourceData({},!1)},replaceInlineVideo:function(e){var i,o,s,r=this.getElementProperties(e,"video");if(t.has(this.getConfig(),"module")&&t.has(this.getConfig().module,"brandColor")&&(s=this.getConfig().module.brandColor),t.has(r,"pid")&&t.has(r,"encoding")){if(!1!==(i=this.getEntity().getVideo(r.pid))){switch(r.encoding){case"ib2":i.setProvider("ibroadcast");break;case"mps":i.setProvider("mps")}return o=new a(i,{class:"inline-video",brandColor:s,image:this.getImageConfig()}).setSourceData({},!1),p["inline-video"](o)}return""}return n.get().error("ArticleBodyRenderer:replaceInlineVideo:Inline video missing expected properties",r),""},replaceInlineYoutube:function(e){var i,o=this.getElementProperties(e,"youtube");return t.has(o,"id")?(i={id:o.id},p["inline-youtube"](i)):(n.get().error("ArticleBodyRenderer:replaceInlineYoutube:Inline Youtube missing expected properties",o),"")},replaceInlineMagnify:function(e){var i,o=this.getElementProperties(e,"magnify");return t.has(o,"id")?(i={id:o.id},p["inline-magnify"](i)):(n.get().error("ArticleBodyRenderer:replaceInlineMagnify:Inline magnify missing expected properties",o),"")},getElementProperties:function(t,e){try{var i=JSON.parse(t);if(i instanceof Object)return this.getElementDataWithType(i,e)}catch(e){n.get().error("ArticleBodyRenderer:getElementProperties:Could not parse match "+t+", exception",e.message)}return!1},getElementDataWithType:function(e,n){return!!t.has(e,n)&&e[n]},setupPagingVars:function(){this.pages=["",""],this.blockTags=["table","div","blockquote","pre","p","ul","ol","dl","iframe"],this.inlineTags=["br","br /","li","strong","a","em","tr","th","td","dd","dt","img"],this.divideOnBlock=6},setPages:function(t){this.pages=t},getFirstHalf:function(){return this.pages[0]},getSecondHalf:function(){return this.pages[1]},dividePage:function(){var e=this.getBody(),n=c.stripTags(e,"<"+this.blockTags.join("><")+"><"+this.inlineTags.join("><")+">"),i=0,o=0,a=["",""],s=this.parseToBlocks(n),r=s.length,l=0;r>this.divideOnBlock-1&&(r=this.divideOnBlock),t.each(s,function(t,e){var n=this.countBlock(t);a[i]=a[i]+t,o+=n,l===r&&0===i&&(i++,o=0),l++},this),this.setPages(a)},parseToBlocks:function(t){var e=new RegExp("<("+this.blockTags.join("|")+")>","gmi"),n=new RegExp("</("+this.blockTags.join("|")+")>","gmi");return t=t.replace(e,"<BLOCK>$&"),t=t.replace(n,"$&<BLOCK>"),t.split("<BLOCK>")},countBlock:function(t){return t=t.replace("</li>","</li>\n"),t.split(/\s+/).length}}),h}),define("common/view/model-v2/promo/heading",["lodash","common/util/extends","common/view/model-v2/base","common/interface/entity/promo","common/view/model-v2/promo/context-heading","common/util/logger"],function(t,e,n,i,o,a){function s(){n.apply(this,arguments)}return e(s,n,{entityInterface:i,setViewData:function(){var t=(this.getEntity(),{heading:this.getEntity().getTitle(),intro:this.getConfig().get("intro"),context:this.getContext()});this.getConfig().get("showIntro")&&(t.intro=this.getEntity().getSummary()),this.viewData=t},getContext:function(){return new o(this.getEntity(),{type:this.getConfig().get("context")}).setSourceData({},!1)}}),s}),define("common/view/model-v2/promo/hero-unit",["lodash","common/util/extends","common/util/logger","common/interface/entity/promo","common/view/model-v2/base","common/view/model-v2/promo/heading","common/view/model-v2/image/html-element","common/view/model-v2/analytics/interaction-element-meta-data","common/entity/vanilla/analytics/interaction-element-meta-data","common/view/model-v2/analytics/module-meta-data","common/entity/vanilla/analytics/module-meta-data"],function(t,e,n,i,o,a,s,r,l,c,d){function u(){o.apply(this,arguments)}return e(u,o,{entityInterface:i,setViewData:function(){var t=this.getEntity(),e={"icon-type":this.getEntity().getIconType(),class:this.getConfig().get("class",""),image:this.getImage(),heading:this.getHeading(),isVideo:function(){return"video"===this.class}};!0===this.getConfig().get("hide-heading")&&(e.heading=!1),this.getConfig().get("is-anchor")&&(e.url=t.getURL(),e["analytics-module-metadata"]=new c(new d({module:"hero-unit"},this.getConfig().get("analyticsConfig",{}))).setSourceData({},!1),e["analytics-element-metadata"]=this.getLinkAnalytics()),this.viewData=e},getLinkAnalytics:function(){var e=this.getEntity(),n=this.getConfig();return new r(new l(t.merge({elementType:"hero",elementName:e.getTitle()},n.get("analyticsConfig",{}))),n.get("analyticsConfig",{})).setSourceData({},!1)},getImage:function(){if(this.getEntity().getImage()){var t,e=this.getEntity().getImage(),n={format:{x:624,y:351},isWatermarked:!0};return e.setClass("responsive-hero"),t=new s(e,n).setSourceData(t),t["fixed-width-format"]="wwfeatures-1280-640",t}},getHeading:function(){return new a(this.getEntity(),this.getConfig()).setSourceData({},!1)}}),u}),define("common/view/model-v2/promo/promo-module",["lodash","common/util/extends","common/util/logger","common/view/model-v2/base","common/view/model-v2/image/html-element","common/entity/vanilla/link/base","common/view/model-v2/link/link-box","common/view/model-v2/promo/context-heading","common/helper/domain-brand-mapper","common/interface/entity/promo"],function(t,e,n,i,o,a,s,r,l,c){function d(){i.apply(this,arguments)}return e(d,i,{entityInterface:c,setViewData:function(){var t={clientName:this.getEntity().getClientName(),title:this.getEntity().getTitle(),url:this.getEntity().getURL(),summary:this.getEntity().getSummary(),class:this.getConfig().get("class"),CTA:this.getCTA(),image:this.getImage(!1,{class:"responsive landscape",includeCaption:!1})};this.getConfig().get("include-logo")&&(t.logoImage=this.getImage(!0,{"use-image-tag":!0,format:{landscape:{x:88,y:31}}})),this.viewData=t},getCTA:function(){return new s(new a).setSourceData({title:"Click for more",URL:this.getEntity().getURL()})},getImage:function(t,e){var n=this.getEntity().getImage(t);return n.replaceUrl=this.getEntity().getURL(),!!n&&new o(n,e).setSourceData(!1,{})}}),d}),define("common/view/model-v2/document/article/hero-unit",["lodash","common/util/extends","common/util/logger","common/view/model-v2/promo/hero-unit","common/interface/entity/document/article","common/view/model-v2/promo/promo-module"],function(t,e,n,i,o,a){function s(){i.apply(this,arguments)}return e(s,i,{entityInterface:o,setViewData:function(){i.prototype.setViewData.apply(this),this.viewData.test=!0,this.viewData["promo-module"]=this.getPromoModule()},getPromoModule:function(){if(this.getEntity().getPromoModule())return new a(this.getEntity().getPromoModule(),this.getConfig().get("promo-module",{"include-logo":!0})).setSourceData({},!1)}}),s}),define("common/interface/entity/person",["lodash","common/util/interface","common/interface/entity/base"],function(t,e,n){return new e("PersonEntity",n.methods.concat(["getId","getName","getBio","getAvatar"]))}),define("common/view/model-v2/person/source-attribution",["lodash","common/util/extends","common/view/model-v2/base","common/interface/entity/person","common/view/model-v2/image/html-element"],function(t,e,n,i,o){function a(){n.apply(this,arguments)}return e(a,n,{entityInterface:i,setViewData:function(){var e=!1,n=this.getConfig().get("image");if(t.has(n,"show")&&n.show){var i=this.getEntity().getAvatar();i&&(e=new o(i,n).setSourceData())}this.viewData={title:this.getEntity().getName(),name:this.getEntity().getName(),class:this.getConfig().get("class",""),avatar:e,bio:this.getEntity().getBio()}}}),a}),define("common/interface/entity/banner",["lodash","common/util/interface","common/interface/entity/link"],function(t,e,n){return new e("Link",n.methods.concat(["getBrandId"]))}),define("common/helper/brand-image",["lodash","common/config","common/util/logger"],function(t,e,n){var i=function(){var n=e.get();return!!(t.has(n,"static")&&t.has(n.static,"url")&&t.has(n.static,"brand-img-dir"))&&n.static.url+n.static["brand-img-dir"]},o=function(e,n,i){var o={desktop:"-desktop.jpg",tablet:"-tablet.jpg",mobile:"-mobile.jpg"},a={};return t.each(o,function(o,s){!function(){if(t.isUndefined(i)||"full"===i||!t.has(i,s))a[s]={},a[s]["banner-full"]=e+n+"-full"+o;else{var r,l=1;r=i[s],!t.isUndefined(r)&&t.isNumber(r)&&(l=r),a[s]={},t.times(l,function(t){var i=t+1;a[s]["banner-"+i]=e+n+"-"+i+o})}}()},this),a};return{getResponsiveBannerImagesForBrand:function(t,e){return this.getResponsiveImagesForBrand(t,"banner",e)},getResponsiveImagesForBrand:function(e,n,a){var s,r=i(),l=e.replace(/\//g,".");return!(!1===r||!t.isString(l)||void 0===n)&&(s=r+l+"/",o(s,n,a))}}}),define("common/view/model-v2/link/banner",["lodash","common/util/extends","common/util/interface","common/view/model-v2/base","common/view/model-v2/image/html-element","common/interface/entity/banner","common/util/logger","common/helper/brand-image","common/entity/vanilla/image","common/interface/entity/image"],function(t,e,n,i,o,a,s,r,l,c){function d(){i.apply(this,arguments)}return e(d,i,{entityInterface:a,setViewData:function(){var e,n=this.getImageURLs(),i=this.generateElementId();e={class:this.getConfig().get("class",i),title:this.getEntity().getTitle(),id:i,url:this.getEntity().getURL()},n&&t.has(n,"mobile")&&(e.imageMobile=this.getImages(n.mobile)),n&&t.has(n,"desktop")&&(e.imageDesktop=this.getImages(n.desktop)),n&&t.has(n,"tablet")&&(e.imageTablet=this.getImages(n.tablet)),this.viewData=e},generateElementId:function(){var e,n=this.getEntity().getId();return!t.isUndefined(n)&&!1!==n&&(e=n.split("/"),e.shift(),e.join("-"))},getImages:function(e){var n=this.getEntity();if(t.isObject(e)){var i={};return t.each(e,function(t,e){var o=new l({URL:t,replaceURL:n.getURL(),title:n.getTitle(),synopsisShort:n.getTitle()});i[e]=this.configureImage(o)},this),i}return!1},getImageURLs:function(){var e=this.getConfig(),n=this.getEntity().getBrandId();return!1!==n&&!t.isUndefined(n)&&r.getResponsiveBannerImagesForBrand(n,e.get("imageLengths","full"))},configureImage:function(e){var i={class:"responsive landscape",includeCaption:!1},a=t.merge(i,this.getConfig().get("image",{}));return!!e&&(n.ensureImplements(e,c),e.setReplaceURL(this.getEntity().getURL()),new o(e,a).setSourceData({},!1))}}),d}),define("common/_modules/components/story-series/view-models/series",["lodash","common/util/extends","common/view/model-v2/base"],function(t,e,n){function i(){n.apply(this,arguments)}return e(i,n,{setViewData:function(){var t=this.getEntity();this.viewData={class:this.config.get("class",""),title:this.config.get("title",""),items:t.get("listItems",[])}}}),i}),define("common/_modules/components/story-series/entities/series",["lodash","common/util/extends","common/util/logger","common/entity/habitat/story/promo"],function(t,e,n,i){function o(t){i.call(this,t)}return e(o,i,{init:function(t){i.prototype.init.call(this,t),this.map("name","title")}}),o}),define("common/_modules/components/story-series/entities/series-list",["lodash","common/util/extends","common/entity/list/entity","common/_modules/components/story-series/entities/series"],function(t,e,n,i){function o(e,i){var o={title:"Series"};n.call(this,t.extend(o,e),i)}return e(o,n,{entityFactoryDependencies:[],createEntity:function(t){return new i(t)}}),o}),define("common/view/model-v2/document/article/image",["lodash","common/util/extends","common/view/model-v2/base","common/view/model-v2/document/article/body","common/view/model-v2/document/article/hero-unit","common/view/model-v2/promo/promo-module","common/view/model-v2/person/source-attribution","common/view/model-v2/promo/partner-promo","common/view/model-v2/link/article-share-tools","common/view/model-v2/list/promo-group/base","common/view/model-v2/list/gallery","common/view/model-v2/promo/heading","common/view/model-v2/link/banner","common/entity/vanilla/list","common/helper/date-formatter","common/helper/geo-location","common/interface/entity/document/article","common/_modules/components/story-series/view-models/series","common/_modules/components/story-series/entities/series-list","common/util/logger"],function(t,e,n,i,o,a,s,r,l,c,d,u,p,h,m,f,g,b,y,v){function w(){n.apply(this,arguments)}return e(w,n,{entityInterface:g,setViewData:function(){this.viewData=this.getArticleData()},getArticleData:function(){var e=this.getEntity(),n={type:this.getEntity().getType(),body:this.getArticleBody(),isNative:this.getConfig().get("isNative"),assetCustom:this.getEntity().getCustomEmbed(),intro:this.getIntro(),title:this.getEntity().getTitle(),"promo-module":this.getPromoModule(),author:this.getSourceAttribution(),partner:this.getPartner(),"publication-date":m.getFormattedDate(e.getDisplayDate()),"related-articles":this.getRelatedArticles(),shareTools:this.getShareTools("share--article"),"brand-banner":this.getBrandBanner({})};return!0===this.getConfig().get("includeSeries",!1)&&(n.series=this.getSeries()),this.getEntity().hasLeadAssetModule()?(n.heading=this.getHeading(),n["hero-unit"]=this.getHeroUnit(!0)):n["hero-unit"]=this.getHeroUnit(),t.extend(n,this.getAdditionalData()),n},getIntro:function(){return this.getConfig().get("use-summary-for-intro")?this.getEntity().getSummary():this.getEntity().getIntro()},getBrandBannerEntity:function(){var t=this.getEntity().getHorizontal();return f.isUK()||!1===t||!0!==t.isEnabled()?this.getEntity().getSupersection():t.getBanner()},getBrandBanner:function(t){var e=this.getBrandBannerEntity(),n=this.getConfig().get("brand-banner",t);return!1!==e&&new p(e,n).setSourceData({},!1)},getPromoModule:function(){if(this.getEntity().getPromoModule())return new a(this.getEntity().getPromoModule(),this.getConfig().get("promo-module",{"include-logo":!0})).setSourceData({},!1)},getAdditionalData:function(){var t={};return this.getEntity().hasLeadAssetModule()&&this.getEntity().getGalleryImages()&&(t.leadGallery=this.getGalleryImages()),t},getHeroUnit:function(e){var n="",i=!1;return e&&(n="video",i=!0),new o(this.getEntity(),t.merge({"promo-module":this.getPromoModule(),class:n,"hide-heading":i},this.getConfig().get("heroUnit",{}))).setSourceData({},!1)},getShareTools:function(t){return new l(this.getEntity(),{class:t,title:!1}).setSourceData({},!1)},getHeading:function(){return new u(this.getEntity(),{}).setSourceData({},!1)},getSeries:function(){var e=this.getEntity().getRelatedTags();return!!t.isArray(e)&&new b(new y({listItems:e}),this.getConfig().get("series",{class:"series-list"})).setSourceData({},!1)},getArticleBody:function(){return new i(this.getEntity(),this.getConfig()).setSourceData({},!1)},getSourceAttribution:function(){var t=this.getEntity().getAuthor();return!!t&&new s(t,this.getConfig().get("source-attribution",{})).setSourceData({},!1)},getPartner:function(){var t=this.getEntity().getPartner();return!!t&&new r(t,this.getConfig().get("image",{})).setSourceData({},!1)},getRelatedArticles:function(){var t=this.getEntity(),e=t.getRelatedArticles(),n=this.getConfig().get("relatedArticles",{title:"Related Stories",class:"related-stories",analyticsConfig:{module:"related-stories"}});return!!e&&new c(e,n).setSourceData({},!1)},getGalleryImages:function(){return new d(this.getEntity().getGalleryImages(),this.getConfig()).setSourceData({},!1)}}),w}),define("common/view/model-v2/document/article/video",["lodash","common/util/extends","common/util/logger","common/util/interface","common/interface/entity/video/video","common/view/model-v2/document/article/image","common/view/model-v2/link/article-share-tools","common/view/model-v2/promo/heading","common/view/model-v2/video/stand-alone-html-element","common/entity/vanilla/list"],function(t,e,n,i,o,a,s,r,l,c){function d(){a.apply(this,arguments)}return e(d,a,{getAdditionalData:function(){var t={};return t.leadVideo=this.getLeadVideo(),t.shareTools=this.getShareTools("small share--article"),t},getLeadVideo:function(){var e=this.getEntity(),n=this.getConfig().get("module"),a=!1,s=e.getVideo();if(n&&t.has(n,"brandColor")&&(a=n.brandColor),s)return i.ensureImplements(s,o),s.setImage(e.getImage()),new l(s,{id:"video-lead-asset",brandColor:a,image:{format:{landscape:{x:"224",y:"125"}}}}).setSourceData({},!1)}}),d}),define("common/view/model-v2/document/article/slideshow",["lodash","common/util/extends","common/util/logger","common/view/model-v2/document/article/image","common/view/model-v2/document/article/body","common/view/model-v2/link/article-share-tools","common/view/model-v2/promo/heading","common/entity/vanilla/list"],function(t,e,n,i,o,a,s,r){function l(){i.apply(this,arguments)}return e(l,i,{getAdditionalData:function(){var t={};return t.shareTools=this.getShareTools("small share--article"),t},getArticleBody:function(){return new o(this.getEntity(),t.merge({appendGallery:!0},this.getConfig())).setSourceData({},!1)}}),l}),define("common/view/model-v2/document/article/infographic",["lodash","common/util/extends","common/util/logger","common/view/model-v2/document/article/image","common/view/model-v2/promo/hero-unit"],function(t,e,n,i,o){function a(){i.apply(this,arguments)}return e(a,i,{getHeroUnit:function(e){return new o(this.getEntity(),t.merge({class:"","hide-heading":!1,context:"collection-and-tags",showIntro:!0},this.getConfig().get("heroUnit",{}))).setSourceData({},!1)},getAdditionalData:function(){var t={};return t.infographic=this.getInfographicURL(),
t.shareTools=this.getShareTools("small share--article"),t},getInfographicURL:function(){var e=this.getEntity(),n=this.getConfig(),i=e.getInfographic();if(!1!==i&&t.has(n,"domain")&&t.has(n,"module")&&t.has(n.module,"domain")){return["http:/",n.domain,n.module.domain,"bespoke",i].join("/")}return""}}),a}),define("common/view/model-v2/document/article/base",["lodash","common/util/extends","common/view/model-v2/base","common/view/model-v2/document/article/image","common/view/model-v2/document/article/video","common/view/model-v2/document/article/slideshow","common/view/model-v2/document/article/infographic","common/interface/entity/document/article","common/util/logger"],function(t,e,n,i,o,a,s,r,l){function c(){n.apply(this,arguments)}return e(c,n,{entityInterface:r,setViewData:function(){var t;switch(this.getEntity().getType()){case"video":case"audio":t=new o(this.getEntity(),this.getConfig());break;case"slideshow":t=new a(this.getEntity(),this.getConfig());break;case"infographic":t=new s(this.getEntity(),this.getConfig());break;default:t=new i(this.getEntity(),this.getConfig())}this.viewData=t.setSourceData({},!1)}}),c}),define("component/super-section-story-detail",["lodash","common/config","module/MVVM-component","common/model/story/story-by-id","common/view/model/story/base","common/entity/habitat/story/article","common/view/model-v2/document/article/base","common/view/model-v2/promo/context-heading-types","templates"],function(t,e,n,i,o,a,s,r,l){return function(o){var c={heroUnit:{context:r.NONE},"source-attribution":{image:{show:!0,format:{landscape:{x:"480",y:"480"}}}},includeSeries:!0},d=new i(t.extend({},e.get(),o)),u=new s(new a({}),t.extend(c,o));return new n(d,u,l["super-section-story-detail"])}}),define("common/_modules/super-section-index/models/top-stories",["lodash","common/util/extends","common/model/story/story-by"],function(t,e,n){function i(t,e){e=e||8,n.call(this,t),this.setItemsPerPage(e)}return e(i,n,{URLScheme:"/{moduleId}/supersection/{superSectionId}",arrRequiredConfig:["superSectionId"],parseHabitatData:function(e){return!(!e.results||!t.has(e.results[0],"Content.TopStories"))&&(t.has(this.config,"superSectionId")&&(e.superSectionId=this.config.superSectionId),e)}}),i}),define("common/_modules/super-section-index/entities/promo",["lodash","common/util/extends","common/util/logger","common/entity/habitat/story/promo","common/helper/domain-brand-mapper"],function(t,e,n,i,o){function a(e){var n={hasLeadAsset:!1,superSection:!1};i.call(this,t.extend(n,e))}return e(a,i,{init:function(t){i.prototype.init.call(this,t),this.map("HeadlineShort","title"),this.map("SummaryShort","summary"),this.initImage("image",this.getPromoImage(),o.getBrand(this.getURL())+"-external-promotion"),this.set("superSection",!!this.getArrayNestedAsset("superSection")),this.initHasLeadAssetModule()},getPromoImage:function(){var t=this.getArrayNestedAsset("assetImagePromo"),e=this.getArrayNestedAsset("promoImageOverride");return t||(e||this.getArrayNestedAsset("assetImage"))},getNonEmptyArray:function(t){var e=this.get(t,[]);return e instanceof Array&&e.length>0&&e},initHasLeadAssetModule:function(){var e=!1;e="slideshow"===this.getType()||"video"===this.getType()||"slideshow-gallery"===this.get("entityType")||t.filter(["assetVideoIb2","assetVideoMps","assetIbroadcast","assetImage"],function(t){var e=this.getNonEmptyArray(t);return!1!==e&&("assetImage"!==t||e.length>1)},this).length>0,this.set("hasLeadAsset",e)},hasEmbeddedContent:function(){return this.get("assetInfographic",!1)||this.get("assetCustom",!1)},isSuperSectionStory:function(){return this.superSection},isSuperSectionLayout:function(){var t=["story","image","audio"];return this.isSuperSectionStory()&&-1!==t.indexOf(this.getType())&&!this.hasLeadAssetModule()&&!this.hasEmbeddedContent()},hasLeadAssetModule:function(){return this.hasLeadAsset}}),a}),define("common/_modules/super-section-index/entities/story-list",["lodash","common/util/extends","common/entity/list/entity","common/_modules/super-section-index/entities/promo"],function(t,e,n,i){function o(t,e){n.call(this,t,e)}return e(o,n,{entityFactoryDependencies:[],createEntity:function(t){return new i(t)}}),o}),define("common/_modules/super-section-index/entities/top-stories",["lodash","common/util/extends","common/util/logger","common/entity/habitat/document","common/_modules/super-section-index/entities/story-list","common/view/entity-URL-router"],function(t,e,n,i,o,a){function s(e,n){var o={topStories:!1,theme:!1,description:!1,title:!1,adZoneId:!1,banner:!1};i.call(this,t.extend(o,e),n)}return e(s,i,{init:function(e){i.prototype.init.call(this,t.has(e,"results")?e.results[0]:e),this.initPageProperties(),this.initTopStories(),this.map("superSectionId","shortId"),this.set("URL",a.getFullURL(this.getId()))},initTopStories:function(){var e=this.get("Content");t.has(e,"TopStories")?this.set("topStories",new o({listItems:e.TopStories})):this.set("topStories",!1)},getKeywords:function(){return{pageType:"INDEX",sectn:"super_"+this.getAdZoneId(),wwsupersection:this.getAdZoneId()}},getTopStories:function(){return this.topStories},getTheme:function(){return this.theme},getSummary:function(){return this.description},getTitle:function(){return this.title},getAdZoneId:function(){return this.adZoneId},getSectionId:function(){return this.banner},initPageProperties:function(){var e=this.get("Content");if(t.has(e,"General")){var n=e.General;t.each({theme:"Theme",description:"Description",title:"Name",adZoneId:"AdTargetingId",banner:"Banner",moduleId:"PrimaryVertical"},function(t,e){n[t]&&(this[e]=n[t])},this)}}}),s}),define("component/infinite-ads-renderer",["lodash","jquery","model/mediaQuery","model/geolocation","templates"],function(t,e,n,i,o){var a=function(t,e){this.setSelector(t),this.setAdId(e)};return t.extend(a.prototype,{render:function(t){i.isUK()||this.renderInfiniteAds()},renderInfiniteAds:function(){var t,n,i,a,s=[1,2,3,4],r={id:"leaderboard_"+this.getAdId(),groups:s.join("_")},l=o["ad-slot-infinite"](r),c=[1,2,3,4],d={id:"sponsor_slot_"+this.getAdId(),groups:c.join("_"),"slot-class":"bbccom_sponsor_section_slot"},u=o["ad-slot-infinite"](d),p={};this.isMobile()?(t=[1,2],a=" .top-unit"):(t=[3,4],a=" .sticky-side"),n={id:"mpu_"+this.getAdId(),groups:t.join("_")},i=o["ad-slot-infinite-mpu"](n),p[r.id]=s,p[d.id]=c,p[n.id]=t,e(this.getSelector()+" .top-leaderboard").html(l),e(this.getSelector()+" .hero-unit .secondary-header-wrapper").html(u),e(this.getSelector()+a).prepend(i),"undefined"!=typeof bbcdotcom&&void 0!==bbcdotcom.registerAd&&bbcdotcom.registerAd(p)},isMobile:function(){return!(4===n.getGroup()&&!n.isFixedWidthLayout())},setSelector:function(t){this.selector=t},getSelector:function(){return this.selector+" "},setAdId:function(t){this.adId=t},getAdId:function(){return this.adId}}),a}),define("component/super-section-story-change-listener",["lodash","util/content-loader-event-handler","component/story-detail-way-points-collection","component/infinite-ads-renderer","model/mediaQuery"],function(t,e,n,i,o){var a=e.ACTION_STORY_BLOCK_CHANGED,s=e.ACTION_LAZY_LOADED_STORY,r=function(){};return t.extend(r.prototype,{init:function(){this.registerStoryBlockLoad(),this.registerStoryBlockChange()},changeUrl:function(t,e){var n=window.location,i=n.origin+t+n.search;window.history.replaceState({},e,i)},isMobile:function(){return!(4===o.getGroup()&&!o.isFixedWidthLayout())},registerStoryBlockLoad:function(){var t=this;e.on(s,function(e,n,o,a){a>0&&new i(t.getBlockId(a),a).render()})},registerStoryBlockChange:function(){var t=this;e.on(a,function(e,n,i,o,a){null!==i&&t.changeUrl(n.storyEntity.getShortURL())})},cleanBlockOnStoryBlockChange:function(){var i=this,o={};e.on(a,function(e,a,s,r,l){if(null!==s)for(var c=n.getAllInstances(),d=t.keys(c).length,u=0;u<d;u++){var p=$(i.getBlockId(u));u>=r-1&&u<=r+1?t.has(o,u)&&(p.height(""),p.html(o[u]),setTimeout(function(){c[i.getBlockId(u)].init()},10)):t.has(o,u)||(p.height(p.height()),c[i.getBlockId(u)].reset().clearCache(),o[u]=p.html())}})},getBlockId:function(t){return"#story-block-"+t}}),r}),define("interaction-controller/super-section-story",["require","lodash","jquery","q","component/story-way-points","component/story-detail-way-points-collection","component/super-section-story-detail","util/content-loader-event-handler","layouts/super-section-story","common/config","common/_modules/super-section-index/models/top-stories","common/_modules/super-section-index/entities/top-stories","model/exposed-data","common/_modules/super-section-index/entities/promo","common/model/story/story","common/entity/habitat/story/article","component/super-section-story-change-listener","module/loader"],function(t,e,n,i,o,a,s,r,l,c,d,u,p,h,m,f,g,b){function y(){this.currentBlockId=0,this.objArticleEntity=null,this.stickyTopBarInitialised=!1}var v=r.ACTION_STORY_BLOCK_CHANGED,w=r.ACTION_LAZY_LOADED_STORY,S=r.TYPE_FULL_STORY;return e.extend(y.prototype,{init:function(){var t=this;this.initStoryData(),this.setupStickyElements(this.currentBlockId),this.initStories().then(function(e){t.stories=e,t.registerBlockChangeEvent(t.currentBlockId)}),this.registerStoryBlockChangeListener()},initStoryData:function(){this.storyModel=new m(e.extend({id:!1},c.get())),this.storyModel.populate(p.story),this.objArticleEntity=new f(this.storyModel.getData())},initStories:function(){var t={moduleId:this.getModuleId(),superSectionId:this.objArticleEntity.getSupersection().get("shortId")},n=new d(e.extend({},c.get(),t),15),i=this;return n.load().then(function(t){var n=new u(t),o=i.createStoryItem(new h(p.story));o.loaded=!0;var a=[o];return e.each(n.getTopStories().getListItems(),function(t){o.id!==t.getId()&&t.isSuperSectionLayout()&&a.push(i.createStoryItem(t))}),a},function(t){console.log(t)})},createStoryItem:function(t){return{id:t.getId(),loaded:!1,firstAppearance:!0,storyEntity:t}},setupStickyElements:function(t){if(!this.stickyTopBarInitialised){var e=new o(".topbar",!0);e.stick().showOnSlideUp(),e.init(),this.stickyTopBarInitialised=!0}var n=new a(this.getBlockId(t));this.delay(function(){this.loadNext(n,t)},100)},loadNext:function(t,n){var i=this,a=parseInt(n)+1,s=new o(this.getBlockId(n)+" .article-content",!0);s.init().onPassedThrought("top",function(t){e.has(i.stories,a)&&!i.stories[a].loaded&&t>40&&(i.loadStory(i.stories[a].id,a),i.stories[a].loaded=!0)}),t.add(s)},initLoader:function(t){this.spinner=new b(t.find("#loader").css({position:"relative",height:308}).get(0),"#333")},stopLoader:function(){this.spinner.stop()},loadStory:function(t,e){var i=this;n("#page-lining").append('<div id="'+this.getBlockId(e,!0)+'" class="gutter-top"><div id="loader"></div></div>');var o=n(this.getBlockId(e)),a=new s({id:t});return this.initLoader(o),a.load().then(function(){i.stopLoader(),o.html(a.render()),i.stories[e].storyEntity=a.viewModel.entity,r.trigger(w,S,i.getStory(e),e),new l(i.getBlockId(e),a.getModel().getData()).init(),i.registerBlockChangeEvent(e),i.setupStickyElements(e)},function(t){i.stopLoader(),o.html(""),console.log(t)})},registerBlockChangeEvent:function(t){var e=this;new o(this.getBlockId(t),!0).init().onPassedThrought("top",function(n){n>0&&n<100&&e.currentBlockId!==t&&(r.trigger(v,e.getStory(t),e.getStory(e.currentBlockId),t,e.currentBlockId),e.registerFirstStoryAppearance(t),function(){var e=this,n=this.currentBlockId;this.delay(function(){a.getBlockInstance(e.getBlockId(n)).stop(!0),a.getBlockInstance(e.getBlockId(t)).start()},10)}.bind(e)(),e.currentBlockId=t)})},getNextBlockId:function(){return parseInt(this.currentBlockId)+1},getBlockId:function(t,e){return(e?"":"#")+"story-block-"+t},getStory:function(t){return this.stories[t]},registerFirstStoryAppearance:function(t){this.stories[t].firstAppearance=!1},delay:function(t,e){return setTimeout(t.bind(this),e)},registerStoryBlockChangeListener:function(){(new g).init()},getModuleId:function(){return this.objArticleEntity.getSupersection().get("project")}}),y}),define("layouts/top-bar",["lodash","jquery","module/topbar-menu"],function(t,e,n){var i=function(t){this.topBarMenuMobileSelector="[data-topbar-menu-mobile]",this.setSelector(t)};return t.extend(i.prototype,{init:function(){this.initTopBar()},initTopBar:function(){e(this.topBarMenuMobileSelector).length>0&&(this.topbar=new n(this.topBarMenuMobileSelector),this.topbar.init())},setSelector:function(t){this.selector=e(t)},getSelector:function(){return this.selector}}),i}),define("layouts/super-section-story-page-load",["lodash","common/util/extends","layouts/super-section-story","interaction-controller/super-section-story","util/content-loader-event-handler","layouts/top-bar"],function(t,e,n,i,o,a){var s=o.ACTION_STORY_BLOCK_CHANGED,r=o.ACTION_LAZY_LOADED_STORY,l=o.TYPE_FULL_STORY,c=function(){n.apply(this,arguments)};return e(c,n,{init:function(){n.prototype.init.apply(this,arguments),this.initSuperSectionLayout(),this.intNavBarRenderer("#page")},initSuperSectionLayout:function(){(new i).init();o.trigger(r,l,this.storyEntity,0),o.trigger(s,this.storyEntity,null,0,null)},intNavBarRenderer:function(t){new a(t).init()},setupRenderImages:function(){}}),c}),define("common/_modules/super-section-index/models/all-stories",["lodash","common/util/extends","common/model/story/story-by"],function(t,e,n){function i(t){n.call(this,t),this.setItemsPerPage(8)}return e(i,n,{URLScheme:"/search/supersection/{moduleId}/{superSectionId}/more-stories",arrRequiredConfig:["superSectionId"]}),i}),define("layouts/index/super-section",["lodash","common/util/extends","layouts/index/base","model/exposed-data","common/config","common/_modules/super-section-index/models/all-stories","common/_modules/super-section-index/entities/promo","common/entity/factory","component/promo-group/set","common/view/model-v2/promo/context-heading-types","common/entity/habitat/paging"],function(t,e,n,i,o,a,s,r,l,c,d){function u(t,e){this.moreResultsSelector="#more-stories-wrapper",this.loadMoreWrapperSelector="#load-more-wrapper",n.call(this,t)}return e(u,n,{listItemEntity:s,promoGroupComponent:l,promoGroupTemplate:"promo-group-more-stories",getListConfig:function(){var e={context:c.NONE,"include-branded-class":!0};return t.has(i,"more-stories-promo-groups.groups")?t.extend(e,{groups:i["more-stories-promo-groups"].groups}):e},getPagingData:function(){var e;if(t.has(i,"more-stories.paging"))return e=new d(i["more-stories"].paging),e.setPage(e.getPage()-1),e},setModel:function(e){t.has(i,"page.superSectionId")&&(e=t.extend({superSectionId:i.page.superSectionId},e)),this.model=new a(e)}}),u}),define("common/helper/routing/routing-domain-list",["lodash"],function(t){var e=[{id:"wwfuture",domain:"future"},{id:"wwculture",domain:"culture"},{id:"wwtravel",domain:"travel"},{id:"wwautos",domain:"autos"},{id:"wwearth",domain:"earth"},{id:"wwcapital",domain:"capital"}],n={};return n.getDomainList=function(n){for(var i=t.clone(e,!0),o=0;o<i.length;o++){if(i[o].id===n){i.splice(o,1);break}}return i},n}),define("common/helper/routes",["lodash","common/util/logger","common/helper/routing/routing-domain-list"],function(t,e,n){return{prepareRulesForRoutes:function(e,n){return t.each(e,function(e,i){t.each(e.rules,function(i,o){t.isString(i)&&(t.isFunction(n[i])?e.rules[o]=n[i]:e.rules[o]=new RegExp(i))})}),e},addModuleDomainToRoutes:function(e,i){return t.has(i,"module")&&t.has(i.module,"domain")&&t.each(e,function(o,a){if(t.has(o,"cross-domain")&&!0===o["cross-domain"]){var s=n.getDomainList(i.module.id);t.each(s,function(n,i){var s=n.id+"-"+a,r=t.clone(o,!0);e[s]=this.addModuleDomainToRoute(r,n)},this)}e[a]=this.addModuleDomainToRoute(o,i.module)},this),e},addModuleDomainToRoute:function(e,n){return t.has(e,"route")&&(e.route="/"+n.domain+e.route),t.has(e,"entity-mapping")&&(e["entity-mapping"]=this.prepareEntityMapping(e["entity-mapping"],n)),e},addOptionalQueryStringToRoutes:function(e){return t.each(e,function(n,i){t.has(n,"route")&&-1===n.route.indexOf(":?query:")&&(e[i].route=n.route+":?query:")}),e},prepareRoutes:function(t,e,n){return t=this.getRoutesForEnviroment(t,e.environment),t=this.prepareRulesForRoutes(t,n),t=this.addOptionalQueryStringToRoutes(t),this.addModuleDomainToRoutes(t,e)},getRoutesForEnviroment:function(e,n){e=t.clone(e,!0);var i={};return t.each(e,function(e,o){t.has(e,"environments")&&!t.contains(e.environments,n)||(i[o]=e)}),i},getEntityRoutes:function(e,n){e=t.clone(e,!0);var i={};return t.each(e,function(e,n){t.has(e,"entity-mapping")&&(i[n]=e,delete i[n].handler)},this),this.addModuleDomainToRoutes(i,n)},prepareEntityMapping:function(e,n){return t.isString(e)?e.replace("{moduleId}",n.id):e}}}),define("common/helper/routing/is-numeric",[],function(){var t=new RegExp(/^\d+$/);return function(e){return t.test(e)}}),define("common/helper/routing/rules",["lodash","common/helper/routing/is-numeric"],function(t,e){return{isNumeric:e}}),define("model/exposed-routes",["common/helper/routes","common/helper/routing/rules"],function(t,e){return t.prepareRulesForRoutes(_routes,e)}),define("module/router",["lodash","util/logger","crossroads"],function(t,e,n){var i=function(t){this.setURL(t),this.router=n.create()};return t.extend(i.prototype,{addRoute:function(t,e){var n=this.router.addRoute(t["entity-mapping"]),i=function(t,e){e(this.getParamsFromURLForRoute(t.route))};return n.matched.add(i.bind(this,t,e)),n},setURL:function(t){this.URL=t},getParamsFromURLForRoute:function(t){var e=n.create(),i=e.addRoute(t);if(i.match(this.URL))return i._getParamsObject(this.URL)},parse:function(t){this.router.parse(t)}}),i}),define("glaze-main-app",["model/mediaQuery","lodash","lib/domReady","orb/api","jquery","util/logger","layouts/base","layouts/page","layouts/slideshow-gallery","layouts/third-party-content","layouts/index/story/front-page","layouts/index/story/collection","layouts/index/entity/collection","layouts/index/story/tag","layouts/index/entity/tag","layouts/index/story/search-results","layouts/story","layouts/super-section-story-page-load","layouts/index/super-section","config","model/exposed-config","common/util/logger","model/exposed-data","model/exposed-routes","common/config","module/bbcdotcomMediator","common/view/entity-URL-router","module/router","common/util/request","model/geolocation","common/entity/habitat/story/article"],function(t,e,n,i,o,a,s,r,l,c,d,u,p,h,m,f,g,b,y,v,w,S,x,I,C,T,_,k,L,E,A){C.set(w),_.init(I),L.set({isUK:E.isUK()});var D=function(){n(this.init.bind(this))};return e.extend(D.prototype,{init:function(){t.setFixedWidthLayout(hasFixedWidthLayout()),a.useDefaults(),S.set(a),v.setup(this.getSettings()),T.init(),this.pageLayout=new r("#page"),this.pageLayout.init(),this.addEventListeners(),this.isErrorPage()||this.initRouter()},isErrorPage:function(){return o("#wwfeatures-container > #error-container").length>0},initRouter:function(){this.router=new k(window.location.pathname),this.addRoutes(),this.router.parse(x.entityMapping)},addEventListeners:function(){i.layout(this.layout.bind(this))},layout:function(){this.pageLayout.layout(),T.layoutAds()},getIndexSelector:function(){return e.first(o(".container-index"))},addRoutes:function(){this.router.addRoute(I.story,this.storyLayout.bind(this,!1)),this.router.addRoute(I["story-preview"],this.storyLayout.bind(this,!1)),this.router.addRoute(I["slideshow-gallery"],this.slideshowGalleryLayout.bind(this)),this.router.addRoute(I["article-third-party-content"],this.thirdPartyContentLayout.bind(this)),this.router.addRoute(I["front-page"],this.frontPageLayout.bind(this)),void 0!==I["front-page-americas-edition"]&&this.router.addRoute(I["front-page-americas-edition"],this.frontPageLayout.bind(this)),this.router.addRoute(I.search,this.searchResultsLayout.bind(this)),this.router.addRoute(I["column-index"],this.columnIndexLayout.bind(this)),this.router.addRoute(I["column-results"],this.columnLayout.bind(this)),this.router.addRoute(I.tag,this.tagLayout.bind(this)),this.router.addRoute(I["tag-index"],this.tagIndexLayout.bind(this)),e.has(I,"section-index")&&e.has(I,"section-results")&&(this.router.addRoute(I["section-index"],this.sectionIndexLayout.bind(this)),this.router.addRoute(I["section-results"],this.sectionLayout.bind(this))),e.has(I,"native-column")&&e.has(I,"native-story")&&(this.router.addRoute(I["native-column"],this.columnLayout.bind(this)),this.router.addRoute(I["native-story"],this.storyLayout.bind(this,!0))),e.has(x,"page.superSectionId")&&new y(this.getIndexSelector())},frontPageLayout:function(){new d(this.getIndexSelector())},sectionIndexLayout:function(){new p(this.getIndexSelector(),"section")},sectionLayout:function(t){e.has(t,"id")&&new u(this.getIndexSelector(),"section",t.id)},columnIndexLayout:function(){new p(this.getIndexSelector(),"column")},columnLayout:function(t){e.has(t,"id")&&new u(this.getIndexSelector(),"column",t.id)},tagIndexLayout:function(){new m(this.getIndexSelector())},tagLayout:function(t){e.has(t,"id")&&new h(this.getIndexSelector(),t.id)},searchResultsLayout:function(t){e.has(t,"keywords")&&new f(this.getIndexSelector(),t.keywords)},storyLayout:function(t){var n=!1;if(e.has(x,"story")){n=new A(x.story).isSuperSectionLayout()?new b("#story-block-0",x.story):new g("#story-page",x.story)}else n=new g("#story-page");n.init()},slideshowGalleryLayout:function(t){new l('[data-sg="main"]').init()},thirdPartyContentLayout:function(t){new c('[data-tpc="frame"]').init()},getSettings:function(){return{}}}),D}),define("common/helper/request",["lodash"],function(t){return{getParamsFromURL:function(e){var n,i=e.split("/"),o=parseInt(t.last(i))||1;return o>1&&i.pop(),n=t.last(i),{id:n,page:o}}}}),define("common/model/destination/all-stories-by-destination",["lodash","common/util/extends","common/model/story/story-by"],function(t,e,n){function i(t){n.call(this,t),this.setItemsPerPage(8),this.setApiVersion("v2")}return e(i,n,{arrRequiredConfig:["id"],URLScheme:"/search/all-stories-by-destination/{id}"}),i}),define("layouts/index/story/destination",["lodash","common/util/extends","layouts/index/story/base","model/exposed-data","common/config","common/model/story/story-by-destination","common/model/destination/all-stories-by-destination","module/weather","common/entity/habitat/destination/link"],function(t,e,n,i,o,a,s,r,l){function c(t,e){this.modelConfig={},this.destinationId=e,this.weatherForecastSecondarySelector="#weather-forecast-secondary",n.call(this,t),this.setupWeatherForecastSecondary()}return e(c,n,{setModel:function(e){this.modelConfig=e,this.model=new a(t.extend({id:this.destinationId},e))},setupWeatherForecastSecondary:function(){if(t.has(i,"destination")){var e=new l(i.destination),n=e.get("weatherId");if(!1!==n&&n.length>0){new r(this.weatherForecastSecondarySelector,n,{}).load()}}}}),c}),define("common/entity/habitat/destination/document",["lodash","common/util/extends","common/entity/habitat/destination/promo","common/view/entity-URL-router","common/helper/advertising"],function(t,e,n,i,o){function a(e,i){var o={keywords:[],author:!1,partner:!1,adZoneId:"",adSlots:!1,searchTerms:!1,error:!1,advertsDisabled:!1};n.call(this,t.extend(o,e),i)}return e(a,n,{init:function(t){n.prototype.init.call(this,t),this.getId()&&(this.set("keywords",{page:"destination-index",destination:this.getDestinationString()}),this.set("adZoneId",o.generateIndexZoneForHabitatEntity("dest",this)),this.set("summary","Stories about "+this.getTitle()),this.set("URL",i.getFullURL(this.getId())))},getDestinationString:function(){var e=[];return t.each(this.getDestinationRelationships(),function(t){e.push(t.getId(!0))}),e},getKeywords:function(){return this.keywords},getAuthor:function(){return this.author},getPartner:function(){return this.partner},getAdZoneId:function(){return this.adZoneId},getAdSlots:function(){return this.adSlots},getSearchTerms:function(){return this.searchTerms},getError:function(){return this.error},areAdvertsDisabled:function(){return this.advertsDisabled}}),a}),define("common/entity/habitat/destination/supersize/promo",["lodash","common/util/extends","common/util/logger","common/entity/habitat/story/promo"],function(t,e,n,i){function o(e){var n={title:"",summary:"",image:!1};i.call(this,t.extend(n,e))}return e(o,i,{init:function(t){i.prototype.init.call(this,t),this.map("headlineShort","title"),this.map("summaryShort","summary"),this.initImage("image",this.getLeadImage(),"destination")}}),o}),define("common/entity/habitat/destination/supersize/story-list",["lodash","common/util/extends","common/util/logger","common/entity/list/entity","common/entity/habitat/destination/supersize/promo"],function(t,e,n,i,o){function a(e,n){var o={id:!1};i.call(this,t.extend(o,e),n)}return e(a,i,{entityFactoryDependencies:[],init:function(t){i.prototype.init.call(this,t),this.initListItems()},createEntity:function(t){return new o(t)}}),a}),define("common/entity/habitat/destination/supersize/document",["lodash","common/util/extends","common/entity/habitat/destination/document","common/entity/habitat/destination/supersize/story-list"],function(t,e,n,i){function o(e,i){var o={keywords:[],author:!1,partner:!1,adZoneId:"",adSlots:!1,searchTerms:!1,error:!1,advertsDisabled:!1,topStories:!1,moreStories:!1,locationName:"",mapZoomLevelDefault:!1,longitude:!1,latitude:!1};n.call(this,t.extend(o,e),i)}return e(o,n,{init:function(t){n.prototype.init.call(this,t),this.getId()&&this.initTopStories(this.get("supersize",!1)),this.initMoreStories(this.get("results",!1)),this.set("locationName",this.getTitle()),this.map("zoom","mapZoomLevelDefault")},initTopStories:function(e){t.has(e,"TopStories")&&t.isArray(e.TopStories)?this.set("topStories",new i({listItems:e.TopStories})):this.set("topStories",!1)},initMoreStories:function(e){t.isArray(e)?this.set("moreStories",new i({listItems:e})):this.set("moreStories",!1)},getTopStories:function(){return this.topStories},getMoreStories:function(){return this.moreStories},getLocationName:function(){return this.locationName},getMapZoomLevelDefault:function(){return this.mapZoomLevelDefault},getLatitude:function(){return this.latitude},getLongitude:function(){return this.longitude}}),o}),define("common/model/destination/destination",["lodash","common/util/extends","common/model/habitat-object","common/helper/advertising"],function(t,e,n,i){function o(t){n.call(this,t),this.setSupersized(!1)}return e(o,n,{URLScheme:"/{moduleId}/destination/{id}",arrRequiredConfig:["id"],getAdSlots:function(){var e=i.getDefaultAdSlots(!0);return!!t.isObject(e)&&e},parseHabitatData:function(e){return t.has(e,"Content.IsSupersize")&&t.has(e,"Content.Supersize")&&(this.setSupersized(e.Content.IsSupersize),t.extend(e,{adSlots:this.getAdSlots()})),e},isSupersized:function(){return this.supersized},setSupersized:function(e){t.isBoolean(e)&&(this.supersized=e)}}),o}),define("common/entity/habitat/story/list",["lodash","common/util/extends","common/util/logger","common/entity/habitat/paged-list","common/entity/habitat/story/promo"],function(t,e,n,i,o){function a(t,e){i.apply(this,arguments)}return e(a,i,{entityFactoryDependencies:[],createEntity:function(t){return new o(t)}}),a}),define("common/interface/entity/destination/map/marker",["lodash","common/util/interface","common/interface/entity/promo"],function(t,e,n){return new e("DestinationMapMarker",n.methods.concat(["getLongitude","getLatitude"]))}),define("common/view/model-v2/destination/map/marker",["lodash","common/util/extends","common/view/model-v2/base","common/view/model-v2/promo/promo-unit","common/entity/vanilla/promo","common/interface/entity/destination/map/marker"],function(t,e,n,i,o,a){function s(){n.apply(this,arguments)}return e(s,n,{entityInterface:a,setViewData:function(){var t=this.getEntity();this.viewData={latitude:t.getLatitude(),longitude:t.getLongitude(),id:t.getId(),promo:this.getPromo()}},getPromo:function(){return new i(this.getEntity(),this.getConfig().get("promo",{})).setSourceData({})}}),s}),define("common/interface/entity/destination/map/map",["lodash","common/util/interface","common/interface/entity/base"],function(t,e,n){return new e("DestinationMapEntity",n.methods.concat(["getLocationName","getLatitude","getLongitude","getMapZoomLevelDefault","getTopStories"]))}),define("common/view/model-v2/destination/map/map",["lodash","common/util/extends","common/util/interface","common/view/model-v2/base","common/view/model-v2/destination/map/marker","common/interface/entity/destination/map/map","common/interface/entity/destination/map/marker","common/interface/entity/list/base"],function(t,e,n,i,o,a,s,r){function l(){i.apply(this,arguments)}return e(l,i,{entityInterface:a,setViewData:function(){var t=this.getEntity(),e=this.getConfig();this.viewData={class:e.get("class",!1),controlsClass:e.get("controlsClass",!1),mapContainerId:e.get("mapContainerId",!1),longitude:t.getLongitude(),latitude:t.getLatitude(),zoomLevel:t.getMapZoomLevelDefault(),title:this.getTitle(),isMapDataAvailable:!0,markers:this.getMarkers()},t.getLatitude()&&t.getLongitude()||(this.viewData.isMapDataAvailable=!1)},getMarkers:function(){var e,i=[];return n.ensureImplements(this.getEntity().getTopStories(),r),e=this.getEntity().getTopStories().getListItems(),e.length>0&&t.each(e,function(t){var e=new o(t,this.getConfig().get("marker",!1)).setSourceData(!1,{});n.ensureImplements(t,s),t.getLatitude()&&t.getLongitude()&&i.push(e)},this),i.length>0&&i},getTitle:function(){return"Map of "+this.getEntity().getLocationName()}}),l});var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};define("component/destination-map",["lodash","module/MVVM-component","common/view/model-v2/destination/map/map","common/model/destination/destination","model/exposed-data","model/exposed-config","templates"],function(t,e,n,i,o,a,s){return function s(r,l,c){if(_classCallCheck(this,s),t.has(o,"destination.Content.Id")&&t.has(a,"api.url")&&t.has(a,"api.version")){var d=new i(_extends({id:o.destination.Content.Id},a)),u=new n(r,l);return d.populate(o.destination),new e(d,u,c)}}}),define("module/destination/map/interface/map",["common/util/interface"],function(t){return new t("MapInterface",["addMarkerToMap","addMarkersToMap","showPopup","hidePopup","addMapEventListener","centerMap","recalculateMapHeight","handleZoomStartInteraction","handleZoomEndInteraction"])}),define("module/destination/map/map",[],function(){return function(){function t(e){_classCallCheck(this,t),this.map=e}return t.prototype.init=function(){return this.map.init()},t.prototype.addMarkerToMap=function(t,e,n){var i;(i=this.map).addMarkerToMap.apply(i,arguments)},t.prototype.addMarkersToMap=function(t,e,n){var i;(i=this.map).addMarkersToMap.apply(i,arguments)},t.prototype.createMap=function(){this.map.createMap()},t.prototype.createMarker=function(){this.map.createMarker()},t.prototype.showPopup=function(t,e,n){var i;(i=this.map).showPopup.apply(i,arguments)},t.prototype.hidePopup=function(){this.map.hidePopup()},t.prototype.addMapEventListener=function(t,e){var n;(n=this.map).addMapEventListener.apply(n,arguments)},t.prototype.centerMap=function(t,e,n){var i;(i=this.map).centerMap.apply(i,arguments)},t.prototype.recalculateMapHeight=function(){this.map.recalculateMapHeight()},t.prototype.handleZoomStartInteraction=function(t){return this.map.handleZoomStartInteraction(t)},t.prototype.handleZoomEndInteraction=function(t){return this.map.handleZoomEndInteraction(t)},t}()});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};define("module/mapbox/wrapper-gl",[],function(){function t(t){if("object"!==(void 0===t?"undefined":_typeof(t)))throw new Error("Invalid Mapbox library object");return{addMarkerToMap:function(t,e){e.addTo(t)},centerMap:function(t,e,n){t.flyTo({center:e,zoom:n,curve:1.3,speed:1.2})},createMap:function(e,n,i){t.accessToken=e;var o=new t.Map(n)
;return o.on("load",function(){i()}),o},createMarker:function(e,n,i){var o=document.createElement("div");return o.className=e,o.addEventListener("click",function(t){t.stopPropagation(),n.onClick(t)}),new t.Marker(o,{offset:n.offset}).setLngLat(i)},createPopup:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new t.Popup(e)},getMarkerCoordinates:function(t){return t.getLngLat()},hidePopup:function(t){t.remove()},removeMarkerFromMap:function(t){t.remove()},resizeMapToSpace:function(t){t.resize()},showPopup:function(t,e,n,i){e.setLngLat(n).setHTML(i).addTo(t)},zoomIn:function(t){t.zoomIn()},zoomOut:function(t){t.zoomOut()},addMapEventListener:function(t,e,n){"function"==typeof n&&"string"==typeof e&&t.on(e,n)},getMarkerDimensions:function(t){if("string"==typeof t){var e=document.createElement("div"),n=[];return e.className=t.trim(),document.body.appendChild(e),n[0]=e.clientWidth,n[1]=e.clientHeight,document.body.removeChild(e),n}return[0,0]},getPopupOffsets:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(t){var e=this.getMarkerDimensions(t),n=e[1],i=e[0],o=i/2,a=n/2+20;return{top:[0,10],"top-left":[0,10],"top-right":[0,10],bottom:[0,-(n+20)],"bottom-left":[0,-(n+20)],"bottom-right":[0,-(n+20)],left:[o+12,-a],right:[-(o+12),-a]}}return[0,0]},getMarkerOptions:function(t,e,n,i,o){var a=i.properties,s=this.getMarkerDimensions(o.className);return{iconAnchor:[s[0]/2,s[1]],offset:[-s[0]/2,-s[1]],onClick:n.bind(this,a),closeButton:!0,closeOnClick:!0}}}}return t});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};define("module/mapbox/wrapper-js",[],function(){function t(t){var e=[];return e[0]=t[1],e[1]=t[0],e}function e(e){var n=!1;if("object"!==(void 0===e?"undefined":_typeof(e)))throw new Error("Invalid Mapbox library object");return{addMarkerToMap:function(t,e){e.addTo(t)},centerMap:function(e,n,i){e.setView(t(n),i)},createMap:function(i,o,a){n=!1,e.mapbox.accessToken=i;var s=e.map(o.container,{center:t(o.center),doubleClickZoom:!1,scrollWheelZoom:!1,zoom:o.zoom+1,zoomControl:!1}),r=e.mapbox.styleLayer(o.style);return r.on("load",function(){n||(a(),n=!0)}),r.addTo(s),s},createMarker:function(n,i,o){var a=e.divIcon({iconAnchor:i.iconAnchor,className:n,iconSize:i.iconSize}),s=e.marker(t(o),{icon:a});return i.onClick.bind(i.onClick),s.on("click",function(){i.onClick()}),s},createPopup:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.popup({anchor:"bottom",closeButton:!1,closeOnClick:!1,offset:t.offset})},getMarkerCoordinates:function(t){var e=t.getLatLng();return[e.lng,e.lat]},hidePopup:function(t){t.remove()},removeMarkerFromMap:function(t){t.remove()},resizeMapToSpace:function(t){t.invalidateSize()},showPopup:function(e,n,i,o){n.setLatLng(t(i)).setContent(o).addTo(e),n._updateLayout(),n._updatePosition(),n._adjustPan()},zoomIn:function(t){t.zoomIn()},zoomOut:function(t){t.zoomOut()},addMapEventListener:function(t,e,n){"function"==typeof n&&"string"==typeof e&&t.on(e,n)},getMarkerDimensions:function(t){if("string"==typeof t){var e=document.createElement("div"),n=[];return e.className=t.trim(),document.body.appendChild(e),n[0]=e.clientWidth,n[1]=e.clientHeight,document.body.removeChild(e),n}return[0,0]},getPopupOffsets:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(t){return[0,-(this.getMarkerDimensions(t)[1]+8)]}return[0,0]},getMarkerOptions:function(t,e,n,i,o){var a=i.properties,s=this.getMarkerDimensions(o.className);return{iconAnchor:[s[0]/2,s[1]],offset:[-s[0]/2,-s[1]],onClick:n.bind(this,a),closeButton:!0,closeOnClick:!0}}}}return e}),define("module/mapbox/resources",[],function(){return{gl:{css:"https://api.mapbox.com/mapbox-gl-js/v0.32.0/mapbox-gl.css"},js:{css:"https://api.mapbox.com/mapbox.js/v3.0.1/mapbox.css"}}});var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};define("module/mapbox/main",["module/mapbox/wrapper-gl","module/mapbox/wrapper-js","module/mapbox/resources"],function(t,e,n){return function(){function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(_classCallCheck(this,i),void 0===(void 0===t?"undefined":_typeof(t))&&"string"!=typeof t)throw new Error("Mapbox access token not provided");this.map=null,this.apiWrapper=null,this.popup=null,this.accessToken=t,this.mapOnLoaded=n,this.mapOptions=e}return i.prototype.init=function(){var t=this;return new Promise(function(e,n){t.map?t.renderMap().then(e):require(["mapboxgl-supported"],function(n){t.setupMapBox(e)})})},i.prototype.setupMapBox=function(i){var o=this,a=null;this.isMapBoxGlAvailable()?(a=function(){require(["mapboxgl"],function(e){o.apiWrapper=t(e),o.renderMap().then(i(o))})},this.loadCss(n.gl.css,a)):(a=function(){require(["mapboxjs"],function(t){o.apiWrapper=e(t),o.renderMap().then(i(o))})},this.loadCss(n.js.css,a))},i.prototype.isMapBoxGlAvailable=function(){if(void 0===("undefined"==typeof mapboxgl?"undefined":_typeof(mapboxgl))&&void 0===_typeof(mapboxgl.supported)||void 0!==("undefined"==typeof mapboxgl?"undefined":_typeof(mapboxgl))&&void 0!==_typeof(mapboxgl.supported)&&"function"!=typeof mapboxgl.supported)throw new Error("Mapbox GL checker not available");return mapboxgl.supported()},i.prototype.loadCss=function(t,e){var n=document.createElement("link");return n.href=t,n.rel="stylesheet",n.onload=e||function(){},document.querySelector("head").appendChild(n),n},i.prototype.addMarkerToMap=function(t){this.apiWrapper.addMarkerToMap(this.map,t)},i.prototype.centerMap=function(t,e){this.apiWrapper.centerMap(this.map,t,e)},i.prototype.createMarker=function(t,e,n){return this.apiWrapper.createMarker(t,e,n)},i.prototype.hidePopup=function(){this.apiWrapper.hidePopup(this.popup)},i.prototype.getMarkerCoordinates=function(t){return this.apiWrapper.getMarkerCoordinates(t)},i.prototype.renderMap=function(){var t=this;return new Promise(function(e,n){t.map=t.apiWrapper.createMap(t.accessToken,t.mapOptions,t.mapOnLoaded),e()})},i.prototype.initMap=function(t,e){this.mapOptions=t,this.mapOnLoaded=e,this.map?this.renderMap():this.initMapbox()},i.prototype.removeMarkerFromMap=function(t){this.apiWrapper.removeMarkerFromMap(t)},i.prototype.resizeMapToSpace=function(){this.apiWrapper.resizeMapToSpace(this.map)},i.prototype.showPopup=function(t,e,n){null!==this.popup&&this.hidePopup(),this.popup=this.createPopup(n),this.apiWrapper.showPopup(this.map,this.popup,t,e)},i.prototype.createPopup=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.apiWrapper.createPopup(_extends({closeButton:!1,closeOnClick:!1},t))},i.prototype.zoomIn=function(){return this.apiWrapper.zoomIn(this.map)},i.prototype.zoomOut=function(){return this.apiWrapper.zoomOut(this.map)},i.prototype.addMapEventListener=function(t,e){this.apiWrapper.addMapEventListener(this.map,t,e)},i.prototype.getMarkerOptions=function(t,e,n,i,o){var a;return(a=this.apiWrapper).getMarkerOptions.apply(a,arguments)},i.prototype.getPopupOffsets=function(t){return this.apiWrapper.getPopupOffsets(t)},i}()}),define("module/destination/map/controls",[],function(){var t={selectors:{zoomInSelector:"[data-map-zoomin]",zoomOutSelector:"[data-map-zoomout]",centerSelector:"[data-map-center]"}};return function(){function e(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;_classCallCheck(this,e),this.map=n,this.options=i||{}}return e.prototype.init=function(){var t=this;this.setupElements(),this.addEventListeners(),this.map.addMapEventListener("zoomstart",function(e){t.map.handleZoomStartInteraction(e).then(t.updateZoomButton.bind(t))}),this.map.addMapEventListener("zoomend",function(e){t.map.handleZoomEndInteraction(e).then(t.updateZoomButton.bind(t))})},e.prototype.setupElements=function(){this.elements={zoomIn:{selector:document.querySelector(this.options.selectors.zoomInSelector),fn:this.handleZoomInInteraction.bind(this)},zoomOut:{selector:document.querySelector(this.options.selectors.zoomOutSelector),fn:this.handleZoomOutInteraction.bind(this)},center:{selector:document.querySelector(this.options.selectors.centerSelector),fn:this.handleCenterInteraction.bind(this)}}},e.prototype.addEventListeners=function(){var t=this;Object.keys(this.elements).forEach(function(e){var n=t.elements[e].selector,i=t.elements[e].fn;n&&1===n.nodeType&&n.addEventListener("click",i)})},e.prototype.updateZoomButton=function(t){var e=this.elements.zoomOut.selector;this.elements.zoomIn.selector;t===this.options.maxZoomOutLevel?(e.classList.add(this.options.disabledSelector),e.setAttribute("disabled",!0)):(e.classList.remove(this.options.disabledSelector),e.removeAttribute("disabled"))},e.prototype.handleZoomInInteraction=function(){try{this.map.zoomIn()}catch(t){throw new Error(t)}},e.prototype.handleZoomOutInteraction=function(){try{this.map.zoomOut()}catch(t){throw new Error(t)}},e.prototype.handleCenterInteraction=function(){try{var t=this.options.defaultView;this.map.centerMap(t.longitude,t.latitude,t.zoom),this.updateZoomButton(t.zoom)}catch(t){throw new Error(t)}},e}()}),define("module/destination/map/apis/mapbox",["module/mapbox/main","module/destination/map/controls"],function(t,e){var n={controls:{display:!1}};return function(){function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;_classCallCheck(this,i),this.options=t}return i.prototype.init=function(){var n=this;return this.api=new t(this.options.accessToken,this.options.mapOptions),this.api.init().then(function(){!0===n.options.controls.display&&(n.controls=new e(n,n.options.controls).init())})},i.prototype.addMarkerToMap=function(t,e,n,i,o){var a,s=(a=this.api).getMarkerOptions.apply(a,arguments),r=this.createMarker(o.className,s,t,e);this.api.addMarkerToMap(r)},i.prototype.addMarkersToMap=function(t,e,n){var i=this;if(t&&t.hasOwnProperty("features")){var o=t.features;Array.isArray(o)&&o.forEach(function(t){i.addMarkerToMap.apply(i,[].concat(t.geometry.coordinates).concat([e,t,n]))})}},i.prototype.showPopup=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};i.offset=this.api.getPopupOffsets(this.options.marker.className),this.api.showPopup([t,e],n,i)},i.prototype.zoomIn=function(){return this.api.zoomIn()},i.prototype.zoomOut=function(){return this.api.zoomOut()},i.prototype.hidePopup=function(){this.api.hidePopup()},i.prototype.createMarker=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return this.api.createMarker(t,e,[n,i])},i.prototype.addMapEventListener=function(t,e){this.api.addMapEventListener(t,e)},i.prototype.centerMap=function(t,e,n){this.api.centerMap([t,e],n)},i.prototype.recalculateMapHeight=function(){this.api.resizeMapToSpace()},i.prototype.getZoom=function(t){return Math.round(t.getZoom())},i.prototype.handleZoomStartInteraction=function(t){var e=this;return new Promise(function(n,i){n(e.getZoom(t.target))})},i.prototype.handleZoomEndInteraction=function(t){var e=this;return new Promise(function(n,i){n(e.getZoom(t.target))})},i}()});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};define("util/geojson-helper",[],function(){function t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return 2===t.length&&e("Feature",t,n)}function e(t,e,n){return"string"==typeof t&&2===e.length&&"object"===(void 0===n?"undefined":_typeof(n))&&{type:t,geometry:{type:"Point",coordinates:e},properties:n}}function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.length>0&&{type:"FeatureCollection",features:e.map(function(e){return t(e.coordinates,e.properties)}).filter(function(t){return!1!==t})}}return{createFeatureCollection:n}});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};define("module/destination/destination-map",["common/util/interface","module/destination/map/interface/map","module/destination/map/map","module/destination/map/apis/mapbox","util/geojson-helper"],function(t,e,n,i,o){function a(t){return t&&t.currentTarget?t.currentTarget:window.event.srcElement}return function(){function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,s),this.mapConfig=t,this.markerConfig=t.marker,this.mapAPIconfig=e,this.popupTemplate=t.popup.template,this.markerClicked=!1,this.currentMarkerElement=null}return s.prototype.init=function(){var t=this.getMapAPI(this.mapAPIconfig);return this.map=new n(t),this.map.init()},s.prototype.getMapAPI=function(){return t.ensureImplements(i.prototype,e),new i(this.mapAPIconfig)},s.prototype.addMarkersToMap=function(t){this.markers=t,this.markersGeoJSONFeatureCollection=this.getPreparedMarkerGeoJSONData(t),this.map.addMarkersToMap(this.markersGeoJSONFeatureCollection,this.handleMarkerClick.bind(this),this.markerConfig)},s.prototype.getPreparedMarkerGeoJSONData=function(t){var e=t.map(function(t){return{coordinates:[t.longitude,t.latitude],properties:{id:t.id}}});return o.createFeatureCollection(e)},s.prototype.addMarkerToMap=function(t,e){return this.map.addMarkerToMap(t,e,this.markerConfig)},s.prototype.renderTemplate=function(t,e){return t(e)},s.prototype.handleMarkerClick=function(t,e){"object"===(void 0===t?"undefined":_typeof(t))&&t.hasOwnProperty("id")&&a(e)&&this.activateMarkerAndShowPopup(t.id,a(e))},s.prototype.activateMarkerAndShowPopup=function(t,e){var n=this.getMarkerById(t),i=this.renderTemplate(this.popupTemplate,n.promo);this.markerClicked=!0,this.updateMarkers(e),this.showPopup(n.longitude,n.latitude,i)},s.prototype.updateMarkers=function(t){this.currentMarkerElement&&this.currentMarkerElement.classList.remove(this.markerConfig.classNameActive),t&&(t.classList.add(this.markerConfig.classNameActive),this.currentMarkerElement=t)},s.prototype.getMarkerById=function(t){return this.markers.filter(function(e){return e.id===t})[0]},s.prototype.showPopup=function(t,e,n){this.map.showPopup(t,e,n),this.popupActive=!0},s.prototype.hidePopup=function(){this.popupActive&&(this.map.hidePopup(),this.popupActive=!1)},s.prototype.addMapEventListener=function(t,e){"function"==typeof e&&"string"==typeof t&&this.map.addMapEventListener(t,e.bind(this))},s.prototype.handleMapInteraction=function(t){this.updateMarkers(),this.hidePopup()},s.prototype.handleZoomStartInteraction=function(t){return this.map.handleZoomStartInteraction(t)},s.prototype.handleZoomEndInteraction=function(t){return this.map.handleZoomEndInteraction(t)},s.prototype.centerMap=function(){var t=this.mapConfig.defaultView.longitude;this.map.centerMap(t.longitude,t.latitude,t.zoom)},s.prototype.recalculateMapHeight=function(){this.map.recalculateMapHeight()},s}()}),define("util/element-height-resizer",[],function(){return function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};_classCallCheck(this,t),this.target=e,this.ratio=n,this.onResize=i,this.currentHeight=null,this._init()}return t.prototype._init=function(){this.start()},t.prototype._addEventListener=function(){window.addEventListener("resize",this._handleWindowResize.bind(this))},t.prototype._removeEventListener=function(){window.removeEventListener("resize",this._handleWindowResize.bind(this))},t.prototype._handleWindowResize=function(){this.resize()},t.prototype.resize=function(){var t=window.innerHeight;t!==this.currentHeight&&(this.target.style.height=t*this.ratio+"px",this.currentHeight=t,this.onResize())},t.prototype.stop=function(){this._removeEventListener()},t.prototype.start=function(){this._addEventListener(),this.resize()},t}()}),define("module/destination/supersize-map",["common/config","module/destination/destination-map","templates","util/element-height-resizer","model/mediaQuery"],function(t,e,n,i,o){return function a(s,r,l){_classCallCheck(this,a);var c=t.get();if(_.has(c,"mapbox.destinationMap.accessToken")||!(r.length<0)){var d=document.querySelector("#"+s),u=l.zoomLevel-3,p={accessToken:c.mapbox.destinationMap.accessToken,controls:{display:!0,defaultView:{longitude:l.longitude,latitude:l.latitude,zoom:l.zoomLevel},selectors:{centerSelector:"[data-map-center]",zoomInSelector:"[data-map-zoomin]",zoomOutSelector:"[data-map-zoomout]"},disabledSelector:"map-controls__button--is-disabled",maxZoomInLevel:1,maxZoomOutLevel:u},marker:{className:"map-marker",classNameActive:"map-marker--is-active"},mapOptions:{center:[l.longitude,l.latitude],container:s,doubleClickZoom:!0,dragRotate:!1,pitch:0,renderWorldCopies:!0,scrollZoom:!1,style:"mapbox://styles/bbcworldwide/cizy1gpbw009u2ro4vdahmp6c",zoom:parseInt(l.zoomLevel,10),minZoom:l.zoomLevel-3,attributionControl:!1}},h={popup:{template:n["map-popup"]},marker:p.marker},m=new e(h,p);m.init().then(function(){if(m.addMapEventListener("click",m.handleMapInteraction.bind(m)),m.addMarkersToMap(l.markers),o.isMobileDevice()){new i(d,.7,m.recalculateMapHeight.bind(m))}})}}}),define("model/capabilities",["jquery"],function(t){return new function(){var e=!0;this.testCapabilities=function(){this.testDataURI()},this.isBrowser=function(e){switch(e){case"ie8":return t("body").hasClass("browser-ver-ie8")}return!1},this.hasDataURI=function(){return!this.isBrowser("ie8")&&e},this.isIE8=function(){return hasFixedWidthLayout()},this.isIE9=function(){var t=document.createElement("div");return t.innerHTML="\x3c!--[if IE 9]><i></i><![endif]--\x3e",1==t.getElementsByTagName("i").length},this.testDataURI=function(){var t=new Image;t.onload=t.onerror=function(){1==this.width&&1==this.height||(e=!1)},t.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="},this.testCapabilities()}}),define("layouts/index/destination-supersize",["lodash","common/util/extends","layouts/index/base","model/exposed-data","model/exposed-config","common/config","common/model/destination/all-stories-by-destination","module/weather","common/entity/habitat/destination/supersize/document","common/model/destination/destination","templates","module/component-loader","component/load-more","interaction-controller/pagination/paged","common/entity/habitat/story/list","common/entity/habitat/paged-list","module/paginated-entity-list","common/entity/habitat/destination/supersize/promo","common/entity/factory","component/promo-group/set","common/entity/habitat/paging","component/destination-map","module/destination/supersize-map","model/mediaQuery","model/capabilities"],function(t,e,n,i,o,a,s,r,l,c,d,u,p,h,m,f,g,b,y,v,w,S,x,I,C){function T(t,e){this.destinationId=e,this.moreResultsSelector="#more-stories-wrapper",this.loadMoreWrapperSelector="#load-more-wrapper",this.weatherForecastSecondarySelector="#weather-forecast-secondary",n.call(this,t),this.setupInlineMap(),this.setupWeatherForecastSecondary()}return e(T,n,{listItemEntity:b,promoGroupComponent:v,promoGroupTemplate:"promo-group-more-stories",getListConfig:function(){var e={context:"domain","include-branded-class":!0};return t.has(i,"more-stories-promo-groups.groups")?t.extend(e,{groups:i["more-stories-promo-groups"].groups}):e},getPagingData:function(){var e;if(t.has(i,"more-stories.paging"))return e=new w(i["more-stories"].paging),e.setPage(e.getPage()-1),e},setModel:function(e){this.model=new s(t.extend({id:this.destinationId},e))},setupWeatherForecastSecondary:function(){if(t.has(i,"destination")){var e=new l(i.destination),n=e.get("weatherId");if(!1!==n&&n.length>0){new r(this.weatherForecastSecondarySelector,n,{forecastRange:{start:1,end:4}},d["weather-forecast-clean"]).load()}}},setupInlineMap:function(){if(!C.isIE8()&&!C.isIE9()){var t=$("#map-container"),e=new S(new l,{class:"map--destination-supersize",controlsClass:"map-controls--destination-supersize",mapContainerId:"mapbox-supersize-destination",marker:{promo:{context:"domain","include-branded-class":!0,class:"map-popup-promo",image:{useImageTag:!0,format:{landscape:{x:624,y:351}}}}}},d.mapbox);new u(t,e).load().then(function(){new x("mapbox-supersize-destination",t.find(".map"),e.getViewData())})}}}),T}),define("common/model/collection/collection",["lodash","common/util/extends","common/model/habitat-object"],function(t,e,n){function i(t){n.call(this,t)}return e(i,n,{arrRequiredConfig:["id","type"],URLScheme:"/{moduleId}/{type}/{id}"}),i}),define("component/promo-group/collection-story-list",["lodash","common/config","component/promo-group/base","common/entity/habitat/collection/story-list","templates"],function(t,e,n,i,o){return function(t,e){return n(t,new i,e,"promo-group")}}),define("component/promo-group/video-series",["lodash","common/config","module/MVVM-component","common/model/collection/collection","component/promo-group/collection-story-list","templates"],function(t,e,n,i,o){return function(n,a,s){var r=new i(t.extend({id:n,type:"video"},e.get()));o(r,s)}}),define("layouts/video-story",["lodash","lib/ecmaScript5","jquery","lib/domReady","orb/api","model/digitalData","common/config","model/exposed-data","common/view/entity/story","common/view/entity/collection","common/view/entity-URL-router","templates","module/component-loader","component/promo-group/video-series","common/util/extends","layouts/story"],function(t,e,n,i,o,a,s,r,l,c,d,u,p,h,m,f){var g=function(t){this.videoSeriesListSelector="#episode-list-component",f.call(this,t)};return m(g,f,{setupPageComponents:function(){this.setupVideoSeriesComponent(),this.setupRelatedStoriesPrimary(),this.setupMoreAmazingStoriesPrimary()},setupVideoSeriesComponent:function(){if(t.has(s.get(),"moduleId")&&t.has(r,"story")){var e=new l(r.story),i=new c(e.get("collection",{})),o=d.getURLParameters(i.get("id"));if(t.has(o,"id")){var a=new h(o.id,s.get().moduleId,{titleOverride:"More Episodes from {title}",excludedStoryId:e.get("id"),promoGroup:{id:"video-series",class:"single-column-primary",adSlots:[{index:5,slotId:"adsense_mpu"}]},promoUnit:{class:"secondary-branded",image:{format:{landscape:{x:"624",y:"351"}}}}});new p(n(this.videoSeriesListSelector),a).load()}}}}),g}),define("wwtravel/main",["lodash","common/util/extends","glaze-main-app","model/exposed-routes","model/exposed-data","common/helper/request","layouts/base","layouts/index/entity/collection","layouts/index/story/destination","layouts/index/destination-supersize","layouts/video-story","common/entity/habitat/destination/link"],function(t,e,n,i,o,a,s,r,l,c,d,u){var p=function(){n.call(this)};return e(p,n,{addRoutes:function(){n.prototype.addRoutes.call(this);var e=this,p=t.first($(".container-index")),h=function(e){if(e=a.getParamsFromURL(e.request_),t.has(e,"id")){!0===new u(o.destination).get("isSupersize")?new c(p,e.id):new l(p,e.id)}};this.router.addRoute(i["video-index"],function(){new r(p,"video")}),this.router.addRoute(i["video-episode"],function(){new d("#story-page",e.pageLayout.isNative()).init()}),this.router.addRoute(i["destination-index"],function(){new s("#destination-index")}),this.router.addRoute(i.destination,function(t){h(t)}),this.router.addRoute(i.region,function(t){h(t)})}}),p});