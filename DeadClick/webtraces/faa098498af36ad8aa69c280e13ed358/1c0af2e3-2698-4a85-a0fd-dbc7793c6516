
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/libraries/Partner/xfinity_experience_surf.js */

var CNBC_Xfinity_Experience={};(function($){if($('body').hasClass('mobile-touch')){return;}
var XfinityURLs;CNBC_Settings=(typeof CNBC_Settings!='undefined'?CNBC_Settings:{});CNBC_Settings.baseurls=(typeof CNBC_Settings.baseurls!='undefined'?CNBC_Settings.baseurls:{});CNBC_Settings.baseurls.pub_base_protocol_agnostic=(typeof CNBC_Settings.baseurls.pub_base_protocol_agnostic!='undefined'?CNBC_Settings.baseurls.pub_base_protocol_agnostic:'');CNBC_Xfinity_Experience.SSID='cnbc_xfinitycobrand_';CNBC_Xfinity_Experience.isInitialized=false;if(window.location.href.indexOf('stage.cnbcapps.cnbc.com/portfolio/')!=-1){CNBC_Settings.baseurls.pub_base_protocol_agnostic='//stg-pub.cnbc.com';}
if(CNBC_Settings&&CNBC_Settings.baseurls){XfinityURLs={register:CNBC_Settings.baseurls.register_base,login:CNBC_Settings.baseurls.login_base,fm:CNBC_Settings.baseurls.sc_base_protocol_agnostic,pub:CNBC_Settings.baseurls.pub_base_protocol_agnostic,watchlist:CNBC_Settings.baseurls.watchlist_base};CNBC_Xfinity_Experience.optionalOptin=CNBC_Settings.baseurls.optional_optin;}
else{XfinityURLs={register:'//register.cnbc.com',login:'//login.cnbc.com',fm:'//sc.cnbcfm.com',pub:'//www.cnbc.com',watchlist:'//watchlist.cnbc.com'};CNBC_Xfinity_Experience.optionalOptin='101';}
CNBC_Xfinity_Experience.modules=[];CNBC_Xfinity_Experience.moduleNames=[];CNBC_Xfinity_Experience.optinDomains=['apps.cnbc.com/portfolio','watchlist.cnbc.com','qa-ec02watchlist.cnbc.com','stage.cnbcapps.cnbc.com/portfolio/','watchlist-stage.cnbc.com'];CNBC_Xfinity_Experience.init=function(args){$('body').addClass('xfinity');if(CNBC_Xfinity_Experience.isInitialized){return false;}
if(window.activePartnerExperience=='xfinity'){this.prepareHeader();this.prepareOptin();this.getModuleList();if(this.modules.length!=0){$('head').append('<link rel="stylesheet" href="'+XfinityURLs.fm+'/applications/cnbc.com/staticcontent/styles/xfinity.css" type="text/css" />');this.fetchModules();}
this.switchPlayerVars();this.performPassiveAuth();this.setPromoPackageMedium();CNBC_Xfinity_Experience.isInitialized=true;}};CNBC_Xfinity_Experience.setPromoPackageMedium=function(){if($('#promo_medium_section_top').length){var promoHTML=$('#promo_medium_section_top').html();$('#promo_medium_section_top').remove();$('#promo_medium_section_bottom').html(promoHTML);}};CNBC_Xfinity_Experience.prepareHeader=function(){var headerEl='<div id="prtnr_mod_header"></div>';$('body').prepend(headerEl);};CNBC_Xfinity_Experience.isUserOptedIn=function(){var i;var option;if(window.SURF&&window.SURF.globals&&window.SURF.globals.user&&window.SURF.globals.user.brand_data&&window.SURF.globals.user.brand_data.option){option=(typeof SURF.globals.user.brand_data.option=='string')?JSON.parse(SURF.globals.user.brand_data.option):SURF.globals.user.brand_data.option;if(option.length<1){return false;}
for(i=0;i<option.length;i++){if(option[i]=='XFINITY-CNBC'){return true;}}}
return false;};CNBC_Xfinity_Experience.prepareOptin=function(){if(window.SURF&&window.SURF.globals&&window.SURF.globals.user){var isUserOptedIn=CNBC_Xfinity_Experience.isUserOptedIn();if(!isUserOptedIn&&this.doesDomainMatch()){var overlayEl='<div id="prtnr_mod_overlay"></div>';$('body').prepend(overlayEl);}};};CNBC_Xfinity_Experience.doesDomainMatch=function(){for(var i=0,len=CNBC_Xfinity_Experience.optinDomains.length;i<len;i++){if(window.location.href.indexOf(CNBC_Xfinity_Experience.optinDomains[i])!=-1){return true;}}
return false;}
CNBC_Xfinity_Experience.getModuleList=function(){var thisObj=this;var $availableModules=$('[id^="prtnr_mod_"]');$availableModules.each(function(){var $availableModule=$(this);var moduleName='xfinity_'+$availableModule.attr('id').substring(10);thisObj.modules.push({'id':moduleName,'element':$availableModule});thisObj.moduleNames.push(moduleName);});};CNBC_Xfinity_Experience.fetchModules=function(){var thisObj=this;var url=XfinityURLs.pub+'/recirculationmodules/get?p=xfinity_partner&c='+this.moduleNames.join('|');var ajaxCall=$.ajax({url:url,dataType:'jsonp',jsonpCallback:'recirculationHandler',cache:true,async:false,success:function(data){thisObj.paintModules(data)
thisObj.initOptin();thisObj.initCarouselLib();}});};CNBC_Xfinity_Experience.initCarouselLib=function(){var $xfinityVideoContainer=$('#prtnr_mod_videos');if($xfinityVideoContainer.length){var myCarousel_prtnr_mod_videos=new CNBC_Carousel3();myCarousel_prtnr_mod_videos.init({itemsPerPage:5,itemsPerTransition:5,swipable:true,speed:500,nextPrevLinks:true,container:'prtnr_mod_videos',currentNodeClass:'currentNode',lazyLoad:true,lazyLoadNext:true,nextItemCallback:function(){s.linkTrackVars='eVar48,prop48';s.eVar48='videogallerycarousel:xfinity:tab:right:'+CNBC_Settings.pageNodeId;s.prop48='videogallerycarousel:xfinity:tab:right:'+CNBC_Settings.pageNodeId;s.tl(this,'o','Video Gallery Carousel Module');s.manageVars("clearVars");},prevItemCallback:function(){s.linkTrackVars='eVar48,prop48';s.eVar48='videogallerycarousel:xfinity:tab:left:'+CNBC_Settings.pageNodeId;s.prop48='videogallerycarousel:xfinity:tab:left:'+CNBC_Settings.pageNodeId;s.tl(this,'o','Video Gallery Carousel Module');s.manageVars("clearVars");}});CNBC_Carousel3.Objs.push(myCarousel_prtnr_mod_videos);$xfinityVideoContainer.css({display:'inline-block'});}
var tabHtml='<h3 class="module-header">TOP VIDEOS ON XFINITY</h3>';$xfinityVideoContainer.find('div.carouselBody').before(tabHtml);};CNBC_Xfinity_Experience.paintModules=function(data){for(var i=0,len=CNBC_Xfinity_Experience.modules.length;i<len;i++){var module=CNBC_Xfinity_Experience.modules[i];module.element.html(data[module.id]);}};CNBC_Xfinity_Experience.switchPlayerVars=function(){if(typeof CNBC_Player!='undefined'&&CNBC_Player.prototype&&CNBC_Player.prototype.drawPlayer){var draw=CNBC_Player.prototype.drawPlayer;var brandedSiteSection='cnbc_xfinitycobrand_embed';var nid=CNBC_Partner_Experience.pageNodeId;if(CNBC_Partner_Experience.partnerHomeNodes.indexOf(nid)!=-1){brandedSiteSection='cnbc_xfinitycobrand_money';}else if(typeof CNBC_Settings!='undefined'&&CNBC_Settings.pageNodeId=='100746233'){brandedSiteSection='cnbc_xfinitycobrand_homepage';}
CNBC_Player.prototype.drawPlayer=function(){this._args.flashVars.branded_player='Xfinity Money';this._args.flashVars.branded_site_section=brandedSiteSection;draw.call(this);};}};CNBC_Xfinity_Experience.initOptin=function(){var thisObj=this;if($('#prtnr_mod_overlay').length!=0){$("#xfinity_overlay_background").height($(document).height());var $ov=$("#xfinity_overlay");var top=$(window).scrollTop()-($ov.outerHeight()/2);$ov.css("margin-top",top);$('#overlayClose').click(function(e){if(document.referrer!=''&&document.referrer.indexOf('register.cnbc.com')==-1&&document.referrer.indexOf('watchlist.cnbc.com')==-1){window.location.href=document.referrer;}else{window.location.href=''+XfinityURLs.pub+'/xfinity-money/';}});$('#noThanks').click(function(e){if(document.referrer!=''&&document.referrer.indexOf('register.cnbc.com')==-1&&document.referrer.indexOf('watchlist.cnbc.com')==-1){window.location.href=document.referrer;}else{window.location.href=''+XfinityURLs.pub+'/xfinity-money/';}});$('#submitOptin').click(function(e){e.preventDefault();thisObj.submitOptin();});}};CNBC_Xfinity_Experience.submitOptin=function(){var thisObj=this;var rulesAccepted=false,offersAccepted=false;if($('#acceptRules').is(':checked')){rulesAccepted=true;$('#rulesErrMsg').hide();}else{rulesAccepted=false;$('#rulesErrMsg').show();$('#acceptRules').change(function(){$('#rulesErrMsg').toggle();});return;}
if($('#acceptOffers').is(':checked')){offersAccepted=true;}else{offersAccepted=false;}
if(rulesAccepted){thisObj.recordOptin(offersAccepted);}};CNBC_Xfinity_Experience.recordOptin=function(offersAccepted){if(CNBC_Xfinity_Experience.isUserOptedIn()){CNBC_Xfinity_Experience.closeOverlay();return false;};if(!SURF||!SURF.globals||!SURF.globals.session||!SURF.globals.session.uid){return false;}
var uid=SURF.globals.session.uid,signature='',updateObj={},option=(SURF.globals.user.brand_data)?SURF.globals.user.brand_data.option:'',option_date=(SURF.globals.user.brand_data)?SURF.globals.user.brand_data.option_date:'',optionArray=(option)?JSON.parse(option):'',option_dateArray=(option_date)?JSON.parse(option_date):'',optLength=optionArray.length,newOptData,newOptDateData,user_data;if(optLength&&optionArray.indexOf("XFINITY-CNBC")==-1){optionArray.push('XFINITY-CNBC');option_dateArray.push('XFINITY-CNBC|'+new Date().getTime());newOptData=optionArray;newOptDateData=option_dateArray;}else if(optLength==0){newOptData=['XFINITY-CNBC'];newOptDateData=['XFINITY-CNBC|'+new Date().getTime()];};user_data={'option':JSON.stringify(newOptData),'option_date':JSON.stringify(newOptDateData)};updateObj.uid=uid;updateObj.signature=signature;updateObj.user_data=user_data;SURF.event.bind(SURF.events.EDIT_ACCOUNT,function(event,user){CNBC_Xfinity_Experience.closeOverlay();});CNBC_Surf_Mediator.surfUpdate(updateObj);return true;}
CNBC_Xfinity_Experience.closeOverlay=function(){$("#xfinity_overlay_background").remove();$("#xfinity_overlay").remove();};CNBC_Xfinity_Experience.getYPosition=function(){var y;if(self.pageYOffset){y=self.pageYOffset;}else if(document.documentElement&&document.documentElement.scrollTop){y=document.documentElement.scrollTop;}else if(document.body){y=document.body.scrollTop;}
return y;};CNBC_Xfinity_Experience.checkBrowser=function(){var N=navigator.appName,ua=navigator.userAgent,tem;var M=ua.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);if(M&&(tem=ua.match(/version\/([\.\d]+)/i))!=null)M[2]=tem[1];M=M?[M[1],M[2]]:[N,navigator.appVersion,'-?'];return M;};CNBC_Xfinity_Experience.performPassiveAuth=function(){if(CNBC_Xfinity_Experience.checkBrowser().indexOf('MSIE')!=-1){return;}
var thisObj=this;var override=false;if(CNBC_Partner_Experience.checkReferrer(document.referrer)){override=true;}};CNBC_Xfinity_Experience.changeLoginState=function(){var userName=CNBC_Partner_Experience.readCookie('SUBSCRIBERINFO');userName=userName?userName:"Guest";var welcomeTxt='Welcome, '+userName;$('#login-container > span').text(welcomeTxt);$('#cnbc_username').text(welcomeTxt);$('#unreg-user').hide();$('#reg-user').removeClass('hide').show();$('#unreg_user').hide();$('#reg_user').removeClass('hide').show();if(typeof CNBC_Signin!='undefined'){CNBC_Signin.hideOverLay=function(){};}};})(jQuery);
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/social-tools-omniture/gigya-omniture.js */

CNBC_Gigya_Omniture={};CNBC_Gigya_Omniture.uid=null;CNBC_Gigya_Omniture.onSendDone=function(event){CNBC_Gigya_Omniture.onSendDoneCommon(event,'mobile');};CNBC_Gigya_Omniture.onShareButtonClickedMobile=function(event){if(event.shareItem&&event.shareItem.provider=='email'){event.providers='email';CNBC_Gigya_Omniture.onSendDoneCommon(event,'mobile');}};CNBC_Gigya_Omniture.onSendDoneVideoGall=function(event){if(event.providers){var providers=event.providers.split(",");for(i=0;i<providers.length;i++){var provider=providers[i];s.linkTrackVars="eVar14,eVar15,prop57,events";s.linkTrackEvents="event52";s.events="event52";s.eVar14=provider+": Share Published";s.eVar15="Video Gallery:Description";s.prop57=s.pageName;s.tl(this,'o','Gigya Share');}}};CNBC_Gigya_Omniture.onSendDoneTop=function(event){CNBC_Gigya_Omniture.onSendDoneCommon(event,'top');};CNBC_Gigya_Omniture.onSendDoneSlideshow=function(event){CNBC_Gigya_Omniture.onSendDoneCommon(event,'slideshow');};CNBC_Gigya_Omniture.onSendDoneQuiz=function(event){CNBC_Gigya_Omniture.onSendDoneCommon(event,'quiz');};CNBC_Gigya_Omniture.onSendDonePersistent=function(event){CNBC_Gigya_Omniture.onSendDoneCommon(event,'persistent');};CNBC_Gigya_Omniture.onSendDoneBottom=function(event){CNBC_Gigya_Omniture.onSendDoneCommon(event,'bottom');};CNBC_Gigya_Omniture.onSendDoneCommon=function(event,pos){var objPosition={'mobile':['Omiture Send Done Called - Mobile','Share Bar:Mobile'],'top':['Omiture Send Done Called - Top','Share Bar:Top of Page'],'bottom':['Omiture Send Done Called - Bottom','Share Bar:Bottom of Screen'],'quiz':['Omiture Send Done Called - Quiz','Share Bar:Quiz'],'slideshow':['Omiture Send Done Called - Slideshow','Share Bar:Slideshow'],'persistent':['Omiture Send Done Called - Persistent','Share Bar:Persistent']};CNBC_Common.ConsoleLog(objPosition[pos][0]);if(event.providers){var providers=event.providers.split(",");for(i=0;i<providers.length;i++){var provider=providers[i];s.linkTrackVars="eVar14,eVar15,prop57,events";s.linkTrackEvents="event52";s.events="event52";s.eVar14=provider+": Share Published";s.eVar15=objPosition[pos][1];s.prop57=s.pageName;s.tl(this,'o','Gigya Share');}}};CNBC_Gigya_Omniture.disqusDiscussionScroll=function(){if(typeof s!='undefined'){s.linkTrackVars="events";s.linkTrackEvents="event38";s.events="event38";s.tl(this,'o','Disqus Discussion Scroll');}};CNBC_Gigya_Omniture.trackLoginEvent=function(event){var action=event.eventName+": "+event.provider;s.linkTrackVars="eVar11,events";s.linkTrackEvents="event51";s.events="event51";s.eVar11=action;s.tl(this,'o','Gigya Login');};CNBC_Gigya_Omniture.onLogout=function(event){};CNBC_Gigya_Omniture.onConnectionAdded=function(event){var action=event.eventName+": "+event.provider;s.linkTrackVars="eVar12";CNBC_Common.ConsoleLog('UID: '+CNBC_Gigya_Omniture.uid);s.eVar12=CNBC_Gigya_Omniture.uid;s.tl(this,'o','Gigya UID');};CNBC_Gigya_Omniture.onConnectionRemoved=function(){};CNBC_Gigya_Omniture.getAccountInfoResponse=function(response){if(response.errorCode==0){var profile=response['profile'];CNBC_Gigya_Omniture.uid=profile['UID'];}};CNBC_Utils.execute('gigya omniture',function(){gigya.accounts.getAccountInfo({callback:CNBC_Gigya_Omniture.getAccountInfoResponse});});CNBC_Gigya_Omniture.onReactionClicked=function(event){var reaction=event.reaction.text;s.linkTrackVars="eVar15,events";s.linkTrackEvents="event54";s.events="event54";s.eVar15=reaction+": Reaction Button Clicked";s.tl(this,'o','Gigya Reaction');};CNBC_Gigya_Omniture.onCommentSubmitted=function(event){s.linkTrackVars="eVar14,events";s.linkTrackEvents="event53";s.events="event53";s.eVar14="Gigya Comments : Comment Submitted";s.tl(this,'o','Gigya Comment');};CNBC_Gigya_Omniture.onCommentVoted=function(event){s.linkTrackVars="eVar13,events";s.linkTrackEvents="event55";s.events="event55";s.eVar13="Gigya Comments : Comment Ranked";s.tl(this,'Â§o','Gigya Comment Ranked');};
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/libraries/scrollpanel/scrollpanel.js */

function CNBC_ScrollPanel(){};(function($){CNBC_ScrollPanel.prototype._container=null;CNBC_ScrollPanel.prototype._callback=null;CNBC_ScrollPanel.prototype._isShowing=false;CNBC_ScrollPanel.prototype._breakPoint=0;CNBC_ScrollPanel.prototype._transTime=0;CNBC_ScrollPanel.prototype._respectiveContainer=null;CNBC_ScrollPanel.prototype._setLeft=false;CNBC_ScrollPanel.prototype._setLeftOffset=null;CNBC_ScrollPanel.prototype._hidePoint=null;CNBC_ScrollPanel.prototype._hidePointContainer=null;CNBC_ScrollPanel.prototype.init=function(args){var thisObj=this;var args=args||{};if(args.container!=null){thisObj.setContainer(args.container);thisObj.setOptionalOverrides(args);thisObj.initEvents();}else{CNBC_Common.ConsoleLog('Missing Arguments in Scroll Panel Library...');}};CNBC_ScrollPanel.prototype.setContainer=function(container){var thisObj=this;var type=typeof container;var container;if(type=='string'){container=$('#'+container);}else if(type=='object'&&container.length==1){container=container;}else{container=$(container);}
thisObj._container=container;};CNBC_ScrollPanel.prototype.setOptionalOverrides=function(args){var thisObj=this;if(args.callback){thisObj._callback=args.callback;}
if(args.breakPoint){thisObj._breakPoint=args.breakPoint;}
if(args.transTime){thisObj._transTime=args.transTime;}
if(args.respectiveContainer&&args.setLeft){thisObj._respectiveContainer=args.respectiveContainer;thisObj._setLeft=args.setLeft;}
if(args.respectiveContainer&&args.setLeftOffset){thisObj._setLeftOffset=args.setLeftOffset;}
if(args.hidePoint){thisObj._hidePoint=args.hidePoint;}
if(args.hidePointContainer){thisObj._hidePointContainer=args.hidePointContainer;}};CNBC_ScrollPanel.prototype.initEvents=function(){var thisObj=this;$(window).scroll(function(){var scrollValue=$(window).scrollTop();if(thisObj._hidePointContainer&&thisObj._hidePointContainer.length){thisObj._hidePoint=thisObj._hidePointContainer.offset().top+thisObj._hidePointContainer.outerHeight();}
if(thisObj._hidePoint&&scrollValue>thisObj._breakPoint&&scrollValue>thisObj._hidePoint){$(thisObj._container).addClass("bottomPage");$('div[gigid=\'showShareBarUI_showSimpleShareUI\']').hide();}
if(scrollValue>thisObj._breakPoint&&!thisObj._isShowing){thisObj._isShowing=true;thisObj.showElement();}else if(scrollValue<thisObj._breakPoint&&thisObj._isShowing){thisObj._isShowing=false;thisObj.hideElement();$('div[gigid=\'showShareBarUI_showSimpleShareUI\']').hide();}
if(thisObj._hidePoint&&scrollValue<=thisObj._hidePoint){$(thisObj._container).removeClass("bottomPage");}
return false;});if(thisObj._respectiveContainer&&thisObj._respectiveContainer.length&&thisObj._setLeft){var leftOffset=thisObj._respectiveContainer.offset().left;if(thisObj._setLeftOffset){leftOffset=leftOffset+thisObj._setLeftOffset;}
$(thisObj._container).css("left",leftOffset+'px');$(window).resize(function(){leftOffset=thisObj._respectiveContainer.offset().left;if(thisObj._setLeftOffset){leftOffset=leftOffset+thisObj._setLeftOffset;}
$(thisObj._container).css("left",leftOffset+'px');});}
$(thisObj._container).delegate('#'+$(thisObj._container).attr("id")+'-reaction5-icon_img','click',function(event){var gigOverlay=$('div[gigid=\'showShareBarUI_showSimpleShareUI\']');if($(thisObj._container).css('position')=='fixed'){var leftPos=$(this).offset().left;gigOverlay.css('position','fixed');gigOverlay.css('bottom','55px');gigOverlay.css('left',leftPos+'px');gigOverlay.css('top','inherit');}});};CNBC_ScrollPanel.prototype.showElement=function(){var thisObj=this;if(thisObj._transTime){$(thisObj._container).fadeTo(thisObj._transTime,1,function(){$(thisObj._container).css("display","block");});}else{$(thisObj._container).css("display","block");}
if(thisObj._callback){thisObj._callback(true);}};CNBC_ScrollPanel.prototype.hideElement=function(){var thisObj=this;if(thisObj._transTime){$(thisObj._container).fadeTo(thisObj._transTime,0,function(){$(thisObj._container).css("display","none");});}else{$(thisObj._container).css("display","none");}
if(thisObj._callback){thisObj._callback(false);}};})(jQuery);
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/libraries/Poll/poll.2.js */

function CNBC_Poll(){};(function($){CNBC_Poll._callback='pollReqHandl';CNBC_Poll.errorString="This poll is currenly unavailable. Please check back again later";CNBC_Poll.surveyText='Not a Scientific Survey. Results may not total 100% due to rounding.';CNBC_Poll.polls_settings;CNBC_Poll.polls=[];CNBC_Poll.pollServiceBase="//cnbc.com/services/polls";CNBC_Poll.jsonpCount=0;CNBC_Poll.init=function(p_s){CNBC_Poll.getPollIds(p_s.id);CNBC_Poll.pollServiceBase=p_s.pollservicebaseurl||CNBC_Poll.pollServiceBase;if(CNBC_Poll.polls.length>0){CNBC_Poll.updateDiv();}};CNBC_Poll.getPollIds=function(id){var jqSelector=(id)?"div#"+id:"div[data-pollId]";$(jqSelector).each(function(i,val){CNBC_Poll.polls[i]=$(this).attr("data-pollId");});}
CNBC_Poll.updateDiv=function(){var polls=CNBC_Poll.polls;var currPoll,pid,pCookie,hasPid;var pollLen=polls.length;for(var i=0;i<pollLen;i++){currPoll=polls[i];pCookie=CNBC_Utils.readCookie('CNBC_poll_config',true);if(pCookie){hasPid=pCookie.indexOf(currPoll);if(hasPid>=0){this.showPollResults(currPoll);}else{this.showPollTable(currPoll);}}else{this.showPollTable(currPoll);}}};CNBC_Poll.showPollResults=function(pollId){var url=CNBC_Poll.pollServiceBase+"/"+pollId;var pollObject;$.ajax({url:url,type:"get",dataType:"jsonp",jsonpCallback:CNBC_Poll._callback+CNBC_Poll.jsonpCount++,cache:true,success:function(response){pollObject=CNBC_Poll.getPollObject(response);if(pollObject){$("#"+pollId+" .poll-question").html(pollObject.data.node.title);CNBC_Poll.getResultsHtml(pollObject,null,pollId);}},error:function(request,error){CNBC_Poll.populateError();}});};CNBC_Poll.getPollObject=function(response){var responseText=JSON.stringify(response);var pollObject=eval('('+responseText.replace(/#/g,"")+')');if(pollObject.error==true){CNBC_Poll.populateError();return false;}
return pollObject;};CNBC_Poll.showPollTable=function(pollId){var url=CNBC_Poll.pollServiceBase+"/"+pollId;var votesObject,total_votes,pollObject;$.ajax({url:url,type:"get",dataType:"jsonp",jsonpCallback:CNBC_Poll._callback+CNBC_Poll.jsonpCount++,cache:true,success:function(response){pollObject=CNBC_Poll.getPollObject(response);if(pollObject){votesObject=pollObject.data.votes;$("#"+pollId+" .container-options").css('display',"block");if($("#"+pollId).length){$("#"+pollId+" .poll-question").html(pollObject.data.node.title);$("#"+pollId+" .poll-options").html(CNBC_Poll.getPollOptionsHtml(pollObject.data.node,pollId));$("#"+pollId+" .poll-control a").attr("href","javascript:CNBC_Poll.performVote('"+pollId+"')");}}},error:function(request,error){CNBC_Poll.populateError();}});};CNBC_Poll.performVote=function(pId){var flag=0;var rad_val,currOpt;var formObj=document.getElementById("pollform_"+pId);var opt=formObj.pollOptions;var optLen=opt.length;for(var i=0;i<optLen;i++){currOpt=opt[i];if(currOpt.checked){rad_val=currOpt.value;flag=1;}}
if(flag==0){alert('Please select an option to vote');return;}
var url=CNBC_Poll.pollServiceBase+"/"+pId+"/"+rad_val+"/"+pId;$.ajax({url:url,type:"get",dataType:"jsonp",success:function(response){var pollObject=CNBC_Poll.getPollObject(response);if(pollObject){CNBC_Poll.getResultsHtml(pollObject,rad_val,pId);CNBC_Poll.setCookie(pollObject.data.node.nid);}},error:function(request,error){CNBC_Poll.populateError();}});};CNBC_Poll.setCookie=function(nid){var cookieValue=nid;var c=CNBC_Utils.readCookie('CNBC_poll_config',true);if(!CNBC_Common.isNull(c)){cookieValue=c+','+nid;}
CNBC_Utils.createCookie('CNBC_poll_config',cookieValue,10000,true);}
CNBC_Poll.getLabel=function(resultObj,myoffset){var label;$.each(resultObj,function(xx,yy){if(myoffset==yy['vote_offset']){label=yy.label;}});return label;};CNBC_Poll.getPollOptionsHtml=function(pollObject,pollId){var tableHtml=[];tableHtml.push('<form name="pollform_'+pollId+'" id="pollform_'+pollId+'">');$.each(pollObject.choice,function(i,c){tableHtml.push('<div class="optionWrapper">');tableHtml.push('<input type="radio" name="pollOptions" value='+c['vote_offset']+'>');tableHtml.push(c.label);tableHtml.push('</input>');tableHtml.push('</div>');});tableHtml.push('</form>');return tableHtml.join('');};CNBC_Poll.getTotalVotes=function(votesObject){var total_votes=0;if(!CNBC_Common.isNull(votesObject)){$.each(votesObject,function(i,j){total_votes+=parseInt(j);});}
return total_votes;};CNBC_Poll.getResultsHtml=function(pollObject,rad_val,pId){var self=this;var total_votes=0;var percent=0;var votesObject=pollObject.data.votes||{};var results_html=[];var currVotes;total_votes=CNBC_Poll.getTotalVotes(votesObject);if(rad_val!=null){++total_votes;}
var pChoice=pollObject.data.node.choice||[];if(total_votes){var index=0;$.each(pChoice,function(i,j){index=i+1;currVotes=pollObject.data.votes[index];if((!currVotes&&rad_val&&index!=rad_val)||(!currVotes&&!rad_val)){percent=0;}else if(!currVotes&&rad_val&&index==rad_val){percent=CNBC_Poll.getPercentage(total_votes,1.00);}else if(rad_val&&index==rad_val){percent=CNBC_Poll.getPercentage(total_votes,parseFloat(currVotes)+1);}else{percent=CNBC_Poll.getPercentage(total_votes,parseFloat(currVotes));}
CNBC_Poll.displayBar(results_html,j.label,percent);});}else{$.each(pChoice,function(i,j){CNBC_Poll.displayBar(results_html,j.label,percent);});}
$("#"+pId+" .container-result .pollTotalVotes .poll-count").html(total_votes);$("#"+pId+" .container-options").css('display',"none");$("#"+pId+" .container-result").css('display',"block");if($("#"+pId+" .container-result .graph").length){$("#"+pId+" .container-result .graph").html(results_html.join('')).fadeIn("slow",function(){CNBC_Poll.animateResults(this);});}};CNBC_Poll.getPercentage=function(total_votes,currVotes){return Math.round((currVotes/total_votes)*100);}
CNBC_Poll.displayBar=function(results_html,label,percent){results_html.push('<p class="bar-title">');results_html.push(label);results_html.push('</p><div class="pollPercentText">'+percent+'%</div><div class="bar-container">');results_html.push('<div class="pollBar" data-percent="'+percent+'"></div></div>');};CNBC_Poll.animateResults=function($obj){var percentage,$this;$("div.pollBar",$obj).each(function(){$this=$(this);percentage=$this.attr('data-percent')+"%";$this.css({width:"0%"}).animate({width:percentage},'slow');});};CNBC_Poll.populateError=function(){var errorDiv='<div class="pollerror">'+CNBC_Poll.errorString+'</div>';if($('#polltable').length){$('#polltable').html(errorDiv);}};})(jQuery);
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/libraries/EnlargedImage/enlargedImage.js */
'use strict';function CNBC_EnglargedImage(){};(function($){CNBC_EnglargedImage.prototype.init=function(data){var self=this;var storyPage=$("body[id^='page_story']");var listicleSlideshowPage=$('#page_slideshow_one_page');if(storyPage.length>0){var staticImageContainer=$("body[id^='page_story'] .cnbc-body .group-container .embed-container").filter('.image');var chartImageContainer=$("body[id^='page_story'] .cnbc-body .group-container .embed-container .chartImage");if(staticImageContainer.length>0){$(staticImageContainer).find('img').wrap('<a href="#" class="enlargeThisImage"></a>');}
if(chartImageContainer.length>0){$(chartImageContainer).find('img').wrap('<a href="#" class="enlargeThisImage"></a>');}}else if(listicleSlideshowPage.length>0){$('#page_slideshow_one_page .cnbc-body .slide-top-container img').wrap('<a href="#" class="enlargeThisImage"></a>');$('#page_slideshow_one_page .cnbc-body #slideShowContainer img').wrap('<a href="#" class="enlargeThisImage"></a>');}
$('.enlargeThisImage').on('click',function(e){e.preventDefault();var largeImageSrc=$(this).children().attr('data-enlarged-image');if(largeImageSrc){self.showLightBox(largeImageSrc);}else{var regularImageSrc=$(this).children().attr('src');self.showLightBox(regularImageSrc);}});$('body').on('click','#enlargedImageLigthBox',function(e){if($(e.target).has('#enlargedImageWrapper').length){self.hideLightBox();}});$('body').on('click','.closeEnlargedImage',function(e){e.preventDefault();self.hideLightBox();});$(document).keyup(function(e){if(e.keyCode==27){self.hideLightBox();}});};CNBC_EnglargedImage.prototype.checkImageType=function(){};CNBC_EnglargedImage.prototype.showLightBox=function(imageURL){if($('#enlargedImageLigthBox').length>0){$('#enlargedImageWrapper img').prop('src',imageURL);$('body').addClass('freezePage');$('#enlargedImageLigthBox').show();}else{var lightbox='<div id="enlargedImageLigthBox"><div id="enlargedImageWrapper"><p><a href="#" class="closeEnlargedImage">&times</a></p><img src="'+imageURL+'" /></div></div>';$('body').append(lightbox).addClass('freezePage');}};CNBC_EnglargedImage.prototype.hideLightBox=function(imageURL){$('#enlargedImageLigthBox').hide();$('body').removeClass('freezePage');};})(jQuery);
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/jquery/plugins/jquery.browser.js */

var matched,browser;jQuery.uaMatch=function(ua){ua=ua.toLowerCase();var match=/(chrome)[ \/]([\w.]+)/.exec(ua)||/(webkit)[ \/]([\w.]+)/.exec(ua)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||ua.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua)||[];return{browser:match[1]||"",version:match[2]||"0"};};matched=jQuery.uaMatch(navigator.userAgent);browser={};if(matched.browser){browser[matched.browser]=true;browser.version=matched.version;}
if(browser.chrome){browser.webkit=true;}else if(browser.webkit){browser.safari=true;}
jQuery.browser=browser;
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/jquery/plugins/jquery.hammer.min.js */
/* NOTE: This File version is not compressed */
/*! Hammer.JS - v1.0.5 - 2013-04-07
 * http://eightmedia.github.com/hammer.js
 *
 * Copyright (c) 2013 Jorik Tangelder <j.tangelder@gmail.com>;
 * Licensed under the MIT license */

(function(t,e){"use strict";function n(){if(!i.READY){i.event.determineEventTypes();for(var t in i.gestures)i.gestures.hasOwnProperty(t)&&i.detection.register(i.gestures[t]);i.event.onTouch(i.DOCUMENT,i.EVENT_MOVE,i.detection.detect),i.event.onTouch(i.DOCUMENT,i.EVENT_END,i.detection.detect),i.READY=!0}}var i=function(t,e){return new i.Instance(t,e||{})};i.defaults={stop_browser_behavior:{userSelect:"none",touchAction:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},i.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled,i.HAS_TOUCHEVENTS="ontouchstart"in t,i.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android/i,i.NO_MOUSEEVENTS=i.HAS_TOUCHEVENTS&&navigator.userAgent.match(i.MOBILE_REGEX),i.EVENT_TYPES={},i.DIRECTION_DOWN="down",i.DIRECTION_LEFT="left",i.DIRECTION_UP="up",i.DIRECTION_RIGHT="right",i.POINTER_MOUSE="mouse",i.POINTER_TOUCH="touch",i.POINTER_PEN="pen",i.EVENT_START="start",i.EVENT_MOVE="move",i.EVENT_END="end",i.DOCUMENT=document,i.plugins={},i.READY=!1,i.Instance=function(t,e){var r=this;return n(),this.element=t,this.enabled=!0,this.options=i.utils.extend(i.utils.extend({},i.defaults),e||{}),this.options.stop_browser_behavior&&i.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior),i.event.onTouch(t,i.EVENT_START,function(t){r.enabled&&i.detection.startDetect(r,t)}),this},i.Instance.prototype={on:function(t,e){for(var n=t.split(" "),i=0;n.length>i;i++)this.element.addEventListener(n[i],e,!1);return this},off:function(t,e){for(var n=t.split(" "),i=0;n.length>i;i++)this.element.removeEventListener(n[i],e,!1);return this},trigger:function(t,e){var n=i.DOCUMENT.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e;var r=this.element;return i.utils.hasParent(e.target,r)&&(r=e.target),r.dispatchEvent(n),this},enable:function(t){return this.enabled=t,this}};var r=null,o=!1,s=!1;i.event={bindDom:function(t,e,n){for(var i=e.split(" "),r=0;i.length>r;r++)t.addEventListener(i[r],n,!1)},onTouch:function(t,e,n){var a=this;this.bindDom(t,i.EVENT_TYPES[e],function(c){var u=c.type.toLowerCase();if(!u.match(/mouse/)||!s){(u.match(/touch/)||u.match(/pointerdown/)||u.match(/mouse/)&&1===c.which)&&(o=!0),u.match(/touch|pointer/)&&(s=!0);var h=0;o&&(i.HAS_POINTEREVENTS&&e!=i.EVENT_END?h=i.PointerEvent.updatePointer(e,c):u.match(/touch/)?h=c.touches.length:s||(h=u.match(/up/)?0:1),h>0&&e==i.EVENT_END?e=i.EVENT_MOVE:h||(e=i.EVENT_END),h||null===r?r=c:c=r,n.call(i.detection,a.collectEventData(t,e,c)),i.HAS_POINTEREVENTS&&e==i.EVENT_END&&(h=i.PointerEvent.updatePointer(e,c))),h||(r=null,o=!1,s=!1,i.PointerEvent.reset())}})},determineEventTypes:function(){var t;t=i.HAS_POINTEREVENTS?i.PointerEvent.getEvents():i.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],i.EVENT_TYPES[i.EVENT_START]=t[0],i.EVENT_TYPES[i.EVENT_MOVE]=t[1],i.EVENT_TYPES[i.EVENT_END]=t[2]},getTouchList:function(t){return i.HAS_POINTEREVENTS?i.PointerEvent.getTouchList():t.touches?t.touches:[{identifier:1,pageX:t.pageX,pageY:t.pageY,target:t.target}]},collectEventData:function(t,e,n){var r=this.getTouchList(n,e),o=i.POINTER_TOUCH;return(n.type.match(/mouse/)||i.PointerEvent.matchType(i.POINTER_MOUSE,n))&&(o=i.POINTER_MOUSE),{center:i.utils.getCenter(r),timeStamp:(new Date).getTime(),target:n.target,touches:r,eventType:e,pointerType:o,srcEvent:n,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation(),this.srcEvent.preventDefault&&this.srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return i.detection.stopDetect()}}}},i.PointerEvent={pointers:{},getTouchList:function(){var t=this,e=[];return Object.keys(t.pointers).sort().forEach(function(n){e.push(t.pointers[n])}),e},updatePointer:function(t,e){return t==i.EVENT_END?this.pointers={}:(e.identifier=e.pointerId,this.pointers[e.pointerId]=e),Object.keys(this.pointers).length},matchType:function(t,e){if(!e.pointerType)return!1;var n={};return n[i.POINTER_MOUSE]=e.pointerType==e.MSPOINTER_TYPE_MOUSE||e.pointerType==i.POINTER_MOUSE,n[i.POINTER_TOUCH]=e.pointerType==e.MSPOINTER_TYPE_TOUCH||e.pointerType==i.POINTER_TOUCH,n[i.POINTER_PEN]=e.pointerType==e.MSPOINTER_TYPE_PEN||e.pointerType==i.POINTER_PEN,n[t]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}},i.utils={extend:function(t,n,i){for(var r in n)t[r]!==e&&i||(t[r]=n[r]);return t},hasParent:function(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1},getCenter:function(t){for(var e=[],n=[],i=0,r=t.length;r>i;i++)e.push(t[i].pageX),n.push(t[i].pageY);return{pageX:(Math.min.apply(Math,e)+Math.max.apply(Math,e))/2,pageY:(Math.min.apply(Math,n)+Math.max.apply(Math,n))/2}},getVelocity:function(t,e,n){return{x:Math.abs(e/t)||0,y:Math.abs(n/t)||0}},getAngle:function(t,e){var n=e.pageY-t.pageY,i=e.pageX-t.pageX;return 180*Math.atan2(n,i)/Math.PI},getDirection:function(t,e){var n=Math.abs(t.pageX-e.pageX),r=Math.abs(t.pageY-e.pageY);return n>=r?t.pageX-e.pageX>0?i.DIRECTION_LEFT:i.DIRECTION_RIGHT:t.pageY-e.pageY>0?i.DIRECTION_UP:i.DIRECTION_DOWN},getDistance:function(t,e){var n=e.pageX-t.pageX,i=e.pageY-t.pageY;return Math.sqrt(n*n+i*i)},getScale:function(t,e){return t.length>=2&&e.length>=2?this.getDistance(e[0],e[1])/this.getDistance(t[0],t[1]):1},getRotation:function(t,e){return t.length>=2&&e.length>=2?this.getAngle(e[1],e[0])-this.getAngle(t[1],t[0]):0},isVertical:function(t){return t==i.DIRECTION_UP||t==i.DIRECTION_DOWN},stopDefaultBrowserBehavior:function(t,e){var n,i=["webkit","khtml","moz","ms","o",""];if(e&&t.style){for(var r=0;i.length>r;r++)for(var o in e)e.hasOwnProperty(o)&&(n=o,i[r]&&(n=i[r]+n.substring(0,1).toUpperCase()+n.substring(1)),t.style[n]=e[o]);"none"==e.userSelect&&(t.onselectstart=function(){return!1})}}},i.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(t,e){this.current||(this.stopped=!1,this.current={inst:t,startEvent:i.utils.extend({},e),lastEvent:!1,name:""},this.detect(e))},detect:function(t){if(this.current&&!this.stopped){t=this.extendEventData(t);for(var e=this.current.inst.options,n=0,r=this.gestures.length;r>n;n++){var o=this.gestures[n];if(!this.stopped&&e[o.name]!==!1&&o.handler.call(o,t,this.current.inst)===!1){this.stopDetect();break}}return this.current&&(this.current.lastEvent=t),t.eventType==i.EVENT_END&&!t.touches.length-1&&this.stopDetect(),t}},stopDetect:function(){this.previous=i.utils.extend({},this.current),this.current=null,this.stopped=!0},extendEventData:function(t){var e=this.current.startEvent;if(e&&(t.touches.length!=e.touches.length||t.touches===e.touches)){e.touches=[];for(var n=0,r=t.touches.length;r>n;n++)e.touches.push(i.utils.extend({},t.touches[n]))}var o=t.timeStamp-e.timeStamp,s=t.center.pageX-e.center.pageX,a=t.center.pageY-e.center.pageY,c=i.utils.getVelocity(o,s,a);return i.utils.extend(t,{deltaTime:o,deltaX:s,deltaY:a,velocityX:c.x,velocityY:c.y,distance:i.utils.getDistance(e.center,t.center),angle:i.utils.getAngle(e.center,t.center),direction:i.utils.getDirection(e.center,t.center),scale:i.utils.getScale(e.touches,t.touches),rotation:i.utils.getRotation(e.touches,t.touches),startEvent:e}),t},register:function(t){var n=t.defaults||{};return n[t.name]===e&&(n[t.name]=!0),i.utils.extend(i.defaults,n,!0),t.index=t.index||1e3,this.gestures.push(t),this.gestures.sort(function(t,e){return t.index<e.index?-1:t.index>e.index?1:0}),this.gestures}},i.gestures=i.gestures||{},i.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function(t,e){switch(t.eventType){case i.EVENT_START:clearTimeout(this.timer),i.detection.current.name=this.name,this.timer=setTimeout(function(){"hold"==i.detection.current.name&&e.trigger("hold",t)},e.options.hold_timeout);break;case i.EVENT_MOVE:t.distance>e.options.hold_threshold&&clearTimeout(this.timer);break;case i.EVENT_END:clearTimeout(this.timer)}}},i.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},handler:function(t,e){if(t.eventType==i.EVENT_END){var n=i.detection.previous,r=!1;if(t.deltaTime>e.options.tap_max_touchtime||t.distance>e.options.tap_max_distance)return;n&&"tap"==n.name&&t.timeStamp-n.lastEvent.timeStamp<e.options.doubletap_interval&&t.distance<e.options.doubletap_distance&&(e.trigger("doubletap",t),r=!0),(!r||e.options.tap_always)&&(i.detection.current.name="tap",e.trigger(i.detection.current.name,t))}}},i.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_max_touches:1,swipe_velocity:.7},handler:function(t,e){if(t.eventType==i.EVENT_END){if(e.options.swipe_max_touches>0&&t.touches.length>e.options.swipe_max_touches)return;(t.velocityX>e.options.swipe_velocity||t.velocityY>e.options.swipe_velocity)&&(e.trigger(this.name,t),e.trigger(this.name+t.direction,t))}}},i.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,drag_max_touches:1,drag_block_horizontal:!1,drag_block_vertical:!1,drag_lock_to_axis:!1,drag_lock_min_distance:25},triggered:!1,handler:function(t,n){if(i.detection.current.name!=this.name&&this.triggered)return n.trigger(this.name+"end",t),this.triggered=!1,e;if(!(n.options.drag_max_touches>0&&t.touches.length>n.options.drag_max_touches))switch(t.eventType){case i.EVENT_START:this.triggered=!1;break;case i.EVENT_MOVE:if(t.distance<n.options.drag_min_distance&&i.detection.current.name!=this.name)return;i.detection.current.name=this.name,(i.detection.current.lastEvent.drag_locked_to_axis||n.options.drag_lock_to_axis&&n.options.drag_lock_min_distance<=t.distance)&&(t.drag_locked_to_axis=!0);var r=i.detection.current.lastEvent.direction;t.drag_locked_to_axis&&r!==t.direction&&(t.direction=i.utils.isVertical(r)?0>t.deltaY?i.DIRECTION_UP:i.DIRECTION_DOWN:0>t.deltaX?i.DIRECTION_LEFT:i.DIRECTION_RIGHT),this.triggered||(n.trigger(this.name+"start",t),this.triggered=!0),n.trigger(this.name,t),n.trigger(this.name+t.direction,t),(n.options.drag_block_vertical&&i.utils.isVertical(t.direction)||n.options.drag_block_horizontal&&!i.utils.isVertical(t.direction))&&t.preventDefault();break;case i.EVENT_END:this.triggered&&n.trigger(this.name+"end",t),this.triggered=!1}}},i.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function(t,n){if(i.detection.current.name!=this.name&&this.triggered)return n.trigger(this.name+"end",t),this.triggered=!1,e;if(!(2>t.touches.length))switch(n.options.transform_always_block&&t.preventDefault(),t.eventType){case i.EVENT_START:this.triggered=!1;break;case i.EVENT_MOVE:var r=Math.abs(1-t.scale),o=Math.abs(t.rotation);if(n.options.transform_min_scale>r&&n.options.transform_min_rotation>o)return;i.detection.current.name=this.name,this.triggered||(n.trigger(this.name+"start",t),this.triggered=!0),n.trigger(this.name,t),o>n.options.transform_min_rotation&&n.trigger("rotate",t),r>n.options.transform_min_scale&&(n.trigger("pinch",t),n.trigger("pinch"+(1>t.scale?"in":"out"),t));break;case i.EVENT_END:this.triggered&&n.trigger(this.name+"end",t),this.triggered=!1}}},i.gestures.Touch={name:"touch",index:-1/0,defaults:{prevent_default:!1,prevent_mouseevents:!1},handler:function(t,n){return n.options.prevent_mouseevents&&t.pointerType==i.POINTER_MOUSE?(t.stopDetect(),e):(n.options.prevent_default&&t.preventDefault(),t.eventType==i.EVENT_START&&n.trigger(this.name,t),e)}},i.gestures.Release={name:"release",index:1/0,handler:function(t,e){t.eventType==i.EVENT_END&&e.trigger(this.name,t)}},"object"==typeof module&&"object"==typeof module.exports?module.exports=i:(t.Hammer=i,"function"==typeof t.define&&t.define.amd&&t.define("hammer",[],function(){return i}))})(this),function(t,e){"use strict";t!==e&&(Hammer.event.bindDom=function(n,i,r){t(n).on(i,function(t){var n=t.originalEvent||t;n.pageX===e&&(n.pageX=t.pageX,n.pageY=t.pageY),n.target||(n.target=t.target),n.which===e&&(n.which=n.button),n.preventDefault||(n.preventDefault=t.preventDefault),n.stopPropagation||(n.stopPropagation=t.stopPropagation),r.call(this,n)})},Hammer.Instance.prototype.on=function(e,n){return t(this.element).on(e,n)},Hammer.Instance.prototype.off=function(e,n){return t(this.element).off(e,n)},Hammer.Instance.prototype.trigger=function(e,n){var i=t(this.element);return i.has(n.target).length&&(i=t(n.target)),i.trigger({type:e,gesture:n})},t.fn.hammer=function(e){return this.each(function(){var n=t(this),i=n.data("hammer");i?i&&e&&Hammer.utils.extend(i.options,e):n.data("hammer",new Hammer(this,e||{}))})})}(window.jQuery||window.Zepto);
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/libraries/Carousel3/carousel3.js */

function CNBC_Carousel3(){};CNBC_Carousel3.Objs=[];(function($){CNBC_Carousel3.prototype.settings={container:"carouselWrapper",itemsPerPage:1,itemsPerTransition:1,noOfRows:1,pagination:false,nextPrevLinks:true,speed:'normal',easing:'swing',autoSpeed:1000,enableAuto:false,swipable:false,spaceBetweenElements:0,leftArrow:"leftArrow",rightArrow:"rightArrow",anchorList:"anchorContainer",anchorConfig:{},slideIndicator:"slideIndicator",cStartOver:"carouselSO",sliderContainer:"carouselSlider",itemIndex:0,nextItemCallback:null,prevItemCallback:null,overlayButtons:false,lazyLoad:false,lazyLoadNext:false,responsive:false,scrollCue:false,onClickShowNextItem:true};CNBC_Carousel3.prototype.init=function(options){var self=this;this.options=$.extend({},this.settings,options);if(this.options.responsive){self.initEvents();}
this.setContainer(this.options.container);var carouselMainBody=this.container.find('div.carouselBody');if(!carouselMainBody[0]){carouselMainBody=this.container;}
carouselMainBody.css('display','block');this.itemIndex=this.getCurrentNodeIndex();this.liItem=carouselMainBody.children('ul').children('li');this.liItem.css("visibility","visible");self.container.on("dragstart",function(){return false;});this.runner=carouselMainBody.children('ul');this.items=this.runner.children('li');this.noOfItems=this.options.noOfItems?this.options.noOfItems:this.items.length;if(this.options.lazyLoad){this.initLazyLoad();}else{this.lazyLoadImg(0,this.noOfItems);}
self.setItemWidth();this.setWidth();this.container.on('selectstart dragstart',function(){return false;});this.insertMask();this.noOfPages=Math.ceil((this.noOfItems-this.options.itemsPerPage)/this.options.itemsPerTransition)+1;this.itemsPerTransitionFromInit=this.options.itemsPerTransition;if(this.options.nextPrevLinks){if(self.options.leftArrow[0]=='#'){this.leftA=$(self.options.leftArrow);}else{this.leftA=$(this.container).find('.'+self.options.leftArrow);}
if(self.options.rightArrow[0]=='#'){this.rightA=$(self.options.rightArrow);}else{this.rightA=$(this.container).find('.'+self.options.rightArrow);}
this.anchorList=$('.'+self.options.anchorList);this.insertNextPrevLinks();if(self.options.scrollCue){self.scrollCue=$('<div class="scroll-cue"></div>');self.scrollCue.insertAfter(this.mask);self.scrollCue.height(self.getMaxTrayHeight());}}
this.anchorList.find('li').each(function(i,el){if(!i)$(el).css(self.options.anchorConfig.active);});if(this.options.pagination){this.insertPagination();}
if(this.options.responsive){this.resizeMask();if(this.options.pagination){this.resetPagination();this.updateBtnStyles();}
this.setArrowHeight();}
this.setContainerWidth();this.attachClickHandlers();if(this.options.pagination){this.updateBtnStyles();}
if(this.options.enableAuto){this.startAuto();this.hoverPause();}
if(this.options.swipable&&CNBC_Utils.isTabletMobile()){this.handleTouch();}
this.sIndicator=$(this.container).find('.'+self.options.slideIndicator);this.startOverElement=$(this.container).find('.'+self.options.cStartOver);this.startOver();this.updateIndicator();if(this.itemIndex!=0){this.viewSlide(true);}
this.container.removeAttr("style");carouselMainBody.css('height','auto');if(this.options.initCallback){this.options.initCallback();};this.callback=this.options.callback;};CNBC_Carousel3.prototype.setItemWidth=function(){this.itemWidth=this.items.outerWidth(true);};CNBC_Carousel3.prototype.initEvents=function(){var self=this;$(window).on('resize',function(){self.reSizeCarousel();});};CNBC_Carousel3.prototype.reSizeCarousel=function(){var self=this;self.resizeMask();self.setWidth();if(self.options.pagination){self.resetPagination();self.updateBtnStyles();}
self.setArrowHeight();self.setItemWidth();};CNBC_Carousel3.prototype.getMaxTrayHeight=function(){var self=this,maxTrayHeight=0,height=0;self.liItem.each(function(){height=$(this).find('div.asset').outerHeight(true);if(height>maxTrayHeight){maxTrayHeight=height;}});return maxTrayHeight;};CNBC_Carousel3.prototype.setContainer=function(container){var self=this;var type=typeof container;if(type=='string'){self.container=$('#'+container);}else if(type=='object'&&container.length==1){self.container=container;}else{self.container=$(container);}};CNBC_Carousel3.prototype.getCurrentNodeIndex=function(){var currentNode,result;result=this.options.itemIndex;if(this.options.currentNodeClass){currentNode=this.container.find('.'+this.options.currentNodeClass);if(currentNode.length==1){result=currentNode.index();}}
return result;};CNBC_Carousel3.prototype.insertMask=function(){var maskWidth;this.runner.wrap('<div class="mask" />');this.mask=this.container.find('div.mask');this.arrowWidth=this.container.find('div.leftArrow').outerWidth(true);if(!this.options.responsive){var itemWidth=this.items.outerWidth();var space=this.itemWidth-itemWidth;maskWidth=this.itemWidth*this.options.itemsPerPage-space;this.mask.width(maskWidth);}
else{var arrowsWidth=2*parseInt(this.arrowWidth);if(this.options.overlayButtons){this.mask.css('width','100%');}else{this.mask.css('width','calc(100% - '+arrowsWidth+'px)');}
maskWidth=this.mask.width();if(parseInt(maskWidth/this.itemWidth)<=0){this.container.find('li').css('width',maskWidth);this.container.find('div.asset').css('width','100%');this.itemWidth=maskWidth;this.setWidth();}}
this.setArrowHeight();this.container.removeClass('loader');};CNBC_Carousel3.prototype.setArrowHeight=function(){if(!CNBC_Utils.isVideoGallery()){var arrowHeight=this.getMaxTrayHeight();var arrowLineHeight=(arrowHeight*0.895)+'px';this.container.find('div.rightArrow').css({height:arrowHeight,'line-height':arrowLineHeight});this.container.find('div.leftArrow').css({height:arrowHeight,'line-height':arrowLineHeight});}};CNBC_Carousel3.prototype.resizeMask=function(){this.arrowWidth=this.container.find('div.leftArrow').outerWidth(true);var maxWidth=this.container.parent().width();if(!this.options.responsive){maxWidth=970;if($(window).width()<maxWidth){maxWidth=$(window).width();}}
var maskWidth=maxWidth-(2*this.arrowWidth);this.mask=this.container.find('div.mask');if(!this.options.responsive){this.mask.width(maskWidth);this.options.itemsPerTransition=this.options.itemsPerPage=parseInt((maxWidth-$('.rightArrow').outerWidth(true)-$('.leftArrow').outerWidth(true))/this.itemWidth);}
else{if(this.itemsPerTransitionFromInit==1&&this.options.itemsPerTransition==1){var arrowsWidth=2*parseInt(this.arrowWidth);if(this.options.overlayButtons){this.liItem.css('width',maxWidth);}else{this.liItem.css('width',maskWidth);}
this.container.find('div.asset').css('width','100%');}else{maskWidth=this.mask.width();this.options.itemsPerTransition=this.options.itemsPerPage=parseInt(maskWidth/this.itemWidth);}}
this.noOfPages=Math.ceil((this.noOfItems-this.options.itemsPerPage)/this.options.itemsPerTransition)+1;this.mask=this.container.find('div.mask');this.initLazyLoad();};CNBC_Carousel3.prototype.resizeItems=function(){this.items.width($(window).width()-($('.rightArrow').outerWidth(true)*2)-($(window).width()-$('#article_body').outerWidth(true)));this.itemWidth=this.items.outerWidth();this.items.find('.asset').width(this.itemWidth);this.setWidth();};CNBC_Carousel3.prototype.setWidth=function(){this.noOfItems=Math.round(this.noOfItems/this.options.noOfRows);var width=this.items.outerWidth(true)*this.noOfItems;this.runner.width(width);};CNBC_Carousel3.prototype.startOver=function(){var self=this;this.startOverElement.on('click',function(){if(!(self.leftA.hasClass('disabled'))){self.itemIndex=(-1)*self.options.itemsPerTransition;self.prevItem();};});};CNBC_Carousel3.prototype.setContainerWidth=function(){if(this.options.overlayButtons){var containerWidth=this.mask.width();this.container.width(containerWidth);}else{var containerWidth=this.leftA.outerWidth(true)+this.rightA.outerWidth(true)+this.mask.outerWidth(true);this.container.width(containerWidth);}};CNBC_Carousel3.prototype.initLazyLoad=function(){if(this.itemIndex>0){this.lazyLoadImg(0,this.itemIndex);}
if(this.options.lazyLoadNext){this.lazyLoadImg(this.itemIndex,this.itemIndex+this.options.itemsPerPage*2);}else{this.lazyLoadImg(this.itemIndex,this.itemIndex+this.options.itemsPerPage);}};CNBC_Carousel3.prototype.lazyLoadImg=function(from,to){if(to>this.noOfItems){to=this.noOfItems;}
for(var i=from;i<to;i++){this.items.eq(i).find('img').prop('src',function(){if($(this).attr('data-img-src')){return $(this).attr('data-img-src');};}).removeAttr('data-img-src');}};CNBC_Carousel3.prototype.attachClickHandlers=function(){var self=this;this.leftA.on('mousedown',function(){if(!($(this).hasClass('disabled'))){$(this).addClass('lclick');};}).on('mouseup',function(){$(this).removeClass('lclick');});this.rightA.on('mousedown',function(){if(!($(this).hasClass('disabled'))){$(this).addClass('rclick');};}).on('mouseup',function(){$(this).removeClass('rclick');});this.leftA.on('mouseover mousemove',function(){if(!($(this).hasClass('disabled'))){$(this).addClass('lclick');};}).on('mouseout',function(){$(this).removeClass('lclick')});this.rightA.on('mouseover mousemove',function(){if(!($(this).hasClass('disabled'))){$(this).addClass('rclick');};}).on('mouseout',function(){$(this).removeClass('rclick')});if(this.options.onClickShowNextItem){this.items.bind('click.item',$.proxy(this,'onCarouselCardClick'));}};CNBC_Carousel3.prototype.onCarouselCardClick=function(e){this.itemIndex=this.items.index(e.currentTarget);this.viewSlide(true);};CNBC_Carousel3.prototype.scrollTo=function(index){this.itemIndex=index;this.viewSlide(true);};CNBC_Carousel3.prototype.insertPagination=function(){var i,links=[];this.paginationLinks=$('<ol class="pagination-links" />');for(i=0;i<this.noOfPages;i++){links[i]='<li><a href="#item-'+i+'"></a></li>';}
this.paginationLinks.append(links.join('')).appendTo(this.container).find('a').bind('click.carousel',$.proxy(this,'paginationHandler'));};CNBC_Carousel3.prototype.resetPagination=function(){if(this.paginationLinks)this.paginationLinks.remove();this.insertPagination();}
CNBC_Carousel3.prototype.paginationHandler=function(e){var index=e.target.hash.substr(1).split('-')[1]*this.options.itemsPerTransition;this.lazyLoadImg(index,index+this.options.itemsPerTransition+1);this.anchorClick(true,index);return false;};CNBC_Carousel3.prototype.insertNextPrevLinks=function(){var self=this,anchors=this.anchorList.find('li');anchors.each(function(id,anchor){$(anchor).on('click',$.proxy(self,'anchorClick',true,id));})
this.prevLink=this.leftA.bind('click',$.proxy(this,'prevItem',true));this.nextLink=this.rightA.bind('click',$.proxy(this,'nextItem',true));};CNBC_Carousel3.prototype.anchorClick=function(animate,id){var anchorDiff,offset,increment;anchorDiff=this.itemIndex-id;if(anchorDiff){if(!this.leftA.hasClass('disabled')||!this.rightA.hasClass('disabled')){offset=-((this.itemWidth/this.runner.width())*100)*this.itemIndex;increment=anchorDiff*(this.itemWidth/this.runner.width())*100;this.itemIndex=id;this.setContainerOffset(offset+increment,animate);if(this.options.paginationCallback){this.options.paginationCallback();}}}}
CNBC_Carousel3.prototype.refreshAnchors=function(id){var self=this,result;this.anchorList.find('li').each(function(index,anchor){if(id==index){$(this).css(self.options.anchorConfig.active);}else{$(this).css(self.options.anchorConfig.deactive);};})
if(this.callback)this.callback(id);}
CNBC_Carousel3.prototype.nextItem=function(animate){if(!(this.rightA.hasClass('disabled'))){if(this.options.lazyLoad){if(this.options.lazyLoadNext){if(this.options.pagination){this.lazyLoadImg(this.itemIndex+this.options.itemsPerTransition,this.itemIndex+this.options.itemsPerTransition*2);}
this.lazyLoadImg(this.itemIndex+this.options.itemsPerTransition*2,this.itemIndex+this.options.itemsPerTransition*3);}else{this.lazyLoadImg(this.itemIndex+this.options.itemsPerTransition,this.itemIndex+this.options.itemsPerTransition*2);}}
if(this.options.nextItemCallback){this.options.nextItemCallback();}};this.itemIndex=this.itemIndex+this.options.itemsPerTransition;this.viewSlide(true);return false;};CNBC_Carousel3.prototype.prevItem=function(animate){if(!(this.leftA.hasClass('disabled'))){if(this.options.pagination){if(this.options.lazyLoad){this.lazyLoadImg(this.itemIndex-this.options.itemsPerTransition,this.itemIndex);if(this.options.lazyLoadNext){this.lazyLoadImg(this.itemIndex-this.options.itemsPerTransition*2,this.itemIndex-this.options.itemsPerTransition);}}}
if(this.options.prevItemCallback){this.options.prevItemCallback();}};this.itemIndex=this.itemIndex-this.options.itemsPerTransition;this.viewSlide(animate);return false;};CNBC_Carousel3.prototype.updateBtnStyles=function(){var
currentPage,paginationItems;if(this.options.pagination){currentPage=Math.ceil(this.itemIndex/this.options.itemsPerTransition);paginationItems=this.paginationLinks.children('li');paginationItems.removeClass('current');if(currentPage<paginationItems.length){paginationItems.eq(currentPage).addClass('current');}else{paginationItems.eq(paginationItems.length-1).addClass('current');}}
if(this.options.nextPrevLinks){this.nextLink.add(this.prevLink).removeClass('disabled');if(this.options.scrollCue){this.scrollCue.removeClass('disabled');}
if(this.itemIndex>=(this.noOfItems-this.options.itemsPerPage)){this.nextLink.addClass('disabled');if(this.options.scrollCue){this.scrollCue.addClass('disabled');}
if(this.itemIndex===0){this.prevLink.addClass('disabled');}}else if(this.itemIndex===0){this.prevLink.addClass('disabled');}}};CNBC_Carousel3.prototype.startAuto=function(){var self=this;if(this.options.enableAuto){this.timer=setInterval(function(){self.nextItem();},self.options.autoSpeed);}};CNBC_Carousel3.prototype.hoverPause=function(){var self=this;if(this.options.enableAuto){this.container.hover(function(){clearInterval(self.timer);},function(){self.timer=setInterval(function(){self.nextItem();},self.options.autoSpeed);});}};CNBC_Carousel3.prototype.handleTouch=function(){var self=this;var maskWidth=self.mask.width();var stopBrowserBehavior=true;var options={prevent_default:false,swipe_velocity:0.3,drag_min_distance:20,drag_lock_to_axis:true,drag_block_vertical:true,stop_browser_behavior:false,transform:false}
var hammertime=new Hammer(self.container);hammertime.on("release dragleft dragright swipeleft swiperight dragup dragdown swipeup swipedown",function(e){switch(e.type){case'dragright':case'dragleft':self._current=self.itemIndex/self.options.itemsPerTransition;var pane_offset=-(100/self.noOfPages)*self._current;var drag_offset=((100/maskWidth)*e.gesture.deltaX)/self.noOfPages;if((self._current==0&&e.gesture.direction==Hammer.DIRECTION_RIGHT)||(self._current==self.noOfPages-1&&e.gesture.direction==Hammer.DIRECTION_LEFT)){drag_offset*=.4;}
self.setContainerOffset(drag_offset+pane_offset);break;case'swiperight':e.gesture.stopDetect();self.prevItem(true);break;case'swipeleft':e.gesture.stopDetect();self.nextItem(true);break;case'release':switch(e.gesture.direction){case'up':case'down':stopBrowserBehavior=false;break;case'left':case'right':var drag=0.5;var orientation='portrait';if(window.orientation!=undefined&&Math.abs(window.orientation)==90){drag=0.25;orientation='landscape';}
if(Math.abs(e.gesture.deltaX)>maskWidth*drag){if(e.gesture.direction=='right'){self.prevItem();}else{self.nextItem();}}else{self.viewSlide();}
break;}
break;case'dragup':case'dragdown':case'swipeup':case'swipedown':stopBrowserBehavior=false;break;if(stopBrowserBehavior){e.gesture.preventDefault();e.gesture.stopPropagation();}else{self.viewSlide();e.gesture.stopDetect();}}});};CNBC_Carousel3.prototype.updateIndicator=function(){var self=this;var from=self.itemIndex+1;var to=self.itemIndex+self.options.itemsPerPage;$(".slideIndicator").text(from+"-"+to+" of "+self.noOfItems);};CNBC_Carousel3.prototype.setContainerOffset=function(percent,animate){var nextItem,pos,self=this;var animationSpeed=this.options.speed;if(this.options.beforeTransitionCallback){this.options.beforeTransitionCallback();}
if(this.itemIndex>(this.noOfItems-this.options.itemsPerPage)){this.itemIndex=this.noOfItems-this.options.itemsPerPage;}
if(this.itemIndex<0){this.itemIndex=0;}
this.updateIndicator();if(Modernizr&&Modernizr.csstransforms&&Modernizr.csstransitions){animationSpeed=animationSpeed/1000;if(animate){this.runner.css({'transition':'All '+animationSpeed+'s ease','-webkit-transition':'All '+animationSpeed+'s ease','-o-transition':'All '+animationSpeed+'s ease','-moz-transition':'All '+animationSpeed+'s ease','-ms-transition':'All '+animationSpeed+'s ease'});}
else{this.runner.css({'-moz-transition':'none','-webkit-transition':'none','-o-transition':'color 0 ease-in','transition':'none'});}
this.runner.css({"transform":"translatex("+percent+"%)",'-webkit-transform':'translateX('+percent+'%)','-o-transform':'translateX('+percent+'%)','-moz-transform':'translateX('+percent+'%)','-ms-transform':'translateX('+percent+'%)'});}else{nextItem=this.items.eq(this.itemIndex);pos=nextItem.position();this.runner.stop(false,true).animate({left:-pos.left},animationSpeed,this.options.easing,function(){if(self.options.afterTransitionCallback){self.options.afterTransitionCallback();}});}
this.updateBtnStyles();this.refreshAnchors(this.itemIndex);};CNBC_Carousel3.prototype.viewSlide=function(animate){var self=this;var itemsPerPage=self.options.itemsPerPage;if(this.noOfItems-this.itemIndex-this.options.itemsPerPage<0){this.itemIndex=this.noOfItems-this.options.itemsPerPage;}
if(this.itemIndex<0){this.itemIndex=0;}
var offset=-((this.itemWidth/this.runner.width())*100)*this.itemIndex;self.setContainerOffset(offset,animate);};CNBC_Carousel3.prototype.advanceCarouselOnVideoAdvance=function(animate){this.itemIndex=this.getCurrentNodeIndex();this.viewSlide(animate);};CNBC_Carousel3.prototype.resetCarousel=function(animate){this.itemIndex=0;this.viewSlide(animate);}
CNBC_Carousel3.prototype.enableSawToothPattern=function(){var self=this;var $li=self.container.find('li');if(self.container.find('li:first').find('div.asset').length==1&&($li.length>9||CNBC_Utils.urlParam('fdt'))){self.options.noOfRows=2;var firstRowHeight=lastRowHeight=height=0;self.container.find('li:even').each(function(){$(this).append($(this).next().find('div.asset'));$(this).next().remove();});$li.each(function(){height=$(this).find('div.asset:first').outerHeight(true);if(height>firstRowHeight){firstRowHeight=height;}
height=$(this).find('div.asset:last').outerHeight(true);if(height>lastRowHeight){lastRowHeight=height;}});$('div.asset.playing').parent().addClass(self.options.currentNodeClass);$li.find('div.asset:first').height(firstRowHeight+20);var arrowHeight=firstRowHeight+lastRowHeight+20;var arrowLineHeight=(arrowHeight*0.895)+'px';self.container.find('div.rightArrow').css({height:arrowHeight,'line-height':arrowLineHeight});self.container.find('div.leftArrow').css({height:arrowHeight,'line-height':arrowLineHeight});self.lazyLoadImg(0,self.noOfItems);self.setWidth();self.resizeMask();}};})(jQuery);function enableSawToothPattern(container){if(CNBC_Carousel3.Objs.length){var $container;var type=typeof container;if(!container){container=$('li.carousel_asset:first');}
if(type=='string'){$container=$('#'+container);}else if(type=='object'&&container.length==1){$container=container;}else{$container=$(container);}
for(var i in CNBC_Carousel3.Objs){if(CNBC_Carousel3.Objs[i].container.attr('id')==$container.attr('id')){CNBC_Carousel3.Objs[i].enableSawToothPattern();break;}}}};
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/libraries/SignIn/signin_surf.js */

var CNBC_Signin={};(function($){CNBC_Signin._domain="cnbc.com";CNBC_Signin._CASTOKEN="CASTOKEN";CNBC_Signin._ACEGI_SECURITY="ACEGI_SECURITY_HASHED_REMEMBER_ME_COOKIE";CNBC_Signin._SUBSCRIBERINFO="SUBSCRIBERINFO";CNBC_Signin._SUBSCRIBERINFO3="SUBSCRIBERINFO3";CNBC_Signin._MemberCenterURL="https://register.cnbc.com/memberCenter.do";CNBC_Signin._UserCheckURL="https://login.cnbc.com/cas/checkCasTicket?";CNBC_Signin._SignInURL='https://register.cnbc.com/refreshlogin.jsp';CNBC_Signin._SignOutURL='https://login.cnbc.com/cas/logout';CNBC_Signin._CookieUser='Guest';CNBC_Signin.UserCheckTimeout=(3*60*60*1000);CNBC_Signin.isRegister=false;CNBC_Signin.isValidUser=false;CNBC_Signin.signInCont=null;CNBC_Signin.isCreated=false;CNBC_Signin.Disqus={};CNBC_Signin.Disqus._publicKeyEndpoint=(window.CNBC_Settings&&CNBC_Settings.baseurls)?CNBC_Settings.baseurls.register_base+'/rs/sso/publicKey/view.js':"https://register.cnbc.com/rs/sso/publicKey/view.js";CNBC_Signin.Disqus._publicKeyCookie='disqusPublicKey';CNBC_Signin.Disqus._payloadEndpoint=(window.CNBC_Settings&&CNBC_Settings.baseurls)?CNBC_Settings.baseurls.register_base+'/auth/api/40015/payload':"https://register.cnbc.com/auth/api/40015/payload";CNBC_Signin.Disqus._payloadCookie='disqusSSOPayload';CNBC_Signin.Disqus._payloadCookieExpire=1;CNBC_Signin.init=function(args){};CNBC_Signin.initSettings=function(args){var globalsettings=args.baseurls;CNBC_Signin._MemberCenterURL=globalsettings.register_base+'/memberCenter.do';CNBC_Signin._UserCheckURL=globalsettings.login_base+'/cas/checkCasTicket?';CNBC_Signin._SignInURL=globalsettings.register_base+'/refreshlogin.jsp';CNBC_Signin._SignOutURL=globalsettings.login_base+'/cas/logout';CNBC_Signin.Disqus._publicKeyEndpoint=globalsettings.register_base+'/rs/sso/publicKey/view.js';CNBC_Signin.Disqus._payloadEndpoint=globalsettings.register_base+'/auth/api/40015/payload';};CNBC_Signin.initElements=function(){this.$container=$('#login-container');this.$regState=$('#reg-user');this.$unregState=$('#unreg-user');this.$signInBtn=this.$unregState.find("li.last a");this.isRegister=CNBC_Signin.isRegistered();this.isValidUser=CNBC_Signin.isLoggedIn();};CNBC_Signin.initEvents=function(){if(typeof window.activePartnerExperience!='undefined'&&window.activePartnerExperience=='xfinity'){return;}
$('#signin').click(function(event){event.preventDefault();event.stopPropagation();CNBC_Signin.signInPopup(CNBC_Signin._SignInURL,'?source=new-header&service=url');});$('#signout').click(function(event){event.preventDefault();CNBC_Signin.gotoRegistrationURL(CNBC_Signin._SignOutURL,'?service=url');});$('body').bind('click',function(event){var $target=$(event.target);if(!$target.is('#signInDiv')){CNBC_Signin.hideOverLay();}});$('#toPopup div.close').bind('click',function(event){CNBC_Signin.disablePopup();});$(window).resize(function(){});};CNBC_Signin.isRegistered=function(){return((CNBC_Utils.readCookie(CNBC_Signin._CASTOKEN))||CNBC_Utils.readCookie(CNBC_Signin._ACEGI_SECURITY));};CNBC_Signin.isLoggedIn=function(){var loggedIn=false;var SessionCookie=CNBC_Utils.readCookie(CNBC_Signin._SUBSCRIBERINFO);if(!CNBC_Common.isNull(SessionCookie)){CNBC_Signin._CookieUser=SessionCookie;loggedIn=true;$.ajax({url:CNBC_Signin._UserCheckURL,data:"output=json",dataType:'jsonp',success:function(data){},error:function(data){}});};return loggedIn;};CNBC_Signin.GetStaleResponseHandler=function(data){if(data!=null&&data!='null'&&data!=''){if(data["cnbc-global-login-response"]==1){CNBC_Utils.deleteAllLoginCookies("/");}}else{CNBC_Utils.deleteAllLoginCookies("/");};setTimeout("CNBC_Signin.isLoggedIn()",CNBC_Signin.UserCheckTimeout);};CNBC_Signin.showUserInfo=function(){var text,isValidUser=CNBC_Signin.isLoggedIn();if(isValidUser&&this.isRegister){var subscriberInfoCookie=CNBC_Utils.readCookie(CNBC_Signin._SUBSCRIBERINFO);var acegiCookie=CNBC_Utils.readCookie(CNBC_Signin._ACEGI_SECURITY);if(!CNBC_Common.isNull(acegiCookie)){CNBC_Signin._CookieUser=acegiCookie.split(":")[0];}else if(!CNBC_Common.isNull(subscriberInfoCookie)){CNBC_Signin._CookieUser=subscriberInfoCookie;}
text='Welcome, '+CNBC_Signin._CookieUser;if(text.length>25){text=text.substr(0,22)+"...";}};this.$container.find('span').html(text);};CNBC_Signin.toggleUserLinks=function(signin){this.$signInBtn.removeClass('btn');if(signin){this.$regState.addClass('hide');this.$signInBtn.addClass('btn');this.$unregState.css("margin-top","0px");}else if(this.isRegister){this.$regState.removeClass('hide');this.$unregState.addClass('hide');}else{this.$regState.addClass('hide');this.$unregState.removeClass('hide');}};CNBC_Signin.signInPopup=function(url,params){var finalURL=this.createRegistrationURL(url,params);if(finalURL!=""){this.toggleUserLinks(true);if(!this.isCreated){this.renderPopup();$('#signInFrame').attr('src',finalURL);this.isCreated=true;}
else{$("#toPopup").fadeIn(0500);$("#backgroundPopup").css("opacity","0.7");$("#backgroundPopup").fadeIn(0001);popupStatus=1;}}};CNBC_Signin.renderPopup=function(){var overLayCode='<div class="contentDiv"><iframe id="signInFrame" name="signInFrame" frameborder="0" scrolling="no" width="460px" height="313px"></iframe></div>';var overlayShadow=$('#signInDivHidden').html();var overLayElm=$('<div id="signInDiv" class="signInDiv">'+overLayCode+'</div>');$('#toPopup #popup_content').html(overLayElm);$("#toPopup").fadeIn(0500);$("#backgroundPopup").css("opacity","0.7");$("#backgroundPopup").fadeIn(0001);popupStatus=1;};CNBC_Signin.positionPopup=function(){this.signInCont=$('#signInDiv');var pos=this.$unregState.offset();this.signInCont.css({'top':(pos.top+30),'left':(pos.left-140)});};CNBC_Signin.hideOverLay=function(){var overlay=this.$unregState;if(overlay.length>0&&!overlay.hasClass('hide')){this.toggleUserLinks();if(!CNBC_Common.isNull(this.signInCont)){this.signInCont.addClass('hide');}}};CNBC_Signin.createRegistrationURL=function(url,params){var cnbc_curURL=location.href;var index=params.indexOf("url");var cnbc_index=cnbc_curURL.indexOf(CNBC_Signin._domain);if(index!=-1){if(cnbc_index!=-1){url=url+params.replace(/url/,encodeURIComponent(cnbc_curURL));return url;}else{var qindex=cnbc_curURL.indexOf("?");var serviceURL=cnbc_curURL;if(qindex!=-1){serviceURL=cnbc_curURL.substring(0,index);}
return url+params.replace(/url/,encodeURIComponent(serviceURL));}};return"";};CNBC_Signin.disablePopup=function(){if(popupStatus==1){$("#toPopup").fadeOut("normal");$("#backgroundPopup").fadeOut("normal");popupStatus=0;}};CNBC_Signin.gotoRegistrationURL=function(url,params){var finalURL=this.createRegistrationURL(url,params);if(finalURL!=""){window.location=finalURL;}};CNBC_Signin.displayUsername=function(addtext,id){if(this.isRegistered()){var CookieUser=CNBC_Utils.readCookie(CNBC_Signin._SUBSCRIBERINFO3);document.getElementById(id).innerHTML=addtext+CookieUser;}};CNBC_Signin.Disqus.login=function(payloadTimeout,loginConfig){var deferred=$.Deferred();var disqusData=CNBC_Utils.readCookie(CNBC_Signin.Disqus._payloadCookie,true);if(disqusData!==null){disqusData=JSON.parse(disqusData);if(disqusData.timestamp-(new Date().getTime())>0){deferred.resolveWith(this,[disqusData.value]);return deferred.promise();}else{CNBC_Utils.eraseCookie(CNBC_Signin.Disqus._payloadCookie,null,null,true);}}
$.ajax({url:CNBC_Signin.Disqus._payloadEndpoint+'?token='+(loginConfig.session||'')+'&uid='+(loginConfig.uid||''),dataType:'jsonp',jsonpCallback:'jsonp_callback'}).fail(function(){deferred.reject();}).done(function(data){if(payloadTimeout==undefined||payloadTimeout===null){payloadTimeout=CNBC_Signin.Disqus._payloadCookieExpire;}
data={payload:data['payload_token'],publicKey:data['public_key']};var disqusData={value:data,timestamp:new Date().getTime()+parseFloat(payloadTimeout)*3600000};disqusData=JSON.stringify(disqusData);deferred.resolveWith(this,[data]);});return deferred.promise();};CNBC_Signin.Disqus.logout=function(){CNBC_Utils.eraseCookie(CNBC_Signin.Disqus._payloadCookie,null,null,true);};CNBC_Signin.Disqus.getPublicKey=function(payloadTimeout){var deferred=$.Deferred();var disqusData=CNBC_Utils.readCookie(CNBC_Signin.Disqus._publicKeyCookie,true);if(disqusData!==null){disqusData=JSON.parse(disqusData);if(disqusData.timestamp-(new Date().getTime())>0){deferred.resolveWith(this,[disqusData.value]);return deferred.promise();}else{CNBC_Utils.eraseCookie(CNBC_Signin.Disqus._publicKeyCookie,null,null,true);}}
$.ajax({url:CNBC_Signin.Disqus._publicKeyEndpoint,dataType:'jsonp'}).fail(function(){deferred.reject();}).done(function(data){if(payloadTimeout==undefined||payloadTimeout===null){payloadTimeout=CNBC_Signin.Disqus._payloadCookieExpire;}
data={publicKey:data['cnbc-public-key']};var disqusData={value:data,timestamp:new Date().getTime()+parseFloat(payloadTimeout)*3600000};disqusData=JSON.stringify(disqusData);CNBC_Utils.createCookie(CNBC_Signin.Disqus._publicKeyCookie,disqusData,null,true);deferred.resolveWith(this,[data]);});return deferred.promise();};})(jQuery);
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/libraries/Surf/CNBC_Surf_Signin_ui.js */
;var CNBC_Surf=CNBC_Surf||{};CNBC_Surf.outageRedirection='/id/101698521';CNBC_Surf.Signin_Ui=function(){var surfOptions={element:'bedrock-watchlist-container',responsive:true,debug:false};var surfInitialized=false;var surfTemplate=null;var surfSignedIn=false;var fadedIn=true;var signinUI=null;var tabs=null;var currentAction=null;var onCloseCallback=null;var tabsEnabled=true;var signinDomStr='<div id="cnbc-popup-logo-regi"><img src="'+CNBC_Settings.baseurls.sc_base_protocol_agnostic+'/applications/cnbc.com/staticcontent/img/login-cnbc-logo.png"></div>'+'<div class="downArrowTabs surf" id="newTabsContainer">'+'<ul class="tab">'+'<li class=""><a href="#">LOG IN</a></li>'+'<li class="first"><a href="#">SIGN UP</a></li>'+'</ul>'+'<div id="bedrock-watchlist-container">'+'<div class="create-account-msg"></div>'+'</div>'+'<div id="bedrock-remember-me-container">'+'<form>'+'<input id="bedrock-remember-me" name="bedrock-remember-me" type="checkbox" value="1">'+'<label for="bedrock-remember-me">Keep Me Logged In</label>'+'</form>'+'</div>'+'<div id="bedrock-watchlist-signin-footer">'+'<div>'+'<img src="'+CNBC_Settings.baseurls.sc_base_protocol_agnostic+'/applications/cnbc.com/staticcontent/img/surf/xfinity-subscribers-logo.png" id="bedrock-watchlist-xfinity-logo">'+'</div>'+'<div id="bedrock-xfinity-sunset">'+'If you previously logged into CNBC with your Xfinity account, please  '+'<a class="help_text forgot-pwd" href="#">reset your password </a>'+' using your Xfinity email address.  Then you will be able to login to CNBC with your Xfinity email to access your account.'+'</div>'+'</div>'+'</div>';var surfUIFadeDuration=200;var popupAnimateInDuration=400;var popupAnimateOutDuration=400;var verticalSlide="710";var userflow='';function signinUIBeforeCloseHandler(){setVisibility(false);};function surfReadyHandler(event){surfInitialized=true;if(currentAction==="signin"&&!SURF.globals.session){surfSigninDialog();}else if(currentAction==="register"&&!SURF.globals.session){CNBC_Surf_Mediator.surfCreateAccountDialog();}};function surfSigninHandler(event,user){CNBC_Common.ConsoleLog('SURF Sign-in Successful');CNBC_Utils.createCookie("logged_in",1);setVisibility(false);};function setSigninItemsVisibility(visible){var displayStyle=visible?'block':'none';$('#bedrock-watchlist-signin-footer').css('display',displayStyle);};function setRememberMeVisibility(visible){var displayStyle=visible?'block':'none';$('#bedrock-remember-me-container').css('display',displayStyle);};function surfDialogVisibleHandler(event,paramObj){var tabIndex;if(!signinUI.visible){setVisibility(true);}
if(paramObj&&paramObj.template){surfTemplate=paramObj.template;}
if(event.type==='visible'){setSigninItemsVisibility(surfTemplate==='signin');setRememberMeVisibility(surfTemplate==='signin'||surfTemplate==='create_account');tabIndex=(surfTemplate=='signin'||surfTemplate=='forgot_password')?1:2;if(tabs._tabIndex!=tabIndex){tabs._tabIndex=tabIndex;tabs.showDefaultTab();}
fadeEffect(true);setTimeout(function(){tabsEnabled=true;},1000);}
signinUI.loaderImg(event.type!=='visible');};function surfDialogCloseHandler(){setVisibility(false);};function startUIFlow(action,flow,check){var tabArgs,tabIndex,signinUIOptions,provider='easyXDM_default5292_provider',showCreateAccount=function(){if($(this).hasClass('first')){$('.create-account-msg').text('Create Your CNBC Account');}else{$('.create-account-msg').text('');}};userflow=flow;setSigninItemsVisibility(false);setRememberMeVisibility(false);currentAction=action;tabIndex=(action=='signin')?1:2;if(surfInitialized){tabs._tabIndex=tabIndex;tabs.showDefaultTab();if(currentAction==="signin"&&!SURF.globals.session){surfSigninDialog();$('.create-account-msg').text('');}else if(currentAction==="register"&&!SURF.globals.session){CNBC_Surf_Mediator.surfCreateAccountDialog();$('.create-account-msg').text('Create Your CNBC Account');$('.downArrowTabs.surf .tab li').on('click',showCreateAccount);}}else{signinUI=new CNBC_Popup2();signinUIOptions={closeOnBackgroudClick:false,popupId:'bedrock-watchlist-signin-popup',popupContent:signinDomStr,initCallback:null,beforeCloseCallback:signinUIBeforeCloseHandler,minHeight:'458px',width:'440px',autoAlignPopup:false,autoHide:false};signinUI.init(signinUIOptions);$('.forgot-pwd').click(function(e){e.preventDefault();SURF.forgotPasswordDialog();});tabs=new CNBC_Tab();tabArgs={container:$('#newTabsContainer'),tabIndex:tabIndex,callback:function(){var tabIndex;tabsEnabled=false;setSigninItemsVisibility(false);setRememberMeVisibility(false);tabIndex=$('#newTabsContainer ul.tab').parent().find('li.selected').index();if(tabIndex==0){fadeEffect(false,function(){$('#bedrock-watchlist-container').attr('visibility','hidden');surfSigninDialog();});}
else if(tabIndex==1){fadeEffect(false,function(){$('#bedrock-watchlist-container').attr('visibility','hidden');CNBC_Surf_Mediator.surfCreateAccountDialog();});};},okToHandleClickCallback:function(){return tabsEnabled;}};tabs.init(tabArgs);CNBC_Surf_Mediator.surfInit(surfOptions);}};function surfSigninDialog(){setTimeout(CNBC_Surf_Mediator.surfSigninDialog,1000);};function surfCreateAccountHandler(event,user){};function surfCreateAccountErrorHandler(event){};function setVisibility(visible){if(visible){$('body').css('overflow','hidden');signinUI.show();signinUI.lightbox.animate({top:"+="+verticalSlide},popupAnimateInDuration,"swing",function(){});}else{$('body').css('overflow','auto');if(userflow=='pro'&&!CNBC_Utils.isUserPremium()){signinUI.lightbox.fadeOut(function(){signinUI.lightbox.css({'display':'block','top':'-610px'});signinUI.hide();if(onCloseCallback){onCloseCallback();};});}else{signinUI.lightbox.animate({top:"-="+verticalSlide},popupAnimateOutDuration,"swing",function(){signinUI.hide();if(onCloseCallback){onCloseCallback();};});};}};function fadeEffect(fadeIn,callbackFunc){if(fadeIn!=fadedIn){fadedIn=fadeIn;$('#bedrock-watchlist-container').fadeToggle(surfUIFadeDuration,"linear",callbackFunc);}};function loadingWindow(mode,onComplete){var coverDiv=$('#cover_div');if(!coverDiv.length){$(document.body).append("<div class='cover_div' id='cover_div'><div class='Absolute-Center'><div class='loading'><img src='"+CNBC_Settings.baseurls.sc_base_protocol_agnostic+"/applications/cnbc.com/staticcontent/img/loader-2.gif' width=32></div></div></div>");coverDiv=$('#cover_div');};$('.Absolute-Center .loading').css('display','block');$('.Absolute-Center .msg').css('display','none');if(mode)
coverDiv.css("opacity",0.5).fadeIn(400,function(){if(onComplete){onComplete()}});else
coverDiv.fadeOut(400,function(){if(onComplete){onComplete()}});};function setOnCloseCallback(fn){onCloseCallback=fn;};function closeButtonClick(){signinUI.closeButton.click();};function init(){if(typeof SURF!=='undefined'){SURF.event.bind(SURF.events.READY,surfReadyHandler);SURF.event.bind(SURF.events.SIGNIN,surfSigninHandler);SURF.event.bind(SURF.events.DIALOG.VISIBLE,surfDialogVisibleHandler);SURF.event.bind(SURF.events.DIALOG.OPEN,surfDialogVisibleHandler);SURF.event.bind(SURF.events.DIALOG.CLOSE,surfDialogVisibleHandler);SURF.event.bind(SURF.events.CREATE_ACCOUNT,surfCreateAccountHandler);SURF.event.bind(SURF.events.CREATE_ACCOUNT_ERROR,surfCreateAccountErrorHandler);}};return{'startUIFlow':startUIFlow,'init':init,'setOnCloseCallback':setOnCloseCallback,'loadingWindow':loadingWindow,'closeButtonClick':closeButtonClick};}();
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/libraries/Surf/CNBC_Bedrock.syncApi.js */
;if($('html').is('.lt-ie8, .lt-ie9')){(function(c){if((navigator.userAgent.indexOf('MSIE')>0||navigator.userAgent.indexOf('Trident')>0)&&"XDomainRequest"in window&&!("__jquery_xdomain__"in c)){c.__jquery_xdomain__=c.support.cors=!0;var e=function(a){return"object"===c.type(a)?a:(a=/^(((([^:\/#\?]+:)?(?:\/\/((?:(([^:@\/#\?]+)(?:\:([^:@\/#\?]+))?)@)?(([^:\/#\?]+)(?:\:([0-9]+))?))?)?)?((\/?(?:[^\/\?#]+\/+)*)([^\?#]*)))?(\?[^#]+)?)(#.*)?/.exec(a))?{href:a[0]||"",hrefNoHash:a[1]||"",hrefNoSearch:a[2]||"",domain:a[3]||"",protocol:a[4]||"",authority:a[5]||"",username:a[7]||"",password:a[8]||"",host:a[9]||"",hostname:a[10]||"",port:a[11]||"",pathname:a[12]||"",directory:a[13]||"",filename:a[14]||"",search:a[15]||"",hash:a[16]||""}:{}},f=c.ajaxSettings.xhr,d="SESSION_COOKIE_NAME"in window?window.SESSION_COOKIE_NAME:"jsessionid",g=e(document.location.href).domain;c.ajaxSettings.xhr=function(){var a=e(this.url).domain;if(""===a||a===g)return f.call(c.ajaxSettings);try{var b=new XDomainRequest;if(!b.setRequestHeader)b.setRequestHeader=c.noop;if(!b.getAllResponseHeaders)b.getAllResponseHeaders=c.noop;if(d){var h=b.open;b.open=function(){var a=RegExp("(?:^|; )"+d+"=([^;]*)","i").exec(document.cookie);if(a=a&&a[1]){var b=arguments[1].indexOf("?");arguments[1]=-1==b?arguments[1]+(";"+d+"="+a):arguments[1].substring(0,b)+";"+d+"="+a+arguments[1].substring(b)}return h.apply(this,arguments)}}b.onload=function(){if("function"===typeof b.onreadystatechange)b.readyState=4,b.status=200,b.onreadystatechange.call(b,null,!1)};b.onerror=b.ontimeout=function(){if("function"===typeof b.onreadystatechange)b.readyState=4,b.status=500,b.onreadystatechange.call(b,null,!1)};return b}catch(i){}}}})(jQuery);};var CNBC_Bedrock=CNBC_Bedrock||{};CNBC_Bedrock.syncApi={defaults:{url:'//register.cnbc.com/auth/api/',uuid:'',pid:'150',action:'',token:'',data:'',timeout:4000,success:function(){},error:function(){}},uid:null,user:null,userBedrockPayload:null,syncCall:function(options){var opts=$.extend({},this.defaults,options);if(!opts.action||!opts.uuid||!opts.pid){return false};var url='https:'+opts.url+opts.pid+'/'+opts.uuid+'/sync?opi='+opts.action;jQuery.support.cors=true;var failureScenarioFlag=localStorage.getItem('1266');if(failureScenarioFlag){}
$.ajax({url:url,type:'POST',dataType:'json',data:opts.data,timeout:opts.timeout,crossDomain:true,contentType:'text/plain',success:function(){opts.success.apply(this,arguments);SURF.getUserInfo();},error:function(){opts.error.apply(this,arguments);}});},signInCall:function(options){var self=this;var opts=$.extend({},this.defaults,options);if(!opts.uuid||!opts.pid){return false};var attemptsToSignIn=3;var url='https:'+opts.url+opts.pid+'/'+opts.uuid+'/signin'+((opts.token)?'?token='+opts.token:'');jQuery.support.cors=true;var getAutoLoginUrlCall=function(){$.ajax({type:'POST',url:url,dataType:'json',crossDomain:true,timeout:opts.timeout,contentType:'text/plain',success:function(data){var serviceUrl=self.checkSearchParameter('service');var autoLoginURL=(serviceUrl)?(data.autoLoginURL+'&service='+serviceUrl):data.autoLoginURL;$.ajax({url:decodeURIComponent(autoLoginURL),dataType:'jsonp',jsonpCallback:'callback101',cache:true,async:false,success:function(){opts.success.apply(this,arguments);},error:function(){opts.error.apply(this,arguments);}});},error:function(data){if(attemptsToSignIn>1){attemptsToSignIn--;getAutoLoginUrlCall();}else{if(CNBC_Surf_Mediator.errorObjects.signIn){CNBC_Surf_Mediator.errorObjects.signIn.show();};};}});};getAutoLoginUrlCall();},signOutCall:function(options){var opts=$.extend({},this.defaults,options);if(!opts.uuid||!opts.pid){return false};var url="https:"+opts.url+opts.pid+'/'+opts.uuid+'/signout';jQuery.support.cors=true;$.ajax({type:'POST',url:url,dataType:'json',timeout:opts.timeout,crossDomain:true,success:function(){opts.success.apply(this,arguments);},error:function(){opts.error.apply(this,arguments);}});},payloadCall:function(options){var opts=$.extend({},this.defaults,options),self=this;if(!opts.pid){return false};var url='https:'+opts.url+opts.pid+'/payload';var urlParams=[];try{urlParams.push('token='+SURF.globals.session.session_token);urlParams.push('uid='+SURF.globals.session.uid);}catch(e){}
if(opts.tokenfor){urlParams.push('tokenfor='+opts.tokenfor);}
if(urlParams.length>0){url+='?'+urlParams.join('&');}
$.ajax({"url":url,crossDomain:true,dataType:'jsonp',type:"GET",timeout:10000,success:function(){opts.success.apply(this,arguments);},error:function(){opts.error.apply(this,arguments);}});},checkSearchParameter:function(param){var searchString=location.search.substring(1).split('&');for(var i=0;i<searchString.length;i++){var tempArray=searchString[i].split('=');if(tempArray[0]==param){return tempArray[1];}};},casLogoutCall:function(){var currentUrl=location.href;if(location.href.indexOf('?video')!=-1&&CNBC_Platform_Video_Gallery.videoObj.isVideoPro){currentUrl=CNBC_Settings.baseurls.cnbcvideo_url_base;}
var serviceUrl=this.checkSearchParameter('service')||encodeURIComponent(currentUrl);var logoutUrl=CNBC_Settings.baseurls.pub_base_protocol_agnostic+"/application/auth/logout/";if(window.activePartnerExperience=='xfinity'&&CNBC_Surf_Mediator.isCnbcLoggedIn()&&CNBC_Utils.readCookie('xfinity_passive_authenticated')=='true'){location.href=logoutUrl+'?'+CNBC_Xfinity_Experience.getLogoutUrl().split('?')[1];}else{window.location.href=logoutUrl+'?service='+serviceUrl;};}};
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/libraries/Surf/CNBC_Surf_Mediator.js */
;var CNBC_Surf_Mediator=function(){var rememberMeCookieName='c_to';var mobile=false;var isSignIntoBedrockCalled=false;var debug=false;var isInitialized=false;var params;var user;var uid;var currentSurfConfigKey='';var appAccessProValue='PRO';var errorObjects={create:null,createSurf:null,xfinitySignIn:null,signIn:null,signInAutoLogin:null};var isLegacyPro=null;function createSurfSessionCookie(rememberMe){CNBC_Surf_Mediator.rememberMe=rememberMe;CNBC_Utils.deleteData(rememberMeCookieName);var rememberMeExpiration=rememberMe?(90*24):"";CNBC_Utils.createCookie(rememberMeCookieName,'YES!',rememberMeExpiration,false);CNBC_Utils.refreshProCookie();};function validateSurfSession(){var result=true;var cookieVal=CNBC_Utils.readData(rememberMeCookieName);if(!cookieVal){CNBC_Utils.deleteData('c_cnbc_session_valid');if(isSurfSignedIn()){CNBC_Utils.deleteData('c_surf_session_valid');if(SURF.isReady){surfSignout({});}else{if(!SURF.isReady){CNBC_Surf.Signin_Ui.startUIFlow('load');};};};result=false;}else{if(!isCnbcLoggedIn()){if(!SURF.isReady){CNBC_Surf.Signin_Ui.startUIFlow('load');};};updateHeader();};return result;};function verifyAppAccess(){var userIsPro=false,appAccessValues;CNBC_Premium.fetchAccessToken();try{appAccessValues=SURF.globals.user.brand_data.app_access;userIsPro=appAccessValues&&Array.isArray(appAccessValues)&&appAccessValues.indexOf(appAccessProValue)>-1;}catch(e){}
if(userIsPro){if(!CNBC_Utils.readCookie(CNBC_Utils.proCookieName)||CNBC_Utils.readCookie(CNBC_Utils.proCookieName)=='false'){CNBC_Utils.createProCookie();};}else{CNBC_Utils.deleteData(CNBC_Utils.proCookieName);}};function defaultInit(p){var uid,user,session;var defaults={'debug':false,'mobile':false};params=$.extend({},defaults,p);mobile=params.mobile;debug=params.debug;errorMsgInit();isInitialized=true;$('#login-container #signout').unbind();$('#login-container #signout, .reg-user #mobile-logout a').click(function(){if(window.CNBC_Surf&&CNBC_Surf.Signin_Ui&&CNBC_Surf.Signin_Ui.loadingWindow){CNBC_Surf.Signin_Ui.loadingWindow(true,null);};if(SURF.isReady){surfSignout({});}else{CNBC_Utils.deleteData('c_surf_session_valid');surfInit({});};});if(window.CNBC_Xfinity_Experience&&window.activePartnerExperience=='xfinity'){CNBC_Xfinity_Experience.init();};};function checkSearchParameter(param){var searchString=location.search.substring(1).split('&');for(var i=0;i<searchString.length;i++){var tempArray=searchString[i].split('=');if(tempArray[0]==param){return tempArray[1];}};};function omnitureClick(p){if(!window.s){return false;};var params=p||{};var source=params.source||'';if(!params.action){return false};var flow=source;var str='';if(params.action=='signin'){str="registration:log in:sign in:"+((source=='default')?'global':source);s.events='';}else if(params.action=='signup'){str="registration:"+((source=='pro')?"sign up:next":"sign up:sign up")+":"+((source=='default')?'global':source);};s.linkTrackVars="eVar48,prop48";s.eVar48=str;s.prop48=str;s.tl(this,'o',"Registration Module");};function omnitureSuccess(p){if(!window.s){return false;};var params=p||{};var source=params.source||'';if(!params.action){return false};if(source||params.action=='signout'){var str,evt;if(params.action=="signin"){str="registration:log in:success:"+((source=='default')?'global':source);evt='event12';}else if(params.action=="signup"){str="registration:sign up:success:"+((source=='default')?'global':source);evt='event13';}else if(params.action=="signout"){str="registration:log out:success:global";evt='event14';};s.linkTrackVars="eVar48,prop48,events";s.linkTrackEvents=evt;s.eVar48=str;s.prop48=str;s.events=evt;s.tl(this,'o',"Registration Module");};};function appendUrlParam(url,p){if(url.indexOf('?')>=0){url+='&';}else{url+='?';}
return url+p.join('&');};function redirectUser(p){var params=p||{};var ticket=params.ticket;var source=params.source||null;var flow=params.flow||null;if(flow=='header'){return false;};var apphome=(CNBC_Bedrock.syncApi.checkSearchParameter('apphome'))?'&apphome='+CNBC_Bedrock.syncApi.checkSearchParameter('apphome'):'';var uid=(SURF.globals.session)?SURF.globals.session.uid:null;var user=SURF.globals.user;var serviceUrl=checkSearchParameter('service')||null;var serviceParameter=(serviceUrl)?decodeURIComponent(serviceUrl):null;var docRefMobile=(document.referrer.indexOf('application/auth/logout')>-1)?'':document.referrer;var sourceUrls={'default':CNBC_Settings.baseurls.pub_base_protocol_agnostic,'generic':CNBC_Settings.baseurls.pub_base_protocol_agnostic,'default-mobile':docRefMobile||CNBC_Settings.baseurls.pub_base_protocol_agnostic,'watchlist-mobile':docRefMobile||CNBC_Settings.baseurls.pub_base_protocol_agnostic,'pro-mobile':docRefMobile||CNBC_Settings.baseurls.pub_base_protocol_agnostic,'watchlist':CNBC_Settings.baseurls.watchlist_base,'portfolio':CNBC_Settings.baseurls.login_base+'/authproxy/portfolio/auth.do?Action=portfolio','pro':CNBC_Settings.baseurls.login_base+'/tpauth/rest/authenticate?source=subscription&source_type=pro'+apphome,'pro-article':docRefMobile||CNBC_Settings.baseurls.pub_base_protocol_agnostic,'pro-article-mobile':docRefMobile||CNBC_Settings.baseurls.pub_base_protocol_agnostic,'comments':CNBC_Settings.baseurls.sc_base_protocol_agnostic+'/applications/cnbc.com/staticcontent/html/disqus/autoClose.html','comments-mobile':CNBC_Settings.baseurls.sc_base_protocol_agnostic+'/applications/cnbc.com/staticcontent/html/disqus/autoClose.html'};var url=serviceParameter||sourceUrls[source];if(ticket){url=appendUrlParam(url,['ticket='+ticket]);}
if(uid&&source&&flow){window.location=url;}};function isNewUser(){return!(window.SURF&&SURF.globals.user&&typeof SURF.globals.user._provider=='object'&&(SURF.globals.user._provider.cnbc));};function hasRegSource(){return!!(window.SURF&&SURF.globals.user&&SURF.globals.user.brand_data&&SURF.globals.user.brand_data.registration_source);};function initError(config){var config=config||{};var errorPopup=new CNBC_Popup2();var errorConfig={closeOnBackgroudClick:false,popupId:config.id,popupContent:'<div style="clear:both;"></div>'
+'<div class="popup-body">'
+'<div class="header">'+config.headerText+'</div>'
+'<div class="body">'+config.bodyText+'</div>'
+'</div>'
+'<hr style="width:85%;margin-top: 20px;margin-bottom: 20px;border: 0;border-top: 1px solid #eee;">'
+'<div class="popup-footer">'
+config.buttonMarkUp
+'</div>',initCallback:null,autoAlignPopup:true,autoHide:true,minHeight:'200px',minWidth:mobile?'25%':'400px',afterCloseCallback:function(){config.closeBtnCallback();}};errorPopup.init(errorConfig);$('#'+config.id+' .cancel').on('click',function(){errorPopup.hide();config.closeBtnCallback();});$('#'+config.id+' .confirm.xfinity').on('click',function(){config.goToXfinityBtnCallback();});return errorPopup;};function errorMsgInit(){errorObjects.create=initError({id:'errorPopupCreate',headerText:'Thank you!',bodyText:'Your account is all set up. <BR>Please log in to enjoy all of the features of CNBC.',buttonMarkUp:'<button class="button cancel">OK</button>',closeBtnCallback:function(){surfSignout({});}});errorObjects.createSurf=initError({id:'errorPopupCreateSurf',headerText:'Oops!',bodyText:'Something went wrong. <BR>Please create your account again.',buttonMarkUp:'<button class="button cancel">OK</button>',closeBtnCallback:function(){surfSignout({});}});errorObjects.signIn=initError({id:'errorPopupSignIn',headerText:'Oops!',bodyText:'Something went wrong. Please try to log in again.',buttonMarkUp:'<button class="button cancel">OK</button>',closeBtnCallback:function(){surfSignout({});}});errorObjects.signInAutoLogin=initError({id:'errorPopupSignInAutoLogin',headerText:'Oops!',bodyText:'Something went wrong. Please try to log in again!',buttonMarkUp:'<button class="button cancel">OK</button>',closeBtnCallback:function(){surfSignout({});}});errorMsgXfinityInit({"cancel":function(){surfSignout({});},"xfinity":function(){}});};function errorMsgXfinityInit(callback){callback=callback||{"cancel":function(){surfSignout({});},"xfinity":function(){}};errorObjects.xfinitySignIn=initError({id:'errorPopupXfinitySignIn',headerText:'Oops!',bodyText:'It appears you may be logged out of Xfinity. <BR>Would you like to log back in?',buttonMarkUp:'<button class="button confirm xfinity">Xfinity Subscribers: Log In</button>'
+'<button class="button btn-default cancel">Cancel</button>',closeBtnCallback:function(){callback.cancel();},goToXfinityBtnCallback:function(){callback.xfinity();}});};function bulkConsole(messageObject){if(!debug&&isInitialized){return false};messageObject=messageObject||{};if(!typeof messageObject=='object'){return false};for(var a in messageObject){if(messageObject.hasOwnProperty(a)){CNBC_Common.ConsoleLog(a,' - ',messageObject[a]);};};};function updateHeader(){CNBC_Utils.appendClassesOnUserLoggedInOrPro();if(!CNBC_Utils.isUserPremium()){$('li.link-pro-user').addClass('hide');};if(isSurfSignedIn()){$('#unreg-user, .unreg-user').addClass('hide');$('#reg-user, .reg-user').removeClass('hide');cnbc.utils.amendMenu();}else{$('#unreg-user, .unreg-user').removeClass('hide');$('#reg-user, .reg-user').addClass('hide');};};function isRemembered(){return!!CNBC_Utils.readData(rememberMeCookieName);};function checkAuth(){var xfinityAuthPoll;if(CNBC_Utils.readCookie('xfinity_passive_authenticated')==null&&window.activePartnerExperience!='xfinity'){validateSurfSession();}else{xfinityAuthPoll=setInterval(function(){var xfinityCookie=CNBC_Utils.readCookie('xfinity_passive_authenticated');if(xfinityCookie!=''){clearInterval(xfinityAuthPoll);};if(xfinityCookie=='true'){updateHeader();}else if(xfinityCookie=='false'){validateSurfSession();};},500);setTimeout(function(){clearInterval(xfinityAuthPoll);},15000);};};function isSignedIn(){return isCnbcLoggedIn()&&isSurfSignedIn();};function signIntoBedrock(p,callbacks){if(isSignIntoBedrockCalled){return false;};isSignIntoBedrockCalled=true;var params=p||{};var uid=(SURF.globals.session)?SURF.globals.session.uid:null;var user=SURF.globals.user;CNBC_Bedrock.syncApi.signInCall({uuid:uid,url:CNBC_Settings.baseurls.register_base.split(':')[1]+'/auth/api/',token:SURF.globals.session.session_token,success:function(data,text,status){CNBC_Utils.createCookie('c_cnbc_session_valid','true');updateHeader();verifyAppAccess();if(callbacks&&callbacks.success){callbacks.success(data,text,status);}else{var ticket=(data.ticket)?data.ticket:null;redirectUser({'ticket':ticket,'source':params.source,'flow':params.flow});}},error:function(data,text,status){CNBC_Common.ConsoleLog('cas sign in error 140. autologin url');errorObjects.signInAutoLogin.show();if(callbacks&&callbacks.error){callbacks.error();}}});};function isCnbcLoggedIn(){return!!CNBC_Utils.readCookie('c_cnbc_session_valid');};function isSurfSignedIn(){return!!(window.SURF&&window.SURF.globals&&window.SURF.globals.session);};var activeMediator;var mediators=[];function defaultOnSurfReady(ev){uid=(SURF.globals.session)?SURF.globals.session.uid:null;user=SURF.globals.user;var reg_source=(typeof user=='object'&&user.brand_data&&user.brand_data.registration_source)?user.brand_data.registration_source:'';var provider=(user&&'_provider'in user&&'cnbc'in user._provider)?user._provider.cnbc:'';var $videoIfr=$('#live_player'),isVideoIfr=false;if($('#live_player').length){isVideoIfr=true;$videoIfr=$videoIfr[0];}
if(window.CNBC_Omniture&&CNBC_Omniture.setUserMemeberStatus){CNBC_Omniture.setUserMemeberStatus({'action':'ready','user':user});};if(uid){if(CNBC_Utils.isPremium()&&typeof CNBC_Platform_Video==='function'){if(tp.userRef){CNBC_Platform_Video_Gallery.videoObj.getTokenWithPro('success');}else{CNBC_TinyPass.fetchTinyPassUserToken(CNBC_Platform_Video_Gallery.videoObj.getTokenWithPro);}}
if(isVideoIfr&&$videoIfr){$videoIfr.contentWindow.$('#loadingImg').remove();$videoIfr.contentWindow.$('#overlayImgContainer').show();$videoIfr.contentWindow.CNBC_uplynk.initCompontents();}
if(CNBC_Utils.isLegacyPro()){isLegacyPro=true;}
if(isRemembered()&&!isCnbcLoggedIn()){signIntoBedrock(params);}
checkAuth();if(params.flow!='pro'&&params.flow!='pro-mobile'){if(isCnbcLoggedIn()){var ticket=CNBC_Bedrock.syncApi.checkSearchParameter('ticket');redirectUser({'source':params.source,'flow':params.flow,'ticket':ticket});};}};if(!CNBC_Premium.isReady)CNBC_Premium.init();};function defaultOnSurfCreateAccount(e,user){omnitureClick({'action':'signup','source':params.source,'flow':params.flow});omnitureSuccess({'action':'signup','source':params.source,'flow':params.flow});if(params.flow=='pro'){CNBC_Surf.Signin_Ui.loadingWindow(true,null);};};function defaultOnSurfEditAccount(ev){var uid=(SURF.globals.session)?SURF.globals.session.uid:null;var user=SURF.globals.user;updateHeader();if(uid){CNBC_Bedrock.syncApi.syncCall({uuid:uid,action:'edit',dataType:'json',url:CNBC_Settings.baseurls.register_base.split(':')[1]+'/auth/api/',data:[{name:'meta',value:JSON.stringify({session_token:SURF.globals.session.session_token})}],success:function(data,text,status){},error:function(data,text,status){CNBC_Common.ConsoleLog('error ',data);CNBC_Common.ConsoleLog('error ',text);CNBC_Common.ConsoleLog('error ',status);}});};};function defaultOnSurfSignin(e,user){isSignIntoBedrockCalled=false;if(CNBC_Utils.isLegacyPro()){isLegacyPro=true;};function userSignedIntoBedrock(data,text,status){CNBC_TinyPass.fetchTinyPassUserToken(function(){var isUserPremium=CNBC_Utils.isUserPremium();var isHomePageNg=CNBC_Utils.isHomePageNg();var isVideoGallery=CNBC_Utils.isVideoGallery();var isVideoSectionFront=CNBC_Utils.isVideoSectionFront();var docRefMobile=(document.referrer.indexOf('application/auth/logout')>-1)?'':document.referrer;if((params.flow=='pro'||params.flow=='pro-mobile')){if(isUserPremium){if(CNBC_Premium.isPremium){if(CNBC_Utils.isLegacyProFirstTimeVisit()){}else{window.location.reload();};}else{window.location.href=CNBC_Utils.urlParam('service')?window.decodeURIComponent(CNBC_Utils.urlParam('service')):docRefMobile?docRefMobile:'/';};}else{if(params.flow=='pro'){CNBC_Surf.Signin_Ui.loadingWindow(true,null);var checkoutParams={complete:function(){CNBC_Surf.Signin_Ui.loadingWindow(false,null);},close:function(){CNBC_Surf.Signin_Ui.loadingWindow(false,null);}};CNBC_Premium.displayCheckout(checkoutParams);CNBC_Surf.Signin_Ui.loadingWindow(false,null);}
if(params.flow=='pro-mobile'){CNBC_Premium.displayCheckout({});}}}else if(isUserPremium&&(isHomePageNg||isVideoGallery||(window.CNBC_Premium&&CNBC_Premium.isPremium)||isVideoSectionFront)){if(CNBC_Utils.isLegacyProFirstTimeVisit()){}else{window.location.reload();};}else{var ticket=(data.ticket)?data.ticket:null;redirectUser({'ticket':ticket,'source':params.source,'flow':params.flow});};});};verifyAppAccess();var uid=(SURF.globals.session)?SURF.globals.session.uid:null;var user=SURF.globals.user;var bedrockAccountCreateTries=3;if(window.CNBC_Omniture&&CNBC_Omniture.setUserMemeberStatus){CNBC_Omniture.setUserMemeberStatus({'action':'signin','user':user});};CNBC_Utils.deleteData(rememberMeCookieName);CNBC_Utils.createCookie('c_surf_session_valid','true',90*24,false);if(uid){var rememberMe=$('#bedrock-remember-me').prop('checked');createSurfSessionCookie(rememberMe);}else{surfSignout({});};omnitureClick({'action':'signin','source':params.source,'flow':params.flow});omnitureSuccess({'action':'signin','source':params.source,'flow':params.flow});if(isNewUser()&&window.CNBC_Surf.Signin_Ui){function bedrockSyncApiCreate(){CNBC_Bedrock.syncApi.syncCall({uuid:uid,dataType:'json',url:CNBC_Settings.baseurls.register_base.split(':')[1]+'/auth/api/',data:[{name:'meta',value:JSON.stringify({session_token:SURF.globals.session.session_token})}],action:'create',success:function(data,text,status){if(!hasRegSource()){surfUpdate({'uid':uid,signature:'','user_data':{'registration_source':params.source,'option':JSON.stringify(['CNBC-TOS']),'option_date':JSON.stringify(['CNBC-TOS|'+new Date().getTime()])}});};signIntoBedrock(params,{success:userSignedIntoBedrock});},error:function(data,text,status){if(bedrockAccountCreateTries>1){bedrockAccountCreateTries--;bedrockSyncApiCreate();}else{if(errorObjects.create){errorObjects.create.show();};};}});};bedrockSyncApiCreate();}else{if(!hasRegSource()){surfUpdate({'uid':uid,signature:'','user_data':{'registration_source':params.source,'option':JSON.stringify(['CNBC-TOS']),'option_date':JSON.stringify(['CNBC-TOS|'+new Date().getTime()])}});};signIntoBedrock(params,{success:userSignedIntoBedrock});}};function defaultOnSurfSignout(){isSignIntoBedrockCalled=false;CNBC_Utils.deleteData(rememberMeCookieName);CNBC_Utils.deleteData('c_surf_session_valid');CNBC_Utils.deleteData('c_cnbc_session_valid');if(window.CNBC_TinyPass&&window.tp){CNBC_TinyPass.updateTinyPassUserRef('');}
omnitureSuccess({'action':'signout','source':params.source,'flow':params.flow});if(window.CNBC_Omniture&&CNBC_Omniture.setUserMemeberStatus){CNBC_Omniture.setUserMemeberStatus({'action':'signout','user':user});};if((window.CNBC_Surf&&window.CNBC_Surf.profileManagement&&!window.CNBC_Surf.profileManagement.isDelete)||(window.CNBC_Surf.Signin_Ui&&!window.CNBC_Surf.profileManagement)){CNBC_Bedrock.syncApi.casLogoutCall();}};function defaultOnSurfSigninError(event,error){CNBC_Common.ConsoleLog('surf signo in error. Error object - ',error);CNBC_Common.ConsoleLog('Event object - ',event);omnitureClick({'action':'signin','source':params.source,'flow':params.flow});}
function defaultOnSurfSignoutError(event,error){CNBC_Common.ConsoleLog('surf signout error calling cas logout. Error object - ',error);CNBC_Common.ConsoleLog('Event object - ',event);CNBC_Bedrock.syncApi.casLogoutCall();}
function defaultOnSurfCreateAccountError(event,object){var errorCode=object._xhr.status*1;CNBC_Common.ConsoleLog('error on surf user creation. Event Object - ',event);if(errorCode>499&&errorCode<600){if(errorObjects.createSurf){errorObjects.createSurf.show();}}
omnitureClick({'action':'signup','source':params.source,'flow':params.flow});}
function defaultOnSurfUI(event,action){if(action=='cancel'){if(mobile){window.location=document.referrer||CNBC_Settings.baseurls.pub_base_protocol_agnostic;}else{CNBC_Surf.Signin_Ui.closeButtonClick();};};};function defaultOnSurfMissingFields(event,missingFields){function submitMissingFields(popup){var displayNameField=popup.find('#missing_field_display_name');var displayName=displayNameField.val();if(displayName){var userData={username:displayName};var updateObj={'uid':SURF.globals.user._id,'signature':SURF.globals.user._auth_signature,'user_data':userData,'success':function(){CNBC_Popup3.hide();},'error':function(){var errMsg=popup.find('#missing_field_display_name_error_msg');errMsg.css('display','block');}};surfUpdate(updateObj);}}
if(missingFields&&missingFields.username){var markup='<div id="missing-fields-popup" style="clear:both;">'+'<div id="missingFieldsPopupHeader">More Information Required</div>'+'<div class="missing-fields-popup-subheader">Key data is missing from your member profile. Please provide the required information below.</div>'+'<div class="missing-fields-popup-fieldContainer">'+'<input id="missing_field_display_name" type="text" placeholder="Screen Name For Comments">'+'<div id="missing_field_display_name_error_msg">Username not available</div>'+'</div>'+'<div class="missing-fields-popup-legal">The information you provide when you create an account may be shared with other NBCUniversal businesses and used to help us better tailor our services, products, and advertising to you. For more details about how we use your information, see our <a target="_blank" href="http://nbcuni.com/privacy/">Privacy Policy</a>.</div>'+'<div class="missing-fields-popup-legal">By clicking the "Sign Up" button, you are agreeing to our <a target="_blank" href="//www.cnbc.com/id/15837353/">Terms of Use</a> and <a target="_blank" href="http://nbcuni.com/privacy/">Privacy Policy</a>.</div>'+'<button class="popup-submit popup-submit-button">SUBMIT</button>'+'</div>';CNBC_Surf_Mediator.pageRefreshDisabled=true;var mWidth=null;var mHeight=null;if(CNBC_Surf_Mediator.mobile){mWidth='320px';mHeight='400px';}else{mWidth='470px';mHeight='200px';}
var popupConfig={popupContent:markup,minHeight:mHeight,minWidth:mWidth,onSubmitCallback:submitMissingFields,xButtonVisible:false};}};function defaultOnSurfPasswordResetRequestSent(){};var defaultMediator=function(){return{'onSurfReady':defaultOnSurfReady,'onSurfCreateAccount':defaultOnSurfCreateAccount,'onSurfEditAccount':defaultOnSurfEditAccount,'onSurfSignin':defaultOnSurfSignin,'onSurfSignout':defaultOnSurfSignout,'onSurfSigninError':defaultOnSurfSigninError,'onSurfSignoutError':defaultOnSurfSignoutError,'onSurfCreateAccountError':defaultOnSurfCreateAccountError,'onSurfUI':defaultOnSurfUI,'onSurfMissingFields':defaultOnSurfMissingFields,'onSurfPasswordResetRequestSent':defaultOnSurfPasswordResetRequestSent};}();function init(p){if(typeof SURF==='undefined'){CNBC_Utils.deleteData(rememberMeCookieName);CNBC_Utils.deleteData('c_cnbc_session_valid');CNBC_Utils.deleteData('c_surf_session_valid');CNBC_Utils.deleteAllProCookies();return;}
currentSurfConfigKey=CNBC_Settings.surf_key+(!!(p.surfConfigOverlay)?'+'+p.surfConfigOverlay:'');if(activeMediator){SURF.event.off(SURF.events.READY,activeMediator.onSurfReady);SURF.event.off(SURF.events.CREATE_ACCOUNT,activeMediator.onSurfCreateAccount);SURF.event.off(SURF.events.EDIT_ACCOUNT,activeMediator.onSurfEditAccount);SURF.event.off(SURF.events.SIGNIN,activeMediator.onSurfSignin);SURF.event.off(SURF.events.SIGNOUT,activeMediator.onSurfSignout);SURF.event.off(SURF.events.SIGNIN_ERROR,activeMediator.onSurfSigninError);SURF.event.off(SURF.events.SIGNOUT_ERROR,activeMediator.onSurfSignoutError);SURF.event.off(SURF.events.CREATE_ACCOUNT_ERROR,activeMediator.onSurfCreateAccountError);SURF.event.off(SURF.events.UI,activeMediator.onSurfUI);SURF.event.off(SURF.events.MISSING_FIELDS,activeMediator.onSurfMissingFields);SURF.event.off(SURF.events.PASSWORD_RESET_REQUEST_SENT,activeMediator.onSurfPasswordResetRequestSent);};activeMediator=mediators[p.flow]||defaultMediator;SURF.event.on(SURF.events.READY,activeMediator.onSurfReady);SURF.event.on(SURF.events.CREATE_ACCOUNT,activeMediator.onSurfCreateAccount);SURF.event.on(SURF.events.EDIT_ACCOUNT,activeMediator.onSurfEditAccount);SURF.event.on(SURF.events.SIGNIN,activeMediator.onSurfSignin);SURF.event.on(SURF.events.SIGNOUT,activeMediator.onSurfSignout);SURF.event.on(SURF.events.SIGNIN_ERROR,activeMediator.onSurfSigninError);SURF.event.on(SURF.events.SIGNOUT_ERROR,activeMediator.onSurfSignoutError);SURF.event.on(SURF.events.CREATE_ACCOUNT_ERROR,activeMediator.onSurfCreateAccountError);SURF.event.on(SURF.events.UI,activeMediator.onSurfUI);SURF.event.on(SURF.events.MISSING_FIELDS,activeMediator.onSurfMissingFields);SURF.event.on(SURF.events.PASSWORD_RESET_REQUEST_SENT,activeMediator.onSurfPasswordResetRequestSent);defaultInit(p);};function surfUpdate(p){SURF.update(p||{});}
function surfSignin(p){SURF.signin(p||{});}
function surfSignout(p){SURF.signout(p||{});}
function surfInit(p){SURF.init(p||{});}
function surfDelete(p){SURF['delete'](p||{});}
function surfCreateAccountDialog(){SURF.createAccountDialog(currentSurfConfigKey);}
function surfSigninDialog(){SURF.signinDialog(currentSurfConfigKey);}
return{'init':init,'errorObjects':errorObjects,'createSurfSessionCookie':createSurfSessionCookie,'appendUrlParam':appendUrlParam,'errorMsgXfinityInit':errorMsgXfinityInit,'updateHeader':updateHeader,'checkSearchParameter':checkSearchParameter,'isRemembered':isRemembered,'isSurfSignedIn':isSurfSignedIn,'isCnbcLoggedIn':isCnbcLoggedIn,'checkAuth':checkAuth,'rememberMeCookieName':rememberMeCookieName,'signIntoBedrock':signIntoBedrock,'isSignIntoBedrockCalled':isSignIntoBedrockCalled,'redirectUser':redirectUser,'mobile':mobile,'surfUpdate':surfUpdate,'surfSignin':surfSignin,'surfSignout':surfSignout,'surfInit':surfInit,'surfDelete':surfDelete,'surfCreateAccountDialog':surfCreateAccountDialog,'surfSigninDialog':surfSigninDialog,'verifyAppAccess':verifyAppAccess,'isLegacyPro':function(){return isLegacyPro;}};}();
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/libraries/Iframe/CNBC_Iframe.js */

var CNBC_Iframe=function(){var replaceHttpWithHttps=function(url){if(url.indexOf('http')>-1)return url.replace('http','https');}
var createIframe=function(config){var frame=$('<iframe name=\''+config['name']+'\'></iframe>'),frameId=config['name']+'Frame',onload=config['onload'],container=(typeof config.container==='string')?config.container:'cnbc-contents',src=config['src'],border=config.frameborder||0,scrolling=config.scrolling||'no',greeting=config.greeting||'greeting';if(config.usePost){}else{var configIframe=function(conf_new){if(conf_new){var src_new=conf_new['src'];}
frame.attr('id',frameId).attr('src',src_new||src).attr('allowtransparency',true).attr('frameborder',border).attr('scrolling',scrolling);if($(config.container).length){var container=$(config.container);$(container).append(frame);$('#'+frameId).load(function(){config.transporter.sendMessage($('#'+frameId).attr('src'),greeting,document.getElementById(frameId).contentWindow);})}else{console.warn('please specify container for the iframe: '+config['name']);}}}
return function(service,success,fail,always){if(service){callService(service).setCallbacks({success:function(data){if(success)configIframe(success(data));},fail:function(err_msg){if(fail)fail(err_msg);},always:function(){if(always)always();}});}else{configIframe();}}}
var callService=function(service){var url=service.url||'',type=service.type||'json',jsonpCallback=service.jsonpCallback||'',ajax={};if(!url){console.warn('url is not available, init iframe failed');}else{$.ajax({url:url,dataType:'jsonp',jsonpCallback:'jsonp_callback'}).success(function(data){if(ajax.success)ajax.success(data);}).fail(function(err){if(ajax.fail)ajax.fail(err);}).always(function(){if(ajax.always)ajax.always();})}
ajax.setCallbacks=function(callbacks){if(callbacks.success){this.success=callbacks.success;};if(callbacks.fail){this.fail=callbacks.fail;};if(callbacks.always){this.always=callbacks.always;};}
return ajax;}
var createMessageTransporter=function(){var sender=null;var parentDomain={'local':'http://localhost:8180','cnbc_qa':'//qa-ec01pub.cnbc.com','cnbc_dev':'//dev-ec01pub.cnbc.com','cnbc_stg':'//stg-ec01pub.cnbc.com','cnbc_prod':'//www.cnbc.com'}
var bindResponseEvent=function(el,event,msg,action){var $el=el;if(typeof el==='string')$el=$(el);if($el.length>0){if(sender!==null){$el.on(event,function(){if(action&&typeof action==='function')action();instance.sendMessage(sender,msg,parent);})}}else{console.warn('no element with given selector is found');}}
var getOrigin=function(event){if(event.origin){return event.origin;}else if(event.url){return event.url;}else if(event.domain){return event.domain;}}
var _sendMessage=function(domain,msg,target){var domain=parentDomain[domain]||domain;if(domain){target.postMessage(msg,domain);}}
var _onMessage=function(origin,action,event,wait,secure){var validSender=secure?replaceHttpWithHttps(parentDomain[origin]):parentDomain[origin];sender=getOrigin(event);if(!wait)wait=0;if(sender!==origin&&sender!==validSender){console.warn("not able to recognize sender:"+sender+", this message may not be authorized");}else{setTimeout(function(){if(typeof action==='function'){var ready=action(event.data);if(ready){if(ready.sendBack)instance.sendMessage(sender,ready.sendBack,parent);if(ready.register){var register=ready.register;for(var i=0;i<register.length;i++){if(typeof register[i]==='function'){register[i](sender,parent);}}}}}else{instance.sendMessage(sender,'massage received',parent);}},wait);}}
var _init=function(origin,type,action,wait){if(type&&type==='secure'){for(var d in parentDomain){parentDomain[d]=replaceHttpWithHttps(parentDomain[d]);}}
if(typeof window["addEventListener"]==='function'){window.addEventListener("message",function(event){if(typeof event.data!=='string'){return false;}else{_onMessage(origin,action,event,wait);}},false);}else{console.warn('not able to attach event listener, please try something else');}}
var instance={'sendMessage':_sendMessage,'init':_init,'bindResponseEvent':bindResponseEvent}
return instance;}
return{'createIframe':createIframe,'createMessageTransporter':createMessageTransporter}}();
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/libraries/Comments/disqus.js */

var CNBC_Disqus={};(function($){CNBC_Disqus._API_VERSION="3.0";CNBC_Disqus.component=function(settings){window.disqus_identifier=settings.disqus.identifier;window.disqus_title=settings.disqus.title;window.disqus_url=settings.disqus.url;window.disqus_config=function(){if(settings.sso!==undefined){this.sso=settings.sso;}
if(settings.sso_payload!==undefined){this.page.remote_auth_s3=settings.sso_payload.payload;this.page.api_key=settings.sso_payload.publicKey;}
if(settings.eventTracking!==undefined&&$.isPlainObject(settings.eventTracking)==true){for(var e in settings.eventTracking.events){if(this.callbacks[e]!==undefined){this.callbacks[e].push(function(){settings.eventTracking.callback(settings.eventTracking.events[e]);});}}}};(function(){var dsq=document.createElement('script');dsq.type='text/javascript';dsq.async=true;dsq.src='//'+settings.disqus.shortname+'.disqus.com/embed.js';(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(dsq);})();};CNBC_Disqus.counts=function(disqusThreads,settings){var self=this;var deferred=$.Deferred();if(disqusThreads.length){self._api({url:settings.provider.apiEndpoint+'/api/'+self._API_VERSION+'/threads/set.jsonp',data:{api_key:settings.provider.apiKey,forum:settings.disqus.shortname,thread:disqusThreads},dataType:"jsonp",cache:true,jsonpCallback:'countsHandler'}).fail(function(){deferred.reject();}).done(function(data){var counts=self._extractCounts(data.response);deferred.resolveWith(this,[counts]);});}else{deferred.reject();}
return deferred.promise();};CNBC_Disqus._api=function(settings){return $.ajax(settings).fail(function(){$.error('Disqus API request failed');}).done(function(data){if(data.code!=0){$.error('Disqus API response code !zero');}});};CNBC_Disqus._extractCounts=function(apiResponse){var counts={};$.each(apiResponse,function(key,value){$.each(value.identifiers,function(k,v){counts[v]=value.posts;});});return counts;};})(jQuery);
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/libraries/Comments/comments.js */

function CNBC_Comments(){};(function($){CNBC_Comments.prototype._provider=null;CNBC_Comments.prototype._settings={};CNBC_Comments.prototype._identifiers=[];CNBC_Comments.prototype.component=function(settings,commentsObj){var self=this,toggler=$("#disqus_visibility_toggle");if(this._init(settings)){self._settings.eventTracking={callback:self._omnitureTrackLink,events:{onNewComment:'event56'}};toggler.click(function(){if(CNBC_Utils.isSignedIn()&&!SURF.globals.user.username){var form=commentsObj._getUserForm();toggler.addClass("disabled_toggler");if(!form.isReady){form.ready();}
if(!form.isVisible)form.container.slideDown('slow');}else{$('#disqus_thread').toggle('slow');if(toggler.text()=="SHOW COMMENTS"){toggler.text("HIDE COMMENTS");}else{toggler.text("SHOW COMMENTS");};}});if(CNBC_Utils.isSignedIn()){var loginConfig={session:(typeof SURF==='undefined'||!SURF.globals.session)?'':SURF.globals.session.session_token,uid:(typeof SURF==='undefined'||!SURF.globals.session)?'':SURF.globals.session.uid};if(window.activePartnerExperience!==undefined&&window.activePartnerExperience==="xfinity"){self._settings.sso.logout=CNBC_Xfinity_Experience.getLogoutUrl();}
CNBC_Signin.Disqus.login(self._settings.provider.authTimeout,loginConfig).fail(function(error){}).done(function(data){self._settings.sso_payload={};self._settings.sso_payload.payload=data.payload;self._settings.sso_payload.publicKey=data.publicKey;}).always(function(){self._provider.component(self._settings,commentsObj);});}else{CNBC_Signin.Disqus.logout();this._provider.component(self._settings,commentsObj);}}};CNBC_Comments.prototype.counts=function(settings){var self=this;if(self._init(settings)){CNBC_Signin.Disqus.getPublicKey().fail(function(){$.error('Unable to get public key');}).done(function(data){self._settings.provider.apiKey=data.publicKey;var scope=null;if(self._settings.scope){scope=self._settings.scope;}
self.getCounts(scope);self.initEvents();});}};CNBC_Comments.prototype.getCounts=function(scope){var self=this;var disqusThreads=self._getIDs(scope);self._provider.counts(disqusThreads,self._settings).done(function(data){self._renderCounts(data);});};CNBC_Comments.prototype._init=function(settings){try{this._settings=settings;this._provider=window[this._settings.provider.lib];return true;}catch(e){$.error('comments provider library: '+this._settings.provider.lib+' not found');return false;}};CNBC_Comments.prototype._getIDs=function(scope){var self=this;if(self._settings.anchorAttrName!==undefined){var threads=$("a["+self._settings.anchorAttrName+"]",scope);var list=[];self._identifiers={};$.each(threads,function(index,value){var identifier=$(this).attr(self._settings.anchorAttrName);if(self._identifiers[identifier]==undefined){self._identifiers[identifier]=[];}
self._identifiers[identifier].push(this);});$.each(self._identifiers,function(key,value){list.push('ident:'+key);});return list;}else{return null;}};CNBC_Comments.prototype._renderCounts=function(data){var self=this;var subset={};var label='';if(self._settings.label&&self._settings.label.showZero){subset=self._identifiers;}else{$.each(data,function(key,value){if(value>0){subset[key]=value;}});}
for(iii in subset){var templates='templates';if($(subset[iii])[0].hasAttribute('data-comments-label')){templates='templates'+$(subset[iii]).attr('data-comments-label');}
var count=parseInt(data[iii])||0;switch(count){case 0:label=self._settings.label[templates].zero;break;case 1:label=self._settings.label[templates].singular;break;default:label=self._settings.label[templates].plural;}
if(count>99999){count=parseInt(count/1000000)+'M';}else if(count>999){count=parseInt(count/1000)+'K';}
label=label.replace('$COUNT$',count);for(jjj in this._identifiers[iii]){$(this._identifiers[iii][jjj])[self._settings.label.position](label);}}};CNBC_Comments.prototype._omnitureTrackLink=function(e){s.linkTrackVars='events,prop56';s.linkTrackEvents=e;s.prop56=s.pageName;s.events=e;s.tl(this,'o','Disqus Comment');};CNBC_Comments.prototype._getUserForm=function(){var container=$("#disqus_form_container"),userField=$('.disqus_form_user_field .disqus_form_input_body'),commit=$('.disqus_form_confirm'),errMsg=$('.disqus_form_error_msg'),isReady=false,isVisible=(function(){return container.is(':visible');}()),validationState=0,errorIndicator={'userNameIsTaken':['The username','associated with another member in this brand','Sorry, that user name is already taken']},errorMsgConfig=['','Username not available','Enter username','Inappropriate language - please try again'];function createUsernameTrackingObj(username,pev2){var tracking={'cnbc':{},'link':{}};if(username)tracking.cnbc['username']=username;if(pev2)tracking['link'].pev2=pev2;return tracking;}
function ready(){commit.on('click',function(){disqusJoinHandler();})
CNBC_Omniture.genericClickTracking(createUsernameTrackingObj('prompt','Registration Module'));isReady=true;}
function disqusJoinHandler(){var userInput=userField.val();updateDisplayUsername(userInput);popupErrorMsg(validationState);}
function popupErrorMsg(state){if(state<errorMsgConfig.length){errMsg.text(errorMsgConfig[state]);errMsg.removeClass('disqus_transparent');}}
function updateDisplayUsername(input){var length=$.trim(input).length,validator=$.Deferred(),updateObj={'uid':SURF.globals.user._id,'signature':SURF.globals.user._auth_signature,'success':function(data){validationState=0;errMsg.addClass('disqus_transparent');popupErrorMsg(validationState);CNBC_Omniture.genericClickTracking(createUsernameTrackingObj('selected','Registration Module'));container.slideUp(500,function(){SURF.getUserInfo({'success':function(){var commentsObj=new CNBC_Comments();$("#disqus_visibility_toggle").removeClass("disabled_toggler");commentsObj.component(CNBC_Settings.commentsParam);CNBC_Comments.showComments();}})});},'error':function(err){if(err.error&&typeof err.error==='string'){var updateErr=err.error;if(CNBC_Common.includeString(updateErr,errorIndicator['userNameIsTaken'],'any')){validationState=1;}else{validationState=3;}}
popupErrorMsg(validationState);}};if(!length){validationState=2;}else{updateObj.user_data={username:input}
CNBC_Surf_Mediator.surfUpdate(updateObj);}}
return{'ready':ready,'isReady':isReady,'container':container}}
CNBC_Comments.prototype.initEvents=function(){$('div.cnbc-body').delegate('#discussion','click',function(){if($('#disqus_thread').length){CNBC_Comments.initComments();$('html, body').stop().animate({scrollTop:$('#disqus_thread').position().top},500);}
CNBC_Gigya_Omniture.disqusDiscussionScroll();});};CNBC_Comments.initComments=function(){var toggler=$("#disqus_visibility_toggle");if(!$('#disqus_thread iframe').length){var commentsObj=new CNBC_Comments(),form=commentsObj._getUserForm();if(!CNBC_Utils.isSignedIn()||SURF.globals.user.username){commentsObj.component(CNBC_Settings.commentsParam,commentsObj);CNBC_Comments.showComments();}else{toggler.addClass("disabled_toggler");if(!form.isReady){form.ready();}
if(!form.isVisible)form.container.slideDown('slow');}};};CNBC_Comments.showComments=function(){$('#disqus_visibility_toggle').text("HIDE COMMENTS");$('#disqus_thread').show();};CNBC_Comments.hideComments=function(){$('#disqus_visibility_toggle').text("SHOW COMMENTS");$('#disqus_thread').hide();};})(jQuery);
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/libraries/Premium/CNBC_TinyPass.js */
;var CNBC_TinyPass=function(){var initialized=false;var tinyPassUserCookieName='tinyPassUserToken';var tinyPassUserCookieTTL=8/60;function tpExists(){return!!(window.tp)}
function init(p,callback){if(!tpExists()){if(callback){callback();}
return false;}
if(initialized){if(callback){callback();}}else{tp.trackPages=p.config.trackPages;tp.endpoint=p.config.endpoint;tp.aid=p.config.aid;tp.contentSection=p.contentSection||'';tp.contentAuthor=p.contentAuthor||'';tp.contentCreated=p.contentCreated||'';tp.debug=p.config.debug;tp.init(function(){initialized=true;if(callback){callback();}});CNBC_Utils.logElapsedTime("TP init complete");}};function updateTinyPassUserRef(val){tp.userRef=val;CNBC_Utils.createCookie(tinyPassUserCookieName,tp.userRef,tinyPassUserCookieTTL,false);};function fetchTinyPassUserToken(callback){if(!tpExists()){callback?callback('fail'):false;return false;}
var isLoggedIn=CNBC_Utils.isSignedIn();if(isLoggedIn){var userRef=CNBC_Utils.readData(tinyPassUserCookieName);updateTinyPassUserRef(userRef);if(tp.userRef){callback?callback('success'):false;}else{CNBC_Bedrock.syncApi.payloadCall({pid:152,url:CNBC_Settings.baseurls.register_base.split(":")[1]+'/auth/api/',success:function(data){if(data){updateTinyPassUserRef(data.payload_token);callback?callback('success'):false;}},error:function(){updateTinyPassUserRef('');callback?callback('fail'):false;}});}}else{updateTinyPassUserRef('');callback?callback('fail'):false;}};return{'init':init,'fetchTinyPassUserToken':fetchTinyPassUserToken,'tpExists':tpExists,'updateTinyPassUserRef':updateTinyPassUserRef};}();
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/libraries/Premium/CNBC_Premium.js */
;CNBC_Premium=function(){var p='';var bedrockAccessCookieName='bedrockAccessToken';var bedrockVideoCookieName='bedrockVideoToken';var isProCookieName='ispro';var isProCookieTTL=60*60*12*365;var bedrockVideoTokenValue;var bedrockAccessCookieTTL=8/60;var videobedrockAccessCookieTTL=1/60;var apphome=(CNBC_Bedrock.syncApi.checkSearchParameter('apphome'))?'&apphome='+CNBC_Bedrock.syncApi.checkSearchParameter('apphome'):'';var proHomePage=CNBC_Settings.baseurls.login_base+'/tpauth/rest/authenticate?source=subscription&source_type=pro'+apphome;var proSignUpPage="/id/94";var signUpPage=proSignUpPage;var registration_source=($('#page_franchise_premium_view').length>0)?"pro:profranchise":"pro";var isMobile=(function(){var mobile=false,evt;try{evt=document.createEvent('TouchEvent');mobile=true;}catch(e){}
return mobile;}());var isIPad=(function(){return navigator.userAgent.match(/iPad/i)!=null;}());var isFireFox=(function(){return navigator.userAgent.toLowerCase().indexOf('firefox')>-1;}());var proInterstitialCarousel=null;var proAccountNotification=null;var isReady=false;var messageTransporter=null;var isXfinityUser=false;function setRegSource(){registration_source+=(CNBC_Premium.globals.templateName=="story")?"-article":"";registration_source+=(CNBC_Premium.globals.product=="mobile-touch")?"-mobile":"";registration_source=(CNBC_Utils.urlParam('registration_source'))?CNBC_Utils.urlParam('registration_source'):registration_source;}
function updateMobileWebLinks(){var signUpLink=$('#mobile-signup').find('a');var signInLink=$('#mobile-signin').find('a');if(signUpLink.length==0){return false;};var newSignUpUrl=CNBC_Settings.baseurls.pub_base_protocol_agnostic+signUpPage+'?'+signUpLink.attr('href').split('?')[1];var newSignInUrl=CNBC_Settings.baseurls.pub_base_protocol_agnostic+signUpPage+'?'+signInLink.attr('href').split('?')[1];signUpLink.attr('href',typeof SURF!=='undefined'?newSignUpUrl:CNBC_Settings.baseurls.pub_base_protocol_agnostic+CNBC_Surf.outageRedirection);signInLink.attr('href',typeof SURF!=='undefined'?newSignInUrl:CNBC_Settings.baseurls.pub_base_protocol_agnostic+CNBC_Surf.outageRedirection);};function updatePremiumStatus(bedrockAccessTokenValue){if(bedrockAccessTokenValue!=''){if(!CNBC_Utils.readCookie(isProCookieName)){var bedrockAccessCookieTTL=8/60;SURF.getUserInfo({'success':function(){CNBC_Utils.deleteAllProCookies();CNBC_Utils.createCookie(isProCookieName,'true',isProCookieTTL,false);window.location.reload();}});}}
else{if(CNBC_Utils.readCookie(isProCookieName)){SURF.getUserInfo({'success':function(){CNBC_Utils.deleteAllProCookies();window.location.reload();}});}}};function downloadArticlePremiumContent(p){function displayErrorMsg(){var errorMsg='<div id="premiumContentErrorContainer">'+'<img src="'+CNBC_Settings.baseurls.sc_base_protocol_agnostic+'/applications/cnbc.com/staticcontent/img/pro/cnbc-pro-logo-lockup.png">'+'<div>Oops! There was an error retrieving this article\'s premium content.</div>'+'<div>Please try refreshing this page or call customer service if the problem persists.</div>'+'</div>';var containerSelector='#'+CNBC_Premium.globals.containerSelector;var container=$(containerSelector);container.html(errorMsg).css('font-weight','bold').css('font-size','20px').css('background-image','none');if(isMobile){container.width(230).css('padding','40px').css('margin',(window.innerWidth-310)/2+'px');$(containerSelector+' img').width(230).css('margin-bottom','10px');$(containerSelector+' div').addClass('mobile-error-container');$('.group-container .group').css('margin-bottom','-80px').append("<div id='error-msg-gradient'></div>");}}
var isPreview='';if(typeof CNBC_Settings.is_preview!='undefined'){isPreview="&is_preview=true";}
var baseurl=CNBC_Settings.baseurls.cnbc_base_secure+'/id/'+CNBC_Settings.pageNodeId+'/services/premium/article/data',url=baseurl+'?content='+(p.content||'article')+'&token='+p.tokenValue+isPreview;$.get(url,function(data){var failureScenarioFlag=localStorage.getItem('1260');if(failureScenarioFlag){displayErrorMsg();if(p.fail){p.fail(arguments);}
return false;}
if(p.success){p.success(data);}}).fail(function(){displayErrorMsg();if(p.fail){p.fail(arguments);}});};function initPlayer(premiumContainer){if($('div.cnbcvideo',premiumContainer).length){if(CNBC_Utils.isSafari11()){$('div.cnbcvideo').removeAttr('data-autoplay');}
CNBC_Platform_Video_Gallery.videoObj.$these=$('div.cnbcvideo[data-autoplay="1"]',premiumContainer);if(CNBC_Platform_Video_Gallery.videoObj.$these.length&&!CNBC_Utils.isTablet()){CNBC_Platform_Video_Gallery.videoObj.releaseSetByClick=releaseInitiatedByClick=false;CNBC_Platform_Video_Gallery.videoObj.playback(CNBC_Platform_Video_Gallery.videoObj.$these);}}}
function renderPremiumArticleContent(data){var containerSelector='#'+CNBC_Premium.globals.containerSelector;var premiumContainer=$(containerSelector)
premiumContainer.html(data);premiumContainer.css('background-image','none');initPlayer(premiumContainer);var carouselAssets=premiumContainer.find('div.carousel_asset');if(carouselAssets.length>0){var carouselInit=[];var params;for(var i=0;i<carouselAssets.length;i++){carouselInit[i]=new CNBC_Carousel3();params={itemsPerPage:1,itemsPerTransition:1,speed:500,swipable:true,nextPrevLinks:true,container:carouselAssets[i],currentNodeClass:'currentNode',lazyLoad:false,lazyLoadNext:false,responsive:isMobile};if(isMobile){params.initCallback=function(){$(carouselAssets[i]).css('height','auto');};}
carouselInit[i].init(params);if((CNBC_Premium.globals.product==='web')||(CNBC_Premium.globals.product==='mobile-touch')){if(carouselAssets[i].leftA!=undefined){carouselAssets[i].leftA.on('click',function(){s.linkTrackVars='eVar48,prop48';s.eVar48='articlecarousel:inline:left:'+CNBC_Settings.pageNodeId;s.prop48='articlecarousel:inline:left:'+CNBC_Settings.pageNodeId;s.tl(true,'o','Article Carousel Module',null,'navigate');if(!s.manageVars){CNBC_Omniture.sManageVars();}
s.manageVars('clearVars');});}
if(carouselAssets[i].rightA!=undefined){carouselAssets[i].rightA.on('click',function(){s.linkTrackVars='eVar48,prop48';s.eVar48='articlecarousel:inline:right:'+CNBC_Settings.pageNodeId;s.prop48='articlecarousel:inline:right:'+CNBC_Settings.pageNodeId;s.tl(true,'o','Article Carousel Module',null,'navigate');if(!s.manageVars){CNBC_Omniture.sManageVars();}
s.manageVars('clearVars');});}}}}
if(CNBC_Utils.eventRegistrar){CNBC_Utils.eventRegistrar.fire('pro_article_content');}
displayDiscuss();showHiddenAds();$('body.premium').removeClass('premium');};function renderPremiumLargeVideo(data){var $container=$('.pro-video-container'),$data;if(isMobile&&CNBC_Utils.searchProp(CNBC_Premium,'globals->product')!=="web"){$data=$('.embed-container',$(data));}else{$data=$('.inline-player',$(data));}
$container.append($data);if($container.find('div.cnbcvideo').length){initPlayer($container);CNBC_Premium.initVideoChaptering();window.setTimeout(CNBC_Utils.createPersistentRightRailAd,200);}
if($('div.cnbcvideo',$container).length){playerResizeFix();CNBC_Utils.getVideoMetaData();}
$('.pro-video-loader').fadeOut();}
function playerResizeFix(){if($pdk.controller._env._component_runtime=="html5"||CNBC_Utils.isUniversalVODPlayer()){window.dispatchEvent(new Event('resize'));}}
function displayPaywall(completeCallback,customEventCallback){tp.push(["addHandler","checkoutCustomEvent",customEventCallback]);displayDiscuss();$('body').addClass('premium');tp.push(["init",function(){tp.experience.init()
console.log('experience init');}]);};function displayDiscuss(){if(CNBC_Utils.isPremium()&&CNBC_Utils.isSignedIn()){$('.disqus_container').removeClass('hide');};if(CNBC_Premium.globals.product==='web'){if(CNBC_Utils.isPremium()){var commentsCountObj=new CNBC_Comments();commentsCountObj.counts(CNBC_Settings.commentsCountParam);};};};function showHiddenAds(){$('.subsection.related.hide').removeClass('hide');if(window.CNBC_Settings.initHighligths){CNBC_Settings.initHighligths();};if(window.CNBC_Settings.initHighligthsOmniture){CNBC_Settings.initHighligthsOmniture();};};function fetchVideoToken(timestamp,p){function finalizeVideoLogic(shouldUpdateBedrockVideoTokenCookie){updatePremiumStatus(bedrockVideoTokenValue);if(shouldUpdateBedrockVideoTokenCookie)
CNBC_Utils.createCookie(bedrockVideoCookieName,bedrockVideoTokenValue,timestamp,false);if(p&&p.callback){p.callback(bedrockVideoTokenValue);}}
bedrockVideoTokenValue=CNBC_Utils.readData(bedrockVideoCookieName);if(!bedrockVideoTokenValue||bedrockVideoTokenValue=="null"){CNBC_Bedrock.syncApi.payloadCall({pid:14,url:CNBC_Settings.baseurls.register_base.split(":")[1]+'/auth/api/',tokenfor:'LIVESTREAM',success:function(data){if(data){bedrockVideoTokenValue=data.payload_token;finalizeVideoLogic(true);return;}},error:function(){finalizeVideoLogic(true);return;}});return;}
finalizeVideoLogic(false);};function fetchAccessToken(p){var bedrockAccessTokenValue;function finalizeLogic(shouldUpdateBedrockCookie){updatePremiumStatus(bedrockAccessTokenValue);bedrockAccessTokenValue=bedrockAccessTokenValue||'';if(shouldUpdateBedrockCookie)
CNBC_Utils.createCookie(bedrockAccessCookieName,bedrockAccessTokenValue,bedrockAccessCookieTTL,false);if(p&&p.callback){p.callback(bedrockAccessTokenValue);}}
var isLoggedIn=CNBC_Utils.isSignedIn();if(isLoggedIn){bedrockAccessTokenValue=CNBC_Utils.readData(bedrockAccessCookieName);if($('#disqus_visibility_toggle').length){CNBC_Comments.hideComments();}
if(!bedrockAccessTokenValue){CNBC_Bedrock.syncApi.payloadCall({pid:14,url:CNBC_Settings.baseurls.register_base.split(":")[1]+'/auth/api/',tokenfor:'CMS',success:function(data){if(data){bedrockAccessTokenValue=data.payload_token;finalizeLogic(true);return;}},error:function(){finalizeLogic(true);return;}});return;}}else{bedrockAccessTokenValue="";}
finalizeLogic(false);};function setSignUpPageUrl(){if(CNBC_Premium.globals.config.signUpPage){return CNBC_Premium.globals.config.signUpPage;}else{return signUpPage;}}
function init(){this.isReady=true;CNBC_Utils.deleteData('X-UA-Rewrite-Override');if(!this.isReady)this.isReady=true;setTimeout(function(){var count=0,checkProInterstitial=function(){setTimeout(function(){count++;autoRunInitProTour(count);},200)},autoRunInitProTour=function(c){if(!proInterstitialCarousel){initProTour();checkProInterstitial();}else{}};checkProInterstitial();},500);if(!CNBC_TinyPass.tpExists()){return false;}
setRegSource();function paywallCustomEventCallback(event){var url,isUserLoggedIn=CNBC_Utils.isSignedIn();p=event.params.params;CNBC_Utils.createCookie('tinypass_params',p,5/60,false);if(CNBC_Premium.globals.product==='web'){switch(event.eventName){case'learn-more':window.location.href='/application/pro?__source=pro|in-article|learn-more';break;case'sign-up-now':if(isUserLoggedIn){displayCheckout({});}else{CNBC_Surf_Mediator.init({'source':registration_source,'flow':'pro','surfConfigOverlay':'pro'});if(typeof SURF!=='undefined'){window.parent.$.proxy(window.parent.CNBC_Surf.Signin_Ui.startUIFlow,window.parent.CNBC_Surf.Signin_Ui,'register','pro')();}else{window.location.href=CNBC_Settings.baseurls.pub_base_protocol_agnostic+CNBC_Surf.outageRedirection;}};if(window.CNBC_Omniture){CNBC_Omniture.signUpBtnClickTracking({'eVar48':"registration:sign up:start:pro:"+(($('#page_franchise_premium_view').length>0)?"profranchise":"in article"),'linkTrackVars':"eVar48,prop48,events",'linkTrackEvents':'event11','events':'event11'});};ga('send','event','button','click','get it now');break;case'already-a-member':if(isUserLoggedIn){displayCheckout({});}else{CNBC_Surf_Mediator.init({'source':registration_source,'flow':'pro','surfConfigOverlay':'pro'});if(typeof SURF!=='undefined'){window.parent.$.proxy(window.parent.CNBC_Surf.Signin_Ui.startUIFlow,window.parent.CNBC_Surf.Signin_Ui,'signin','pro')();}else{window.location.href=CNBC_Settings.baseurls.pub_base_protocol_agnostic+CNBC_Surf.outageRedirection;}};if(window.CNBC_Omniture){CNBC_Omniture.signUpBtnClickTracking({'eVar48':"registration:log in:start:pro:"+(($('#page_franchise_premium_view').length>0)?"profranchise":"in article"),'linkTrackVars':"eVar48,prop48,events"});};break;}}else{switch(event.eventName){case"sign-up-now":CNBC_Omniture.signUpBtnClickTracking({'eVar48':"registration:sign up:start:pro:"+(($('#page_franchise_premium_view').length>0)?"profranchise":"in article"),'linkTrackVars':"eVar48,prop48,events",'linkTrackEvents':'event11','events':'event11'});if(typeof SURF!=='undefined'){url=window.parent.CNBC_Settings.baseurls.pub_base_protocol_agnostic+setSignUpPageUrl()+'/?registration_source='+registration_source+'&action=';url+=isUserLoggedIn?'signin':'signup';}else{url=CNBC_Settings.baseurls.pub_base_protocol_agnostic+CNBC_Surf.outageRedirection;}
window.parent.location=url;ga('send','event','button','click','get it now');break;case'already-a-member':CNBC_Omniture.signUpBtnClickTracking({'eVar48':"registration:log in:start:pro:"+(($('#page_franchise_premium_view').length>0)?"profranchise":"in article"),'linkTrackVars':"eVar48,prop48,events"});if(isUserLoggedIn){displayCheckout({});}else{if(typeof SURF!=='undefined'){url=window.parent.CNBC_Settings.baseurls.pub_base_protocol_agnostic+setSignUpPageUrl()+'/?registration_source='+registration_source+'&action=signin';}else{url=CNBC_Settings.baseurls.pub_base_protocol_agnostic+CNBC_Surf.outageRedirection;}
window.parent.location=url;};break;case'learn-more':window.location.href='/application/pro?__source=pro|in-article|learn-more';break;};};};CNBC_TinyPass.fetchTinyPassUserToken(function(){CNBC_TinyPass.init(CNBC_Premium.globals,function(){if(window.CNBC_Premium&&window.CNBC_Premium.isPremium){fetchAccessToken({callback:function(bedrockAccessTokenValue){var containerSelector='#'+CNBC_Premium.globals.containerSelector,premiumContainer=$(containerSelector);if(bedrockAccessTokenValue){if(premiumContainer.length>0){downloadArticlePremiumContent({content:'article',tokenValue:bedrockAccessTokenValue,success:renderPremiumArticleContent});if($('#article_deck .pro-video-container').length){downloadArticlePremiumContent({content:'video',tokenValue:bedrockAccessTokenValue,success:renderPremiumLargeVideo})}}else{if(CNBC_Utils.eventRegistrar){CNBC_Utils.eventRegistrar.fire('pro_article_content');}}}else{var containerSelector='#'+CNBC_Premium.globals.containerSelector,premiumContainer=$(containerSelector);if($('.premium-view').length>0)window.setTimeout(CNBC_Utils.createPersistentRightRailAd,200);if(premiumContainer.length>0){if(!SURF.globals.user){displayPaywall(null,paywallCustomEventCallback);}
else{SURF.getUserInfo({'success':function(){if(typeof SURF.globals.user._provider.xfinity!='undefined'){isXfinityUser=true;window.addEventListener("message",CNBC_Premium.receiveMessageFromTinypass,false);displayPaywall(null,paywallCustomEventCallback);}
else{displayPaywall(null,paywallCustomEventCallback);}}});}}}}});};});});};function displayCheckout(p){var closeEventHandled=false,registeredFired=false;if(!CNBC_TinyPass.tpExists()){return false;}
function displayCheckout_CallOmniture(){if(!s.manageVars){CNBC_Omniture.sManageVars();}
s.manageVars('clearVars');s.pageName="Registration|Pro|Payment Info";s.prop1="franchise";s.prop10="Registration";s.prop16="registration";s.prop31="Registration Pages";s.prop32="Pro";s.prop37="franchise";s.t();}
function checkoutConfirmation_CallOmniture(){if(!s.manageVars){CNBC_Omniture.sManageVars();}
s.manageVars('clearVars');s.pageName="Registration|Pro|Payment Confirmation";s.prop1="franchise";s.prop10="Registration";s.prop16="registration";s.prop31="Registration Pages";s.prop32="Pro";s.prop37="franchise";s.t();}
CNBC_TinyPass.fetchTinyPassUserToken(function(){CNBC_TinyPass.init(CNBC_Premium.globals,function(){displayCheckout_CallOmniture();ga('send','event','button','click','next');p=CNBC_Utils.readCookie('tinypass_params');p=JSON.parse(p);tp.offer.startCheckout(p);});});};function initMarketingPage(){console.log("marketing init");tp.push(["addHandler","checkoutCustomEvent",customEventCallback]);CNBC_Utils.logElapsedTime("init Marketing page");if(!CNBC_TinyPass.tpExists())return false;orientChangeHandler();function orientChangeHandler(){$(window).on("orientationchange",function(event){$("div#offer").css("width","100%");$("div#offer").children("iframe").css("width","100%");});}
function initMarketingPage_SurfReady(){CNBC_Utils.logElapsedTime("init Marketing page Surf Ready");CNBC_TinyPass.fetchTinyPassUserToken(function(){CNBC_TinyPass.init(CNBC_Premium.globals,function(){var isLoggedIn=CNBC_Utils.isSignedIn();if(isLoggedIn){var isUserPremium=CNBC_Utils.isUserPremium();if(isUserPremium){var docref=CNBC_Utils.urlParam('service')?window.decodeURIComponent(CNBC_Utils.urlParam('service')):CNBC_Settings.baseurls.pub_base_protocol_agnostic;window.location.href=docref;}}
if(isLoggedIn&&!isUserPremium){SURF.getUserInfo({'success':function(){if(typeof SURF!='undefined'&&typeof SURF.globals.user._provider.xfinity!='undefined'){isXfinityUser=true;window.addEventListener("message",CNBC_Premium.receiveMessageFromTinypass,false);}
else{}}});}});CNBC_Utils.logElapsedTime("Tinypass init complete");});}
function customEventCallback(event){function showSignUpWindow(event){if(typeof SURF!=='undefined'){var isUserLoggedIn=CNBC_Utils.isSignedIn();if(isUserLoggedIn){p=JSON.parse(event.params.params);tp.offer.startCheckout(p);}else{p=event.params.params;CNBC_Utils.createCookie('tinypass_params',p,1,false);if(CNBC_Premium.globals.product==='web'){if(event.eventName=='already-a-member'){window.parent.$.proxy(window.parent.CNBC_Surf.Signin_Ui.startUIFlow,window.parent.CNBC_Surf.Signin_Ui,'signin','pro')();}else{window.parent.$.proxy(window.parent.CNBC_Surf.Signin_Ui.startUIFlow,window.parent.CNBC_Surf.Signin_Ui,'register','pro')();};}else{window.parent.location.href=window.parent.CNBC_Settings.baseurls.pub_base_protocol_agnostic+setSignUpPageUrl()+'/?registration_source='+registration_source+'&action='+(event.eventName=="already-a-member"?'signin':'signup');};}}else{window.location.href=CNBC_Settings.baseurls.pub_base_protocol_agnostic+CNBC_Surf.outageRedirection;}};function signUpBtnHandler(event){if(event.eventName=='sign-up-now-top'||event.eventName=='already-a-member-top'){if(window.CNBC_Omniture){CNBC_Omniture.signUpBtnClickTracking({'eVar48':"registration:sign up:start:pro:marketing page top",'linkTrackVars':"eVar48,prop48,events",'linkTrackEvents':'event11','events':'event11'})};};if(event.eventName=='sign-up-now-bottom'||event.eventName=='already-a-member-bottom'){if(window.CNBC_Omniture){CNBC_Omniture.signUpBtnClickTracking({'eVar48':"registration:sign up:start:pro:marketing page bottom",'linkTrackVars':"eVar48,prop48,events",'linkTrackEvents':'event11','events':'event11'})};};ga('send','event','button','click','subscribe now');};signUpBtnHandler(event);showSignUpWindow(event);};if(typeof SURF!=='undefined'){SURF.event.on(SURF.events.READY,initMarketingPage_SurfReady);}else{initMarketingPage_SurfReady();}
if(CNBC_Premium.globals.product==='web'){CNBC_Surf.Signin_Ui.init();if(typeof SURF!=='undefined')CNBC_Surf.Signin_Ui.startUIFlow('load','pro');CNBC_Surf_Mediator.init({'source':registration_source,'flow':'pro','surfConfigOverlay':'pro'});}else{updateMobileWebLinks();CNBC_Surf_Mediator.init({'source':registration_source,'flow':'pro-mobile','surfConfigOverlay':'mobile_pro'});if(typeof SURF!=='undefined')CNBC_Surf_Mediator.surfInit();}
setTimeout(function(){tp.push(["init",function(){tp.experience.init()
console.log('experience init');}]);},1200);}
function initMobileAuth(){if(!CNBC_TinyPass.tpExists()){return false;};setRegSource();updateMobileWebLinks();CNBC_TinyPass.fetchTinyPassUserToken(function(){CNBC_TinyPass.init(CNBC_Premium.globals,function(){if(CNBC_Utils.isSignedIn()){var isUserPremium=CNBC_Utils.isUserPremium();if(isUserPremium){proHomePage=(CNBC_Utils.isUserPremium()&&CNBC_Utils.isLegacyPro())?proHomePage:CNBC_Settings.baseurls.pub_base_protocol_agnostic;window.location.href=proHomePage;}else{displayCheckout({});}}else{CNBC_Surf.Signin_Ui.init();if(CNBC_Surf_Mediator.checkSearchParameter('action')=='signup'){CNBC_Surf.Signin_Ui.startUIFlow('register');}else{CNBC_Surf.Signin_Ui.startUIFlow('signin');};CNBC_Surf_Mediator.init({'mobile':true,'source':registration_source,'flow':'pro-mobile','surfConfigOverlay':'mobile_pro'});};});});};function initAccountBilling(){if(!!CNBC_TinyPass.tpExists()){var container=$('#tp-my-account'),errorArea=container.parent();}else{return false;}
CNBC_TinyPass.fetchTinyPassUserToken(function(){var failureScenarioFlag=localStorage.getItem('1257');if(failureScenarioFlag){tp.userRef='';}
if(tp.userRef){CNBC_TinyPass.init(CNBC_Premium.globals,function(){if(!container.length){return false;}
tp.api.callApi("/access/check",{rid:"PRO"},function(response){if(!response.access.granted){}
tp.myaccount.show({display_mode:"inline",containerSelector:"#tp-my-account"});});});}else{var errorMsg='<div class="error-msg">The Account Management feature is not available at this time.<br>'+'Please contact Customer Care at (877) 280-4548 to retrieve or <br>'+'update your account settings or try again later.</div>';errorArea.html(errorMsg);}});}
function initNewsLetter(){if(messageTransporter===null&&SURF.globals.session){messageTransporter=CNBC_Iframe.createMessageTransporter();var name='etPreferenceCenter',isProd=(CNBC_Settings.baseurls.cnbc_base.indexOf('www.cnbc.com')>-1),src,userType=function(){return CNBC_Utils.isUserPremium()?'pro':'nonpro';}(),config={src:'https://pages.'+(isProd?'response.cnbc.com/profile-center-dot-com/':'S7.exacttarget.com/profile-center-test/'),name:name,onload:function(){},container:'#tp-my-newsletter',transporter:messageTransporter,greeting:'userType:'+userType,},token=SURF.globals.session.session_token,uid=SURF.globals.session.uid,pid='153',api=CNBC_Settings.baseurls.register_base+'/auth/api/'+pid+'/payload?';builder=CNBC_Iframe.createIframe(config),service={url:api+'token='+token+'&uid='+uid,type:'jsonp',jsonpCallback:'jsonp_callback'};builder(service,function(data){var param={'src':null};if(data.payload_token&&typeof data.payload_token==='string'){src=param.src=config.src+'?guid='+data.payload_token;}
return param;},function(){},function(){var origin=isProd?'https://pages.response.cnbc.com':'https://pages.s7.exacttarget.com',action=function(msg){console.log(msg);var msgs=decodeMessage(msg),iframe=$('#'+config.name+'Frame');if(msgs.height)iframe.height(msgs.height+'px');if(msgs.refresh)iframe.attr('src',src);if(msgs.subscribe)window.location.href='/application/pro?__source=pro|newsletter|accountmanagement';if(msgs.submit){CNBC_Omniture.genericClickTracking({'link':{'pe':'lnk_o','pev2':'Newsletter Account Management'},'eVars':{'43':'AccountManagement'}})}
iframe.css('visibility','visible');};messageTransporter.init(origin,'secure',action);});function decodeMessage(msg){var config={},tokens=msg.split(',');for(var t in tokens){var prop=tokens[t],pair=prop.split(':');if(pair.length>0)config[pair[0]]=pair[1];}
return config;}}}
function initProTour(tag){if(tag==='TEST'&&proInterstitialCarousel){$('#pro-tour').trigger('click');return'PRO tour interstitial called successfully';}
var interstitial="<div id='pro-tour-body'></div>",testBlock="<div id='pro-tour-blank'></div>",popupCloseButton="<div class='cnbc-popup-close-btn'>Ã</div>",popupLightBox="<div class='cnbc-popup-lightbox'>"+
popupCloseButton+
testBlock+
interstitial+"</div>",popupBackground="<div class='cnbc-popup-background' id='pro-take-tour'>"+
popupLightBox+"</div>",logo_url='cnbc-pro-logo-lockup-large',contentId='99',sliding=800,duration=600,container='pro-tour-container',tutorialCompleted=false,numOfSlides=6,staticContentURL='https:'+CNBC_Settings.baseurls.sc_base_protocol_agnostic+'/applications/cnbc.com/staticcontent/img/tinyPass/',contentReady=false,popupEventConfig={interstitial_page_0:{eventConfig:function(){$('#pro-tour-left-arrow').css('visibility','hidden');$('#pro-tour-right-arrow').css('visibility','visible');}},interstitial_page_1:{eventConfig:function(){$('#pro-tour-left-arrow').css('visibility','visible');$('#pro-tour-right-arrow').css('visibility','visible');}},interstitial_page_5:{eventConfig:function(){$('#pro-tour-left-arrow').css('visibility','visible');$('#pro-tour-right-arrow').css('visibility','hidden');if(!tutorialCompleted){takeTour_CallOmniture('Complete');tutorialCompleted=true;}}},interstitial_default:{eventConfig:function(){$('#pro-tour-left-arrow').css('visibility','visible');$('#pro-tour-right-arrow').css('visibility','visible');}}},carouselConfig={itemsPerPage:1,itemsPerTransition:1,noOfItems:6,speed:1000,swipable:true,nextPrevLinks:true,container:'pro-tour-image-container',leftArrow:"#pro-tour-left-arrow",rightArrow:"#pro-tour-right-arrow",anchorList:"pro-tour-anchors",anchorConfig:{"active":{background:"#2077b6"},"deactive":{background:"#ccd6d8"}},callback:function(index){configInterstitialEvent(popupEventConfig,index);}};proInterstitialCarousel=new CNBC_Carousel3();function configInterstitialEvent(pageConfig,index){if(pageConfig['interstitial_page_'+index]){var eventConfig=pageConfig['interstitial_page_'+index].eventConfig;}else{var eventConfig=pageConfig.interstitial_default.eventConfig;}
if(eventConfig)eventConfig();}
function takeTour_CallOmniture(state){var pageName="Registration|Pro|Registration Tutorial "+state;CNBC_Omniture.genericClickTracking({'pageName':pageName,'props':{'1':"franchise",'10':"Registration",'16':"registration",'31':"Registration Pages",'32':"Pro",'37':"Franchise"}});}
function lazyLoadInterstitialContent(fn){if(!contentReady){$('#pro-tour-body').load(CNBC_Settings.baseurls.cnbc_base_secure+'/id/'+contentId,function(){if(isMobile&&window.innerWidth<=850){$('#'+container).addClass('.pro-tour-mobile');$('#pro-tour-image-list-container li').each(function(i,el){$(el).css('width',window.innerWidth*0.9+'px');if(i)$(el).find('img').attr('src',staticContentURL+'welcome-'+i+'-mobile.png');});$('#pro-tour-image-list-container').css('width',window.innerWidth*0.9*numOfSlides+'px');}else{$('#'+container).addClass('.pro-tour-web');$('#pro-tour-image-list-container li img.slide-image').each(function(i,el){$(el).width(530);$(el).attr('src',staticContentURL+'welcome-'+(i+1)+'.jpg');})}
if(isFireFox){$('#pro-take-tour .cnbc-popup-lightbox').css('min-height',680);$('#pro-tour-container .pro-tour-image-mask-wrapper').css('top','-350px');$('#pro-tour-container .pro-tour-close-container').css('top','-100px');$('#pro-tour-section-container').css('top','0px');}
$('#pro-tour-left-arrow img').attr('src',staticContentURL+'left-arrow-dark.png').hover(function(){$(this).attr('src',staticContentURL+'left-arrow-light.png')},function(){$(this).attr('src',staticContentURL+'left-arrow-dark.png');});$('#pro-tour-right-arrow img').attr('src',staticContentURL+'right-arrow-dark.png').hover(function(){$(this).attr('src',staticContentURL+'right-arrow-light.png');},function(){$(this).attr('src',staticContentURL+'right-arrow-dark.png');});$('.pro-tour-section.pro-tour-logo img').attr('src',staticContentURL+logo_url+'.png');$('#pro-tour-close-button').attr('href',CNBC_Settings.baseurls.cnbc_base_secure+'/application/pro/?__source=pro|top-nav|tour&tpcc=NavigationTour');configInterstitialEvent(popupEventConfig,0);proInterstitialCarousel.init(carouselConfig);if(typeof fn==='function')fn();contentReady=true;});}else{if(typeof fn==='function')fn();}}
$('body').append(popupBackground);$('#pro-tour, .proTour').on('click',function(e){e.preventDefault();lazyLoadInterstitialContent(function(){takeTour_CallOmniture('Start');$('#pro-take-tour').css('display','block');$('#pro-take-tour .cnbc-popup-lightbox').animate({top:"+="+sliding},duration,'swing',function(){});})})
$('#pro-take-tour .cnbc-popup-close-btn').on('click',function(){tutorialCompleted=false;$('#pro-take-tour .cnbc-popup-lightbox').animate({top:"-="+sliding},duration,'swing',function(){$('#pro-take-tour').css('display','none');});})
if(window.location.hash=='#pro-tour'){setTimeout(function(){$('#pro-tour').trigger('click');},500);return'PRO tour interstitial called successfully';}}
function initPortfolioWidget(widget,config,state){var container=$('#portfolio-widget'),tabs=container.filter('.portfolio-tab'),types=config.type?config.type.split(','):['squawkbox','fastmoney'],sources=['api','db'],numOfCards=config.numOfCards||3,refresh=config.refresh||60000,promise=widget.request(state,4,config.tracking);if(widget.isReady){for(var t in types){for(var s in sources){promise.register(types[t]+','+sources[s]);}}
promise.recursiveLoad(function(){console.log('widget data is ready');this.sortData(types,'pct').inject(types,container);$('.portfolio-overlay',container).css('display','none');$('.portfolio-tabs-content',container).css('display','block');}.bind(promise));}
if(config.refresh>0){setTimeout(function(){for(var t in types){promise.done(function(msg){if(msg==='ready'){promise.sortData(types,'pct').inject(types,container);}})}},config.refresh);}}
function initVideoChaptering(style){var $containers=$('.pro-video-chapters'),styles=[],handlerState=null;function checkPtToSec(pt){var sec=0;if(typeof pt==='string'){var tokens=pt.split(':');if(tokens.length==2){sec=parseInt(tokens[0]*60)+parseInt(tokens[1]);}}
return sec;}
function hasClass(arr,$el){for(var i=0;i<arr.length;i++){if($el.hasClass(arr[i])){return true;}}
return false;}
function attachStyleEventHandler($el){var $chapters=$('ul li',$el);if($el.hasClass('expand')){$chapters.each(function(i,$c){});}else if($el.hasClass('fall')){var $handler=$('.handler',$el),$content=$('ul',$el),$tag=$('.tag','.handler'),$icon=$('i','.handler');if($chapters.length>0){$handler.css('display','block');}
$handler.on('click',function(){if(handlerState==='off'){$content.slideDown(500,function(){$tag.text('hide chapters');$icon.removeClass('fa-chevron-down');$icon.addClass('fa-chevron-up');handlerState="on";});}else if(handlerState==='on'){$content.slideUp(500,function(){$tag.text('show chapters');$icon.removeClass('fa-chevron-up');$icon.addClass('fa-chevron-down');handlerState="off";});}})
setTimeout(function(){$content.slideDown(500,function(){setTimeout(function(){$content.slideUp(500,function(){handlerState="off";})
handlerState="on";},5000);});},2000);}}
function attachChapterClickHandler($el){$chapters=$('ul li',$el);$chapters.each(function(i,c){var $checkpt=$('.checkpt',$(c)),checkpt=$checkpt.text(),checkptInSec=checkPtToSec(checkpt)*1000;$(c).on('click',function(){console.log(checkptInSec);$pdk.controller.seekToPosition(checkptInSec);CNBC_Omniture.genericClickTracking({'link':{'pe':'lnk_o','pev2':'Video Chapter','trkNav':'videochapter:right:'+i+':'+$($el).attr('trkId')}});})});}
if(typeof style==='string'){styles.push(style);}else if(CNBC_Common.isArray(style)){styles=styles.concat(style);}
$containers.each(function(i,c){var $c=$(c);if(!hasClass(styles,$c)){attachStyleEventHandler($c);attachChapterClickHandler($c);}})}
function receiveMessageFromTinypass(event)
{if($("#offer iframe").length==1)
$("#offer iframe")[0].contentWindow.postMessage("User is xfinity","*");else
$("#articlePayload iframe")[0].contentWindow.postMessage("User is xfinity","*");}
var result={'init':init,'displayCheckout':displayCheckout,'initMarketingPage':initMarketingPage,'initMobileAuth':initMobileAuth,'initAccountBilling':initAccountBilling,'initNewsLetter':initNewsLetter,'fetchAccessToken':fetchAccessToken,'fetchVideoToken':fetchVideoToken,'initProTour':initProTour,'updatePremiumStatus':updatePremiumStatus,'isReady':isReady,'initPortfolioWidget':initPortfolioWidget,'initVideoChaptering':initVideoChaptering,'receiveMessageFromTinypass':receiveMessageFromTinypass};return $.extend(result,window.CNBC_Premium);}();
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/omniture/CNBC_Omniture.js */

var CNBC_Omniture={'sManageVars':function(){s.manageVars=new Function("c","l","f",""
+"var s=this,vl,la,vla;l=l?l:'';f=f?f:1;if(!s[c])return false;vl='pag"
+"eName,purchaseID,channel,server,pageType,campaign,state,zip,events,"
+"products,transactionID';for(var n=1;n<76;n++)vl+=',prop'+n+',eVar'+"
+"n;for(n=1;n<6;n++)vl+=',hier'+n;for(n=1;n<4;n++)vl+=',list'+n;for(n"
+" in s.contextData)vl+=',contextData.'+n;if(l&&(f==1||f==2)){if(f==1"
+")vl=l.replace('[\\'','.').replace('\\']','');if(f==2){la=l.split(',"
+"');vla=vl.split(',');vl='';for(x in la){if(la[x].indexOf('contextDa"
+"ta')>-1){lax=la[x].split('\\'');la[x]='contextData.'+lax[1];}for(y "
+"in vla){if(la[x]==vla[y]){vla[y]='';}}}for(y in vla){vl+=vla[y]?','"
+"+vla[y]:'';}}s.pt(vl,',',c,0);return true;}else if(l==''&&f==1){s.p"
+"t(vl,',',c,0);return true;}else return false;");s.clearVars=new Function("t",""+"var s=this;if(t.indexOf('contextData')==-1)s[t]='';else if(t.indexO"
+"f('contextData')>-1){var c=t.substring(t.indexOf('.')+1);s.contextD"+"ata[c]='';}");s.lowercaseVars=new Function("t",""+"var s=this;if(t!='events'&&t.indexOf('contextData')==-1&&s[t]){s[t]"
+"=s[t].toString();if(s[t].indexOf('D=')!=0){s[t]=s[t].toLowerCase();"
+"}}else if(t.indexOf('contextData')>-1){var c=t.substring(t.indexOf("
+"'.')+1);if(s.contextData[c]){s.contextData[c]=s.contextData[c].toSt"
+"ring();s.contextData[c]=s.contextData[c].toLowerCase();}}");s.pt=new Function("x","d","f","a",""+"var s=this,t=x,z=0,y,r;while(t){y=t.indexOf(d);y=y<0?t.length:y;t=t"
+".substring(0,y);r=s[f](t,a);if(r)return r;z+=y+d.length;t=x.substri"
+"ng(z,x.length);t=z<x.length?t:''}return'';");},'setUserMemeberStatus':function(o){if(typeof window.bedrockTrkCookie!='function'){return false;}
function getAppAccess(v){return(typeof v=='string')?v:v.join();}
var actions={'signin':'logged-in','signout':'logged-out','ready':'logged-in'};var str='';if(o){var memeberId=(o.user&&o.user._provider&&o.user._provider.cnbc)?o.user._provider.cnbc:'';var appAccess=(o.user&&o.user.brand_data&&o.user.brand_data.app_access)?'|registered:'
+getAppAccess(o.user.brand_data.app_access):'|registered:free';str=(memeberId)?memeberId+appAccess+'|'+actions[o.action]:'';}
bedrockTrkCookie(str);},'signUpBtnClickTracking':function(o){if(typeof s!='undefined'){if(!s.manageVars){this.sManageVars();}
s.linkTrackVars=o.linkTrackVars;s.linkTrackEvents=o.linkTrackEvents;s.eVar48=o.eVar48;s.prop48=o.eVar48;s.events=o.events;s.tl(true,'o','Registration Module',null,'navigate');s.manageVars("clearVars");}},'genericClickTracking':function(o,i){if(o){if(typeof(window.s)!='undefined'){var collection=[];if(!s.manageVars){CNBC_Omniture.sManageVars();}
if(s.manageVars)s.manageVars('clearVars');if(o.pageName)
s.pageName=o.pageName;if(o.props){var props=Object.keys(o.props);for(var i=0;i<props.length;i++){if(o.props[props[i]]&&typeof o.props[props[i]]==='string'){s['prop'+props[i]]=o.props[props[i]];collection.push('prop'+props[i]);}}}
if(o.eVars){var eVars=Object.keys(o.eVars);for(var i=0;i<eVars.length;i++){if(o.eVars[eVars[i]]&&typeof o.eVars[eVars[i]]==='string'){s['eVar'+eVars[i]]=o.eVars[eVars[i]];collection.push('eVar'+eVars[i]);}}}
if(o.params){var params=Object.keys(o.params);for(var i=0;i<params.length;i++){if(o.params[params[i]]&&typeof o.params[params[i]]==='string'){s[params[i]]=o.params[params[i]];}}}
if(o.cnbc){var cnbcIterator=(function(contextData,collection,key){if(this[key]&&typeof(this[key])==='string'||typeof(this[key])==='number'){contextData['cnbc.'+key]=this[key];collection.push('contextData.cnbc.'+key);}}).bind(o.cnbc,s.contextData,collection);Object.keys(o.cnbc).forEach(cnbcIterator);}
if(o['link']){for(var prop in o['link']){if(prop==='trkNav'){s.prop48=s.eVar48=s.contextData['cnbc.trknav']=o['link'].trkNav;collection.push('contextData.cnbc.trknav');if(!$.inArray('eVar48',collection))
collection.push('eVar48');if(!$.inArray('prop48',collection))
collection.push('prop48');}else if(prop==='slide'){s.prop48=s.eVar48=s.contextData['cnbc.slide']=o['link'].slide;collection.push('contextData.cnbc.slide');}else if(prop==='events'&&typeof o['link'].events=='array'&&o.events.length){s.linkTrackEvents=o.events.join(',');}else{var p=o['link'][prop];s[prop]=p;}}
if(collection.length)
s.linkTrackVars=collection.join(',');s.tl(this,'o',o['link'].pev2,null,'navigate');}else if(o['cookie']){var attr=o['cookie'];if(attr['linktrk']){s.Util.cookieWrite('linktrk',attr['linktrk'],0);}}else{s.t();}
if(s.manageVars)s.manageVars('clearVars');}else{console.log('reboot omniture click tracking...');var self=this,i=i||0;if(i<5){setTimeout(function(){i++;self.genericClickTracking(o,i);},500);}else{console.warn("can't make omiture call: s object is not found");}}}}};
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/libraries/Common/cnbc.base.js */
;(function(jQuery,undefined){window.cnbc=window.cnbc||{};cnbc.config=cnbc.config||{};cnbc.jq=jQuery;cnbc.object=function(){};cnbc.object.prototype.log=function(message,trace){console.log(message);if(typeof trace=="Boolean"&&trace===true){console.trace();}};cnbc.uuid=function(){return'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c=='x'?r:(r&0x3|0x8);return v.toString(16);});};cnbc.track={stl:function(tlArgs,config){try{if(typeof config=="object"&&typeof window.s=="object"){var keys=Object.keys(config);for(iii in keys){window.s[keys[iii]]=config[keys[iii]];}
window.s.tl.apply(window,tlArgs);if(typeof window.s.manageVars!="function"){CNBC_Omniture.sManageVars();}
window.s.manageVars("clearVars");}}catch(e){}},portfolio:function(context){var config={"linkTrackVars":"contextData.cnbc.trknav","contextData":{"cnbc.trknav":context}};var tlArgs=[true,'o','Model Portfolio',null,'navigate'];this.stl(tlArgs,config);},homepage:function(context){var config={"linkTrackVars":"contextData.cnbc.trknav","contextData":{"cnbc.trknav":context}};var tlArgs=[true,'o','Home Page',null,'navigate'];this.stl(tlArgs,config);}};cnbc.utils={};cnbc.utils.amendMenu=function(){if(CNBC_Utils.isLegacyPro()&&cnbc.config.menuAmendments!=undefined){for(iii in cnbc.config.menuAmendments){var tmp="";for(jjj in cnbc.config.menuAmendments[iii]){tmp+="<li><a href=\""+cnbc.config.menuAmendments[iii][jjj].url+"\">"+cnbc.config.menuAmendments[iii][jjj].label+"</a></li>";}
$("#featured-menu-container ."+iii+" ul").append(tmp);$(".more-container .more-"+iii+" ul.more").append(tmp);}}
if(CNBC_Utils.isPremium()){var mb=null;cnbc.jq("#nav .more-pro.more li a:contains('Live TV'), #featured-menu-container .live-tv a, #featured-menu-container .watch-cnbc-pro a").on('click',function(e){if(cnbc.config.isWeekendMode){e.preventDefault();if(!mb){mb=new cnbc.messageBox({"initCallback":"weekendMode"});}
mb.show();}else{CNBC_Utils.createCookie('home_view_pref','watch-live',10*365*24);}});cnbc.jq("#featured-menu-container .pro li.subscribe , #nav .more-pro.more li.subscribe").remove();}};})(jQuery);
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/libraries/tabs/tab.1.js */

function CNBC_Tab(){};(function($){CNBC_Tab.prototype._container=null;CNBC_Tab.prototype._callback=null;CNBC_Tab.prototype._tabIndex=1;CNBC_Tab.prototype.$tabContainer=null;CNBC_Tab.prototype._tabPrefix='tab_';CNBC_Tab.selectedTabClass='selected';CNBC_Tab.prototype.initiateSwipeOnTabs=false;CNBC_Tab.prototype.init=function(args){var thisObj=this;var args=args||{};if(args.container!=null){thisObj.setContainer(args.container);thisObj.setOptionalOverrides(args);thisObj.initElements();thisObj.showDefaultTab();thisObj.initEvents();}
else{CNBC_Common.ConsoleLog('Missing Arguments in Tab Library...');}};CNBC_Tab.prototype.setOptionalOverrides=function(args){var thisObj=this;if(args.tabIndex){thisObj._tabIndex=args.tabIndex;}
if(args.callback){thisObj.setCallback(args.callback,args.context);}
if(args.tabPrefix){thisObj._tabPrefix=args.tabPrefix;}};CNBC_Tab.prototype.setCallback=function(callback,context){var thisObj=this;if(context){thisObj._context=context;};thisObj._callback=eval(callback);};CNBC_Tab.prototype.setContainer=function(container){var thisObj=this;var type=typeof container;var container;if(type=='string'){container=$('#'+container);}else if(type=='object'&&container.length==1){container=container;}else{container=$(container);}
thisObj._container=container;};CNBC_Tab.prototype.showDefaultTab=function(){var thisObj=this;if(thisObj._tabIndex){var sizeTabs=thisObj.$tabs.children().length;if(thisObj._tabIndex>sizeTabs){thisObj._tabIndex=1;}
thisObj.toggleTab($('ul >:eq('+(thisObj._tabIndex-1)+')',thisObj._container));}
else{thisObj.$tabs.removeClass(CNBC_Tab.selectedTabClass);}};CNBC_Tab.prototype.initEvents=function(){var thisObj=this;thisObj.$tabs.on('click',function(){thisObj.toggleTab($(this));if(thisObj._callback){thisObj._callback.call(thisObj._context);}
return false;});};CNBC_Tab.prototype.getMaxWidthOfTabs=function(){var thisObj=this;var maxTabWidth=0;thisObj.$tabs.each(function(){maxTabWidth+=$(this).outerWidth(true);});return maxTabWidth+10;};CNBC_Tab.prototype.initElements=function(){var thisObj=this;thisObj.$tabUL=$('>ul:eq(0)',thisObj._container);thisObj.$tabs=$('> li',thisObj.$tabUL);thisObj.$tabContainer=$('>ul:eq(1)',thisObj._container);thisObj.$listContents=$('> li',thisObj.$tabContainer);};CNBC_Tab.prototype.toggleTab=function($el){var thisObj=this;var $selectedTab=$('>:eq('+$el.index()+')',thisObj.$tabContainer);thisObj.$listContents=$('> li',thisObj.$tabContainer);$el.siblings().removeClass(CNBC_Tab.selectedTabClass);$el.addClass(CNBC_Tab.selectedTabClass);thisObj.$listContents.removeClass('show');if($selectedTab!=undefined&&$selectedTab!=null&&$selectedTab){$selectedTab.addClass('show');}};})(jQuery);
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/libraries/PopUp/cnbc-popup.js */

function CNBC_Popup(){}
CNBC_Popup.prototype.config={};CNBC_Popup.prototype.defaultConfig={closeOnBackgroudClick:false};CNBC_Popup.prototype.overlayBackground=null;CNBC_Popup.prototype.closeButton=null;CNBC_Popup.prototype.lightbox=null;CNBC_Popup.prototype.innerLink=null;CNBC_Popup.prototype.visible=false;CNBC_Popup.prototype.closePopup=function(){this.overlayBackground.fadeOut("normal");this.visible=false;};CNBC_Popup.prototype.init=function(options){var closePopupProxy;closePopupProxy=$.proxy(this.closePopup,this);this.config=$.extend({},this.defaultConfig,options);this.lightbox=$('#cnbc-popup-lightbox');this.closeButton=$('#cnbc-popup-close-btn');this.overlayBackground=$('#cnbc-popup-background');this.innerLink=$('#cnbc-popup-inner-link');this.closeButton.click(closePopupProxy);this.innerLink.click(function(){window.location.href="/";});this.lightbox.click(function(){return false;});if(this.config.closeOnBackgroudClick){this.overlayBackground.click(closePopupProxy);}};CNBC_Popup.prototype.alignPopup=function(){var bgHeight,lbHeight,marginTop;if(!this.visible){return;}
if(this.config.top){this.lightbox.css('margin-top',config.top);}else{bgHeight=this.overlayBackground.css('height');bgHeight=parseInt(bgHeight);lbHeight=this.lightbox.css('height');lbHeight=parseInt(lbHeight);marginTop=Math.floor((bgHeight-lbHeight)/2);this.lightbox.css('margin-top',marginTop+'px');}}
CNBC_Popup.prototype.windowResize=function(){this.alignPopup();}
CNBC_Popup.prototype.execute=function(){this.overlayBackground.fadeIn(1);this.visible=true;this.alignPopup();$(window).resize($.proxy(this.windowResize,this));};
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/libraries/PopUp/cnbc-popup.2.js */

function CNBC_Popup2(){}
CNBC_Popup2.prototype.config={};CNBC_Popup2.prototype.defaultConfig={closeOnBackgroudClick:false,popupId:'',popupContent:'',initCallback:null,autoAlignPopup:true,autoHide:true};CNBC_Popup2.prototype.domStr='<div class="cnbc-popup-background" id="<popupId>">'+'<div class="cnbc-popup-lightbox">'+'<a class="cnbc-popup-close-btn">&times;</a>'+'<popupContent>'+'</div>'+'</div>';CNBC_Popup2.prototype.overlayBackground=null;CNBC_Popup2.prototype.closeButton=null;CNBC_Popup2.prototype.lightbox=null;CNBC_Popup2.prototype.visible=false;CNBC_Popup2.prototype.autoHideHandler=function(){if(!this.visible){return;}
if(this.config.beforeCloseCallback){this.config.beforeCloseCallback();}
if(this.config.autoHide){this.hide();if(this.config.afterCloseCallback){this.config.afterCloseCallback();}}};CNBC_Popup2.prototype.hide=function(){if(!this.visible){return;}
this.overlayBackground.fadeOut("normal");this.visible=false;};CNBC_Popup2.prototype.init=function(options){var hideProxy,popupDomStr;this.config=$.extend({},this.defaultConfig,options);popupDomStr=this.domStr.replace("<popupId>",this.config.popupId);if(typeof this.config.popupContent=="object"){popupDomStr=popupDomStr.replace("<popupContent>",'');popupDomStr=$(popupDomStr);popupDomStr.find('.cnbc-popup-lightbox').append(this.config.popupContent);}else{popupDomStr=popupDomStr.replace("<popupContent>",this.config.popupContent);}
$('body').append(popupDomStr);this.overlayBackground=$('#'+this.config.popupId);this.lightbox=this.overlayBackground.find('.cnbc-popup-lightbox');this.closeButton=this.overlayBackground.find('.cnbc-popup-close-btn');hideProxy=$.proxy(this.autoHideHandler,this);this.closeButton.click(hideProxy);this.lightbox.click(function(event){event.stopPropagation();});if(this.config.minHeight){this.lightbox.css('min-height',this.config.minHeight);}
if(this.config.minWidth){this.lightbox.css('min-width',this.config.minWidth);}
if(this.config.width){this.lightbox.css('width',this.config.width);}
if(this.config.closeOnBackgroudClick){this.overlayBackground.click(hideProxy);}
if(this.config.initCallback){this.config.initCallback();}};CNBC_Popup2.prototype.alignPopup=function(){var bgHeight,lbHeight,marginTop;if(!this.visible||!this.config.autoAlignPopup){return;}
if(this.config.top){this.lightbox.css('margin-top',this.config.top);}else{bgHeight=this.overlayBackground.css('height');bgHeight=parseInt(bgHeight);lbHeight=this.lightbox.css('height');lbHeight=parseInt(lbHeight);marginTop=Math.floor((bgHeight-lbHeight)/2);this.lightbox.css('margin-top',marginTop+'px');}};CNBC_Popup2.prototype.windowResize=function(){this.alignPopup();};CNBC_Popup2.prototype.loaderImg=function(show){if(show){this.lightbox.addClass('loader');}else{this.lightbox.removeClass('loader');}};CNBC_Popup2.prototype.show=function(){this.overlayBackground.fadeIn(1);this.visible=true;this.alignPopup();$(window).resize($.proxy(this.windowResize,this));};
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/libraries/PopUp/cnbc-popup.3.js */

CNBC_Popup3=function(){var visible=false;var overlayBackground;var lightbox;var xButton;var config;var popupContentDiv;var defaultConfig={beforeCloseCallback:null,afterCloseCallback:null,beforeShowCallback:null,afterShowCallback:null,onSubmitCallback:null,closeOnBackgroudClick:false,minHeight:'',minWidth:'',width:'',autoAlignPopup:true,top:'',loaderImgVisible:false,xButtonVisible:true};var popupDomStr='<div id="cnbc-popup3-background">'+'<div id="cnbc-popup3-lightbox">'+'<a id="cnbc-popup3-xButton" class="cnbc-popup-close-btn popup-close">&times;</a>'+'<div id="cnbc-popup3-content"></div>'+'</div>'+'</div>';function hide(){if(!visible){return false;}
if(config.beforeCloseCallback){if(!config.beforeCloseCallback(overlayBackground)){return false;}}
overlayBackground.fadeOut("normal");visible=false;if(config.afterCloseCallback){return config.afterCloseCallback(overlayBackground);}
return true;}
function submit(){if(config.onSubmitCallback){config.onSubmitCallback(overlayBackground);}}
function updateContent(content){popupContentDiv.html(content);}
function show(options){config=$.extend({},defaultConfig,options);if(!overlayBackground){overlayBackground=$(popupDomStr);$('body').append(overlayBackground);lightbox=overlayBackground.find('#cnbc-popup3-lightbox');xButton=lightbox.find('#cnbc-popup3-xButton');popupContentDiv=lightbox.find('#cnbc-popup3-content');xButton.css('display',config.xButtonVisible?'inline':'none');lightbox.click(function(event){try{if(event.target.classList.contains('popup-close')){hide();}else if(event.target.classList.contains('popup-submit')){submit();}}finally{event.stopPropagation();}});overlayBackground.click(function(){if(config.closeOnBackgroudClick){hide();}});$(window).resize(alignPopup);}
if(config.minHeight){lightbox.css('min-height',config.minHeight);}
if(config.minWidth){lightbox.css('min-width',config.minWidth);}
if(config.width){lightbox.css('width',config.width);}
if(config.beforeShowCallback){config.beforeShowCallback(overlayBackground);}
popupContentDiv.html(config.popupContent);showLoaderImg(config.loaderImgVisible);overlayBackground.fadeIn(1);visible=true;alignPopup();if(config.afterShowCallback){config.afterShowCallback(overlayBackground);}}
function alignPopup(){var bgHeight,lbHeight,marginTop;if(!visible||!config.autoAlignPopup){return;}
if(config.top){lightbox.css('margin-top',config.top);}else{bgHeight=overlayBackground.css('height');bgHeight=parseInt(bgHeight);lbHeight=lightbox.css('height');lbHeight=parseInt(lbHeight);marginTop=Math.floor((bgHeight-lbHeight)/2);lightbox.css('margin-top',marginTop+'px');}}
function showLoaderImg(show){if(show){lightbox.addClass('loader');}else{lightbox.removeClass('loader');}}
return{'show':show,'hide':hide,'showLoaderImg':showLoaderImg,'updateContent':updateContent};}();
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/libraries/International/internationlization.3.js */

var CNBC_Regional={};(function($){CNBC_Regional._config={"USA":{"edition":"USA","nid":"100746233","link":"/","name":"U.S. Edition","msgName":"U.S.","mobileMsgName":"U.S.","mobileAlternate":"WORLD","menuName":"U.S."},"WORLD":{"edition":"WORLD","nid":"100746255","link":"/id/100746255","name":"INTL Edition","msgName":"new international","mobileMsgName":"International","mobileAlternate":"USA","menuName":"INTL"}};CNBC_Regional._defaultEdition='USA';CNBC_Regional._cnbcBaseURL='';CNBC_Regional._region=CNBC_Utils.getQueryStringParamValue('region');CNBC_Regional._cookieName='region';CNBC_Regional._radioHome=[];CNBC_Regional._navAHome='HOME ';CNBC_Regional.init=function(args){args=args||{};this.$_linksContainer=$('ul.home-geo-container');this.$_linksContainerHome=$('.home-geo-container');this.$_msgContainer=$('#regions-msg-container');this.$_msgContainerHome=$('.site-set');this.$_navHome=$('.site-set .homeLabel');this._config=args.config||this._config;this._nid=args.nid||'100746233';this._defaultEdition=args.defaultEdition||this._defaultEdition;var edition=null;var navHomeLength=this.$_linksContainerHome.length;for(var i=0;i<navHomeLength;i++){CNBC_Regional._radioHome.push('<li data-edition="$edition$" $checked$>$name$</li>');};var geoCookie=CNBC_Utils.readCookie('geo_cookie');if(geoCookie){CNBC_Utils.deleteData('geo_cookie');}
var cookieEdition=CNBC_Utils.readCookie(this._cookieName);this._cnbcBaseURL=args.cnbc_base_url||this._cnbcBaseURL;if(cookieEdition==null||cookieEdition==''){edition=this.prepareEditionForRegion();}else{if(CNBC_Regional._nid=="100746233"){edition="USA";}else if(CNBC_Regional._nid=="100746255"){edition="WORLD";}else{edition=cookieEdition;}}
if(this._config[edition]['navAHome']!==undefined){this._navAHome=this._config[edition]['navAHome']+' ';}
this.renderHome(edition);this.attachEventsHome(edition);};CNBC_Regional._getEdition=function(){var edition=null;var cookieEdition=CNBC_Utils.readCookie(this._cookieName);if(cookieEdition==null||cookieEdition==''){edition=this.prepareEditionForRegion();}else{edition=cookieEdition;}
return edition;}
CNBC_Regional.getHomepageUrl=function(){var edition=this._getEdition();var homeurl=this._config[edition].link;return homeurl}
CNBC_Regional.prepareEditionForRegion=function(){var edition=null;var nodeEdition=this.getEditionForNode(this._nid);if(nodeEdition!=this._defaultEdition){edition=this.getEditionForRegion(nodeEdition);}else{edition=nodeEdition;}
return edition;};CNBC_Regional.getEditionForNode=function(nid){nid=nid||this._nid;var edition=null;$.each(this._config,function(index,el){if(nid==el.nid){edition=index;}});return edition;};CNBC_Regional.getEditionForRegion=function(region){var region=region||this._region;var edition=null;if(region){var editionConfig=this._config[region.toUpperCase()];if(editionConfig){edition=editionConfig.edition;}}
else{edition=this._defaultEdition;}
return edition;};CNBC_Regional.renderHome=function(edition){var $this=this;var homeHtnl={};if(edition==null){edition=this._defaultEdition;}
$.each(this._config,function(index,el){if(index==edition){el['checked']='class="defaultEdition"';}else{el['checked']='';}
for(var i=0;i<$this._radioHome.length;i++){homeHtnl[i]=homeHtnl[i]||'';homeHtnl[i]+=($this.processHTML($this._radioHome[i],el));};});this.$_navHome.html(this._navAHome+this._config[edition]['menuName']);this.$_linksContainerHome.each(function(i,e){$(e).append(homeHtnl[i]);});};CNBC_Regional.attachEventsHome=function(ed){var $this=this;$('li',this.$_linksContainer).click(function(clickEvent){var edition=$(this).attr('data-edition'),current_region_cookie=CNBC_Utils.readCookie('region');if(edition!=ed){if(current_region_cookie=='WORLD'){window.location.href=$this._cnbcBaseURL+$this._config[edition]['link']+'?region='+edition.toLowerCase();}else{window.location.href=$this._cnbcBaseURL+$this._config[edition]['link'];}}});};CNBC_Regional.processHTML=function(text,obj){$.each(obj,function(index,el){var key='$'+index+'$';text=text.replace(key,el);});return text;};})(jQuery);
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/libraries/Header/Navigation.1.js */

CNBC_Navigation=function(){};(function($){CNBC_Navigation.prototype.init=function(selector){var that=this;this._container=$(selector);if(window['innerWidth']<993){this._container.removeClass('mw-show');};resizeConatiner.call(this);$('#quotesearch').on('click',function(){$('.main-header').addClass('mobile-lookup');$('.symbol-search .input-container input').focus();if($(selector).hasClass('mw-show')){that.toggleMenu.apply(that);}});$('.go-up.sub-nav-menu a').on('click',function(){$('.more-container.mw-show').animate({scrollTop:0},200);});$('.btn-lookup-close').on('click',function(){$('.main-header').removeClass('mobile-lookup');});$("#hamburger").on('click',$.proxy(this.toggleMenu,this,false));$(window).on('load resize orientationChanged',$.proxy(function(e){resizeConatiner.call(this);},this));function resizeConatiner(){if(window['outerWidth']<1025){this._container.height(window['innerHeight']-45);}else{this._container.height('auto');};};};CNBC_Navigation.prototype.toggleMenu=function(forceClose,e){if(e!==undefined){}
$el=$('#hamburger.hamburger-menu');$('body, .more-container.mw-show').scrollTop(0);forceClose=forceClose||false;if(forceClose||this._container.css('visibility')!='hidden'){this._container.removeClass('mw-show');$el.removeClass('open');}else{$('.main-header').removeClass('mobile-lookup');this._container.addClass('mw-show');$el.addClass('open');var trackData='navigation:hamburger:hamburger:'+CNBC_Settings.pageNodeId||'non-cms';CNBC_Utils.track.nav(trackData,'Navigation');}};})(jQuery);
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/libraries/Quotes/Quotes.js */

var CNBC_Quotes=(typeof CNBC_Quotes!=="undefined")?CNBC_Quotes:function(){};CNBC_Quotes.QuoteRetrivers={};CNBC_Quotes.streamableSymbolList=[];CNBC_Quotes.nonStreamableSymbolList=[];if(document.getElementById('ciq-chart-frame')!==null){CNBC_Quotes.specialStreamableList=[];}
CNBC_Quotes.init=function(chartapi,services){for(var i=0;i<services.length;i++){var s=services[i];for(var j=0;j<s.listeners.length;j++){var renderer=s.listeners[j];if(renderer!=null){renderer.setChartApiUrl(chartapi);renderer.collectSymbols();if(typeof renderer.loadImage==="function"){renderer.loadImage();}}}
var retriever=new CNBC_Quotes.QuoteRetriever();retriever.init(s.url,s.listeners,s.settings);retriever.run();CNBC_Quotes.QuoteRetrivers[renderer.symbolSelector]=retriever;}};CNBC_Quotes.reRender=function(nonStreamable){for(var i in CNBC_Quotes.QuoteRetrivers){if(CNBC_Quotes.QuoteRetrivers[i]!=null){if(nonStreamable){CNBC_Quotes.QuoteRetrivers[i].getSymbolList(CNBC_Quotes.nonStreamableSymbolList);}else{CNBC_Quotes.QuoteRetrivers[i].getSymbolList(CNBC_Quotes.streamableSymbolList);if(specialStreamableList.length>0){CNBC_Quotes.QuoteRetrivers[i].getSymbolList(CNBC_Quotes.specialStreamableList);}}
CNBC_Quotes.QuoteRetrivers[i].getData();}}};
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/libraries/Quotes/AbstractQuoteRenderer.js */

var CNBC_Quotes=(typeof CNBC_Quotes!=="undefined")?CNBC_Quotes:{};CNBC_Quotes.AbstractQuoteRenderer=function(){this.symbolDomMap={};};(function($){"use strict";var AbstractQuoteRenderer=CNBC_Quotes.AbstractQuoteRenderer;function panic(msg){}
AbstractQuoteRenderer.prototype.parseData=function(jsonData){panic("parseData() needs to be overriden!");}
AbstractQuoteRenderer.prototype.renderDomElt=function($elt,data){panic("renderDomElt() needs to be overriden!");};AbstractQuoteRenderer.prototype.attachEvents=function(){};AbstractQuoteRenderer.prototype.updateTickerColor=function($elt,value,classes){if($elt&&classes&&classes.length==2){var color;$elt.removeClass(classes.join(' '));if(typeof value==="number"&&!isNaN(value)&&value!==0){color=(value>0)?classes[0]:classes[1];$elt.addClass(color);}}}
AbstractQuoteRenderer.prototype.getFieldValue=function(data,field){var value=null;if(field){var parts=field.split('.');value=data;for(var i=0;i<parts.length;i++){value=value[parts[i]];}
if(typeof value==='object'){value='---';}}
return value;};AbstractQuoteRenderer.prototype.setChartApiUrl=function(chartapi){this.chartApiUrl=chartapi;};AbstractQuoteRenderer.prototype.updateChartImage=function($flexChart,symbol,regSymbol,companyName){var $img=$('img',$flexChart);var chartparams=$img.data('chartparams');var loc=this.chartApiUrl+"?"+chartparams+"&symbol="+symbol;$img.attr('src',loc);$img.attr('symbol',regSymbol);if(companyName){var $note=$('p.note',$flexChart);$note.text(companyName);}};AbstractQuoteRenderer.prototype.setEventImage=function($flexChart,quoteBaseURL){var $img=$('img',$flexChart);$img.unbind('click');$img.click(function(){window.location.href=quoteBaseURL+encodeURIComponent($img.attr('symbol'));});};AbstractQuoteRenderer.prototype.getSymbols=function(){var symbols=[];for(var s in this.symbolDomMap){symbols.push(s);}
return symbols;};AbstractQuoteRenderer.prototype.collectSymbols=function(){var selector=this.symbolSelector;if(!selector){if(typeof console!=='undefined'){console.error(">>>> Missing this.symbolSelector in QuoteRenderer!");}}
var self=this;this.selector=selector;var attrSelector="["+this.selector+"]";var $symbols=$(attrSelector);$symbols.each(function(i,elt){var $elt=$(this);var symbol=$elt.attr(selector);if(symbol){self.addSymbolToDomMap(symbol,$elt);}
else{panic("Couldn't find symbol in selector: "+selector);}});};AbstractQuoteRenderer.prototype.addSymbolToDomMap=function(symbol,$elt){var domList=this.symbolDomMap[symbol];if(!domList){domList=this.symbolDomMap[symbol]=[];}
domList.push($elt);};AbstractQuoteRenderer.prototype.onRender=function(data,quoteBaseURL){var quoteDataMap=this.parseData(data);if(quoteDataMap){var nonStreamableSymbolListTemp=[];var streamableSymbolListTemp=[];var specialStreamableListTemp=[];for(var symbol in this.symbolDomMap){var domList=this.symbolDomMap[symbol];for(var i=0;i<domList.length;i++){var $row=domList[i];var sym=$row.attr(this.selector);var quote=quoteDataMap[sym];if(quote){if($.trim(quote.streamable)=="0"){if(document.getElementById('ciq-chart-frame')!==null){specialStreamableListTemp[specialStreamableListTemp.length||0]=symbol;}else{nonStreamableSymbolListTemp[nonStreamableSymbolListTemp.length||0]=symbol;}}else{streamableSymbolListTemp[streamableSymbolListTemp.length||0]=symbol;}
this.renderDomElt($row,quote);}}}
if(streamableSymbolListTemp.length>0){CNBC_Quotes.streamableSymbolList=streamableSymbolListTemp;}
if(nonStreamableSymbolListTemp.length>0){CNBC_Quotes.nonStreamableSymbolList=nonStreamableSymbolListTemp;}
if(specialStreamableListTemp.length>0){CNBC_Quotes.specialStreamableList=specialStreamableListTemp;}
this.attachEvents(quoteBaseURL);}};AbstractQuoteRenderer.prototype.getQuoteDataForSingleAjaxRequest=function(data,getter){var quoteData=data;for(var i=0;i<getter.length;i++){if(quoteData[getter[i]]!=undefined){quoteData=quoteData[getter[i]];}}
return quoteData;};AbstractQuoteRenderer.prototype.getQuoteDataList=function(data,getter){var quoteData=[];for(var i=0;i<data.length;i++){var qd=this.getQuoteDataForSingleAjaxRequest(data[i],getter);quoteData=quoteData.concat(qd);}
if(!$.isArray(quoteData)){quoteData=[quoteData];}
return quoteData;};AbstractQuoteRenderer.prototype.getQuoteDataMap=function(data,params){var quoteData=this.getQuoteDataList(data,params);var map={};for(var i=0;i<quoteData.length;i++){var quote=quoteData[i];var sym=quote.symbol;map[sym]=quote;}
return map;};AbstractQuoteRenderer.prototype.renderArrow=function($elt,change){var $sel=$('div.icon',$elt).removeClass();if(change>0){$sel.addClass('icon arrow_up').html('&nbsp;');}else if(change<0){$sel.addClass('icon arrow_down').html('&nbsp;');}else{$sel.addClass('icon unch').text('---');}};}(jQuery));
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/libraries/Quotes/FutureMarketsRenderer.js */

var CNBC_Quotes=(typeof CNBC_Quotes!=="undefined")?CNBC_Quotes:{};CNBC_Quotes.FutureMarketsRenderer=function(){this.symbolSelector='data-future-markets-symbol';};(function($){"use strict";var FutureMarketsRenderer=CNBC_Quotes.FutureMarketsRenderer;FutureMarketsRenderer.prototype=new CNBC_Quotes.AbstractQuoteRenderer();FutureMarketsRenderer.prototype.parseData=function(data){return this.getQuoteDataMap(data,["FairValueQuoteResult","FairValueQuote"]);};FutureMarketsRenderer.prototype.renderDomElt=function($row,quote){var self=this;var prefix="";var company=quote.name;var realTime="true";$row.data('company-name',company);var $fields=$row.find('[data-field]');if(quote.assetType){$row.addClass(quote.assetType.toLowerCase());}
self.loadImage();var getField=function(field){return self.getFieldValue(quote,field);};var fv_change_pct=parseFloat(getField('fv_change_pct'));var fv_change=parseFloat(getField('fv_change'));$row.removeClass('hide');$fields.each(function(i,elt){var $elt=$(elt);var value;var name=$elt.data('field');if(name){switch(name){case'fv_change_pct':value=(getField(name))?(Number(getField(name)).toFixed(2)):'---';if(Number(value)>0)
$elt.text("+"+value);else
$elt.text(value);break;case'fv_change':value=getField(name)?getField(name):'---';self.updateTickerColor($row,fv_change,['green','red']);self.renderArrow($row,fv_change);if(Number(value)>0)
$elt.text("+"+value);else if(Number(value)==0)
$elt.text("UNCH");else
$elt.text(value);break;case'last':value=getField(name)?getField(name):'---';$elt.text(value);if(quote.realTime==="false")
$elt.addClass('astricks');break;default:value=getField(name)?getField(name):'---';$elt.text(value);break;}}});};FutureMarketsRenderer.prototype.attachEvents=function(quoteBaseURL){var self=this;var $marketCharts=$("[data-quote-type='ticker-quotes']").find("div.tickers");$marketCharts.each(function(i,elt){var $tickersChart=$(this);$tickersChart.mouseenter(function(){var strSymbol=$(this).attr("data-markets-alt-symbol");var strRegSymbol=$(this).attr("data-markets-symbol");var companyName=$(this).data("company-name");self.updateChartImage($(this).parent().parent(),encodeURIComponent(strSymbol),strRegSymbol,companyName);});self.setEventImage($tickersChart.parent(),quoteBaseURL);});$("[data-quote-type='ticker-quotes']").delegate('div.tickers','click',function(){var strSymbol=$(this).attr("data-markets-symbol");window.location.href=quoteBaseURL+encodeURIComponent(strSymbol);});$("[data-quote-type='ticker-quotes']").delegate('div.tickers','tap',function(){var strSymbol=$(this).attr("data-markets-symbol");window.location.href=quoteBaseURL+encodeURIComponent(strSymbol);});};FutureMarketsRenderer.prototype.loadImage=function(){var self=this;var $marketCharts=$('[data-quote-type="ticker-quotes"]');$marketCharts.each(function(i,elt){var $flexChart=$(this);var imgSrc=$('img',$flexChart).attr('src')||false;if(!imgSrc){$('div.tickers:first',$flexChart).each(function(i,elt){var strSymbol=$(this).attr("data-markets-alt-symbol");var strRegSymbol=$(this).attr("data-markets-symbol");var companyName=$(this).data("company-name");self.updateChartImage($flexChart,strSymbol,strRegSymbol,companyName);return false;});}});};}(jQuery));
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/libraries/Quotes/FutureTableChartRenderer.js */

var CNBC_Quotes=(typeof CNBC_Quotes!=="undefined")?CNBC_Quotes:{};CNBC_Quotes.FutureTableChartRenderer=function(){this.symbolSelector='data-future-table-chart-symbol';};(function($){"use strict";var FutureTableChartRenderer=CNBC_Quotes.FutureTableChartRenderer;FutureTableChartRenderer.prototype=new CNBC_Quotes.AbstractQuoteRenderer();FutureTableChartRenderer.prototype.parseData=function(data){return this.getQuoteDataMap(data,["FairValueQuoteResult","FairValueQuote"]);};FutureTableChartRenderer.prototype.renderDomElt=function($elt,quote){var self=this;var isInlineSpan=($elt.get(0).tagName.toLowerCase()==="span");if(isInlineSpan){renderInline($elt,quote);}
else{renderRow($elt,quote);}
function renderRow($row,quote){var $fields=$row.children();$fields.each(function(i,elt){var $elt=$(elt);var name=$elt.data('field');if(name){var isArrow=(name.indexOf('_arrow')>0);if(isArrow){var idx=name.indexOf('_arrow');var value=quote[name.substr(0,idx)];var change=parseFloat(value);self.renderArrow($elt,change);}
else{var value=(quote[name])?(quote[name]):'---';if(name==='change'||name=='fv_change'){var formatted=value;if(formatted!=='---'){formatted=CNBC_Common.formatDecimalZeros(value);}
$elt.text(formatted);changeColor($elt,value);}
else{$elt.text(value);}}}});}
function changeColor($elt,value){$elt.removeClass('pos neg');value=parseFloat(value);if(value){var cls="";if(value>0)cls="pos";if(value<0)cls="neg";if(cls){$elt.addClass(cls);}}}
function getTimestamp(quote){var lastTimeMsec=Number(quote['last_time_msec']);var lastTimeDate=quote['last_timedate'];var dtObj=new Date(lastTimeMsec);var dnum=dtObj.getDate();var year=dtObj.getFullYear().toString();var dt=new Date(lastTimeMsec).toDateString();var dtParts=dt.split(' ');var dddd=dtParts[0];var month=dtParts[1];var day=dddd+", "+dnum+" "+month+" '"+year.substr(2);var lastSpaceIdx=lastTimeDate.lastIndexOf(' ');var hour=lastTimeDate.substr(0,lastSpaceIdx);var timeStamp=day+" | "+hour+" ET";return timeStamp;};function renderInline($elt,quote){var field=$elt.data('field'),value=quote[field];if(field&&quote[field]){if(field==='fv_spread'){value='('+value+')';}
else if(field==='last_time'){try{value=getTimestamp(quote);}
catch(e){}}
$elt.text(value);}}};FutureTableChartRenderer.prototype.loadImage=function(){var self=this;var $flexCharts=$('div.flex_chart[data-quote-type="future-quote"]');$flexCharts.each(function(i,elt){var $flexChart=$(this);$('table tbody tr:first',$flexChart).each(function(i,elt){var $firstRow=$(this);var symbol=$firstRow.data('future-table-chart-alt-symbol');self.updateChartImage($flexChart,symbol);return false;});});};}(jQuery));
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/libraries/Quotes/InlineQuoteRenderer.js */

var CNBC_Quotes=(typeof CNBC_Quotes!=="undefined")?CNBC_Quotes:{};CNBC_Quotes.InlineQuoteRenderer=function(){this.symbolSelector='data-inline-quote-symbol';};(function($){"use strict";var InlineQuoteRenderer=CNBC_Quotes.InlineQuoteRenderer;InlineQuoteRenderer.prototype=new CNBC_Quotes.AbstractQuoteRenderer();InlineQuoteRenderer.prototype.parseData=function(data){return this.getQuoteDataMap(data,["QuickQuoteResult","QuickQuote"]);};InlineQuoteRenderer.prototype.init=function(settings){this.settings=settings;};InlineQuoteRenderer.prototype.renderDomElt=function($elt,quote){var quoteFields=this.settings.quoteFields;this.mapInlineQuotes($elt,quote,quoteFields);if(this.settings){var chartParams=this.settings.chartParams;var chartImgUrl=this.chartApiUrl+'?'+chartParams;var quoteUrl=this.settings.quoteUrl;if(chartImgUrl&&quoteUrl){this.generatePopup(quote,chartImgUrl,quoteUrl);}
else{}}};InlineQuoteRenderer.prototype.mapInlineQuotes=function($elt,quote,quoteFields){var qcObj=[];var qd=quote;var $assocSym=$elt;var sym=qd.symbol;$assocSym.find('span.data-name').html(qd.name);var $assocSymData=$assocSym.find('span.inlineQuoteData');if($assocSymData.length==0){$assocSym.append("<span class='inlineQuoteData'></span>");$assocSymData=$assocSym.find('span.inlineQuoteData');}
var qf=quoteFields;if(qf!=null&&qf.length>0){var qfLen=qf.length;qcObj.push(" [");qcObj.push("<span class='quote_sym'>"+sym+"</span>");var arrowFlag=false;var price=qd.change;var negpos="",qfObj,chng,pctChng,arrow;for(var k=0;k<qfLen;k++){negpos="";qfObj=qf[k];if((qfObj=="change"||qfObj=="change_pct")){negpos=" neg";arrow=" arrowDwn";if(price>0){arrow=" arrowUp";negpos=" pos";}
else if(price<0){arrow=" arrowDwn";negpos=" neg";}
else{arrow='';negpos='';arrowFlag=true;}
if(!arrowFlag){qcObj.push('<span class="icon arrow'+arrow+'">&nbsp;</span>');arrowFlag=true;}}
qcObj.push('<span class="quote_'+qfObj+negpos+'">');if(qfObj=="change_pct"){if(qd[qfObj]){qcObj.push("("+qd[qfObj]+"%)");}}
else{qcObj.push(qd[qfObj]);}
qcObj.push('</span>');}
if(qd.realTime==true){qcObj.push('<span class="quote_sym_rt">&nbsp;</span>');}
qcObj.push("]");$assocSymData.html(qcObj.join(''));}};InlineQuoteRenderer.prototype.generatePopup=function(qd,chartImgUrl,quoteURL){var popupStr=[];var sym=qd.symbol;sym=this.removeSpecialChars(sym);var id="quotes_popup_"+sym;var imgSrc=chartImgUrl+"&symbol="+qd.altSymbol;var ref=quoteURL+escape(sym);var price=parseFloat(qd.change);if(!$("#"+id).length){popupStr.push('<div id="'+id+'" class="inline_quotes_popup">');popupStr.push('<div class="popup_header">');popupStr.push('<div class="popup_header_exch">');popupStr.push('<span class="popup_sym_abr">');popupStr.push(sym);popupStr.push('</span>');popupStr.push('<span class="popup_sym_exch">');popupStr.push(qd.exchange);popupStr.push('</span>');popupStr.push('</div>');popupStr.push('<div class="popup_header_price">');popupStr.push('<span class="popup_sym_name">');popupStr.push(qd.name);popupStr.push('</span>');popupStr.push('<span class="popup_sym_last">');popupStr.push(qd.last);popupStr.push('</span>');if(price<0){popupStr.push('<span class="popup_sym_price neg">');}
else if(price>0){popupStr.push('<span class="popup_sym_price pos">');}
else{price='UNCH';}
popupStr.push(price);popupStr.push('</span>');if(price<0){popupStr.push('<span class="popup_sym_perc_chng neg">');}
else if(price=='UNCH'){popupStr.push('<span class="popup_sym_perc_chng">');}
else{popupStr.push('<span class="popup_sym_chng pos">+');}
popupStr.push(qd.change_pct+'%');popupStr.push('</span>');popupStr.push('</div>');popupStr.push('</div>');popupStr.push('<div class="popup_chart">');popupStr.push('<img src="'+imgSrc+'" />');popupStr.push('</div>');popupStr.push('<div class="popup_footer">');popupStr.push('<ul class="popup_footer_links">');popupStr.push('<li class="first"><a class="popup_footer_quote" href="'+ref+'">Quote</a></li>');popupStr.push('<li><a class="popup_footer_chart" href="'+ref+'/tab/2">Chart</a></li>');popupStr.push('<li><a class="popup_footer_news" href="'+ref+'/tab/3">News</a></li>');popupStr.push('<li><a class="popup_footer_profile" href="'+ref+'/tab/4">Profile</a></li>');popupStr.push('</ul>');popupStr.push('</div>');popupStr.push('</div>');$("body").append(popupStr.join(''));}
else{$("#"+id+' .popup_sym_price').text(price);$("#"+id+' .popup_sym_chng').text(qd.last);$("#"+id+' .popup_sym_perc_chng').text(qd.change_pct+'%');$("#"+id+' .popup_chart img').attr('src',imgSrc);if(price<0){$("#"+id+' .icon').removeClass('arrowUp unch').addClass('arrow arrowDwn').html('');$("#"+id+' .popup_sym_chng').removeClass('pos').addClass('neg');$("#"+id+' .popup_sym_perc_chng').removeClass('pos').addClass('neg');}
else if(price>0){$("#"+id+' .icon').removeClass('arrowDwn unch').addClass('arrow arrowUp').html('');$("#"+id+' .popup_sym_chng').removeClass('neg').addClass('pos');$("#"+id+' .popup_sym_perc_chng').removeClass('neg').addClass('pos');}
else{$("#"+id+' .icon').removeClass('arrow arrowUp arrowDwn').addClass('unch').html('---');$("#"+id+' .popup_sym_chng').removeClass('neg pos').html('UNCH');$("#"+id+' .popup_sym_perc_chng').removeClass('neg pos').html('0');}}}
InlineQuoteRenderer.prototype.removeSpecialChars=function(sym){if(sym&&sym!=undefined&&sym!=null){sym=sym.replace(/[^a-zA-Z 0-9]+/g,'');return sym;}
return false;}
InlineQuoteRenderer.popupInterval=2000;InlineQuoteRenderer.canHidePopup=true;InlineQuoteRenderer.prototype.attachEvents=function(){var self=this;var $iq=$("a["+this.symbolSelector+"]");var $popups=$("div.inline_quotes_popup");$popups.live("mouseenter",function(){InlineQuoteRenderer.canHidePopup=false;$(this).show();});$popups.live("mouseleave",function(){$popups.hide();InlineQuoteRenderer.canHidePopup=true;});$iq.bind('mousemove',function(){$popups.hide();self.showPopup($(this));});$iq.mouseleave(function(){self.hidePopup($(this));});};InlineQuoteRenderer.prototype.getPopup=function($inlineQuote){var sym=$inlineQuote.attr(this.symbolSelector);sym=this.removeSpecialChars(sym);var $popup=$('#quotes_popup_'+sym);return $popup;};InlineQuoteRenderer.prototype.showPopup=function($inlineQuote){var $popup=this.getPopup($inlineQuote);var offset=$inlineQuote.offset();offset.top+=$inlineQuote.height();$popup.css(offset);$popup.show();};InlineQuoteRenderer.prototype.hidePopup=function($inlineQuote){var $popup=this.getPopup($inlineQuote);setTimeout(function(){if(InlineQuoteRenderer.canHidePopup){$popup.hide();}},InlineQuoteRenderer.popupInterval);};}(jQuery));
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/libraries/Quotes/MarketsRenderer.js */

var CNBC_Quotes=(typeof CNBC_Quotes!=="undefined")?CNBC_Quotes:{};CNBC_Quotes.MarketsRenderer=function(){this.symbolSelector='data-markets-symbol';};(function($){"use strict";var MarketsRenderer=CNBC_Quotes.MarketsRenderer;MarketsRenderer.prototype=new CNBC_Quotes.AbstractQuoteRenderer();MarketsRenderer.prototype.parseData=function(data){return this.getQuoteDataMap(data,["QuickQuoteResult","QuickQuote"]);};MarketsRenderer.prototype.renderDomElt=function($row,quote){var self=this;var prefix="";var company=quote.name;var realTime="true";$row.data('company-name',company);var $fields=$row.find('[data-field]');if(quote.assetType){$row.addClass(quote.assetType.toLowerCase());}
var getField=function(field){return self.getFieldValue(quote,field);};var change_pct=parseFloat(getField('change_pct'));var change=parseFloat(getField('change'));$row.removeClass('hide');$fields.each(function(i,elt){var $elt=$(elt);var value;var name=$elt.data('field');if(name){switch(name){case'change_pct':value=(getField(name))?(Number(getField(name)).toFixed(2)):'---';if(Number(value)>0)
$elt.text("+"+value+'%');else
$elt.text(value+'%');break;case'change':value=getField(name)?getField(name):'---';self.updateTickerColor($row,change,['green','red']);self.renderArrow($row,change);if(Number(value)>0)
$elt.text("+"+value);else if(Number(value)==0)
$elt.text("UNCH");else
$elt.text(value);break;case'last':value=getField(name)?getField(name):'---';$elt.text(value);if(quote.realTime==="false")
$elt.addClass('astricks');break;default:value=getField(name)?getField(name):'---';$elt.text(value);break;}}});};MarketsRenderer.prototype.attachEvents=function(quoteBaseURL){var self=this;var $marketCharts=$("[data-quote-type='ticker-quotes']").find("div.tickers");$marketCharts.each(function(i,elt){var $tickersChart=$(this);$tickersChart.mouseenter(function(){var strSymbol=$(this).attr("data-markets-alt-symbol");var strRegSymbol=$(this).attr("data-markets-symbol");var companyName=$(this).data("company-name");self.updateChartImage($(this).parent().parent(),encodeURIComponent(strSymbol),strRegSymbol,companyName);});self.setEventImage($tickersChart.parent().parent(),quoteBaseURL);});$("[data-quote-type='ticker-quotes']").delegate('div.tickers','click',function(){var strSymbol=$(this).attr("data-markets-symbol");window.location.href=quoteBaseURL+encodeURIComponent(strSymbol);});$("[data-quote-type='ticker-quotes']").delegate('div.tickers','tap',function(){var strSymbol=$(this).attr("data-markets-symbol");window.location.href=quoteBaseURL+encodeURIComponent(strSymbol);});this.loadImageChart();};MarketsRenderer.prototype.loadImageChart=function(){var self=this;var $marketCharts=$('[data-quote-type="ticker-quotes"]');$marketCharts.each(function(i,elt){var $flexChart=$(this);var imgSrc=$('img',$flexChart).attr('src')||false;if(!imgSrc){$('.tickers:first',$flexChart).each(function(i,elt){var strSymbol=$(this).attr("data-markets-alt-symbol");var strRegSymbol=$(this).attr("data-markets-symbol");var companyName=$(this).data("company-name");self.updateChartImage($flexChart,strSymbol,strRegSymbol,companyName);return false;});}
$('img',$flexChart).css('visibility','visible');});};}(jQuery));
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/libraries/Quotes/PremarketTickerRenderer.js */

var CNBC_Quotes=(typeof CNBC_Quotes!=="undefined")?CNBC_Quotes:{};CNBC_Quotes.PremarketTickerRenderer=function(){this.symbolSelector='data-premarket-ticker';};(function($){"use strict";var PremarketTickerRenderer=CNBC_Quotes.PremarketTickerRenderer;PremarketTickerRenderer.prototype=new CNBC_Quotes.AbstractQuoteRenderer();PremarketTickerRenderer.prototype.parseData=function(data){return this.getQuoteDataMap(data,["FairValueQuoteResult","FairValueQuote"]);};PremarketTickerRenderer.prototype.renderDomElt=function($row,quote){var self=this;var company=quote.name;$row.data('company-name',company);var $fields=$row.find('[data-field]');var getField=function(field){return self.getFieldValue(quote,field);};var change=parseFloat(getField('change'));var change_pct=getField('change_pct');var fv_change=parseFloat(getField('fv_change'));var fv_change_pct=getField('fv_change_pct');var last,value;$fields.each(function(i,elt){var $elt=$(elt);var name=$elt.data('field');if(name){if(name==='full-change'){last=change.toFixed(2);if(isNaN(change)||change==0){last='---';}
$elt.find('span.icon').remove();self.updateTickerColor($elt,change,['greenArrow','redArrow']);value=last+" ("+change_pct+")";$elt.text(value);}
else if(name==='fv-full-change'){last=fv_change.toFixed(2);if(isNaN(fv_change)||fv_change==0){last='---';}
$elt.find('span.icon').remove();self.updateTickerColor($elt,fv_change,['greenArrow','redArrow']);value=last+" ("+fv_change_pct+")";$elt.text(value);}
else{value=getField(name);$elt.text(value);}}});};}(jQuery));
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/libraries/Quotes/QuoteRetriever.js */

var CNBC_Quotes=(typeof CNBC_Quotes!=="undefined")?CNBC_Quotes:{};CNBC_Quotes.QuoteRetriever=function(){};(function($){"use strict";CNBC_Quotes.QuoteRetriever.ajaxCounter=0;var QuoteRetriever=CNBC_Quotes.QuoteRetriever;$.ajaxSetup({timeout:120000});QuoteRetriever.prototype.init=function(url,listeners,settings){if(!url||!listeners||!settings){throw new Error("QuoteRetriever() constructor: expecting <url, listeners, settings>");}
this.url=url;this.listeners=listeners;this.settings=settings;this.urlList=[];this.resetAjax();};QuoteRetriever.prototype.run=function(){if(this.listeners.length){this.setSymbols(this.listeners);this.getData();var s=this.settings;if(s&&s.streamingInterval){this.streamData();}}};function QuoteUrl(path){var idx=path.indexOf('&symbols=');if(idx<0||(idx!=path.length-'&symbols='.length)){throw new Error('&symbols needs to be the last argument');}
this.getUrl=function(symbols){var encodedSymbols=[];for(var i=0;i<symbols.length;i++){encodedSymbols.push(encodeURIComponent(symbols[i]));}
var symbolUrl=encodedSymbols.join('|');var url=path+symbolUrl;return url;};}
QuoteRetriever.prototype.setSymbols=function(listeners){var symbols=[];for(var i=0;i<listeners.length;i++){if(listeners[i]!=null){var list=listeners[i].getSymbols();symbols=symbols.concat(list);}}
this.getSymbolList(symbols);};QuoteRetriever.prototype.getSymbolList=function(symbols){var symbols=this.removeDuplicateSymbols(symbols);var maxSymbols=this.settings.maxSymbolsPerRequest||30;var splitLists=this.splitSymbols(symbols,maxSymbols);var quoteUrl=new QuoteUrl(this.url);if(symbols!=".DJI"){this.urlList=[];}
for(var i=0;i<splitLists.length;i++){var symbols=splitLists[i];var url=quoteUrl.getUrl(symbols);this.urlList.push(url);}}
QuoteRetriever.prototype.removeDuplicateSymbols=function(symbols){var uniqueMap={};for(var i=0;i<symbols.length;i++){var s=symbols[i];uniqueMap[s]=1;}
var unique=[];for(var s in uniqueMap){unique.push(s);}
return unique;};QuoteRetriever.prototype.splitSymbols=function(symbols,maxSymbolsPerRequest){var result=[];var start=0;var maxSyms=maxSymbolsPerRequest;var numRequests=Math.ceil(symbols.length/maxSyms);for(var i=0;i<numRequests;i++){result[result.length]=symbols.slice(start,start+maxSyms);start+=maxSyms;}
return result;};QuoteRetriever.prototype.resetAjax=function(){this.ajaxInProgress=false;this.numAjaxRequests=0;this.ajaxData=[];};QuoteRetriever.prototype.getData=function(callback){var self=this;var urlList=self.urlList;if(!self.ajaxInProgress){self.resetAjax();self.ajaxInProgress=true;for(var i=0;i<urlList.length;i++){CNBC_Quotes.QuoteRetriever.ajaxCounter++;var deferred=$.ajax({url:urlList[i],dataType:'jsonp',jsonpCallback:'quoteHandler'+CNBC_Quotes.QuoteRetriever.ajaxCounter,cache:true,async:true});deferred.done(function(data){if(callback){callback(data);}
else{self.collectData(data,urlList.length);}
self.ajaxInProgress=false;});deferred.fail(function(data){self.resetAjax();});}}};QuoteRetriever.prototype.collectData=function(data,urlListLength){this.ajaxData.push(data);this.numAjaxRequests++;if(this.numAjaxRequests===urlListLength){this.onRender(this.ajaxData);this.resetAjax();}};QuoteRetriever.prototype.onRender=function(data){var listeners=this.listeners;for(var i=0;i<listeners.length;i++){if(listeners[i]!=null){listeners[i].onRender(data,this.settings.detailedQuoteBase);}}};QuoteRetriever.prototype.streamData=function(){var self=this;var counter=0;var interval=this.settings.streamingInterval;if(interval>=5000){this.streamingInterval=setInterval(function(){counter++;try{CNBC_Quotes.QuoteRetriever.ajaxCounter=0;if(counter%12==0&&document.getElementById('ciq-chart-frame')!==null){self.getSymbolList(CNBC_Quotes.streamableSymbolList);self.getSymbolList(CNBC_Quotes.specialStreamableList);}else{self.getSymbolList(CNBC_Quotes.streamableSymbolList);}
self.getData();self.urlList=[];}
catch(e){if(typeof console!=='undefined'){console.error("Something happened in streamData");}}},interval);}};QuoteRetriever.prototype.stopStreamingData=function(){if(this.streamingInterval){clearInterval(this.streamingInterval);this.streamingInterval=null;}};}(jQuery));
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/libraries/Quotes/TableChartRenderer.js */

var CNBC_Quotes=(typeof CNBC_Quotes!=="undefined")?CNBC_Quotes:{};CNBC_Quotes.TableChartRenderer=function(){this.symbolSelector='data-table-chart-symbol';var mouseEnterEventAttached=false;};(function($){"use strict";var TableChartRenderer=CNBC_Quotes.TableChartRenderer;var formatPercent=function(num){var result='';if(num==0){result='0';}
else{result=Number(num).toFixed(2);}
return result;}
TableChartRenderer.prototype=new CNBC_Quotes.AbstractQuoteRenderer();TableChartRenderer.prototype.parseData=function(data){return this.getQuoteDataMap(data,["QuickQuoteResult","QuickQuote"]);};TableChartRenderer.prototype.renderDomElt=function($row,quote){var self=this;var company=quote.name;$row.data('company-name',company);var realTime="true";if(quote.realTime!=undefined){realTime=quote.realTime;}
var isFirstRow=($row.index()===0);if(isFirstRow){var $flexChart=$row.closest('.flex_chart');var $name=$('[data-field="company-name"]',$flexChart);$name.text(company);}
var $td_fields=$row.children();$td_fields.each(function(i,elt){var $elt=$(elt);var name=$elt.data('field');if(name){var isArrow=(name.indexOf('_arrow')>0);if(isArrow){var idx=name.indexOf('_arrow');var value=quote[name.substr(0,idx)];var change=parseFloat(value);self.renderArrow($elt,change);}
else{switch(name){case'symbol':if(realTime==="false"){$elt.addClass("delayed_quotes");}
break;case'change':var value=(quote[name]==0)?'UNCH':((quote[name])?(CNBC_Common.formatDecimalZeros(quote[name])):'---');$elt.text(value);break;case'change_pct':var value=(quote[name])?(formatPercent(quote[name])+'%'):'---';$elt.text(value);break;default:var value=(quote[name])?(quote[name]):'---';if(typeof value!="object"){$elt.text(value);}else{$elt.text('');}
break;}}}});};TableChartRenderer.prototype.getFlexCharts=function(){var $flexCharts=$('div.flex_chart[data-quote-type="quick-quote"]');return $flexCharts;};TableChartRenderer.prototype.attachEvents=function(){var self=this;var $flexCharts=this.getFlexCharts();$flexCharts.each(function(i,elt){var $flexChart=$(this);if($($flexChart).parent()!='chartHeader_0'&&this.mouseEnterEventAttached==true){return;}
var $symLinks=$('table tbody tr a',$flexChart);var onEnter=function(){var $this=$(this);var $row=$this.closest('tr');if($row){var symbol=$row.data('table-chart-alt-symbol');self.updateChartImage($flexChart,symbol);var companyName=$row.data('company-name');if(companyName){var $company=$('[data-field="company-name"]',$flexChart);$company.text(companyName);}}};$symLinks.mouseenter(onEnter);});};TableChartRenderer.prototype.loadImage=function(){var self=this;var $flexCharts=this.getFlexCharts();$flexCharts.each(function(i,elt){var $flexChart=$(this);var symbol=$flexChart.data('symbol');var imgSrc=$('img',$flexChart).attr('src')||false;if(!imgSrc){$('table tbody tr:first',$flexChart).each(function(i,elt){var $firstRow=$(this);var symbol=$firstRow.data('table-chart-alt-symbol');self.updateChartImage($flexChart,symbol);return false;});}});};}(jQuery));
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/libraries/Quotes/TickerRenderer.js */

var CNBC_Quotes=(typeof CNBC_Quotes!=="undefined")?CNBC_Quotes:{};CNBC_Quotes.TickerRenderer=function(){this.symbolSelector='data-ticker';};(function($){"use strict";var TickerRenderer=CNBC_Quotes.TickerRenderer;TickerRenderer.prototype=new CNBC_Quotes.AbstractQuoteRenderer();TickerRenderer.prototype.parseData=function(data){return this.getQuoteDataMap(data,["ITVQuoteResult","ITVQuote"]);};TickerRenderer.prototype.renderDomElt=function($row,quote){var self=this;var prefix="";var company=quote.name;var realTime="true";$row.data('company-name',company);var $fields=$row.find('[data-field]');var getField=function(field){return self.getFieldValue(quote,field);};var change=parseFloat(getField('change'));var change_pct=getField('change_pct');var $readout=$row.find('div.readout');var isInlineTicker=($readout.length>0);var changeType=getField('changetype').toUpperCase();if(quote.realTime!=undefined){realTime=quote.realTime;}
if(realTime==="false"){var $symbol=$row.find('.ticker');var symbolHTML=$symbol.text();if(symbolHTML.charAt(0)!='*'){$symbol.html('<span>*</span>'+symbolHTML);}}
if(!isInlineTicker){self.updateTickerColor($row,change,['green','red']);}
else{self.updateTickerColor($readout,change,['green','red']);var $elt=$row.find('span[data-usfirst]');if($elt.length>0){$elt.removeClass('up down');$elt.find('span:last').html('');if(isNaN(change)||change==0){$elt.find('span:last').html('-');}
else{var usFirst=Boolean($elt.data('usfirst'));var up=(change>0);up=(usFirst==true)?up:!up;var cl=(up)?"up":"down";$elt.addClass(cl);}}}
$fields.each(function(i,elt){var $elt=$(elt);var value;var name=$elt.data('field');if(name){switch(name){case'full-change':var last=change.toFixed(2);$elt.find('span.icon').remove();self.updateTickerColor($elt,change,['green','red']);value=last+"("+change_pct+")";$elt.text(value);break;case'volume':if(getField(name)){var vol=Number(getField(name).replace(/\,/g,''));if(vol>1000000){vol=vol/1000000;vol=vol.toFixed(2)+"M";}
else if(vol>1000){vol=vol/1000;vol=vol.toFixed(2)+"K";}
$elt.text(vol);}
break;default:value=getField(name)?getField(name):'---';$elt.text(value);break;}}});};}(jQuery));
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/libraries/Quotes/MarketsOverviewRenderer.js */

var CNBC_Quotes=(typeof CNBC_Quotes!=="undefined")?CNBC_Quotes:{};CNBC_Quotes.MarketsOverviewRenderer=function(){this.symbolSelector='data-markets-overview-symbol';};(function($){"use strict";var MarketsOverviewRenderer=CNBC_Quotes.MarketsOverviewRenderer;CNBC_Utils.inheritChain(MarketsOverviewRenderer,CNBC_Quotes.MarketsRenderer);MarketsOverviewRenderer.prototype.attachEvents=function(quoteBaseURL){var self=this;var $marketCharts=$("[data-quote-type='ticker-quotes-overview']").find("div.tickers");$marketCharts.each(function(i,elt){var $tickersChart=$(this);self.setEventImage($tickersChart.parent().parent(),quoteBaseURL);});$("[data-quote-type='ticker-quotes-overview']").delegate('div.tickers','click',function(){var strSymbol=$(this).attr("data-markets-overview-symbol");window.location.href=quoteBaseURL+encodeURIComponent(strSymbol);});$("[data-quote-type='ticker-quotes-overview']").delegate('div.tickers','tap',function(){var strSymbol=$(this).attr("data-markets-overview-symbol");window.location.href=quoteBaseURL+encodeURIComponent(strSymbol);});this.loadImageChart();};MarketsOverviewRenderer.prototype.loadImageChart=function(){var self=this;var $marketCharts=$('body.web [data-quote-type="ticker-quotes-overview"]');$marketCharts.each(function(i,elt){var $flexChart=$(this);var imgSrc=$('img',$flexChart).attr('src')||false;if(!imgSrc){$('.tickers',$flexChart).each(function(i,elt){var strSymbol=$(this).attr("data-markets-overview-alt-symbol");var strRegSymbol=$(this).attr("data-markets-overview-symbol");var companyName=$(this).data("company-name");if($flexChart.hasClass('slick-active')){self.updateChartImage(elt,strSymbol,strRegSymbol,companyName);}else{self.updateChartImage(elt,strSymbol,strRegSymbol,companyName,'data-lazy');}});}
$('img',$flexChart).css('visibility','visible');});};MarketsOverviewRenderer.prototype.updateChartImage=function($flexChart,symbol,regSymbol,companyName,attr){var attr=attr||'src',$img=$('img',$flexChart),chartparams=$img.data('chartparams'),loc=this.chartApiUrl+"?"+chartparams+"&symbol="+symbol;$img.attr(attr,loc);$img.attr('symbol',regSymbol);if(companyName){var $note=$('p.note',$flexChart);$note.text(companyName);}};}(jQuery));
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/libraries/Quotes/MarketsChartRenderer.js */

var CNBC_Quotes=(typeof CNBC_Quotes!=="undefined")?CNBC_Quotes:{};CNBC_Quotes.MarketsChartRenderer=function(){this.symbolSelector="data-markets-redesign-symbol";};(function($){"use strict";var MarketsChartRenderer=CNBC_Quotes.MarketsChartRenderer;CNBC_Utils.inheritChain(MarketsChartRenderer,CNBC_Quotes.TableChartRenderer);if(CNBC_Utils.isMobile()!=true){var mouseEnterEventAttached=false;}
var formatPercent=function(num){var result='';if(num==0){result='0';}
else{result=Number(num).toFixed(2);}
return result;}
MarketsChartRenderer.prototype.parseData=function(data){return this.getQuoteDataMap(data,["QuickQuoteResult","QuickQuote"]);};MarketsChartRenderer.prototype.renderDomElt=function($row,quote){var self=this;var company=quote.name;$row.data('company-name',company);var realTime="true";var $fields=$row.find('[data-field]');if(quote.realTime!=undefined){realTime=quote.realTime;}
if($row.parent().parent().parent().parent().attr('id')=='chartHeader_0'||$row.parent().attr('class')=='tickers-container'){ciq_syncChart(quote.symbol,quote.last,quote.last_time_msec);}
var getField=function(field){return self.getFieldValue(quote,field);};var change_pct=parseFloat(getField('change_pct'));var change=parseFloat(getField('change'));$row.removeClass('hide');$fields.each(function(i,elt){var $elt=$(elt);var value;var name=$elt.data('field');if(name){switch(name){case'symbol':if($row.parent().attr('class')!='tickers-container'){if(realTime==="false"){$elt.addClass("delayed_quotes");}}
break;case'change_pct':value=(getField(name))?(formatPercent(getField(name))):'---';if($row.parent().attr('class')=='tickers-container'){if(Number(value)>0)
$elt.text("(+"+value+"%)");else
$elt.text("("+value+'%)');}else{if(Number(value)>0)
$elt.text("+"+value+"%");else
$elt.text(value+'%');}
break;case'change':value=getField(name)?getField(name):'---';self.updateTickerColor($row,change,['green','red']);if(Number(value)>0)
$elt.text("+"+value);else if(Number(value)==0)
$elt.text("UNCH");else
$elt.text(value);break;case'last':value=getField(name)?getField(name):'---';$elt.text(value);if(quote.realTime==="false")
$elt.addClass('astricks');break;default:value=getField(name)?getField(name):'---';$elt.text(value);break;}}});}
MarketsChartRenderer.prototype.attachEvents=function(quoteBaseURL){var self=this;if(CNBC_Utils.isMobile()==true){var $marketCharts=$("[data-quote-type='ticker-quotes']").find("div.tickers");$marketCharts.each(function(i,elt){if(this.mouseEnterEventAttached==true){return;}
this.mouseEnterEventAttached=true;var $tickersChart=$(this);$tickersChart.mouseenter(function(){var strSymbol=$(this).attr("data-markets-redesign-alt-symbol");var strRegSymbol=$(this).attr("data-markets-redesign-symbol");var companyName=$(this).data("company-name");$(this).parent().parent().parent().find('.active').removeClass('active');$(this).addClass("active");self.updateChartImage($tickersChart,strSymbol,strRegSymbol,companyName?companyName:'');document.getElementById("symbol").innerHTML=companyName;update_time(strSymbol);});});$("[data-quote-type='ticker-quotes']").delegate('div.tickers','click',function(){var strSymbol=$(this).attr("data-markets-redesign-symbol");window.location.href=quoteBaseURL+encodeURIComponent(strSymbol);});$("[data-quote-type='ticker-quotes']").delegate('div.tickers','tap',function(){var strSymbol=$(this).attr("data-markets-redesign-symbol");window.location.href=quoteBaseURL+encodeURIComponent(strSymbol);});}else{var $flexCharts=this.getFlexCharts();$flexCharts.each(function(i,elt){var $flexChart=$(this);if($($flexChart).parent()!='chartHeader_0'&&this.mouseEnterEventAttached==true){return;}
this.mouseEnterEventAttached=true;var $symLinks=$('table tbody tr',$flexChart);var onEnter=function(){var $this=$(this);var $row=$this.closest('tr');if($row){var symbol=$row.data('markets-redesign-symbol');var companyName=$row.data('company-name');if($row.parent().parent().parent().parent().parent().attr('id')=='markets_topTable'){self.updateChartImage($flexChart,symbol,'',companyName?companyName:'');document.getElementById("symbol").innerHTML=companyName;update_time(symbol);}
if(companyName){var $company=$('[data-field="company-name"]',$flexChart);$company.text(companyName);}}};$symLinks.mouseenter(onEnter);var $topChart=$('table tbody tr','#chartHeader_0');$topChart.mouseleave(function(){var $this=$(this);var $row=$this.closest('tr');if($row){$row.addClass("hlight   ");}});});}}
MarketsChartRenderer.prototype.updateChartImage=function($flexChart,symbol,regSymbol,companyName){ciq_settings.symbol=symbol;ciq_settings.symbolName=companyName;if(symbol===ciq_settings.symbol){if(symbol=='.FTSE'){ciq_settings.range='1D';$('.timespan_toggle .ciq_range a').removeClass('active');$($('.timespan_toggle .ciq_range a')[0]).addClass('active');$('.timespan_toggle .ciq_range a:not(.active)').hide();}else{$('.timespan_toggle .ciq_range a').show();}
document.getElementById('ciq-chart-frame').contentWindow.postMessage('launchChart||'+ciq_settings.range+'||'+ciq_settings.symbol+'||'+ciq_settings.symbolName+'||'+ciq_settings.chartType,'*');}}}(jQuery));
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/libraries/Touch/CNBC_TabletFriendlyTouch.js */

var CNBC_TabletFriendlyTouch=function(){};(function(){CNBC_TabletFriendlyTouch.prototype={targetElements:null,dataWasClicked:'data-wc',dataClickEventAttribName:'data-onclick',init:function(args){var self=this;for(var param in args){eval('this.'+param+' = args.'+param+';');}
for(var groupID in this.targetElements){this.targetElements[groupID].each(function(key,element){var dataClickEvent=$(element).attr(self.dataClickEventAttribName);if(typeof(dataClickEvent)!='undefined'){self._attachClickEvent($(element),groupID);}});}},clearClickedAttrib:function(groupID){var self=this;this.targetElements[groupID].each(function(key,element){var dataClickEvent=$(element).attr(self.dataClickEventAttribName);if(typeof(dataClickEvent)!='undefined'){$(element).attr(self.dataWasClicked,'false');}});},_attachClickEvent:function(element,groupID){var self=this;var thisElement=element;var thisGroupID=groupID;element.click(function(e){var wasClicked=thisElement.attr(self.dataWasClicked)||'false';self.clearClickedAttrib(thisGroupID);if(wasClicked=='false'){thisElement.attr(self.dataWasClicked,'true');e.stopImmediatePropagation();return false;}});}};if(CNBC_Utils.isTouchEnabled()==true){var tabletFriendlyTouch1=new CNBC_TabletFriendlyTouch();tabletFriendlyTouch1.init({targetElements:{'1':$('.cnbc-menu').find('a'),'2':$('.tickers-container').find('.tickers'),'3':$('#chartHeader_0').find('tbody tr a')}});}})($);
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/libraries/Alerts/Alerts.js */

var globalTest;CNBC_Alerts={};(function($){var closeAction={};var url=CNBC_Settings.baseurls.pub_base_protocol_agnostic+'/services/alerts',modeConfig={breaking_news:{nid:'20991458',title:'BREAKING:',tag:'breaking-news'},pro_alert:{nid:'201',title:'PRO:',tag:'pro-alert'},watch_live:{nid:'202',title:'WATCH:',tag:'watch-live'},watch_live_intl:{nid:'102831987',title:'WATCH:',tag:'watch-live-international'},},isProUser=(function(){return CNBC_Utils.isUserPremium();}()),isUSAUser=(function(){var geo_cookie=CNBC_Utils.readCookie('geo_cookie');return(geo_cookie==null||geo_cookie=="USA");}()),checkFranchiseByUserLocation=(function(){return isUSAUser?'watch-live':'watch-live-international';}()),hasCorrectTimeIfWatchLive=function(container){return($(".alert-banner",container).attr("data-correcttime")=="1")?true:false;},override=false,count=0,visited=null,preferences=[],bn_preferences=[],cookieCheck='',bnVisited=null,bnHeadline='',refreshing=true,globalConfig=[],interval=5000,simulating=false,simulateModes=[],simulator={"alerts":{}};function settings(){return{nid:null,container:'cnbc-alert-container',count:1,interval:'5',mode:null,data:'json',target:false,callback:null,cache:false,animate:false,dismiss:false,hide:false,cookie:false,fetch_now:true,player:"/watch-live-universal?popout=true&autoplay=true&channel=platform"}};CNBC_Alerts.init=function(interval,configs){interval=parseInt(interval)*1000;for(var i=0;i<configs.length;i++){var alertConfig=$.extend({},settings(),configs[i]);if(alertConfig.mode){if(!alertConfig.nid)alertConfig.nid=modeConfig[alertConfig.mode].nid;if(!configs[i].container)alertConfig.container=alertConfig.container+'-'+modeConfig[alertConfig.mode].tag;alertConfig.interval=parseInt(alertConfig.interval)*1000;alertConfig.url=url;this.configure(alertConfig);}else{return false;}}
function pollAlertData(){if(alertConfig.fetch_now){fetchAlertData();alertConfig.fetch_now=false;}
if(interval>5000){setInterval(function(){if(refreshing)fetchAlertData();},interval);}}
function fetchAlertData(){var self=this;$.ajax({url:alertConfig.url,type:'get',dataType:alertConfig.data,jsonpCallback:alertConfig.callback,cache:alertConfig.cache,data:{},success:function(data){var d={'alerts':{}};for(var i=0;i<globalConfig.length;i++){var mode=modeConfig[globalConfig[i].mode].tag;if($.inArray(globalConfig[i].mode.replace(/_/g,'-'),simulateModes)!=-1){if(simulator.alerts[mode])d.alerts[mode]=simulator.alerts[mode];}else{d.alerts[mode]=data.alerts[mode];}}
if(globalConfig&&globalConfig.length){for(var i=0;i<globalConfig.length;i++){globalConfig[i].updateDynamicData(d);}}}});}
pollAlertData();}
CNBC_Alerts.simulateAlert=function(args,alerts){simulateModes=args?args.split(','):[];var modes=['breaking-news','pro-alert','watch-live','watch-live-international'],types={'default':3,'featured':1};for(var i=0;i<modes.length;i++){if(alerts[modes[i]]){var alert={"headline":alerts[modes[i]].headline||'testing alert',"nid":alerts[modes[i]].nid?alerts[modes[i]].nid.toString():'000000',"node_classification":null,"notification":0,"props":[],"pubDate":'000000',"region_id":types[alerts[modes[i]].type]||3,"type":"cnbcnewsstory","url":alerts[modes[i]].url};simulator.alerts[modes[i]]=[alert];}else{simulator.alerts[modes[i]]=null;}}}
CNBC_Alerts.togglePolling=function(){refreshing=refreshing?false:true;}
CNBC_Alerts.configure=function(config){var thisObj=this,container=config.container,type=typeof container,slideVisible=false,index=null,tag=modeConfig[config.mode].tag,$a;function configDynamicBehavior(data,callback){var product=window.cnbc.config.product;if(!checkAlertInCookie(data)||(tag=="pro-alert"&&!checkAlertType(data))){container.slideUp(function(){container.addClass('hide');container.addClass('blocked');if(callback)callback();});}else{if(!container.is(':visible')&&data){if(data.nid||data.alerts[tag])container.removeClass('blocked');}
if(tag==="breaking-news"||tag==="pro-alert"||configureWatchLive(product,data,config.nid)){container.slideDown(function(){if(callback)callback();});}}}
function configureWatchLive(product,data,nid){function hasNoUrl(data){var noUrl=true;if(filterAlertByType(data)){noUrl=(filterAlertByType(data).url===null);}else{noUrl=($a.attr('href')==="");}
return noUrl;}
if(!hasNoUrl(data)){if(hasCorrectTimeIfWatchLive(container)){if(isProUser){$a.attr('data-openlive',"1");return true;}else if(checkFranchiseByUserLocation===tag){if(data.url!==null){$a.attr('href',data.url);return true;}else{isUSAUser?setLinkTo('tv'):setLinkTo('marketing');return true;}}}else if(checkFranchiseByUserLocation===tag&&data){setLinkTo('tv');return true;}}else if(checkFranchiseByUserLocation===tag||(isProUser&&hasCorrectTimeIfWatchLive(container))){setLinkTo();$a.addClass("noclick");return true;}
return false;}
function checkAlertInCookie(data){if(!config.cookie)return true;visited=CNBC_Utils.readCookie("alert_preferences");bnVisited=CNBC_Utils.readCookie('bn_preferences');if(visited!=null){preferences=visited.toString().split(",");}else{preferences=[];}
if(bnVisited!=null){bn_preferences=bnVisited.toString().split(",");}else{bn_preferences=[];}
if(!data||(data.alerts&&!data.alerts[tag])){if(tag=='breaking-news'){bnHeadline=$a.find('span.alert-headline').text();cookieCheck=bnHeadline.replace(/\W+/g,'');index=bn_preferences.indexOf(cookieCheck);}else{index=preferences.indexOf($a.attr('data-nodeid'));}}else{if(tag=='breaking-news'){bnHeadline=(data.alerts&&filterAlertByType(data))?filterAlertByType(data).headline:data.headline;cookieCheck=bnHeadline.replace(/\W+/g,'');index=bn_preferences.indexOf(cookieCheck);}else{var nid=(data.alerts&&filterAlertByType(data))?filterAlertByType(data).nid:data.nid;index=preferences.indexOf(nid.toString());}}
return index==-1?true:false;}
function checkAlertType(data){var pro_only;if(config['target']&&filterAlertByType(data)){pro_only=filterAlertByType(data).pro_only;if(!isProUser&&!!pro_only){return false;}}else{if(!isProUser&&$a.attr('pro-only')=="true")return false;}
return true;}
function setLinkTo(page){var linkTo;switch(page){case'home':linkTo=CNBC_Settings.baseurls.pub_base_protocol_agnostic;break;case'marketing':linkTo=CNBC_Settings.baseurls.pub_base_protocol_agnostic+'/application/pro';break;case'tv':linkTo='http://www.cnbc.com/live-tv';break;default:linkTo='javascript:void(0)';break;}
$a.attr('href',linkTo);}
function updateAlertBanner(data,check){$a.attr('data-nodeid',parseInt(data.nid)).attr('data-regionid',data.pro_only);$('.alert-title',container).text(modeConfig[config.mode].title);$('.alert-headline',container).text(data.headline);if(tag!=='watch-live'&&tag!=='watch-live-international'||tag==='watch-live'&&data.url!==null||tag==='watch-live-international'&&data.url!==null){$a.attr('href',data.url||'javascript:void(0)');}
if(data.pro_live_stream_active!==undefined){active_time=(data.pro_live_stream_active)?"1":"0";$a.attr("data-correcttime",active_time).attr("data-area",data.pro_live_stream_active);if(hasCorrectTimeIfWatchLive(container)){if(isProUser){$a.attr('data-openlive',"1");}}}
toggleNoLinkAttribute(data.url);}
function toggleNoLinkAttribute(url){var noUrl=$a.hasClass("noclick");if(noUrl&&url!=null){$a.removeClass("noclick");}else if(!noUrl&&url==null){$a.addClass("noclick");}}
function renderAlertData(data){count++;var latestNodeId=parseInt(getLatestNodeId()),latestHeadline=String(getLatestHeadline());if(data==null||data==undefined){if(container.is(':visible')){if(config.animate){container.slideUp();}else{container.fadeOut(500,function(){$(this).addClass('hide');});}}
$('.alert-banner',container).attr('href','').attr('data-nodeid','');$('.alert-title',container).text('');$('.alert-headline',container).text('');container.addClass('hide');}else{if(parseInt(data.nid)!==latestNodeId||$.trim(data.headline)!=latestHeadline){if(checkAlertInCookie(data)){if(container.is(':visible')){container.fadeOut(500,function(){updateAlertBanner(data);container.fadeIn(500,function(){$(this).removeClass('hide');});});}else if(!container.hasClass('blocked')){updateAlertBanner(data);container.removeClass('hide');container.slideDown();}}}else if(!container.hasClass('blocked')){container.removeClass('hide');}}}
function updateDynamicData(data){configDynamicBehavior(data,function(){renderAlertData(filterAlertByType(data));});}
function configCloseEvent(tag,headline,action){if(config.cookie&&tag!='breaking-news'){visited=CNBC_Utils.readCookie("alert_preferences");visited=visited?visited+','+$('.alert-banner',container).attr('data-nodeid'):$('.alert-banner',container).attr('data-nodeid');CNBC_Utils.createCookie("alert_preferences",visited);}else if(tag=='breaking-news'&&config.cookie){visited=CNBC_Utils.readCookie("bn_preferences");var cookie_headline=headline.replace(/\W+/g,'');visited=visited?visited+','+cookie_headline:cookie_headline;CNBC_Utils.createCookie("bn_preferences",visited,12);}
if(config.hide){container.hide();}
var omnitag=(tag=="breaking-news")?"breaking":(tag=="pro-alert")?"pro":"livestream",nid=$a.attr('data-nodeid');var trackParam=$a.hasClass('noclick')?nid:(nid+'|'+$a.attr('href'));CNBC_Omniture.genericClickTracking({'params':{'l1':'alert-pro'},'link':{"pev2":"Alert","trkNav":"alerts|"+omnitag+'|'+headline+'|'+trackParam,},'cnbc':{"alertaction":action}});}
function filterAlertByType(data,debug){if(data&&data.nid)return data;var alerts=data?data.alerts:null,i;if(alerts!=null&&alerts[tag]&&alerts[tag].length){return alerts[tag][0];}else{return null;}}
function getLatestNodeId(){return $a.attr('data-nodeID')||"";}
function getLatestHeadline(){return $.trim($('.alert-headline',container).text())||"";}
if(type=='string'){container=$('#'+container);}else if(type=='object'&&container.length==1){container=container;}
$a=$('.alert-banner',container);if(config.dismiss){var closeButton=$('#'+tag+'-close-button');closeButton.on('click',function(){configCloseEvent(tag,getLatestHeadline(),'dismiss');});$a.on('click',function(event){var nolink=$(this).hasClass("noclick");event.preventDefault();if(!nolink){if(tag!='breaking-news'){configCloseEvent(tag,getLatestHeadline(),'click');}}
closeAction[tag]=true;if($(this).attr('data-openlive')=="1"){showLivePlayer();}else if(!nolink){window.location.href=$(this).attr('href');}});}
function showLivePlayer(){if(window.cnbc.config.product=="web"){var channel="US";if(tag==='watch-live-international'){channel=$a.attr('data-area');}
var popupWidth=600,popupHeight=400,popupLeftPos=0,popupTopPos=0;popupLeftPos=$('body').offset().left+40;popupTopPos=$('body').offset().top;var currentPopOutPlayerURL=CNBC_Settings.baseurls.pub_base_protocol_agnostic+"/watch-live?size=530_300&channel=UPLYNK-"+channel.toUpperCase();if(CNBC_Settings.is_universal_live_player){currentPopOutPlayerURL=CNBC_Settings.baseurls.pub_base_protocol_agnostic+config.player+'channel=platform'+channel.toUpperCase();}
var popup=window.open(currentPopOutPlayerURL,'Live_Player','width='+popupWidth+',height='+popupHeight+',left='+popupLeftPos+',top='+popupTopPos+',directories=no,titlebar=no,status=no,toolbar=no,menubar=no,location=no,resizable=yes,scrollbars=no');if(window.focus)handler.focus();CNBC_Utils.removeUrlHash();}else{var channel=0,$channelSpan;if(tag==='watch-live-international'){channel=($a.attr('data-area').toLowerCase()==='europe')?1:2;}
if($('#live_player').length&&$('#live_player')[0].contentWindow.CNBC_uplynk.playStatus!='playing'){$channelSpan=$('#live_player')[0].contentWindow.CNBC_uplynk.$channelSpan;$channelSpan.each(function(i,el){if(i===channel){$(el).addClass('selected');}else{$(el).removeClass('selected');}});$('#live_player')[0].contentWindow.CNBC_uplynk.$overlayImgId.trigger('click');}
else if($('#live_player_universal').length&&document.getElementById('live_player_universal').contentWindow.CNBC_livePlayer.playStatus!='playing'){$channelSpan=document.getElementById('live_player_universal').contentWindow.CNBC_videoControls.$channelspan;$channelSpan.each(function(i,el){if(i===channel){$(el).addClass('selected');}else{$(el).removeClass('selected');}});document.getElementById('live_player_universal').contentWindow.$('span.selected').trigger('click');}
else{window.location.href=CNBC_Settings.baseurls.pub_base_protocol_agnostic;}}}
configDynamicBehavior();globalConfig.push({'mode':config.mode,'updateDynamicData':updateDynamicData});}})(jQuery);
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/libraries/jquery-ui-1.11.4.custom/jquery-ui.js */

(function(factory){if(typeof define==="function"&&define.amd){define(["jquery"],factory);}else{factory(jQuery);}}(function($){$.ui=$.ui||{};$.extend($.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});$.fn.extend({scrollParent:function(includeHidden){var position=this.css("position"),excludeStaticParent=position==="absolute",overflowRegex=includeHidden?/(auto|scroll|hidden)/:/(auto|scroll)/,scrollParent=this.parents().filter(function(){var parent=$(this);if(excludeStaticParent&&parent.css("position")==="static"){return false;}
return overflowRegex.test(parent.css("overflow")+parent.css("overflow-y")+parent.css("overflow-x"));}).eq(0);return position==="fixed"||!scrollParent.length?$(this[0].ownerDocument||document):scrollParent;},uniqueId:(function(){var uuid=0;return function(){return this.each(function(){if(!this.id){this.id="ui-id-"+(++uuid);}});};})(),removeUniqueId:function(){return this.each(function(){if(/^ui-id-\d+$/.test(this.id)){$(this).removeAttr("id");}});}});function focusable(element,isTabIndexNotNaN){var map,mapName,img,nodeName=element.nodeName.toLowerCase();if("area"===nodeName){map=element.parentNode;mapName=map.name;if(!element.href||!mapName||map.nodeName.toLowerCase()!=="map"){return false;}
img=$("img[usemap='#"+mapName+"']")[0];return!!img&&visible(img);}
return(/^(input|select|textarea|button|object)$/.test(nodeName)?!element.disabled:"a"===nodeName?element.href||isTabIndexNotNaN:isTabIndexNotNaN)&&visible(element);}
function visible(element){return $.expr.filters.visible(element)&&!$(element).parents().addBack().filter(function(){return $.css(this,"visibility")==="hidden";}).length;}
$.extend($.expr[":"],{data:$.expr.createPseudo?$.expr.createPseudo(function(dataName){return function(elem){return!!$.data(elem,dataName);};}):function(elem,i,match){return!!$.data(elem,match[3]);},focusable:function(element){return focusable(element,!isNaN($.attr(element,"tabindex")));},tabbable:function(element){var tabIndex=$.attr(element,"tabindex"),isTabIndexNaN=isNaN(tabIndex);return(isTabIndexNaN||tabIndex>=0)&&focusable(element,!isTabIndexNaN);}});if(!$("<a>").outerWidth(1).jquery){$.each(["Width","Height"],function(i,name){var side=name==="Width"?["Left","Right"]:["Top","Bottom"],type=name.toLowerCase(),orig={innerWidth:$.fn.innerWidth,innerHeight:$.fn.innerHeight,outerWidth:$.fn.outerWidth,outerHeight:$.fn.outerHeight};function reduce(elem,size,border,margin){$.each(side,function(){size-=parseFloat($.css(elem,"padding"+this))||0;if(border){size-=parseFloat($.css(elem,"border"+this+"Width"))||0;}
if(margin){size-=parseFloat($.css(elem,"margin"+this))||0;}});return size;}
$.fn["inner"+name]=function(size){if(size===undefined){return orig["inner"+name].call(this);}
return this.each(function(){$(this).css(type,reduce(this,size)+"px");});};$.fn["outer"+name]=function(size,margin){if(typeof size!=="number"){return orig["outer"+name].call(this,size);}
return this.each(function(){$(this).css(type,reduce(this,size,true,margin)+"px");});};});}
if(!$.fn.addBack){$.fn.addBack=function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector));};}
if($("<a>").data("a-b","a").removeData("a-b").data("a-b")){$.fn.removeData=(function(removeData){return function(key){if(arguments.length){return removeData.call(this,$.camelCase(key));}else{return removeData.call(this);}};})($.fn.removeData);}
$.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());$.fn.extend({focus:(function(orig){return function(delay,fn){return typeof delay==="number"?this.each(function(){var elem=this;setTimeout(function(){$(elem).focus();if(fn){fn.call(elem);}},delay);}):orig.apply(this,arguments);};})($.fn.focus),disableSelection:(function(){var eventType="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(eventType+".ui-disableSelection",function(event){event.preventDefault();});};})(),enableSelection:function(){return this.unbind(".ui-disableSelection");},zIndex:function(zIndex){if(zIndex!==undefined){return this.css("zIndex",zIndex);}
if(this.length){var elem=$(this[0]),position,value;while(elem.length&&elem[0]!==document){position=elem.css("position");if(position==="absolute"||position==="relative"||position==="fixed"){value=parseInt(elem.css("zIndex"),10);if(!isNaN(value)&&value!==0){return value;}}
elem=elem.parent();}}
return 0;}});$.ui.plugin={add:function(module,option,set){var i,proto=$.ui[module].prototype;for(i in set){proto.plugins[i]=proto.plugins[i]||[];proto.plugins[i].push([option,set[i]]);}},call:function(instance,name,args,allowDisconnected){var i,set=instance.plugins[name];if(!set){return;}
if(!allowDisconnected&&(!instance.element[0].parentNode||instance.element[0].parentNode.nodeType===11)){return;}
for(i=0;i<set.length;i++){if(instance.options[set[i][0]]){set[i][1].apply(instance.element,args);}}}};var widget_uuid=0,widget_slice=Array.prototype.slice;$.cleanData=(function(orig){return function(elems){var events,elem,i;for(i=0;(elem=elems[i])!=null;i++){try{events=$._data(elem,"events");if(events&&events.remove){$(elem).triggerHandler("remove");}}catch(e){}}
orig(elems);};})($.cleanData);$.widget=function(name,base,prototype){var fullName,existingConstructor,constructor,basePrototype,proxiedPrototype={},namespace=name.split(".")[0];name=name.split(".")[1];fullName=namespace+"-"+name;if(!prototype){prototype=base;base=$.Widget;}
$.expr[":"][fullName.toLowerCase()]=function(elem){return!!$.data(elem,fullName);};$[namespace]=$[namespace]||{};existingConstructor=$[namespace][name];constructor=$[namespace][name]=function(options,element){if(!this._createWidget){return new constructor(options,element);}
if(arguments.length){this._createWidget(options,element);}};$.extend(constructor,existingConstructor,{version:prototype.version,_proto:$.extend({},prototype),_childConstructors:[]});basePrototype=new base();basePrototype.options=$.widget.extend({},basePrototype.options);$.each(prototype,function(prop,value){if(!$.isFunction(value)){proxiedPrototype[prop]=value;return;}
proxiedPrototype[prop]=(function(){var _super=function(){return base.prototype[prop].apply(this,arguments);},_superApply=function(args){return base.prototype[prop].apply(this,args);};return function(){var __super=this._super,__superApply=this._superApply,returnValue;this._super=_super;this._superApply=_superApply;returnValue=value.apply(this,arguments);this._super=__super;this._superApply=__superApply;return returnValue;};})();});constructor.prototype=$.widget.extend(basePrototype,{widgetEventPrefix:existingConstructor?(basePrototype.widgetEventPrefix||name):name},proxiedPrototype,{constructor:constructor,namespace:namespace,widgetName:name,widgetFullName:fullName});if(existingConstructor){$.each(existingConstructor._childConstructors,function(i,child){var childPrototype=child.prototype;$.widget(childPrototype.namespace+"."+childPrototype.widgetName,constructor,child._proto);});delete existingConstructor._childConstructors;}else{base._childConstructors.push(constructor);}
$.widget.bridge(name,constructor);return constructor;};$.widget.extend=function(target){var input=widget_slice.call(arguments,1),inputIndex=0,inputLength=input.length,key,value;for(;inputIndex<inputLength;inputIndex++){for(key in input[inputIndex]){value=input[inputIndex][key];if(input[inputIndex].hasOwnProperty(key)&&value!==undefined){if($.isPlainObject(value)){target[key]=$.isPlainObject(target[key])?$.widget.extend({},target[key],value):$.widget.extend({},value);}else{target[key]=value;}}}}
return target;};$.widget.bridge=function(name,object){var fullName=object.prototype.widgetFullName||name;$.fn[name]=function(options){var isMethodCall=typeof options==="string",args=widget_slice.call(arguments,1),returnValue=this;if(isMethodCall){this.each(function(){var methodValue,instance=$.data(this,fullName);if(options==="instance"){returnValue=instance;return false;}
if(!instance){return $.error("cannot call methods on "+name+" prior to initialization; "+"attempted to call method '"+options+"'");}
if(!$.isFunction(instance[options])||options.charAt(0)==="_"){return $.error("no such method '"+options+"' for "+name+" widget instance");}
methodValue=instance[options].apply(instance,args);if(methodValue!==instance&&methodValue!==undefined){returnValue=methodValue&&methodValue.jquery?returnValue.pushStack(methodValue.get()):methodValue;return false;}});}else{if(args.length){options=$.widget.extend.apply(null,[options].concat(args));}
this.each(function(){var instance=$.data(this,fullName);if(instance){instance.option(options||{});if(instance._init){instance._init();}}else{$.data(this,fullName,new object(options,this));}});}
return returnValue;};};$.Widget=function(){};$.Widget._childConstructors=[];$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:false,create:null},_createWidget:function(options,element){element=$(element||this.defaultElement||this)[0];this.element=$(element);this.uuid=widget_uuid++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=$();this.hoverable=$();this.focusable=$();if(element!==this){$.data(element,this.widgetFullName,this);this._on(true,this.element,{remove:function(event){if(event.target===element){this.destroy();}}});this.document=$(element.style?element.ownerDocument:element.document||element);this.window=$(this.document[0].defaultView||this.document[0].parentWindow);}
this.options=$.widget.extend({},this.options,this._getCreateOptions(),options);this._create();this._trigger("create",null,this._getCreateEventData());this._init();},_getCreateOptions:$.noop,_getCreateEventData:$.noop,_create:$.noop,_init:$.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData($.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus");},_destroy:$.noop,widget:function(){return this.element;},option:function(key,value){var options=key,parts,curOption,i;if(arguments.length===0){return $.widget.extend({},this.options);}
if(typeof key==="string"){options={};parts=key.split(".");key=parts.shift();if(parts.length){curOption=options[key]=$.widget.extend({},this.options[key]);for(i=0;i<parts.length-1;i++){curOption[parts[i]]=curOption[parts[i]]||{};curOption=curOption[parts[i]];}
key=parts.pop();if(arguments.length===1){return curOption[key]===undefined?null:curOption[key];}
curOption[key]=value;}else{if(arguments.length===1){return this.options[key]===undefined?null:this.options[key];}
options[key]=value;}}
this._setOptions(options);return this;},_setOptions:function(options){var key;for(key in options){this._setOption(key,options[key]);}
return this;},_setOption:function(key,value){this.options[key]=value;if(key==="disabled"){this.widget().toggleClass(this.widgetFullName+"-disabled",!!value);if(value){this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus");}}
return this;},enable:function(){return this._setOptions({disabled:false});},disable:function(){return this._setOptions({disabled:true});},_on:function(suppressDisabledCheck,element,handlers){var delegateElement,instance=this;if(typeof suppressDisabledCheck!=="boolean"){handlers=element;element=suppressDisabledCheck;suppressDisabledCheck=false;}
if(!handlers){handlers=element;element=this.element;delegateElement=this.widget();}else{element=delegateElement=$(element);this.bindings=this.bindings.add(element);}
$.each(handlers,function(event,handler){function handlerProxy(){if(!suppressDisabledCheck&&(instance.options.disabled===true||$(this).hasClass("ui-state-disabled"))){return;}
return(typeof handler==="string"?instance[handler]:handler).apply(instance,arguments);}
if(typeof handler!=="string"){handlerProxy.guid=handler.guid=handler.guid||handlerProxy.guid||$.guid++;}
var match=event.match(/^([\w:-]*)\s*(.*)$/),eventName=match[1]+instance.eventNamespace,selector=match[2];if(selector){delegateElement.delegate(selector,eventName,handlerProxy);}else{element.bind(eventName,handlerProxy);}});},_off:function(element,eventName){eventName=(eventName||"").split(" ").join(this.eventNamespace+" ")+
this.eventNamespace;element.unbind(eventName).undelegate(eventName);this.bindings=$(this.bindings.not(element).get());this.focusable=$(this.focusable.not(element).get());this.hoverable=$(this.hoverable.not(element).get());},_delay:function(handler,delay){function handlerProxy(){return(typeof handler==="string"?instance[handler]:handler).apply(instance,arguments);}
var instance=this;return setTimeout(handlerProxy,delay||0);},_hoverable:function(element){this.hoverable=this.hoverable.add(element);this._on(element,{mouseenter:function(event){$(event.currentTarget).addClass("ui-state-hover");},mouseleave:function(event){$(event.currentTarget).removeClass("ui-state-hover");}});},_focusable:function(element){this.focusable=this.focusable.add(element);this._on(element,{focusin:function(event){$(event.currentTarget).addClass("ui-state-focus");},focusout:function(event){$(event.currentTarget).removeClass("ui-state-focus");}});},_trigger:function(type,event,data){var prop,orig,callback=this.options[type];data=data||{};event=$.Event(event);event.type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase();event.target=this.element[0];orig=event.originalEvent;if(orig){for(prop in orig){if(!(prop in event)){event[prop]=orig[prop];}}}
this.element.trigger(event,data);return!($.isFunction(callback)&&callback.apply(this.element[0],[event].concat(data))===false||event.isDefaultPrevented());}};$.each({show:"fadeIn",hide:"fadeOut"},function(method,defaultEffect){$.Widget.prototype["_"+method]=function(element,options,callback){if(typeof options==="string"){options={effect:options};}
var hasOptions,effectName=!options?method:options===true||typeof options==="number"?defaultEffect:options.effect||defaultEffect;options=options||{};if(typeof options==="number"){options={duration:options};}
hasOptions=!$.isEmptyObject(options);options.complete=callback;if(options.delay){element.delay(options.delay);}
if(hasOptions&&$.effects&&$.effects.effect[effectName]){element[method](options);}else if(effectName!==method&&element[effectName]){element[effectName](options.duration,options.easing,callback);}else{element.queue(function(next){$(this)[method]();if(callback){callback.call(element[0]);}
next();});}};});var widget=$.widget;var mouseHandled=false;$(document).mouseup(function(){mouseHandled=false;});var mouse=$.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var that=this;this.element.bind("mousedown."+this.widgetName,function(event){return that._mouseDown(event);}).bind("click."+this.widgetName,function(event){if(true===$.data(event.target,that.widgetName+".preventClickEvent")){$.removeData(event.target,that.widgetName+".preventClickEvent");event.stopImmediatePropagation();return false;}});this.started=false;},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);if(this._mouseMoveDelegate){this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);}},_mouseDown:function(event){if(mouseHandled){return;}
this._mouseMoved=false;(this._mouseStarted&&this._mouseUp(event));this._mouseDownEvent=event;var that=this,btnIsLeft=(event.which===1),elIsCancel=(typeof this.options.cancel==="string"&&event.target.nodeName?$(event.target).closest(this.options.cancel).length:false);if(!btnIsLeft||elIsCancel||!this._mouseCapture(event)){return true;}
this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){that.mouseDelayMet=true;},this.options.delay);}
if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=(this._mouseStart(event)!==false);if(!this._mouseStarted){event.preventDefault();return true;}}
if(true===$.data(event.target,this.widgetName+".preventClickEvent")){$.removeData(event.target,this.widgetName+".preventClickEvent");}
this._mouseMoveDelegate=function(event){return that._mouseMove(event);};this._mouseUpDelegate=function(event){return that._mouseUp(event);};this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);event.preventDefault();mouseHandled=true;return true;},_mouseMove:function(event){if(this._mouseMoved){if($.ui.ie&&(!document.documentMode||document.documentMode<9)&&!event.button){return this._mouseUp(event);}else if(!event.which){return this._mouseUp(event);}}
if(event.which||event.button){this._mouseMoved=true;}
if(this._mouseStarted){this._mouseDrag(event);return event.preventDefault();}
if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=(this._mouseStart(this._mouseDownEvent,event)!==false);(this._mouseStarted?this._mouseDrag(event):this._mouseUp(event));}
return!this._mouseStarted;},_mouseUp:function(event){this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(event.target===this._mouseDownEvent.target){$.data(event.target,this.widgetName+".preventClickEvent",true);}
this._mouseStop(event);}
mouseHandled=false;return false;},_mouseDistanceMet:function(event){return(Math.max(Math.abs(this._mouseDownEvent.pageX-event.pageX),Math.abs(this._mouseDownEvent.pageY-event.pageY))>=this.options.distance);},_mouseDelayMet:function(){return this.mouseDelayMet;},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true;}});(function(){$.ui=$.ui||{};var cachedScrollbarWidth,supportsOffsetFractions,max=Math.max,abs=Math.abs,round=Math.round,rhorizontal=/left|center|right/,rvertical=/top|center|bottom/,roffset=/[\+\-]\d+(\.[\d]+)?%?/,rposition=/^\w+/,rpercent=/%$/,_position=$.fn.position;function getOffsets(offsets,width,height){return[parseFloat(offsets[0])*(rpercent.test(offsets[0])?width/100:1),parseFloat(offsets[1])*(rpercent.test(offsets[1])?height/100:1)];}
function parseCss(element,property){return parseInt($.css(element,property),10)||0;}
function getDimensions(elem){var raw=elem[0];if(raw.nodeType===9){return{width:elem.width(),height:elem.height(),offset:{top:0,left:0}};}
if($.isWindow(raw)){return{width:elem.width(),height:elem.height(),offset:{top:elem.scrollTop(),left:elem.scrollLeft()}};}
if(raw.preventDefault){return{width:0,height:0,offset:{top:raw.pageY,left:raw.pageX}};}
return{width:elem.outerWidth(),height:elem.outerHeight(),offset:elem.offset()};}
$.position={scrollbarWidth:function(){if(cachedScrollbarWidth!==undefined){return cachedScrollbarWidth;}
var w1,w2,div=$("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),innerDiv=div.children()[0];$("body").append(div);w1=innerDiv.offsetWidth;div.css("overflow","scroll");w2=innerDiv.offsetWidth;if(w1===w2){w2=div[0].clientWidth;}
div.remove();return(cachedScrollbarWidth=w1-w2);},getScrollInfo:function(within){var overflowX=within.isWindow||within.isDocument?"":within.element.css("overflow-x"),overflowY=within.isWindow||within.isDocument?"":within.element.css("overflow-y"),hasOverflowX=overflowX==="scroll"||(overflowX==="auto"&&within.width<within.element[0].scrollWidth),hasOverflowY=overflowY==="scroll"||(overflowY==="auto"&&within.height<within.element[0].scrollHeight);return{width:hasOverflowY?$.position.scrollbarWidth():0,height:hasOverflowX?$.position.scrollbarWidth():0};},getWithinInfo:function(element){var withinElement=$(element||window),isWindow=$.isWindow(withinElement[0]),isDocument=!!withinElement[0]&&withinElement[0].nodeType===9;return{element:withinElement,isWindow:isWindow,isDocument:isDocument,offset:withinElement.offset()||{left:0,top:0},scrollLeft:withinElement.scrollLeft(),scrollTop:withinElement.scrollTop(),width:isWindow||isDocument?withinElement.width():withinElement.outerWidth(),height:isWindow||isDocument?withinElement.height():withinElement.outerHeight()};}};$.fn.position=function(options){if(!options||!options.of){return _position.apply(this,arguments);}
options=$.extend({},options);var atOffset,targetWidth,targetHeight,targetOffset,basePosition,dimensions,target=$(options.of),within=$.position.getWithinInfo(options.within),scrollInfo=$.position.getScrollInfo(within),collision=(options.collision||"flip").split(" "),offsets={};dimensions=getDimensions(target);if(target[0].preventDefault){options.at="left top";}
targetWidth=dimensions.width;targetHeight=dimensions.height;targetOffset=dimensions.offset;basePosition=$.extend({},targetOffset);$.each(["my","at"],function(){var pos=(options[this]||"").split(" "),horizontalOffset,verticalOffset;if(pos.length===1){pos=rhorizontal.test(pos[0])?pos.concat(["center"]):rvertical.test(pos[0])?["center"].concat(pos):["center","center"];}
pos[0]=rhorizontal.test(pos[0])?pos[0]:"center";pos[1]=rvertical.test(pos[1])?pos[1]:"center";horizontalOffset=roffset.exec(pos[0]);verticalOffset=roffset.exec(pos[1]);offsets[this]=[horizontalOffset?horizontalOffset[0]:0,verticalOffset?verticalOffset[0]:0];options[this]=[rposition.exec(pos[0])[0],rposition.exec(pos[1])[0]];});if(collision.length===1){collision[1]=collision[0];}
if(options.at[0]==="right"){basePosition.left+=targetWidth;}else if(options.at[0]==="center"){basePosition.left+=targetWidth/2;}
if(options.at[1]==="bottom"){basePosition.top+=targetHeight;}else if(options.at[1]==="center"){basePosition.top+=targetHeight/2;}
atOffset=getOffsets(offsets.at,targetWidth,targetHeight);basePosition.left+=atOffset[0];basePosition.top+=atOffset[1];return this.each(function(){var collisionPosition,using,elem=$(this),elemWidth=elem.outerWidth(),elemHeight=elem.outerHeight(),marginLeft=parseCss(this,"marginLeft"),marginTop=parseCss(this,"marginTop"),collisionWidth=elemWidth+marginLeft+parseCss(this,"marginRight")+scrollInfo.width,collisionHeight=elemHeight+marginTop+parseCss(this,"marginBottom")+scrollInfo.height,position=$.extend({},basePosition),myOffset=getOffsets(offsets.my,elem.outerWidth(),elem.outerHeight());if(options.my[0]==="right"){position.left-=elemWidth;}else if(options.my[0]==="center"){position.left-=elemWidth/2;}
if(options.my[1]==="bottom"){position.top-=elemHeight;}else if(options.my[1]==="center"){position.top-=elemHeight/2;}
position.left+=myOffset[0];position.top+=myOffset[1];if(!supportsOffsetFractions){position.left=round(position.left);position.top=round(position.top);}
collisionPosition={marginLeft:marginLeft,marginTop:marginTop};$.each(["left","top"],function(i,dir){if($.ui.position[collision[i]]){$.ui.position[collision[i]][dir](position,{targetWidth:targetWidth,targetHeight:targetHeight,elemWidth:elemWidth,elemHeight:elemHeight,collisionPosition:collisionPosition,collisionWidth:collisionWidth,collisionHeight:collisionHeight,offset:[atOffset[0]+myOffset[0],atOffset[1]+myOffset[1]],my:options.my,at:options.at,within:within,elem:elem});}});if(options.using){using=function(props){var left=targetOffset.left-position.left,right=left+targetWidth-elemWidth,top=targetOffset.top-position.top,bottom=top+targetHeight-elemHeight,feedback={target:{element:target,left:targetOffset.left,top:targetOffset.top,width:targetWidth,height:targetHeight},element:{element:elem,left:position.left,top:position.top,width:elemWidth,height:elemHeight},horizontal:right<0?"left":left>0?"right":"center",vertical:bottom<0?"top":top>0?"bottom":"middle"};if(targetWidth<elemWidth&&abs(left+right)<targetWidth){feedback.horizontal="center";}
if(targetHeight<elemHeight&&abs(top+bottom)<targetHeight){feedback.vertical="middle";}
if(max(abs(left),abs(right))>max(abs(top),abs(bottom))){feedback.important="horizontal";}else{feedback.important="vertical";}
options.using.call(this,props,feedback);};}
elem.offset($.extend(position,{using:using}));});};$.ui.position={fit:{left:function(position,data){var within=data.within,withinOffset=within.isWindow?within.scrollLeft:within.offset.left,outerWidth=within.width,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=withinOffset-collisionPosLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-withinOffset,newOverRight;if(data.collisionWidth>outerWidth){if(overLeft>0&&overRight<=0){newOverRight=position.left+overLeft+data.collisionWidth-outerWidth-withinOffset;position.left+=overLeft-newOverRight;}else if(overRight>0&&overLeft<=0){position.left=withinOffset;}else{if(overLeft>overRight){position.left=withinOffset+outerWidth-data.collisionWidth;}else{position.left=withinOffset;}}}else if(overLeft>0){position.left+=overLeft;}else if(overRight>0){position.left-=overRight;}else{position.left=max(position.left-collisionPosLeft,position.left);}},top:function(position,data){var within=data.within,withinOffset=within.isWindow?within.scrollTop:within.offset.top,outerHeight=data.within.height,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=withinOffset-collisionPosTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-withinOffset,newOverBottom;if(data.collisionHeight>outerHeight){if(overTop>0&&overBottom<=0){newOverBottom=position.top+overTop+data.collisionHeight-outerHeight-withinOffset;position.top+=overTop-newOverBottom;}else if(overBottom>0&&overTop<=0){position.top=withinOffset;}else{if(overTop>overBottom){position.top=withinOffset+outerHeight-data.collisionHeight;}else{position.top=withinOffset;}}}else if(overTop>0){position.top+=overTop;}else if(overBottom>0){position.top-=overBottom;}else{position.top=max(position.top-collisionPosTop,position.top);}}},flip:{left:function(position,data){var within=data.within,withinOffset=within.offset.left+within.scrollLeft,outerWidth=within.width,offsetLeft=within.isWindow?within.scrollLeft:within.offset.left,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=collisionPosLeft-offsetLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-offsetLeft,myOffset=data.my[0]==="left"?-data.elemWidth:data.my[0]==="right"?data.elemWidth:0,atOffset=data.at[0]==="left"?data.targetWidth:data.at[0]==="right"?-data.targetWidth:0,offset=-2*data.offset[0],newOverRight,newOverLeft;if(overLeft<0){newOverRight=position.left+myOffset+atOffset+offset+data.collisionWidth-outerWidth-withinOffset;if(newOverRight<0||newOverRight<abs(overLeft)){position.left+=myOffset+atOffset+offset;}}else if(overRight>0){newOverLeft=position.left-data.collisionPosition.marginLeft+myOffset+atOffset+offset-offsetLeft;if(newOverLeft>0||abs(newOverLeft)<overRight){position.left+=myOffset+atOffset+offset;}}},top:function(position,data){var within=data.within,withinOffset=within.offset.top+within.scrollTop,outerHeight=within.height,offsetTop=within.isWindow?within.scrollTop:within.offset.top,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=collisionPosTop-offsetTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-offsetTop,top=data.my[1]==="top",myOffset=top?-data.elemHeight:data.my[1]==="bottom"?data.elemHeight:0,atOffset=data.at[1]==="top"?data.targetHeight:data.at[1]==="bottom"?-data.targetHeight:0,offset=-2*data.offset[1],newOverTop,newOverBottom;if(overTop<0){newOverBottom=position.top+myOffset+atOffset+offset+data.collisionHeight-outerHeight-withinOffset;if(newOverBottom<0||newOverBottom<abs(overTop)){position.top+=myOffset+atOffset+offset;}}else if(overBottom>0){newOverTop=position.top-data.collisionPosition.marginTop+myOffset+atOffset+offset-offsetTop;if(newOverTop>0||abs(newOverTop)<overBottom){position.top+=myOffset+atOffset+offset;}}}},flipfit:{left:function(){$.ui.position.flip.left.apply(this,arguments);$.ui.position.fit.left.apply(this,arguments);},top:function(){$.ui.position.flip.top.apply(this,arguments);$.ui.position.fit.top.apply(this,arguments);}}};(function(){var testElement,testElementParent,testElementStyle,offsetLeft,i,body=document.getElementsByTagName("body")[0],div=document.createElement("div");testElement=document.createElement(body?"div":"body");testElementStyle={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};if(body){$.extend(testElementStyle,{position:"absolute",left:"-1000px",top:"-1000px"});}
for(i in testElementStyle){testElement.style[i]=testElementStyle[i];}
testElement.appendChild(div);testElementParent=body||document.documentElement;testElementParent.insertBefore(testElement,testElementParent.firstChild);div.style.cssText="position: absolute; left: 10.7432222px;";offsetLeft=$(div).offset().left;supportsOffsetFractions=offsetLeft>10&&offsetLeft<11;testElement.innerHTML="";testElementParent.removeChild(testElement);})();})();var position=$.ui.position;$.widget("ui.draggable",$.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false,drag:null,start:null,stop:null},_create:function(){if(this.options.helper==="original"){this._setPositionRelative();}
if(this.options.addClasses){this.element.addClass("ui-draggable");}
if(this.options.disabled){this.element.addClass("ui-draggable-disabled");}
this._setHandleClassName();this._mouseInit();},_setOption:function(key,value){this._super(key,value);if(key==="handle"){this._removeHandleClassName();this._setHandleClassName();}},_destroy:function(){if((this.helper||this.element).is(".ui-draggable-dragging")){this.destroyOnClear=true;return;}
this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._removeHandleClassName();this._mouseDestroy();},_mouseCapture:function(event){var o=this.options;this._blurActiveElement(event);if(this.helper||o.disabled||$(event.target).closest(".ui-resizable-handle").length>0){return false;}
this.handle=this._getHandle(event);if(!this.handle){return false;}
this._blockFrames(o.iframeFix===true?"iframe":o.iframeFix);return true;},_blockFrames:function(selector){this.iframeBlocks=this.document.find(selector).map(function(){var iframe=$(this);return $("<div>").css("position","absolute").appendTo(iframe.parent()).outerWidth(iframe.outerWidth()).outerHeight(iframe.outerHeight()).offset(iframe.offset())[0];});},_unblockFrames:function(){if(this.iframeBlocks){this.iframeBlocks.remove();delete this.iframeBlocks;}},_blurActiveElement:function(event){var document=this.document[0];if(!this.handleElement.is(event.target)){return;}
try{if(document.activeElement&&document.activeElement.nodeName.toLowerCase()!=="body"){$(document.activeElement).blur();}}catch(error){}},_mouseStart:function(event){var o=this.options;this.helper=this._createHelper(event);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();if($.ui.ddmanager){$.ui.ddmanager.current=this;}
this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent(true);this.offsetParent=this.helper.offsetParent();this.hasFixedAncestor=this.helper.parents().filter(function(){return $(this).css("position")==="fixed";}).length>0;this.positionAbs=this.element.offset();this._refreshOffsets(event);this.originalPosition=this.position=this._generatePosition(event,false);this.originalPageX=event.pageX;this.originalPageY=event.pageY;(o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt));this._setContainment();if(this._trigger("start",event)===false){this._clear();return false;}
this._cacheHelperProportions();if($.ui.ddmanager&&!o.dropBehaviour){$.ui.ddmanager.prepareOffsets(this,event);}
this._normalizeRightBottom();this._mouseDrag(event,true);if($.ui.ddmanager){$.ui.ddmanager.dragStart(this,event);}
return true;},_refreshOffsets:function(event){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:false,parent:this._getParentOffset(),relative:this._getRelativeOffset()};this.offset.click={left:event.pageX-this.offset.left,top:event.pageY-this.offset.top};},_mouseDrag:function(event,noPropagation){if(this.hasFixedAncestor){this.offset.parent=this._getParentOffset();}
this.position=this._generatePosition(event,true);this.positionAbs=this._convertPositionTo("absolute");if(!noPropagation){var ui=this._uiHash();if(this._trigger("drag",event,ui)===false){this._mouseUp({});return false;}
this.position=ui.position;}
this.helper[0].style.left=this.position.left+"px";this.helper[0].style.top=this.position.top+"px";if($.ui.ddmanager){$.ui.ddmanager.drag(this,event);}
return false;},_mouseStop:function(event){var that=this,dropped=false;if($.ui.ddmanager&&!this.options.dropBehaviour){dropped=$.ui.ddmanager.drop(this,event);}
if(this.dropped){dropped=this.dropped;this.dropped=false;}
if((this.options.revert==="invalid"&&!dropped)||(this.options.revert==="valid"&&dropped)||this.options.revert===true||($.isFunction(this.options.revert)&&this.options.revert.call(this.element,dropped))){$(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){if(that._trigger("stop",event)!==false){that._clear();}});}else{if(this._trigger("stop",event)!==false){this._clear();}}
return false;},_mouseUp:function(event){this._unblockFrames();if($.ui.ddmanager){$.ui.ddmanager.dragStop(this,event);}
if(this.handleElement.is(event.target)){this.element.focus();}
return $.ui.mouse.prototype._mouseUp.call(this,event);},cancel:function(){if(this.helper.is(".ui-draggable-dragging")){this._mouseUp({});}else{this._clear();}
return this;},_getHandle:function(event){return this.options.handle?!!$(event.target).closest(this.element.find(this.options.handle)).length:true;},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element;this.handleElement.addClass("ui-draggable-handle");},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle");},_createHelper:function(event){var o=this.options,helperIsFunction=$.isFunction(o.helper),helper=helperIsFunction?$(o.helper.apply(this.element[0],[event])):(o.helper==="clone"?this.element.clone().removeAttr("id"):this.element);if(!helper.parents("body").length){helper.appendTo((o.appendTo==="parent"?this.element[0].parentNode:o.appendTo));}
if(helperIsFunction&&helper[0]===this.element[0]){this._setPositionRelative();}
if(helper[0]!==this.element[0]&&!(/(fixed|absolute)/).test(helper.css("position"))){helper.css("position","absolute");}
return helper;},_setPositionRelative:function(){if(!(/^(?:r|a|f)/).test(this.element.css("position"))){this.element[0].style.position="relative";}},_adjustOffsetFromHelper:function(obj){if(typeof obj==="string"){obj=obj.split(" ");}
if($.isArray(obj)){obj={left:+obj[0],top:+obj[1]||0};}
if("left"in obj){this.offset.click.left=obj.left+this.margins.left;}
if("right"in obj){this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left;}
if("top"in obj){this.offset.click.top=obj.top+this.margins.top;}
if("bottom"in obj){this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top;}},_isRootNode:function(element){return(/(html|body)/i).test(element.tagName)||element===this.document[0];},_getParentOffset:function(){var po=this.offsetParent.offset(),document=this.document[0];if(this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])){po.left+=this.scrollParent.scrollLeft();po.top+=this.scrollParent.scrollTop();}
if(this._isRootNode(this.offsetParent[0])){po={top:0,left:0};}
return{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)};},_getRelativeOffset:function(){if(this.cssPosition!=="relative"){return{top:0,left:0};}
var p=this.element.position(),scrollIsRootNode=this._isRootNode(this.scrollParent[0]);return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+(!scrollIsRootNode?this.scrollParent.scrollTop():0),left:p.left-(parseInt(this.helper.css("left"),10)||0)+(!scrollIsRootNode?this.scrollParent.scrollLeft():0)};},_cacheMargins:function(){this.margins={left:(parseInt(this.element.css("marginLeft"),10)||0),top:(parseInt(this.element.css("marginTop"),10)||0),right:(parseInt(this.element.css("marginRight"),10)||0),bottom:(parseInt(this.element.css("marginBottom"),10)||0)};},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()};},_setContainment:function(){var isUserScrollable,c,ce,o=this.options,document=this.document[0];this.relativeContainer=null;if(!o.containment){this.containment=null;return;}
if(o.containment==="window"){this.containment=[$(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,$(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,$(window).scrollLeft()+$(window).width()-this.helperProportions.width-this.margins.left,$(window).scrollTop()+($(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return;}
if(o.containment==="document"){this.containment=[0,0,$(document).width()-this.helperProportions.width-this.margins.left,($(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return;}
if(o.containment.constructor===Array){this.containment=o.containment;return;}
if(o.containment==="parent"){o.containment=this.helper[0].parentNode;}
c=$(o.containment);ce=c[0];if(!ce){return;}
isUserScrollable=/(scroll|auto)/.test(c.css("overflow"));this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(isUserScrollable?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-
(parseInt(c.css("borderRightWidth"),10)||0)-
(parseInt(c.css("paddingRight"),10)||0)-
this.helperProportions.width-
this.margins.left-
this.margins.right,(isUserScrollable?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-
(parseInt(c.css("borderBottomWidth"),10)||0)-
(parseInt(c.css("paddingBottom"),10)||0)-
this.helperProportions.height-
this.margins.top-
this.margins.bottom];this.relativeContainer=c;},_convertPositionTo:function(d,pos){if(!pos){pos=this.position;}
var mod=d==="absolute"?1:-1,scrollIsRootNode=this._isRootNode(this.scrollParent[0]);return{top:(pos.top+
this.offset.relative.top*mod+
this.offset.parent.top*mod-
((this.cssPosition==="fixed"?-this.offset.scroll.top:(scrollIsRootNode?0:this.offset.scroll.top))*mod)),left:(pos.left+
this.offset.relative.left*mod+
this.offset.parent.left*mod-
((this.cssPosition==="fixed"?-this.offset.scroll.left:(scrollIsRootNode?0:this.offset.scroll.left))*mod))};},_generatePosition:function(event,constrainPosition){var containment,co,top,left,o=this.options,scrollIsRootNode=this._isRootNode(this.scrollParent[0]),pageX=event.pageX,pageY=event.pageY;if(!scrollIsRootNode||!this.offset.scroll){this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()};}
if(constrainPosition){if(this.containment){if(this.relativeContainer){co=this.relativeContainer.offset();containment=[this.containment[0]+co.left,this.containment[1]+co.top,this.containment[2]+co.left,this.containment[3]+co.top];}else{containment=this.containment;}
if(event.pageX-this.offset.click.left<containment[0]){pageX=containment[0]+this.offset.click.left;}
if(event.pageY-this.offset.click.top<containment[1]){pageY=containment[1]+this.offset.click.top;}
if(event.pageX-this.offset.click.left>containment[2]){pageX=containment[2]+this.offset.click.left;}
if(event.pageY-this.offset.click.top>containment[3]){pageY=containment[3]+this.offset.click.top;}}
if(o.grid){top=o.grid[1]?this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY;pageY=containment?((top-this.offset.click.top>=containment[1]||top-this.offset.click.top>containment[3])?top:((top-this.offset.click.top>=containment[1])?top-o.grid[1]:top+o.grid[1])):top;left=o.grid[0]?this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX;pageX=containment?((left-this.offset.click.left>=containment[0]||left-this.offset.click.left>containment[2])?left:((left-this.offset.click.left>=containment[0])?left-o.grid[0]:left+o.grid[0])):left;}
if(o.axis==="y"){pageX=this.originalPageX;}
if(o.axis==="x"){pageY=this.originalPageY;}}
return{top:(pageY-
this.offset.click.top-
this.offset.relative.top-
this.offset.parent.top+
(this.cssPosition==="fixed"?-this.offset.scroll.top:(scrollIsRootNode?0:this.offset.scroll.top))),left:(pageX-
this.offset.click.left-
this.offset.relative.left-
this.offset.parent.left+
(this.cssPosition==="fixed"?-this.offset.scroll.left:(scrollIsRootNode?0:this.offset.scroll.left)))};},_clear:function(){this.helper.removeClass("ui-draggable-dragging");if(this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval){this.helper.remove();}
this.helper=null;this.cancelHelperRemoval=false;if(this.destroyOnClear){this.destroy();}},_normalizeRightBottom:function(){if(this.options.axis!=="y"&&this.helper.css("right")!=="auto"){this.helper.width(this.helper.width());this.helper.css("right","auto");}
if(this.options.axis!=="x"&&this.helper.css("bottom")!=="auto"){this.helper.height(this.helper.height());this.helper.css("bottom","auto");}},_trigger:function(type,event,ui){ui=ui||this._uiHash();$.ui.plugin.call(this,type,[event,ui,this],true);if(/^(drag|start|stop)/.test(type)){this.positionAbs=this._convertPositionTo("absolute");ui.offset=this.positionAbs;}
return $.Widget.prototype._trigger.call(this,type,event,ui);},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs};}});$.ui.plugin.add("draggable","connectToSortable",{start:function(event,ui,draggable){var uiSortable=$.extend({},ui,{item:draggable.element});draggable.sortables=[];$(draggable.options.connectToSortable).each(function(){var sortable=$(this).sortable("instance");if(sortable&&!sortable.options.disabled){draggable.sortables.push(sortable);sortable.refreshPositions();sortable._trigger("activate",event,uiSortable);}});},stop:function(event,ui,draggable){var uiSortable=$.extend({},ui,{item:draggable.element});draggable.cancelHelperRemoval=false;$.each(draggable.sortables,function(){var sortable=this;if(sortable.isOver){sortable.isOver=0;draggable.cancelHelperRemoval=true;sortable.cancelHelperRemoval=false;sortable._storedCSS={position:sortable.placeholder.css("position"),top:sortable.placeholder.css("top"),left:sortable.placeholder.css("left")};sortable._mouseStop(event);sortable.options.helper=sortable.options._helper;}else{sortable.cancelHelperRemoval=true;sortable._trigger("deactivate",event,uiSortable);}});},drag:function(event,ui,draggable){$.each(draggable.sortables,function(){var innermostIntersecting=false,sortable=this;sortable.positionAbs=draggable.positionAbs;sortable.helperProportions=draggable.helperProportions;sortable.offset.click=draggable.offset.click;if(sortable._intersectsWith(sortable.containerCache)){innermostIntersecting=true;$.each(draggable.sortables,function(){this.positionAbs=draggable.positionAbs;this.helperProportions=draggable.helperProportions;this.offset.click=draggable.offset.click;if(this!==sortable&&this._intersectsWith(this.containerCache)&&$.contains(sortable.element[0],this.element[0])){innermostIntersecting=false;}
return innermostIntersecting;});}
if(innermostIntersecting){if(!sortable.isOver){sortable.isOver=1;draggable._parent=ui.helper.parent();sortable.currentItem=ui.helper.appendTo(sortable.element).data("ui-sortable-item",true);sortable.options._helper=sortable.options.helper;sortable.options.helper=function(){return ui.helper[0];};event.target=sortable.currentItem[0];sortable._mouseCapture(event,true);sortable._mouseStart(event,true,true);sortable.offset.click.top=draggable.offset.click.top;sortable.offset.click.left=draggable.offset.click.left;sortable.offset.parent.left-=draggable.offset.parent.left-
sortable.offset.parent.left;sortable.offset.parent.top-=draggable.offset.parent.top-
sortable.offset.parent.top;draggable._trigger("toSortable",event);draggable.dropped=sortable.element;$.each(draggable.sortables,function(){this.refreshPositions();});draggable.currentItem=draggable.element;sortable.fromOutside=draggable;}
if(sortable.currentItem){sortable._mouseDrag(event);ui.position=sortable.position;}}else{if(sortable.isOver){sortable.isOver=0;sortable.cancelHelperRemoval=true;sortable.options._revert=sortable.options.revert;sortable.options.revert=false;sortable._trigger("out",event,sortable._uiHash(sortable));sortable._mouseStop(event,true);sortable.options.revert=sortable.options._revert;sortable.options.helper=sortable.options._helper;if(sortable.placeholder){sortable.placeholder.remove();}
ui.helper.appendTo(draggable._parent);draggable._refreshOffsets(event);ui.position=draggable._generatePosition(event,true);draggable._trigger("fromSortable",event);draggable.dropped=false;$.each(draggable.sortables,function(){this.refreshPositions();});}}});}});$.ui.plugin.add("draggable","cursor",{start:function(event,ui,instance){var t=$("body"),o=instance.options;if(t.css("cursor")){o._cursor=t.css("cursor");}
t.css("cursor",o.cursor);},stop:function(event,ui,instance){var o=instance.options;if(o._cursor){$("body").css("cursor",o._cursor);}}});$.ui.plugin.add("draggable","opacity",{start:function(event,ui,instance){var t=$(ui.helper),o=instance.options;if(t.css("opacity")){o._opacity=t.css("opacity");}
t.css("opacity",o.opacity);},stop:function(event,ui,instance){var o=instance.options;if(o._opacity){$(ui.helper).css("opacity",o._opacity);}}});$.ui.plugin.add("draggable","scroll",{start:function(event,ui,i){if(!i.scrollParentNotHidden){i.scrollParentNotHidden=i.helper.scrollParent(false);}
if(i.scrollParentNotHidden[0]!==i.document[0]&&i.scrollParentNotHidden[0].tagName!=="HTML"){i.overflowOffset=i.scrollParentNotHidden.offset();}},drag:function(event,ui,i){var o=i.options,scrolled=false,scrollParent=i.scrollParentNotHidden[0],document=i.document[0];if(scrollParent!==document&&scrollParent.tagName!=="HTML"){if(!o.axis||o.axis!=="x"){if((i.overflowOffset.top+scrollParent.offsetHeight)-event.pageY<o.scrollSensitivity){scrollParent.scrollTop=scrolled=scrollParent.scrollTop+o.scrollSpeed;}else if(event.pageY-i.overflowOffset.top<o.scrollSensitivity){scrollParent.scrollTop=scrolled=scrollParent.scrollTop-o.scrollSpeed;}}
if(!o.axis||o.axis!=="y"){if((i.overflowOffset.left+scrollParent.offsetWidth)-event.pageX<o.scrollSensitivity){scrollParent.scrollLeft=scrolled=scrollParent.scrollLeft+o.scrollSpeed;}else if(event.pageX-i.overflowOffset.left<o.scrollSensitivity){scrollParent.scrollLeft=scrolled=scrollParent.scrollLeft-o.scrollSpeed;}}}else{if(!o.axis||o.axis!=="x"){if(event.pageY-$(document).scrollTop()<o.scrollSensitivity){scrolled=$(document).scrollTop($(document).scrollTop()-o.scrollSpeed);}else if($(window).height()-(event.pageY-$(document).scrollTop())<o.scrollSensitivity){scrolled=$(document).scrollTop($(document).scrollTop()+o.scrollSpeed);}}
if(!o.axis||o.axis!=="y"){if(event.pageX-$(document).scrollLeft()<o.scrollSensitivity){scrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed);}else if($(window).width()-(event.pageX-$(document).scrollLeft())<o.scrollSensitivity){scrolled=$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed);}}}
if(scrolled!==false&&$.ui.ddmanager&&!o.dropBehaviour){$.ui.ddmanager.prepareOffsets(i,event);}}});$.ui.plugin.add("draggable","snap",{start:function(event,ui,i){var o=i.options;i.snapElements=[];$(o.snap.constructor!==String?(o.snap.items||":data(ui-draggable)"):o.snap).each(function(){var $t=$(this),$o=$t.offset();if(this!==i.element[0]){i.snapElements.push({item:this,width:$t.outerWidth(),height:$t.outerHeight(),top:$o.top,left:$o.left});}});},drag:function(event,ui,inst){var ts,bs,ls,rs,l,r,t,b,i,first,o=inst.options,d=o.snapTolerance,x1=ui.offset.left,x2=x1+inst.helperProportions.width,y1=ui.offset.top,y2=y1+inst.helperProportions.height;for(i=inst.snapElements.length-1;i>=0;i--){l=inst.snapElements[i].left-inst.margins.left;r=l+inst.snapElements[i].width;t=inst.snapElements[i].top-inst.margins.top;b=t+inst.snapElements[i].height;if(x2<l-d||x1>r+d||y2<t-d||y1>b+d||!$.contains(inst.snapElements[i].item.ownerDocument,inst.snapElements[i].item)){if(inst.snapElements[i].snapping){(inst.options.snap.release&&inst.options.snap.release.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})));}
inst.snapElements[i].snapping=false;continue;}
if(o.snapMode!=="inner"){ts=Math.abs(t-y2)<=d;bs=Math.abs(b-y1)<=d;ls=Math.abs(l-x2)<=d;rs=Math.abs(r-x1)<=d;if(ts){ui.position.top=inst._convertPositionTo("relative",{top:t-inst.helperProportions.height,left:0}).top;}
if(bs){ui.position.top=inst._convertPositionTo("relative",{top:b,left:0}).top;}
if(ls){ui.position.left=inst._convertPositionTo("relative",{top:0,left:l-inst.helperProportions.width}).left;}
if(rs){ui.position.left=inst._convertPositionTo("relative",{top:0,left:r}).left;}}
first=(ts||bs||ls||rs);if(o.snapMode!=="outer"){ts=Math.abs(t-y1)<=d;bs=Math.abs(b-y2)<=d;ls=Math.abs(l-x1)<=d;rs=Math.abs(r-x2)<=d;if(ts){ui.position.top=inst._convertPositionTo("relative",{top:t,left:0}).top;}
if(bs){ui.position.top=inst._convertPositionTo("relative",{top:b-inst.helperProportions.height,left:0}).top;}
if(ls){ui.position.left=inst._convertPositionTo("relative",{top:0,left:l}).left;}
if(rs){ui.position.left=inst._convertPositionTo("relative",{top:0,left:r-inst.helperProportions.width}).left;}}
if(!inst.snapElements[i].snapping&&(ts||bs||ls||rs||first)){(inst.options.snap.snap&&inst.options.snap.snap.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})));}
inst.snapElements[i].snapping=(ts||bs||ls||rs||first);}}});$.ui.plugin.add("draggable","stack",{start:function(event,ui,instance){var min,o=instance.options,group=$.makeArray($(o.stack)).sort(function(a,b){return(parseInt($(a).css("zIndex"),10)||0)-(parseInt($(b).css("zIndex"),10)||0);});if(!group.length){return;}
min=parseInt($(group[0]).css("zIndex"),10)||0;$(group).each(function(i){$(this).css("zIndex",min+i);});this.css("zIndex",(min+group.length));}});$.ui.plugin.add("draggable","zIndex",{start:function(event,ui,instance){var t=$(ui.helper),o=instance.options;if(t.css("zIndex")){o._zIndex=t.css("zIndex");}
t.css("zIndex",o.zIndex);},stop:function(event,ui,instance){var o=instance.options;if(o._zIndex){$(ui.helper).css("zIndex",o._zIndex);}}});var draggable=$.ui.draggable;$.widget("ui.droppable",{version:"1.11.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var proportions,o=this.options,accept=o.accept;this.isover=false;this.isout=true;this.accept=$.isFunction(accept)?accept:function(d){return d.is(accept);};this.proportions=function(){if(arguments.length){proportions=arguments[0];}else{return proportions?proportions:proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};}};this._addToManager(o.scope);o.addClasses&&this.element.addClass("ui-droppable");},_addToManager:function(scope){$.ui.ddmanager.droppables[scope]=$.ui.ddmanager.droppables[scope]||[];$.ui.ddmanager.droppables[scope].push(this);},_splice:function(drop){var i=0;for(;i<drop.length;i++){if(drop[i]===this){drop.splice(i,1);}}},_destroy:function(){var drop=$.ui.ddmanager.droppables[this.options.scope];this._splice(drop);this.element.removeClass("ui-droppable ui-droppable-disabled");},_setOption:function(key,value){if(key==="accept"){this.accept=$.isFunction(value)?value:function(d){return d.is(value);};}else if(key==="scope"){var drop=$.ui.ddmanager.droppables[this.options.scope];this._splice(drop);this._addToManager(value);}
this._super(key,value);},_activate:function(event){var draggable=$.ui.ddmanager.current;if(this.options.activeClass){this.element.addClass(this.options.activeClass);}
if(draggable){this._trigger("activate",event,this.ui(draggable));}},_deactivate:function(event){var draggable=$.ui.ddmanager.current;if(this.options.activeClass){this.element.removeClass(this.options.activeClass);}
if(draggable){this._trigger("deactivate",event,this.ui(draggable));}},_over:function(event){var draggable=$.ui.ddmanager.current;if(!draggable||(draggable.currentItem||draggable.element)[0]===this.element[0]){return;}
if(this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){if(this.options.hoverClass){this.element.addClass(this.options.hoverClass);}
this._trigger("over",event,this.ui(draggable));}},_out:function(event){var draggable=$.ui.ddmanager.current;if(!draggable||(draggable.currentItem||draggable.element)[0]===this.element[0]){return;}
if(this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass);}
this._trigger("out",event,this.ui(draggable));}},_drop:function(event,custom){var draggable=custom||$.ui.ddmanager.current,childrenIntersection=false;if(!draggable||(draggable.currentItem||draggable.element)[0]===this.element[0]){return false;}
this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var inst=$(this).droppable("instance");if(inst.options.greedy&&!inst.options.disabled&&inst.options.scope===draggable.options.scope&&inst.accept.call(inst.element[0],(draggable.currentItem||draggable.element))&&$.ui.intersect(draggable,$.extend(inst,{offset:inst.element.offset()}),inst.options.tolerance,event)){childrenIntersection=true;return false;}});if(childrenIntersection){return false;}
if(this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){if(this.options.activeClass){this.element.removeClass(this.options.activeClass);}
if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass);}
this._trigger("drop",event,this.ui(draggable));return this.element;}
return false;},ui:function(c){return{draggable:(c.currentItem||c.element),helper:c.helper,position:c.position,offset:c.positionAbs};}});$.ui.intersect=(function(){function isOverAxis(x,reference,size){return(x>=reference)&&(x<(reference+size));}
return function(draggable,droppable,toleranceMode,event){if(!droppable.offset){return false;}
var x1=(draggable.positionAbs||draggable.position.absolute).left+draggable.margins.left,y1=(draggable.positionAbs||draggable.position.absolute).top+draggable.margins.top,x2=x1+draggable.helperProportions.width,y2=y1+draggable.helperProportions.height,l=droppable.offset.left,t=droppable.offset.top,r=l+droppable.proportions().width,b=t+droppable.proportions().height;switch(toleranceMode){case"fit":return(l<=x1&&x2<=r&&t<=y1&&y2<=b);case"intersect":return(l<x1+(draggable.helperProportions.width/2)&&x2-(draggable.helperProportions.width/2)<r&&t<y1+(draggable.helperProportions.height/2)&&y2-(draggable.helperProportions.height/2)<b);case"pointer":return isOverAxis(event.pageY,t,droppable.proportions().height)&&isOverAxis(event.pageX,l,droppable.proportions().width);case"touch":return((y1>=t&&y1<=b)||(y2>=t&&y2<=b)||(y1<t&&y2>b))&&((x1>=l&&x1<=r)||(x2>=l&&x2<=r)||(x1<l&&x2>r));default:return false;}};})();$.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,event){var i,j,m=$.ui.ddmanager.droppables[t.options.scope]||[],type=event?event.type:null,list=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();droppablesLoop:for(i=0;i<m.length;i++){if(m[i].options.disabled||(t&&!m[i].accept.call(m[i].element[0],(t.currentItem||t.element)))){continue;}
for(j=0;j<list.length;j++){if(list[j]===m[i].element[0]){m[i].proportions().height=0;continue droppablesLoop;}}
m[i].visible=m[i].element.css("display")!=="none";if(!m[i].visible){continue;}
if(type==="mousedown"){m[i]._activate.call(m[i],event);}
m[i].offset=m[i].element.offset();m[i].proportions({width:m[i].element[0].offsetWidth,height:m[i].element[0].offsetHeight});}},drop:function(draggable,event){var dropped=false;$.each(($.ui.ddmanager.droppables[draggable.options.scope]||[]).slice(),function(){if(!this.options){return;}
if(!this.options.disabled&&this.visible&&$.ui.intersect(draggable,this,this.options.tolerance,event)){dropped=this._drop.call(this,event)||dropped;}
if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){this.isout=true;this.isover=false;this._deactivate.call(this,event);}});return dropped;},dragStart:function(draggable,event){draggable.element.parentsUntil("body").bind("scroll.droppable",function(){if(!draggable.options.refreshPositions){$.ui.ddmanager.prepareOffsets(draggable,event);}});},drag:function(draggable,event){if(draggable.options.refreshPositions){$.ui.ddmanager.prepareOffsets(draggable,event);}
$.each($.ui.ddmanager.droppables[draggable.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible){return;}
var parentInstance,scope,parent,intersects=$.ui.intersect(draggable,this,this.options.tolerance,event),c=!intersects&&this.isover?"isout":(intersects&&!this.isover?"isover":null);if(!c){return;}
if(this.options.greedy){scope=this.options.scope;parent=this.element.parents(":data(ui-droppable)").filter(function(){return $(this).droppable("instance").options.scope===scope;});if(parent.length){parentInstance=$(parent[0]).droppable("instance");parentInstance.greedyChild=(c==="isover");}}
if(parentInstance&&c==="isover"){parentInstance.isover=false;parentInstance.isout=true;parentInstance._out.call(parentInstance,event);}
this[c]=true;this[c==="isout"?"isover":"isout"]=false;this[c==="isover"?"_over":"_out"].call(this,event);if(parentInstance&&c==="isout"){parentInstance.isout=false;parentInstance.isover=true;parentInstance._over.call(parentInstance,event);}});},dragStop:function(draggable,event){draggable.element.parentsUntil("body").unbind("scroll.droppable");if(!draggable.options.refreshPositions){$.ui.ddmanager.prepareOffsets(draggable,event);}}};var droppable=$.ui.droppable;$.widget("ui.resizable",$.ui.mouse,{version:"1.11.4",widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(value){return parseInt(value,10)||0;},_isNumber:function(value){return!isNaN(parseInt(value,10));},_hasScroll:function(el,a){if($(el).css("overflow")==="hidden"){return false;}
var scroll=(a&&a==="left")?"scrollLeft":"scrollTop",has=false;if(el[scroll]>0){return true;}
el[scroll]=1;has=(el[scroll]>0);el[scroll]=0;return has;},_create:function(){var n,i,handle,axis,hname,that=this,o=this.options;this.element.addClass("ui-resizable");$.extend(this,{_aspectRatio:!!(o.aspectRatio),aspectRatio:o.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:o.helper||o.ghost||o.animate?o.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)){this.element.wrap($("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance"));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize();}
this.handles=o.handles||(!$(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});this._handles=$();if(this.handles.constructor===String){if(this.handles==="all"){this.handles="n,e,s,w,se,sw,ne,nw";}
n=this.handles.split(",");this.handles={};for(i=0;i<n.length;i++){handle=$.trim(n[i]);hname="ui-resizable-"+handle;axis=$("<div class='ui-resizable-handle "+hname+"'></div>");axis.css({zIndex:o.zIndex});if("se"===handle){axis.addClass("ui-icon ui-icon-gripsmall-diagonal-se");}
this.handles[handle]=".ui-resizable-"+handle;this.element.append(axis);}}
this._renderAxis=function(target){var i,axis,padPos,padWrapper;target=target||this.element;for(i in this.handles){if(this.handles[i].constructor===String){this.handles[i]=this.element.children(this.handles[i]).first().show();}else if(this.handles[i].jquery||this.handles[i].nodeType){this.handles[i]=$(this.handles[i]);this._on(this.handles[i],{"mousedown":that._mouseDown});}
if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)){axis=$(this.handles[i],this.element);padWrapper=/sw|ne|nw|se|n|s/.test(i)?axis.outerHeight():axis.outerWidth();padPos=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join("");target.css(padPos,padWrapper);this._proportionallyResize();}
this._handles=this._handles.add(this.handles[i]);}};this._renderAxis(this.element);this._handles=this._handles.add(this.element.find(".ui-resizable-handle"));this._handles.disableSelection();this._handles.mouseover(function(){if(!that.resizing){if(this.className){axis=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);}
that.axis=axis&&axis[1]?axis[1]:"se";}});if(o.autoHide){this._handles.hide();$(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(o.disabled){return;}
$(this).removeClass("ui-resizable-autohide");that._handles.show();}).mouseleave(function(){if(o.disabled){return;}
if(!that.resizing){$(this).addClass("ui-resizable-autohide");that._handles.hide();}});}
this._mouseInit();},_destroy:function(){this._mouseDestroy();var wrapper,_destroy=function(exp){$(exp).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove();};if(this.elementIsWrapper){_destroy(this.element);wrapper=this.element;this.originalElement.css({position:wrapper.css("position"),width:wrapper.outerWidth(),height:wrapper.outerHeight(),top:wrapper.css("top"),left:wrapper.css("left")}).insertAfter(wrapper);wrapper.remove();}
this.originalElement.css("resize",this.originalResizeStyle);_destroy(this.originalElement);return this;},_mouseCapture:function(event){var i,handle,capture=false;for(i in this.handles){handle=$(this.handles[i])[0];if(handle===event.target||$.contains(handle,event.target)){capture=true;}}
return!this.options.disabled&&capture;},_mouseStart:function(event){var curleft,curtop,cursor,o=this.options,el=this.element;this.resizing=true;this._renderProxy();curleft=this._num(this.helper.css("left"));curtop=this._num(this.helper.css("top"));if(o.containment){curleft+=$(o.containment).scrollLeft()||0;curtop+=$(o.containment).scrollTop()||0;}
this.offset=this.helper.offset();this.position={left:curleft,top:curtop};this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:el.width(),height:el.height()};this.originalSize=this._helper?{width:el.outerWidth(),height:el.outerHeight()}:{width:el.width(),height:el.height()};this.sizeDiff={width:el.outerWidth()-el.width(),height:el.outerHeight()-el.height()};this.originalPosition={left:curleft,top:curtop};this.originalMousePosition={left:event.pageX,top:event.pageY};this.aspectRatio=(typeof o.aspectRatio==="number")?o.aspectRatio:((this.originalSize.width/this.originalSize.height)||1);cursor=$(".ui-resizable-"+this.axis).css("cursor");$("body").css("cursor",cursor==="auto"?this.axis+"-resize":cursor);el.addClass("ui-resizable-resizing");this._propagate("start",event);return true;},_mouseDrag:function(event){var data,props,smp=this.originalMousePosition,a=this.axis,dx=(event.pageX-smp.left)||0,dy=(event.pageY-smp.top)||0,trigger=this._change[a];this._updatePrevProperties();if(!trigger){return false;}
data=trigger.apply(this,[event,dx,dy]);this._updateVirtualBoundaries(event.shiftKey);if(this._aspectRatio||event.shiftKey){data=this._updateRatio(data,event);}
data=this._respectSize(data,event);this._updateCache(data);this._propagate("resize",event);props=this._applyChanges();if(!this._helper&&this._proportionallyResizeElements.length){this._proportionallyResize();}
if(!$.isEmptyObject(props)){this._updatePrevProperties();this._trigger("resize",event,this.ui());this._applyChanges();}
return false;},_mouseStop:function(event){this.resizing=false;var pr,ista,soffseth,soffsetw,s,left,top,o=this.options,that=this;if(this._helper){pr=this._proportionallyResizeElements;ista=pr.length&&(/textarea/i).test(pr[0].nodeName);soffseth=ista&&this._hasScroll(pr[0],"left")?0:that.sizeDiff.height;soffsetw=ista?0:that.sizeDiff.width;s={width:(that.helper.width()-soffsetw),height:(that.helper.height()-soffseth)};left=(parseInt(that.element.css("left"),10)+
(that.position.left-that.originalPosition.left))||null;top=(parseInt(that.element.css("top"),10)+
(that.position.top-that.originalPosition.top))||null;if(!o.animate){this.element.css($.extend(s,{top:top,left:left}));}
that.helper.height(that.size.height);that.helper.width(that.size.width);if(this._helper&&!o.animate){this._proportionallyResize();}}
$("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",event);if(this._helper){this.helper.remove();}
return false;},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left};this.prevSize={width:this.size.width,height:this.size.height};},_applyChanges:function(){var props={};if(this.position.top!==this.prevPosition.top){props.top=this.position.top+"px";}
if(this.position.left!==this.prevPosition.left){props.left=this.position.left+"px";}
if(this.size.width!==this.prevSize.width){props.width=this.size.width+"px";}
if(this.size.height!==this.prevSize.height){props.height=this.size.height+"px";}
this.helper.css(props);return props;},_updateVirtualBoundaries:function(forceAspectRatio){var pMinWidth,pMaxWidth,pMinHeight,pMaxHeight,b,o=this.options;b={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:Infinity,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:Infinity};if(this._aspectRatio||forceAspectRatio){pMinWidth=b.minHeight*this.aspectRatio;pMinHeight=b.minWidth/this.aspectRatio;pMaxWidth=b.maxHeight*this.aspectRatio;pMaxHeight=b.maxWidth/this.aspectRatio;if(pMinWidth>b.minWidth){b.minWidth=pMinWidth;}
if(pMinHeight>b.minHeight){b.minHeight=pMinHeight;}
if(pMaxWidth<b.maxWidth){b.maxWidth=pMaxWidth;}
if(pMaxHeight<b.maxHeight){b.maxHeight=pMaxHeight;}}
this._vBoundaries=b;},_updateCache:function(data){this.offset=this.helper.offset();if(this._isNumber(data.left)){this.position.left=data.left;}
if(this._isNumber(data.top)){this.position.top=data.top;}
if(this._isNumber(data.height)){this.size.height=data.height;}
if(this._isNumber(data.width)){this.size.width=data.width;}},_updateRatio:function(data){var cpos=this.position,csize=this.size,a=this.axis;if(this._isNumber(data.height)){data.width=(data.height*this.aspectRatio);}else if(this._isNumber(data.width)){data.height=(data.width/this.aspectRatio);}
if(a==="sw"){data.left=cpos.left+(csize.width-data.width);data.top=null;}
if(a==="nw"){data.top=cpos.top+(csize.height-data.height);data.left=cpos.left+(csize.width-data.width);}
return data;},_respectSize:function(data){var o=this._vBoundaries,a=this.axis,ismaxw=this._isNumber(data.width)&&o.maxWidth&&(o.maxWidth<data.width),ismaxh=this._isNumber(data.height)&&o.maxHeight&&(o.maxHeight<data.height),isminw=this._isNumber(data.width)&&o.minWidth&&(o.minWidth>data.width),isminh=this._isNumber(data.height)&&o.minHeight&&(o.minHeight>data.height),dw=this.originalPosition.left+this.originalSize.width,dh=this.position.top+this.size.height,cw=/sw|nw|w/.test(a),ch=/nw|ne|n/.test(a);if(isminw){data.width=o.minWidth;}
if(isminh){data.height=o.minHeight;}
if(ismaxw){data.width=o.maxWidth;}
if(ismaxh){data.height=o.maxHeight;}
if(isminw&&cw){data.left=dw-o.minWidth;}
if(ismaxw&&cw){data.left=dw-o.maxWidth;}
if(isminh&&ch){data.top=dh-o.minHeight;}
if(ismaxh&&ch){data.top=dh-o.maxHeight;}
if(!data.width&&!data.height&&!data.left&&data.top){data.top=null;}else if(!data.width&&!data.height&&!data.top&&data.left){data.left=null;}
return data;},_getPaddingPlusBorderDimensions:function(element){var i=0,widths=[],borders=[element.css("borderTopWidth"),element.css("borderRightWidth"),element.css("borderBottomWidth"),element.css("borderLeftWidth")],paddings=[element.css("paddingTop"),element.css("paddingRight"),element.css("paddingBottom"),element.css("paddingLeft")];for(;i<4;i++){widths[i]=(parseInt(borders[i],10)||0);widths[i]+=(parseInt(paddings[i],10)||0);}
return{height:widths[0]+widths[2],width:widths[1]+widths[3]};},_proportionallyResize:function(){if(!this._proportionallyResizeElements.length){return;}
var prel,i=0,element=this.helper||this.element;for(;i<this._proportionallyResizeElements.length;i++){prel=this._proportionallyResizeElements[i];if(!this.outerDimensions){this.outerDimensions=this._getPaddingPlusBorderDimensions(prel);}
prel.css({height:(element.height()-this.outerDimensions.height)||0,width:(element.width()-this.outerDimensions.width)||0});}},_renderProxy:function(){var el=this.element,o=this.options;this.elementOffset=el.offset();if(this._helper){this.helper=this.helper||$("<div style='overflow:hidden;'></div>");this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++o.zIndex});this.helper.appendTo("body").disableSelection();}else{this.helper=this.element;}},_change:{e:function(event,dx){return{width:this.originalSize.width+dx};},w:function(event,dx){var cs=this.originalSize,sp=this.originalPosition;return{left:sp.left+dx,width:cs.width-dx};},n:function(event,dx,dy){var cs=this.originalSize,sp=this.originalPosition;return{top:sp.top+dy,height:cs.height-dy};},s:function(event,dx,dy){return{height:this.originalSize.height+dy};},se:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]));},sw:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]));},ne:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]));},nw:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]));}},_propagate:function(n,event){$.ui.plugin.call(this,n,[event,this.ui()]);(n!=="resize"&&this._trigger(n,event,this.ui()));},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition};}});$.ui.plugin.add("resizable","animate",{stop:function(event){var that=$(this).resizable("instance"),o=that.options,pr=that._proportionallyResizeElements,ista=pr.length&&(/textarea/i).test(pr[0].nodeName),soffseth=ista&&that._hasScroll(pr[0],"left")?0:that.sizeDiff.height,soffsetw=ista?0:that.sizeDiff.width,style={width:(that.size.width-soffsetw),height:(that.size.height-soffseth)},left=(parseInt(that.element.css("left"),10)+
(that.position.left-that.originalPosition.left))||null,top=(parseInt(that.element.css("top"),10)+
(that.position.top-that.originalPosition.top))||null;that.element.animate($.extend(style,top&&left?{top:top,left:left}:{}),{duration:o.animateDuration,easing:o.animateEasing,step:function(){var data={width:parseInt(that.element.css("width"),10),height:parseInt(that.element.css("height"),10),top:parseInt(that.element.css("top"),10),left:parseInt(that.element.css("left"),10)};if(pr&&pr.length){$(pr[0]).css({width:data.width,height:data.height});}
that._updateCache(data);that._propagate("resize",event);}});}});$.ui.plugin.add("resizable","containment",{start:function(){var element,p,co,ch,cw,width,height,that=$(this).resizable("instance"),o=that.options,el=that.element,oc=o.containment,ce=(oc instanceof $)?oc.get(0):(/parent/.test(oc))?el.parent().get(0):oc;if(!ce){return;}
that.containerElement=$(ce);if(/document/.test(oc)||oc===document){that.containerOffset={left:0,top:0};that.containerPosition={left:0,top:0};that.parentData={element:$(document),left:0,top:0,width:$(document).width(),height:$(document).height()||document.body.parentNode.scrollHeight};}else{element=$(ce);p=[];$(["Top","Right","Left","Bottom"]).each(function(i,name){p[i]=that._num(element.css("padding"+name));});that.containerOffset=element.offset();that.containerPosition=element.position();that.containerSize={height:(element.innerHeight()-p[3]),width:(element.innerWidth()-p[1])};co=that.containerOffset;ch=that.containerSize.height;cw=that.containerSize.width;width=(that._hasScroll(ce,"left")?ce.scrollWidth:cw);height=(that._hasScroll(ce)?ce.scrollHeight:ch);that.parentData={element:ce,left:co.left,top:co.top,width:width,height:height};}},resize:function(event){var woset,hoset,isParent,isOffsetRelative,that=$(this).resizable("instance"),o=that.options,co=that.containerOffset,cp=that.position,pRatio=that._aspectRatio||event.shiftKey,cop={top:0,left:0},ce=that.containerElement,continueResize=true;if(ce[0]!==document&&(/static/).test(ce.css("position"))){cop=co;}
if(cp.left<(that._helper?co.left:0)){that.size.width=that.size.width+
(that._helper?(that.position.left-co.left):(that.position.left-cop.left));if(pRatio){that.size.height=that.size.width/that.aspectRatio;continueResize=false;}
that.position.left=o.helper?co.left:0;}
if(cp.top<(that._helper?co.top:0)){that.size.height=that.size.height+
(that._helper?(that.position.top-co.top):that.position.top);if(pRatio){that.size.width=that.size.height*that.aspectRatio;continueResize=false;}
that.position.top=that._helper?co.top:0;}
isParent=that.containerElement.get(0)===that.element.parent().get(0);isOffsetRelative=/relative|absolute/.test(that.containerElement.css("position"));if(isParent&&isOffsetRelative){that.offset.left=that.parentData.left+that.position.left;that.offset.top=that.parentData.top+that.position.top;}else{that.offset.left=that.element.offset().left;that.offset.top=that.element.offset().top;}
woset=Math.abs(that.sizeDiff.width+
(that._helper?that.offset.left-cop.left:(that.offset.left-co.left)));hoset=Math.abs(that.sizeDiff.height+
(that._helper?that.offset.top-cop.top:(that.offset.top-co.top)));if(woset+that.size.width>=that.parentData.width){that.size.width=that.parentData.width-woset;if(pRatio){that.size.height=that.size.width/that.aspectRatio;continueResize=false;}}
if(hoset+that.size.height>=that.parentData.height){that.size.height=that.parentData.height-hoset;if(pRatio){that.size.width=that.size.height*that.aspectRatio;continueResize=false;}}
if(!continueResize){that.position.left=that.prevPosition.left;that.position.top=that.prevPosition.top;that.size.width=that.prevSize.width;that.size.height=that.prevSize.height;}},stop:function(){var that=$(this).resizable("instance"),o=that.options,co=that.containerOffset,cop=that.containerPosition,ce=that.containerElement,helper=$(that.helper),ho=helper.offset(),w=helper.outerWidth()-that.sizeDiff.width,h=helper.outerHeight()-that.sizeDiff.height;if(that._helper&&!o.animate&&(/relative/).test(ce.css("position"))){$(this).css({left:ho.left-cop.left-co.left,width:w,height:h});}
if(that._helper&&!o.animate&&(/static/).test(ce.css("position"))){$(this).css({left:ho.left-cop.left-co.left,width:w,height:h});}}});$.ui.plugin.add("resizable","alsoResize",{start:function(){var that=$(this).resizable("instance"),o=that.options;$(o.alsoResize).each(function(){var el=$(this);el.data("ui-resizable-alsoresize",{width:parseInt(el.width(),10),height:parseInt(el.height(),10),left:parseInt(el.css("left"),10),top:parseInt(el.css("top"),10)});});},resize:function(event,ui){var that=$(this).resizable("instance"),o=that.options,os=that.originalSize,op=that.originalPosition,delta={height:(that.size.height-os.height)||0,width:(that.size.width-os.width)||0,top:(that.position.top-op.top)||0,left:(that.position.left-op.left)||0};$(o.alsoResize).each(function(){var el=$(this),start=$(this).data("ui-resizable-alsoresize"),style={},css=el.parents(ui.originalElement[0]).length?["width","height"]:["width","height","top","left"];$.each(css,function(i,prop){var sum=(start[prop]||0)+(delta[prop]||0);if(sum&&sum>=0){style[prop]=sum||null;}});el.css(style);});},stop:function(){$(this).removeData("resizable-alsoresize");}});$.ui.plugin.add("resizable","ghost",{start:function(){var that=$(this).resizable("instance"),o=that.options,cs=that.size;that.ghost=that.originalElement.clone();that.ghost.css({opacity:0.25,display:"block",position:"relative",height:cs.height,width:cs.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof o.ghost==="string"?o.ghost:"");that.ghost.appendTo(that.helper);},resize:function(){var that=$(this).resizable("instance");if(that.ghost){that.ghost.css({position:"relative",height:that.size.height,width:that.size.width});}},stop:function(){var that=$(this).resizable("instance");if(that.ghost&&that.helper){that.helper.get(0).removeChild(that.ghost.get(0));}}});$.ui.plugin.add("resizable","grid",{resize:function(){var outerDimensions,that=$(this).resizable("instance"),o=that.options,cs=that.size,os=that.originalSize,op=that.originalPosition,a=that.axis,grid=typeof o.grid==="number"?[o.grid,o.grid]:o.grid,gridX=(grid[0]||1),gridY=(grid[1]||1),ox=Math.round((cs.width-os.width)/gridX)*gridX,oy=Math.round((cs.height-os.height)/gridY)*gridY,newWidth=os.width+ox,newHeight=os.height+oy,isMaxWidth=o.maxWidth&&(o.maxWidth<newWidth),isMaxHeight=o.maxHeight&&(o.maxHeight<newHeight),isMinWidth=o.minWidth&&(o.minWidth>newWidth),isMinHeight=o.minHeight&&(o.minHeight>newHeight);o.grid=grid;if(isMinWidth){newWidth+=gridX;}
if(isMinHeight){newHeight+=gridY;}
if(isMaxWidth){newWidth-=gridX;}
if(isMaxHeight){newHeight-=gridY;}
if(/^(se|s|e)$/.test(a)){that.size.width=newWidth;that.size.height=newHeight;}else if(/^(ne)$/.test(a)){that.size.width=newWidth;that.size.height=newHeight;that.position.top=op.top-oy;}else if(/^(sw)$/.test(a)){that.size.width=newWidth;that.size.height=newHeight;that.position.left=op.left-ox;}else{if(newHeight-gridY<=0||newWidth-gridX<=0){outerDimensions=that._getPaddingPlusBorderDimensions(this);}
if(newHeight-gridY>0){that.size.height=newHeight;that.position.top=op.top-oy;}else{newHeight=gridY-outerDimensions.height;that.size.height=newHeight;that.position.top=op.top+os.height-newHeight;}
if(newWidth-gridX>0){that.size.width=newWidth;that.position.left=op.left-ox;}else{newWidth=gridX-outerDimensions.width;that.size.width=newWidth;that.position.left=op.left+os.width-newWidth;}}}});var resizable=$.ui.resizable;var selectable=$.widget("ui.selectable",$.ui.mouse,{version:"1.11.4",options:{appendTo:"body",autoRefresh:true,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var selectees,that=this;this.element.addClass("ui-selectable");this.dragged=false;this.refresh=function(){selectees=$(that.options.filter,that.element[0]);selectees.addClass("ui-selectee");selectees.each(function(){var $this=$(this),pos=$this.offset();$.data(this,"selectable-item",{element:this,$element:$this,left:pos.left,top:pos.top,right:pos.left+$this.outerWidth(),bottom:pos.top+$this.outerHeight(),startselected:false,selected:$this.hasClass("ui-selected"),selecting:$this.hasClass("ui-selecting"),unselecting:$this.hasClass("ui-unselecting")});});};this.refresh();this.selectees=selectees.addClass("ui-selectee");this._mouseInit();this.helper=$("<div class='ui-selectable-helper'></div>");},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled");this._mouseDestroy();},_mouseStart:function(event){var that=this,options=this.options;this.opos=[event.pageX,event.pageY];if(this.options.disabled){return;}
this.selectees=$(options.filter,this.element[0]);this._trigger("start",event);$(options.appendTo).append(this.helper);this.helper.css({"left":event.pageX,"top":event.pageY,"width":0,"height":0});if(options.autoRefresh){this.refresh();}
this.selectees.filter(".ui-selected").each(function(){var selectee=$.data(this,"selectable-item");selectee.startselected=true;if(!event.metaKey&&!event.ctrlKey){selectee.$element.removeClass("ui-selected");selectee.selected=false;selectee.$element.addClass("ui-unselecting");selectee.unselecting=true;that._trigger("unselecting",event,{unselecting:selectee.element});}});$(event.target).parents().addBack().each(function(){var doSelect,selectee=$.data(this,"selectable-item");if(selectee){doSelect=(!event.metaKey&&!event.ctrlKey)||!selectee.$element.hasClass("ui-selected");selectee.$element.removeClass(doSelect?"ui-unselecting":"ui-selected").addClass(doSelect?"ui-selecting":"ui-unselecting");selectee.unselecting=!doSelect;selectee.selecting=doSelect;selectee.selected=doSelect;if(doSelect){that._trigger("selecting",event,{selecting:selectee.element});}else{that._trigger("unselecting",event,{unselecting:selectee.element});}
return false;}});},_mouseDrag:function(event){this.dragged=true;if(this.options.disabled){return;}
var tmp,that=this,options=this.options,x1=this.opos[0],y1=this.opos[1],x2=event.pageX,y2=event.pageY;if(x1>x2){tmp=x2;x2=x1;x1=tmp;}
if(y1>y2){tmp=y2;y2=y1;y1=tmp;}
this.helper.css({left:x1,top:y1,width:x2-x1,height:y2-y1});this.selectees.each(function(){var selectee=$.data(this,"selectable-item"),hit=false;if(!selectee||selectee.element===that.element[0]){return;}
if(options.tolerance==="touch"){hit=(!(selectee.left>x2||selectee.right<x1||selectee.top>y2||selectee.bottom<y1));}else if(options.tolerance==="fit"){hit=(selectee.left>x1&&selectee.right<x2&&selectee.top>y1&&selectee.bottom<y2);}
if(hit){if(selectee.selected){selectee.$element.removeClass("ui-selected");selectee.selected=false;}
if(selectee.unselecting){selectee.$element.removeClass("ui-unselecting");selectee.unselecting=false;}
if(!selectee.selecting){selectee.$element.addClass("ui-selecting");selectee.selecting=true;that._trigger("selecting",event,{selecting:selectee.element});}}else{if(selectee.selecting){if((event.metaKey||event.ctrlKey)&&selectee.startselected){selectee.$element.removeClass("ui-selecting");selectee.selecting=false;selectee.$element.addClass("ui-selected");selectee.selected=true;}else{selectee.$element.removeClass("ui-selecting");selectee.selecting=false;if(selectee.startselected){selectee.$element.addClass("ui-unselecting");selectee.unselecting=true;}
that._trigger("unselecting",event,{unselecting:selectee.element});}}
if(selectee.selected){if(!event.metaKey&&!event.ctrlKey&&!selectee.startselected){selectee.$element.removeClass("ui-selected");selectee.selected=false;selectee.$element.addClass("ui-unselecting");selectee.unselecting=true;that._trigger("unselecting",event,{unselecting:selectee.element});}}}});return false;},_mouseStop:function(event){var that=this;this.dragged=false;$(".ui-unselecting",this.element[0]).each(function(){var selectee=$.data(this,"selectable-item");selectee.$element.removeClass("ui-unselecting");selectee.unselecting=false;selectee.startselected=false;that._trigger("unselected",event,{unselected:selectee.element});});$(".ui-selecting",this.element[0]).each(function(){var selectee=$.data(this,"selectable-item");selectee.$element.removeClass("ui-selecting").addClass("ui-selected");selectee.selecting=false;selectee.selected=true;selectee.startselected=true;that._trigger("selected",event,{selected:selectee.element});});this._trigger("stop",event);this.helper.remove();return false;}});var sortable=$.widget("ui.sortable",$.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:false,options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1000,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(x,reference,size){return(x>=reference)&&(x<(reference+size));},_isFloating:function(item){return(/left|right/).test(item.css("float"))||(/inline|table-cell/).test(item.css("display"));},_create:function(){this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.offset=this.element.offset();this._mouseInit();this._setHandleClassName();this.ready=true;},_setOption:function(key,value){this._super(key,value);if(key==="handle"){this._setHandleClassName();}},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle");$.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle");});},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle");this._mouseDestroy();for(var i=this.items.length-1;i>=0;i--){this.items[i].item.removeData(this.widgetName+"-item");}
return this;},_mouseCapture:function(event,overrideHandle){var currentItem=null,validHandle=false,that=this;if(this.reverting){return false;}
if(this.options.disabled||this.options.type==="static"){return false;}
this._refreshItems(event);$(event.target).parents().each(function(){if($.data(this,that.widgetName+"-item")===that){currentItem=$(this);return false;}});if($.data(event.target,that.widgetName+"-item")===that){currentItem=$(event.target);}
if(!currentItem){return false;}
if(this.options.handle&&!overrideHandle){$(this.options.handle,currentItem).find("*").addBack().each(function(){if(this===event.target){validHandle=true;}});if(!validHandle){return false;}}
this.currentItem=currentItem;this._removeCurrentsFromItems();return true;},_mouseStart:function(event,overrideHandle,noActivation){var i,body,o=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(event);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};$.extend(this.offset,{click:{left:event.pageX-this.offset.left,top:event.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(event);this.originalPageX=event.pageX;this.originalPageY=event.pageY;(o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt));this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};if(this.helper[0]!==this.currentItem[0]){this.currentItem.hide();}
this._createPlaceholder();if(o.containment){this._setContainment();}
if(o.cursor&&o.cursor!=="auto"){body=this.document.find("body");this.storedCursor=body.css("cursor");body.css("cursor",o.cursor);this.storedStylesheet=$("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(body);}
if(o.opacity){if(this.helper.css("opacity")){this._storedOpacity=this.helper.css("opacity");}
this.helper.css("opacity",o.opacity);}
if(o.zIndex){if(this.helper.css("zIndex")){this._storedZIndex=this.helper.css("zIndex");}
this.helper.css("zIndex",o.zIndex);}
if(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"){this.overflowOffset=this.scrollParent.offset();}
this._trigger("start",event,this._uiHash());if(!this._preserveHelperProportions){this._cacheHelperProportions();}
if(!noActivation){for(i=this.containers.length-1;i>=0;i--){this.containers[i]._trigger("activate",event,this._uiHash(this));}}
if($.ui.ddmanager){$.ui.ddmanager.current=this;}
if($.ui.ddmanager&&!o.dropBehaviour){$.ui.ddmanager.prepareOffsets(this,event);}
this.dragging=true;this.helper.addClass("ui-sortable-helper");this._mouseDrag(event);return true;},_mouseDrag:function(event){var i,item,itemElement,intersection,o=this.options,scrolled=false;this.position=this._generatePosition(event);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs){this.lastPositionAbs=this.positionAbs;}
if(this.options.scroll){if(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"){if((this.overflowOffset.top+this.scrollParent[0].offsetHeight)-event.pageY<o.scrollSensitivity){this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop+o.scrollSpeed;}else if(event.pageY-this.overflowOffset.top<o.scrollSensitivity){this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop-o.scrollSpeed;}
if((this.overflowOffset.left+this.scrollParent[0].offsetWidth)-event.pageX<o.scrollSensitivity){this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft+o.scrollSpeed;}else if(event.pageX-this.overflowOffset.left<o.scrollSensitivity){this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft-o.scrollSpeed;}}else{if(event.pageY-this.document.scrollTop()<o.scrollSensitivity){scrolled=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed);}else if(this.window.height()-(event.pageY-this.document.scrollTop())<o.scrollSensitivity){scrolled=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed);}
if(event.pageX-this.document.scrollLeft()<o.scrollSensitivity){scrolled=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed);}else if(this.window.width()-(event.pageX-this.document.scrollLeft())<o.scrollSensitivity){scrolled=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed);}}
if(scrolled!==false&&$.ui.ddmanager&&!o.dropBehaviour){$.ui.ddmanager.prepareOffsets(this,event);}}
this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!=="y"){this.helper[0].style.left=this.position.left+"px";}
if(!this.options.axis||this.options.axis!=="x"){this.helper[0].style.top=this.position.top+"px";}
for(i=this.items.length-1;i>=0;i--){item=this.items[i];itemElement=item.item[0];intersection=this._intersectsWithPointer(item);if(!intersection){continue;}
if(item.instance!==this.currentContainer){continue;}
if(itemElement!==this.currentItem[0]&&this.placeholder[intersection===1?"next":"prev"]()[0]!==itemElement&&!$.contains(this.placeholder[0],itemElement)&&(this.options.type==="semi-dynamic"?!$.contains(this.element[0],itemElement):true)){this.direction=intersection===1?"down":"up";if(this.options.tolerance==="pointer"||this._intersectsWithSides(item)){this._rearrange(event,item);}else{break;}
this._trigger("change",event,this._uiHash());break;}}
this._contactContainers(event);if($.ui.ddmanager){$.ui.ddmanager.drag(this,event);}
this._trigger("sort",event,this._uiHash());this.lastPositionAbs=this.positionAbs;return false;},_mouseStop:function(event,noPropagation){if(!event){return;}
if($.ui.ddmanager&&!this.options.dropBehaviour){$.ui.ddmanager.drop(this,event);}
if(this.options.revert){var that=this,cur=this.placeholder.offset(),axis=this.options.axis,animation={};if(!axis||axis==="x"){animation.left=cur.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft);}
if(!axis||axis==="y"){animation.top=cur.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop);}
this.reverting=true;$(this.helper).animate(animation,parseInt(this.options.revert,10)||500,function(){that._clear(event);});}else{this._clear(event,noPropagation);}
return false;},cancel:function(){if(this.dragging){this._mouseUp({target:null});if(this.options.helper==="original"){this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");}else{this.currentItem.show();}
for(var i=this.containers.length-1;i>=0;i--){this.containers[i]._trigger("deactivate",null,this._uiHash(this));if(this.containers[i].containerCache.over){this.containers[i]._trigger("out",null,this._uiHash(this));this.containers[i].containerCache.over=0;}}}
if(this.placeholder){if(this.placeholder[0].parentNode){this.placeholder[0].parentNode.removeChild(this.placeholder[0]);}
if(this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode){this.helper.remove();}
$.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});if(this.domPosition.prev){$(this.domPosition.prev).after(this.currentItem);}else{$(this.domPosition.parent).prepend(this.currentItem);}}
return this;},serialize:function(o){var items=this._getItemsAsjQuery(o&&o.connected),str=[];o=o||{};$(items).each(function(){var res=($(o.item||this).attr(o.attribute||"id")||"").match(o.expression||(/(.+)[\-=_](.+)/));if(res){str.push((o.key||res[1]+"[]")+"="+(o.key&&o.expression?res[1]:res[2]));}});if(!str.length&&o.key){str.push(o.key+"=");}
return str.join("&");},toArray:function(o){var items=this._getItemsAsjQuery(o&&o.connected),ret=[];o=o||{};items.each(function(){ret.push($(o.item||this).attr(o.attribute||"id")||"");});return ret;},_intersectsWith:function(item){var x1=this.positionAbs.left,x2=x1+this.helperProportions.width,y1=this.positionAbs.top,y2=y1+this.helperProportions.height,l=item.left,r=l+item.width,t=item.top,b=t+item.height,dyClick=this.offset.click.top,dxClick=this.offset.click.left,isOverElementHeight=(this.options.axis==="x")||((y1+dyClick)>t&&(y1+dyClick)<b),isOverElementWidth=(this.options.axis==="y")||((x1+dxClick)>l&&(x1+dxClick)<r),isOverElement=isOverElementHeight&&isOverElementWidth;if(this.options.tolerance==="pointer"||this.options.forcePointerForContainers||(this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>item[this.floating?"width":"height"])){return isOverElement;}else{return(l<x1+(this.helperProportions.width/2)&&x2-(this.helperProportions.width/2)<r&&t<y1+(this.helperProportions.height/2)&&y2-(this.helperProportions.height/2)<b);}},_intersectsWithPointer:function(item){var isOverElementHeight=(this.options.axis==="x")||this._isOverAxis(this.positionAbs.top+this.offset.click.top,item.top,item.height),isOverElementWidth=(this.options.axis==="y")||this._isOverAxis(this.positionAbs.left+this.offset.click.left,item.left,item.width),isOverElement=isOverElementHeight&&isOverElementWidth,verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection();if(!isOverElement){return false;}
return this.floating?(((horizontalDirection&&horizontalDirection==="right")||verticalDirection==="down")?2:1):(verticalDirection&&(verticalDirection==="down"?2:1));},_intersectsWithSides:function(item){var isOverBottomHalf=this._isOverAxis(this.positionAbs.top+this.offset.click.top,item.top+(item.height/2),item.height),isOverRightHalf=this._isOverAxis(this.positionAbs.left+this.offset.click.left,item.left+(item.width/2),item.width),verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection();if(this.floating&&horizontalDirection){return((horizontalDirection==="right"&&isOverRightHalf)||(horizontalDirection==="left"&&!isOverRightHalf));}else{return verticalDirection&&((verticalDirection==="down"&&isOverBottomHalf)||(verticalDirection==="up"&&!isOverBottomHalf));}},_getDragVerticalDirection:function(){var delta=this.positionAbs.top-this.lastPositionAbs.top;return delta!==0&&(delta>0?"down":"up");},_getDragHorizontalDirection:function(){var delta=this.positionAbs.left-this.lastPositionAbs.left;return delta!==0&&(delta>0?"right":"left");},refresh:function(event){this._refreshItems(event);this._setHandleClassName();this.refreshPositions();return this;},_connectWith:function(){var options=this.options;return options.connectWith.constructor===String?[options.connectWith]:options.connectWith;},_getItemsAsjQuery:function(connected){var i,j,cur,inst,items=[],queries=[],connectWith=this._connectWith();if(connectWith&&connected){for(i=connectWith.length-1;i>=0;i--){cur=$(connectWith[i],this.document[0]);for(j=cur.length-1;j>=0;j--){inst=$.data(cur[j],this.widgetFullName);if(inst&&inst!==this&&!inst.options.disabled){queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element):$(inst.options.items,inst.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),inst]);}}}}
queries.push([$.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):$(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);function addItems(){items.push(this);}
for(i=queries.length-1;i>=0;i--){queries[i][0].each(addItems);}
return $(items);},_removeCurrentsFromItems:function(){var list=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=$.grep(this.items,function(item){for(var j=0;j<list.length;j++){if(list[j]===item.item[0]){return false;}}
return true;});},_refreshItems:function(event){this.items=[];this.containers=[this];var i,j,cur,inst,targetData,_queries,item,queriesLength,items=this.items,queries=[[$.isFunction(this.options.items)?this.options.items.call(this.element[0],event,{item:this.currentItem}):$(this.options.items,this.element),this]],connectWith=this._connectWith();if(connectWith&&this.ready){for(i=connectWith.length-1;i>=0;i--){cur=$(connectWith[i],this.document[0]);for(j=cur.length-1;j>=0;j--){inst=$.data(cur[j],this.widgetFullName);if(inst&&inst!==this&&!inst.options.disabled){queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element[0],event,{item:this.currentItem}):$(inst.options.items,inst.element),inst]);this.containers.push(inst);}}}}
for(i=queries.length-1;i>=0;i--){targetData=queries[i][1];_queries=queries[i][0];for(j=0,queriesLength=_queries.length;j<queriesLength;j++){item=$(_queries[j]);item.data(this.widgetName+"-item",targetData);items.push({item:item,instance:targetData,width:0,height:0,left:0,top:0});}}},refreshPositions:function(fast){this.floating=this.items.length?this.options.axis==="x"||this._isFloating(this.items[0].item):false;if(this.offsetParent&&this.helper){this.offset.parent=this._getParentOffset();}
var i,item,t,p;for(i=this.items.length-1;i>=0;i--){item=this.items[i];if(item.instance!==this.currentContainer&&this.currentContainer&&item.item[0]!==this.currentItem[0]){continue;}
t=this.options.toleranceElement?$(this.options.toleranceElement,item.item):item.item;if(!fast){item.width=t.outerWidth();item.height=t.outerHeight();}
p=t.offset();item.left=p.left;item.top=p.top;}
if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this);}else{for(i=this.containers.length-1;i>=0;i--){p=this.containers[i].element.offset();this.containers[i].containerCache.left=p.left;this.containers[i].containerCache.top=p.top;this.containers[i].containerCache.width=this.containers[i].element.outerWidth();this.containers[i].containerCache.height=this.containers[i].element.outerHeight();}}
return this;},_createPlaceholder:function(that){that=that||this;var className,o=that.options;if(!o.placeholder||o.placeholder.constructor===String){className=o.placeholder;o.placeholder={element:function(){var nodeName=that.currentItem[0].nodeName.toLowerCase(),element=$("<"+nodeName+">",that.document[0]).addClass(className||that.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");if(nodeName==="tbody"){that._createTrPlaceholder(that.currentItem.find("tr").eq(0),$("<tr>",that.document[0]).appendTo(element));}else if(nodeName==="tr"){that._createTrPlaceholder(that.currentItem,element);}else if(nodeName==="img"){element.attr("src",that.currentItem.attr("src"));}
if(!className){element.css("visibility","hidden");}
return element;},update:function(container,p){if(className&&!o.forcePlaceholderSize){return;}
if(!p.height()){p.height(that.currentItem.innerHeight()-parseInt(that.currentItem.css("paddingTop")||0,10)-parseInt(that.currentItem.css("paddingBottom")||0,10));}
if(!p.width()){p.width(that.currentItem.innerWidth()-parseInt(that.currentItem.css("paddingLeft")||0,10)-parseInt(that.currentItem.css("paddingRight")||0,10));}}};}
that.placeholder=$(o.placeholder.element.call(that.element,that.currentItem));that.currentItem.after(that.placeholder);o.placeholder.update(that,that.placeholder);},_createTrPlaceholder:function(sourceTr,targetTr){var that=this;sourceTr.children().each(function(){$("<td>&#160;</td>",that.document[0]).attr("colspan",$(this).attr("colspan")||1).appendTo(targetTr);});},_contactContainers:function(event){var i,j,dist,itemWithLeastDistance,posProperty,sizeProperty,cur,nearBottom,floating,axis,innermostContainer=null,innermostIndex=null;for(i=this.containers.length-1;i>=0;i--){if($.contains(this.currentItem[0],this.containers[i].element[0])){continue;}
if(this._intersectsWith(this.containers[i].containerCache)){if(innermostContainer&&$.contains(this.containers[i].element[0],innermostContainer.element[0])){continue;}
innermostContainer=this.containers[i];innermostIndex=i;}else{if(this.containers[i].containerCache.over){this.containers[i]._trigger("out",event,this._uiHash(this));this.containers[i].containerCache.over=0;}}}
if(!innermostContainer){return;}
if(this.containers.length===1){if(!this.containers[innermostIndex].containerCache.over){this.containers[innermostIndex]._trigger("over",event,this._uiHash(this));this.containers[innermostIndex].containerCache.over=1;}}else{dist=10000;itemWithLeastDistance=null;floating=innermostContainer.floating||this._isFloating(this.currentItem);posProperty=floating?"left":"top";sizeProperty=floating?"width":"height";axis=floating?"clientX":"clientY";for(j=this.items.length-1;j>=0;j--){if(!$.contains(this.containers[innermostIndex].element[0],this.items[j].item[0])){continue;}
if(this.items[j].item[0]===this.currentItem[0]){continue;}
cur=this.items[j].item.offset()[posProperty];nearBottom=false;if(event[axis]-cur>this.items[j][sizeProperty]/2){nearBottom=true;}
if(Math.abs(event[axis]-cur)<dist){dist=Math.abs(event[axis]-cur);itemWithLeastDistance=this.items[j];this.direction=nearBottom?"up":"down";}}
if(!itemWithLeastDistance&&!this.options.dropOnEmpty){return;}
if(this.currentContainer===this.containers[innermostIndex]){if(!this.currentContainer.containerCache.over){this.containers[innermostIndex]._trigger("over",event,this._uiHash());this.currentContainer.containerCache.over=1;}
return;}
itemWithLeastDistance?this._rearrange(event,itemWithLeastDistance,null,true):this._rearrange(event,null,this.containers[innermostIndex].element,true);this._trigger("change",event,this._uiHash());this.containers[innermostIndex]._trigger("change",event,this._uiHash(this));this.currentContainer=this.containers[innermostIndex];this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[innermostIndex]._trigger("over",event,this._uiHash(this));this.containers[innermostIndex].containerCache.over=1;}},_createHelper:function(event){var o=this.options,helper=$.isFunction(o.helper)?$(o.helper.apply(this.element[0],[event,this.currentItem])):(o.helper==="clone"?this.currentItem.clone():this.currentItem);if(!helper.parents("body").length){$(o.appendTo!=="parent"?o.appendTo:this.currentItem[0].parentNode)[0].appendChild(helper[0]);}
if(helper[0]===this.currentItem[0]){this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")};}
if(!helper[0].style.width||o.forceHelperSize){helper.width(this.currentItem.width());}
if(!helper[0].style.height||o.forceHelperSize){helper.height(this.currentItem.height());}
return helper;},_adjustOffsetFromHelper:function(obj){if(typeof obj==="string"){obj=obj.split(" ");}
if($.isArray(obj)){obj={left:+obj[0],top:+obj[1]||0};}
if("left"in obj){this.offset.click.left=obj.left+this.margins.left;}
if("right"in obj){this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left;}
if("top"in obj){this.offset.click.top=obj.top+this.margins.top;}
if("bottom"in obj){this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top;}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var po=this.offsetParent.offset();if(this.cssPosition==="absolute"&&this.scrollParent[0]!==this.document[0]&&$.contains(this.scrollParent[0],this.offsetParent[0])){po.left+=this.scrollParent.scrollLeft();po.top+=this.scrollParent.scrollTop();}
if(this.offsetParent[0]===this.document[0].body||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&$.ui.ie)){po={top:0,left:0};}
return{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)};},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var p=this.currentItem.position();return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:p.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()};}else{return{top:0,left:0};}},_cacheMargins:function(){this.margins={left:(parseInt(this.currentItem.css("marginLeft"),10)||0),top:(parseInt(this.currentItem.css("marginTop"),10)||0)};},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()};},_setContainment:function(){var ce,co,over,o=this.options;if(o.containment==="parent"){o.containment=this.helper[0].parentNode;}
if(o.containment==="document"||o.containment==="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,o.containment==="document"?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,(o.containment==="document"?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];}
if(!(/^(document|window|parent)$/).test(o.containment)){ce=$(o.containment)[0];co=$(o.containment).offset();over=($(ce).css("overflow")!=="hidden");this.containment=[co.left+(parseInt($(ce).css("borderLeftWidth"),10)||0)+(parseInt($(ce).css("paddingLeft"),10)||0)-this.margins.left,co.top+(parseInt($(ce).css("borderTopWidth"),10)||0)+(parseInt($(ce).css("paddingTop"),10)||0)-this.margins.top,co.left+(over?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt($(ce).css("borderLeftWidth"),10)||0)-(parseInt($(ce).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,co.top+(over?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt($(ce).css("borderTopWidth"),10)||0)-(parseInt($(ce).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top];}},_convertPositionTo:function(d,pos){if(!pos){pos=this.position;}
var mod=d==="absolute"?1:-1,scroll=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&$.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=(/(html|body)/i).test(scroll[0].tagName);return{top:(pos.top+
this.offset.relative.top*mod+
this.offset.parent.top*mod-
((this.cssPosition==="fixed"?-this.scrollParent.scrollTop():(scrollIsRootNode?0:scroll.scrollTop()))*mod)),left:(pos.left+
this.offset.relative.left*mod+
this.offset.parent.left*mod-
((this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())*mod))};},_generatePosition:function(event){var top,left,o=this.options,pageX=event.pageX,pageY=event.pageY,scroll=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&$.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=(/(html|body)/i).test(scroll[0].tagName);if(this.cssPosition==="relative"&&!(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0])){this.offset.relative=this._getRelativeOffset();}
if(this.originalPosition){if(this.containment){if(event.pageX-this.offset.click.left<this.containment[0]){pageX=this.containment[0]+this.offset.click.left;}
if(event.pageY-this.offset.click.top<this.containment[1]){pageY=this.containment[1]+this.offset.click.top;}
if(event.pageX-this.offset.click.left>this.containment[2]){pageX=this.containment[2]+this.offset.click.left;}
if(event.pageY-this.offset.click.top>this.containment[3]){pageY=this.containment[3]+this.offset.click.top;}}
if(o.grid){top=this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1];pageY=this.containment?((top-this.offset.click.top>=this.containment[1]&&top-this.offset.click.top<=this.containment[3])?top:((top-this.offset.click.top>=this.containment[1])?top-o.grid[1]:top+o.grid[1])):top;left=this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0];pageX=this.containment?((left-this.offset.click.left>=this.containment[0]&&left-this.offset.click.left<=this.containment[2])?left:((left-this.offset.click.left>=this.containment[0])?left-o.grid[0]:left+o.grid[0])):left;}}
return{top:(pageY-
this.offset.click.top-
this.offset.relative.top-
this.offset.parent.top+
((this.cssPosition==="fixed"?-this.scrollParent.scrollTop():(scrollIsRootNode?0:scroll.scrollTop())))),left:(pageX-
this.offset.click.left-
this.offset.relative.left-
this.offset.parent.left+
((this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())))};},_rearrange:function(event,i,a,hardRefresh){a?a[0].appendChild(this.placeholder[0]):i.item[0].parentNode.insertBefore(this.placeholder[0],(this.direction==="down"?i.item[0]:i.item[0].nextSibling));this.counter=this.counter?++this.counter:1;var counter=this.counter;this._delay(function(){if(counter===this.counter){this.refreshPositions(!hardRefresh);}});},_clear:function(event,noPropagation){this.reverting=false;var i,delayedTriggers=[];if(!this._noFinalSort&&this.currentItem.parent().length){this.placeholder.before(this.currentItem);}
this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(i in this._storedCSS){if(this._storedCSS[i]==="auto"||this._storedCSS[i]==="static"){this._storedCSS[i]="";}}
this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");}else{this.currentItem.show();}
if(this.fromOutside&&!noPropagation){delayedTriggers.push(function(event){this._trigger("receive",event,this._uiHash(this.fromOutside));});}
if((this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!noPropagation){delayedTriggers.push(function(event){this._trigger("update",event,this._uiHash());});}
if(this!==this.currentContainer){if(!noPropagation){delayedTriggers.push(function(event){this._trigger("remove",event,this._uiHash());});delayedTriggers.push((function(c){return function(event){c._trigger("receive",event,this._uiHash(this));};}).call(this,this.currentContainer));delayedTriggers.push((function(c){return function(event){c._trigger("update",event,this._uiHash(this));};}).call(this,this.currentContainer));}}
function delayEvent(type,instance,container){return function(event){container._trigger(type,event,instance._uiHash(instance));};}
for(i=this.containers.length-1;i>=0;i--){if(!noPropagation){delayedTriggers.push(delayEvent("deactivate",this,this.containers[i]));}
if(this.containers[i].containerCache.over){delayedTriggers.push(delayEvent("out",this,this.containers[i]));this.containers[i].containerCache.over=0;}}
if(this.storedCursor){this.document.find("body").css("cursor",this.storedCursor);this.storedStylesheet.remove();}
if(this._storedOpacity){this.helper.css("opacity",this._storedOpacity);}
if(this._storedZIndex){this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex);}
this.dragging=false;if(!noPropagation){this._trigger("beforeStop",event,this._uiHash());}
this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(!this.cancelHelperRemoval){if(this.helper[0]!==this.currentItem[0]){this.helper.remove();}
this.helper=null;}
if(!noPropagation){for(i=0;i<delayedTriggers.length;i++){delayedTriggers[i].call(this,event);}
this._trigger("stop",event,this._uiHash());}
this.fromOutside=false;return!this.cancelHelperRemoval;},_trigger:function(){if($.Widget.prototype._trigger.apply(this,arguments)===false){this.cancel();}},_uiHash:function(_inst){var inst=_inst||this;return{helper:inst.helper,placeholder:inst.placeholder||$([]),position:inst.position,originalPosition:inst.originalPosition,offset:inst.positionAbs,item:inst.currentItem,sender:_inst?_inst.element:null};}});var accordion=$.widget("ui.accordion",{version:"1.11.4",options:{active:0,animate:{},collapsible:false,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var options=this.options;this.prevShow=this.prevHide=$();this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist");if(!options.collapsible&&(options.active===false||options.active==null)){options.active=0;}
this._processPanels();if(options.active<0){options.active+=this.headers.length;}
this._refresh();},_getCreateEventData:function(){return{header:this.active,panel:!this.active.length?$():this.active.next()};},_createIcons:function(){var icons=this.options.icons;if(icons){$("<span>").addClass("ui-accordion-header-icon ui-icon "+icons.header).prependTo(this.headers);this.active.children(".ui-accordion-header-icon").removeClass(icons.header).addClass(icons.activeHeader);this.headers.addClass("ui-accordion-icons");}},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove();},_destroy:function(){var contents;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-state-default "+"ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").removeUniqueId();this._destroyIcons();contents=this.headers.next().removeClass("ui-helper-reset ui-widget-content ui-corner-bottom "+"ui-accordion-content ui-accordion-content-active ui-state-disabled").css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeUniqueId();if(this.options.heightStyle!=="content"){contents.css("height","");}},_setOption:function(key,value){if(key==="active"){this._activate(value);return;}
if(key==="event"){if(this.options.event){this._off(this.headers,this.options.event);}
this._setupEvents(value);}
this._super(key,value);if(key==="collapsible"&&!value&&this.options.active===false){this._activate(0);}
if(key==="icons"){this._destroyIcons();if(value){this._createIcons();}}
if(key==="disabled"){this.element.toggleClass("ui-state-disabled",!!value).attr("aria-disabled",value);this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!value);}},_keydown:function(event){if(event.altKey||event.ctrlKey){return;}
var keyCode=$.ui.keyCode,length=this.headers.length,currentIndex=this.headers.index(event.target),toFocus=false;switch(event.keyCode){case keyCode.RIGHT:case keyCode.DOWN:toFocus=this.headers[(currentIndex+1)%length];break;case keyCode.LEFT:case keyCode.UP:toFocus=this.headers[(currentIndex-1+length)%length];break;case keyCode.SPACE:case keyCode.ENTER:this._eventHandler(event);break;case keyCode.HOME:toFocus=this.headers[0];break;case keyCode.END:toFocus=this.headers[length-1];break;}
if(toFocus){$(event.target).attr("tabIndex",-1);$(toFocus).attr("tabIndex",0);toFocus.focus();event.preventDefault();}},_panelKeyDown:function(event){if(event.keyCode===$.ui.keyCode.UP&&event.ctrlKey){$(event.currentTarget).prev().focus();}},refresh:function(){var options=this.options;this._processPanels();if((options.active===false&&options.collapsible===true)||!this.headers.length){options.active=false;this.active=$();}else if(options.active===false){this._activate(0);}else if(this.active.length&&!$.contains(this.element[0],this.active[0])){if(this.headers.length===this.headers.find(".ui-state-disabled").length){options.active=false;this.active=$();}else{this._activate(Math.max(0,options.active-1));}}else{options.active=this.headers.index(this.active);}
this._destroyIcons();this._refresh();},_processPanels:function(){var prevHeaders=this.headers,prevPanels=this.panels;this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-state-default ui-corner-all");this.panels=this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide();if(prevPanels){this._off(prevHeaders.not(this.headers));this._off(prevPanels.not(this.panels));}},_refresh:function(){var maxHeight,options=this.options,heightStyle=options.heightStyle,parent=this.element.parent();this.active=this._findActive(options.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all");this.active.next().addClass("ui-accordion-content-active").show();this.headers.attr("role","tab").each(function(){var header=$(this),headerId=header.uniqueId().attr("id"),panel=header.next(),panelId=panel.uniqueId().attr("id");header.attr("aria-controls",panelId);panel.attr("aria-labelledby",headerId);}).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide();if(!this.active.length){this.headers.eq(0).attr("tabIndex",0);}else{this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"});}
this._createIcons();this._setupEvents(options.event);if(heightStyle==="fill"){maxHeight=parent.height();this.element.siblings(":visible").each(function(){var elem=$(this),position=elem.css("position");if(position==="absolute"||position==="fixed"){return;}
maxHeight-=elem.outerHeight(true);});this.headers.each(function(){maxHeight-=$(this).outerHeight(true);});this.headers.next().each(function(){$(this).height(Math.max(0,maxHeight-
$(this).innerHeight()+$(this).height()));}).css("overflow","auto");}else if(heightStyle==="auto"){maxHeight=0;this.headers.next().each(function(){maxHeight=Math.max(maxHeight,$(this).css("height","").height());}).height(maxHeight);}},_activate:function(index){var active=this._findActive(index)[0];if(active===this.active[0]){return;}
active=active||this.active[0];this._eventHandler({target:active,currentTarget:active,preventDefault:$.noop});},_findActive:function(selector){return typeof selector==="number"?this.headers.eq(selector):$();},_setupEvents:function(event){var events={keydown:"_keydown"};if(event){$.each(event.split(" "),function(index,eventName){events[eventName]="_eventHandler";});}
this._off(this.headers.add(this.headers.next()));this._on(this.headers,events);this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._hoverable(this.headers);this._focusable(this.headers);},_eventHandler:function(event){var options=this.options,active=this.active,clicked=$(event.currentTarget),clickedIsActive=clicked[0]===active[0],collapsing=clickedIsActive&&options.collapsible,toShow=collapsing?$():clicked.next(),toHide=active.next(),eventData={oldHeader:active,oldPanel:toHide,newHeader:collapsing?$():clicked,newPanel:toShow};event.preventDefault();if((clickedIsActive&&!options.collapsible)||(this._trigger("beforeActivate",event,eventData)===false)){return;}
options.active=collapsing?false:this.headers.index(clicked);this.active=clickedIsActive?$():clicked;this._toggle(eventData);active.removeClass("ui-accordion-header-active ui-state-active");if(options.icons){active.children(".ui-accordion-header-icon").removeClass(options.icons.activeHeader).addClass(options.icons.header);}
if(!clickedIsActive){clicked.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top");if(options.icons){clicked.children(".ui-accordion-header-icon").removeClass(options.icons.header).addClass(options.icons.activeHeader);}
clicked.next().addClass("ui-accordion-content-active");}},_toggle:function(data){var toShow=data.newPanel,toHide=this.prevShow.length?this.prevShow:data.oldPanel;this.prevShow.add(this.prevHide).stop(true,true);this.prevShow=toShow;this.prevHide=toHide;if(this.options.animate){this._animate(toShow,toHide,data);}else{toHide.hide();toShow.show();this._toggleComplete(data);}
toHide.attr({"aria-hidden":"true"});toHide.prev().attr({"aria-selected":"false","aria-expanded":"false"});if(toShow.length&&toHide.length){toHide.prev().attr({"tabIndex":-1,"aria-expanded":"false"});}else if(toShow.length){this.headers.filter(function(){return parseInt($(this).attr("tabIndex"),10)===0;}).attr("tabIndex",-1);}
toShow.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0});},_animate:function(toShow,toHide,data){var total,easing,duration,that=this,adjust=0,boxSizing=toShow.css("box-sizing"),down=toShow.length&&(!toHide.length||(toShow.index()<toHide.index())),animate=this.options.animate||{},options=down&&animate.down||animate,complete=function(){that._toggleComplete(data);};if(typeof options==="number"){duration=options;}
if(typeof options==="string"){easing=options;}
easing=easing||options.easing||animate.easing;duration=duration||options.duration||animate.duration;if(!toHide.length){return toShow.animate(this.showProps,duration,easing,complete);}
if(!toShow.length){return toHide.animate(this.hideProps,duration,easing,complete);}
total=toShow.show().outerHeight();toHide.animate(this.hideProps,{duration:duration,easing:easing,step:function(now,fx){fx.now=Math.round(now);}});toShow.hide().animate(this.showProps,{duration:duration,easing:easing,complete:complete,step:function(now,fx){fx.now=Math.round(now);if(fx.prop!=="height"){if(boxSizing==="content-box"){adjust+=fx.now;}}else if(that.options.heightStyle!=="content"){fx.now=Math.round(total-toHide.outerHeight()-adjust);adjust=0;}}});},_toggleComplete:function(data){var toHide=data.oldPanel;toHide.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all");if(toHide.length){toHide.parent()[0].className=toHide.parent()[0].className;}
this._trigger("activate",null,data);}});var menu=$.widget("ui.menu",{version:"1.11.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.mouseHandled=false;this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0});if(this.options.disabled){this.element.addClass("ui-state-disabled").attr("aria-disabled","true");}
this._on({"mousedown .ui-menu-item":function(event){event.preventDefault();},"click .ui-menu-item":function(event){var target=$(event.target);if(!this.mouseHandled&&target.not(".ui-state-disabled").length){this.select(event);if(!event.isPropagationStopped()){this.mouseHandled=true;}
if(target.has(".ui-menu").length){this.expand(event);}else if(!this.element.is(":focus")&&$(this.document[0].activeElement).closest(".ui-menu").length){this.element.trigger("focus",[true]);if(this.active&&this.active.parents(".ui-menu").length===1){clearTimeout(this.timer);}}}},"mouseenter .ui-menu-item":function(event){if(this.previousFilter){return;}
var target=$(event.currentTarget);target.siblings(".ui-state-active").removeClass("ui-state-active");this.focus(event,target);},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(event,keepActiveItem){var item=this.active||this.element.find(this.options.items).eq(0);if(!keepActiveItem){this.focus(event,item);}},blur:function(event){this._delay(function(){if(!$.contains(this.element[0],this.document[0].activeElement)){this.collapseAll(event);}});},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(event){if(this._closeOnDocumentClick(event)){this.collapseAll(event);}
this.mouseHandled=false;}});},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var elem=$(this);if(elem.data("ui-menu-submenu-carat")){elem.remove();}});this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content");},_keydown:function(event){var match,prev,character,skip,preventDefault=true;switch(event.keyCode){case $.ui.keyCode.PAGE_UP:this.previousPage(event);break;case $.ui.keyCode.PAGE_DOWN:this.nextPage(event);break;case $.ui.keyCode.HOME:this._move("first","first",event);break;case $.ui.keyCode.END:this._move("last","last",event);break;case $.ui.keyCode.UP:this.previous(event);break;case $.ui.keyCode.DOWN:this.next(event);break;case $.ui.keyCode.LEFT:this.collapse(event);break;case $.ui.keyCode.RIGHT:if(this.active&&!this.active.is(".ui-state-disabled")){this.expand(event);}
break;case $.ui.keyCode.ENTER:case $.ui.keyCode.SPACE:this._activate(event);break;case $.ui.keyCode.ESCAPE:this.collapse(event);break;default:preventDefault=false;prev=this.previousFilter||"";character=String.fromCharCode(event.keyCode);skip=false;clearTimeout(this.filterTimer);if(character===prev){skip=true;}else{character=prev+character;}
match=this._filterMenuItems(character);match=skip&&match.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):match;if(!match.length){character=String.fromCharCode(event.keyCode);match=this._filterMenuItems(character);}
if(match.length){this.focus(event,match);this.previousFilter=character;this.filterTimer=this._delay(function(){delete this.previousFilter;},1000);}else{delete this.previousFilter;}}
if(preventDefault){event.preventDefault();}},_activate:function(event){if(!this.active.is(".ui-state-disabled")){if(this.active.is("[aria-haspopup='true']")){this.expand(event);}else{this.select(event);}}},refresh:function(){var menus,items,that=this,icon=this.options.icons.submenu,submenus=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length);submenus.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var menu=$(this),item=menu.parent(),submenuCarat=$("<span>").addClass("ui-menu-icon ui-icon "+icon).data("ui-menu-submenu-carat",true);item.attr("aria-haspopup","true").prepend(submenuCarat);menu.attr("aria-labelledby",item.attr("id"));});menus=submenus.add(this.element);items=menus.find(this.options.items);items.not(".ui-menu-item").each(function(){var item=$(this);if(that._isDivider(item)){item.addClass("ui-widget-content ui-menu-divider");}});items.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()});items.filter(".ui-state-disabled").attr("aria-disabled","true");if(this.active&&!$.contains(this.element[0],this.active[0])){this.blur();}},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role];},_setOption:function(key,value){if(key==="icons"){this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(value.submenu);}
if(key==="disabled"){this.element.toggleClass("ui-state-disabled",!!value).attr("aria-disabled",value);}
this._super(key,value);},focus:function(event,item){var nested,focused;this.blur(event,event&&event.type==="focus");this._scrollIntoView(item);this.active=item.first();focused=this.active.addClass("ui-state-focus").removeClass("ui-state-active");if(this.options.role){this.element.attr("aria-activedescendant",focused.attr("id"));}
this.active.parent().closest(".ui-menu-item").addClass("ui-state-active");if(event&&event.type==="keydown"){this._close();}else{this.timer=this._delay(function(){this._close();},this.delay);}
nested=item.children(".ui-menu");if(nested.length&&event&&(/^mouse/.test(event.type))){this._startOpening(nested);}
this.activeMenu=item.parent();this._trigger("focus",event,{item:item});},_scrollIntoView:function(item){var borderTop,paddingTop,offset,scroll,elementHeight,itemHeight;if(this._hasScroll()){borderTop=parseFloat($.css(this.activeMenu[0],"borderTopWidth"))||0;paddingTop=parseFloat($.css(this.activeMenu[0],"paddingTop"))||0;offset=item.offset().top-this.activeMenu.offset().top-borderTop-paddingTop;scroll=this.activeMenu.scrollTop();elementHeight=this.activeMenu.height();itemHeight=item.outerHeight();if(offset<0){this.activeMenu.scrollTop(scroll+offset);}else if(offset+itemHeight>elementHeight){this.activeMenu.scrollTop(scroll+offset-elementHeight+itemHeight);}}},blur:function(event,fromFocus){if(!fromFocus){clearTimeout(this.timer);}
if(!this.active){return;}
this.active.removeClass("ui-state-focus");this.active=null;this._trigger("blur",event,{item:this.active});},_startOpening:function(submenu){clearTimeout(this.timer);if(submenu.attr("aria-hidden")!=="true"){return;}
this.timer=this._delay(function(){this._close();this._open(submenu);},this.delay);},_open:function(submenu){var position=$.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(submenu.parents(".ui-menu")).hide().attr("aria-hidden","true");submenu.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(position);},collapseAll:function(event,all){clearTimeout(this.timer);this.timer=this._delay(function(){var currentMenu=all?this.element:$(event&&event.target).closest(this.element.find(".ui-menu"));if(!currentMenu.length){currentMenu=this.element;}
this._close(currentMenu);this.blur(event);this.activeMenu=currentMenu;},this.delay);},_close:function(startMenu){if(!startMenu){startMenu=this.active?this.active.parent():this.element;}
startMenu.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active");},_closeOnDocumentClick:function(event){return!$(event.target).closest(".ui-menu").length;},_isDivider:function(item){return!/[^\-\u2014\u2013\s]/.test(item.text());},collapse:function(event){var newItem=this.active&&this.active.parent().closest(".ui-menu-item",this.element);if(newItem&&newItem.length){this._close();this.focus(event,newItem);}},expand:function(event){var newItem=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();if(newItem&&newItem.length){this._open(newItem.parent());this._delay(function(){this.focus(event,newItem);});}},next:function(event){this._move("next","first",event);},previous:function(event){this._move("prev","last",event);},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length;},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length;},_move:function(direction,filter,event){var next;if(this.active){if(direction==="first"||direction==="last"){next=this.active
[direction==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1);}else{next=this.active
[direction+"All"](".ui-menu-item").eq(0);}}
if(!next||!next.length||!this.active){next=this.activeMenu.find(this.options.items)[filter]();}
this.focus(event,next);},nextPage:function(event){var item,base,height;if(!this.active){this.next(event);return;}
if(this.isLastItem()){return;}
if(this._hasScroll()){base=this.active.offset().top;height=this.element.height();this.active.nextAll(".ui-menu-item").each(function(){item=$(this);return item.offset().top-base-height<0;});this.focus(event,item);}else{this.focus(event,this.activeMenu.find(this.options.items)
[!this.active?"first":"last"]());}},previousPage:function(event){var item,base,height;if(!this.active){this.next(event);return;}
if(this.isFirstItem()){return;}
if(this._hasScroll()){base=this.active.offset().top;height=this.element.height();this.active.prevAll(".ui-menu-item").each(function(){item=$(this);return item.offset().top-base+height>0;});this.focus(event,item);}else{this.focus(event,this.activeMenu.find(this.options.items).first());}},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight");},select:function(event){this.active=this.active||$(event.target).closest(".ui-menu-item");var ui={item:this.active};if(!this.active.has(".ui-menu").length){this.collapseAll(event,true);}
this._trigger("select",event,ui);},_filterMenuItems:function(character){var escapedCharacter=character.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),regex=new RegExp("^"+escapedCharacter,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return regex.test($.trim($(this).text()));});}});$.widget("ui.autocomplete",{version:"1.11.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:false,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var suppressKeyPress,suppressKeyPressRepeat,suppressInput,nodeName=this.element[0].nodeName.toLowerCase(),isTextarea=nodeName==="textarea",isInput=nodeName==="input";this.isMultiLine=isTextarea?true:isInput?false:this.element.prop("isContentEditable");this.valueMethod=this.element[isTextarea||isInput?"val":"text"];this.isNewMenu=true;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off");this._on(this.element,{keydown:function(event){if(this.element.prop("readOnly")){suppressKeyPress=true;suppressInput=true;suppressKeyPressRepeat=true;return;}
suppressKeyPress=false;suppressInput=false;suppressKeyPressRepeat=false;var keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.PAGE_UP:suppressKeyPress=true;this._move("previousPage",event);break;case keyCode.PAGE_DOWN:suppressKeyPress=true;this._move("nextPage",event);break;case keyCode.UP:suppressKeyPress=true;this._keyEvent("previous",event);break;case keyCode.DOWN:suppressKeyPress=true;this._keyEvent("next",event);break;case keyCode.ENTER:if(this.menu.active){suppressKeyPress=true;event.preventDefault();this.menu.select(event);}
break;case keyCode.TAB:if(this.menu.active){this.menu.select(event);}
break;case keyCode.ESCAPE:if(this.menu.element.is(":visible")){if(!this.isMultiLine){this._value(this.term);}
this.close(event);event.preventDefault();}
break;default:suppressKeyPressRepeat=true;this._searchTimeout(event);break;}},keypress:function(event){if(suppressKeyPress){suppressKeyPress=false;if(!this.isMultiLine||this.menu.element.is(":visible")){event.preventDefault();}
return;}
if(suppressKeyPressRepeat){return;}
var keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.PAGE_UP:this._move("previousPage",event);break;case keyCode.PAGE_DOWN:this._move("nextPage",event);break;case keyCode.UP:this._keyEvent("previous",event);break;case keyCode.DOWN:this._keyEvent("next",event);break;}},input:function(event){if(suppressInput){suppressInput=false;event.preventDefault();return;}
this._searchTimeout(event);},focus:function(){this.selectedItem=null;this.previous=this._value();},blur:function(event){if(this.cancelBlur){delete this.cancelBlur;return;}
clearTimeout(this.searching);this.close(event);this._change(event);}});this._initSource();this.menu=$("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance");this._on(this.menu.element,{mousedown:function(event){event.preventDefault();this.cancelBlur=true;this._delay(function(){delete this.cancelBlur;});var menuElement=this.menu.element[0];if(!$(event.target).closest(".ui-menu-item").length){this._delay(function(){var that=this;this.document.one("mousedown",function(event){if(event.target!==that.element[0]&&event.target!==menuElement&&!$.contains(menuElement,event.target)){that.close();}});});}},menufocus:function(event,ui){var label,item;if(this.isNewMenu){this.isNewMenu=false;if(event.originalEvent&&/^mouse/.test(event.originalEvent.type)){this.menu.blur();this.document.one("mousemove",function(){$(event.target).trigger(event.originalEvent);});return;}}
item=ui.item.data("ui-autocomplete-item");if(false!==this._trigger("focus",event,{item:item})){if(event.originalEvent&&/^key/.test(event.originalEvent.type)){this._value(item.value);}}
label=ui.item.attr("aria-label")||item.value;if(label&&$.trim(label).length){this.liveRegion.children().hide();$("<div>").text(label).appendTo(this.liveRegion);}},menuselect:function(event,ui){var item=ui.item.data("ui-autocomplete-item"),previous=this.previous;if(this.element[0]!==this.document[0].activeElement){this.element.focus();this.previous=previous;this._delay(function(){this.previous=previous;this.selectedItem=item;});}
if(false!==this._trigger("select",event,{item:item})){this._value(item.value);}
this.term=this._value();this.close(event);this.selectedItem=item;}});this.liveRegion=$("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body);this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete");}});},_destroy:function(){clearTimeout(this.searching);this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete");this.menu.element.remove();this.liveRegion.remove();},_setOption:function(key,value){this._super(key,value);if(key==="source"){this._initSource();}
if(key==="appendTo"){this.menu.element.appendTo(this._appendTo());}
if(key==="disabled"&&value&&this.xhr){this.xhr.abort();}},_appendTo:function(){var element=this.options.appendTo;if(element){element=element.jquery||element.nodeType?$(element):this.document.find(element).eq(0);}
if(!element||!element[0]){element=this.element.closest(".ui-front");}
if(!element.length){element=this.document[0].body;}
return element;},_initSource:function(){var array,url,that=this;if($.isArray(this.options.source)){array=this.options.source;this.source=function(request,response){response($.ui.autocomplete.filter(array,request.term));};}else if(typeof this.options.source==="string"){url=this.options.source;this.source=function(request,response){if(that.xhr){that.xhr.abort();}
that.xhr=$.ajax({url:url,data:request,dataType:"json",success:function(data){response(data);},error:function(){response([]);}});};}else{this.source=this.options.source;}},_searchTimeout:function(event){clearTimeout(this.searching);this.searching=this._delay(function(){var equalValues=this.term===this._value(),menuVisible=this.menu.element.is(":visible"),modifierKey=event.altKey||event.ctrlKey||event.metaKey||event.shiftKey;if(!equalValues||(equalValues&&!menuVisible&&!modifierKey)){this.selectedItem=null;this.search(null,event);}},this.options.delay);},search:function(value,event){value=value!=null?value:this._value();this.term=this._value();if(value.length<this.options.minLength){return this.close(event);}
if(this._trigger("search",event)===false){return;}
return this._search(value);},_search:function(value){this.pending++;this.element.addClass("ui-autocomplete-loading");this.cancelSearch=false;this.source({term:value},this._response());},_response:function(){var index=++this.requestIndex;return $.proxy(function(content){if(index===this.requestIndex){this.__response(content);}
this.pending--;if(!this.pending){this.element.removeClass("ui-autocomplete-loading");}},this);},__response:function(content){if(content){content=this._normalize(content);}
this._trigger("response",null,{content:content});if(!this.options.disabled&&content&&content.length&&!this.cancelSearch){this._suggest(content);this._trigger("open");}else{this._close();}},close:function(event){this.cancelSearch=true;this._close(event);},_close:function(event){if(this.menu.element.is(":visible")){this.menu.element.hide();this.menu.blur();this.isNewMenu=true;this._trigger("close",event);}},_change:function(event){if(this.previous!==this._value()){this._trigger("change",event,{item:this.selectedItem});}},_normalize:function(items){if(items.length&&items[0].label&&items[0].value){return items;}
return $.map(items,function(item){if(typeof item==="string"){return{label:item,value:item};}
return $.extend({},item,{label:item.label||item.value,value:item.value||item.label});});},_suggest:function(items){var ul=this.menu.element.empty();this._renderMenu(ul,items);this.isNewMenu=true;this.menu.refresh();ul.show();this._resizeMenu();ul.position($.extend({of:this.element},this.options.position));if(this.options.autoFocus){this.menu.next();}},_resizeMenu:function(){var ul=this.menu.element;ul.outerWidth(Math.max(ul.width("").outerWidth()+1,this.element.outerWidth()));},_renderMenu:function(ul,items){var that=this;$.each(items,function(index,item){that._renderItemData(ul,item);});},_renderItemData:function(ul,item){return this._renderItem(ul,item).data("ui-autocomplete-item",item);},_renderItem:function(ul,item){return $("<li>").text(item.label).appendTo(ul);},_move:function(direction,event){if(!this.menu.element.is(":visible")){this.search(null,event);return;}
if(this.menu.isFirstItem()&&/^previous/.test(direction)||this.menu.isLastItem()&&/^next/.test(direction)){if(!this.isMultiLine){this._value(this.term);}
this.menu.blur();return;}
this.menu[direction](event);},widget:function(){return this.menu.element;},_value:function(){return this.valueMethod.apply(this.element,arguments);},_keyEvent:function(keyEvent,event){if(!this.isMultiLine||this.menu.element.is(":visible")){this._move(keyEvent,event);event.preventDefault();}}});$.extend($.ui.autocomplete,{escapeRegex:function(value){return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");},filter:function(array,term){var matcher=new RegExp($.ui.autocomplete.escapeRegex(term),"i");return $.grep(array,function(value){return matcher.test(value.label||value.value||value);});}});$.widget("ui.autocomplete",$.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(amount){return amount+(amount>1?" results are":" result is")+" available, use up and down arrow keys to navigate.";}}},__response:function(content){var message;this._superApply(arguments);if(this.options.disabled||this.cancelSearch){return;}
if(content&&content.length){message=this.options.messages.results(content.length);}else{message=this.options.messages.noResults;}
this.liveRegion.children().hide();$("<div>").text(message).appendTo(this.liveRegion);}});var autocomplete=$.ui.autocomplete;var lastActive,baseClasses="ui-button ui-widget ui-state-default ui-corner-all",typeClasses="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",formResetHandler=function(){var form=$(this);setTimeout(function(){form.find(":ui-button").button("refresh");},1);},radioGroup=function(radio){var name=radio.name,form=radio.form,radios=$([]);if(name){name=name.replace(/'/g,"\\'");if(form){radios=$(form).find("[name='"+name+"'][type=radio]");}else{radios=$("[name='"+name+"'][type=radio]",radio.ownerDocument).filter(function(){return!this.form;});}}
return radios;};$.widget("ui.button",{version:"1.11.4",defaultElement:"<button>",options:{disabled:null,text:true,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,formResetHandler);if(typeof this.options.disabled!=="boolean"){this.options.disabled=!!this.element.prop("disabled");}else{this.element.prop("disabled",this.options.disabled);}
this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var that=this,options=this.options,toggleButton=this.type==="checkbox"||this.type==="radio",activeClass=!toggleButton?"ui-state-active":"";if(options.label===null){options.label=(this.type==="input"?this.buttonElement.val():this.buttonElement.html());}
this._hoverable(this.buttonElement);this.buttonElement.addClass(baseClasses).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){if(options.disabled){return;}
if(this===lastActive){$(this).addClass("ui-state-active");}}).bind("mouseleave"+this.eventNamespace,function(){if(options.disabled){return;}
$(this).removeClass(activeClass);}).bind("click"+this.eventNamespace,function(event){if(options.disabled){event.preventDefault();event.stopImmediatePropagation();}});this._on({focus:function(){this.buttonElement.addClass("ui-state-focus");},blur:function(){this.buttonElement.removeClass("ui-state-focus");}});if(toggleButton){this.element.bind("change"+this.eventNamespace,function(){that.refresh();});}
if(this.type==="checkbox"){this.buttonElement.bind("click"+this.eventNamespace,function(){if(options.disabled){return false;}});}else if(this.type==="radio"){this.buttonElement.bind("click"+this.eventNamespace,function(){if(options.disabled){return false;}
$(this).addClass("ui-state-active");that.buttonElement.attr("aria-pressed","true");var radio=that.element[0];radioGroup(radio).not(radio).map(function(){return $(this).button("widget")[0];}).removeClass("ui-state-active").attr("aria-pressed","false");});}else{this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(options.disabled){return false;}
$(this).addClass("ui-state-active");lastActive=this;that.document.one("mouseup",function(){lastActive=null;});}).bind("mouseup"+this.eventNamespace,function(){if(options.disabled){return false;}
$(this).removeClass("ui-state-active");}).bind("keydown"+this.eventNamespace,function(event){if(options.disabled){return false;}
if(event.keyCode===$.ui.keyCode.SPACE||event.keyCode===$.ui.keyCode.ENTER){$(this).addClass("ui-state-active");}}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){$(this).removeClass("ui-state-active");});if(this.buttonElement.is("a")){this.buttonElement.keyup(function(event){if(event.keyCode===$.ui.keyCode.SPACE){$(this).click();}});}}
this._setOption("disabled",options.disabled);this._resetButton();},_determineButtonType:function(){var ancestor,labelSelector,checked;if(this.element.is("[type=checkbox]")){this.type="checkbox";}else if(this.element.is("[type=radio]")){this.type="radio";}else if(this.element.is("input")){this.type="input";}else{this.type="button";}
if(this.type==="checkbox"||this.type==="radio"){ancestor=this.element.parents().last();labelSelector="label[for='"+this.element.attr("id")+"']";this.buttonElement=ancestor.find(labelSelector);if(!this.buttonElement.length){ancestor=ancestor.length?ancestor.siblings():this.element.siblings();this.buttonElement=ancestor.filter(labelSelector);if(!this.buttonElement.length){this.buttonElement=ancestor.find(labelSelector);}}
this.element.addClass("ui-helper-hidden-accessible");checked=this.element.is(":checked");if(checked){this.buttonElement.addClass("ui-state-active");}
this.buttonElement.prop("aria-pressed",checked);}else{this.buttonElement=this.element;}},widget:function(){return this.buttonElement;},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass(baseClasses+" ui-state-active "+typeClasses).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());if(!this.hasTitle){this.buttonElement.removeAttr("title");}},_setOption:function(key,value){this._super(key,value);if(key==="disabled"){this.widget().toggleClass("ui-state-disabled",!!value);this.element.prop("disabled",!!value);if(value){if(this.type==="checkbox"||this.type==="radio"){this.buttonElement.removeClass("ui-state-focus");}else{this.buttonElement.removeClass("ui-state-focus ui-state-active");}}
return;}
this._resetButton();},refresh:function(){var isDisabled=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");if(isDisabled!==this.options.disabled){this._setOption("disabled",isDisabled);}
if(this.type==="radio"){radioGroup(this.element[0]).each(function(){if($(this).is(":checked")){$(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true");}else{$(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false");}});}else if(this.type==="checkbox"){if(this.element.is(":checked")){this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true");}else{this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false");}}},_resetButton:function(){if(this.type==="input"){if(this.options.label){this.element.val(this.options.label);}
return;}
var buttonElement=this.buttonElement.removeClass(typeClasses),buttonText=$("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(buttonElement.empty()).text(),icons=this.options.icons,multipleIcons=icons.primary&&icons.secondary,buttonClasses=[];if(icons.primary||icons.secondary){if(this.options.text){buttonClasses.push("ui-button-text-icon"+(multipleIcons?"s":(icons.primary?"-primary":"-secondary")));}
if(icons.primary){buttonElement.prepend("<span class='ui-button-icon-primary ui-icon "+icons.primary+"'></span>");}
if(icons.secondary){buttonElement.append("<span class='ui-button-icon-secondary ui-icon "+icons.secondary+"'></span>");}
if(!this.options.text){buttonClasses.push(multipleIcons?"ui-button-icons-only":"ui-button-icon-only");if(!this.hasTitle){buttonElement.attr("title",$.trim(buttonText));}}}else{buttonClasses.push("ui-button-text-only");}
buttonElement.addClass(buttonClasses.join(" "));}});$.widget("ui.buttonset",{version:"1.11.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset");},_init:function(){this.refresh();},_setOption:function(key,value){if(key==="disabled"){this.buttons.button("option",key,value);}
this._super(key,value);},refresh:function(){var rtl=this.element.css("direction")==="rtl",allButtons=this.element.find(this.options.items),existingButtons=allButtons.filter(":ui-button");allButtons.not(":ui-button").button();existingButtons.button("refresh");this.buttons=allButtons.map(function(){return $(this).button("widget")[0];}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(rtl?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(rtl?"ui-corner-left":"ui-corner-right").end().end();},_destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return $(this).button("widget")[0];}).removeClass("ui-corner-left ui-corner-right").end().button("destroy");}});var button=$.ui.button;$.extend($.ui,{datepicker:{version:"1.11.4"}});var datepicker_instActive;function datepicker_getZindex(elem){var position,value;while(elem.length&&elem[0]!==document){position=elem.css("position");if(position==="absolute"||position==="relative"||position==="fixed"){value=parseInt(elem.css("zIndex"),10);if(!isNaN(value)&&value!==0){return value;}}
elem=elem.parent();}
return 0;}
function Datepicker(){this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._datepickerShowing=false;this._inDialog=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false,disabled:false};$.extend(this._defaults,this.regional[""]);this.regional.en=$.extend(true,{},this.regional[""]);this.regional["en-US"]=$.extend(true,{},this.regional.en);this.dpDiv=datepicker_bindHover($("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"));}
$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv;},setDefaults:function(settings){datepicker_extendRemove(this._defaults,settings||{});return this;},_attachDatepicker:function(target,settings){var nodeName,inline,inst;nodeName=target.nodeName.toLowerCase();inline=(nodeName==="div"||nodeName==="span");if(!target.id){this.uuid+=1;target.id="dp"+this.uuid;}
inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{});if(nodeName==="input"){this._connectDatepicker(target,inst);}else if(inline){this._inlineDatepicker(target,inst);}},_newInst:function(target,inline){var id=target[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:id,input:target,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:inline,dpDiv:(!inline?this.dpDiv:datepicker_bindHover($("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")))};},_connectDatepicker:function(target,inst){var input=$(target);inst.append=$([]);inst.trigger=$([]);if(input.hasClass(this.markerClassName)){return;}
this._attachments(input,inst);input.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp);this._autoSize(inst);$.data(target,"datepicker",inst);if(inst.settings.disabled){this._disableDatepicker(target);}},_attachments:function(input,inst){var showOn,buttonText,buttonImage,appendText=this._get(inst,"appendText"),isRTL=this._get(inst,"isRTL");if(inst.append){inst.append.remove();}
if(appendText){inst.append=$("<span class='"+this._appendClass+"'>"+appendText+"</span>");input[isRTL?"before":"after"](inst.append);}
input.unbind("focus",this._showDatepicker);if(inst.trigger){inst.trigger.remove();}
showOn=this._get(inst,"showOn");if(showOn==="focus"||showOn==="both"){input.focus(this._showDatepicker);}
if(showOn==="button"||showOn==="both"){buttonText=this._get(inst,"buttonText");buttonImage=this._get(inst,"buttonImage");inst.trigger=$(this._get(inst,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:buttonImage,alt:buttonText,title:buttonText}):$("<button type='button'></button>").addClass(this._triggerClass).html(!buttonImage?buttonText:$("<img/>").attr({src:buttonImage,alt:buttonText,title:buttonText})));input[isRTL?"before":"after"](inst.trigger);inst.trigger.click(function(){if($.datepicker._datepickerShowing&&$.datepicker._lastInput===input[0]){$.datepicker._hideDatepicker();}else if($.datepicker._datepickerShowing&&$.datepicker._lastInput!==input[0]){$.datepicker._hideDatepicker();$.datepicker._showDatepicker(input[0]);}else{$.datepicker._showDatepicker(input[0]);}
return false;});}},_autoSize:function(inst){if(this._get(inst,"autoSize")&&!inst.inline){var findMax,max,maxI,i,date=new Date(2009,12-1,20),dateFormat=this._get(inst,"dateFormat");if(dateFormat.match(/[DM]/)){findMax=function(names){max=0;maxI=0;for(i=0;i<names.length;i++){if(names[i].length>max){max=names[i].length;maxI=i;}}
return maxI;};date.setMonth(findMax(this._get(inst,(dateFormat.match(/MM/)?"monthNames":"monthNamesShort"))));date.setDate(findMax(this._get(inst,(dateFormat.match(/DD/)?"dayNames":"dayNamesShort")))+20-date.getDay());}
inst.input.attr("size",this._formatDate(inst,date).length);}},_inlineDatepicker:function(target,inst){var divSpan=$(target);if(divSpan.hasClass(this.markerClassName)){return;}
divSpan.addClass(this.markerClassName).append(inst.dpDiv);$.data(target,"datepicker",inst);this._setDate(inst,this._getDefaultDate(inst),true);this._updateDatepicker(inst);this._updateAlternate(inst);if(inst.settings.disabled){this._disableDatepicker(target);}
inst.dpDiv.css("display","block");},_dialogDatepicker:function(input,date,onSelect,settings,pos){var id,browserWidth,browserHeight,scrollX,scrollY,inst=this._dialogInst;if(!inst){this.uuid+=1;id="dp"+this.uuid;this._dialogInput=$("<input type='text' id='"+id+"' style='position: absolute; top: -100px; width: 0px;'/>");this._dialogInput.keydown(this._doKeyDown);$("body").append(this._dialogInput);inst=this._dialogInst=this._newInst(this._dialogInput,false);inst.settings={};$.data(this._dialogInput[0],"datepicker",inst);}
datepicker_extendRemove(inst.settings,settings||{});date=(date&&date.constructor===Date?this._formatDate(inst,date):date);this._dialogInput.val(date);this._pos=(pos?(pos.length?pos:[pos.pageX,pos.pageY]):null);if(!this._pos){browserWidth=document.documentElement.clientWidth;browserHeight=document.documentElement.clientHeight;scrollX=document.documentElement.scrollLeft||document.body.scrollLeft;scrollY=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[(browserWidth/2)-100+scrollX,(browserHeight/2)-150+scrollY];}
this._dialogInput.css("left",(this._pos[0]+20)+"px").css("top",this._pos[1]+"px");inst.settings.onSelect=onSelect;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);if($.blockUI){$.blockUI(this.dpDiv);}
$.data(this._dialogInput[0],"datepicker",inst);return this;},_destroyDatepicker:function(target){var nodeName,$target=$(target),inst=$.data(target,"datepicker");if(!$target.hasClass(this.markerClassName)){return;}
nodeName=target.nodeName.toLowerCase();$.removeData(target,"datepicker");if(nodeName==="input"){inst.append.remove();inst.trigger.remove();$target.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp);}else if(nodeName==="div"||nodeName==="span"){$target.removeClass(this.markerClassName).empty();}
if(datepicker_instActive===inst){datepicker_instActive=null;}},_enableDatepicker:function(target){var nodeName,inline,$target=$(target),inst=$.data(target,"datepicker");if(!$target.hasClass(this.markerClassName)){return;}
nodeName=target.nodeName.toLowerCase();if(nodeName==="input"){target.disabled=false;inst.trigger.filter("button").each(function(){this.disabled=false;}).end().filter("img").css({opacity:"1.0",cursor:""});}else if(nodeName==="div"||nodeName==="span"){inline=$target.children("."+this._inlineClass);inline.children().removeClass("ui-state-disabled");inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",false);}
this._disabledInputs=$.map(this._disabledInputs,function(value){return(value===target?null:value);});},_disableDatepicker:function(target){var nodeName,inline,$target=$(target),inst=$.data(target,"datepicker");if(!$target.hasClass(this.markerClassName)){return;}
nodeName=target.nodeName.toLowerCase();if(nodeName==="input"){target.disabled=true;inst.trigger.filter("button").each(function(){this.disabled=true;}).end().filter("img").css({opacity:"0.5",cursor:"default"});}else if(nodeName==="div"||nodeName==="span"){inline=$target.children("."+this._inlineClass);inline.children().addClass("ui-state-disabled");inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",true);}
this._disabledInputs=$.map(this._disabledInputs,function(value){return(value===target?null:value);});this._disabledInputs[this._disabledInputs.length]=target;},_isDisabledDatepicker:function(target){if(!target){return false;}
for(var i=0;i<this._disabledInputs.length;i++){if(this._disabledInputs[i]===target){return true;}}
return false;},_getInst:function(target){try{return $.data(target,"datepicker");}
catch(err){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(target,name,value){var settings,date,minDate,maxDate,inst=this._getInst(target);if(arguments.length===2&&typeof name==="string"){return(name==="defaults"?$.extend({},$.datepicker._defaults):(inst?(name==="all"?$.extend({},inst.settings):this._get(inst,name)):null));}
settings=name||{};if(typeof name==="string"){settings={};settings[name]=value;}
if(inst){if(this._curInst===inst){this._hideDatepicker();}
date=this._getDateDatepicker(target,true);minDate=this._getMinMaxDate(inst,"min");maxDate=this._getMinMaxDate(inst,"max");datepicker_extendRemove(inst.settings,settings);if(minDate!==null&&settings.dateFormat!==undefined&&settings.minDate===undefined){inst.settings.minDate=this._formatDate(inst,minDate);}
if(maxDate!==null&&settings.dateFormat!==undefined&&settings.maxDate===undefined){inst.settings.maxDate=this._formatDate(inst,maxDate);}
if("disabled"in settings){if(settings.disabled){this._disableDatepicker(target);}else{this._enableDatepicker(target);}}
this._attachments($(target),inst);this._autoSize(inst);this._setDate(inst,date);this._updateAlternate(inst);this._updateDatepicker(inst);}},_changeDatepicker:function(target,name,value){this._optionDatepicker(target,name,value);},_refreshDatepicker:function(target){var inst=this._getInst(target);if(inst){this._updateDatepicker(inst);}},_setDateDatepicker:function(target,date){var inst=this._getInst(target);if(inst){this._setDate(inst,date);this._updateDatepicker(inst);this._updateAlternate(inst);}},_getDateDatepicker:function(target,noDefault){var inst=this._getInst(target);if(inst&&!inst.inline){this._setDateFromField(inst,noDefault);}
return(inst?this._getDate(inst):null);},_doKeyDown:function(event){var onSelect,dateStr,sel,inst=$.datepicker._getInst(event.target),handled=true,isRTL=inst.dpDiv.is(".ui-datepicker-rtl");inst._keyEvent=true;if($.datepicker._datepickerShowing){switch(event.keyCode){case 9:$.datepicker._hideDatepicker();handled=false;break;case 13:sel=$("td."+$.datepicker._dayOverClass+":not(."+
$.datepicker._currentClass+")",inst.dpDiv);if(sel[0]){$.datepicker._selectDay(event.target,inst.selectedMonth,inst.selectedYear,sel[0]);}
onSelect=$.datepicker._get(inst,"onSelect");if(onSelect){dateStr=$.datepicker._formatDate(inst);onSelect.apply((inst.input?inst.input[0]:null),[dateStr,inst]);}else{$.datepicker._hideDatepicker();}
return false;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(event.target,(event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths")),"M");break;case 34:$.datepicker._adjustDate(event.target,(event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths")),"M");break;case 35:if(event.ctrlKey||event.metaKey){$.datepicker._clearDate(event.target);}
handled=event.ctrlKey||event.metaKey;break;case 36:if(event.ctrlKey||event.metaKey){$.datepicker._gotoToday(event.target);}
handled=event.ctrlKey||event.metaKey;break;case 37:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,(isRTL?+1:-1),"D");}
handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey){$.datepicker._adjustDate(event.target,(event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths")),"M");}
break;case 38:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,-7,"D");}
handled=event.ctrlKey||event.metaKey;break;case 39:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,(isRTL?-1:+1),"D");}
handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey){$.datepicker._adjustDate(event.target,(event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths")),"M");}
break;case 40:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,+7,"D");}
handled=event.ctrlKey||event.metaKey;break;default:handled=false;}}else if(event.keyCode===36&&event.ctrlKey){$.datepicker._showDatepicker(this);}else{handled=false;}
if(handled){event.preventDefault();event.stopPropagation();}},_doKeyPress:function(event){var chars,chr,inst=$.datepicker._getInst(event.target);if($.datepicker._get(inst,"constrainInput")){chars=$.datepicker._possibleChars($.datepicker._get(inst,"dateFormat"));chr=String.fromCharCode(event.charCode==null?event.keyCode:event.charCode);return event.ctrlKey||event.metaKey||(chr<" "||!chars||chars.indexOf(chr)>-1);}},_doKeyUp:function(event){var date,inst=$.datepicker._getInst(event.target);if(inst.input.val()!==inst.lastVal){try{date=$.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),(inst.input?inst.input.val():null),$.datepicker._getFormatConfig(inst));if(date){$.datepicker._setDateFromField(inst);$.datepicker._updateAlternate(inst);$.datepicker._updateDatepicker(inst);}}
catch(err){}}
return true;},_showDatepicker:function(input){input=input.target||input;if(input.nodeName.toLowerCase()!=="input"){input=$("input",input.parentNode)[0];}
if($.datepicker._isDisabledDatepicker(input)||$.datepicker._lastInput===input){return;}
var inst,beforeShow,beforeShowSettings,isFixed,offset,showAnim,duration;inst=$.datepicker._getInst(input);if($.datepicker._curInst&&$.datepicker._curInst!==inst){$.datepicker._curInst.dpDiv.stop(true,true);if(inst&&$.datepicker._datepickerShowing){$.datepicker._hideDatepicker($.datepicker._curInst.input[0]);}}
beforeShow=$.datepicker._get(inst,"beforeShow");beforeShowSettings=beforeShow?beforeShow.apply(input,[input,inst]):{};if(beforeShowSettings===false){return;}
datepicker_extendRemove(inst.settings,beforeShowSettings);inst.lastVal=null;$.datepicker._lastInput=input;$.datepicker._setDateFromField(inst);if($.datepicker._inDialog){input.value="";}
if(!$.datepicker._pos){$.datepicker._pos=$.datepicker._findPos(input);$.datepicker._pos[1]+=input.offsetHeight;}
isFixed=false;$(input).parents().each(function(){isFixed|=$(this).css("position")==="fixed";return!isFixed;});offset={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null;inst.dpDiv.empty();inst.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});$.datepicker._updateDatepicker(inst);offset=$.datepicker._checkOffset(inst,offset,isFixed);inst.dpDiv.css({position:($.datepicker._inDialog&&$.blockUI?"static":(isFixed?"fixed":"absolute")),display:"none",left:offset.left+"px",top:offset.top+"px"});if(!inst.inline){showAnim=$.datepicker._get(inst,"showAnim");duration=$.datepicker._get(inst,"duration");inst.dpDiv.css("z-index",datepicker_getZindex($(input))+1);$.datepicker._datepickerShowing=true;if($.effects&&$.effects.effect[showAnim]){inst.dpDiv.show(showAnim,$.datepicker._get(inst,"showOptions"),duration);}else{inst.dpDiv[showAnim||"show"](showAnim?duration:null);}
if($.datepicker._shouldFocusInput(inst)){inst.input.focus();}
$.datepicker._curInst=inst;}},_updateDatepicker:function(inst){this.maxRows=4;datepicker_instActive=inst;inst.dpDiv.empty().append(this._generateHTML(inst));this._attachHandlers(inst);var origyearshtml,numMonths=this._getNumberOfMonths(inst),cols=numMonths[1],width=17,activeCell=inst.dpDiv.find("."+this._dayOverClass+" a");if(activeCell.length>0){datepicker_handleMouseover.apply(activeCell.get(0));}
inst.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");if(cols>1){inst.dpDiv.addClass("ui-datepicker-multi-"+cols).css("width",(width*cols)+"em");}
inst.dpDiv[(numMonths[0]!==1||numMonths[1]!==1?"add":"remove")+"Class"]("ui-datepicker-multi");inst.dpDiv[(this._get(inst,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");if(inst===$.datepicker._curInst&&$.datepicker._datepickerShowing&&$.datepicker._shouldFocusInput(inst)){inst.input.focus();}
if(inst.yearshtml){origyearshtml=inst.yearshtml;setTimeout(function(){if(origyearshtml===inst.yearshtml&&inst.yearshtml){inst.dpDiv.find("select.ui-datepicker-year:first").replaceWith(inst.yearshtml);}
origyearshtml=inst.yearshtml=null;},0);}},_shouldFocusInput:function(inst){return inst.input&&inst.input.is(":visible")&&!inst.input.is(":disabled")&&!inst.input.is(":focus");},_checkOffset:function(inst,offset,isFixed){var dpWidth=inst.dpDiv.outerWidth(),dpHeight=inst.dpDiv.outerHeight(),inputWidth=inst.input?inst.input.outerWidth():0,inputHeight=inst.input?inst.input.outerHeight():0,viewWidth=document.documentElement.clientWidth+(isFixed?0:$(document).scrollLeft()),viewHeight=document.documentElement.clientHeight+(isFixed?0:$(document).scrollTop());offset.left-=(this._get(inst,"isRTL")?(dpWidth-inputWidth):0);offset.left-=(isFixed&&offset.left===inst.input.offset().left)?$(document).scrollLeft():0;offset.top-=(isFixed&&offset.top===(inst.input.offset().top+inputHeight))?$(document).scrollTop():0;offset.left-=Math.min(offset.left,(offset.left+dpWidth>viewWidth&&viewWidth>dpWidth)?Math.abs(offset.left+dpWidth-viewWidth):0);offset.top-=Math.min(offset.top,(offset.top+dpHeight>viewHeight&&viewHeight>dpHeight)?Math.abs(dpHeight+inputHeight):0);return offset;},_findPos:function(obj){var position,inst=this._getInst(obj),isRTL=this._get(inst,"isRTL");while(obj&&(obj.type==="hidden"||obj.nodeType!==1||$.expr.filters.hidden(obj))){obj=obj[isRTL?"previousSibling":"nextSibling"];}
position=$(obj).offset();return[position.left,position.top];},_hideDatepicker:function(input){var showAnim,duration,postProcess,onClose,inst=this._curInst;if(!inst||(input&&inst!==$.data(input,"datepicker"))){return;}
if(this._datepickerShowing){showAnim=this._get(inst,"showAnim");duration=this._get(inst,"duration");postProcess=function(){$.datepicker._tidyDialog(inst);};if($.effects&&($.effects.effect[showAnim]||$.effects[showAnim])){inst.dpDiv.hide(showAnim,$.datepicker._get(inst,"showOptions"),duration,postProcess);}else{inst.dpDiv[(showAnim==="slideDown"?"slideUp":(showAnim==="fadeIn"?"fadeOut":"hide"))]((showAnim?duration:null),postProcess);}
if(!showAnim){postProcess();}
this._datepickerShowing=false;onClose=this._get(inst,"onClose");if(onClose){onClose.apply((inst.input?inst.input[0]:null),[(inst.input?inst.input.val():""),inst]);}
this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if($.blockUI){$.unblockUI();$("body").append(this.dpDiv);}}
this._inDialog=false;}},_tidyDialog:function(inst){inst.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar");},_checkExternalClick:function(event){if(!$.datepicker._curInst){return;}
var $target=$(event.target),inst=$.datepicker._getInst($target[0]);if((($target[0].id!==$.datepicker._mainDivId&&$target.parents("#"+$.datepicker._mainDivId).length===0&&!$target.hasClass($.datepicker.markerClassName)&&!$target.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&!($.datepicker._inDialog&&$.blockUI)))||($target.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!==inst)){$.datepicker._hideDatepicker();}},_adjustDate:function(id,offset,period){var target=$(id),inst=this._getInst(target[0]);if(this._isDisabledDatepicker(target[0])){return;}
this._adjustInstDate(inst,offset+
(period==="M"?this._get(inst,"showCurrentAtPos"):0),period);this._updateDatepicker(inst);},_gotoToday:function(id){var date,target=$(id),inst=this._getInst(target[0]);if(this._get(inst,"gotoCurrent")&&inst.currentDay){inst.selectedDay=inst.currentDay;inst.drawMonth=inst.selectedMonth=inst.currentMonth;inst.drawYear=inst.selectedYear=inst.currentYear;}else{date=new Date();inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();}
this._notifyChange(inst);this._adjustDate(target);},_selectMonthYear:function(id,select,period){var target=$(id),inst=this._getInst(target[0]);inst["selected"+(period==="M"?"Month":"Year")]=inst["draw"+(period==="M"?"Month":"Year")]=parseInt(select.options[select.selectedIndex].value,10);this._notifyChange(inst);this._adjustDate(target);},_selectDay:function(id,month,year,td){var inst,target=$(id);if($(td).hasClass(this._unselectableClass)||this._isDisabledDatepicker(target[0])){return;}
inst=this._getInst(target[0]);inst.selectedDay=inst.currentDay=$("a",td).html();inst.selectedMonth=inst.currentMonth=month;inst.selectedYear=inst.currentYear=year;this._selectDate(id,this._formatDate(inst,inst.currentDay,inst.currentMonth,inst.currentYear));},_clearDate:function(id){var target=$(id);this._selectDate(target,"");},_selectDate:function(id,dateStr){var onSelect,target=$(id),inst=this._getInst(target[0]);dateStr=(dateStr!=null?dateStr:this._formatDate(inst));if(inst.input){inst.input.val(dateStr);}
this._updateAlternate(inst);onSelect=this._get(inst,"onSelect");if(onSelect){onSelect.apply((inst.input?inst.input[0]:null),[dateStr,inst]);}else if(inst.input){inst.input.trigger("change");}
if(inst.inline){this._updateDatepicker(inst);}else{this._hideDatepicker();this._lastInput=inst.input[0];if(typeof(inst.input[0])!=="object"){inst.input.focus();}
this._lastInput=null;}},_updateAlternate:function(inst){var altFormat,date,dateStr,altField=this._get(inst,"altField");if(altField){altFormat=this._get(inst,"altFormat")||this._get(inst,"dateFormat");date=this._getDate(inst);dateStr=this.formatDate(altFormat,date,this._getFormatConfig(inst));$(altField).each(function(){$(this).val(dateStr);});}},noWeekends:function(date){var day=date.getDay();return[(day>0&&day<6),""];},iso8601Week:function(date){var time,checkDate=new Date(date.getTime());checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7));time=checkDate.getTime();checkDate.setMonth(0);checkDate.setDate(1);return Math.floor(Math.round((time-checkDate)/86400000)/7)+1;},parseDate:function(format,value,settings){if(format==null||value==null){throw"Invalid arguments";}
value=(typeof value==="object"?value.toString():value+"");if(value===""){return null;}
var iFormat,dim,extra,iValue=0,shortYearCutoffTemp=(settings?settings.shortYearCutoff:null)||this._defaults.shortYearCutoff,shortYearCutoff=(typeof shortYearCutoffTemp!=="string"?shortYearCutoffTemp:new Date().getFullYear()%100+parseInt(shortYearCutoffTemp,10)),dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort,dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames,monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort,monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames,year=-1,month=-1,day=-1,doy=-1,literal=false,date,lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)===match);if(matches){iFormat++;}
return matches;},getNumber=function(match){var isDoubled=lookAhead(match),size=(match==="@"?14:(match==="!"?20:(match==="y"&&isDoubled?4:(match==="o"?3:2)))),minSize=(match==="y"?size:1),digits=new RegExp("^\\d{"+minSize+","+size+"}"),num=value.substring(iValue).match(digits);if(!num){throw"Missing number at position "+iValue;}
iValue+=num[0].length;return parseInt(num[0],10);},getName=function(match,shortNames,longNames){var index=-1,names=$.map(lookAhead(match)?longNames:shortNames,function(v,k){return[[k,v]];}).sort(function(a,b){return-(a[1].length-b[1].length);});$.each(names,function(i,pair){var name=pair[1];if(value.substr(iValue,name.length).toLowerCase()===name.toLowerCase()){index=pair[0];iValue+=name.length;return false;}});if(index!==-1){return index+1;}else{throw"Unknown name at position "+iValue;}},checkLiteral=function(){if(value.charAt(iValue)!==format.charAt(iFormat)){throw"Unexpected literal at position "+iValue;}
iValue++;};for(iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)==="'"&&!lookAhead("'")){literal=false;}else{checkLiteral();}}else{switch(format.charAt(iFormat)){case"d":day=getNumber("d");break;case"D":getName("D",dayNamesShort,dayNames);break;case"o":doy=getNumber("o");break;case"m":month=getNumber("m");break;case"M":month=getName("M",monthNamesShort,monthNames);break;case"y":year=getNumber("y");break;case"@":date=new Date(getNumber("@"));year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case"!":date=new Date((getNumber("!")-this._ticksTo1970)/10000);year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case"'":if(lookAhead("'")){checkLiteral();}else{literal=true;}
break;default:checkLiteral();}}}
if(iValue<value.length){extra=value.substr(iValue);if(!/^\s+/.test(extra)){throw"Extra/unparsed characters found in date: "+extra;}}
if(year===-1){year=new Date().getFullYear();}else if(year<100){year+=new Date().getFullYear()-new Date().getFullYear()%100+
(year<=shortYearCutoff?0:-100);}
if(doy>-1){month=1;day=doy;do{dim=this._getDaysInMonth(year,month-1);if(day<=dim){break;}
month++;day-=dim;}while(true);}
date=this._daylightSavingAdjust(new Date(year,month-1,day));if(date.getFullYear()!==year||date.getMonth()+1!==month||date.getDate()!==day){throw"Invalid date";}
return date;},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(((1970-1)*365+Math.floor(1970/4)-Math.floor(1970/100)+
Math.floor(1970/400))*24*60*60*10000000),formatDate:function(format,date,settings){if(!date){return"";}
var iFormat,dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort,dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames,monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort,monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames,lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)===match);if(matches){iFormat++;}
return matches;},formatNumber=function(match,value,len){var num=""+value;if(lookAhead(match)){while(num.length<len){num="0"+num;}}
return num;},formatName=function(match,value,shortNames,longNames){return(lookAhead(match)?longNames[value]:shortNames[value]);},output="",literal=false;if(date){for(iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)==="'"&&!lookAhead("'")){literal=false;}else{output+=format.charAt(iFormat);}}else{switch(format.charAt(iFormat)){case"d":output+=formatNumber("d",date.getDate(),2);break;case"D":output+=formatName("D",date.getDay(),dayNamesShort,dayNames);break;case"o":output+=formatNumber("o",Math.round((new Date(date.getFullYear(),date.getMonth(),date.getDate()).getTime()-new Date(date.getFullYear(),0,0).getTime())/86400000),3);break;case"m":output+=formatNumber("m",date.getMonth()+1,2);break;case"M":output+=formatName("M",date.getMonth(),monthNamesShort,monthNames);break;case"y":output+=(lookAhead("y")?date.getFullYear():(date.getYear()%100<10?"0":"")+date.getYear()%100);break;case"@":output+=date.getTime();break;case"!":output+=date.getTime()*10000+this._ticksTo1970;break;case"'":if(lookAhead("'")){output+="'";}else{literal=true;}
break;default:output+=format.charAt(iFormat);}}}}
return output;},_possibleChars:function(format){var iFormat,chars="",literal=false,lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)===match);if(matches){iFormat++;}
return matches;};for(iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)==="'"&&!lookAhead("'")){literal=false;}else{chars+=format.charAt(iFormat);}}else{switch(format.charAt(iFormat)){case"d":case"m":case"y":case"@":chars+="0123456789";break;case"D":case"M":return null;case"'":if(lookAhead("'")){chars+="'";}else{literal=true;}
break;default:chars+=format.charAt(iFormat);}}}
return chars;},_get:function(inst,name){return inst.settings[name]!==undefined?inst.settings[name]:this._defaults[name];},_setDateFromField:function(inst,noDefault){if(inst.input.val()===inst.lastVal){return;}
var dateFormat=this._get(inst,"dateFormat"),dates=inst.lastVal=inst.input?inst.input.val():null,defaultDate=this._getDefaultDate(inst),date=defaultDate,settings=this._getFormatConfig(inst);try{date=this.parseDate(dateFormat,dates,settings)||defaultDate;}catch(event){dates=(noDefault?"":dates);}
inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();inst.currentDay=(dates?date.getDate():0);inst.currentMonth=(dates?date.getMonth():0);inst.currentYear=(dates?date.getFullYear():0);this._adjustInstDate(inst);},_getDefaultDate:function(inst){return this._restrictMinMax(inst,this._determineDate(inst,this._get(inst,"defaultDate"),new Date()));},_determineDate:function(inst,date,defaultDate){var offsetNumeric=function(offset){var date=new Date();date.setDate(date.getDate()+offset);return date;},offsetString=function(offset){try{return $.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),offset,$.datepicker._getFormatConfig(inst));}
catch(e){}
var date=(offset.toLowerCase().match(/^c/)?$.datepicker._getDate(inst):null)||new Date(),year=date.getFullYear(),month=date.getMonth(),day=date.getDate(),pattern=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,matches=pattern.exec(offset);while(matches){switch(matches[2]||"d"){case"d":case"D":day+=parseInt(matches[1],10);break;case"w":case"W":day+=parseInt(matches[1],10)*7;break;case"m":case"M":month+=parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break;case"y":case"Y":year+=parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break;}
matches=pattern.exec(offset);}
return new Date(year,month,day);},newDate=(date==null||date===""?defaultDate:(typeof date==="string"?offsetString(date):(typeof date==="number"?(isNaN(date)?defaultDate:offsetNumeric(date)):new Date(date.getTime()))));newDate=(newDate&&newDate.toString()==="Invalid Date"?defaultDate:newDate);if(newDate){newDate.setHours(0);newDate.setMinutes(0);newDate.setSeconds(0);newDate.setMilliseconds(0);}
return this._daylightSavingAdjust(newDate);},_daylightSavingAdjust:function(date){if(!date){return null;}
date.setHours(date.getHours()>12?date.getHours()+2:0);return date;},_setDate:function(inst,date,noChange){var clear=!date,origMonth=inst.selectedMonth,origYear=inst.selectedYear,newDate=this._restrictMinMax(inst,this._determineDate(inst,date,new Date()));inst.selectedDay=inst.currentDay=newDate.getDate();inst.drawMonth=inst.selectedMonth=inst.currentMonth=newDate.getMonth();inst.drawYear=inst.selectedYear=inst.currentYear=newDate.getFullYear();if((origMonth!==inst.selectedMonth||origYear!==inst.selectedYear)&&!noChange){this._notifyChange(inst);}
this._adjustInstDate(inst);if(inst.input){inst.input.val(clear?"":this._formatDate(inst));}},_getDate:function(inst){var startDate=(!inst.currentYear||(inst.input&&inst.input.val()==="")?null:this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));return startDate;},_attachHandlers:function(inst){var stepMonths=this._get(inst,"stepMonths"),id="#"+inst.id.replace(/\\\\/g,"\\");inst.dpDiv.find("[data-handler]").map(function(){var handler={prev:function(){$.datepicker._adjustDate(id,-stepMonths,"M");},next:function(){$.datepicker._adjustDate(id,+stepMonths,"M");},hide:function(){$.datepicker._hideDatepicker();},today:function(){$.datepicker._gotoToday(id);},selectDay:function(){$.datepicker._selectDay(id,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return false;},selectMonth:function(){$.datepicker._selectMonthYear(id,this,"M");return false;},selectYear:function(){$.datepicker._selectMonthYear(id,this,"Y");return false;}};$(this).bind(this.getAttribute("data-event"),handler[this.getAttribute("data-handler")]);});},_generateHTML:function(inst){var maxDraw,prevText,prev,nextText,next,currentText,gotoDate,controls,buttonPanel,firstDay,showWeek,dayNames,dayNamesMin,monthNames,monthNamesShort,beforeShowDay,showOtherMonths,selectOtherMonths,defaultDate,html,dow,row,group,col,selectedDate,cornerClass,calender,thead,day,daysInMonth,leadDays,curRows,numRows,printDate,dRow,tbody,daySettings,otherMonth,unselectable,tempDate=new Date(),today=this._daylightSavingAdjust(new Date(tempDate.getFullYear(),tempDate.getMonth(),tempDate.getDate())),isRTL=this._get(inst,"isRTL"),showButtonPanel=this._get(inst,"showButtonPanel"),hideIfNoPrevNext=this._get(inst,"hideIfNoPrevNext"),navigationAsDateFormat=this._get(inst,"navigationAsDateFormat"),numMonths=this._getNumberOfMonths(inst),showCurrentAtPos=this._get(inst,"showCurrentAtPos"),stepMonths=this._get(inst,"stepMonths"),isMultiMonth=(numMonths[0]!==1||numMonths[1]!==1),currentDate=this._daylightSavingAdjust((!inst.currentDay?new Date(9999,9,9):new Date(inst.currentYear,inst.currentMonth,inst.currentDay))),minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),drawMonth=inst.drawMonth-showCurrentAtPos,drawYear=inst.drawYear;if(drawMonth<0){drawMonth+=12;drawYear--;}
if(maxDate){maxDraw=this._daylightSavingAdjust(new Date(maxDate.getFullYear(),maxDate.getMonth()-(numMonths[0]*numMonths[1])+1,maxDate.getDate()));maxDraw=(minDate&&maxDraw<minDate?minDate:maxDraw);while(this._daylightSavingAdjust(new Date(drawYear,drawMonth,1))>maxDraw){drawMonth--;if(drawMonth<0){drawMonth=11;drawYear--;}}}
inst.drawMonth=drawMonth;inst.drawYear=drawYear;prevText=this._get(inst,"prevText");prevText=(!navigationAsDateFormat?prevText:this.formatDate(prevText,this._daylightSavingAdjust(new Date(drawYear,drawMonth-stepMonths,1)),this._getFormatConfig(inst)));prev=(this._canAdjustMonth(inst,-1,drawYear,drawMonth)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click'"+" title='"+prevText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"e":"w")+"'>"+prevText+"</span></a>":(hideIfNoPrevNext?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+prevText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"e":"w")+"'>"+prevText+"</span></a>"));nextText=this._get(inst,"nextText");nextText=(!navigationAsDateFormat?nextText:this.formatDate(nextText,this._daylightSavingAdjust(new Date(drawYear,drawMonth+stepMonths,1)),this._getFormatConfig(inst)));next=(this._canAdjustMonth(inst,+1,drawYear,drawMonth)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click'"+" title='"+nextText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"w":"e")+"'>"+nextText+"</span></a>":(hideIfNoPrevNext?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+nextText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"w":"e")+"'>"+nextText+"</span></a>"));currentText=this._get(inst,"currentText");gotoDate=(this._get(inst,"gotoCurrent")&&inst.currentDay?currentDate:today);currentText=(!navigationAsDateFormat?currentText:this.formatDate(currentText,gotoDate,this._getFormatConfig(inst)));controls=(!inst.inline?"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+
this._get(inst,"closeText")+"</button>":"");buttonPanel=(showButtonPanel)?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(isRTL?controls:"")+
(this._isInRange(inst,gotoDate)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'"+">"+currentText+"</button>":"")+(isRTL?"":controls)+"</div>":"";firstDay=parseInt(this._get(inst,"firstDay"),10);firstDay=(isNaN(firstDay)?0:firstDay);showWeek=this._get(inst,"showWeek");dayNames=this._get(inst,"dayNames");dayNamesMin=this._get(inst,"dayNamesMin");monthNames=this._get(inst,"monthNames");monthNamesShort=this._get(inst,"monthNamesShort");beforeShowDay=this._get(inst,"beforeShowDay");showOtherMonths=this._get(inst,"showOtherMonths");selectOtherMonths=this._get(inst,"selectOtherMonths");defaultDate=this._getDefaultDate(inst);html="";dow;for(row=0;row<numMonths[0];row++){group="";this.maxRows=4;for(col=0;col<numMonths[1];col++){selectedDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,inst.selectedDay));cornerClass=" ui-corner-all";calender="";if(isMultiMonth){calender+="<div class='ui-datepicker-group";if(numMonths[1]>1){switch(col){case 0:calender+=" ui-datepicker-group-first";cornerClass=" ui-corner-"+(isRTL?"right":"left");break;case numMonths[1]-1:calender+=" ui-datepicker-group-last";cornerClass=" ui-corner-"+(isRTL?"left":"right");break;default:calender+=" ui-datepicker-group-middle";cornerClass="";break;}}
calender+="'>";}
calender+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+cornerClass+"'>"+
(/all|left/.test(cornerClass)&&row===0?(isRTL?next:prev):"")+
(/all|right/.test(cornerClass)&&row===0?(isRTL?prev:next):"")+
this._generateMonthYearHeader(inst,drawMonth,drawYear,minDate,maxDate,row>0||col>0,monthNames,monthNamesShort)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>";thead=(showWeek?"<th class='ui-datepicker-week-col'>"+this._get(inst,"weekHeader")+"</th>":"");for(dow=0;dow<7;dow++){day=(dow+firstDay)%7;thead+="<th scope='col'"+((dow+firstDay+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+dayNames[day]+"'>"+dayNamesMin[day]+"</span></th>";}
calender+=thead+"</tr></thead><tbody>";daysInMonth=this._getDaysInMonth(drawYear,drawMonth);if(drawYear===inst.selectedYear&&drawMonth===inst.selectedMonth){inst.selectedDay=Math.min(inst.selectedDay,daysInMonth);}
leadDays=(this._getFirstDayOfMonth(drawYear,drawMonth)-firstDay+7)%7;curRows=Math.ceil((leadDays+daysInMonth)/7);numRows=(isMultiMonth?this.maxRows>curRows?this.maxRows:curRows:curRows);this.maxRows=numRows;printDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,1-leadDays));for(dRow=0;dRow<numRows;dRow++){calender+="<tr>";tbody=(!showWeek?"":"<td class='ui-datepicker-week-col'>"+
this._get(inst,"calculateWeek")(printDate)+"</td>");for(dow=0;dow<7;dow++){daySettings=(beforeShowDay?beforeShowDay.apply((inst.input?inst.input[0]:null),[printDate]):[true,""]);otherMonth=(printDate.getMonth()!==drawMonth);unselectable=(otherMonth&&!selectOtherMonths)||!daySettings[0]||(minDate&&printDate<minDate)||(maxDate&&printDate>maxDate);tbody+="<td class='"+
((dow+firstDay+6)%7>=5?" ui-datepicker-week-end":"")+
(otherMonth?" ui-datepicker-other-month":"")+
((printDate.getTime()===selectedDate.getTime()&&drawMonth===inst.selectedMonth&&inst._keyEvent)||(defaultDate.getTime()===printDate.getTime()&&defaultDate.getTime()===selectedDate.getTime())?" "+this._dayOverClass:"")+
(unselectable?" "+this._unselectableClass+" ui-state-disabled":"")+
(otherMonth&&!showOtherMonths?"":" "+daySettings[1]+
(printDate.getTime()===currentDate.getTime()?" "+this._currentClass:"")+
(printDate.getTime()===today.getTime()?" ui-datepicker-today":""))+"'"+
((!otherMonth||showOtherMonths)&&daySettings[2]?" title='"+daySettings[2].replace(/'/g,"&#39;")+"'":"")+
(unselectable?"":" data-handler='selectDay' data-event='click' data-month='"+printDate.getMonth()+"' data-year='"+printDate.getFullYear()+"'")+">"+
(otherMonth&&!showOtherMonths?"&#xa0;":(unselectable?"<span class='ui-state-default'>"+printDate.getDate()+"</span>":"<a class='ui-state-default"+
(printDate.getTime()===today.getTime()?" ui-state-highlight":"")+
(printDate.getTime()===currentDate.getTime()?" ui-state-active":"")+
(otherMonth?" ui-priority-secondary":"")+"' href='#'>"+printDate.getDate()+"</a>"))+"</td>";printDate.setDate(printDate.getDate()+1);printDate=this._daylightSavingAdjust(printDate);}
calender+=tbody+"</tr>";}
drawMonth++;if(drawMonth>11){drawMonth=0;drawYear++;}
calender+="</tbody></table>"+(isMultiMonth?"</div>"+
((numMonths[0]>0&&col===numMonths[1]-1)?"<div class='ui-datepicker-row-break'></div>":""):"");group+=calender;}
html+=group;}
html+=buttonPanel;inst._keyEvent=false;return html;},_generateMonthYearHeader:function(inst,drawMonth,drawYear,minDate,maxDate,secondary,monthNames,monthNamesShort){var inMinYear,inMaxYear,month,years,thisYear,determineYear,year,endYear,changeMonth=this._get(inst,"changeMonth"),changeYear=this._get(inst,"changeYear"),showMonthAfterYear=this._get(inst,"showMonthAfterYear"),html="<div class='ui-datepicker-title'>",monthHtml="";if(secondary||!changeMonth){monthHtml+="<span class='ui-datepicker-month'>"+monthNames[drawMonth]+"</span>";}else{inMinYear=(minDate&&minDate.getFullYear()===drawYear);inMaxYear=(maxDate&&maxDate.getFullYear()===drawYear);monthHtml+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";for(month=0;month<12;month++){if((!inMinYear||month>=minDate.getMonth())&&(!inMaxYear||month<=maxDate.getMonth())){monthHtml+="<option value='"+month+"'"+
(month===drawMonth?" selected='selected'":"")+">"+monthNamesShort[month]+"</option>";}}
monthHtml+="</select>";}
if(!showMonthAfterYear){html+=monthHtml+(secondary||!(changeMonth&&changeYear)?"&#xa0;":"");}
if(!inst.yearshtml){inst.yearshtml="";if(secondary||!changeYear){html+="<span class='ui-datepicker-year'>"+drawYear+"</span>";}else{years=this._get(inst,"yearRange").split(":");thisYear=new Date().getFullYear();determineYear=function(value){var year=(value.match(/c[+\-].*/)?drawYear+parseInt(value.substring(1),10):(value.match(/[+\-].*/)?thisYear+parseInt(value,10):parseInt(value,10)));return(isNaN(year)?thisYear:year);};year=determineYear(years[0]);endYear=Math.max(year,determineYear(years[1]||""));year=(minDate?Math.max(year,minDate.getFullYear()):year);endYear=(maxDate?Math.min(endYear,maxDate.getFullYear()):endYear);inst.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";for(;year<=endYear;year++){inst.yearshtml+="<option value='"+year+"'"+
(year===drawYear?" selected='selected'":"")+">"+year+"</option>";}
inst.yearshtml+="</select>";html+=inst.yearshtml;inst.yearshtml=null;}}
html+=this._get(inst,"yearSuffix");if(showMonthAfterYear){html+=(secondary||!(changeMonth&&changeYear)?"&#xa0;":"")+monthHtml;}
html+="</div>";return html;},_adjustInstDate:function(inst,offset,period){var year=inst.drawYear+(period==="Y"?offset:0),month=inst.drawMonth+(period==="M"?offset:0),day=Math.min(inst.selectedDay,this._getDaysInMonth(year,month))+(period==="D"?offset:0),date=this._restrictMinMax(inst,this._daylightSavingAdjust(new Date(year,month,day)));inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();if(period==="M"||period==="Y"){this._notifyChange(inst);}},_restrictMinMax:function(inst,date){var minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),newDate=(minDate&&date<minDate?minDate:date);return(maxDate&&newDate>maxDate?maxDate:newDate);},_notifyChange:function(inst){var onChange=this._get(inst,"onChangeMonthYear");if(onChange){onChange.apply((inst.input?inst.input[0]:null),[inst.selectedYear,inst.selectedMonth+1,inst]);}},_getNumberOfMonths:function(inst){var numMonths=this._get(inst,"numberOfMonths");return(numMonths==null?[1,1]:(typeof numMonths==="number"?[1,numMonths]:numMonths));},_getMinMaxDate:function(inst,minMax){return this._determineDate(inst,this._get(inst,minMax+"Date"),null);},_getDaysInMonth:function(year,month){return 32-this._daylightSavingAdjust(new Date(year,month,32)).getDate();},_getFirstDayOfMonth:function(year,month){return new Date(year,month,1).getDay();},_canAdjustMonth:function(inst,offset,curYear,curMonth){var numMonths=this._getNumberOfMonths(inst),date=this._daylightSavingAdjust(new Date(curYear,curMonth+(offset<0?offset:numMonths[0]*numMonths[1]),1));if(offset<0){date.setDate(this._getDaysInMonth(date.getFullYear(),date.getMonth()));}
return this._isInRange(inst,date);},_isInRange:function(inst,date){var yearSplit,currentYear,minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),minYear=null,maxYear=null,years=this._get(inst,"yearRange");if(years){yearSplit=years.split(":");currentYear=new Date().getFullYear();minYear=parseInt(yearSplit[0],10);maxYear=parseInt(yearSplit[1],10);if(yearSplit[0].match(/[+\-].*/)){minYear+=currentYear;}
if(yearSplit[1].match(/[+\-].*/)){maxYear+=currentYear;}}
return((!minDate||date.getTime()>=minDate.getTime())&&(!maxDate||date.getTime()<=maxDate.getTime())&&(!minYear||date.getFullYear()>=minYear)&&(!maxYear||date.getFullYear()<=maxYear));},_getFormatConfig:function(inst){var shortYearCutoff=this._get(inst,"shortYearCutoff");shortYearCutoff=(typeof shortYearCutoff!=="string"?shortYearCutoff:new Date().getFullYear()%100+parseInt(shortYearCutoff,10));return{shortYearCutoff:shortYearCutoff,dayNamesShort:this._get(inst,"dayNamesShort"),dayNames:this._get(inst,"dayNames"),monthNamesShort:this._get(inst,"monthNamesShort"),monthNames:this._get(inst,"monthNames")};},_formatDate:function(inst,day,month,year){if(!day){inst.currentDay=inst.selectedDay;inst.currentMonth=inst.selectedMonth;inst.currentYear=inst.selectedYear;}
var date=(day?(typeof day==="object"?day:this._daylightSavingAdjust(new Date(year,month,day))):this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));return this.formatDate(this._get(inst,"dateFormat"),date,this._getFormatConfig(inst));}});function datepicker_bindHover(dpDiv){var selector="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return dpDiv.delegate(selector,"mouseout",function(){$(this).removeClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!==-1){$(this).removeClass("ui-datepicker-prev-hover");}
if(this.className.indexOf("ui-datepicker-next")!==-1){$(this).removeClass("ui-datepicker-next-hover");}}).delegate(selector,"mouseover",datepicker_handleMouseover);}
function datepicker_handleMouseover(){if(!$.datepicker._isDisabledDatepicker(datepicker_instActive.inline?datepicker_instActive.dpDiv.parent()[0]:datepicker_instActive.input[0])){$(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");$(this).addClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!==-1){$(this).addClass("ui-datepicker-prev-hover");}
if(this.className.indexOf("ui-datepicker-next")!==-1){$(this).addClass("ui-datepicker-next-hover");}}}
function datepicker_extendRemove(target,props){$.extend(target,props);for(var name in props){if(props[name]==null){target[name]=props[name];}}
return target;}
$.fn.datepicker=function(options){if(!this.length){return this;}
if(!$.datepicker.initialized){$(document).mousedown($.datepicker._checkExternalClick);$.datepicker.initialized=true;}
if($("#"+$.datepicker._mainDivId).length===0){$("body").append($.datepicker.dpDiv);}
var otherArgs=Array.prototype.slice.call(arguments,1);if(typeof options==="string"&&(options==="isDisabled"||options==="getDate"||options==="widget")){return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs));}
if(options==="option"&&arguments.length===2&&typeof arguments[1]==="string"){return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs));}
return this.each(function(){typeof options==="string"?$.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this].concat(otherArgs)):$.datepicker._attachDatepicker(this,options);});};$.datepicker=new Datepicker();$.datepicker.initialized=false;$.datepicker.uuid=new Date().getTime();$.datepicker.version="1.11.4";var datepicker=$.datepicker;var dialog=$.widget("ui.dialog",{version:"1.11.4",options:{appendTo:"body",autoOpen:true,buttons:[],closeOnEscape:true,closeText:"Close",dialogClass:"",draggable:true,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:false,position:{my:"center",at:"center",of:window,collision:"fit",using:function(pos){var topOffset=$(this).css(pos).offset().top;if(topOffset<0){$(this).css("top",pos.top-topOffset);}}},resizable:true,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:true,height:true,maxHeight:true,maxWidth:true,minHeight:true,minWidth:true,width:true},resizableRelatedOptions:{maxHeight:true,maxWidth:true,minHeight:true,minWidth:true},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height};this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};this.originalTitle=this.element.attr("title");this.options.title=this.options.title||this.originalTitle;this._createWrapper();this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog);this._createTitlebar();this._createButtonPane();if(this.options.draggable&&$.fn.draggable){this._makeDraggable();}
if(this.options.resizable&&$.fn.resizable){this._makeResizable();}
this._isOpen=false;this._trackFocus();},_init:function(){if(this.options.autoOpen){this.open();}},_appendTo:function(){var element=this.options.appendTo;if(element&&(element.jquery||element.nodeType)){return $(element);}
return this.document.find(element||"body").eq(0);},_destroy:function(){var next,originalPosition=this.originalPosition;this._untrackInstance();this._destroyOverlay();this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach();this.uiDialog.stop(true,true).remove();if(this.originalTitle){this.element.attr("title",this.originalTitle);}
next=originalPosition.parent.children().eq(originalPosition.index);if(next.length&&next[0]!==this.element[0]){next.before(this.element);}else{originalPosition.parent.append(this.element);}},widget:function(){return this.uiDialog;},disable:$.noop,enable:$.noop,close:function(event){var activeElement,that=this;if(!this._isOpen||this._trigger("beforeClose",event)===false){return;}
this._isOpen=false;this._focusedElement=null;this._destroyOverlay();this._untrackInstance();if(!this.opener.filter(":focusable").focus().length){try{activeElement=this.document[0].activeElement;if(activeElement&&activeElement.nodeName.toLowerCase()!=="body"){$(activeElement).blur();}}catch(error){}}
this._hide(this.uiDialog,this.options.hide,function(){that._trigger("close",event);});},isOpen:function(){return this._isOpen;},moveToTop:function(){this._moveToTop();},_moveToTop:function(event,silent){var moved=false,zIndices=this.uiDialog.siblings(".ui-front:visible").map(function(){return+$(this).css("z-index");}).get(),zIndexMax=Math.max.apply(null,zIndices);if(zIndexMax>=+this.uiDialog.css("z-index")){this.uiDialog.css("z-index",zIndexMax+1);moved=true;}
if(moved&&!silent){this._trigger("focus",event);}
return moved;},open:function(){var that=this;if(this._isOpen){if(this._moveToTop()){this._focusTabbable();}
return;}
this._isOpen=true;this.opener=$(this.document[0].activeElement);this._size();this._position();this._createOverlay();this._moveToTop(null,true);if(this.overlay){this.overlay.css("z-index",this.uiDialog.css("z-index")-1);}
this._show(this.uiDialog,this.options.show,function(){that._focusTabbable();that._trigger("focus");});this._makeFocusTarget();this._trigger("open");},_focusTabbable:function(){var hasFocus=this._focusedElement;if(!hasFocus){hasFocus=this.element.find("[autofocus]");}
if(!hasFocus.length){hasFocus=this.element.find(":tabbable");}
if(!hasFocus.length){hasFocus=this.uiDialogButtonPane.find(":tabbable");}
if(!hasFocus.length){hasFocus=this.uiDialogTitlebarClose.filter(":tabbable");}
if(!hasFocus.length){hasFocus=this.uiDialog;}
hasFocus.eq(0).focus();},_keepFocus:function(event){function checkFocus(){var activeElement=this.document[0].activeElement,isActive=this.uiDialog[0]===activeElement||$.contains(this.uiDialog[0],activeElement);if(!isActive){this._focusTabbable();}}
event.preventDefault();checkFocus.call(this);this._delay(checkFocus);},_createWrapper:function(){this.uiDialog=$("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+
this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo());this._on(this.uiDialog,{keydown:function(event){if(this.options.closeOnEscape&&!event.isDefaultPrevented()&&event.keyCode&&event.keyCode===$.ui.keyCode.ESCAPE){event.preventDefault();this.close(event);return;}
if(event.keyCode!==$.ui.keyCode.TAB||event.isDefaultPrevented()){return;}
var tabbables=this.uiDialog.find(":tabbable"),first=tabbables.filter(":first"),last=tabbables.filter(":last");if((event.target===last[0]||event.target===this.uiDialog[0])&&!event.shiftKey){this._delay(function(){first.focus();});event.preventDefault();}else if((event.target===first[0]||event.target===this.uiDialog[0])&&event.shiftKey){this._delay(function(){last.focus();});event.preventDefault();}},mousedown:function(event){if(this._moveToTop(event)){this._focusTabbable();}}});if(!this.element.find("[aria-describedby]").length){this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")});}},_createTitlebar:function(){var uiDialogTitle;this.uiDialogTitlebar=$("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog);this._on(this.uiDialogTitlebar,{mousedown:function(event){if(!$(event.target).closest(".ui-dialog-titlebar-close")){this.uiDialog.focus();}}});this.uiDialogTitlebarClose=$("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:false}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar);this._on(this.uiDialogTitlebarClose,{click:function(event){event.preventDefault();this.close(event);}});uiDialogTitle=$("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar);this._title(uiDialogTitle);this.uiDialog.attr({"aria-labelledby":uiDialogTitle.attr("id")});},_title:function(title){if(!this.options.title){title.html("&#160;");}
title.text(this.options.title);},_createButtonPane:function(){this.uiDialogButtonPane=$("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");this.uiButtonSet=$("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane);this._createButtons();},_createButtons:function(){var that=this,buttons=this.options.buttons;this.uiDialogButtonPane.remove();this.uiButtonSet.empty();if($.isEmptyObject(buttons)||($.isArray(buttons)&&!buttons.length)){this.uiDialog.removeClass("ui-dialog-buttons");return;}
$.each(buttons,function(name,props){var click,buttonOptions;props=$.isFunction(props)?{click:props,text:name}:props;props=$.extend({type:"button"},props);click=props.click;props.click=function(){click.apply(that.element[0],arguments);};buttonOptions={icons:props.icons,text:props.showText};delete props.icons;delete props.showText;$("<button></button>",props).button(buttonOptions).appendTo(that.uiButtonSet);});this.uiDialog.addClass("ui-dialog-buttons");this.uiDialogButtonPane.appendTo(this.uiDialog);},_makeDraggable:function(){var that=this,options=this.options;function filteredUi(ui){return{position:ui.position,offset:ui.offset};}
this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(event,ui){$(this).addClass("ui-dialog-dragging");that._blockFrames();that._trigger("dragStart",event,filteredUi(ui));},drag:function(event,ui){that._trigger("drag",event,filteredUi(ui));},stop:function(event,ui){var left=ui.offset.left-that.document.scrollLeft(),top=ui.offset.top-that.document.scrollTop();options.position={my:"left top",at:"left"+(left>=0?"+":"")+left+" "+"top"+(top>=0?"+":"")+top,of:that.window};$(this).removeClass("ui-dialog-dragging");that._unblockFrames();that._trigger("dragStop",event,filteredUi(ui));}});},_makeResizable:function(){var that=this,options=this.options,handles=options.resizable,position=this.uiDialog.css("position"),resizeHandles=typeof handles==="string"?handles:"n,e,s,w,se,sw,ne,nw";function filteredUi(ui){return{originalPosition:ui.originalPosition,originalSize:ui.originalSize,position:ui.position,size:ui.size};}
this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:options.maxWidth,maxHeight:options.maxHeight,minWidth:options.minWidth,minHeight:this._minHeight(),handles:resizeHandles,start:function(event,ui){$(this).addClass("ui-dialog-resizing");that._blockFrames();that._trigger("resizeStart",event,filteredUi(ui));},resize:function(event,ui){that._trigger("resize",event,filteredUi(ui));},stop:function(event,ui){var offset=that.uiDialog.offset(),left=offset.left-that.document.scrollLeft(),top=offset.top-that.document.scrollTop();options.height=that.uiDialog.height();options.width=that.uiDialog.width();options.position={my:"left top",at:"left"+(left>=0?"+":"")+left+" "+"top"+(top>=0?"+":"")+top,of:that.window};$(this).removeClass("ui-dialog-resizing");that._unblockFrames();that._trigger("resizeStop",event,filteredUi(ui));}}).css("position",position);},_trackFocus:function(){this._on(this.widget(),{focusin:function(event){this._makeFocusTarget();this._focusedElement=$(event.target);}});},_makeFocusTarget:function(){this._untrackInstance();this._trackingInstances().unshift(this);},_untrackInstance:function(){var instances=this._trackingInstances(),exists=$.inArray(this,instances);if(exists!==-1){instances.splice(exists,1);}},_trackingInstances:function(){var instances=this.document.data("ui-dialog-instances");if(!instances){instances=[];this.document.data("ui-dialog-instances",instances);}
return instances;},_minHeight:function(){var options=this.options;return options.height==="auto"?options.minHeight:Math.min(options.minHeight,options.height);},_position:function(){var isVisible=this.uiDialog.is(":visible");if(!isVisible){this.uiDialog.show();}
this.uiDialog.position(this.options.position);if(!isVisible){this.uiDialog.hide();}},_setOptions:function(options){var that=this,resize=false,resizableOptions={};$.each(options,function(key,value){that._setOption(key,value);if(key in that.sizeRelatedOptions){resize=true;}
if(key in that.resizableRelatedOptions){resizableOptions[key]=value;}});if(resize){this._size();this._position();}
if(this.uiDialog.is(":data(ui-resizable)")){this.uiDialog.resizable("option",resizableOptions);}},_setOption:function(key,value){var isDraggable,isResizable,uiDialog=this.uiDialog;if(key==="dialogClass"){uiDialog.removeClass(this.options.dialogClass).addClass(value);}
if(key==="disabled"){return;}
this._super(key,value);if(key==="appendTo"){this.uiDialog.appendTo(this._appendTo());}
if(key==="buttons"){this._createButtons();}
if(key==="closeText"){this.uiDialogTitlebarClose.button({label:""+value});}
if(key==="draggable"){isDraggable=uiDialog.is(":data(ui-draggable)");if(isDraggable&&!value){uiDialog.draggable("destroy");}
if(!isDraggable&&value){this._makeDraggable();}}
if(key==="position"){this._position();}
if(key==="resizable"){isResizable=uiDialog.is(":data(ui-resizable)");if(isResizable&&!value){uiDialog.resizable("destroy");}
if(isResizable&&typeof value==="string"){uiDialog.resizable("option","handles",value);}
if(!isResizable&&value!==false){this._makeResizable();}}
if(key==="title"){this._title(this.uiDialogTitlebar.find(".ui-dialog-title"));}},_size:function(){var nonContentHeight,minContentHeight,maxContentHeight,options=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0});if(options.minWidth>options.width){options.width=options.minWidth;}
nonContentHeight=this.uiDialog.css({height:"auto",width:options.width}).outerHeight();minContentHeight=Math.max(0,options.minHeight-nonContentHeight);maxContentHeight=typeof options.maxHeight==="number"?Math.max(0,options.maxHeight-nonContentHeight):"none";if(options.height==="auto"){this.element.css({minHeight:minContentHeight,maxHeight:maxContentHeight,height:"auto"});}else{this.element.height(Math.max(0,options.height-nonContentHeight));}
if(this.uiDialog.is(":data(ui-resizable)")){this.uiDialog.resizable("option","minHeight",this._minHeight());}},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var iframe=$(this);return $("<div>").css({position:"absolute",width:iframe.outerWidth(),height:iframe.outerHeight()}).appendTo(iframe.parent()).offset(iframe.offset())[0];});},_unblockFrames:function(){if(this.iframeBlocks){this.iframeBlocks.remove();delete this.iframeBlocks;}},_allowInteraction:function(event){if($(event.target).closest(".ui-dialog").length){return true;}
return!!$(event.target).closest(".ui-datepicker").length;},_createOverlay:function(){if(!this.options.modal){return;}
var isOpening=true;this._delay(function(){isOpening=false;});if(!this.document.data("ui-dialog-overlays")){this._on(this.document,{focusin:function(event){if(isOpening){return;}
if(!this._allowInteraction(event)){event.preventDefault();this._trackingInstances()[0]._focusTabbable();}}});}
this.overlay=$("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo());this._on(this.overlay,{mousedown:"_keepFocus"});this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1);},_destroyOverlay:function(){if(!this.options.modal){return;}
if(this.overlay){var overlays=this.document.data("ui-dialog-overlays")-1;if(!overlays){this.document.unbind("focusin").removeData("ui-dialog-overlays");}else{this.document.data("ui-dialog-overlays",overlays);}
this.overlay.remove();this.overlay=null;}}});var progressbar=$.widget("ui.progressbar",{version:"1.11.4",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue();this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min});this.valueDiv=$("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element);this._refreshValue();},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.valueDiv.remove();},value:function(newValue){if(newValue===undefined){return this.options.value;}
this.options.value=this._constrainedValue(newValue);this._refreshValue();},_constrainedValue:function(newValue){if(newValue===undefined){newValue=this.options.value;}
this.indeterminate=newValue===false;if(typeof newValue!=="number"){newValue=0;}
return this.indeterminate?false:Math.min(this.options.max,Math.max(this.min,newValue));},_setOptions:function(options){var value=options.value;delete options.value;this._super(options);this.options.value=this._constrainedValue(value);this._refreshValue();},_setOption:function(key,value){if(key==="max"){value=Math.max(this.min,value);}
if(key==="disabled"){this.element.toggleClass("ui-state-disabled",!!value).attr("aria-disabled",value);}
this._super(key,value);},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min);},_refreshValue:function(){var value=this.options.value,percentage=this._percentage();this.valueDiv.toggle(this.indeterminate||value>this.min).toggleClass("ui-corner-right",value===this.options.max).width(percentage.toFixed(0)+"%");this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate);if(this.indeterminate){this.element.removeAttr("aria-valuenow");if(!this.overlayDiv){this.overlayDiv=$("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv);}}else{this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":value});if(this.overlayDiv){this.overlayDiv.remove();this.overlayDiv=null;}}
if(this.oldValue!==value){this.oldValue=value;this._trigger("change");}
if(value===this.options.max){this._trigger("complete");}}});var selectmenu=$.widget("ui.selectmenu",{version:"1.11.4",defaultElement:"<select>",options:{appendTo:null,disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:null,change:null,close:null,focus:null,open:null,select:null},_create:function(){var selectmenuId=this.element.uniqueId().attr("id");this.ids={element:selectmenuId,button:selectmenuId+"-button",menu:selectmenuId+"-menu"};this._drawButton();this._drawMenu();if(this.options.disabled){this.disable();}},_drawButton:function(){var that=this;this.label=$("label[for='"+this.ids.element+"']").attr("for",this.ids.button);this._on(this.label,{click:function(event){this.button.focus();event.preventDefault();}});this.element.hide();this.button=$("<span>",{"class":"ui-selectmenu-button ui-widget ui-state-default ui-corner-all",tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true"}).insertAfter(this.element);$("<span>",{"class":"ui-icon "+this.options.icons.button}).prependTo(this.button);this.buttonText=$("<span>",{"class":"ui-selectmenu-text"}).appendTo(this.button);this._setText(this.buttonText,this.element.find("option:selected").text());this._resizeButton();this._on(this.button,this._buttonEvents);this.button.one("focusin",function(){if(!that.menuItems){that._refreshMenu();}});this._hoverable(this.button);this._focusable(this.button);},_drawMenu:function(){var that=this;this.menu=$("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu});this.menuWrap=$("<div>",{"class":"ui-selectmenu-menu ui-front"}).append(this.menu).appendTo(this._appendTo());this.menuInstance=this.menu.menu({role:"listbox",select:function(event,ui){event.preventDefault();that._setSelection();that._select(ui.item.data("ui-selectmenu-item"),event);},focus:function(event,ui){var item=ui.item.data("ui-selectmenu-item");if(that.focusIndex!=null&&item.index!==that.focusIndex){that._trigger("focus",event,{item:item});if(!that.isOpen){that._select(item,event);}}
that.focusIndex=item.index;that.button.attr("aria-activedescendant",that.menuItems.eq(item.index).attr("id"));}}).menu("instance");this.menu.addClass("ui-corner-bottom").removeClass("ui-corner-all");this.menuInstance._off(this.menu,"mouseleave");this.menuInstance._closeOnDocumentClick=function(){return false;};this.menuInstance._isDivider=function(){return false;};},refresh:function(){this._refreshMenu();this._setText(this.buttonText,this._getSelectedItem().text());if(!this.options.width){this._resizeButton();}},_refreshMenu:function(){this.menu.empty();var item,options=this.element.find("option");if(!options.length){return;}
this._parseOptions(options);this._renderMenu(this.menu,this.items);this.menuInstance.refresh();this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup");item=this._getSelectedItem();this.menuInstance.focus(null,item);this._setAria(item.data("ui-selectmenu-item"));this._setOption("disabled",this.element.prop("disabled"));},open:function(event){if(this.options.disabled){return;}
if(!this.menuItems){this._refreshMenu();}else{this.menu.find(".ui-state-focus").removeClass("ui-state-focus");this.menuInstance.focus(null,this._getSelectedItem());}
this.isOpen=true;this._toggleAttr();this._resizeMenu();this._position();this._on(this.document,this._documentClick);this._trigger("open",event);},_position:function(){this.menuWrap.position($.extend({of:this.button},this.options.position));},close:function(event){if(!this.isOpen){return;}
this.isOpen=false;this._toggleAttr();this.range=null;this._off(this.document);this._trigger("close",event);},widget:function(){return this.button;},menuWidget:function(){return this.menu;},_renderMenu:function(ul,items){var that=this,currentOptgroup="";$.each(items,function(index,item){if(item.optgroup!==currentOptgroup){$("<li>",{"class":"ui-selectmenu-optgroup ui-menu-divider"+
(item.element.parent("optgroup").prop("disabled")?" ui-state-disabled":""),text:item.optgroup}).appendTo(ul);currentOptgroup=item.optgroup;}
that._renderItemData(ul,item);});},_renderItemData:function(ul,item){return this._renderItem(ul,item).data("ui-selectmenu-item",item);},_renderItem:function(ul,item){var li=$("<li>");if(item.disabled){li.addClass("ui-state-disabled");}
this._setText(li,item.label);return li.appendTo(ul);},_setText:function(element,value){if(value){element.text(value);}else{element.html("&#160;");}},_move:function(direction,event){var item,next,filter=".ui-menu-item";if(this.isOpen){item=this.menuItems.eq(this.focusIndex);}else{item=this.menuItems.eq(this.element[0].selectedIndex);filter+=":not(.ui-state-disabled)";}
if(direction==="first"||direction==="last"){next=item[direction==="first"?"prevAll":"nextAll"](filter).eq(-1);}else{next=item[direction+"All"](filter).eq(0);}
if(next.length){this.menuInstance.focus(event,next);}},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex);},_toggle:function(event){this[this.isOpen?"close":"open"](event);},_setSelection:function(){var selection;if(!this.range){return;}
if(window.getSelection){selection=window.getSelection();selection.removeAllRanges();selection.addRange(this.range);}else{this.range.select();}
this.button.focus();},_documentClick:{mousedown:function(event){if(!this.isOpen){return;}
if(!$(event.target).closest(".ui-selectmenu-menu, #"+this.ids.button).length){this.close(event);}}},_buttonEvents:{mousedown:function(){var selection;if(window.getSelection){selection=window.getSelection();if(selection.rangeCount){this.range=selection.getRangeAt(0);}}else{this.range=document.selection.createRange();}},click:function(event){this._setSelection();this._toggle(event);},keydown:function(event){var preventDefault=true;switch(event.keyCode){case $.ui.keyCode.TAB:case $.ui.keyCode.ESCAPE:this.close(event);preventDefault=false;break;case $.ui.keyCode.ENTER:if(this.isOpen){this._selectFocusedItem(event);}
break;case $.ui.keyCode.UP:if(event.altKey){this._toggle(event);}else{this._move("prev",event);}
break;case $.ui.keyCode.DOWN:if(event.altKey){this._toggle(event);}else{this._move("next",event);}
break;case $.ui.keyCode.SPACE:if(this.isOpen){this._selectFocusedItem(event);}else{this._toggle(event);}
break;case $.ui.keyCode.LEFT:this._move("prev",event);break;case $.ui.keyCode.RIGHT:this._move("next",event);break;case $.ui.keyCode.HOME:case $.ui.keyCode.PAGE_UP:this._move("first",event);break;case $.ui.keyCode.END:case $.ui.keyCode.PAGE_DOWN:this._move("last",event);break;default:this.menu.trigger(event);preventDefault=false;}
if(preventDefault){event.preventDefault();}}},_selectFocusedItem:function(event){var item=this.menuItems.eq(this.focusIndex);if(!item.hasClass("ui-state-disabled")){this._select(item.data("ui-selectmenu-item"),event);}},_select:function(item,event){var oldIndex=this.element[0].selectedIndex;this.element[0].selectedIndex=item.index;this._setText(this.buttonText,item.label);this._setAria(item);this._trigger("select",event,{item:item});if(item.index!==oldIndex){this._trigger("change",event,{item:item});}
this.close(event);},_setAria:function(item){var id=this.menuItems.eq(item.index).attr("id");this.button.attr({"aria-labelledby":id,"aria-activedescendant":id});this.menu.attr("aria-activedescendant",id);},_setOption:function(key,value){if(key==="icons"){this.button.find("span.ui-icon").removeClass(this.options.icons.button).addClass(value.button);}
this._super(key,value);if(key==="appendTo"){this.menuWrap.appendTo(this._appendTo());}
if(key==="disabled"){this.menuInstance.option("disabled",value);this.button.toggleClass("ui-state-disabled",value).attr("aria-disabled",value);this.element.prop("disabled",value);if(value){this.button.attr("tabindex",-1);this.close();}else{this.button.attr("tabindex",0);}}
if(key==="width"){this._resizeButton();}},_appendTo:function(){var element=this.options.appendTo;if(element){element=element.jquery||element.nodeType?$(element):this.document.find(element).eq(0);}
if(!element||!element[0]){element=this.element.closest(".ui-front");}
if(!element.length){element=this.document[0].body;}
return element;},_toggleAttr:function(){this.button.toggleClass("ui-corner-top",this.isOpen).toggleClass("ui-corner-all",!this.isOpen).attr("aria-expanded",this.isOpen);this.menuWrap.toggleClass("ui-selectmenu-open",this.isOpen);this.menu.attr("aria-hidden",!this.isOpen);},_resizeButton:function(){var width=this.options.width;if(!width){width=this.element.show().outerWidth();this.element.hide();}
this.button.outerWidth(width);},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1));},_getCreateOptions:function(){return{disabled:this.element.prop("disabled")};},_parseOptions:function(options){var data=[];options.each(function(index,item){var option=$(item),optgroup=option.parent("optgroup");data.push({element:option,index:index,value:option.val(),label:option.text(),optgroup:optgroup.attr("label")||"",disabled:optgroup.prop("disabled")||option.prop("disabled")});});this.items=data;},_destroy:function(){this.menuWrap.remove();this.button.remove();this.element.show();this.element.removeUniqueId();this.label.attr("for",this.ids.element);}});var slider=$.widget("ui.slider",$.ui.mouse,{version:"1.11.4",widgetEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=false;this._mouseSliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this._calculateNewMax();this.element.addClass("ui-slider"+" ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all");this._refresh();this._setOption("disabled",this.options.disabled);this._animateOff=false;},_refresh:function(){this._createRange();this._createHandles();this._setupEvents();this._refreshValue();},_createHandles:function(){var i,handleCount,options=this.options,existingHandles=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),handle="<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>",handles=[];handleCount=(options.values&&options.values.length)||1;if(existingHandles.length>handleCount){existingHandles.slice(handleCount).remove();existingHandles=existingHandles.slice(0,handleCount);}
for(i=existingHandles.length;i<handleCount;i++){handles.push(handle);}
this.handles=existingHandles.add($(handles.join("")).appendTo(this.element));this.handle=this.handles.eq(0);this.handles.each(function(i){$(this).data("ui-slider-handle-index",i);});},_createRange:function(){var options=this.options,classes="";if(options.range){if(options.range===true){if(!options.values){options.values=[this._valueMin(),this._valueMin()];}else if(options.values.length&&options.values.length!==2){options.values=[options.values[0],options.values[0]];}else if($.isArray(options.values)){options.values=options.values.slice(0);}}
if(!this.range||!this.range.length){this.range=$("<div></div>").appendTo(this.element);classes="ui-slider-range"+" ui-widget-header ui-corner-all";}else{this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({"left":"","bottom":""});}
this.range.addClass(classes+
((options.range==="min"||options.range==="max")?" ui-slider-range-"+options.range:""));}else{if(this.range){this.range.remove();}
this.range=null;}},_setupEvents:function(){this._off(this.handles);this._on(this.handles,this._handleEvents);this._hoverable(this.handles);this._focusable(this.handles);},_destroy:function(){this.handles.remove();if(this.range){this.range.remove();}
this.element.removeClass("ui-slider"+" ui-slider-horizontal"+" ui-slider-vertical"+" ui-widget"+" ui-widget-content"+" ui-corner-all");this._mouseDestroy();},_mouseCapture:function(event){var position,normValue,distance,closestHandle,index,allowed,offset,mouseOverHandle,that=this,o=this.options;if(o.disabled){return false;}
this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();position={x:event.pageX,y:event.pageY};normValue=this._normValueFromMouse(position);distance=this._valueMax()-this._valueMin()+1;this.handles.each(function(i){var thisDistance=Math.abs(normValue-that.values(i));if((distance>thisDistance)||(distance===thisDistance&&(i===that._lastChangedValue||that.values(i)===o.min))){distance=thisDistance;closestHandle=$(this);index=i;}});allowed=this._start(event,index);if(allowed===false){return false;}
this._mouseSliding=true;this._handleIndex=index;closestHandle.addClass("ui-state-active").focus();offset=closestHandle.offset();mouseOverHandle=!$(event.target).parents().addBack().is(".ui-slider-handle");this._clickOffset=mouseOverHandle?{left:0,top:0}:{left:event.pageX-offset.left-(closestHandle.width()/2),top:event.pageY-offset.top-
(closestHandle.height()/2)-
(parseInt(closestHandle.css("borderTopWidth"),10)||0)-
(parseInt(closestHandle.css("borderBottomWidth"),10)||0)+
(parseInt(closestHandle.css("marginTop"),10)||0)};if(!this.handles.hasClass("ui-state-hover")){this._slide(event,index,normValue);}
this._animateOff=true;return true;},_mouseStart:function(){return true;},_mouseDrag:function(event){var position={x:event.pageX,y:event.pageY},normValue=this._normValueFromMouse(position);this._slide(event,this._handleIndex,normValue);return false;},_mouseStop:function(event){this.handles.removeClass("ui-state-active");this._mouseSliding=false;this._stop(event,this._handleIndex);this._change(event,this._handleIndex);this._handleIndex=null;this._clickOffset=null;this._animateOff=false;return false;},_detectOrientation:function(){this.orientation=(this.options.orientation==="vertical")?"vertical":"horizontal";},_normValueFromMouse:function(position){var pixelTotal,pixelMouse,percentMouse,valueTotal,valueMouse;if(this.orientation==="horizontal"){pixelTotal=this.elementSize.width;pixelMouse=position.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0);}else{pixelTotal=this.elementSize.height;pixelMouse=position.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0);}
percentMouse=(pixelMouse/pixelTotal);if(percentMouse>1){percentMouse=1;}
if(percentMouse<0){percentMouse=0;}
if(this.orientation==="vertical"){percentMouse=1-percentMouse;}
valueTotal=this._valueMax()-this._valueMin();valueMouse=this._valueMin()+percentMouse*valueTotal;return this._trimAlignValue(valueMouse);},_start:function(event,index){var uiHash={handle:this.handles[index],value:this.value()};if(this.options.values&&this.options.values.length){uiHash.value=this.values(index);uiHash.values=this.values();}
return this._trigger("start",event,uiHash);},_slide:function(event,index,newVal){var otherVal,newValues,allowed;if(this.options.values&&this.options.values.length){otherVal=this.values(index?0:1);if((this.options.values.length===2&&this.options.range===true)&&((index===0&&newVal>otherVal)||(index===1&&newVal<otherVal))){newVal=otherVal;}
if(newVal!==this.values(index)){newValues=this.values();newValues[index]=newVal;allowed=this._trigger("slide",event,{handle:this.handles[index],value:newVal,values:newValues});otherVal=this.values(index?0:1);if(allowed!==false){this.values(index,newVal);}}}else{if(newVal!==this.value()){allowed=this._trigger("slide",event,{handle:this.handles[index],value:newVal});if(allowed!==false){this.value(newVal);}}}},_stop:function(event,index){var uiHash={handle:this.handles[index],value:this.value()};if(this.options.values&&this.options.values.length){uiHash.value=this.values(index);uiHash.values=this.values();}
this._trigger("stop",event,uiHash);},_change:function(event,index){if(!this._keySliding&&!this._mouseSliding){var uiHash={handle:this.handles[index],value:this.value()};if(this.options.values&&this.options.values.length){uiHash.value=this.values(index);uiHash.values=this.values();}
this._lastChangedValue=index;this._trigger("change",event,uiHash);}},value:function(newValue){if(arguments.length){this.options.value=this._trimAlignValue(newValue);this._refreshValue();this._change(null,0);return;}
return this._value();},values:function(index,newValue){var vals,newValues,i;if(arguments.length>1){this.options.values[index]=this._trimAlignValue(newValue);this._refreshValue();this._change(null,index);return;}
if(arguments.length){if($.isArray(arguments[0])){vals=this.options.values;newValues=arguments[0];for(i=0;i<vals.length;i+=1){vals[i]=this._trimAlignValue(newValues[i]);this._change(null,i);}
this._refreshValue();}else{if(this.options.values&&this.options.values.length){return this._values(index);}else{return this.value();}}}else{return this._values();}},_setOption:function(key,value){var i,valsLength=0;if(key==="range"&&this.options.range===true){if(value==="min"){this.options.value=this._values(0);this.options.values=null;}else if(value==="max"){this.options.value=this._values(this.options.values.length-1);this.options.values=null;}}
if($.isArray(this.options.values)){valsLength=this.options.values.length;}
if(key==="disabled"){this.element.toggleClass("ui-state-disabled",!!value);}
this._super(key,value);switch(key){case"orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();this.handles.css(value==="horizontal"?"bottom":"left","");break;case"value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case"values":this._animateOff=true;this._refreshValue();for(i=0;i<valsLength;i+=1){this._change(null,i);}
this._animateOff=false;break;case"step":case"min":case"max":this._animateOff=true;this._calculateNewMax();this._refreshValue();this._animateOff=false;break;case"range":this._animateOff=true;this._refresh();this._animateOff=false;break;}},_value:function(){var val=this.options.value;val=this._trimAlignValue(val);return val;},_values:function(index){var val,vals,i;if(arguments.length){val=this.options.values[index];val=this._trimAlignValue(val);return val;}else if(this.options.values&&this.options.values.length){vals=this.options.values.slice();for(i=0;i<vals.length;i+=1){vals[i]=this._trimAlignValue(vals[i]);}
return vals;}else{return[];}},_trimAlignValue:function(val){if(val<=this._valueMin()){return this._valueMin();}
if(val>=this._valueMax()){return this._valueMax();}
var step=(this.options.step>0)?this.options.step:1,valModStep=(val-this._valueMin())%step,alignValue=val-valModStep;if(Math.abs(valModStep)*2>=step){alignValue+=(valModStep>0)?step:(-step);}
return parseFloat(alignValue.toFixed(5));},_calculateNewMax:function(){var max=this.options.max,min=this._valueMin(),step=this.options.step,aboveMin=Math.floor((+(max-min).toFixed(this._precision()))/step)*step;max=aboveMin+min;this.max=parseFloat(max.toFixed(this._precision()));},_precision:function(){var precision=this._precisionOf(this.options.step);if(this.options.min!==null){precision=Math.max(precision,this._precisionOf(this.options.min));}
return precision;},_precisionOf:function(num){var str=num.toString(),decimal=str.indexOf(".");return decimal===-1?0:str.length-decimal-1;},_valueMin:function(){return this.options.min;},_valueMax:function(){return this.max;},_refreshValue:function(){var lastValPercent,valPercent,value,valueMin,valueMax,oRange=this.options.range,o=this.options,that=this,animate=(!this._animateOff)?o.animate:false,_set={};if(this.options.values&&this.options.values.length){this.handles.each(function(i){valPercent=(that.values(i)-that._valueMin())/(that._valueMax()-that._valueMin())*100;_set[that.orientation==="horizontal"?"left":"bottom"]=valPercent+"%";$(this).stop(1,1)[animate?"animate":"css"](_set,o.animate);if(that.options.range===true){if(that.orientation==="horizontal"){if(i===0){that.range.stop(1,1)[animate?"animate":"css"]({left:valPercent+"%"},o.animate);}
if(i===1){that.range[animate?"animate":"css"]({width:(valPercent-lastValPercent)+"%"},{queue:false,duration:o.animate});}}else{if(i===0){that.range.stop(1,1)[animate?"animate":"css"]({bottom:(valPercent)+"%"},o.animate);}
if(i===1){that.range[animate?"animate":"css"]({height:(valPercent-lastValPercent)+"%"},{queue:false,duration:o.animate});}}}
lastValPercent=valPercent;});}else{value=this.value();valueMin=this._valueMin();valueMax=this._valueMax();valPercent=(valueMax!==valueMin)?(value-valueMin)/(valueMax-valueMin)*100:0;_set[this.orientation==="horizontal"?"left":"bottom"]=valPercent+"%";this.handle.stop(1,1)[animate?"animate":"css"](_set,o.animate);if(oRange==="min"&&this.orientation==="horizontal"){this.range.stop(1,1)[animate?"animate":"css"]({width:valPercent+"%"},o.animate);}
if(oRange==="max"&&this.orientation==="horizontal"){this.range[animate?"animate":"css"]({width:(100-valPercent)+"%"},{queue:false,duration:o.animate});}
if(oRange==="min"&&this.orientation==="vertical"){this.range.stop(1,1)[animate?"animate":"css"]({height:valPercent+"%"},o.animate);}
if(oRange==="max"&&this.orientation==="vertical"){this.range[animate?"animate":"css"]({height:(100-valPercent)+"%"},{queue:false,duration:o.animate});}}},_handleEvents:{keydown:function(event){var allowed,curVal,newVal,step,index=$(event.target).data("ui-slider-handle-index");switch(event.keyCode){case $.ui.keyCode.HOME:case $.ui.keyCode.END:case $.ui.keyCode.PAGE_UP:case $.ui.keyCode.PAGE_DOWN:case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:event.preventDefault();if(!this._keySliding){this._keySliding=true;$(event.target).addClass("ui-state-active");allowed=this._start(event,index);if(allowed===false){return;}}
break;}
step=this.options.step;if(this.options.values&&this.options.values.length){curVal=newVal=this.values(index);}else{curVal=newVal=this.value();}
switch(event.keyCode){case $.ui.keyCode.HOME:newVal=this._valueMin();break;case $.ui.keyCode.END:newVal=this._valueMax();break;case $.ui.keyCode.PAGE_UP:newVal=this._trimAlignValue(curVal+((this._valueMax()-this._valueMin())/this.numPages));break;case $.ui.keyCode.PAGE_DOWN:newVal=this._trimAlignValue(curVal-((this._valueMax()-this._valueMin())/this.numPages));break;case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:if(curVal===this._valueMax()){return;}
newVal=this._trimAlignValue(curVal+step);break;case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:if(curVal===this._valueMin()){return;}
newVal=this._trimAlignValue(curVal-step);break;}
this._slide(event,index,newVal);},keyup:function(event){var index=$(event.target).data("ui-slider-handle-index");if(this._keySliding){this._keySliding=false;this._stop(event,index);this._change(event,index);$(event.target).removeClass("ui-state-active");}}}});function spinner_modifier(fn){return function(){var previous=this.element.val();fn.apply(this,arguments);this._refresh();if(previous!==this.element.val()){this._trigger("change");}};}
var spinner=$.widget("ui.spinner",{version:"1.11.4",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:true,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max);this._setOption("min",this.options.min);this._setOption("step",this.options.step);if(this.value()!==""){this._value(this.element.val(),true);}
this._draw();this._on(this._events);this._refresh();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete");}});},_getCreateOptions:function(){var options={},element=this.element;$.each(["min","max","step"],function(i,option){var value=element.attr(option);if(value!==undefined&&value.length){options[option]=value;}});return options;},_events:{keydown:function(event){if(this._start(event)&&this._keydown(event)){event.preventDefault();}},keyup:"_stop",focus:function(){this.previous=this.element.val();},blur:function(event){if(this.cancelBlur){delete this.cancelBlur;return;}
this._stop();this._refresh();if(this.previous!==this.element.val()){this._trigger("change",event);}},mousewheel:function(event,delta){if(!delta){return;}
if(!this.spinning&&!this._start(event)){return false;}
this._spin((delta>0?1:-1)*this.options.step,event);clearTimeout(this.mousewheelTimer);this.mousewheelTimer=this._delay(function(){if(this.spinning){this._stop(event);}},100);event.preventDefault();},"mousedown .ui-spinner-button":function(event){var previous;previous=this.element[0]===this.document[0].activeElement?this.previous:this.element.val();function checkFocus(){var isActive=this.element[0]===this.document[0].activeElement;if(!isActive){this.element.focus();this.previous=previous;this._delay(function(){this.previous=previous;});}}
event.preventDefault();checkFocus.call(this);this.cancelBlur=true;this._delay(function(){delete this.cancelBlur;checkFocus.call(this);});if(this._start(event)===false){return;}
this._repeat(null,$(event.currentTarget).hasClass("ui-spinner-up")?1:-1,event);},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(event){if(!$(event.currentTarget).hasClass("ui-state-active")){return;}
if(this._start(event)===false){return false;}
this._repeat(null,$(event.currentTarget).hasClass("ui-spinner-up")?1:-1,event);},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var uiSpinner=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton");this.buttons=uiSpinner.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all");if(this.buttons.height()>Math.ceil(uiSpinner.height()*0.5)&&uiSpinner.height()>0){uiSpinner.height(uiSpinner.height());}
if(this.options.disabled){this.disable();}},_keydown:function(event){var options=this.options,keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.UP:this._repeat(null,1,event);return true;case keyCode.DOWN:this._repeat(null,-1,event);return true;case keyCode.PAGE_UP:this._repeat(null,options.page,event);return true;case keyCode.PAGE_DOWN:this._repeat(null,-options.page,event);return true;}
return false;},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>";},_buttonHtml:function(){return""+"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'>"+"<span class='ui-icon "+this.options.icons.up+"'>&#9650;</span>"+"</a>"+"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>"+"<span class='ui-icon "+this.options.icons.down+"'>&#9660;</span>"+"</a>";},_start:function(event){if(!this.spinning&&this._trigger("start",event)===false){return false;}
if(!this.counter){this.counter=1;}
this.spinning=true;return true;},_repeat:function(i,steps,event){i=i||500;clearTimeout(this.timer);this.timer=this._delay(function(){this._repeat(40,steps,event);},i);this._spin(steps*this.options.step,event);},_spin:function(step,event){var value=this.value()||0;if(!this.counter){this.counter=1;}
value=this._adjustValue(value+step*this._increment(this.counter));if(!this.spinning||this._trigger("spin",event,{value:value})!==false){this._value(value);this.counter++;}},_increment:function(i){var incremental=this.options.incremental;if(incremental){return $.isFunction(incremental)?incremental(i):Math.floor(i*i*i/50000-i*i/500+17*i/200+1);}
return 1;},_precision:function(){var precision=this._precisionOf(this.options.step);if(this.options.min!==null){precision=Math.max(precision,this._precisionOf(this.options.min));}
return precision;},_precisionOf:function(num){var str=num.toString(),decimal=str.indexOf(".");return decimal===-1?0:str.length-decimal-1;},_adjustValue:function(value){var base,aboveMin,options=this.options;base=options.min!==null?options.min:0;aboveMin=value-base;aboveMin=Math.round(aboveMin/options.step)*options.step;value=base+aboveMin;value=parseFloat(value.toFixed(this._precision()));if(options.max!==null&&value>options.max){return options.max;}
if(options.min!==null&&value<options.min){return options.min;}
return value;},_stop:function(event){if(!this.spinning){return;}
clearTimeout(this.timer);clearTimeout(this.mousewheelTimer);this.counter=0;this.spinning=false;this._trigger("stop",event);},_setOption:function(key,value){if(key==="culture"||key==="numberFormat"){var prevValue=this._parse(this.element.val());this.options[key]=value;this.element.val(this._format(prevValue));return;}
if(key==="max"||key==="min"||key==="step"){if(typeof value==="string"){value=this._parse(value);}}
if(key==="icons"){this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(value.up);this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(value.down);}
this._super(key,value);if(key==="disabled"){this.widget().toggleClass("ui-state-disabled",!!value);this.element.prop("disabled",!!value);this.buttons.button(value?"disable":"enable");}},_setOptions:spinner_modifier(function(options){this._super(options);}),_parse:function(val){if(typeof val==="string"&&val!==""){val=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(val,10,this.options.culture):+val;}
return val===""||isNaN(val)?null:val;},_format:function(value){if(value===""){return"";}
return window.Globalize&&this.options.numberFormat?Globalize.format(value,this.options.numberFormat,this.options.culture):value;},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())});},isValid:function(){var value=this.value();if(value===null){return false;}
return value===this._adjustValue(value);},_value:function(value,allowAny){var parsed;if(value!==""){parsed=this._parse(value);if(parsed!==null){if(!allowAny){parsed=this._adjustValue(parsed);}
value=this._format(parsed);}}
this.element.val(value);this._refresh();},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",false).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.uiSpinner.replaceWith(this.element);},stepUp:spinner_modifier(function(steps){this._stepUp(steps);}),_stepUp:function(steps){if(this._start()){this._spin((steps||1)*this.options.step);this._stop();}},stepDown:spinner_modifier(function(steps){this._stepDown(steps);}),_stepDown:function(steps){if(this._start()){this._spin((steps||1)*-this.options.step);this._stop();}},pageUp:spinner_modifier(function(pages){this._stepUp((pages||1)*this.options.page);}),pageDown:spinner_modifier(function(pages){this._stepDown((pages||1)*this.options.page);}),value:function(newVal){if(!arguments.length){return this._parse(this.element.val());}
spinner_modifier(this._value).call(this,newVal);},widget:function(){return this.uiSpinner;}});var tabs=$.widget("ui.tabs",{version:"1.11.4",delay:300,options:{active:null,collapsible:false,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:(function(){var rhash=/#.*$/;return function(anchor){var anchorUrl,locationUrl;anchor=anchor.cloneNode(false);anchorUrl=anchor.href.replace(rhash,"");locationUrl=location.href.replace(rhash,"");try{anchorUrl=decodeURIComponent(anchorUrl);}catch(error){}
try{locationUrl=decodeURIComponent(locationUrl);}catch(error){}
return anchor.hash.length>1&&anchorUrl===locationUrl;};})(),_create:function(){var that=this,options=this.options;this.running=false;this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",options.collapsible);this._processTabs();options.active=this._initialActive();if($.isArray(options.disabled)){options.disabled=$.unique(options.disabled.concat($.map(this.tabs.filter(".ui-state-disabled"),function(li){return that.tabs.index(li);}))).sort();}
if(this.options.active!==false&&this.anchors.length){this.active=this._findActive(options.active);}else{this.active=$();}
this._refresh();if(this.active.length){this.load(options.active);}},_initialActive:function(){var active=this.options.active,collapsible=this.options.collapsible,locationHash=location.hash.substring(1);if(active===null){if(locationHash){this.tabs.each(function(i,tab){if($(tab).attr("aria-controls")===locationHash){active=i;return false;}});}
if(active===null){active=this.tabs.index(this.tabs.filter(".ui-tabs-active"));}
if(active===null||active===-1){active=this.tabs.length?0:false;}}
if(active!==false){active=this.tabs.index(this.tabs.eq(active));if(active===-1){active=collapsible?false:0;}}
if(!collapsible&&active===false&&this.anchors.length){active=0;}
return active;},_getCreateEventData:function(){return{tab:this.active,panel:!this.active.length?$():this._getPanelForTab(this.active)};},_tabKeydown:function(event){var focusedTab=$(this.document[0].activeElement).closest("li"),selectedIndex=this.tabs.index(focusedTab),goingForward=true;if(this._handlePageNav(event)){return;}
switch(event.keyCode){case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:selectedIndex++;break;case $.ui.keyCode.UP:case $.ui.keyCode.LEFT:goingForward=false;selectedIndex--;break;case $.ui.keyCode.END:selectedIndex=this.anchors.length-1;break;case $.ui.keyCode.HOME:selectedIndex=0;break;case $.ui.keyCode.SPACE:event.preventDefault();clearTimeout(this.activating);this._activate(selectedIndex);return;case $.ui.keyCode.ENTER:event.preventDefault();clearTimeout(this.activating);this._activate(selectedIndex===this.options.active?false:selectedIndex);return;default:return;}
event.preventDefault();clearTimeout(this.activating);selectedIndex=this._focusNextTab(selectedIndex,goingForward);if(!event.ctrlKey&&!event.metaKey){focusedTab.attr("aria-selected","false");this.tabs.eq(selectedIndex).attr("aria-selected","true");this.activating=this._delay(function(){this.option("active",selectedIndex);},this.delay);}},_panelKeydown:function(event){if(this._handlePageNav(event)){return;}
if(event.ctrlKey&&event.keyCode===$.ui.keyCode.UP){event.preventDefault();this.active.focus();}},_handlePageNav:function(event){if(event.altKey&&event.keyCode===$.ui.keyCode.PAGE_UP){this._activate(this._focusNextTab(this.options.active-1,false));return true;}
if(event.altKey&&event.keyCode===$.ui.keyCode.PAGE_DOWN){this._activate(this._focusNextTab(this.options.active+1,true));return true;}},_findNextTab:function(index,goingForward){var lastTabIndex=this.tabs.length-1;function constrain(){if(index>lastTabIndex){index=0;}
if(index<0){index=lastTabIndex;}
return index;}
while($.inArray(constrain(),this.options.disabled)!==-1){index=goingForward?index+1:index-1;}
return index;},_focusNextTab:function(index,goingForward){index=this._findNextTab(index,goingForward);this.tabs.eq(index).focus();return index;},_setOption:function(key,value){if(key==="active"){this._activate(value);return;}
if(key==="disabled"){this._setupDisabled(value);return;}
this._super(key,value);if(key==="collapsible"){this.element.toggleClass("ui-tabs-collapsible",value);if(!value&&this.options.active===false){this._activate(0);}}
if(key==="event"){this._setupEvents(value);}
if(key==="heightStyle"){this._setupHeightStyle(value);}},_sanitizeSelector:function(hash){return hash?hash.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):"";},refresh:function(){var options=this.options,lis=this.tablist.children(":has(a[href])");options.disabled=$.map(lis.filter(".ui-state-disabled"),function(tab){return lis.index(tab);});this._processTabs();if(options.active===false||!this.anchors.length){options.active=false;this.active=$();}else if(this.active.length&&!$.contains(this.tablist[0],this.active[0])){if(this.tabs.length===options.disabled.length){options.active=false;this.active=$();}else{this._activate(this._findNextTab(Math.max(0,options.active-1),false));}}else{options.active=this.tabs.index(this.active);}
this._refresh();},_refresh:function(){this._setupDisabled(this.options.disabled);this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"});if(!this.active.length){this.tabs.eq(0).attr("tabIndex",0);}else{this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0});this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"});}},_processTabs:function(){var that=this,prevTabs=this.tabs,prevAnchors=this.anchors,prevPanels=this.panels;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist").delegate("> li","mousedown"+this.eventNamespace,function(event){if($(this).is(".ui-state-disabled")){event.preventDefault();}}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){if($(this).closest("li").is(".ui-state-disabled")){this.blur();}});this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1});this.anchors=this.tabs.map(function(){return $("a",this)[0];}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1});this.panels=$();this.anchors.each(function(i,anchor){var selector,panel,panelId,anchorId=$(anchor).uniqueId().attr("id"),tab=$(anchor).closest("li"),originalAriaControls=tab.attr("aria-controls");if(that._isLocal(anchor)){selector=anchor.hash;panelId=selector.substring(1);panel=that.element.find(that._sanitizeSelector(selector));}else{panelId=tab.attr("aria-controls")||$({}).uniqueId()[0].id;selector="#"+panelId;panel=that.element.find(selector);if(!panel.length){panel=that._createPanel(panelId);panel.insertAfter(that.panels[i-1]||that.tablist);}
panel.attr("aria-live","polite");}
if(panel.length){that.panels=that.panels.add(panel);}
if(originalAriaControls){tab.data("ui-tabs-aria-controls",originalAriaControls);}
tab.attr({"aria-controls":panelId,"aria-labelledby":anchorId});panel.attr("aria-labelledby",anchorId);});this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel");if(prevTabs){this._off(prevTabs.not(this.tabs));this._off(prevAnchors.not(this.anchors));this._off(prevPanels.not(this.panels));}},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0);},_createPanel:function(id){return $("<div>").attr("id",id).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",true);},_setupDisabled:function(disabled){if($.isArray(disabled)){if(!disabled.length){disabled=false;}else if(disabled.length===this.anchors.length){disabled=true;}}
for(var i=0,li;(li=this.tabs[i]);i++){if(disabled===true||$.inArray(i,disabled)!==-1){$(li).addClass("ui-state-disabled").attr("aria-disabled","true");}else{$(li).removeClass("ui-state-disabled").removeAttr("aria-disabled");}}
this.options.disabled=disabled;},_setupEvents:function(event){var events={};if(event){$.each(event.split(" "),function(index,eventName){events[eventName]="_eventHandler";});}
this._off(this.anchors.add(this.tabs).add(this.panels));this._on(true,this.anchors,{click:function(event){event.preventDefault();}});this._on(this.anchors,events);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs);},_setupHeightStyle:function(heightStyle){var maxHeight,parent=this.element.parent();if(heightStyle==="fill"){maxHeight=parent.height();maxHeight-=this.element.outerHeight()-this.element.height();this.element.siblings(":visible").each(function(){var elem=$(this),position=elem.css("position");if(position==="absolute"||position==="fixed"){return;}
maxHeight-=elem.outerHeight(true);});this.element.children().not(this.panels).each(function(){maxHeight-=$(this).outerHeight(true);});this.panels.each(function(){$(this).height(Math.max(0,maxHeight-
$(this).innerHeight()+$(this).height()));}).css("overflow","auto");}else if(heightStyle==="auto"){maxHeight=0;this.panels.each(function(){maxHeight=Math.max(maxHeight,$(this).height("").height());}).height(maxHeight);}},_eventHandler:function(event){var options=this.options,active=this.active,anchor=$(event.currentTarget),tab=anchor.closest("li"),clickedIsActive=tab[0]===active[0],collapsing=clickedIsActive&&options.collapsible,toShow=collapsing?$():this._getPanelForTab(tab),toHide=!active.length?$():this._getPanelForTab(active),eventData={oldTab:active,oldPanel:toHide,newTab:collapsing?$():tab,newPanel:toShow};event.preventDefault();if(tab.hasClass("ui-state-disabled")||tab.hasClass("ui-tabs-loading")||this.running||(clickedIsActive&&!options.collapsible)||(this._trigger("beforeActivate",event,eventData)===false)){return;}
options.active=collapsing?false:this.tabs.index(tab);this.active=clickedIsActive?$():tab;if(this.xhr){this.xhr.abort();}
if(!toHide.length&&!toShow.length){$.error("jQuery UI Tabs: Mismatching fragment identifier.");}
if(toShow.length){this.load(this.tabs.index(tab),event);}
this._toggle(event,eventData);},_toggle:function(event,eventData){var that=this,toShow=eventData.newPanel,toHide=eventData.oldPanel;this.running=true;function complete(){that.running=false;that._trigger("activate",event,eventData);}
function show(){eventData.newTab.closest("li").addClass("ui-tabs-active ui-state-active");if(toShow.length&&that.options.show){that._show(toShow,that.options.show,complete);}else{toShow.show();complete();}}
if(toHide.length&&this.options.hide){this._hide(toHide,this.options.hide,function(){eventData.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");show();});}else{eventData.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");toHide.hide();show();}
toHide.attr("aria-hidden","true");eventData.oldTab.attr({"aria-selected":"false","aria-expanded":"false"});if(toShow.length&&toHide.length){eventData.oldTab.attr("tabIndex",-1);}else if(toShow.length){this.tabs.filter(function(){return $(this).attr("tabIndex")===0;}).attr("tabIndex",-1);}
toShow.attr("aria-hidden","false");eventData.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0});},_activate:function(index){var anchor,active=this._findActive(index);if(active[0]===this.active[0]){return;}
if(!active.length){active=this.active;}
anchor=active.find(".ui-tabs-anchor")[0];this._eventHandler({target:anchor,currentTarget:anchor,preventDefault:$.noop});},_findActive:function(index){return index===false?$():this.tabs.eq(index);},_getIndex:function(index){if(typeof index==="string"){index=this.anchors.index(this.anchors.filter("[href$='"+index+"']"));}
return index;},_destroy:function(){if(this.xhr){this.xhr.abort();}
this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible");this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role");this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId();this.tablist.unbind(this.eventNamespace);this.tabs.add(this.panels).each(function(){if($.data(this,"ui-tabs-destroy")){$(this).remove();}else{$(this).removeClass("ui-state-default ui-state-active ui-state-disabled "+"ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role");}});this.tabs.each(function(){var li=$(this),prev=li.data("ui-tabs-aria-controls");if(prev){li.attr("aria-controls",prev).removeData("ui-tabs-aria-controls");}else{li.removeAttr("aria-controls");}});this.panels.show();if(this.options.heightStyle!=="content"){this.panels.css("height","");}},enable:function(index){var disabled=this.options.disabled;if(disabled===false){return;}
if(index===undefined){disabled=false;}else{index=this._getIndex(index);if($.isArray(disabled)){disabled=$.map(disabled,function(num){return num!==index?num:null;});}else{disabled=$.map(this.tabs,function(li,num){return num!==index?num:null;});}}
this._setupDisabled(disabled);},disable:function(index){var disabled=this.options.disabled;if(disabled===true){return;}
if(index===undefined){disabled=true;}else{index=this._getIndex(index);if($.inArray(index,disabled)!==-1){return;}
if($.isArray(disabled)){disabled=$.merge([index],disabled).sort();}else{disabled=[index];}}
this._setupDisabled(disabled);},load:function(index,event){index=this._getIndex(index);var that=this,tab=this.tabs.eq(index),anchor=tab.find(".ui-tabs-anchor"),panel=this._getPanelForTab(tab),eventData={tab:tab,panel:panel},complete=function(jqXHR,status){if(status==="abort"){that.panels.stop(false,true);}
tab.removeClass("ui-tabs-loading");panel.removeAttr("aria-busy");if(jqXHR===that.xhr){delete that.xhr;}};if(this._isLocal(anchor[0])){return;}
this.xhr=$.ajax(this._ajaxSettings(anchor,event,eventData));if(this.xhr&&this.xhr.statusText!=="canceled"){tab.addClass("ui-tabs-loading");panel.attr("aria-busy","true");this.xhr.done(function(response,status,jqXHR){setTimeout(function(){panel.html(response);that._trigger("load",event,eventData);complete(jqXHR,status);},1);}).fail(function(jqXHR,status){setTimeout(function(){complete(jqXHR,status);},1);});}},_ajaxSettings:function(anchor,event,eventData){var that=this;return{url:anchor.attr("href"),beforeSend:function(jqXHR,settings){return that._trigger("beforeLoad",event,$.extend({jqXHR:jqXHR,ajaxSettings:settings},eventData));}};},_getPanelForTab:function(tab){var id=$(tab).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+id));}});var tooltip=$.widget("ui.tooltip",{version:"1.11.4",options:{content:function(){var title=$(this).attr("title")||"";return $("<a>").text(title).html();},hide:true,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:true,tooltipClass:null,track:false,close:null,open:null},_addDescribedBy:function(elem,id){var describedby=(elem.attr("aria-describedby")||"").split(/\s+/);describedby.push(id);elem.data("ui-tooltip-id",id).attr("aria-describedby",$.trim(describedby.join(" ")));},_removeDescribedBy:function(elem){var id=elem.data("ui-tooltip-id"),describedby=(elem.attr("aria-describedby")||"").split(/\s+/),index=$.inArray(id,describedby);if(index!==-1){describedby.splice(index,1);}
elem.removeData("ui-tooltip-id");describedby=$.trim(describedby.join(" "));if(describedby){elem.attr("aria-describedby",describedby);}else{elem.removeAttr("aria-describedby");}},_create:function(){this._on({mouseover:"open",focusin:"open"});this.tooltips={};this.parents={};if(this.options.disabled){this._disable();}
this.liveRegion=$("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body);},_setOption:function(key,value){var that=this;if(key==="disabled"){this[value?"_disable":"_enable"]();this.options[key]=value;return;}
this._super(key,value);if(key==="content"){$.each(this.tooltips,function(id,tooltipData){that._updateContent(tooltipData.element);});}},_disable:function(){var that=this;$.each(this.tooltips,function(id,tooltipData){var event=$.Event("blur");event.target=event.currentTarget=tooltipData.element[0];that.close(event,true);});this.element.find(this.options.items).addBack().each(function(){var element=$(this);if(element.is("[title]")){element.data("ui-tooltip-title",element.attr("title")).removeAttr("title");}});},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var element=$(this);if(element.data("ui-tooltip-title")){element.attr("title",element.data("ui-tooltip-title"));}});},open:function(event){var that=this,target=$(event?event.target:this.element).closest(this.options.items);if(!target.length||target.data("ui-tooltip-id")){return;}
if(target.attr("title")){target.data("ui-tooltip-title",target.attr("title"));}
target.data("ui-tooltip-open",true);if(event&&event.type==="mouseover"){target.parents().each(function(){var parent=$(this),blurEvent;if(parent.data("ui-tooltip-open")){blurEvent=$.Event("blur");blurEvent.target=blurEvent.currentTarget=this;that.close(blurEvent,true);}
if(parent.attr("title")){parent.uniqueId();that.parents[this.id]={element:this,title:parent.attr("title")};parent.attr("title","");}});}
this._registerCloseHandlers(event,target);this._updateContent(target,event);},_updateContent:function(target,event){var content,contentOption=this.options.content,that=this,eventType=event?event.type:null;if(typeof contentOption==="string"){return this._open(event,target,contentOption);}
content=contentOption.call(target[0],function(response){that._delay(function(){if(!target.data("ui-tooltip-open")){return;}
if(event){event.type=eventType;}
this._open(event,target,response);});});if(content){this._open(event,target,content);}},_open:function(event,target,content){var tooltipData,tooltip,delayedShow,a11yContent,positionOption=$.extend({},this.options.position);if(!content){return;}
tooltipData=this._find(target);if(tooltipData){tooltipData.tooltip.find(".ui-tooltip-content").html(content);return;}
if(target.is("[title]")){if(event&&event.type==="mouseover"){target.attr("title","");}else{target.removeAttr("title");}}
tooltipData=this._tooltip(target);tooltip=tooltipData.tooltip;this._addDescribedBy(target,tooltip.attr("id"));tooltip.find(".ui-tooltip-content").html(content);this.liveRegion.children().hide();if(content.clone){a11yContent=content.clone();a11yContent.removeAttr("id").find("[id]").removeAttr("id");}else{a11yContent=content;}
$("<div>").html(a11yContent).appendTo(this.liveRegion);function position(event){positionOption.of=event;if(tooltip.is(":hidden")){return;}
tooltip.position(positionOption);}
if(this.options.track&&event&&/^mouse/.test(event.type)){this._on(this.document,{mousemove:position});position(event);}else{tooltip.position($.extend({of:target},this.options.position));}
tooltip.hide();this._show(tooltip,this.options.show);if(this.options.show&&this.options.show.delay){delayedShow=this.delayedShow=setInterval(function(){if(tooltip.is(":visible")){position(positionOption.of);clearInterval(delayedShow);}},$.fx.interval);}
this._trigger("open",event,{tooltip:tooltip});},_registerCloseHandlers:function(event,target){var events={keyup:function(event){if(event.keyCode===$.ui.keyCode.ESCAPE){var fakeEvent=$.Event(event);fakeEvent.currentTarget=target[0];this.close(fakeEvent,true);}}};if(target[0]!==this.element[0]){events.remove=function(){this._removeTooltip(this._find(target).tooltip);};}
if(!event||event.type==="mouseover"){events.mouseleave="close";}
if(!event||event.type==="focusin"){events.focusout="close";}
this._on(true,target,events);},close:function(event){var tooltip,that=this,target=$(event?event.currentTarget:this.element),tooltipData=this._find(target);if(!tooltipData){target.removeData("ui-tooltip-open");return;}
tooltip=tooltipData.tooltip;if(tooltipData.closing){return;}
clearInterval(this.delayedShow);if(target.data("ui-tooltip-title")&&!target.attr("title")){target.attr("title",target.data("ui-tooltip-title"));}
this._removeDescribedBy(target);tooltipData.hiding=true;tooltip.stop(true);this._hide(tooltip,this.options.hide,function(){that._removeTooltip($(this));});target.removeData("ui-tooltip-open");this._off(target,"mouseleave focusout keyup");if(target[0]!==this.element[0]){this._off(target,"remove");}
this._off(this.document,"mousemove");if(event&&event.type==="mouseleave"){$.each(this.parents,function(id,parent){$(parent.element).attr("title",parent.title);delete that.parents[id];});}
tooltipData.closing=true;this._trigger("close",event,{tooltip:tooltip});if(!tooltipData.hiding){tooltipData.closing=false;}},_tooltip:function(element){var tooltip=$("<div>").attr("role","tooltip").addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+
(this.options.tooltipClass||"")),id=tooltip.uniqueId().attr("id");$("<div>").addClass("ui-tooltip-content").appendTo(tooltip);tooltip.appendTo(this.document[0].body);return this.tooltips[id]={element:element,tooltip:tooltip};},_find:function(target){var id=target.data("ui-tooltip-id");return id?this.tooltips[id]:null;},_removeTooltip:function(tooltip){tooltip.remove();delete this.tooltips[tooltip.attr("id")];},_destroy:function(){var that=this;$.each(this.tooltips,function(id,tooltipData){var event=$.Event("blur"),element=tooltipData.element;event.target=event.currentTarget=element[0];that.close(event,true);$("#"+id).remove();if(element.data("ui-tooltip-title")){if(!element.attr("title")){element.attr("title",element.data("ui-tooltip-title"));}
element.removeData("ui-tooltip-title");}});this.liveRegion.remove();}});var dataSpace="ui-effects-",jQuery=$;$.effects={effect:{}};(function(jQuery,undefined){var stepHooks="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",rplusequals=/^([\-+])=\s*(\d+\.?\d*)/,stringParsers=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(execResult){return[execResult[1],execResult[2],execResult[3],execResult[4]];}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(execResult){return[execResult[1]*2.55,execResult[2]*2.55,execResult[3]*2.55,execResult[4]];}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(execResult){return[parseInt(execResult[1],16),parseInt(execResult[2],16),parseInt(execResult[3],16)];}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(execResult){return[parseInt(execResult[1]+execResult[1],16),parseInt(execResult[2]+execResult[2],16),parseInt(execResult[3]+execResult[3],16)];}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(execResult){return[execResult[1],execResult[2]/100,execResult[3]/100,execResult[4]];}}],color=jQuery.Color=function(color,green,blue,alpha){return new jQuery.Color.fn.parse(color,green,blue,alpha);},spaces={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},propTypes={"byte":{floor:true,max:255},"percent":{max:1},"degrees":{mod:360,floor:true}},support=color.support={},supportElem=jQuery("<p>")[0],colors,each=jQuery.each;supportElem.style.cssText="background-color:rgba(1,1,1,.5)";support.rgba=supportElem.style.backgroundColor.indexOf("rgba")>-1;each(spaces,function(spaceName,space){space.cache="_"+spaceName;space.props.alpha={idx:3,type:"percent",def:1};});function clamp(value,prop,allowEmpty){var type=propTypes[prop.type]||{};if(value==null){return(allowEmpty||!prop.def)?null:prop.def;}
value=type.floor?~~value:parseFloat(value);if(isNaN(value)){return prop.def;}
if(type.mod){return(value+type.mod)%type.mod;}
return 0>value?0:type.max<value?type.max:value;}
function stringParse(string){var inst=color(),rgba=inst._rgba=[];string=string.toLowerCase();each(stringParsers,function(i,parser){var parsed,match=parser.re.exec(string),values=match&&parser.parse(match),spaceName=parser.space||"rgba";if(values){parsed=inst[spaceName](values);inst[spaces[spaceName].cache]=parsed[spaces[spaceName].cache];rgba=inst._rgba=parsed._rgba;return false;}});if(rgba.length){if(rgba.join()==="0,0,0,0"){jQuery.extend(rgba,colors.transparent);}
return inst;}
return colors[string];}
color.fn=jQuery.extend(color.prototype,{parse:function(red,green,blue,alpha){if(red===undefined){this._rgba=[null,null,null,null];return this;}
if(red.jquery||red.nodeType){red=jQuery(red).css(green);green=undefined;}
var inst=this,type=jQuery.type(red),rgba=this._rgba=[];if(green!==undefined){red=[red,green,blue,alpha];type="array";}
if(type==="string"){return this.parse(stringParse(red)||colors._default);}
if(type==="array"){each(spaces.rgba.props,function(key,prop){rgba[prop.idx]=clamp(red[prop.idx],prop);});return this;}
if(type==="object"){if(red instanceof color){each(spaces,function(spaceName,space){if(red[space.cache]){inst[space.cache]=red[space.cache].slice();}});}else{each(spaces,function(spaceName,space){var cache=space.cache;each(space.props,function(key,prop){if(!inst[cache]&&space.to){if(key==="alpha"||red[key]==null){return;}
inst[cache]=space.to(inst._rgba);}
inst[cache][prop.idx]=clamp(red[key],prop,true);});if(inst[cache]&&jQuery.inArray(null,inst[cache].slice(0,3))<0){inst[cache][3]=1;if(space.from){inst._rgba=space.from(inst[cache]);}}});}
return this;}},is:function(compare){var is=color(compare),same=true,inst=this;each(spaces,function(_,space){var localCache,isCache=is[space.cache];if(isCache){localCache=inst[space.cache]||space.to&&space.to(inst._rgba)||[];each(space.props,function(_,prop){if(isCache[prop.idx]!=null){same=(isCache[prop.idx]===localCache[prop.idx]);return same;}});}
return same;});return same;},_space:function(){var used=[],inst=this;each(spaces,function(spaceName,space){if(inst[space.cache]){used.push(spaceName);}});return used.pop();},transition:function(other,distance){var end=color(other),spaceName=end._space(),space=spaces[spaceName],startColor=this.alpha()===0?color("transparent"):this,start=startColor[space.cache]||space.to(startColor._rgba),result=start.slice();end=end[space.cache];each(space.props,function(key,prop){var index=prop.idx,startValue=start[index],endValue=end[index],type=propTypes[prop.type]||{};if(endValue===null){return;}
if(startValue===null){result[index]=endValue;}else{if(type.mod){if(endValue-startValue>type.mod/2){startValue+=type.mod;}else if(startValue-endValue>type.mod/2){startValue-=type.mod;}}
result[index]=clamp((endValue-startValue)*distance+startValue,prop);}});return this[spaceName](result);},blend:function(opaque){if(this._rgba[3]===1){return this;}
var rgb=this._rgba.slice(),a=rgb.pop(),blend=color(opaque)._rgba;return color(jQuery.map(rgb,function(v,i){return(1-a)*blend[i]+a*v;}));},toRgbaString:function(){var prefix="rgba(",rgba=jQuery.map(this._rgba,function(v,i){return v==null?(i>2?1:0):v;});if(rgba[3]===1){rgba.pop();prefix="rgb(";}
return prefix+rgba.join()+")";},toHslaString:function(){var prefix="hsla(",hsla=jQuery.map(this.hsla(),function(v,i){if(v==null){v=i>2?1:0;}
if(i&&i<3){v=Math.round(v*100)+"%";}
return v;});if(hsla[3]===1){hsla.pop();prefix="hsl(";}
return prefix+hsla.join()+")";},toHexString:function(includeAlpha){var rgba=this._rgba.slice(),alpha=rgba.pop();if(includeAlpha){rgba.push(~~(alpha*255));}
return"#"+jQuery.map(rgba,function(v){v=(v||0).toString(16);return v.length===1?"0"+v:v;}).join("");},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString();}});color.fn.parse.prototype=color.fn;function hue2rgb(p,q,h){h=(h+1)%1;if(h*6<1){return p+(q-p)*h*6;}
if(h*2<1){return q;}
if(h*3<2){return p+(q-p)*((2/3)-h)*6;}
return p;}
spaces.hsla.to=function(rgba){if(rgba[0]==null||rgba[1]==null||rgba[2]==null){return[null,null,null,rgba[3]];}
var r=rgba[0]/255,g=rgba[1]/255,b=rgba[2]/255,a=rgba[3],max=Math.max(r,g,b),min=Math.min(r,g,b),diff=max-min,add=max+min,l=add*0.5,h,s;if(min===max){h=0;}else if(r===max){h=(60*(g-b)/diff)+360;}else if(g===max){h=(60*(b-r)/diff)+120;}else{h=(60*(r-g)/diff)+240;}
if(diff===0){s=0;}else if(l<=0.5){s=diff/add;}else{s=diff/(2-add);}
return[Math.round(h)%360,s,l,a==null?1:a];};spaces.hsla.from=function(hsla){if(hsla[0]==null||hsla[1]==null||hsla[2]==null){return[null,null,null,hsla[3]];}
var h=hsla[0]/360,s=hsla[1],l=hsla[2],a=hsla[3],q=l<=0.5?l*(1+s):l+s-l*s,p=2*l-q;return[Math.round(hue2rgb(p,q,h+(1/3))*255),Math.round(hue2rgb(p,q,h)*255),Math.round(hue2rgb(p,q,h-(1/3))*255),a];};each(spaces,function(spaceName,space){var props=space.props,cache=space.cache,to=space.to,from=space.from;color.fn[spaceName]=function(value){if(to&&!this[cache]){this[cache]=to(this._rgba);}
if(value===undefined){return this[cache].slice();}
var ret,type=jQuery.type(value),arr=(type==="array"||type==="object")?value:arguments,local=this[cache].slice();each(props,function(key,prop){var val=arr[type==="object"?key:prop.idx];if(val==null){val=local[prop.idx];}
local[prop.idx]=clamp(val,prop);});if(from){ret=color(from(local));ret[cache]=local;return ret;}else{return color(local);}};each(props,function(key,prop){if(color.fn[key]){return;}
color.fn[key]=function(value){var vtype=jQuery.type(value),fn=(key==="alpha"?(this._hsla?"hsla":"rgba"):spaceName),local=this[fn](),cur=local[prop.idx],match;if(vtype==="undefined"){return cur;}
if(vtype==="function"){value=value.call(this,cur);vtype=jQuery.type(value);}
if(value==null&&prop.empty){return this;}
if(vtype==="string"){match=rplusequals.exec(value);if(match){value=cur+parseFloat(match[2])*(match[1]==="+"?1:-1);}}
local[prop.idx]=value;return this[fn](local);};});});color.hook=function(hook){var hooks=hook.split(" ");each(hooks,function(i,hook){jQuery.cssHooks[hook]={set:function(elem,value){var parsed,curElem,backgroundColor="";if(value!=="transparent"&&(jQuery.type(value)!=="string"||(parsed=stringParse(value)))){value=color(parsed||value);if(!support.rgba&&value._rgba[3]!==1){curElem=hook==="backgroundColor"?elem.parentNode:elem;while((backgroundColor===""||backgroundColor==="transparent")&&curElem&&curElem.style){try{backgroundColor=jQuery.css(curElem,"backgroundColor");curElem=curElem.parentNode;}catch(e){}}
value=value.blend(backgroundColor&&backgroundColor!=="transparent"?backgroundColor:"_default");}
value=value.toRgbaString();}
try{elem.style[hook]=value;}catch(e){}}};jQuery.fx.step[hook]=function(fx){if(!fx.colorInit){fx.start=color(fx.elem,hook);fx.end=color(fx.end);fx.colorInit=true;}
jQuery.cssHooks[hook].set(fx.elem,fx.start.transition(fx.end,fx.pos));};});};color.hook(stepHooks);jQuery.cssHooks.borderColor={expand:function(value){var expanded={};each(["Top","Right","Bottom","Left"],function(i,part){expanded["border"+part+"Color"]=value;});return expanded;}};colors=jQuery.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"};})(jQuery);(function(){var classAnimationActions=["add","remove","toggle"],shorthandStyles={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};$.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(_,prop){$.fx.step[prop]=function(fx){if(fx.end!=="none"&&!fx.setAttr||fx.pos===1&&!fx.setAttr){jQuery.style(fx.elem,prop,fx.end);fx.setAttr=true;}};});function getElementStyles(elem){var key,len,style=elem.ownerDocument.defaultView?elem.ownerDocument.defaultView.getComputedStyle(elem,null):elem.currentStyle,styles={};if(style&&style.length&&style[0]&&style[style[0]]){len=style.length;while(len--){key=style[len];if(typeof style[key]==="string"){styles[$.camelCase(key)]=style[key];}}}else{for(key in style){if(typeof style[key]==="string"){styles[key]=style[key];}}}
return styles;}
function styleDifference(oldStyle,newStyle){var diff={},name,value;for(name in newStyle){value=newStyle[name];if(oldStyle[name]!==value){if(!shorthandStyles[name]){if($.fx.step[name]||!isNaN(parseFloat(value))){diff[name]=value;}}}}
return diff;}
if(!$.fn.addBack){$.fn.addBack=function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector));};}
$.effects.animateClass=function(value,duration,easing,callback){var o=$.speed(duration,easing,callback);return this.queue(function(){var animated=$(this),baseClass=animated.attr("class")||"",applyClassChange,allAnimations=o.children?animated.find("*").addBack():animated;allAnimations=allAnimations.map(function(){var el=$(this);return{el:el,start:getElementStyles(this)};});applyClassChange=function(){$.each(classAnimationActions,function(i,action){if(value[action]){animated[action+"Class"](value[action]);}});};applyClassChange();allAnimations=allAnimations.map(function(){this.end=getElementStyles(this.el[0]);this.diff=styleDifference(this.start,this.end);return this;});animated.attr("class",baseClass);allAnimations=allAnimations.map(function(){var styleInfo=this,dfd=$.Deferred(),opts=$.extend({},o,{queue:false,complete:function(){dfd.resolve(styleInfo);}});this.el.animate(this.diff,opts);return dfd.promise();});$.when.apply($,allAnimations.get()).done(function(){applyClassChange();$.each(arguments,function(){var el=this.el;$.each(this.diff,function(key){el.css(key,"");});});o.complete.call(animated[0]);});});};$.fn.extend({addClass:(function(orig){return function(classNames,speed,easing,callback){return speed?$.effects.animateClass.call(this,{add:classNames},speed,easing,callback):orig.apply(this,arguments);};})($.fn.addClass),removeClass:(function(orig){return function(classNames,speed,easing,callback){return arguments.length>1?$.effects.animateClass.call(this,{remove:classNames},speed,easing,callback):orig.apply(this,arguments);};})($.fn.removeClass),toggleClass:(function(orig){return function(classNames,force,speed,easing,callback){if(typeof force==="boolean"||force===undefined){if(!speed){return orig.apply(this,arguments);}else{return $.effects.animateClass.call(this,(force?{add:classNames}:{remove:classNames}),speed,easing,callback);}}else{return $.effects.animateClass.call(this,{toggle:classNames},force,speed,easing);}};})($.fn.toggleClass),switchClass:function(remove,add,speed,easing,callback){return $.effects.animateClass.call(this,{add:add,remove:remove},speed,easing,callback);}});})();(function(){$.extend($.effects,{version:"1.11.4",save:function(element,set){for(var i=0;i<set.length;i++){if(set[i]!==null){element.data(dataSpace+set[i],element[0].style[set[i]]);}}},restore:function(element,set){var val,i;for(i=0;i<set.length;i++){if(set[i]!==null){val=element.data(dataSpace+set[i]);if(val===undefined){val="";}
element.css(set[i],val);}}},setMode:function(el,mode){if(mode==="toggle"){mode=el.is(":hidden")?"show":"hide";}
return mode;},getBaseline:function(origin,original){var y,x;switch(origin[0]){case"top":y=0;break;case"middle":y=0.5;break;case"bottom":y=1;break;default:y=origin[0]/original.height;}
switch(origin[1]){case"left":x=0;break;case"center":x=0.5;break;case"right":x=1;break;default:x=origin[1]/original.width;}
return{x:x,y:y};},createWrapper:function(element){if(element.parent().is(".ui-effects-wrapper")){return element.parent();}
var props={width:element.outerWidth(true),height:element.outerHeight(true),"float":element.css("float")},wrapper=$("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),size={width:element.width(),height:element.height()},active=document.activeElement;try{active.id;}catch(e){active=document.body;}
element.wrap(wrapper);if(element[0]===active||$.contains(element[0],active)){$(active).focus();}
wrapper=element.parent();if(element.css("position")==="static"){wrapper.css({position:"relative"});element.css({position:"relative"});}else{$.extend(props,{position:element.css("position"),zIndex:element.css("z-index")});$.each(["top","left","bottom","right"],function(i,pos){props[pos]=element.css(pos);if(isNaN(parseInt(props[pos],10))){props[pos]="auto";}});element.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"});}
element.css(size);return wrapper.css(props).show();},removeWrapper:function(element){var active=document.activeElement;if(element.parent().is(".ui-effects-wrapper")){element.parent().replaceWith(element);if(element[0]===active||$.contains(element[0],active)){$(active).focus();}}
return element;},setTransition:function(element,list,factor,value){value=value||{};$.each(list,function(i,x){var unit=element.cssUnit(x);if(unit[0]>0){value[x]=unit[0]*factor+unit[1];}});return value;}});function _normalizeArguments(effect,options,speed,callback){if($.isPlainObject(effect)){options=effect;effect=effect.effect;}
effect={effect:effect};if(options==null){options={};}
if($.isFunction(options)){callback=options;speed=null;options={};}
if(typeof options==="number"||$.fx.speeds[options]){callback=speed;speed=options;options={};}
if($.isFunction(speed)){callback=speed;speed=null;}
if(options){$.extend(effect,options);}
speed=speed||options.duration;effect.duration=$.fx.off?0:typeof speed==="number"?speed:speed in $.fx.speeds?$.fx.speeds[speed]:$.fx.speeds._default;effect.complete=callback||options.complete;return effect;}
function standardAnimationOption(option){if(!option||typeof option==="number"||$.fx.speeds[option]){return true;}
if(typeof option==="string"&&!$.effects.effect[option]){return true;}
if($.isFunction(option)){return true;}
if(typeof option==="object"&&!option.effect){return true;}
return false;}
$.fn.extend({effect:function(){var args=_normalizeArguments.apply(this,arguments),mode=args.mode,queue=args.queue,effectMethod=$.effects.effect[args.effect];if($.fx.off||!effectMethod){if(mode){return this[mode](args.duration,args.complete);}else{return this.each(function(){if(args.complete){args.complete.call(this);}});}}
function run(next){var elem=$(this),complete=args.complete,mode=args.mode;function done(){if($.isFunction(complete)){complete.call(elem[0]);}
if($.isFunction(next)){next();}}
if(elem.is(":hidden")?mode==="hide":mode==="show"){elem[mode]();done();}else{effectMethod.call(elem[0],args,done);}}
return queue===false?this.each(run):this.queue(queue||"fx",run);},show:(function(orig){return function(option){if(standardAnimationOption(option)){return orig.apply(this,arguments);}else{var args=_normalizeArguments.apply(this,arguments);args.mode="show";return this.effect.call(this,args);}};})($.fn.show),hide:(function(orig){return function(option){if(standardAnimationOption(option)){return orig.apply(this,arguments);}else{var args=_normalizeArguments.apply(this,arguments);args.mode="hide";return this.effect.call(this,args);}};})($.fn.hide),toggle:(function(orig){return function(option){if(standardAnimationOption(option)||typeof option==="boolean"){return orig.apply(this,arguments);}else{var args=_normalizeArguments.apply(this,arguments);args.mode="toggle";return this.effect.call(this,args);}};})($.fn.toggle),cssUnit:function(key){var style=this.css(key),val=[];$.each(["em","px","%","pt"],function(i,unit){if(style.indexOf(unit)>0){val=[parseFloat(style),unit];}});return val;}});})();(function(){var baseEasings={};$.each(["Quad","Cubic","Quart","Quint","Expo"],function(i,name){baseEasings[name]=function(p){return Math.pow(p,i+2);};});$.extend(baseEasings,{Sine:function(p){return 1-Math.cos(p*Math.PI/2);},Circ:function(p){return 1-Math.sqrt(1-p*p);},Elastic:function(p){return p===0||p===1?p:-Math.pow(2,8*(p-1))*Math.sin(((p-1)*80-7.5)*Math.PI/15);},Back:function(p){return p*p*(3*p-2);},Bounce:function(p){var pow2,bounce=4;while(p<((pow2=Math.pow(2,--bounce))-1)/11){}
return 1/Math.pow(4,3-bounce)-7.5625*Math.pow((pow2*3-2)/22-p,2);}});$.each(baseEasings,function(name,easeIn){$.easing["easeIn"+name]=easeIn;$.easing["easeOut"+name]=function(p){return 1-easeIn(1-p);};$.easing["easeInOut"+name]=function(p){return p<0.5?easeIn(p*2)/2:1-easeIn(p*-2+2)/2;};});})();var effect=$.effects;var effectBlind=$.effects.effect.blind=function(o,done){var el=$(this),rvertical=/up|down|vertical/,rpositivemotion=/up|left|vertical|horizontal/,props=["position","top","bottom","left","right","height","width"],mode=$.effects.setMode(el,o.mode||"hide"),direction=o.direction||"up",vertical=rvertical.test(direction),ref=vertical?"height":"width",ref2=vertical?"top":"left",motion=rpositivemotion.test(direction),animation={},show=mode==="show",wrapper,distance,margin;if(el.parent().is(".ui-effects-wrapper")){$.effects.save(el.parent(),props);}else{$.effects.save(el,props);}
el.show();wrapper=$.effects.createWrapper(el).css({overflow:"hidden"});distance=wrapper[ref]();margin=parseFloat(wrapper.css(ref2))||0;animation[ref]=show?distance:0;if(!motion){el.css(vertical?"bottom":"right",0).css(vertical?"top":"left","auto").css({position:"absolute"});animation[ref2]=show?margin:distance+margin;}
if(show){wrapper.css(ref,0);if(!motion){wrapper.css(ref2,margin+distance);}}
wrapper.animate(animation,{duration:o.duration,easing:o.easing,queue:false,complete:function(){if(mode==="hide"){el.hide();}
$.effects.restore(el,props);$.effects.removeWrapper(el);done();}});};var effectBounce=$.effects.effect.bounce=function(o,done){var el=$(this),props=["position","top","bottom","left","right","height","width"],mode=$.effects.setMode(el,o.mode||"effect"),hide=mode==="hide",show=mode==="show",direction=o.direction||"up",distance=o.distance,times=o.times||5,anims=times*2+(show||hide?1:0),speed=o.duration/anims,easing=o.easing,ref=(direction==="up"||direction==="down")?"top":"left",motion=(direction==="up"||direction==="left"),i,upAnim,downAnim,queue=el.queue(),queuelen=queue.length;if(show||hide){props.push("opacity");}
$.effects.save(el,props);el.show();$.effects.createWrapper(el);if(!distance){distance=el[ref==="top"?"outerHeight":"outerWidth"]()/3;}
if(show){downAnim={opacity:1};downAnim[ref]=0;el.css("opacity",0).css(ref,motion?-distance*2:distance*2).animate(downAnim,speed,easing);}
if(hide){distance=distance/Math.pow(2,times-1);}
downAnim={};downAnim[ref]=0;for(i=0;i<times;i++){upAnim={};upAnim[ref]=(motion?"-=":"+=")+distance;el.animate(upAnim,speed,easing).animate(downAnim,speed,easing);distance=hide?distance*2:distance/2;}
if(hide){upAnim={opacity:0};upAnim[ref]=(motion?"-=":"+=")+distance;el.animate(upAnim,speed,easing);}
el.queue(function(){if(hide){el.hide();}
$.effects.restore(el,props);$.effects.removeWrapper(el);done();});if(queuelen>1){queue.splice.apply(queue,[1,0].concat(queue.splice(queuelen,anims+1)));}
el.dequeue();};var effectClip=$.effects.effect.clip=function(o,done){var el=$(this),props=["position","top","bottom","left","right","height","width"],mode=$.effects.setMode(el,o.mode||"hide"),show=mode==="show",direction=o.direction||"vertical",vert=direction==="vertical",size=vert?"height":"width",position=vert?"top":"left",animation={},wrapper,animate,distance;$.effects.save(el,props);el.show();wrapper=$.effects.createWrapper(el).css({overflow:"hidden"});animate=(el[0].tagName==="IMG")?wrapper:el;distance=animate[size]();if(show){animate.css(size,0);animate.css(position,distance/2);}
animation[size]=show?distance:0;animation[position]=show?0:distance/2;animate.animate(animation,{queue:false,duration:o.duration,easing:o.easing,complete:function(){if(!show){el.hide();}
$.effects.restore(el,props);$.effects.removeWrapper(el);done();}});};var effectDrop=$.effects.effect.drop=function(o,done){var el=$(this),props=["position","top","bottom","left","right","opacity","height","width"],mode=$.effects.setMode(el,o.mode||"hide"),show=mode==="show",direction=o.direction||"left",ref=(direction==="up"||direction==="down")?"top":"left",motion=(direction==="up"||direction==="left")?"pos":"neg",animation={opacity:show?1:0},distance;$.effects.save(el,props);el.show();$.effects.createWrapper(el);distance=o.distance||el[ref==="top"?"outerHeight":"outerWidth"](true)/2;if(show){el.css("opacity",0).css(ref,motion==="pos"?-distance:distance);}
animation[ref]=(show?(motion==="pos"?"+=":"-="):(motion==="pos"?"-=":"+="))+
distance;el.animate(animation,{queue:false,duration:o.duration,easing:o.easing,complete:function(){if(mode==="hide"){el.hide();}
$.effects.restore(el,props);$.effects.removeWrapper(el);done();}});};var effectExplode=$.effects.effect.explode=function(o,done){var rows=o.pieces?Math.round(Math.sqrt(o.pieces)):3,cells=rows,el=$(this),mode=$.effects.setMode(el,o.mode||"hide"),show=mode==="show",offset=el.show().css("visibility","hidden").offset(),width=Math.ceil(el.outerWidth()/cells),height=Math.ceil(el.outerHeight()/rows),pieces=[],i,j,left,top,mx,my;function childComplete(){pieces.push(this);if(pieces.length===rows*cells){animComplete();}}
for(i=0;i<rows;i++){top=offset.top+i*height;my=i-(rows-1)/2;for(j=0;j<cells;j++){left=offset.left+j*width;mx=j-(cells-1)/2;el.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-j*width,top:-i*height}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:width,height:height,left:left+(show?mx*width:0),top:top+(show?my*height:0),opacity:show?0:1}).animate({left:left+(show?0:mx*width),top:top+(show?0:my*height),opacity:show?1:0},o.duration||500,o.easing,childComplete);}}
function animComplete(){el.css({visibility:"visible"});$(pieces).remove();if(!show){el.hide();}
done();}};var effectFade=$.effects.effect.fade=function(o,done){var el=$(this),mode=$.effects.setMode(el,o.mode||"toggle");el.animate({opacity:mode},{queue:false,duration:o.duration,easing:o.easing,complete:done});};var effectFold=$.effects.effect.fold=function(o,done){var el=$(this),props=["position","top","bottom","left","right","height","width"],mode=$.effects.setMode(el,o.mode||"hide"),show=mode==="show",hide=mode==="hide",size=o.size||15,percent=/([0-9]+)%/.exec(size),horizFirst=!!o.horizFirst,widthFirst=show!==horizFirst,ref=widthFirst?["width","height"]:["height","width"],duration=o.duration/2,wrapper,distance,animation1={},animation2={};$.effects.save(el,props);el.show();wrapper=$.effects.createWrapper(el).css({overflow:"hidden"});distance=widthFirst?[wrapper.width(),wrapper.height()]:[wrapper.height(),wrapper.width()];if(percent){size=parseInt(percent[1],10)/100*distance[hide?0:1];}
if(show){wrapper.css(horizFirst?{height:0,width:size}:{height:size,width:0});}
animation1[ref[0]]=show?distance[0]:size;animation2[ref[1]]=show?distance[1]:0;wrapper.animate(animation1,duration,o.easing).animate(animation2,duration,o.easing,function(){if(hide){el.hide();}
$.effects.restore(el,props);$.effects.removeWrapper(el);done();});};var effectHighlight=$.effects.effect.highlight=function(o,done){var elem=$(this),props=["backgroundImage","backgroundColor","opacity"],mode=$.effects.setMode(elem,o.mode||"show"),animation={backgroundColor:elem.css("backgroundColor")};if(mode==="hide"){animation.opacity=0;}
$.effects.save(elem,props);elem.show().css({backgroundImage:"none",backgroundColor:o.color||"#ffff99"}).animate(animation,{queue:false,duration:o.duration,easing:o.easing,complete:function(){if(mode==="hide"){elem.hide();}
$.effects.restore(elem,props);done();}});};var effectSize=$.effects.effect.size=function(o,done){var original,baseline,factor,el=$(this),props0=["position","top","bottom","left","right","width","height","overflow","opacity"],props1=["position","top","bottom","left","right","overflow","opacity"],props2=["width","height","overflow"],cProps=["fontSize"],vProps=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],hProps=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],mode=$.effects.setMode(el,o.mode||"effect"),restore=o.restore||mode!=="effect",scale=o.scale||"both",origin=o.origin||["middle","center"],position=el.css("position"),props=restore?props0:props1,zero={height:0,width:0,outerHeight:0,outerWidth:0};if(mode==="show"){el.show();}
original={height:el.height(),width:el.width(),outerHeight:el.outerHeight(),outerWidth:el.outerWidth()};if(o.mode==="toggle"&&mode==="show"){el.from=o.to||zero;el.to=o.from||original;}else{el.from=o.from||(mode==="show"?zero:original);el.to=o.to||(mode==="hide"?zero:original);}
factor={from:{y:el.from.height/original.height,x:el.from.width/original.width},to:{y:el.to.height/original.height,x:el.to.width/original.width}};if(scale==="box"||scale==="both"){if(factor.from.y!==factor.to.y){props=props.concat(vProps);el.from=$.effects.setTransition(el,vProps,factor.from.y,el.from);el.to=$.effects.setTransition(el,vProps,factor.to.y,el.to);}
if(factor.from.x!==factor.to.x){props=props.concat(hProps);el.from=$.effects.setTransition(el,hProps,factor.from.x,el.from);el.to=$.effects.setTransition(el,hProps,factor.to.x,el.to);}}
if(scale==="content"||scale==="both"){if(factor.from.y!==factor.to.y){props=props.concat(cProps).concat(props2);el.from=$.effects.setTransition(el,cProps,factor.from.y,el.from);el.to=$.effects.setTransition(el,cProps,factor.to.y,el.to);}}
$.effects.save(el,props);el.show();$.effects.createWrapper(el);el.css("overflow","hidden").css(el.from);if(origin){baseline=$.effects.getBaseline(origin,original);el.from.top=(original.outerHeight-el.outerHeight())*baseline.y;el.from.left=(original.outerWidth-el.outerWidth())*baseline.x;el.to.top=(original.outerHeight-el.to.outerHeight)*baseline.y;el.to.left=(original.outerWidth-el.to.outerWidth)*baseline.x;}
el.css(el.from);if(scale==="content"||scale==="both"){vProps=vProps.concat(["marginTop","marginBottom"]).concat(cProps);hProps=hProps.concat(["marginLeft","marginRight"]);props2=props0.concat(vProps).concat(hProps);el.find("*[width]").each(function(){var child=$(this),c_original={height:child.height(),width:child.width(),outerHeight:child.outerHeight(),outerWidth:child.outerWidth()};if(restore){$.effects.save(child,props2);}
child.from={height:c_original.height*factor.from.y,width:c_original.width*factor.from.x,outerHeight:c_original.outerHeight*factor.from.y,outerWidth:c_original.outerWidth*factor.from.x};child.to={height:c_original.height*factor.to.y,width:c_original.width*factor.to.x,outerHeight:c_original.height*factor.to.y,outerWidth:c_original.width*factor.to.x};if(factor.from.y!==factor.to.y){child.from=$.effects.setTransition(child,vProps,factor.from.y,child.from);child.to=$.effects.setTransition(child,vProps,factor.to.y,child.to);}
if(factor.from.x!==factor.to.x){child.from=$.effects.setTransition(child,hProps,factor.from.x,child.from);child.to=$.effects.setTransition(child,hProps,factor.to.x,child.to);}
child.css(child.from);child.animate(child.to,o.duration,o.easing,function(){if(restore){$.effects.restore(child,props2);}});});}
el.animate(el.to,{queue:false,duration:o.duration,easing:o.easing,complete:function(){if(el.to.opacity===0){el.css("opacity",el.from.opacity);}
if(mode==="hide"){el.hide();}
$.effects.restore(el,props);if(!restore){if(position==="static"){el.css({position:"relative",top:el.to.top,left:el.to.left});}else{$.each(["top","left"],function(idx,pos){el.css(pos,function(_,str){var val=parseInt(str,10),toRef=idx?el.to.left:el.to.top;if(str==="auto"){return toRef+"px";}
return val+toRef+"px";});});}}
$.effects.removeWrapper(el);done();}});};var effectScale=$.effects.effect.scale=function(o,done){var el=$(this),options=$.extend(true,{},o),mode=$.effects.setMode(el,o.mode||"effect"),percent=parseInt(o.percent,10)||(parseInt(o.percent,10)===0?0:(mode==="hide"?0:100)),direction=o.direction||"both",origin=o.origin,original={height:el.height(),width:el.width(),outerHeight:el.outerHeight(),outerWidth:el.outerWidth()},factor={y:direction!=="horizontal"?(percent/100):1,x:direction!=="vertical"?(percent/100):1};options.effect="size";options.queue=false;options.complete=done;if(mode!=="effect"){options.origin=origin||["middle","center"];options.restore=true;}
options.from=o.from||(mode==="show"?{height:0,width:0,outerHeight:0,outerWidth:0}:original);options.to={height:original.height*factor.y,width:original.width*factor.x,outerHeight:original.outerHeight*factor.y,outerWidth:original.outerWidth*factor.x};if(options.fade){if(mode==="show"){options.from.opacity=0;options.to.opacity=1;}
if(mode==="hide"){options.from.opacity=1;options.to.opacity=0;}}
el.effect(options);};var effectPuff=$.effects.effect.puff=function(o,done){var elem=$(this),mode=$.effects.setMode(elem,o.mode||"hide"),hide=mode==="hide",percent=parseInt(o.percent,10)||150,factor=percent/100,original={height:elem.height(),width:elem.width(),outerHeight:elem.outerHeight(),outerWidth:elem.outerWidth()};$.extend(o,{effect:"scale",queue:false,fade:true,mode:mode,complete:done,percent:hide?percent:100,from:hide?original:{height:original.height*factor,width:original.width*factor,outerHeight:original.outerHeight*factor,outerWidth:original.outerWidth*factor}});elem.effect(o);};var effectPulsate=$.effects.effect.pulsate=function(o,done){var elem=$(this),mode=$.effects.setMode(elem,o.mode||"show"),show=mode==="show",hide=mode==="hide",showhide=(show||mode==="hide"),anims=((o.times||5)*2)+(showhide?1:0),duration=o.duration/anims,animateTo=0,queue=elem.queue(),queuelen=queue.length,i;if(show||!elem.is(":visible")){elem.css("opacity",0).show();animateTo=1;}
for(i=1;i<anims;i++){elem.animate({opacity:animateTo},duration,o.easing);animateTo=1-animateTo;}
elem.animate({opacity:animateTo},duration,o.easing);elem.queue(function(){if(hide){elem.hide();}
done();});if(queuelen>1){queue.splice.apply(queue,[1,0].concat(queue.splice(queuelen,anims+1)));}
elem.dequeue();};var effectShake=$.effects.effect.shake=function(o,done){var el=$(this),props=["position","top","bottom","left","right","height","width"],mode=$.effects.setMode(el,o.mode||"effect"),direction=o.direction||"left",distance=o.distance||20,times=o.times||3,anims=times*2+1,speed=Math.round(o.duration/anims),ref=(direction==="up"||direction==="down")?"top":"left",positiveMotion=(direction==="up"||direction==="left"),animation={},animation1={},animation2={},i,queue=el.queue(),queuelen=queue.length;$.effects.save(el,props);el.show();$.effects.createWrapper(el);animation[ref]=(positiveMotion?"-=":"+=")+distance;animation1[ref]=(positiveMotion?"+=":"-=")+distance*2;animation2[ref]=(positiveMotion?"-=":"+=")+distance*2;el.animate(animation,speed,o.easing);for(i=1;i<times;i++){el.animate(animation1,speed,o.easing).animate(animation2,speed,o.easing);}
el.animate(animation1,speed,o.easing).animate(animation,speed/2,o.easing).queue(function(){if(mode==="hide"){el.hide();}
$.effects.restore(el,props);$.effects.removeWrapper(el);done();});if(queuelen>1){queue.splice.apply(queue,[1,0].concat(queue.splice(queuelen,anims+1)));}
el.dequeue();};var effectSlide=$.effects.effect.slide=function(o,done){var el=$(this),props=["position","top","bottom","left","right","width","height"],mode=$.effects.setMode(el,o.mode||"show"),show=mode==="show",direction=o.direction||"left",ref=(direction==="up"||direction==="down")?"top":"left",positiveMotion=(direction==="up"||direction==="left"),distance,animation={};$.effects.save(el,props);el.show();distance=o.distance||el[ref==="top"?"outerHeight":"outerWidth"](true);$.effects.createWrapper(el).css({overflow:"hidden"});if(show){el.css(ref,positiveMotion?(isNaN(distance)?"-"+distance:-distance):distance);}
animation[ref]=(show?(positiveMotion?"+=":"-="):(positiveMotion?"-=":"+="))+
distance;el.animate(animation,{queue:false,duration:o.duration,easing:o.easing,complete:function(){if(mode==="hide"){el.hide();}
$.effects.restore(el,props);$.effects.removeWrapper(el);done();}});};var effectTransfer=$.effects.effect.transfer=function(o,done){var elem=$(this),target=$(o.to),targetFixed=target.css("position")==="fixed",body=$("body"),fixTop=targetFixed?body.scrollTop():0,fixLeft=targetFixed?body.scrollLeft():0,endPosition=target.offset(),animation={top:endPosition.top-fixTop,left:endPosition.left-fixLeft,height:target.innerHeight(),width:target.innerWidth()},startPosition=elem.offset(),transfer=$("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(o.className).css({top:startPosition.top-fixTop,left:startPosition.left-fixLeft,height:elem.innerHeight(),width:elem.innerWidth(),position:targetFixed?"fixed":"absolute"}).animate(animation,o.duration,o.easing,function(){transfer.remove();done();});};}));
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/jquery/plugins/jquery.notify.js */

(function($){$.widget("ech.notify",{options:{speed:500,expires:5000,stack:"below",custom:false,queue:false},_create:function(){var self=this;this.templates={};this.keys=[];this.element.addClass("ui-notify").children().addClass("ui-notify-message ui-notify-message-style").each(function(i){var key=this.id||i;self.keys.push(key);self.templates[key]=$(this).removeAttr("id").wrap("<div></div>").parent().html();}).end().empty().show();},create:function(template,msg,opts){if(typeof template==="object"){opts=msg;msg=template;template=null;}
var tpl=this.templates[template||this.keys[0]];if(opts&&opts.custom){tpl=$(tpl).removeClass("ui-notify-message-style").wrap("<div></div>").parent().html();}
this.openNotifications=this.openNotifications||0;return new $.ech.notify.instance(this)._create(msg,$.extend({},this.options,opts),tpl);}});$.extend($.ech.notify,{instance:function(widget){this.__super=widget;this.isOpen=false;}});$.extend($.ech.notify.instance.prototype,{_create:function(params,options,template){this.options=options;var self=this,html=template.replace(/#(?:\[|%7B)(.*?)(?:\]|%7D)/g,function($1,$2){return($2 in params)?params[$2]:'';}),m=(this.element=$(html)),closelink=m.find(".ui-notify-close");if(typeof this.options.click==="function"){m.addClass("ui-notify-click").bind("click",function(e){self._trigger("click",e,self);});}
if(closelink.length){closelink.bind("click",function(){self.close();return false;});}
this.__super.element.queue("notify",function(){self.open(options.events);if(typeof options.expires==="number"&&options.expires>0){setTimeout($.proxy(self.close,self),options.expires);}});if(!this.options.queue||this.__super.openNotifications<=this.options.queue-1){this.__super.element.dequeue("notify");}
return this;},close:function(){var speed=this.options.speed;this.element.fadeTo(speed,0).slideUp(speed,$.proxy(function(){this._trigger("close");this.isOpen=false;this.element.remove();this.__super.openNotifications-=1;this.__super.element.dequeue("notify");},this));return this;},open:function(events){if(this.isOpen||this._trigger("beforeopen")===false){return this;}
var self=this;this.__super.openNotifications+=1;var target=$('[event-click]',self.element);target.each(function(i,el){var evt=$(el).attr('event-click');if(events[evt])$(el).on('click',function(){events[evt]();})})
this.element[this.options.stack==="above"?"prependTo":"appendTo"](this.__super.element).css({display:"none",opacity:""}).fadeIn(this.options.speed,function(){self._trigger("open");self.isOpen=true;});return this;},widget:function(){return this.element;},_trigger:function(type,e,instance){return this.__super._trigger.call(this,type,e,instance);}});})(jQuery);
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/libraries/Notification/notification.js */

var CNBC_Notification=function(){var _CALL_SUBSCRIPTION_LIST='/subscription/list',_COOKIE=(function(){return CNBC_Utils.readCookie('grace_msg');}()),_EXPIRE=false,container,today=new Date(),inGracePeriod=false;function addNotification(config){var container=$('#'+config.container),content=config.content,type='pro-alert-msg-'+content.notify,message=content.message,additional=content.additional,$container;if(content.modifier){for(var m in content.modifier){if(message[m])message[m]=CNBC_Utils.applyInlineModification(message[m],content.modifier[m]);}}
if(container.length){$container=container.notify();$container.notify("create",type,message,additional);return this;}}
function popupNotification(config){addNotification({container:container,content:config[container.split('-').pop()]});CNBC_Omniture.genericClickTracking({'link':{'pev2':'Pro','trkNav':'pro:credit card expired view'}})}
function showUserAccountNotification(cont){container=cont?cont:'pro-alert-msg';userStatsCall({success:function(response){var msg;if(response.subscriptions&&(msg=checkGracePeriod(response.subscriptions))&&parseInt(_COOKIE)!==today.getDate()){var user=response?response.user:{},dayStr=(msg==1)?' day':' days',notifyConfig={'msg':{notify:'sticky',message:{title:'your credit card has expired',text:'We have extended your PRO access for <span>'+msg+'</span>'+' more '+dayStr+'. Please update your account <a>here</a>.'},modifier:{text:{'$span':{'style':{'font-weight':'bold'}},'$a':{'style':{'color':'#00afff','text-decoration':'none'},'href':'javascript:void(0)','event-click':'update'}}},additional:{expires:_EXPIRE,events:{'close':configCloseEvent('CLOSE'),'update':configCloseEvent('UPDATE')}}}};popupNotification(notifyConfig);}},error:function(err_msg){console.warn(err_msg);},always:function(err_msg){console.warn(err_msg);}},0)}
function userStatsCall(options,count){var url=_CALL_SUBSCRIPTION_LIST;if(!CNBC_TinyPass.tpExists()){if(options.always)options.always('tinypass is not ready');}else{if(tp.userRef){tp.push(['init',function(){tp.api.setUserProvider(tp.user.getProvider());tp.api.callApi(url,{},function(response){if(response.code===0){options.success(response);}else{options.error('tinypass api call failed due to: [code '+response.code+'] '+response.message);}})}]);}else{if(count<10){setTimeout(function(){userStatsCall(options,count++);},1000);}else{console.warn('please set userRef before calling init');}}}}
function checkGracePeriod(info){var gracePeriodStart=null,now,diff,secondPerDay=3600*24;for(var i in info){if(!info[i]['status']||info[i]['status']==='active'){gracePeriodStart=info[i]['grace_period_start_date'];}}
if(gracePeriodStart!==null){now=Date.now().toString().substr(0,10);diff=parseInt(now)-gracePeriodStart;inGracePeriod=Math.round(diff/secondPerDay);}
return inGracePeriod?(7-inGracePeriod):false;}
function configCloseEvent(type){function fireOmnitureCall(pev2,trknav){CNBC_Omniture.genericClickTracking({'link':{'pev2':pev2,'trkNav':trknav}})}
return function(){if(!_COOKIE){CNBC_Utils.createCookie('grace_msg',today.getDate(),24);}
if(type==='UPDATE'){window.location.href='/account/#pro';fireOmnitureCall('Pro','pro:credit card expired click');}else if(type==='CLOSE'){fireOmnitureCall('Pro','pro:credit card expired close');}}}
function injectTestingSpy(helper){var target=null,blockedDomains=['www.cnbc.com'],pool={};for(var d in blockedDomains){if(window.location.href.indexOf(blockedDomains[d])!==-1)return null;}
return{testHiddenTarget:function(on,spy,test){if(on&&typeof on==='string')target=eval(on);if(spy){for(var s in spy){var r=eval(s);if(typeof r!=='undefined'){pool[s]=r;r=spy[s];}}}
if(typeof test==='function'){test(target,function(){for(var m in pool){var t=eval(m);if(typeof t!=='undefined')t=pool[m];}});}else{console.warn('must provide valid testing module to spy');}}}}
return{'showUserAccountNotification':showUserAccountNotification,'injectTestingSpy':injectTestingSpy}}();
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/libraries/LazyImageLoader/lazy_image_loader.js */

function CNBC_LazyImageLoader($images){this.init($images);}
CNBC_LazyImageLoader.loadCallback=function(reinit){CNBC_LazyImageLoader._instance.triggerLoader(reinit);};(function($){CNBC_LazyImageLoader.prototype.init=function($images){var attributeSwap=function(el){var $el=$(el);$el.attr('src',$el.data('img-src'));};var initViewabilityCheck=function($images){$images.each(function(){window.cnbc.app.utils.notifyWhenVisibleInViewport(this).then(attributeSwap);});};initViewabilityCheck($images);this.triggerLoader=function(reinit){if(reinit){$images=$('img[data-img-src]');initViewabilityCheck($images);}
window.cnbc.app.utils.performVisibilityCheck();};window.setTimeout(this.triggerLoader,10);return this;};$(function(){CNBC_LazyImageLoader._instance=new CNBC_LazyImageLoader($('img[data-img-src]'));});})(window.jQuery);
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/inits/socialBar.js */

CNBC_Utils.execute('social gigya bar',function(){var initData=cnbc.app.getInitData('socialBar');var getLinkBackUrl=function(provider){return location.origin+location.pathname+encodeURI("?__source=sharebar|"+provider+"&par=sharebar");}
if(initData.templateName=='story_ng_2column'){initData.shareButtons=[{provider:'facebook',url:getLinkBackUrl('facebook')},{provider:'twitter',url:getLinkBackUrl('twitter')},{provider:'linkedin',url:getLinkBackUrl('linkedin')},{provider:'pinterest',url:getLinkBackUrl('pinterest')},{provider:'email',url:getLinkBackUrl('email')},{provider:'share',enableCount:false}];}else if(initData.templateName=='slideshow_one_page'||initData.templateName=='story_listicle'){initData.shareButtons=[{provider:'facebook',url:getLinkBackUrl('facebook')},{provider:'linkedin',url:getLinkBackUrl('linkedin')},{provider:'twitter',url:getLinkBackUrl('twitter')},{provider:'email',url:getLinkBackUrl('email')}];}
else{initData.shareButtons=[{provider:'facebook',url:getLinkBackUrl('facebook')},{provider:'twitter',url:getLinkBackUrl('twitter')},{provider:'reddit',url:getLinkBackUrl('reddit')},{provider:'linkedin',url:getLinkBackUrl('linkedin')},{provider:'email',url:getLinkBackUrl('email')},{provider:'share',enableCount:false}];}
initData.showCounts='none';initData.iconsOnly='true';initData.deviceType='auto';if(initData.pos==='top'||initData.pos==='quiz'||initData.pos==='slideshow'||initData.pos==='persistent'){if(initData.pos==='top'){if(initData.templateName=='video_gallery'||initData.templateName=='ng-video-gallery'){initData.onSendDone=CNBC_Gigya_Omniture.onSendDoneVideoGall;}
else{initData.onSendDone=CNBC_Gigya_Omniture.onSendDoneTop;}}
else if(initData.pos==='quiz'){initData.onSendDone=CNBC_Gigya_Omniture.onSendDoneQuiz;}
else if(initData.pos==='persistent'){initData.onSendDone=CNBC_Gigya_Omniture.onSendDonePersistent;}
else if(initData.pos==='slideshow'){initData.onSendDone=CNBC_Gigya_Omniture.onSendDoneSlideshow;}}
else if(initData.pos==='bottom'){initData.onSendDone=CNBC_Gigya_Omniture.onSendDoneBottom;}
if(CNBC_Utils.isMobile()){if(initData.templateName=='video_gallery'||initData.templateName=='ng-video-gallery'){initData.onSendDone=CNBC_Gigya_Omniture.onSendDoneVideoGall;}
else{initData.onSendDone=CNBC_Gigya_Omniture.onSendDone;}
initData.onShareButtonClicked=CNBC_Gigya_Omniture.onShareButtonClickedMobile;}
initData.onConnectionAdded=CNBC_Gigya_Omniture.onConnectionAdded;initData.onConnectionRemoved=CNBC_Gigya_Omniture.onConnectionRemoved;initData.onLogin=CNBC_Gigya_Omniture.trackLoginEvent;initData.onLogout=CNBC_Gigya_Omniture.onLogout;initData.showEmailButton=false;if(CNBC_Utils.isMobile()){initData.moreEnabledProviders='facebook, reddit, twitter, tumblr, googleplus, pinterest, digg, stumbleupon';}
else{if(initData.templateName=='video_gallery'||initData.templateName=='ng-video-gallery'){initData.moreEnabledProviders='facebook, reddit, twitter, linkedin, tumblr, pinterest, digg, stumbleupon';}
else if(initData.pos=='slideshow'){initData.moreEnabledProviders='facebook, reddit, twitter, linkedin, tumblr, pinterest, digg, stumbleupon';}
else if(initData.pos=='quiz'){initData.moreEnabledProviders='facebook, reddit, twitter, linkedin, tumblr, pinterest, digg, stumbleupon';}
else{initData.moreEnabledProviders='facebook, reddit, twitter, linkedin, tumblr, googleplus, pinterest, digg, stumbleupon';}}
if(window.conf==undefined){window.conf={APIKey:initData.gigya_api_key};window.ua=new gigya.services.socialize.UserAction();var imgSrc=$("meta[property='og:image']").attr('content');var urlLink=$("meta[property='og:url']").attr('content');var bigImgSrc=(imgSrc.replace('1910x1000','600x400')).split('?');if(typeof(window.ua)=='object'&&typeof(window.ua.setTitle)=='function'){window.ua.setTitle(initData.socialBarTitle);}
if(typeof(window.ua.addMediaItem)=='function'&&bigImgSrc&&bigImgSrc[0]){window.ua.addMediaItem({type:'image',src:bigImgSrc[0],href:urlLink});}}
function constructUserAction(vendor){if(!vendor){return;}
var vendor=vendor||"";var ua=vendor+'ua';var UserAction=vendor+"UserAction";window[ua]=new gigya.services.socialize.UserAction();window[ua].setLinkBack(getLinkBackUrl(vendor));var imgSrc=$("meta[property='og:image']").attr('content');var urlLink=$("meta[property='og:url']").attr('content');var bigImgSrc=(imgSrc.replace('1910x1000','600x400')).split('?');if(typeof(window[ua])=='object'&&typeof(window[ua].setTitle)=='function'){window[ua].setTitle(initData.socialBarTitle);}
if(typeof(window[ua]['addMediaItem'])=='function'&&bigImgSrc&&bigImgSrc[0]){window[ua]['addMediaItem']({type:'image',src:bigImgSrc[0],href:urlLink});}
initData[UserAction]=window[ua];};var providerArray=["facebook","reddit","twitter","linkedin","tumblr","googleplus","pinterest","digg","stumbleupon","email"];providerArray.map(function(val){constructUserAction(val);});initData.userAction=window.ua;initData.socialBarTitle=CNBC_Utils.htmlDecode(initData.socialBarTitle);gigya.services.socialize.showShareBarUI(initData);});
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/inits/scrollPanel.js */

CNBC_Utils.execute('scroll panel',function(){var initData=cnbc.app.getInitData('scrollPanel'),tab_social=new CNBC_ScrollPanel();if(initData.respectiveContainer){initData.breakPoint=$('article').offset().top;initData.respectiveContainer=$('div.story');initData.setLeft=true;}else{initData.breakPoint=500;}
initData.transTime=10;if(initData.hideIndex){initData.hidePointContainer=$('div.group-container:last');}
tab_social.init(initData);});
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/inits/socialBar.js */

CNBC_Utils.execute('social gigya bar',function(){var initData=cnbc.app.getInitData('socialBar');var getLinkBackUrl=function(provider){return location.origin+location.pathname+encodeURI("?__source=sharebar|"+provider+"&par=sharebar");}
if(initData.templateName=='story_ng_2column'){initData.shareButtons=[{provider:'facebook',url:getLinkBackUrl('facebook')},{provider:'twitter',url:getLinkBackUrl('twitter')},{provider:'linkedin',url:getLinkBackUrl('linkedin')},{provider:'pinterest',url:getLinkBackUrl('pinterest')},{provider:'email',url:getLinkBackUrl('email')},{provider:'share',enableCount:false}];}else if(initData.templateName=='slideshow_one_page'||initData.templateName=='story_listicle'){initData.shareButtons=[{provider:'facebook',url:getLinkBackUrl('facebook')},{provider:'linkedin',url:getLinkBackUrl('linkedin')},{provider:'twitter',url:getLinkBackUrl('twitter')},{provider:'email',url:getLinkBackUrl('email')}];}
else{initData.shareButtons=[{provider:'facebook',url:getLinkBackUrl('facebook')},{provider:'twitter',url:getLinkBackUrl('twitter')},{provider:'reddit',url:getLinkBackUrl('reddit')},{provider:'linkedin',url:getLinkBackUrl('linkedin')},{provider:'email',url:getLinkBackUrl('email')},{provider:'share',enableCount:false}];}
initData.showCounts='none';initData.iconsOnly='true';initData.deviceType='auto';if(initData.pos==='top'||initData.pos==='quiz'||initData.pos==='slideshow'||initData.pos==='persistent'){if(initData.pos==='top'){if(initData.templateName=='video_gallery'||initData.templateName=='ng-video-gallery'){initData.onSendDone=CNBC_Gigya_Omniture.onSendDoneVideoGall;}
else{initData.onSendDone=CNBC_Gigya_Omniture.onSendDoneTop;}}
else if(initData.pos==='quiz'){initData.onSendDone=CNBC_Gigya_Omniture.onSendDoneQuiz;}
else if(initData.pos==='persistent'){initData.onSendDone=CNBC_Gigya_Omniture.onSendDonePersistent;}
else if(initData.pos==='slideshow'){initData.onSendDone=CNBC_Gigya_Omniture.onSendDoneSlideshow;}}
else if(initData.pos==='bottom'){initData.onSendDone=CNBC_Gigya_Omniture.onSendDoneBottom;}
if(CNBC_Utils.isMobile()){if(initData.templateName=='video_gallery'||initData.templateName=='ng-video-gallery'){initData.onSendDone=CNBC_Gigya_Omniture.onSendDoneVideoGall;}
else{initData.onSendDone=CNBC_Gigya_Omniture.onSendDone;}
initData.onShareButtonClicked=CNBC_Gigya_Omniture.onShareButtonClickedMobile;}
initData.onConnectionAdded=CNBC_Gigya_Omniture.onConnectionAdded;initData.onConnectionRemoved=CNBC_Gigya_Omniture.onConnectionRemoved;initData.onLogin=CNBC_Gigya_Omniture.trackLoginEvent;initData.onLogout=CNBC_Gigya_Omniture.onLogout;initData.showEmailButton=false;if(CNBC_Utils.isMobile()){initData.moreEnabledProviders='facebook, reddit, twitter, tumblr, googleplus, pinterest, digg, stumbleupon';}
else{if(initData.templateName=='video_gallery'||initData.templateName=='ng-video-gallery'){initData.moreEnabledProviders='facebook, reddit, twitter, linkedin, tumblr, pinterest, digg, stumbleupon';}
else if(initData.pos=='slideshow'){initData.moreEnabledProviders='facebook, reddit, twitter, linkedin, tumblr, pinterest, digg, stumbleupon';}
else if(initData.pos=='quiz'){initData.moreEnabledProviders='facebook, reddit, twitter, linkedin, tumblr, pinterest, digg, stumbleupon';}
else{initData.moreEnabledProviders='facebook, reddit, twitter, linkedin, tumblr, googleplus, pinterest, digg, stumbleupon';}}
if(window.conf==undefined){window.conf={APIKey:initData.gigya_api_key};window.ua=new gigya.services.socialize.UserAction();var imgSrc=$("meta[property='og:image']").attr('content');var urlLink=$("meta[property='og:url']").attr('content');var bigImgSrc=(imgSrc.replace('1910x1000','600x400')).split('?');if(typeof(window.ua)=='object'&&typeof(window.ua.setTitle)=='function'){window.ua.setTitle(initData.socialBarTitle);}
if(typeof(window.ua.addMediaItem)=='function'&&bigImgSrc&&bigImgSrc[0]){window.ua.addMediaItem({type:'image',src:bigImgSrc[0],href:urlLink});}}
function constructUserAction(vendor){if(!vendor){return;}
var vendor=vendor||"";var ua=vendor+'ua';var UserAction=vendor+"UserAction";window[ua]=new gigya.services.socialize.UserAction();window[ua].setLinkBack(getLinkBackUrl(vendor));var imgSrc=$("meta[property='og:image']").attr('content');var urlLink=$("meta[property='og:url']").attr('content');var bigImgSrc=(imgSrc.replace('1910x1000','600x400')).split('?');if(typeof(window[ua])=='object'&&typeof(window[ua].setTitle)=='function'){window[ua].setTitle(initData.socialBarTitle);}
if(typeof(window[ua]['addMediaItem'])=='function'&&bigImgSrc&&bigImgSrc[0]){window[ua]['addMediaItem']({type:'image',src:bigImgSrc[0],href:urlLink});}
initData[UserAction]=window[ua];};var providerArray=["facebook","reddit","twitter","linkedin","tumblr","googleplus","pinterest","digg","stumbleupon","email"];providerArray.map(function(val){constructUserAction(val);});initData.userAction=window.ua;initData.socialBarTitle=CNBC_Utils.htmlDecode(initData.socialBarTitle);gigya.services.socialize.showShareBarUI(initData);});
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/inits/polls.js */

CNBC_Utils.execute('polls',function(){CNBC_Poll.init({pollservicebaseurl:CNBC_Settings.baseurls.poll_base});});
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/inits/TaboolaRecirculationModule.js */

CNBC_Utils.execute('article taboola rec module',function(){var initData=cnbc.app.getInitData('TaboolaRecirculationModule');window._taboola=window._taboola||[];!function(e,f,u,i){e.async=1;e.src=u;if(i&&!document.getElementById(i)){e.id=i;}
f.parentNode.insertBefore(e,f);}(document.createElement('script'),document.getElementsByTagName('script')[0],initData.taboola_url,initData.taboolaParam);_taboola.push({flush:true});});
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/inits/englargedImage.js */

CNBC_Utils.execute('englargedImage',function(){if(!CNBC_Utils.isTabletMobile()){var initData=cnbc.app.getInitData('englargedImage');var englargedImageOnLightbox=new CNBC_EnglargedImage();englargedImageOnLightbox.init(initData);}});
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/inits/tinypassConfig.js */

CNBC_Utils.execute('tinypass config init',function(){var initData=cnbc.app.getInitData('tinypassConfig');window.CNBC_Premium.globals=initData;if(window.CNBC_Premium.globals.product=='mobile-touch'){if(CNBC_Utils.readCookie('c_cnbc_session_valid')!=='true'&&!CNBC_Utils.readData('c_to')){window.CNBC_Premium.init();}}
if(jQuery){if(document.getElementById('page_story_simple')!=null||document.getElementById('page_story')!=null){setTimeout(function(){if(CNBC_Utils.isNative()){return;}},1000)}else{if(CNBC_Utils.isNative()||CNBC_Utils.IS_ANDROID()||CNBC_Utils.IS_IPHONE()||CNBC_Utils.IS_IPAD()){return;}}
var match=/(.*).tinypass.com/,base=initData.config.endpoint.match(match)[1],aid=initData.config.aid;$.ajax({url:base+'.tinypass.com/xbuilder/experience/load?aid='+aid,dataType:'script',async:true})
if($('body').hasClass('premium')||$('body').hasClass('premium-view')||document.getElementById('page_franchise_premium_view')||document.getElementById('page_pro_auth_wildcard')!=null||document.getElementById('page_story_premium_view')!=null||typeof(CNBC_node_classification)!=='undefined'){return;}else{setTimeout(function(){tp.push(["init",function(){tp.experience.init();}]);},1200);}};});
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/inits/surf.init.js */

CNBC_Utils.execute('Surf Bedrock signin init',function(){var initData=cnbc.app.getInitData('signin');CNBC_Surf.Signin_Ui.init();$('#login-container #signin').off().click(function(e){e.preventDefault();if(typeof SURF!=='undefined'){CNBC_Surf_Mediator.init(initData);CNBC_Surf.Signin_Ui.startUIFlow('signin');}
else{window.location.href=CNBC_Settings.baseurls.cnbc_base+CNBC_Surf.outageRedirection;}});$('#login-container .cnbcRegister a').off().click(function(e){e.preventDefault();if(typeof SURF!=='undefined'){CNBC_Surf_Mediator.init(initData);CNBC_Surf.Signin_Ui.startUIFlow('register',null,1);}
else{window.location.href=CNBC_Settings.baseurls.cnbc_base+CNBC_Surf.outageRedirection;}});CNBC_Surf_Mediator.init(initData);if(CNBC_Utils.readCookie('c_cnbc_session_valid')=='true'||CNBC_Utils.readData('c_to')||location.hash.indexOf('#sh=')!=-1){CNBC_Surf.Signin_Ui.startUIFlow('load');}
else{CNBC_Utils.appendClassesOnUserLoggedInOrPro();CNBC_Premium.init();}});
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/inits/pageVideoMetaData.js */

CNBC_Utils.execute('get video metadata',function(){CNBC_Utils.getVideoMetaData();});
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/inits/internationalization.3.js */

CNBC_Utils.execute('internationalization',function(){var initData=cnbc.app.getInitData('internationalization');initData.nid=CNBC_Settings.pageNodeId;CNBC_Regional.init(initData);});
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/inits/header.navigation.js */

CNBC_Utils.execute('CNBC_Navigation',function(){window.mob_nav=new CNBC_Navigation();mob_nav.init('div.more-container');});
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/inits/quoteStreaming.js */

CNBC_Utils.execute('get quotes',function(){var initData=cnbc.app.getInitData('quoteStreaming'),quoteInit={url:initData.quoteUrl,listeners:[],settings:initData.settings},futureInit={url:initData.futureUrl,listeners:[],settings:initData.settings},initOptions=[];quoteInit.settings.maxSymbolsPerRequest=30;quoteInit.settings.detailedQuoteBase=CNBC_Settings.baseurls.detailedquotebase;futureInit.settings.maxSymbolsPerRequest=30;futureInit.settings.detailedQuoteBase=CNBC_Settings.baseurls.detailedquotebase;if(initData.showInlineQuotes){quoteInit.listeners.push(new CNBC_Quotes.InlineQuoteRenderer());}
if(initData.showTableChart){quoteInit.listeners.push(new CNBC_Quotes.TableChartRenderer());}
if(initData.showTickerChart){quoteInit.listeners.push(new CNBC_Quotes.MarketsRenderer());}
if(initData.showFutureChart){futureInit.listeners.push(new CNBC_Quotes.FutureTableChartRenderer());}
if(initData.showTickerNG){quoteInit.listeners.push(new CNBC_Quotes.MarketsOverviewRenderer());}
if(initData.showTableChartNG){quoteInit.listeners.push(new CNBC_Quotes.MarketsChartRenderer());}
if(quoteInit.listeners.length>0){initOptions.push(quoteInit);}
if(futureInit.listeners.length>0){initOptions.push(futureInit);}
CNBC_Quotes.init(initData.chartApiUrl,initOptions);});
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/inits/tabletFriendlyTouch.js */

CNBC_Utils.execute('Tablet Friendly Touch',function(){if(CNBC_Utils.isTouchEnabled()==true){var tabletFriendlyTouch=new CNBC_TabletFriendlyTouch({targetElement:$('.cnbc-menu').find('a')});tabletFriendlyTouch.init({targetElement:$('.cnbc-menu').find('a')});}});
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/inits/lazyLoadFunctions.js */

CNBC_Utils.execute('lazy load functions',function(){CNBC_Utils.executeLazyLoadFunctions();});
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/inits/alerts.js */

CNBC_Utils.execute('cnbc alerts',function(){var initData=cnbc.app.getInitData('alerts');if(!initData.isMobile){var playerurl=initData.playerurl;}else{var playerurl='';}
initData.alerts=[{mode:'breaking_news',hide:true,cookie:true,dismiss:true,animate:true},{mode:'pro_alert',target:true,hide:true,animate:true,dismiss:true,cookie:true},{mode:'watch_live',hide:true,animate:true,dismiss:true,cookie:true,player:playerurl},{mode:'watch_live_intl',hide:true,animate:true,dismiss:true,cookie:true,player:playerurl}];CNBC_Alerts.init(initData.alertInterval,initData.alerts);});
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/inits/proAccountNotification.js */

CNBC_Utils.execute('pro account notification',function(){if(CNBC_Utils.isUserPremium()){var container=$('#pro-alert-msg');if(container.length)
CNBC_Notification.showUserAccountNotification();}});
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/inits/persistentSiteHeader.js */

CNBC_Utils.execute('persistent_site_header',function(){var initData=cnbc.app.getInitData('persistentSiteHeader');CNBC_Utils.initPersistentSiteHeader(initData.product,initData.products);});
/* File BEGIN: /home/cms/prod/live/applications/cnbc.com/staticcontent/scripts/inits/lazyloadFragment.js */

CNBC_Utils.execute('lazyload Fragments',function(){var loadJSFragmentModules=function(){$('[data-fragmentlazyload="true"]').each(function(){var id=this.id;var data_attr=$(this).attr('data-omni-val');CNBC_Utils.execute('fragmentLazyLoad '+id,function(){function renderModule(){var pageNodeId=CNBC_Settings.pageNodeId;if(id=="cnbc-footer-responsive"){pageNodeId='100746233';var adChoicecontent=$('#cnbc-footer-responsive #oba-link-container').detach();}
var fragmenturl=CNBC_Settings.baseurls.cnbc_base+"/id/"+pageNodeId+"/fragment/"+id;$.ajax({url:fragmenturl,success:function(data){var result=$.trim($(data).text());var idOmnitureTracking='';if(!result){return false;};if($.trim($('#'+id).text())!=result){$('#'+id).replaceWith(data);};$('#'+id).removeAttr("data-fragmentlazyload");if(id.indexOf('topic_town')!=-1){idOmnitureTracking='topic_town_container';}else{idOmnitureTracking=id;}
switch(true){case/^cnbc-footer-responsive/.test(idOmnitureTracking):$('#cnbc-footer-responsive .sec-footer-links #oba-link-container').append(adChoicecontent);CNBC_Utils.switchMobileDesktop();if(cnbc&&cnbc.omnitureHomePageTracking&&cnbc.omnitureHomePageTracking.footer){cnbc.omnitureHomePageTracking.footer();}
break;case/^rest_related_/.test(idOmnitureTracking):if(cnbc&&cnbc.omnitureHomePageTracking){if(cnbc.omnitureHomePageTracking.marketData){cnbc.omnitureHomePageTracking.marketData();}
if(cnbc.omnitureHomePageTracking.madMoney){cnbc.omnitureHomePageTracking.madMoney();}
if(cnbc.omnitureHomePageTracking.futuresNow){cnbc.omnitureHomePageTracking.futuresNow();}
if(cnbc.omnitureHomePageTracking.tradingNation){cnbc.omnitureHomePageTracking.tradingNation();}
if(cnbc.omnitureHomePageTracking.currencies){cnbc.omnitureHomePageTracking.currencies();}}
break;case/^topic_town_container/.test(idOmnitureTracking):if(cnbc&&cnbc.omnitureHomePageTracking){cnbc.omnitureHomePageTracking.topicTown();}
break;case/^pipeline2/.test(idOmnitureTracking):if(CNBC_Settings.templateName=="slideshow_one_page"){CNBC_Omniture.genericClickTracking({link:{trkNav:'',slide:'end',pev2:'slideshow'}});}
break;}}});};renderModule();},id);});};loadJSFragmentModules();});