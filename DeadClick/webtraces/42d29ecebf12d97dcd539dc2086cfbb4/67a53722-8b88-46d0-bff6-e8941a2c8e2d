if(function(){this.Panel=angular.module("giCollaboration.Panel",["giCollaboration","giCollaboration.Boards","giCarousel"])}.call(this),function(){this.Boards=angular.module("giCollaboration.Boards",["giCollaboration","giTracking","giAdp","giRails","giModal","ngTouch","ngDropdowns","giFancyHeader","giSuperStrip","templates"]),this.Boards.filter("reverse",function(){return function(t){return t&&t.length>1?t.slice(0).reverse():t}}),this.Boards.directive("ngEnter",function(){return function(t,e,n){return e.bind("keydown keypress",function(e){if(13===e.which)return t.$apply(function(){return t.$eval(n.ngEnter)}),e.preventDefault()})}}),this.Boards.run(["$rootScope","t","siteMap",function(t,e,n){return t.t=e,t.siteMap=n}])}.call(this),function(){function t(t){return function(){return t}}function e(t){var e="Array"===t&&oe.isArray||function(e,n){return(n||ce.call(e))==="[object "+t+"]"};return ge[t]=e}function n(t,e){function n(n){return m(n)?ce.call(n)==="[object "+e+"]":typeof n===t}return ge[e]=n}function r(t){t.SugarMethods||(u(t,"SugarMethods",{}),o(t,!1,!0,{extend:function(e,n,r){o(t,!1!==r,n,e)},sugarRestore:function(){return a(this,t,arguments,function(t,e,n){u(t,e,n.method)})},sugarRevert:function(){return a(this,t,arguments,function(t,e,n){n.existed?u(t,e,n.original):delete t[e]})}}))}function o(t,e,n,o){var i=e?t.prototype:t;r(t),_(o,function(r,o){var a=i[r],d=p(i,r);Me(n)&&a&&(o=s(a,o,n)),!1===n&&a||u(i,r,o),t.SugarMethods[r]={method:o,existed:d,original:a,instance:e}})}function i(t,e,n,r,i){var a={};r=we(r)?r.split(","):r,r.forEach(function(t,e){i(a,t,e)}),o(t,e,n,a)}function a(t,e,n,r){var o=0===n.length,i=d(n),a=!1;return _(e.SugarMethods,function(e,n){(o||-1!==i.indexOf(e))&&(a=!0,r(n.instance?t.prototype:t,e,n))}),a}function s(t,e,n){return function(){return n.apply(this,arguments)?e.apply(this,arguments):t.apply(this,arguments)}}function u(t,e,n){he?re.defineProperty(t,e,{value:n,configurable:!0,enumerable:!1,writable:!0}):t[e]=n}function d(t,e,n){var r=[];n=n||0;var o;for(o=t.length;n<o;n++)r.push(t[n]),e&&e.call(t,t[n],n);return r}function l(t,e,n){var r=t[n||0];Se(r)&&(t=r,n=0),d(t,e,n)}function c(t){if(!t||!t.call)throw new TypeError("Callback is not callable")}function f(t){return void 0!==t}function h(t){return void 0===t}function p(t,e){return!!t&&fe.call(t,e)}function m(t){return!!t&&("object"==typeof t||pe&&Ce(t))}function g(t){var e=typeof t;return null==t||"string"===e||"number"===e||"boolean"===e}function v(t,e){e=e||ce.call(t);try{if(t&&t.constructor&&!p(t,"constructor")&&!p(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!!t&&"[object Object]"===e&&"hasOwnProperty"in t}function _(t,e){for(var n in t)if(p(t,n)&&!1===e.call(t,n,t[n],t))break}function y(t,e){for(var n=0;n<t;n++)e(n)}function b(t,e){return _(e,function(n){t[n]=e[n]}),t}function w(t){if(g(t)&&(t=re(t)),me&&we(t))for(var e,n=t,r=0;e=n.charAt(r);)n[r++]=e;return t}function S(t){b(this,w(t))}function k(t,e,n){var r=Be(10,De(e||0));return n=n||Ie,0>e&&(r=1/r),n(t*r)/r}function C(){return"\t\n\x0B\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u2028\u2029\u3000\ufeff"}function M(t,e){var n="";for(t=t.toString();0<e;)1&e&&(n+=t),(e>>=1)&&(t+=t);return n}function A(t,e){var n,r;return n=t.replace(Ae,function(t){return t=Ee[t],t===Ne&&(r=!0),t}),r?parseFloat(n):parseInt(n,e||10)}function D(t,e,n,r){return r=De(t).toString(r||10),r=M("0",e-r.replace(/\.\d+/,"").length)+r,(n||0>t)&&(r=(0>t?"-":"+")+r),r}function B(t){if(11<=t&&13>=t)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}function T(t,e){function n(t,n){(t||-1<e.indexOf(n))&&(r+=n)}var r="";return e=e||"",n(t.multiline,"m"),n(t.ignoreCase,"i"),n(t.global,"g"),n(t.u,"y"),r}function L(t){return we(t)||(t=se(t)),t.replace(/([\\/\'*+?|()\[\]{}.^$])/g,"\\$1")}function I(t,e){return t["get"+(t._utc?"UTC":"")+e]()}function x(t,e,n){return t["set"+(t._utc&&"ISOWeek"!=e?"UTC":"")+e](n)}function P(t,e){var n,r,o,i,a,s,u,d=typeof t;if("string"===d)return t;if(o=ce.call(t),n=v(t,o),r=Se(t,o),null!=t&&n||r){if(e||(e=[]),1<e.length)for(s=e.length;s--;)if(e[s]===t)return"CYC";for(e.push(t),n=t.valueOf()+se(t.constructor),i=r?t:re.keys(t).sort(),s=0,u=i.length;s<u;s++)a=r?s:i[s],n+=a+P(t[a],e);e.pop()}else n=-Infinity==1/t?"-0":se(t&&t.valueOf?t.valueOf():t);return d+o+n}function $(t,e){return t===e?0!==t||1/t==1/e:!(!F(t)||!F(e))&&P(t)===P(e)}function F(t){var e=ce.call(t);return ve.test(e)||v(t,e)}function O(t,e,n){var r,o=t.length,i=e.length,a=!1!==e[i-1];return i>(a?1:2)?(r=[],d(e,function(e){if(ye(e))return!1;r.push(Y(t,o,e,a,n))}),r):Y(t,o,e[0],a,n)}function Y(t,e,n,r,o){return r&&0>(n%=e)&&(n=e+n),o?t.charAt(n):t[n]}function N(t,e){i(e,!0,!1,t,function(t,e){t[e+("equal"===e?"s":"")]=function(){return re[e].apply(null,[this].concat(d(arguments)))}})}function R(t,e,n,r){var o=t.length,i=-1==r,a=i?o-1:0;for(n=isNaN(n)?a:parseInt(n>>0),0>n&&(n=o+n),(!i&&0>n||i&&n>=o)&&(n=a);i&&0<=n||!i&&n<o;){if(t[n]===e)return n;n+=r}return-1}function E(t,e,n,r){var o=t.length,i=0,a=f(n);if(c(e),0==o&&!a)throw new TypeError("Reduce called on empty array with no initial value");for(a||(n=t[r?o-1:i],i++);i<o;)a=r?o-i-1:i,a in t&&(n=e(n,t[a],a,t)),i++;return n}function H(t){if(0===t.length)throw new TypeError("First argument must be defined")}function U(t){return t=ie(t),function(e){return t.test(e)}}function j(t){var e=t.getTime();return function(t){return!(!t||!t.getTime)&&t.getTime()===e}}function z(t){return function(e,n,r){return e===t||t.call(this,e,n,r)}}function W(t){return function(e,n,r){return e===t||t.call(r,n,e,r)}}function G(t,e){var n={};return function(r,o,i){var a;if(!m(r))return!1;for(a in t)if(n[a]=n[a]||J(t[a],e),!1===n[a].call(i,r[a],o,i))return!1;return!0}}function V(t){return function(e){return e===t||$(e,t)}}function J(t,e){if(!g(t)){if(Ce(t))return U(t);if(ke(t))return j(t);if(Me(t))return e?W(t):z(t);if(v(t))return G(t,e)}return V(t)}function q(t,e,n,r){return e?e.apply?e.apply(n,r||[]):Me(t[e])?t[e].call(t):t[e]:t}function K(t,e,n,r){var o=+t.length;for(0>n&&(n=t.length+n),n=isNaN(n)?0:n,!0===r&&(o+=n);n<o;){if(!((r=n%t.length)in t)){Z(t,e,n);break}if(!1===e.call(t,t[r],r,t))break;n++}}function Z(t,e,n){var r,o=[];for(r in t)r in t&&r>>>0==r&&4294967295!=r&&r>=n&&o.push(parseInt(r));o.sort().each(function(n){return e.call(t,t[n],n,t)})}function X(t,e,n,r,o,i){var a,s,u;return 0<t.length&&(u=J(e),K(t,function(e,n){if(u.call(i,e,n,t))return a=e,s=n,!1},n,r)),o?s:a}function Q(t,e){var n,r=[],o={};return K(t,function(i,a){n=e?q(i,e,t,[i,a,t]):i,ot(o,n)||r.push(i)}),r}function tt(t,e,n){var r=[],o={};return e.each(function(t){ot(o,t)}),t.each(function(t){var e=P(t),i=!F(t);if(rt(o,e,t,i)!==n){var a=0;if(i)for(e=o[e];a<e.length;)e[a]===t?e.splice(a,1):a+=1;else delete o[e];r.push(t)}}),r}function et(t,e,n){e=e||Infinity,n=n||0;var r=[];return K(t,function(t){Se(t)&&n<e?r=r.concat(et(t,e,n+1)):r.push(t)}),r}function nt(t){var e=[];return d(t,function(t){e=e.concat(t)}),e}function rt(t,e,n,r){var o=e in t;return r&&(t[e]||(t[e]=[]),o=-1!==t[e].indexOf(n)),o}function ot(t,e){var n=P(e),r=!F(e),o=rt(t,n,e,r);return r?t[n].push(e):t[n]=e,o}function it(t,e,n,r){var o,i,a,s=[],u="max"===n,d="min"===n,l=oe.isArray(t);for(o in t)if(t.hasOwnProperty(o)){if(n=t[o],a=q(n,e,t,l?[n,parseInt(o),t]:[]),h(a))throw new TypeError("Cannot compare with undefined");a===i?s.push(n):(h(i)||u&&a>i||d&&a<i)&&(s=[n],i=a)}return l||(s=et(s,1)),r?s:s[0]}function at(t,e){var n,r,o,i,a=0,s=0;n=oe[ze],r=oe[We];var u=oe[Ge],d=oe[je],l=oe[Ve];t=st(t,n,r),e=st(e,n,r);do n=t.charAt(a),o=u[n]||n,n=e.charAt(a),i=u[n]||n,n=o?d.indexOf(o):null,r=i?d.indexOf(i):null,-1===n||-1===r?(n=t.charCodeAt(a)||null,r=e.charCodeAt(a)||null,l&&(n>=$e&&n<=Fe||n>=Oe&&n<=Ye)&&(r>=$e&&r<=Fe||r>=Oe&&r<=Ye)&&(n=A(t.slice(a)),r=A(e.slice(a)))):(o=o!==t.charAt(a),i=i!==e.charAt(a),o!==i&&0===s&&(s=o-i)),a+=1;while(null!=n&&null!=r&&n===r);return n===r?s:n-r}function st(t,e,n){return we(t)||(t=se(t)),n&&(t=t.toLowerCase()),e&&(t=t.replace(e,"")),t}function ut(t,e){i(re,!1,!0,t,function(t,n){t[n]=function(t,r,o){var i,a=re.keys(w(t));return e||(i=J(r,!0)),o=oe.prototype[n].call(a,function(n){var o=t[n];return e?q(o,r,t,[n,o,t]):i(o,n,t)},o),Se(o)&&(o=o.reduce(function(e,n){return e[n]=t[n],e},{})),o}}),N(t,S)}function dt(t){b(this,t),this.g=sn.concat()}function lt(t,e,n){var r,o,i=e[0],a=e[1],s=e[2];return e=t[n]||t.relative,Me(e)?e.call(t,i,a,s,n):(o=t.units[8*(t.plural&&1<i?1:0)+a]||t.units[a],t.capitalizeUnit&&(o=vt(o)),r=t.modifiers.filter(function(t){return"sign"==t.name&&t.value==(0<s?1:-1)})[0],e.replace(/\{(.*?)\}/g,function(t,e){switch(e){case"num":return i;case"unit":return o;case"sign":return r.src}}))}function ct(t,e){return"en"===(e=e||t.code)||"en-US"===e||t.variant}function ft(t,e){return e.replace(ie(t.num,"g"),function(e){return ht(t,e)||""})}function ht(t,e){var n;return be(e)?e:e&&-1!==(n=t.numbers.indexOf(e))?(n+1)%10:1}function pt(t,e){var n;if(we(t)||(t=""),n=cn[t]||cn[t.slice(0,2)],!1===e&&!n)throw new TypeError("Invalid locale.");return n||Qe}function mt(t,e){function n(t){var e=s[t];we(e)?s[t]=e.split(","):e||(s[t]=[])}function r(t,e){t=t.split("+").map(function(t){return t.replace(/(.+):(.+)$/,function(t,e,n){return n.split("|").map(function(t){return e+t}).join("|")})}).join("|"),t.split("|").forEach(e)}function o(t,e,n){var o=[];s[t].forEach(function(t,i){e&&(t+="+"+t.slice(0,3)),r(t,function(t,e){o[e*n+i]=t.toLowerCase()})}),s[t]=o}function i(t,e,n){return t="\\d{"+t+","+e+"}",n&&(t+="|(?:"+_t(s.numbers)+")+"),t}function a(t,e){s[t]=s[t]||e}var s,u;return s=new dt(e),n("modifiers"),"months weekdays units numbers articles tokens timeMarker ampm timeSuffixes dateParse timeParse".split(" ").forEach(n),u=!s.monthSuffix,o("months",u,12),o("weekdays",u,7),o("units",!1,8),o("numbers",!1,10),a("code",t),a("date",i(1,2,s.digitDate)),a("year","'\\d{2}|"+i(4,4)),a("num",function(){var t=["-?\\d+"].concat(s.articles);return s.numbers&&(t=t.concat(s.numbers)),_t(t)}()),function(){var t=[];s.i={},s.modifiers.push({name:"day",src:"yesterday",value:-1}),s.modifiers.push({name:"day",src:"today",value:0}),s.modifiers.push({name:"day",src:"tomorrow",value:1}),s.modifiers.forEach(function(e){var n=e.name;r(e.src,function(r){var o=s[n];s.i[r]=e,t.push({name:n,src:r,value:e.value}),s[n]=o?o+"|"+r:r})}),s.day+="|"+_t(s.weekdays),s.modifiers=t}(),s.monthSuffix&&(s.month=i(1,2),s.months="1 2 3 4 5 6 7 8 9 10 11 12".split(" ").map(function(t){return t+s.monthSuffix})),s.full_month=i(1,2)+"|"+_t(s.months),0<s.timeSuffixes.length&&s.addFormat(Yt(s),!1,rn),s.addFormat("{day}",!0),s.addFormat("{month}"+(s.monthSuffix||"")),s.addFormat("{year}"+(s.yearSuffix||"")),s.timeParse.forEach(function(t){s.addFormat(t,!0)}),s.dateParse.forEach(function(t){s.addFormat(t)}),cn[t]=s}function gt(t,e,n,r){t.g.unshift({r:r,locale:t,q:ie("^"+e+"$","i"),to:n})}function vt(t){return t.slice(0,1).toUpperCase()+t.slice(1)}function _t(t){return t.filter(function(t){return!!t}).join("|")}function yt(){var t=ae.SugarNewDate;return t?t():new ae}function bt(t,e){var n;return m(t[0])?t:be(t[0])&&!be(t[1])?[t[0]]:we(t[0])&&e?[wt(t[0]),t[1]]:(n={},en.forEach(function(e,r){n[e.name]=t[r]}),[n])}function wt(t){var e,n={};return(t=t.match(/^(\d+)?\s?(\w+?)s?$/i))&&(h(e)&&(e=parseInt(t[1])||1),n[t[2].toLowerCase()]=e),n}function St(t,e,n){var r;for(h(n)&&(n=nn.length),e=e||0;e<n&&(r=nn[e],!1!==t(r.name,r,e));e++);}function kt(t,e){var n,r,o={};return e.forEach(function(e,i){n=t[i+1],h(n)||""===n||("year"===e&&(o.t=n.replace(/'/,"")),r=parseFloat(n.replace(/'/,"").replace(/,/,".")),o[e]=isNaN(r)?n.toLowerCase():r)}),o}function Ct(t){return t=t.trim().replace(/^just (?=now)|\.+$/i,""),Mt(t)}function Mt(t){return t.replace(tn,function(t,e,n){var r,o,i=0,a=1;return e?t:(n.split("").reverse().forEach(function(t){t=an[t];var e=9<t;e?(r&&(i+=a),a*=t/(o||1),o=t):(!1===r&&(a*=10),i+=a*t),r=e}),r&&(i+=a),i)})}function At(t,e,n,r){function o(t){h.push(t)}function i(){h.forEach(function(t){t.call()})}function a(){var t=d.getWeekday();d.setWeekday(7*(g.num-1)+(t>b?b+7:b))}function s(){var t=p.i[g.edge];St(function(t){if(f(g[t]))return v=t,!1},4),"year"===v?g.e="month":"month"!==v&&"week"!==v||(g.e="day"),d[(0>t.value?"endOf":"beginningOf")+vt(v)](),-2===t.value&&d.reset()}function u(){var t;St(function(e,n,r){if("day"===e&&(e="date"),f(g[e])){if(r>=y)return d.setTime(NaN),!1;t=t||{},t[e]=g[e],delete g[e]}}),t&&o(function(){d.set(t,!0)})}var d,l,c,h,p,g,v,y,b,w,S;return d=yt(),h=[],d.utc(r),ke(t)?d.utc(t.isUTC()).setTime(t.getTime()):be(t)?d.setTime(t):m(t)?(d.set(t,!0),g=t):we(t)&&(c=pt(e),t=Ct(t),c&&_(c.o?[c.o].concat(c.g):c.g,function(n,r){var i=t.match(r.q);if(i)return p=r.locale,g=kt(i,r.to),p.o=r,g.utc&&d.utc(),g.timestamp?(g=g.timestamp,!1):(r.r&&!we(g.month)&&(we(g.date)||ct(c,e))&&(S=g.month,g.month=g.date,g.date=S),g.year&&2===g.t.length&&(g.year=100*Ie(I(yt(),"FullYear")/100)-100*Ie(g.year/100)+g.year),g.month&&(g.month=p.getMonth(g.month),g.shift&&!g.unit&&(g.unit=p.units[7])),g.weekday&&g.date?delete g.weekday:g.weekday&&(g.weekday=p.getWeekday(g.weekday),g.shift&&!g.unit&&(g.unit=p.units[5])),g.day&&(S=p.i[g.day])?(g.day=S.value,d.reset(),l=!0):g.day&&-1<(b=p.getWeekday(g.day))&&(delete g.day,g.num&&g.month?(o(a),g.day=1):g.weekday=b),g.date&&!be(g.date)&&(g.date=ft(p,g.date)),g.ampm&&g.ampm===p.ampm[1]&&12>g.hour?g.hour+=12:g.ampm===p.ampm[0]&&12===g.hour&&(g.hour=0),("offset_hours"in g||"offset_minutes"in g)&&(d.utc(),g.offset_minutes=g.offset_minutes||0,g.offset_minutes+=60*g.offset_hours,"-"===g.offset_sign&&(g.offset_minutes*=-1),g.minute-=g.offset_minutes),g.unit&&(l=!0,w=ht(p,g.num),y=p.units.indexOf(g.unit)%8,v=Xe.units[y],u(),g.shift&&(w*=(S=p.i[g.shift])?S.value:0),g.sign&&(S=p.i[g.sign])&&(w*=S.value),f(g.weekday)&&(d.set({weekday:g.weekday},!0),delete g.weekday),g[v]=(g[v]||0)+w),g.edge&&o(s),"-"===g.year_sign&&(g.year*=-1),St(function(t,e,n){e=g[t];var r=e%1;r&&(g[nn[n-1].name]=Ie(r*("second"===t?1e3:60)),g[t]=Le(e))},1,4),!1)}),g?l?d.advance(g):(d._utc&&d.reset(),Ot(d,g,!0,!1,n)):("now"!==t&&(d=new ae(t)),r&&d.addMinutes(-d.getTimezoneOffset())),i(),d.utc(!1)),{c:d,set:g}}function Dt(t){var e,n=De(t),r=n,o=0;return St(function(t,i,a){1<=(e=Le(k(n/i.b(),1)))&&(r=e,o=a)},1),[r,o,t]}function Bt(t){var e=Dt(t.millisecondsFromNow());return(6===e[1]||5===e[1]&&4===e[0]&&t.daysFromNow()>=yt().daysInMonth())&&(e[0]=De(t.monthsFromNow()),e[1]=6),e}function Tt(t,e,n){function r(t,n){var r=I(t,"Month");return pt(n).months[r+12*e]}Lt(t,r,n),Lt(vt(t),r,n,1)}function Lt(t,e,n,r){dn[t]=function(t,o){var i=e(t,o);return n&&(i=i.slice(0,n)),r&&(i=i.slice(0,r).toUpperCase()+i.slice(r)),i}}function It(t,e,n){dn[t]=e,dn[t+t]=function(t,n){return D(e(t,n),2)},n&&(dn[t+t+t]=function(t,n){return D(e(t,n),3)},dn[t+t+t+t]=function(t,n){return D(e(t,n),4)})}function xt(t){var e=t.match(/(\{\w+\})|[^{}]+/g);un[t]=e.map(function(t){return t.replace(/\{(\w+)\}/,function(e,n){return t=dn[n]||n,n}),t})}function Pt(t,e,n,r){var o;if(!t.isValid())return"Invalid Date";if(Date[e]?e=Date[e]:Me(e)&&(o=Bt(t),e=e.apply(t,o.concat(pt(r)))),!e&&n)return o=o||Bt(t),0===o[1]&&(o[1]=1,o[0]=1),t=pt(r),lt(t,o,0<o[2]?"future":"past");e=e||"long","short"!==e&&"long"!==e&&"full"!==e||(e=pt(r)[e]),un[e]||xt(e);var i,a;for(o="",e=un[e],i=0,n=e.length;i<n;i++)a=e[i],o+=Me(a)?a(t,r):a;return o}function $t(t,e,n,r,o){var i,a,s,u=0,d=0,l=0;return i=At(e,n,null,o),0<r&&(d=l=r,a=!0),!!i.c.isValid()&&(i.set&&i.set.e&&(ln.forEach(function(e){e.name===i.set.e&&(u=e.b(i.c,t-i.c)-1)}),e=vt(i.set.e),(i.set.edge||i.set.shift)&&i.c["beginningOf"+e](),"month"===i.set.e&&(s=i.c.clone()["endOf"+e]().getTime()),!a&&i.set.sign&&"millisecond"!=i.set.e&&(d=50,l=-50)),a=t.getTime(),e=i.c.getTime(),s=Ft(t,e,s||e+u),a>=e-d&&a<=s+l)}function Ft(t,e,n){return e=new ae(e),t=new ae(n).utc(t.isUTC()),23!==I(t,"Hours")&&(e=e.getTimezoneOffset(),t=t.getTimezoneOffset(),e!==t&&(n+=(t-e).minutes())),n}function Ot(t,e,n,r,o){function i(t){return f(e[t])?e[t]:e[t+"s"]}function a(t){return f(i(t))}var s;if(be(e)&&r)e={milliseconds:e};else if(be(e))return t.setTime(e),t;f(e.date)&&(e.day=e.date),St(function(r,o,i){var u="day"===r;if(a(r)||u&&a("weekday"))return e.e=r,s=+i,!1;!n||"week"===r||u&&a("week")||x(t,o.method,u?1:0)}),ln.forEach(function(n){var o=n.name;n=n.method;var s;s=i(o),h(s)||(r?("week"===o&&(s=(e.day||0)+7*s,n="Date"),s=s*r+I(t,n)):"month"===o&&a("day")&&x(t,"Date",15),x(t,n,s),r&&"month"===o&&(o=s,0>o&&(o=o%12+12),o%12!=I(t,"Month")&&x(t,"Date",0)))}),r||a("day")||!a("weekday")||t.setWeekday(i("weekday"));var u;t:{switch(o){case-1:u=t>yt();break t;case 1:u=t<yt();break t}u=void 0}return u&&St(function(e,n){if((n.k||"week"===e&&a("weekday"))&&!(a(e)||"day"===e&&a("weekday")))return t[n.j](o),!1},s+1),t}function Yt(t,e){var n,r=on,o={h:0,m:1,s:2};return t=t||Xe,r.replace(/{([a-z])}/g,function(r,i){var a=[],s="h"===i,u=s&&!e;return"t"===i?t.ampm.join("|"):(s&&a.push(":"),(n=t.timeSuffixes[o[i]])&&a.push(n+"\\s*"),0===a.length?"":"(?:"+a.join("|")+")"+(u?"":"?"))})}function Nt(t,e,n){var r,o;return be(t[1])?r=bt(t)[0]:(r=t[0],o=t[1]),At(r,o,e,n).c}function Rt(t,e){function n(){return Ie(this*e)}function r(){return Nt(arguments)[t.j](this)}function o(){return Nt(arguments)[t.j](-this)}var i=t.name,a={};a[i]=n,a[i+"s"]=n,a[i+"Before"]=o,a[i+"sBefore"]=o,a[i+"Ago"]=o,a[i+"sAgo"]=o,a[i+"After"]=r,a[i+"sAfter"]=r,a[i+"FromNow"]=r,a[i+"sFromNow"]=r,ue.extend(a)}function Et(t,e){this.start=Ht(t),this.end=Ht(e)}function Ht(t){return ke(t)?new ae(t.getTime()):null==t?t:ke(t)?t.getTime():t.valueOf()}function Ut(t){return!!(t=null==t?t:ke(t)?t.getTime():t.valueOf())||0===t}function jt(t,e){var n,r,o,i;return be(e)?new ae(t.getTime()+e):(n=e[0],r=e[1],o=I(t,r),i=new ae(t.getTime()),x(i,r,o+n),i)}function zt(t,e){return se.fromCharCode(t.charCodeAt(0)+e)}function Wt(t,e){return t+e}function Gt(t,e,n,r,o){Infinity!==e&&(t.timers||(t.timers=[]),be(e)||(e=1),t.n=!1,t.timers.push(setTimeout(function(){t.n||n.apply(r,o||[])},e)))}function Vt(t,e,n,r,o,i){var a=t.toFixed(20),s=a.search(/\./),a=a.search(/[1-9]/),s=s-a;return 0<s&&(s-=1),o=Pe(xe(Le(s/3),!1===o?n.length:o),-r),r=n.charAt(o+r-1),-9>s&&(o=-3,e=De(s)-9,r=n.slice(0,1)),n=i?Be(2,10*o):Be(10,3*o),k(t/n,e||0).format()+r.trim()}function Jt(t,e,n,r){var o,i,a;(i=e.match(/^(.+?)(\[.*\])$/))?(a=i[1],e=i[2].replace(/^\[|\]$/g,"").split("]["),e.forEach(function(e){o=!e||e.match(/^\d+$/),!a&&Se(t)&&(a=t.length),p(t,a)||(t[a]=o?[]:{}),t=t[a],a=e}),!a&&o&&(a=t.length.toString()),Jt(t,a,n,r)):t[e]=!(!r||"true"!==n)||(!r||"false"!==n)&&n}function qt(t,e){var n;return Se(e)||m(e)&&e.toString===ce?(n=[],_(e,function(e,r){t&&(e=t+"["+e+"]"),n.push(qt(e,r))}),n.join("&")):t?Kt(t)+"="+(ke(e)?e.getTime():Kt(e)):""}function Kt(t){return t||!1===t||0===t?encodeURIComponent(t).replace(/%20/g,"+"):""}function Zt(t,e,n){var r,o=t instanceof S?new S:{};return _(t,function(t,i){r=!1,l(e,function(e){(Ce(e)?e.test(t):m(e)?e[t]===i:t===se(e))&&(r=!0)},1),r===n&&(o[t]=i)}),o}function Xt(t){if(0>(t=+t)||Infinity===t)throw new RangeError("Invalid number");return t}function Qt(t,e){return M(f(e)?e:" ",t)}function te(t,e,n,r,o){var i;if(t.length<=e)return t.toString();switch(r=h(r)?"...":r,n){case"left":return t=o?ee(t,e,!0):t.slice(t.length-e),r+t;case"middle":return n=Te(e/2),i=Le(e/2),e=o?ee(t,n):t.slice(0,n),t=o?ee(t,i,!0):t.slice(t.length-i),e+r+t;default:return(e=o?ee(t,e):t.slice(0,e))+r}}function ee(t,e,n){if(n)return ee(t.reverse(),e).reverse();n=ie("(?=["+C()+"])");var r=0;return t.split(n).filter(function(t){return(r+=t.length)<=e}).join("")}function ne(t,e,n){return we(e)&&-1===(e=t.indexOf(e))&&(e=n?t.length:0),e}var re=Object,oe=Array,ie=RegExp,ae=Date,se=String,ue=Number,de=Math,le="undefined"!=typeof global?global:this,ce=re.prototype.toString,fe=re.prototype.hasOwnProperty,he=re.defineProperty&&re.defineProperties,pe="function"==typeof ie(),me=!("0"in new se("a")),ge={},ve=/^\[object Date|Array|String|Number|RegExp|Boolean|Arguments\]$/,_e="Boolean Number String Array Date RegExp Function".split(" "),ye=n("boolean",_e[0]),be=n("number",_e[1]),we=n("string",_e[2]),Se=e(_e[3]),ke=e(_e[4]),Ce=e(_e[5]),Me=e(_e[6]);S.prototype.constructor=re;var Ae,De=de.abs,Be=de.pow,Te=de.ceil,Le=de.floor,Ie=de.round,xe=de.min,Pe=de.max,$e=48,Fe=57,Oe=65296,Ye=65305,Ne=".",Re="",Ee={};r(re),_(_e,function(t,e){r(le[e])});var He,Ue;for(Ue=0;9>=Ue;Ue++)He=se.fromCharCode(Ue+Oe),Re+=He,Ee[He]=se.fromCharCode(Ue+$e);Ee[","]="",Ee["\uff0e"]=Ne,Ee[Ne]=Ne,Ae=ie("["+Re+"\uff0e,"+Ne+"]","g"),o(re,!1,!1,{keys:function(t){var e=[];if(!m(t)&&!Ce(t)&&!Me(t))throw new TypeError("Object required");return _(t,function(t){e.push(t)}),e}}),o(oe,!1,!1,{isArray:function(t){return Se(t)}}),o(oe,!0,!1,{every:function(t,e){var n=this.length,r=0;for(H(arguments);r<n;){if(r in this&&!t.call(e,this[r],r,this))return!1;r++}return!0},some:function(t,e){var n=this.length,r=0;for(H(arguments);r<n;){if(r in this&&t.call(e,this[r],r,this))return!0;r++}return!1},map:function(t,e){e=arguments[1];var n=this.length,r=0,o=Array(n);for(H(arguments);r<n;)r in this&&(o[r]=t.call(e,this[r],r,this)),r++;return o},filter:function(t){var e=arguments[1],n=this.length,r=0,o=[];for(H(arguments);r<n;)r in this&&t.call(e,this[r],r,this)&&o.push(this[r]),r++;return o},indexOf:function(t,e){return we(this)?this.indexOf(t,e):R(this,t,e,1)},lastIndexOf:function(t,e){return we(this)?this.lastIndexOf(t,e):R(this,t,e,-1)},forEach:function(t,e){var n=this.length,r=0;for(c(t);r<n;)r in this&&t.call(e,this[r],r,this),r++},reduce:function(t,e){return E(this,t,e)},reduceRight:function(t,e){return E(this,t,e,!0)}}),o(Function,!0,!1,{bind:function(t){var e,n=this,r=d(arguments,null,1);if(!Me(this))throw new TypeError("Function.prototype.bind called on a non-function");return e=function(){return n.apply(n.prototype&&this instanceof n?this:t,r.concat(d(arguments)))},e.prototype=this.prototype,e}}),o(ae,!1,!1,{now:function(){return(new ae).getTime()}}),function(){var t=C().match(/^\s+$/);try{se.prototype.trim.call([1])}catch(e){t=!1}o(se,!0,!t,{trim:function(){return this.toString().trimLeft().trimRight()},trimLeft:function(){return this.replace(ie("^["+C()+"]+"),"")},trimRight:function(){return this.replace(ie("["+C()+"]+$"),"")}})}(),function(){var t=new ae(ae.UTC(1999,11,31)),t=t.toISOString&&"1999-12-31T00:00:00.000Z"===t.toISOString();i(ae,!0,!t,"toISOString,toJSON",function(t,e){t[e]=function(){return D(this.getUTCFullYear(),4)+"-"+D(this.getUTCMonth()+1,2)+"-"+D(this.getUTCDate(),2)+"T"+D(this.getUTCHours(),2)+":"+D(this.getUTCMinutes(),2)+":"+D(this.getUTCSeconds(),2)+"."+D(this.getUTCMilliseconds(),3)+"Z"}})}();var je="AlphanumericSortOrder",ze="AlphanumericSortIgnore",We="AlphanumericSortIgnoreCase",Ge="AlphanumericSortEquivalents",Ve="AlphanumericSortNatural";o(oe,!1,!0,{create:function(){var t=[];return d(arguments,function(e){(!g(e)&&"length"in e&&("[object Arguments]"===ce.call(e)||e.callee)||!g(e)&&"length"in e&&!we(e)&&!v(e))&&(e=oe.prototype.slice.call(e,0)),t=t.concat(e)}),t}}),o(oe,!0,!1,{find:function(t,e){return c(t),X(this,t,0,!1,!1,e)},findIndex:function(t,e){var n;return c(t),n=X(this,t,0,!1,!0,e),h(n)?-1:n}}),o(oe,!0,!0,{findFrom:function(t,e,n){return X(this,t,e,n)},findIndexFrom:function(t,e,n){return e=X(this,t,e,n,!0),h(e)?-1:e},findAll:function(t,e,n){var r,o=[];return 0<this.length&&(r=J(t),K(this,function(t,e,n){r(t,e,n)&&o.push(t)},e,n)),o},count:function(t){return h(t)?this.length:this.findAll(t).length},removeAt:function(t,e){return h(t)?this:(h(e)&&(e=t),this.splice(t,e-t+1),this)},include:function(t,e){return this.clone().add(t,e)},exclude:function(){return oe.prototype.remove.apply(this.clone(),arguments)},clone:function(){return b([],this)},unique:function(t){return Q(this,t)},flatten:function(t){return et(this,t)},union:function(){return Q(this.concat(nt(arguments)))},intersect:function(){return tt(this,nt(arguments),!1)},subtract:function(){return tt(this,nt(arguments),!0)},at:function(){return O(this,arguments)},first:function(t){return h(t)?this[0]:(0>t&&(t=0),this.slice(0,t))},last:function(t){return h(t)?this[this.length-1]:this.slice(0>this.length-t?0:this.length-t)},from:function(t){return this.slice(t)},to:function(t){return h(t)&&(t=this.length),this.slice(0,t)},min:function(t,e){return it(this,t,"min",e)},max:function(t,e){return it(this,t,"max",e)},least:function(t,e){return it(this.groupBy.apply(this,[t]),"length","min",e)},most:function(t,e){return it(this.groupBy.apply(this,[t]),"length","max",e)},sum:function(t){return t=t?this.map(t):this,0<t.length?t.reduce(function(t,e){return t+e}):0},average:function(t){return t=t?this.map(t):this,0<t.length?t.sum()/t.length:0},inGroups:function(t,e){var n=1<arguments.length,r=this,o=[],i=Te(this.length/t);return y(t,function(t){t*=i;var a=r.slice(t,t+i);n&&a.length<i&&y(i-a.length,function(){a=a.add(e)}),o.push(a)}),o},inGroupsOf:function(t,e){var n,r=[],o=this.length,i=this;return 0===o||0===t?i:(h(t)&&(t=1),h(e)&&(e=null),y(Te(o/t),function(o){for(n=i.slice(t*o,t*o+t);n.length<t;)n.push(e);r.push(n)}),r)},isEmpty:function(){return 0==this.compact().length},sortBy:function(t,e){var n=this.clone();return n.sort(function(r,o){var i,a;return i=q(r,t,n,[r]),a=q(o,t,n,[o]),(we(i)&&we(a)?at(i,a):i<a?-1:i>a?1:0)*(e?-1:1)}),n},randomize:function(){for(var t,e,n=this.concat(),r=n.length;r;)t=de.random()*r|0,e=n[--r],n[r]=n[t],n[t]=e;return n},zip:function(){var t=d(arguments);return this.map(function(e,n){return[e].concat(t.map(function(t){return n in t?t[n]:null}))})},sample:function(t){var e=this.randomize();return 0<arguments.length?e.slice(0,t):e[0]},each:function(t,e,n){return K(this,t,e,n),this},add:function(t,e){return be(ue(e))&&!isNaN(e)||(e=this.length),oe.prototype.splice.apply(this,[e,0].concat(t)),this},remove:function(){var t=this;return d(arguments,function(e){var n=0;for(e=J(e);n<t.length;)e(t[n],n,t)?t.splice(n,1):n++}),t},compact:function(t){var e=[];return K(this,function(n){Se(n)?e.push(n.compact()):t&&n?e.push(n):t||null==n||n.valueOf()!==n.valueOf()||e.push(n)}),e},groupBy:function(t,e){var n,r=this,o={};return K(r,function(e,i){n=q(e,t,r,[e,i,r]),o[n]||(o[n]=[]),o[n].push(e)}),e&&_(o,e),o},none:function(){return!this.any.apply(this,arguments)}}),o(oe,!0,!0,{all:oe.prototype.every,any:oe.prototype.some,insert:oe.prototype.add}),o(re,!1,!0,{map:function(t,e){var n,r,o={};for(n in t)p(t,n)&&(r=t[n],o[n]=q(r,e,t,[n,r,t]));return o},reduce:function(t){var e=re.keys(w(t)).map(function(e){return t[e]});return e.reduce.apply(e,d(arguments,null,1))},each:function(t,e){return c(e),_(t,e),t},size:function(t){return re.keys(w(t)).length}});var Je="any all none count find findAll isEmpty".split(" "),qe="sum average min max least most".split(" "),Ke=["map","reduce","size"],Ze=Je.concat(qe).concat(Ke);!function(){function t(){var t=arguments;return 0<t.length&&!Me(t[0])}var e=oe.prototype.map;i(oe,!0,t,"every,all,some,filter,any,none,find,findIndex",function(t,e){var n=oe.prototype[e];t[e]=function(t){var e=J(t);return n.call(this,function(t,n){return e(t,n,this)})}}),o(oe,!0,t,{map:function(t){return e.call(this,function(e,n){return q(e,t,this,[e,n,this])})}})}(),function(){oe[je]="A\xc1\xc0\xc2\xc3\u0104BC\u0106\u010c\xc7D\u010e\xd0E\xc9\xc8\u011a\xca\xcb\u0118FG\u011eH\u0131I\xcd\xcc\u0130\xce\xcfJKL\u0141MN\u0143\u0147\xd1O\xd3\xd2\xd4PQR\u0158S\u015a\u0160\u015eT\u0164U\xda\xd9\u016e\xdb\xdcVWXY\xddZ\u0179\u017b\u017d\xde\xc6\u0152\xd8\xd5\xc5\xc4\xd6".split("").map(function(t){return t+t.toLowerCase()}).join("");var t={};K("A\xc1\xc0\xc2\xc3\xc4 C\xc7 E\xc9\xc8\xca\xcb I\xcd\xcc\u0130\xce\xcf O\xd3\xd2\xd4\xd5\xd6 S\xdf U\xda\xd9\xdb\xdc".split(" "),function(e){var n=e.charAt(0);K(e.slice(1).split(""),function(e){t[e]=n,t[e.toLowerCase()]=n.toLowerCase()})}),oe[Ve]=!0,oe[We]=!0,oe[Ge]=t}(),ut(Je),ut(qe,!0),N(Ke,S),oe.AlphanumericSort=at;var Xe,Qe,tn,en,nn,rn="ampm hour minute second ampm utc offset_sign offset_hours offset_minutes ampm".split(" "),on="({t})?\\s*(\\d{1,2}(?:[,.]\\d+)?)(?:{h}([0-5]\\d(?:[,.]\\d+)?)?{m}(?::?([0-5]\\d(?:[,.]\\d+)?){s})?\\s*(?:({t})|(Z)|(?:([+-])(\\d{2,2})(?::?(\\d{2,2}))?)?)?|\\s*({t}))",an={},sn=[],un={},dn={yyyy:function(t){return I(t,"FullYear")},yy:function(t){return I(t,"FullYear")%100},ord:function(t){return(t=I(t,"Date"))+B(t)},tz:function(t){return t.getUTCOffset()},isotz:function(t){return t.getUTCOffset(!0)},Z:function(t){return t.getUTCOffset()},ZZ:function(t){return t.getUTCOffset().replace(/(\d{2})$/,":$1")}},ln=[{name:"year",method:"FullYear",k:!0,b:function(t){return 864e5*(365+(t?t.isLeapYear()?1:0:.25))}},{name:"month",error:.919,method:"Month",k:!0,b:function(t,e){var n,r=30.4375;return t&&(n=t.daysInMonth(),e<=n.days()&&(r=n)),864e5*r}},{name:"week",method:"ISOWeek",b:t(6048e5)},{name:"day",error:.958,method:"Date",k:!0,b:t(864e5)},{name:"hour",method:"Hours",b:t(36e5)},{name:"minute",method:"Minutes",b:t(6e4)},{name:"second",method:"Seconds",b:t(1e3)},{name:"millisecond",method:"Milliseconds",b:t(1)}],cn={};dt.prototype={getMonth:function(t){return be(t)?t-1:this.months.indexOf(t)%12},getWeekday:function(t){return this.weekdays.indexOf(t)%7},addFormat:function(t,e,n,r,o){var i,a=n||[],s=this;t=t.replace(/\s+/g,"[,. ]*"),t=t.replace(/\{([^,]+?)\}/g,function(t,e){var r,o,i,u=e.match(/\?$/);i=e.match(/^(\d+)\??$/);var d=e.match(/(\d)(?:-(\d))?/),l=e.replace(/[^a-z]+$/,"");return i?r=s.tokens[i[1]]:s[l]?r=s[l]:s[l+"s"]&&(r=s[l+"s"],d&&(o=[],r.forEach(function(t,e){var n=e%(s.units?8:r.length);n>=d[1]&&n<=(d[2]||d[1])&&o.push(t)}),r=o),r=_t(r)),i?i="(?:"+r+")":(n||a.push(l),i="("+r+")"),u&&(i+="?"),i}),e?(e=Yt(s,o),o=["t","[\\s\\u3000]"].concat(s.timeMarker),i=t.match(/\\d\{\d,\d\}\)+\??$/),gt(s,"(?:"+e+")[,\\s\\u3000]+?"+t,rn.concat(a),r),gt(s,t+"(?:[,\\s]*(?:"+o.join("|")+(i?"+":"*")+")"+e+")?",a.concat(rn),r)):gt(s,t,a,r)}},o(ae,!1,!0,{create:function(){return Nt(arguments)},past:function(){return Nt(arguments,-1)},future:function(){return Nt(arguments,1)},addLocale:function(t,e){return mt(t,e)},setLocale:function(t){var e=pt(t,!1);return Qe=e,t&&t!=e.code&&(e.code=t),e},getLocale:function(t){return t?pt(t,!1):Qe},addFormat:function(t,e,n){gt(pt(n),t,e)}}),o(ae,!0,!0,{set:function(){var t=bt(arguments);return Ot(this,t[0],t[1])},setWeekday:function(t){if(!h(t))return x(this,"Date",I(this,"Date")+t-I(this,"Day"))},setISOWeek:function(t){var e=I(this,"Day")||7;if(!h(t))return this.set({month:0,date:4}),this.set({weekday:1}),1<t&&this.addWeeks(t-1),1!==e&&this.advance({days:e-1}),this.getTime()},getISOWeek:function(){var t;t=this.clone();var e=I(t,"Day")||7;return t.addDays(4-e).reset(),1+Le(t.daysSince(t.clone().beginningOfYear())/7)},beginningOfISOWeek:function(){var t=this.getDay();return 0===t?t=-6:1!==t&&(t=1),this.setWeekday(t),this.reset()},endOfISOWeek:function(){return 0!==this.getDay()&&this.setWeekday(7),this.endOfDay()},getUTCOffset:function(t){var e=this._utc?0:this.getTimezoneOffset(),n=!0===t?":":"";return!e&&t?"Z":D(Le(-e/60),2,!0)+n+D(De(e%60),2)},utc:function(t){return u(this,"_utc",!0===t||0===arguments.length),this},isUTC:function(){return!!this._utc||0===this.getTimezoneOffset()},advance:function(){var t=bt(arguments,!0);return Ot(this,t[0],t[1],1)},rewind:function(){var t=bt(arguments,!0);return Ot(this,t[0],t[1],-1)},isValid:function(){return!isNaN(this.getTime())},isAfter:function(t,e){return this.getTime()>ae.create(t).getTime()-(e||0)},isBefore:function(t,e){return this.getTime()<ae.create(t).getTime()+(e||0)},isBetween:function(t,e,n){var r=this.getTime();t=ae.create(t).getTime();var o=ae.create(e).getTime();return e=xe(t,o),t=Pe(t,o),n=n||0,e-n<r&&t+n>r},isLeapYear:function(){var t=I(this,"FullYear");return 0==t%4&&0!=t%100||0==t%400},daysInMonth:function(){return 32-I(new ae(I(this,"FullYear"),I(this,"Month"),32),"Date")},format:function(t,e){return Pt(this,t,!1,e)},relative:function(t,e){return we(t)&&(e=t,t=null),Pt(this,t,!0,e)},is:function(t,e,n){var r,o;if(this.isValid()){if(we(t))switch(t=t.trim().toLowerCase(),o=this.clone().utc(n),!0){case"future"===t:return this.getTime()>yt().getTime();case"past"===t:return this.getTime()<yt().getTime();case"weekday"===t:return 0<I(o,"Day")&&6>I(o,"Day");case"weekend"===t:return 0===I(o,"Day")||6===I(o,"Day");case-1<(r=Xe.weekdays.indexOf(t)%7):return I(o,"Day")===r;case-1<(r=Xe.months.indexOf(t)%12):return I(o,"Month")===r}return $t(this,t,null,e,n)}},reset:function(t){var e,n={};return t=t||"hours","date"===t&&(t="days"),e=ln.some(function(e){return t===e.name||t===e.name+"s"}),n[t]=t.match(/^days?/)?1:0,e?this.set(n,!0):this},clone:function(){var t=new ae(this.getTime());return t.utc(!!this._utc),t}}),o(ae,!0,!0,{iso:function(){return this.toISOString()},
getWeekday:ae.prototype.getDay,getUTCWeekday:ae.prototype.getUTCDay}),o(ue,!0,!0,{duration:function(t){return t=pt(t),lt(t,Dt(this),"duration")}}),Xe=Qe=ae.addLocale("en",{plural:!0,timeMarker:"at",ampm:"am,pm",months:"January,February,March,April,May,June,July,August,September,October,November,December",weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday",units:"millisecond:|s,second:|s,minute:|s,hour:|s,day:|s,week:|s,month:|s,year:|s",numbers:"one,two,three,four,five,six,seven,eight,nine,ten",articles:"a,an,the",tokens:"the,st|nd|rd|th,of","short":"{Month} {d}, {yyyy}","long":"{Month} {d}, {yyyy} {h}:{mm}{tt}",full:"{Weekday} {Month} {d}, {yyyy} {h}:{mm}:{ss}{tt}",past:"{num} {unit} {sign}",future:"{num} {unit} {sign}",duration:"{num} {unit}",modifiers:[{name:"sign",src:"ago|before",value:-1},{name:"sign",src:"from now|after|from|in|later",value:1},{name:"edge",src:"last day",value:-2},{name:"edge",src:"end",value:-1},{name:"edge",src:"first day|beginning",value:1},{name:"shift",src:"last",value:-1},{name:"shift",src:"the|this",value:0},{name:"shift",src:"next",value:1}],dateParse:["{month} {year}","{shift} {unit=5-7}","{0?} {date}{1}","{0?} {edge} of {shift?} {unit=4-7?}{month?}{year?}"],timeParse:"{num} {unit} {sign};{sign} {num} {unit};{0} {num}{1} {day} of {month} {year?};{weekday?} {month} {date}{1?} {year?};{date} {month} {year};{date} {month};{shift} {weekday};{shift} week {weekday};{weekday} {2?} {shift} week;{num} {unit=4-5} {sign} {day};{0?} {date}{1} of {month};{0?}{month?} {date?}{1?} of {shift} {unit=6-7}".split(";")}),nn=ln.concat().reverse(),en=ln.concat(),en.splice(2,1),i(ae,!0,!0,ln,function(t,e,n){function r(t){t/=u;var n=t%1,r=e.error||.999;return n&&De(n%1)>r&&(t=Ie(t)),0>t?Te(t):Le(t)}var o,i,a=e.name,s=vt(a),u=e.b();e.j="add"+s+"s",o=function(t,e){return r(this.getTime()-ae.create(t,e).getTime())},i=function(t,e){return r(ae.create(t,e).getTime()-this.getTime())},t[a+"sAgo"]=i,t[a+"sUntil"]=i,t[a+"sSince"]=o,t[a+"sFromNow"]=o,t[e.j]=function(t,e){var n={};return n[a]=t,this.advance(n,e)},Rt(e,u),3>n&&["Last","This","Next"].forEach(function(e){t["is"+e+s]=function(){return $t(this,e+" "+a,"en")}}),4>n&&(t["beginningOf"+s]=function(){var t={};switch(a){case"year":t.year=I(this,"FullYear");break;case"month":t.month=I(this,"Month");break;case"day":t.day=I(this,"Date");break;case"week":t.weekday=0}return this.set(t,!0)},t["endOf"+s]=function(){var t={hours:23,minutes:59,seconds:59,milliseconds:999};switch(a){case"year":t.month=11,t.day=31;break;case"month":t.day=this.daysInMonth();break;case"week":t.weekday=6}return this.set(t,!0)})}),Xe.addFormat("([+-])?(\\d{4,4})[-.]?{full_month}[-.]?(\\d{1,2})?",!0,["year_sign","year","month","date"],!1,!0),Xe.addFormat("(\\d{1,2})[-.\\/]{full_month}(?:[-.\\/](\\d{2,4}))?",!0,["date","month","year"],!0),Xe.addFormat("{full_month}[-.](\\d{4,4})",!1,["month","year"]),Xe.addFormat("\\/Date\\((\\d+(?:[+-]\\d{4,4})?)\\)\\/",!1,["timestamp"]),Xe.addFormat(Yt(Xe),!1,rn),sn=Xe.g.slice(0,7).reverse(),Xe.g=Xe.g.slice(7).concat(sn),It("f",function(t){return I(t,"Milliseconds")},!0),It("s",function(t){return I(t,"Seconds")}),It("m",function(t){return I(t,"Minutes")}),It("h",function(t){return I(t,"Hours")%12||12}),It("H",function(t){return I(t,"Hours")}),It("d",function(t){return I(t,"Date")}),It("M",function(t){return I(t,"Month")+1}),function(){function t(t,e){var n=I(t,"Hours");return pt(e).ampm[Le(n/12)]||""}Lt("t",t,1),Lt("tt",t),Lt("T",t,1,1),Lt("TT",t,null,2)}(),function(){function t(t,e){var n=I(t,"Day");return pt(e).weekdays[n]}Lt("dow",t,3),Lt("Dow",t,3,1),Lt("weekday",t),Lt("Weekday",t,null,1)}(),Tt("mon",0,3),Tt("month",0),Tt("month2",1),Tt("month3",2),dn.ms=dn.f,dn.milliseconds=dn.f,dn.seconds=dn.s,dn.minutes=dn.m,dn.hours=dn.h,dn["24hr"]=dn.H,dn["12hr"]=dn.h,dn.date=dn.d,dn.day=dn.d,dn.year=dn.yyyy,i(ae,!0,!0,"short,long,full",function(t,e){t[e]=function(t){return Pt(this,e,!1,t)}}),"\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d\u5341\u767e\u5343\u4e07".split("").forEach(function(t,e){9<e&&(e=Be(10,e-9)),an[t]=e}),b(an,Ee),tn=ie("([\u671f\u9031\u5468])?([\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d\u5341\u767e\u5343\u4e07"+Re+"]+)(?!\u6628)","g"),function(){var t=Xe.weekdays.slice(0,7),e=Xe.months.slice(0,12);i(ae,!0,!0,"today yesterday tomorrow weekday weekend future past".split(" ").concat(t).concat(e),function(t,e){t["is"+vt(e)]=function(t){return this.is(e,0,t)}})}(),ae.utc||(ae.utc={create:function(){return Nt(arguments,0,!0)},past:function(){return Nt(arguments,-1,!0)},future:function(){return Nt(arguments,1,!0)}}),o(ae,!1,!0,{RFC1123:"{Dow}, {dd} {Mon} {yyyy} {HH}:{mm}:{ss} {tz}",RFC1036:"{Weekday}, {dd}-{Mon}-{yy} {HH}:{mm}:{ss} {tz}",ISO8601_DATE:"{yyyy}-{MM}-{dd}",ISO8601_DATETIME:"{yyyy}-{MM}-{dd}T{HH}:{mm}:{ss}.{fff}{isotz}"}),Et.prototype.toString=function(){return this.isValid()?this.start+".."+this.end:"Invalid Range"},o(Et,!0,!0,{isValid:function(){return Ut(this.start)&&Ut(this.end)&&typeof this.start==typeof this.end},span:function(){return this.isValid()?De((we(this.end)?this.end.charCodeAt(0):this.end)-(we(this.start)?this.start.charCodeAt(0):this.start))+1:NaN},contains:function(t){return null!=t&&(t.start&&t.end?t.start>=this.start&&t.start<=this.end&&t.end>=this.start&&t.end<=this.end:t>=this.start&&t<=this.end)},every:function(t,e){var n,r=this.start,o=this.end,i=o<r,a=r,s=0,u=[];for(Me(t)&&(e=t,t=null),t=t||1,be(r)?n=Wt:we(r)?n=zt:ke(r)&&(n=t,be(n)?t=n:(r=n.toLowerCase().match(/^(\d+)?\s?(\w+?)s?$/i),n=parseInt(r[1])||1,r=r[2].slice(0,1).toUpperCase()+r[2].slice(1),r.match(/hour|minute|second/i)?r+="s":"Year"===r?r="FullYear":"Day"===r&&(r="Date"),t=[n,r]),n=jt),i&&0<t&&(t*=-1);i?a>=o:a<=o;)u.push(a),e&&e(a,s),a=n(a,t),s++;return u},union:function(t){return new Et(this.start<t.start?this.start:t.start,this.end>t.end?this.end:t.end)},intersect:function(t){return t.start>this.end||t.end<this.start?new Et(NaN,NaN):new Et(this.start>t.start?this.start:t.start,this.end<t.end?this.end:t.end)},clone:function(){return new Et(this.start,this.end)},clamp:function(t){var e=this.start,n=this.end,r=n<e?n:e,e=e>n?e:n;return Ht(t<r?r:t>e?e:t)}}),[ue,se,ae].forEach(function(t){o(t,!1,!0,{range:function(e,n){return t.create&&(e=t.create(e),n=t.create(n)),new Et(e,n)}})}),o(ue,!0,!0,{upto:function(t,e,n){return ue.range(this,t).every(n,e)},clamp:function(t,e){return new Et(t,e).clamp(this)},cap:function(t){return this.clamp(void 0,t)}}),o(ue,!0,!0,{downto:ue.prototype.upto}),o(oe,!1,function(t){return t instanceof Et},{create:function(t){return t.every()}}),o(Function,!0,!0,{lazy:function(t,e,n){function r(){return d.length<n-(l&&e?1:0)&&d.push([this,arguments]),l||(l=!0,e?o():Gt(r,i,o)),s}var o,i,a,s,u=this,d=[],l=!1;return t=t||1,n=n||Infinity,i=Te(t),a=Ie(i/t)||1,o=function(){var t,e=d.length;if(0!=e){for(t=Pe(e-a,0);e>t;)s=Function.prototype.apply.apply(u,d.shift()),e--;Gt(r,i,function(){l=!1,o()})}},r},throttle:function(t){return this.lazy(t,!0,1)},debounce:function(t){function e(){e.cancel(),Gt(e,t,n,this,arguments)}var n=this;return e},delay:function(t){return Gt(this,t,this,this,d(arguments,null,1)),this},every:function(t){function e(){n.apply(n,r),Gt(n,t,e)}var n=this,r=arguments,r=1<r.length?d(r,null,1):[];return Gt(n,t,e),n},cancel:function(){var t,e=this.timers;if(Se(e))for(;t=e.shift();)clearTimeout(t);return this.n=!0,this},after:function(t){var e=this,n=0,r=[];if(be(t)){if(0===t)return e.call(),e}else t=1;return function(){var o;if(r.push(d(arguments)),++n==t)return o=e.call(this,r),n=0,r=[],o}},once:function(){return this.throttle(Infinity,!0)},fill:function(){var t=this,e=d(arguments);return function(){var n=d(arguments);return e.forEach(function(t,e){(null!=t||e>=n.length)&&n.splice(e,0,t)}),t.apply(this,n)}}}),o(ue,!1,!0,{random:function(t,e){var n,r;return 1==arguments.length&&(e=t,t=0),n=xe(t||0,h(e)?1:e),r=Pe(t||0,h(e)?1:e)+1,Le(de.random()*(r-n)+n)}}),o(ue,!0,!0,{log:function(t){return de.log(this)/(t?de.log(t):1)},abbr:function(t){return Vt(this,t,"kmbt",0,4)},metric:function(t,e){return Vt(this,t,"n\u03bcm kMGTPE",4,h(e)?1:e)},bytes:function(t,e){return Vt(this,t,"kMGTPE",0,h(e)?4:e,!0)+"B"},isInteger:function(){return 0==this%1},isOdd:function(){return!isNaN(this)&&!this.isMultipleOf(2)},isEven:function(){return this.isMultipleOf(2)},isMultipleOf:function(t){return 0==this%t},format:function(t,e,n){var r,o,i,a="";for(h(e)&&(e=","),h(n)&&(n="."),r=(be(t)?k(this,t||0).toFixed(Pe(t,0)):this.toString()).replace(/^-/,"").split("."),o=r[0],i=r[1],r=o.length;0<r;r-=3)r<o.length&&(a=e+a),a=o.slice(Pe(0,r-3),r)+a;return i&&(a+=n+M("0",(t||0)-i.length)+i),(0>this?"-":"")+a},hex:function(t){return this.pad(t||1,!1,16)},times:function(t){if(t)for(var e=0;e<this;e++)t.call(this,e);return this.toNumber()},chr:function(){return se.fromCharCode(this)},pad:function(t,e,n){return D(this,t,e,n)},ordinalize:function(){var t=De(this),t=parseInt(t.toString().slice(-2));return this+B(t)},toNumber:function(){return parseFloat(this,10)}}),function(){function t(t){return function(e){return e?k(this,e,t):t(this)}}o(ue,!0,!0,{ceil:t(Te),round:t(Ie),floor:t(Le)}),i(ue,!0,!0,"abs,pow,sin,asin,cos,acos,tan,atan,exp,pow,sqrt",function(t,e){t[e]=function(t,n){return de[e](this,t,n)}})}();var fn=["isObject","isNaN"],hn="keys values select reject each merge clone equal watch tap has toQueryString".split(" ");o(re,!1,!0,{watch:function(t,e,n){if(he){var r=t[e];re.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){return r},set:function(o){r=n.call(t,e,r,o)}})}}}),o(re,!1,function(){return 1<arguments.length},{keys:function(t,e){var n=re.keys(t);return n.forEach(function(n){e.call(t,n,t[n])}),n}}),o(re,!1,!0,{isObject:function(t){return v(t)},isNaN:function(t){return be(t)&&t.valueOf()!==t.valueOf()},equal:function(t,e){return $(t,e)},extended:function(t){return new S(t)},merge:function(t,e,n,r){var o,i,a,s,u,d,l;if(t&&"string"!=typeof e)for(o in e)if(p(e,o)&&t){if(s=e[o],u=t[o],d=f(u),i=m(s),a=m(u),l=d&&!1===r?u:s,d&&Me(r)&&(l=r.call(e,o,u,s)),n&&(i||a))if(ke(s))l=new ae(s.getTime());else{if(!Ce(s)){a||(t[o]=oe.isArray(s)?[]:{}),re.merge(t[o],s,n,r);continue}l=new ie(s.source,T(s))}t[o]=l}return t},values:function(t,e){var n=[];return _(t,function(r,o){n.push(o),e&&e.call(t,o)}),n},clone:function(t,e){var n;if(!m(t))return t;if(n=ce.call(t),ke(t,n)&&t.clone)return t.clone();if(ke(t,n)||Ce(t,n))return new t.constructor(t);if(t instanceof S)n=new S;else if(Se(t,n))n=[];else{if(!v(t,n))throw new TypeError("Clone must be a basic data type.");n={}}return re.merge(n,t,e)},fromQueryString:function(t,e){var n=re.extended();return t=t&&t.toString?t.toString():"",t.replace(/^.*?\?/,"").split("&").forEach(function(t){t=t.split("="),2===t.length&&Jt(n,t[0],decodeURIComponent(t[1]),e)}),n},toQueryString:function(t,e){return qt(e,t)},tap:function(t,e){var n=e;return Me(e)||(n=function(){e&&t[e]()}),n.call(t,t),t},has:function(t,e){return p(t,e)},select:function(t){return Zt(t,arguments,!0)},reject:function(t){return Zt(t,arguments,!1)}}),i(re,!1,!0,_e,function(t,e){var n="is"+e;fn.push(n),t[n]=ge[e]}),o(re,!1,function(){return 0===arguments.length},{extend:function(){var t=fn.concat(hn);void 0!==Ze&&(t=t.concat(Ze)),N(t,re)}}),N(hn,S),o(ie,!1,!0,{escape:function(t){return L(t)}}),o(ie,!0,!0,{getFlags:function(){return T(this)},setFlags:function(t){return ie(this.source,t)},addFlag:function(t){return this.setFlags(T(this,t))},removeFlag:function(t){return this.setFlags(T(this).replace(t,""))}});var pn,mn;o(se,!0,!1,{repeat:function(t){return t=Xt(t),M(this,t)}}),o(se,!0,function(t){return Ce(t)||2<arguments.length},{startsWith:function(t){var e=arguments,n=e[1],e=e[2],r=this;return n&&(r=r.slice(n)),h(e)&&(e=!0),n=Ce(t)?t.source.replace("^",""):L(t),ie("^"+n,e?"":"i").test(r)},endsWith:function(t){var e=arguments,n=e[1],e=e[2],r=this;return f(n)&&(r=r.slice(0,n)),h(e)&&(e=!0),n=Ce(t)?t.source.replace("$",""):L(t),ie(n+"$",e?"":"i").test(r)}}),o(se,!0,!0,{escapeRegExp:function(){return L(this)},escapeURL:function(t){return t?encodeURIComponent(this):encodeURI(this)},unescapeURL:function(t){return t?decodeURI(this):decodeURIComponent(this)},escapeHTML:function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/\//g,"&#x2f;")},unescapeHTML:function(){return this.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/&#x2f;/g,"/").replace(/&amp;/g,"&")},encodeBase64:function(){return pn(unescape(encodeURIComponent(this)))},decodeBase64:function(){return decodeURIComponent(escape(mn(this)))},each:function(t,e){var n,r,o;if(Me(t)?(e=t,t=/[\s\S]/g):t?we(t)?t=ie(L(t),"gi"):Ce(t)&&(t=ie(t.source,T(t,"g"))):t=/[\s\S]/g,n=this.match(t)||[],e)for(r=0,o=n.length;r<o;r++)n[r]=e.call(this,n[r],r,n)||n[r];return n},shift:function(t){var e="";return t=t||0,this.codes(function(n){e+=se.fromCharCode(n+t)}),e},codes:function(t){var e,n,r=[];for(e=0,n=this.length;e<n;e++){var o=this.charCodeAt(e);r.push(o),t&&t.call(this,o,e)}return r},chars:function(t){return this.each(t)},words:function(t){return this.trim().each(/\S+/g,t)},lines:function(t){return this.trim().each(/^.*$/gm,t)},paragraphs:function(t){var e=this.trim().split(/[\r\n]{2,}/);return e=e.map(function(e){if(t)var n=t.call(e);return n?n:e})},isBlank:function(){return 0===this.trim().length},has:function(t){return-1!==this.search(Ce(t)?t:L(t))},add:function(t,e){return e=h(e)?this.length:e,this.slice(0,e)+t+this.slice(e)},remove:function(t){return this.replace(t,"")},reverse:function(){return this.split("").reverse().join("")},compact:function(){return this.trim().replace(/([\r\n\s\u3000])+/g,function(t,e){return"\u3000"===e?e:" "})},at:function(){return O(this,arguments,!0)},from:function(t){return this.slice(ne(this,t,!0))},to:function(t){return h(t)&&(t=this.length),this.slice(0,ne(this,t))},dasherize:function(){return this.underscore().replace(/_/g,"-")},underscore:function(){return this.replace(/[-\s]+/g,"_").replace(se.Inflector&&se.Inflector.acronymRegExp,function(t,e){return(0<e?"_":"")+t.toLowerCase()}).replace(/([A-Z\d]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").toLowerCase()},camelize:function(t){return this.underscore().replace(/(^|_)([^_]+)/g,function(e,n,r,o){return e=(e=se.Inflector)&&e.acronyms[r],e=we(e)?e:void 0,o=!1!==t||0<o,e?o?e:e.toLowerCase():o?r.capitalize():r})},spacify:function(){return this.underscore().replace(/_/g," ")},stripTags:function(){var t=this;return l(0<arguments.length?arguments:[""],function(e){t=t.replace(ie("</?"+L(e)+"[^<>]*>","gi"),"")}),t},removeTags:function(){var t=this;return l(0<arguments.length?arguments:["\\S+"],function(e){e=ie("<("+e+")[^<>]*(?:\\/>|>.*?<\\/\\1>)","gi"),t=t.replace(e,"")}),t},truncate:function(t,e,n){return te(this,t,e,n)},truncateOnWord:function(t,e,n){return te(this,t,e,n,!0)},pad:function(t,e){var n,r;return t=Xt(t),n=Pe(0,t-this.length)/2,r=Le(n),n=Te(n),Qt(r,e)+this+Qt(n,e)},padLeft:function(t,e){return t=Xt(t),Qt(Pe(0,t-this.length),e)+this},padRight:function(t,e){return t=Xt(t),this+Qt(Pe(0,t-this.length),e)},first:function(t){return h(t)&&(t=1),this.substr(0,t)},last:function(t){return h(t)&&(t=1),this.substr(0>this.length-t?0:this.length-t)},toNumber:function(t){return A(this,t)},capitalize:function(t){var e;return this.toLowerCase().replace(t?/[^']/g:/^\S/,function(t){var n,r=t.toUpperCase();return n=e?t:r,e=r!==t,n})},assign:function(){var t={};return l(arguments,function(e,n){m(e)?b(t,e):t[n+1]=e}),this.replace(/\{([^{]+?)\}/g,function(e,n){return p(t,n)?t[n]:e})}}),o(se,!0,!0,{insert:se.prototype.add}),function(t){if(le.btoa)pn=le.btoa,mn=le.atob;else{var e=/[^A-Za-z0-9\+\/\=]/g;pn=function(e){var n,r,o,i,a,s,u="",d=0;do n=e.charCodeAt(d++),r=e.charCodeAt(d++),o=e.charCodeAt(d++),i=n>>2,n=(3&n)<<4|r>>4,a=(15&r)<<2|o>>6,s=63&o,isNaN(r)?a=s=64:isNaN(o)&&(s=64),u=u+t.charAt(i)+t.charAt(n)+t.charAt(a)+t.charAt(s);while(d<e.length);return u},mn=function(n){var r,o,i,a,s,u="",d=0;if(n.match(e))throw Error("String contains invalid base64 characters");n=n.replace(/[^A-Za-z0-9\+\/\=]/g,"");do r=t.indexOf(n.charAt(d++)),o=t.indexOf(n.charAt(d++)),a=t.indexOf(n.charAt(d++)),s=t.indexOf(n.charAt(d++)),r=r<<2|o>>4,o=(15&o)<<4|a>>2,i=(3&a)<<6|s,u+=se.fromCharCode(r),64!=a&&(u+=se.fromCharCode(o)),64!=s&&(u+=se.fromCharCode(i));while(d<n.length);return u}}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=")}(),angular.module("truncate",[]).filter("characters",function(){return function(t,e,n){if(isNaN(e))return t;if(e<=0)return"";if(t&&t.length>e){if(t=t.substring(0,e),n)for(;" "===t.charAt(t.length-1);)t=t.substr(0,t.length-1);else{var r=t.lastIndexOf(" ");r!==-1&&(t=t.substr(0,r))}return t+"\u2026"}return t}}).filter("splitcharacters",function(){return function(t,e){if(isNaN(e))return t;if(e<=0)return"";if(t&&t.length>e){return t.substring(0,e/2)+"..."+t.substring(t.length-e/2,t.length)}return t}}).filter("words",function(){return function(t,e){if(isNaN(e))return t;if(e<=0)return"";if(t){var n=t.split(/\s+/);n.length>e&&(t=n.slice(0,e).join(" ")+"\u2026")}return t}}),function(){var t={};angular.forEach(["clipPath","colorProfile","src","cursor","fill","filter","marker","markerStart","markerMid","markerEnd","mask","stroke"],function(e){t[e]=["$rootScope","$location","$interpolate","$sniffer","urlResolve","computeSVGAttrValue","svgAttrExpressions",function(t,n,r,o,i,a,s){return{restrict:"A",link:function(r,i,u){function d(){var t=a(l);t&&u[e]!==t&&u.$set(e,t)}var l;s.SVG_ELEMENT.test(i[0]&&i[0].toString())&&n.$$html5&&o.history&&(l=u[e],u.$observe(e,d),t.$on("$locationChangeSuccess",d))}}}]}),angular.module("ngSVGAttributes",[]).factory("urlResolve",[function(){var t=document.createElement("a");return function(e){return t.setAttribute("href",e),t}}]).value("svgAttrExpressions",{FUNC_URI:/^url\((.*)\)$/,SVG_ELEMENT:/SVG[a-zA-Z]*Element/,HASH_PART:/#.*/}).factory("computeSVGAttrValue",["$location","$sniffer","svgAttrExpressions","urlResolve",function(t,e,n,r){return function(e){var o,i;return(o=n.FUNC_URI.exec(e))&&(i=0===o[1].indexOf("#")?t.absUrl().replace(n.HASH_PART,"")+o[1]:r(o[1])),i?"url("+i+")":null}}]).directive(t)}(),function(t,e){"use strict";function n(){function t(t,e){if(t)return r(t)?t.indexOf(e)>=0:t.hasOwnProperty(e)}return["$animate",function(e){return{restrict:"AE",transclude:"element",terminal:!0,require:"^^ngMessages",link:function(n,o,i,a,s){var u,d=o[0],l=i.ngMessage||i.when,c=i.ngMessageExp||i.whenExp,f=function(t){u=t?r(t)?t:t.split(/[\s,]+/):null,a.reRender()};c?(f(n.$eval(c)),n.$watchCollection(c,f)):f(l);var h,p;a.register(d,p={test:function(e){return t(u,e)},attach:function(){h||s(n,function(t){e.enter(t,null,o),h=t;var n=h.$$attachId=a.getAttachId();h.on("$destroy",function(){h&&h.$$attachId===n&&(a.deregister(d),p.detach())})})},detach:function(){if(h){var t=h;h=null,e.leave(t)}}})}}}]}var r=e.isArray,o=e.forEach,i=e.isString,a=e.element;e.module("ngMessages",[]).directive("ngMessages",["$animate",function(t){function e(t,e){return i(e)&&0===e.length||n(t.$eval(e))}function n(t){return i(t)?t.length:!!t}var r="ng-active",a="ng-inactive";return{require:"ngMessages",restrict:"AE",controller:["$element","$scope","$attrs",function(i,s,u){function d(t,e){for(var n=e,r=[];n&&n!==t;){var o=n.$$ngMessageNode;if(o&&o.length)return v[o];n.childNodes.length&&r.indexOf(n)==-1?(r.push(n),n=n.childNodes[n.childNodes.length-1]):n.previousSibling?n=n.previousSibling:(n=n.parentNode,r.push(n))}}function l(t,e,n){var r=v[n];if(f.head){var o=d(t,e);o?(r.next=o.next,o.next=r):(r.next=f.head,f.head=r)}else f.head=r}function c(t,e,n){var r=v[n],o=d(t,e);o?o.next=r.next:f.head=r.next}var f=this,h=0,p=0;this.getAttachId=function(){return p++};var m,g,v=this.messages={};this.render=function(d){d=d||{},m=!1,g=d;for(var l=e(s,u.ngMessagesMultiple)||e(s,u.multiple),c=[],h={},p=f.head,v=!1,_=0;null!=p;){_++;var y=p.message,b=!1;v||o(d,function(t,e){if(!b&&n(t)&&y.test(e)){if(h[e])return;h[e]=!0,b=!0,y.attach()}}),b?v=!l:c.push(y),p=p.next}o(c,function(t){t.detach()}),c.length!==_?t.setClass(i,r,a):t.setClass(i,a,r)},s.$watchCollection(u.ngMessages||u["for"],f.render),i.on("$destroy",function(){o(v,function(t){t.message.detach()})}),this.reRender=function(){m||(m=!0,s.$evalAsync(function(){m&&g&&f.render(g)}))},this.register=function(t,e){var n=h.toString();v[n]={message:e},l(i[0],t,n),t.$$ngMessageNode=n,h++,f.reRender()},this.deregister=function(t){var e=t.$$ngMessageNode;delete t.$$ngMessageNode,c(i[0],t,e),delete v[e],f.reRender()}}]}}]).directive("ngMessagesInclude",["$templateRequest","$document","$compile",function(t,e,n){return{restrict:"AE",require:"^^ngMessages",link:function(r,o,i){var s=i.ngMessagesInclude||i.src;t(s).then(function(t){n(t)(r,function(t){o.after(t);var n=a(e[0].createComment(" ngMessagesInclude: "+s+" "));o.after(n),o.remove()})})}}}]).directive("ngMessage",n("AE")).directive("ngMessageExp",n("A"))}(window,window.angular),function(){this.GiSafeStorage=function(){function t(t){this.unsafeStorage=t,this.inMemoryCache={}}return t.prototype.setItem=function(t,e){try{return this.unsafeStorage.setItem(t,e)}catch(n){return n,this.inMemoryCache[t]=e}},t.prototype.getItem=function(t){var e,n;try{n=null!=(e=this.unsafeStorage)?e.getItem(t):void 0}catch(t){t}return n?(delete this.inMemoryCache[t],n):this.inMemoryCache[t]||null},t.prototype.removeItem=function(t){var e;try{null!=(e=this.unsafeStorage)&&e.removeItem(t)}catch(t){t}return delete this.inMemoryCache[t]},t.prototype.clear=function(){var t;try{null!=(t=this.unsafeStorage)&&t.clear()}catch(t){t}return this.inMemoryCache={}},t}()}.call(this),function(){window.giLocalStorage||(window.giLocalStorage=new GiSafeStorage(window.localStorage)),window.angular&&(angular.module("giLocalStorage",[]),angular.module("giLocalStorage").factory("giLocalStorage",function(){return window.giLocalStorage}))}.call(this),function(){window.giSessionStorage||(window.giSessionStorage=new GiSafeStorage(window.sessionStorage)),window.angular&&(angular.module("giSessionStorage",[]),angular.module("giSessionStorage").factory("giSessionStorage",function(){return window.giSessionStorage}))}.call(this),function(){}.call(this),window.angular&&angular.module("giEvents",[]),function(){var t,e,n,r=[].slice;e=1e4,n=function(){function t(t,n){var r,o,i,a,s;this.window=t,this.document=n,this.myLocalStorage=new GiSafeStorage(window.localStorage),a=function(t){var e,n,r;if(r=t.match(/^event:([^\/]+)\/([^\/]+)\/([^\/]+)/))return r[0],e=r[1],n=r[2],r[3],[e,n]},s=function(t){return function(n){var r;return!!(r=i(n))&&(Date.now()-Number(r)<e||(t.myLocalStorage.removeItem(n),!1))}}(this),o=function(t){var e;if(e=a(t))return e[0]},i=function(t){var e;if(e=a(t))return e[1]},r=function(){var t,e;e=[];for(t in window.localStorage)e.push(s(t));return e},r(),$(this.window).bind("storage",function(){return function(t){var e,n;if(n=t.originalEvent,s(n.key)){e=n.newValue;try{e=JSON.parse(n.newValue)}catch(t){t}return $(document).trigger(o(n.key),e)}}}())}return t.prototype.trigger=function(t,e){return null==e&&(e=null),$(this.document).trigger(t,e),this},t.prototype.triggerAllWindows=function(t,e){var n;return null==e&&(e=null),this.trigger(t,e),n=Math.floor(2147483648*Math.random()),this.myLocalStorage.setItem("event:"+t+"/"+Date.now()+"/"+n,JSON.stringify(e)),this},t.prototype.on=function(t,e){return $(this.document).bind(t,function(){return function(t,n){var r,o;try{return e(n)}catch(t){return r=t,o=function(){throw r},setTimeout(o,1)}}}()),this},t}(),t=function(){function t(t,e){this.eventBus=t,this.rootScope=e}return t.prototype.on=function(t,e){return this.eventBus.on(t,function(t){return function(n){return t.rootScope.$evalAsync(function(){return e(n)})}}(this))},t.prototype.trigger=function(){var t,e;return t=1<=arguments.length?r.call(arguments,0):[],(e=this.eventBus).trigger.apply(e,t)},t.prototype.triggerAllWindows=function(){var t,e;return t=1<=arguments.length?r.call(arguments,0):[],(e=this.eventBus).triggerAllWindows.apply(e,t)},t}(),window.eventBus||(window.eventBus=new n(window,document)),window.angular&&angular.module("giEvents").factory("eventBus",["$rootScope",function(e){return new t(window.eventBus,e)}])}.call(this),angular.module("giIcons",[]),function(){angular.module("giIcons").directive("giIcon",function(){return{replace:!0,templateNamespace:"svg",templateUrl:function(t,e){return"icons/"+e.giIcon+".svg"}}})}.call(this),function(){var t;t=function(){function t(t){var e,n,r;this.data=t,n=this.data;for(e in n)r=n[e],this[e]=r}var e;return t.prototype.isActive=function(t){var n;return t=e(t),!!(null!=(n=this.data[t])?n.is_active:void 0)},t.prototype.isOfferActive=function(t,n,r){return t=e(t),n=e(n),r=e(r),null!=this.data[t]&&!(e(this.data[t].active_offers[n])!==r)},e=function(t){return t.toLowerCase().replace(/[^0-9a-z]/g,"")},t}(),this.visitorExperiences=new t(window.visitorExperiencesData||{}),window.angular&&angular.module("giExperiences",[]).factory("visitorExperiences",function(){return window.visitorExperiences})}.call(this),function(){var t;t=function(t,e){var n,r,o;return"string"==typeof t?objOrString:n=function(){var e;e=[];for(r in t)o=t[r],e.push(r+'="'+o+'"');return e}(),"<a "+n.join(" ")+">"+e+"</a>"},window.t=function(e,n){var r,o,i,a,s,u,d,l,c,f,h,p,m,g;if(!(g=window.localeStrings[e]))return"JS translation missing: "+e;for(f=g.match(/%{\w+}/g)||[],o=0,u=f.length;o<u;o++)l=f[o],s=g.match(/%{([^}]+)}/)[1],g=g.replace(l,n[s]);for(h=g.match(/\|{(\d+)_link}([^|]+)\|/g)||[],a=0,d=h.length;a<d;a++)l=h[a],p=g.match(/\|{(\d+)_link}([^|]+)\|/),c=p[0],i=p[1],r=p[2],g=g.replace(c,t(null!=(m=n.links)?m[i]:void 0,r));return g},window.angular&&(angular.module("giTranslation",[]).factory("t",["$sce",function(t){return window.t.getHtmlSafeTranslation=function(e,n){return t.trustAsHtml(window.t(e,n))},window.t}]),angular.module("giTranslation").directive("htmlTranslate",["$parse","$compile",function(t,e){return{restrict:"A",link:function(n,r,o){return n.$watch(function(){return o.htmlTranslate},function(){return r.html(t("'"+o.htmlTranslate+"'")(n)),e(r.contents())(n)},!0)}}}]))}.call(this),angular.module("giRemoting",[]),function(){angular.module("giRemoting",["giSiteMap"]).directive("giRemoteApp",["remoteApps","siteMap",function(t,e){return{link:function(n,r,o){var i,a,s;return i=n.$eval(o.giRemoteApp),s=e.cleanRelativePath(n.$eval(o.giRemoteManifest)),a=angular.element("<div ng-non-bindable><div class='"+i+"-container'></div></div>"),r.append(a),a.data("$injector",null),t.bootstrap(a.children(),i,s)}}}])}.call(this),function(){var t,e,n;e=function(){function t(t,e){this.rootScope=t,this.injector=e}return t.prototype.getService=function(t){return this.injector.get(t)},t.prototype.refresh=function(){return this.rootScope.$apply()},t}(),n=function(){function n(t,e,n,r,o,i){this.scriptLoader=t,this.stylesheetLoader=e,this.q=n,this.parentRootScope=r,this.http=o,this.location=i,this.appDeferred={},this.appRoot={}}return n.prototype.get=function(t){return this._appDeferred(t).promise.then(function(n){return function(){var r,o,i;return o=n.appRoot[t],i=o.scope(),r=o.injector(),new e(i,r)}}(this))},n.prototype.bootstrap=function(e,n,r){if(this.appRoot[n])return void console.log("The remote app '"+n+"' has already been bootstrapped");this.appRoot[n]=e,this.http.get(r).then(function(r){return function(o){var i,a,s,u,d;for(s=o.data,u=s.stylesheets||[],i=0,a=u.length;i<a;i++)d=u[i],r.stylesheetLoader.load(d);return r.scriptLoader.load(s.scripts||[]).then(function(){return r.http.get(s.templateUrl).then(function(o){var i,a,s,u;for(angular.module(n).value("$location",new t(r.parentRootScope,r.location)),u=["$locationChangeStart","$locationChangeSuccess"],a=0,s=u.length;a<s;a++)i=u[a],r.parentRootScope.$on(i,function(t,e,o){return r.appRoot[n].scope().$broadcast(i,e,o)});return e.append(o.data),angular.bootstrap(e,[n]),r._appDeferred(n).resolve()})})}}(this))},n.prototype._appDeferred=function(t){return this.appDeferred[t]||(this.appDeferred[t]=this.q.defer())},n.prototype._finishBootstrap=function(t){var e;return e=this.appRoot[t],angular.bootstrap(e,[t]),this._appDeferred(t).resolve()},n}(),angular.module("giRemoting").factory("remoteApps",["scriptLoader","stylesheetLoader","$q","$rootScope","$http","$location",function(t,e,r,o,i,a){return new n(t,e,r,o,i,a)}]),t=function(){function t(t,r){var o,i,a,s,u,d,l;for(i=function(e,n){var o;return o=r[n],e[n]=function(){var e,n;return arguments.length>0&&!t.$$phase?(e=null,n=arguments,t.$apply(function(){return function(){return e=o.apply(r,n)}}()),e):o.apply(r,arguments)}},o=function(t,e){var n;return n=r[e],t[e]=function(){return n.apply(r,arguments)}},a=0,u=n.length;a<u;a++)l=n[a],i(this,l);for(s=0,d=e.length;s<d;s++)l=e[s],o(this,l)}var e,n;return n=["path","search","hash","url","replace"],e=["absUrl","protocol","host","port"],t}()}.call(this),function(){angular.module("giRemoting").factory("scriptLoader",["$document","$q",function(t,e){var n;return n=function(n){var r,o;return r=e.defer(),o=t[0].createElement("script"),o.async=!0,o.type="text/javascript",o.readyState?o.onreadystatechange=function(){if("loaded"===o.readyState||"complete"===o.readyState)return o.onreadystatechange=null,r.resolve()}:o.onload=function(){return r.resolve()},o.src=n,t[0].getElementsByTagName("head")[0].appendChild(o),r.promise},{load:function(){var t,r;return r=arguments,1===arguments.length&&angular.isArray(arguments[0])&&(r=arguments[0]),t=$.makeArray(r).map(function(t){return n(t)}),e.all(t)}}}])}.call(this),function(){angular.module("giRemoting").factory("stylesheetLoader",["$document",function(t){return{load:function(e){var n;return document.createStyleSheet?document.createStyleSheet(e):(n=t[0].createElement("link"),n.type="text/css",n.rel="stylesheet",n.href=e,angular.element("head").append(n))}}}])}.call(this),angular.module("giDownloadRemoteClient",["giRemoting"]),function(){angular.module("giDownloadRemoteClient").directive("giDownloadRemoteClient",["remoteApps","$document","$compile",function(t,e,n){return{link:function(r,o,i){var a,s;return a="giDownload",s="/downloads/manifest",o.on("click",function(){var o,u,d;return o=i.giDownloadNamespace||"primary",u="giDownload-"+o,0===angular.element("#"+u).length&&(d=angular.element('<div id="'+u+'" gi-remote-app="\''+a+"'\" gi-remote-manifest=\"'"+s+"'\"></div>"),n(d)(r),angular.element(e[0].body).append(d)),t.get(a).then(function(t){var n,o;return n=i.giDownloadRemoteClient&&""!==i.giDownloadRemoteClient&&"gi-download-remote-client"!==i.giDownloadRemoteClient?[i.giDownloadRemoteClient]:"function"==typeof r.getDownloadAssetIds?r.getDownloadAssetIds():void 0,t.rootScope.assetIds=n,"function"==typeof(o=t.rootScope).showModal&&o.showModal(n),t.rootScope.selectedAgreementTypeOrId=i.giDownloadSelectedAgreement,t.rootScope.showAllOptions=i.giDownloadShowAllOptions,t.rootScope.downloadType=i.giDownloadType,"batch"===i.giDownloadType&&e.trigger("track.openBatchDownloadModal"),t.refresh()})})}}}])}.call(this),function(t,e){"use strict";function n(t){for(var e=t.key.replace(/[\n\r]/g,""),n=$(".dropdown-container ul").children(),r=0;r<n.length;r++)$(n[r]).text().replace(/[\n\r]/g,"")==e?$(n[r]).addClass("hide-me"):$(n[r]).removeClass("hide-me")}var r=e.module("ngDropdowns",[]);r.run(["$templateCache",function(t){t.put("ngDropdowns/templates/dropdownSelect.html",['<div ng-class="{\'disabled\': dropdownDisabled}" class="wrap-dd-select" tabindex="0">','<span class="selected">{{dropdownModel[labelField]}}</span>','<ul class="dropdown">','<li ng-repeat="item in dropdownSelect"',' class="dropdown-item"',' dropdown-select-item="item"',' dropdown-item-label="labelField">',"</li>","</ul>","</div>"].join("")),t.put("ngDropdowns/templates/dropdownSelectItem.html",["<li ng-class=\"{divider: (dropdownSelectItem.divider && !dropdownSelectItem[dropdownItemLabel]), 'divider-label': (dropdownSelectItem.divider && dropdownSelectItem[dropdownItemLabel])}\">",'<a href="" class="dropdown-item"',' ng-if="!dropdownSelectItem.divider"',' ng-href="{{dropdownSelectItem.href}}"',' ng-click="selectItem()">',"{{dropdownSelectItem[dropdownItemLabel]}}","</a>",'<span ng-if="dropdownSelectItem.divider">',"{{dropdownSelectItem[dropdownItemLabel]}}","</span>","</li>"].join("")),t.put("ngDropdowns/templates/dropdownMenu.html",['<ul class="dropdown">','<li ng-repeat="item in dropdownMenu"',' class="dropdown-item"',' dropdown-item-label="labelField"',' dropdown-menu-item="item">',"</li>","</ul>"].join("")),
t.put("ngDropdowns/templates/dropdownMenuItem.html",["<li ng-class=\"{divider: dropdownMenuItem.divider, 'divider-label': dropdownMenuItem.divider && dropdownMenuItem[dropdownItemLabel]}\">",'<a href="" class="dropdown-item"',' ng-if="!dropdownMenuItem.divider"',' ng-href="{{dropdownMenuItem.href}}"',' ng-click="selectItem()">',"{{dropdownMenuItem[dropdownItemLabel]}}","</a>",'<span ng-if="dropdownMenuItem.divider">',"{{dropdownMenuItem[dropdownItemLabel]}}","</span>","</li>"].join(""))}]),r.directive("dropdownSelect",["DropdownService",function(t){return{restrict:"A",replace:!0,scope:{dropdownSelect:"=",dropdownModel:"=",dropdownItemLabel:"@",dropdownOnchange:"&",dropdownDisabled:"="},controller:["$scope","$element",function(r,o){r.labelField=r.dropdownItemLabel||"text",e.element(document).ready(function(){n(r.dropdownModel)}),t.register(o),this.select=function(t){e.equals(t,r.dropdownModel)||(r.dropdownModel=t),r.dropdownOnchange({selected:t}),o[0].blur(),n(t)},o.bind("click",function(e){e.stopPropagation(),r.dropdownDisabled||t.toggleActive(o)}),r.$on("$destroy",function(){t.unregister(o)})}],templateUrl:"ngDropdowns/templates/dropdownSelect.html"}}]),r.directive("dropdownSelectItem",[function(){return{require:"^dropdownSelect",replace:!0,scope:{dropdownItemLabel:"=",dropdownSelectItem:"="},link:function(t,e,n,r){t.selectItem=function(){t.dropdownSelectItem.href||r.select(t.dropdownSelectItem)}},templateUrl:"ngDropdowns/templates/dropdownSelectItem.html"}}]),r.directive("dropdownMenu",["$parse","$compile","DropdownService","$templateCache",function(t,n,r,o){return{restrict:"A",replace:!1,scope:{dropdownMenu:"=",dropdownModel:"=",dropdownItemLabel:"@",dropdownOnchange:"&",dropdownDisabled:"="},controller:["$scope","$element",function(t,i){t.labelField=t.dropdownItemLabel||"text";var a=e.element(o.get("ngDropdowns/templates/dropdownMenu.html"));a.data("$dropdownMenuController",this);var s=n(a)(t),u=n(e.element('<div class="wrap-dd-menu" ng-class="{\'disabled\': dropdownDisabled}"></div>'))(t);i.replaceWith(u),u.append(i),u.append(a),r.register(s),this.select=function(n){e.equals(n,t.dropdownModel)||(t.dropdownModel=n),t.dropdownOnchange({selected:n})},i.bind("click",function(e){e.stopPropagation(),t.dropdownDisabled||r.toggleActive(s)}),t.$on("$destroy",function(){r.unregister(s)})}]}}]),r.directive("dropdownMenuItem",[function(){return{require:"^dropdownMenu",replace:!0,scope:{dropdownMenuItem:"=",dropdownItemLabel:"="},link:function(t,e,n,r){t.selectItem=function(){t.dropdownMenuItem.href||r.select(t.dropdownMenuItem)}},templateUrl:"ngDropdowns/templates/dropdownMenuItem.html"}}]),r.factory("DropdownService",["$document",function(t){var n=t.find("body"),r={},o=[];return n.bind("click",function(){e.forEach(o,function(t){t.removeClass("active")})}),r.register=function(t){o.push(t)},r.unregister=function(t){var e;(e=o.indexOf(t))>-1&&o.splice(e,1)},r.toggleActive=function(t){e.forEach(o,function(e){e!==t&&e.removeClass("active")}),t.toggleClass("active")},r.clearActive=function(){e.forEach(o,function(t){t.removeClass("active")})},r.isActive=function(t){return t.hasClass("active")},r}])}(window,window.angular),function(t,e){"use strict";function n(){this.$get=["$$sanitizeUri",function(t){return function(e){var n=[];return i(e,u(n,function(e,n){return!/^unsafe/.test(t(e,n))})),n.join("")}}]}function r(t){var n=[];return u(n,e.noop).chars(t),n.join("")}function o(t,n){var r,o={},i=t.split(",");for(r=0;r<i.length;r++)o[n?e.lowercase(i[r]):i[r]]=!0;return o}function i(t,n){function r(t,r,i,s){if(r=e.lowercase(r),C[r])for(;y.last()&&M[y.last()];)o("",y.last());k[r]&&y.last()==r&&o("",r),(s=b[r]||!!s)||y.push(r);var u={};i.replace(f,function(t,e,n,r,o){var i=n||r||o||"";u[e]=a(i)}),n.start&&n.start(r,u,s)}function o(t,r){var o,i=0;if(r=e.lowercase(r))for(i=y.length-1;i>=0&&y[i]!=r;i--);if(i>=0){for(o=y.length-1;o>=i;o--)n.end&&n.end(y[o]);y.length=i}}"string"!=typeof t&&(t=null===t||void 0===t?"":""+t);var i,s,u,_,y=[],w=t;for(y.last=function(){return y[y.length-1]};t;){if(_="",s=!0,y.last()&&D[y.last()]?(t=t.replace(new RegExp("([\\W\\w]*)<\\s*\\/\\s*"+y.last()+"[^>]*>","i"),function(t,e){return e=e.replace(m,"$1").replace(v,"$1"),n.chars&&n.chars(a(e)),""}),o("",y.last())):(0===t.indexOf("<!--")?(i=t.indexOf("--",4))>=0&&t.lastIndexOf("-->",i)===i&&(n.comment&&n.comment(t.substring(4,i)),t=t.substring(i+3),s=!1):g.test(t)?(u=t.match(g))&&(t=t.replace(u[0],""),s=!1):p.test(t)?(u=t.match(c))&&(t=t.substring(u[0].length),u[0].replace(c,o),s=!1):h.test(t)&&(u=t.match(l),u?(u[4]&&(t=t.substring(u[0].length),u[0].replace(l,r)),s=!1):(_+="<",t=t.substring(1))),s&&(i=t.indexOf("<"),_+=i<0?t:t.substring(0,i),t=i<0?"":t.substring(i),n.chars&&n.chars(a(_)))),t==w)throw d("badparse","The sanitizer was unable to parse the following block of html: {0}",t);w=t}o()}function a(t){return t?(P.innerHTML=t.replace(/</g,"&lt;"),P.textContent):""}function s(t){return t.replace(/&/g,"&amp;").replace(_,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(y,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function u(t,n){var r=!1,o=e.bind(t,t.push);return{start:function(t,i,a){t=e.lowercase(t),!r&&D[t]&&(r=t),r||B[t]!==!0||(o("<"),o(t),e.forEach(i,function(r,i){var a=e.lowercase(i),u="img"===t&&"src"===a||"background"===a;x[a]!==!0||T[a]===!0&&!n(r,u)||(o(" "),o(i),o('="'),o(s(r)),o('"'))}),o(a?"/>":">"))},end:function(t){t=e.lowercase(t),r||B[t]!==!0||(o("</"),o(t),o(">")),t==r&&(r=!1)},chars:function(t){r||o(s(t))}}}var d=e.$$minErr("$sanitize"),l=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,c=/^<\/\s*([\w:-]+)[^>]*>/,f=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,h=/^</,p=/^<\//,m=/<!--(.*?)-->/g,g=/<!DOCTYPE([^>]*?)>/i,v=/<!\[CDATA\[(.*?)]]>/g,_=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,y=/([^\#-~| |!])/g,b=o("area,br,col,hr,img,wbr"),w=o("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),S=o("rp,rt"),k=e.extend({},S,w),C=e.extend({},w,o("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),M=e.extend({},S,o("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),A=o("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan,use"),D=o("script,style"),B=e.extend({},b,C,M,k,A),T=o("background,cite,href,longdesc,src,usemap,xlink:href"),L=o("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),I=o("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),x=e.extend({},T,I,L),P=document.createElement("pre");e.module("ngSanitize",[]).provider("$sanitize",n),e.module("ngSanitize").filter("linky",["$sanitize",function(t){var n=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,o=/^mailto:/i;return function(i,a){function s(t){t&&h.push(r(t))}function u(t,n){h.push("<a "),e.isDefined(a)&&h.push('target="',a,'" '),h.push('href="',t.replace(/"/g,"&quot;"),'">'),s(n),h.push("</a>")}if(!i)return i;for(var d,l,c,f=i,h=[];d=f.match(n);)l=d[0],d[2]||d[4]||(l=(d[3]?"http://":"mailto:")+l),c=d.index,s(f.substr(0,c)),u(l,d[0].replace(o,"")),f=f.substring(c+d[0].length);return s(f),t(h.join(""))}}])}(window,window.angular),function(t,e){"use strict";function n(t,e,n){if(!t)throw pt("areq","Argument '{0}' is {1}",e||"?",n||"required");return t}function r(t,e){return t||e?t?e?(U(t)&&(t=t.join(" ")),U(e)&&(e=e.join(" ")),t+" "+e):t:e:""}function o(t){var e={};return t&&(t.to||t.from)&&(e.to=t.to,e.from=t.from),e}function i(t,e,n){var r="";return t=U(t)?t:t&&j(t)&&t.length?t.split(/\s+/):[],H(t,function(t,o){t&&t.length>0&&(r+=o>0?" ":"",r+=n?e+t:t+e)}),r}function a(t,e){var n=t.indexOf(e);e>=0&&t.splice(n,1)}function s(t){if(t instanceof E)switch(t.length){case 0:return t;case 1:if(t[0].nodeType===q)return t;break;default:return E(u(t))}if(t.nodeType===q)return E(t)}function u(t){if(!t[0])return t;for(var e=0;e<t.length;e++){var n=t[e];if(n.nodeType==q)return n}}function d(t,e,n){H(e,function(e){t.addClass(e,n)})}function l(t,e,n){H(e,function(e){t.removeClass(e,n)})}function c(t){return function(e,n){n.addClass&&(d(t,e,n.addClass),n.addClass=null),n.removeClass&&(l(t,e,n.removeClass),n.removeClass=null)}}function f(t){if(t=t||{},!t.$$prepared){var e=t.domOperation||Y;t.domOperation=function(){t.$$domOperationFired=!0,e(),e=Y},t.$$prepared=!0}return t}function h(t,e){p(t,e),m(t,e)}function p(t,e){e.from&&(t.css(e.from),e.from=null)}function m(t,e){e.to&&(t.css(e.to),e.to=null)}function g(t,e,n){var r=e.options||{},o=n.options||{},i=(r.addClass||"")+" "+(o.addClass||""),a=(r.removeClass||"")+" "+(o.removeClass||""),s=v(t.attr("class"),i,a);o.preparationClasses&&(r.preparationClasses=C(o.preparationClasses,r.preparationClasses),delete o.preparationClasses);var u=r.domOperation!==Y?r.domOperation:null;return R(r,o),u&&(r.domOperation=u),s.addClass?r.addClass=s.addClass:r.addClass=null,s.removeClass?r.removeClass=s.removeClass:r.removeClass=null,e.addClass=r.addClass,e.removeClass=r.removeClass,r}function v(t,e,n){function r(t){j(t)&&(t=t.split(" "));var e={};return H(t,function(t){t.length&&(e[t]=!0)}),e}var o=1,i=-1,a={};t=r(t),e=r(e),H(e,function(t,e){a[e]=o}),n=r(n),H(n,function(t,e){a[e]=a[e]===o?null:i});var s={addClass:"",removeClass:""};return H(a,function(e,n){var r,a;e===o?(r="addClass",a=!t[n]):e===i&&(r="removeClass",a=t[n]),a&&(s[r].length&&(s[r]+=" "),s[r]+=n)}),s}function _(t){return t instanceof e.element?t[0]:t}function y(t,e,n){var r="";e&&(r=i(e,X,!0)),n.addClass&&(r=C(r,i(n.addClass,K))),n.removeClass&&(r=C(r,i(n.removeClass,Z))),r.length&&(n.preparationClasses=r,t.addClass(r))}function b(t,e){e.preparationClasses&&(t.removeClass(e.preparationClasses),e.preparationClasses=null),e.activeClasses&&(t.removeClass(e.activeClasses),e.activeClasses=null)}function w(t,e){var n=e?"-"+e+"s":"";return k(t,[ft,n]),[ft,n]}function S(t,e){var n=e?"paused":"",r=F+ut;return k(t,[r,n]),[r,n]}function k(t,e){var n=e[0],r=e[1];t.style[n]=r}function C(t,e){return t?e?t+" "+e:t:e}function M(t){return[ct,t+"s"]}function A(t,e){return[e?lt:ft,t+"s"]}function D(t,e,n){var r=Object.create(null),o=t.getComputedStyle(e)||{};return H(n,function(t,e){var n=o[t];if(n){var i=n.charAt(0);("-"===i||"+"===i||i>=0)&&(n=B(n)),0===n&&(n=null),r[e]=n}}),r}function B(t){var e=0;return H(t.split(/\s*,\s*/),function(t){"s"==t.charAt(t.length-1)&&(t=t.substring(0,t.length-1)),t=parseFloat(t)||0,e=e?Math.max(t,e):t}),e}function T(t){return 0===t||null!=t}function L(t,e){var n=P,r=t+"s";return e?n+=rt:r+=" linear all",[n,r]}function I(){var t=Object.create(null);return{flush:function(){t=Object.create(null)},count:function(e){var n=t[e];return n?n.total:0},get:function(e){var n=t[e];return n&&n.value},put:function(e,n){t[e]?t[e].total++:t[e]={total:1,value:n}}}}function x(t,e,n){H(n,function(n){t[n]=G(t[n])?t[n]:e.style.getPropertyValue(n)})}var P,$,F,O,Y=e.noop,N=e.copy,R=e.extend,E=e.element,H=e.forEach,U=e.isArray,j=e.isString,z=e.isObject,W=e.isUndefined,G=e.isDefined,V=e.isFunction,J=e.isElement,q=1,K="-add",Z="-remove",X="ng-",Q="-active",tt="-prepare",et="ng-animate",nt="$$ngAnimateChildren";W(t.ontransitionend)&&G(t.onwebkittransitionend)?("-webkit-",P="WebkitTransition",$="webkitTransitionEnd transitionend"):(P="transition",$="transitionend"),W(t.onanimationend)&&G(t.onwebkitanimationend)?("-webkit-",F="WebkitAnimation",O="webkitAnimationEnd animationend"):(F="animation",O="animationend");var rt="Duration",ot="Property",it="Delay",at="TimingFunction",st="IterationCount",ut="PlayState",dt=9999,lt=F+it,ct=F+rt,ft=P+it,ht=P+rt,pt=e.$$minErr("ng"),mt=["$$rAF",function(t){function e(t){r=r.concat(t),n()}function n(){if(r.length){for(var e=r.shift(),i=0;i<e.length;i++)e[i]();o||t(function(){o||n()})}}var r,o;return r=e.queue=[],e.waitUntilQuiet=function(e){o&&o(),o=t(function(){o=null,e(),n()})},e}],gt=["$interpolate",function(t){return{link:function(n,r,o){function i(t){t="on"===t||"true"===t,r.data(nt,t)}var a=o.ngAnimateChildren;e.isString(a)&&0===a.length?r.data(nt,!0):(i(t(a)(n)),o.$observe("ngAnimateChildren",i))}}}],vt="$$animateCss",_t=1e3,yt=3,bt=1.5,wt={transitionDuration:ht,transitionDelay:ft,transitionProperty:P+ot,animationDuration:ct,animationDelay:lt,animationIterationCount:F+st},St={transitionDuration:ht,transitionDelay:ft,animationDuration:ct,animationDelay:lt},kt=["$animateProvider",function(){var t=I(),e=I();this.$get=["$window","$$jqLite","$$AnimateRunner","$timeout","$$forceReflow","$sniffer","$$rAFScheduler","$$animateQueue",function(n,r,s,u,d,l,g,v){function y(t,e){var n="$$ngAnimateParentKey",r=t.parentNode;return(r[n]||(r[n]=++E))+"-"+t.getAttribute("class")+"-"+e}function b(e,r,o,i){var a=t.get(o);return a||(a=D(n,e,i),"infinite"===a.animationIterationCount&&(a.animationIterationCount=1)),t.put(o,a),a}function C(o,a,s,u){var d;if(t.count(s)>0&&!(d=e.get(s))){var l=i(a,"-stagger");r.addClass(o,l),d=D(n,o,u),d.animationDuration=Math.max(d.animationDuration,0),d.transitionDuration=Math.max(d.transitionDuration,0),r.removeClass(o,l),e.put(s,d)}return d||{}}function B(n){j.push(n),g.waitUntilQuiet(function(){t.flush(),e.flush();for(var n=d(),r=0;r<j.length;r++)j[r](n);j.length=0})}function I(t,e,n){var r=b(t,e,n,wt),o=r.animationDelay,i=r.transitionDelay;return r.maxDelay=o&&i?Math.max(o,i):o||i,r.maxDuration=Math.max(r.animationDuration*r.animationIterationCount,r.transitionDuration),r}var R=c(r),E=0,j=[];return function(e,n){function d(){g()}function c(){g(!0)}function g(t){if(!(V||q&&J)){V=!0,J=!1,z.$$skipPreparationClasses||r.removeClass(e,kt),r.removeClass(e,Mt),S(G,!1),w(G,!1),H(lt,function(t){G.style[t[0]]=""}),R(e,z),h(e,z),Object.keys(W).length&&H(W,function(t,e){t?G.style.setProperty(e,t):G.style.removeProperty(e)}),z.onDone&&z.onDone(),ht&&ht.length&&e.off(ht.join(" "),E);var n=e.data(vt);n&&(u.cancel(n[0].timer),e.removeData(vt)),tt&&tt.complete(!t)}}function b(t){Nt.blockTransition&&w(G,t),Nt.blockKeyframeAnimation&&S(G,!!t)}function D(){return tt=new s({end:d,cancel:c}),B(Y),g(),{$$willAnimate:!1,start:function(){return tt},end:d}}function E(t){t.stopPropagation();var e=t.originalEvent||t,n=e.$manualTimeStamp||Date.now(),r=parseFloat(e.elapsedTime.toFixed(yt));Math.max(n-ut,0)>=rt&&r>=it&&(q=!0,g())}function j(){function t(){if(!V){if(b(!1),H(lt,function(t){var e=t[0],n=t[1];G.style[e]=n}),R(e,z),r.addClass(e,Mt),Nt.recalculateTimingStyles){if(Ct=G.className+" "+kt,Dt=y(G,Ct),Ot=I(G,Ct,Dt),Yt=Ot.maxDelay,nt=Math.max(Yt,0),0===(it=Ot.maxDuration))return void g();Nt.hasTransitions=Ot.transitionDuration>0,Nt.hasAnimations=Ot.animationDuration>0}if(Nt.applyAnimationDelay&&(Yt="boolean"!=typeof z.delay&&T(z.delay)?parseFloat(z.delay):Yt,nt=Math.max(Yt,0),Ot.animationDelay=Yt,Rt=A(Yt,!0),lt.push(Rt),G.style[Rt[0]]=Rt[1]),rt=nt*_t,st=it*_t,z.easing){var t,o=z.easing;Nt.hasTransitions&&(t=P+at,lt.push([t,o]),G.style[t]=o),Nt.hasAnimations&&(t=F+at,lt.push([t,o]),G.style[t]=o)}Ot.transitionDuration&&ht.push($),Ot.animationDuration&&ht.push(O),ut=Date.now();var i=rt+bt*st,a=ut+i,s=e.data(vt)||[],d=!0;if(s.length){var l=s[0];d=a>l.expectedEndTime,d?u.cancel(l.timer):s.push(g)}if(d){var c=u(n,i,!1);s[0]={timer:c,expectedEndTime:a},s.push(g),e.data(vt,s)}ht.length&&e.on(ht.join(" "),E),z.to&&(z.cleanupStyles&&x(W,G,Object.keys(z.to)),m(e,z))}}function n(){var t=e.data(vt);if(t){for(var n=1;n<t.length;n++)t[n]();e.removeData(vt)}}if(!V){if(!G.parentNode)return void g();var o=function(t){if(q)J&&t&&(J=!1,g());else if(J=!t,Ot.animationDuration){var e=S(G,J);J?lt.push(e):a(lt,e)}},i=$t>0&&(Ot.transitionDuration&&0===Bt.transitionDuration||Ot.animationDuration&&0===Bt.animationDuration)&&Math.max(Bt.animationDelay,Bt.transitionDelay);i?u(t,Math.floor(i*$t*_t),!1):t(),et.resume=function(){o(!0)},et.pause=function(){o(!1)}}}var z=n||{};z.$$prepared||(z=f(N(z)));var W={},G=_(e);if(!G||!G.parentNode||!v.enabled())return D();var V,J,q,tt,et,nt,rt,it,st,ut,lt=[],ct=e.attr("class"),ft=o(z),ht=[];if(0===z.duration||!l.animations&&!l.transitions)return D();var pt=z.event&&U(z.event)?z.event.join(" "):z.event,mt=pt&&z.structural,gt="",wt="";mt?gt=i(pt,X,!0):pt&&(gt=pt),z.addClass&&(wt+=i(z.addClass,K)),z.removeClass&&(wt.length&&(wt+=" "),wt+=i(z.removeClass,Z)),z.applyClassesEarly&&wt.length&&R(e,z);var kt=[gt,wt].join(" ").trim(),Ct=ct+" "+kt,Mt=i(kt,Q),At=ft.to&&Object.keys(ft.to).length>0;if(!((z.keyframeStyle||"").length>0||At||kt))return D();var Dt,Bt;if(z.stagger>0){var Tt=parseFloat(z.stagger);Bt={transitionDelay:Tt,animationDelay:Tt,transitionDuration:0,animationDuration:0}}else Dt=y(G,Ct),Bt=C(G,kt,Dt,St);z.$$skipPreparationClasses||r.addClass(e,kt);var Lt;if(z.transitionStyle){var It=[P,z.transitionStyle];k(G,It),lt.push(It)}if(z.duration>=0){Lt=G.style[P].length>0;var xt=L(z.duration,Lt);k(G,xt),lt.push(xt)}if(z.keyframeStyle){var Pt=[F,z.keyframeStyle];k(G,Pt),lt.push(Pt)}var $t=Bt?z.staggerIndex>=0?z.staggerIndex:t.count(Dt):0,Ft=0===$t;Ft&&!z.skipBlocking&&w(G,dt);var Ot=I(G,Ct,Dt),Yt=Ot.maxDelay;nt=Math.max(Yt,0),it=Ot.maxDuration;var Nt={};if(Nt.hasTransitions=Ot.transitionDuration>0,Nt.hasAnimations=Ot.animationDuration>0,Nt.hasTransitionAll=Nt.hasTransitions&&"all"==Ot.transitionProperty,Nt.applyTransitionDuration=At&&(Nt.hasTransitions&&!Nt.hasTransitionAll||Nt.hasAnimations&&!Nt.hasTransitions),Nt.applyAnimationDuration=z.duration&&Nt.hasAnimations,Nt.applyTransitionDelay=T(z.delay)&&(Nt.applyTransitionDuration||Nt.hasTransitions),Nt.applyAnimationDelay=T(z.delay)&&Nt.hasAnimations,Nt.recalculateTimingStyles=wt.length>0,(Nt.applyTransitionDuration||Nt.applyAnimationDuration)&&(it=z.duration?parseFloat(z.duration):it,Nt.applyTransitionDuration&&(Nt.hasTransitions=!0,Ot.transitionDuration=it,Lt=G.style[P+ot].length>0,lt.push(L(it,Lt))),Nt.applyAnimationDuration&&(Nt.hasAnimations=!0,Ot.animationDuration=it,lt.push(M(it)))),0===it&&!Nt.recalculateTimingStyles)return D();if(null!=z.delay){var Rt;"boolean"!=typeof z.delay&&(Rt=parseFloat(z.delay),nt=Math.max(Rt,0)),Nt.applyTransitionDelay&&lt.push(A(Rt)),Nt.applyAnimationDelay&&lt.push(A(Rt,!0))}return null==z.duration&&Ot.transitionDuration>0&&(Nt.recalculateTimingStyles=Nt.recalculateTimingStyles||Ft),rt=nt*_t,st=it*_t,z.skipBlocking||(Nt.blockTransition=Ot.transitionDuration>0,Nt.blockKeyframeAnimation=Ot.animationDuration>0&&Bt.animationDelay>0&&0===Bt.animationDuration),z.from&&(z.cleanupStyles&&x(W,G,Object.keys(z.from)),p(e,z)),Nt.blockTransition||Nt.blockKeyframeAnimation?b(it):z.skipBlocking||w(G,!1),{$$willAnimate:!0,end:d,start:function(){if(!V)return et={end:d,cancel:c,resume:null,pause:null},tt=new s(et),B(j),tt}}}}]}],Ct=["$$animationProvider",function(t){function e(t){return t.parentNode&&11===t.parentNode.nodeType}t.drivers.push("$$animateCssDriver");var n="ng-animate-shim",r="ng-anchor-out";this.$get=["$animateCss","$rootScope","$$AnimateRunner","$rootElement","$sniffer","$$jqLite","$document",function(t,o,i,a,s,u,d){function l(t){return t.replace(/\bng-\S+\b/g,"")}function f(t,e){return j(t)&&(t=t.split(" ")),j(e)&&(e=e.split(" ")),t.filter(function(t){return e.indexOf(t)===-1}).join(" ")}function h(e,o,a){function s(t){var e={},n=_(t).getBoundingClientRect();return H(["width","height","top","left"],function(t){var r=n[t];switch(t){case"top":r+=g.scrollTop;break;case"left":r+=g.scrollLeft}e[t]=Math.floor(r)+"px"}),e}function u(){var e=t(p,{addClass:r,delay:!0,from:s(o)});return e.$$willAnimate?e:null}function d(t){return t.attr("class")||""}function c(){var e=l(d(a)),n=f(e,m),o=f(m,e),i=t(p,{to:s(a),addClass:"ng-anchor-in "+n,removeClass:r+" "+o,delay:!0});return i.$$willAnimate?i:null}function h(){p.remove(),o.removeClass(n),a.removeClass(n)}var p=E(_(o).cloneNode(!0)),m=l(d(p));o.addClass(n),a.addClass(n),p.addClass("ng-anchor"),y.append(p);var v,b=u();if(!b&&!(v=c()))return h();var w=b||v;return{start:function(){function t(){n&&n.end()}var e,n=w.start();return n.done(function(){if(n=null,!v&&(v=c()))return n=v.start(),n.done(function(){n=null,h(),e.complete()}),n;h(),e.complete()}),e=new i({end:t,cancel:t})}}}function p(t,e,n,r){var o=m(t,Y),a=m(e,Y),s=[];if(H(r,function(t){var e=t.out,r=t["in"],o=h(n,e,r);o&&s.push(o)}),o||a||0!==s.length)return{start:function(){function t(){H(e,function(t){t.end()})}var e=[];o&&e.push(o.start()),a&&e.push(a.start()),H(s,function(t){e.push(t.start())});var n=new i({end:t,cancel:t});return i.all(e,function(t){n.complete(t)}),n}}}function m(e){var n=e.element,r=e.options||{};e.structural&&(r.event=e.event,r.structural=!0,r.applyClassesEarly=!0,"leave"===e.event&&(r.onDone=r.domOperation)),r.preparationClasses&&(r.event=C(r.event,r.preparationClasses));var o=t(n,r);return o.$$willAnimate?o:null}if(!s.animations&&!s.transitions)return Y;var g=d[0].body,v=_(a),y=E(e(v)||g.contains(v)?v:g);return c(u),function(t){return t.from&&t.to?p(t.from,t.to,t.classes,t.anchors):m(t)}}]}],Mt=["$animateProvider",function(t){this.$get=["$injector","$$AnimateRunner","$$jqLite",function(e,n,r){function o(n){n=U(n)?n:n.split(" ");for(var r=[],o={},i=0;i<n.length;i++){var a=n[i],s=t.$$registeredAnimations[a];s&&!o[a]&&(r.push(e.get(s)),o[a]=!0)}return r}var i=c(r);return function(t,e,r,a){function s(){a.domOperation(),i(t,a)}function u(){p=!0,s(),h(t,a)}function d(t,e,r,o,i){var a;switch(r){case"animate":a=[e,o.from,o.to,i];break;case"setClass":a=[e,v,_,i];break;case"addClass":a=[e,v,i];break;case"removeClass":a=[e,_,i];break;default:a=[e,i]}a.push(o);var s=t.apply(t,a);if(s)if(V(s.start)&&(s=s.start()),s instanceof n)s.done(i);else if(V(s))return s;return Y}function l(t,e,r,o,i){var a=[];return H(o,function(o){var s=o[i];s&&a.push(function(){var o,i,a=!1,u=function(t){a||(a=!0,(i||Y)(t),o.complete(!t))};return o=new n({end:function(){u()},cancel:function(){u(!0)}}),i=d(s,t,e,r,function(t){u(t===!1)}),o})}),a}function c(t,e,r,o,i){var a=l(t,e,r,o,i);if(0===a.length){var s,u;"beforeSetClass"===i?(s=l(t,"removeClass",r,o,"beforeRemoveClass"),u=l(t,"addClass",r,o,"beforeAddClass")):"setClass"===i&&(s=l(t,"removeClass",r,o,"removeClass"),u=l(t,"addClass",r,o,"addClass")),s&&(a=a.concat(s)),u&&(a=a.concat(u))}if(0!==a.length)return function(t){var e=[];return a.length&&H(a,function(t){e.push(t())}),e.length?n.all(e,t):t(),function(t){H(e,function(e){t?e.cancel():e.end()})}}}var p=!1;3===arguments.length&&z(r)&&(a=r,r=null),a=f(a),r||(r=t.attr("class")||"",a.addClass&&(r+=" "+a.addClass),a.removeClass&&(r+=" "+a.removeClass));var m,g,v=a.addClass,_=a.removeClass,y=o(r);if(y.length){var b,w;"leave"==e?(w="leave",b="afterLeave"):(w="before"+e.charAt(0).toUpperCase()+e.substr(1),b=e),"enter"!==e&&"move"!==e&&(m=c(t,e,a,y,w)),g=c(t,e,a,y,b)}if(m||g){var S;return{$$willAnimate:!0,end:function(){return S?S.end():(u(),S=new n,S.complete(!0)),S},start:function(){function t(t){u(t),S.complete(t)}function e(e){p||((r||Y)(e),t(e))}if(S)return S;S=new n;var r,o=[];return m&&o.push(function(t){r=m(t)}),o.length?o.push(function(t){s(),t(!0)}):s(),g&&o.push(function(t){r=g(t)}),S.setHost({end:function(){e()},cancel:function(){e(!0)}}),n.chain(o,t),S}}}}}]}],At=["$$animationProvider",function(t){t.drivers.push("$$animateJsDriver"),this.$get=["$$animateJs","$$AnimateRunner",function(t,e){function n(e){var n=e.element,r=e.event,o=e.options;return t(n,r,e.classes,o)}return function(t){if(t.from&&t.to){var r=n(t.from),o=n(t.to);if(!r&&!o)return;return{start:function(){function t(){return function(){H(i,function(t){t.end()})}}function n(t){a.complete(t)}var i=[];r&&i.push(r.start()),o&&i.push(o.start()),e.all(i,n);var a=new e({end:t(),cancel:t()});return a}}}return n(t)}}]}],Dt="data-ng-animate",Bt="$ngAnimatePin",Tt=["$animateProvider",function(t){function e(t){if(!t)return null;var e=t.split(l),n=Object.create(null);return H(e,function(t){n[t]=!0}),n}function r(t,n){if(t&&n){var r=e(n);return t.split(l).some(function(t){return r[t]})}}function o(t,e,n,r){return p[t].some(function(t){return t(e,n,r)})}function i(t,e){var n=(t.addClass||"").length>0,r=(t.removeClass||"").length>0;return e?n&&r:n||r}var a=1,d=2,l=" ",p=this.rules={skip:[],cancel:[],join:[]};p.join.push(function(t,e){return!e.structural&&i(e)}),p.skip.push(function(t,e){return!e.structural&&!i(e)}),p.skip.push(function(t,e,n){return"leave"==n.event&&e.structural}),p.skip.push(function(t,e,n){return n.structural&&n.state===d&&!e.structural}),p.cancel.push(function(t,e,n){return n.structural&&e.structural}),p.cancel.push(function(t,e,n){return n.state===d&&e.structural}),p.cancel.push(function(t,e,n){var o=e.addClass,i=e.removeClass,a=n.addClass,s=n.removeClass;return!(W(o)&&W(i)||W(a)&&W(s))&&(r(o,s)||r(i,a))}),this.$get=["$$rAF","$rootScope","$rootElement","$document","$$HashMap","$$animation","$$AnimateRunner","$templateRequest","$$jqLite","$$forceReflow",function(e,r,l,p,m,v,w,S,k){function C(){var t=!1;return function(e){t?e():r.$$postDigest(function(){t=!0,e()})}}function M(t,e){return g(t,e,{})}function A(t,e,n){var r=_(e),o=_(t),i=[],a=V[n];return a&&H(a,function(t){Q.call(t.node,r)?i.push(t.callback):"leave"===n&&Q.call(t.node,o)&&i.push(t.callback)}),i}function D(t,n,u){function l(n,r,o,i){D(function(){var n=A(m,t,r);n.length&&e(function(){H(n,function(e){e(t,o,i)})})}),n.progress(r,o,i)}function c(e){b(t,S),X(t,S),h(t,S),S.domOperation(),k.complete(!e)}var p,m,S=N(u);t=s(t),t&&(p=_(t),m=t.parent()),S=f(S);var k=new w,D=C();if(U(S.addClass)&&(S.addClass=S.addClass.join(" ")),S.addClass&&!j(S.addClass)&&(S.addClass=null),U(S.removeClass)&&(S.removeClass=S.removeClass.join(" ")),S.removeClass&&!j(S.removeClass)&&(S.removeClass=null),S.from&&!z(S.from)&&(S.from=null),S.to&&!z(S.to)&&(S.to=null),!p)return c(),k;if(!Z([p.className,S.addClass,S.removeClass].join(" ")))return c(),k;var L=["enter","move","leave"].indexOf(n)>=0,Y=O.hidden,R=!F||Y||$.get(p),E=!R&&P.get(p)||{},W=!!E.state;if(R||W&&E.state==a||(R=!I(t,m,n)),R)return Y&&l(k,n,"start"),c(),Y&&l(k,n,"close"),k;L&&B(t);var G={structural:L,element:t,event:n,addClass:S.addClass,removeClass:S.removeClass,close:c,options:S,runner:k};if(W){if(o("skip",t,G,E))return E.state===d?(c(),k):(g(t,E,G),E.runner);if(o("cancel",t,G,E))if(E.state===d)E.runner.end();else{if(!E.structural)return g(t,E,G),E.runner;E.close()}else{if(o("join",t,G,E)){if(E.state!==d)return y(t,L?n:null,S),n=G.event=E.event,S=g(t,E,G),E.runner;M(t,G)}}}else M(t,G);var V=G.structural;if(V||(V="animate"===G.event&&Object.keys(G.options.to||{}).length>0||i(G)),!V)return c(),T(t),k;var J=(E.counter||0)+1;return G.counter=J,x(t,a,G),r.$$postDigest(function(){var e=P.get(p),r=!e;e=e||{};var o=t.parent()||[],a=o.length>0&&("animate"===e.event||e.structural||i(e));if(r||e.counter!==J||!a)return r&&(X(t,S),h(t,S)),(r||L&&e.event!==n)&&(S.domOperation(),k.end()),void(a||T(t));n=!e.structural&&i(e,!0)?"setClass":e.event,x(t,d);var s=v(t,n,e.options);k.setHost(s),l(k,n,"start",{}),s.done(function(e){c(!e);var r=P.get(p);r&&r.counter===J&&T(_(t)),l(k,n,"close",{})})}),k}function B(t){H(_(t).querySelectorAll("["+Dt+"]"),function(t){var e=parseInt(t.getAttribute(Dt)),n=P.get(t);if(n)switch(e){case d:n.runner.end();case a:P.remove(t)}})}function T(t){var e=_(t);e.removeAttribute(Dt),P.remove(e)}function L(t,e){return _(t)===_(e)}function I(t,e){var n,r=E(O.body),o=L(t,r)||"HTML"===t[0].nodeName,i=L(t,l),a=!1,s=$.get(_(t)),u=E.data(t[0],Bt);for(u&&(e=u),e=_(e);e&&(i||(i=L(e,l)),e.nodeType===q);){var d=P.get(e)||{};if(!a){var c=$.get(e);if(c===!0&&s!==!1){s=!0;break}c===!1&&(s=!1),a=d.structural}if(W(n)||n===!0){var f=E.data(e,nt);G(f)&&(n=f)}if(a&&n===!1)break;if(o||(o=L(e,r)),o&&i)break;e=i||!(u=E.data(e,Bt))?e.parentNode:_(u)}return(!a||n)&&s!==!0&&i&&o}function x(t,e,n){n=n||{},n.state=e;var r=_(t);r.setAttribute(Dt,e);var o=P.get(r),i=o?R(o,n):n;P.put(r,i)}var P=new m,$=new m,F=null,O=p[0]||{hidden:!0},Y=r.$watch(function(){return 0===S.totalPendingRequests},function(t){t&&(Y(),r.$$postDigest(function(){r.$$postDigest(function(){null===F&&(F=!0)})}))}),V={},K=t.classNameFilter(),Z=K?function(t){return K.test(t)}:function(){return!0},X=c(k),Q=Node.prototype.contains||function(t){return this===t||!!(16&this.compareDocumentPosition(t))};return{on:function(t,e,n){var r=u(e);V[t]=V[t]||[],V[t].push({node:r,callback:n})},off:function(t,e,n){function r(t,e,n){var r=u(e);return t.filter(function(t){return!(t.node===r&&(!n||t.callback===n))})}var o=V[t];o&&(V[t]=1===arguments.length?null:r(o,e,n))},pin:function(t,e){n(J(t),"element","not an element"),n(J(e),"parentElement","not an element"),t.data(Bt,e)},push:function(t,e,n,r){return n=n||{},n.domOperation=r,D(t,e,n)},enabled:function(t,e){var n=arguments.length;if(0===n)e=!!F;else{if(J(t)){var r=_(t),o=$.get(r);1===n?e=!o:$.put(r,!e)}else e=F=!!t}return e}}}]}],Lt=["$animateProvider",function(){function t(t,e){t.data(a,e)}function e(t){t.removeData(a)}function n(t){return t.data(a)}var o="ng-animate-ref",i=this.drivers=[],a="$$animationRunner";this.$get=["$$jqLite","$rootScope","$injector","$$AnimateRunner","$$HashMap","$$rAFScheduler",function(a,s,u,d,l,p){function m(t){function e(t){if(t.processed)return t;t.processed=!0;var n=t.domNode,r=n.parentNode;i.put(n,t);for(var a;r;){if(a=i.get(r)){a.processed||(a=e(a));break}r=r.parentNode}return(a||o).children.push(t),t}function n(t){var e,n=[],r=[];for(e=0;e<t.children.length;e++)r.push(t.children[e]);var o=r.length,i=0,a=[];for(e=0;e<r.length;e++){var s=r[e];o<=0&&(o=i,i=0,n.push(a),a=[]),a.push(s.fn),s.children.forEach(function(t){i++,r.push(t)}),o--}return a.length&&n.push(a),n}var r,o={children:[]},i=new l;for(r=0;r<t.length;r++){var a=t[r];i.put(a.domNode,t[r]={domNode:a.domNode,fn:a.fn,children:[]})}for(r=0;r<t.length;r++)e(t[r]);return n(o)}var g=[],v=c(a);return function(l,c,y){function b(t){var e="["+o+"]",n=t.hasAttribute(o)?[t]:t.querySelectorAll(e),r=[];return H(n,function(t){var e=t.getAttribute(o);e&&e.length&&r.push(t)}),r}function w(t){var e=[],n={};H(t,function(t,r){var i=t.element,a=_(i),s=t.event,u=["enter","move"].indexOf(s)>=0,d=t.structural?b(a):[];if(d.length){var l=u?"to":"from";H(d,function(t){var e=t.getAttribute(o);n[e]=n[e]||{},n[e][l]={animationID:r,element:E(t)}})}else e.push(t)});var r={},i={};return H(n,function(n){var o=n.from,a=n.to;if(!o||!a){var s=o?o.animationID:a.animationID,u=s.toString();return void(r[u]||(r[u]=!0,e.push(t[s])))}var d=t[o.animationID],l=t[a.animationID],c=o.animationID.toString();if(!i[c]){var f=i[c]={structural:!0,beforeStart:function(){d.beforeStart(),l.beforeStart()},close:function(){d.close(),l.close()},classes:S(d.classes,l.classes),from:d,to:l,anchors:[]};f.classes.length?e.push(f):(e.push(d),e.push(l))}i[c].anchors.push({out:o.element,"in":a.element})}),e}function S(t,e){t=t.split(" "),e=e.split(" ");for(var n=[],r=0;r<t.length;r++){var o=t[r];if("ng-"!==o.substring(0,3))for(var i=0;i<e.length;i++)if(o===e[i]){n.push(o);break}}return n.join(" ")}function k(t){for(var e=i.length-1;e>=0;e--){var n=i[e];if(u.has(n)){var r=u.get(n),o=r(t);if(o)return o}}}function C(){l.addClass(et),I&&a.addClass(l,I),
x&&(a.removeClass(l,x),x=null)}function M(t,e){function r(t){n(t).setHost(e)}t.from&&t.to?(r(t.from.element),r(t.to.element)):r(t.element)}function A(){var t=n(l);!t||"leave"===c&&y.$$domOperationFired||t.end()}function D(t){l.off("$destroy",A),e(l),v(l,y),h(l,y),y.domOperation(),I&&a.removeClass(l,I),l.removeClass(et),T.complete(!t)}y=f(y);var B=["enter","move","leave"].indexOf(c)>=0,T=new d({end:function(){D()},cancel:function(){D(!0)}});if(!i.length)return D(),T;t(l,T);var L=r(l.attr("class"),r(y.addClass,y.removeClass)),I=y.tempClasses;I&&(L+=" "+I,y.tempClasses=null);var x;return B&&(x="ng-"+c+tt,a.addClass(l,x)),g.push({element:l,classes:L,event:c,structural:B,options:y,beforeStart:C,close:D}),l.on("$destroy",A),g.length>1?T:(s.$$postDigest(function(){var t=[];H(g,function(e){n(e.element)?t.push(e):e.close()}),g.length=0;var e=w(t),r=[];H(e,function(t){r.push({domNode:_(t.from?t.from.element:t.element),fn:function(){t.beforeStart();var e,r=t.close;if(n(t.anchors?t.from.element||t.to.element:t.element)){var o=k(t);o&&(e=o.start)}if(e){var i=e();i.done(function(t){r(!t)}),M(t,i)}else r()}})}),p(m(r))}),T)}}]}];e.module("ngAnimate",[]).directive("ngAnimateChildren",gt).factory("$$rAFScheduler",mt).provider("$$animateQueue",Tt).provider("$$animation",Lt).provider("$animateCss",kt).provider("$$animateCssDriver",Ct).provider("$$animateJs",Mt).provider("$$animateJsDriver",At)}(window,window.angular),function(){this.Collaboration=angular.module("giCollaboration",["giTranslation","giSiteMap","giPostMessage","giEvents","giExperiences","ngSVGAttributes","truncate","giRemoting","giLocalStorage","giSessionStorage","giDownloadRemoteClient","giSiteMap","templates","giModal","ngSanitize","ngAnimate"]),this.Collaboration.config(["$locationProvider","$provide",function(t,e){var n;return(null!=(n=window.history)?n.pushState:void 0)&&t.html5Mode({enabled:!0,requireBase:!1,rewriteLinks:!1}),e.decorator("$templateCache",["$delegate",function(t){var e,n;return e=[],n=t.put,t.put=function(t,r){return n(t,r),e.push(t)},t.getKeys=function(){return e},t}])}]),this.Collaboration.run(["$document","$window","remoteApps",function(t,e,n){var r,o,i,a,s,u,d,l;if(!e.remoteWidgetsBootstrapped&&(null!=(a=window.giLocalStorage)?a.getItem("remoteWidgets"):void 0)&&(e.remoteWidgetsBootstrapped=!0,$("base").attr("href"),d=JSON.parse(null!=(s=window.giLocalStorage)?s.getItem("remoteWidgets"):void 0))){l=[];for(i in d)r=d[i],(null!=r&&null!=(u=r.manifest)?u.match(/[a-z_\/\-]+/):void 0)&&(o=angular.element("<div ng-non-bindable><div class='"+i+"-container'></div></div>"),$("body").append(o),o.data("$injector",null),l.push(n.bootstrap(o.children(),i,r.manifest)));return l}}])}.call(this),function(){Boards.controller("AltCaptionModalController",["$scope","boardStorage","eventBus","preferences",function(t,e){return t.editorialRfIsActive=visitorExperiences.isActive("editorialrf"),t.captionFocus=!1,t.form={assetUri:null,altCaption:null,dirty:!1},t.attachEvents=function(){return this.detachEvents(),$(window).on("keydown",this.onKeypress)},t.detachEvents=function(){return $(window).off("keydown",this.onKeypress)},t.onKeypress=function(e){if(!t.captionFocus&&t.modalVisible())return 37===e.which?(t.clearForm(),t.previous()):39===e.which&&(t.clearForm(),t.next()),t.$apply()},t.modalAsset=function(){var t,n,r,o;for(o=e.boardAssets(),n=0,r=o.length;n<r;n++)if(t=o[n],t.uri===e.altCaptionAssetUri)return t},t.modalAssetUrl=function(){if(this.modalAsset()&&this.modalAsset().delivery_urls)return this.modalAsset().delivery_urls.comp||this.modalAsset().delivery_urls.thumb256},t.modalForm=function(){return this.form.dirty||this.form.assetUri===e.altCaptionAssetUri||this.modalAsset()&&(this.attachEvents(),this.form.assetUri=this.modalAsset().uri,this.form.altCaption=this.modalAsset().alt_caption||""),this.form},t.clearForm=function(){return this.form.assetUri=null,this.form.altCaption=null,this.form.dirty=!1},t.close=function(){return this.detachEvents(),this.clearForm()},t.save=function(){return e.updateAssetAltCaption(e.altCaptionAssetUri,this.form.altCaption),this.modalAsset().alt_caption=this.form.altCaption,this.clearForm()},t.next=function(){var t,n,r,o,i,a;for(r=0,n=e.boardAssets(),a=[],o=0,i=n.length;o<i;o++){if(t=n[o],r++,t.uri===e.altCaptionAssetUri){r===n.length&&(r=0),e.altCaptionAssetUri=n[r].uri;break}a.push(void 0)}return a},t.previous=function(){var t,n,r,o,i,a;for(r=0,n=e.boardAssets(),a=[],o=0,i=n.length;o<i;o++){if(t=n[o],t.uri===e.altCaptionAssetUri){0===r&&(r=n.length),e.altCaptionAssetUri=n[r-1].uri;break}a.push(r++)}return a},t.modalVisible=function(){return $.gettyModal.find(".alt-caption-modal").modal.is(":visible")},t.saveAndNext=function(){return this.save(),this.next()},t.saveAndClose=function(){return this.save(),this.close()},t.formDirty=function(){return this.form.dirty=!0}}])}.call(this),function(){Boards.controller("AssetModalController",["$scope","boardStorage","eventBus","preferences",function(e,n,r){return e.modalAsset=function(){var t,r,o,i;for(i=n.boardAssets(),r=0,o=i.length;r<o;r++)if(t=i[r],t.id===e.modalAssetId)return t},e.comments=function(){var t;return null!=(t=e.modalAsset())?t.comments:void 0},e.newComment="",e.addComment=function(){e.newComment&&""!==e.newComment.trim()&&(n.addAssetComment(e.modalAsset().uri,e.newComment),e.newComment="",r.trigger("favorites.addAssetComment"))},e.deleteComment=function(t){return r.trigger("favorites.removeAssetComment"),n.deleteAssetComment(e.modalAsset().uri,t.id)},e.prevAsset=function(){var t,r,o,i,a;for(a=n.boardAssets(),o=r=0,i=a.length;r<i;o=++r)if(t=a[o],t.id===e.modalAssetId)return n.boardAssets()[o-1]},e.nextAsset=function(){var t,r,o,i,a;for(a=n.boardAssets(),o=r=0,i=a.length;r<i;o=++r)if(t=a[o],t.id===e.modalAssetId)return n.boardAssets()[o+1]},e.iStockSignatureCollection=function(t){return"Signature"===t.i_stock_collection||"SignaturePlus"===t.i_stock_collection},e.getAssetCollection=function(n){return"istock"===window.tracking_data.site_nickname?e.iStockSignatureCollection(n)?t("site_specific.istock.signature_collection"):t("site_specific.istock.essentials_collection"):n.license_type},e.assetImageSize=function(t){return t.is_video||"istock"!==window.tracking_data.site_nickname?t.delivery_urls.comp||t.delivery_urls.thumb256:t.delivery_urls.comp1024_watermarked}}])}.call(this),function(){Boards.controller("BoardManagementController",["$scope","$window","boardManagementStorage","setManagementStorage","lightboxStorage","eventBus","siteMap",function(e,n,r,o,i,a,s){var u,d,l,c,f,h,p,m,g,v;return e.sortOptions=[{value:"LastUpdatedDate",text:t("last_updated"),reverse:!0,showInDropDown:!0},{value:"Name",text:t("board_name"),reverse:!0,showInDropDown:!1},{value:"CreatedByName",text:t("owner"),reverse:!0,showInDropDown:!1},{value:"Name",text:t("board_name")+" "+t("a_to_z"),reverse:!1,showInDropDown:!0},{value:"Name",text:t("board_name")+" "+t("z_to_a"),reverse:!0,showInDropDown:!0},{value:"CreatedByName",text:t("owner")+" "+t("a_to_z"),reverse:!1,showInDropDown:!1},{value:"CreatedByName",text:t("owner")+" "+t("z_to_a"),reverse:!0,showInDropDown:!1}],e.selectedSortOption=e.sortOptions[0],e.setsTabIsSelected=!1,u=$(".board-list"),d=$(".board-list .content ul"),$(".set-list"),p=$(".set-list .content ul"),e.boardList=function(){return r.boardList},e.emptyList=function(){return r.boardList},e.boardOwner=function(e){var n;if(n=r.collaborator(e.created_by_id))return"",n.first_name&&n.last_name?t("name_format",{first_name:n.first_name,last_name:n.last_name}):n.user_name?n.user_name:t("anonymous")},e.shouldShowCreateBoardModal=!1,e.showCreateBoardModal=function(){return $("body").css("overflow","hidden"),e.shouldShowCreateBoardModal=!0},e.hideCreateBoardModal=function(){return $("body").css("overflow",""),e.shouldShowCreateBoardModal=!1},e.sortBy=function(t){if(!e.ownedBoardsSelected()||"CreatedByName"!==e.sortOptions[t].value)return e.selectedSortOption=e.sortOptions[t],e.sortOptions[t].reverse=!e.sortOptions[t].reverse,e.afterSortOptionChanged()},e.afterSortOptionChanged=function(){return r.sortField=e.selectedSortOption.value,r.sortAscending=!e.selectedSortOption.reverse,r.loadBoardList()},e.showDeleteButton=function(t){return r.boardList.map(function(t){return t.showDeleteButton=!1}),t.showDeleteButton=!0},e.hideDeleteButton=function(t){return t.showDeleteButton=!1},e["delete"]=function(o){if(e.hideDeleteButton(o),n.confirm(t("confirm_delete_board")))return"Editor"===o.collaborator_role?r.leave(o.id):(r["delete"](o),a.trigger("favorites.deleteBoard"))},l="",e.editBoardName=function(t){return l=t.name,a.trigger("favorites.editBoardName"),e.editingBoardId=t.id},e.saveBoardName=function(t,n){if(""!==t.name&&(null!=n&&n.preventDefault(),e.editingBoardId=null,t.name!==l))return r.setName(t.name,t.id)},v="#sets"===n.location.hash?3:0,e.ownedBoardsLoaded=!0,e.ownedBoardsSelected=function(){return 0===v},e.selectTab=function(t){var o,i;if(e.setsTabIsSelected=!1,n.location.hash="boards",o=v!==t,v=t,i=0===t,o)return g(d),h(u,".5"),r.showSharedBoards=!i,r.loadBoardList({pageNumber:1}).then(function(){return function(){return e.ownedBoardsLoaded=0===t,m(d),f(u)}}())},e.selectSetsTab=function(){return e.setsTabIsSelected=!0,n.location.hash="sets",v=3},e.isSelected=function(t){return v===t},e.canInvite=function(t){return t.invitation_code},e.couldInvite=function(t){var e;return t.invitation_code||"Editor"===(e=t.collaborator_role)||"Owner"===e||"Admin"===e},e.shareUrl=function(t){return window.Navigation.getFullUrl(e.path(t))},e.inviteUrl=function(t){if(t.invitation_code)return window.Navigation.getFullUrl(e.path(t)+"?invitation_code="+t.invitation_code)},e.path=function(t){return e.pathToBoardId(t.id)},e.pathToBoardId=function(t){return s.cleanRelativePath("/collaboration/boards/"+t)},e.hasLightbox=function(){return i.hasLightbox},e.ownedBoardCount=function(){return e.ownedBoardsLoaded?r.filteredBoardCount:e.totalBoardCount()-r.filteredBoardCount},e.sharedBoardCount=function(){if(null!=r.totalBoardCount)return e.totalBoardCount()-e.ownedBoardCount()},e.filteredBoardCount=function(){if(null!=r.filteredBoardCount)return r.filteredBoardCount},e.totalBoardCount=function(){if(null!=r.totalBoardCount)return r.totalBoardCount},e.totalSetCount=function(){if(null!=o.totalSetCount)return o.totalSetCount},e.filteredSetCount=function(){return o.filteredSetCount},e.setList=function(){return o.setList},e.previousPage=function(){return e.pageNumber(e.pageNumber()-1)},e.nextPage=function(){if(e.pageNumber()!==e.pageCount())return e.pageNumber(e.pageNumber()+1)},e.pageCount=function(){return r.pageCount()},e.pageNumber=function(t){return r.pageNumber(t)},e.onPageNumberKeyup=function(t){if(13===t.keyCode)return e.pageNumber(t.target.value)},e.shareBoard=function(t){var e;return a.trigger("favorites.shareBoard"),null!=(e=window.dataLayer)?e.push({event:"shareBoard",boardName:t}):void 0},g=function(t){return t.inlineSpinner()},m=function(t){return t.inlineSpinner(!1)},h=function(t,e){return t.css("opacity",e)},f=function(t){return t.css("opacity","1")},a.on("collaboration.newBoard",function(){return e.hideCreateBoardModal(),v=-1,e.selectTab(0)}),c=function(){return"#sets"===n.location.hash?(e.setsTabIsSelected=!0,g(p),h(p,".2"),o.loadSets().then(function(){return function(){return m(p),f(p)}}()),r.loadBoardList()):(n.location.hash="#boards",g(d),h(d,".2"),r.loadBoardList().then(function(){return function(){return m(d),f(d)}}()),o.loadSets())},c(),this}])}.call(this),function(){this.BoardHistory=function(){function e(t){this.board_id=t.board_id,this.items=(t.items||[]).sort(function(t,e){return t.created_date>e.created_date?-1:1})}return e.prototype.deletedBy=function(){var e,n,r,o,i,a,s;for(o=this.items.reverse(),n=0,r=o.length;n<r;n++)if(e=o[n],"DeleteBoard"===e.action){if((null!=e&&null!=(i=e.created_by)?i.first_name:void 0)||(null!=e&&null!=(a=e.created_by)?a.last_name:void 0))return t("name_format",{first_name:e.created_by.first_name,last_name:e.created_by.last_name});if(null!=e&&null!=(s=e.created_by)?s.name:void 0)return e.created_by.name}},e.prototype.lastBoardName=function(){var t,e,n,r,o,i;for(r=this.items.reverse(),e=0,n=r.length;e<n;e++)if(t=r[e],("UpdateBoard"===(o=t.action)||"CreateBoard"===o)&&(null!=t&&null!=(i=t.data)?i.name:void 0))return t.data.name},e}()}.call(this),function(){this.GiDateTime=function(){function t(){}return t.makeUniversal=function(t){var e;return t?(e=t.indexOf("Z")>-1||t.match(/T.*[+-]/),e?t:t+"Z"):null},t}()}.call(this),angular.module("giSuperStrip",[]),function(){angular.module("giSuperStrip").directive("superStrip",function(){return{link:function(){return function(){if(!$("html").hasClass("pa-super-strip-visible"))return $("html").addClass("pa-super-strip-visible")}()}}})}.call(this),function(){Boards.controller("BoardsController",["$scope","$rootScope","$location","$window","$filter","boardStorage","eventBus","t","giLocalStorage","preferences","siteMap",function(t,e,n,r,o,i,a,s,u,d,l){var c,f,h,p,m,g,v,_,y,b,w,S,k,C,M,A,D,B,T,L,I;return t.metadata=i.metadata,t.boardCommentsVisible=!1,t.boardOpen=!0,t.displayBackButton=!1,t.assets=function(){return function(){return i.boardAssets()}}(),window.bs.refreshMenu=!1,B=$(".board-content"),m=function(){return L(),u.setItem("collaboration.hasVisitedBoards",!0),r.collaboration.initialBoard?(i.loadBoardObject(r.collaboration.initialBoard),i.setCurrentBoard(r.collaboration.initialBoard.id)):r.collaboration.initialBoardHistory?($("[ng-controller=BoardsController]").removeAttr("style"),i.onBoardMissing(void 0,r.collaboration.initialBoardHistory)):i.setCurrentBoard(c()),i.loadBoardList(),i.loadBoardAssets(i.boardId).then(T,T),w(),"default"===i.boardId&&(t.namingFirstBoard=!0,t.showCreateBoardModal()),t.editorialRfIsActive=visitorExperiences.isActive("editorialrf"),a.trigger("favorites.loadBoardPage")},p=function(){if(b())return m()},t.removeFromGrid=function(e){var n;return n={assetId:e,productString:""},i.getProductString(e).then(function(){return function(t){return n.productString=t.data.products}}())["finally"](function(){return function(){return a.trigger("favorites.removeFromBoard",n)}}()),t.removeItem(e)},t.removeItem=function(e){return t.removeItems([e])},t.removeItems=function(e){var n;if(t.showIdentifyModalIfNeeded()&&(!(e.length===(null!=(n=i.boardAssets())?n.length:void 0)&&e.length>1)||r.confirm(s("are_you_sure_remove_all_images"))))return i.removeItems(e)},t.shareBoardClicked=function(){var t,e;t={},b()||(t.pageName="FavoritesBoard-Overlay"),$(document).trigger("favorites.shareBoard",[t]),null!=(e=window.dataLayer)&&e.push({event:"shareBoard",boardName:this.metadata.name})},t.deleteBoard=function(){if(r.confirm(s("confirm_delete_board")))return i["delete"]().then(function(){return y()})},t.removeBoard=function(){if(r.confirm(s("confirm_remove_board")))return i.leave().then(function(){return y()})},y=function(){var e;return e=_(),e?t.boardId=e.id:(t.boardId="default",a.trigger("collaboration.lastBoardGone")),t.boardChanged(t.boardId)},t.boardPickerSelection=function(e){return e?t.boardChanged(e):i.boardId},t.currentBoardName=function(){return i.metadata.name},v=function(t){var e,n,r,o,a;if(null==t&&(t=!1),!i.boardList())return[];for(o=i.boardList(),a=[],n=0,r=o.length;n<r;n++)e=o[n],e.is_owner&&e.id!==i.boardId&&a.push(e);return a},D=function(t){var e,n,r,o,a;if(null==t&&(t=!1),!i.boardList())return[];for(o=i.boardList(),a=[],n=0,r=o.length;n<r;n++)e=o[n],e.is_owner||e.id===i.boardId||a.push(e);return a},_=function(){var t,e,n,r,o,a,s;for(a=v(),e=0,r=a.length;e<r;e++)if(t=a[e],t.id!==i.boardId)return t;for(s=D(),n=0,o=s.length;n<o;n++)if(t=s[n],t.id!==i.boardId)return t},t.updateBoardName=function(){return i.boardId?""===t.metadata.name.trim()?void(t.metadata.name=i.board.name):(a.trigger("favorites.editBoardName"),i.setName(t.metadata.name)):i.newBoard(t.metadata.name)},t.updateBoardDescription=function(){if(i.can("UpdateDescription"))return i.setDescription(t.metadata.description)},t.currentBoardId=function(e){return null==e&&(e=null),e?t.boardId=e:t.boardId},t.isNullBoard=function(){return"default"===i.boardId},t.boardLoaded=function(){return i.boardLoaded},t.boardDeleted=function(){return i.boardDeleted},t.hasItems=function(){var t;return(null!=(t=i.boardAssets())?t.length:void 0)>0},t.descriptionEditable=function(){return f()||i.can("UpdateDescription")},t.boardNameEditable=function(){return i.can("UpdateName")},t.canDelete=function(){return i.can("Delete")},t.canRemove=function(){return i.can("Leave")},t.canInvite=function(){return i.invitationCode},t.couldInvite=function(){return i.invitationCode||!i.isReadOnly()},t.canComment=function(){return f()||i.can("AddComment")},t.couldRemoveAssets=function(){return f()||i.can("RemoveAsset")},t.canAddAssets=function(){return i.can("AddAsset")},t.canRemoveAssets=function(){return i.can("RemoveAsset")},t.canReorderAssets=function(){return i.can("ReorderAsset")&&!i.searchPhrase()},t.totalAssetCount=function(){var t;return(null!=(t=i.board)?t.total_asset_count:void 0)||0},t.filteredAssetCount=function(){return i.filteredAssetCount()},t.isOwner=function(){var t;return null!=(t=i.board)?t.is_owner:void 0},t.isSharer=function(){var t;return"Editor"===(null!=(t=i.board)?t.collaborator_role:void 0)},t.isViewOnly=function(){return!t.isOwner()&&!t.isSharer()},t.boardAssetsPageNumber=function(t){return i.boardAssetsPageNumber(t)},t.showZeroSearchWithinMessage=function(){return!i.boardAssetsAreLoading()&&i.searchWithinPhrase()&&0===i.boardAssets().length},t.emptyBoard=function(){return!i.boardAssetsAreLoading()&&!t.hasItems()&&!i.searchWithinPhrase()},t.hideSearchWithinBar=function(){return t.emptyBoard()||t.isNullBoard()||t.boardDeleted()},t.boardAssetsPageNumberByEnter=function(t){if(13===t.keyCode)return i.boardAssetsPageNumber(t.target.value)},t.boardAssetsNextPage=function(){return a.trigger("favorites.nextAssetsPage"),t.boardAssetsPageNumber(parseInt(t.boardAssetsPageNumber(),10)+1)},t.boardAssetsPreviousPage=function(){return t.boardAssetsPageNumber(parseInt(t.boardAssetsPageNumber(),10)-1)},t.boardAssetsPageCount=function(){return i.boardAssetsPageCount()},h=function(){var t,e,n,r,o;if(!i.boardAssets())return[];for(t=[],o=i.boardAssets(),e=0,r=o.length;e<r;e++)n=o[e],t.push({id:n.id,thumb:n.delivery_urls.comp||n.delivery_urls.thumb256,target:n.landing_url,licenseType:n.license_type,agreement:n.agreement});return t},t.getPagerItems=function(){return{source:"search",assets:h()}},f=function(){return!!g()&&i.isReadOnly()},t.shareUrl=function(){return window.Navigation.getFullUrl(t.path())},t.inviteUrl=function(){if(i.invitationCode)return window.Navigation.getFullUrl(t.path()+"?invitation_code="+i.invitationCode)},t.isReadOnly=function(){return i.isReadOnly()},t.path=function(){return l.cleanRelativePath("/collaboration/boards/"+i.boardId)},t.encodedPathWithInvitationCode=function(){return encodeURIComponent(t.path()+"?invitation_code="+g())},t.encodedUrlWithInvitationCode=function(){return encodeURIComponent(window.Navigation.getFullUrl(t.path()+"?invitation_code="+g()))},t.encodedReturnUrl=function(){var t,e,r;return e=location.pathname,r=location.search,t=n.hash(),b()||(t="board"+t),t.length>0&&(t="#"+t),encodeURIComponent(e+r+t)},S=function(){return r.location=l.cleanRelativePath("/collaboration/boards")},k=function(){return r.location=l.cleanRelativePath("/collaboration/boards#sets")},M=function(){return t.showCreateBoardModal()},C=function(){return a.trigger("favorites.switchBoard"),i.setCurrentBoard(t.boardId)},t.boardChanged=function(e){switch(t.boardId=e,e){case"new":return M();case"boards":return S();case"sets":return k();default:return L(),C(e).then(T,T)}},t.shouldShowCreateBoardModal=!1,t.showCreateBoardModal=function(){return $("body").addClass("modal-boards"),t.shouldShowCreateBoardModal=!0},t.hideCreateBoardModal=function(){if($("body").removeClass("modal-boards"),t.shouldShowCreateBoardModal=!1,t.namingFirstBoard&&"default"===i.boardId)return r.history.back(),!1},a.on("collaboration.newBoard",function(){if($("body").removeClass("modal-boards"),t.shouldShowCreateBoardModal=!1,this.newBoardRequested)return i.addItemsCallback(this.newBoardRequestedAssetIds),this.newBoardRequested=!1,this.newBoardRequestedAssetIds=[]}),!1,[],a.on("collaboration.newBoardRequested",function(e){return t.showCreateBoardModal(),this.newBoardRequested=!0,this.newBoardRequestedAssetIds=e}),t.showIdentifyModalIfNeeded=function(e){return null==e&&(e=null),!i.isReadOnly()||!!g()&&(null!=e&&e.preventDefault(),t.identify(),!1)},t.identify=function(e){return null==e&&(e=null),document.activeElement.blur(),null!=e&&e.preventDefault(),i.join(g(),t.identifyName,t.identifyEmail).success(function(){return $.gettyModal.find(".identify-modal").close(),n.search("")}).error(function(t,e){if(403===e)return $.gettyModal.find(".identify-modal").open()})},t.comments=function(){return t.metadata.comments},t.boardCreator=function(){return t.creatorOf(null!=i?i.board:void 0)},t.creatorOf=function(t){var e;if(e=i.collaborator(null!=t?t.created_by_id:void 0))return e.first_name||e.last_name?s("name_format",{first_name:e.first_name,last_name:e.last_name}):e.user_name?e.user_name:void 0},t.createdDate=function(){var t,e;return t=GiDateTime.makeUniversal(null!=i&&null!=(e=i.board)?e.created_date:void 0),t?moment(t).fromNow():null},t.lastEditedDate=function(){var t,e;return t=GiDateTime.makeUniversal(null!=i&&null!=(e=i.board)?e.last_updated_date:void 0),t?moment(t).fromNow():null},A=function(){$(".board-comments .new-comment-section .new-comment").focus()},t.toggleBoardCommentsVisibility=function(){if(t.boardCommentsVisible=!t.boardCommentsVisible,t.boardCommentsVisible)return setTimeout(A,1)},t.makeBoardBackButtonVisible=function(){return!!t.directedFromPanel()&&(t.displayBackButton=!0,!0)},b=function(){var t;return t="/collaboration/boards",n.path().match(t)||window.location.pathname.match(t)},w=function(){var e;if(e=function(t){return document.createElement("a").appendChild(document.createTextNode(t)).parentNode.innerHTML},b())return $("meta[name=description]").attr("content",s("board_description_tag",{board_name:t.metadata.name})),$("title").html(s("board_title_tag",{board_name:e(t.metadata.name)}))},I=function(){if(history.pushState&&b()&&t.boardId&&""!==t.boardId&&!t.makeBoardBackButtonVisible())return n.path(l.cleanRelativePath("/collaboration/boards/"+t.boardId)),i.isReadOnly()||n.search(""),n.replace()},g=function(){return history.pushState?n.search().invitation_code:window.Navigation.queryStringAsObject().invitation_code},t.directedFromPanel=function(){return!!n.search().panel},c=function(){return history.pushState?n.path().split("/").slice(-1).first():r.location.pathname.split("/").slice(-1).first()},L=function(){return B.css("opacity",".5"),B.inlineSpinner()},T=function(){return B.css("opacity","1"),B.inlineSpinner(!1)},t.iStockSignatureCollection=function(t){return"Signature"===t.i_stock_collection||"SignaturePlus"===t.i_stock_collection},t.linkSourceForSection=function(t){var e,n,r;return e="public",(null!=(n=i.board)?n.is_owner:void 0)?e="owned":"Editor"===(null!=(r=i.board)?r.collaborator_role:void 0)&&(e="shared"),"board-"+e+"-"+t},a.on("collaboration.boardLoaded",function(){return t.boardId=i.boardId,window.bs.refreshMenu=!0,t.makeBoardBackButtonVisible(),I(),t.showIdentifyModalIfNeeded(),$("[ng-controller=BoardsController]").removeAttr("style"),w()}),p()}])}.call(this),function(){Boards.controller("BoardsToolboxController",["$scope","$document","$timeout","boardStorage","eventBus",function(e,n,r,o,i){return e.showChooseBoardModal=function(t){var e;return e={assetId:t.currentTarget.attributes["data-assetid"].value,assetThumbnailUrl:t.currentTarget.attributes["data-thumb-url"].value},i.trigger("collaboration.chooseBoardClicked",e)},function(){return n.safeReady(function(){var e,i,a,s,u,d,l;return l=function(t){var e;return"function"==typeof jQuery&&t instanceof jQuery&&(t=t[0]),e=t.getBoundingClientRect(),e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)},a=null,d=null,s=null,u=null,e=null,i=null,n.on("mouseenter",".add-to-board, aside#toolbox, #triangle",function(n){var c,f,h,p,m,g;if(m=$(this),$("body").hasClass("search_container"))e=window.currentSite.isGetty?$(n.target).closest("article").find(".favorites"):$(n.target).closest(".favorites").find(".add-to-board"),i=window.currentSite.isGetty?e.closest(".details-overlay, .actions-overlay"):e.closest("article");else{if(!$("body").hasClass("asset_detail_container"))return;e=window.currentSite.isGetty?$(n.target).closest(".add-to-favorites-container").find(".add-to-board"):$(n.target).closest(".favorites").find(".add-to-board"),i=window.currentSite.isGetty?e.closest(".add-to-favorites-container"):e.closest("section.comp")}e.attr("id","activeness"),m.hasClass("add-to-board")&&(f=m.data("assetid").toString(),m.data("thumb-url"),f&&(c=o.hasItem(f)?t("remove_from_board").replace(".",""):t("save_to_board")),a&&0!==a.length||(a=$("aside#toolbox"),d=a.find("div.action-toolbox"),s=d.find(".action-title"),u=d.find(".board-name")),s.text(c),u.text(o.metadata.name),a.attr("data-assetid",f),a.attr("data-thumb-url",m.data("thumb-url")),i.find("#toolbox").length<1&&a.appendTo(i)),window.currentSite.isGetty?a.addClass("open"):r(function(){return a.addClass("open")},0),window.currentSite.isGetty&&null!=e&&(null!=$("#triangle")&&$("#triangle").remove(),e.append("<span id='triangle'></span>"),i.hasClass("add-to-favorites-container")||(g=80,a.css({top:e.position().top-39,left:e.position().left-16}),d.css({left:-75}),l(d)||(p=d[0].getBoundingClientRect(),h=Math.abs(p.left/8),g-=h,d.css({left:h}),p=null,h=null))),e.hasClass("in-board")&&e.first("p").after()}),n.on("mouseleave",".add-to-board, aside#toolbox",function(){var t;t=window.currentSite.isGetty?5:100,setTimeout(function(){null==a||a.hasClass("open")||($("#activeness").attr("id",""),null!=$("#triangle")&&$("#triangle").remove(),a.appendTo("body"))},t),null!=a&&a.removeClass("open")})})}()}])}.call(this),function(){Boards.controller("ChooseBoardController",["$scope","boardStorage","boardToolboxStorage","eventBus",function(t,e,n,r){var o;return r.on("collaboration.chooseBoardClicked",function(r){return $("body").css("overflow","hidden"),t.assetId=r.assetId,t.thumbnail_url=r.assetThumbnailUrl,t.newBoardName="",t.boardNameFilter="",t.submitted=!1,n.currentBoardList().then(function(){return function(){return t.boardList=n.boardList,"default"===e.boardId||1===t.boardList.length?t.showSaveToNewBoardAction():t.showChooseBoardAction(),t.shouldShowChooseBoardLink=t.boardList.length>0,t.shouldShowChooseBoardModal=!0}}())}),t.addToBoard=function(e){return n.addToBoard(t.assetId,e),t.hideChooseBoardModal()},t.saveToNewBoard=function(){if(t.submitted=!0,t.newBoardName&&""!==t.newBoardName.trim())return n.addToNewBoard(t.newBoardName,t.addToBoard),r.trigger("boardsToolboxSaveNewBoard")},t.hideChooseBoardModal=function(){return $("body").css("overflow",""),t.shouldShowChooseBoardModal=!1},o=!0,t.showChooseBoardAction=function(){return t.boardNameFilter="",o=!0},t.shouldShowChooseBoardAction=function(){return o},t.showSaveToNewBoardAction=function(){return t.newBoardName="",o=!1},t.shouldShowSaveToNewBoardAction=function(){return!o},t.shouldShowTooManyBoardsMessage=function(){return n.totalBoardCount()>100},function(){return t.shouldShowChooseBoardModal=!1}()}])}.call(this),function(){Boards.controller("CommentsController",["$scope",function(t){return this.hover=function(){return function(t){return t.showDeleteIcon=!t.showDeleteIcon}}(),this.swipeLeft=function(){return function(e){return t.comments().map(function(t){return t.showDeleteButton=!1}),e.showDeleteButton=!0}}(),this.swipeRight=function(){return function(t){return t.showDeleteButton=!1}}(),this}])}.call(this),function(){Boards.controller("CreateBoardController",["$scope","boardStorage","eventBus",function(t,e,n){return this.newBoardName="",this.submitted=!1,n.on("collaboration.createBoardMenuItemClicked",function(){return t.shouldShowCreateBoardModalFromMenu=!1,t.showCreateBoardModalFromMenu()}),t.showCreateBoardModalFromMenu=function(){return $("body").addClass("modal-boards"),t.shouldShowCreateBoardModalFromMenu=!0},t.hideCreateBoardModalFromMenu=function(){return $("body").removeClass("modal-boards"),t.shouldShowCreateBoardModalFromMenu=!1},this.createNewBoard=function(r){return function(){var o;r.submitted=!0,r.newBoardName&&""!==r.newBoardName.trim()&&(n.trigger("favorites.createBoardFromPicker"),null!=(o=window.dataLayer)&&o.push({event:"createBoard",boardName:r.newBoardName}),e.newBoard(r.newBoardName).then(function(t){return n.trigger("collaboration.newBoard",t.data.id)}),t.shouldShowCreateBoardModalFromMenu=!1,r.newBoardName="",r.submitted=!1)}}(this),this.anyBoardsOwned=function(){return function(){return"default"!==e.boardId}}(),this}])}.call(this),function(){Boards.controller("CurationController",["$scope","$window","$location","eventBus","curationStorage","curationService","boardStorage",function(t,e,n,r,o,i,a){var s,u,d,l,c,f,h,p,m,g,v;if(r.on("collaboration.boardIdChanged",function(){return function(t){return c(t)}}()),c=function(e){return o.getCuratedSet(e).then(function(){return function(n){return t.setId=e,t.curationPublishedState=n.publishedState,t.curationPublishStatusMessage=n.curationMetaData.publishStatusMessage,t.curationMetaData.lastUpdatedDateTime=n.curationMetaData.lastUpdatedDateTime,t.curationMetaData.lastUpdatedRelative=n.curationMetaData.lastUpdatedRelative,t.curationMetaData.lastUpdatedBy=n.curationMetaData.lastUpdatedBy,t.curatedSetExists=!0,t.altCaptionsEnabled=n.altCaptionsEnabled,"NotYetPublished"!==n.publishedState&&(t.curationMetaData.publishedUrl=n.curationMetaData.publishedUrl),o.getKeywords(e).then(function(e){return o.keywords=e,t.keywords=o.keywords})}}(),function(){return function(e){var n;return t.curationPublishedState=null!=e?e.publishedState:void 0,t.curationPublishStatusMessage=null!=e&&null!=(n=e.curationMetaData)?n.publishStatusMessage:void 0,t.curationMetaData.lastUpdatedDateTime="",t.curationMetaData.lastUpdatedRelative="",t.curationMetaData.lastUpdatedBy="",t.keywords=[],t.curatedSetExists=!1,t.hidePanel()}}())},t.showPanel=function(){return t.sidePanelIsVisible=!0,$(".board-article").addClass("slim-article"),$("button.share").addClass("panel-visible-button"),$("#footer").addClass("slim-footer"),$(".side-panel").addClass("slim-panel"),$(".board-content").addClass("mobile-board-panel"),$(".curation-status-button").addClass("invisible-button"),!1},t.hidePanel=function(){return t.sidePanelIsVisible=!1,$(".board-article").removeClass("slim-article"),$("button.share").removeClass("panel-visible-button"),$("#footer").removeClass("slim-footer"),$(".side-panel").removeClass("slim-panel"),$(".board-content").removeClass("mobile-board-panel"),$(".curation-status-button").removeClass("invisible-button"),!1},t.createCuratedSet=function(){return $(".publish-status-modal .in-progress").inlineSpinner(),i.createSet(t.boardId).success(function(){return function(){return d(),t.showPanel()}}()).error(function(){return function(){return u()}}())},t.publishCuratedSet=function(){return 0===o.keywords.length?h():(l(),$(".publish-status-modal .in-progress").inlineSpinner(),t.curationPublishStatus="in_progress",f(t.boardId,t.altCaptionsEnabled)["finally"](function(){return g()})),!1},t.unpublishCuratedSet=function(){return i.unpublish(a.boardId).success(function(){return function(){return c(a.boardId)}}())},d=function(){return $(".publish-status-modal .in-progress").inlineSpinner(!1),c(a.boardId),t.curationPublishStatus="success",t.curatedSetExists=!0},u=function(){return $(".publish-status-modal .in-progress").inlineSpinner(!1),t.curationPublishStatus="error"},f=function(t,e){return i.update(t,{alt_captions_enabled:e}).success(function(){return function(){return s().then(function(){return i.publish(t).success(function(){return d()}).error(function(){return u()})})["catch"](function(){return u()})}}()).error(function(){return function(){return u()}}())},h=function(){return p(),m(),setTimeout(function(){v(),t.$apply()},700)},g=function(){return $.gettyModal.find(".publish-status-modal").open()},function(){return $.gettyModal.find(".publish-status-modal").close()},function(){return t.shakeMe},v=function(){return t.shakeMe=!1},p=function(){return t.shakeMe=!0},m=function(){return t.keywordMessageVisible=!0},l=function(){return t.keywordMessageVisible=!1},s=function(){var t;return t=o.keywords.map(function(t){return t.id}),o.addKeywords(a.boardId,t)},t.deleteKeyword=function(e){return o.keywords=o.keywords.filter(function(t){return t!==e}),t.keywords=o.keywords},
t.deleteKeywordFromCuratedSet=function(e){return o.deleteKeyword(t.boardId,e).success(function(){return function(){return o.getKeywords(t.boardId).then(function(e){return t.keywords=e})}}())},t.isCuratedSetPublished=function(){return"Published"===t.curationPublishedState},t.isCuratedSetUnpublished=function(){return"Unpublished"===t.curationPublishedState},t.isCuratedSetNotYetPublished=function(){return"NotYetPublished"===t.curationPublishedState},t.curatedSetExists=!1,t.curationMetaData={},t.curationPublishStatus="success",t.curationPublishedState="",t.curationPublishStatusMessage="",t.publish={},t.sidePanelIsVisible=!1,t.keywords=[],t.shakeMe=!1,t.keywordMessageVisible=!1,function(){var t;return t="/collaboration/boards/",n.path().match(t)||window.location.pathname.match(t)}())return c(a.boardId)}])}.call(this),function(){Collaboration.directive("focusMe",["$timeout",function(t){return{scope:{trigger:"@focusMe"},link:function(e,n){e.$watch("trigger",function(e){"true"===e&&t(function(){n[0].focus()},500)})}}}])}.call(this),function(){angular.module("giCollaboration").directive("giAssetTracking",function(){return{link:function(t,e,n){return t.getTrackingData=function(){return{assetAgreement:n.giAssetTracking}}}}})}.call(this),function(t){function e(t){var e=t.__resizeTriggers__,n=e.firstElementChild,r=e.lastElementChild,o=n.firstElementChild;r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight,o.style.width=n.offsetWidth+1+"px",o.style.height=n.offsetHeight+1+"px",n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight}function n(t){return t.offsetWidth!=t.__resizeLast__.width||t.offsetHeight!=t.__resizeLast__.height}function r(t){var r=this;e(this),this.__resizeRAF__&&d(this.__resizeRAF__),this.__resizeRAF__=u(function(){n(r)&&(r.__resizeLast__.width=r.offsetWidth,r.__resizeLast__.height=r.offsetHeight,r.__resizeListeners__.forEach(function(e){e.call(r,t)}))})}function o(){if(!a){var t=(y?y:"")+".resize-triggers { "+(b?b:"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t)),e.appendChild(n),a=!0}}var i=document.attachEvent,a=!1,s=t.fn.resize;if(t.fn.resize=function(t){return this.each(function(){this==window?s.call(jQuery(this),t):addResizeListener(this,t)})},t.fn.removeResize=function(t){return this.each(function(){removeResizeListener(this,t)})},!i){var u=function(){var t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){return window.setTimeout(t,20)};return function(e){return t(e)}}(),d=function(){var t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout;return function(e){return t(e)}}(),l=!1,c="",f="animationstart",h="Webkit Moz O ms".split(" "),p="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),m="",g=document.createElement("fakeelement");if(g.style.animationName!==undefined&&(l=!0),l===!1)for(var v=0;v<h.length;v++)if(g.style[h[v]+"AnimationName"]!==undefined){m=h[v],m+"Animation",c="-"+m.toLowerCase()+"-",f=p[v],l=!0;break}var _="resizeanim",y="@"+c+"keyframes "+_+" { from { opacity: 0; } to { opacity: 0; } } ",b=c+"animation: 1ms "+_+"; "}window.addResizeListener=function(t,n){i?t.attachEvent("onresize",n):(t.__resizeTriggers__||("static"==getComputedStyle(t).position&&(t.style.position="relative"),o(),t.__resizeLast__={},t.__resizeListeners__=[],(t.__resizeTriggers__=document.createElement("div")).className="resize-triggers",t.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',t.appendChild(t.__resizeTriggers__),e(t),t.addEventListener("scroll",r,!0),f&&t.__resizeTriggers__.addEventListener(f,function(n){n.animationName==_&&e(t)})),t.__resizeListeners__.push(n))},window.removeResizeListener=function(t,e){i?t.detachEvent("onresize",e):(t.__resizeListeners__.splice(t.__resizeListeners__.indexOf(e),1),t.__resizeListeners__.length||(t.removeEventListener("scroll",r),t.__resizeTriggers__=!t.removeChild(t.__resizeTriggers__)))}}(jQuery),function(){Collaboration.directive("giMosaic",["$window","$timeout",function(t,e){return{restrict:"A",link:function(n,r,o){var i,a,s,u,d;return s=!1,i=function(){return $(r).on("DOMNodeInserted DOMNodeRemoved",function(){return $(r).find("img").one("load",function(){return d()}),d()}),$(t).on("resize",function(){return d()}),$(r).resize(function(){return d()}),n.$watch(o.ngShow,function(t){if(t)return d()})},a=function(e,n){var r,o,i,a,s,u,l,c,f,h,p,m,g,v,_,y,b,w,S,k,C,M,A,D,B,T,L,I,x,P,F,O,Y,N;for(null==n&&(n=null),a=$(e).find("img"),I=!1,r=0,p=a.length;r<p;r++)o=a[r],o&&o.src?I=!0:$(o).one("load",function(){return d()});if(I){for(N=$(e).width(),k=.3,S=.825,w=2,300,N<640&&t.currentSite.isiStock?(C=!0,P=300*k):(C=!1,P=300*S),A=20,l=0,m=a.length;l<m;l++)u=a[l],$(u).height(P),n&&$(u).parents(n).css("width",""),$(u).trigger("collaboration.gridImageResize");for(h=0,L=[],T=[],c=0,g=a.length;c<g;c++)u=a[c],O=u.getBoundingClientRect().top,O!==h&&T.length>0&&(L.push(T),T=[]),h=O,T.push(u);for(L.push(T),B=[],f=0,v=L.length;f<v;f++){for(T=L[f],s=0,b=0,_=T.length;b<_;b++)u=T[b],s+=$(u).width();for(Y=T.length*A,x=N-Y,D=x/s,C?(s=x,i=$(u).height()/$(u).width(),F=s*i):F=D<w?D*P:w*P,M=0,y=T.length;M<y;M++)u=T[M],$(u).height(F),$(u).trigger("collaboration.gridImageResize");1===T.length?(n&&!C&&($(u).parents(n).css("width","100%"),$(u).parents(".board-item-image").children(".mosaic-select-overlay").css("width",$(u).width()),$(u).parents(".board-item-image").children(".mosaic-details-overlay").css("width",$(u).width())),B.push($(u).trigger("collaboration.gridImageResize"))):B.push(void 0)}return B}},d=function(){if(!s)return s=!0,e(function(){return u(),s=!1})},u=function(){return a(r,o.giMosaic)},i()}}}])}.call(this),function(){Collaboration.directive("giSearchButton",["$timeout","boardStorage","giLocalStorage",function(t,e,n){return{restrict:"A",link:function(r,o){var i;return i=!1,$(o).find("button[type=submit]").on("mousedown",function(){return i=!0}),$(o).find("input").on("blur",function(){if(!i)return t(function(){return r.showSearchBox=!1})}),r.searchPhrase="",r.searchButtonClick=function(){return r.showSearchBox=!0,t(function(){return $(o).find("input").focus()}),null},r.onSearchSubmit=function(n){var i,a,s;if(n.preventDefault(),s=$(o).find("input"),s.inlineSpinner(),""!==r.searchPhrase.trim())return i=function(){var t,e,n,o;for(n=r.searchPhrase.split(","),o=[],t=0,e=n.length;t<e;t++)a=n[t],o.push(a.trim());return o}(),e.fetchPanelItems(i).success(function(a){return a.length>0?(e.addItems(i),s.inlineSpinner(!1),r.searchPhrase="",t(function(){return s.blur()})):($(o).trigger("favorites.search"),n.currentTarget.submit())}).error(function(){return $(o).trigger("favorites.search"),n.currentTarget.submit()});s.inlineSpinner(!1)},r.lastSearchFamily=function(){var t;return t=n.getItem("search.lastSearchParameters")||"family=creative",window.Navigation.getQueryValue("family",t)||""}}}}])}.call(this),function(){Collaboration.directive("giSearchWithin",["$timeout","boardStorage","giLocalStorage","eventBus",function(t,e,n,r){return{restrict:"A",link:function(t,n){var o;return o=$(n).find("input.search"),t.searchPhrase="",t.onSearchSubmit=function(n){var i,a,s;if(n.preventDefault(),o.inlineSpinner(),s=function(){return r.trigger("favorites.searchWithin"),e.searchWithin(t.searchPhrase),o.inlineSpinner(!1)},""!==t.searchPhrase&&null!==t.searchPhrase)return i=function(){var e,n,r,o;for(r=t.searchPhrase.split(","),o=[],e=0,n=r.length;e<n;e++)a=r[e],o.push(a.trim());return o}(),e.fetchPanelItems(i).success(function(n){return n.length>0?(e.addItems(i),o.inlineSpinner(!1),t.searchPhrase=""):s()}).error(function(){return s()});s()},t.clearSearchWithin=function(e){t.searchPhrase="",t.onSearchSubmit(e)},r.on("collaboration.boardItemsLoaded",function(){return t.searchPhrase=e.searchPhrase()})}}}])}.call(this),function(){Collaboration.directive("giVideoOnHover",["$window","$timeout",function(){return{restrict:"A",link:function(t,e,n){var r,o,i;r=function(t){var e;return e=$(t).closest(".board-item-image").find("video"),e.length>0?e:null},o=function(t,e){var n,r;if(t.length>0&&e.length>0)return t.height(e.height()),t.width(e.width()),n=e.position(),r=n.top,t.css("top",r)},i=function(t){var e;return e=r(t),e?o($(e),$(t)):null},n.$observe("giVideoOnHover",function(){if(t.previewUrl=n.giVideoOnHover,null!=n.giVideoOnHover&&n.giVideoOnHover.length>0)return e.on("mouseenter",function(){var n,r,o;if(0===e.find("video").length?(n=e.find("a.video"),n=n.removeClass("ng-hide").append("<video src='"+t.previewUrl+"' autoplay muted />")):e.parent().find("a.play").hide(),r=$(this).find("img"),i(r),o=e.find("video")[0])return o.load(),o.play()["catch"](function(){})}),e.on("mouseleave",function(){var t;return t=e.find("video")[0],t&&(t.removeAttribute("src"),t.load(),t.remove()),e.parent().find("a.play").show()})})}}}])}.call(this),function(){Boards.controller("GridController",["$scope","$timeout","$window","$location","$sce","boardStorage","eventBus","preferences","postMessage","boardAssetsSelection",function(e,n,r,o,i,a,s,u,d,l){var c,f,h,p;if(s.on("collaboration.boardAssetsSelection.changed",function(){return function(){if(s.trigger("collaboration.selectedAssetsChanged",{assetIds:e.selectedAssetIds()}),e.sendAssetsTo)return d.send(e.sendAssetsTo,{action:"selectedAssetsChanged",assetIds:e.selectedAssetIds()})}}()),c=function(t){return"grid"===t||"horiz-mosaic"===t},h="mosaic"===o.hash().toLowerCase(),e.boardView=u.get("boardView")||"grid",c(e.boardView)||(e.boardView="grid"),h&&(e.boardView="horiz-mosaic"),e.boardViewChanged=function(){var t;return t={boardView:e.boardView},s.trigger("favorites.boardViewChanged",t),u.set("boardView",e.boardView)},e.translateAssetOption=function(t){return t===!0?"showCaptions":"showDetails"},e.showToolbar=function(){return"grid"===e.boardView||r.currentSite.isiStock},e.getAssetOption=function(){return e.assetOption||e.translateAssetOption(a.getShowAltCaptions())},e.selectAssetOption=function(t){return"showDetails"===t?s.trigger("favorites.showDetails"):"showCaptions"===t&&s.trigger("favorites.showCaptions"),e.assetOption=t,a.setShowAltCaptions("showCaptions"===e.assetOption)},e.showingDetails=function(){return"showDetails"===e.getAssetOption()},e.showingCaptions=function(){return"showCaptions"===e.getAssetOption()},e.newComment="",e.addComment=function(){e.newComment&&""!==e.newComment.trim()&&(a.addComment(e.newComment),e.newComment="",s.trigger("favorites.addBoardComment"))},e.deleteComment=function(t){return s.trigger("favorites.removeBoardComment"),a.deleteComment(t.id)},e.shouldHideCommentIcon=function(){return e.metadata.comments.length<=0&&!e.canComment()},e.getDownloadAssetIds=function(){return e.selectedAssetIds()},e.openContactSheet=function(){var t,n;if(!(e.selectedAssetIds().length<=0))return t=e.selectedAssetIds().join(","),n=siteMap.cleanRelativePath("/collaboration/boards/"+e.boardId+"/contact_sheet?assetIds="+t),s.trigger("favorites.printContactSheet"),r.open(n,"_blank"),!1},e.addingSelectedToCart=function(){var t,n;return 1===e.selectedAssetIds().length?(t=e.selectedAssetIds().first(),n={assetId:t,productString:""},a.getProductString(t).then(function(){return function(t){return n.productString=t.data.products}}())["finally"](function(){return function(){return s.trigger("favorites.addToCart",n)}}())):s.trigger("favorites.addToCart")},e.selectAll=function(){return function(){return l.selectBoardAssets(e.boardId,a.boardAssets())}}(),e.deselectAll=function(){return function(){return l.deselectBoardAssets(e.boardId,a.boardAssets())}}(),e.removeSelectedItems=function(){return function(t){var n,r;return t.stopPropagation(),n=e.selectedAssetIds(),1===n.length?(r={assetId:n.first(),productString:""},a.getProductString(n.first()).then(function(t){return r.productString=t.data.products})["finally"](function(){return s.trigger("favorites.removeSelectedItems",r)})):s.trigger("favorites.removeSelectedItems"),e.removeItems(n)}}(),e.selectedAssetIds=function(){return function(){var t,n;return n=l.selectedAssets(e.boardId),function(){var e,r,o,i;if(a.boardAssets()){for(o=a.boardAssets(),i=[],e=0,r=o.length;e<r;e++)t=o[e],n[t.id]&&i.push(t.id);return i}return[]}()}}(),e.selectedOrAllAssetIds=function(){return function(t){var n;return t===!0?a.assetIds():(n=e.selectedAssetIds(),(null!=n?n.length:void 0)>0?n:a.assetIds())}}(),e.switchAssetSelection=function(t){return function(n){return void 0!==n&&l.setBoardAssetSelection(e.boardId,t.id,n),e.isAssetSelected(t)}},e.isAssetSelected=function(t){return l.isBoardAssetSelected(e.boardId,t.id)},e.onDragEnd=function(){return e.draggingAssets=null,e.lastDragToPos=null},e.reorder=function(t,n,r){var o,i,s,u,d,l;if(null==r&&(r=!1),r?(e.draggingAssets||(e.draggingAssets=$.extend([],a.boardAssets())),s=e.draggingAssets,i=$.extend({placeholder:!0},t)):(s=a.boardAssets(),i=t),e.lastDragToPos=s.length-n,u=function(){var e,n,r;for(r=[],d=e=0,n=s.length;e<n;d=++e)o=s[d],o.id===t.id&&r.push(d);return r}()[0],s.splice(u,1),s.splice(n,0,i),!r)return l=(a.boardAssetsPageNumber()-1)*a.boardAssetsPageSize(),a.repositionAsset(t.id,l+n)},e.boardDrop=function(t){if(e.lastDragToPos)return e.reorder(t,e.lastDragToPos)},e.copyToBoard=function(t){return f(),s.trigger("favorites.copyToBoard"),t?a.copyToExistingBoard(e.selectedAssetIds(),e.boardId,t):(s.trigger("favorites.copyToNewBoard"),e.copyToNewBoard=!0,e.showCreateBoardModal())},e.moveToBoard=function(t){return f(),s.trigger("favorites.moveToBoard"),t?a.moveToBoard(e.selectedAssetIds(),e.boardId,t):(s.trigger("favorites.moveToNewBoard"),e.shouldDeleteAssetsFromOriginalBoard=!0,e.showCreateBoardModal())},e.shouldDeleteAssetsFromOriginalBoard=!1,e.copyToNewBoard=!1,s.on("collaboration.newBoard",function(t){var n;if(n=e.selectedAssetIds(),n.length>0&&t&&e.shouldDeleteAssetsFromOriginalBoard&&(e.moveToBoard(t),e.shouldDeleteAssetsFromOriginalBoard=!1),n.length>0&&t&&e.copyToNewBoard)return e.copyToBoard(t),e.copyToNewBoard=!1}),f=function(){return $.gettyModal.find($(".more-actions-modal")).close()},p=function(){e.highlightModalCommentBox=!0},e.showAssetModal=function(t){return s.trigger("favorites.showAssetModal"),$("body").css("overflow","hidden"),e.modalLoading=!0,a.fetchCompUrl(t.id),e.modalAssetId?n(function(){},100).then(function(){return e.modalAssetId=t.id}):(e.modalAssetId=t.id,setTimeout(p,1))},e.hideAssetModal=function(){return $("body").css("overflow",""),e.modalAssetId=null,e.highlightModalCommentBox=!1},e.modalLoaded=function(){return e.modalLoading=!1},e.showAltCaptionModal=function(t){if(!a.isReadOnly())return $("body").css("overflow","hidden"),a.fetchCompUrl(t.id),a.altCaptionAssetUri=t.uri,$.gettyModal.find(".alt-caption-modal").open(),e.setAltCaptionFocus()},e.setAltCaptionFocus=function(){return setTimeout(function(){return $("aside.alt-caption-modal .alt-caption-form textarea").focus()},100)},e.hasEditorial=function(){var t,e,n,r;for(r=a.boardAssets()||[],e=0,n=r.length;e<n;e++)if(t=r[e],"Editorial"===t.asset_family)return!0},e.archiveMessage=function(e){return i.trustAsHtml(t("analog_archive_message",{links:[{href:siteMap.footage_request_form.replace("ASSET_ID",e.id),target:"_new","data-close-and-redirect":!0}]}))},e.assetMissingMessage=function(e){if(e)return i.trustAsHtml(t("asset_no_longer_available",{zero:e.id}))},d.on("startSendingAssets",function(t,n){return e.sendAssetsTo=n,d.send(e.sendAssetsTo,{action:"boardIdChanged",boardId:e.boardId})}),d.on("reloadBoard",function(){return a.reloadBoard()}),Object.defineProperty(e,"hasDownloadableAssets",{get:function(){return a.hasDownloadableAssets()}}),e.$watch("boardId",function(){if(l.setCurrentBoardId(e.boardId),e.sendAssetsTo)return d.send(e.sendAssetsTo,{action:"boardIdChanged",boardId:e.boardId})}),e.$watchCollection("assets()",function(){if(e.sendAssetsTo)return d.send(e.sendAssetsTo,{action:"assetsChanged",assets:JSON.parse(JSON.stringify(a.boardAssets()))})}),e.$watch("showDetails",function(){return u.set("showDetails",e.showingDetails())}),r.parent)return r.parent.postMessage({action:"boardLoaded"},"*")}])}.call(this),function(){Boards.controller("SetManagementController",["$scope","$window","setManagementStorage","curationService","curationStorage","eventBus",function(e,n,r,o,i){var a;return a=[{key:t("most_recently_updated"),sortField:"LastUpdatedDate",sortAscending:!1},{key:t("least_recently_updated"),sortField:"LastUpdatedDate",sortAscending:!0},{key:t("title_ascending"),sortField:"Title",sortAscending:!0},{key:t("title_descending"),sortField:"Title",sortAscending:!1}],this.curatedSetSortOptions=function(t){return function(){var e;return e=a,e.indexOf(t.mySelectedSortOption)===-1&&(t.mySelectedSortOption=e[0]),e}}(this),this.selectedSortOption=function(t){return function(e){var n;return e&&(n=e!==t.mySelectedSortOption,t.mySelectedSortOption=e,n&&t.loadSets()),t.mySelectedSortOption}}(this),this.titleSearch=!1,this.searchText=null,this.filterText=null,this.filterBy="createdBy",this.createdByText=null,this.updatedByText=null,this.appliedFilterText={},this.applyFilter=function(t){if((13===t.keyCode||"click"===t.type)&&this.filterText)return"createdBy"===this.filterBy?(this.updatedByText=null,this.createdByText=this.filterText.toLowerCase()):(this.createdByText=null,this.updatedByText=this.filterText.toLowerCase()),this.appliedFilter(),this.loadSets()},this.appliedFilter=function(){return this.createdByText?(this.appliedFilterText.filterBy="Created by ",this.appliedFilterText.name=this.createdByText.split(" ").map(function(t){return t[0].toUpperCase()+t.slice(1)}).join(" ")):this.updatedByText?(this.appliedFilterText.filterBy="Updated by ",this.appliedFilterText.name=this.updatedByText.split(" ").map(function(t){return t[0].toUpperCase()+t.slice(1)}).join(" ")):this.appliedFilterText={}},this.clearFilter=function(){return this.filterText=null,this.createdByText=null,this.updatedByText=null,this.appliedFilter(),this.loadSets()},this.previousPage=function(){return this.pageNumber(this.pageNumber()-1),this.loadSets(this.pageNumber())},this.nextPage=function(){if(this.pageNumber()!==this.pageCount())return this.pageNumber(this.pageNumber()+1),this.loadSets(this.pageNumber())},this.pageCount=function(){return r.pageCount()},this.pageNumber=function(t){return r.pageNumber(t)},this.onPageNumberKeyup=function(t){if(13===t.keyCode)return this.pageNumber(t.target.value),this.loadSets(+t.target.value)},this.clearKeywords=function(){return this.searchText=null,i.keywords=[],e.keywords=i.keywords,this.loadSets()},this.deleteKeyword=function(t){return i.keywords=i.keywords.filter(function(e){return e!==t}),e.keywords=i.keywords,this.loadSets()},e.publishToGhost=function(t){return o.publishToGhost(t).success(function(){return function(t){return console.log(t)}}())},e.onKeywordAdded=function(t){return function(){return t.loadSets()}}(this),e.freeTextSearch=function(t){return function(n){return i.keywords=[],e.keywords=i.keywords,t.searchText=n,t.loadSets()}}(this),this.loadSets=function(t){return function(e){var n,o;return null==e&&(e=1),$(".set-list .content").addClass("loading"),$(".set-list").inlineSpinner(),r.sortField=t.mySelectedSortOption.sortField,r.sortAscending=t.mySelectedSortOption.sortAscending,t.titleSearch||(o=function(){var t,e,r,o;for(r=i.keywords,o=[],t=0,e=r.length;t<e;t++)n=r[t],o.push(n.id);return o}(),t.searchText=null),r.loadSets({pageNumber:e,keywordIds:o,phrase:t.searchText,createdByName:t.createdByText,updatedByName:t.updatedByText})}}(this),this.setList=function(){return r.setList},this}])}.call(this),function(){Boards.controller("StaticBoardController",["$scope","$http",function(t){var e,n;return e=window.Navigation.queryStringAsObject().assets,n=[],t.assets=function(){return function(){return n}}(),t.boardView="vert-mosaic",this.boardsService.fetchBoardAssets(e.split(",")).then(function(){return function(t){var e,r,o,i,a;for(i=t.data,a=[],r=0,o=i.length;r<o;r++)e=i[r],a.push(n.push(e));return a}}())}])}.call(this),function(){Boards.controller("ToolbarController",["$scope","boardsService","eventBus",function(t,e,n){var r,o;return this.boardsService=e,this.myBoardsCached=null,this.sharedBoardsCached=null,this.pageSize=500,this.boardListUrl="/collaboration/board-headers.json",this.loadingMyBoards=!1,this.loadingSharedBoards=!1,n.on("collaboration.boardListLoaded",function(t){return function(){return t.myBoardsCached=null,t.sharedBoardsCached=null}}(this)),r=function(e){return e.filter(function(e){return e.id!==t.currentBoardId()})},o=function(t){return t.sort(function(t,e){return null===t.name||null===e.name?1:t.name.toLowerCase()<e.name.toLowerCase()?-1:t.name.toLowerCase()>e.name.toLowerCase()?1:0})},this.myBoards=function(t){return function(){var e;return t.myBoardsCached?r(t.myBoardsCached):t.loadingMyBoards?[]:(e={collaboratorRole:"Owner",pageSize:t.pageSize},t.loadingMyBoards=!0,t.boardsService.loadBoardList(e).success(function(e){return t.loadingMyBoards=!1,t.myBoardsCached=o(e.boards)}).error(function(){return t.loadingMyBoards=!1,t.myBoardsCached=[]}))}}(this),this.sharedBoards=function(t){return function(){var e;return t.sharedBoardsCached?r(t.sharedBoardsCached):t.loadingSharedBoards?[]:(e={collaboratorRole:"Editor",pageSize:t.pageSize},t.loadingSharedBoards=!0,t.boardsService.loadBoardList(e).success(function(e){return t.loadingSharedBoards=!1,t.sharedBoardsCached=o(e.boards)}).error(function(){return t.loadingSharedBoards=!1,t.sharedBoardsCached=[]}))}}(this),this}])}.call(this),function(){this.Boards.directive("giBoardPickerComponent",function(){return function(){return{scope:{boardIdGetterSetter:"=",boardNameGetter:"=",isBoardOwnedGetter:"=",isBoardSharedGetter:"=",isApprover:"="},controller:"BoardPickerComponentController",controllerAs:"picker",templateUrl:"/collaboration/board_picker_template",replace:!0,bindToController:!0}}}()),this.Boards.controller("BoardPickerComponentController",["$scope","boardListStorage",function(e,n){return this.boardListStorage=n,this.currentBoardList=function(t){return function(){return t.boardListStorage.boardList}}(this),this.currentBoardId=function(t){return function(){return t.boardIdGetterSetter()}}(this),this.currentBoardName=function(t){return function(){return t.boardNameGetter()}}(this),e.$watch(this.currentBoardList,function(t){return function(){return t.refreshBoardPickerOptions()}}(this)),e.$watch(this.boardNameGetter,function(t){return function(){return t.refreshBoardPickerOptions()}}(this)),e.$watch(this.currentBoardId,function(t){return function(){return t.refreshBoardPickerOptions()}}(this)),e.$watch(this.isBoardOwnedGetter,function(t){return function(){return t.refreshBoardPickerOptions()}}(this)),this.refreshBoardPickerOptions=function(){var e,n,r,o,i,a,s,u;for(n=(null!=(u=this.boardListStorage)?u.boardList:void 0)||[],s=[],s.push({value:"new",name:t("create_a_board")}),s.push({value:"boards",name:t("view_all_boards")}),this.isApprover&&s.push({value:"sets",name:t("view_all_sets")}),this.isBoardOwnedGetter()||this.isBoardSharedGetter()||s.push({value:this.currentBoardId(),name:this.currentBoardName()}),s.push({name:"",disabled:!0}),this.isBoardOwnedGetter()&&s.push({value:this.currentBoardId(),name:this.currentBoardName(),group:t("recent_boards")}),r=0,i=n.length;r<i;r++)e=n[r],e.id!==this.currentBoardId()&&e.is_owner&&s.push({value:e.id,name:e.name,group:t("recent_boards")});for(this.isBoardSharedGetter()&&s.push({value:this.currentBoardId(),name:this.currentBoardName(),group:t("shared_with_me")}),o=0,a=n.length;o<a;o++)e=n[o],e.id===this.currentBoardId()||e.is_owner||s.push({value:e.id,name:e.name,group:t("shared_with_me")});return this.boardPickerOptions=s},this}])}.call(this),function(){Collaboration.controller("BulkDownloadController",["$scope","boardAssetsSelection","userDetailService","boardStorage","eventBus","$window",function(e,n,r,o,i,a){var s,u;return e.initBulkDownload=function(t){return r.setUser(t),e.showBulkDownloadButton=!1,e.showButton(),e.showBulkDownloadButton&&i.trigger("bulkDownload.showBulkDownloadButton"),e.selectedAssets=[],e.boardAssetsList=[],e.selectedAssetsInfo=[]},u=function(){return visitorExperiences.isActive("iStockBulkDLWithSigSubs")},s=function(){return visitorExperiences.isActive("istockBulkDLCredits")},e.showButton=function(){return s()?e.showBulkDownloadButton=!0:e.showBulkDownloadButton=r.authenticated()&&(r.hasSignatureSubscription()||r.hasEssentialSubscription())&&u()},e.openBulkDownloadModal=function(){var t;if(e.showBulkDownloadButton)return r.authenticated()?(t=angular.bind(this,e.getSelectedAssets),i.trigger("bulkDownload.openBulkModalWithAssets",t)):e.redirectToSignin()},e.redirectToSignin=function(){var t;return t="/sign-in?ReturnUrl="+encodeURIComponent(window.location.pathname),a.location.href=t},e.getSelectedAssets=function(){var t;return t=Object.keys(n.selectedAssets(e.boardId)),t.isEmpty()?e.assetIdOfAllAssets():t},e.assetIdOfAllAssets=function(){return o.boardAssets().map(function(t){return t.id})},e.getCountTextToShowForDownloadButton=function(){var n;return n=e.getSelectedAssets().length,1===n?t("download_item_with_subs"):n>1&&n<e.assetIdOfAllAssets().length?t("download_items_with_subs",{number_of_items:n}):t("download_all_with_subs")}}])}.call(this),function(){var e=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};Collaboration.directive("bulkDownloadModal",["$timeout","boardStorage","giLocalStorage","userDetailService","assetDetailService","eventBus","downloadAuthorizationService","$window","bulkDownloadStateService","$http",function(n,r,o,i,a,s,u,d,l,c){return{restrict:"E",templateUrl:"bulk_download_modals",scope:{},link:function(n,o,f){var h,p,m,g,v,_;return n.selectedAssetsIds=[],n.redownloadIds=[],n.redownloadsForRightSide=[],n.teamCreditsAvailable=0,n.creditsAvailable=0,n.subDownloadsRemaining=0,n.contactLink=f.contactLink,v=function(){return n.t=t,n.viewState=l,n.viewState.init(n.selectedAssetsIds.length,n.subDownloadsRemaining,u.reDownloadAssetIds().length,n.contactLink),n.viewState=n.viewState.downloadViewStates},n.updateLeftSide=function(){var t;return n.redownloadIds=u.reDownloadAssetIds(n.selectedAssetsIds),t=l.findBulkDownloadState(n.selectedAssetsIds.length,n.subDownloadsRemaining,n.redownloadIds.length,n.contactLink),n.leftSide={title:t.title||"",infoText1:t.infoBox1Text||"",infoText2:t.infoBox2Text||"",errorBox1Text:t.errorBox1Text||"",errorBox1Enabled:String(t.errorBox1Text).length>0,showButton:t.showButton,buttonDisabled:t.buttonDisabled,showLegalText:t.showLegalText}},n.hasOnlyReDownloadAssets=function(){return u.hasSignatureReDownloadsOnly()},s.on("bulkDownload.openBulkModalWithAssets",function(t){return n.openBulkModal(t())}),n.openBulkModal=function(t){return n.selectedAssetsIds=t,n.checkModalStatus()},n.checkModalStatus=function(){var t,e;return n.selectedAssetsIds.length>30?n.openOverMaxModal():(e=_(),t=!1,e.missing.isEmpty()||(s.trigger("bulkDownload.missingSelected"),t=!0),e.video.isEmpty()||(s.trigger("bulkDownload.videoSelected"),t=!0),e.signature.isEmpty()||(s.trigger("bulkDownload.signatureSelectedWithEssentialsSubscription"),t=!0),t?void n.openUnsupportedFilesModal():n.selectedAssetsIds.isEmpty()?n.openUnsupportedFilesModal():g())},n.toggleAssetSelection=function(t){return e.call(n.selectedAssetsIds,t)>=0?(n.selectedAssetsIds.remove(t),n.updateLeftSide(),!1):(n.selectedAssetsIds.push(t),n.updateLeftSide(),!0)},n.assetSelected=function(t){return e.call(n.selectedAssetsIds,t)>=0},n.openOverMaxModal=function(){$.gettyModal.find($(".bulk-download-over-max")).open(),s.trigger("bulkDownload.openOverMaxModal")},p=function(){$.gettyModal.find($(".bulk-download-over-max")).close()},n.openDownloadCompleteModal=function(){$.gettyModal.find($(".download-complete-modal")).open()},n.closeDownloadCompleteModal=function(){$.gettyModal.find($(".download-complete-modal")).close()},n.selectFirst30Assets=function(){return n.selectedAssetsIds.splice(30,n.selectedAssetsIds.length),p(),n.checkModalStatus()},n.openUnsupportedFilesModal=function(){$.gettyModal.find($(".unsupported-files-modal")).open()},m=function(){$.gettyModal.find($(".unsupported-files-modal")).close()},n.removeUnsupportedAssets=function(){return Object.values(_()).forEach(function(t){return t.forEach(function(t){return n.selectedAssetsIds.remove(t.id)})}),m(),n.checkModalStatus()},n.openBulkDownloadModal=function(){var t,e;return t=u.fetchBulkAssetAuthorizations(n.selectedAssetsIds),e=i.getUserCreditSubsBalance(c),t.then(function(t){e.then(function(e){var r;return n.teamCreditsAvailable=e.team_credits_available,n.creditsAvailable=e.credits_available,n.subDownloadsRemaining=e.data.sub_downloads_remaining,n.updateLeftSide(),n.redownloadsForRightSide=n.redownloadIds,$.gettyModal.find($(".bulk-download-modal")).open(),r=t.reduce(function(t,e){return u.isRedownloadedAsset(e)?t.selectedLicensed=!0:t.selectedUnlicensed=!0,t},{selectedLicensed:!1,selectedUnlicensed:!1}),n.sufficientSubscriptionDownloads()||(n.subDownloadsRemaining<=0?s.trigger("bulkDownload.noSubscriptionDownloadsRemaining"):s.trigger("bulkDownload.insufficientSubscriptionDownloads")),s.trigger("bulkDownload.openModal",r)})})},n.sufficientSubscriptionDownloads=function(){var t,e;return e=n.selectedAssetsIds.length,t=u.reDownloadAssetIds(n.selectedAssetsIds).length,n.subDownloadsRemaining>=e-t},h=function(){$.gettyModal.find($(".bulk-download-modal")).close()},n.createDownload=function(){var t,e;return t=u.fetchAssetDownloads(n.selectedAssetsIds),e=t.map(function(t){return t.downloadToken}),u.createDownload(e).then(function(e){var r;return n.downloadFile(e.MultiDownloads[0].Url),r=t.some(function(t){return!!t.asset.is_credit_free_file||!!u.isRedownloadedAsset(t.asset)}),s.trigger("bulkDownload.download",{userDetailService:i,anyNonSubscriptionUsage:r})})},n.downloadFile=function(t){return d.location.href=t,h(),n.showDownloadCompleteModal()},_=function(){return r.boardAssets().reduce(function(t,r){var o;return o=r.id,e.call(n.selectedAssetsIds,o)<0?t:r.is_missing?(t.missing.push(r),t):r.is_video?(t.video.push(r),t):!i.hasEssentialSubscription()||"Signature"!==r.i_stock_collection&&"SignaturePlus"!==r.i_stock_collection?t:(t.signature.push(r),t)},{video:[],missing:[],signature:[]})},n.getThankYouText=function(){var e;return e=n.selectedAssetsIds.length,1===e?t("bulk_download_thankyou_singular"):t("bulk_download_thankyou_plural",{number_of_downloaded_items:e})},n.getCountTextToShowForRightSideModal=function(){var e;return e=n.selectedAssetsIds.length,1===e?t("bulk_download_one_selected_item",{number_of_items:e}):t("bulk_download_number_selected_items",{number_of_items:e})},n.getTextForRightSideFreeOrIncluded=function(r){return e.call(n.redownloadsForRightSide,r)>=0?t("re-download_for_free"):t("included_with_subscription")},n.getTextForUnsupportedFilesModal=function(){var e;return e=n.selectedAssetsIds.length,0===e?t("bulk_download_all_items_not_available"):t("bulk_download_items_not_available")},n.showDownloadCompleteModal=function(){return h(),n.openDownloadCompleteModal()},n.getTextForDownloadCompleteModal=function(){var e;return e=n.selectedAssetsIds.length,1===e?t("bulk_download_thankyou_singular"):t("bulk_download_thankyou_plural",{number_of_downloaded_items:e})},g=function(){return n.selectedAssetsInfo=r.boardAssets().filter(function(t){var r;if(r=t.id,e.call(n.selectedAssetsIds,r)>=0)return t}),n.openBulkDownloadModal()},n.getAssetCollection=function(t){if(t)return a.getAssetCollection(t)},n.getSizeMappingTag=function(t){if(t)return a.getSizeMappingTag(t)},v()}}}])}.call(this),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.moment=e()}(this,function(){"use strict";function t(){return mr.apply(null,arguments)}function e(t){mr=t}function n(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function r(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function o(t){var e;for(e in t)return!1;return!0}function i(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function a(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function s(t,e){var n,r=[]
;for(n=0;n<t.length;++n)r.push(e(t[n],n));return r}function u(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function d(t,e){for(var n in e)u(e,n)&&(t[n]=e[n]);return u(e,"toString")&&(t.toString=e.toString),u(e,"valueOf")&&(t.valueOf=e.valueOf),t}function l(t,e,n,r){return ve(t,e,n,r,!0).utc()}function c(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}}function f(t){return null==t._pf&&(t._pf=c()),t._pf}function h(t){if(null==t._isValid){var e=f(t),n=vr.call(e.parsedDateParts,function(t){return null!=t}),r=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidMonth&&!e.invalidWeekday&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n);if(t._strict&&(r=r&&0===e.charsLeftOver&&0===e.unusedTokens.length&&e.bigHour===undefined),null!=Object.isFrozen&&Object.isFrozen(t))return r;t._isValid=r}return t._isValid}function p(t){var e=l(NaN);return null!=t?d(f(e),t):f(e).userInvalidated=!0,e}function m(t){return void 0===t}function g(t,e){var n,r,o;if(m(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),m(e._i)||(t._i=e._i),m(e._f)||(t._f=e._f),m(e._l)||(t._l=e._l),m(e._strict)||(t._strict=e._strict),m(e._tzm)||(t._tzm=e._tzm),m(e._isUTC)||(t._isUTC=e._isUTC),m(e._offset)||(t._offset=e._offset),m(e._pf)||(t._pf=f(e)),m(e._locale)||(t._locale=e._locale),_r.length>0)for(n in _r)r=_r[n],o=e[r],m(o)||(t[r]=o);return t}function v(e){g(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),yr===!1&&(yr=!0,t.updateOffset(this),yr=!1)}function _(t){return t instanceof v||null!=t&&null!=t._isAMomentObject}function y(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function b(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=y(e)),n}function w(t,e,n){var r,o=Math.min(t.length,e.length),i=Math.abs(t.length-e.length),a=0;for(r=0;r<o;r++)(n&&t[r]!==e[r]||!n&&b(t[r])!==b(e[r]))&&a++;return a+i}function S(e){t.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function k(e,n){var r=!0;return d(function(){if(null!=t.deprecationHandler&&t.deprecationHandler(null,e),r){for(var o,i=[],a=0;a<arguments.length;a++){if(o="","object"==typeof arguments[a]){o+="\n["+a+"] ";for(var s in arguments[0])o+=s+": "+arguments[0][s]+", ";o=o.slice(0,-2)}else o=arguments[a];i.push(o)}S(e+"\nArguments: "+Array.prototype.slice.call(i).join("")+"\n"+(new Error).stack),r=!1}return n.apply(this,arguments)},n)}function C(e,n){null!=t.deprecationHandler&&t.deprecationHandler(e,n),br[e]||(S(n),br[e]=!0)}function M(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function A(t){var e,n;for(n in t)e=t[n],M(e)?this[n]=e:this["_"+n]=e;this._config=t,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function D(t,e){var n,o=d({},t);for(n in e)u(e,n)&&(r(t[n])&&r(e[n])?(o[n]={},d(o[n],t[n]),d(o[n],e[n])):null!=e[n]?o[n]=e[n]:delete o[n]);for(n in t)u(t,n)&&!u(e,n)&&r(t[n])&&(o[n]=d({},o[n]));return o}function B(t){null!=t&&this.set(t)}function T(t,e,n){var r=this._calendar[t]||this._calendar.sameElse;return M(r)?r.call(e,n):r}function L(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])}function I(){return this._invalidDate}function x(t){return this._ordinal.replace("%d",t)}function P(t,e,n,r){var o=this._relativeTime[n];return M(o)?o(t,e,n,r):o.replace(/%d/i,t)}function $(t,e){var n=this._relativeTime[t>0?"future":"past"];return M(n)?n(e):n.replace(/%s/i,e)}function F(t,e){var n=t.toLowerCase();Lr[n]=Lr[n+"s"]=Lr[e]=t}function O(t){return"string"==typeof t?Lr[t]||Lr[t.toLowerCase()]:undefined}function Y(t){var e,n,r={};for(n in t)u(t,n)&&(e=O(n))&&(r[e]=t[n]);return r}function N(t,e){Ir[t]=e}function R(t){var e=[];for(var n in t)e.push({unit:n,priority:Ir[n]});return e.sort(function(t,e){return t.priority-e.priority}),e}function E(e,n){return function(r){return null!=r?(U(this,e,r),t.updateOffset(this,n),this):H(this,e)}}function H(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function U(t,e,n){t.isValid()&&t._d["set"+(t._isUTC?"UTC":"")+e](n)}function j(t){return t=O(t),M(this[t])?this[t]():this}function z(t,e){if("object"==typeof t){t=Y(t);for(var n=R(t),r=0;r<n.length;r++)this[n[r].unit](t[n[r].unit])}else if(t=O(t),M(this[t]))return this[t](e);return this}function W(t,e,n){var r=""+Math.abs(t),o=e-r.length;return(t>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,o)).toString().substr(1)+r}function G(t,e,n,r){var o=r;"string"==typeof r&&(o=function(){return this[r]()}),t&&(Fr[t]=o),e&&(Fr[e[0]]=function(){return W(o.apply(this,arguments),e[1],e[2])}),n&&(Fr[n]=function(){return this.localeData().ordinal(o.apply(this,arguments),t)})}function V(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function J(t){var e,n,r=t.match(xr);for(e=0,n=r.length;e<n;e++)Fr[r[e]]?r[e]=Fr[r[e]]:r[e]=V(r[e]);return function(e){var o,i="";for(o=0;o<n;o++)i+=r[o]instanceof Function?r[o].call(e,t):r[o];return i}}function q(t,e){return t.isValid()?(e=K(e,t.localeData()),$r[e]=$r[e]||J(e),$r[e](t)):t.localeData().invalidDate()}function K(t,e){function n(t){return e.longDateFormat(t)||t}var r=5;for(Pr.lastIndex=0;r>=0&&Pr.test(t);)t=t.replace(Pr,n),Pr.lastIndex=0,r-=1;return t}function Z(t,e,n){Qr[t]=M(e)?e:function(t){return t&&n?n:e}}function X(t,e){return u(Qr,t)?Qr[t](e._strict,e._locale):new RegExp(Q(t))}function Q(t){return tt(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,r,o){return e||n||r||o}))}function tt(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function et(t,e){var n,r=e;for("string"==typeof t&&(t=[t]),i(e)&&(r=function(t,n){n[e]=b(t)}),n=0;n<t.length;n++)to[t[n]]=r}function nt(t,e){et(t,function(t,n,r,o){r._w=r._w||{},e(t,r._w,r,o)})}function rt(t,e,n){null!=e&&u(to,t)&&to[t](e,n._a,n,t)}function ot(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function it(t,e){return t?n(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||fo).test(e)?"format":"standalone"][t.month()]:this._months}function at(t,e){return t?n(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[fo.test(e)?"format":"standalone"][t.month()]:this._monthsShort}function st(t,e,n){var r,o,i,a=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)i=l([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(i,"").toLocaleLowerCase();return n?"MMM"===e?(o=co.call(this._shortMonthsParse,a),o!==-1?o:null):(o=co.call(this._longMonthsParse,a),o!==-1?o:null):"MMM"===e?(o=co.call(this._shortMonthsParse,a))!==-1?o:(o=co.call(this._longMonthsParse,a),o!==-1?o:null):(o=co.call(this._longMonthsParse,a))!==-1?o:(o=co.call(this._shortMonthsParse,a),o!==-1?o:null)}function ut(t,e,n){var r,o,i;if(this._monthsParseExact)return st.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(o=l([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(i="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[r]=new RegExp(i.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[r].test(t))return r;if(n&&"MMM"===e&&this._shortMonthsParse[r].test(t))return r;if(!n&&this._monthsParse[r].test(t))return r}}function dt(t,e){var n;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=b(e);else if(e=t.localeData().monthsParse(e),!i(e))return t;return n=Math.min(t.date(),ot(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t}function lt(e){return null!=e?(dt(this,e),t.updateOffset(this,!0),this):H(this,"Month")}function ct(){return ot(this.year(),this.month())}function ft(t){return this._monthsParseExact?(u(this,"_monthsRegex")||pt.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(u(this,"_monthsShortRegex")||(this._monthsShortRegex=mo),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function ht(t){return this._monthsParseExact?(u(this,"_monthsRegex")||pt.call(this),t?this._monthsStrictRegex:this._monthsRegex):(u(this,"_monthsRegex")||(this._monthsRegex=go),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function pt(){function t(t,e){return e.length-t.length}var e,n,r=[],o=[],i=[];for(e=0;e<12;e++)n=l([2e3,e]),r.push(this.monthsShort(n,"")),o.push(this.months(n,"")),i.push(this.months(n,"")),i.push(this.monthsShort(n,""));for(r.sort(t),o.sort(t),i.sort(t),e=0;e<12;e++)r[e]=tt(r[e]),o[e]=tt(o[e]);for(e=0;e<24;e++)i[e]=tt(i[e]);this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function mt(t){return gt(t)?366:365}function gt(t){return t%4==0&&t%100!=0||t%400==0}function vt(){return gt(this.year())}function _t(t,e,n,r,o,i,a){var s=new Date(t,e,n,r,o,i,a);return t<100&&t>=0&&isFinite(s.getFullYear())&&s.setFullYear(t),s}function yt(t){var e=new Date(Date.UTC.apply(null,arguments));return t<100&&t>=0&&isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t),e}function bt(t,e,n){var r=7+e-n;return-((7+yt(t,0,r).getUTCDay()-e)%7)+r-1}function wt(t,e,n,r,o){var i,a,s=(7+n-r)%7,u=bt(t,r,o),d=1+7*(e-1)+s+u;return d<=0?(i=t-1,a=mt(i)+d):d>mt(t)?(i=t+1,a=d-mt(t)):(i=t,a=d),{year:i,dayOfYear:a}}function St(t,e,n){var r,o,i=bt(t.year(),e,n),a=Math.floor((t.dayOfYear()-i-1)/7)+1;return a<1?(o=t.year()-1,r=a+kt(o,e,n)):a>kt(t.year(),e,n)?(r=a-kt(t.year(),e,n),o=t.year()+1):(o=t.year(),r=a),{week:r,year:o}}function kt(t,e,n){var r=bt(t,e,n),o=bt(t+1,e,n);return(mt(t)-r+o)/7}function Ct(t){return St(t,this._week.dow,this._week.doy).week}function Mt(){return this._week.dow}function At(){return this._week.doy}function Dt(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function Bt(t){var e=St(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function Tt(t,e){return"string"!=typeof t?t:isNaN(t)?(t=e.weekdaysParse(t),"number"==typeof t?t:null):parseInt(t,10)}function Lt(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function It(t,e){return t?n(this._weekdays)?this._weekdays[t.day()]:this._weekdays[this._weekdays.isFormat.test(e)?"format":"standalone"][t.day()]:this._weekdays}function xt(t){return t?this._weekdaysShort[t.day()]:this._weekdaysShort}function Pt(t){return t?this._weekdaysMin[t.day()]:this._weekdaysMin}function $t(t,e,n){var r,o,i,a=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)i=l([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(i,"").toLocaleLowerCase();return n?"dddd"===e?(o=co.call(this._weekdaysParse,a),o!==-1?o:null):"ddd"===e?(o=co.call(this._shortWeekdaysParse,a),o!==-1?o:null):(o=co.call(this._minWeekdaysParse,a),o!==-1?o:null):"dddd"===e?(o=co.call(this._weekdaysParse,a))!==-1?o:(o=co.call(this._shortWeekdaysParse,a))!==-1?o:(o=co.call(this._minWeekdaysParse,a),o!==-1?o:null):"ddd"===e?(o=co.call(this._shortWeekdaysParse,a))!==-1?o:(o=co.call(this._weekdaysParse,a))!==-1?o:(o=co.call(this._minWeekdaysParse,a),o!==-1?o:null):(o=co.call(this._minWeekdaysParse,a))!==-1?o:(o=co.call(this._weekdaysParse,a))!==-1?o:(o=co.call(this._shortWeekdaysParse,a),o!==-1?o:null)}function Ft(t,e,n){var r,o,i;if(this._weekdaysParseExact)return $t.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(o=l([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(o,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(o,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(o,"").replace(".",".?")+"$","i")),this._weekdaysParse[r]||(i="^"+this.weekdays(o,"")+"|^"+this.weekdaysShort(o,"")+"|^"+this.weekdaysMin(o,""),this._weekdaysParse[r]=new RegExp(i.replace(".",""),"i")),n&&"dddd"===e&&this._fullWeekdaysParse[r].test(t))return r;if(n&&"ddd"===e&&this._shortWeekdaysParse[r].test(t))return r;if(n&&"dd"===e&&this._minWeekdaysParse[r].test(t))return r;if(!n&&this._weekdaysParse[r].test(t))return r}}function Ot(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=Tt(t,this.localeData()),this.add(t-e,"d")):e}function Yt(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function Nt(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=Lt(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7}function Rt(t){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||Ut.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(u(this,"_weekdaysRegex")||(this._weekdaysRegex=So),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function Et(t){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||Ut.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(u(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=ko),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Ht(t){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||Ut.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(u(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Co),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Ut(){function t(t,e){return e.length-t.length}var e,n,r,o,i,a=[],s=[],u=[],d=[];for(e=0;e<7;e++)n=l([2e3,1]).day(e),r=this.weekdaysMin(n,""),o=this.weekdaysShort(n,""),i=this.weekdays(n,""),a.push(r),s.push(o),u.push(i),d.push(r),d.push(o),d.push(i);for(a.sort(t),s.sort(t),u.sort(t),d.sort(t),e=0;e<7;e++)s[e]=tt(s[e]),u[e]=tt(u[e]),d[e]=tt(d[e]);this._weekdaysRegex=new RegExp("^("+d.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function jt(){return this.hours()%12||12}function zt(){return this.hours()||24}function Wt(t,e){G(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function Gt(t,e){return e._meridiemParse}function Vt(t){return"p"===(t+"").toLowerCase().charAt(0)}function Jt(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"}function qt(t){return t?t.toLowerCase().replace("_","-"):t}function Kt(t){for(var e,n,r,o,i=0;i<t.length;){for(o=qt(t[i]).split("-"),e=o.length,n=qt(t[i+1]),n=n?n.split("-"):null;e>0;){if(r=Zt(o.slice(0,e).join("-")))return r;if(n&&n.length>=e&&w(o,n,!0)>=e-1)break;e--}i++}return null}function Zt(t){var e=null;if(!To[t]&&"undefined"!=typeof module&&module&&module.exports)try{e=Mo._abbr,require("./locale/"+t),Xt(e)}catch(t){}return To[t]}function Xt(t,e){var n;return t&&(n=m(e)?ee(t):Qt(t,e))&&(Mo=n),Mo._abbr}function Qt(t,e){if(null!==e){var n=Bo;if(e.abbr=t,null!=To[t])C("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=To[t]._config;else if(null!=e.parentLocale){if(null==To[e.parentLocale])return Lo[e.parentLocale]||(Lo[e.parentLocale]=[]),Lo[e.parentLocale].push({name:t,config:e}),null;n=To[e.parentLocale]._config}return To[t]=new B(D(n,e)),Lo[t]&&Lo[t].forEach(function(t){Qt(t.name,t.config)}),Xt(t),To[t]}return delete To[t],null}function te(t,e){if(null!=e){var n,r=Bo;null!=To[t]&&(r=To[t]._config),e=D(r,e),n=new B(e),n.parentLocale=To[t],To[t]=n,Xt(t)}else null!=To[t]&&(null!=To[t].parentLocale?To[t]=To[t].parentLocale:null!=To[t]&&delete To[t]);return To[t]}function ee(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Mo;if(!n(t)){if(e=Zt(t))return e;t=[t]}return Kt(t)}function ne(){return kr(To)}function re(t){var e,n=t._a;return n&&f(t).overflow===-2&&(e=n[no]<0||n[no]>11?no:n[ro]<1||n[ro]>ot(n[eo],n[no])?ro:n[oo]<0||n[oo]>24||24===n[oo]&&(0!==n[io]||0!==n[ao]||0!==n[so])?oo:n[io]<0||n[io]>59?io:n[ao]<0||n[ao]>59?ao:n[so]<0||n[so]>999?so:-1,f(t)._overflowDayOfYear&&(e<eo||e>ro)&&(e=ro),f(t)._overflowWeeks&&e===-1&&(e=uo),f(t)._overflowWeekday&&e===-1&&(e=lo),f(t).overflow=e),t}function oe(t){var e,n,r,o,i,a,s=t._i,u=Io.exec(s)||xo.exec(s);if(u){for(f(t).iso=!0,e=0,n=$o.length;e<n;e++)if($o[e][1].exec(u[1])){o=$o[e][0],r=$o[e][2]!==!1;break}if(null==o)return void(t._isValid=!1);if(u[3]){for(e=0,n=Fo.length;e<n;e++)if(Fo[e][1].exec(u[3])){i=(u[2]||" ")+Fo[e][0];break}if(null==i)return void(t._isValid=!1)}if(!r&&null!=i)return void(t._isValid=!1);if(u[4]){if(!Po.exec(u[4]))return void(t._isValid=!1);a="Z"}t._f=o+(i||"")+(a||""),le(t)}else t._isValid=!1}function ie(e){var n=Oo.exec(e._i);if(null!==n)return void(e._d=new Date(+n[1]));oe(e),e._isValid===!1&&(delete e._isValid,t.createFromInputFallback(e))}function ae(t,e,n){return null!=t?t:null!=e?e:n}function se(e){var n=new Date(t.now());return e._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()]}function ue(t){var e,n,r,o,i=[];if(!t._d){for(r=se(t),t._w&&null==t._a[ro]&&null==t._a[no]&&de(t),t._dayOfYear&&(o=ae(t._a[eo],r[eo]),t._dayOfYear>mt(o)&&(f(t)._overflowDayOfYear=!0),n=yt(o,0,t._dayOfYear),t._a[no]=n.getUTCMonth(),t._a[ro]=n.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=i[e]=r[e];for(;e<7;e++)t._a[e]=i[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[oo]&&0===t._a[io]&&0===t._a[ao]&&0===t._a[so]&&(t._nextDay=!0,t._a[oo]=0),t._d=(t._useUTC?yt:_t).apply(null,i),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[oo]=24)}}function de(t){var e,n,r,o,i,a,s,u;if(e=t._w,null!=e.GG||null!=e.W||null!=e.E)i=1,a=4,n=ae(e.GG,t._a[eo],St(_e(),1,4).year),r=ae(e.W,1),((o=ae(e.E,1))<1||o>7)&&(u=!0);else{i=t._locale._week.dow,a=t._locale._week.doy;var d=St(_e(),i,a);n=ae(e.gg,t._a[eo],d.year),r=ae(e.w,d.week),null!=e.d?((o=e.d)<0||o>6)&&(u=!0):null!=e.e?(o=e.e+i,(e.e<0||e.e>6)&&(u=!0)):o=i}r<1||r>kt(n,i,a)?f(t)._overflowWeeks=!0:null!=u?f(t)._overflowWeekday=!0:(s=wt(n,r,o,i,a),t._a[eo]=s.year,t._dayOfYear=s.dayOfYear)}function le(e){if(e._f===t.ISO_8601)return void oe(e);e._a=[],f(e).empty=!0;var n,r,o,i,a,s=""+e._i,u=s.length,d=0;for(o=K(e._f,e._locale).match(xr)||[],n=0;n<o.length;n++)i=o[n],r=(s.match(X(i,e))||[])[0],r&&(a=s.substr(0,s.indexOf(r)),a.length>0&&f(e).unusedInput.push(a),s=s.slice(s.indexOf(r)+r.length),d+=r.length),Fr[i]?(r?f(e).empty=!1:f(e).unusedTokens.push(i),rt(i,r,e)):e._strict&&!r&&f(e).unusedTokens.push(i);f(e).charsLeftOver=u-d,s.length>0&&f(e).unusedInput.push(s),e._a[oo]<=12&&f(e).bigHour===!0&&e._a[oo]>0&&(f(e).bigHour=undefined),f(e).parsedDateParts=e._a.slice(0),f(e).meridiem=e._meridiem,e._a[oo]=ce(e._locale,e._a[oo],e._meridiem),ue(e),re(e)}function ce(t,e,n){var r;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?(r=t.isPM(n),r&&e<12&&(e+=12),r||12!==e||(e=0),e):e}function fe(t){var e,n,r,o,i;if(0===t._f.length)return f(t).invalidFormat=!0,void(t._d=new Date(NaN));for(o=0;o<t._f.length;o++)i=0,e=g({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[o],le(e),h(e)&&(i+=f(e).charsLeftOver,i+=10*f(e).unusedTokens.length,f(e).score=i,(null==r||i<r)&&(r=i,n=e));d(t,n||e)}function he(t){if(!t._d){var e=Y(t._i);t._a=s([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)}),ue(t)}}function pe(t){var e=new v(re(me(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=undefined),e}function me(t){var e=t._i,r=t._f;return t._locale=t._locale||ee(t._l),null===e||r===undefined&&""===e?p({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),_(e)?new v(re(e)):(a(e)?t._d=e:n(r)?fe(t):r?le(t):ge(t),h(t)||(t._d=null),t))}function ge(e){var r=e._i;r===undefined?e._d=new Date(t.now()):a(r)?e._d=new Date(r.valueOf()):"string"==typeof r?ie(e):n(r)?(e._a=s(r.slice(0),function(t){return parseInt(t,10)}),ue(e)):"object"==typeof r?he(e):i(r)?e._d=new Date(r):t.createFromInputFallback(e)}function ve(t,e,i,a,s){var u={};return i!==!0&&i!==!1||(a=i,i=undefined),(r(t)&&o(t)||n(t)&&0===t.length)&&(t=undefined),u._isAMomentObject=!0,u._useUTC=u._isUTC=s,u._l=i,u._i=t,u._f=e,u._strict=a,pe(u)}function _e(t,e,n,r){return ve(t,e,n,r,!1)}function ye(t,e){var r,o;if(1===e.length&&n(e[0])&&(e=e[0]),!e.length)return _e();for(r=e[0],o=1;o<e.length;++o)e[o].isValid()&&!e[o][t](r)||(r=e[o]);return r}function be(){return ye("isBefore",[].slice.call(arguments,0))}function we(){return ye("isAfter",[].slice.call(arguments,0))}function Se(t){var e=Y(t),n=e.year||0,r=e.quarter||0,o=e.month||0,i=e.week||0,a=e.day||0,s=e.hour||0,u=e.minute||0,d=e.second||0,l=e.millisecond||0;this._milliseconds=+l+1e3*d+6e4*u+1e3*s*60*60,this._days=+a+7*i,this._months=+o+3*r+12*n,this._data={},this._locale=ee(),this._bubble()}function ke(t){return t instanceof Se}function Ce(t){return t<0?Math.round(-1*t)*-1:Math.round(t)}function Me(t,e){G(t,0,0,function(){var t=this.utcOffset(),n="+";return t<0&&(t=-t,n="-"),n+W(~~(t/60),2)+e+W(~~t%60,2)})}function Ae(t,e){var n=(e||"").match(t);if(null===n)return null;var r=n[n.length-1]||[],o=(r+"").match(Eo)||["-",0,0],i=+(60*o[1])+b(o[2]);return 0===i?0:"+"===o[0]?i:-i}function De(e,n){var r,o;return n._isUTC?(r=n.clone(),o=(_(e)||a(e)?e.valueOf():_e(e).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+o),t.updateOffset(r,!1),r):_e(e).local()}function Be(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function Te(e,n){var r,o=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=Ae(Kr,e)))return this}else Math.abs(e)<16&&(e*=60);return!this._isUTC&&n&&(r=Be(this)),this._offset=e,this._isUTC=!0,null!=r&&this.add(r,"m"),o!==e&&(!n||this._changeInProgress?We(this,Ee(e-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:Be(this)}function Le(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function Ie(t){return this.utcOffset(0,t)}function xe(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Be(this),"m")),this}function Pe(){if(null!=this._tzm)this.utcOffset(this._tzm);else if("string"==typeof this._i){var t=Ae(qr,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this}function $e(t){return!!this.isValid()&&(t=t?_e(t).utcOffset():0,(this.utcOffset()-t)%60==0)}function Fe(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Oe(){if(!m(this._isDSTShifted))return this._isDSTShifted;var t={};if(g(t,this),t=me(t),t._a){var e=t._isUTC?l(t._a):_e(t._a);this._isDSTShifted=this.isValid()&&w(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Ye(){return!!this.isValid()&&!this._isUTC}function Ne(){return!!this.isValid()&&this._isUTC}function Re(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function Ee(t,e){var n,r,o,a=t,s=null;return ke(t)?a={ms:t._milliseconds,d:t._days,M:t._months}:i(t)?(a={},e?a[e]=t:a.milliseconds=t):(s=Ho.exec(t))?(n="-"===s[1]?-1:1,a={y:0,d:b(s[ro])*n,h:b(s[oo])*n,m:b(s[io])*n,s:b(s[ao])*n,ms:b(Ce(1e3*s[so]))*n}):(s=Uo.exec(t))?(n="-"===s[1]?-1:1,a={y:He(s[2],n),M:He(s[3],n),w:He(s[4],n),d:He(s[5],n),h:He(s[6],n),m:He(s[7],n),s:He(s[8],n)}):null==a?a={}:"object"==typeof a&&("from"in a||"to"in a)&&(o=je(_e(a.from),_e(a.to)),a={},a.ms=o.milliseconds,a.M=o.months),r=new Se(a),ke(t)&&u(t,"_locale")&&(r._locale=t._locale),r}function He(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function Ue(t,e){var n={milliseconds:0,months:0};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function je(t,e){var n;return t.isValid()&&e.isValid()?(e=De(e,t),t.isBefore(e)?n=Ue(t,e):(n=Ue(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function ze(t,e){return function(n,r){var o,i;return null===r||isNaN(+r)||(C(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=r,r=i),n="string"==typeof n?+n:n,o=Ee(n,r),We(this,o,t),this}}function We(e,n,r,o){var i=n._milliseconds,a=Ce(n._days),s=Ce(n._months);e.isValid()&&(o=null==o||o,i&&e._d.setTime(e._d.valueOf()+i*r),a&&U(e,"Date",H(e,"Date")+a*r),s&&dt(e,H(e,"Month")+s*r),o&&t.updateOffset(e,a||s))}function Ge(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Ve(e,n){var r=e||_e(),o=De(r,this).startOf("day"),i=t.calendarFormat(this,o)||"sameElse",a=n&&(M(n[i])?n[i].call(this,r):n[i]);return this.format(a||this.localeData().calendar(i,this,_e(r)))}function Je(){return new v(this)}function qe(t,e){var n=_(t)?t:_e(t);return!(!this.isValid()||!n.isValid())&&(e=O(m(e)?"millisecond":e),"millisecond"===e?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf())}function Ke(t,e){var n=_(t)?t:_e(t);return!(!this.isValid()||!n.isValid())&&(e=O(m(e)?"millisecond":e),"millisecond"===e?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf())}function Ze(t,e,n,r){return r=r||"()",("("===r[0]?this.isAfter(t,n):!this.isBefore(t,n))&&(")"===r[1]?this.isBefore(e,n):!this.isAfter(e,n))}function Xe(t,e){var n,r=_(t)?t:_e(t);return!(!this.isValid()||!r.isValid())&&(e=O(e||"millisecond"),"millisecond"===e?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(e).valueOf()<=n&&n<=this.clone().endOf(e).valueOf()))}function Qe(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function tn(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function en(t,e,n){var r,o,i,a;return this.isValid()?(r=De(t,this),r.isValid()?(o=6e4*(r.utcOffset()-this.utcOffset()),e=O(e),"year"===e||"month"===e||"quarter"===e?(a=nn(this,r),"quarter"===e?a/=3:"year"===e&&(a/=12)):(i=this-r,a="second"===e?i/1e3:"minute"===e?i/6e4:"hour"===e?i/36e5:"day"===e?(i-o)/864e5:"week"===e?(i-o)/6048e5:i),n?a:y(a)):NaN):NaN}function nn(t,e){var n,r,o=12*(e.year()-t.year())+(e.month()-t.month()),i=t.clone().add(o,"months");return e-i<0?(n=t.clone().add(o-1,"months"),r=(e-i)/(i-n)):(n=t.clone().add(o+1,"months"),r=(e-i)/(n-i)),-(o+r)||0}function rn(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function on(){var t=this.clone().utc();return 0<t.year()&&t.year()<=9999?M(Date.prototype.toISOString)?this.toDate().toISOString():q(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):q(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function an(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="";this.isLocal()||(t=0===this.utcOffset()?"moment.utc":"moment.parseZone",e="Z");var n="["+t+'("]',r=0<this.year()&&this.year()<=9999?"YYYY":"YYYYYY",o=e+'[")]';return this.format(n+r+"-MM-DD[T]HH:mm:ss.SSS"+o)}function sn(e){e||(e=this.isUtc()?t.defaultFormatUtc:t.defaultFormat);var n=q(this,e);return this.localeData().postformat(n)}function un(t,e){return this.isValid()&&(_(t)&&t.isValid()||_e(t).isValid())?Ee({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function dn(t){return this.from(_e(),t)}function ln(t,e){return this.isValid()&&(_(t)&&t.isValid()||_e(t).isValid())?Ee({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function cn(t){return this.to(_e(),t)}function fn(t){var e;return t===undefined?this._locale._abbr:(e=ee(t),null!=e&&(this._locale=e),this)}function hn(){return this._locale}function pn(t){switch(t=O(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this}function mn(t){return(t=O(t))===undefined||"millisecond"===t?this:("date"===t&&(t="day"),this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms"))}function gn(){return this._d.valueOf()-6e4*(this._offset||0)}function vn(){return Math.floor(this.valueOf()/1e3)}function _n(){return new Date(this.valueOf())}function yn(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function bn(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function wn(){return this.isValid()?this.toISOString():null}function Sn(){return h(this)}function kn(){return d({},f(this))}function Cn(){return f(this).overflow}function Mn(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function An(t,e){G(0,[t,t.length],0,e)}function Dn(t){return In.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Bn(t){return In.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function Tn(){return kt(this.year(),1,4)}function Ln(){var t=this.localeData()._week;return kt(this.year(),t.dow,t.doy)}function In(t,e,n,r,o){var i;return null==t?St(this,r,o).year:(i=kt(t,r,o),e>i&&(e=i),xn.call(this,t,e,n,r,o))}function xn(t,e,n,r,o){var i=wt(t,e,n,r,o),a=yt(i.year,0,i.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}function Pn(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}function $n(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}function Fn(t,e){e[so]=b(1e3*("0."+t))}function On(){return this._isUTC?"UTC":""}function Yn(){return this._isUTC?"Coordinated Universal Time":""}function Nn(t){return _e(1e3*t)}function Rn(){return _e.apply(null,arguments).parseZone()}function En(t){return t}function Hn(t,e,n,r){var o=ee(),i=l().set(r,e);return o[n](i,t)}function Un(t,e,n){if(i(t)&&(e=t,t=undefined),t=t||"",null!=e)return Hn(t,e,n,"month");var r,o=[];for(r=0;r<12;r++)o[r]=Hn(t,r,n,"month");return o}function jn(t,e,n,r){"boolean"==typeof t?(i(e)&&(n=e,e=undefined),e=e||""):(e=t,n=e,t=!1,i(e)&&(n=e,e=undefined),e=e||"");var o=ee(),a=t?o._week.dow:0;if(null!=n)return Hn(e,(n+a)%7,r,"day");var s,u=[];for(s=0;s<7;s++)u[s]=Hn(e,(s+a)%7,r,"day");return u}function zn(t,e){return Un(t,e,"months")}function Wn(t,e){return Un(t,e,"monthsShort")}function Gn(t,e,n){return jn(t,e,n,"weekdays")}function Vn(t,e,n){return jn(t,e,n,"weekdaysShort")}function Jn(t,e,n){return jn(t,e,n,"weekdaysMin")}function qn(){var t=this._data;return this._milliseconds=Qo(this._milliseconds),this._days=Qo(this._days),this._months=Qo(this._months),t.milliseconds=Qo(t.milliseconds),t.seconds=Qo(t.seconds),t.minutes=Qo(t.minutes),t.hours=Qo(t.hours),t.months=Qo(t.months),t.years=Qo(t.years),this}function Kn(t,e,n,r){var o=Ee(e,n);return t._milliseconds+=r*o._milliseconds,t._days+=r*o._days,t._months+=r*o._months,t._bubble()}function Zn(t,e){return Kn(this,t,e,1)}function Xn(t,e){return Kn(this,t,e,-1)}function Qn(t){return t<0?Math.floor(t):Math.ceil(t)}function tr(){var t,e,n,r,o,i=this._milliseconds,a=this._days,s=this._months,u=this._data;return i>=0&&a>=0&&s>=0||i<=0&&a<=0&&s<=0||(i+=864e5*Qn(nr(s)+a),a=0,s=0),u.milliseconds=i%1e3,t=y(i/1e3),u.seconds=t%60,e=y(t/60),u.minutes=e%60,n=y(e/60),u.hours=n%24,a+=y(n/24),o=y(er(a)),s+=o,a-=Qn(nr(o)),r=y(s/12),s%=12,u.days=a,u.months=s,u.years=r,this}function er(t){return 4800*t/146097}function nr(t){return 146097*t/4800}
function rr(t){var e,n,r=this._milliseconds;if("month"===(t=O(t))||"year"===t)return e=this._days+r/864e5,n=this._months+er(e),"month"===t?n:n/12;switch(e=this._days+Math.round(nr(this._months)),t){case"week":return e/7+r/6048e5;case"day":return e+r/864e5;case"hour":return 24*e+r/36e5;case"minute":return 1440*e+r/6e4;case"second":return 86400*e+r/1e3;case"millisecond":return Math.floor(864e5*e)+r;default:throw new Error("Unknown unit "+t)}}function or(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*b(this._months/12)}function ir(t){return function(){return this.as(t)}}function ar(t){return t=O(t),this[t+"s"]()}function sr(t){return function(){return this._data[t]}}function ur(){return y(this.days()/7)}function dr(t,e,n,r,o){return o.relativeTime(e||1,!!n,t,r)}function lr(t,e,n){var r=Ee(t).abs(),o=mi(r.as("s")),i=mi(r.as("m")),a=mi(r.as("h")),s=mi(r.as("d")),u=mi(r.as("M")),d=mi(r.as("y")),l=o<gi.s&&["s",o]||i<=1&&["m"]||i<gi.m&&["mm",i]||a<=1&&["h"]||a<gi.h&&["hh",a]||s<=1&&["d"]||s<gi.d&&["dd",s]||u<=1&&["M"]||u<gi.M&&["MM",u]||d<=1&&["y"]||["yy",d];return l[2]=e,l[3]=+t>0,l[4]=n,dr.apply(null,l)}function cr(t){return t===undefined?mi:"function"==typeof t&&(mi=t,!0)}function fr(t,e){return gi[t]!==undefined&&(e===undefined?gi[t]:(gi[t]=e,!0))}function hr(t){var e=this.localeData(),n=lr(this,!t,e);return t&&(n=e.pastFuture(+this,n)),e.postformat(n)}function pr(){var t,e,n,r=vi(this._milliseconds)/1e3,o=vi(this._days),i=vi(this._months);t=y(r/60),e=y(t/60),r%=60,t%=60,n=y(i/12),i%=12;var a=n,s=i,u=o,d=e,l=t,c=r,f=this.asSeconds();return f?(f<0?"-":"")+"P"+(a?a+"Y":"")+(s?s+"M":"")+(u?u+"D":"")+(d||l||c?"T":"")+(d?d+"H":"")+(l?l+"M":"")+(c?c+"S":""):"P0D"}var mr,gr;gr=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),n=e.length>>>0,r=0;r<n;r++)if(r in e&&t.call(this,e[r],r,e))return!0;return!1};var vr=gr,_r=t.momentProperties=[],yr=!1,br={};t.suppressDeprecationWarnings=!1,t.deprecationHandler=null;var wr;wr=Object.keys?Object.keys:function(t){var e,n=[];for(e in t)u(t,e)&&n.push(e);return n};var Sr,kr=wr,Cr={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Mr={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Ar="Invalid date",Dr="%d",Br=/\d{1,2}/,Tr={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Lr={},Ir={},xr=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Pr=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,$r={},Fr={},Or=/\d/,Yr=/\d\d/,Nr=/\d{3}/,Rr=/\d{4}/,Er=/[+-]?\d{6}/,Hr=/\d\d?/,Ur=/\d\d\d\d?/,jr=/\d\d\d\d\d\d?/,zr=/\d{1,3}/,Wr=/\d{1,4}/,Gr=/[+-]?\d{1,6}/,Vr=/\d+/,Jr=/[+-]?\d+/,qr=/Z|[+-]\d\d:?\d\d/gi,Kr=/Z|[+-]\d\d(?::?\d\d)?/gi,Zr=/[+-]?\d+(\.\d{1,3})?/,Xr=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Qr={},to={},eo=0,no=1,ro=2,oo=3,io=4,ao=5,so=6,uo=7,lo=8;Sr=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1};var co=Sr;G("M",["MM",2],"Mo",function(){return this.month()+1}),G("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),G("MMMM",0,0,function(t){return this.localeData().months(this,t)}),F("month","M"),N("month",8),Z("M",Hr),Z("MM",Hr,Yr),Z("MMM",function(t,e){return e.monthsShortRegex(t)}),Z("MMMM",function(t,e){return e.monthsRegex(t)}),et(["M","MM"],function(t,e){e[no]=b(t)-1}),et(["MMM","MMMM"],function(t,e,n,r){var o=n._locale.monthsParse(t,r,n._strict);null!=o?e[no]=o:f(n).invalidMonth=t});var fo=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,ho="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),po="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),mo=Xr,go=Xr;G("Y",0,0,function(){var t=this.year();return t<=9999?""+t:"+"+t}),G(0,["YY",2],0,function(){return this.year()%100}),G(0,["YYYY",4],0,"year"),G(0,["YYYYY",5],0,"year"),G(0,["YYYYYY",6,!0],0,"year"),F("year","y"),N("year",1),Z("Y",Jr),Z("YY",Hr,Yr),Z("YYYY",Wr,Rr),Z("YYYYY",Gr,Er),Z("YYYYYY",Gr,Er),et(["YYYYY","YYYYYY"],eo),et("YYYY",function(e,n){n[eo]=2===e.length?t.parseTwoDigitYear(e):b(e)}),et("YY",function(e,n){n[eo]=t.parseTwoDigitYear(e)}),et("Y",function(t,e){e[eo]=parseInt(t,10)}),t.parseTwoDigitYear=function(t){return b(t)+(b(t)>68?1900:2e3)};var vo=E("FullYear",!0);G("w",["ww",2],"wo","week"),G("W",["WW",2],"Wo","isoWeek"),F("week","w"),F("isoWeek","W"),N("week",5),N("isoWeek",5),Z("w",Hr),Z("ww",Hr,Yr),Z("W",Hr),Z("WW",Hr,Yr),nt(["w","ww","W","WW"],function(t,e,n,r){e[r.substr(0,1)]=b(t)});var _o={dow:0,doy:6};G("d",0,"do","day"),G("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),G("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),G("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),G("e",0,0,"weekday"),G("E",0,0,"isoWeekday"),F("day","d"),F("weekday","e"),F("isoWeekday","E"),N("day",11),N("weekday",11),N("isoWeekday",11),Z("d",Hr),Z("e",Hr),Z("E",Hr),Z("dd",function(t,e){return e.weekdaysMinRegex(t)}),Z("ddd",function(t,e){return e.weekdaysShortRegex(t)}),Z("dddd",function(t,e){return e.weekdaysRegex(t)}),nt(["dd","ddd","dddd"],function(t,e,n,r){var o=n._locale.weekdaysParse(t,r,n._strict);null!=o?e.d=o:f(n).invalidWeekday=t}),nt(["d","e","E"],function(t,e,n,r){e[r]=b(t)});var yo="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),bo="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),wo="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),So=Xr,ko=Xr,Co=Xr;G("H",["HH",2],0,"hour"),G("h",["hh",2],0,jt),G("k",["kk",2],0,zt),G("hmm",0,0,function(){return""+jt.apply(this)+W(this.minutes(),2)}),G("hmmss",0,0,function(){return""+jt.apply(this)+W(this.minutes(),2)+W(this.seconds(),2)}),G("Hmm",0,0,function(){return""+this.hours()+W(this.minutes(),2)}),G("Hmmss",0,0,function(){return""+this.hours()+W(this.minutes(),2)+W(this.seconds(),2)}),Wt("a",!0),Wt("A",!1),F("hour","h"),N("hour",13),Z("a",Gt),Z("A",Gt),Z("H",Hr),Z("h",Hr),Z("HH",Hr,Yr),Z("hh",Hr,Yr),Z("hmm",Ur),Z("hmmss",jr),Z("Hmm",Ur),Z("Hmmss",jr),et(["H","HH"],oo),et(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t}),et(["h","hh"],function(t,e,n){e[oo]=b(t),f(n).bigHour=!0}),et("hmm",function(t,e,n){var r=t.length-2;e[oo]=b(t.substr(0,r)),e[io]=b(t.substr(r)),f(n).bigHour=!0}),et("hmmss",function(t,e,n){var r=t.length-4,o=t.length-2;e[oo]=b(t.substr(0,r)),e[io]=b(t.substr(r,2)),e[ao]=b(t.substr(o)),f(n).bigHour=!0}),et("Hmm",function(t,e){var n=t.length-2;e[oo]=b(t.substr(0,n)),e[io]=b(t.substr(n))}),et("Hmmss",function(t,e){var n=t.length-4,r=t.length-2;e[oo]=b(t.substr(0,n)),e[io]=b(t.substr(n,2)),e[ao]=b(t.substr(r))});var Mo,Ao=/[ap]\.?m?\.?/i,Do=E("Hours",!0),Bo={calendar:Cr,longDateFormat:Mr,invalidDate:Ar,ordinal:Dr,ordinalParse:Br,relativeTime:Tr,months:ho,monthsShort:po,week:_o,weekdays:yo,weekdaysMin:wo,weekdaysShort:bo,meridiemParse:Ao},To={},Lo={},Io=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,xo=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Po=/Z|[+-]\d\d(?::?\d\d)?/,$o=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Fo=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Oo=/^\/?Date\((\-?\d+)/i;t.createFromInputFallback=k("value provided is not in a recognized ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),t.ISO_8601=function(){};var Yo=k("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=_e.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:p()}),No=k("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=_e.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:p()}),Ro=function(){return Date.now?Date.now():+new Date};Me("Z",":"),Me("ZZ",""),Z("Z",Kr),Z("ZZ",Kr),et(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=Ae(Kr,t)});var Eo=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var Ho=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Uo=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;Ee.fn=Se.prototype;var jo=ze(1,"add"),zo=ze(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Wo=k("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===undefined?this.localeData():this.locale(t)});G(0,["gg",2],0,function(){return this.weekYear()%100}),G(0,["GG",2],0,function(){return this.isoWeekYear()%100}),An("gggg","weekYear"),An("ggggg","weekYear"),An("GGGG","isoWeekYear"),An("GGGGG","isoWeekYear"),F("weekYear","gg"),F("isoWeekYear","GG"),N("weekYear",1),N("isoWeekYear",1),Z("G",Jr),Z("g",Jr),Z("GG",Hr,Yr),Z("gg",Hr,Yr),Z("GGGG",Wr,Rr),Z("gggg",Wr,Rr),Z("GGGGG",Gr,Er),Z("ggggg",Gr,Er),nt(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,r){e[r.substr(0,2)]=b(t)}),nt(["gg","GG"],function(e,n,r,o){n[o]=t.parseTwoDigitYear(e)}),G("Q",0,"Qo","quarter"),F("quarter","Q"),N("quarter",7),Z("Q",Or),et("Q",function(t,e){e[no]=3*(b(t)-1)}),G("D",["DD",2],"Do","date"),F("date","D"),N("date",9),Z("D",Hr),Z("DD",Hr,Yr),Z("Do",function(t,e){return t?e._ordinalParse:e._ordinalParseLenient}),et(["D","DD"],ro),et("Do",function(t,e){e[ro]=b(t.match(Hr)[0],10)});var Go=E("Date",!0);G("DDD",["DDDD",3],"DDDo","dayOfYear"),F("dayOfYear","DDD"),N("dayOfYear",4),Z("DDD",zr),Z("DDDD",Nr),et(["DDD","DDDD"],function(t,e,n){n._dayOfYear=b(t)}),G("m",["mm",2],0,"minute"),F("minute","m"),N("minute",14),Z("m",Hr),Z("mm",Hr,Yr),et(["m","mm"],io);var Vo=E("Minutes",!1);G("s",["ss",2],0,"second"),F("second","s"),N("second",15),Z("s",Hr),Z("ss",Hr,Yr),et(["s","ss"],ao);var Jo=E("Seconds",!1);G("S",0,0,function(){return~~(this.millisecond()/100)}),G(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),G(0,["SSS",3],0,"millisecond"),G(0,["SSSS",4],0,function(){return 10*this.millisecond()}),G(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),G(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),G(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),G(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),G(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),F("millisecond","ms"),N("millisecond",16),Z("S",zr,Or),Z("SS",zr,Yr),Z("SSS",zr,Nr);var qo;for(qo="SSSS";qo.length<=9;qo+="S")Z(qo,Vr);for(qo="S";qo.length<=9;qo+="S")et(qo,Fn);var Ko=E("Milliseconds",!1);G("z",0,0,"zoneAbbr"),G("zz",0,0,"zoneName");var Zo=v.prototype;Zo.add=jo,Zo.calendar=Ve,Zo.clone=Je,Zo.diff=en,Zo.endOf=mn,Zo.format=sn,Zo.from=un,Zo.fromNow=dn,Zo.to=ln,Zo.toNow=cn,Zo.get=j,Zo.invalidAt=Cn,Zo.isAfter=qe,Zo.isBefore=Ke,Zo.isBetween=Ze,Zo.isSame=Xe,Zo.isSameOrAfter=Qe,Zo.isSameOrBefore=tn,Zo.isValid=Sn,Zo.lang=Wo,Zo.locale=fn,Zo.localeData=hn,Zo.max=No,Zo.min=Yo,Zo.parsingFlags=kn,Zo.set=z,Zo.startOf=pn,Zo.subtract=zo,Zo.toArray=yn,Zo.toObject=bn,Zo.toDate=_n,Zo.toISOString=on,Zo.inspect=an,Zo.toJSON=wn,Zo.toString=rn,Zo.unix=vn,Zo.valueOf=gn,Zo.creationData=Mn,Zo.year=vo,Zo.isLeapYear=vt,Zo.weekYear=Dn,Zo.isoWeekYear=Bn,Zo.quarter=Zo.quarters=Pn,Zo.month=lt,Zo.daysInMonth=ct,Zo.week=Zo.weeks=Dt,Zo.isoWeek=Zo.isoWeeks=Bt,Zo.weeksInYear=Ln,Zo.isoWeeksInYear=Tn,Zo.date=Go,Zo.day=Zo.days=Ot,Zo.weekday=Yt,Zo.isoWeekday=Nt,Zo.dayOfYear=$n,Zo.hour=Zo.hours=Do,Zo.minute=Zo.minutes=Vo,Zo.second=Zo.seconds=Jo,Zo.millisecond=Zo.milliseconds=Ko,Zo.utcOffset=Te,Zo.utc=Ie,Zo.local=xe,Zo.parseZone=Pe,Zo.hasAlignedHourOffset=$e,Zo.isDST=Fe,Zo.isLocal=Ye,Zo.isUtcOffset=Ne,Zo.isUtc=Re,Zo.isUTC=Re,Zo.zoneAbbr=On,Zo.zoneName=Yn,Zo.dates=k("dates accessor is deprecated. Use date instead.",Go),Zo.months=k("months accessor is deprecated. Use month instead",lt),Zo.years=k("years accessor is deprecated. Use year instead",vo),Zo.zone=k("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Le),Zo.isDSTShifted=k("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Oe);var Xo=B.prototype;Xo.calendar=T,Xo.longDateFormat=L,Xo.invalidDate=I,Xo.ordinal=x,Xo.preparse=En,Xo.postformat=En,Xo.relativeTime=P,Xo.pastFuture=$,Xo.set=A,Xo.months=it,Xo.monthsShort=at,Xo.monthsParse=ut,Xo.monthsRegex=ht,Xo.monthsShortRegex=ft,Xo.week=Ct,Xo.firstDayOfYear=At,Xo.firstDayOfWeek=Mt,Xo.weekdays=It,Xo.weekdaysMin=Pt,Xo.weekdaysShort=xt,Xo.weekdaysParse=Ft,Xo.weekdaysRegex=Rt,Xo.weekdaysShortRegex=Et,Xo.weekdaysMinRegex=Ht,Xo.isPM=Vt,Xo.meridiem=Jt,Xt("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===b(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),t.lang=k("moment.lang is deprecated. Use moment.locale instead.",Xt),t.langData=k("moment.langData is deprecated. Use moment.localeData instead.",ee);var Qo=Math.abs,ti=ir("ms"),ei=ir("s"),ni=ir("m"),ri=ir("h"),oi=ir("d"),ii=ir("w"),ai=ir("M"),si=ir("y"),ui=sr("milliseconds"),di=sr("seconds"),li=sr("minutes"),ci=sr("hours"),fi=sr("days"),hi=sr("months"),pi=sr("years"),mi=Math.round,gi={s:45,m:45,h:22,d:26,M:11},vi=Math.abs,_i=Se.prototype;return _i.abs=qn,_i.add=Zn,_i.subtract=Xn,_i.as=rr,_i.asMilliseconds=ti,_i.asSeconds=ei,_i.asMinutes=ni,_i.asHours=ri,_i.asDays=oi,_i.asWeeks=ii,_i.asMonths=ai,_i.asYears=si,_i.valueOf=or,_i._bubble=tr,_i.get=ar,_i.milliseconds=ui,_i.seconds=di,_i.minutes=li,_i.hours=ci,_i.days=fi,_i.weeks=ur,_i.months=hi,_i.years=pi,_i.humanize=hr,_i.toISOString=pr,_i.toString=pr,_i.toJSON=pr,_i.locale=fn,_i.localeData=hn,_i.toIsoString=k("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",pr),_i.lang=Wo,G("X",0,0,"unix"),G("x",0,0,"valueOf"),Z("x",Jr),Z("X",Zr),et("X",function(t,e,n){n._d=new Date(1e3*parseFloat(t,10))}),et("x",function(t,e,n){n._d=new Date(b(t))}),t.version="2.17.1",e(_e),t.fn=Zo,t.min=be,t.max=we,t.now=Ro,t.utc=l,t.unix=Nn,t.months=zn,t.isDate=a,t.locale=Xt,t.invalid=p,t.duration=Ee,t.isMoment=_,t.weekdays=Gn,t.parseZone=Rn,t.localeData=ee,t.isDuration=ke,t.monthsShort=Wn,t.weekdaysMin=Jn,t.defineLocale=Qt,t.updateLocale=te,t.locales=ne,t.weekdaysShort=Vn,t.normalizeUnits=O,t.relativeTimeRounding=cr,t.relativeTimeThreshold=fr,t.calendarFormat=Ge,t.prototype=Zo,t}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?e(require("../moment")):"function"==typeof define&&define.amd?define(["../moment"],e):e(t.moment)}(this,function(t){"use strict";function e(t,e,n){var r={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[t+" Tage",t+" Tagen"],M:["ein Monat","einem Monat"],MM:[t+" Monate",t+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[t+" Jahre",t+" Jahren"]};return e?r[n][0]:r[n][1]}return t.defineLocale("de",{months:"Januar_Februar_M\xe4rz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:e,mm:"%d Minuten",h:e,hh:"%d Stunden",d:e,dd:e,M:e,MM:e,y:e,yy:e},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?e(require("../moment")):"function"==typeof define&&define.amd?define(["../moment"],e):e(t.moment)}(this,function(t){"use strict";return t.defineLocale("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:1,doy:4}})}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?e(require("../moment")):"function"==typeof define&&define.amd?define(["../moment"],e):e(t.moment)}(this,function(t){"use strict";var e="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_");return t.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(t,r){return/-MMM-/.test(r)?n[t.month()]:e[t.month()]},monthsParseExact:!0,weekdays:"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),weekdaysShort:"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s\xe1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[ma\xf1ana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un d\xeda",dd:"%d d\xedas",M:"un mes",MM:"%d meses",y:"un a\xf1o",yy:"%d a\xf1os"},ordinalParse:/\d{1,2}\xba/,ordinal:"%d\xba",week:{dow:1,doy:4}})}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?e(require("../moment")):"function"==typeof define&&define.amd?define(["../moment"],e):e(t.moment)}(this,function(t){"use strict";return t.defineLocale("fr",{months:"janvier_f\xe9vrier_mars_avril_mai_juin_juillet_ao\xfbt_septembre_octobre_novembre_d\xe9cembre".split("_"),monthsShort:"janv._f\xe9vr._mars_avr._mai_juin_juil._ao\xfbt_sept._oct._nov._d\xe9c.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd'hui \xe0] LT",nextDay:"[Demain \xe0] LT",nextWeek:"dddd [\xe0] LT",lastDay:"[Hier \xe0] LT",lastWeek:"dddd [dernier \xe0] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|)/,ordinal:function(t){return t+(1===t?"er":"")},week:{dow:1,doy:4}})}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?e(require("../moment")):"function"==typeof define&&define.amd?define(["../moment"],e):e(t.moment)}(this,function(t){"use strict";return t.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"Domenica_Luned\xec_Marted\xec_Mercoled\xec_Gioved\xec_Venerd\xec_Sabato".split("_"),weekdaysShort:"Dom_Lun_Mar_Mer_Gio_Ven_Sab".split("_"),weekdaysMin:"Do_Lu_Ma_Me_Gi_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){switch(this.day()){case 0:return"[la scorsa] dddd [alle] LT";default:return"[lo scorso] dddd [alle] LT"}},sameElse:"L"},relativeTime:{future:function(t){return(/^[0-9].+$/.test(t)?"tra":"in")+" "+t},past:"%s fa",s:"alcuni secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},ordinalParse:/\d{1,2}\xba/,ordinal:"%d\xba",week:{dow:1,doy:4}})}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?e(require("../moment")):"function"==typeof define&&define.amd?define(["../moment"],e):e(t.moment)}(this,function(t){"use strict";return t.defineLocale("ja",{months:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),monthsShort:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),weekdays:"\u65e5\u66dc\u65e5_\u6708\u66dc\u65e5_\u706b\u66dc\u65e5_\u6c34\u66dc\u65e5_\u6728\u66dc\u65e5_\u91d1\u66dc\u65e5_\u571f\u66dc\u65e5".split("_"),weekdaysShort:"\u65e5_\u6708_\u706b_\u6c34_\u6728_\u91d1_\u571f".split("_"),weekdaysMin:"\u65e5_\u6708_\u706b_\u6c34_\u6728_\u91d1_\u571f".split("_"),longDateFormat:{LT:"Ah\u6642m\u5206",LTS:"Ah\u6642m\u5206s\u79d2",L:"YYYY/MM/DD",LL:"YYYY\u5e74M\u6708D\u65e5",LLL:"YYYY\u5e74M\u6708D\u65e5Ah\u6642m\u5206",LLLL:"YYYY\u5e74M\u6708D\u65e5Ah\u6642m\u5206 dddd"},meridiemParse:/\u5348\u524d|\u5348\u5f8c/i,isPM:function(t){return"\u5348\u5f8c"===t},meridiem:function(t){return t<12?"\u5348\u524d":"\u5348\u5f8c"},calendar:{sameDay:"[\u4eca\u65e5] LT",nextDay:"[\u660e\u65e5] LT",nextWeek:"[\u6765\u9031]dddd LT",lastDay:"[\u6628\u65e5] LT",lastWeek:"[\u524d\u9031]dddd LT",sameElse:"L"},ordinalParse:/\d{1,2}\u65e5/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"\u65e5";default:return t}},relativeTime:{future:"%s\u5f8c",past:"%s\u524d",s:"\u6570\u79d2",m:"1\u5206",mm:"%d\u5206",h:"1\u6642\u9593",hh:"%d\u6642\u9593",d:"1\u65e5",dd:"%d\u65e5",M:"1\u30f6\u6708",MM:"%d\u30f6\u6708",y:"1\u5e74",yy:"%d\u5e74"}})}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?e(require("../moment")):"function"==typeof define&&define.amd?define(["../moment"],e):e(t.moment)}(this,function(t){"use strict";return t.defineLocale("ko",{months:"1\uc6d4_2\uc6d4_3\uc6d4_4\uc6d4_5\uc6d4_6\uc6d4_7\uc6d4_8\uc6d4_9\uc6d4_10\uc6d4_11\uc6d4_12\uc6d4".split("_"),monthsShort:"1\uc6d4_2\uc6d4_3\uc6d4_4\uc6d4_5\uc6d4_6\uc6d4_7\uc6d4_8\uc6d4_9\uc6d4_10\uc6d4_11\uc6d4_12\uc6d4".split("_"),weekdays:"\uc77c\uc694\uc77c_\uc6d4\uc694\uc77c_\ud654\uc694\uc77c_\uc218\uc694\uc77c_\ubaa9\uc694\uc77c_\uae08\uc694\uc77c_\ud1a0\uc694\uc77c".split("_"),weekdaysShort:"\uc77c_\uc6d4_\ud654_\uc218_\ubaa9_\uae08_\ud1a0".split("_"),weekdaysMin:"\uc77c_\uc6d4_\ud654_\uc218_\ubaa9_\uae08_\ud1a0".split("_"),longDateFormat:{LT:"A h\uc2dc m\ubd84",LTS:"A h\uc2dc m\ubd84 s\ucd08",L:"YYYY.MM.DD",LL:"YYYY\ub144 MMMM D\uc77c",LLL:"YYYY\ub144 MMMM D\uc77c A h\uc2dc m\ubd84",LLLL:"YYYY\ub144 MMMM D\uc77c dddd A h\uc2dc m\ubd84"},calendar:{sameDay:"\uc624\ub298 LT",nextDay:"\ub0b4\uc77c LT",nextWeek:"dddd LT",lastDay:"\uc5b4\uc81c LT",lastWeek:"\uc9c0\ub09c\uc8fc dddd LT",sameElse:"L"},relativeTime:{future:"%s \ud6c4",past:"%s \uc804",s:"\uba87 \ucd08",ss:"%d\ucd08",m:"\uc77c\ubd84",mm:"%d\ubd84",h:"\ud55c \uc2dc\uac04",hh:"%d\uc2dc\uac04",d:"\ud558\ub8e8",dd:"%d\uc77c",M:"\ud55c \ub2ec",MM:"%d\ub2ec",y:"\uc77c \ub144",yy:"%d\ub144"},ordinalParse:/\d{1,2}\uc77c/,ordinal:"%d\uc77c",meridiemParse:/\uc624\uc804|\uc624\ud6c4/,isPM:function(t){return"\uc624\ud6c4"===t},meridiem:function(t){return t<12?"\uc624\uc804":"\uc624\ud6c4"}})}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?e(require("../moment")):"function"==typeof define&&define.amd?define(["../moment"],e):e(t.moment)}(this,function(t){"use strict";var e="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),n="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),r=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],o=/^(januari|februari|maart|april|mei|april|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;return t.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(t,r){return/-MMM-/.test(r)?n[t.month()]:e[t.month()]},monthsRegex:o,monthsShortRegex:o,monthsStrictRegex:/^(januari|februari|maart|mei|ju[nl]i|april|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"Zo_Ma_Di_Wo_Do_Vr_Za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",m:"\xe9\xe9n minuut",mm:"%d minuten",h:"\xe9\xe9n uur",hh:"%d uur",d:"\xe9\xe9n dag",dd:"%d dagen",M:"\xe9\xe9n maand",MM:"%d maanden",y:"\xe9\xe9n jaar",yy:"%d jaar"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(t){return t+(1===t||8===t||t>=20?"ste":"de")},week:{dow:1,doy:4}})}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?e(require("../moment")):"function"==typeof define&&define.amd?define(["../moment"],e):e(t.moment)}(this,function(t){"use strict";function e(t){return t%10<5&&t%10>1&&~~(t/10)%10!=1}function n(t,n,r){var o=t+" ";switch(r){case"m":return n?"minuta":"minut\u0119";case"mm":return o+(e(t)?"minuty":"minut");case"h":return n?"godzina":"godzin\u0119";case"hh":return o+(e(t)?"godziny":"godzin");case"MM":return o+(e(t)?"miesi\u0105ce":"miesi\u0119cy");case"yy":return o+(e(t)?"lata":"lat")}}var r="stycze\u0144_luty_marzec_kwiecie\u0144_maj_czerwiec_lipiec_sierpie\u0144_wrzesie\u0144_pa\u017adziernik_listopad_grudzie\u0144".split("_"),o="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrze\u015bnia_pa\u017adziernika_listopada_grudnia".split("_");return t.defineLocale("pl",{months:function(t,e){return""===e?"("+o[t.month()]+"|"+r[t.month()]+")":/D MMMM/.test(e)?o[t.month()]:r[t.month()]},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa\u017a_lis_gru".split("_"),weekdays:"niedziela_poniedzia\u0142ek_wtorek_\u015broda_czwartek_pi\u0105tek_sobota".split("_"),weekdaysShort:"ndz_pon_wt_\u015br_czw_pt_sob".split("_"),weekdaysMin:"Nd_Pn_Wt_\u015ar_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Dzi\u015b o] LT",nextDay:"[Jutro o] LT",nextWeek:"[W] dddd [o] LT",lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zesz\u0142\u0105 niedziel\u0119 o] LT";case 3:return"[W zesz\u0142\u0105 \u015brod\u0119 o] LT";case 6:return"[W zesz\u0142\u0105 sobot\u0119 o] LT";default:return"[W zesz\u0142y] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",m:n,mm:n,h:n,hh:n,d:"1 dzie\u0144",dd:"%d dni",M:"miesi\u0105c",MM:n,y:"rok",yy:n},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?e(require("../moment")):"function"==typeof define&&define.amd?define(["../moment"],e):e(t.moment)}(this,function(t){"use strict";return t.defineLocale("pt",{months:"Janeiro_Fevereiro_Mar\xe7o_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingo_Segunda-Feira_Ter\xe7a-Feira_Quarta-Feira_Quinta-Feira_Sexta-Feira_S\xe1bado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_S\xe1b".split("_"),weekdaysMin:"Dom_2\xaa_3\xaa_4\xaa_5\xaa_6\xaa_S\xe1b".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY HH:mm"},calendar:{sameDay:"[Hoje \xe0s] LT",nextDay:"[Amanh\xe3 \xe0s] LT",nextWeek:"dddd [\xe0s] LT",lastDay:"[Ontem \xe0s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[\xdaltimo] dddd [\xe0s] LT":"[\xdaltima] dddd [\xe0s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"h\xe1 %s",s:"segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um m\xeas",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinalParse:/\d{1,2}\xba/,ordinal:"%d\xba",week:{dow:1,doy:4}})}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?e(require("../moment")):"function"==typeof define&&define.amd?define(["../moment"],e):e(t.moment)}(this,function(t){"use strict";function e(t,e){var n=t.split("_");return e%10==1&&e%100!=11?n[0]:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?n[1]:n[2]}function n(t,n,r){var o={mm:n?"\u043c\u0438\u043d\u0443\u0442\u0430_\u043c\u0438\u043d\u0443\u0442\u044b_\u043c\u0438\u043d\u0443\u0442":"\u043c\u0438\u043d\u0443\u0442\u0443_\u043c\u0438\u043d\u0443\u0442\u044b_\u043c\u0438\u043d\u0443\u0442",hh:"\u0447\u0430\u0441_\u0447\u0430\u0441\u0430_\u0447\u0430\u0441\u043e\u0432",dd:"\u0434\u0435\u043d\u044c_\u0434\u043d\u044f_\u0434\u043d\u0435\u0439",MM:"\u043c\u0435\u0441\u044f\u0446_\u043c\u0435\u0441\u044f\u0446\u0430_\u043c\u0435\u0441\u044f\u0446\u0435\u0432",yy:"\u0433\u043e\u0434_\u0433\u043e\u0434\u0430_\u043b\u0435\u0442"};return"m"===r?n?"\u043c\u0438\u043d\u0443\u0442\u0430":"\u043c\u0438\u043d\u0443\u0442\u0443":t+" "+e(o[r],+t)}var r=[/^\u044f\u043d\u0432/i,/^\u0444\u0435\u0432/i,/^\u043c\u0430\u0440/i,/^\u0430\u043f\u0440/i,/^\u043c\u0430[\u0439\u044f]/i,/^\u0438\u044e\u043d/i,/^\u0438\u044e\u043b/i,/^\u0430\u0432\u0433/i,/^\u0441\u0435\u043d/i,/^\u043e\u043a\u0442/i,/^\u043d\u043e\u044f/i,/^\u0434\u0435\u043a/i];return t.defineLocale("ru",{months:{
format:"\u044f\u043d\u0432\u0430\u0440\u044f_\u0444\u0435\u0432\u0440\u0430\u043b\u044f_\u043c\u0430\u0440\u0442\u0430_\u0430\u043f\u0440\u0435\u043b\u044f_\u043c\u0430\u044f_\u0438\u044e\u043d\u044f_\u0438\u044e\u043b\u044f_\u0430\u0432\u0433\u0443\u0441\u0442\u0430_\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f_\u043e\u043a\u0442\u044f\u0431\u0440\u044f_\u043d\u043e\u044f\u0431\u0440\u044f_\u0434\u0435\u043a\u0430\u0431\u0440\u044f".split("_"),standalone:"\u044f\u043d\u0432\u0430\u0440\u044c_\u0444\u0435\u0432\u0440\u0430\u043b\u044c_\u043c\u0430\u0440\u0442_\u0430\u043f\u0440\u0435\u043b\u044c_\u043c\u0430\u0439_\u0438\u044e\u043d\u044c_\u0438\u044e\u043b\u044c_\u0430\u0432\u0433\u0443\u0441\u0442_\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044c_\u043e\u043a\u0442\u044f\u0431\u0440\u044c_\u043d\u043e\u044f\u0431\u0440\u044c_\u0434\u0435\u043a\u0430\u0431\u0440\u044c".split("_")},monthsShort:{format:"\u044f\u043d\u0432._\u0444\u0435\u0432\u0440._\u043c\u0430\u0440._\u0430\u043f\u0440._\u043c\u0430\u044f_\u0438\u044e\u043d\u044f_\u0438\u044e\u043b\u044f_\u0430\u0432\u0433._\u0441\u0435\u043d\u0442._\u043e\u043a\u0442._\u043d\u043e\u044f\u0431._\u0434\u0435\u043a.".split("_"),standalone:"\u044f\u043d\u0432._\u0444\u0435\u0432\u0440._\u043c\u0430\u0440\u0442_\u0430\u043f\u0440._\u043c\u0430\u0439_\u0438\u044e\u043d\u044c_\u0438\u044e\u043b\u044c_\u0430\u0432\u0433._\u0441\u0435\u043d\u0442._\u043e\u043a\u0442._\u043d\u043e\u044f\u0431._\u0434\u0435\u043a.".split("_")},weekdays:{standalone:"\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435_\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a_\u0432\u0442\u043e\u0440\u043d\u0438\u043a_\u0441\u0440\u0435\u0434\u0430_\u0447\u0435\u0442\u0432\u0435\u0440\u0433_\u043f\u044f\u0442\u043d\u0438\u0446\u0430_\u0441\u0443\u0431\u0431\u043e\u0442\u0430".split("_"),format:"\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435_\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a_\u0432\u0442\u043e\u0440\u043d\u0438\u043a_\u0441\u0440\u0435\u0434\u0443_\u0447\u0435\u0442\u0432\u0435\u0440\u0433_\u043f\u044f\u0442\u043d\u0438\u0446\u0443_\u0441\u0443\u0431\u0431\u043e\u0442\u0443".split("_"),isFormat:/\[ ?[\u0412\u0432] ?(?:\u043f\u0440\u043e\u0448\u043b\u0443\u044e|\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0443\u044e|\u044d\u0442\u0443)? ?\] ?dddd/},weekdaysShort:"\u0432\u0441_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),weekdaysMin:"\u0432\u0441_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),monthsParse:r,longMonthsParse:r,shortMonthsParse:r,monthsRegex:/^(\u044f\u043d\u0432\u0430\u0440[\u044c\u044f]|\u044f\u043d\u0432\.?|\u0444\u0435\u0432\u0440\u0430\u043b[\u044c\u044f]|\u0444\u0435\u0432\u0440?\.?|\u043c\u0430\u0440\u0442\u0430?|\u043c\u0430\u0440\.?|\u0430\u043f\u0440\u0435\u043b[\u044c\u044f]|\u0430\u043f\u0440\.?|\u043c\u0430[\u0439\u044f]|\u0438\u044e\u043d[\u044c\u044f]|\u0438\u044e\u043d\.?|\u0438\u044e\u043b[\u044c\u044f]|\u0438\u044e\u043b\.?|\u0430\u0432\u0433\u0443\u0441\u0442\u0430?|\u0430\u0432\u0433\.?|\u0441\u0435\u043d\u0442\u044f\u0431\u0440[\u044c\u044f]|\u0441\u0435\u043d\u0442?\.?|\u043e\u043a\u0442\u044f\u0431\u0440[\u044c\u044f]|\u043e\u043a\u0442\.?|\u043d\u043e\u044f\u0431\u0440[\u044c\u044f]|\u043d\u043e\u044f\u0431?\.?|\u0434\u0435\u043a\u0430\u0431\u0440[\u044c\u044f]|\u0434\u0435\u043a\.?)/i,monthsShortRegex:/^(\u044f\u043d\u0432\u0430\u0440[\u044c\u044f]|\u044f\u043d\u0432\.?|\u0444\u0435\u0432\u0440\u0430\u043b[\u044c\u044f]|\u0444\u0435\u0432\u0440?\.?|\u043c\u0430\u0440\u0442\u0430?|\u043c\u0430\u0440\.?|\u0430\u043f\u0440\u0435\u043b[\u044c\u044f]|\u0430\u043f\u0440\.?|\u043c\u0430[\u0439\u044f]|\u0438\u044e\u043d[\u044c\u044f]|\u0438\u044e\u043d\.?|\u0438\u044e\u043b[\u044c\u044f]|\u0438\u044e\u043b\.?|\u0430\u0432\u0433\u0443\u0441\u0442\u0430?|\u0430\u0432\u0433\.?|\u0441\u0435\u043d\u0442\u044f\u0431\u0440[\u044c\u044f]|\u0441\u0435\u043d\u0442?\.?|\u043e\u043a\u0442\u044f\u0431\u0440[\u044c\u044f]|\u043e\u043a\u0442\.?|\u043d\u043e\u044f\u0431\u0440[\u044c\u044f]|\u043d\u043e\u044f\u0431?\.?|\u0434\u0435\u043a\u0430\u0431\u0440[\u044c\u044f]|\u0434\u0435\u043a\.?)/i,monthsStrictRegex:/^(\u044f\u043d\u0432\u0430\u0440[\u044f\u044c]|\u0444\u0435\u0432\u0440\u0430\u043b[\u044f\u044c]|\u043c\u0430\u0440\u0442\u0430?|\u0430\u043f\u0440\u0435\u043b[\u044f\u044c]|\u043c\u0430[\u044f\u0439]|\u0438\u044e\u043d[\u044f\u044c]|\u0438\u044e\u043b[\u044f\u044c]|\u0430\u0432\u0433\u0443\u0441\u0442\u0430?|\u0441\u0435\u043d\u0442\u044f\u0431\u0440[\u044f\u044c]|\u043e\u043a\u0442\u044f\u0431\u0440[\u044f\u044c]|\u043d\u043e\u044f\u0431\u0440[\u044f\u044c]|\u0434\u0435\u043a\u0430\u0431\u0440[\u044f\u044c])/i,monthsShortStrictRegex:/^(\u044f\u043d\u0432\.|\u0444\u0435\u0432\u0440?\.|\u043c\u0430\u0440[\u0442.]|\u0430\u043f\u0440\.|\u043c\u0430[\u044f\u0439]|\u0438\u044e\u043d[\u044c\u044f.]|\u0438\u044e\u043b[\u044c\u044f.]|\u0430\u0432\u0433\.|\u0441\u0435\u043d\u0442?\.|\u043e\u043a\u0442\.|\u043d\u043e\u044f\u0431?\.|\u0434\u0435\u043a\.)/i,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY \u0433.",LLL:"D MMMM YYYY \u0433., HH:mm",LLLL:"dddd, D MMMM YYYY \u0433., HH:mm"},calendar:{sameDay:"[\u0421\u0435\u0433\u043e\u0434\u043d\u044f \u0432] LT",nextDay:"[\u0417\u0430\u0432\u0442\u0440\u0430 \u0432] LT",lastDay:"[\u0412\u0447\u0435\u0440\u0430 \u0432] LT",nextWeek:function(t){if(t.week()===this.week())return 2===this.day()?"[\u0412\u043e] dddd [\u0432] LT":"[\u0412] dddd [\u0432] LT";switch(this.day()){case 0:return"[\u0412 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435] dddd [\u0432] LT";case 1:case 2:case 4:return"[\u0412 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439] dddd [\u0432] LT";case 3:case 5:case 6:return"[\u0412 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0443\u044e] dddd [\u0432] LT"}},lastWeek:function(t){if(t.week()===this.week())return 2===this.day()?"[\u0412\u043e] dddd [\u0432] LT":"[\u0412] dddd [\u0432] LT";switch(this.day()){case 0:return"[\u0412 \u043f\u0440\u043e\u0448\u043b\u043e\u0435] dddd [\u0432] LT";case 1:case 2:case 4:return"[\u0412 \u043f\u0440\u043e\u0448\u043b\u044b\u0439] dddd [\u0432] LT";case 3:case 5:case 6:return"[\u0412 \u043f\u0440\u043e\u0448\u043b\u0443\u044e] dddd [\u0432] LT"}},sameElse:"L"},relativeTime:{future:"\u0447\u0435\u0440\u0435\u0437 %s",past:"%s \u043d\u0430\u0437\u0430\u0434",s:"\u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u0435\u043a\u0443\u043d\u0434",m:n,mm:n,h:"\u0447\u0430\u0441",hh:n,d:"\u0434\u0435\u043d\u044c",dd:n,M:"\u043c\u0435\u0441\u044f\u0446",MM:n,y:"\u0433\u043e\u0434",yy:n},meridiemParse:/\u043d\u043e\u0447\u0438|\u0443\u0442\u0440\u0430|\u0434\u043d\u044f|\u0432\u0435\u0447\u0435\u0440\u0430/i,isPM:function(t){return/^(\u0434\u043d\u044f|\u0432\u0435\u0447\u0435\u0440\u0430)$/.test(t)},meridiem:function(t){return t<4?"\u043d\u043e\u0447\u0438":t<12?"\u0443\u0442\u0440\u0430":t<17?"\u0434\u043d\u044f":"\u0432\u0435\u0447\u0435\u0440\u0430"},ordinalParse:/\d{1,2}-(\u0439|\u0433\u043e|\u044f)/,ordinal:function(t,e){switch(e){case"M":case"d":case"DDD":return t+"-\u0439";case"D":return t+"-\u0433\u043e";case"w":case"W":return t+"-\u044f";default:return t}},week:{dow:1,doy:7}})}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?e(require("../moment")):"function"==typeof define&&define.amd?define(["../moment"],e):e(t.moment)}(this,function(t){"use strict";var e={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'\xfcnc\xfc",4:"'\xfcnc\xfc",100:"'\xfcnc\xfc",6:"'nc\u0131",9:"'uncu",10:"'uncu",30:"'uncu",60:"'\u0131nc\u0131",90:"'\u0131nc\u0131"};return t.defineLocale("tr",{months:"Ocak_\u015eubat_Mart_Nisan_May\u0131s_Haziran_Temmuz_A\u011fustos_Eyl\xfcl_Ekim_Kas\u0131m_Aral\u0131k".split("_"),monthsShort:"Oca_\u015eub_Mar_Nis_May_Haz_Tem_A\u011fu_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_Sal\u0131_\xc7ar\u015famba_Per\u015fembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pts_Sal_\xc7ar_Per_Cum_Cts".split("_"),weekdaysMin:"Pz_Pt_Sa_\xc7a_Pe_Cu_Ct".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bug\xfcn saat] LT",nextDay:"[yar\u0131n saat] LT",nextWeek:"[haftaya] dddd [saat] LT",lastDay:"[d\xfcn] LT",lastWeek:"[ge\xe7en hafta] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s \xf6nce",s:"birka\xe7 saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir g\xfcn",dd:"%d g\xfcn",M:"bir ay",MM:"%d ay",y:"bir y\u0131l",yy:"%d y\u0131l"},ordinalParse:/\d{1,2}'(inci|nci|\xfcnc\xfc|nc\u0131|uncu|\u0131nc\u0131)/,ordinal:function(t){if(0===t)return t+"'\u0131nc\u0131";var n=t%10,r=t%100-n,o=t>=100?100:null;return t+(e[n]||e[r]||e[o])},week:{dow:1,doy:7}})}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?e(require("../moment")):"function"==typeof define&&define.amd?define(["../moment"],e):e(t.moment)}(this,function(t){"use strict";return t.defineLocale("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"s\xf6ndag_m\xe5ndag_tisdag_onsdag_torsdag_fredag_l\xf6rdag".split("_"),weekdaysShort:"s\xf6n_m\xe5n_tis_ons_tor_fre_l\xf6r".split("_"),weekdaysMin:"s\xf6_m\xe5_ti_on_to_fr_l\xf6".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [kl.] HH:mm",LLLL:"dddd D MMMM YYYY [kl.] HH:mm",lll:"D MMM YYYY HH:mm",llll:"ddd D MMM YYYY HH:mm"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Ig\xe5r] LT",nextWeek:"[P\xe5] dddd LT",lastWeek:"[I] dddd[s] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"f\xf6r %s sedan",s:"n\xe5gra sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en m\xe5nad",MM:"%d m\xe5nader",y:"ett \xe5r",yy:"%d \xe5r"},ordinalParse:/\d{1,2}(e|a)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"e":1===e?"a":2===e?"a":"e")},week:{dow:1,doy:4}})}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?e(require("../moment")):"function"==typeof define&&define.amd?define(["../moment"],e):e(t.moment)}(this,function(t){"use strict";return t.defineLocale("zh-hk",{months:"\u4e00\u6708_\u4e8c\u6708_\u4e09\u6708_\u56db\u6708_\u4e94\u6708_\u516d\u6708_\u4e03\u6708_\u516b\u6708_\u4e5d\u6708_\u5341\u6708_\u5341\u4e00\u6708_\u5341\u4e8c\u6708".split("_"),monthsShort:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),weekdays:"\u661f\u671f\u65e5_\u661f\u671f\u4e00_\u661f\u671f\u4e8c_\u661f\u671f\u4e09_\u661f\u671f\u56db_\u661f\u671f\u4e94_\u661f\u671f\u516d".split("_"),weekdaysShort:"\u9031\u65e5_\u9031\u4e00_\u9031\u4e8c_\u9031\u4e09_\u9031\u56db_\u9031\u4e94_\u9031\u516d".split("_"),weekdaysMin:"\u65e5_\u4e00_\u4e8c_\u4e09_\u56db_\u4e94_\u516d".split("_"),longDateFormat:{LT:"Ah\u9edemm\u5206",LTS:"Ah\u9edem\u5206s\u79d2",L:"YYYY\u5e74MMMD\u65e5",LL:"YYYY\u5e74MMMD\u65e5",LLL:"YYYY\u5e74MMMD\u65e5Ah\u9edemm\u5206",LLLL:"YYYY\u5e74MMMD\u65e5ddddAh\u9edemm\u5206",l:"YYYY\u5e74MMMD\u65e5",ll:"YYYY\u5e74MMMD\u65e5",lll:"YYYY\u5e74MMMD\u65e5Ah\u9edemm\u5206",llll:"YYYY\u5e74MMMD\u65e5ddddAh\u9edemm\u5206"},meridiemParse:/\u51cc\u6668|\u65e9\u4e0a|\u4e0a\u5348|\u4e2d\u5348|\u4e0b\u5348|\u665a\u4e0a/,meridiemHour:function(t,e){return 12===t&&(t=0),"\u51cc\u6668"===e||"\u65e9\u4e0a"===e||"\u4e0a\u5348"===e?t:"\u4e2d\u5348"===e?t>=11?t:t+12:"\u4e0b\u5348"===e||"\u665a\u4e0a"===e?t+12:void 0},meridiem:function(t,e){var n=100*t+e;return n<600?"\u51cc\u6668":n<900?"\u65e9\u4e0a":n<1130?"\u4e0a\u5348":n<1230?"\u4e2d\u5348":n<1800?"\u4e0b\u5348":"\u665a\u4e0a"},calendar:{sameDay:"[\u4eca\u5929]LT",nextDay:"[\u660e\u5929]LT",nextWeek:"[\u4e0b]ddddLT",lastDay:"[\u6628\u5929]LT",lastWeek:"[\u4e0a]ddddLT",sameElse:"L"},ordinalParse:/\d{1,2}(\u65e5|\u6708|\u9031)/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"\u65e5";case"M":return t+"\u6708";case"w":case"W":return t+"\u9031";default:return t}},relativeTime:{future:"%s\u5167",past:"%s\u524d",s:"\u5e7e\u79d2",m:"1 \u5206\u9418",mm:"%d \u5206\u9418",h:"1 \u5c0f\u6642",hh:"%d \u5c0f\u6642",d:"1 \u5929",dd:"%d \u5929",M:"1 \u500b\u6708",MM:"%d \u500b\u6708",y:"1 \u5e74",yy:"%d \u5e74"}})}),function(){this.Boards.run(["$document",function(t){var e,n,r;if(e=null!=(n=t[0])&&null!=(r=n.documentElement)?r.lang:void 0)return moment.locale(e)}])}.call(this),function(){this.Comment=function(){function t(t){var e;Object.merge(this,Object.clone(t,!0)),(null!=(e=this.created_date)?e._isAMomentObject:void 0)&&(this.created_date=this.created_date._i),this.created_date=GiDateTime.makeUniversal(this.created_date),this.created_date=moment(this.created_date)}return t.prototype=Object.extended(),t}()}.call(this),function(){this.Asset=function(){function t(t){var e,n,r;Object.merge(this,t,!0),t.hasOwnProperty("id")||t.hasOwnProperty("uri")&&t.uri.startsWith("gi:")&&(this.id=t.uri.slice(3)),this.comments=function(){var t,n,r,o;for(r=this.comments||[],o=[],t=0,n=r.length;t<n;t++)e=r[t],o.push(new Comment(e));return o}.call(this),(null!=(n=this.date_created)?n._isAMomentObject:void 0)&&(this.date_created=this.date_created._i),this.date_created=moment(this.date_created),this.compound=!!(null!=t&&null!=(r=t.id)?r.match("/"):void 0)}return t.prototype=Object.extended(),t}()}.call(this),function(){this.AssetDetailService=function(){function e(){}var n,r;return n={xxlarge:"XXL",xlarge:"XL",large:"L",medium:"M",small:"S",extrasmall:"XS"},r=function(t){return"Signature"===(null!=t?t.i_stock_collection:void 0)||"SignaturePlus"===(null!=t?t.i_stock_collection:void 0)},e.prototype.getSizeMappingTag=function(t){var e;if(t)return"eps"===t.name?"EPS":n[null!=(e=t.tee_shirt_size)?e.toLowerCase():void 0]},e.prototype.getAssetCollection=function(e){if(e)return window.currentSite.isiStock?r(e)?t("signature_collection"):t("essentials_collection"):void 0},e}(),Collaboration.factory("assetDetailService",function(){return new AssetDetailService})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.BoardAssetsSelection=function(){function e(e,n){this.giSessionStorage=e,this.eventBus=n,this.triggerSelectionChanged=t(this.triggerSelectionChanged,this),this.isBoardAssetSelected=t(this.isBoardAssetSelected,this),this.setBoardAssetSelection=t(this.setBoardAssetSelection,this),this.deselectBoardAssets=t(this.deselectBoardAssets,this),this.selectBoardAssets=t(this.selectBoardAssets,this),this.rememberSelectedAssets=t(this.rememberSelectedAssets,this),this.selectedAssets=t(this.selectedAssets,this),this.setCurrentBoardId=t(this.setCurrentBoardId,this),this.key="collaboration.selectedBoardAssets",this.selectionsByBoardId={}}return e.prototype.setCurrentBoardId=function(t){var e,n;for(e in this.selectionsByBoardId)e!==t&&delete this.selectionsByBoardId[e];n={};try{n=JSON.parse(this.giSessionStorage.getItem(this.key))||{}}catch(t){t}if(n.boardId!==t)return this.rememberSelectedAssets(t,{})},e.prototype.selectedAssets=function(t){var e;if(this.selectionsByBoardId[t])return this.selectionsByBoardId[t];e={};try{e=JSON.parse(this.giSessionStorage.getItem(this.key))||{}}catch(t){t}return e.boardId===t?e.assetIds||{}:{}},e.prototype.rememberSelectedAssets=function(t,e){var n;return n={boardId:t,assetIds:e},this.giSessionStorage.setItem(this.key,JSON.stringify(n)),this.selectionsByBoardId[t]=e},e.prototype.selectBoardAssets=function(t,e){var n,r,o,i,a,s;for(o=!1,s=this.selectedAssets(t),i=0,a=e.length;i<a;i++)n=e[i],r=n.id,s[r]||(o=!0),s[r]=!0;if(this.rememberSelectedAssets(t,s),o)return this.triggerSelectionChanged(s)},e.prototype.deselectBoardAssets=function(t,e){var n,r,o,i,a,s;for(o=!1,s=this.selectedAssets(t),i=0,a=e.length;i<a;i++)n=e[i],r=n.id,s[r]&&(o=!0),delete s[r];if(this.rememberSelectedAssets(t,s),o)return this.triggerSelectionChanged(s)},e.prototype.setBoardAssetSelection=function(t,e,n){var r,o;if(r=!1,o=this.selectedAssets(t),n||void 0===n?(o[e]||(r=!0),o[e]=!0):(o[e]&&(r=!0),delete o[e]),this.rememberSelectedAssets(t,o),r)return this.triggerSelectionChanged(o)},e.prototype.isBoardAssetSelected=function(t,e){return this.selectedAssets(t)[e]},e.prototype.triggerSelectionChanged=function(t){return this.eventBus.trigger("collaboration.boardAssetsSelection.changed",{selectedAssets:t})},e}(),Collaboration.factory("boardAssetsSelection",["giSessionStorage","eventBus",function(t,e){return new BoardAssetsSelection(t,e)}])}.call(this),function(){this.BoardAssetsStorage=function(){function t(t){this.boardsService=t,this.boardAssets=[],this.boardAssetIds=[],this.boardItemCache={},this.boardId=null,this.loadingBoardId=null,this.loadingSearchPhrase=null,this.currentPageNumber=1,this.pageSize=100,this.searchPhrase=null,this.filteredAssetCount=null,this.hasDownloadableAssets=!1}return t.prototype.clearBoardAssets=function(){return this.boardAssets=[],this.boardAssetIds=[],eventBus.trigger("collaboration.boardItemsLoaded",{boardItems:[]})},t.prototype.forgetAssetId=function(t){var e,n,r,o,i,a,s,u,d,l;for(n=null,e=null,d=this.boardAssets,r=i=0,s=d.length;i<s;r=++i)o=d[r],o.id===t&&(n=r);for(l=this.boardAssetIds,r=a=0,u=l.length;a<u;r=++a)o=l[r],(o=t)&&(e=r);if(n&&this.boardAssets.splice(n,1),e)return this.boardAssetIds.splice(e,1)},t.prototype.search=function(t){if(t!==this.searchPhrase)return this.searchPhrase=t,this.currentPageNumber=1,this.clearBoardAssets(),this.loadBoardAssets(this.boardId)},t.prototype.pageNumber=function(t){if(t=parseInt(t,10)){if(t===this.currentPageNumber)return;this.currentPageNumber=t,this.clearBoardAssets(),this.loadBoardAssets(this.boardId)}return this.currentPageNumber},t.prototype.refreshBoardAssets=function(t){if(this.areBoardAssetsLoaded())return this.loadBoardAssets(t)},t.prototype.areBoardAssetsLoaded=function(){if(this.boardId)return!0},t.prototype.loadBoardAssets=function(t){if(this.boardId!==t&&(this.currentPageNumber=1,this.searchPhrase=null,this.clearBoardAssets()),this.boardId=t,!this.boardAssetsAreLoading())return this.boardAssetsBeginLoading(),this.boardsService.loadBoard({boardId:t,assetsPageSize:this.pageSize,assetsPageNumber:this.currentPageNumber,searchPhrase:this.searchPhrase}).success(function(t){return function(e){return t.boardAssetsFinishLoading(),t.boardId=e.id,t.filteredAssetCount=e.filtered_asset_count||e.total_asset_count,t.onBoardAssetsLoad(e.assets)}}(this)).error(function(t){return function(){return t.boardAssetsFinishLoading()}}(this))},t.prototype.fetchCompUrl=function(t){var e,n,r;return e=null!=(n=this.boardItemCache[t])&&null!=(r=n.delivery_urls)?r.comp:void 0,e?this.boardItemsLoaded():this.boardsService.fetchCompUrl(t).success(function(e){return function(n){var r,o;return null!=(r=e.boardItemCache[t])&&null!=(o=r.delivery_urls)&&(o.comp=n.delivery_urls.comp),e.boardItemsLoaded()}}(this))},t.prototype.onBoardAssetsLoad=function(t){var e;return this.boardAssets=function(){var n,r,o;for(o=[],n=0,r=t.length;n<r;n++)e=t[n],o.push(new Asset(e));return o}(),this.boardAssetIds=this.boardAssets.map(function(t){return t.uri.split(":")[1]}),this.updateCachedAssets()},t.prototype.boardAssetsAreLoading=function(){return this.boardId===this.loadingBoardId&&this.searchPhrase===this.loadingSearchPhrase},t.prototype.boardAssetsBeginLoading=function(){return this.loadingBoardId=this.boardId,this.loadingSearchPhrase=this.searchPhrase,this.boardAssetsLoadTimer=setTimeout(function(){return this.loadingBoardId=null,this.loadingSearchPhrase=null},5e3)},t.prototype.boardAssetsFinishLoading=function(){return this.loadingBoardId=null,this.loadingSearchPhrase=null,clearTimeout(this.boardAssetsLoadTimer)},t.prototype.updateCachedAssets=function(){var t,e;return e=function(){var e,n,r,o;for(r=this.boardAssetIds,o=[],e=0,n=r.length;e<n;e++)t=r[e],this.boardItemCache[t]||o.push(t);return o}.call(this),(null!=e?e.length:void 0)>0?this.boardsService.fetchBoardAssets(e).success(function(t){return function(e){var n,r,o;for(r=0,o=e.length;r<o;r++)n=e[r],t.boardItemCache[n.id]=n;return t.boardItemsLoaded()}}(this)):this.boardItemsLoaded()},t.prototype.boardItemsLoaded=function(){var t,e,n,r,o;for(eventBus.trigger("collaboration.boardItemsLoaded",{boardItems:this.mergedAssets()}),o=!1,r=this.boardAssets,e=0,n=r.length;e<n;e++)t=r[e],t.is_downloadable&&(o=!0);return this.hasDownloadableAssets=o},t.prototype.mergedAssets=function(){var t,e,n,r,o,i,a,s,u,d,l,c;for(e={},d=this.boardAssets,i=0,s=d.length;i<s;i++)t=d[i],e[t.uri]=t;for(l=this.boardAssetIds,c=[],a=0,u=l.length;a<u;a++)o=l[a],this.boardItemCache[o]&&(n=e["gi:"+o]||{},r=this.boardItemCache[o],c.push(new Asset(Object.merge(n,r))));return c},t}(),Collaboration.factory("boardAssetsStorage",["boardsService",function(t){return new BoardAssetsStorage(t)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.BoardListStorage=function(){function e(e,n){this.boardsService=n,this.boardNames=t(this.boardNames,this),this.loadSharedBoards=t(this.loadSharedBoards,this),this.loadMyBoards=t(this.loadMyBoards,this),this.loadBoardsForRole=t(this.loadBoardsForRole,this),this.boardList=null,this.q=e,eventBus.on("collaboration.boardListLoaded",function(t){return function(e){return t.onBoardListLoad(e)}}(this)),eventBus.on("collaboration.boardIdChanged",function(t){return function(){return t.refreshBoardList()}}(this))}return e.prototype.loadBoardsForRole=function(t,e){var n;return n={collaboratorRole:t,pageSize:e,pageNumber:1},this.boardsService.loadBoardHeaders(n)},e.prototype.loadMyBoards=function(){return this.loadBoardsForRole("Owner",20).success(function(t){return function(e){return t.totalBoardCountFromResponse=e.total_board_count,t.myBoards=e.boards}}(this)).error(function(t){return function(){return t.myBoards=[]}}(this))},e.prototype.loadSharedBoards=function(){return this.loadBoardsForRole("Editor",10).success(function(t){return function(e){return t.totalBoardCountFromResponse=e.total_board_count,t.sharedBoards=e.boards}}(this)).error(function(t){return function(){return t.sharedBoards=[]}}(this))},e.prototype.currentBoardList=function(){return this.boardList?this.boardList:(this.loadingBoardList||this.loadBoardList(),[])},e.prototype.loadBoardList=function(){var t,e,n;return this.loadingBoardList=!0,e=function(t){return function(){var e;return t.loadingBoardList=!1,e={boards:t.myBoards.concat(t.sharedBoards)},eventBus.triggerAllWindows("collaboration.boardListLoaded",e)}}(this),t=function(t){return function(){return t.loadingBoardList=!1}}(this),n=this.q.all([this.loadMyBoards(),this.loadSharedBoards()]),n.then(e,t)},e.prototype.refreshBoardList=function(){if(this.boardList)return this.loadBoardList()},e.prototype.onBoardListLoad=function(t){if(t)return this.boardList=t.boards},e.prototype.boardNames=function(){var t,e,n,r,o;for(r=this.boardList,o=[],e=0,n=r.length;e<n;e++)t=r[e],o.push(t.name);return o},e.prototype.totalBoardCount=function(){return this.totalBoardCountFromResponse},e}(),Collaboration.factory("boardListStorage",["$q","boardsService",function(t,e){return new BoardListStorage(t,e)}])}.call(this),function(){var t;t=function(){function t(t,e,n){this.q=t,this.t=e,this.boardsService=n,this.pageSize=50,this.currentPageNumber=1,this.boardList=[],this.collaboratorsById=[],this.sortField="last_updated_date",this.sortAscending=!1,this.showSharedBoards=!1}return t.prototype.collaborator=function(t){return this.collaboratorsById[t]},t.prototype["delete"]=function(t){return this.boardsService["delete"](t.id).success(function(e){return function(){var n;return null!=(n=window.dataLayer)&&n.push({event:"deleteBoard",boardName:t.name}),e.loadBoardList(),eventBus.triggerAllWindows("collaboration.boardDeleted",t.id)}}(this)).error(function(t){return function(){return t.onFail()}}(this))},t.prototype.leave=function(t){return this.boardsService.leave(t).success(function(t){return function(){return t.loadBoardList()}}(this)).error(function(t){return function(){return t.onFail()}}(this))},t.prototype.loadBoardList=function(t){return null==t&&(t={}),t.pageNumber&&(this.currentPageNumber=t.pageNumber),this.boardsService.loadBoardList({collaboratorRole:this.showSharedBoards?"Editor":"Owner",sortAscending:this.sortAscending,pageSize:this.pageSize,pageNumber:this.currentPageNumber,sortField:this.sortField,sortDirection:this.sortDirection}).then(function(t){return function(e){var n,r,o,i,a,s;if(t.totalBoardCount=null!=e&&null!=(n=e.data)?n.total_board_count:void 0,t.filteredBoardCount=null!=e&&null!=(r=e.data)?r.total_filtered_board_count:void 0,(null!=e&&null!=(o=e.data)?o.boards:void 0)&&(t.boardList=null!=e&&null!=(i=e.data)?i.boards:void 0),null!=e&&null!=(a=e.data)?a.collaborators:void 0)return t.loadCollaboratorsById(null!=e&&null!=(s=e.data)?s.collaborators:void 0)}}(this))},t.prototype.loadCollaboratorsById=function(t){var e,n,r,o;if((null!=t.length)>0){for(this.collaboratorsById={},o=[],n=0,r=t.length;n<r;n++)e=t[n],o.push(this.collaboratorsById[e.id]=e);return o}},t.prototype.onFail=function(){return alert(window.genericErrorMessage)},t.prototype.pageCount=function(){return this.filteredBoardCount&&this.pageSize?(this.filteredBoardCount/this.pageSize).ceil():0},t.prototype.pageNumber=function(t){if(t=parseInt(t,10)){if(t===this.currentPageNumber)return;if(!(t>0))return;if(!(t<=this.pageCount()))return;this.currentPageNumber=t,this.loadBoardList()}return this.currentPageNumber},t.prototype.setName=function(t,e){if("default"!==e&&null!==e)return this.boardsService.update(e,{name:t}).success(function(t){return function(){return t.loadBoardList()}}(this)).error(function(t){return function(){return t.onFail()}}(this))},t.prototype.validSortFields=function(){return["last_updated_date","name"]},t}(),Collaboration.factory("boardManagementStorage",["$q","t","boardsService",function(e,n,r){return new t(e,n,r)}])}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};t=function(){function t(t,n,r,o){this.boardListStorage=t,this.boardAssetsStorage=n,this.boardsService=r,this.giLocalStorage=o,this.addItems=e(this.addItems,this),this.addItem=e(this.addItem,this),this.boardNames=e(this.boardNames,this),window.bs=this,this.panelAssetIds=[],this.allAssetIds=[],this.editable=!0,this.metadata={comments:[]},this.loadingBoardId=null,this.boardLoaded=!1,this.refreshMenu=!1,this.panelItemCache={},this.altCaptionAssetUri=null,eventBus.on("collaboration.boardLoaded",function(t){return function(e){return t.onBoardLoad(e)}}(this)),eventBus.on("collaboration.defaultBoardGotId",function(t){return function(){return t.loadBoard("default")}}(this)),eventBus.on("collaboration.boardDeleted",function(t){return function(e){return t.onBoardMissing(e)}}(this)),eventBus.on("collaboration.boardMenuItemClicked",function(t){return function(e){return t.setCurrentBoard(e)}}(this))}return t.prototype.boardAssets=function(){return this.boardAssetsStorage.boardAssets},t.prototype.areBoardAssetsLoaded=function(){return this.boardAssetsStorage.areBoardAssetsLoaded()},t.prototype.assetIds=function(){return this.allAssetIds},t.prototype.boardAssetsPageCount=function(){var t,e;return t=this.boardAssetsStorage.filteredAssetCount||(null!=(e=this.board)?e.total_asset_count:void 0),t?(t/this.boardAssetsPageSize()).ceil():0},t.prototype.boardAssetsPageNumber=function(t){if(!t||!(t>this.boardAssetsPageCount()||t<1))return this.boardAssetsStorage.pageNumber(t)},t.prototype.boardAssetsPageSize=function(){return this.boardAssetsStorage.pageSize},t.prototype.boardAssetIds=function(){return this.boardAssetsStorage.boardAssetIds},t.prototype.boardAssetsAreLoading=function(){return this.boardAssetsStorage.boardAssetsAreLoading()},t.prototype.searchWithinPhrase=function(){return this.boardAssetsStorage.searchPhrase},t.prototype.loadBoard=function(t,e){if(null==e&&(e=!1),!this.boardIsLoading()||e)return this.boardBeginsLoading(),this.boardsService.loadBoardWithPanelAssets(t).success(function(t){return function(e){return t.loadBoardObject(e),t.boardFinishesLoading()}}(this)).error(function(e){return function(n,r){if(e.boardFinishesLoading(),410===r)return e.onBoardMissing(t)}}(this))},t.prototype.loadBoardObject=function(t){return this.boardId!==t.id&&eventBus.trigger("collaboration.boardIdChanged",t.id),this.boardId=t.id,eventBus.triggerAllWindows("collaboration.boardLoaded",t)},t.prototype.reloadBoard=function(){return this.refreshMenu=!0,this.loadBoard(this.boardId,!0)},t.prototype.loadCurrentBoard=function(){var t,e;return t=this.giLocalStorage.getItem("collaboration.currentBoardId"),null!==t&&void 0!==t&&""!==t||(t="default"),null!=(e=this.loadBoard(t))?e.then(function(e){return function(r){var o;return r.data&&(t=r.data.id),o=!1,"default"!==t&&n.call(r.data.permissions,"CanAddAsset")<0&&(t="default",o=!0),e.setCurrentBoard(t,o)}}(this))["catch"](function(t){return function(){return t.setCurrentBoard("default",!0)}}(this)):void 0},t.prototype.setCurrentBoard=function(t,e){if(null==e&&(e=!0),t!==this.boardId&&(this.boardLoaded=!1,eventBus.trigger("collaboration.boardIdChanged",t)),this.boardId=t,this.giLocalStorage.setItem("collaboration.currentBoardId",this.boardId),e)return this.reloadBoard()},t.prototype.newBoard=function(t,e){return null==e&&(e=""),this.boardsService.newBoard(t,e).success(function(t){return function(e){return t.setCurrentBoard(e.id),t.refreshBoardList()}}(this))},t.prototype.onBoardLoad=function(t){var e,n;if(t.id===this.boardId)return this.board=t,this.metadata.id=this.board.id,this.metadata.name=this.board.name,this.metadata.description=this.board.description,this.metadata.history=null,this.metadata.comments=this.board.comments=function(){var t,e,r,o;for(r=this.board.comments,o=[],t=0,e=r.length;t<e;t++)n=r[t],o.push(new Comment(n));return o}.call(this),this.metadata.createdDate=this.board.created_date,this.metadata.lightboxUrl="/Account/MediaBin/LightboxDetail.aspx?Id="+this.board.lightbox_id,this.boardLoaded=!0,this.boardDeleted=!1,this.board.assets=function(){var n,r,o,i;for(o=t.assets,i=[],n=0,r=o.length;n<r;n++)e=o[n],i.push(new Asset(e));return i}(),this.panelAssets=this.board.assets,this.panelAssetIds=this.panelAssets.map(function(t){return t.uri.split(":")[1]}),this.collaboratorRole=this.board.collaborator_role,this.invitationCode=this.board.invitation_code,this.refreshAssets(),this.fetchAllItemIds()},t.prototype.onBoardMissing=function(t,e){return this.boardLoaded=!1,e?(this.loadHistoryObject(e),this.boardId=this.metadata.history.id,this.boardDeleted=!0):(this.boardId=t,this.getHistory().success(function(t){return function(){return t.boardDeleted=!0}}(this)))},t.prototype.boardList=function(){return this.boardListStorage.currentBoardList()},t.prototype.boardListLoaded=function(){return this.boardListStorage.boardList},t.prototype.loadBoardList=function(){return this.boardListStorage.loadBoardList()},t.prototype.refreshBoardList=function(){return this.boardListStorage.refreshBoardList()},t.prototype.boardNames=function(){return this.boardListStorage.boardNames()},t.prototype.hasItem=function(t){return this.allAssetIds.contains(t)},t.prototype.getPanelAssetIds=function(){return this.panelAssetIds},t.prototype.onAdd=function(){return eventBus.trigger("collaboration.addToCurrentBoard")},t.prototype.onSaveSuccess=function(){return this.reloadBoard()},t.prototype.onFail=function(){return alert(window.genericErrorMessage)},t.prototype.assetsWithPrefix=function(t,e){var n,r,o,i;for(null==t&&(t="gi"),i=[],r=0,o=e.length;r<o;r++)n=e[r],i.push(t+":"+n);return i},t.prototype.assetCount=function(){var t,e,n;return(null!=(t=this.board)?t.total_asset_count:void 0)||(null!=(e=this.board)&&null!=(n=e.assetIds)?n.length:void 0)||0},t.prototype.filteredAssetCount=function(){return this.boardAssetsStorage.filteredAssetCount},t.prototype.persist=function(t,e,n,r){return null==n&&(n=this.boardId),null==r&&(r=1),this.boardsService.persist(t,this.assetsWithPrefix("gi",e),n).error(function(o){return function(i,a){return r>1?410===a?o.newBoardWithAssets(e,o.metadata):o.onFail():o.persist(t,e,n,++r)}}(this))},t.prototype.copyAssets=function(t,e,n){return this.boardsService.copyAssets(this.assetsWithPrefix("gi",t),e,n)},t.prototype.addItem=function(t){return this.addItems(t)},t.prototype.addItems=function(t){
"default"===this.boardId?eventBus.trigger("collaboration.newBoardRequested",t):this.addItemsCallback(t)},t.prototype.addItemsCallback=function(t){var e,r;for(t instanceof Array||(t=[t]),r=t.length-1;r>=0;r+=-1)e=t[r],n.call(this.panelAssetIds,e)<0&&this.panelAssetIds.unshift(e);return this.refreshAssets(),this.persist("add_assets",t).success(function(t){return function(){return t.onSaveSuccess(),t.onAdd()}}(this))},t.prototype.copyItemsCallback=function(t,e,r){var o,i;for(t instanceof Array||(t=[t]),i=t.length-1;i>=0;i+=-1)o=t[i],n.call(this.panelAssetIds,o)<0&&this.panelAssetIds.unshift(o);return this.refreshAssets(),this.copyAssets(t,e,r).success(function(t){return function(){return t.onSaveSuccess(),t.onAdd()}}(this))},t.prototype.truncateItems=function(){return this.persist("remove_assets",this.allAssetIds).success(function(t){return function(){return t.onSaveSuccess()}}(this)),this.allAssetIds.length=0},t.prototype.removeItems=function(t){return t instanceof Array||(t=[t]),this.forgetItemIds(t),this.persist("remove_assets",t).success(function(t){return function(){return t.onSaveSuccess()}}(this))},t.prototype.forgetItemIds=function(t){var e,n,r,o,i;for(i=[],r=0,o=t.length;r<o;r++)n=t[r],this.boardAssetsStorage.forgetAssetId(n),e=this.getIndexForPanelAssetId(n),null!=e&&this.panelAssetIds.splice(e,1),e=this.getIndexForAssetId(n),null!=e?i.push(this.allAssetIds.splice(e,1)):i.push(void 0);return i},t.prototype.removeItem=function(t){return this.removeItems(t)},t.prototype.searchWithin=function(t){return this.boardAssetsStorage.search(t)},t.prototype.searchPhrase=function(){return this.boardAssetsStorage.searchPhrase},t.prototype.getIndexForPanelAssetId=function(t){var e,n,r,o;for(o=this.panelAssetIds,e=n=0,r=o.length;n<r;e=++n)if(o[e]===t)return e},t.prototype.getIndexForAssetId=function(t){var e,n,r,o;for(o=this.allAssetIds,e=n=0,r=o.length;n<r;e=++n)if(o[e]===t)return e},t.prototype.toggleItem=function(t){return this.allAssetIds.contains(t)?this.removeItem(t):this.addItem(t)},t.prototype.repositionAsset=function(t,e){var n,r,o;return r=function(){var e,r,i,a;for(i=this.allAssetIds,a=[],o=e=0,r=i.length;e<r;o=++e)(n=i[o])===t&&a.push(o);return a}.call(this)[0],this.allAssetIds.splice(r,1),this.allAssetIds.splice(e,0,t),this.setOrder(this.allAssetIds)},t.prototype.setOrder=function(t){var e,n,r;return r=t.length-1,n=function(){var n,o,i;for(i=[],n=0,o=t.length;n<o;n++)e=t[n],i.push({asset_uri:"gi:"+e,ordinal:r--});return i}(),this.setOrdinals(n)},t.prototype.setOrdinals=function(t,e){return null==e&&(e=1),t instanceof Array||(t=[t]),this.boardsService.setOrdinals(this.boardId,t).error(function(n){return function(){return e>1?n.onFail():n.setOrdinals(t,++e)}}(this)).success(function(t){return function(){return t.reloadBoard()}}(this))},t.prototype.panelItemsLoaded=function(){return eventBus.trigger("collaboration.panelItemsLoaded",{panelItems:this.mergedAssets(this.panelItemCache)})},t.prototype.loadBoardAssets=function(){return this.boardAssetsStorage.loadBoardAssets(this.boardId)},t.prototype.refreshAssets=function(){return this.boardAssetsStorage.refreshBoardAssets(this.boardId),this.fetchAllPanelItems()},t.prototype.fetchPanelItems=function(t,e){return null==e&&(e=!1),this.boardsService.fetchPanelItems(t,e).success(function(t){return function(e){var n,r,o;for(r=0,o=e.length;r<o;r++)n=e[r],t.panelItemCache[n.id]=n;return t.panelItemsLoaded()}}(this))},t.prototype.fetchAllPanelItems=function(){var t,e;return e=function(){var e,n,r,o;for(r=this.panelAssetIds,o=[],e=0,n=r.length;e<n;e++)t=r[e],this.panelItemCache[t]||o.push(t);return o}.call(this),e.length>0?this.fetchPanelItems(e):this.panelItemsLoaded()},t.prototype.fetchAllItemIds=function(){return this.boardsService.fetchAllAssets(this.boardId).success(function(t){return function(e){var n;return t.allAssetIds=function(){var t,r,o,i;for(o=e.assets,i=[],t=0,r=o.length;t<r;t++)n=o[t],n.uri&&n.uri.startsWith("gi:")?i.push(n.uri.slice(3)):i.push(void 0);return i}()}}(this))},t.prototype.fetchCompUrl=function(t){return this.boardAssetsStorage.fetchCompUrl(t)},t.prototype.mergedAssets=function(t){var e,n,r,o,i,a,s,u,d,l,c;for(n={},d=this.panelAssets,i=0,s=d.length;i<s;i++)e=d[i],n[e.uri]=e;for(l=this.panelAssetIds,c=[],a=0,u=l.length;a<u;a++)o=l[a],t[o]&&(r=n["gi:"+o]||{},c.push(new Asset(Object.merge(r,t[o]))));return c},t.prototype.updateAssetAltCaption=function(t,e){return this.boardsService.updateAsset(this.boardId,t,{alt_caption:e}).error(function(t){return function(){return t.onFail()}}(this))},t.prototype.addComment=function(t){return this.boardsService.addComment(this.boardId,t).success(function(t){return function(){return t.reloadBoard()}}(this)).error(function(t){return function(){return t.onFail()}}(this))},t.prototype.deleteComment=function(t){return this.boardsService.deleteComment(this.boardId,t).success(function(t){return function(){return t.reloadBoard()}}(this)).error(function(t){return function(){return t.onFail()}}(this))},t.prototype.addAssetComment=function(t,e){var n;return n=t.replace(/^gi:/,""),this.boardsService.addAssetComment(this.boardId,n,e).success(function(t){return function(){return t.reloadBoard().success(function(){return t.refreshAssets()})}}(this)).error(function(t){return function(){return t.onFail()}}(this))},t.prototype.deleteAssetComment=function(t,e){var n;return n=t.replace(/^gi:/,""),this.boardsService.deleteAssetComment(this.boardId,n,e).success(function(t){return function(){return t.reloadBoard()}}(this)).error(function(t){return function(){return t.onFail()}}(this))},t.prototype.setName=function(t,e){if(null==e&&(e=this.boardId),e===this.boardId&&(this.metadata.name=t),"default"!==e&&null!==e)return this.boardsService.update(e,{name:t}).success(function(t){return function(){return e===t.boardId&&t.reloadBoard(),t.refreshBoardList()}}(this)).error(function(t){return function(){return t.onFail()}}(this))},t.prototype.setDescription=function(t){return this.metadata.description=t,this.boardsService.update(this.boardId,{description:t}).success(function(t){return function(){return t.reloadBoard()}}(this)).error(function(t){return function(){return t.onFail()}}(this))},t.prototype.setShowAltCaptions=function(t){if(this.metadata.showAltCaptions=t,!this.isReadOnly())return this.boardsService.update(this.boardId,{show_alt_captions:t}).success(function(t){return function(){return t.refreshBoardList()}}(this)).error(function(t){return function(){return t.onFail()}}(this))},t.prototype.getShowAltCaptions=function(){var t;return null!=(t=this.board)?t.show_alt_captions:void 0},t.prototype.join=function(t,e,n){return this.boardsService.join(this.boardId,t,e,n).success(function(t){return function(){return t.setCurrentBoard(t.boardId),t.refreshBoardList()}}(this))},t.prototype.leave=function(){return this.boardsService.leave(this.boardId).success(function(t){return function(){return t.refreshBoardList()}}(this)).error(function(t){return function(){return t.onFail()}}(this))},t.prototype["delete"]=function(t){return null==t&&(t=this.boardId),this.boardsService["delete"](t).success(function(e){return function(){var n;return null!=(n=window.dataLayer)&&n.push({event:"deleteBoard",boardName:e.board.name}),e.boardLoaded=!1,e.refreshMenu=!0,e.refreshBoardList(),eventBus.triggerAllWindows("collaboration.boardDeleted",t)}}(this)).error(function(t){return function(){return t.onFail()}}(this))},t.prototype.newBoardWithAssets=function(t,e){return null==e&&(e={}),this.newBoard(e.name,e.description).success(function(e){return function(){return e.addItems(t).success(function(){return e.setOrder(t)})}}(this))},t.prototype.duplicateBoard=function(){return this.newBoardWithAssets(this.allAssetIds,this.metadata)},t.prototype.copyToNewBoard=function(t){return this.newBoardWithAssets(t)},t.prototype.copyToExistingBoard=function(t,e,n){return this.copyAssets(t,e,n).success(function(t){return function(){return t.setCurrentBoard(n)}}(this))},t.prototype.moveToBoard=function(t,e,n){return n===e?this.onFail():this.copyAssets(t,e,n).success(function(r){return function(){return r.persist("remove_assets",t,e).success(function(){return r.setCurrentBoard(n)})}}(this))},t.prototype.boardIsLoading=function(){return this.boardId===this.loadingBoardId},t.prototype.boardBeginsLoading=function(){return this.loadingBoardId=this.boardId,this.boardLoadTimer=setTimeout(function(){return this.loadingBoardid=null},5e3)},t.prototype.boardFinishesLoading=function(){return this.loadingBoardId=null,clearTimeout(this.boardLoadTimer)},t.prototype.getProductString=function(t){return this.boardsService.fetchProductString(t)},t.prototype.getHistory=function(t){return null==t&&(t=["DeleteBoard","CreateBoard","UpdateBoard"]),this.boardsService.getHistory(this.boardId,t).success(function(t){return function(e){return t.loadHistoryObject(e)}}(this))},t.prototype.hasDownloadableAssets=function(){return this.boardAssetsStorage.hasDownloadableAssets},t.prototype.loadHistoryObject=function(t){return this.metadata.history=new BoardHistory(t)},t.prototype.can=function(t){var e,r;return e="Can"+t,n.call((null!=(r=this.board)?r.permissions:void 0)||[],e)>=0},t.prototype.isReadOnly=function(){var t;return"Editor"!==(t=this.collaboratorRole)&&"Owner"!==t&&"Admin"!==t},t.prototype.collaborator=function(t){var e,n,r,o,i;if(null!=(o=this.board)?o.collaborators:void 0)for(i=this.board.collaborators,n=0,r=i.length;n<r;n++)if(e=i[n],e.id===t)return e},t}(),Collaboration.factory("boardStorage",["boardListStorage","boardAssetsStorage","boardsService","giLocalStorage",function(e,n,r,o){return new t(e,n,r,o)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.BoardToolboxStorage=function(){function e(e,n,r){this.boardsService=n,this.boardStorage=r,this.addToNewBoard=t(this.addToNewBoard,this),this.addToBoard=t(this.addToBoard,this),this.loadRecentBoards=t(this.loadRecentBoards,this),this.boardList=null,this.q=e,this.loadBoardListParams={pageSize:100,pageNumber:1},eventBus.on("collaboration.boardIdChanged",function(t){return function(){return t.refreshBoardList()}}(this))}return e.prototype.currentBoardList=function(){return this.loadRecentBoards().then(function(t){return function(e){return t.boardList=e.data.boards,t.totalBoardCountFromResponse=e.data.total_board_count}}(this))},e.prototype.loadRecentBoards=function(){return null!==this.boardList?this.q.when({data:{boards:this.boardList,total_board_count:this.totalBoardCountFromResponse}}):this.boardsService.loadRecentBoards(this.loadBoardListParams)},e.prototype.addToBoard=function(t,e){return this.boardStorage.persist("add_assets",[t],e).success(function(t){return function(){return t.boardStorage.setCurrentBoard(e)}}(this))},e.prototype.addToNewBoard=function(t,e){return this.boardsService.newBoard(t,"").success(function(t){return function(n){return t.boardStorage.setCurrentBoard(n.id),e(n.id)}}(this))},e.prototype.totalBoardCount=function(){return this.totalBoardCountFromResponse},e.prototype.refreshBoardList=function(){if(this.boardList)return this.boardsService.loadRecentBoards(this.loadBoardListParams).then(function(t){return function(e){return t.boardList=e.data.boards,t.totalBoardCountFromResponse=e.data.total_board_count}}(this))},e}(),Collaboration.factory("boardToolboxStorage",["$q","boardsService","boardStorage",function(t,e,n){return new BoardToolboxStorage(t,e,n)}])}.call(this),function(){this.BoardsService=function(){function t(t){this.http=t,this.boardListUrl="/collaboration/boards.json",this.boardHeadersUrl="/collaboration/board-headers.json",this.recentBoardsUrl="/collaboration/boards-recent.json"}return t.prototype.boardPath=function(t){return"/collaboration/boards/"+t},t.prototype.boardAssetPath=function(t,e){return"/collaboration/boards/"+t+"/assets/"+e},t.prototype.addComment=function(t,e){return this.http.post("/collaboration/boards/"+t+"/comments.json",{comment_text:e})},t.prototype.deleteComment=function(t,e){return this.http["delete"]("/collaboration/boards/"+t+"/comments/"+e)},t.prototype.addAssetComment=function(t,e,n){return this.http.post("/collaboration/boards/"+t+"/assets/"+e+"/comments.json",{comment_text:n})},t.prototype.deleteAssetComment=function(t,e,n){return this.http["delete"]("/collaboration/boards/"+t+"/assets/"+e+"/comments/"+n)},t.prototype["delete"]=function(t){return this.http["delete"](this.boardPath(t))},t.prototype.fetchAllAssets=function(t){return this.http.get("/collaboration/boards/"+t+"/asset_list")},t.prototype.fetchBoardAssets=function(t){var e;return e="asset_ids="+t.join(","),this.http.get("/collaboration/board_assets.json?"+e)},t.prototype.fetchCompUrl=function(t){return this.http.get("/collaboration/comps/"+t+".json")},t.prototype.fetchProductString=function(t){return this.http.get("/assets/products-string.json?ids="+t)},t.prototype.fetchPanelItems=function(t,e){var n,r;return null==e&&(e=!1),n="/collaboration/carousel_items?include_missing="+e+"&asset_ids=",r=""+n+t.join(","),this.http.get(r)},t.prototype.getHistory=function(t,e){return null==e&&(e=["DeleteBoard","CreateBoard","UpdateBoard"]),this.http.get(this.boardPath(t)+"/history.json?filters="+e.join(","))},t.prototype.join=function(t,e,n,r){return this.http.put(this.boardPath(t)+"/join.json",{invitation_code:e,name:n,email:r})},t.prototype.leave=function(t){return this.http.put(this.boardPath(t)+"/leave.json")},t.prototype.newBoard=function(t,e){return this.http.post("/collaboration/boards",{name:t,description:e})},t.prototype.loadBoardWithPanelAssets=function(t){return this.loadBoard({boardId:t,assetsPageSize:25,assetsPageNumber:1})},t.prototype.loadBoard=function(t){var e,n,r,o;return null==t&&(t={}),n=t.assetsPageSize||25,e=t.assetsPageNumber||1,r=t.searchPhrase,o="/collaboration/boards/"+t.boardId+".json?assetsPageSize="+n+"&assetsPageNumber="+e,r&&r.trim().length>0&&(o+="&searchPhrase="+r),this.http.get(o)},t.prototype.loadBoardList=function(t){return this.http.get(this.boardListUrl+"?"+this.queryStringForLoadBoardList(t))},t.prototype.loadBoardHeaders=function(t){return this.http.get(this.boardHeadersUrl+"?"+this.queryStringForLoadBoardList(t))},t.prototype.loadRecentBoards=function(t){return this.http.get(this.recentBoardsUrl+"?"+this.queryStringForLoadBoardList(t))},t.prototype.persist=function(t,e,n){var r;return r={assets:e,action_type:t},this.http.put("/collaboration/boards/"+n+".json",r)},t.prototype.copyAssets=function(t,e,n){var r;return r={assets:t,action_type:"copy_assets",dest_board_id:n},this.http.put("/collaboration/boards/"+e+".json",r)},t.prototype.update=function(t,e){return this.http.put(this.boardPath(t)+"?action_type=update",e)},t.prototype.updateAsset=function(t,e,n){return this.http.put(""+this.boardAssetPath(t,e),n)},t.prototype.setOrdinals=function(t,e){return e instanceof Array||(e=[e]),this.http.put("/collaboration/boards/"+t+"/asset_ordinals",{ordinals:e})},t.prototype.queryStringForLoadBoardList=function(t){var e,n;return n=t.sortAscending?"Ascending":"Descending",t.sortField||(t.sortField="LastUpdatedDate"),t.pageNumber||(t.pageNumber=1),e=["pageSize="+t.pageSize,"pageNumber="+t.pageNumber,"sortField="+t.sortField,"sortDirection="+n],t.collaboratorRole&&e.push("collaboratorRole="+t.collaboratorRole),e.join("&")},t}(),Collaboration.factory("boardsService",["$q","$http",function(t,e){return new BoardsService(e)}])}.call(this),function(){this.DateTimeBuilder=function(){function t(t){this.randomizer=null!=t?t.randomizer:void 0}return t.prototype.random=function(t){var e,n,r,o,i;return(null!=t?t.randomizer:void 0)&&(this.randomizer=null!=t?t.randomizer:void 0),this.randomizer||(this.randomizer=new SeededRandomizer(123)),r=(null!=t?t.maxDaysInPast:void 0)||60,n=(null!=t?t.maxDaysInFuture:void 0)||0,e=this.randomizer.random(n,-1*r).floor(),o=this.randomizer.random(1439),n>0||(o*=-1),i=moment(new Date).add(e,"d").add(o,"m"),GiDateTime.makeUniversal(i.format())},t.prototype.now=function(){var t;return t=moment(new Date),GiDateTime.makeUniversal(t.format())},t}()}.call(this),function(){this.FakeSummaryAsset=function(){function t(t){this.uri=(null!=t?t.uri:void 0)||"gi:fake_asset_id",this.added_by_id=(null!=t?t.added_by_id:void 0)||"",this.added_date=(null!=t?t.added_date:void 0)||""}return t}(),this.FakeAsset=function(){function t(t){this.uri=(null!=t?t.uri:void 0)||"gi:fake_asset_id",this.added_by_id=(null!=t?t.added_by_id:void 0)||"",this.added_date=(null!=t?t.added_date:void 0)||"",this.comments=(null!=t?t.comments:void 0)||[]}return t}(),this.FakeCarouselItem=function(){function t(t){this.id=(null!=t?t.id:void 0)||"FakeAssetId",this.title=(null!=t?t.title:void 0)||"Fake Title",this.thumb=null!=t?t.thumb:void 0,this.license_type=null!=t?t.license_type:void 0,this.asset_type=null!=t?t.asset_type:void 0,this.is_video=(null!=t?t.is_video:void 0)||!1,this.is_offline=(null!=t?t.is_offline:void 0)||!1,this.href=null!=t?t.href:void 0}return t}()}.call(this),function(){this.FakeAssetDetails=function(){function t(t){this.id=(null!=t?t.id:void 0)||"fakeAssetId",this.access_restriction=null!=t?t.access_restriction:void 0,this.agreement=null!=t?t.agreement:void 0,this.agreements=(null!=t?t.agreements:void 0)||[],this.asset_family=(null!=t?t.asset_family:void 0)||"Creative",this.asset_type=(null!=t?t.asset_type:void 0)||"Image",this.caption=null!=t?t.caption:void 0,this.collection=(null!=t?t.collection:void 0)||{id:"FakeCollectionId",code:"FAKE",parent_code:"FAKE",name:"some collection",short_name:"SomeColl",is_white_label:!1},this.date_created=(null!=t?t.date_created:void 0)||"2015-04-03",this.delivery_urls=(null!=t?t.delivery_urls:void 0)||this.fakeDeliveryUrls(),this.href=null!=t?t.href:void 0,this.landing_url=(null!=t?t.landing_url:void 0)||"/detail/photo/not-a-valid-image/fakeAssetId",this.license_type=(null!=t?t.license_type:void 0)||"RF",this.sizes=(null!=t?t.sizes:void 0)||[],this.thumb=null!=t?t.thumb:void 0,this.title=(null!=t?t.title:void 0)||this.fakeTitleForAssetId(this.id),this.artist=(null!=t?t.artist:void 0)||"Fake Artist",this.agreement_description=null!=t?t.agreement_description:void 0,this.is_downloadable=null!=t?t.is_downloadable:void 0,this.is_missing=(null!=t?t.is_missing:void 0)||!(this.delivery_urls.thumb612||this.delivery_urls.comp),this.is_offline=(null!=t?t.is_offline:void 0)||!1,this.is_previewable=(null!=t?t.is_previewable:void 0)||!1,this.is_video=(null!=t?t.is_video:void 0)||!1}return t.prototype.fakeTitleForAssetId=function(t){var e,n;return null===t?"FakeAsset":NaN===(e=parseInt(t.replace(/[^0-9]/g,"").slice(-1),10))?"FakeAsset: "+t:(n=e%2==0?" even":" odd","FakeAsset: "+t+n)},t.prototype.fakeDeliveryUrls=function(){return{thumb612:"http://i.imgur.com/VRhI3Td.jpg?1",comp:"http://i.imgur.com/VRhI3Td.jpg?1"}},t}()}.call(this),function(){this.FakeAssetsRepository=function(){function t(){this.assets={}}return t.prototype.addAsset=function(t){return this.assets[t.id]=t},t.prototype.getAssetById=function(t){return this.assets[t]||this.assetForMagicId(t)},t.prototype.getRandomAssets=function(t){return this.assets.slice(0,+(t-1)+1||9e9)},t.prototype.assetForMagicId=function(t){var e;if(0===t.indexOf("FakeAssetId"))return e=new FakeAssetDetails({id:t}),this.addAsset(e),e},t.prototype.assetForMissingId=function(t){return new FakeAssetDetails({id:t,is_missing:!0})},t}()}.call(this),function(){this.SeededRandomizer=function(){function t(t){this.seed=parseInt(t,10)||123}return t.prototype.random=function(t,e){var n;return null==t&&(t=1),null==e&&(e=0),this.seed=(9301*this.seed+49297)%233280,n=this.seed/233280,e+n*(t-e)},t.prototype.integer=function(t,e){return null==t&&(t=100),null==e&&(e=0),this.random(t,e).floor()},t}()}.call(this),function(){this.FakeCollaborator=function(){function t(t){this.id=(null!=t?t.id:void 0)||"collaboratorId1",this.first_name=null!=t?t.first_name:void 0,this.last_name=null!=t?t.last_name:void 0,this.user_name=null!=t?t.user_name:void 0}return t.prototype.owner=function(){return new t({id:"ownerId",first_name:"Joe",last_name:"Owner",user_name:"joe_owner"})},t}()}.call(this),function(){this.FakeBoardSummary=function(){function t(t){var e;this.id=(null!=t?t.id:void 0)||"ownerId",this.collaborator_role=(null!=t?t.collaborator_role:void 0)||"Owner",this.created_by_id=(null!=t?t.created_by_id:void 0)||"",this.created_date=(null!=t?t.created_date:void 0)||"",this.description=(null!=t?t.description:void 0)||"Fake Board Description",this.hero_asset=(null!=t&&null!=(e=t.assets)?e.first():void 0)||new FakeSummaryAsset,this.invitation_code=(null!=t?t.invitation_code:void 0)||"",this.last_updated_by_id=(null!=t?t.last_updated_by_id:void 0)||"",this.last_updated_date=(null!=t?t.last_updated_date:void 0)||"",this.is_owner="Owner"===(null!=t?t.collaborator_role:void 0),this.lightbox_id=(null!=t?t.lightbox_id:void 0)||null,this.name=(null!=t?t.name:void 0)||"Fake Board Name",this.total_asset_count=(null!=t?t.total_asset_count:void 0)||0,this.total_comment_count=(null!=t?t.total_comment_count:void 0)||0}return t.prototype.fromBoard=function(e){return new t(e)},t}(),this.FakeBoard=function(){function t(t){var e,n;this.id=(null!=t?t.id:void 0)||"fakeBoard1",this.assets=(null!=t?t.assets:void 0)||[],this.collaborator_role=(null!=t?t.collaborator_role:void 0)||"Owner",this.collaborators=(null!=t?t.collaborators:void 0)||[],this.comments=(null!=t?t.comments:void 0)||[],this.created_by_id=(null!=t?t.created_by_id:void 0)||"",this.created_date=(null!=t?t.created_date:void 0)||"",this.description=(null!=t?t.description:void 0)||"Fake Board Description",this.invitation_code=(null!=t?t.invitation_code:void 0)||"",this.is_owner="Owner"===(null!=t?t.collaborator_role:void 0)||!(null!=t?t.collaborator_role:void 0),this.last_updated_by_id=(null!=t?t.last_updated_by_id:void 0)||"",this.last_updated_date=(null!=t?t.last_updated_date:void 0)||"",this.light_box_id=(null!=t?t.light_box_id:void 0)||"",this.name=(null!=t?t.name:void 0)||"",this.permissions=(null!=t?t.permissions:void 0)||[],this.total_asset_count=(null!=t?t.total_asset_count:void 0)||(null!=(e=this.assets)?e.length:void 0)||0,this.total_comment_count=(null!=t?t.total_comment_count:void 0)||(null!=(n=this.comments)?n.length:void 0)||0,this.permissions=[],"Editor"===this.collaborator_role&&(this.permissions=this.permissions.concat(["CanLeave"])),"Follower"!==this.collaborator_role&&(this.permissions=this.permissions.concat(["CanAddAsset","CanAddAssetComment","CanAddComment","CanRemoveAsset","CanRemoveAssetComment","CanRemoveComment","CanReorderAsset","CanUpdateDescription","CanUpdateName"])),"Owner"===this.collaborator_role&&(this.permissions=this.permissions.concat(["CanDelete","CanTransfer"]))}return t.prototype.makeUnowned=function(){return this.created_by_id="someOtherUserId",this.collaborator_role="None",this.is_owner=!1,this.permissions=[]},t.prototype.makeJoined=function(){return this.created_by_id="someOtherUserId",this.collaborator_role="Collaborator",this.is_owner=!1,this.permissions=["CanLeave","CanAddAsset","CanAddAssetComment","CanAddComment","CanRemoveAsset","CanRemoveAssetComment","CanRemoveComment","CanReorderAsset","CanUpdateDescription","CanUpdateName"]},t.nullObject=function(){return new t({id:"default",name:"New Board"})},t.randomAssets=function(t){var e,n,r,o,i,a,s;for(null==t&&(t={}),i=(null!=t?t.randomizer:void 0)||new SeededRandomizer(123),r=null!=t?t.itemCount:void 0,r||(n=i.random()<.2,r=n?i.integer(1e3,100):i.integer(50,1)),s=[],e=o=1,a=r;1<=a?o<=a:o>=a;e=1<=a?++o:--o)s.push(new FakeAsset({uri:"gi:FakeAssetId"+e}));return s},t.fromSeed=function(e,n){var r,o,i,a;return i=new SeededRandomizer(e),o=new DateTimeBuilder({randomizer:i}),r=(null!=n?n.assets:void 0)||this.randomAssets({randomizer:i,itemCount:n.itemCount}),new t({id:(null!=n?n.id:void 0)||"id"+e,assets:r,collaborator_role:(null!=n?n.collaboratorRole:void 0)||"Owner",collaborators:(null!=n?n.collaborators:void 0)||[],comments:(null!=n?n.comments:void 0)||[],created_by_id:(null!=n?n.createdById:void 0)||"myFakeUserId",created_date:(null!=n?n.createdDate:void 0)||o.random({maxDaysInPast:30}),description:(null!=n?n.description:void 0)||"",invitation_code:(null!=n?n.invitationCode:void 0)||"fakeInviteCode"+e,is_owner:"Owner"===((null!=n?n.collaboratorRole:void 0)||"Owner"),last_updated_by_id:(null!=n?n.lastUpdatedById:void 0)||"myFakeUserId",last_updated_date:(null!=n?n.lastUpdatedDate:void 0)||o.random({maxDaysInPast:30}),lightbox_id:(null!=n?n.lightboxId:void 0)||null,name:(null!=n?n.name:void 0)||"board"+e,permissions:(null!=n?n.permissions:void 0)||[],total_asset_count:r.length,total_comment_count:(null!=n?n.totalCommentCount:void 0)||(null!=n&&null!=(a=n.comments)?a.length:void 0)||0})},t}()}.call(this),function(){this.FakeBoardAsset=function(){function t(t){this.id=(null!=t?t.id:void 0)||"fakeAssetId",this.access_restriction=null!=t?t.access_restriction:void 0,this.agreement=null!=t?t.agreement:void 0,this.agreements=(null!=t?t.agreements:void 0)||[],this.asset_family=(null!=t?t.asset_family:void 0)||"Creative",this.asset_type=(null!=t?t.asset_type:void 0)||"Image",this.caption=null!=t?t.caption:void 0,this.collection=(null!=t?t.collection:void 0)||{id:"FakeCollectionId",code:"FAKE",parent_code:"FAKE",name:"some collection",short_name:"SomeColl",is_white_label:!1},this.date_created=(null!=t?t.date_created:void 0)||"2015-04-03",this.delivery_urls=(null!=t?t.delivery_urls:void 0)||{},this.landing_url=(null!=t?t.landing_url:void 0)||"/detail/photo/not-a-valid-image/fakeAssetId",this.license_type=(null!=t?t.license_type:void 0)||"RF",this.sizes=(null!=t?t.sizes:void 0)||[],this.title=(null!=t?t.title:void 0)||"Fake Title",this.artist=(null!=t?t.artist:void 0)||"Fake Artist",this.agreement_description=null!=t?t.agreement_description:void 0,this.is_downloadable=null!=t?t.is_downloadable:void 0,this.is_missing=(null!=t?t.is_missing:void 0)||!(this.delivery_urls.thumb612||this.delivery_urls.comp),this.is_offline=null!=t?t.is_offline:void 0,this.is_previewable=null!=t?t.is_previewable:void 0,this.is_video=null!=t?t.is_video:void 0}return t}()}.call(this),function(){this.FakeBoardList=function(){function t(t){var e,n,r,o,i,a;for(this.boards=(null!=t?t.boards:void 0)||[],this.collaborators=(null!=t?t.collaborators:void 0)||[],this.total_board_count=(null!=t?t.total_board_count:void 0)||(null!=t&&null!=(o=t.boards)?o.length:void 0),this.total_filtered_board_count=(null!=t?t.total_filtered_board_count:void 0)||(null!=t&&null!=(i=t.boards)?i.length:void 0),a=this.boards,n=0,r=a.length;n<r;n++)e=a[n],e.hero_asset.thumbnail_url||(e.hero_asset.thumbnail_url="localhost/some-url/image.jpg")}return t}()}.call(this),function(){this.FakeBoardsRepository=function(){function t(){this.boardsList=[]}return t.prototype.addBoard=function(t){return this.deleteBoard(t.id),this.boardsList.add(t)},t.prototype.deleteBoard=function(t){return this.boardsList=this.boardsList.filter(function(e){return!(e.id===t)})},t.prototype.deleteAllBoards=function(){return this.boardsList=[]},t.prototype.findBoard=function(t){var e,n,r;return"default"===t?(null!=(r=this.boardsList)?r.length:void 0)>0?this.mostRecentlyModifiedOwnedBoard():FakeBoard.nullObject():(n=function(){var n,r,o,i;for(o=this.boardsList,i=[],n=0,r=o.length;n<r;n++)e=o[n],e.id===t&&i.push(e);return i}.call(this),(null!=n?n.first():void 0)||this.mostRecentlyModifiedOwnedBoard()||FakeBoard.nullObject())},t.prototype.allOwnedBoards=function(){return this.boardsList.filter(function(t){return t.is_owner})},t.prototype.allUnownedBoards=function(){return this.boardsList.filter(function(t){return!t.is_owner})},t.prototype.totalBoardCount=function(){return this.boardsList.length},t.prototype.mostRecentlyModifiedOwnedBoard=function(){var t,e,n,r,o;for(r=FakeBoard.nullObject(),o=this.boardsList,e=0,n=o.length;e<n;e++)t=o[e],"Owner"===t.collaborator_role&&t.last_updated_date>(null!=r?r.last_updated_date:void 0)&&(r=t);return r},t.prototype.addFakeOwnedBoards=function(t,e){var n,r,o,i,a,s;for(null==e&&(e={}),n=e.firstSeed||1,e.createdById||(e.createdById="myFakeUserId"),a=[],s=r=o=n,i=n+t-1;o<=i?r<=i:r>=i;s=o<=i?++r:--r)a.push(this.boardsList.push(FakeBoard.fromSeed(s,e)));return a},t.prototype.addFakeSharedBoards=function(t,e){var n,r,o,i,a,s;for(null==e&&(e={}),n=e.firstSeed||1,e.createdById||(e.createdById="collaboratorId1"),e.collaboratorRole="Editor",a=[],s=r=o=n,i=n+t-1;o<=i?r<=i:r>=i;s=o<=i?++r:--r)a.push(this.boardsList.push(FakeBoard.fromSeed(s,e)));return a},t}()}.call(this),function(){this.FakeComment=function(){function t(t){this.id=t.id,this.created_by_id=null!=t?t.created_by_id:void 0,this.created_date=(null!=t?t.created_date:void 0)||(new DateTimeBuilder).now(),this.text=null!=t?t.text:void 0}return t.prototype=Object.extended(),t}()}.call(this),function(){this.FakeCuratedSet=function(){function t(t){this.id=null!=t?t.id:void 0,this.hero_asset=(null!=t?t.hero_asset:void 0)||{thumbnail_url:"http://localhost/some_image.jpg"},this.last_updated_by=null!=t?t.last_updated_by:void 0,this.last_updated_date=(null!=t?t.last_updated_date:void 0)||"2015-10-30T20:05:26.113Z",this.published_state=(null!=t?t.published_state:void 0)||"NotYetPublished",this.published_url=null!=t?t.published_url:void 0,this.title=(null!=t?t.title:void 0)||"Fake Set Title #{id}",this.version=(null!=t?t.version:void 0)||0,this.keywords=null!=t?t.keywords:void 0}return t}(),this.FakeCuratedSetSummary=function(){function t(t){this.id=(null!=t?t.id:void 0)||"fakeCuratedSetId1",this.hero_asset=null!=t?t.hero_asset:void 0,this.last_updated_by=null!=t?t.last_updated_by:void 0,this.last_updated_date=(null!=t?t.last_updated_date:void 0)||"2015-10-30T20:05:26.113Z",this.published_state=(null!=t?t.published_state:void 0)||"NotYetPublished",this.published_url=null!=t?t.published_url:void 0,this.version=0,this.keywords=null!=t?t.keywords:void 0}return t.fromSet=function(e){return new t({id:e.id,last_updated_by:e.last_updated_by,last_updated_date:e.last_updated_date,published_state:e.published_state,published_url:e.published_url})},t}()}.call(this),function(){this.FakeHistoryItem=function(){function t(t){this.action=null!=t?t.action:void 0,this.data=null!=t?t.data:void 0,this.created_date=null!=t?t.created_date:void 0,this.created_by_id=null!=t?t.created_by_id:void 0}return t}(),this.FakeHistory=function(){function t(t){this.history=(null!=t?t.history:void 0)||[],this.collaborators=(null!=t?t.collaborators:void 0)||[]}return t}()}.call(this),function(){this.PromiseMaker=function(){function t(t){this.q=t}return t.prototype.fakeHttpPromise=function(t){return this.promiseWithSuccessAndError(this.q(t))},t.prototype.promiseWithSuccessAndError=function(t){return t.success=function(e){return t.then(function(t){return e(null!=t?t.data:void 0,null!=t?t.status:void 0,null!=t?t.headers:void 0)}),t},t.error=function(e){return t.then(null,function(t){return e(null!=t?t.data:void 0,null!=t?t.status:void 0,null!=t?t.headers:void 0)}),t},t},t}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};this.BoardsServiceFake=function(){function n(e){this.newBoard=t(this.newBoard,this),this.promiseMaker=new PromiseMaker(e),this.dateTimeBuilder=new DateTimeBuilder,this.collaborators=[],this.collaborators.push(new FakeCollaborator({id:"myFakeUserId",first_name:"Joe",last_name:"Owner",user_name:"joe_owner"})),this.collaborators.push(new FakeCollaborator({id:"collaboratorId1",first_name:"John",last_name:"Collaborator1"})),this.collaborators.push(new FakeCollaborator({id:"collaboratorId2",first_name:null,last_name:null,user_name:"only_username"})),this.assetsRepository=new FakeAssetsRepository,this.boardsRepository=new FakeBoardsRepository,this.boardsRepository.addFakeOwnedBoards(34,{collaborators:this.collaborators}),this.boardsRepository.addFakeOwnedBoards(1,{createdById:"collaboratorId2",collaborators:this.collaborators,firstSeed:35}),this.boardsRepository.addFakeOwnedBoards(90,{createdById:"myFakeUserId",collaborators:this.collaborators,firstSeed:36}),this.boardsRepository.addFakeSharedBoards(55,{createdById:"collaboratorId1",collaborators:this.collaborators,firstSeed:126}),this.failOnFetchBoardAssets=!1,this.lastResults={}}return n.prototype.addComment=function(t,e){var n,r,o;return n=this.findBoard(t),r=new FakeComment({id:"comment"+((null!=(o=n.comments)?o.length:void 0)||0),created_by_id:this.myUserId(),created_date:this.dateTimeBuilder.now(),text:e}),n.comments.push(r),n.last_updated_by_id=this.myUserId(),n.last_updated_date=this.dateTimeBuilder.now(),this.fakeHttpPromise(function(){return function(t){return t({status:200})}}())},n.prototype.deleteComment=function(t,e){var n;return n=this.findBoard(t),n.comments=n.comments.filter(function(t){
return t.id!==e}),this.fakeHttpPromise(function(){return function(t){return t({status:200})}}())},n.prototype.addAssetComment=function(t,e,n){var r,o,i,a;return i=this.boardsRepository.findBoard(t),o=function(){var t,n,o,a;for(o=i.assets,a=[],t=0,n=o.length;t<n;t++)r=o[t],r.uri==="gi:"+e&&a.push(r);return a}().first(),a=new FakeComment({id:"Comment"+o.comments.length,text:n}),o.comments.push(a),this.fakeHttpPromise(function(){return function(t){return t({status:200})}}())},n.prototype.deleteAssetComment=function(t,e,n){var r,o,i;return i=this.boardsRepository.findBoard(t),o=function(){var t,n,o,a;for(o=i.assets,a=[],t=0,n=o.length;t<n;t++)r=o[t],r.uri==="gi:"+e&&a.push(r);return a}().first(),o.comments=o.comments.filter(function(t){return t.id!==n}),this.fakeHttpPromise(function(){return function(t){return t({status:200})}}())},n.prototype["delete"]=function(t){var e,n;return e=this.findBoard(t),n=e&&"Owner"===e.collaborator_role&&this.boardsRepository.deleteBoard(t),this.fakeHttpPromise(function(){return function(t,e){return n?t({status:200}):e({status:404})}}())},n.prototype.fetchAllAssets=function(t){var e;return e=this.findBoard(t),this.fakeHttpPromise(function(){return function(t){return t({status:200,data:{assets:null!=e?e.assets:void 0}})}}())},n.prototype.fetchBoardAssets=function(t){return this.fakeHttpPromise(function(e){return function(n,r){return e.failOnFetchBoardAssets&&r({status:500}),n({status:200,data:e.fetchBoardAssetsSynchronous(t)})}}(this))},n.prototype.fetchBoardAssetsSynchronous=function(t){var e,n,r,o,i;for(n=[],r=0,o=t.length;r<o;r++)e=t[r],i=this.assetsRepository.getAssetById(e),n.add(new FakeBoardAsset(i));return n},n.prototype.fetchCompUrl=function(){var t;return t="some-fake-url",this.fakeHttpPromise(function(){return function(e){return e({status:200,data:t})}}())},n.prototype.fetchPanelItems=function(t,e){var n,r,o,i,a;for(null==e&&(e=!1),i=[],r=0,o=t.length;r<o;r++)n=t[r],(a=this.assetsRepository.getAssetById(n))&&i.add(new FakeCarouselItem(a));return this.fakeHttpPromise(function(){return function(t){return t({status:200,data:i})}}())},n.prototype.fetchProductString=function(t){return this.fakeHttpPromise(function(){return function(e){return e({status:200,data:{products:"fakeProductString|"+t}})}}())},n.prototype.getHistory=function(t,e){var n;return null==e&&(e=["DeleteBoard","CreateBoard","UpdateBoard"]),n=new FakeHistory,t.indexOf("deleted")>-1&&(n.collaborators.push(new FakeCollaborator({id:"fakeCollaboratorId",first_name:"Somebody",last_name:"Else"})),n.history.unshift(new FakeHistoryItem({action:"DeleteBoard",data:{Name:"deleted board name"},created_date:"2016-06-01T17:59:53.903Z",created_by:"fakeCollaboratorId"}))),this.fakeHttpPromise(function(){return function(t){return t({status:200,data:n})}}())},n.prototype.join=function(t,e,n,r){var o,i;return o=this.boardsRepository.findBoard(t),i=o.invitation_code===e,(null!=n?n.length:void 0)>0&&(null!=r?r.length:void 0)>0||(i=!1),this.fakeHttpPromise(function(){return function(t,e){return i?t({status:200,data:{}}):e({status:403,data:{}})}}())},n.prototype.leave=function(t){return this.fakeHttpPromise(function(e){return function(n,r){var o;return o=e.findBoard(t),o?(o.makeUnowned(),n({status:200})):r({status:404})}}(this))},n.prototype.loadBoard=function(t){var n,r,o,i,a,s,u,d,l,c,f,h;if(null==t&&(t={}),r=JSON.parse(JSON.stringify(this.findBoard(t.boardId))),d=t.assetsPageSize||25,u=t.assetsPageNumber||1,l=(u-1)*d,c=l+d-1,(h=t.searchPhrase)&&h.length>0){for(n=r.assets.map(function(t){return t.uri.replace("gi:","")}),i=[],f=this.fetchBoardAssetsSynchronous(n),a=0,s=f.length;a<s;a++)o=f[a],o.title.search(h)!==-1&&i.add(o.id);r.assets=r.assets.filter(function(t){var n;return n=t.uri.replace("gi:",""),e.call(i,n)>=0}),r.filtered_asset_count=r.assets.length}return r.assets=r.assets.slice(l,+c+1||9e9),r.assets=r.assets.map(function(t){return new FakeAsset(t)}),this.fakeHttpPromise(function(){return function(t,e){return r?t({status:200,data:r}):e({status:404})}}())},n.prototype.loadBoardWithPanelAssets=function(t){return this.loadBoard({boardId:t,assetsPageNumber:1,assetsPageSize:25})},n.prototype.loadBoardListSynchronous=function(t){var e,n,r,o,i,a,s,u;return null==t&&(t={}),u=this.boardSortingFunction(t),n=this.filteredBoardSummaries(t).sort(u),o=t.pageNumber||1,i=t.pageSize||5,a=(o-1)*i,s=a+i-1,r=this.collaborators,e=new FakeBoardList({boards:n.slice(a,+s+1||9e9),collaborators:r,total_board_count:this.boardsRepository.totalBoardCount(),total_filtered_board_count:n.length}),t.discardResults||this.rememberResults("loadBoardList",e),e},n.prototype.loadBoardList=function(t){return null==t&&(t={}),this.fakeHttpPromise(function(e){return function(n){var r;return r=e.loadBoardListSynchronous(t),n({data:r})}}(this))},n.prototype.loadBoardHeaders=function(t){return null==t&&(t={}),this.fakeHttpPromise(function(e){return function(n,r){return e.loadBoardList(e.addDiscardResultsOption(t)).success(function(r){var o;return o=e.mapToBoardHeaders(r.boards),t.discardResults||e.rememberResults("loadBoardHeaders",r),n({data:{boards:o,collaborators:r.collaborators,total_board_count:r.total_board_count,total_filtered_board_count:r.total_filtered_board_count}})}).error(function(t,e){return r({data:t,status:e})})}}(this))},n.prototype.newBoard=function(t,e){return this.fakeHttpPromise(function(n){return function(r){var o;return o=new FakeBoard({id:n.guid(),name:t,description:e}),n.boardsRepository.addBoard(o),r({status:200,data:o})}}(this))},n.prototype.persist=function(){return this.fakeHttpPromise(function(){return function(t){return t({status:200,data:{}})}}())},n.prototype.copyAssets=function(){return this.fakeHttpPromise(function(){return function(t){return t({status:200,data:{}})}}())},n.prototype.setDescription=function(t,e){var n;return n=this.findBoard(t),n.description=e,n.last_updated_by_id=this.myUserId(),n.last_updated_date=this.dateTimeBuilder.now(),this.fakeHttpPromise(function(){return function(t){return t({status:200})}}())},n.prototype.update=function(t,e){var n,r,o;n=this.findBoard(t);for(r in e)o=e[r],n[r]=o;return n.last_updated_by_id=this.myUserId(),n.last_updated_date=this.dateTimeBuilder.now(),this.fakeHttpPromise(function(){return function(t){return t({status:200})}}())},n.prototype.updateAsset=function(t,e,n){var r,o,i,a,s,u,d;for(o=this.findBoard(t),u=o.assets,i=0,s=u.length;i<s;i++)if(r=u[i],r.uri===e)for(a in n)d=n[a],r[a]=d;return this.fakeHttpPromise(function(){return function(t){return t({status:200})}}())},n.prototype.setOrdinals=function(){return this.fakeHttpPromise(function(){return function(t){return t({status:200})}}())},n.prototype.boardSortingFunction=function(t){var e;return e="Name"===t.sortField?function(t,e){return t.name>e.name?1:-1}:function(t,e){return t.last_updated_date>e.last_updated_date?1:-1},t.sortAscending?e:function(t,n){return e(t,n)*-1}},n.prototype.findBoard=function(t){return this.boardsRepository.findBoard(t)},n.prototype.filteredBoardSummaries=function(t){var e;return e="Owner"===t.collaboratorRole?this.boardsRepository.allOwnedBoards():this.boardsRepository.allUnownedBoards(),e.map(function(t){return new FakeBoardSummary(t)})},n.prototype.mapToBoardHeaders=function(t){return t},n.prototype.myUserId=function(){return"myFakeUserId"},n.prototype.rememberResults=function(t,e){return this.lastResults[t]={data:e}},n.prototype.lastResult=function(t){return this.lastResults[t]},n.prototype.addDiscardResultsOption=function(t){return $.extend(!0,{discardResults:!0},t)},n.prototype.guid=function(){var t;return(t=function(t){var e;return e=(Math.random().toString(16)+"000000000").substr(2,8),t?"-"+e.substr(0,4)+"-"+e.substr(4,4):e})()+t(!0)+t(!0)+t()},n.prototype.fakeHttpPromise=function(t){return this.promiseMaker.fakeHttpPromise(t)},n}()}.call(this),function(){this.BulkDownloadStateService=function(){function e(t){this.t=t,this.downloadViewStates={}}return e.prototype.initViewStates=function(e,n,r,o){return null==e&&(e=0),null==n&&(n=0),null==r&&(r=0),null==o&&(o=""),this.downloadViewStates={outOfDownloads:this.setDownloadState({title:t("out_of_downloads"),infoBox1Text:t("bulk_download_out_of_downloads_message",{cost:e}),errorBox1Text:this.t.getHtmlSafeTranslation("bulk_download_contact_us",{links:[{href:o,target:"_blank"}]}),showButton:!1,buttonDisabled:!0,showLegalText:!1}),unableToDownloadNotEnoughDownloads:this.setDownloadState({title:t("bulk_download_unable_to_download_title"),infoBox1Text:t("bulk_download_not_enough_downloads",{cost:e,downloads_left:n}),infoBox2Text:"",errorBox1Text:this.t.getHtmlSafeTranslation("bulk_download_suggestion_select_redownloadable",{links:[{href:o,target:"_blank"}]}),showButton:!0,buttonDisabled:!0,showLegalText:!0}),reDownloadAlreadyDownloaded:this.setDownloadState({title:t("re-download_for_free"),infoBox1Text:t("bulk_download_info_already_downloaded_plural"),infoBox2Text:"",errorBox1Text:"",showButton:!0,buttonDisabled:!1,showLegalText:!0}),alreadyDownloadedSubsetDownloadNow:this.setDownloadState({title:t("download_now"),infoBox1Text:t("bulk_download_info_already_downloaded_subset",{number_of_images_already_downloaded:r}),infoBox2Text:t("bulk_download_info_remaning_plural_cost_plural_download_plural",{cost:e-r,downloads_left:n}),errorBox1Text:"",showButton:!0,buttonDisabled:!1,showLegalText:!0}),alreadyDownloadedSubsetRemainingNotEnough:this.setDownloadState({title:t("bulk_download_unable_to_download_title"),infoBox1Text:t("bulk_download_info_already_downloaded_subset",{number_of_images_already_downloaded:r}),infoBox2Text:t("bulk_download_info_remaning_not_enough_plural",{cost:e-r,downloads_left:n}),errorBox1Text:this.t.getHtmlSafeTranslation("bulk_download_suggestion_select_redownloadable",{links:[{href:o,target:"_blank"}]}),showButton:!0,buttonDisabled:!0,showLegalText:!0}),alreadyDownloadedSubsetUnableToDownload:this.setDownloadState({title:t("out_of_downloads"),infoBox1Text:t("bulk_download_info_already_downloaded_subset",{number_of_images_already_downloaded:r}),infoBox2Text:t("bulk_download_info_unable_to_download_plural",{cost:e-r}),errorBox1Text:this.t.getHtmlSafeTranslation("bulk_download_suggestion_select_redownloadable",{links:[{href:o,target:"_blank"}]}),showButton:!1,buttonDisabled:!0,showLegalText:!1}),downloadNow:this.setDownloadState({title:t("download_now"),infoBox1Text:t("bulk_download_info_cost_plural_downloads_plural",{cost:e,downloads_left:n}),infoBox2Text:"",errorBox1Text:"",showButton:!0,buttonDisabled:!1,showLegalText:!0}),selectItems:this.setDownloadState({title:t("bulk_download_none_selected_title"),infoBox1Text:"",infoBox2Text:"",errorBox1Text:t("bulk_download_select_to_download"),showButton:!0,buttonDisabled:!0,showLegalText:!0})},this.downloadViewStates},e.prototype.setDownloadState=function(t){return null==t&&(t={}),this.downloadState={},this.downloadState.title=t.title||"",this.downloadState.infoBox1Text=t.infoBox1Text||"",this.downloadState.infoBox2Text=t.infoBox2Text||"",this.downloadState.errorBox1Text=t.errorBox1Text||"",this.downloadState.showButton=t.showButton,this.downloadState.buttonDisabled=t.buttonDisabled,this.downloadState.showLegalText=t.showLegalText,this.downloadState},e.prototype.init=function(t,e,n,r){return null==t&&(t=0),null==e&&(e=0),null==n&&(n=0),null==r&&(r=""),this.initViewStates(t,e,n,r)},e.prototype.notEnoughDownloads=function(e,n){return this.downloadViewStates.unableToDownloadNotEnoughDownloads.infoBox1Text=1===n?t("bulk_download_not_enough_downloads_singular",{cost:e}):t("bulk_download_not_enough_downloads",{cost:e,downloads_left:n}),this.downloadViewStates.unableToDownloadNotEnoughDownloads},e.prototype.redownloadAll=function(e){return this.downloadViewStates.reDownloadAlreadyDownloaded.infoBox1Text=1===e?t("bulk_download_info_already_downloaded_singular"):t("bulk_download_info_already_downloaded_plural"),this.downloadViewStates.reDownloadAlreadyDownloaded},e.prototype.subsetOutOfDownloads=function(e,n,r){return this.downloadViewStates.alreadyDownloadedSubsetUnableToDownload.infoBox1Text=1===e?t("bulk_download_info_already_downloaded_subset_singular"):t("bulk_download_info_already_downloaded_subset",{number_of_images_already_downloaded:e}),this.downloadViewStates.alreadyDownloadedSubsetUnableToDownload.infoBox2Text=1===r?t("bulk_download_info_unable_to_download_singular"):t("bulk_download_info_unable_to_download_plural",{cost:r}),this.downloadViewStates.alreadyDownloadedSubsetUnableToDownload},e.prototype.subsetNotEnoughDownloads=function(e,n,r,o){return this.downloadViewStates.alreadyDownloadedSubsetRemainingNotEnough.infoBox1Text=1===e?t("bulk_download_info_already_downloaded_subset_singular"):t("bulk_download_info_already_downloaded_subset",{number_of_images_already_downloaded:e}),this.downloadViewStates.alreadyDownloadedSubsetRemainingNotEnough.infoBox2Text=1===o?t("bulk_download_info_remaning_not_enough_singular",{downloads_left:n}):t("bulk_download_info_remaning_not_enough_plural",{cost:r-e,downloads_left:n}),this.downloadViewStates.alreadyDownloadedSubsetRemainingNotEnough},e.prototype.subsetDownloadNow=function(e,n,r){return this.downloadViewStates.alreadyDownloadedSubsetDownloadNow.infoBox1Text=1===e?t("bulk_download_info_already_downloaded_subset_singular"):t("bulk_download_info_already_downloaded_subset",{number_of_images_already_downloaded:e}),this.downloadViewStates.alreadyDownloadedSubsetDownloadNow.infoBox2Text=1===n&&1===r?t("bulk_download_info_remaning_singular_cost_singular_download_singular"):1===r?t("bulk_download_info_remaning_singular_cost_plural_download_plural",{downloads_left:n}):t("bulk_download_info_remaning_plural_cost_plural_download_plural",{cost:r,downloads_left:n}),this.downloadViewStates.alreadyDownloadedSubsetDownloadNow},e.prototype.downloadedSubset=function(t,e,n,r,o){return 0===r?this.subsetOutOfDownloads(e,n,o):r<o?this.subsetNotEnoughDownloads(e,r,t,o):this.subsetDownloadNow(e,r,o)},e.prototype.downloadNow=function(e,n){return this.downloadViewStates.downloadNow.infoBox1Text=1===e?t("bulk_download_info_cost_singular_downloads_plural",{downloads_left:n}):t("bulk_download_info_cost_plural_downloads_plural",{cost:e,downloads_left:n}),this.downloadViewStates.downloadNow},e.prototype.outOfDownloads=function(e){return this.downloadViewStates.outOfDownloads.infoBox1Text=1===e?t("bulk_download_out_of_downloads_message_singular"):t("bulk_download_out_of_downloads_message",{cost:e}),this.downloadViewStates.outOfDownloads},e.prototype.findBulkDownloadState=function(t,e,n,r){var o;return null==t&&(t=0),null==e&&(e=0),null==n&&(n=0),null==r&&(r=""),o=t-n,0===t?this.downloadViewStates.selectItems:n===t?this.redownloadAll(t):n>0&&n<t?this.downloadedSubset(t,n,r,e,o):0===e?this.outOfDownloads(t,r):e<t?this.notEnoughDownloads(t,e):this.downloadNow(t,e)},e}(),Collaboration.factory("bulkDownloadStateService",["t",function(t){return new BulkDownloadStateService(t)}])}.call(this),function(){this.CurationService=function(){function t(t,e){this.q=t,this.http=e,this.promiseMaker=new PromiseMaker(this.q),this.fakeCurationService=new CurationServiceFake(this.q)}return t.prototype.getSet=function(t){return this.http.get("/collaboration/sets/"+t)},t.prototype.getSets=function(t){return null==t&&(t={}),this.http.get("/collaboration/sets?"+this.queryStringForLoadCuratedSetList(t))},t.prototype.createSet=function(t){return this.http.post("/collaboration/sets",{board_id:t})},t.prototype.publishToGhost=function(t){return this.http.post("/collaboration/sets/publish-to-ghost",{set_id:t})},t.prototype.publish=function(t){return this.http.put("/collaboration/sets/"+t+"/published-state",{published_state:"Published"})},t.prototype.update=function(t,e){return this.http.put("/collaboration/sets/"+t,e)},t.prototype.unpublish=function(t){return this.http.put("/collaboration/sets/"+t+"/published-state",{published_state:"Unpublished"})},t.prototype.getKeywords=function(t){return this.http.get("/collaboration/sets/"+t+"/keywords")},t.prototype.getKeywordText=function(t){return this.http.get("/collaboration/keyword-text-by-id/"+t)},t.prototype.addKeyword=function(t,e){return this.http.put("/collaboration/sets/"+t+"/keywords/"+e)},t.prototype.addKeywords=function(t,e){return this.http.post("/collaboration/sets/"+t+"/keywords",{keyword_ids:e})},t.prototype.deleteKeyword=function(t,e){return this.http["delete"]("/collaboration/sets/"+t+"/keywords/"+e)},t.prototype.getSuggestedKeywords=function(t){return this.http.get(encodeURI("/collaboration/suggested-keywords?phrase="+t))},t.prototype.queryStringForLoadCuratedSetList=function(t){var e;return e=t.sortAscending?"Ascending":"Descending",t.sortField||(t.sortField="LastUpdatedDate"),["pageSize="+t.pageSize,"pageNumber="+t.pageNumber,"sortDirection="+e,"sortField="+t.sortField,"keywordIds="+t.keywordIds,"phrase="+t.phrase,"createdByName="+t.createdByName,"updatedByName="+t.updatedByName].join("&")},t}(),Collaboration.factory("curationService",["$q","$http",function(t,e){return new CurationService(t,e)}])}.call(this),function(){this.CurationServiceFake=function(){function t(t,e){this.sets={},this.promiseMaker=new PromiseMaker(t),this.boardsService=e||new BoardsServiceFake(t),this.keywords=[{id:"keyword 1",text:"Keyword 1",parent:{id:"123456",text:"Muffins"}},{id:"keyword 2",text:"Keyword 2",parent:{id:"789101",text:"Cupcakes"}}]}return t.prototype.getSet=function(t){return this.fakeHttpPromise(function(e){return function(n,r){return e.sets[t]?n({status:200,data:e.sets[t]}):r({status:404})}}(this))},t.prototype.getSets=function(t){var e,n,r,o;null==t&&(t={}),r=[],n=this.sets;for(e in n)o=n[e],r.push(o);return this.sortedSetsUsingOptions(r,t)},t.prototype.sortedSetsUsingOptions=function(t,e){var n,r,o;return n=function(t,e){return t.toLocaleLowerCase?t.toLocaleLowerCase()>e.toLocaleLowerCase()?1:-1:t.toLowerCase()>e.toLowerCase()?1:-1},o=function(){return function(t,r){var o,i;switch(e.sortField||"Title"){case"Title":return n(t.title,r.title);case"LastUpdatedDate":return o=new Date(t.last_updated_date),i=new Date(r.last_updated_date),o>i?1:-1;default:return 0}}}(),r=t.sort(o),e.sortAscending||(r=r.reverse()),this.fakeHttpPromise(function(){return function(t){return t({status:200,data:{sets:r,total_set_count:r.length}})}}())},t.prototype.createSet=function(t){return this.fakeHttpPromise(function(e){return function(n,r){var o;return e.sets[t]?r({status:409}):(o=e.boardsService.findBoard(t),e.sets[t]=new FakeCuratedSet({id:t,hero_asset:o.hero_asset,title:o.name,published_state:"NotYetPublished",published_url:"/fake/curated_set",last_updated_by:"Liz Lemon",last_updated_date:GiDateTime.makeUniversal(moment().format()),keywords:[]}),n({status:200,data:t}))}}(this))},t.prototype.isEditor=function(t){return void 0!==t&&(this.isCurrentUserEditor=t),this.isCurrentUserEditor},t.prototype.publish=function(t){return this.fakeHttpPromise(function(e){return function(n,r){return e.sets[t]?(e.sets[t].published_state="Published",n({status:200,data:{}})):r({status:404})}}(this))},t.prototype.unpublish=function(t){return this.fakeHttpPromise(function(e){return function(n,r){return e.sets[t]?(e.sets[t].published_state="Unpublished",n({status:200,data:{}})):r({status:404})}}(this))},t.prototype.update=function(t){return this.fakeHttpPromise(function(e){return function(n,r){return e.sets[t]?n({status:200,data:{}}):r({status:404})}}(this))},t.prototype.getKeywords=function(t){return this.fakeHttpPromise(function(e){return function(n,r){return e.sets[t]?n({status:200,data:e.sets[t].keywords}):r({status:404})}}(this))},t.prototype.getKeywordText=function(t){return this.fakeHttpPromise(function(e){return function(n,r){var o,i;return i=function(){var e,n,r,i;for(r=this.keywords,i=[],e=0,n=r.length;e<n;e++)o=r[e],o.id===t&&i.push(o);return i}.call(e)[0],i?n({status:200,data:i}):r({status:404})}}(this))},t.prototype.addKeyword=function(t,e){return this.fakeHttpPromise(function(n){return function(r,o){return n.sets[t]?(n.sets[t].keywords.push(n.keywords[e]),r({status:200})):o({status:404})}}(this))},t.prototype.addKeywords=function(t){return this.fakeHttpPromise(function(e){return function(n,r){return e.sets[t]?n({status:200}):r({status:404})}}(this))},t.prototype.deleteKeyword=function(t,e){return this.fakeHttpPromise(function(n){return function(r,o){return n.sets[t]?(n.sets[t].keywords=n.sets[t].keywords.filter(function(t){return t.id!==e}),r({status:200})):o({status:404})}}(this))},t.prototype.getSuggestedKeywords=function(){return this.fakeHttpPromise(function(t){return function(e){return e({status:200,data:t.keywords})}}(this))},t.prototype.fakeHttpPromise=function(t){return this.promiseMaker.fakeHttpPromise(t)},t}()}.call(this),function(){var e;e=function(){function e(t,e){this.curationService=t,this.$q=e,this.keywords=[]}return e.prototype.getCuratedSet=function(e){return this.curationService.getSet(e).then(function(){return function(e){var n,r,o;return o=e.data.published_state,n=e.data.alt_captions_enabled,r={},r.lastUpdatedDateTime=moment.utc(e.data.last_updated_date).format(),r.lastUpdatedRelative=moment.utc(e.data.last_updated_date).fromNow(),r.lastUpdatedBy=e.data.last_updated_by_object,"NotYetPublished"===e.data.published_state?(r.publishStatusMessage=t("status")+": Draft",{publishedState:o,altCaptionsEnabled:n,curationMetaData:r}):(r.publishedUrl=e.data.published_url,"Unpublished"!==e.data.published_state?r.publishStatusMessage=t("status")+": "+t("published"):r.publishStatusMessage=t("status")+": "+t("unpublished"),{publishedState:o,altCaptionsEnabled:n,curationMetaData:r})}}(),function(e){return function(n){var r;return 404===n.status?(r={},r.publishStatusMessage=t("status")+": Draft",e.$q.reject({publishedState:"SetNotFound",curationMetaData:r})):e.$q.reject({publishedState:"SetNotFound",curationMetaData:{}})}}(this))},e.prototype.getKeywords=function(t){return this.curationService.getKeywords(t).then(function(){return function(t){return t.data}}())},e.prototype.addKeywordsInMemory=function(t){var e,n,r,o,i;for(i=this.keywords,e=0,o=i.length;e<o;e++)n=i[e],n.id===t&&(r=!0);return this.curationService.getKeywordText(t).then(function(e){return function(n){var o;if(o={id:n.data.parent.id,display_text:n.data.parent.text},!r)return e.keywords.push({id:t,display_text:n.data.text,parent:o})}}(this))},e.prototype.addKeywords=function(t,e){return this.curationService.addKeywords(t,e).then(function(){return function(t){return t.data}}())},e.prototype.addKeyword=function(t,e){return this.curationService.addKeyword(t,e)},e.prototype.deleteKeyword=function(t,e){return this.curationService.deleteKeyword(t,e)},e}(),Collaboration.factory("curationStorage",["curationService","$q",function(t,n){return new e(t,n)}])}.call(this),function(){"use strict";Collaboration.directive("clickOutside",["$parse","$document",function(t,e){return{restrict:"A",link:function(n,r,o){var i,a;a=t(o.clickOutside),i=function(t){var e,o,i,s;s=$(t.target).parents(),e=s.index(r)!==-1,o=t.target===r[0],(i=!e&&!o)&&n.$apply(function(){a(n,{$event:t})})},e.bind("click",i),r.bind("remove",function(){e.unbind("click",i)})}}}])}.call(this),function(){Collaboration.directive("giAddTo",["$compile","$http","$window",function(t,e,n){return{restrict:"A",link:function(t,r,o){return $(r).on("click",function(r){var i,a;return r.preventDefault(),"get"===o.giAddToMethod?(i=t.selectedAssetIds().join(","),n.location=""+o.giAddTo+i):(a={},a.asset_ids=t.selectedAssetIds(),e.post(o.giAddTo,a).success(function(){if(null!=o.href)return n.location=o.href}).error(function(){return n.alert(n.genericErrorMessage)}))})}}}])}.call(this),function(){Collaboration.directive("giAgreementDownload",["$window",function(t){return{restrict:"A",link:function(e,n,r){return n.on("click",function(e){var n,o;if(e.preventDefault(),o=r.href,n=t.open("","Download","width=550,height=570,status=no,scrollbars=no"))return n.location.href=o,n.focus()})}}}])}.call(this),function(){Collaboration.directive("giArrowTo",["$compile","$window",function(){return{restrict:"A",templateUrl:"arrow-template.html",transclude:!0,scope:{},link:function(t,e,n){var r;return r=25,t.pathString=function(){var t,o,i,a,s,u,d,l,c;if(i=e.find("aside"),d=$(n.giArrowTo),i.length>0&&d.length>0)return a=i.offset().left+i.width()/2,s=i.offset().top,l=d.offset().left+d.width()/2,c=d.offset().top-d.height(),u=(c-s)*(a-l)>0?1:0,s-c<0?(c+=r,s+=i.height()):c=c+d.height()+r,t=a-l,o=s-c,Math.abs(a-l)<i.width()/4?"M "+a+","+s+" "+l+","+c:"M "+a+","+s+" A "+t+","+o+" 0 0 "+u+" "+l+","+c}}}}])}.call(this),function(){this.Collaboration.filter("aspectRatio",function(){return function(t){var e;return e=t.sizes[t.sizes.length-1],e.height_px/e.width_px}})}.call(this),function(){Collaboration.directive("giAutoSuggest",["$http","boardStorage","curationStorage","curationService",function(t,e,n,r){return{restrict:"AE",templateUrl:"autosuggest-template.html",link:function(t){return t.suggestions=[],t.selectedIndex=-1,t.amount=$(".suggestions-list").scrollTop(),t.search=function(){return function(){return""===t.searchText?(t.suggestions=[],t.selectedIndex=-1):t.searchText.indexOf("/")===-1&&t.searchText.indexOf("\\")===-1?r.getSuggestedKeywords(t.searchText).success(function(e){var n,r;if(t.suggestions=e,t.selectedIndex=-1,null!=(n=t.suggestions)&&null!=(r=n.first().display_text)?r.startsWith(t.searchText):void 0)return t.selectedIndex=0}):void 0}}(),t.closeDropdown=function(e,n){return n||$(e.target).is("ul.suggestions-list")||$(e.target).is("input#set-search")||(t.suggestions.length=0,t.selectedIndex=-1,t.searchText=""),!0},t.addKeywordToSet=function(e){var r;return r=t.suggestions[e].id,n.addKeywordsInMemory(r).then(function(){return function(){return t.keywords=n.keywords,"function"==typeof t.onKeywordAdded?t.onKeywordAdded():void 0}}()),t.searchText="",t.suggestions=[]},t.checkKeyDown=function(e){var n,r;return r=43*$(".suggestions-list li").length,r-43,n=43*(t.selectedIndex+1),40===e.keyCode?(e.preventDefault(),t.selectedIndex+1!==t.suggestions.length&&n<r&&t.selectedIndex++,$(".suggestions-list").scrollTop(n)):38===e.keyCode?(e.preventDefault(),t.selectedIndex-1!=-1&&(t.selectedIndex--,$(".suggestions-list").scrollTop(n-86))):27===e.keyCode?(t.suggestions=[],t.selectedIndex=-1):13===e.keyCode&&t.submitKeywordSearch(),!0},t.submitKeywordSearch=function(){if(t.selectedIndex!==-1)return t.addKeywordToSet(t.selectedIndex)},t.submitFreeTextSearch=function(e){if("click"===e.type||13===e.keyCode)return"function"==typeof t.freeTextSearch?t.freeTextSearch(t.searchText):void 0}}}}])}.call(this),function(){Boards.directive("giBlurInputOnEnter",function(){return{restrict:"A",link:function(t,e){return e.on("keydown",function(t){if(13===t.keyCode)return this.blur()})}}})}.call(this),function(){Boards.directive("giChildFocused",["$window","$timeout",function(t,e){return{restrict:"A",link:function(t,n){var r;return r=!1,n.on("focusin",function(){return r=!1,n.addClass("child-focused")}),n.on("focusout",function(){return r=!0,e(function(){if(r)return n.removeClass("child-focused")})})}}}]),Boards.directive("giFocusOutOnClick",["$window","$timeout",function(t,e){return{restrict:"A",link:function(t,n){return n.on("click",function(){return e(function(){return $(n).trigger("focusout")})})}}}])}.call(this),function(){var t;window.jQuery&&-1===window.jQuery.event.props.indexOf("dataTransfer")&&window.jQuery.event.props.push("dataTransfer"),t=void 0,Collaboration.directive("uiDraggable",["$parse","$rootScope",function(e,n){return function(r,o,i){var a,s,u,d,l,c;return d=function(t){var a,s,u,c;return setTimeout(function(){o.unbind("$destroy",d)},0),c=i.dragChannel||"defaultchannel",n.$broadcast("ANGULAR_DRAG_END",c),i.onDragEnd&&(a=e(i.onDragEnd),r.$apply(function(){return a(r,{$event:t})})),"none"!==(null!=(s=t.dataTransfer)?s.dropEffect:void 0)&&i.onDropSuccess?(a=e(i.onDropSuccess),r.$apply(function(){return a(r,{$event:t})})):"none"===(null!=(u=t.dataTransfer)?u.dropEffect:void 0)&&i.onDropFailure&&(a=e(i.onDropFailure),r.$apply(function(){return a(r,{$event:t})})),o.removeClass(l)},a="",c=!1,s=void 0,l=i.draggingClass||"on-dragging",u=void 0,o.attr("draggable",!1),i.$observe("uiDraggable",function(t){t?o.attr("draggable",t):o.removeAttr("draggable")}),i.drag&&r.$watch(i.drag,function(t){a=t||""}),angular.isString(i.dragHandleClass)&&(c=!0,s=i.dragHandleClass.trim()||"drag-handle",o.bind("mousedown",function(t){u=t.target})),o.bind("dragend",d),o.bind("dragstart",function(o){var d,l,f;if(!(!c||u.classList.contains(s)))return o.preventDefault();l=i.dragChannel||"defaultchannel",t={data:a,channel:l},f=angular.toJson(t);try{i.dragUri&&o.dataTransfer.setData("text/plain",i.dragUri),i.dragUri&&o.dataTransfer.setData("text/uri-list",i.dragUri),o.dataTransfer.setData("application/json",f)}catch(t){o.dataTransfer.setData("URL",i.dragUri),o.dataTransfer.setData("Text",f)}return o.dataTransfer.effectAllowed="copyMove",n.$broadcast("ANGULAR_DRAG_START",l),d=e(i.onDragStart),r.$apply(function(){return d(r,{$data:t.data,$event:o,$channel:t.channel})})})}}]).directive("uiOnDrop",["$parse","$rootScope",function(e,n){return function(r,o,i){var a,s,u,d,l,c,f,h,p,m,g,v,_,y;return f=0,v=function(t){return t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.dataTransfer.dropEffect=t.shiftKey?"copy":"move"},g=function(){if(0===--f)return o.removeClass(c)},m=function(a){var s;return f++,n.$broadcast("ANGULAR_HOVER",d),o.addClass(c),s=e(i.uiOnHover),r.$apply(function(){return s(r,{$data:t.data,$event:a,$channel:t.channel})})},_=function(t){var n,a;t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation();try{a=t.dataTransfer.getData("application/json")}catch(e){a=t.dataTransfer.getData("Text")}a=angular.fromJson(a),n=e(i.uiOnDrop),r.$apply(function(){return n(r,{$data:a.data,$event:t,$channel:a.channel})}),o.removeClass(l)},p=function(t,e){var n;return"*"===e||(n=new RegExp("(\\s|[,])+("+t+")(\\s|[,])+","i"),n.test(","+e+","))},y=function(t){return t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.dataTransfer.dropEffect="none",!1},f=0,h=i.dropChannel||"defaultchannel",d="",l=i.dragEnterClass||"on-drag-enter",c=i.dragHoverClass||"on-drag-hover",u=n.$on("ANGULAR_DRAG_START",function(n,a){var s;return d=a,p(a,h)?!i.dropValidate||(s=e(i.dropValidate),s(r,{$data:t.data,$channel:t.channel}))?(o.bind("dragover",v),o.bind("dragenter",m),o.bind("dragleave",g),o.bind("drop",_),o.addClass(l)):(o.bind("dragover",y),o.bind("dragenter",y),o.bind("dragleave",y),void o.bind("drop",y)):(o.bind("dragover",y),o.bind("dragenter",y),o.bind("dragleave",y),o.bind("drop",y))}),a=n.$on("ANGULAR_DRAG_END",function(t,e){return d="",p(e,h)&&(o.unbind("dragover",v),o.unbind("dragenter",m),o.unbind("dragleave",g),o.unbind("drop",_),o.removeClass(c),o.removeClass(l)),o.unbind("dragover",y),o.unbind("dragenter",y),o.unbind("dragleave",y),o.unbind("drop",y)}),s=n.$on("ANGULAR_HOVER",function(t,e){if(p(e,h))return o.removeClass(c)}),r.$on("$destroy",function(){return u(),a(),s()}),i.$observe("dropChannel",function(t){if(t)return h=t})}}])}.call(this),this.JpegMeta)throw Error("Library included multiple times");var JpegMeta={};JpegMeta.stringIsClean=function(t){for(var e=0;e<t.length;e++)if(t.charCodeAt(e)<32)return!1;return!0},JpegMeta.parseNum=function(t,e,n,r){var o,i,a=">"===t;for(n===undefined&&(n=0),r===undefined&&(r=e.length-n),o=a?n:n+r-1;a?o<n+r:o>=n;a?o++:o--)i<<=8,i+=e.charCodeAt(o);return i},JpegMeta.parseSnum=function(t,e,n,r){var o,i,a,s=">"===t;for(n===undefined&&(n=0),r===undefined&&(r=e.length-n),o=s?n:n+r-1;s?o<n+r:o>=n;s?o++:o--)a===undefined&&(a=128==(128&e.charCodeAt(o))),i<<=8,i+=a?255&~e.charCodeAt(o):e.charCodeAt(o);return a&&(i+=1,i*=-1),i},JpegMeta.Rational=function(t,e){return this.num=t,this.den=e||1,this},JpegMeta.Rational.prototype.toString=function(){return 0===this.num?""+this.num:1===this.den?""+this.num:1===this.num?this.num+" / "+this.den:this.num/this.den},JpegMeta.Rational.prototype.asFloat=function(){return this.num/this.den},JpegMeta.MetaGroup=function(t,e){return this.fieldName=t,this.description=e,this.metaProps={},this},JpegMeta.MetaGroup.prototype._addProperty=function(t,e,n){var r=new JpegMeta.MetaProp(t,e,n);this[r.fieldName]=r,this.metaProps[r.fieldName]=r},JpegMeta.MetaGroup.prototype.toString=function(){return"[MetaGroup "+this.description+"]"},JpegMeta.MetaProp=function(t,e,n){return this.fieldName=t,this.description=e,this.value=n,this},JpegMeta.MetaProp.prototype.toString=function(){return""+this.value},this.JpegMeta.JpegFile=function(t,e){var n=this._SOS;this.metaGroups={},this._binary_data=t,this.filename=e;var r,o,i,a,s,u=0,d=0
;if(this._binary_data.slice(0,2)!==this._SOI_MARKER)throw new Error("Doesn't look like a JPEG file. First two bytes are "+this._binary_data.charCodeAt(0)+","+this._binary_data.charCodeAt(1)+".");for(u+=2;u<this._binary_data.length&&(r=this._binary_data.charCodeAt(u++),o=this._binary_data.charCodeAt(u++),d=u,r==this._DELIM)&&o!==n;){for(a=JpegMeta.parseNum(">",this._binary_data,u,2),u+=a;u<this._binary_data.length;)if((r=this._binary_data.charCodeAt(u++))==this._DELIM&&0!=this._binary_data.charCodeAt(u++)){u-=2;break}i=u-d,this._markers[o]?(this._markers[o][0],s=this._markers[o][1]):("UNKN",s=undefined),s&&this[s](o,d+2,i-2)}if(this.general===undefined)throw Error("Invalid JPEG file.");return this},this.JpegMeta.JpegFile.prototype.toString=function(){return"[JpegFile "+this.filename+" "+this.general.type+" "+this.general.pixelWidth+"x"+this.general.pixelHeight+" Depth: "+this.general.depth+"]"},this.JpegMeta.JpegFile.prototype._SOI_MARKER="\xff\xd8",this.JpegMeta.JpegFile.prototype._DELIM=255,this.JpegMeta.JpegFile.prototype._EOI=217,this.JpegMeta.JpegFile.prototype._SOS=218,this.JpegMeta.JpegFile.prototype._sofHandler=function(t,e){if(this.general!==undefined)throw Error("Unexpected multiple-frame image");this._addMetaGroup("general","General"),this.general._addProperty("depth","Depth",JpegMeta.parseNum(">",this._binary_data,e,1)),this.general._addProperty("pixelHeight","Pixel Height",JpegMeta.parseNum(">",this._binary_data,e+1,2)),this.general._addProperty("pixelWidth","Pixel Width",JpegMeta.parseNum(">",this._binary_data,e+3,2)),this.general._addProperty("type","Type",this._markers[t][2])},this.JpegMeta.JpegFile.prototype._JFIF_IDENT="JFIF\0",this.JpegMeta.JpegFile.prototype._JFXX_IDENT="JFXX\0",this.JpegMeta.JpegFile.prototype._EXIF_IDENT="Exif\0",this.JpegMeta.JpegFile.prototype._types={1:["BYTE",1],2:["ASCII",1],3:["SHORT",2],4:["LONG",4],5:["RATIONAL",8],6:["SBYTE",1],7:["UNDEFINED",1],8:["SSHORT",2],9:["SLONG",4],10:["SRATIONAL",8],11:["FLOAT",4],12:["DOUBLE",8]},this.JpegMeta.JpegFile.prototype._tifftags={256:["Image width","ImageWidth"],257:["Image height","ImageLength"],258:["Number of bits per component","BitsPerSample"],259:["Compression scheme","Compression",{1:"uncompressed",6:"JPEG compression"}],262:["Pixel composition","PhotmetricInerpretation",{2:"RGB",6:"YCbCr"}],274:["Orientation of image","Orientation",{1:"Normal",2:"Reverse?",3:"Upside-down",4:"Upside-down Reverse",5:"90 degree CW",6:"90 degree CW reverse",7:"90 degree CCW",8:"90 degree CCW reverse"}],277:["Number of components","SamplesPerPixel"],284:["Image data arrangement","PlanarConfiguration",{1:"chunky format",2:"planar format"}],530:["Subsampling ratio of Y to C","YCbCrSubSampling"],531:["Y and C positioning","YCbCrPositioning",{1:"centered",2:"co-sited"}],282:["X Resolution","XResolution"],283:["Y Resolution","YResolution"],296:["Resolution Unit","ResolutionUnit",{2:"inches",3:"centimeters"}],273:["Image data location","StripOffsets"],278:["Number of rows per strip","RowsPerStrip"],279:["Bytes per compressed strip","StripByteCounts"],513:["Offset to JPEG SOI","JPEGInterchangeFormat"],514:["Bytes of JPEG Data","JPEGInterchangeFormatLength"],301:["Transfer function","TransferFunction"],318:["White point chromaticity","WhitePoint"],319:["Chromaticities of primaries","PrimaryChromaticities"],529:["Color space transformation matrix coefficients","YCbCrCoefficients"],532:["Pair of black and white reference values","ReferenceBlackWhite"],306:["Date and time","DateTime"],270:["Image title","ImageDescription"],271:["Make","Make"],272:["Model","Model"],305:["Software","Software"],315:["Person who created the image","Artist"],316:["Host Computer","HostComputer"],33432:["Copyright holder","Copyright"],34665:["Exif tag","ExifIfdPointer"],34853:["GPS tag","GPSInfoIfdPointer"]},this.JpegMeta.JpegFile.prototype._exiftags={36864:["Exif Version","ExifVersion"],40960:["FlashPix Version","FlashpixVersion"],40961:["Color Space","ColorSpace"],37121:["Meaning of each component","ComponentsConfiguration"],37122:["Compressed Bits Per Pixel","CompressedBitsPerPixel"],40962:["Pixel X Dimension","PixelXDimension"],40963:["Pixel Y Dimension","PixelYDimension"],37500:["Manufacturer notes","MakerNote"],37510:["User comments","UserComment"],40964:["Related audio file","RelatedSoundFile"],36867:["Date Time Original","DateTimeOriginal"],36868:["Date Time Digitized","DateTimeDigitized"],37520:["DateTime subseconds","SubSecTime"],37521:["DateTimeOriginal subseconds","SubSecTimeOriginal"],37522:["DateTimeDigitized subseconds","SubSecTimeDigitized"],33434:["Exposure time","ExposureTime"],33437:["FNumber","FNumber"],34850:["Exposure program","ExposureProgram"],34852:["Spectral sensitivity","SpectralSensitivity"],34855:["ISO Speed Ratings","ISOSpeedRatings"],34856:["Optoelectric coefficient","OECF"],37377:["Shutter Speed","ShutterSpeedValue"],37378:["Aperture Value","ApertureValue"],37379:["Brightness","BrightnessValue"],37380:["Exposure Bias Value","ExposureBiasValue"],37381:["Max Aperture Value","MaxApertureValue"],37382:["Subject Distance","SubjectDistance"],37383:["Metering Mode","MeteringMode"],37384:["Light Source","LightSource"],37385:["Flash","Flash"],37386:["Focal Length","FocalLength"],37396:["Subject Area","SubjectArea"],41483:["Flash Energy","FlashEnergy"],41484:["Spatial Frequency Response","SpatialFrequencyResponse"],41486:["Focal Plane X Resolution","FocalPlaneXResolution"],41487:["Focal Plane Y Resolution","FocalPlaneYResolution"],41488:["Focal Plane Resolution Unit","FocalPlaneResolutionUnit"],41492:["Subject Location","SubjectLocation"],41493:["Exposure Index","ExposureIndex"],41495:["Sensing Method","SensingMethod"],41728:["File Source","FileSource"],41729:["Scene Type","SceneType"],41730:["CFA Pattern","CFAPattern"],41985:["Custom Rendered","CustomRendered"],41986:["Exposure Mode","Exposure Mode"],41987:["White Balance","WhiteBalance"],41988:["Digital Zoom Ratio","DigitalZoomRatio"],41989:["Focal length in 35 mm film","FocalLengthIn35mmFilm"],41990:["Scene Capture Type","SceneCaptureType"],41991:["Gain Control","GainControl"],41992:["Contrast","Contrast"],41993:["Saturation","Saturation"],41994:["Sharpness","Sharpness"],41995:["Device settings description","DeviceSettingDescription"],41996:["Subject distance range","SubjectDistanceRange"],42016:["Unique image ID","ImageUniqueID"],40965:["Interoperability tag","InteroperabilityIFDPointer"]},this.JpegMeta.JpegFile.prototype._gpstags={0:["GPS tag version","GPSVersionID"],1:["North or South Latitude","GPSLatitudeRef"],2:["Latitude","GPSLatitude"],3:["East or West Longitude","GPSLongitudeRef"],4:["Longitude","GPSLongitude"],5:["Altitude reference","GPSAltitudeRef"],6:["Altitude","GPSAltitude"],7:["GPS time (atomic clock)","GPSTimeStamp"],8:["GPS satellites usedd for measurement","GPSSatellites"],9:["GPS receiver status","GPSStatus"],10:["GPS mesaurement mode","GPSMeasureMode"],11:["Measurement precision","GPSDOP"],12:["Speed unit","GPSSpeedRef"],13:["Speed of GPS receiver","GPSSpeed"],14:["Reference for direction of movement","GPSTrackRef"],15:["Direction of movement","GPSTrack"],16:["Reference for direction of image","GPSImgDirectionRef"],17:["Direction of image","GPSImgDirection"],18:["Geodetic survey data used","GPSMapDatum"],19:["Reference for latitude of destination","GPSDestLatitudeRef"],20:["Latitude of destination","GPSDestLatitude"],21:["Reference for longitude of destination","GPSDestLongitudeRef"],22:["Longitude of destination","GPSDestLongitude"],23:["Reference for bearing of destination","GPSDestBearingRef"],24:["Bearing of destination","GPSDestBearing"],25:["Reference for distance to destination","GPSDestDistanceRef"],26:["Distance to destination","GPSDestDistance"],27:["Name of GPS processing method","GPSProcessingMethod"],28:["Name of GPS area","GPSAreaInformation"],29:["GPS Date","GPSDateStamp"],30:["GPS differential correction","GPSDifferential"]},this.JpegMeta.JpegFile.prototype._iptctags={5:["Title","title"],15:["Category","category"],25:["Keywords","keywords"],80:["Creator","creator"],85:["Byline","byline"],105:["Headline","headline"],110:["Credit","credit"],116:["Copyright","copyright"],120:["Caption","caption"],122:["Caption Writer","captionWriter"]},this.JpegMeta.JpegFile.prototype._markers={192:["SOF0","_sofHandler","Baseline DCT"],193:["SOF1","_sofHandler","Extended sequential DCT"],194:["SOF2","_sofHandler","Progressive DCT"],195:["SOF3","_sofHandler","Lossless (sequential)"],197:["SOF5","_sofHandler","Differential sequential DCT"],198:["SOF6","_sofHandler","Differential progressive DCT"],199:["SOF7","_sofHandler","Differential lossless (sequential)"],200:["JPG",null,"Reserved for JPEG extensions"],201:["SOF9","_sofHandler","Extended sequential DCT"],202:["SOF10","_sofHandler","Progressive DCT"],203:["SOF11","_sofHandler","Lossless (sequential)"],205:["SOF13","_sofHandler","Differential sequential DCT"],206:["SOF14","_sofHandler","Differential progressive DCT"],207:["SOF15","_sofHandler","Differential lossless (sequential)"],196:["DHT",null,"Define Huffman table(s)"],204:["DAC",null,"Define arithmetic coding conditioning(s)"],208:["RST0",null,"Restart with modulo 8 count \u201c0\u201d"],209:["RST1",null,"Restart with modulo 8 count \u201c1\u201d"],210:["RST2",null,"Restart with modulo 8 count \u201c2\u201d"],211:["RST3",null,"Restart with modulo 8 count \u201c3\u201d"],212:["RST4",null,"Restart with modulo 8 count \u201c4\u201d"],213:["RST5",null,"Restart with modulo 8 count \u201c5\u201d"],214:["RST6",null,"Restart with modulo 8 count \u201c6\u201d"],215:["RST7",null,"Restart with modulo 8 count \u201c7\u201d"],216:["SOI",null,"Start of image"],217:["EOI",null,"End of image"],218:["SOS",null,"Start of scan"],219:["DQT",null,"Define quantization table(s)"],220:["DNL",null,"Define number of lines"],221:["DRI",null,"Define restart interval"],222:["DHP",null,"Define hierarchical progression"],223:["EXP",null,"Expand reference component(s)"],224:["APP0","_app0Handler","Reserved for application segments"],225:["APP1","_app1Handler"],226:["APP2",null],227:["APP3",null],228:["APP4",null],229:["APP5",null],230:["APP6",null],231:["APP7",null],232:["APP8",null],233:["APP9",null],234:["APP10",null],235:["APP11",null],236:["APP12",null],237:["IPTC","_iptcHandler","IPTC Photo Metadata"],238:["APP14",null],239:["APP15",null],240:["JPG0",null],241:["JPG1",null],242:["JPG2",null],243:["JPG3",null],244:["JPG4",null],245:["JPG5",null],246:["JPG6",null],247:["JPG7",null],248:["JPG8",null],249:["JPG9",null],250:["JPG10",null],251:["JPG11",null],252:["JPG12",null],253:["JPG13",null],254:["COM",null],1:["JPG13",null]},this.JpegMeta.JpegFile.prototype._addMetaGroup=function(t,e){var n=new JpegMeta.MetaGroup(t,e);return this[n.fieldName]=n,this.metaGroups[n.fieldName]=n,n},this.JpegMeta.JpegFile.prototype._parseIfd=function(t,e,n,r,o,i,a){var s,u,d,l,c,f,h,p,m,g,v,_=JpegMeta.parseNum(t,e,n+r,2);v=this._addMetaGroup(i,a);for(var y=0;y<_;y++)if(s=n+r+2+12*y,u=JpegMeta.parseNum(t,e,s,2),l=JpegMeta.parseNum(t,e,s+2,2),f=JpegMeta.parseNum(t,e,s+4,4),h=JpegMeta.parseNum(t,e,s+8,4),this._types[l]!==undefined){if(d=this._types[l][0],c=this._types[l][1],h=c*f<=4?s+8:n+h,"UNDEFINED"==d)p=undefined;else if("ASCII"==d)p=e.slice(h,h+f),p=p.split("\0")[0],JpegMeta.stringIsClean(p)||(p="");else{p=new Array;for(var b=0;b<f;b++,h+=c)"BYTE"!=d&&"SHORT"!=d&&"LONG"!=d||p.push(JpegMeta.parseNum(t,e,h,c)),"SBYTE"!=d&&"SSHORT"!=d&&"SLONG"!=d||p.push(JpegMeta.parseSnum(t,e,h,c)),"RATIONAL"==d&&(m=JpegMeta.parseNum(t,e,h,4),g=JpegMeta.parseNum(t,e,h+4,4),p.push(new JpegMeta.Rational(m,g))),"SRATIONAL"==d&&(m=JpegMeta.parseSnum(t,e,h,4),g=JpegMeta.parseSnum(t,e,h+4,4),p.push(new JpegMeta.Rational(m,g))),p.push();1===f&&(p=p[0])}o.hasOwnProperty(u)?v._addProperty(o[u][1],o[u][0],p):console.log("WARNING(jpegmeta.js): Unknown tag: ",u)}},this.JpegMeta.JpegFile.prototype._jfifHandler=function(t,e){if(this.jfif!==undefined)throw Error("Multiple JFIF segments found");this._addMetaGroup("jfif","JFIF"),this.jfif._addProperty("version_major","Version Major",this._binary_data.charCodeAt(e+5)),this.jfif._addProperty("version_minor","Version Minor",this._binary_data.charCodeAt(e+6)),this.jfif._addProperty("version","JFIF Version",this.jfif.version_major.value+"."+this.jfif.version_minor.value),this.jfif._addProperty("units","Density Unit",this._binary_data.charCodeAt(e+7)),this.jfif._addProperty("Xdensity","X density",JpegMeta.parseNum(">",this._binary_data,e+8,2)),this.jfif._addProperty("Ydensity","Y Density",JpegMeta.parseNum(">",this._binary_data,e+10,2)),this.jfif._addProperty("Xthumbnail","X Thumbnail",JpegMeta.parseNum(">",this._binary_data,e+12,1)),this.jfif._addProperty("Ythumbnail","Y Thumbnail",JpegMeta.parseNum(">",this._binary_data,e+13,1))},this.JpegMeta.JpegFile.prototype._app0Handler=function(t,e){var n=this._binary_data.slice(e,e+5);n==this._JFIF_IDENT?this._jfifHandler(t,e):this._JFXX_IDENT},this.JpegMeta.JpegFile.prototype._app1Handler=function(t,e){this._binary_data.slice(e,e+5)==this._EXIF_IDENT&&this._exifHandler(t,e+6)},this.JpegMeta.JpegFile.prototype._iptcHandler=function(t,e,n){this._addMetaGroup("iptc","IPTC");for(var r,o,i,a,s="<",u=JpegMeta.parseNum(s,this._binary_data,e+4,1),d=28,l=2,c=0;c<n;c++)if(o=e+c,JpegMeta.parseNum(s,this._binary_data,o,1)==l){if(a=JpegMeta.parseNum(s,this._binary_data,o+1,1),tag_desc=this._iptctags[a],!tag_desc)continue;for(u=0,r=2;r<n&&JpegMeta.parseNum(s,this._binary_data,o+r,1)!=d&&JpegMeta.parseNum(s,this._binary_data,o+r+1,1)!=l;)r++,u++;if(!u)continue;i=this._binary_data.slice(e+c+2,e+c+2+u),i=i.replace("\0","").trim(),this.iptc._addProperty(tag_desc[1],tag_desc[0],i),c+=u-1}},JpegMeta.JpegFile.prototype._exifHandler=function(t,e){if(this.exif!==undefined)throw new Error("Multiple JFIF segments found");var n,r,o,i=this._binary_data.slice(e,e+2);if("II"===i)n="<";else{if("MM"!==i)throw new Error("Malformed TIFF meta-data. Unknown endianess: "+i);n=">"}if(42!==(r=JpegMeta.parseNum(n,this._binary_data,e+2,2)))throw new Error("Malformed TIFF meta-data. Bad magic: "+r);if(o=JpegMeta.parseNum(n,this._binary_data,e+4,4),this._parseIfd(n,this._binary_data,e,o,this._tifftags,"tiff","TIFF"),this.tiff.ExifIfdPointer&&this._parseIfd(n,this._binary_data,e,this.tiff.ExifIfdPointer.value,this._exiftags,"exif","Exif"),this.tiff.GPSInfoIfdPointer){if(this._parseIfd(n,this._binary_data,e,this.tiff.GPSInfoIfdPointer.value,this._gpstags,"gps","GPS"),this.gps.GPSLatitude){var a;a=this.gps.GPSLatitude.value[0].asFloat()+1/60*this.gps.GPSLatitude.value[1].asFloat()+1/3600*this.gps.GPSLatitude.value[2].asFloat(),"S"===this.gps.GPSLatitudeRef.value&&(a=-a),this.gps._addProperty("latitude","Dec. Latitude",a)}if(this.gps.GPSLongitude){var s;s=this.gps.GPSLongitude.value[0].asFloat()+1/60*this.gps.GPSLongitude.value[1].asFloat()+1/3600*this.gps.GPSLongitude.value[2].asFloat(),"W"===this.gps.GPSLongitudeRef.value&&(s=-s),this.gps._addProperty("longitude","Dec. Longitude",s)}}},function(){Collaboration.directive("giDropZone",["boardStorage",function(t){var e,n;return n=function(t){var n,r,o,i;if(t){for(i=[],r=0,o=t.length;r<o;r++)n=t[r],i.push(e(n));return i}},e=function(e){var n;return n=new FileReader,n.onloadend=function(){var e,r;if(e=n.result,r=new JpegMeta.JpegFile(atob(e.replace(/^.*?,/,""))),r.iptc&&r.iptc.credit&&!r.iptc.headline&&r.iptc.credit.value.match(/^.?Getty/))return t.addItem(r.iptc.title.value)},n.readAsDataURL(e)},{restrict:"A",link:function(t,e){return e.bind("dragover",function(t){return t.stopPropagation(),t.preventDefault()}),e.bind("drop",function(t){return t.stopPropagation(),t.preventDefault(),n(t.originalEvent.dataTransfer.files)})}}}])}.call(this),function(){Boards.directive("giFocusOnEvent",["eventBus",function(t){return{restrict:"A",link:function(e,n,r){return t.on(r.giFocusOnEvent,function(){return setTimeout(function(){return function(){return n.focus()}}(),0)})}}}]),Boards.directive("giFocusAndSelectOnEvent",["eventBus",function(t){return{restrict:"A",link:function(e,n,r){return t.on(r.giFocusAndSelectOnEvent,function(){return setTimeout(function(){return function(){return n.focus().select()}}(),50)})}}}])}.call(this),function(){Boards.directive("giOnLoad",function(){return{restrict:"A",link:function(t,e,n){return e.bind("load",function(){return t.$apply(n.giOnLoad)})}}})}.call(this),function(){Collaboration.directive("giScrollToFixed",["$document",function(t){return{restrict:"A",link:function(e,n,r){var o,i,a;return a=r.giScrollToFixed,i=function(){if($("body").hasClass("favorites-open"))return a<$(document).scrollTop()&&!n.hasClass("docked")&&n.addClass("docked"),$(document).scrollTop()<a&&n.hasClass("docked")&&n.removeClass("docked"),!1},o=function(){return t.on("scroll",i)},o(),!1}}}])}.call(this),function(){Boards.directive("giSelectAllOnFocus",function(){return{restrict:"A",link:function(t,e){return e.on("focus",function(){return setTimeout(function(t){return function(){return t.setSelectionRange(0,t.value.length)}}(this),50)})}}}),Boards.directive("giSelectAllOnClick",["$timeout","$window",function(t,e){return{restrict:"A",link:function(n,r){return r.on("mousedown",function(n){return t(function(){return function(){var t,r;return r=e.getSelection(),t=document.createRange(),t.selectNodeContents(n.target),r.removeAllRanges(),r.addRange(t)}}())})}}}]),Boards.directive("giClearSelectionOnClick",["$timeout","$window",function(t,e){return{restrict:"A",link:function(n,r,o){if("false"!==o.giClearSelectionOnClick)return r.on("click dragstart",function(n){var r;if(!n.target.attributes["gi-select-all-on-click"]&&"false"!==(null!=(r=n.target.attributes["gi-clear-selection-on-click"])?r.value:void 0))return t(function(){return function(){return e.getSelection().removeAllRanges()}}())})}}}]),Boards.directive("giReadOnlyValue",function(){return{restrict:"A",link:function(t,e){return e.on("input propertychange keyup click",function(){return e.val(e.attr("value")),e.focus()})}}})}.call(this),function(){Boards.directive("giSelectHandler",function(){return{restrict:"A",link:function(t,e,n){return e.on("change",function(e){var r,o;return o=e.target.value,r=t.$eval(n.giSelectHandler),r.call(this,o)})}}})}.call(this),function(){Boards.directive("selectOnClick",function(){return{restrict:"A",link:function(t,e){e.on("click",function(){this.select()})}}})}.call(this),function(){Boards.directive("giSelectValue",function(){return{restrict:"A",link:function(t,e,n){return t.$watch(n.giSelectValue,function(t){return $(e).val(t)})}}})}.call(this),function(){Boards.directive("giShowMore",["$window",function(t){return{restrict:"A",template:'<span class="show-more-content {{classes()}}" ng-transclude />',transclude:!0,link:function(e,n,r){return e.giShowMore={},$(t).on("resize",function(){return e.$apply()}),e.childFocused=function(){return n.find(":focus").length>0},e.classes=function(){var t,n;return t=e.childFocused()?"child-focused":"",n=e.giShowMore.showMore?"showing-more":"showing-less",t+" "+n},e.isOverflowing=function(){var t;return t=$(n).find(r.giShowMore),t[0].scrollHeight-t.height()>=2}}}}]),Boards.directive("giShowMoreText",function(){return{restrict:"A",template:'<span ng-show="isOverflowing() && !giShowMore.showMore" ng-transclude></span>',transclude:!0,link:function(t,e){return e.on("click",function(){return t.giShowMore.showMore=!0,t.$apply()})}}}),Boards.directive("giShowLessText",function(){return{restrict:"A",template:'<span ng-show="giShowMore.showMore" ng-transclude></span>',transclude:!0,link:function(t,e){return e.on("click",function(){return t.giShowMore.showMore=!1,t.$apply()})}}})}.call(this),function(){Boards.directive("giSpinnerUntil",function(){return{restrict:"A",link:function(t,e,n){return $(e).inlineSpinner("large"),t.$watchCollection("assets()",function(){if(t.$eval(n.giSpinnerUntil))return $(e).inlineSpinner(!1),$(e).remove()})}}})}.call(this),function(){Collaboration.directive("giTransition",["$rootScope",function(t){var e;return e=function(){return angular.element("body")},t.openTransition=function(t){e().hasClass(t+"-open")||e().addClass(t+"-open")},t.isTransitionOpen=function(t){return e().hasClass(t+"-open")},t.closeTransition=function(t){e().hasClass(t+"-open")&&e().removeClass(t+"-open")},t.toggleTransition=function(t){e().toggleClass(t+"-open")},{restrict:"A"}}])}.call(this),function(){var t=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};this.Collaboration.factory("downloadAuthorizationService",["$q","$http",function(e,n){var r,o;return o="/collaboration/download-authorizations.json",r=[],{fetchBulkAssetAuthorizations:function(t){var i;return i=e.defer(),n.get(o+"?asset_ids="+t.join(",")).then(function(t){return r=t.data.assets,i.resolve(t.data.assets)})["catch"](function(){return r=[],i.resolve([])}),i.promise},getAssetAuthorizations:function(){return r},createDownload:function(t){var r;return r=e.defer(),n.put("/collaboration/create-download.json",{download_tokens:t.join(",")}).then(function(t){return r.resolve(t.data.downloads)})["catch"](function(){return r.resolve({})}),r.promise},hasSignatureReDownloadsOnly:function(){return!r.isEmpty()&&!(t.call(r.map(function(t){return t.is_subscription_free_file}),!1)>=0)},fetchAssetDownloads:function(t){var e,n,r,o,i,a,s,u,d;for(n=[],u=this.getAssetAuthorizations(),r=0,i=u.length;r<i;r++)if(e=u[r],t.indexOf(e.asset_id)>=0)for(d=e.size_authorizations.ProductOfferingAuthorizations,o=0,a=d.length;o<a;o++)s=d[o],e.is_credit_free_file?"CreditPack"===s.ProductType&&n.push({downloadToken:s.DownloadToken,asset:e}):/SUB/.test(s.Sku)&&n.push({downloadToken:s.DownloadToken,asset:e});return n},reDownloadAssetIds:function(e){var n;return n=[],r.isEmpty()?0:(r.map(function(r){return function(o){var i;if(r.isRedownloadedAsset(o)&&(i=o.asset_id,t.call(e,i)>=0))return n.push(o.asset_id)}}(this)),n)},isRedownloadedAsset:function(t){return t.is_subscription_free_file||t.is_credit_free_file}}}])}.call(this),function(){this.Collaboration.filter("fullUrl",function(){return function(t){var e;return e=$("<a>")[0],e.href=t,e.href}})}.call(this),function(){this.Collaboration.filter("humanDate",function(){return function(t){if(t)return"Z"!==t.slice(-1)&&(t+="Z"),moment(t,"YYYY-MM-DDTHH:mm:ssZZZ").calendar()}})}.call(this),function(){this.LightboxService=function(){function t(t){this.http=t}return t.prototype.existence=function(){return this.http.get("/collaboration/lightbox-existence.json")},t}(),Collaboration.factory("lightboxService",["$q","$http",function(t,e){return new LightboxService(e)}])}.call(this),function(){this.LightboxServiceFake=function(){function t(t){this.promiseMaker=new PromiseMaker(t)}return t.prototype.existence=function(){return this.promiseMaker.fakeHttpPromise(function(){return function(t){return t({status:200,data:!1})}}())},t}()}.call(this),function(){var t;t=function(){function t(t){this.lightboxService=t,this.hasLightbox=!1,this.getLightbox()}return t.prototype.getLightbox=function(){if(!this.gettingLightbox)return this.gettingLightbox=!0,setTimeout(function(){return this.gettingLightbox=!1},5),this.lightboxService.existence().success(function(t){return function(e){return t.hasLightbox=e}}(this))},t}(),Collaboration.factory("lightboxStorage",["lightboxService",function(e){return new t(e)}])}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t,n){this.prefix=t,this.giLocalStorage=n,this.set=e(this.set,this),this.get=e(this.get,this)}return t.prototype.get=function(t){var e;e=this.giLocalStorage.getItem(this.prefix+"."+t);try{return JSON.parse(e)}catch(t){return e}},t.prototype.set=function(t,e){return this.giLocalStorage.setItem(this.prefix+"."+t,JSON.stringify(e))},t}(),Collaboration.factory("preferences",["giLocalStorage",function(e){return new t("collaboration.preferences",e)}])}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t){this.curationService=t,this.loadSets=e(this.loadSets,this),this.setList=[],this.pageSize=50,this.currentPageNumber=1,this.sortField="LastUpdatedDate",this.sortAscending=!1}return t.prototype.loadSets=function(t){return null==t&&(t={}),t.pageNumber&&(this.currentPageNumber=t.pageNumber),this.curationService.getSets({sortAscending:this.sortAscending,pageSize:this.pageSize,pageNumber:this.currentPageNumber,sortField:this.sortField,keywordIds:t.keywordIds||"",phrase:t.phrase||"",createdByName:t.createdByName||"",updatedByName:t.updatedByName||""}).success(function(t){return function(e){var n,r,o,i;if(e.sets){for(o=e.sets,n=0,r=o.length;n<r;n++)i=o[n],i.last_updated_date=moment(GiDateTime.makeUniversal(i.last_updated_date)).fromNow();t.setList=e.sets,null!=e.total_set_count&&(t.totalSetCount=e.total_set_count),t.filteredSetCount=e.filtered_set_count,null==t.filteredSetCount&&(t.filteredSetCount=t.totalSetCount)}return $(".set-list .content").removeClass("loading"),$(".set-list").inlineSpinner(!1)}}(this))},t.prototype.pageCount=function(){return this.filteredSetCount&&this.pageSize?(this.filteredSetCount/this.pageSize).ceil():0},t.prototype.pageNumber=function(t){if(t=parseInt(t,10)){if(t===this.currentPageNumber)return;if(!(t>0))return;if(!(t<=this.pageCount()))return;this.currentPageNumber=t}return this.currentPageNumber},t}(),Collaboration.factory("setManagementStorage",["curationService",function(e){return new t(e)}])}.call(this);var SafeProxy=SafeProxy||{};SafeProxy.safe=function(t){"use strict";if("function"!=typeof t)throw new SafeProxy.ArgumentError("argument must be a function");return function(){try{t.apply(this,arguments)}catch(t){var e=function(){throw t};setTimeout(e,1)}}},SafeProxy.ArgumentError=function(t){"use strict";this.message=t},SafeProxy.ArgumentError.prototype=new Error,function(){this.CollaborationTracking=function(){function t(){}var e,n,r,o,i,a,u,d,l;return i=function(t,e){var n,r;return null==e&&(e=[]),n=$.siteCatalyst.map(tracking_data),r=$.map(n,function(t,e){return e}).concat(e),window.s.linkTrackVars=r.join(","),window.s.events=t,window.s.linkTrackEvents=t},d=function(t,e){return $(document).off(t),$(document).on(t,SafeProxy.safe(e))},u=function(t,e){return d("favorites."+t,e)},l=function(t){var e;return e=SafeProxy.safe(t),$(document).one("omnitureReady",e)},a=function(){return $.tagManager.sites[tracking_data.site_nickname].mapPageName({page_name:tracking_data.page_name})},n=function(){var t,n;return u("openBoard",function(t){return function(){return"FavoritesBoard-Overlay"!==a()&&(t.rememberedPageName=a()),window.s.pageName=tracking_data.page_name="FavoritesBoard-Overlay",window.s.eVar58=t.rememberedPageName,window.s.events="event58",window.currentSite.isiStock&&(window.s.events+=",event120"),window.s.t()}}(this)),u("loadBoardPage",function(){return function(){return l(function(){return s.events="event74",s.t()})}}()),u("closeBoard",function(t){return function(){if(t.rememberedPageName)return i("event58",["eVar58"]),s.tl(!0,"o","FavoritesBoard-Close"),window.s.pageName=tracking_data.page_name=t.rememberedPageName,window.s.eVar58=null}}(this)),u("addToCart",function(t,e){return null==e&&(e={}),i("scAdd",["prop29","eVar29","prop52","eVar58"]),s.prop29=s.eVar29=e.assetId||null,s.prop52="favoritesPanel",s.products=e.productString||null,s.tl(!0,"o","FavoritesBoard-CartAdd")}),u("addToLightbox",function(){return i("",["eVar58"]),s.tl(!0,"o","FavoritesBoard-CopyToLightbox")}),u("joinBoard",function(){return i("event57"),s.tl(!0,"o","JoinBoard")}),u("switchBoard",function(){return i("",["eVar58"]),s.linkTrackVars="pageName",s.pageName=a(),s.tl(!0,"o","SwitchedBoard")}),u("addAssetComment",function(){return i("event107",["eVar58"]),s.tl(!0,"o","AddCommentAsset")}),u("addBoardComment",function(){return i("event109",["eVar58"]),s.tl(!0,"o","AddCommentBoard")}),u("copyToBoard",function(){return i("",["eVar58"]),s.tl(!0,"o","FavoritesBoard-CopyToBoard")}),u("copyToNewBoard",function(){return i("event66",["eVar58"]),s.tl(!0,"o","FavoritesBoard-CreateBoard-CopyToBoard")}),u("moveToBoard",function(){return i("",["eVar58"]),s.tl(!0,"o","FavoritesBoard-MoveToBoard")}),u("moveToNewBoard",function(){return i("event66",["eVar58"]),s.tl(!0,"o","FavoritesBoard-CreateBoard-MoveToBoard")}),u("downloadLinkClicked",function(e,r){return"ultrapack"===r.assetAgreement?n(r.assetAgreement):$.when(t()).done(function(t){if(!t.always_download_largest)return n(r.assetAgreement)})}),u("boardsMenuTitleClicked",function(){var t;return null!=(t=window.combinedGtmTracking)?t.gtmPushTracking("BoardsMenuTitle"):void 0}),u("boardsMenuViewAllClicked",function(){var t;return null!=(t=window.combinedGtmTracking)?t.gtmPushTracking("BoardsMenuViewAll"):void 0}),u("boardsMenuCreateClicked",function(){var t;return null!=(t=window.combinedGtmTracking)?t.gtmPushTracking("BoardsMenuCreate"):void 0}),d("toolbox.boardsToolboxOpen",function(){var t;return null!=(t=window.combinedGtmTracking)?t.gtmPushTracking("BoardsToolboxOpen"):void 0}),d("boardsToolboxSaveNewBoard",function(){var t;return null!=(t=window.combinedGtmTracking)?t.gtmPushTracking("BoardsToolboxSaveNew"):void 0}),d("toolbox.boardsToolboxSaveFromList",function(){var t;return null!=(t=window.combinedGtmTracking)?t.gtmPushTracking("BoardsToolboxSaveList"):void 0}),d("toolbox.boardsToolboxModalClickedClosed",function(){var t;return null!=(t=window.combinedGtmTracking)?t.gtmPushTracking("BoardsToolboxModalClose"):void 0}),t=function(){return $.ajax({type:"GET",url:"/downloads/preferences",headers:{Accept:"application/json"},success:function(t){return t}})},n=function(t){return i("event33",["eVar37","prop37","prop52"]),s.prop52="board|icon",s.eVar37=s.prop37=e(t),s.tl(!0,"o",t+" download from boards")},u("takeTour",function(){return i("",["eVar58"]),s.tl(!0,"o","FavoritesBoard-TakeTour")}),u("editBoardName",function(){return i("event114",["evar58"]),s.tl(!0,"o","FavoritesBoard-EditBoardName")}),u("search",function(){return i("event112",["evar58"]),s.tl(!0,"o","FavoritesBoard-Search")}),u("searchWithin",function(){return i("event123",["evar58"]),s.tl(!0,"o","FavoritesBoard-SearchWithin")}),d("bulkDownload.showBulkDownloadButton",function(){return l(function(){return s.events="event222",s.t()})}),d("bulkDownload.openBulkModalWithAssets",function(){return i("event223"),s.tl(!0,"o","FavoritesBoard-Bulkdownload-OpenModal")}),u("boardViewChanged",function(t,e){if("horiz-mosaic"===e.boardView&&(i("event122",["evar58"]),s.tl(!0,"o","FavoritesBoard-ViewType-Mosaic")),"grid"===e.boardView)return i("event122",["evar58"]),s.tl(!0,"o","FavoritesBoard-ViewType-Grid")}),d("bulkDownload.openOverMaxModal",function(){return i("event229"),s.tl(!0,"o","FavoritesBoard-Bulkdownload-OpenOverMaxModal")}),d("bulkDownload.videoSelected",function(){return i("event230"),s.tl(!0,"o","FavoritesBoard-Bulkdownload-VideoSelected")}),d("bulkDownload.signatureSelectedWithEssentialsSubscription",function(){return i("event231"),s.tl(!0,"o","FavoritesBoard-Bulkdownload-SignatureSelectedWithEssentialsSubscription")}),d("bulkDownload.missingSelected",function(){return i("event232"),s.tl(!0,"o","FavoritesBoard-Bulkdownload-PulledAssetSelected")}),d("bulkDownload.openModal",function(t,e){return i("event221",["eVar93"]),e.selectedUnlicensed?e.selectedLicensed?s.eVar93="SomeLicenses":s.eVar93="NoLicenses":e.selectedLicensed&&(s.eVar93="AllLicenses"),s.tl(!0,"o","FavoritesBoard-Bulkdownload-OpenModal")}),d("bulkDownload.insufficientSubscriptionDownloads",function(){return i("event233"),s.tl(!0,"o","FavoritesBoard-Bulkdownload-InsufficientSubscriptionDownloads")}),d("bulkDownload.noSubscriptionDownloadsRemaining",function(){return i("event234"),s.tl(!0,"o","FavoritesBoard-Bulkdownload-NoSubscriptionDownloadsRemaining")}),d("bulkDownload.download",function(t,e){var n;return i("event4",["eVar62"]),n=[],e.userDetailService.hasEssentialSubscription()?n.push("Essentials"):e.userDetailService.hasSignatureSubscription()&&n.push("Signature"),e.anyNonSubscriptionUsage&&n.push("Credits"),s.eVar62=n.join("|"),s.tl(!0,"o","BulkDownloadConfirm")})},r=function(){return n(),u("showDetails",function(){return i("event126",["eVar58"]),s.tl(!0,"o","FavoritesBoard-ShowDetails")}),u("hideDetails",function(){return i("event127",["eVar58"]),s.tl(!0,"o","FavoritesBoard-HideDetails")}),u("showCaptions",function(){return i("event151",["eVar58"]),s.tl(!0,"o","FavoritesBoard-ShowCaptions")}),u("printContactSheet",function(){return i("event123",["evar58"]),s.tl(!0,"o","FavoritesBoard-Print")}),u("removeAssetComment",function(){return i("event124",["evar58"]),s.tl(!0,"o","RemoveCommentAsset")}),u("removeBoardComment",function(){return i("event125",["evar58"]),s.tl(!0,"o","RemoveCommentBoard")}),u("nextAssetsPage",function(){return i("event128",["evar58"]),
s.tl(!0,"o","FavoritesBoard-NextAssetsPage")}),u("deleteBoard",function(){return i("event75",["eVar58"]),s.tl(!0,"o","FavoritesBoard-DeleteBoard")}),u("removeFromBoard",function(t,e){return i("event48",["prop29","eVar29","eVar58"]),s.prop29=s.eVar29=e.assetId,s.products=e.productString,s.tl(!0,"o","FavoritesBoard-Remove")}),u("removeFromPanel",function(t,e){return i("event48",["prop29","eVar29","eVar58"]),s.prop29=s.eVar29=e.assetId,s.products=e.productString,s.tl(!0,"o","FavoritesPanel-Remove")}),u("removeSelectedItems",function(t,e){return i("event48",["prop29","eVar29","eVar58"]),s.prop29=s.eVar29=(null!=e?e.assetId:void 0)||null,s.products=(null!=e?e.productString:void 0)||null,s.tl(!0,"o","FavoritesBoard-Remove")}),u("shareBoard",function(){var t;return s.prop52="favoritesBoard",t=["prop52"],s.eVar58&&t.push("eVar58"),i("event49",t),s.tl(!0,"o","FavoritesBoard-Share")}),u("carouselArrowClickRight",function(){var t;return i("",["prop66"]),t="Right",s.prop66="favoritesPanel|"+t,s.tl(!0,"o","favoritesPanel|"+t)}),u("carouselArrowClickLeft",function(){var t;return i("",["prop66"]),t="Left",s.prop66="favoritesPanel|"+t,s.tl(!0,"o","favoritesPanel|"+t)}),u("createBoardFromPicker",function(){return i("event66",["eVar58"]),s.tl(!0,"o","FavoritesBoard-CreateBoard-Overlay")})},o=function(){return n(),u("removeAssetComment",function(){return i("event108",["evar58"]),s.tl(!0,"o","RemoveCommentAsset")}),u("removeBoardComment",function(){return i("event110",["evar58"]),s.tl(!0,"o","RemoveCommentBoard")}),u("nextAssetsPage",function(){return i("event115",["evar58"]),s.tl(!0,"o","FavoritesBoard-NextAssetsPage")}),u("deleteBoard",function(){return i("event119",["eVar58"]),s.tl(!0,"o","FavoritesBoard-DeleteBoard")}),u("removeFromBoard",function(t,e){return i("event118",["prop29","eVar5","eVar29","eVar58"]),s.prop29=s.eVar29=e.assetId,s.products=e.productString,s.tl(!0,"o","FavoritesBoard-Remove")}),u("removeFromPanel",function(t,e){return i("event118",["prop29","eVar5","eVar29","eVar58"]),s.prop29=s.eVar29=e.assetId,s.products=e.productString,s.tl(!0,"o","FavoritesPanel-Remove")}),u("removeSelectedItems",function(t,e){return i("event118",["prop29","eVar29","eVar58"]),s.prop29=s.eVar29=(null!=e?e.assetId:void 0)||null,s.products=(null!=e?e.productString:void 0)||null,s.tl(!0,"o","FavoritesBoard-Remove")}),u("shareBoard",function(){var t;return s.prop52="favoritesBoard",t=["prop52"],s.eVar58&&t.push("eVar58"),i("event111",t),s.tl(!0,"o","FavoritesBoard-Share")}),u("showAssetModal",function(){return i("event128",["prop29","eVar29","eVar58"]),s.tl(!0,"o","FavoritesBoard-ShowAssetModal")}),u("carouselArrowClickRight",function(){var t;return i("event129",["eVar5"]),t="Right",s.prop66="favoritesPanel|"+t,s.tl(!0,"o","favoritesPanel|"+t)}),u("carouselArrowClickLeft",function(){var t;return i("event129",["eVar5"]),t="Left",s.prop66="favoritesPanel|"+t,s.tl(!0,"o","favoritesPanel|"+t)}),u("createBoardFromPicker",function(){return i("event6",["eVar58"]),s.tl(!0,"o","FavoritesBoard-CreateBoard-Overlay")})},e=function(t){switch(t){case"ultrapack":return"pack";case"PA":return"PA";case"EA":return"EZA";case"ED":return"EdSub";default:return""}},t.initTracking=function(){return window.currentSite.isiStock?o():r()},t}(),window.collaboration||(window.collaboration={}),window.collaboration.tracking={init:function(){return CollaborationTracking.initTracking()}},angular.module("giCollaboration").run(["$document","$window",function(){return window.collaboration.tracking.init()}])}.call(this),function(){this.UserDetailService=function(){function t(){}var e;return e={},t.prototype.setUser=function(t){return null==t&&(t={}),e=t,e.id||(e.id=0),e.authenticated||(e.authenticated=!1),e.remembered||(e.remembered=!1),e.anonymous||(e.anonymous=!0),e.has_subscription||(e.has_subscription=!1),e.has_essential_subscription||(e.has_essential_subscription=!1),e.has_signature_subscription||(e.has_signature_subscription=!1),e},t.prototype.authenticated=function(){return e.authenticated},t.prototype.hasEssentialSubscription=function(){return e.has_essential_subscription},t.prototype.hasSignatureSubscription=function(){return e.has_signature_subscription},t.prototype.getUser=function(){return e},t.prototype.getUserCreditSubsBalance=function(t){return t.get("/customer-credit-and-sub-counts/current")},t}(),Collaboration.factory("userDetailService",function(){return new UserDetailService})}.call(this),function(){Panel.controller("PanelController",["$scope","$rootScope","$window","$location","$q","boardStorage","eventBus",function(t,e,n,r,o,i,a){var s;return a.on("collaboration.addToCurrentBoard collaboration.boardMenuItemClicked",function(t){return function(){return t.openPanel()}}(this)),a.on("collaboration.lastBoardGone",function(t){return function(){return t.closeBoard()}}(this)),t.removePanelItem=function(){return function(e){var n;return n={assetId:e,productString:""},i.getProductString(e).then(function(t){return n.productString=t.data.products})["finally"](function(){return $(document).trigger("favorites.removeFromPanel",[n])}),t.removeItem(e)}}(),this.panelItems=[],a.on("collaboration.panelItemsLoaded",function(t){return function(e){var n,r,o,i,a;for(t.panelItems.length=0,i=e.panelItems,a=[],n=0,o=i.length;n<o;n++)r=i[n],r?a.push(t.panelItems.push(r)):a.push(void 0);return a}}(this)),this.closeBoard=function(){var n;return null!=(n=window.dataLayer)&&n.push({event:"closeBoard",boardName:i.board.name}),e.closeTransition("board"),a.trigger("favorites.closeBoard"),$("body").removeClass("board-overlay"),t.boardOpen=!1,!0},this.openBoard=function(){var n;return e.openTransition("board"),a.trigger("favorites.openBoard"),$("body").addClass("board-overlay"),t.editorialRfIsActive=visitorExperiences.isActive("editorialrf"),i.areBoardAssetsLoaded()||i.loadBoardAssets(),null!=(n=window.dataLayer)&&n.push({event:"openBoard",boardName:i.board.name}),t.boardOpen=!0},this.hasItems=function(){return this.totalBoardSize()>0},this.totalBoardSize=function(){return i.assetCount()},this.toggleOpenClose=function(e){return function(){return t.boardOpen?e.closeBoard():e.openBoard()}}(this),this.openPanel=function(t){return function(){return t.hideNotificationBanner(),i.boardListLoaded()&&i.boardList().length>0?t.openPanelEx():($(".nav-root .open_board a").inlineSpinner(),i.loadBoardList().then(function(){return t.openPanelEx(),$(".nav-root .open_board a").inlineSpinner(!1)}))}}(this),this.openPanelEx=function(e){return function(){var r,o;return r=[],void 0!==i.boardList()&&(r=function(){var t,e,n,r;for(n=i.boardList(),r=[],t=0,e=n.length;t<e;t++)o=n[t],"default"!==o.id&&r.push(o);return r}()),0===r.length?t.showCreateBoardModal():(n.tracking_data.favorites_open=!e.panelOpen(),t.openTransition("favorites"),$("#burger_toggle").prop("checked",!1))}}(this),this.closePanel=function(e){return function(){return e.showNotificationBanner(),t.boardOpen&&e.closeBoard(),n.tracking_data.favorites_open=!1,t.closeTransition("favorites"),$("#burger_toggle").prop("checked",!1)}}(this),this.togglePanel=function(t){return function(e){e.stopPropagation(),a.trigger("boardPanelOpened"),t.panelOpen()?t.closePanel():t.openPanel()}}(this),this.showNotificationBanner=function(){return function(){return $("div.notification-list").removeClass("hide-notification-banner")}}(),this.hideNotificationBanner=function(){return function(){return $("div.notification-list").addClass("hide-notification-banner")}}(),this.adpTargetWindow=function(){var t;if(null!=(t=n.UniAdp)?t.isPopup:void 0)return"_self"},this.panelOpen=function(){return t.isTransitionOpen("favorites")},this.boardPagePath=function(){return siteMap.cleanRelativePath("/collaboration/boards/"+t.boardId+"?panel")},s=function(e){return function(){var r,o,a;return t.boardOpen=!1,i.shouldFetchPanelItems=!0,o=n.location.hash.match(/^#\/?(%2[Ff])?board/),a=o||n.location.hash.match(/^#\/?(%2[Ff])?favorites/)||n.location.hash.match(/^#\/?(%2[Ff])?panel/),a&&e.openPanel(),o&&e.openBoard(),r=i.loadCurrentBoard(),null!=r?r.then(function(){if(o)return i.loadBoardAssets()}):void 0}}(this),s(),this}]),window.headerBoardIconHasUpdater=!0}.call(this),function(t,e){"use strict";function n(t){return e.lowercase(t.nodeName||t[0]&&t[0].nodeName)}function r(t,n,r){o.directive(t,["$parse","$swipe",function(o,i){return function(a,s,u){function d(t){if(!l)return!1;var e=Math.abs(t.y-l.y),r=(t.x-l.x)*n;return c&&e<75&&r>0&&r>30&&e/r<.3}var l,c,f=o(u[t]),h=["touch"];e.isDefined(u.ngSwipeDisableMouse)||h.push("mouse"),i.bind(s,{start:function(t){l=t,c=!0},cancel:function(){c=!1},end:function(t,e){d(t)&&a.$apply(function(){s.triggerHandler(r),f(a,{$event:e})})}},h)}}])}var o=e.module("ngTouch",[]);o.factory("$swipe",[function(){function t(t){var e=t.originalEvent||t,n=e.touches&&e.touches.length?e.touches:[e],r=e.changedTouches&&e.changedTouches[0]||n[0];return{x:r.clientX,y:r.clientY}}function n(t,n){var r=[];return e.forEach(t,function(t){var e=o[t][n];e&&r.push(e)}),r.join(" ")}var r=10,o={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"}};return{bind:function(e,o,i){var a,s,u,d,l=!1;i=i||["mouse","touch"],e.on(n(i,"start"),function(e){u=t(e),l=!0,a=0,s=0,d=u,o.start&&o.start(u,e)});var c=n(i,"cancel");c&&e.on(c,function(t){l=!1,o.cancel&&o.cancel(t)}),e.on(n(i,"move"),function(e){if(l&&u){var n=t(e);if(a+=Math.abs(n.x-d.x),s+=Math.abs(n.y-d.y),d=n,!(a<r&&s<r))return s>a?(l=!1,void(o.cancel&&o.cancel(e))):(e.preventDefault(),void(o.move&&o.move(n,e)))}}),e.on(n(i,"end"),function(e){l&&(l=!1,o.end&&o.end(t(e),e))})}}}]),o.config(["$provide",function(t){t.decorator("ngClickDirective",["$delegate",function(t){return t.shift(),t}])}]),o.directive("ngClick",["$parse","$timeout","$rootElement",function(t,r,o){function i(t,e,n,r){return Math.abs(t-n)<g&&Math.abs(e-r)<g}function a(t,e,n){for(var r=0;r<t.length;r+=2)if(i(t[r],t[r+1],e,n))return t.splice(r,r+2),!0;return!1}function s(t){if(!(Date.now()-l>m)){var e=t.touches&&t.touches.length?t.touches:[t],r=e[0].clientX,o=e[0].clientY;r<1&&o<1||f&&f[0]===r&&f[1]===o||(f&&(f=null),"label"===n(t.target)&&(f=[r,o]),a(c,r,o)||(t.stopPropagation(),t.preventDefault(),t.target&&t.target.blur&&t.target.blur()))}}function u(t){var e=t.touches&&t.touches.length?t.touches:[t],n=e[0].clientX,o=e[0].clientY;c.push(n,o),r(function(){for(var t=0;t<c.length;t+=2)if(c[t]==n&&c[t+1]==o)return void c.splice(t,t+2)},m,!1)}function d(t,e){c||(o[0].addEventListener("click",s,!0),o[0].addEventListener("touchstart",u,!0),c=[]),l=Date.now(),a(c,t,e)}var l,c,f,h=750,p=12,m=2500,g=25,v="ng-click-active";return function(n,r,o){function i(){f=!1,r.removeClass(v)}var a,s,u,l,c=t(o.ngClick),f=!1;r.on("touchstart",function(t){f=!0,a=t.target?t.target:t.srcElement,3==a.nodeType&&(a=a.parentNode),r.addClass(v),s=Date.now();var e=t.originalEvent||t,n=e.touches&&e.touches.length?e.touches:[e],o=n[0];u=o.clientX,l=o.clientY}),r.on("touchcancel",function(){i()}),r.on("touchend",function(t){var n=Date.now()-s,c=t.originalEvent||t,m=c.changedTouches&&c.changedTouches.length?c.changedTouches:c.touches&&c.touches.length?c.touches:[c],g=m[0],v=g.clientX,_=g.clientY,y=Math.sqrt(Math.pow(v-u,2)+Math.pow(_-l,2));f&&n<h&&y<p&&(d(v,_),a&&a.blur(),e.isDefined(o.disabled)&&o.disabled!==!1||r.triggerHandler("click",[t])),i()}),r.onclick=function(){},r.on("click",function(t,e){n.$apply(function(){c(n,{$event:e||t})})}),r.on("mousedown",function(){r.addClass(v)}),r.on("mousemove mouseup",function(){r.removeClass(v)})}}]),r("ngSwipeLeft",-1,"swipeleft"),r("ngSwipeRight",1,"swiperight")}(window,window.angular);