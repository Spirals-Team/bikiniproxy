webpackJsonp([54,1,3,16,29,34,43,46,47,48,50,83],[function(e,t,i){"use strict";(function(e){function i(){return C}function o(){return x}function n(e){e=Math.max(_.ERROR,Math.min(_.DEBUG,e)),C=e,u()}function r(e,t){var i,o=0,n=0;for(i=e.length-1;i>=1&&(o+=8*(1+encodeURIComponent(e[i]).length),!(i-1>0&&(n=8*(1+encodeURIComponent(e[i-1]).length),o+n>t)));i--);return e.slice(i)}function s(e,t,i,o,n){var r={id:m,message:t,subSystemId:o,timestamp:+e};m+=1,i.unshift(r),void 0!==n&&i.length>n&&(i.length=n)}function a(e){var t,i=b.reduce(function(e,t){return e.concat(t)},[]);return i.sort(function(e,t){return e.id-t.id}),"number"==typeof e&&(i=i.slice(-e)),t=i.map(function(e){return new Date(e.timestamp).toISOString()+":"+e.subSystemId+":"+e.message.replace(/"/g,"'")}),r(t,g)}function l(e,t,i,n){var r,a;if((t!==w||n.id!==T)&&(r=new Date,e<=_.NORMAL&&s(r,t,i,n.id,n.maxCount),e<=C&&(!n.highRate||o())&&(!S||n.id.match(S)))){switch(a=r.toISOString()+":"+n.id+":"+t,e){case _.DEBUG:console.debug(a);break;case _.INFO:case _.NORMAL:n.color?console.log("%c"+a,"color: "+n.color):console.log(a);break;case _.WARNING:console.warn(a);break;case _.ERROR:console.error(a)}w=t,T=n.id,P&&clearTimeout(P),P=setTimeout(function(){w=null,T=null,P=NaN},1e3)}}function c(e,t){function i(e){return function(t){return l(e,t,o,n)}}var o,n;return void 0===t&&(t={}),o=[],b.push(o),n=Object.assign(t,{id:e}),{logDebug:i(_.DEBUG),logError:i(_.ERROR),logInfo:i(_.INFO),logNormal:i(_.NORMAL),logWarn:i(_.WARNING)}}function h(){x=!!p&&"true"===localStorage.getItem(y);var e=parseInt(p?localStorage.getItem(v)||"":"");Number.isNaN(e)&&(e=_.WARNING),n(e),E.logNormal("Init with settings - level: "+C+", high-rate: "+x)}function u(){try{p&&(localStorage.setItem(y,x+""),localStorage.setItem(v,C+""))}catch(e){E.logWarn("Cannot save logger state (level: "+C+", high-rate: "+x+") to localStorage: "+e.message)}}var d,p,f,_,m,g,v,y,b,S,w,T,P,C,x,E;Object.defineProperty(t,"__esModule",{value:!0}),d="undefined"!=typeof window?window:e,p=!1;try{localStorage.getItem(""),p=!0}catch(e){}f="undefined"!=typeof TradingView?TradingView:{},function(e){e[e.ERROR=1]="ERROR",e[e.WARNING=2]="WARNING",e[e.INFO=3]="INFO",e[e.NORMAL=4]="NORMAL",e[e.DEBUG=5]="DEBUG"}(_=t.LOGLEVEL||(t.LOGLEVEL={})),m=0,g=75497472,v="tv.logger.loglevel",y="tv.logger.logHighRate",b=[],S=null,w=null,T=null,P=NaN,C=_.WARNING,x=!1,t.getLogLevel=i,t.isHighRateEnabled=o,t.setLogLevel=n,t.getLogHistory=a,t.getLogger=c,E=c("logger"),t.loggingOn=d.lon=f.loggingOn=function(e,t){n(_.DEBUG),E.logNormal("Debug logging enabled"),x=!!e,S=t||null,u()},t.loggingNormal=f.loggingNormal=function(){n(_.NORMAL),E.logNormal("Logging set to normal level")},t.loggingOff=d.loff=function(){n(_.INFO),E.logInfo("Debug logging disabled")},h()}).call(t,i(58))},function(e,t,i){"use strict";(function(e){function o(e,t){a.call(this),this._linetool=e,this._pointindex=t,this._model=e._model,this._text="",this._coordinate=0,this._background="#5592C9",this._activeBackground="#0F6DBF",this._borderColor="#2E84A6",this._color="white",this._visible=!1,
this._invalidated=!0,this._renderer=new l}function n(e,t){var i,r,s;if(c.call(this),this._model=e,this._properties=t,this._pointAdded=new m,this._pointChanged=new m,this._onRestoringFactoryDefaults=new m,this._onTemplateApplying=new m,this._onTemplateApplied=new m,t.visible&&t.frozen||this._properties.merge(defaults("linetool")),i=defaults("linetoolvisibilities"),t.intervalsVisibilities)for(r in i.intervalsVisibilities)this._properties.intervalsVisibilities[r]||this._properties.intervalsVisibilities.addProperty(r,i.intervalsVisibilities[r]);else this._properties.merge(i);if(this._paneViews=[],this._points=[],this._fixedPoints=[],this._timePoint=[],this._currentPointsetId=null,this._properties.symbol||this._properties.merge({symbol:e.mainSeries().symbol()}),this._properties.interval||this._properties.merge({interval:e.mainSeries().interval()}),this._properties.addExclusion&&(this._properties.addExclusion("symbol"),this._properties.addExclusion("symbolInfo"),this._properties.addExclusion("points"),this._properties.addExclusion("interval"),this._properties.addExclusion("visible"),this._properties.addExclusion("lastUpdateTime")),this.calcIsActualSymbol(),this._properties.intervalsVisibilities.listeners().subscribe(this,n.prototype.calcIsActualSymbol),this._properties.listeners().subscribe(this,n.prototype.propertiesChanged),this._createPointsProperties(),"_tooltipFieldsHash"in this&&!this.hasOwnProperty("_tooltipFieldsHash")&&(this._tooltipFieldsHash=$.extend(!0,{},this._tooltipFieldsHash)),this.m_priceAxisViews=[],this.m_timeAxisViews=[],this.pointsCount()>0)for(s=0;s<this.pointsCount();s++)this.m_priceAxisViews.push(this.createPriceAxisView(s)),this.m_timeAxisViews.push(new o(this,s));this._properties.visible.listeners().subscribe(this,function(e){e.value()||this._model.selectedSource()!==this||this._model.setSelectedSource(null)}),this.customization=this.customization||{forcePriceAxisLabel:!1,disableSelection:!1,disableErasing:!1,disableSave:!1,showInObjectsTree:!0},this._properties.lastUpdateTime||this._properties.addProperty("lastUpdateTime",0),this._syncStateExclusions=[]}var r=i(8).Point,s=i(278).LineToolPriceAxisView,a=i(279).TimeAxisView,l=i(280),c=i(52).DataSource,h=i(110),u=i(130).Interval,d=i(184).DateTimeFormatter,p=i(677),f=i(40),_=i(0).getLogger("Chart.LineDataSource"),m=i(4),g=i(2).propertyPages,v=i(554).lineToolsInfo,y=i(43);inherit(o,a),o.prototype.setActive=function(e){this._active=e},o.prototype.update=function(){this._invalidated=!0},o.prototype.updateImpl=function(){var e,t,i;this._visible=!1,this._model.timeScale().isEmpty()||(e=this._linetool.axisPoints(),e.length<=this._pointindex||this._linetool===this._model.selectedSource()&&(this._text="",t=e[this._pointindex].index,this._coordinate=this._model.timeScale().indexToCoordinate(t),i=this._model.timeScale().indexToUserTime(t),i&&(this._text=new d(this._model.mainSeries().isDWM()).format(i)),this._visible=!0,this._invalidated=!1))},o.prototype.renderer=function(){this._invalidated&&(this.updateImpl(),this._invalidated=!1);var e={text:this._text,
coordinate:this._coordinate,color:this._color,background:this._active?this._activeBackground:this._background,borderColor:this._borderColor,visible:this._visible};return this._renderer.setData(e),this._renderer},inherit(n,c),n.prototype.pointAdded=function(){return this._pointAdded},n.prototype.pointChanged=function(){return this._pointChanged},n.PointPriceProperty=function(t,i){e.call(this),this._lineSource=t,this._pointIndex=i,t.pointAdded().subscribe(this,function(e){this._pointIndex===e&&this._listeners.fire(this)}),t.pointChanged().subscribe(this,function(e){this._pointIndex===e&&this._listeners.fire(this)})},inherit(n.PointPriceProperty,e),n.prototype.enableCurrentIntervalVisibility=function(){var e,t,i,o,n,r,s,a=u.parse(this._model.mainSeries().interval());a.kind()===u.SECONDS&&(a.multiplier()<60?(this.properties().intervalsVisibilities.seconds.setValue(!0),e=Math.min(this.properties().intervalsVisibilities.secondsFrom.value(),a.multiplier()),this.properties().intervalsVisibilities.secondsFrom.setValue(e),t=Math.max(this.properties().intervalsVisibilities.secondsTo.value(),a.multiplier()),this.properties().intervalsVisibilities.secondsTo.setValue(t)):a=new u(u.MINUTES,a.multiplier()/60)),a.kind()===u.MINUTES&&(a.multiplier()<60?(this.properties().intervalsVisibilities.minutes.setValue(!0),e=Math.min(this.properties().intervalsVisibilities.minutesFrom.value(),a.multiplier()),this.properties().intervalsVisibilities.minutesFrom.setValue(e),t=Math.max(this.properties().intervalsVisibilities.minutesTo.value(),a.multiplier()),this.properties().intervalsVisibilities.minutesTo.setValue(t)):(i=Math.floor(a.multiplier()/60),this.properties().intervalsVisibilities.hours.setValue(!0),o=Math.min(this.properties().intervalsVisibilities.hoursFrom.value(),i),this.properties().intervalsVisibilities.hoursFrom.setValue(o),n=Math.max(this.properties().intervalsVisibilities.hoursTo.value(),i),this.properties().intervalsVisibilities.hoursTo.setValue(n))),a.kind()===u.DAYS&&(this.properties().intervalsVisibilities.days.setValue(!0),r=Math.min(this.properties().intervalsVisibilities.daysFrom.value(),a.multiplier()),this.properties().intervalsVisibilities.daysFrom.setValue(r),s=Math.max(this.properties().intervalsVisibilities.daysTo.value(),a.multiplier()),this.properties().intervalsVisibilities.daysTo.setValue(s)),a.kind()===u.WEEKS&&this.properties().intervalsVisibilities.weeks.setValue(!0),a.kind()===u.MONTHS&&this.properties().intervalsVisibilities.months.setValue(!0)},n.prototype.getType=function(){return TradingView.className(this.constructor)},n.prototype.getConstructor=function(){return this._constructor||null},n.prototype.isActualSymbol=function(){return this._isActualSymbol},n.prototype.isActualInterval=function(){return this._isActualInterval},n.prototype.isSavedInChart=function(e){return!this.customization.disableSave},n.prototype.setSavingInChartEnabled=function(e){this.customization.disableSave=!e},n.prototype.showInObjectTree=function(){return this.customization.showInObjectsTree},
n.prototype.setShowInObjectsTreeEnabled=function(e){this.customization.showInObjectsTree=e},n.prototype.isSelectionEnabled=function(){return!this.customization.disableSelection},n.prototype.setSelectionEnabled=function(e){this.customization.disableSelection=!e},n.prototype.visibilityKeyByInterval=function(e){var t,i=u.parse(e);return n.IntervalsVisibilities.forEach(function(e){e.kind===i.kind()&&e.from<=i.multiplier()&&e.to>=i.multiplier()&&(t=e.key)}),t},n.prototype.calcIsActualSymbol=function(){var e,t=this._properties.symbol,i=this._model.mainSeries(),o=t.value();this._isActualSymbol=i.symbolSameAsCurrent(o),this._isActualSymbol&&(e=i.symbol(),o!==e&&(_.logWarn('Possible drawing "migrating" detected from "'+o+'" to "'+e+'"'),_.logWarn("Series symbolInfo: "+JSON.stringify(i.symbolInfo())),_.logWarn(Error().stack)),t.setValue(e)),this.calcIsActualInterval()},n.prototype.calcIsActualInterval=function(){var e,t,i,o,n=this._properties,r=this._model.mainSeries(),s=u.parse(r.interval()),a=n.intervalsVisibilities;this._isActualInterval=!1,s.kind()===u.SECONDS&&(e=a.seconds.value(),t=a.secondsFrom.value(),i=a.secondsTo.value(),this._isActualInterval=e&&s.multiplier()>=t&&s.multiplier()<=i),s.kind()===u.MINUTES&&s.multiplier()<60&&(e=a.minutes.value(),t=a.minutesFrom.value(),i=a.minutesTo.value(),this._isActualInterval=e&&s.multiplier()>=t&&s.multiplier()<=i),s.kind()===u.MINUTES&&s.multiplier()>=60&&(o=Math.floor(s.multiplier()/60),e=a.hours.value(),t=a.hoursFrom.value(),i=a.hoursTo.value(),this._isActualInterval=e&&o>=t&&o<=i),s.kind()===u.DAYS&&(e=a.days.value(),t=a.daysFrom.value(),i=a.daysTo.value(),this._isActualInterval=e&&s.multiplier()>=t&&s.multiplier()<=i),s.kind()===u.WEEKS&&(this._isActualInterval=a.weeks.value()),s.kind()===u.MONTHS&&(this._isActualInterval=a.months.value()),this._isActualInterval||this._model.selectedSource()!==this||this._model.setSelectedSource(null)},n.PointPriceProperty.prototype.value=function(){var e=this._lineSource.points()[this._pointIndex].price,t=this._lineSource.ownerSource().formatter(),i=t.parse(t.format(e));return i.price?i.price:i.value},n.PointPriceProperty.prototype.setValue=function(e){var t,i,o=this._lineSource.points()[this._pointIndex];o.price=parseFloat(e),t=this._lineSource.priceScale(),t.isPercent()&&(i=this._lineSource.ownerSource().firstValue(),o.price=t.priceRange().convertToPercent(o.price,i)),this._lineSource.setPoint(this._pointIndex,o),this._lineSource._model.updateSource(this._lineSource),this._listeners.fire(this),this._lineSource.endChanging(!0),this._lineSource._syncMultichartState(),this._lineSource._properties.lastUpdateTime.setValue((new Date).valueOf())},n.PointIndexProperty=function(t,i){e.call(this),this._lineSource=t,this._pointIndex=i},inherit(n.PointIndexProperty,e),n.PointIndexProperty.prototype.value=function(){return this._lineSource.points()[this._pointIndex].index},n.PointIndexProperty.prototype.setValue=function(e){var t,i,o=this._lineSource.points()[this._pointIndex];o.index=e,t=this._lineSource.priceScale(),
t.isPercent()&&(i=this._lineSource.ownerSource().firstValue(),o.price=t.priceRange().convertToPercent(o.price,i)),this._lineSource.setPoint(this._pointIndex,o),this._lineSource._model.updateSource(this._lineSource),this._listeners.fire(this),this._lineSource.endChanging(!0),this._lineSource._syncMultichartState(),this._lineSource._properties.lastUpdateTime.setValue((new Date).valueOf())},n.prototype._syncMultichartState=function(){var e={points:this._timePoint,interval:this._model.mainSeries().interval()};this.linkKey&&!this.properties().singleChartOnly&&h.finishChangingLineTool({model:this._model,linkKey:this.linkKey,symbol:this._model.mainSeries().symbol(),finalState:e})},n.prototype._createPointProperty=function(e){var t,i=this._properties.points;i.addProperty(e),t=i[e],t.addChild("price",new n.PointPriceProperty(this,e)),t.addChild("bar",new n.PointIndexProperty(this,e))},n.prototype._createPointsProperties=function(){this._properties.addProperty("points");for(var e=0;e<this.pointsCount();e++)this._createPointProperty(e)},n.prototype.priceScale=function(){return this._ownerSource?this._ownerSource.m_priceScale:null},n.prototype.symbol=function(){return this._properties.symbol.value()},n.prototype.properties=function(){return this._properties},n.prototype.isSavedInStudyTemplates=function(){return!1},n.prototype.state=function(e){var t=TradingView.className(this.constructor),i={type:t,id:this.id(),state:this.properties().state(),points:this._timePoint,zorder:this.zorder(),linkKey:this.linkKey};return i.state._isActualInterval=this.isActualInterval(),delete i.state.points,e&&(i.indexes=this._points),this.ownerSource()&&(i.ownerSource=this.ownerSource().id()),this.isFixed()&&(i.positionPercents=this._positionPercents||this.calcPositionPercents()),"version"in this&&1!==this.version&&(i.version=this.version),this.hasAlert.value()&&(i.alertId=this._alertId),i},n.prototype.template=function(){var e=this.properties().state();return delete e.points,delete e.symbol,delete e.symbolInfo,e},n.prototype.applyTemplate=function(e){delete e.symbolInfo,this._onTemplateApplying.fire(e);var t=this.properties();t.merge(e),t.saveDefaults(),this.propertiesChanged(),this.calcIsActualSymbol(),this.updateAllViews(),this.model().invalidate(new f(f.LIGHT_UPDATE)),this._onTemplateApplied.fire()},n.prototype.restoreFactoryDefaults=function(){this.properties().restoreFactoryDefaults(),this._onRestoringFactoryDefaults.fire(),this.model().updateSource(this)},n.prototype.clearData=function(){this._points=[]},n.prototype.currentPointsetId=function(){return"pointset_"+this._currentPointsetId},n.prototype.stop=function(){this.clearServerPoints(),this.hasAlert.value()&&TradingView.alertsDispatcher&&TradingView.alertsDispatcher.deleteAlert(this._alertId)},n.prototype.isStarted=function(){return null!==this._currentPointsetId},n.prototype.restart=function(){this.isFixed()||(this._currentPointsetId=null,this.createServerPoints())},n.prototype.tryCreateServerPoints=function(){this.isFixed()||null===this._currentPointsetId&&this.createServerPoints()},
n.prototype.normalizePoint=function(e){var t=this._model.timeScale().normalizeBarIndex(e.index);return t.price=e.price,t},n.prototype.normalizePoints=function(){var e,t;for(this._timePoint=[],e=0;e<this._points.length;e++){if(t=this._model.timeScale().normalizeBarIndex(this._points[e].index),!t.time_t){this._timePoint=[];break}t.price=this._points[e].price,this._timePoint.push(t)}},n.prototype.denormalizeTimePoints=function(){var e,t,i=[];for(e=0;e<this._timePoint.length;e++){if(void 0===(t=this._model.timeScale().denormalizeTimePoint(this._timePoint[e]))){i=[];break}i.push({index:t,price:this._timePoint[e].price})}i.length>0&&(this._points=i)},n.prototype.restorePoints=function(e,t,i){this._timePoint=e,this._points=t,i||this.denormalizeTimePoints()},n.prototype.restoreExternalPoints=function(e){if(this.properties().interval.setValue(e.interval),this._timePoint=e.points,this.denormalizeTimePoints(),!this.isActualSymbol())return void this.clearServerPoints();this.createServerPoints()},n.prototype.restorePositionPercents=function(e){this._positionPercents=e},n.prototype.updateAllViewsAndRedraw=function(){this.updateAllViews(),this._model.updateSource(this)},n.prototype.propertiesChanged=function(){if(this.calcIsActualInterval(),this.updateAllViewsAndRedraw(),this.linkKey){var e=this.properties().state(this._syncStateExclusions);delete e.interval,h.changeLineStyle({linkKey:this.linkKey,state:e,model:this._model})}},n.prototype.points=function(){var e,t,i=[];for(e=0;e<this._points.length;e++)t=this._points[e],i.push({index:t.index,price:t.price,time:t.time});return this._lastPoint&&i.push({index:this._lastPoint.index,price:this._lastPoint.price,time:this._lastPoint.time}),this._currentMovingPoint&&this._startMovingPoint&&this.correctPoints(i),i},n.prototype.axisPoints=function(){return this.points()},n.prototype.fixedPoints=function(){var e,t,i,o,n=[];if(this._positionPercents&&!this.priceScale().isEmpty())for(e=0;e<this._positionPercents.length;e++)t=this._positionPercents[e],i=this._model.timeScale().width()*t.x,o=this.priceScale().height()*t.y,n.push(new r(i,o));else for(e=0;e<this._fixedPoints.length;e++)n.push(this._fixedPoints[e].clone());return this._lastPoint&&n.push(this._lastPoint.clone()),this._currentMovingPoint&&this._startMovingPoint&&this.correctFixedPoints(n),n},n.prototype._convertPriceFromPercentIfNeeded=function(e){var t,i=this.priceScale();i.isPercent()&&(t=this.ownerSource().firstValue(),e.price=i.priceRange().convertFromPercent(e.price,t))},n.prototype._convertPriceToPercentIfNeeded=function(e){var t,i=this.priceScale();i.isPercent()&&(t=this.ownerSource().firstValue(),e.price=i.priceRange().convertToPercent(e.price,t))},n.prototype._preparePoint=function(e,t){var i=e;return t&&t.shift&&this.points().length>=2&&this._properties.snapTo45Degrees&&this._snapPoint45Degree(i,this.points()[this.points().length-2]),this._convertPriceFromPercentIfNeeded(i),i},n.prototype.addPoint=function(e,t,i){var o=this._preparePoint(e,t);return this._addPointIntenal(o,t,i)},n.prototype._addPointIntenal=function(e,t,i){
this._points.push(e);var o=this._points.length===this.pointsCount();return o?(this._lastPoint=null,i||(this.normalizePoints(),this.createServerPoints())):this._lastPoint=e,this._pointAdded.fire(this._points.length-1),o},n.prototype.addFixedPoint=function(e){this._fixedPoints.push(e);var t=this._fixedPoints.length===this.pointsCount();return t&&this.calcPositionPercents(),t},n.prototype.calcPositionPercents=function(){var e,t,i,o;if(!this.priceScale()||this.priceScale().isEmpty())return[];for(this._positionPercents=[],e=0;e<this._fixedPoints.length;e++)t=this._fixedPoints[0],i=t.x/this._model.timeScale().width(),o=t.y/this.priceScale().height(),this._positionPercents.push({x:i,y:o});return this._positionPercents},n.prototype.calcMiddlePoint=function(e,t){return new r((e.x+t.x)/2,(e.y+t.y)/2)},n.prototype.restoreFixedPoints=function(){this._fixedPoints=this.fixedPoints()},n.prototype.onData=function(e){var t,i,o,n,r,s;if(e.params.customId===this.currentPointsetId()&&0!==e.params.plots.length){for(t=0;t<e.params.plots.length;t++)i=e.params.plots[t],o=this._timePoint[i.index],n=i.value[0],r=new Date(1e3*i.value[1]),s={index:n,time:r,price:o.price},this._points.length<=i.index?(this._points.push(s),this._pointAdded.fire(this._points.length-1)):(this._points[i.index]=s,this._pointChanged.fire(i.index));this.checkAlert&&this.checkAlert(),this.updateAllViewsAndRedraw()}},n.prototype.correctPricesToPercents=function(){var e,t,i=this.priceScale(),o=this.ownerSource().firstValue();for(e=0;e<this._points.length;e++)t=this._points[e],t.price=i.priceRange().convertFromPercent(t.price,o),this._pointChanged.fire(e)},n.prototype.startChanging=function(e,t){e<this.m_priceAxisViews.length&&this.m_priceAxisViews[e].setActive(!0),e<this.m_timeAxisViews.length&&this.m_timeAxisViews[e].setActive(!0),this._properties.lastUpdateTime.setValue((new Date).valueOf())},n.prototype.setPoint=function(e,t,i){if(i&&i.shift&&this._properties.snapTo45Degrees){var o=0===e?1:e-1;this._snapPoint45Degree(t,this.points()[o])}this._convertPriceFromPercentIfNeeded(t),this._points[e]=t,this._pointChanged.fire(e),this.normalizePoints()},n.prototype.startMoving=function(e){this.isFixed()&&this.restoreFixedPoints(),this._convertPriceFromPercentIfNeeded(e),this._startMovingPoint=e,this._properties.lastUpdateTime.setValue((new Date).valueOf())},n.prototype.move=function(e){this._convertPriceFromPercentIfNeeded(e),this._currentMovingPoint=e,this.updateAllViews()},n.prototype.correctPoints=function(e){var t,i,o=this._currentMovingPoint.index-this._startMovingPoint.index,n=this._currentMovingPoint.price-this._startMovingPoint.price;if(0===o&&0===n)return!1;for(t=0;t<e.length;t++)i=e[t],i.index+=o,i.price+=n,e[t]=i;return!0},n.prototype.correctFixedPoints=function(e){var t,i=this._currentMovingPoint.subtract(this._startMovingPoint);for(t=0;t<e.length;t++)e[t]=e[t].add(i)},n.prototype.endMoving=function(e){var t,i,o;if(this._properties.interval.setValue(this._model.mainSeries().interval()),t=!1,i=!1,this._currentMovingPoint&&this._startMovingPoint){
if(t=this._currentMovingPoint.index!==this._startMovingPoint.index,i=this._currentMovingPoint.price!==this._startMovingPoint.price,this.isFixed())this.correctFixedPoints(this._fixedPoints);else if(this.correctPoints(this._points))for(o=0;o<this._points.length;o++)this._pointChanged.fire(o);this._startMovingPoint=null,this._currentMovingPoint=null}if(this.isFixed())return this.calcPositionPercents(),void this.updateAllViews();this.normalizePoints(),this.updateAllViews(),t&&!e&&this.createServerPoints(),(i||t)&&this.synchronizeAlert(!this._alertUndoMode)},n.prototype.endChanging=function(e,t){var i;for(this._properties.interval.setValue(this._model.mainSeries().interval()),t||(this.normalizePoints(),this.createServerPoints()),i=0;i<this.m_priceAxisViews.length;i++)this.m_priceAxisViews[i].setActive(!1);for(i=0;i<this.m_timeAxisViews.length;i++)this.m_timeAxisViews[i].setActive(!1);this.synchronizeAlert(!e)},n.prototype.paneViews=function(e){var t,i;if(this.isSourceHidden())return null;for(t=[],i=this._paneViews.length-1;i>=0;--i)t.push(this._paneViews[i]);return t},n.prototype._setPaneViews=function(e){this._paneViews=e,this._model.invalidate(new f(f.LIGHT_UPDATE))},n.prototype.dataWindowView=function(){return null},n.prototype.statusView=function(){return null},n.prototype.isSourceHidden=function(){return!this._properties.visible.value()||h.hideAllDrawings().value()&&this.canBeHidden()||!this._isActualInterval||!this._isActualSymbol},n.prototype.priceAxisViews=function(e,t){var i,o,n;return this.isSourceHidden()?null:-1!==e.dataSources().indexOf(this)&&t===this.priceScale()?this._model.lineBeingEdited()===this?(i=this._model.linePointBeingEdited(),i<this.m_priceAxisViews.length?(o=this.m_priceAxisViews.slice(),n=o[i],o.splice(i,1),o.push(n),o):this.m_priceAxisViews):this.m_priceAxisViews:null},n.prototype.timeAxisViews=function(){var e,t,i;return this.isSourceHidden()?null:this._model.lineBeingEdited()===this?(e=this._model.linePointBeingEdited(),e<this.m_timeAxisViews.length?(t=this.m_timeAxisViews.slice(),i=t[e],t.splice(e,1),t.push(i),t):this.m_timeAxisViews):this.m_timeAxisViews},n.prototype.updateAllViews=function(){var e,t,i;if(!this._isActualSymbol)return null;if(!this._properties.visible.value())return null;if(null!==(e=this.paneViews()))for(t=e,i=0;i<t.length;i++)t[i].update();for(t=this.m_priceAxisViews,i=0;i<t.length;i++)t[i].update();for(t=this.m_timeAxisViews,i=0;i<t.length;i++)t[i].update()},n.prototype.setLastPoint=function(e,t){this._lastPoint=this._preparePoint(e,t),this.updateAllViews()},n.prototype.setLastFixedPoint=function(e){this._lastFixedPoint=e,this.updateAllViews()},n.prototype.title=function(){return"Line Tool"},n._pointSetId=1,n.prototype.start=function(){this.createServerPoints()},n.prototype.createServerPoints=function(){var e,t,i,o,r,s;if(!this._recursiveGuard&&this._isActualSymbol&&this._model.chartApi().connected()&&(this.clearServerPoints(),!this._model.timeScale().isEmpty()&&(0===this._timePoint.length&&this.normalizePoints(),0!==this._timePoint.length))){
for(this._currentPointsetId=++n._pointSetId,e=this._model.mainSeries().symbolId(),t=this.properties().interval.value(),i=[],o=0;o<this._timePoint.length;o++)r=this._timePoint[o],i.push([r.time_t,r.offset]);s=this,this._model.chartApi().createPointset(this.currentPointsetId(),"turnaround",e,t,i,function(e){s.onData(e)})}},n.prototype.clearServerPoints=function(){null!==this._currentPointsetId&&(this._model.chartApi().removePointset(this.currentPointsetId()),this._currentPointsetId=null)},n.prototype.isBeingEdited=function(){return this===this._model.lineBeingEdited()||this===this._model.sourceBeingMoved},n.prototype.isFixed=function(){return this.properties().locked&&this.properties().locked.value()},n.prototype.isLocked=n.prototype.isFrozen=function(){return this.properties().frozen&&this.properties().frozen.value()},n.prototype._tooltipFieldsHash={},n.prototype._tooltipFieldsOrder=["time","price","index","time0","price0","time1","price1","time2","price2","time3","price3","time4","price4","distance","term","pointsPerBar"],n.prototype._tooltipFieldsOrdered=null,n.prototype._formatTooltip=function(){return null===this._tooltipFieldsOrdered&&(this._tooltipFieldsOrdered=new p(this._tooltipFieldsHash,p.byOrder(this._tooltipFieldsOrder))),this._tooltipFieldsOrdered.array.filter(function(e){return null!==e.value&&""!==e.value}).map(function(e){return"<span>"+e.title+":</span> "+e.value}).join("<br />")},n.prototype.pointToScreenPoint=function(e){var t,i,o,n,s,a,l=this._model.timeScale(),c=this.priceScale();if(!c||c.isEmpty()||l.isEmpty())return[new r(0,0),new r(0,0)];if(t=null,c.isPercent()){if(!this.ownerSource())return;if(null===(t=this.ownerSource().firstValue())||!isFinite(t))return}return i=l.indexToCoordinate(e.index,!0),o=e.price,c.isPercent()&&(o=c.priceRange().convertToPercent(o,t)),n=c.priceToCoordinate(o,!0),s=new r(i,n),i=l.indexToCoordinate(e.index,!1),n=c.priceToCoordinate(o,!1),a=new r(i,n),[s,a]},n.prototype.screenPointToPoint=function(e){var t=this._model.timeScale(),i=this.priceScale(),o=t.coordinateToIndex(e.x),n=i.coordinateToPrice(e.y),r=null;if(i.isPercent()){if(!this.ownerSource())return;if(null===(r=this.ownerSource().firstValue())||!isFinite(r))return}return i.isPercent()&&(n=i.priceRange().convertFromPercent(n,r)),{price:n,index:o}},n.prototype.tags=function(){return[this._constructor]},n.prototype._snapPoint45Degree=function(e,t,i){var o,n,r,s,a,l,c,h,u,d,p,f,_=this._model.timeScale(),m=_.indexToCoordinate(t.index),g=_.indexToCoordinate(e.index)-m,v=this.m_priceScale,y=t.price,b=e.price,S=this.ownerSource().firstValue();v.isPercent()&&(y=v.priceRange().convertToPercent(y,S)),o=v.priceToCoordinate(y),n=v.priceToCoordinate(b)-o,r=Math.round(Math.atan2(g,n)/Math.PI*4),2===Math.abs(r)?i||(e.price=y):0===Math.abs(r)||4===Math.abs(r)?i||(e.index=t.index):0===Math.abs(r)||4===Math.abs(r)?i||(e.index=t.index):(s=Math.sqrt(g*g+n*n),a=g<0?-1:1,l=n<0?-1:1,c=Math.max(Math.abs(n),Math.abs(g)),h=c*Math.sqrt(2),u=h/s,c/=u,d=Math.round(_.coordinateToIndex(m+c*a)),p=Math.abs(_.indexToCoordinate(d)-m),
f=v.coordinateToPrice(o+p*l),e.index=d,e.price=f)},n.prototype.createPriceAxisView=function(e){return new s(this,{pointIndex:e})},n.prototype.version=1,n.isLineTool=function(e){var t=TradingView[e];return!!t&&TradingView.isInherited(t,n)},n.prototype.alertId=function(){return this._alertId},n.prototype.setAlert=function(e,t){function o(){!t.noChartSave&&window.saver&&window.saver.saveChartSilently(null,!1,function(e){e&&413===e.status||y.createGoProDialog({feature:"savedChartsForAlertLimit"}).then(function(e){e.open()})},{noDefaultOnFail:!0})}var n,r,s,a=i(561),l=this;if(t=t||{},n=e instanceof a?e.id:parseInt(e),r=l._model.hoveredSource()===l,s=l._model.selectedSource()===l,this.canHasAlert()&&(l._alertId=n,l.hasAlert.setValue(!0),TradingView.alertsDispatcher))return l.getAlert().done(function(e){l._processAlertHanders("unsubscribe"),l._processAlertHanders("subscribe"),e.set("hovered",r),e.set("selected",s)}).fail(function(e){l._processAlertHanders("unsubscribe"),"not_exists"===e&&l.flushAlert()}).always(function(){setTimeout(o,0)})},n.prototype.flushAlert=function(){delete this._alertId,delete this._alert,this.hasAlert.setValue(!1),window.saver&&window.saver.saveChartSilently(null,!1)},n.prototype._processAlertHanders=function(e){var t,i,o,n=this;("unsubscribe"!==(e="subscribe"===e?"subscribe":"unsubscribe")||n._alertCallbacks)&&(i="subscribe"===e?"on":"off",t=n.properties(),o=n._alertCallbacks||{flush:n.flushAlert.bind(n),hovered:function(e,t){t?n._model.setHoveredSource(n):n._model.hoveredSource()===n&&n._model.setHoveredSource(null)},selected:function(e,t){t&&n._model.setSelectedSource(n)},synchronizeSilently:function(e){n.synchronizeAlert(!1)}},n._alertCallbacks||(n._alertCallbacks=o),n.getAlert().done(function(r){r&&(r[i]("destroy",o.flush),r[i]("change:hovered",o.hovered),r[i]("change:selected",o.selected),t.extendLeft&&t.extendLeft[e](n,o.synchronizeSilently),t.extendRight&&t.extendRight[e](n,o.synchronizeSilently))}))},n.prototype.editAlert=function(){function e(e){"not_exists"===e&&(t.flushAlert(),TVDialogs.ShowConfirm($.t("Alert"),$.t("Alert does not exist. Create new?"),function(){new o({drawing:t})}))}var t=this,o=i(256).MakeAlertDialog;t.hasAlert.value()&&TradingView.alertsDispatcher.openEditDialog(this.alertId(),{error:e})},n.prototype.getAlert=function(e){var t,i=this;return e=e||{},t=$.Deferred(),TradingView.alertsDispatcher?TradingView.alertsDispatcher.requestAlert(i._alertId,{success:t.resolve.bind(t),error:t.reject.bind(t),fromCache:e.fromCache}):_.logError("[Alerts] Can't get alert without alerts dispatcher"),t.promise()},n.prototype.synchronizeAlert=function(e){var t=this;t.hasAlert.value()&&setTimeout(function(){function i(){t._alertUndoMode=!0,s.undoToCheckpoint(t._undoCheckpointAlert),setTimeout(function(){t._alertUndoMode=!1,t.localAndServerAlersMismatch=!1},0)}function o(e){var i=e.get("description")!==e.defaultDescription(),o=e.get("extra"),n=o.alertSeries(),r=t._model.mainSeries().stateForAlert();"MainSeries"===n.type&&r.actualSymbol===n.actualSymbol&&(o.mainSeries(r),o.alertSeries(r)),
e.set("resolution",t.stateForAlert().interval),o.drawing(t),i||e.setDefaultDescription(),t.localAndServerAlersMismatch=!0}function n(e){TradingView.alertsDispatcher.restartAlert(e,{success:function(){t.localAndServerAlersMismatch=!1},error:i,complete:function(){delete t._undoCheckpointAlert}})}var r,s=t._getUndoHistory();t._undoCheckpointAlert||t._alertUndoMode||(r=s.undoStack().pop(),t._undoCheckpointAlert=s.createUndoCheckpoint(),r&&s.undoStack().push(r)),t.getAlert().done(function(t){o(t),e&&n(t)}).fail(i)},0)},n.prototype._getUndoHistory=function(){return this._model._undoModel.undoHistory},n.prototype.stateForAlert=function(){var e,t;if(this.canHasAlert())return e=this.state(),e.id=this.idForAlert(),e.uniqueId=this.idForAlert(),e.title=this.title(),e.interval=this._model.mainSeries().interval(),t=this._getAlertPlots(),t&&(e.plots=t),e},n.prototype._getAlertPlots=function(){return null},n.prototype._linePointsToAlertPlot=function(e,t,i,o){if(2!==e.length)return _.logError("[Drawing Alert] Wrong points"),null;var n=this._model.timeScale();return!n||n.isEmpty()?null:{type:"LinePlot",title:t||this.title(),timestamp:n.indexToTimePoint(0),offset1:e[0].index,offset2:e[1].index,price1:e[0].price,price2:e[1].price,extendBackward:i||!1,extendForward:o||!1}},n.prototype.getAlertIsActive=function(e){this.getAlert({fromCache:!0}).done(function(t){e(!!t&&t.get("active"))}).fail(function(){e(!1)})},n.prototype.geometry=function(){var e=this,t=function(t){var i=t.x/e._model.timeScale().width(),o=t.y/e.priceScale().height();return new r(i,o)};return this.points().map(function(i){var o=e.pointToScreenPoint(i)[0];return t(o)})},n.prototype.onlyYMoving=function(){return!1},n.prototype.model=function(){return this._model},n.prototype.isForcedDrawPriceAxisLabel=function(){return this.customization.forcePriceAxisLabel},n.prototype.getInputsPropertyPage=function(){return g.LineToolInputsPropertyPage},n.prototype.getVisibilitiesPropertyPage=function(){return g.LineToolVisibilitiesPropertyPage},n.prototype.getSourceIcon=function(){var e=v[this.getType()];return void 0===e?null:{type:"svg",svgCode:e.icon}},n.prototype.destroy=function(){this.stop()},t.LineToolPriceAxisView=s,t.LineDataSource=n}).call(t,i(37))},function(e,t,i){"use strict";var o,n,r=i(0).getLogger("Chart.DataSourcePropertyPages");t.propertyPages={},o=t.propertyPages,n=null,t.loadPropertyPages=function(){return null!==n?n:(r.logNormal("Start loading property pages"),n=new Promise(function(e){i.e(12).then(function(t){o.ChartStylesPropertyPage=i(1130),o.LineToolABCDPatternStylesPropertyPage=i(1131),o.LineToolArcStylesPropertyPage=i(1132),o.LineToolArrowMarkStylesPropertyPage=i(1133),o.LineToolBalloonStylesPropertyPage=i(1134),o.LineToolBarsPatternStylesPropertyPage=i(1135).LineToolBarsPatternStylesPropertyPage,o.LineToolBezierStylesPropertyPage=i(1136),o.LineToolBrushStylesPropertyPage=i(1137),o.LineToolCalloutStylesPropertyPage=i(1138),o.LineToolCircleLinesStylesPropertyPage=i(1139),o.LineToolDateAndPriceRangeStylesPropertyPage=i(1140),
o.LineToolDateRangeStylesPropertyPage=i(1141),o.LineToolDisjointAngleStylesPropertyPage=i(1142),o.LineToolElliottStylesPropertyPage=i(1143),o.LineToolEllipseStylesPropertyPage=i(1144),o.LineToolFibChannelStylesPropertyPage=i(1145),o.LineToolFibCirclesStylesPropertyPage=i(1146),o.LineToolFibRetracementStylesPropertyPage=i(1113),o.LineToolFibSpeedResistanceArcsStylesPropertyPage=i(1147),o.LineToolFibSpeedResistanceFanStylesPropertyPage=i(1148),o.LineToolFibSpiralStylesPropertyPage=i(1149),o.LineToolFibTimeZoneStylesPropertyPage=i(1150),o.LineToolFibWedgeStylesPropertyPage=i(1151),o.LineToolFlatBottomStylesPropertyPage=i(1152),o.LineToolGannComplexStylesPropertyPage=i(1153).LineToolGannComplexStylesPropertyPage,o.LineToolGannFixedStylesPropertyPage=i(1154).LineToolGannFixedStylesPropertyPage,o.LineToolGannFanStylesPropertyPage=i(1155),o.LineToolGannSquareStylesPropertyPage=i(1156),o.LineToolGhostFeedInputsPropertyPage=i(639).LineToolGhostFeedInputsPropertyPage,o.LineToolGhostFeedStylesPropertyPage=i(639).LineToolGhostFeedStylesPropertyPage,o.LineToolHorzLineInputsPropertyPage=i(640).LineToolHorzLineInputsPropertyPage,o.LineToolHorzLineStylesPropertyPage=i(640).LineToolHorzLineStylesPropertyPage,o.LineToolIconStylesPropertyPage=i(1157),o.LineToolInputsPropertyPage=i(1098),o.LineToolLineTool5PointsPatternStylesPropertyPage=i(1158),o.LineToolNotePropertyPage=i(1159),o.LineToolParallelChannelStylesPropertyPage=i(1160),o.LineToolPitchfanStylesPropertyPage=i(1161),o.LineToolPitchforkStylesPropertyPage=i(1162),o.LineToolPolylineStylesPropertyPage=i(1163),o.LineToolPredictionStylesPropertyPage=i(1164),o.LineToolPriceLabelStylesPropertyPage=i(1165),o.LineToolProjectionStylesPropertyPage=i(1166),o.LineToolRectangleStylesPropertyPage=i(1167),o.LineToolRiskRewardInputsPropertyPage=i(641).LineToolRiskRewardInputsPropertyPage,o.LineToolRiskRewardStylesPropertyPage=i(641).LineToolRiskRewardStylesPropertyPage,o.LineToolTextStylesPropertyPage=i(1168),o.LineToolTimeCyclesPropertyPage=i(1169),o.LineToolTrendAngleInputsPropertyPage=i(642).LineToolTrendAngleInputsPropertyPage,o.LineToolTrendAngleStylesPropertyPage=i(642).LineToolTrendAngleStylesPropertyPage,o.LineToolTrendBasedFibExtensionStylesPropertyPage=i(1170),o.LineToolTrendBasedFibTimeStylesPropertyPage=i(1171),o.LineToolTrendLineStylesPropertyPage=i(1172),o.LineToolTrianglePatternStylesPropertyPage=i(1173),o.LineToolTriangleStylesPropertyPage=i(1174),o.LineToolVertLineInputsPropertyPage=i(643).LineToolVertLineInputsPropertyPage,o.LineToolVertLineStylesPropertyPage=i(643).LineToolVertLineStylesPropertyPage,o.LineToolVisibilitiesPropertyPage=i(1175),o.StudyCompareInputsPropertyPage=i(1176),o.StudyDisplayPropertyPage=i(553).StudyDisplayPropertyPage,o.StudyInputsPropertyPage=i(524).StudyInputsPropertyPage,o.StudyLineDataSourcePropertyPage=i(1177),o.StudyOverlayStylesPropertyPage=i(1178),o.StudyStrategyPropertyPage=i(1179),o.StudyStylesPropertyPage=i(553).StudyStylesPropertyPage,o.VolumePropertyPage=i(1180),o.LineToolRegressionTrendInputsPropertyPage=i(1181),
o.LinetoolVolumeProfilePropertyPage=i(644).LinetoolVolumeProfilePropertyPage,o.StudyElliottInputsPropertyPage=i(1182),o.StudyLinearRegressionStylesPropertyPage=i(1183),o.StudyPivotPointsHighLowStylesPropertyPage=i(1184),o.StudyPivotPointsStandardStylesPropertyPage=i(1185),o.StudyVolumeProfilePropertyPage=i(644).StudyVolumeProfilePropertyPage,o.StudyZigZagStylesPropertyPage=i(1186),r.logNormal("Property pages loaded"),e()}.bind(null,i)).catch(i.oe)}))}},function(e,t,i){var o=i(118),n=i(27).ProductFeatures,r=i(119),s={},a={},l={},c={init:function(){var e,t,i,n;Object.keys(o).forEach(function(e){r[e]={subsets:o[e]}}),Object.keys(r).forEach(function(i){e=r[i],t=e.subsets,Array.isArray(t)?t.forEach(function(e){s[e]=1}):t&&Object.keys(t).forEach(function(e){s[e]=1}),s[i]=1}),i=Object.keys(s),i.forEach(function(e){i.forEach(function(i){if(void 0!==(n=r[i])){if(!(t=n.subsets))return;a.hasOwnProperty(e)||(a[e]=[]),Array.isArray(t)&&~t.indexOf(e)?a[e].push(i):e in t&&a[e].push(i)}})}),"undefined"!=typeof __initialDisabledFeaturesets&&__initialDisabledFeaturesets&&__initialDisabledFeaturesets.forEach(function(e){c.disable(e)}),"undefined"!=typeof __initialEnabledFeaturesets&&__initialEnabledFeaturesets&&__initialEnabledFeaturesets.forEach(function(e){c.enable(e)}),"undefined"!=typeof window&&(window.Featuresets=c),this.meta={_uniqueSetsNames:s,_setsReverseDependencies:a,_setsStates:l}},enabled:function(e){var t=function(e){var i,o,n=a.hasOwnProperty(e)?a[e]:[];if(!1===l[e])return!1;for(i=l[e],o=0;o<n.length;++o)i|=t(n[o]);return i};return!!t(e)},enable:function(e){l[e]=!0},disable:function(e){l[e]=!1},setEnabled:function(e,t){l[e]=!!t},getProductId:function(){var e=window.user,t=e.pro_plan||n.FREE_PRODUCT_ID,i=/_trial$/,o=t!==n.FREE_PRODUCT_ID&&!i.test(t);return o||(t=t.replace(i,"")),o&&!e.new_pro_product_line&&(t="__legacy_{0}".format(t)),t},getConfig:function(e,t){var i=r[t||c.getProductId()];return i?i.subsets[e]||null:null},resetAllProductFeatures:function(){Object.keys(o).forEach(function(e){c.setEnabled(e,!1)})},enableProductFeatures:function(){c.enable(c.getProductId())},_uniqueSets:function(){return Object.keys(s)}};c.init(),e.exports=c},function(e,t,i){"use strict";(function(e){function t(){this._listeners=[]}i(0).getLogger("Common.Delegate");t.prototype.subscribe=function(e,t,i){var o={object:e,member:t,singleshot:!!i};this._listeners.push(o)},t.prototype.unsubscribe=function(e,t){var i,o;for(i=0;i<this._listeners.length;++i)if(o=this._listeners[i],o.object===e&&o.member.prototype===t.prototype){this._listeners.splice(i,1);break}},t.prototype.unsubscribeAll=function(e){var t,i;for(t=this._listeners.length-1;t>=0;--t)i=this._listeners[t],i.object===e&&this._listeners.splice(t,1)},t.prototype.destroy=function(){delete this._listeners},t.prototype.fire=function(){var e,t,i=this._listeners.slice();for(e=0;e<i.length;++e)t=i[e],t.member.apply(t.object||null,arguments);for(e=this._listeners.length-1;e>=0;e--)this._listeners[e].singleshot&&this._listeners.splice(e,1)},"undefined"!=typeof window&&(window.Delegate=t),
void 0!==e&&e&&e.exports&&(e.exports=t)}).call(t,i(15)(e))},function(e,t,i){"use strict";function o(e){return e?(window._tv_languages||{})[e]||null:null}function n(){document.body&&document.body.dispatchEvent(new a.CustomEvent("tradingview-i18next-initialized"))}var r,s,a,l,c,h,u,d;i(90),r=i(45),s=i(97),a=i(84),l={translate:r.translationFunction},window.__tradingviewI18nextInited||(c=window.language||null,h=o(c),c&&h||(console.error("No translation data"),c="en",h=o("en")),c&&h?(u={interpolation:{prefix:"__",suffix:"__"},keySeparator:":::",lng:c,nsSeparator:":::",resources:(d={},d[c]={translation:h},d)},s.init(u,n),l.translate=s.t.bind(s),r.addTranslationFunctionToWindow(l.translate),r.addTranslationFunctionToJQuery(l.translate)):n(),window.__tradingviewI18nextInited=!0),e.exports=l},function(e,t,i){"use strict";function o(e,t){function i(){this.constructor=e}v(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}function n(e,t){var i,o,n={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&(n[i[o]]=e[i[o]]);return n}function r(e,t,i,o){var n,r,s=arguments.length,a=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(r=e.length-1;r>=0;r--)(n=e[r])&&(a=(s<3?n(a):s>3?n(t,i,a):n(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a}function s(e,t){return function(i,o){t(i,o,e)}}function a(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,i,o){return new(i||(i=Promise))(function(n,r){function s(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){e.done?n(e.value):new i(function(t){t(e.value)}).then(s,a)}l((o=o.apply(e,t||[])).next())})}function c(e,t){function i(e){return function(t){return o([e,t])}}function o(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(s=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(s=s.call(r,i[1])).done)return s;switch(r=0,s&&(i=[0,s.value]),i[0]){case 0:case 1:s=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(s=l.trys,!(s=s.length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){l.label=i[1];break}if(6===i[0]&&l.label<s[1]){l.label=s[1],s=i;break}if(s&&l.label<s[2]){l.label=s[2],l.ops.push(i);break}s[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var n,r,s,a,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a}function h(e,t){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i])}
function u(e){var t="function"==typeof Symbol&&e[Symbol.iterator],i=0;return t?t.call(e):{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}}}function d(e,t){var i,o,n,r,s="function"==typeof Symbol&&e[Symbol.iterator];if(!s)return e;i=s.call(e),n=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)n.push(o.value)}catch(e){r={error:e}}finally{try{o&&!o.done&&(s=i.return)&&s.call(i)}finally{if(r)throw r.error}}return n}function p(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(d(arguments[t]));return e}function f(e){return this instanceof f?(this.v=e,this):new f(e)}function _(e,t,i){function o(e){h[e]&&(c[e]=function(t){return new Promise(function(i,o){u.push([e,t,i,o])>1||n(e,t)})})}function n(e,t){try{r(h[e](t))}catch(e){l(u[0][3],e)}}function r(e){e.value instanceof f?Promise.resolve(e.value.v).then(s,a):l(u[0][2],e)}function s(e){n("next",e)}function a(e){n("throw",e)}function l(e,t){e(t),u.shift(),u.length&&n(u[0][0],u[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c,h=i.apply(e,t||[]),u=[];return c={},o("next"),o("throw"),o("return"),c[Symbol.asyncIterator]=function(){return this},c}function m(e){function t(t,n){e[t]&&(i[t]=function(i){return(o=!o)?{value:f(e[t](i)),done:"return"===t}:n?n(i):i})}var i,o;return i={},t("next"),t("throw",function(e){throw e}),t("return"),i[Symbol.iterator]=function(){return this},i}function g(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator];return t?t.call(e):"function"==typeof u?u(e):e[Symbol.iterator]()}var v,y;Object.defineProperty(t,"__esModule",{value:!0}),t.__extends=o,i.d(t,"__assign",function(){return y}),t.__rest=n,t.__decorate=r,t.__param=s,t.__metadata=a,t.__awaiter=l,t.__generator=c,t.__exportStar=h,t.__values=u,t.__read=d,t.__spread=p,t.__await=f,t.__asyncGenerator=_,t.__asyncDelegator=m,t.__asyncValues=g,v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},y=Object.assign||function(e){var t,i,o,n;for(i=1,o=arguments.length;i<o;i++){t=arguments[i];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}},function(e,t,i){"use strict";function o(e,t,i){this._defaultName=e;var n;i?n=t:(n=TradingView.clone(defaults(e)),t&&TradingView.merge(n,t)),r.call(this,n),this._defaultName=e,this.listeners().subscribe(this,o.prototype.onPropertyChanged),this._exclusions=[]}function n(e){o._saveDefaults=e}var r=i(37);inherit(o,r),o._saveDefaults=!1,o.prototype.addExclusion=function(e){this._exclusions.push(e)},o.prototype.restoreFactoryDefaults=function(){var e,t={};this._defaultName.startsWith("study_")&&(t=TradingView.clone(TradingView.factoryDefaults("study"))),this._defaultName.startsWith("linetool")&&(t=TradingView.clone(TradingView.factoryDefaults("linetoolvisibilities"))),e=TradingView.clone(TradingView.factoryDefaults(this._defaultName)),this._defaultName.startsWith("study_")&&e.inputs&&delete e.inputs.symbol,
"linetoolicon"===this._defaultName&&(e.icon=defaults(this._defaultName).icon),~["linetooltext","linetooltextabsolute","linetoolnote","linetoolnoteabsolute","linetoolcallout","linetoolballoon","linetoolarrowmark","linetoolarrowmarkleft","linetoolarrowmarkup","linetoolarrowmarkright","linetoolarrowmarkdown","linetoolhorzline","linetoolhorzray"].indexOf(this._defaultName)&&delete e.text,this._exclusions.forEach(function(t){delete e[t]}),TradingView.merge(t,e),this.merge(t),this._defaultName.startsWith("study_")||TradingView.saveDefaults(this._defaultName,this.state(this._exclusions)),this.listeners().fire(this)},o.prototype.cleanupFactoryDefaults=function(){var e={};TradingView.saveDefaults(this._defaultName,e),this.listeners().fire(this)},o.prototype.onPropertyChanged=function(){o._saveDefaults&&!this._defaultName.startsWith("study_")&&this.saveDefaults()},o.prototype.saveDefaults=function(){TradingView.saveDefaults(this._defaultName,this.state(this._exclusions))},o.prototype.restoreDefaults=function(){var e=TradingView.clone(defaults(this._defaultName));this.merge(e),this.listeners().fire(this)},o.prototype.clone=function(e){return new o(this._defaultName,this.state(),e&&e.replaceByState)},t.DefaultProperty=o,t.saveDefaultProperties=n},function(e,t,i){"use strict";function o(e,t){return new h(e,t)}function n(e,t){return e.x===t.x&&e.y===t.y}function r(e,t,i){if(0===e&&0===t)throw Error("A and B can not be both equal to zero.");return{A:e,B:t,C:i}}function s(e,t){var i,o,s;if(n(e,t))throw Error("Points should be distinct");return i=e.y-t.y,o=t.x-e.x,s=e.x*t.y-t.x*e.y,r(i,o,s)}function a(e,t){if(n(e,t))throw Error("Points of a segment should be distinct");return[e,t]}function l(e,t){return{edge:e,isPositive:t}}function c(e,t){return l(e,e.A*t.x+e.B*t.y+e.C>0)}Object.defineProperty(t,"__esModule",{value:!0});var h=function(){function e(e,t){this.x=e,this.y=t}return e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y)},e.prototype.addScaled=function(t,i){return new e(this.x+i*t.x,this.y+i*t.y)},e.prototype.subtract=function(t){return new e(this.x-t.x,this.y-t.y)},e.prototype.dotProduct=function(e){return this.x*e.x+this.y*e.y},e.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.prototype.scaled=function(t){return new e(this.x*t,this.y*t)},e.prototype.normalized=function(){return this.scaled(1/this.length())},e.prototype.transposed=function(){return new e(-this.y,this.x)},e.prototype.clone=function(){return new e(this.x,this.y)},e}();t.Point=h,t.point=o,t.equalPoints=n,t.line=r,t.lineThroughPoints=s,t.lineSegment=a,t.halfplane=l,t.halfplaneThroughPoint=c},function(e,t,i){"use strict";function o(e,t){if(!e)throw Error("Assertion failed"+(t?": "+t:""))}function n(e){if(void 0===e)throw Error("Value is undefined");return e}function r(e){if(null===e)throw Error("Value is null");return e}function s(e){return r(n(e))}Object.defineProperty(t,"__esModule",{value:!0}),t.assert=o,t.ensureDefined=n,t.ensureNotNull=r,t.ensure=s},function(e,t,i){(function(e){function t(e){
return"number"==typeof e&&isFinite(e)}function i(e){return"string"==typeof e?JSON.parse(e):e}function o(e){return null!==e&&void 0!==e&&e.constructor===Function}function n(e){return h(e)&&e.then}function r(e,t){e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),e.prototype.superclass=t}function s(e,t){for(var i in e.prototype)"function"==typeof e.prototype[i]&&e.prototype.hasOwnProperty(i)&&(e.prototype[i]=function(){throw Error(t+"::"+i+" is an interface member declaration and must be overloaded in order to be called")})}function a(e,t,i,o){for(var n in i.prototype)if("function"==typeof i.prototype[n]&&!e.prototype[n])throw Error("Interface implementation assertion failed: "+t+" does not implement "+o+"::"+n+" function")}var l,c=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},h=function(e){return"object"==typeof e&&null!==e},u=function(e){return h(e)&&-1!==(""+e.constructor).indexOf("function Object")};"undefined"!=typeof window?(l=window.TradingView=window.TradingView||{},window.isNumber=t,window.isFunction=o,window.inherit=r,window.isArray=c):l=this.TradingView=this.TradingView||{},l.isNaN=function(e){return!(e<=0||e>0)},l.isAbsent=function(e){return null===e||void 0===e},l.isExistent=function(e){return null!==e&&void 0!==e},Number.isNaN=Number.isNaN||function(e){return e!=e},l.isSameType=function(e,t){return Number.isNaN(e)||Number.isNaN(t)?Number.isNaN(e)===Number.isNaN(t):{}.toString.call(e)==={}.toString.call(t)},l.isInteger=function(e){return"number"==typeof e&&e%1==0},l.parseBool=function(e){return!0===e||"true"===e},l.isBoolean=function(e){return!0===e||!1===e},l.isString=function(e){return null!==e&&void 0!==e&&e.constructor===String},l.isInherited=function(e,t){return e===t||!(!e||!e.prototype)&&(void 0!==e.prototype.superclass&&null!==e.prototype.superclass&&(e.prototype.superclass===t||l.isInherited(e.prototype.superclass,t)))},l.TypeValidator=function(e){this.m_type=e},l.TypeValidator.prototype.check=function(e){return e.constructor===this.m_type||l.isInherited(e.constructor,this.m_type)},l.PredicateValidator=function(e){this.m_predicate=e},l.PredicateValidator.prototype.check=function(e){return this.m_predicate(e)},l.clone=function(e){var t,i,o;if(!e||"object"!=typeof e)return e;t="function"==typeof e.pop?[]:{};for(i in e)e.hasOwnProperty(i)&&(o=e[i],t[i]=o&&"object"==typeof o?l.clone(o):o);return t},l.deepEquals=function(e,t,i){var n,r,s,a,h;if(i||(i=""),e===t)return[!0,i];if(o(e)&&(e=void 0),o(t)&&(t=void 0),void 0===e&&void 0!==t)return[!1,i];if(void 0===t&&void 0!==e)return[!1,i];if(null===e&&null!==t)return[!1,i];if(null===t&&null!==e)return[!1,i];if("object"!=typeof e&&"object"!=typeof t)return[e===t,i];if(Array.isArray(e)&&Array.isArray(t)){if(n=e.length,r=t.length,n!==r)return[!1,i];for(s=0;s<n;s++)if(a=l.deepEquals(e[s],t[s],i+"["+s+"]"),!a[0])return a;return[!0,i]}if(c(e)||c(t))return[!1,i];for(h in e)if(a=l.deepEquals(e[h],t[h],i+"["+h+"]"),!a[0])return a;return[!0,i]},l.merge=function(e,t){
for(var i in t)"object"==typeof t[i]&&e.hasOwnProperty(i)?l.merge(e[i],t[i]):e[i]=t[i];return e},l.mergeObj=function(e,t){for(var i in t)t[i].constructor===Object&&e.hasOwnProperty(i)?l.mergeObj(e[i],t[i]):e[i]=t[i];return e},l.mergeWithRules=function(e,t,i,o){var n,r;for(n in t)r=o?o+"."+n:n,i&&r in i?e[n]=i[r](e[n],t[n]):"object"==typeof t[n]&&e.hasOwnProperty(n)?l.merge(e[n],t[n],i,r):e[n]=t[n]},l.sortMultipleFunction=function(){var e=[].slice.call(arguments),t=e.length;return function(i,o){var n,r,s,a,l,c,h;for(h=0;h<t&&(c=0,s=e[h],a="string"==typeof s?s:s.name,n=i[a],r=o[a],"function"==typeof s.fn&&(n=s.fn(n),r=s.fn(r)),l=s.reverse?-1:1,n<r&&(c=-1*l),n>r&&(c=1*l),0===c);h++);return c}},void 0!==e&&e&&e.exports&&(e.exports={inherit:r,clone:l.clone,merge:l.merge,isNumber:t,isInteger:l.isInteger,isBoolean:l.isBoolean,isString:l.isString,isObject:h,isHashObject:u,isPromise:n,isNaN:l.isNaN,isAbsent:l.isAbsent,isExistent:l.isExistent,isSameType:l.isSameType,isArray:c,parseBool:l.parseBool,parseJSONorNot:i,deepEquals:l.deepEquals,declareClassAsPureInterface:s,requireFullInterfaceImplementation:a})}).call(t,i(15)(e))},function(e,t,i){"use strict";var o=function(){function e(e,t,i){this._result=e,this._data=t,this._eraseMarker=i}return e.prototype.result=function(){return this._result},e.prototype.data=function(){return this._data},e.prototype.eraseMarker=function(){return this._eraseMarker},e.MOVEPOINT_BACKGROUND=1,e.REGULAR=2,e.MOVEPOINT=3,e.CHANGEPOINT=4,e.CUSTOM=5,e.CUSTOM_MOVE=6,e}();e.exports=o},function(e,t,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n,r,s;Object.defineProperty(t,"__esModule",{value:!0}),n=Object.assign||function(e){var t,i,o;for(t=1;t<arguments.length;t++){i=arguments[t];for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},r={type:"logger",log:function(e){this._output("log",e)},warn:function(e){this._output("warn",e)},error:function(e){this._output("error",e)},_output:function(e,t){console&&console[e]&&console[e].apply(console,Array.prototype.slice.call(t))}},s=function(){function e(t){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];o(this,e),this.subs=[],this.init(t,i)}return e.prototype.init=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];this.prefix=t.prefix||"i18next:",this.logger=e||r,this.options=t,this.debug=!1!==t.debug},e.prototype.setDebug=function(e){this.debug=e,this.subs.forEach(function(t){t.setDebug(e)})},e.prototype.log=function(){this.forward(arguments,"log","",!0)},e.prototype.warn=function(){this.forward(arguments,"warn","",!0)},e.prototype.error=function(){this.forward(arguments,"error","")},e.prototype.deprecate=function(){this.forward(arguments,"warn","WARNING DEPRECATED: ",!0)},e.prototype.forward=function(e,t,i,o){o&&!this.debug||("string"==typeof e[0]&&(e[0]=i+this.prefix+" "+e[0]),this.logger[t](e))},e.prototype.create=function(t){var i=new e(this.logger,n({prefix:this.prefix+":"+t+":"},this.options));return this.subs.push(i),i},e}(),
t.default=new s},,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dur=350,t.easingFunc={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:(4-2*e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}},t.color={black0:"#000",black30:"#212121",black70:"#4A4A4A",black80:"#535353",black110:"#757575",black140:"#8A8A8A",black170:"#ADAEB0",black180:"#b4b4b4",black200:"#C8C8C8",black220:"#DADDE0",black230:"#ECECEC",black240:"#F2F2F2",black248:"#F8F8F8",black255:"#FFF",brand:"#3BB3E4",brandHover:"#3BABD8",brandActive:"#3898C2",brandDown:"#049DDC",brand220:"#3BB3E0",brand255:"#3BB3FF",spinner:"#00A2E2",brandMedium80:"#3C4650",brandMedium90:"#465a6e",brandMedium100:"#627384",brandMedium120:"#758696",brandMedium150:"#94959C",brandMedium190:"#9DB2BD",brandMedium220:"#E9EFF2",brandMedium230:"#EAECEF",brandMedium240:"#F1F3F6",brandDark:"#2A2C39",brandDark50:"#252733",brandDark45:"#20222D",brandDarkText:"#6A6B74",danger:"#FF4A68",dangerHover:"#F24965",dangerDown:"#FF173E",success:"#3CBC98",success55:"#37BC9B",success250:"#00FFC0",successHover:"#38B395",successDown:"#00A97F",attention:"#FFC84A",attention50:"#F89E30",growing:"#37bc9b",falling:"#ff4a68"}},,function(e,t,i){"use strict";function o(e,t){if(!n.isNumber(e))return"n/a";if(!n.isInteger(t))throw new TypeError("invalid length");if(t<0||t>16)throw new TypeError("invalid length");return 0===t?""+e:("0000000000000000"+e).slice(-t)}var n,r,s,a,l;Object.defineProperty(t,"__esModule",{value:!0}),i(5),n=i(10),r=i(0),s=r.getLogger("Chart.PriceFormatter"),t.customFormatters={dateFormatter:null,timeFormatter:null},t.formatterOptions={decimalSign:".",decimalSignFractional:"'"},a={custom:$.t("Price format is invalid."),fraction:$.t("Fraction part is invalid."),secondFraction:$.t("Second fraction part is invalid.")},t.numberToStringWithLeadingZero=o,l=function(){function e(e,t,i,o){if(this.type="price",t||(t=1),n.isNumber(e)&&n.isInteger(e)||(e=100),e<0)throw new TypeError("invalid base");if(this._priceScale=e,this._minMove=t,this._minMove2=o,i&&void 0!==o&&o>0&&2!==o&&4!==o&&8!==o)return void s.logDebug("invalid minmove2");this._fractional=i,this.calculateDecimal()}return e.prototype.isFractional=function(){return!!this._fractional},e.prototype.state=function(){return{fractional:this._fractional,fractionalLength:this._fractionalLength,minMove:this._minMove,minMove2:this._minMove2,priceScale:this._priceScale}},e.prototype.calculateDecimal=function(){if(this._fractionalLength=0,this._priceScale>0&&this._minMove>0){var e=this._priceScale
;for(this._fractional&&this._minMove2&&(e/=this._minMove2);e>1;)e/=10,this._fractionalLength++}},e.prototype.format=function(e,t,i,o){void 0===o&&(o=!0);var n="";return e<0?(n=!0===t?"":!1===o?"":"-",e=-e):e&&!0===t&&(n="+"),this._fractional?n+this._formatAsFractional(e,i):n+this._formatAsDecimal(e,i)},e.prototype.parse=function(e){return this._fractional?this._minMove2?this._parseAsDoubleFractional(e):this._parseAsSingleFractional(e):this._parseAsDecimal(e)},e.prototype.hasForexAdditionalPrecision=function(){return!this._fractional&&10===this._minMove2},e.serialize=function(e){return e.state()},e.deserialize=function(t){return new e(t.priceScale,t.minMove,t.fractional,t.minMove2)},e.prototype._formatAsDecimal=function(e,i){var n,r,s,a,l;return i=i||0,n=this._fractional?Math.pow(10,this._fractionalLength||0):Math.pow(10,i)*this._priceScale/this._minMove,r=Math.floor(e),s=+(Math.round(e*n)-r*n).toFixed(this._fractionalLength),s>=n&&(s-=n,r+=1),a="",1!==n&&(l=void 0!==this._fractionalLength?this._fractionalLength:NaN,a=t.formatterOptions.decimalSign+o(+s.toFixed(this._fractionalLength)*this._minMove,l+i),a=this._removeEndingZeros(a,i)),""+r+a},e.prototype._formatAsFractional=function(e,i){var n,r,s,a,l,c,h,u,d,p=this._priceScale/this._minMove,f=Math.floor(e),_=i?Math.floor(e*p)-f*p:Math.round(e*p)-f*p;if(_===p&&(_=0,f+=1),n="",i&&(r=(e-f-_/p)*p,r=Math.round(r*Math.pow(10,i)),n=o(r,i),n=this._removeEndingZeros(n,i)),!this._fractionalLength)throw Error("_fractionalLength is not calculated");return s="",this._minMove2?(a=["0","5"],l=["0","2","5","7"],c=["0","1","2","3","4","5","6","7"],h=_%this._minMove2,_=(_-h)/this._minMove2,u=o(_,this._fractionalLength),d=2===this._minMove2?a[h]:8===this._minMove2?c[h]:l[h],s=u+t.formatterOptions.decimalSignFractional+d):s=o(_*this._minMove,this._fractionalLength),""+f+t.formatterOptions.decimalSignFractional+s+n},e.prototype._removeEndingZeros=function(e,t){for(var i=0;i<t&&"0"===e[e.length-1];i++)e=e.substr(0,e.length-1);return e},e.prototype._parseAsDecimal=function(e){var i,o,n=RegExp(/^(\-?)[0-9]+$/),r=n.exec(e);return r?(i=parseFloat(e),{price:i,res:!0,suggest:this.format(i)}):(o=RegExp("^(-?)[0-9]+\\"+t.formatterOptions.decimalSign+"[0-9]*$"),r=o.exec(e),r?(i=parseFloat(e.replace(t.formatterOptions.decimalSign,".")),{price:i,res:!0,suggest:this.format(i)}):{error:a.custom,res:!1})},e.prototype._patchFractPart=function(e,t){var i={0:0,5:1},o={0:0,2:1,5:2,7:3};return 2===t?void 0===i[e]?-1:i[e]:4===t?void 0===o[e]?-1:o[e]:e},e.prototype._parseAsSingleFractional=function(e){var i,o,n,r,s,l,c=RegExp(/^(\-?)[0-9]+$/),h=c.exec(e);return h?(i=parseFloat(e),{price:i,res:!0,suggest:this.format(i)}):(o=RegExp("^(-?)([0-9]+)\\"+t.formatterOptions.decimalSignFractional+"([0-9]+)$"),h=o.exec(e),h?(n=!!h[1],r=parseInt(h[2]),s=this._priceScale,(l=this._patchFractPart(parseInt(h[3]),s))>=s||l<0?{error:a.fraction,res:!1}:(i=r+l/s,n&&(i=-i),{price:i,res:!0,suggest:this.format(i)})):{error:a.custom,res:!1})},e.prototype._parseAsDoubleFractional=function(e){
var i,o,n,r,s,l,c,h,u,d=RegExp(/^(\-?)[0-9]+$/),p=d.exec(e);return p?(i=parseFloat(e),{price:i,res:!0,suggest:this.format(i)}):(o=RegExp("^(-?)([0-9]+)\\"+t.formatterOptions.decimalSignFractional+"([0-9]+)\\"+t.formatterOptions.decimalSignFractional+"([0-9]+)$"),p=o.exec(e),p?(n=!!p[1],r=parseInt(p[2]),s=void 0!==this._minMove2?this._minMove2:NaN,l=this._priceScale/s,c=this._minMove2,h=this._patchFractPart(parseInt(p[3]),l),u=this._patchFractPart(parseInt(p[4]),c),h>=l||h<0?{error:a.fraction,res:!1}:void 0!==c&&u>=c||u<0?{error:a.secondFraction,res:!1}:(i=void 0!==c?r+h/l+u/(l*c):NaN,n&&(i=-i),{price:i,res:!0,suggest:this.format(i)})):{error:a.custom,res:!1})},e}(),t.PriceFormatter=l},function(e,t,i){"use strict";function o(){return s.replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function n(){return r(12)}function r(e){var t,i,o="";for(t=0;t<e;++t)i=Math.round(Math.random()*(a.length-1)),o+=a[i];return o}var s,a;Object.defineProperty(t,"__esModule",{value:!0}),s="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",a="0123456789abcdefghijklmopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",t.guid=o,t.randomHash=n,t.randomHashN=r},function(e,t,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){o(this,e),this.observers={}}return e.prototype.on=function(e,t){var i=this;e.split(" ").forEach(function(e){i.observers[e]=i.observers[e]||[],i.observers[e].push(t)})},e.prototype.off=function(e,t){var i=this;this.observers[e]&&this.observers[e].forEach(function(){if(t){var o=i.observers[e].indexOf(t);o>-1&&i.observers[e].splice(o,1)}else delete i.observers[e]})},e.prototype.emit=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];this.observers[e]&&this.observers[e].forEach(function(e){e.apply(void 0,i)}),this.observers["*"]&&this.observers["*"].forEach(function(t){var o;t.apply(t,(o=[e]).concat.apply(o,i))})},e}();t.default=n},function(e,t,i){"use strict";function o(e){return null==e?"":""+e}function n(e,t,i){e.forEach(function(e){t[e]&&(i[e]=t[e])})}function r(e,t,i){function o(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}for(var n,r="string"!=typeof t?[].concat(t):t.split(".");r.length>1;){if(!e)return{};n=o(r.shift()),!e[n]&&i&&(e[n]=new i),e=e[n]}return e?{obj:e,k:o(r.shift())}:{}}function s(e,t,i){var o=r(e,t,Object);o.obj[o.k]=i}function a(e,t,i,o){var n=r(e,t,Object),s=n.obj,a=n.k;s[a]=s[a]||[],o&&(s[a]=s[a].concat(i)),o||s[a].push(i)}function l(e,t){var i=r(e,t),o=i.obj,n=i.k;if(o)return o[n]}function c(e,t,i){for(var o in t)o in e?"string"==typeof e[o]||e[o]instanceof String||"string"==typeof t[o]||t[o]instanceof String?i&&(e[o]=t[o]):c(e[o],t[o],i):e[o]=t[o];return e}function h(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function u(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,function(e){return d[e]}):e}Object.defineProperty(t,"__esModule",{value:!0}),t.makeString=o,t.copy=n,
t.setPath=s,t.pushPath=a,t.getPath=l,t.deepExtend=c,t.regexEscape=h,t.escape=u;var d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"}},function(e,t,i){"use strict";function o(e,t,i){var o,n,s;for(t=t||e||i||"",o="",n=0;n<c.length;n++)if((s=t.match(c[n]))&&3===s.length){t=s[1],o=s[2];break}r.emit(t.toLowerCase().replace(" ","_"),{category:e,label:i,value:o})}function n(e,t,i){var n,r,a;if(s.enabled("charting_library_base"))return void o(e,t,i);n=(e?e+":":"")+t,i&&(n+=" "+i),l.logNormal(n),s.enabled("widget")||(r=window._gaq,window._UNIT_TESTS||void 0===r||(a=["_trackEvent",e,t],void 0!==i&&a.push(i),r.push(a)))}var r,s,a,l,c;Object.defineProperty(t,"__esModule",{value:!0}),r=i(108),s=i(3),a=i(0),l=a.getLogger("Common.TrackEvent"),c=[/Study_(Drawing)_(.*)/,/(Study)_(.*)@tv-basicstudies/,/(Study)_(.*)/,/(Chart Style) (.*)/],t.trackEvent=n,window.TradingView=window.TradingView||{},window.TradingView.trackEvent=n},,function(e,t,i){"use strict";(function(e){function t(){}function i(e){if(!(this instanceof i))return new i(e);arguments.length>0&&(this._value=e),this._listeners=[]}i.prototype.value=function(){return this._owner?this._owner._value:this._value},i.prototype.setValue=function(e,t){var i,o,n,r=this._owner?this._owner:this;if("function"==typeof r.hook&&(e=r.hook(e)),r.writeLock)return r._value;if(!t&&r._value===e&&r.hasOwnProperty("_value"))return e;for(r._value=e,i=r._listeners.slice(),o=0,n=0;n<i.length;n++)i[n].once&&(r._listeners.splice(n-o,1),o++),i[n].cb(e);return e},i.prototype.deleteValue=function(){var e,t,i,o=this._owner?this._owner:this;if(o.hasOwnProperty("_value")){if(o.writeLock)return o._value;for(delete o._value,e=o._listeners.slice(),t=0,i=0;i<e.length;i++)e[i].once&&(o._listeners.splice(i-t,1),t++),e[i].cb()}},i.prototype.subscribe=function(e,t){var i,o,n;if("function"!=typeof e)throw new TypeError("callback must be a function");i=!!t&&!!t.once,o=!!t&&!!t.callWithLast,n=this._owner?this._owner:this,o&&n.hasOwnProperty("_value")&&(e(n._value),i)||n._listeners.push({cb:e,owner:this,once:!!t&&!!t.once})},i.prototype.unsubscribe=function(e){var t,i,o=this._owner?this._owner:this;for(void 0===e&&(e=null),t=o._listeners,i=t.length;i--;)t[i].owner!==this&&o!==this||t[i].cb!==e&&null!==e||t.splice(i,1)},i.prototype.listeners=function(){return(this._owner?this._owner:this)._listeners},i.prototype.readonly=function(){if(this._readonlyInstance)return this._readonlyInstance;var e=this._readonlyInstance=new t;return e.subscribe=this.subscribe.bind(this),e.unsubscribe=this.unsubscribe.bind(this),e.value=this.value.bind(this),e.when=this.when.bind(this),e.spawn=function(){return this.spawn().readonly()}.bind(this),e},i.prototype.spawn=function(){var e=new i;return delete e._listeners,e._owner=this._owner||this,e.destroy=function(){this.unsubscribe(),delete this._owner},e},i.prototype.when=function(e){var t,i=this;if(this.value())return void e();t=function(o){o&&(i.unsubscribe(t),e())},i.subscribe(t)},i.prototype.opposite=function(){var e,t;return this._opposite||(e=this,
t=new i(!this.value()),this.subscribe(function(e){t.setValue(!e)}),t.subscribe(function(t){e.setValue(!t)}),this._opposite=t),this._opposite},"undefined"!=typeof window&&(window.WatchedValue=i),void 0!==e&&e&&e.exports&&(e.exports=i)}).call(t,i(15)(e))},,function(e,t,i){"use strict";function o(e,t){var i,o;return null===e?t:null===t?e:(i=Math.min(e.min,t.min),o=Math.max(e.max,t.max),{min:i,max:o})}var n,r,s,a,l,c,h,u;Object.defineProperty(t,"__esModule",{value:!0}),n=i(9),r=i(134),s=i(0),a=s.getLogger("Chart.PlotList"),function(e){e[e.NearestLeft=-1]="NearestLeft",e[e.Exact=0]="Exact",e[e.NearestRight=1]="NearestRight"}(l=t.PlotRowSearchMode||(t.PlotRowSearchMode={})),c=30,h=-2e6,u=function(){function e(e){void 0===e&&(e=[]),this._items=[],this._plotNames=[],this._start=0,this._end=0,this._shareRead=!1,this._minMaxCache={},this._rowSearchCache={},this._plotNames=e}return e.prototype.clear=function(){this._items=[],this._start=0,this._end=0,this._shareRead=!1,this._minMaxCache={},this._rowSearchCache={}},e.prototype.plotNames=function(){return this._plotNames},e.prototype.first=function(){return this.size()>0?this._items[this._start]:null},e.prototype.last=function(){return this.size()>0?this._items[this._end-1]:null},e.prototype.firstIndex=function(){return this.size()>0?this._indexAt(this._start):null},e.prototype.lastIndex=function(){return this.size()>0?this._indexAt(this._end-1):null},e.prototype.size=function(){return this._end-this._start},e.prototype.isEmpty=function(){return 0===this.size()},e.prototype.contains=function(e){return null!==this._search(e)},e.prototype.valueAt=function(e){var t=this.search(e);return null!==t?t.value:null},e.prototype.add=function(e,t){var i,o;return this._shareRead?(a.logDebug("add: readonly collection modification attempt"),!1):(i={index:e,value:t},o=this._search(e),this._rowSearchCache={},null===o?(this._items.splice(this._lowerbound(e),0,i),this._start=0,this._end=this._items.length,!0):(this._items[o]=i,!1))},e.prototype.search=function(e,t){var i,o;return void 0===t&&(t=l.Exact),this._rowSearchCache[e]&&this._rowSearchCache[e][t]?this._rowSearchCache[e][t]:null===(i=this._search(e,t))?null:(o={index:this._indexAt(i),value:this._valueAt(i)},this._rowSearchCache[e]=this._rowSearchCache[e]||{},this._rowSearchCache[e][t]=o,o)},e.prototype.fold=function(e,t){var i,o,n,r=t;for(i=this._start;i<this._end;++i)o=this._indexAt(i),n=this._valueAt(i),r=e(o,n,r);return r},e.prototype.findFirst=function(e,t){var i,o,n,r=void 0!==t&&Math.min(this._start+t,this._end)||this._end;for(i=this._start;i<r;++i)if(o=this._indexAt(i),n=this._valueAt(i),e(o,n))return{index:o,value:n};return null},e.prototype.findLast=function(e,t){var i,o,n,r=void 0!==t&&Math.max(this._end-t,this._start)||this._start;for(i=this._end-1;i>=r;--i)if(o=this._indexAt(i),n=this._valueAt(i),e(o,n))return{index:o,value:n};return null},e.prototype.each=function(e){var t,i,o;for(t=this._start;t<this._end&&(i=this._indexAt(t),o=this._valueAt(t),!e(i,o));++t);},e.prototype.reduce=function(e,t){var i,o,n,r=t
;for(i=this._start;i<this._end;++i)o=this._indexAt(i),n=this._valueAt(i),r=e(r,o,n);return r},e.prototype.range=function(t,i){var o=new e;return o._items=this._items,o._start=this._lowerbound(t),o._end=Math.min(this._lowerbound(i)+1,o._items.length),o._shareRead=!0,o},e.prototype.minMaxOnRange2=function(e,t,i){var r,s,a,l,h,u,d,p,f,_,m,g,v,y,b,S,w,T,P;if(this.isEmpty())return null;for(r=null,s=n.ensureNotNull(this.firstIndex()),a=n.ensureNotNull(this.lastIndex()),l=0,h=i;l<h.length;l++){for(u=h[l],d=e-u.offset,p=t-u.offset,d=Math.max(d,s),p=Math.min(p,a),f=Math.ceil(d/c)*c,_=Math.max(f,Math.floor(p/c)*c),m=this._lowerbound(d),g=this._upperbound(Math.min(p,f,t)),v=this._plotMinMax(m,g,u),r=o(r,v),this._minMaxCache[u.index]||(this._minMaxCache[u.index]={}),y=this._minMaxCache[u.index],b=Math.max(f+1,d);b<_;b+=c)S=Math.floor(b/c),w=y[S],void 0===w&&(T=S*c,P=(S+1)*c-1,w=this.minMaxOnRange(T,P,[u]),y[S]=w),r=o(r,w);m=this._lowerbound(_),g=this._upperbound(p),v=this._plotMinMax(m,g,u),r=o(r,v),void 0!==u.baseValue&&null!==r&&(r.min=r.min?Math.min(u.baseValue,r.min):r.min,r.max=r.min?Math.max(u.baseValue,r.max):r.max)}return r},e.prototype.minMaxOnRange=function(e,t,i){var n,r,s,a,l,c,h=null;for(n=0,r=i;n<r.length;n++)s=r[n],a=this._lowerbound(e-s.offset),l=Math.min(this._lowerbound(t-s.offset)+1,this._items.length),this._items[this._end-1]&&this._items[l-1].index>t-s.offset&&(l=a),c=this._plotMinMax(a,l,s),h=o(h,c),void 0!==s.baseValue&&null!==h&&(h.min=h.min?Math.min(s.baseValue,h.min):h.min,h.max=h.max?Math.max(s.baseValue,h.max):h.max);return h},e.prototype.merge=function(e){var t,i,o,n;if(this._shareRead)return a.logDebug("merge: readonly collection modification attempt"),[];for(t=[],t.earliestRow=null,i=0,o=e;i<o.length;i++)n=o[i],this._invalidateCacheForRow(n),(null===t.earliestRow||t.earliestRow.index>n.index)&&(t.earliestRow=n),this.add(n.index,n.value)?t.push({insert:n}):t.push({update:n});return t},e.prototype.addTail=function(e,t){var i,o,n,r;for(void 0===t&&(t=!1),i=0,t&&this._end-this._start>0&&(i=1,this._items[this._end-this._start-1].value=e[0].value),o=i;o<e.length;++o){if(n=e[o],null===(r=this.lastIndex())){a.logError("Can't add tail to the empty plotlist");break}this.add(r+1,n.value)}this._rowSearchCache={}},e.prototype.move=function(e){var t,i,o,n,r,s,l,c;if(this._shareRead)return a.logDebug("move: readonly collection modification attempt"),[];for(t=[],t.earliestRow=null,i=0,o=e;i<o.length;i++)n=o[i],null!==(r=this._search(n.old))&&(s=this._items[r].value,l={index:n.old,value:s},this._items.splice(r,1),this._end=this._items.length,t.push({remove:l}),this._invalidateCacheForRow(l),n.new!==h&&(c={index:n.new,value:s},(null===t.earliestRow||t.earliestRow.index>c.index)&&(t.earliestRow=c),this.add(c.index,c.value)?t.push({insert:c}):t.push({update:c}),this._invalidateCacheForRow(c)));return this._rowSearchCache={},t},e.prototype.remove=function(e){var t,i,o,n,r,s;if(this._shareRead)return a.logDebug("remove: readonly collection modification attempt"),[];if(null===(t=this._search(e,l.NearestRight)))return[]
;if(i=[],o=this._items.splice(t),o.length>0)for(i.earliestRow=o[0],n=0,r=o;n<r.length;n++)s=r[n],i.push({remove:s});return this._end=this._items.length,this._minMaxCache={},this._rowSearchCache={},i},e.prototype.state=function(){return{columns:this._plotNames,start:this._start,end:this._end,data:this._items,shareread:this._shareRead}},e.prototype.restoreState=function(e){if(!e)return void this.clear();this._plotNames=e.columns,this._start=e.start,this._end=e.end,this._shareRead=e.shareread,this._items=e.data,this._minMaxCache={},this._rowSearchCache={}},e.prototype._indexAt=function(e){return this._items[e].index},e.prototype._valueAt=function(e){return this._items[e].value},e.prototype._length=function(){return this._items.length},e.prototype._search=function(e,t){var i,o=this._bsearch(e);return null===o&&t?t<0?(i=this._lowerbound(e),i>this._start&&(i-=1),i!==this._end&&this._indexAt(i)<e?i:null):(i=this._upperbound(e),i!==this._end&&e<this._indexAt(i)?i:null):o},e.prototype._bsearch=function(e){var t=this._lowerbound(e);return t===this._end||e<this._items[t].index?null:t},e.prototype._lowerbound=function(e){return r.lowerbound(this._items,e,function(e,t){return e.index<t},this._start,this._end)},e.prototype._upperbound=function(e){return r.upperbound(this._items,e,function(e,t){return t.index>e},this._start,this._end)},e.prototype._plotMinMax=function(e,t,i){var o,n,r,s=null;for(o=e;o<t;o++)n=this._items[o].value,void 0===(r=n[i.index])||null===r||Number.isNaN(r)||(null===s?s={min:r,max:r}:(r<s.min&&(s.min=r),r>s.max&&(s.max=r)));return s},e.prototype._invalidateCacheForRow=function(e){var t,i=Math.floor(e.index/c);for(t=0;t<this._plotNames.length;t++)this._minMaxCache[t]&&delete this._minMaxCache[t][i]},e}(),t.PlotList=u,t.mergeMinMax=o},function(e,t,i){"use strict";var o=i(26).TVLocalStorage;i(35),TradingView.FeatureToggle={force_prefix:"forcefeaturetoggle.",enableFeature:function(e){o.setItem(this.force_prefix+e,"true")},disableFeature:function(e){o.setItem(this.force_prefix+e,"false")},resetFeature:function(e){o.removeItem(this.force_prefix+e)}},TradingView.isFeatureEnabled=function(e){function t(t){var i=Math.random()<=e[t];return o.setItem(r+t,i),i}function n(e){return-1===["address-autocomplete-google-key","black_friday","black_friday_popup","black_friday_mainpage","coinbase_payments","ios_app_info","symbol_search_server_highlight","text_notes","multiple-sos","datawindow"].indexOf(e)&&-1===e.indexOf("-maintenance")}var r="featuretoggle.";return TradingView.onWidget()||i.e(3).then(function(o){i(49).on("featuretoggle",function(i){e[i.name]=i.state,t(i.name)})}.bind(null,i)).catch(i.oe),function(i){var s,a
;return!(!s&&"local"!==window.environment||!n(i))||(!e[i]||-1!==e[i])&&(!!("true"===o.getItem(TradingView.FeatureToggle.force_prefix+i)||window.is_authenticated&&"undefined"!=typeof user&&user.settings&&"true"===user.settings[TradingView.FeatureToggle.force_prefix+i])||!("false"===o.getItem(TradingView.FeatureToggle.force_prefix+i)||window.is_authenticated&&"undefined"!=typeof user&&user.settings&&"false"===user.settings[TradingView.FeatureToggle.force_prefix+i])&&(!!e[i]&&(1===e[i]||(a=o.getItem(r+i),void 0===a||null===a?t(i):"true"===a))))}}(window.featureToggleState||{}),t.FeatureToggle=TradingView.FeatureToggle,t.isFeatureEnabled=TradingView.isFeatureEnabled},function(e,t,i){"use strict";var o,n=function(){try{this.isAvailable=!0,this.localStorage=window.localStorage,this.localStorage.setItem("tvlocalstorage.available","true")}catch(e){delete this.isAvailable,delete this.localStorage}this._updateLength()};n.prototype.length=0,n.prototype.isAvailable=!1,n.prototype.localStorage={"tvlocalstorage.available":"false"},n.prototype._updateLength=function(){var e,t;if(this.isAvailable)this.length=this.localStorage.length;else{e=0;for(t in this.localStorage)this.localStorage.hasOwnProperty(t)&&e++;this.length=e}},n.prototype.key=function(e){return this.isAvailable?this.localStorage.key(e):Object.keys(this.localStorage)[e]},n.prototype.getItem=function(e){return this.isAvailable?this.localStorage.getItem(e):this.localStorage[e]},n.prototype.setItem=function(e,t){this.isAvailable?this.localStorage.setItem(e,t):this.localStorage[e]=t,this._updateLength()},n.prototype.removeItem=function(e){this.isAvailable?this.localStorage.removeItem(e):delete this.localStorage[e],this._updateLength()},n.prototype.clear=function(){this.isAvailable?this.localStorage.clear():this.localStorage={},this._updateLength()},o=function(e){this.storage=e},o.prototype.getItem=function(e){return Promise.resolve(this.storage.getItem(e))},o.prototype.setItem=function(e,t){return Promise.resolve(this.storage.setItem(e,t))},window.TVLocalStorage=new n,window.TVLocalStorageAsync=new o(window.TVLocalStorage),e.exports={TVLocalStorage:window.TVLocalStorage,TVLocalStorageAsync:window.TVLocalStorageAsync}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e.FREE_PRODUCT_ID="free",e.CUSTOM_INTERVALS="CUSTOM_INTERVALS",e.CHART_STORAGE="CHART_STORAGE",e.MULTIPLE_CHARTS="MULTIPLE_CHARTS",e.MULTIPLE_WATCHLISTS="MULTIPLE_WATCHLISTS",e.IMPORT_WATCHLISTS="IMPORT_WATCHLISTS",e.EXPORT_WATCHLISTS="EXPORT_WATCHLISTS",e.INDICATORS_ON_CHART="INDICATORS_ON_CHART",e.EXTENDED_SESSION="EXTENDED_SESSION",e.PRO_BACKEND="PRO_BACKEND",e.STUDY_ON_STUDY="STUDY_ON_STUDY",e.TICK_BY_TICK_PUSH_DATA="TICK_BY_TICK_PUSH_DATA",e.SERVER_SIDE_ALERTS="SERVER_SIDE_ALERTS",e.ALERTS_TRUE_SMS="ALERTS_TRUE_SMS",e.SCREENER_ALERTS="SCREENER_ALERTS",e.SIMULTANEOUS_CONNECTIONS="SIMULTANEOUS_CONNECTIONS",e.STUDY_TEMPLATES="STUDY_TEMPLATES",e.CAN_EDIT_PUBLIC_CHATS="CAN_EDIT_PUBLIC_CHATS",e.NO_SPONSORED_ADS="NO_SPONSORED_ADS",
e.IDC_AVAILABLE_DELAY="IDC_AVAILABLE_DELAY",e.IDC_NO_NEED_AGREEMENT="IDC_NO_NEED_AGREEMENT"}(t.ProductFeatures||(t.ProductFeatures={}))},function(e,t,i){"use strict";var o,n,r;Object.defineProperty(t,"__esModule",{value:!0}),o=i(10),String.prototype.left=function(e){if(!o.isInteger(e))throw Error("invalid length");if(e>this.length)throw Error("invalid length");return this.substring(0,e)},String.prototype.right=function(e){if(!o.isInteger(e))throw Error("invalid length");if(e>this.length)throw Error("invalid length");return this.substring(this.length-e,this.length)},String.prototype.trimmed=function(){return this.replace(/^\s*/,"").replace(/\s*$/,"")},String.prototype.startsWith=function(e){return!(e.length>this.length)&&this.left(e.length)===e},n=/{(\w+)}/g,r=/{(\d+)}/g,String.prototype.format=function(){var e,t,i,s,a=[];for(e=0;e<arguments.length;e++)a[e]=arguments[e];return t=o.isObject(a[0]),i=t?n:r,s=t?function(e,t){var i=a[0];return void 0!==i[t]?i[t]:e}:function(e,t){var i=parseInt(t,10),o=a[i];return void 0!==o?o:e},this.replace(i,s)}},,function(e,t,i){"use strict";function o(e){if(e)return function(t,i,o){function n(t,i){return i?e[t](a,i):e[t](a)}var r,s,a=$(this);return"get"===t?(r=i,"function"==typeof e[r]?n(r,o):e[r]):e[t]?a.each(function(){return n(t,s)}):a}}function n(e,t){function i(e,t,i){return void 0===i?e[t]():e[t](i)}if(e&&t)return e=""+e,function(o,n,a){var l,c,h;return"get"===o?l=n:(c=n,"object"===(void 0===o?"undefined":r(o))&&void 0===n?(c=o,o="init"):"string"!=typeof o&&(o="init")),"getInstance"===o?$(this).eq(0).data(e):"destroy"===o?(h=$(this).eq(0).data(e))?void("function"==typeof h.destroy?(i(h,"destroy",c),$(this).eq(0).removeData(e)):s.logError("[Block Plugin] "+e+" does not support destroy command")):void console.warn("[Block Plugin] Trying to execute destroy method of "+e+" but it has not been inited"):"get"===o?(h=$(this).eq(0).data(e),h?"function"==typeof h[l]?i(h,l,a):h[l]:void console.warn("[Block Plugin] Trying to get prop or execute method of "+e+" but it has not been inited")):$(this).each(function(){var n=$(this),r=n.data(e);void 0===r&&(r=void 0===c?t(n):t(n,c),n.data(e,r)),"init"!==o&&("function"==typeof r[o]?i(r,o,c):s.logError("[Block Plugin] "+e+" does not support command "+o))})}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=i(0).getLogger("CommonUI.CreateTVBlockPlugin");e.exports.createTvBlockPlugin=o,e.exports.createTvBlockWithInstance=n},function(e,t,i){"use strict";(function(t){function o(e,t,i,o){this._map=$.extend({},this._map,o),t&&(t=this.unpackLevels(t)),r.call(this,e,t,i),this.updateCollectibleProperty()}var n=i(10).isSameType,r=i(7).DefaultProperty,s=i(773);inherit(o,r),o.prototype.state=function(e,i){e=e||[],e.push("__collectibleLines");var o=t.prototype.state.call(this,e);return i?o:this.packLevels(o)},o.prototype.clone=function(){var e=this.state()
;return this.__collectibleLines&&(e.__collectibleLines=this.__collectibleLines.state()),new o(this._defaultName,e)},o.prototype.merge=function(e){t.prototype.merge.call(this,this.unpackLevels(e)),this.updateCollectibleProperty()},o.prototype._map={prefixes:[""],range:[0,0],names:["coeff","color","visible","linestyle","linewidth"],typecheck:{pack:Object,unpack:Array}},o.prototype._packLvlTpl=function(){return[]},o.prototype._unpackLvlTpl=function(){return{}},o.prototype._packLvlFill=function(e,t,i,o){return o.push(i[t]),o},o.prototype._unpackLvlFill=function(e,t,i,o){return o[t]=i[e],o},o.prototype._iterateLevels=function(e,t){var i,o,r,s,a;for(i in this._map.prefixes)for(o=(this._map.prefixes[i]||"")+"level",r=this._map.range[0];r<=this._map.range[1];r++)if(e[o+r]&&n(e[o+r],t.typecheck())){s=t.tpl();for(a in this._map.names)s=t.fill(a,this._map.names[a],e[o+r],s);e[o+r]=s}return e},o.prototype.packLevels=function(e){return this._iterateLevels(e,{tpl:this._packLvlTpl,fill:this._packLvlFill,typecheck:this._map.typecheck.pack})},o.prototype.unpackLevels=function(e){return this._iterateLevels(e,{tpl:this._unpackLvlTpl,fill:this._unpackLvlFill,typecheck:this._map.typecheck.unpack})},o.prototype.saveDefaults=function(){TradingView.saveDefaults(this._defaultName,this.state(this._exclusions,!0))},o.prototype.updateCollectibleProperty=function(){var e,t;this.__collectibleLines&&(e=this,t=[],this.__collectibleLines._childs.forEach(function(i){var o,n=e.__collectibleLines[i].value(),r=n.split("."),s=e[r[0]];for(o=1;o<r.length&&s;++o)s=s[r[o]];s&&t.push({property:s.color,defaultValue:s.color.value()})}),this.collectibleColors?this.collectibleColors.reloadProperties(t):this.collectibleColors=new s(t))},e.exports=o}).call(t,i(37))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STATUS_OFFLINE=0,t.STATUS_RESOLVING=1,t.STATUS_LOADING=2,t.STATUS_READY=3,t.STATUS_INVALID_SYMBOL=4,t.STATUS_SNAPSHOT=5,t.STATUS_EOD=6,t.STATUS_PULSE=7,t.STATUS_DELAYED=8,t.STATUS_DELAYED_STREAMING=9,t.STATUS_NO_BARS=10,t.STATUS_REPLAY=11,t.STYLE_BARS=0,t.STYLE_CANDLES=1,t.STYLE_LINE=2,t.STYLE_LINE_TYPE_MARKERS=0,t.STYLE_LINE_TYPE_STEP=1,t.STYLE_LINE_TYPE_SIMPLE=2,t.STYLE_AREA=3,t.STYLE_RENKO=4,t.STYLE_KAGI=5,t.STYLE_PNF=6,t.STYLE_PB=7,t.STYLE_HEIKEN_ASHI=8,t.STYLE_HOLLOW_CANDLES=9,t.STYLE_BASELINE=10,t.STYLE_SHORT_NAMES={},t.STYLE_SHORT_NAMES[t.STYLE_BARS]="bar",t.STYLE_SHORT_NAMES[t.STYLE_CANDLES]="candle",t.STYLE_SHORT_NAMES[t.STYLE_HOLLOW_CANDLES]="hollowCandle",t.STYLE_SHORT_NAMES[t.STYLE_LINE]="line",t.STYLE_SHORT_NAMES[t.STYLE_AREA]="area",t.STYLE_SHORT_NAMES[t.STYLE_RENKO]="renko",t.STYLE_SHORT_NAMES[t.STYLE_PB]="pb",t.STYLE_SHORT_NAMES[t.STYLE_KAGI]="kagi",t.STYLE_SHORT_NAMES[t.STYLE_PNF]="pnf",t.STYLE_SHORT_NAMES[t.STYLE_HEIKEN_ASHI]="ha",t.STYLE_SHORT_NAMES[t.STYLE_BASELINE]="baseline",t.SYMBOL_STRING_DATA={},t.SYMBOL_STRING_DATA[t.STYLE_RENKO]={type:"BarSetRenko@tv-prostudies"},t.SYMBOL_STRING_DATA[t.STYLE_PB]={type:"BarSetPriceBreak@tv-prostudies"},t.SYMBOL_STRING_DATA[t.STYLE_KAGI]={
type:"BarSetKagi@tv-prostudies"},t.SYMBOL_STRING_DATA[t.STYLE_PNF]={type:"BarSetPnF@tv-prostudies"},t.SYMBOL_STRING_DATA[t.STYLE_HEIKEN_ASHI]={type:"BarSetHeikenAshi@tv-basicstudies"}},function(e,t,i){"use strict";function o(e,t,i){var o,n,r,s,c;if(t=t||0,!a(e))return i?l.rgbaToString(l.rgba(l.parseRgb(e),l.normalizeAlphaComponent(1-t/100))):e;if(t<0&&t>100)throw Error("invalid transparency");return o=l.parseRgb(e),n=o[0],r=o[1],s=o[2],c=l.normalizeAlphaComponent(1-t/100),l.rgbaToString([n,r,s,c])}function n(e){return a(e)?e:l.rgbaToString(l.rgba(l.parseRgb(e),l.normalizeAlphaComponent(1)))}function r(e){var t=l.parseRgb(e).map(function(e){return e/=255,e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)});return+(.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3)}function s(e,t){return l.rgbaToString(l.blendRgba(l.parseRgba(e),l.parseRgba(t)))}function a(e){return 0===e.indexOf("#")}Object.defineProperty(t,"__esModule",{value:!0});var l=i(55);t.generateColor=o,t.resetTransparency=n,t.getLuminance=r,t.blendColors=s,t.isHexColor=a},function(e,t,i){"use strict";(function(t,o,n,r){function s(e,t,i,o){this._study=e,this.m_series=t,this.m_model=i,this._plotName=o,this._visible=!1,this._points=[new ie(0,0)],this._invalidated=!0,this._lineRenderer=new P}function a(){return{visible:!0,color:"#0496FF",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:2,plottype:pe.PlotType.Line,histogramBase:0,transparency:50,trackPrice:!1,joinPoints:!1}}function l(e,t,i,o){var n,r;return o.isTVScriptStrategy?n="StudyStrategy":(r="study_"+(o.classId||o.shortId),n=r in TradingView?r:"Study"),new TradingView[n](e,t,i,o)}function c(e,t,i,o,n){return h(e,t,i,o,de.getStudyPropertyRootName(e),n)}function h(e,t,i,o,n,r){var s,a,l,c,h,u=p(e,t,i,o);for(r instanceof v&&(s=de.getSourceInputIds(e),s.length>0&&(a=s[0],u.inputs[a]="{pid}$0")),l=new ne(n,u,!0),l.addExclusion("visible"),l.addExclusion("precision"),l.addExclusion("minTick"),c=0;c<e.inputs.length;++c)h=e.inputs[c],h.isHidden&&(l.addExclusion("inputs."+c),l.addExclusion("inputs."+h.id));return l}function u(e,t,i,o,n,r){return d(e,t,i,o,n,de.getStudyPropertyRootName(e),r)}function d(e,t,i,o,n,r,s){var a,l,c,h=f(e,t,i,o,n),u=new ne(r,h,!0);for(u.addExclusion("visible"),u.addExclusion("precision"),u.addExclusion("minTick"),a=t||e,l=0;l<a.inputs.length;++l)c=a.inputs[l],c.isHidden&&(u.addExclusion("inputs."+l),u.addExclusion("inputs."+c.id));return u}function p(e,o,n,r){var s,a,l,c,h,u,d,p,f=i(144);if(de.versionOf(e)<1)throw Error("This function cannot work with metainfo of the old format version. Required format version >= 1");return s=TradingView.clone(defaults("study")),_(s,e),a=de.getStudyPropertyRootName(e),l=TradingView.clone(defaults(a,r)),e.isTVScript&&e.TVScriptSourceCode!==l.TVScriptSourceCode&&(l=TradingView.clone(TradingView.factoryDefaults(a,r))),TradingView.merge(s,l),o&&(S(!(o instanceof t),"propsState should not be an instance of Property"),TradingView.merge(s,o)),c=TradingView.clone(e),h={},f.mergeInputsObjPart(h,c.defaults.inputs),f.mergeInputsObjPart(h,s.inputs),s.inputs=h,delete c.inputs,
delete c.defaults.inputs,u={},TradingView.merge(u,c.defaults),TradingView.merge(u,TradingView.factoryDefaults("study_"+c.id)),TradingView.merge(u,s),TradingView.merge(u,c),delete u.defaults,s=u,d=null!==n?n.model().getStudyShiftColorStartOffset():void 0,p=m(n,e),TradingView.merge(s,g(s,p,d)),o&&TradingView.merge(s.styles,o.styles),s}function f(e,t,o,n,r){var s,a,l,c,h,u,d=i(144);return e.version&&o.version&&e.version!==o.version&&_e.logWarn("Serialized metaInfo version "+e.version+" is not equal to the saved state version "+o.version),s=TradingView.clone(defaults("study")),TradingView.merge(s,TradingView.factoryDefaults("study_"+e.id)),_(s,e),TradingView.merge(s,o),s=r.updateStudyState(s,e,t),a=TradingView.clone(t||e),a&&de.versionOf(a)>=1&&(l={},d.mergeInputsObjPart(l,a.defaults.inputs),d.mergeInputsObjPart(l,s.inputs),s.inputs=l,delete a.inputs,delete a.defaults.inputs,c={},TradingView.merge(c,a.defaults),TradingView.merge(c,TradingView.factoryDefaults("study_"+a.id)),TradingView.merge(c,s),delete a.defaults,TradingView.merge(c,a),s=c),h=null!==n?n.model().getStudyShiftColorStartOffset():void 0,u=m(n,a),TradingView.merge(s,g(s,u,h)),s}function _(e,t){var i,o,n,r;if(t.plots)for(i=0;i<t.plots.length;i++)o=t.plots[i].id,(n=t.plots[i].type)!==pe.PlotTypes.COLORER&&(r=a(),n===pe.PlotTypes.COLORER&&(r.transparency=0),r.plottype=n,r.title=o,e.styles&&o in e.styles&&TradingView.merge(r,e.styles[o]),e.styles[o]=r)}function m(e,t){var i,o,n,r,s=0;if(e)for(i=0;i<e.dataSources().length;i++)o=e.dataSources()[i],o.metaInfo&&o.metaInfo()&&(n=o.metaInfo().id===t.id,r=(o.metaInfo().pine&&o.metaInfo().pine.version)===(t.pine&&t.pine.version),n&&r&&s++);return s}function g(e,t,i){var o,n;if(!t)return e;for(o in e.styles)(n=e.styles[o].color)&&(e.styles[o].color=oe(n,t,i));return e}function v(e,t,r,s){var a,l,c,h,u,d,p,f,_,m,g=i(209);for(this._titleCache={},this._resolvedSymbols={},this._priceAxisViewsBase=[],this._paneViews=[],this._hlinesPriceAsisViews=[],this._horizlinesPriceAsisViews=[],H.call(this,e),this.m_data=new ce,this._graphics=new q(s),this._plotOffsets={},this._plotOffsetsMetaInfoOverride={},this._model=e,this._chartApi=e._chartApi,this._series=r instanceof TradingView.Series?r:this._model.mainSeries(),r instanceof v&&(this._source=r,this._isChildStudy=!0,this._source.setChild(this)),this._numericFormatter=new ae,this._metaInfo=s,this._properties=t,this._properties.listeners().subscribe(this,this.changeStyles),this._properties.visible.listeners().subscribe(this,this.visibleChanged),this._properties.visible.listeners().subscribe(this,this.processHibernate),a=0;a<this._metaInfo.plots.length;a++)l=this._metaInfo.plots[a].id,null!=(c=this.properties().styles[l])&&null!=c.visible&&c.visible.listeners().subscribe(this,this.processHibernate);for(h in this._metaInfo.graphics)for(u in this._metaInfo.graphics[h])d=this._properties.graphics[h][u],d.visible&&d.visible.listeners().subscribe(this,this.processHibernate);if(this._showStudyArgumentsProperty=this.model().properties().paneProperties.legendProperties.showStudyArguments,
this._turnaroundCounter=1,this._turnaround="st"+this._turnaroundCounter,this._status="",this._plotFields=[],p=this.metaInfo().plots)for(a=0,f=p.length;a<f;a++)u=p[a].id,this._plotFields.push(u);this.clearData(),this._studyModified=!1,this._tagsChanged=new o,this.createViews(),_=this,this._handler=function(e){_.onData(e)},this._handler.isTVScriptStrategy=this._metaInfo.isTVScriptStrategy,this._createFormatter(),_=this,this._properties.precision.listeners().subscribe(null,function(){_._createFormatter(),_._model.invalidate(new G(G.FULL_UPDATE))}),this._showStudyArgumentsProperty.listeners().subscribe(this,this.invalidateTitleCache),this._properties.description.listeners().subscribe(this,this.invalidateTitleCache),this._properties.shortDescription&&this._properties.shortDescription.listeners().subscribe(this,this.invalidateTitleCache),n.enabled("update_study_formatter_on_symbol_resolve")&&e.mainSeries().onSymbolResolved().subscribe(this,v.prototype._createFormatter),_=this,m={},this._simplePlotsCount=s.plots.filter(function(e,t){if(_.isLinePlot(t))return!0;if(_.isOHLCSeriesPlot(t)){var i=_.metaInfo().plots[t].target;return!m[i]&&(m[i]=i,!0)}return!1}).length,this._properties.showInDataWindow.listeners().subscribe(e,g.prototype.fullUpdate),this.hasBarColorer()&&this._properties.visible.listeners().subscribe(e.mainSeries(),TradingView.Series.prototype.invalidateBarStylesCache),this.onStart=new o,this._childStudyByRebind=new o}function y(e,t){return e&&e[t]&&e[t].hasOwnProperty("showLast")?e[t].showLast.value():null}var b=i(9),S=b.assert,w=b.ensureNotNull,T=i(273).StudyBarColorer,P=i(156).HorizontalLineRenderer,C=i(657),x=C.BandPaneView,E=C.BandBackgroundPaneView,L=C.HlineFillPaneView,I=i(475).StudyPriceAxisView,A=i(115),k=A.StudyPaneView,M=A.StudyBackgroundPaneView,O=A.StudyPlotShapesPaneView,D=A.StudyPlotCharsPaneView,V=A.StudyPlotArrowsPaneView,R=A.StudyPlotBarsPaneView,B=A.StudyPlotCandlesPaneView,N=i(674),z=N.PlotFillPaneView,F=N.AreaBackgroundPaneView,H=i(52).PriceDataSource,W=i(181),U=i(182).StudyDataWindowView,j=i(158),q=i(183),G=i(40),Y=i(10).parseJSONorNot,X=i(117).ChartApiInterface,K=i(57).Telemetry,J=i(112),Z=i(43),Q=i(570).formatCallstudyArg,ee=i(571),te=i(277).FormattersSerializer,ie=i(8).Point,oe=i(55).shiftColor,ne=i(7).DefaultProperty,re=i(16).PriceFormatter,se=i(71).VolumeFormatter,ae=i(66).NumericFormatter,le=i(24),ce=le.PlotList,he=le.PlotRowSearchMode,ue=le.mergeMinMax,de=i(39),pe=i(92),fe=i(2).propertyPages,_e=i(0).getLogger("Chart.Study");s.prototype.update=function(){this._invalidated=!0},s.prototype.updateImpl=function(){this._visible=!1;var e=this._study.lastValueData(this._plotName,!0);e.noData||(this._visible=!0,this._points=[new ie(0,e.coordinate)],this._color=e.color)},s.prototype.renderer=function(){this._invalidated&&(this.updateImpl(),this._invalidated=!1);var e={};return e.width=this.m_model.timeScale().width(),e.height=this._study.priceScale().height(),e.points=this._points,e.color=this._color,e.linewidth=this._study.properties().styles[this._plotName].linewidth.value(),
e.linestyle=CanvasEx.LINESTYLE_DOTTED,e.visible=this._visible,this._lineRenderer.setData(e),this._lineRenderer},inherit(v,H),TradingView.Study=v,i(892),v.prototype.lastValueData=function(e,t,i){var o,n,r,s,a,l,c,h,u,d,p,f,_,m,g,v,y,b,S,w,T,P,C={noData:!0};if(this._model.timeScale().isEmpty()||null==this.priceScale()||this.priceScale().isEmpty()||this.data().isEmpty())return C;if(null===(o=this._model.timeScale().visibleBars()))return C;if(!this.properties().visible.value())return C;if(n=this.properties().styles,r=this.properties().ohlcPlots,n&&n[e]&&(s=n[e]),r&&r[e]&&(s=r[e]),!s||!s.visible.value())return C;if(a=this.offset(e),null==(l=this.nearestIndex(o.lastBar()-a,he.NearestLeft))||void 0===l)return C;for(h=this.metaInfo().plots,c=0;c<h.length&&!(h[c].id===e||this.isOHLCClosePlot(c)&&h[c].target===e);c++);if(u=this._lastNonEmptyPlotRow(c),d=null!==u&&o.contains(u.index),p=null!==u?u.value:null,!(f=t||d?p:this.data().valueAt(l))||!isNumber(f[c+1]))return C;for(_={noData:!1},m=null,g=null,y=0;y<h.length;y++)h[y].target===e&&(this.isSelfColorerPlot(y)||this.isOHLCColorerPlot(y))&&(m=y,g=this.metaInfo().palettes[h[y].palette],v=this.properties().palettes[h[y].palette]);if(b=f[c+1],i&&(_.price=b),this.priceScale().properties().percentage.value()){if(!(S=this.firstValue(!0)))return C;b=this.priceScale().priceRange().convertToPercent(b,S)}return _.text=this.priceScale().formatter().format(b),w=s.color.value(),m&&f.length>m+1?(T=f[m+1],void 0!==T&&null!==T?(P=g.valToIndex?g.valToIndex[T]:T,_.color=v.colors[P].color.value()):_.color=w):_.color=w,_.floatCoordinate=this.priceScale().priceToCoordinate(b,!0),_.coordinate=Math.round(_.floatCoordinate),_.item=f,_},v.prototype.series=function(){return this._series},v.prototype.model=function(){return this._model},v.prototype._invalidateLastNonEmptyPlotRowCache=function(){this._lastNonEmptyPlotRowCache={}},v.prototype.clearData=function(){this._invalidateLastNonEmptyPlotRowCache(),this.m_data=new ce(this._plotFields),this._graphics=new q(this._metaInfo),this._plotOffsets={}},v.prototype.onTagsChanged=function(){return this._tagsChanged},v.prototype.properties=function(){return this._properties},v.prototype.state=function(e){var t,i,o,n,r=TradingView.className(this.constructor),s={type:r,id:this.id(),state:this.properties().state(),zorder:this.zorder()};for(this.metaInfo()instanceof de?s.metaInfo=TradingView.clone(this.metaInfo().state()):(s.metaInfo=TradingView.clone(this.metaInfo()),s.metaInfo.id=de.parseIdString(s.metaInfo.id+(s.metaInfo.version?"-"+s.metaInfo.version:"")).fullId),e&&(s.data=this.m_data.state(),s.data.symbols=this._resolvedSymbols,s.data.graphics=this._graphics.graphics(),s.data.plotOffsets=this._plotOffsets),this.ownerSource()&&(s.ownerSource=this.ownerSource().id()),t=0;t<this._metaInfo.inputs.length;t++)"bar_time"===this._metaInfo.inputs[t].type&&(i=this._metaInfo.inputs[t].id,(o=s.state.inputs[i])<0&&(n=this._rightOffsetToUnixTime(-o),s.state.inputs[i]=n&&n>=0?n:0));return this._isChildStudy&&de.patchChildStudyMetaInfoState(s),s},
v.prototype._plotsForAlert=function(){var e=this,t=this._metaInfo,i=[pe.PlotTypes.LINE,pe.PlotTypes.SHAPES,pe.PlotTypes.CHARS,pe.PlotTypes.ARROWS,pe.PlotTypes.OHLC_OPEN,pe.PlotTypes.OHLC_HIGH,pe.PlotTypes.OHLC_LOW,pe.PlotTypes.OHLC_CLOSE];return t.plots.map(function(e,t){return e.pinePlotIndex=t,e}).filter(function(e){return-1!==i.indexOf(e.type)}).map(function(i){var o={id:i.id,type:i.type,pinePlotIndex:i.pinePlotIndex,offset:e.offset(i.id)};return t.styles&&void 0!==t.styles[i.id]&&(o.title=t.styles[i.id].title||""),i.target&&t.ohlcPlots&&t.ohlcPlots[i.target]&&(o.ohlcTitle=t.ohlcPlots[i.target].title),o})},v.prototype._collectDepsForAlert=function(){var e,t,i,o,n,r,s=[this].concat(this.getAllOwnerSources()).filter(function(e){return e instanceof TradingView.Study}),a=[],l=void 0,c=void 0;for(e=s.length-1;e>=0;e--)t=s[e],i=de.cutFullId(t._metaInfo.id),o=t._getStudyIdWithLatestVersion(),c=t.inputs(),n=t._metaInfo.inputs.filter(function(e){return"source"===e.type}).map(function(e){return e.id}),ee.patchChildIdInInputs(c,l,n),r=ee.idForAlert(i,c),a.push({id:r,study:o,inputs:c}),l=r;return{idForAlert:l,inputsForAlert:c,studyDependencies:a.reverse()}},v.prototype.idForAlert=function(){return this._collectDepsForAlert().idForAlert},v.prototype.toDepsObjectForAlert=function(e){return this._collectDepsForAlert().studyDependencies},v.prototype.dependenciesForAlerts=function(){var e=this;return this.getAllOwnerSources().filter(function(e){return e instanceof TradingView.Study}).map(function(t){var i,o,n=t.inputs(),r=TradingView.StudyMetaInfo.cutDollarHash(t._metaInfo.fullId);return"tv-scripting"===t._metaInfo.productId&&(i=TradingView.StudyMetaInfo.findStudyMetaInfo(e._model._studiesMetaData,"Script@tv-scripting").fullId,r=i),o={id:t._studyId,study:r,inputs:n},null!=t._metaInfo.pine&&(o.scriptIdPart=t._metaInfo.scriptIdPart,o.scriptVersion=t._metaInfo.pine.version),o})},v.prototype.stateForAlert=function(){var e=this._metaInfo,t=this._plotsForAlert(),i=this._collectDepsForAlert(),o=i.idForAlert,n=i.studyDependencies,r=i.inputsForAlert,s=(this.priceScale()||this.model().mainSeries().priceScale()).formatter();return s=s?te.serialize(s):null,{id:o,uniqueId:o,type:TradingView.className(this.constructor),title:TradingView.clean(this._title(!1,null,!1),!0),shortTitle:TradingView.clean(this._title(!0,null,!1),!0),shortDescription:TradingView.clean(e.shortDescription||"Study",!0),fullId:e.fullId,isTVScript:e.isTVScript,plots:t,inputs:r,alerts:e.alerts,scriptIdPart:e.scriptIdPart,scriptVersion:e.pine?e.pine.version:"-1",callStudyDependencies:Q(this.dependenciesForAlerts()),studyDependencies:n,formatter:s}},v.prototype.isSavedInStudyTemplates=function(){for(var e=0;e<this._metaInfo.inputs.length;e++)if("bar_time"===this._metaInfo.inputs[e].type)return!1;return!0},v.prototype.restoreData=function(e){this._invalidateLastNonEmptyPlotRowCache(),this.m_data.restoreState(e),this._resolvedSymbols=e.symbols,this._graphics.setGraphics(e.graphics),this._postProcessGraphics(),this._plotOffsets=e.plotOffsets},v.prototype.restart=function(){
this._restarting=!0,this.clearData(),n.enabled("stop_study_on_restart")&&this.stop(),setTimeout(this.start.bind(this),0)},v.prototype.stop=function(e){if(!0===e&&this._children)for(var t=0;t<this._children.length;++t)this._children[t].stop(!0);this._chartApi&&this._chartApi.connected()&&this._studyId&&this._chartApi.removeStudy(this._studyId,this._handler,this._isChildStudy),n.enabled("update_study_formatter_on_symbol_resolve")&&this._model.mainSeries().onSymbolResolved().unsubscribe(this,v.prototype._createFormatter),this._studyId=null,this.clearData(),this._unsubscribeExtendedHours(),this.recalculate()},v.prototype._resolveSymbol=function(e){var t=function(i,o){this._chartApi.resolveSymbol(this._makeNextSymbolId(),i,function(i){switch(i.method){case"symbol_resolved":this._resolvedSymbols[e]=i.params[1],this.invalidateTitleCache(!0),o.resolve(e);break;case"symbol_error":if("permission denied"===i.params[1]&&i.params[2])switch(i.params[2]){case TradingView.Series.PD_REASON_EXTENDED_HOURS:break;case TradingView.Series.PD_REASON_SYMBOL:if(i.params[3])return void t(i.params[3],o);break;default:return void t(i.params[2],o)}K.sendReport("charts","symbol_error"),o.reject(e)}}.bind(this))}.bind(this),i=$.Deferred();return t(e,i),i.promise()},v.prototype._allSymbolsAreResolved=function(){var e,t,i,o,n=$.Deferred(),r=[];for(e=0;e<this._metaInfo.inputs.length;e++)"symbol"===this._metaInfo.inputs[e].type&&(t=this._metaInfo.inputs[e].id,i=this._properties.inputs[t].value(),this._resolvedSymbols[i]||(o=this._resolveSymbol(i),r.push(o)));return r.length>0?$.when.apply($,r).done(function(){0!==this._studyId&&this.stop(!0),this.start(!0),n.resolve("All symbols are resolved now")}.bind(this)).fail(function(e){this._status=$.t("Invalid Symbol"),this.stop(!0),this._model.updateSource(this),n.reject("Invalid symbol, "+e)}.bind(this)):n.resolve("There are no symbols to resolve"),n.promise()},v.prototype._allInputsAreValid=function(){var e,t,i;for(e=0;e<this._metaInfo.inputs.length;e++)if("bar_time"===this._metaInfo.inputs[e].type&&(t=this._metaInfo.inputs[e].id,void 0===(i=this._properties.inputs[t].value())||null==i))return!1;return!0},v.prototype.sourceId=function(){return this._studyId},v.prototype.source=function(){return this._source||this._series},v.prototype.ownerSource=function(){return this._isChildStudy?this._source:H.prototype.ownerSource.call(this)},v.prototype.getAllOwnerSources=function(){for(var e=[],t=this.ownerSource();null!=t;)e.push(t),t=t.ownerSource();return e},v.prototype.isChildStudy=function(){return!!this._isChildStudy},v.prototype.setChild=function(e){e instanceof v&&e.source()===this&&(this._children||(this._children=[]),-1===this._children.indexOf(e)&&this._children.push(e))},v.prototype.unsetChild=function(e){if(e instanceof v&&e.source()===this&&this._children){var t=this._children.indexOf(e);~t&&this._children.splice(t,1)}},v.prototype.hasChildren=function(){return!(!this._children||!this._children.length)},v.prototype.getAllChildren=function(){var e,t,i,o;if(!Array.isArray(this._children))return[]
;for(e=this._children.slice(),t=0;t<e.length;++t)for(i=e[t].getAllChildren(),o=0;o<i.length;++o)~e.indexOf(i[o])||e.push(i[o]);return e},v.prototype._debugId=function(){var e=[];return this._studyId&&e.push(this._studyId),e.push(this._metaInfo.fullId),e.push(this._metaInfo.description),JSON.stringify({study:e})},v.prototype.isStarted=function(){return!!this._studyId},v.prototype.isRestarting=function(){return!!this._restarting},v.prototype.isVisible=function(){var e,t,i;if(!this.properties().visible.value())return!1;if(this._metaInfo.plots.length>0)return!0;for(e in this._metaInfo.graphics)for(t in this._metaInfo.graphics[e])if(i=this.properties().graphics[e][t],!i.visible||i.visible.value())return!0;return!!this._metaInfo.isTVScriptStrategy},v.prototype.start=function(e,t){var i,o=this._model.mainSeries();if(!o.isStarted())return void o.onCompleted().subscribe(this,function(){this.start(e,t)},!0);this._isChildStudy&&this._source.isHibernated()&&this._source.start(),i=!this._isChildStudy&&!this.hasChildren()&&!this.isVisible(),!this._chartApi||!this._chartApi.connected()||i&&!0!==t||this._allSymbolsAreResolved().done(function(i){this._startAfterSymbolsResolved(e,t)}.bind(this)).fail(function(e){_e.logError("ERROR: "+this._debugId()+" start failed, "+e),delete this._restarting}.bind(this))},v.prototype._getStudyIdWithLatestVersion=function(){var e=de.cutDollarHash(this._metaInfo.id),t=e;return["Script@tv-scripting","StrategyScript@tv-scripting","ESD@tv-scripting"].indexOf(e)>=0?t+="-72!":t+="-"+this._metaInfo.version,t},v.prototype._startAfterSymbolsResolved=function(e,t){var i,o;if(!this.isStarted()||this._restarting){if(this._isChildStudy){if(!this._source.isStarted()||this._source.isRestarting())return void this._source.onStart.subscribe(this,this._startAfterSymbolsResolved,!0);de.setChildStudyMetaInfoPropertiesSourceId(this._metaInfo,this._source.sourceId(),this._properties)}if(this._studyId=v.makeNextStudyId(),delete this._restarting,this._allInputsAreValid()&&(this._inputs=this.inputs(),i=this._getStudyIdWithLatestVersion(),this._chartApi.createStudy(this._studyId,this._turnaround,this._isChildStudy?this._source.sourceId():this._series._seriesId,i,this._inputs,this._handler,this._isChildStudy),this._studyName=i,this._subscribeExtendedHours(),this.onStart.fire(this._studyId),!0===e&&this._children))for(o=0;o<this._children.length;++o)this._children[o].start(!0,t)}},v._nextSymbolId=0,v.prototype._makeNextSymbolId=function(){return"ss_"+ ++v._nextSymbolId},v._nextStudyId=0,v.makeNextStudyId=function(){return"st"+ ++v._nextStudyId},v.prototype._rightOffsetToUnixTime=function(e){var t;return this._series.bars().size()>=e&&(t=w(this._series.bars().lastIndex())-e,w(this._series.bars().valueAt(t))[TradingView.TIME_PLOT]),null},v.prototype.getSymbolString=function(e){return this._series&&this._series.extendedHours.value()?"="+JSON.stringify({symbol:e,session:"extended"}):e},v.prototype.inputsForGUI=function(){return this.inputs({symbolsForDisplay:!0,skipHiddenInputs:!0,skipFakeInputs:!1,fakeInputsForDisplay:!0,
asObject:!1})},v.prototype.inputsForAlert=function(){var e=this.offset(),t=this.inputs();return e&&t.push(e),t},v.prototype.inputs=function(e){var t={symbolsForDisplay:!1,symbolsForChartApi:!0,skipHiddenInputs:!1,skipFakeInputs:!1,asObject:!0};return TradingView.merge(t,e),this._buildInputs(t)},v.prototype._buildInputs=function(e){var t,i;S(!!e,"options not set"),t={};try{t=this._prepareInputs(e)}catch(e){_e.logWarn("Failed to prepare study inputs: "+e)}return e.asObject?(i={},Object.keys(t).forEach(function(e){null!=t[e]&&(i[e]=t[e])}),i):(i=[],Object.keys(t).forEach(function(e){null!=t[e]&&i.push(t[e])}),i)},v.prototype._prepareInputs=function(e){var t,i,o,r;for(S(!!e,"options not set"),t={},i=0;i<this._metaInfo.inputs.length;i++)o=this._metaInfo.inputs[i],o.isFake&&e.skipFakeInputs||o.isHidden&&e.skipHiddenInputs||"bool"===o.type&&e.skipHiddenInputs&&n.enabled("dont_show_boolean_study_arguments")||(r=this._prepareInput(o,e),t[o.id]=TradingView.clone(r));return t},v.prototype._prepareInput=function(e,t){var i=this._prepareInputValue(e,t);return!e.isFake||t.fakeInputsForDisplay?i:t.onlyAtomValues?i:{v:i,f:!0,t:e.type}},v.prototype._prepareInputValue=function(e,t){var i,o,n,r,s=e.id;return"symbol"===e.type?(i=this._properties.inputs[s].value(),t&&t.symbolsForDisplay?this._resolvedSymbols&&this._resolvedSymbols[i]&&(i=this._resolvedSymbols[i].name+", "+this._resolvedSymbols[i].exchange):(this._resolvedSymbols&&this._resolvedSymbols[i]&&(o=this._resolvedSymbols[i],i=o.ticker||o.full_name),t&&t.symbolsForChartApi&&(i=this.getSymbolString(i))),i):"bar_time"===e.type?(n=this._properties.inputs[s].value(),n<0&&(r=this._rightOffsetToUnixTime(-n),n=r&&r>=0?r:n),n):this._metaInfo.isTVScript||this._metaInfo.pine?"text"===s?this._metaInfo.defaults.inputs.text:"pineId"===s?this._metaInfo.scriptIdPart:"pineVersion"===s?this._metaInfo.pine?this._metaInfo.pine.version:"-1":this._properties.inputs[s].value():this._properties.inputs[s].value()},v.prototype._rebindToSource=function(e,t){var i,o,n,r,s,a,l,c,h,u,d;if(this._isChildStudy){if(this._source.unsetChild(this),delete this._nonPriceParent,o=null,e===this._model.mainSeries()){for(n=this._model.studiesMetaData(),s=0;s<n.length;++s)if(this._metaInfo.id===n[s].id){r=n[s];break}if(!r)return void _e.logError("Can not find "+this._metaInfo.id+" meta info");delete this._source,delete this._isChildStudy,delete this._ownerSource,this._metaInfo=r.state(!0),i=this._series._seriesId,o=X.REBIND_STUDY_CHILD_TO_STANDALONE}else{if(!(e instanceof v))return _e.logError("Unable to rebind study to source of this type"),!1;this._ownerSource=e,this._source=e,i=this._source.sourceId(),this._source.setChild(this),this._source.isHibernated()&&this._source.start()}this._chartApi.rebindStudy(this._studyId,this._turnaround,i,this._studyName,t,this._handler,o)}else{if(!(e instanceof v))return _e.logError("Unable to rebind study to source of this type"),!1;if(a=e.isHibernated(),a&&e.start(),l=!1,
this._canCreateStudyWithRebindType(X.REBIND_STUDY_STANDALONE_TO_CHILD)?l=this._chartApi.rebindStudy(this._studyId,this._turnaround,e.sourceId(),this._studyName,t,this._handler,X.REBIND_STUDY_STANDALONE_TO_CHILD):Z.createGoProDialog({feature:"studyOnStudy"}).then(function(e){e.open()}),!l)return a&&e.stop(),!1;this._metaInfo=TradingView.clone(this._metaInfo),this._isChildStudy=!0,this._ownerSource=e,this._source=e,this._source.setChild(this),this._childStudyByRebind.fire()}return c=this.m_priceScale,h=e.priceScale(),c!==h&&(u=this._model.paneForSource(this),d=this._model.paneForSource(e),u===d&&(~c.dataSources().indexOf(this)&&c.removeDataSource(this),h.addDataSource(this),this.setPriceScale(h))),!0},v.prototype.childStudyByRebind=function(){return this._childStudyByRebind},v.prototype._changeInputsImpl=function(e,t){var i,o,n,r,s=this.source(),a=this._properties.inputs&&this._properties.inputs.state(),l=de.getSourceIdByInputs(this._metaInfo.inputs,a),c=!0;if(l)if("high"===l||"open"===l||"low"===l||"close"===l||"hl2"===l||"ohl3"===l||"ohlc4"===l)s=this._model.mainSeries();else for(i=this._model.dataSources(),o=0;o<i.length;++o)if(i[o]instanceof v&&i[o].sourceId()===l){s=i[o];break}if(s!==this.source()){if(!this._rebindToSource(s,e)&&a){for(n=null,r=null,o=0;o<t.length;++o)if(t[o]!==e[o]&&0===e[o].indexOf(l)){n=this._properties.inputs[a[o].id],r=t[o],c=!1;break}n&&n.setValue(r)}}else this._chartApi.modifyStudy(this._studyId,this._turnaround,e,this._handler);c&&(this._studyModified=c)},v.prototype._changeInputs=function(e){var t=TradingView.clone(this._inputs);this._studyId&&this._chartApi.connected()?(this._turnaround="st"+ ++this._turnaroundCounter,this._allInputsAreValid()?this._allSymbolsAreResolved().done(this._changeInputsImpl.bind(this,e,t)).fail(function(e){_e.logError("ERROR: "+this._debugId()+" _changeInputs: cannot modify study, "+e)}.bind(this)):this.stop()):(this.stop(!0),this.start(!0)),this._inputs=e,this._tagsChanged.fire(),this._titleCache={}},v.prototype.testInputValue=function(e,t){var i,o;return!de.canBeChild(this._metaInfo)||!de.isSourceInput(e)||(!(i=this._properties.inputs&&this._properties.inputs[e.id])||(o=v.getInputRebindType(e,i.value(),t),!!this._canCreateStudyWithRebindType(o)||(Z.createGoProDialog({feature:"studyOnStudy"}).then(function(e){e.open()}),!1)))},v.prototype._canCreateStudyWithRebindType=function(e){return e!==X.REBIND_STUDY_STANDALONE_TO_CHILD||this._chartApi.isCanCreateStudy(!0)},v.prototype.changeStyles=function(){var e,t=null!=this._metaInfo.inputs.filter(function(e){return"symbol"===e.type})[0];!this.isStarted()&&!t||this._restarting||(this._inputs?(e=this.inputs(),JSON.stringify(e)!==JSON.stringify(this._inputs)&&this._changeInputs(e)):this._chartApi&&this._chartApi.connected()&&this.restart(),this._metaInfo.isTVScript&&this._metaInfo.TVScriptMetaInfoExprs&&(this._pinePatchProps(),this._titleCache={}),this.hasBarColorer()&&this._model.mainSeries().invalidateBarStylesCache(),t&&this.invalidateBarStylesCache(),this.createViews(),this.recalculate(!0),this.updateAllViews())},
v.prototype._isModifiedStudyInputs=function(e){if(void 0===this._oldStudyInputs)return this._oldStudyInputs=e,!0;var t=Object.keys(this._oldStudyInputs);return S(t.length===Object.keys(e).length,"keys quantity should be equal"),t.forEach(function(t){S(e.hasOwnProperty(t),"key '"+t+"' should existing in studyInputs"),this._oldStudyInputs[t]!==e[t]&&(this._oldStudyInputs=e)},this),this._oldStudyInputs===e},v.prototype._pinePatchProps=function(){var e,t,i={symbolsForDisplay:!1,symbolsForChartApi:!0,skipHiddenInputs:!0,skipFakeInputs:!1,onlyAtomValues:!0},o=this._prepareInputs(i);this._isModifiedStudyInputs(o)&&(e=J.patchPropertiesAsync(this._properties,this._metaInfo,o),t=this._allSymbolsAreResolved(),$.when(e,t).done(function(e,t){this.createViews(),this.recalculate(!0),this.updateAllViews()}.bind(this)).fail(function(e){_e.logError("ERROR: "+this._debugId()+" _pinePatchProps failed, reason: "+e)}.bind(this)))},v.prototype.visibleChanged=function(){this._series instanceof TradingView.Series&&this._series.invalidateBarColorerCache()},v.prototype.invalidateBarStylesCache=function(){this.m_data.each(function(e,t){t[TradingView.STYLE_PLOT]=null})},v.prototype.processHibernate=function(){this.isHibernateAllowed()&&(!this._studyId&&this.isVisible()&&this.start(),this._studyId&&!this.isVisible()&&this.stop())},v.prototype.isHibernated=function(){return!this.isVisible()&&!this._studyId},v.prototype.isHibernateAllowed=function(){return!this._isChildStudy&&!this.hasChildren()},v.prototype.lastPriceLabelFixedCoordinate=function(e){return this._priceAxisViewsCache[e]._fixedCoordinate},v.prototype.priceLabelText=function(e){var t,i,o,n;return 1===this._simplePlotsCount?this._metaInfo.shortDescription:(t=this._metaInfo.styles,i=this._metaInfo.ohlcPlots,t&&t[e]&&(o=t[e]),i&&i[e]&&(o=i[e]),n=o.title,this._metaInfo.is_price_study?this._metaInfo.shortDescription+":"+n:n)},v.prototype.createPlotLabels=function(e){for(var t=0;t<e.length;t++)this._paneViews.push(new W(this._model,this,e[t],"priceLabelText","showStudyPlotLabels"))},v.prototype.createViews=function(){var e,t,i,o,n,r,a,l,c,h,u,d,p;if(this._priceAxisViewsBase=[],this._paneViews=[],e={},this._priceAxisViewsCache={},t=[],this.metaInfo().plots)for(i=0;i<this.metaInfo().plots.length;i++)if(!(this.isSelfColorerPlot(i)||this.isTextColorerPlot(i)||this.isBarColorerPlot(i)||this.isOHLCColorerPlot(i)))if(o=this.metaInfo().plots[i].id,this.isBgColorerPlot(i))this._paneViews.push(new M(this,this._series,this._model,o));else if(this.isPlotShapesPlot(i))this._paneViews.push(new O(this,this._series,this._model,o));else if(this.isPlotCharsPlot(i))this._paneViews.push(new D(this,this._series,this._model,o));else if(this.isPlotArrowsPlot(i))this._paneViews.push(new V(this,this._series,this._model,o));else if(this.isOHLCSeriesPlot(i)){if(n=this.metaInfo().plots[i].target,e[n])continue;e[n]=n,this.isOHLCBarsPlot(i)?this._paneViews.push(new R(this,this._series,this._model,n)):this.isOHLCCandlesPlot(i)&&this._paneViews.push(new B(this,this._series,this._model,n)),r=new I(this,{plotIndex:n}),
this._priceAxisViewsCache[n]=r,this._priceAxisViewsBase.push(r),t.push(n)}else r=new I(this,{plotIndex:o}),this._priceAxisViewsCache[o]=r,this._priceAxisViewsBase.push(r),this._paneViews.push(new k(this,this._series,this._model,o)),this.properties().styles[o].trackPrice.value()&&this._paneViews.push(new s(this,this._series,this._model,o)),t.push(o);if(this._properties.bands)for(i=0;i<this._properties.bands.childCount();i++)this._properties.bands[i].visible.value()&&this._paneViews.push(new x(this._properties.bands[i],this));this._properties.bandsBackground&&this._paneViews.push(new E(this)),a=[],this.metaInfo().graphics&&(a=Object.keys(this.metaInfo().graphics),a.sort(function(e,t){return v.graphicsZOrderPriority(e)-v.graphicsZOrderPriority(t)}));for(l in a)c=a[l],h="_paneView"+c,u="StudyPaneView_"+c,TradingView.Study[u]&&(this[h]=new TradingView.Study[u](this,this._model),this._paneViews.push(this[h])),this._dataWindowView||"hhists"!==c||(this._dataWindowView=new TradingView.StudyHHistsDataWindowView(this,this._model));if(this._properties.areaBackground&&this._paneViews.push(new F(this)),this._properties.filledAreas&&this._metaInfo.filledAreas)for(i=0;i<this._metaInfo.filledAreas.length;++i)d=this._metaInfo.filledAreas[i],p=this._properties.filledAreasStyle[d.id],d.type===de.FilledArea.TYPE_PLOTS||d.palette?this._paneViews.push(new z(this,d,p)):d.type===de.FilledArea.TYPE_HLINES?this._paneViews.push(new L(this,d,p)):_e.logWarn("Unsupported filledArea type: "+d.type);this.createPlotLabels(t),this._dataWindowView||(this._dataWindowView=new U(this,this._model)),this._statusView||(this._statusView=new j(this,this._model.properties())),this._priceAxisViews=[].concat(this._priceAxisViewsBase,this._hlinesPriceAsisViews,this._horizlinesPriceAsisViews)},v.prototype.recalculate=function(e){var t=this._model.paneForSource(this);this._model.recalculatePane(t,e),this._model.updateSource(this)},v.prototype.data=function(){return this.m_data},v.prototype.metaInfo=function(){return this._metaInfo},v.prototype.status=function(){return this._status},v.prototype.title=function(e,t,i){var o,n=JSON.stringify([e,t,i]);return this._titleCache[n]?this._titleCache[n]:(o=this._title(e,t,i||!this._showStudyArgumentsProperty.value()),this._titleCache[n]=o,o)},v.prototype._title=function(e,t,i){var o,n,r,s,a,l,c,h,u,d,p,f,_;if(o=e?this._metaInfo.shortDescription||this._properties.shortDescription&&this._properties.shortDescription.value()||"Study":this._metaInfo.description||this._properties.description&&this._properties.description.value()||"Study",t=t||{},o=$.t(o),!i&&(n=this.inputsForGUI()||[],n.length>0)){if(r={},this._isChildStudy)for(s=0;s<this._metaInfo.inputs.length;++s)if(a=this._metaInfo.inputs[s],de.isSourceInput(a)){l=a.id,c=this._properties.inputs[l].value(),c.indexOf("$")>=0&&this._source&&(h=this._source.metaInfo(),u=this._source.title(e,null,!0),1===h.plots.length?r[c]=u:(d=c.split("$")[1],p=h.plots[d].id,f=h.styles&&h.styles[p]&&h.styles[p].title||p,r[c]=u+":"+f));break}_=this,n=n.map(function(e){
var i=isNumber(e)?_._numericFormatter.format(e):r&&r[e]||e;return t[i]&&(i=t[i]),i}),o+=" ("+n.join(", ")+")"}return o},v.prototype.invalidateTitleCache=function(e){if(this._titleCache={},!0===e&&this._children)for(var t=0;t<this._children.length;++t)this._children[t].invalidateTitleCache(e)},v.prototype.graphics=function(){return this._graphics.graphics()},v.prototype.turnaround=function(e){return!0===e?this.source().turnaround(!0)+"_"+this._turnaround:this._turnaround},v.prototype._checkTurnaround=function(e){return e===this._turnaround||e===this._model.mainSeries().turnaround()||e===this.turnaround(!0)},v.prototype._makeJSONForNSData=function(e,t){var o=""!==e.params.nonseries.d?Y(e.params.nonseries.d):t||"";return o.dataCompressed||o.graphicsCmdsCompressed?new Promise(function(e){i.e(14).then(function(t){var n,r=i(1246);o.dataCompressed&&(n=new r(o.dataCompressed,{base64:!0}).file("").asText(),delete o.dataCompressed,o.data=Y(n)),o.graphicsCmdsCompressed&&(n=new r(o.graphicsCmdsCompressed,{base64:!0}).file("").asText(),delete o.graphicsCmdsCompressed,o.graphicsCmds=Y(n)),e(o)}.bind(null,i)).catch(i.oe)}):Promise.resolve(o)},v.prototype.onData=function(e){var t,i,o,n,r=this;switch(e.method){case"study_loading":this._status=$.t("loading..."),this._failed=!1,this._statusView.update(),this._model.updateSource(this),-1===["Plot splits","Plot earnings","Plot dividends"].indexOf(r._metaInfo.description)&&(r._loadingStartTime=(new Date).getTime());break;case"study_error":delete this._loadingStartTime,this._failed=!0,this.clearData(),"string"==typeof e.params[2]?this._status=$.t(e.params[2].split(":",2)[0]):this._status="",-1===["Sessions"].indexOf(r._metaInfo.description)&&(this instanceof TradingView.StudyStrategy?K.sendReport("charts","strategy_error"):K.sendReport("charts","study_error")),this._statusView.update(),this._model.updateSource(this);break;case"study_completed":if(!this._checkTurnaround(e.params[1]))return Promise.resolve();t="chartSession:"+r._chartApi._sessionid,i=(new Date).getTime()-this._loadingStartTime,_e.logDebug(t+", Study "+this._metaInfo.description+" loading took "+i+" ms"),delete this._loadingStartTime,this._status="",this._statusView.update(),o=this._model.paneForSource(this),this._model.recalculatePane(o),this._updateSources(),this._model.invalidate(new G(G.FULL_UPDATE));break;case"study_deleted":break;case"data_update":return this._checkTurnaround(e.params.turnaround)?(this._studyModified&&(this.clearData(),this._studyModified=!1),n=0===this.m_data.size()&&this._metaInfo.plots.length>0,S(!!e.params.nonseries,"data.params.nonseries is missing"),new Promise(function(t){r._makeJSONForNSData(e).then(function(i){var o,s;e.params.nonseries.d=i,r._processPlotOffsets(e.params),r.transformData(e.params.plots),o=r._mergeData(e.params.plots).earliestRow,r.hasBarColorer()&&(null!==o?r._model.mainSeries().invalidateBarStylesCache(o.index):_e.logNormal("ERROR: No earliestRow in studies plots, "+r._debugId())),r._graphics.process(e.params.nonseries),r._postProcessGraphics(),s=r._model.paneForSource(r),
r._model.recalculatePane(s,n),r._updateSources(),t()})})):Promise.resolve()}return Promise.resolve()},v.prototype.transformData=function(e){},v.prototype.moveData=function(e){this._invalidateLastNonEmptyPlotRowCache(),this.m_data.move(e)},v.prototype.replaceData=function(e,t,i){this._invalidateLastNonEmptyPlotRowCache(),this.m_data.remove(e+1),this.m_data.addTail(i,t)},v.prototype._updateSources=function(){this._model.updateSource(this),this.hasBarColorer()&&this._model.updateSource(this._model.mainSeries())},v.processPlotOffsets=function(e,t){if(!t.nonseries||"nochange"!==t.nonseries.indexes){var i=t.nonseries.d;if(!i||!i.indexes_replace)return i&&i.offsets?void(e._plotOffsets=i.offsets):void(e._plotOffsets={})}},v.prototype._processPlotOffsets=function(e){v.processPlotOffsets(this,e)},v.prototype._mergeData=function(e){return this._invalidateLastNonEmptyPlotRowCache(),this.m_data.merge(e)},v.prototype._postProcessGraphics=function(){var e=this,t=function(t){var i,o,n,r,s=e._graphics.graphics(),a=[];if(s&&s[t])for(n=s[t],i=0;i<n.length;i+=1)if(n[i].data)for(o=0;o<n[i].data.length;o+=1)r={line:n[i].data[o],styleId:n[i].styleId,lineType:t},a.push(new v.StudyPriceAxisView_hlines(e,r));return a};this._hlinesPriceAsisViews=t("hlines"),this._horizlinesPriceAsisViews=t("horizlines"),this._priceAxisViews=[].concat(this._priceAxisViewsBase,this._hlinesPriceAsisViews,this._horizlinesPriceAsisViews)},v.prototype._getNonPriceParent=function(){var e,t;if(this._nonPriceParent)return this._nonPriceParent;for(e=this.source();e instanceof v;){if(t=e.metaInfo(),!t.is_price_study||"Compare@tv-basicstudies"===t.id)return this._nonPriceParent=e,e;e=e.source()}},v.prototype.firstValue=function(e){var t,i,o,n,r,s;return!this._isChildStudy&&"Compare@tv-basicstudies"===this._metaInfo.id||!this._metaInfo.is_price_study?null===(t=this._model.timeScale().visibleBars())?null:(i=t.firstBar(),o=t.lastBar(),0===this.m_data.size()?null:(r=this,this.m_data.range(i,o).each(function(t,i){var o,s,a;for(o=1;o<i.length;++o)if(void 0!==i[o-1]&&null!==i[o-1]&&!r.isSelfColorerPlot(o-1)&&(s=r._metaInfo.plots[o-1].id,a=r.properties().styles[s],a.visible&&a.visible.value()&&!(e&&Math.abs(i[o])<1e-10||void 0===i[o]||null===i[o]||n)))return n=i[o],!0}),this._nonPriceFirstValue=n,n)):this._isChildStudy&&(s=this._getNonPriceParent())&&this.priceScale()===s.priceScale()?void 0!==s._nonPriceFirstValue?s._nonPriceFirstValue:s.firstValue():this._series.firstValue()},v.offset=function(e,t){var i=0;return e._plotOffsets&&void 0!==e._plotOffsets[t]&&(i+=e._plotOffsets[t]),void 0!==e._plotOffsetsMetaInfoOverride[t]?i+=e._plotOffsetsMetaInfoOverride[t]:e.properties().offsets&&void 0!==e.properties().offsets[t]&&(i+=e.properties().offsets[t].val.value()),e.properties().offset&&(i+=e.properties().offset.val.value()),i},v.prototype.offset=function(e){return v.offset(this,e)},v.prototype.priceRange=function(e,t){var i,o,n,s,a,l,c,h,u,d,p,f,_,m,g,v,y,b,S,w;if(!TradingView.isInteger(e))return void _e.logDebug("priceRange: incorrect startBar")
;if(!TradingView.isInteger(t))return void _e.logDebug("priceRange: incorrect endBar");if(0===this.m_data.size())return null;if(i=null,o=this,n=o._metaInfo,0===n.plots.length)return null;for(a=[],c=0;c<n.plots.length;++c)if(!(o.isSelfColorerPlot(c)||o.isTextColorerPlot(c)||o.isBarColorerPlot(c)||o.isBgColorerPlot(c)||o.isOHLCColorerPlot(c))&&(h=n.plots[c].id,o.isOHLCSeriesPlot(c)?(d=n.plots[c].target,u=o.properties().ohlcPlots[d]):u=o.properties().styles[h],u.visible.value()&&(l=null,u.location&&(l=u.location.value()),s||(p=[CanvasEx.MARKLOC_ABSOLUTE,CanvasEx.MARKLOC_TOP,CanvasEx.MARKLOC_BOTTOM].indexOf(l)<0,f=o.isPlotShapesPlot(c)||o.isPlotCharsPlot(c),s=f&&p||o.isPlotArrowsPlot(c)),o.isLinePlot(c)||(o.isPlotShapesPlot(c)||o.isPlotCharsPlot(c))&&u.location.value()===CanvasEx.MARKLOC_ABSOLUTE||o.isOHLCSeriesPlot(c)))){if(_={index:c+1,offset:o.offset(h)},m=o.properties().styles[h].plottype.value(),!o.properties().skipHistogramBaseOnAutoScale&&[pe.PlotType.Histogram,pe.PlotType.Columns,pe.PlotType.Area].indexOf(m)>=0){if(g=o.properties().styles[h].histogramBase.value(),!isNumber(g))continue;_.baseValue=g}a.push(_)}if(v=o.m_data.minMaxOnRange2(e,t,a),s&&(a=[{index:TradingView.LOW_PLOT,offset:0},{index:TradingView.HIGH_PLOT,offset:0}],y=o.series().data().bars().minMaxOnRange2(e,t,a),v=ue(v,y)),null!==v&&(i=new r(v.min,v.max)),n.bands)for(c=0;c<n.bands.length;c++)if(o.properties().bands[c].visible.value()){if(g=o.properties().bands[c].value.value(),!isNumber(g))continue;i?i.apply(g,g):i=new r(g,g)}return i&&i.minValue()===i.maxValue()&&(b=.005*i.minValue(),i=new r(i.minValue()-b,i.maxValue()+b)),S=this.priceScale(),S&&S.properties().percentage.value()&&i?(w=this.firstValue(),w?i.convertToPercents(w):null):S&&S.isLog()&&i?new r(o.priceScale().priceToLogical(i.minValue()),o.priceScale().priceToLogical(i.maxValue())):i},v.prototype.paneViews=function(e){return this.properties().visible.value()?this._paneViews:null},v.prototype.dataWindowView=function(){return this._dataWindowView},v.prototype.statusView=function(){return this._statusView},v.prototype.priceAxisViews=function(e,t){return this._model.paneForSource(this)===e&&t===this.priceScale()&&(this._showLastValueOnPriceScale()||this.properties().oldShowLastValue&&this.properties().oldShowLastValue.value())?this._priceAxisViews:null},v.prototype._showLastValueOnPriceScale=function(){return this._model.properties().scalesProperties.showStudyLastValue.value()},v.prototype.isLinePlot=function(e){return this._metaInfo.plots[e].type===pe.PlotTypes.LINE},v.isSelfColorerPlot=function(e,t){return e._metaInfo.plots[t].type===pe.PlotTypes.COLORER},v.prototype.isSelfColorerPlot=function(e){return v.isSelfColorerPlot(this,e)},v.prototype.isTextColorerPlot=function(e){return this._metaInfo.plots[e].type===pe.PlotTypes.TEXT_COLORER},v.prototype.isBarColorerPlot=function(e){return this._metaInfo.plots[e].type===pe.PlotTypes.BAR_COLORER},v.prototype.isBgColorerPlot=function(e){return this._metaInfo.plots[e].type===pe.PlotTypes.BG_COLORER},v.prototype.isPlotShapesPlot=function(e){
return this._metaInfo.plots[e].type===pe.PlotTypes.SHAPES},v.prototype.isPlotCharsPlot=function(e){return this._metaInfo.plots[e].type===pe.PlotTypes.CHARS},v.prototype.isPlotArrowsPlot=function(e){return this._metaInfo.plots[e].type===pe.PlotTypes.ARROWS},v.prototype.isOHLCBarsPlot=function(e){var t=this._metaInfo.plots[e].target,i=this.metaInfo().defaults.ohlcPlots[t];return i&&this.isOHLCSeriesPlot(e)&&i.plottype===pe.OHLCType.BARS},v.prototype.isOHLCCandlesPlot=function(e){var t=this._metaInfo.plots[e].target,i=this.metaInfo().defaults.ohlcPlots[t];return i&&this.isOHLCSeriesPlot(e)&&i.plottype===pe.OHLCType.CANDLES},v.prototype.isOHLCSeriesPlot=function(e){var t=this._metaInfo.plots[e].type;return t===pe.PlotTypes.OHLC_OPEN||t===pe.PlotTypes.OHLC_HIGH||t===pe.PlotTypes.OHLC_LOW||t===pe.PlotTypes.OHLC_CLOSE},v.prototype.isOHLCOpenPlot=function(e){return this._metaInfo.plots[e].type===pe.PlotTypes.OHLC_OPEN},v.prototype.isOHLCHighPlot=function(e){return this._metaInfo.plots[e].type===pe.PlotTypes.OHLC_HIGH},v.prototype.isOHLCLowPlot=function(e){return this._metaInfo.plots[e].type===pe.PlotTypes.OHLC_LOW},v.prototype.isOHLCClosePlot=function(e){return this._metaInfo.plots[e].type===pe.PlotTypes.OHLC_CLOSE},v.prototype.isOHLCColorerPlot=function(e){return this._metaInfo.plots[e].type===pe.PlotTypes.OHLC_COLORER},v.prototype.isDataOffsetPlot=function(e){return this._metaInfo.plots[e].type===pe.PlotTypes.DATAOFFSET},v.prototype.hasBarColorer=function(){for(var e=0;e<this._metaInfo.plots.length;++e)if(this.isBarColorerPlot(e))return!0;return!1},v.prototype.barColorer=function(){var e,t,i=null;for(e=0;e<this._metaInfo.plots.length;++e)this.isBarColorerPlot(e)&&(t=new T(this,e),null==i?i=t:i.pushBackBarColorer(t));if(null==i)throw Error("Cannot create BarColorer: study doesn't have a bar_colorer plot!");return i},v.prototype.base=function(){return"Volume"===this._metaInfo.id?1:0},v.prototype._createFormatter=function(){var e,t,i;"default"===this.properties().precision.value()?this.metaInfo().defaults&&(e=parseInt(this.metaInfo().defaults.precision)):e=parseInt(this.properties().precision.value()),isFinite(e)||(e=-1!==["Volume@tv-basicstudies","VbPVisible@tv-volumebyprice","VbPSessions@tv-volumebyprice"].indexOf(this._metaInfo.id)?0:1e4),t=this.series().symbolInfo(),0===e?(i=0,t&&t.volume_precision&&(i=t.volume_precision),this._formatter=new se(i)):this._formatter=new re(Math.pow(10,e)),this.priceScale()&&this.priceScale().updateFormatter()},v.prototype.formatter=function(){return this._formatter},v.prototype.nearestIndex=function(e,t){if(!TradingView.isInteger(e))return void _e.logDebug("nearestIndex: incorrect logicalPoint");var i=this._series.data().bars().search(e,t);return null!==i?i.index:void 0},v.prototype._lastNonEmptyPlotRow=function(e){var t,i;return TradingView.isInteger(e)?void 0!==this._lastNonEmptyPlotRowCache[e]?this._lastNonEmptyPlotRowCache[e]:(t=1e3,null===(i=this.data().findLast(function(t,i){return void 0!==i[e]},t))?null:(this._lastNonEmptyPlotRowCache[e]=i,
this._lastNonEmptyPlotRowCache[e])):(_e.logDebug("_lastNonEmptyPlotRow: incorrect plotIndex"),null)},v.prototype.updateAllViews=function(){var e;for(e=0;e<this._paneViews.length;e++)this._paneViews[e].update();for(this._dataWindowView.update(),this._statusView.update(),e=0;e<this._priceAxisViews.length;e++)this._priceAxisViews[e].update()},v.prototype.tags=function(){return!this._metaInfo||!this._metaInfo.description||this._metaInfo.isTVScriptStub||this._metaInfo.is_hidden_study||this._metaInfo.isTVScript&&"tv-scripting"===this._metaInfo.productId?[]:[this._metaInfo.description]},v.isPointsBasedStudy=function(e){switch(e){case"VbPFixed@tv-volumebyprice":case"mtp_tsanalysis@mtp-mtpredictor":case"mtp_riskreward@mtp-mtpredictor":case"mtp_decisionpoint@mtp-mtpredictor":case"mtp_ew_main@mtp-mtpredictor":case"mtp_ew_major@mtp-mtpredictor":case"mtp_ew_minor@mtp-mtpredictor":case"mtp_wpt_down1ora@mtp-mtpredictor":case"mtp_wpt_down2orb@mtp-mtpredictor":case"mtp_wpt_down3@mtp-mtpredictor":case"mtp_wpt_down4@mtp-mtpredictor":case"mtp_wpt_down5@mtp-mtpredictor":case"mtp_wpt_downc@mtp-mtpredictor":case"mtp_wpt_up1ora@mtp-mtpredictor":case"mtp_wpt_up2orb@mtp-mtpredictor":case"mtp_wpt_up3@mtp-mtpredictor":case"mtp_wpt_up4@mtp-mtpredictor":case"mtp_wpt_up5@mtp-mtpredictor":case"mtp_wpt_upc@mtp-mtpredictor":return!0;default:return!1}},v.lineToolNameForPointsBasedStudy=function(e){switch(e){case"VbPFixed@tv-volumebyprice":return"LineToolVbPFixed";case"RegressionTrend@tv-basicstudies":return"LineToolRegressionTrend";case"mtp_tsanalysis@mtp-mtpredictor":return"LineStudyMtpAnalysis";case"mtp_riskreward@mtp-mtpredictor":return"LineStudyMtpRiskReward";case"mtp_decisionpoint@mtp-mtpredictor":return"LineStudyMtpDecisionPoint";case"mtp_ew_main@mtp-mtpredictor":return"LineStudyMtpElliotWaveMain";case"mtp_ew_major@mtp-mtpredictor":return"LineStudyMtpElliotWaveMajor";case"mtp_ew_minor@mtp-mtpredictor":return"LineStudyMtpElliotWaveMinor";case"mtp_wpt_down1ora@mtp-mtpredictor":return"LineStudyMtpDownWave1OrA";case"mtp_wpt_down2orb@mtp-mtpredictor":return"LineStudyMtpDownWave2OrB";case"mtp_wpt_down3@mtp-mtpredictor":return"LineStudyMtpDownWave3";case"mtp_wpt_down4@mtp-mtpredictor":return"LineStudyMtpDownWave4";case"mtp_wpt_down5@mtp-mtpredictor":return"LineStudyMtpDownWave5";case"mtp_wpt_downc@mtp-mtpredictor":return"LineStudyMtpDownWaveC";case"mtp_wpt_up1ora@mtp-mtpredictor":return"LineStudyMtpUpWave1OrA";case"mtp_wpt_up2orb@mtp-mtpredictor":return"LineStudyMtpUpWave2OrB";case"mtp_wpt_up3@mtp-mtpredictor":return"LineStudyMtpUpWave3";case"mtp_wpt_up4@mtp-mtpredictor":return"LineStudyMtpUpWave4";case"mtp_wpt_up5@mtp-mtpredictor":return"LineStudyMtpUpWave5";case"mtp_wpt_upc@mtp-mtpredictor":return"LineStudyMtpUpWaveC";default:throw Error("There is no line tool name, associated with study id "+e)}},v.isStudyLineTool=function(e){var t=i(132).StudyLineDataSource,o=TradingView[e];return"function"==typeof o&&o.prototype instanceof t},v.prototype.onExtendedHoursChanged=function(){this.restart()},v.prototype.hasSymbolInputs=function(){
for(var e=this._metaInfo.inputs.length;e--;)if("symbol"===this._metaInfo.inputs[e].type)return!0;return!1},v.prototype._subscribeExtendedHours=function(){!this._isSubscribedToExtendedHours&&this.hasSymbolInputs()&&(this._series.extendedHours.listeners().subscribe(this,this.onExtendedHoursChanged),this._isSubscribedToExtendedHours=!0)},v.prototype._unsubscribeExtendedHours=function(){this._isSubscribedToExtendedHours&&(this._series.extendedHours.listeners().unsubscribe(this,this.onExtendedHoursChanged),delete this._isSubscribedToExtendedHours)},v.prototype.removeByRemoveAllStudies=function(){return!0},v.prototype.canHaveChildren=function(){return void 0===this._canHaveChildren&&(this._canHaveChildren=!!de.canHaveChildren(this._metaInfo)),this._canHaveChildren},v.getInputRebindType=function(e,t,i){var o=de.isSourceInput(e);return o&&!~t.indexOf("$")&&~i.indexOf("$")?X.REBIND_STUDY_STANDALONE_TO_CHILD:o&&~t.indexOf("$")&&!~i.indexOf("$")?X.REBIND_STUDY_CHILD_TO_STANDALONE:0},v.prototype.getPlotFields=function(){return this._plotFields},v.prototype.getMinFirstBarIndexForPlot=function(e){var t,i=y(this._properties.styles,e)||y(this._properties.ohlcPlots,e)||y(this._properties.filledAreasStyle,e);return null===i?-1/0:(t=this.data().lastIndex(),null===t?-1/0:t-i+1)},v.prototype.getInputsPropertyPage=function(){return fe.StudyInputsPropertyPage},v.prototype.getStylesPropertyPage=function(){return fe.StudyStylesPropertyPage},v.prototype.getDisplayPropertyPage=function(){return fe.StudyDisplayPropertyPage},e.exports={Study:v,createStudy:l,prepareStudyProperties:c,prepareStudyPropertiesForLoadChart:u,prepareStudyPropsStateForLoadChart:f}}).call(t,i(37),i(4),i(3),i(79))},function(e,t,i){"use strict";(function(t){function i(){return/on-features-page=1/i.test(window.location.search)}var o=window.TradingView=window.TradingView||{};o.className=function(e){for(var t in this)if(o[t]===e)return t;return null},o.isOnFeaturePage=i(),o.wrapUrl=function(e){return t.enabled("charting_library_base")&&(e=e.replace("/static/","")),e},o.isMobile=function(){var e=/Android/i.test(navigator.userAgent),t=/BlackBerry/i.test(navigator.userAgent),i=/iPhone|iPad|iPod/i.test(navigator.userAgent),o=/Opera Mini/i.test(navigator.userAgent),n=e||t||i||o;return{Android:function(){return e},BlackBerry:function(){return t},iOS:function(){return i},Opera:function(){return o},any:function(){return n}}}(),o.supportTouch=function(){return Modernizr.touch||o.isMobile.any()},o.onWidget=function(){
var e,t,i=["^widgetembed/?$","^cmewidgetembed/?$","^([0-9a-zA-Z-]+)/widgetembed/?$","^([0-9a-zA-Z-]+)/widgetstatic/?$","^([0-9a-zA-Z-]+)?/?miniwidgetembed/?$","^([0-9a-zA-Z-]+)?/?mediumwidgetembed/?$","^embed(-static)?/([0-9a-zA-Z]{8})/?$","^widgetpopup/?$","^extension/?$","^chatwidgetembed/?$","^ideaswidgetembed/?$","^ideas-widget/?$","^view-idea-widget/([0-9a-zA-Z]{8})/?$","^user-info-widget/?$","^user-info-widget-get/(.+?)?/?$","^embed-quotes-provider/?$","^idea-popup/?$","^hotlistswidgetembed/?$","^marketoverviewwidgetembed/?$","^([0-9a-zA-Z-]+)/marketoverviewwidgetembed/?$","^eventswidgetembed/?$","^tickerswidgetembed/?$","^forexcrossrateswidgetembed/?$","^forexheatmapwidgetembed/?$","^marketquoteswidgetembed/?$","^screenerwidget/?$","^cryptomktscreenerwidget/?$","^([0-9a-zA-Z-]+)/cryptomktscreenerwidget/?$","^([0-9a-zA-Z-]+)/marketquoteswidgetembed/?$"],o=window.location.pathname.replace(/^\//,"");for(t=i.length-1;t>=0;t--)if(e=RegExp(i[t]),e.test(o))return!0;return!1},o.onOrder=function(){return"/order/"===window.location.pathname},e.exports.CheckMobile=o.isMobile,e.exports.isOnFeaturePage=i,e.exports.onWidget=o.onWidget,e.exports.supportTouch=o.supportTouch}).call(t,i(3))},function(e,t,i){"use strict";function o(e,t){return e<=t}function n(e,t){return e>=t}function r(e,t,i){return Math.min(Math.max(e,t),i)}function s(e){return e<0?-1:e>0?1:0}function a(e){if(e<0)return _.logDebug("MathEx.isBaseDecimal: argument less zero"),!1;for(var t=e;t>1;t/=10)if(t%10!=0)return!1;return!0}function l(e,t,i){return t-e<=i}function c(e,t,i){return Math.abs(e-t)<i}function h(e){return e<=0?(_.logDebug("MathEx.log10: argument less or equal zero"),NaN):Math.log(e)/Math.log(10)}function u(e,t){return e<t?-1:e>t?1:0}function d(e,t){var i,o;if(void 0===t&&(t=u),e.length<1)throw Error("array is empty");for(i=e[0],o=0;o<e.length;++o)t(e[o],i)<0&&(i=e[o]);return i}function p(e,t){var i,o;if(void 0===t&&(t=u),e.length<1)throw Error("array is empty");for(i=e[0],o=0;o<e.length;++o)t(e[o],i)>0&&(i=e[o]);return i}var f,_;Object.defineProperty(t,"__esModule",{value:!0}),f=i(0),_=f.getLogger("Common.MathEx"),t.lessThan=o,t.greaterThan=n,t.clamp=r,t.sign=s,t.isBaseDecimal=a,t.greaterOrEqual=l,t.equal=c,t.log10=h,t.defComparator=u,t.min=d,t.max=p},function(e,t,i){"use strict";(function(t){function i(e){if(this._listeners=new t,this._childs=[],void 0!==e&&null!==e)if(this.isPrimitiveType(e))this._value=e;else for(var i in e)this.addProperty(i,e[i])}i.prototype.merge=function(e){var t,i;if(null!=e)if(this.isPrimitiveType(e))this._value=e;else if(Array.isArray(e))for(t=0;t<e.length;t++)this[t]?this[t].merge(e[t]):this.addProperty(t,e[t]);else for(i in e)this[i]?this[i].merge(e[i]):this.addProperty(i,e[i])},i.prototype.state=function(e){var t,i,o,n,r,s=this._value;for(void 0===s&&(s={}),t=0;t<this._childs.length;t++)if(i=this._childs[t],!e||-1===e.indexOf(i))if(e){for(o=[],n=0;n<e.length;n++)r=e[n],r.startsWith(i+".")&&o.push(r.substr(i.length+1));s[i]=this[i].state(o)}else s[i]=this[i].state();return s},i.prototype.clone=function(e){
return new i(this.state())},i.prototype.isPrimitiveType=function(e){return!!isNumber(e)||(!!new TradingView.TypeValidator(String).check(e)||TradingView.isBoolean(e))},i.prototype.value=function(){return this._value},i.prototype.listeners=function(){return this._listeners},i.prototype.childCount=function(){return this._childs.length},i.prototype.setValue=function(e,t){(this._value!==e||t)&&(this._value=e,this._listeners.fire(this))},i.prototype.setValueSilently=function(e){this._value=e},i.prototype.addProperty=function(e,t){var o=new i(t);this[e]=o,this._childs.push(e),o.listeners().subscribe(this,i.prototype.childChanged)},i.prototype.removeProperty=function(e){this[e].listeners().unsubscribe(this,i.prototype.childChanged),delete this[e],this._childs=this._childs.filter(function(t){return t!==e})},i.prototype.addChild=function(e,t){this[e]=t,-1===$.inArray(e,this._childs)&&this._childs.push(e),t.listeners().subscribe(this,i.prototype.childChanged)},i.prototype.childChanged=function(e,t){this.listeners().fire(this)},i.prototype.subscribe=function(e,t){this.listeners().subscribe(e,t)},i.prototype.unsubscribe=function(e,t){this.listeners().unsubscribe(e,t)},i.prototype.unsubscribeAll=function(e){this.listeners().unsubscribeAll(e)},e.exports=i}).call(t,i(4))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(199);t.TVModal=o.TVModal,t.isOpenedModals=o.isOpenedModals},function(e,t,i){"use strict";(function(e,t){function o(e){TradingView.merge(this,{palettes:{},inputs:[],plots:[],graphics:{},defaults:{}}),TradingView.merge(this,e);var t=e.fullId||e.id;TradingView.merge(this,o.parseIdString(t)),this.name=this.id}var n=i(9).assert,r=i(0).getLogger("Chart.Study.MetaInfo"),s=(i(57).Telemetry,i(25).isFeatureEnabled),a=i(556).applyOverridesToStudyDefaults,l=null;o.VERSION_STUDY_ARG_SOURCE=41,o.METAINFO_FORMAT_VERSION_SOS_V2=42,o.VERSION_PINE_PROTECT_TV_4164=43,o.CURRENT_METAINFO_FORMAT_VERSION=45,o.CHILD_STUDY_ALLOWED_PLOT_TYPES=["line"],o.CHILD_STUDY_EXCLUDE_IDS=["CorrelationCoefficient@tv-basicstudies"],o.CHILD_STUDY_PARENT_EXCLUDE_IDS=[],o.FilledArea={},o.FilledArea.TYPE_PLOTS="plot_plot",o.FilledArea.TYPE_HLINES="hline_hline",o.versionOf=function(e){var t="_metainfoVersion"in e&&isNumber(e._metainfoVersion)?e._metainfoVersion:0;return t<0&&r.logError("Metainfo format version cannot be negative: "+t),t>o.CURRENT_METAINFO_FORMAT_VERSION&&r.logWarn("Client doesn't support this version of metainfo format: "+t),t},o.parseIdString=function(e){var t,i,o,n,r={};if(-1===e.indexOf("@"))r.shortId=e,r.packageId="tv-basicstudies",r.id=e+"@"+r.packageId,r.version=1;else if(t=e.split("@"),r.shortId=t[0],i=t[1].split("-"),3===i.length)r.packageId=i.slice(0,2).join("-"),r.id=r.shortId+"@"+r.packageId,r.version=i[2];else if(1===i.length&&"decisionbar"===i[0])r.packageId="les-"+i[0],r.id=r.shortId+"@"+r.packageId,r.version=1;else{if(1!==i.length)throw Error("unexpected study id:"+e);r.packageId="tv-"+i[0],r.id=r.shortId+"@"+r.packageId,r.version=1}return r.fullId=r.id+"-"+r.version,
"tv-scripting"===r.packageId?(o=r.shortId,0===o.indexOf("Script$")||0===o.indexOf("StrategyScript$")?(n=o.indexOf("_"),r.productId=n>=0?o.substring(0,n):r.packageId):r.productId=r.packageId):r.productId=r.packageId,r},o.getPackageName=function(e){return(/^[^@]+@([^-]+-[^-]+)/.exec(e||"")||[0,"tv-basicstudies"])[1]},o.cutFullId=function(e){return e.replace(/(@[^-]+-[^-]+).*$/,"$1")},o.cutDollarHash=function(e){var t,i,o=e.indexOf("$"),n=e.indexOf("@");return-1===o?e:(t=e.substr(0,o),i=n>=0?e.substr(n):"",t+i)},o.cutScriptIdPart=function(e){var t=e.indexOf("$"),i=e.indexOf("@");return t<0&&i>=0?"":e.substring(Math.max(t+1,0),i>=0?i:e.length)},o.hasUserIdSuffix=function(e){return/^USER;[\d\w]+;\d+$/.test(e)},o.getSourceIdByInputs=function(e,t){var i,n,r;if(!Array.isArray(e)||!t)return null;for(i=0;i<e.length;++i)if(n=e[i],o.isSourceInput(n)&&"string"==typeof t[n.id])return r=t[n.id],~r.indexOf("$")&&(r=r.split("$")[0]),r;return null},o.getSourceInputIds=function(e){var t,i,n=[],r=e.inputs;for(t=0;t<r.length;++t)i=r[t],o.isSourceInput(i)&&n.push(i.id);return n},o.setChildStudyMetaInfoPropertiesSourceId=function(t,i,n){var r,s,a,l;for(r=0;r<t.inputs.length;++r)s=t.inputs[r],o.isSourceInput(s)&&n instanceof e&&n.inputs&&n.inputs[s.id]&&(a=n.inputs[s.id].value(),a.indexOf("$")>0&&(l=a.replace(/^[^\$]+/,i),n.inputs[s.id].setValue(l)))},o.patchChildStudyMetaInfoState=function(e){function t(e){if("object"==typeof e)for(var i in e)"string"==typeof e[i]&&/^[^\$]+\$\d+$/.test(e[i])?e[i]=e[i].replace(/^[^\$]+/,"{pid}"):t(e[i])}e.state&&t(e.state.inputs),e.state.isChildStudy=!0},o.prototype.parseValue=function(e,t){return"bool"===e?TradingView.parseBool(t):t},o.prototype.defaultInputs=function(){var e,t=[];for(e=0;e<this.inputs.length;e++)t.push(this.inputs[e].defval);return t},o.prototype.state=function(e){var t,i={};for(t in this)this.hasOwnProperty(t)&&(i[t]=this[t],!0!==e&&"id"===t&&(i[t]+="-"+this.version));return i},o.findStudyMetaInfoByDescription=function(e,t){if(e){for(var i=0;i<e.length;++i)if(e[i].description.toLowerCase()===t.toLowerCase())return e[i];throw Error("unexpected study id:"+t)}throw Error("There is no studies metainfo")},o._findStudyMetaInfo=function(e,t){for(var i=0;i<e.length;i+=1)if(e[i].id===t)return[i,e[i]];return[]},o.findStudyMetaInfo=function(e,t){if(!e)throw new ReferenceError("There is no studies metainfo");var i=o._findStudyMetaInfo(e,t)[1];if(!i)throw new ReferenceError("unexpected study id:"+t);return i},o.isParentSourceId=function(e){return"string"==typeof e&&/^[^\$]+\$\d+$/.test(e)},o.isSourceInput=function(e){return e.id&&(("source"===e.id||"src"===e.id)&&("text"===e.type||"source"===e.type)||"source"===e.type)},o.getChildSourceInputTitles=function(e,t,i){var n,r,s,a,l={};if(t.plots&&t.plots.length&&e.options&&e.options.length)for(n=0;n<e.options.length;++n)r=e.options[n],s=r&&+r.split("$")[1],(a=isFinite(s)&&t.plots[s])&&~o.CHILD_STUDY_ALLOWED_PLOT_TYPES.indexOf(a.type)&&(l[r]=t.styles&&t.styles[a.id]&&t.styles[a.id].title||a.id,i&&(l[r]=i+":"+l[r]));return l},
o.removeStudyMetaInfo=function(e,t,i){var n=function(i){return void 0!==(i=void 0!==i?i:o._findStudyMetaInfo(e,t.id)[0])&&(e.splice(i,1),defaults.remove(o.getStudyPropertyRootName(t)),!0)};if(e)return n(i);throw Error("There are no studies metainfo")},o.getStudyPropertyRootName=function(e){var t="study_"+e.id;return e.pine&&e.pine.version&&(t+="_"+e.pine.version.replace(".","_")),t},o.addOrReplaceStudyMetaInfo=function(e,t){var i,n,s,a,l=new o(t),c=o._findStudyMetaInfo(e,l.id),h=c[0],u=c[1];if(u){if(i=u.pine&&u.pine.version,!(null==(n=l.pine&&l.pine.version)||null==i||n>=i))return l;o.removeStudyMetaInfo(e,l,h)}else o.removeStudyMetaInfo(e,l,h)&&r.logDebug("Study with id="+l.id+" already exists in the model!");return e.push(l),l.defaults&&(s=TradingView.clone(l.defaults),s.precision="default",a=o.getStudyPropertyRootName(l),defaults.create(a,s)),l},o.overrideDefaults=function(e){null!==l&&0!==e.length&&a(l,e,function(e){return TradingView.defaultProperties["study_"+e]||null})},o.setDefaultsOverrides=function(e){l=e},o.createMetaInfoStub=function(e,t){var i,o,r;return n(TradingView.isExistent(e.scriptIdPart),"scriptIdPart is missing, study: "+JSON.stringify(e)),i=e.extra&&"strategy"===e.extra.kind||!0===e.isTVScriptStrategy,o=TVScript.createScriptStudyId(e.scriptIdPart,t,i),r={isTVScriptStubToCompile:!0,id:o,scriptIdPart:e.scriptIdPart,description:e.scriptName,TVScriptSourceCode:e.scriptSource,is_hidden_study:e.extra&&e.extra.is_hidden_study,extra:e.extra,version:t},r.pine={},r.pine.version=TradingView.isExistent(e.version)?e.version:-1,r.pine.access=TVScript.Access.MAP_ID_TO_NAME[e.access],r.pine.userHaveAccess=e.userHaveAccess,!0===i&&(r.isTVScriptStrategy=!0),r},o.isScriptStrategy=function(e){if(e.extra&&e.extra.kind)return e.extra.kind===TVScript.Kinds.STRATEGY;if(!0===e.isTVScriptStrategy)return!0;var t=e.TVScriptSourceCode||e.scriptSource;return!!t&&TVScript.isStrategy(t)},o.replaceWithFullStudyMetaInfoAsync=function(e,t){var n,r,s,a=$.Deferred();if(t.isTVScriptStubToCompile){n=i(112);try{if(r=o.findStudyMetaInfo(e,t.id),!r.isTVScriptStubToCompile&&t.pine.version===r.pine.version)return a.resolve(r),a.promise()}catch(e){}s=null,s=n.translateScriptAsync2(t.scriptIdPart,t.pine.version),s.done(function(t){var i=o.addOrReplaceStudyMetaInfo(e,t);a.resolve(i)}).fail(function(i){var r="Error: couldn't compile script '"+t.description+"'",s=n.createScriptStubNoSrc(r,t.scriptIdPart),l=o.addOrReplaceStudyMetaInfo(e,s);a.resolve(l)})}else a.resolve(t);return a.promise()},o.getOrderedInputIds=function(e){var t,i,o=[],n=e.inputs;for(t=0;t<n.length;++t)i=n[t],o.push(i.id);return o},o.canBeChild=function(e){var t,i,n;if(e&&"string"==typeof e)return!0;if(!e||e.extra&&!o.isAllowedSourceInputsCount(e.extra.sourceInputsCount)||!0===e.canNotBeChild||!1===e.canBeChild||~o.CHILD_STUDY_EXCLUDE_IDS.indexOf(e.id)||e.isTVScriptStrategy||e.TVScriptSourceCode&&TVScript.isStrategy(e.TVScriptSourceCode))return!1;if(e.isTVScriptStubToCompile)return!0;for(t=e.inputs,i=0,n=0;n<t.length;++n)o.isSourceInput(t[n])&&++i
;return o.isAllowedSourceInputsCount(i)},o.isAllowedSourceInputsCount=function(e){return s("multiple-sos")?e>=1:1===e},o.canHaveChildren=function(e){if(e){if(e.isTVScriptStrategy||e.TVScriptSourceCode&&TVScript.isStrategy(e.TVScriptSourceCode))return!1;if(e.id&&!~o.CHILD_STUDY_PARENT_EXCLUDE_IDS.indexOf(e.id)&&Array.isArray(e.plots))for(var t=0;t<e.plots.length;++t)if(~o.CHILD_STUDY_ALLOWED_PLOT_TYPES.indexOf(e.plots[t].type))return!0}return!1},TradingView.StudyMetaInfo=o,void 0!==t&&t&&t.exports&&(t.exports=o)}).call(t,i(37),i(15)(e))},function(e,t,i){"use strict";function o(e){this._invalidationLevel=e||o.UPDATE_CURSOR_ONLY,this._invalidatedPanes={}}o.UPDATE_CURSOR_ONLY=1,o.LIGHT_UPDATE=2,o.FULL_UPDATE=3,o.prototype.invalidatePane=function(e,t){this._invalidatedPanes[e]?this._invalidatedPanes[e]=Math.max(this._invalidatedPanes[e],t):this._invalidatedPanes[e]=t},o.prototype.invalidateAll=function(e){this._invalidationLevel=Math.max(this._invalidationLevel,e)},o.prototype.fullInvalidation=function(){return this._invalidationLevel},o.prototype.invalidateForPane=function(e){return this._invalidatedPanes[e]?Math.max(this._invalidatedPanes[e],this._invalidationLevel):this._invalidationLevel},o.prototype.merge=function(e){this.force=this.force||e.force,this._invalidationLevel=Math.max(this._invalidationLevel,e._invalidationLevel);for(var t in e._invalidatedPanes)this._invalidatedPanes[t]?this._invalidatedPanes[t]=Math.max(this._invalidatedPanes[t],e._invalidatedPanes[t]):this._invalidatedPanes[t]=e._invalidatedPanes[t]},o.prototype.exclude=function(e){this._invalidationLevel<=e&&(this._invalidationLevel=0);for(var t in this._invalidatedPanes)this._invalidatedPanes[t]<=e&&(this._invalidatedPanes[t]=0)},e.exports=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){this._renderers=[],this._globalAlpha=1}return e.prototype.setGlobalAlpha=function(e){this._globalAlpha=e},e.prototype.append=function(e){this._renderers.push(e)},e.prototype.insert=function(e,t){this._renderers.splice(t,0,e)},e.prototype.draw=function(e){for(var t=0;t<this._renderers.length;t++)e.save(),e.globalAlpha=this._globalAlpha,this._renderers[t].draw(e),e.restore()},e.prototype.drawBackground=function(e){var t,i;for(e.save(),e.globalAlpha=this._globalAlpha,t=0;t<this._renderers.length;t++)i=this._renderers[t],i.drawBackground&&i.drawBackground(e);e.restore()},e.prototype.hitTest=function(e){var t,i,o=null;for(t=this._renderers.length-1;t>=0;t--)null!==(i=this._renderers[t].hitTest(e))&&(null===o||i.result()>o.result())&&(o=i);return o},e}();t.CompositeRenderer=o},function(e,t,i){"use strict";function o(e,t,i,o,n,r){var s,a,h,u;return l.equalPoints(e,t)?null:(s=new l.Point(0,0),a=new l.Point(i,o),n?r?(h=c.intersectLineAndRectangle(l.lineThroughPoints(e,t),s,a),Array.isArray(h)?h:null):(u=c.intersectRayAndRectangle(t,e,s,a),null===u||l.equalPoints(t,u)?null:l.lineSegment(t,u)):r?(u=c.intersectRayAndRectangle(e,t,s,a),
null===u||l.equalPoints(e,u)?null:l.lineSegment(e,u)):(h=c.intersectLineSegmentAndRectangle(l.lineSegment(e,t),s,a),Array.isArray(h)?h:null))}function n(e){return.3*e}function r(e){return 2+.5*e}function s(e){return null!==e&&void 0!==e&&!h.isNaN(e)}function a(e,t){void 0!==t&&u.setLineStyle(e,t)}var l,c,h,u;Object.defineProperty(t,"__esModule",{value:!0}),l=i(8),c=i(170),h=i(10),u=i(69),t.extendAndClipLineSegment=o,t.optimalBarWidth=n,t.selectionTolerance=r,t.coordinateIsValid=s,t.setValidLineStyle=a},function(e,t,i){"use strict";function o(){return new Promise(function(e){i.e(4).then(function(t){e(i(82).isOpened())}.bind(null,i)).catch(i.oe)})}function n(e){return new Promise(function(t){i.e(4).then(function(o){t(i(82).goProDialog(e))}.bind(null,i)).catch(i.oe)})}Object.defineProperty(t,"__esModule",{value:!0}),t.isOpened=o,t.createGoProDialog=n},,function(e,t,i){"use strict";function o(e){window.t=e}function n(e){r.$||(r.$={}),r.$.t=e}var r,s;Object.defineProperty(t,"__esModule",{value:!0}),r=window,t.addTranslationFunctionToWindow=o,t.addTranslationFunctionToJQuery=n,s=function(e,t){return e},t.translationFunction=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,i,o,n){var r=this;return e.forEach(function(e){r.processors[e]&&(t=r.processors[e].process(t,i,o,n))}),t}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e){return e.interpolation={unescapeSuffix:"HTML"},e.interpolation.prefix=e.interpolationPrefix||"__",e.interpolation.suffix=e.interpolationSuffix||"__",e.interpolation.escapeValue=e.escapeInterpolation||!1,e.interpolation.nestingPrefix=e.reusePrefix||"$t(",e.interpolation.nestingSuffix=e.reuseSuffix||")",e}function r(e){return e.resStore&&(e.resources=e.resStore),e.ns&&e.ns.defaultNs?(e.defaultNS=e.ns.defaultNs,e.ns=e.ns.namespaces):e.defaultNS=e.ns||"translation",e.fallbackToDefaultNS&&e.defaultNS&&(e.fallbackNS=e.defaultNS),e.saveMissing=e.sendMissing,e.saveMissingTo=e.sendMissingTo||"current",e.returnNull=!e.fallbackOnNull,e.returnEmptyString=!e.fallbackOnEmpty,e.returnObjects=e.returnObjectTrees,e.joinArrays="\n",e.returnedObjectHandler=e.objectTreeKeyHandler,e.parseMissingKeyHandler=e.parseMissingKey,e.appendNamespaceToMissingKey=!0,e.nsSeparator=e.nsseparator,e.keySeparator=e.keyseparator,"sprintf"===e.shortcutFunction&&(e.overloadTranslationOptionHandler=function(e){var t,i=[];for(t=1;t<e.length;t++)i.push(e[t]);return{postProcess:"sprintf",sprintf:i}}),e.whitelist=e.lngWhitelist,e.preload=e.preload,"current"===e.load&&(e.load="currentOnly"),"unspecific"===e.load&&(e.load="languageOnly"),e.backend=e.backend||{},e.backend.loadPath=e.resGetPath||"locales/__lng__/__ns__.json",e.backend.addPath=e.resPostPath||"locales/add/__lng__/__ns__",e.backend.allowMultiLoading=e.dynamicLoad,e.cache=e.cache||{},e.cache.prefix="res_",e.cache.expirationTime=6048e5,e.cache.enabled=!!e.useLocalStorage,e=n(e),
e.defaultVariables&&(e.interpolation.defaultVariables=e.defaultVariables),e}function s(e){return e=n(e),e.joinArrays="\n",e}function a(e){return(e.interpolationPrefix||e.interpolationSuffix||e.escapeInterpolation)&&(e=n(e)),e.nsSeparator=e.nsseparator,e.keySeparator=e.keyseparator,e.returnObjects=e.returnObjectTrees,e}function l(e){e.lng=function(){return h.default.deprecate("i18next.lng() can be replaced by i18next.language for detected language or i18next.languages for languages ordered by translation lookup."),e.services.languageUtils.toResolveHierarchy(e.language)[0]},e.preload=function(t,i){h.default.deprecate("i18next.preload() can be replaced with i18next.loadLanguages()"),e.loadLanguages(t,i)},e.setLng=function(t,i,o){if(h.default.deprecate("i18next.setLng() can be replaced with i18next.changeLanguage() or i18next.getFixedT() to get a translation function with fixed language or namespace."),"function"==typeof i&&(o=i,i={}),i||(i={}),!0===i.fixLng&&o)return o(null,e.getFixedT(t));e.changeLanguage(t,o)},e.addPostProcessor=function(t,i){h.default.deprecate("i18next.addPostProcessor() can be replaced by i18next.use({ type: 'postProcessor', name: 'name', process: fc })"),e.use({type:"postProcessor",name:t,process:i})}}var c,h;Object.defineProperty(t,"__esModule",{value:!0}),t.convertAPIOptions=r,t.convertJSONOptions=s,t.convertTOptions=a,t.appendBackwardsAPI=l,c=i(12),h=o(c)},function(e,t,i){"use strict";(function(e,t,o){var n,r,s,a,l;i(35),n=i(126).regExpEscape,r=i(53).TVXWindowEvents,s=i(26).TVLocalStorage,a=["s.tradingview.com","betacdn.tradingview.com"],l=window.TVSettings=function(){function i(e){return O+"."+e}function o(e,t){var i;return i=D[e],window.is_authenticated&&!H||null!=i||(i=D[e]),null==i?t:i}function c(e,t){var i=o(e,void 0);if(null==i)return t;try{return JSON.parse(i)}catch(i){return _(e),t}}function h(e,t){var i=o(e);return null==i?t:!(!i||"false"===i||0==+i)}function u(e,t,i){var n,r=o(e,void 0,i);if(null==r)return t;if(n=parseFloat(r),!isFinite(n))throw new TypeError('"'+r+'" is not float (key: "'+e+'")');return n}function d(e,t,i){var n,r=o(e,void 0,i);if(null==r)return t;if(n=parseInt(r,10),!isFinite(n))throw new TypeError('"'+r+'" is not int (key: "'+e+'")');return n}function p(e,t,i){i=i||{};var o=""+t;return D[e]!==o&&(D[e]=o,g(e)),i.forceFlush&&!B&&(B=setTimeout(function(){B=void 0,v()},M)),l}function f(e,t,i){return p(e,JSON.stringify(t),i),l}function _(e,t){return t=t||{},null!=D[e]&&(delete D[e],g(e)),t.forceFlush&&v(),l}function m(){R=void 0,V.length&&v()}function g(e){if(W)null==D[e]?W.removeValue(i(e)):W.setValue(i(e),D[e]);else if(!window.is_authenticated||H)try{null==D[e]?s.removeItem(i(e)):s.setItem(i(e),D[e])}catch(e){}else V.push(e),R||(R=setTimeout(m,k));r.emit("settings",JSON.stringify({key:e,value:D[e]}))}function v(t){var i,o,n,r,s;if(!e.enabled("widget")&&window.is_authenticated&&!H&&0!==V.length){for(i=V,V=[],o={},n=i.length;n--;)r=i[n],s=D[r],void 0===s&&(s=null),o[r]=s;$.ajax({url:"/savesettings/",type:"POST",data:{delta:JSON.stringify(o)},async:!t})}}function y(){
var e,t,i;for(e=0;e<s.length;e++)t=s.key(e),i=O.length,t.substring(0,i+1)===O+"."&&(V=[],s.removeItem(t));$.post("/restoredefaults/",{},function(e){TVDialogs.showNotice("Success","Defaults has been successfully restored")}).error(function(e){})}function b(){return Object.keys(D)}function S(e,t){var i,o=b(t),r=[];for(e=RegExp("^"+n(e).replace(/\\\*\\\*/gi,".+").replace(/\\\*/gi,"[^.]+")+"$","gi"),i=o.length-1;i>=0;i--)e.test(o[i])&&r.push(o[i]),e.lastIndex=0;return r}function w(e){for(var t=0;t<N.length;++t)if(N[t].exec(e))return!0;return!1}function T(){var t,i,o,n,r;for(D={},t=O+".",i=!e.enabled("save_chart_properties_to_local_storage"),o=s.length;o--;)(n=s.key(o))&&n.substring(0,t.length)===t&&(r=n.substring(t.length),i&&!w(r)||(D[r]=s.getItem(n)))}function P(e){var t,i,o,n,r;for(D={},t=0===Object.keys(e).length,i=O+".",o=s.length;o--;)(n=s.key(o))&&n.substring(0,i.length)===i&&(t&&(r=n.substring(i.length),p(r,s.getItem(n))),s.removeItem(n));Object.keys(e).forEach(function(t){D[t]=e[t]+""})}function C(){var e,t,i,o;if(TradingView.onWidget()&&a.includes(window.location.host))for(e="tradingview.",t=s.length;t--;)i=s.key(t),0===i.indexOf(e)&&(o=i.replace(e,O+"."),s.setItem(o,s.getItem(i)),s.removeItem(i))}function x(e){W?P(W.initialSettings||{}):window.is_authenticated&&!H?P(e||{}):(C(),T()),z.fire()}function E(e){W=e}var L,I,A,k,M,O,D,V,R,B,N,z,F=!1,H=e.enabled("cqg_terminal"),W=null;try{F=!TradingView.onWidget()&&parent&&parent!==window&&!!parent.IS_DEMO_PAGE}catch(e){}return F?(L={"widgetbar.layout-settings":{widgets:{},settings:{minimized:!0}},notShowMainWizard:!0},I=function(e,t,i){var o=L[e];return null==o?t:o},A=function(){},{loaded:!1,loadedModel:!1,getValue:I,getJSON:I,getBool:I,getFloat:I,getInt:I,setValue:A,setJSON:A,remove:A,restoreDefaults:A,keys:function(){return Object.keys(L)},keysMask:function(){return[]},sync:A,onSync:{subscribe:function(){}}}):(k=12e4,M=10,"local"===window.environment&&(k=5e3),O=TradingView.onWidget()?"tradingview-widget":"tradingview",D={},V=[],N=[/^widgetbar\.widget\.watchlist.+/,/.+quicks$/,/^widgetbar\.layout-settings$/,/^ChartSideToolbarWidget\.visible$/,/^onwidget\.watchlist$/,/^domepanel.visible$/,/^chart\.favoriteDrawings$/,/^chart\.favoriteDrawingsPosition$/,/^ChartFavoriteDrawingToolbarWidget\.visible/,/^trading\.chart\.proterty$/,/^trading_floating_toolbar\.position$/],r.on("settings",function(e){var t=JSON.parse(e);null==t.value?delete D[t.key]:D[t.key]=t.value}),z=new t,document.addEventListener("visibilitychange",function(){"hidden"!==document.visibiltyState&&!0!==document.hidden||v()}),window.addEventListener("unload",function(){v(!0)}),{loaded:!1,loadedModel:!1,getValue:o,getJSON:c,getBool:h,getFloat:u,getInt:d,setValue:p,setJSON:f,remove:_,restoreDefaults:y,keys:b,keysMask:S,sync:x,onSync:z,setSettingsAdapter:E})}(),void 0!==o&&o&&o.exports&&(o.exports=l)}).call(t,i(3),i(4),i(15)(e))},function(e,t,i){"use strict";var o=i(17),n=i(53).TVXWindowEvents,r=i(20).trackEvent,s=i(26).TVLocalStorage,a=i(473).PushStream,l=i(239).ConnectionStatus,c=function(){function e(e){
"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)}var t=null,i={},c={},h=[],u=null,d="multiplexer-",p="pushStreamMultiplexer.",f=l.Closed,_=!1,m=function(){},g={_codeParams:function(e){return e=Array.prototype.slice.call(e),e.push((new Date).getTime()),JSON.stringify(e)},_decodeParams:function(e){var t=JSON.parse(e);return t.pop(),t},guid:o.guid(),_init:function(){m("init on: ",this.guid),this._needInstantiating()?(m("_instantiatePushStream from init"),this._instantiatePushStream()):f=parseInt(n.current(g._xEventConnectionStatus),10)},_instantiatePushStream:function(e){this._setMark(),t=new a(this._dispatchMessage.bind(this),{url:window.PUSHSTREAM_URL,urlPath:"message-pipe-ws"}),t.connectionStatus().subscribe(this._dispatchStatusChange.bind(this)),this.on("pushstream_set_user_channel",function(e){this._setUserChannel(e)}.bind(this)),this._connectChannels(),m("instantiate on: ",this.guid)},_destructPushStream:function(){var e=t;t=null,e.disconnect(),f=parseInt(n.current(g._xEventConnectionStatus),10),this._dispatchStatusChangeFromOther(f)},_activityTimeout:5e3,_delayTimeout:2e4,_pulseActivity:function(){this.ownPushStream()?this._lostOwn()?(m("lost own: ",this.guid),r("PushstreamReconnect",window.user&&window.user.username||"Guest",navigator.userAgent),this._destructPushStream()):this._setMark():this._needInstantiating()&&!_&&(m("_instantiatePushStream from _pulseActivity"),this._instantiatePushStream())},_markName:p+"mark",_lostOwn:function(){var e=s.getItem(this._markName);return!!e&&(e=this._decodeParams(e),e[0]!==this.guid)},_getMark:function(){return this._decodeParams(s.getItem(this._markName))},_setMark:function(){s.setItem(this._markName,this._codeParams([this.guid,(new Date).getTime()]))},_unsetMark:function(){s.setItem(this._markName,"")},_needInstantiating:function(){var e,t=s.getItem(this._markName);return!t||(t=this._decodeParams(t),e=t[1],(new Date).getTime()-e>this._delayTimeout)},_onRequestRecreate:function(e){if(!this.ownPushStream()&&(m("recreate received on: ",this.guid),this._needInstantiating())){var t=this._decodeParams(e)[0];this._instantiatePushStream(t)}},_onUnload:function(){this.ownPushStream()&&(this._unsetMark(),this._sendRecreateRequest())},_getChannels:function(){return t.getChannels().slice()},_channelsName:p+"channels",_getChannelsFromStorage:function(){var e=s.getItem(this._channelsName);return e?JSON.parse(e):[]},getChannels:function(){return this.ownPushStream()?this._getChannels():this._getChannelsFromStorage()},_storeChannels:function(){s.setItem(this._channelsName,JSON.stringify(this._getChannels()))},_sendRecreateRequest:function(){var e=this._getChannels();n.emit(this._xEventRecreate,this._codeParams([e]))},ownPushStream:function(){return!!t},pushStream:function(){if(!this.ownPushStream())throw Error("Not own PushStream");return t},isConnected:function(){return f>0},status:function(){return f||l.Closed},_userChannel:function(e){return"private_"+e},userChannel:function(){if(!u)throw Error("No user channel");return this._userChannel(u)},
_xEventRecreate:d+"recreate",_xEventSend:d+"send",_xEventChannelAdd:d+"channelAdd",_xEventChannelRemove:d+"channelRemove",_xEventRequiredChannels:d+"requirech",_xEventConnectionStatus:d+"connectionStatus",_xEventReconnectCommand:d+"reconnectCommand",_addChannel:function(e){t.hasChannel(e)||(t.addChannel(e),this._storeChannels())},addChannel:function(e){this.ownPushStream()?this._addChannel(e):n.emit(this._xEventChannelAdd,this._codeParams([e]))},_addChannelFromOther:function(e){var t=this._decodeParams(e)[0];this.ownPushStream()&&this._addChannel(t)},_removeChannel:function(e){t.hasChannel(e)&&(t.removeChannel(e),this._storeChannels())},removeChannel:function(e){this.ownPushStream()?this._removeChannel(e):n.emit(this._xEventChannelRemove,this._codeParams([e]))},_removeChannelFromOther:function(e){var t=this._decodeParams(e)[0];this.ownPushStream()&&this._removeChannel(t)},_connectChannels:function(){t.addChannel("public"),"is_authenticated"in window?this._connectUserChannelInitial(!0):window.loginStateChange&&loginStateChange.subscribe(this,this._connectUserChannelInitial),t.connect()},_connectUserChannelInitial:function(e){e&&(is_authenticated?(u=user.private_channel,t.addChannel("private_"+user.private_channel)):u=null)},_changeLoginState:function(e){e||(is_authenticated?(u=user.private_channel,this.ownPushStream()&&this._addChannel(this.userChannel())):(this.ownPushStream()&&this._removeChannel(this.userChannel()),u=null))},_setUserChannel:function(e){e!==u&&(this.ownPushStream()&&u&&this._removeChannel(this.userChannel()),u=e,this.ownPushStream()&&u&&this._addChannel(this.userChannel()))},_dispatchStatusChange:function(e){m("_dispatchStatusChange:"+e),this._dispatchStatusChangeToOthers(e),this._dispatchStatusChangeToSelf(e)},_dispatchStatusChangeToSelf:function(e){f=parseInt(e,10),m("_dispatchStatusChangeToSelf:"+e),h.forEach(function(e){e(f)})},_dispatchStatusChangeFromOther:function(e){m("_dispatchStatusChangeFromOther:"+e+", ownPushStream:"+this.ownPushStream()),this.ownPushStream()||this._dispatchStatusChangeToSelf(e)},_dispatchStatusChangeToOthers:function(e){this.ownPushStream()&&n.emit(this._xEventConnectionStatus,e)},_dispatchMessage:function(e,t,i){this._dispatchMessageToOthers(e,t,i),this._dispatchMessageToSelf(e,t,i,!1)},_dispatchMessageToSelf:function(e,t,i,o){i=e.channel,e=e.content,this._emit(e,t,i,o),m("Dispatch message to self:",i,e)},_dispatchMessageToOthers:function(e,t,i){var o=[e,t,i,(new Date).getTime()];n.emit(this._xEventSend,this._codeParams(o))},_dispatchMessageFromOther:function(e){var t,i,o,n;this.ownPushStream()||(t=this._decodeParams(e),i=t[0],o=t[1],n=t[2],this._dispatchMessageToSelf(i,o,n,!0))},_isSpecialChannel:function(e){return/\*/.test(e)},_emit:function(e,t,o,n){function r(i){i.call(this,e,t,o,n)}var s,a;i[o]&&i[o].forEach(r,this);for(s in c)a="^"+s.replace(/\*/g,".*?")+"$",RegExp(a).test(o)&&c[s].forEach(r,this)},on:function(e,t){var o=this._isSpecialChannel(e)?c:i;o[e]||(o[e]=[]),o[e].push(t)},off:function(e,t){var o,n=this._isSpecialChannel(e)?c:i;switch(arguments.length){
case 0:i={},c={};break;case 1:n[e]&&delete n[e];break;default:n[e]&&~(o=n[e].indexOf(t))&&n[e].splice(o,1)}},onStatus:function(e){h.push(e),setTimeout(function(){e(f)},0)},offStatus:function(e){var t=h.indexOf(e);-1!==t&&h.slice(t,1)},forceConnect:function(){_=!1,this.ownPushStream()?(t.disconnect(),this._instantiatePushStream()):this._needInstantiating()?this._instantiatePushStream():n.emit(this._xEventReconnectCommand,{})},disconnect:function(){this.ownPushStream()&&(this._destructPushStream(),this._unsetMark(),_=!0)},_dispatchReconnectCommandFromOther:function(){this.ownPushStream()&&this.forceConnect()}};return g._init(),window.addEventListener("unload",g._onUnload.bind(g)),n.on(g._xEventRecreate,g._onRequestRecreate.bind(g)),n.on(g._xEventSend,g._dispatchMessageFromOther.bind(g)),n.on(g._xEventChannelAdd,g._addChannelFromOther.bind(g)),n.on(g._xEventChannelRemove,g._removeChannelFromOther.bind(g)),n.on(g._xEventConnectionStatus,g._dispatchStatusChangeFromOther.bind(g)),n.on(g._xEventReconnectCommand,g._dispatchReconnectCommandFromOther.bind(g)),e(function(){window.loginStateChange&&loginStateChange.subscribe(g,g._changeLoginState)}),setInterval(g._pulseActivity.bind(g),g._activityTimeout),g._pulseActivity(),g}();e.exports=c},function(e,t,i){"use strict";function o(){return"www.tradingview.com"===location.host||"wwwcn.tradingview.com"===location.host||"dwq4do82y8xi7.cloudfront.net"===location.host||"s.tradingview.com"===location.host||"i18n.tradingview.com"===location.host||"partial.tradingview.com"===location.host||location.host.match(/^[a-z]{2}\.tradingview\.com/)||location.host.match(/prod-[^.]+.tradingview.com/)?"battle":-1!==location.href.indexOf("tradingview.com")?"staging":location.host.match(/webcharts/)?"staging_local":(location.host.match(/^localhost(:\d+)?$/),"local")}function n(){return"local"===o()}function r(){return"battle"===o()}function s(){return!r()}Object.defineProperty(t,"__esModule",{value:!0}),t.environment=o,t.isLocal=n,t.isProd=r,t.isDebug=s},function(e,t,i){"use strict";function o(e,t,i){var o=t.subtract(e),n=i.subtract(e),r=n.dotProduct(o)/o.dotProduct(o);return{coeff:r,distance:e.addScaled(o,r).subtract(i).length()}}function n(e,t,i){var n,r,s=o(e,t,i);return 0<=s.coeff&&s.coeff<=1?s:(n=e.subtract(i).length(),r=t.subtract(i).length(),n<r?{coeff:0,distance:n}:{coeff:1,distance:r})}Object.defineProperty(t,"__esModule",{value:!0}),t.distanceToLine=o,t.distanceToSegment=n},function(e,t,i){"use strict";(function(e){function o(){this._zorder=0,this.m_priceScale=null,this._id=s.randomHashN(6),this._ownerSource=null,this._userEditEnabled=!0,this.hasAlert=new e(!1)}function n(e){o.call(this),this._isOverlay=null,this._model=e}var r=i(7).DefaultProperty,s=i(17);o.prototype.createPropertiesObject=function(e,t,i){return new r(e,t,i)},o.prototype.id=function(){return this._id},o.prototype.idForAlert=function(){return this._id},o.prototype.setId=function(e){this._id=e},o.prototype.zorder=function(){return this._zorder},o.prototype.setZorder=function(e){
"number"==typeof e&&this._zorder!==e&&(this._zorder=e)},o.prototype.title=function(){throw Error("Implement this fun in a subclass")},o.prototype.priceScale=function(){return this.m_priceScale},o.prototype.setPriceScale=function(e){this.m_priceScale=e},o.prototype.ownerSource=function(){return this._ownerSource},o.prototype.setOwnerSource=function(e){this._ownerSource=e,e&&this.setPriceScale(e.priceScale())},o.prototype.isSavedInChart=function(e){return!0},o.prototype.isSavedInStudyTemplates=function(){return!0},o.prototype.isRemovedByStudyTemplates=function(){return!0},o.prototype.hasContextMenu=function(){return!0},o.prototype.showInObjectTree=function(){return!0},o.prototype.setUserEditEnabled=function(e){this._userEditEnabled=e},o.prototype.userEditEnabled=function(){return this._userEditEnabled},o.prototype.canBeHidden=function(){return this.userEditEnabled()},o.prototype.isUserDeletable=function(){return this.userEditEnabled()},o.prototype.canHasAlert=function(){return!1},o.prototype.properties=function(){throw Error("Implement this fun in a subclass")},o.prototype.statusView=function(){return null},o.prototype.dataWindowView=function(){return null},o.prototype.priceAxisViews=function(e,t){return null},o.prototype.updateAllViews=function(){},o.prototype.paneViews=function(e){return null},o.prototype.isChildStudy=function(){return!1},o.prototype.hasChildren=function(){return!1},o.prototype.canHaveChildren=function(){return!1},o.prototype.onClickOutside=function(){},o.prototype.getInputsPropertyPage=function(){return null},o.prototype.getStylesPropertyPage=function(){return null},o.prototype.getDisplayPropertyPage=function(){return null},o.prototype.getVisibilitiesPropertyPage=function(){return null},o.prototype.getStrategyPropertyPage=function(){return null},o.prototype.getSourceIcon=function(){return null},inherit(n,o),n.prototype.isNoScale=function(){return!!this._isOverlay},n.prototype.base=function(){return 0},n.prototype.formatter=function(){return null},n.prototype.model=function(){return this._model},n.prototype.priceRange=function(e,t){return null},n.prototype.isDraggable=function(){return!this._metaInfo||!this._metaInfo.linkedToSeries},n.prototype.priceLineColor=function(e){return e},t.DataSource=o,t.PriceDataSource=n}).call(t,i(22))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i(28);!function(e){function t(e,t){s[e]||(s[e]=[]),s[e].push(t)}function i(e,t){if(s[e]){var i=s[e].indexOf(t);-1!==i&&(1===s[e].length?delete s[e]:s[e].splice(i,1))}}function o(e){return TVLocalStorage.getItem(r+e)}function n(e,t){void 0===t&&(t=(new Date).valueOf()),t!==TVLocalStorage.getItem(r+e)&&TVLocalStorage.setItem(r+e,t)}var r="tvxwevents.",s={};window.addEventListener("storage",function(e){if(null!==e.newValue){var t=e.key;t&&t.startsWith(r)&&(t=t.substr(r.length),s[t]&&s[t].forEach(function(t){t.call(e.newValue,e.newValue)}))}}),e.on=t,e.off=i,e.current=o,e.emit=n}(t.TVXWindowEvents||(t.TVXWindowEvents={}))},,function(e,t,i){"use strict";function o(e,t,i){
return G.isNaN(t)?e:t<e?e:t>i?i:Math.round(t)}function n(e,t,i){return G.isNaN(t)?e:t<e?e:t>i?i:Math.round(1e4*t)/1e4}function r(e){return o(0,e,255)}function s(e){return o(0,e,255)}function a(e){return o(0,e,255)}function l(e){return n(0,e,1)}function c(e,t,i){return[r(e),s(t),a(i)]}function h(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function u(e,t,i,o){var n,c,h;return Array.isArray(e)?(n=e,o=t,[n[0],n[1],n[2],l(o)]):(c=e,h=t,i=i||0,o=o||0,[r(c),s(h),a(i),l(o)])}function d(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function p(e){return n(0,e,1)}function f(e){return n(0,e,1)}function _(e){return n(0,e,1)}function m(e){return n(0,e,1)}function g(e){return n(0,e,1)}function v(e,t,i){return[p(e),f(t),m(i)]}function y(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function b(e,t,i){return[p(e),_(t),g(i)]}function S(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function w(e){var t,i=e[0],o=e[1],n=e[2],r=i/255,s=o/255,a=n/255,l=Math.min(r,s,a),c=Math.max(r,s,a),h=0,u=0,d=(l+c)/2;if(l===c)h=0,u=0;else switch(t=c-l,u=d>.5?t/(2-c-l):t/(c+l),c){case r:h=((s-a)/t+(s<a?6:0))/6;break;case s:h=((a-r)/t+2)/6;break;case a:h=((r-s)/t+4)/6}return[h,u,d]}function T(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+(t-e)*(2/3-i)*6:e}function P(e){var t,i,o,n,l,c=e[0],h=e[1],u=e[2];return 0===h?t=i=o=u:(n=u<.5?u*(1+h):u+h-u*h,l=2*u-n,t=T(l,n,c+1/3),i=T(l,n,c),o=T(l,n,c-1/3)),[r(255*t),s(255*i),a(255*o)]}function C(e){var t=e[0],i=e[1],o=e[2],n=t/255,r=i/255,s=o/255,a=Math.min(n,r,s),l=Math.max(n,r,s),c=l-a,h=0,u=0===l?0:c/l,d=l;if(l===a)h=0;else switch(l){case t:h=((r-s)/c+(r<s?6:0))/6;break;case i:h=((s-n)/c+2)/6;break;case o:h=((n-r)/c+4)/6}return[h,u,d]}function x(e){var t=e[0],i=e[1],o=e[2],n=Math.floor(6*t),l=6*t-n,c=o*(1-i),h=o*(1-l*i),u=o*(1-(1-l)*i),d=0,p=0,f=0;switch(n%6){case 0:d=o,p=u,f=c;break;case 1:d=h,p=o,f=c;break;case 2:d=c,p=o,f=u;break;case 3:d=c,p=h,f=o;break;case 4:d=u,p=c,f=o;break;case 5:d=o,p=c,f=h}return[r(255*d),s(255*p),a(255*f)]}function E(e){return Y[0]*e[0]+Y[1]*e[1]+Y[2]*e[2]}function L(e,t){var i=e[0],o=e[1],n=e[2],r=t[0],s=t[1],a=t[2],l=r-i,c=s-o,h=a-n;return Math.sqrt(l*l+c*c+h*h)}function I(e){return[255-e[0],255-e[1],255-e[2]]}function A(e,t){var i=w(e);return P([i[0],i[1],m(i[2]-t/100)])}function k(e,t){var i=e[0],o=e[1],n=e[2],c=e[3],h=t[0],u=t[1],d=t[2],p=t[3],f=l(1-(1-p)*(1-c));return[r(h*p/f+i*c*(1-p)/f),s(u*p/f+o*c*(1-p)/f),a(d*p/f+n*c*(1-p)/f),f]}function M(e,t,i){var o,n;return void 0===i&&(i=.05),o=w(e),n=o[0]+t*i,o[0]=p(n-Math.floor(n)),P(o)}function O(e,t,i){return void 0===i&&(i=.05),N(M(U(e),t,i))}function D(e,t){return t in e}function V(e){var t=K.re.exec(e);return null!==t?K.parse(t):null}function R(e){return"rgb("+e[0]+", "+e[1]+", "+e[2]+")"}function B(e){var t=J.re.exec(e);return null!==t?J.parse(t):null}function N(e){var t=e[0],i=e[1],o=e[2],n=t.toString(16),r=i.toString(16),s=o.toString(16);return"#"+(1===n.length?"0":"")+n+(1===r.length?"0":"")+r+(1===s.length?"0":"")+s}function z(e){var t=Z.re.exec(e)
;return null!==t?Z.parse(t):null}function F(e){var t=Q.re.exec(e);return null!==t?Q.parse(t):null}function $(e){return"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function H(e,t){if(t<0||t>255)throw Error("invalid threshold value, valid values are [0, 255]");return E(e)>=t?"white":"black"}function W(e){var t,i,o,n,r;if(e=e.toLowerCase(),D(X,e)){if(null!==(t=B(X[e])))return t;throw Error("Invalid named color definition")}return null!==(i=V(e))?i:null!==(o=B(e))?o:null!==(n=z(e))?n:(r=F(e),null!==r?r:null)}function U(e){var t=W(e);if(null!==t)return t;throw Error("Passed color string does not match any of the known color representations")}function j(e){var t,i,o,n,r,s,a,l;if(e=e.toLowerCase(),D(X,e)){if(null!==(t=B(X[e])))return i=t[0],o=t[1],n=t[2],[i,o,n,1];throw Error("Invalid named color definition")}return null!==(r=V(e))?(i=r[0],o=r[1],n=r[2],[i,o,n,1]):null!==(s=B(e))?(i=s[0],o=s[1],n=s[2],[i,o,n,1]):null!==(a=z(e))?(i=a[0],o=a[1],n=a[2],[i,o,n,1]):(l=F(e),null!==l?l:null)}function q(e){var t=j(e);if(null!==t)return t;throw Error("Passed color string does not match any of the known color representations")}var G,Y,X,K,J,Z,Q;Object.defineProperty(t,"__esModule",{value:!0}),G=i(113),t.normalizeRedComponent=r,t.normalizeGreenComponent=s,t.normalizeBlueComponent=a,t.normalizeAlphaComponent=l,t.rgb=c,t.areEqualRgb=h,t.rgba=u,t.areEqualRgba=d,t.normalizeHue=p,t.normalizeHslSaturation=f,t.normalizeHsvSaturation=_,t.normalizeLightness=m,t.normalizeValue=g,t.hsl=v,t.areEqualHsl=y,t.hsv=b,t.areEqualHsv=S,t.rgbToHsl=w,t.hslToRgb=P,t.rgbToHsv=C,t.hsvToRgb=x,Y=[.199,.687,.114],t.rgbToGrayscale=E,t.distanceRgb=L,t.invertRgb=I,t.darkenRgb=A,t.blendRgba=k,t.shiftRgb=M,t.shiftColor=O,X={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",feldspar:"#d19275",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",
lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslateblue:"#8470ff",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",violetred:"#d02090",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},function(e){function t(e){return[r(parseInt(e[1],10)),s(parseInt(e[2],10)),a(parseInt(e[3],10))]}e.re=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,e.parse=t}(K||(K={})),t.rgbToString=R,function(e){function t(e){return[r(parseInt(e[1],16)),s(parseInt(e[2],16)),a(parseInt(e[3],16))]}e.re=/^#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,e.parse=t}(J||(J={})),t.rgbToHexString=N,function(e){function t(e){return[r(parseInt(e[1]+e[1],16)),s(parseInt(e[2]+e[2],16)),a(parseInt(e[3]+e[3],16))]}e.re=/^#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])$/,e.parse=t}(Z||(Z={})),function(e){function t(e){return[r(parseInt(e[1],10)),s(parseInt(e[2],10)),a(parseInt(e[3],10)),l(parseFloat(e[4]))]}e.re=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?[\d]{0,10}(?:\.\d+)?)\s*\)$/,e.parse=t}(Q||(Q={})),t.rgbaToString=$,t.rgbToBlackWhiteString=H,t.tryParseRgb=W,t.parseRgb=U,t.tryParseRgba=j,t.parseRgba=q},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(214);t.createDialog=o.createDialog},function(e,t,i){"use strict";var o=i(4),n=i(25).isFeatureEnabled,r=i(0).getLogger("Common.Telemetry"),s={},a={},l=null,c=["before_websocket_connection_time_frame","websocket_connection_time_frame","first_series_full_time_frame","page_full_load_time_frame","page_load_time_frame"];s.timeCounters={series:{},study:{},pine:{}},s.reportSent=new o,s.sendReport=function(e,t,i,o){var h,u="free",d=c.includes(t),p=n("loading_charts_counters"),f=TradingView.onChartPage||TradingView.onWidget()
;if(window.TELEMETRY_HOSTS&&(!d||p&&f)){if(TradingView.onWidget()?u=!TradingView.widgetCustomer||"bovespa"!==TradingView.widgetCustomer&&"cme"!==TradingView.widgetCustomer?"widget":TradingView.widgetCustomer:window.user.is_pro&&(u="pro"),"charts"!==e&&(u="all"),!window.TELEMETRY_HOSTS[e]||!window.TELEMETRY_HOSTS[e][u])return void r.logError("Unable to get host for counter: "+t+", metric type: "+e+", serivce type: "+u);h=window.TELEMETRY_HOSTS[e][u],i=void 0===i?{c:1}:i,h in a||(a[h]={}),a[h]&&t in a[h]?i.c?a[h][t][0].c+=i.c:a[h][t].push(i):a[h][t]=[i],l||(l=setTimeout(function(){var e,t;for(e in a)t={event:"report_stash",params:a[e]},r.logDebug("Report to host: "+e+"; stash: "+JSON.stringify(a[e])),s.reportSent.fire(a[e]),delete a[e],$.post(e+"/report",t);l=null},15e3))}},t.Telemetry=s},,function(e,t,i){"use strict";function o(e,t,i,o,n){this._wptStudyId=o,this._pointsCount=n,m.call(this,e,t,i)}function n(e,t,i){o.call(this,e,t,i,"mtp_wpt_down1ora",2)}function r(e,t,i){o.call(this,e,t,i,"mtp_wpt_down2orb",2)}function s(e,t,i){o.call(this,e,t,i,"mtp_wpt_down3",3)}function a(e,t,i){o.call(this,e,t,i,"mtp_wpt_down4",2)}function l(e,t,i){o.call(this,e,t,i,"mtp_wpt_down5",5)}function c(e,t,i){o.call(this,e,t,i,"mtp_wpt_downc",3)}function h(e,t,i){o.call(this,e,t,i,"mtp_wpt_up1ora",2)}function u(e,t,i){o.call(this,e,t,i,"mtp_wpt_up2orb",2)}function d(e,t,i){o.call(this,e,t,i,"mtp_wpt_up3",3)}function p(e,t,i){o.call(this,e,t,i,"mtp_wpt_up4",2)}function f(e,t,i){o.call(this,e,t,i,"mtp_wpt_up5",5)}function _(e,t,i){o.call(this,e,t,i,"mtp_wpt_upc",3)}var m=i(160).LineStudyMtp;inherit(o,m),o.prototype._studyInputs=function(){var e,t,i,o,n=this.points();if(n.length<this.pointsCount())return null;for(e=[this.properties().inputs.displayZoneLabels.value()],t=0;t<this.pointsCount();++t){if(i=n[t].index,null===(o=this._model.mainSeries().bars().valueAt(i)))return null;e.push(1e3*o[TradingView.TIME_PLOT])}return e},o.prototype._mtpStudyId=function(){return this._wptStudyId},o.prototype.pointsCount=function(){return this._pointsCount},inherit(n,o),n.getTooltipText=function(e){return"Down Wave 1 or A: Select Point "+((e?e._points.length:0)+1)},inherit(r,o),r.getTooltipText=function(e){return"Down Wave 2 or B: Select Point "+((e?e._points.length:0)+1)},inherit(s,o),s.getTooltipText=function(e){return"Down Wave 3: Select Point "+((e?e._points.length:0)+1)},inherit(a,o),a.getTooltipText=function(e){return"Down Wave 4: Select Point "+((e?e._points.length:0)+1)},inherit(l,o),l.getTooltipText=function(e){return"Down Wave 5: Select Point "+((e?e._points.length:0)+1)},inherit(c,o),c.getTooltipText=function(e){return"Down Wave C: Select Point "+((e?e._points.length:0)+1)},inherit(h,o),h.getTooltipText=function(e){return"Up Wave 1 or A: Select Point "+((e?e._points.length:0)+1)},inherit(u,o),u.getTooltipText=function(e){return"Up Wave 2 or B: Select Point "+((e?e._points.length:0)+1)},inherit(d,o),d.getTooltipText=function(e){return"Up Wave 3: Select Point "+((e?e._points.length:0)+1)},inherit(p,o),p.getTooltipText=function(e){
return"Up Wave 4: Select Point "+((e?e._points.length:0)+1)},inherit(f,o),f.getTooltipText=function(e){return"Up Wave 5: Select Point "+((e?e._points.length:0)+1)},inherit(_,o),_.getTooltipText=function(e){return"Up Wave C: Select Point "+((e?e._points.length:0)+1)},t.LineStudyMtpDownWave1OrA=n,t.LineStudyMtpDownWave2OrB=r,t.LineStudyMtpDownWave3=s,t.LineStudyMtpDownWave4=a,t.LineStudyMtpDownWave5=l,t.LineStudyMtpDownWaveC=c,t.LineStudyMtpUpWave1OrA=h,t.LineStudyMtpUpWave2OrB=u,t.LineStudyMtpUpWave3=d,t.LineStudyMtpUpWave4=p,t.LineStudyMtpUpWave5=f,t.LineStudyMtpUpWaveC=_},function(e,t,i){"use strict";function o(e){var i={};return t.UTM_PARAM_NAMES.forEach(function(t){e[t]&&(i[t]=e[t])}),i}function n(e,t){void 0===t&&(t=!1);var i=s.createUrlParams(e);return i&&t?"?"+i:i}function r(e){return n(o(s.getUrlParams()),e)}Object.defineProperty(t,"__esModule",{value:!0});var s=i(81);t.UTM_PARAM_NAMES=["utm_source","utm_medium","utm_campaign"],t.filterUtmInfo=o,t.buildUtmQueryString=n,t.buildUtmQueryStringFromUrlParams=r},function(e,t,i){"use strict";function o(e,t){var i,o,n;return void 0===t&&(t=!1),i=e.data("commonTooltipText")||"",o=e.attr("title"),i||o||t?(i=s(e),n={h:e.outerHeight(),w:e.outerWidth(),x:e.offset().left-$(window).scrollLeft(),y:e.offset().top-$(window).scrollTop()},{above:e.hasClass("common-tooltip-above"),below:e.hasClass("common-tooltip-below"),html:e.hasClass("common-tooltip-html"),otl:e.hasClass("common-tooltip-otl"),otr:e.hasClass("common-tooltip-otr"),fixed:e.hasClass("common-tooltip-fixed"),rect:n,text:i,vertical:e.hasClass("common-tooltip-vertical"),tooltipDelay:parseInt(e.attr("data-tooltip-delay")),colorTheme:e.data("color-theme")||""}):null}function n(e){var t=-1!==g.indexOf(e)?m[e]:"";d.removeClass(g.filter(function(e){return!!e}).map(function(e){return m[e]}).join(" ")),t&&!d.hasClass(t)&&d.addClass(t)}function r(e){var t,i,o,n,r=e.rect;r&&(d.attr("class","common-tooltip-wrapper").css({bottom:"auto",left:"auto",right:"auto",top:"auto"}),Modernizr.pointerevents||d.addClass("no-pointer-events"),d.toggleClass("pointer-events-auto",!!e.pointerEventsAuto),p.css({left:"0",width:"auto"}),p.width(p.width()+2),t=$(window).width(),i=$(window).height(),o=e.vertical,(o&&r.w<20||!o&&r.h<20)&&d.addClass("farther"),n="",o?(d.addClass("vertical").css({left:r.x+r.w,top:r.y-(d.outerHeight()-r.h)/2}),n=e.otr?"otr":e.otl||p.offset().left+p.outerWidth()+u>t?"otl":"otr","otl"===n?d.addClass("otl").css({left:"auto",right:t-r.x}):d.addClass("otr")):(d.css({bottom:i-r.y,left:r.x-(d.outerWidth()-r.w)/2}),n=e.above?"above":e.below||p.offset().top-$(window).scrollTop()<u?"below":"above","below"===n?d.addClass("below").css({bottom:"auto",top:r.y+r.h}):d.addClass("above"),p.offset().left-u<0?p.css("left",Math.abs(p.offset().left)+u):p.offset().left+p.outerWidth()+u>t&&(e.fixed||p.css("left",t-(p.offset().left+p.outerWidth()+u)))))}function s(e){var t=e.data("commonTooltipText")||"",i=e.attr("title");return void 0!==i&&(t=i,e.data("commonTooltipText",t),e.removeAttr("title")),t}function a(){clearTimeout(f),clearTimeout(_),
document.body.contains(d[0])&&(d.css("opacity","0"),_=setTimeout(d.detach.bind(d),h/2))}function l(e,t){var i,n;void 0===t&&(t={}),i=$(e),0!==i.length&&(n=!(!t.text&&!t.$inner),t=$.extend({},o(i,n),t),$.isEmptyObject(t)||""===t.text&&!t.$inner||c(t))}function c(e){var t=document.body.contains(d[0]);if(clearTimeout(f),clearTimeout(_),!t)return void(f=setTimeout(function(){d.appendTo(document.body),c(e)},"number"!=typeof e.tooltipDelay||isNaN(e.tooltipDelay)?h:e.tooltipDelay));p.toggleClass("common-tooltip-body--width_wide",!!e.wide),e.$inner?p.empty().append(e.$inner):e.html?p.html(e.text||""):p.text(e.text||""),r(e),n(e.colorTheme||"default"),d.addClass(e.addClass||""),d.css("opacity","1"),e.forceHideOnMove&&$(document).on("mousemove.common-tooltip-force-hide",function(){$(document).off("mousemove.common-tooltip-force-hide"),a()})}var h,u,d,p,f,_,m,g;Object.defineProperty(t,"__esModule",{value:!0}),i(124),i(13),i(109),h=500,u=10,d=$("<div>").css("opacity","0"),p=$('<div class="common-tooltip-body">').appendTo(d),f=0,_=0,m={default:"",white:"theme-white","round-shadow":"theme-round-shadow"},g=Object.keys(m),t.updateTooltipText=s,t.hide=a,t.showOnElement=l,t.show=c,Modernizr.touch||$(document).on("mouseenter",".apply-common-tooltip",function(e){var t,i,o,n=e.originalEvent;if("buttons"in n){if(1&n.buttons)return}else if(1===e.which)return;t=$(this),i=function(){l(t)},i(),o=function(){t.off("common-tooltip-update",i),t.off("mouseleave mousedown",o),$(document).off("scroll",o),a()},t.on("common-tooltip-update",i),t.on("mouseleave mousedown",o),$(document).on("scroll",o)})},function(e,t,i){"use strict";function o(e,t){var i,o={className:"spinner",color:r.color.spinner,corners:1,direction:1,fps:20,hwaccel:!1,left:"50%",length:0,lines:17,opacity:0,radius:20,rotate:0,scale:1,shadow:!1,speed:1.5,top:"50%",trail:60,width:3,zIndex:2e9},a=e?s[e]:null;return a&&(o=$.extend(o,a)),i=$.extend({},o,t),new n(i)}var n,r,s;Object.defineProperty(t,"__esModule",{value:!0}),i(13),n=i(111),r=i(14),s={medium:{lines:14,scale:.8},micro:{lines:12,scale:.2},mini:{lines:14,scale:.4},xlarge:{lines:16,scale:1.6}},t.unifiedSpinner=o},function(e,t,i){"use strict";function o(e){return new Promise(function(t){i.e(6).then(function(o){t(i(224).showSignModal(e))}.bind(null,i)).catch(i.oe)})}Object.defineProperty(t,"__esModule",{value:!0}),t.showSignModal=o},function(e,t,i){"use strict";function o(e){var t=document.createElement("a");return t.href=e,t.hostname===location.hostname&&!t.username}function n(e,t){return o(e)?(t=t||{},t.headers?t.headers instanceof Headers||(t.headers=new Headers(t.headers)):t.headers=new Headers,"POST"===t.method&&t.headers.set("X-CSRFToken",$.cookie("csrftoken")),window.locale&&t.headers.set("X-Language",window.locale),window.fetch(e,t)):window.fetch(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.fetch=n},function(e,t,i){var o;!function(t){"use strict";function n(){}function r(e,t){for(var i=e.length;i--;)if(e[i].listener===t)return i;return-1}function s(e){return function(){return this[e].apply(this,arguments)}}
function a(e){return"function"==typeof e||e instanceof RegExp||!(!e||"object"!=typeof e)&&a(e.listener)}var l=n.prototype,c=t.EventEmitter;l.getListeners=function(e){var t,i,o=this._getEvents();if(e instanceof RegExp){t={};for(i in o)o.hasOwnProperty(i)&&e.test(i)&&(t[i]=o[i])}else t=o[e]||(o[e]=[]);return t},l.flattenListeners=function(e){var t,i=[];for(t=0;t<e.length;t+=1)i.push(e[t].listener);return i},l.getListenersAsObject=function(e){var t,i=this.getListeners(e);return i instanceof Array&&(t={},t[e]=i),t||i},l.addListener=function(e,t){var i,o,n;if(!a(t))throw new TypeError("listener must be a function");i=this.getListenersAsObject(e),o="object"==typeof t;for(n in i)i.hasOwnProperty(n)&&-1===r(i[n],t)&&i[n].push(o?t:{listener:t,once:!1});return this},l.on=s("addListener"),l.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},l.once=s("addOnceListener"),l.defineEvent=function(e){return this.getListeners(e),this},l.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},l.removeListener=function(e,t){var i,o,n=this.getListenersAsObject(e);for(o in n)n.hasOwnProperty(o)&&-1!==(i=r(n[o],t))&&n[o].splice(i,1);return this},l.off=s("removeListener"),l.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},l.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},l.manipulateListeners=function(e,t,i){var o,n,r=e?this.removeListener:this.addListener,s=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(o=i.length;o--;)r.call(this,t,i[o]);else for(o in t)t.hasOwnProperty(o)&&(n=t[o])&&("function"==typeof n?r.call(this,o,n):s.call(this,o,n));return this},l.removeEvent=function(e){var t,i=typeof e,o=this._getEvents();if("string"===i)delete o[e];else if(e instanceof RegExp)for(t in o)o.hasOwnProperty(t)&&e.test(t)&&delete o[t];else delete this._events;return this},l.removeAllListeners=s("removeEvent"),l.emitEvent=function(e,t){var i,o,n,r,s=this.getListenersAsObject(e);for(r in s)if(s.hasOwnProperty(r))for(i=s[r].slice(0),n=0;n<i.length;n++)o=i[n],!0===o.once&&this.removeListener(e,o.listener),o.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,o.listener);return this},l.trigger=s("emitEvent"),l.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},l.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},l._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},l._getEvents=function(){return this._events||(this._events={})},n.noConflict=function(){return t.EventEmitter=c,n},void 0!==(o=function(){return n}.call(t,i,t,e))&&(e.exports=o)}(this||{})},function(e,t,i){"use strict";var o,n;Object.defineProperty(t,"__esModule",{value:!0}),o=i(16),n=function(){function e(e){this._precision=e}return e.prototype.format=function(t){return(void 0!==this._precision?t.toFixed(this._precision):e.formatNoE(t)).replace(".",o.formatterOptions.decimalSign)},e.prototype.parse=function(e){
var t=e.replace(o.formatterOptions.decimalSign,"."),i=parseFloat(t);return this._precision&&(i=+i.toFixed(this._precision)),i},e.formatNoE=function(e){return e>=1e-15&&e<1?e.toFixed(15).replace(/\.?0+$/,""):e+""},e}(),t.NumericFormatter=n},function(e,t,i){"use strict";function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.createDialog)(n({},s,e))}var n,r,s;Object.defineProperty(t,"__esModule",{value:!0}),n=Object.assign||function(e){var t,i,o;for(t=1;t<arguments.length;t++){i=arguments[t];for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},t.createNoticeDialog=o,r=i(56),s={width:400,destroyOnClose:!0,title:$.t("Notification"),content:$.t("You are notified"),contentWrapTemplate:'<div class="tv-dialog__section tv-dialog__section--no-border"><div class="tv-text"><p></p></div></div>',actionsWrapTemplate:'<div class="tv-dialog__section tv-dialog__section--actions tv-dialog__section--no-border">',actions:[{name:"ok",type:"primary",text:$.t("Ok"),method:"close",key:[13,32]}]}},function(e,t,i){"use strict";function o(e){this.items=e.items,this.height=e.height||e.width,this.width=e.width||e.height,this._color=e.color,this._borderColor=e.borderColor,this._vertOffset=e.vertOffset||0,e.textCache&&(this._textCache=e.textCache,this._textColor=e.textColor,this._textVertOffset=this._vertOffset>0?this.height:-this.height,this._textImageWidth=this._textCache.textImageWidth,this._textImageHeight=this._textCache.textImageHeight)}var n=i(8).Point,r=i(11);o.prototype.draw=function(e){this.drawShape(e),this.drawText(e)},o.prototype.drawShape=function(e){throw Error("Not implemented")},o.prototype.drawText=function(e){var t,i,o,n,r,s;if(this._textCache)for(t=0,i=this.items.length;t<i;t++)o=this.items[t],n=o.x,r=o.y+this._vertOffset+this._textVertOffset,s=o.style&&null!=o.style.textColor?o.style.textColor:this._textColor,this._textCache.paintTo(e,s,n,r,"center",this._vertOffset>0?"top":"bottom")},o.prototype.hitTest=function(e,t){var i,o,s,a,l,c,h,u,d,p,f,_,m,g=Math.max(this.height,this.width),v=this._vertOffset,y=this._textVertOffset;for(t=t||r.REGULAR,o=0;o<this.items.length;++o)if(s=this.items[o]){if(i=new n(s.x,s.y+v),i.subtract(e).length()<=g)return new r(t,{});if(this._textCache&&(a=this._textImageWidth/2,l=s.y+v+y,c=v>0?0:-this._textImageHeight,h=v>0?this._textImageHeight:0,u=e.x,d=e.y,p=s.x-a,f=l+c,_=s.x+a,m=l+h,u>p&&u<_&&d>f&&d<m))return new r(t,{})}return null},t.PaneRendererAbstractShape=TradingView.PaneRendererAbstractShape=o},function(e,t,i){"use strict";var o,n,r,s;i(150),o=i(36),n=o.greaterThan,r=o.lessThan,s=window.CanvasEx=i(172),TradingView.resizeCanvas=function(e,t,i){var o,n,r,s,a,l=e.prop("height"),c=e.prop("width");l&&c&&(l/=window.hidpiCanvasRatio||1,c/=window.hidpiCanvasRatio||1,l<1&&(l=1),c<1&&(c=1),o=$("<canvas>").prop("width",c).prop("height",l),n=o.get(0).getContext("2d"),r=Math.min(c,t),s=Math.min(l,i),r&&s&&n.drawImage(e.get(0),0,0,r,s,0,0,r,s),e.prop("height",i).prop("width",t),a=e.get(0).getContext("2d"),r&&s&&a.drawImage(o.get(0),0,0,r,s,0,0,r,s),
o.remove())},s.computeDashPattern=function(e){return[[e.lineWidth,2*e.lineWidth],[5*e.lineWidth,6*e.lineWidth],[6*e.lineWidth,6*e.lineWidth],[e.lineWidth,4*e.lineWidth]][e.lineStyle-1]},s.drawLine=function(e,t,i,o,n){isFinite(t)&&isFinite(o)&&isFinite(i)&&isFinite(n)&&(e.lineStyle===s.LINESTYLE_DASHED||e.lineStyle===s.LINESTYLE_DOTTED||e.lineStyle===s.LINESTYLE_SPARSE_DOTTED?e.drawDashedLine(e,t,i,o,n):s.drawSolidLine(e,t,i,o,n))},s.drawArrow=function(e,t,i,o,n){isFinite(t)&&isFinite(o)&&isFinite(i)&&isFinite(n)&&(e.beginPath(),e.moveTo(o,n),e.lineTo(t,i),e.moveTo(t+2,i+2),e.lineTo(t-2,i+2),e.moveTo(t-1,i+1),e.lineTo(t+1,i+1),e.stroke())},s.drawSolidLine=function(e,t,i,o,n){e.beginPath(),e.moveTo(t,i),e.lineTo(o,n),e.stroke()},s.setLineStyle=function(e,t){e.lineStyle=t;var i=[];t!==s.LINESTYLE_SOLID&&(i=s.computeDashPattern(e)),"function"==typeof e.setLineDash?e.setLineDash(i):void 0!==e.mozDash?e.mozDash=i:void 0!==e.webkitLineDash&&(e.webkitLineDash=i)},s.drawPoly=function(e,t,i){var o,n;for(e.beginPath(),e.moveTo(t[0].x,t[0].y),o=0;o<t.length;o++)n=t[o],e.lineTo(n.x,n.y);e.closePath(),e.stroke(),i&&e.fill()},s.lineStyles=[],"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.setFont=function(e){if(this.font!==e)try{this.font=e}catch(e){}},CanvasRenderingContext2D.prototype.lineStyle=s.LINESTYLE_SOLID,s.originalSave=CanvasRenderingContext2D.prototype.save,s.originalRestore=CanvasRenderingContext2D.prototype.restore,CanvasRenderingContext2D.prototype.save=function(){s.lineStyles.push(this.lineStyle),s.originalSave.call(this)},CanvasRenderingContext2D.prototype.restore=function(){s.lineStyles.length>0&&(this.lineStyle=s.lineStyles.pop(),s.originalRestore.call(this))},CanvasRenderingContext2D.prototype.drawDashedLine=function(e,t,i,o,n){e.save();var r=s.computeDashPattern(e);if(e.beginPath(),"function"==typeof e.setLineDash)e.setLineDash(r);else if(void 0!==e.mozDash)e.mozDash=r;else{if(void 0===e.webkitLineDash)return e.dashedLineTo(t,i,o,n,r),e.stroke(),void e.restore();e.webkitLineDash=r}e.moveTo(t,i),e.lineTo(o,n),e.stroke(),e.restore()},CanvasRenderingContext2D.prototype.dashedLineTo=function(e,t,i,o,s){var a,l,c,h,u,d,p={thereYet:n,cap:Math.min},f={thereYet:n,cap:Math.min};for(t-o>0&&(f.thereYet=r,f.cap=Math.max),e-i>0&&(p.thereYet=r,p.cap=Math.max),this.moveTo(e,t),a=e,l=t,c=0,h=!0;!p.thereYet(a,i)||!f.thereYet(l,o);)u=Math.atan2(o-t,i-e),d=s[c],a=p.cap(i,a+Math.cos(u)*d),l=f.cap(o,l+Math.sin(u)*d),h?this.lineTo(a,l):this.moveTo(a,l),c=(c+1)%s.length,h=!h},CanvasRenderingContext2D.prototype.roundRect=function(e,t,i,o,n){this.beginPath(),this.moveTo(e+n,t),this.lineTo(e+i-n,t),this.arcTo(e+i,t,e+i,t+n,n),this.lineTo(e+i,t+o-n),this.arcTo(e+i,t+o,e+i-n,t+o,n),this.lineTo(e+n,t+o),this.arcTo(e,t+o,e,t+o-n,n),this.lineTo(e,t+n),this.arcTo(e,t,e+n,t,n)}),e.exports=s},function(e,t,i){"use strict";function o(e,t){var i=t.edge;return i.A*e.x+i.B*e.y+i.C>0===t.isPositive}function n(e,t,i,o){var n=t.add(i).scaled(.5),r=n.add(o).scaled(.5),s=l.intersectLineSegments(t,i,r,e)
;return null===s&&(null===(s=l.intersectLineSegments(i,o,r,e))&&null===(s=l.intersectLineSegments(o,t,r,e)))}function r(e,t,i){return e.x>=t.x&&e.x<=i.x&&e.y>=t.y&&e.y<=i.y}function s(e,t){var i,o,n,r=t.length-1,s=!1,a=e.x,l=e.y;for(i=0;i<t.length;i++)o=t[i],n=t[r],(o.y<l&&n.y>=l||n.y<l&&o.y>=l)&&o.x+(l-o.y)/(n.y-o.y)*(n.x-o.x)<a&&(s=!s),r=i;return s}function a(e,t,i){return(e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y)<=i*i}Object.defineProperty(t,"__esModule",{value:!0});var l=i(170);t.pointInHalfplane=o,t.pointInTriangle=n,t.pointInRectangle=r,t.pointInPolygon=s,t.pointInCircle=a},function(e,t,i){"use strict";var o,n,r,s;Object.defineProperty(t,"__esModule",{value:!0}),o=i(66),n=i(10),r=i(113),i(5),t.PLACE_HOLDER="---",s=function(){function e(e){this.type="volume",this._numericFormatter=new o.NumericFormatter,this._fractionalValues=void 0!==e&&e>0,this._precision=e}return e.prototype.state=function(){return{precision:this._precision}},e.prototype.format=function(e){if(!n.isNumber(e))return t.PLACE_HOLDER;var i="";return e<0&&(i="-",e=-e),e>=1e100?window.t("N/A"):(!this._fractionalValues||e>=995?e=Math.round(e):this._fractionalValues&&(e=+e.toFixed(this._precision)),e<995?i+this._formatNumber(e):e<999995?i+this._formatNumber(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),i+this._formatNumber(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),i+this._formatNumber(e/1e9)+"B"))},e.prototype.parse=function(e){var t,i,o;return"---"===e?{error:"not a number",res:!1,value:NaN}:(t={K:1e3,M:1e6,B:1e9},i=e.slice(-1),t.hasOwnProperty(i)?(o=this._numericFormatter.parse(e.slice(0,-1)),n.isNumber(o)?{res:!0,value:o*t[i]}:{error:"not a number",res:!1,value:NaN}):(o=this._numericFormatter.parse(e),n.isNumber(o)?{res:!0,value:o}:{error:"not a number",res:!1,value:NaN}))},e.serialize=function(e){return e.state()},e.deserialize=function(t){return new e(t.precision)},e.prototype._formatNumber=function(e){return this._fractionalValues&&(e=r.fixComputationError(e)),this._numericFormatter.format(e).replace(/(\.[1-9]*)0+$/,function(e,t){return t})},e}(),t.VolumeFormatter=s},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 9" width="11px" height="9px"><path fill="none" fill-rule="evenodd" stroke-width="2" d="M1 3.22l3.415 3.496L10 1"/></svg>'},function(e,t,i){"use strict";var o,n,r;Object.defineProperty(t,"__esModule",{value:!0}),o=i(6),n=i(16),r=function(e){function t(t){void 0===t&&(t=100);var i=e.call(this,t)||this;return i.type="percentage",i}return o.__extends(t,e),t.prototype.state=function(){var e=n.PriceFormatter.prototype.state.call(this);return e.percent=!0,e},t.prototype.format=function(t,i,o,n){return e.prototype.format.call(this,t,i,o,n)+"%"},t.serialize=function(e){return e.state()},t.deserialize=function(e){return new t(e.priceScale)},t}(n.PriceFormatter),t.PercentageFormatter=r},function(e,t,i){"use strict";(function(e){function o(t){t||(t={}),this.checkable=t.checkable||!1,this.checked=t.checked||null,this.enabled=void 0===t.enabled||t.enabled,this.visible=t.visible||!0,this.active=!0,this.font=t.font||"Arial",
this.icon=t.icon||null,this.iconText=t.iconText||null,this.iconVisibleInMenu=t.iconVisibleMenu||!0,this.deleteButton=t.deleteButton||null,this.shortcut=null,this.setShortCut(t.shortcut,t.doNotBindShortcut),this.statusTip=t.statusTip||null,this.text=t.text||null,this.toolTip=t.toolTip||null,this.htmlclass=t.htmlclass||null,this.statName=t.statName||null,this._callbackContext=t.callbackContext||this,this._callbacks=new e,this.subActions=t.subActions||[]}function n(){o.call(this),this.font=null,this.subActions=null,this.htmlclass="action-separator"}function r(e){o.call(this),this.deferred=e}var s=i(131);o.prototype.callbacks=function(){return this._callbacks},o.prototype.callbackContext=function(){return this._callbackContext},o.prototype.setCallbackContext=function(e){this._callbackContext=e},o.prototype.hasSubActions=function(){return this.subActions&&this.subActions.length},o.prototype.setChecked=function(e){this.checked=e},o.prototype._toggleChecked=function(){this.checked=!this.checked},o.prototype.setVisible=function(e){this.visible=e},o.prototype.setEnabled=function(e){this.enabled=e},o.prototype.disable=function(){this.setEnabled(!1)},o.prototype.enable=function(){this.setEnabled(!0)},o.prototype.setActive=function(e){this.active!==e&&(this.active=e,this.shortcut&&!this.doNotBindShortcut&&(e?this._bindShortCut():this._unbindShortCut()))},o.prototype.setShortCut=function(e,t){e&&(this.shortcut=e,!0!==t&&this._bindShortCut())},o.prototype._bindShortCut=function(){s.bind(this.shortcut,function(e){if(e.preventDefault(),this.enabled)return this.executeCallback(),!1}.bind(this))},o.prototype._unbindShortCut=function(){s.unbind(this.shortcut)},o.prototype.setIconVisible=function(e){this.iconVisibleInMenu=e},o.prototype.executeCallback=function(e){this._lastEvent=e,this._toggleChecked(),this._callbacks.fire(this)},inherit(n,o),inherit(r,o),t.Action=o,t.ActionSeparator=n,t.ActionPlaceholder=r}).call(t,i(4))},function(e,t,i){"use strict";function o(e){var t,i=[];for(t=1;t<arguments.length;t++)i[t-1]=arguments[t];return e&&"object"==typeof e?0===i.length?e:(i.forEach(function(t){void 0!==t&&null!==t&&"object"==typeof t&&Object.keys(t).forEach(function(i){var r,s,a=e[i],l=t[i];l===e||(r=Array.isArray(l),l&&(n(l)||r)?(s=void 0,s=r?a&&Array.isArray(a)?a:[]:a&&n(a)?a:{},e[i]=o(s,l)):void 0!==l&&(e[i]=l))})}),e):e}function n(e){var t,i,o;return!(!e||"[object Object]"!==Object.prototype.toString.call(e))&&(!(t=Object.getPrototypeOf(e))||(i=Object.hasOwnProperty.toString,"function"==typeof(o=t.hasOwnProperty("constructor")&&t.constructor)&&i.call(o)===i.call(Object)))}Object.defineProperty(t,"__esModule",{value:!0}),t.deepExtend=o},function(e,t,i){"use strict";var o,n,r,s;Object.defineProperty(t,"__esModule",{value:!0}),o=i(0),n=i(17),r=o.getLogger("GUI.Blocks.AbstractIndicator"),i(61),s=function(){function e(){this._classSuffix="",this._quoteSessionPrefix="abstract-indicator",this._shortMode=!1,this._showTooltip=!0,this._subscribed=!1}return e.prototype.getValue=function(){return this._value},
e.prototype.getTooltipText=function(){return this.getLabel()},e.prototype.getLabel=function(){return this._labelMap[this._value]||""},e.prototype.getElement=function(){return this._el},e.prototype.update=function(e,t){this._updateValue(e,t),this._render()},e.prototype.setTooltipEnabled=function(e){void 0===e&&(e=!1),this._showTooltip!==e&&(this._showTooltip=e,this._renderTooltip())},e.prototype.enableShortMode=function(){!0!==this._shortMode&&(this._shortMode=!0,this._render())},e.prototype.disableShortMode=function(){!1!==this._shortMode&&(this._shortMode=!1,this._render())},e.prototype.isShortModeEnabled=function(){return this._shortMode},e.prototype.start=function(){!this._subscribed&&e._quoteSession&&this._symbolName&&(e._quoteSession.subscribe(this._getQuoteSessionId(),this._symbolName,this.update.bind(this)),this._subscribed=!0)},e.prototype.stop=function(){this._subscribed&&e._quoteSession&&this._symbolName&&(e._quoteSession.unsubscribe(this._getQuoteSessionId(),this._symbolName),this._subscribed=!1)},e.assignQuoteSession=function(t){e._quoteSession=t},e.prototype._init=function(t){this._el=t.el?t.el:document.createElement("span"),this._el.innerHTML="",this._classMap=t.classMap,this._labelMap=t.labelMap,this._showTooltip=t.showTooltip,this._classSuffix=t.classSuffix,this._symbolName=t.symbol,this._quoteSessionGUID=n.guid(),!0===t.short&&this.enableShortMode(),t.data&&this._updateValue(t.data),t.quoteSession&&e.assignQuoteSession(t.quoteSession)},e.prototype._clearClasses=function(){var e=this;Object.values(this._classMap).map(function(t){e._el.classList.remove(""+t),e._el.classList.remove(""+t+e._classSuffix)})},e.prototype._render=function(){this._renderClasses(),this._renderTooltip(),this._renderLabel()},e.prototype._renderLabel=function(){this._el.textContent=this.getLabel()},e.prototype._updateValue=function(e,t){var i=this._getValueFromData(e);(t||i!==this._value)&&(this._value=i)},e.prototype._renderClasses=function(){var e,t,i,o=this._el.classList;o.add(this._componentClass,this._componentClass+this._classSuffix),e=this._classMap[this._value];for(t in this._classMap)(i=this._classMap[t])&&(i===e?o.add(i,i+this._classSuffix):o.remove(i,i+this._classSuffix));!e&&this._value&&r.logWarn("no className for status "+this._value)},e.prototype._renderTooltip=function(){this._el.setAttribute("title",this._showTooltip?this.getTooltipText():""),this._el.classList.toggle("apply-common-tooltip",this._showTooltip)},e.prototype._getQuoteSessionId=function(){return this._quoteSessionPrefix+"."+this._quoteSessionGUID},e}(),t.AbstractIndicator=s,window.AbstractIndicator=s},,function(e,t,i){"use strict";function o(e){return e in $.fn?Promise.resolve():(r||(r=new Promise(function(e){i.e(2).then(function(t){i(171),e()}.bind(null,i)).catch(i.oe)})),r)}function n(e){return new s(e)}var r,s;Object.defineProperty(t,"__esModule",{value:!0}),i(13),s=function(){function e(e){this._$elem=e}return e.prototype.draggable=function(){var e=arguments,t=this._$elem;return o("draggable").then(function(){return t.draggable.apply(t,e)})},
e.prototype.resizable=function(){var e=arguments,t=this._$elem;return o("resizable").then(function(){return t.resizable.apply(t,e)})},e.prototype.sortable=function(){var e=arguments,t=this._$elem;return o("sortable").then(function(){return t.sortable.apply(t,e)})},e.prototype.datepicker=function(){var e=arguments,t=this._$elem;return o("datepicker").then(function(){return t.datepicker.apply(t,e)})},e}(),t.LazyJqueryUI=s,t.lazyJqueryUI=n},function(e,t,i){"use strict";var o=i(10),n=i(0),r=n.getLogger("Chart.PriceRange"),s=function(){function e(e,t){var i,o;null!==e&&"object"==typeof e?(i=e,this._minValue=i.m_minValue,this._maxValue=i.m_maxValue):(o=e,this._minValue=o,void 0!==t&&(this._maxValue=t))}return e.prototype.equals=function(e){return this._minValue===e._minValue&&this._maxValue===e._maxValue},e.prototype.clone=function(){return new e(this._minValue,this._maxValue)},e.prototype.minValue=function(){return this._minValue},e.prototype.setMinValue=function(e){this._minValue=e},e.prototype.maxValue=function(){return this._maxValue},e.prototype.setMaxValue=function(e){this._maxValue=e},e.prototype.length=function(){return this._maxValue-this._minValue},e.prototype.isEmpty=function(){return this._maxValue===this._minValue||this._maxValue!==this._maxValue||this._minValue!==this._minValue},e.prototype.serialize=function(){return{m_maxValue:this._maxValue,m_minValue:this._minValue}},e.prototype.state=function(){return{max:this._maxValue,min:this._minValue}},e.prototype.merge=function(t){return new e(Math.min(this.minValue(),t.minValue()),Math.max(this.maxValue(),t.maxValue()))},e.prototype.apply=function(e,t){this._minValue=Math.min(this._minValue,e),this._maxValue=Math.max(this._maxValue,t)},e.prototype.set=function(e,t){this._minValue=e,this._maxValue=t},e.prototype.scaleAroundCenter=function(e){var t,i,n,s;if(!o.isNumber(e))return void r.logDebug("PriceRange.scaleAroundCenter: invalid coeff");0!==(t=this._maxValue-this._minValue)&&(i=.5*(this._maxValue+this._minValue),n=this._maxValue-i,s=this._minValue-i,n*=e,s*=e,this._maxValue=i+n,this._minValue=i+s)},e.prototype.shift=function(e){if(!o.isNumber(e))return void r.logDebug("PriceRange.shift: invalid coeff");this._maxValue+=e,this._minValue+=e},e.prototype.containsStrictly=function(e){return e.minValue()>this._minValue&&e.maxValue()<this._maxValue},e.prototype.convertToPercent=function(e,t){return 100*(e-t)/t},e.prototype.convertFromPercent=function(e,t){return e/100*t+t},e.prototype.convertToPercents=function(t){return new e(100*(this._minValue-t)/t,100*(this._maxValue-t)/t)},e.prototype.convertFromPercents=function(t){return new e(this._minValue/100*t+t,this._maxValue/100*t+t)},e}();e.exports=s},function(e,t,i){"use strict";var o,n,r;Object.defineProperty(t,"__esModule",{value:!0}),o=i(55),n=i(658),r=function(){function e(){this._rendererData={text:"",coordinate:0,fixedCoordinate:0,color:"#FFF",background:"#000",visible:!1},this._renderer=new n.PriceAxisViewRenderer(this._rendererData),this._invalidated=!0}return e.prototype.text=function(){
return this._rendererData.text},e.prototype.background=function(){return this._rendererData.background},e.prototype.color=function(){return this.generateTextColor(this.background())},e.prototype.generateTextColor=function(e){return"black"===o.rgbToBlackWhiteString(o.parseRgb(e),160)?"white":"black"},e.prototype.coordinate=function(){return this._updateRendererDataIfNeeded(),this._rendererData.coordinate},e.prototype.floatCoordinate=function(){return this._updateRendererDataIfNeeded(),this._rendererData.floatCoordinate||this._rendererData.coordinate},e.prototype.update=function(){this._invalidated=!0},e.prototype.height=function(e,t){return void 0===t&&(t=!1),this._renderer.height(e,t)},e.prototype.getFixedCoordinate=function(){return this._rendererData.fixedCoordinate||0},e.prototype.setFixedCoordinate=function(e){this._rendererData.fixedCoordinate=e},e.prototype.isVisible=function(){return this._rendererData.visible},e.prototype.renderer=function(){return this._updateRendererDataIfNeeded(),this._renderer.setData(this._rendererData),this._renderer},e.prototype._updateRendererDataIfNeeded=function(){this._invalidated&&(this._updateRendererData(this._rendererData),this._invalidated=!1)},e}(),t.PriceAxisView=r},function(e,t,i){"use strict";function o(e){var t=/\+/g;return decodeURIComponent(e.replace(t," ")).replace(/<\/?[^>]+(>|$)/g,"")}function n(e){var t,i=/([^&=]+)=?([^&]*)/g,n={};if(!e)return n;for(t=i.exec(e);t;)n[o(t[1])]=o(t[2]),t=i.exec(e);return n}function r(){return n(window.location.search.substring(1))}function s(){return n(window.location.hash.split("#")[1])}function a(e){var t,i=[];for(t in e)e.hasOwnProperty(t)&&null!=e[t]&&i.push({key:t,pair:encodeURIComponent(t)+"="+encodeURIComponent(e[t])});return i.sort(function(e,t){return e.key>t.key?1:e.key<t.key?-1:0}).map(function(e){return e.pair}).join("&")}Object.defineProperty(t,"__esModule",{value:!0}),t.decode=o,t.getUrlParams=r,t.getHashUrlParams=s,t.createUrlParams=a},,function(e,t,i){"use strict";(function(e){function o(t,i,o){var n,r,s,a,l,c,h=this;if(this._options=$.extend({},this._defaultOptions,o||{}),this._$wrapper=t,this._$content=i,this._scroll_speed=40,this._shadow_offset=10,this._header_height=this._options.headerHeight,this._scroll_margin_top=this._options.scrollMarginTop,this.scrolled=new e,this.scrolltoend=new e,this.scrolltostart=new e,this.visibilityCallbacks=[],n=navigator.platform.toLowerCase(),r=navigator.userAgent.toLowerCase(),s=r.indexOf("firefox")>-1,a=n.indexOf("android")>-1||r.indexOf("android")>-1,this._touch=Modernizr.touch||navigator.msMaxTouchPoints||s&&a,this._touch)return this._$content.css("position","relative"),void this._$wrapper.css({"overflow-y":"auto","-webkit-overflow-scrolling":"touch","-ms-overflow-style":"-ms-autohiding-scrollbar"}).scroll(this._onScroll.bind(this));this._$wrapper.css("overflow","hidden"),this._$wrapper.on("mouseenter.sidebar-scroll",function(){h._bottomFixed||h._dragging||(h._options.alwaysVisible||h._$scrollBar.addClass("active"),h._onScroll())}).on("mouseleave.sidebar-scroll",function(){
h._bottomFixed||h._dragging||(h._options.alwaysVisible||h._$scrollBar.removeClass("active"),h._onScroll())}).on("mousewheel.sidebar-scroll",function(e,t){if(!e.isDefaultPrevented())return h.scroll(t,"MozMousePixelScroll"===e.originalEvent.type?2:null)}),!1!==this._options.showTopShadow&&(this._$shadowTop=$('<div class="sb-inner-shadow top i-invisible">').appendTo(this._$wrapper)),!1!==this._options.showBottomShadow&&(this._$shadowBottom=$('<div class="sb-inner-shadow">').appendTo(this._$wrapper)),this._$shadowTop&&this._header_height&&this._$shadowTop.css("top",this._header_height-this._shadow_offset),l=this._options.additionalClass?" "+this._options.additionalClass:"",c=this._options.alwaysVisible?" active-always":"",this._$scrollBarWrapper=$('<div class="sb-scrollbar-wrap">').appendTo(this._$wrapper),this._$scrollBar=$('<div class="sb-scrollbar sb-scrollbar-body'+l+c+'"></div>').appendTo(this._$scrollBarWrapper),this._onScroll()}var n=i(78).lazyJqueryUI;o.prototype.isTouch=function(){return this._touch},o.prototype.getScrollBar=function(){return this._$scrollBar},o.prototype._defaultOptions={headerHeight:0,additionalClass:"",alwaysVisible:!1,showBottomShadow:!0,scrollMarginTop:1,bubbleScrollEvent:!1},o.prototype.initDraggable=function(){if(this._dragInitialized)return this;var e=this;return n(this._$scrollBar).draggable({axis:"y",containment:this._$scrollBarWrapper,start:function(){e._dragging=!0},stop:function(){e._dragging=!1},drag:function(t,i){e.updateScroll()}}),this._dragInitialized=!0,this},o.prototype.updateScroll=function(){var e,t,i,o,n;return this._touch?this:(e=1,t=Math.ceil(this._$scrollBar.position().top-this._scroll_margin_top-this._header_height),i=this.getContainerHeightWithoutHeader(),o=this._$content.outerHeight(),n=o-i-e,i<=0?this:(this._scroll_target_top=n<=0?this._header_height:Math.min(-t*o/i+this._header_height,this._header_height),t+this._$scrollBar.height()+2>=i?this.scrollToEnd():(this._$content.css("top",this._scroll_target_top+"px"),this._onScroll()),this))},o.prototype.getContainerHeightWithoutHeader=function(){return this._$wrapper[0].getBoundingClientRect().height-this._header_height},o.prototype.getContainerHeight=function(){return this._$wrapper[0].getBoundingClientRect().height},o.prototype.getContentHeight=function(){return this._$content[0].getBoundingClientRect().height},o.prototype.updateScrollBar=function(){var e,t,i,o,n,r,s,a,l;return this._touch?this:(e=1,t=this._$content.position().top,i=this.getContentHeight(),o=this.getContainerHeight(),n=this.getContainerHeightWithoutHeader(),r=e+this._header_height,s=n-2*e,a=(Math.abs(t)-this._header_height)*s/i,l=o*o/i,this.isContentShort()?(this._$scrollBar.addClass("js-hidden"),this._$wrapper.removeClass("sb-scroll-active")):(this._$scrollBar.removeClass("js-hidden").height(l).css("top",r+a),this._$wrapper.addClass("sb-scroll-active"),this.initDraggable()),this)},o.prototype.scroll=function(e,t){var i,o,n,r,s;return this._touch?this:(i=this._$content.position().top,o=this._$content.outerHeight(),
n=this.getContainerHeightWithoutHeader(),r=o-n-1,s=t||this._scroll_speed,r<=0||(this._scroll_target_top=Math.max(-r+this._header_height,Math.min(this._header_height,i+e*s)),this.setContentTop(this._scroll_target_top),this._onScroll()))},o.prototype.animateTo=function(e){var t,i,o;return this._touch?this:(t=this._$content.outerHeight(),i=this.getContainerHeightWithoutHeader(),(o=t-i-1)<=0||(this._scroll_target_top=Math.max(-o+this._header_height,Math.min(this._header_height,-e)),void this._$content.animate({top:this._scroll_target_top},500,function(){this._onScroll()}.bind(this))))},o.prototype.resize=function(){var e,t;if(!this._bottomFixed){if(e=this._$content.outerHeight(),t=this._$wrapper.outerHeight(),!this._options.vAlignBottom&&e<t)return void(this.atStart()||this.scrollToStart());this.atEnd()?this.scrollToEnd():"number"==typeof this._stickyBottom&&this.setContentTop(Math.min(0,this._stickyBottom+this._$wrapper.outerHeight()-this._$content.outerHeight()))}},o.prototype.resizeHeader=function(e){var t=e-this._header_height;this._header_height=e,this._scroll_target_top+=t,this._$shadowTop&&this._$shadowTop.css("top",this._header_height-this._shadow_offset),this.resize()},o.prototype.scrollTo=function(e,t){var i,o,n,r,s,a;if(t=$.extend({position:"visible",areaHeight:e instanceof $?e.height():0},t),e instanceof $&&(e=t.offsetTop||e.position().top),i=this._$content.position().top,o=this._$content.outerHeight(),n=this.getContainerHeightWithoutHeader(),o-n-1<=0)return!0;if(r=-1*(i-this._header_height),s=r+n,a=0,"visible"===t.position){if(e>r&&e+t.areaHeight<s)return!1;a=e+t.areaHeight>s?s-e-t.areaHeight:r-e}else"top"===t.position&&(a=r-e);return this.scroll(a,1),this._onScroll(),!1},o.prototype.scrollToEnd=function(){var e=this._$content.position().top,t=this._$content.outerHeight(),i=this._$wrapper.outerHeight(),o=t+e;return this.setContentTop(e+(i-o)+1),this._onScroll(),this},o.prototype.scrollToStart=function(){return this.setContentTop(this._header_height),this._onScroll(),this},o.prototype.currentPosition=function(){return Math.round(this._$content.position().top)},o.prototype.atStart=function(){return Math.round(this._$content.position().top)>=this._header_height},o.prototype.atEnd=function(e){var t,i,o,n;return"number"==typeof e&&isFinite(e)||(e=0),t=1,i=Math.round(this._$content.position().top),o=this._$content.outerHeight(),n=this._$wrapper.outerHeight(),o-Math.abs(i)-t<=n+e},o.prototype._onScroll=function(e){var t,i;return this._touch||this._$content.css("bottom","auto"),this.scrolled.fire(),this._dragging&&!0!==e||this.updateScrollBar(),t=this.atStart(),i=this.atEnd(),this._$shadowTop&&this._$shadowTop.toggleClass("i-invisible",!!t),this._$shadowBottom&&this._$shadowBottom.toggleClass("i-invisible",!!i),this._onContentVisible(),!this._atStart&&t?(this._atStart=!0,this.scrolltostart.fire()):this._atStart&&!t&&delete this._atStart,!this._atEnd&&i?(this._atEnd=!0,this.scrolltoend.fire()):this._atEnd&&!i&&delete this._atEnd,
this._options.vAlignBottom&&(this._stickyBottom=this._$content.outerHeight()-Math.abs(this._$content.position().top)-this._$wrapper.outerHeight()),!(!this._atStart&&!this._atEnd||("function"==typeof this._options.bubbleScrollEvent?!this._options.bubbleScrollEvent():!this._options.bubbleScrollEvent))},o.prototype.checkContentVisibility=function(){this._onContentVisible()},o.prototype.subscribeToContentVisible=function(e,t,i){this.visibilityCallbacks.push({id:e,$el:t,callback:i})},o.prototype.triggerVisibilityCallbacks=function(e){this._onContentVisible(e)},o.prototype._contentIsVisible=function(e){return e.$el.position().top>-1*this.currentPosition()},o.prototype._onContentVisible=function(e){var t,i,o;this.visibilityCallbacks.length&&(t=e||this._contentIsVisible.bind(this),i=[],o=this.visibilityCallbacks.filter(function(e,o){if(!$.contains(this._$content,e.$el[0]))return!1;var n=t(e);return n&&i.push(o),!n},this),i.forEach(function(t){this.visibilityCallbacks[t].callback(!!e)},this),delete this.visibilityCallbacks,this.visibilityCallbacks=o)},o.prototype.save=function(){return this._saved={top:this._$content.position().top,height:this._$content.outerHeight()},this},o.prototype.restore=function(){if(this._saved){if(this._saved.top===this._$content.position().top&&this._saved.height===this._$content.outerHeight())return delete this._saved,this;this._options.vAlignBottom&&(this._saved.top-=this._$content.outerHeight()-this._saved.height,this._saved.top>this._header_height&&(this._saved.top=this._header_height)),this.setContentTop(this._saved.top),delete this._saved,this._onScroll(!0)}return this},o.prototype.fixBottom=function(){var e,t;return this._bottomFixed?this:(this._touch?(e=this._$content.outerHeight(),t=this._$wrapper.scrollTop(),this._tempIntervalID=setInterval(function(){this._$wrapper.scrollTop(t+(this._$content.outerHeight()-e))}.bind(this),0)):this._$content.css({top:"auto",bottom:this._$wrapper.outerHeight()-this._$content.position().top-this._$content.outerHeight()}),this._bottomFixed=!0,this)},o.prototype.releaseBottom=function(){return this._bottomFixed?(this._touch?clearInterval(this._tempIntervalID):this._$content.css({top:this._$content.position().top,bottom:"auto"}),delete this._bottomFixed,this._onScroll(),this):this},o.prototype.setContentTop=function(e){return this._touch?this._options.vAlignBottom&&this._$content.outerHeight()<this._$wrapper.outerHeight()?(this._$wrapper.css("overflow-y","visible"),this._$content.css({position:"absolute",bottom:0})):(this._$content.css({position:"relative",bottom:"auto"}),this._$wrapper.css("overflow-y","auto"),this._$wrapper.scrollTop(-e)):this._$content.css("top",e),this},o.prototype.isContentShort=function(){return this.getContentHeight()<=this.getContainerHeightWithoutHeader()},o.prototype.destroy=function(){this._$scrollBarWrapper.remove(),this._$shadowBottom&&this._$shadowBottom.remove(),this._$shadowTop&&this._$shadowTop.remove(),
this._$wrapper.attr("style","").off("mouseenter.sidebar-scroll").off("mouseleave.sidebar-scroll").off("mousewheel.sidebar-scroll"),this._$content.attr("style","")},t.SidebarCustomScroll=o}).call(t,i(4))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.CustomEvent=function(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.bubbles,n=void 0!==o&&o,r=i.cancelable,s=void 0!==r&&r,a=i.detail,l=void 0===a?null:a;try{return new window.CustomEvent(e,{bubbles:n,cancelable:s,detail:l})}catch(i){return t=document.createEvent("CustomEvent"),t.initCustomEvent(e,n,s,l),t}}},function(e,t,i){"use strict";e.exports=function(e,t){function i(){e.apply(n,o)}var o,n,r=0;return function(){n=this,o=arguments,clearTimeout(r),r=setTimeout(i,t)}}},function(e,t,i){"use strict";(function(e,o){function n(e,t,i,o,n){this._paneView=n,l.call(this,e,t,i,o)}function r(e,t,i,o){n.call(this,e,t,i,o,new d(e,this))}function s(e,t,i,o){n.call(this,e,t,i,o,new p(e,this))}function a(e,t,i,o){n.call(this,e,t,i,o,new f(e,this)),this.pointSets={},this.updateEstimateHandler=this.updateEstimate.bind(this)}var l=i(34).Study,c=i(158),h=i(157).DataWindowView,u=i(508),d=u.DividendsPaneView,p=u.SplitsPaneView,f=u.EarningsPaneView,_=i(637).createEstimatesProvider,m=i(2).propertyPages;inherit(n,l),n.prototype.createViews=function(){this._paneViews=[this._paneView],this._priceAxisViews=[],this._dataWindowView||(this._dataWindowView=new h),this._statusView||(this._statusView=new c(this,this._model.properties()))},n.prototype.onClickOutside=function(e){this._paneView.onClickOutside(e)},n.prototype.showInObjectTree=function(){return!1},n.prototype.isSavedInStudyTemplates=function(){return!1},n.prototype.isRemovedByStudyTemplates=function(){return!1},n.prototype.removeByRemoveAllStudies=function(){return!1},n.prototype.isDraggable=function(){return!1},n.prototype.statusView=function(){return!1},n.prototype.onData=function(e){l.prototype.onData.call(this,e),"study_completed"===e.method&&this._restartRequired&&(delete this._restartRequired,this.restart())},n.prototype.start=function(){l.prototype.start.call(this),this._model.mainSeries().onSymbolResolved().subscribe(this,this._initPlotStash),this._initPlotStash()},n.prototype.stop=function(){l.prototype.stop.call(this),this._model.mainSeries().onSymbolResolved().unsubscribe(this,this._initPlotStash),this._paneView.closeTooltips()},n.prototype.isSavedInChart=function(e){return e},n.prototype._initPlotStash=function(){this._plotStash={}},n.prototype._updatePlotStash=function(e,t){var i,o,n;!this._restartRequired&&this._plotStash&&(i=e.value.slice(),o=i.shift(),n=o+"",t?this._plotStash[n]?this._plotStash[n]+""!=i+""&&(this._restartRequired=!0):this._plotStash[n]=i:this._plotStash[n]&&(this._restartRequired=!0))},n.prototype.transformData=function(e){for(var t,i,o=e.length-1;o>=0;--o)t=e[o],i=this.isValid(t.value),this._updatePlotStash(t,i),i||e.splice(o,1)},n.prototype.isValid=function(e){throw Error("Not Implemented")},n.prototype.restoreData=function(e){
this.transformData(e.data),e.end=e.data.length,l.prototype.restoreData.call(this,e)},n.prototype.canHaveChildren=function(){return!1},n.getSettingsValue=function(e,t){var i=null;switch(e){case"TV_DIVIDENDS":i=t.esdShowDividends.value();break;case"TV_SPLITS":i=t.esdShowSplits.value();break;case"TV_EARNINGS":i=t.esdShowEarnings.value()}return i},n.prototype.getDisplayPropertyPage=function(){return null},n.prototype.getStylesPropertyPage=function(){return e.enabled("show_chart_property_page")?m.ChartStylesPropertyPage:null},inherit(r,n),r.prototype.isValid=function(e){var t=e[2];return $.isNumeric(t)},inherit(s,n),s.prototype.isValid=function(e){var t=e[3];return $.isNumeric(t)},inherit(a,n),a.pointSetCounter=1,a.pointSetsVersion="1",a.prototype.isValid=function(e){var t=e[3],i=e[4];return $.isNumeric(t)&&$.isNumeric(i)},a.prototype.restorePointset=function(e){return{estimate:{index:e.index,value:[e.tickmark,void 0,e.estimate,$.isNumeric(e.period)?e.period:o(e.period).unix(),$.isNumeric(e.date)?e.date:o(e.date).unix()]}}},a.prototype.restoreData=function(e){var t,i;n.prototype.restoreData.call(this,e),(t=this.currentPointsetKey())&&(e.estimate?this.pointSets[t]=this.restorePointset(e.estimate):e.pointSets&&null==e.pointSetsVersion?(i=t.split(":")[1].toUpperCase(),e.pointSets[t]?this.pointSets[t]=this.restorePointset(e.pointSets[t]):e.pointSets[i]&&(this.pointSets[t]=this.restorePointset(e.pointSets[i]))):e.pointSets&&"1"===e.pointSetsVersion&&(this.pointSets=e.pointSets))},a.prototype.state=function(e){var t,i,o=n.prototype.state.call(this,e);if(e){t={};for(i in this.pointSets)this.pointSets.hasOwnProperty(i)&&(t[i]={estimate:this.pointSets[i].estimate});o.data.pointSets=t,o.data.pointSetsVersion=a.pointSetsVersion}return o},a.prototype.stop=function(){n.prototype.stop.call(this);var e=this;Object.keys(this.pointSets).forEach(function(t){var i=e.pointSets[t];i.promise&&i.promise.always(function(){i.sessionId===e._model.chartApi()._chartApi.sessionid&&e._model.chartApi().removePointset(i.pointsetId)})}),this.pointSets={},this._estimatesCache.off("data",this.updateEstimateHandler),this._estimatesCache.destroy(),this._model.mainSeries().onSymbolResolved().unsubscribe(this,this.requestEstimate)},a.prototype.generatePointsetId=function(){return"pointsetEstimates_"+a.pointSetCounter++},a.prototype.getEstimate=function(){var e,t=this.currentPointsetKey();return t?(e=this.pointSets[t],e?e.estimate:null):null},a.prototype.currentPointsetKey=function(){var e=this._series.symbolInfo();return e?e.base_name[0].toLowerCase():null},a.prototype.createPointsetKey=function(e,t){return e.toLowerCase()+":"+t.toLowerCase()},a.prototype.updateEstimate=function(e){if(this._model.chartApi().connected()){var t=this;this._model.timeScale().isEmpty()?this._model.mainSeries().onDataLoaded().subscribe(null,function(i){"series_loading"!==i.method&&t.updateEstimateImpl(e)},!0):this.updateEstimateImpl(e)}},a.prototype.updateEstimateImpl=function(e){var t,i,o;this._model.chartApi().connected()&&(t=this,i=this.createPointsetKey(e.exchange,e.symbol),
o=this.pointSets[i],o&&o.promise&&(o.promise.always(function(){o.sessionId===t._model.chartApi()._chartApi.sessionid&&t._model.chartApi().removePointset(o.pointsetId)}),delete this.pointSets[i]),e.date&&e.period&&(e.reported||e.estimate)&&(this.pointSets[i]=this.createPointset(e)))},a.prototype.start=function(){n.prototype.start.call(this),this.pointSets={},this._estimatesCache=_(),this._estimatesCache.on("data",this.updateEstimateHandler),this._model.mainSeries().onSymbolResolved().subscribe(this,this.requestEstimate),this.requestEstimate()},a.prototype.createPointset=function(e){var t,i,n,r=this.generatePointsetId(),s=this._model.mainSeries().symbolId(),a=this._model.mainSeries().properties().interval.value().split(",")[0],l=[];return l.push([o(e.date).unix(),0]),t=$.Deferred(),i={promise:t.promise(),pointsetId:r,sessionId:this._model.chartApi()._chartApi.sessionid},n=this,this._model.chartApi().createPointset(r,"turnaround",s,a,l,function(s){return s.params.customId!==r?t.reject():0===s.params.plots.length?t.reject():s.params.plots[0].value[0]<n._model.timeScale().baseIndex()?t.reject():(i.estimate={index:s.params.plots[0].value[0],value:[s.params.plots[0].value[1],e.reported,e.estimate,o(e.period).unix(),o(e.date).unix()]},t.resolve())}),i},a.prototype.requestEstimate=function(){var e,t,i;this._estimatesCache.resetSymbol(),(e=this.currentPointsetKey())&&this._model.chartApi().connected()&&(t=e.split(":")[0],i=e.split(":")[1],this._estimatesCache.setSymbol(t,i))},t.ESDStudyBase=n,t.study_ESD$TV_EARNINGS=a,t.study_ESD$TV_SPLITS=s,t.study_ESD$TV_DIVIDENDS=r}).call(t,i(3),i(54))},function(e,t,i){"use strict";for(var o={LineToolFibRetracement:i(772).LineToolFibRetracement,LineToolFibChannel:i(774).LineToolFibChannel,LineToolFibSpeedResistanceArcs:i(775).LineToolFibSpeedResistanceArcs,LineToolProjection:i(776).LineToolProjection,LineToolTrendBasedFibExtension:i(777).LineToolTrendBasedFibExtension,LineToolElliott:i(159).LineToolElliott,LineToolFibCircles:i(778).LineToolFibCircles,LineToolRegressionTrend:i(481).LineToolRegressionTrend,LineToolVbPFixed:i(779).LineToolVbPFixed,LineToolTrading:i(282),LineStudyMtp:i(160).LineStudyMtp,LineToolVertLine:i(780).LineToolVertLine,LineToolBarsPattern:i(782).LineToolBarsPattern,LineToolTrendBasedFibTime:i(783).LineToolTrendBasedFibTime,LineToolFibTimeZone:i(784).LineToolFibTimeZone,LineToolCircleLines:i(785).LineToolCircleLines,LineToolDateRange:i(786).LineToolDateRange,LineToolPriceRange:i(787).LineToolPriceRange,LineToolDateAndPriceRange:i(788).LineToolDateAndPriceRange,LineToolParallelChannel:i(789).LineToolParallelChannel,LineToolTrendAngle:i(790).LineToolTrendAngle,LineToolTrendLine:i(218).LineToolTrendLine,LineToolArrowMark:i(186).LineToolArrowMark,LineToolExecution:i(486).LineToolExecution,LineToolPitchfan:i(791).LineToolPitchfan,LineToolGannSquare:i(792).LineToolGannSquare,LineToolFibSpeedResistanceFan:i(793).LineToolFibSpeedResistanceFan,LineToolGannComplex:i(794).LineToolGannComplex,LineToolGannFixed:i(795).LineToolGannFixed,LineToolGannFan:i(796).LineToolGannFan,
LineToolFibWedge:i(484).LineToolFibWedge,LineToolPitchfork:i(220).LineToolPitchfork,LineToolDisjointAngle:i(797).LineToolDisjointAngle,LineToolFlatBottom:i(798).LineToolFlatBottom,LineToolIcon:i(799).LineToolIcon,LineToolRotatedRectangle:i(800).LineToolRotatedRectangle,LineToolFibSpiral:i(801).LineToolFibSpiral,LineToolHeadAndShoulders:i(802).LineToolHeadAndShoulders,LineToolTriangle:i(803).LineToolTriangle,LineToolTrianglePattern:i(804).LineToolTrianglePattern,LineTool5PointsPattern:i(488).LineTool5PointsPattern,LineToolThreeDrivers:i(805).LineToolThreeDrivers,LineToolABCD:i(806).LineToolABCD,LineToolRiskReward:i(283).LineToolRiskReward,LineToolPolyline:i(808).LineToolPolyline,LineToolPrediction:i(809).LineToolPrediction,LineToolPriceLabel:i(810).LineToolPriceLabel,LineToolNote:i(489).LineToolNote,LineToolNoteAbsolute:i(489).LineToolNoteAbsolute,LineToolBrush:i(811).LineToolBrush,LineToolArc:i(812).LineToolArc,LineToolCallout:i(813).LineToolCallout,LineToolBalloon:i(814).LineToolBalloon,LineToolText:i(490).LineToolText,LineToolHorzLine:i(815).LineToolHorzLine,LineToolHorzRay:i(816).LineToolHorzRay,LineToolRectangle:i(817).LineToolRectangle,LineToolEllipse:i(818).LineToolEllipse,LineToolTimeCycles:i(819).LineToolTimeCycles,LineToolSineLine:i(820).LineToolSineLine,LineToolGhostFeed:i(821).LineToolGhostFeed,LineToolBezierQuadro:i(822).LineToolBezierQuadro,LineToolBezierCubic:i(823).LineToolBezierCubic,LineToolArrow:i(824).LineToolArrow,LineToolRay:i(825).LineToolRay,LineToolExtended:i(826).LineToolExtended,LineToolSchiffPitchfork:i(827).LineToolSchiffPitchfork,LineToolSchiffPitchfork2:i(828).LineToolSchiffPitchfork2,LineToolInsidePitchfork:i(829).LineToolInsidePitchfork,LineToolTextAbsolute:i(490).LineToolTextAbsolute,LineToolArrowMarkLeft:i(186).LineToolArrowMarkLeft,LineToolArrowMarkRight:i(186).LineToolArrowMarkRight,LineToolArrowMarkUp:i(186).LineToolArrowMarkUp,LineToolArrowMarkDown:i(186).LineToolArrowMarkDown,LineToolFlagMark:i(830).LineToolFlagMark,LineToolCypherPattern:i(831).LineToolCypherPattern,LineToolElliottImpulse:i(159).LineToolElliottImpulse,LineToolElliottTriangle:i(159).LineToolElliottTriangle,LineToolElliottTripleCombo:i(159).LineToolElliottTripleCombo,LineToolElliottCorrection:i(159).LineToolElliottCorrection,LineToolElliottDoubleCombo:i(159).LineToolElliottDoubleCombo,LineToolRiskRewardLong:i(283).LineToolRiskRewardLong,LineToolRiskRewardShort:i(283).LineToolRiskRewardShort,LineToolPosition:i(832).LineToolPosition,LineToolOrder:i(833).LineToolOrder},n=Object.keys(o),r=n.length;r--;)TradingView[n[r]]=o[n[r]];e.exports=o},function(e,t,i){"use strict";(function(o){function n(e){return e&&e.__esModule?e:{default:e}}function r(){var e,t,i=h.width();for(d.width=i,d.height=h.height(),e=0;e<p.length;e++)if(i<=d.breakpoints[p[e]]){d.device!==p[e]&&(t=d.device,d.device=p[e],d.trigger("changeDevice",[p[e],t]));break}return d}var s,a,l,c,h,u,d,p;Object.defineProperty(t,"__esModule",{value:!0}),s=i(65),a=n(s),l=i(174),c=$("body"),h=$(window),u=0,d={width:null,height:null,device:null,checkDevice:r,
isMobileSafari:!!navigator.userAgent.match(/Version\/[\d\.]+.*Safari/)||!!navigator.userAgent.match("CriOS"),getScrollbarWidth:function(){var e=void 0;return function(){var t,i,o,n;return void 0===e&&(t=document.createElement("div"),t.style.visibility="hidden",t.style.width="100px",t.style.msOverflowStyle="scrollbar",document.body.appendChild(t),i=t.offsetWidth,t.style.overflow="scroll",o=document.createElement("div"),o.style.width="100%",t.appendChild(o),n=o.offsetWidth,t.parentNode.removeChild(t),e=i-n),e}}(),hasScroll:function(e){return e.get(0).scrollHeight>e.height()},breakpoints:l.breakpoints,widgetbarBreakpoint:1064,setFixedBodyState:function(e){var t,i,o;e&&1==++u?("hidden"!==$(document.body).css("overflow").toLowerCase()&&document.body.scrollHeight>document.body.offsetHeight&&($(".widgetbar-wrap").css("right",d.getScrollbarWidth()),c.css("padding-right",parseInt(c.css("padding-right").replace("px",""))+d.getScrollbarWidth()+"px").data("wasScroll",!0)),!TradingView.isMobile.any()&&d.isMobileSafari?c.addClass("i-no-scroll-safari"):c.css("top",-h.scrollTop()).addClass("i-no-scroll")):!e&&u>0&&0==--u&&(!TradingView.isMobile.any()&&d.isMobileSafari?c.removeClass("i-no-scroll-safari"):(t=-parseInt(c.css("top").replace("px","")),c.removeClass("i-no-scroll").css("top",""),h.scrollTop(t)),c.data("wasScroll")&&(i=c.get(0),$(".widgetbar-wrap").css("right",0),o=$(".widgetbar-wrap").width()||0,i.scrollHeight<=i.clientHeight&&(o-=d.getScrollbarWidth()),c.css("padding-right",(o<0?0:o)+"px").data("wasScroll",void 0)))}},p=Object.keys(d.breakpoints).sort(function(e,t){return d.breakpoints[e]-d.breakpoints[t]}),o.extend(d,a.default.prototype),r(),$(r),h.on("resize",r),t.default=d,e.exports=t.default}).call(t,i(29))},function(e,t,i){"use strict";function o(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.enabled=!0,this._symbol=e,this._symbolOriginal=null,this._options=(0,r.deepExtend)({},g,i),!1!==this._options.signNegative&&!0!==this._options.signNegative&&delete this._options.signNegative,i.customPriceFormatter&&(this._customPriceFormatter=i.customPriceFormatter),this._percentFormatter=new l.PercentageFormatter,this._priceFormatter=this._customPriceFormatter||new h.PriceFormatter(100),this._volumeFormatter=new u.VolumeFormatter,this._cache={},this._lastPrice=null,this._elements={},this._textNodes={},this._setElements(t),this._highlighters={},this._initHighlighters(),this._options.setStateHook&&this.setStateHook(this._options.setStateHook),this._options.quoteSession&&(this.quoteSession=this._options.quoteSession),this._quoteSessionEventHandler=this.onData.bind(this),setTimeout(this.connect.bind(this),0)}function n(e,t,i,o,n){function r(r){var c,h=0;if(r!==l){if(null!==l&&null!==r&&(h=r-l),s(),a=setTimeout(s,750),0<h)if(t)for(c=0;c<e.length;c++)e[c].style.background=t;else for(c=0;c<e.length;c++)e[c].classList.add(o);else if(h<0)if(i)for(c=0;c<e.length;c++)e[c].style.background=i;else for(c=0;c<e.length;c++)e[c].classList.add(n);null!==r&&(l=r)}}function s(){var r;if(a&&(clearTimeout(a),a=void 0),
i||t)for(r=0;r<e.length;r++)e[r].style.background="";if(!i||!t)for(r=0;r<e.length;r++)e[r].classList.remove(n,o)}var a,l=null;return{show:r,hide:s}}var r=i(75),s=i(0),a=i(10),l=i(73),c=i(161),h=i(16),u=i(71),d=i(123),p=i(122),f=i(121),_=i(151),m=(0,s.getLogger)("QuoteTicker"),g={addDescriptionTitle:!0,changeDirectionDownClass:"down",changeDirectionUpClass:"up",changeDownFontColor:null,changePercentInBrackets:!1,changeUpFontColor:null,clientName:"quote-ticker",dontDyePrice:!1,fallingBg:null,growingBg:null,lastFallingClass:"falling",lastGrowingClass:"growing",quoteSession:null,signNegative:!0,signPositive:!1,customPriceFormatter:null,initedHook:void 0,setStateHook:void 0,sfPermissionDeniedHook:void 0,noSuchSymbolHook:void 0},v=["aboard","about","above","abreast","abroad","absent","across","adjacent","after","against","along","alongside","amid","among","an","apropos","apud","around","as","astride","at","atop","bar","before","behind","below","beneath","beside","besides","between","beyond","but","by","chez","circa","come","despite","down","during","except","for","from","in","inside","into","less","like","minus","near","notwithstanding","of","off","on","onto","ontop","opposite","out","outside","over","pace","past","per","post","pre","pro","qua","re","sans","save","short","since","than","through","throughout","to","toward, towards","under","underneath","unlike","until","up","upon","upside","versus","via","vice","with","within","without","worth"];o.prototype._setElements=function(e){this._container=e,this._elements.change=this._findElements(e,["js-symbol-change","symbol-change"]),this._elements.changeDirection=this._findElements(e,["js-symbol-change-direction","symbol-change-direction"]),this._elements.extHrsChangeDirection=this._findElements(e,["js-symbol-ext-hrs-change-direction"]),this._elements.changePercent=this._findElements(e,["js-symbol-change-pt","symbol-change-pt"]),this._elements.description=this._findElements(e,["js-symbol-description-name","symbol-description-name"]),this._elements.extHrsChange=this._findElements(e,"js-symbol-ext-hrs-change"),this._elements.extHrsChangePercent=this._findElements(e,"js-symbol-ext-hrs-change-pt"),this._elements.extHrsClose=this._findElements(e,"js-symbol-ext-hrs-close"),this._elements.industry=this._findElements(e,["js-symbol-industry","symbol-industry"]),this._elements.last=this._findElements(e,["js-symbol-last","symbol-last"]),this._elements.sector=this._findElements(e,["js-symbol-sector","symbol-sector"]),this._elements.sessionStatus=this._findElements(e,"js-symbol-session-status"),this._elements.shortName=this._findElements(e,["js-symbol-short-name","symbol-short-name"]),this._elements.updateMode=this._findElements(e,"js-data-mode"),this._elements.updateMode.forEach(function(e){return e.classList.add("i-hidden")}),this._textNodes.change=this._getOrCreateTextNodes(this._elements.change),this._textNodes.changePercent=this._getOrCreateTextNodes(this._elements.changePercent),this._textNodes.extHrsChange=this._getOrCreateTextNodes(this._elements.extHrsChange),
this._textNodes.extHrsChangePercent=this._getOrCreateTextNodes(this._elements.extHrsChangePercent),this._textNodes.extHrsClose=this._getOrCreateTextNodes(this._elements.extHrsClose),this._textNodes.last=this._getOrCreateTextNodes(this._elements.last),this._textNodes.open=this._findTextNodes(e,"js-symbol-open"),this._textNodes.eps=this._findTextNodes(e,"js-symbol-eps"),this._textNodes.marketCap=this._findTextNodes(e,"js-symbol-market-cap"),this._textNodes.prevClose=this._findTextNodes(e,"js-symbol-prev-close"),this._textNodes.dividends=this._findTextNodes(e,"js-symbol-dividends"),this._textNodes.priceEarnings=this._findTextNodes(e,"js-symbol-pe"),this._textNodes.volume=this._findTextNodes(e,"js-symbol-volume"),this._textNodes.high=this._findTextNodes(e,"js-symbol-high"),this._textNodes.low=this._findTextNodes(e,"js-symbol-low")},o.prototype._findElements=function(e,t){var i=(0,a.isArray)(t)?t:[t];return Array.prototype.concat.apply([],i.map(function(t){return Array.prototype.slice.call(e.getElementsByClassName(t))}))},o.prototype._findTextNodes=function(e,t){return this._getOrCreateTextNodes(this._findElements(e,t))},o.prototype._getOrCreateTextNodes=function(e){var t=this;return e.map(function(e){var i=t._getFirstTextNode(e);return i||(i=e.ownerDocument.createTextNode(""),e.appendChild(i)),i})},o.prototype._getFirstTextNode=function(e){var t,i=e.childNodes;for(t=i.length-1;t>=0;t--)if(3===i.item(t).nodeType)return i.item(t);return null},o.prototype.quoteSession=null,o.assignQuoteSession=function(e){this.prototype.quoteSession||(this.prototype.quoteSession=e)},o.prototype.connect=function(e){this._subscribed||(this._subscribedSymbol=e||this._symbol,this.quoteSession.subscribe(this._options.clientName,this._subscribedSymbol,this._quoteSessionEventHandler),this._subscribed=!0)},o.prototype.disconnect=function(){this._subscribed&&(this.quoteSession.unsubscribe(this._options.clientName,this._subscribedSymbol,this._quoteSessionEventHandler),this._subscribed=!1)},o.prototype.onData=function(e,t){if(this.enabled)switch(e.status){case"ok":this.successData(e,t);break;case"permission_denied":this.onPermissionDenied(e);break;case"error":this.errorData(e)}},o.prototype.successData=function(e,t){e.values&&this.setState(e.values,e,t)},o.prototype.onPermissionDenied=function(e){(0,_.isSfQuoteData)(e)?this._options.sfPermissionDeniedHook?this._options.sfPermissionDeniedHook(e,this._symbolOriginal||this._symbol):this.errorData(e):this.downgradeData(e)},o.prototype.errorData=function(e){this._options.noSuchSymbolHook?(this._symbolOriginal&&this.setShortName(this._symbolOriginal),this._options.noSuchSymbolHook.call(this,e,this._symbolOriginal||this._symbol)):m.logWarn("No data for: "+this._symbol)},o.prototype.downgradeData=function(e){var t=e&&e.values&&e.values.alternative,i=this._symbol===t;if(!t||-1===t.indexOf(":")||i)return void this.errorData(e);this._symbolOriginal=this._symbol,this._symbol=t,this._subscribed=!1,this.connect()},o.prototype.setState=function(e,t,i){var o,n,r,s,a,l,c,_,m,g,v,y,b,S=this,w=i.values
;if(null==w.pricescale&&null==w.minmov&&null==w.fractional&&null==w.minmove2||(this._priceFormatter=this._customPriceFormatter||new h.PriceFormatter(e.pricescale||100,e.minmov||1,e.fractional,e.minmove2)),o=this._options,n=this._percentFormatter,r=this._priceFormatter,s=this._volumeFormatter,a=function(e){return null==e?u.PLACE_HOLDER:n.format(e,o.signPositive,void 0,o.signNegative)},l=function(e){return r.format(e,o.signPositive,void 0,o.signNegative)},c=function(e){var t=n.format(e,o.signPositive,void 0,o.signNegative);return o.changePercentInBrackets?"("+t+")":t},_=r.format.bind(r),m=s.format.bind(s),g=function(e){return null==e?u.PLACE_HOLDER:_(e)},this._setNodesValue(this._textNodes.change,w.change,l),this._setNodesValue(this._textNodes.changePercent,w.change_percent,c),null!=w.change&&(o.dontDyePrice||this._setChangeFontColor([].concat(this._elements.change,this._elements.changePercent),w.change,o.changeUpFontColor,o.changeDownFontColor),this._setChangeDirection(this._elements.changeDirection,w.change)),this._setNodesValue(this._textNodes.extHrsChange,w.rch,l),this._setNodesValue(this._textNodes.extHrsChangePercent,w.rchp,c),null!=w.rch&&(o.dontDyePrice||this._setChangeFontColor([].concat(this._elements.extHrsChange,this._elements.extHrsChangePercent),w.rch,o.changeUpFontColor,o.changeDownFontColor),this._setChangeDirection(this._elements.extHrsChangeDirection,w.rch)),this._setNodesValue(this._textNodes.prevClose,w.prev_close_price,_),this._setNodesValue(this._textNodes.dividends,e.dividends_yield,a,!0),(v=(0,f.getTranslatedSymbolDescription)(w))&&(v=this._prepareSymbolDescription(v),this._setTextsContent(this._elements.description,v),this._options.addDescriptionTitle))for(y=0;y<this._elements.description.length;y++)this._elements.description[y].setAttribute("title",v);if(null==w.short_name&&null==w.exchange||e.short_name&&(b=e.short_name,"QUANDL"===e.exchange&&void 0!==e.short_name.split("/")[1]&&(b=e.short_name.split("/")[1]+", "+e.short_name.split("/")[0]),this.setShortName(b)),this._setNodesValue(this._textNodes.last,w.last_price,_),this._lastPrice?this._highlighters.last.show(e.last_price):null===this._lastPrice&&(this._container.classList.add("quote-ticker-inited"),"function"==typeof this._options.initedHook&&this._options.initedHook()),this._lastPrice=e.last_price,this._setNodesValue(this._textNodes.extHrsClose,w.rtc,_),w.rtc&&this._highlighters.extHrsClose.show(w.rtc),w.industry&&this._setTextsContent(this._elements.industry,e.industry,function(e){return e}),w.sector&&this._setTextsContent(this._elements.sector,e.sector),this._elements.sessionStatus&&w.current_session&&(this._sessionStatusInstances?this._sessionStatusInstances.forEach(function(e){return e.setStatus(w.current_session)}):this._sessionStatusInstances=this._elements.sessionStatus.map(function(t){return new d.MarketStatusIndicator({classSuffix:"--for-ticker",el:t,short:!0,status:w.current_session,quoteSession:S.quoteSession,symbol:e.original_name,manualUpdate:!0})})),this._setNodesValue(this._textNodes.open,w.open_price,_),
this._setNodesValue(this._textNodes.high,w.high_price,_),this._setNodesValue(this._textNodes.low,w.low_price,_),this._setNodesValue(this._textNodes.eps,e.earnings_per_share_basic_ttm,g,!0),this._setNodesValue(this._textNodes.priceEarnings,e.price_earnings_ttm,g,!0),this._setNodesValue(this._textNodes.marketCap,e.market_cap_basic,m,!0),this._setNodesValue(this._textNodes.volume,e.volume,m,!0),null!=w.last_price)for(y=0;y<this._elements.updateMode.length;y++)this._elements.updateMode[y].classList.remove("i-hidden");this._elements.updateMode&&(w.update_mode||w.update_mode_seconds)&&(this._updateModeInstances?this._updateModeInstances.forEach(function(t){return t.update({values:e})}):this._updateModeInstances=this._elements.updateMode.map(function(t){return new p.DataModeIndicator({classSuffix:"--for-ticker",el:t,data:{values:e},modeInterval:e.update_mode_seconds,short:!0})})),this._setStateHook&&this._setStateHook(t.values,i.values)},o.prototype._setNodesValue=function(e,t,i,o){var n,r;if(null!=t||o)for(n="function"==typeof i?i(t):t,r=0;r<e.length;r++)e[r].nodeValue=n},o.prototype._setTextsContent=function(e,t,i){var o,n;if(e&&e.length&&t)for(o="function"==typeof i?i(t):t,n=0;n<e.length;n++)e[n].textContent=o},o.prototype._setChangeFontColor=function(e,t,i,o){var n,r=c.PriceColorer.formatSign(t,{up:i,down:o});for(n=0;n<e.length;n++)e[n].style.color=r},o.prototype._setChangeDirection=function(e,t){var i,o;for(i=0;i<e.length;i++)o=e[i].classList,o.toggle(this._options.changeDirectionUpClass,t>0),o.toggle(this._options.changeDirectionDownClass,t<0)},o.prototype.setShortName=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this._setTextsContent(this._elements.shortName,e)},o.prototype._prepareSymbolDescription=function(e){function t(e){return e.charAt(0).toUpperCase()+e.substr(1)}function i(e){return e===e.toUpperCase()}function o(e){return 1!==e.length&&!~v.indexOf(e)}var n=this._getCache("symbol-description:"+e);return n||(n=i(e)?e.toLowerCase():e,n=n.replace(/[^\s]\S*/g,function(e){return o(e)?t(e):e}),n=t(n),this._setCache("symbol-description:"+e,n),n)},o.prototype._initHighlighters=function(){this._highlighters.last=new n(this._elements.last,this._options.growingBg,this._options.fallingBg,this._options.lastGrowingClass,this._options.lastFallingClass),this._highlighters.extHrsClose=new n(this._elements.extHrsClose,this._options.growingBg,this._options.fallingBg,this._options.lastGrowingClass,this._options.lastFallingClass)},o.prototype.disable=function(){this.enabled=!1,this.disconnect()},o.prototype.enable=function(){this.enabled=!0,this.connect()},o.prototype.setStateHook=function(e){null===e&&this._setStateHook?delete this._setStateHook:"function"==typeof e&&(this._setStateHook=e)},o.prototype._setCache=function(e,t){void 0===t||null===t?delete this._cache[e]:this._cache[e]=t},o.prototype._getCache=function(e){return this._cache&&this._cache[e]},e.exports.QuoteTicker=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(45)
;o.addTranslationFunctionToWindow(o.translationFunction),o.addTranslationFunctionToJQuery(o.translationFunction)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.Normal=0]="Normal",e[e.Arrow=1]="Arrow",e[e.Circle=2]="Circle"}(t.LineEnd||(t.LineEnd={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i(5),function(e){e.LINE="line",e.COLORER="colorer",e.BAR_COLORER="bar_colorer",e.BG_COLORER="bg_colorer",e.TEXT_COLORER="text_colorer",e.OHLC_COLORER="ohlc_colorer",e.SHAPES="shapes",e.CHARS="chars",e.ARROWS="arrows",e.DATAOFFSET="dataoffset",e.OHLC_OPEN="ohlc_open",e.OHLC_HIGH="ohlc_high",e.OHLC_LOW="ohlc_low",e.OHLC_CLOSE="ohlc_close"}(t.PlotTypes||(t.PlotTypes={})),function(e){e.BARS="ohlc_bars",e.CANDLES="ohlc_candles"}(t.OHLCType||(t.OHLCType={})),function(e){e[e.Line=0]="Line",e[e.Histogram=1]="Histogram",e[e.Cross=3]="Cross",e[e.Area=4]="Area",e[e.Columns=5]="Columns",e[e.Circles=6]="Circles",e[e.LineWithBreaks=7]="LineWithBreaks",e[e.AreaWithBreaks=8]="AreaWithBreaks",e[e.StepLine=9]="StepLine"}(t.PlotType||(t.PlotType={})),function(e){e[e.Right=0]="Right",e[e.Left=1]="Left",e[e.None=2]="None"}(t.ScaleType||(t.ScaleType={})),t.plotShapesData={shape_arrow_down:{guiName:$.t("Arrow Down"),id:"shape_arrow_down",paneRendererClass:"PaneRendererArrowDown",pineName:"shape.arrowdown"},shape_arrow_up:{guiName:$.t("Arrow Up"),id:"shape_arrow_up",paneRendererClass:"PaneRendererArrowUp",pineName:"shape.arrowup"},shape_circle:{guiName:$.t("Circle"),id:"shape_circle",paneRendererClass:"PaneRendererCircleShape",pineName:"shape.circle"},shape_cross:{guiName:$.t("Cross"),id:"shape_cross",paneRendererClass:"PaneRendererCrossShape",pineName:"shape.cross"},shape_diamond:{guiName:$.t("Diamond"),id:"shape_diamond",paneRendererClass:"PaneRendererDiamond",pineName:"shape.diamond"},shape_flag:{guiName:$.t("Flag"),id:"shape_flag",paneRendererClass:"PaneRendererFlagShape",pineName:"shape.flag"},shape_label_down:{guiName:$.t("Label Down"),id:"shape_label_down",paneRendererClass:"PaneRendererLabelDown",pineName:"shape.labeldown"},shape_label_up:{guiName:$.t("Label Up"),id:"shape_label_up",paneRendererClass:"PaneRendererLabelUp",pineName:"shape.labelup"},shape_square:{guiName:$.t("Square"),id:"shape_square",paneRendererClass:"PaneRendererSquare",pineName:"shape.square"},shape_triangle_down:{guiName:$.t("Triangle Down"),id:"shape_triangle_down",paneRendererClass:"PaneRendererTriangleApexDown",pineName:"shape.triangledown"},shape_triangle_up:{guiName:$.t("Triangle Up"),id:"shape_triangle_up",paneRendererClass:"PaneRendererTriangleApexUp",pineName:"shape.triangleup"},shape_xcross:{guiName:$.t("X Cross"),id:"shape_xcross",paneRendererClass:"PaneRendererXCross",pineName:"shape.xcross"}}},function(e,t,i){"use strict";var o,n,r=i(22),s=i(3);!function(e){e[e.NotBound=0]="NotBound",e[e.BoundToWidget=1]="BoundToWidget",e[e.BoundToModel=2]="BoundToModel"}(o||(o={})),n=function(){function e(){this._watchedSymbol=new r,this._seriesShortSymbol=new r,this._proSymbol=new r,
this._watchedInterval=new r,this._watchedIntraday=new r,this._watchedSupportedResolutions=new r,this._symbolNamesList=new r,this._chartWidgetBindingState=o.NotBound,this._activeChartWidget=null,this._watchedSymbolListenerBound=this._watchedSymbolListener.bind(this),this._watchedIntervalListenerBound=this._watchedIntervalListener.bind(this),this._onSymbolLinkBound=this._onSymbolLink.bind(this),this._searchCharts=null,this._selfEmit=!1,this._preventFeedBySymbol=!1}return Object.defineProperty(e.prototype,"symbol",{get:function(){return this._watchedSymbol},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"proSymbol",{get:function(){return this._proSymbol},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"symbolNamesList",{get:function(){return this._symbolNamesList},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"seriesShortSymbol",{get:function(){return this._seriesShortSymbol.readonly()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interval",{get:function(){return this._watchedInterval},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"intraday",{get:function(){return this._watchedIntraday.readonly()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"supportedResolutions",{get:function(){return this._watchedSupportedResolutions.readonly()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"preventFeedBySymbol",{get:function(){return this._preventFeedBySymbol},enumerable:!0,configurable:!0}),e.prototype.bindToChartWidget=function(e){var t,i;if(this.unbindFromChartWidget(),this._activeChartWidget=e,t=e.model())return void this._onChartModelCreated(t);e.modelCreated().subscribe(this,this._onChartModelCreated),this._chartWidgetBindingState=o.BoundToWidget,i=e.properties().mainSeriesProperties,this._watchedSymbol.setValue(i.symbol.value()),this._watchedInterval.setValue(i.interval.value())},e.prototype.unbindFromChartWidget=function(){switch(this._chartWidgetBindingState){case o.BoundToWidget:if(!this._activeChartWidget)throw Error("ChartWidget is undefined");this._activeChartWidget.modelCreated().unsubscribe(this,this._onChartModelCreated);break;case o.BoundToModel:this._symbolProperty().unsubscribe(this,this._onSymbolPropertyChange),this._watchedSymbol.unsubscribe(this._watchedSymbolListenerBound),this._mainSeries().onSymbolResolved().unsubscribe(this,this._updateSeriesSymbolInfo),this._mainSeries().onSymbolError().unsubscribe(this,this._updateSeriesSymbolInfo),this._intervalProperty().unsubscribe(this,this._onIntervalPropertyChange),this._watchedInterval.unsubscribe(this._watchedIntervalListenerBound),delete this._watchedSymbol.hook,delete this._watchedSymbol.writeLock}this._activeChartWidget=null,this._chartWidgetBindingState=o.NotBound},e.prototype.getChartWidget=function(){return this._activeChartWidget},e.prototype.bindToChartWidgetCollection=function(e){var t=this;this._chartWidgetCollection=e,this.unbindFromChartWidget(),e.activeChartWidget.subscribe(function(e){t.unbindFromChartWidget(),
t.bindToChartWidget(e)},{callWithLast:!0})},e.prototype.bindToSearchCharts=function(e){this.unbindFromSearchCharts(),this._searchCharts=e,e.onSearchBySymbol.subscribe(this,this._onSearchBySymbol),this._watchedSymbol.subscribe(this._onSymbolLinkBound)},e.prototype.unbindFromSearchCharts=function(){this._searchCharts&&(this._searchCharts.onSearchBySymbol.unsubscribe(this,this._onSearchBySymbol),this._watchedSymbol.unsubscribe(this._onSymbolLinkBound),this._searchCharts=null)},e.prototype.setPreventFeedBySymbol=function(e){this._preventFeedBySymbol=e},e.prototype._onSearchBySymbol=function(e){if(!e.resolved_symbol)throw Error("no resolved_symbol");this._selfEmit=!0,this._watchedSymbol.setValue(e.resolved_symbol),this._selfEmit=!1},e.prototype._onSymbolLink=function(e){if(!this._selfEmit){if(!this._searchCharts)throw Error("No search charts defined");this._preventFeedBySymbol||this._searchCharts.feedBySymbol(e)}},e.prototype._mainSeries=function(){if(!this._activeChartWidget)throw Error("ChartWidget is undefined");return this._activeChartWidget.model().mainSeries()},e.prototype._properties=function(){return this._mainSeries().properties()},e.prototype._symbolProperty=function(){return this._properties().symbol},e.prototype._intervalProperty=function(){return this._properties().interval},e.prototype._watchedSymbolListener=function(e){(s.enabled("same_data_requery")||this._symbolProperty().value()!==e)&&this._chartWidgetCollection.setSymbol(e)},e.prototype._onSymbolPropertyChange=function(){this._watchedSymbol.setValue(this._symbolProperty().value())},e.prototype._onSymbolResolved=function(e){var t=this._mainSeries().symbolInfo();t&&this._applyValuesFromSymbolInfo(t)},e.prototype._applyValuesFromSymbolInfo=function(e){var t=e.pro_name||s.enabled("trading_terminal")&&(e.full_name||e.name)||"";this._proSymbol.setValue(t),e.aliases&&this._symbolNamesList.setValue(e.aliases)},e.prototype._updateSeriesSymbolInfo=function(){this._seriesShortSymbol.setValue(this._properties().shortName.value());var e=this._mainSeries().symbolInfo();e?(this._applyValuesFromSymbolInfo(e),e.hasOwnProperty("supported_resolutions")?this._watchedSupportedResolutions.setValue(e.supported_resolutions):this._watchedSupportedResolutions.setValue(void 0),this._watchedIntraday.setValue(!!e.has_intraday)):(this._watchedIntraday.deleteValue(),this._proSymbol.deleteValue())},e.prototype._watchedIntervalListener=function(e){(s.enabled("same_data_requery")||this._intervalProperty().value()!==e)&&this._chartWidgetCollection.setResolution(e)},e.prototype._onIntervalPropertyChange=function(){this._watchedInterval.setValue(this._intervalProperty().value())},e.prototype._onChartModelCreated=function(e){var t,i,n;if(!this._activeChartWidget)throw Error("ChartWidget is undefined");this._chartWidgetBindingState=o.BoundToModel,this._activeChartWidget.modelCreated().unsubscribe(this,this._onChartModelCreated),t=this._symbolProperty(),t.subscribe(this,this._onSymbolPropertyChange),this._watchedSymbol.setValue(t.value()),
this._watchedSymbol.subscribe(this._watchedSymbolListenerBound),i=this._mainSeries(),i.onSymbolResolved().subscribe(this,this._onSymbolResolved),this._watchedSymbol.hook=function(e){return i.symbolSameAsCurrent(e)&&(e=i.symbol()),e},i.onSymbolResolved().subscribe(this,this._updateSeriesSymbolInfo),i.onSymbolError().subscribe(this,this._updateSeriesSymbolInfo),i.onSymbolNotPermitted().subscribe(this,this._updateSeriesSymbolInfo),i.onSymbolGroupNotPermitted().subscribe(this,this._updateSeriesSymbolInfo),i.onExtendedHoursNotPermitted().subscribe(this,this._updateSeriesSymbolInfo),this._updateSeriesSymbolInfo(),n=this._intervalProperty(),n.subscribe(this,this._onIntervalPropertyChange),this._watchedInterval.setValue(n.value()),this._watchedInterval.subscribe(this._watchedIntervalListenerBound),this._activeChartWidget.readOnly()&&(this._watchedSymbol.writeLock=!0)},e}(),window.TradingView=window.TradingView||{},window.TradingView.Linking=new n,e.exports=window.TradingView.Linking},function(e,t,i){"use strict";function o(e){var t,i,o,n,r,s;if("Asia/Bahrain"===e&&(e="Asia/Kuwait"),this._name=e,t=u[e],t||(t={time:[],offset:[]},this._invalid=!0),t.time.length!==t.offset.length&&(t={time:[],offset:[]},this._invalid=!0),!t.time_utc){for(i=t.time,o=t.offset,n=i.length,r=Array(n),s=0;s<n;s++)i[s]*=1e3,o[s]*=1e3,r[s]=i[s]-o[s];t.time_utc=r}this.tz=t}function n(e,t){var i,o,n,s=e.length;if(0===s)return-1;if(isNaN(t))throw Error("Key is NaN");for(i=0,o=s-1,n=r((i+o)/2);;){if(e[n]>t){if((o=n-1)<i)return n}else if(i=n+1,o<i)return n<s-1?n+1:-1;n=r((i+o)/2)}}var r,s,a,l,c,h,u=i(221).tzData;o.prototype.offset_utc=function(e){return o._offset(this.tz.time_utc,this.tz.offset,e)},o.prototype.offset_loc=function(e){return o._offset(this.tz.time,this.tz.offset,e)},o.prototype.is_valid=function(){return!this._invalid},o._offset=function(e,t,i){var o=n(e,i);return-1===o?0:t[o]},r=function(e){return 0|e},s=function(e){return 60*e*1e3},a=function(e){return 1e3*e},l=function(e,t){return r((r(e/1e3)-r(t/1e3))/60)},c=function(e,t){return r(r(e/1e3)-r(t/1e3))},h={SUNDAY:1,MONDAY:2,TUESDAY:3,WEDNESDAY:4,THURSDAY:5,FRIDAY:6,SATURDAY:7,JANUARY:0,DECEMBER:11,YEAR:1,MONTH:2,WEEK_OF_YEAR:3,DAY_OF_MONTH:5,DAY_OF_YEAR:6,DAY_OF_WEEK:7,HOUR_OF_DAY:11,MINUTE:12,SECOND:13,minutesPerDay:1440,secondsPerDay:s(1440),get_minutes_from_hhmm:function(e){return-1!==e.indexOf(":")&&(e=e.split(":").join("")),e%100+60*r(e/100)},get_year:function(e){return e.getUTCFullYear()},get_month:function(e){return e.getUTCMonth()},get_hours:function(e){return e.getUTCHours()},get_minutes:function(e){return e.getUTCMinutes()},get_seconds:function(e){return e.getUTCSeconds()},get_day_of_month:function(e){return e.getUTCDate()},get_day_of_week:function(e){return e.getUTCDay()+1},get_day_of_year:function(e){var t=Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0);return r((e.getTime()-t)/h.secondsPerDay)+1},get_week_of_year:function(e){var t=Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0),i=h.clone(e);return h.set_hms(i,0,0,0,0),i.setUTCDate(i.getUTCDate()+4-(i.getUTCDay()||7)),
r(((i.getTime()-t)/h.secondsPerDay+1)/7)},get_minutes_from_midnight:function(e){return 60*h.get_hours(e)+h.get_minutes(e)},set_hms:function(e,t,i,o,n){e.setUTCHours(t),e.setUTCMinutes(i),e.setUTCSeconds(o),e.setUTCMilliseconds(n)},add_days_considering_dst:function(e,t,i){var o,n=e.offset_utc(t),r=this.clone(t);return this.add_date(r,i),o=e.offset_utc(r),r.setTime(r.getTime()+n-o),r},add_date:function(e,t){e.setTime(e.getTime()+t*h.secondsPerDay)},clone:function(e){return new Date(e.getTime())},get_days_per_year:function(e){var t=e.getUTCFullYear();return this.days_per_year(t)},days_per_year:function(e){return e%4!=0||e%100==0&&e%400!=0?365:366},get_part:function(e,t){switch(t){case h.YEAR:return h.get_year(e);case h.MONTH:return h.get_month(e);case h.DAY_OF_MONTH:return h.get_day_of_month(e);case h.WEEK_OF_YEAR:return h.get_week_of_year(e);case h.DAY_OF_WEEK:return h.get_day_of_week(e);case h.HOUR_OF_DAY:return h.get_hours(e);case h.MINUTE:return h.get_minutes(e);case h.DAY_OF_YEAR:return h.get_day_of_year(e);case h.SECOND:return h.get_seconds(e);default:return e.getTime()}},time_minutes:s,time_seconds:a,time_minutes_diff:l,time_seconds_diff:c,utc_to_cal:function(e,t){var i=e.offset_utc(t);return new Date(t+i)},get_cal:function(e,t,i,o){var n=new Date(Date.UTC(t,i,o)),r=e.offset_utc(+n);return new Date(n.valueOf()-r)},get_cal_utc:function(e,t,i){return new Date(Date.UTC(e,t,i))},cal_to_utc:function(e,t){var i=t.getTime();return i-e.offset_loc(i)},get_timezone:function(e){return new o(e)},shift_day:function(e,t){var i=e-1;return i+=t,i>6?i%=7:i<0&&(i=(7+i%7)%7),i+1}},e.exports=h},function(e,t,i){"use strict";(function(t){var o=i(208).futuresRoots,n=function(){function e(e,t){var i=function(){};return i.prototype=t.prototype,e.prototype=new i,e}function i(e){return e.replace(/[\^\$\(\)\[\]\{\}\*\+\?\|\\]/g,"\\$&")}function n(){}function r(e){this.value=e}function s(){}function a(){}function l(){}function c(){}function h(){}function u(){}function d(){}function p(){}function f(e){this.value=e}function _(e){this.value=e}function m(e){this.value=e}function g(){f.apply(this,arguments)}function v(){_.apply(this,arguments)}function y(e,t){var i,o,n,s,a,l,c,h,u=[];e:for(;i=$.exec(e);){for(o=H.length;o--;)if(i[o+1]){H[o].ctor&&(n=new H[o].ctor(i[o+1]),n._offset=i.index,u.push(n));continue e}s=new m(i[0]),s._offset=i.index,u.push(s)}if(t&&t.recover)for(o=u.length;o--;)l=u[o],l instanceof _||l instanceof f?(void 0!==a&&(c=new f(""),h=u.splice(o,a-o+1,c),c.value=h.map(function(e){return e.value}).join("")),a=o):l instanceof r||(a=void 0);return u}function b(e){var i,o,n,c,h,u,d,p,g,v;if(t.enabled("charting_library_base"))return{currentState:"var"};for(i="init",o="var",n="operator",c=i,h={warnings:[],errors:[],isEmpty:!0},u=[],d=0;d<e.length;d++)if(!((p=e[d])instanceof r))if(delete h.isEmpty,p.isIncomplete&&(g={status:"incomplete",reason:"incomplete_token",offset:p._offset,token:p},p.incompleteSuggest&&(g.recover={append:p.incompleteSuggest()}),h.warnings.push(g),
d!==e.length-1))g.status="error";else if(p instanceof f||p instanceof _){if(c===o){h.errors.push({status:"error",reason:"unexpected_token",offset:p._offset,token:p});continue}c=o}else if(p instanceof l){if(c!==o){h.errors.push({status:"error",reason:"unexpected_token",offset:p._offset,token:p});continue}c=n}else if(p instanceof s){if(c===o){h.errors.push({status:"error",reason:"unexpected_token",offset:p._offset,token:p});continue}u.push(p),c=i}else if(p instanceof a){if(c!==o){h.errors.push({status:"error",reason:"unexpected_token",offset:p._offset,token:p});continue}v=u.pop(),v||h.errors.push({status:"error",reason:"unbalanced_brace",offset:p._offset,token:p,recover:{prepend:new s}}),c=o}else p instanceof m&&h.errors.push({status:"error",reason:"unparsed_entity",offset:p._offset,token:p});for(h.braceBalance=u.length,c!==o&&h.warnings.push({status:"incomplete"}),v=null;u.length;)p=u.pop(),g={status:"incomplete",reason:"unbalanced_brace",offset:p._offset,token:p},c===o&&(g.recover={append:new a}),h.warnings.push(g);return h.currentState=c,0===h.warnings.length&&delete h.warnings,0===h.errors.length&&delete h.errors,h}function S(e){var t,i=[];for(t=0;t<e.length;t++)e[t]instanceof r||i.push(e[t]);return i}function w(e){var t,i,o,n,r,c,h;for(e=S(e),t=[],i=[],n=0;n<e.length;n++)r=e[n],r instanceof l?i.length&&i[i.length-1].minPrecedence>r.precedence&&(i[i.length-1].minPrecedence=r.precedence):r instanceof s?i.push(o={minPrecedence:1/0,openBraceIndex:n}):r instanceof a&&(o=i.pop(),c=e[o.openBraceIndex-1],(h=e[n+1])instanceof l&&!(h.precedence<=o.minPrecedence)||!(!(c instanceof l)||c.precedence<o.minPrecedence||c.precedence===o.minPrecedence&&c.commutative)||(t.unshift(o.openBraceIndex),t.push(n),i.length&&i[i.length-1].minPrecedence>o.minPrecedence&&(i[i.length-1].minPrecedence=o.minPrecedence)));for(n=t.length;n--;)e.splice(t[n],1);return e}function T(e){for(var t=0;t<e.length;t++)e[t].parse&&e[t].parse();return e}function P(e){var t=C(e);return w(t?t:[new _("1"),new d,new s].concat(e).concat(new a))}function C(e){var t,i,o,n=0,c=1,h=2,u=3,p=n,f=0;for(i=0;i<e.length;i++)if(!((o=e[i])instanceof r))switch(p){case n:if(!(o instanceof _&&1==+o.value))return!1;p=c;break;case c:if(!(p===c&&o instanceof d))return!1;p=h,t=i+1;break;case h:if(o instanceof s)p=u,f=1;else if(o instanceof l)return!1;break;case u:o instanceof s?f++:o instanceof a&&--f<=0&&(p=h)}return e.slice(t)}function x(e){return new f(e).ticker()}function E(e){if("string"!=typeof e)throw new TypeError("expression must be a string");return e=y(e),e.filter(function(e){return e instanceof f}).map(function(e){return e.exchange()}).filter(function(e){return e})}function L(e){return e=E(e),1!==e.length?null:e[0]}function I(e,t){return e=E(e),e.some(function(e){return!!~t.indexOf((e||"").toUpperCase())})}function A(e){return I(e,["BATS"])}function k(e){return(e=L(e))&&-1!==e.toUpperCase().indexOf("_EOD")}function M(e){return I(e,["CHXEUR"])}function O(e){return I(e,["CHXJPY"])}function D(e){return I(e,pro.getProductsByType(pro.PRODUCT_TYPES.exchange).map(function(e){
return e.exchange.toUpperCase()+"_DLY"}))}function V(e,t){return!!(e=L(e))&&e.substr(0,t.length)===t}function R(e){if("string"!=typeof e)throw new TypeError("expression must be a string");var t=w(S(y(e)));return t.forEach(function(e){e instanceof f&&e.exchange(null)}),N(t)}function B(e){if("string"!=typeof e)throw new TypeError("expression must be a string");return N(w(S(y(e))))}function N(e){return e.join("")}var z,F,$,H=[{pattern:"(",ctor:s},{pattern:")",ctor:a},{pattern:"+",ctor:c},{pattern:"-",ctor:h},{pattern:"*",ctor:u},{pattern:"/",ctor:d},{pattern:"^",ctor:p},{pattern:/\d+(?:\.\d*|(?![a-zA-Z0-9_!:\.&]))|\.\d+/,ctor:_},{pattern:/\./,ctor:v},{pattern:t.enabled("charting_library_base")?/[a-zA-Z0-9_\u0370-\u1FFF_\u2E80-\uFFFF^][a-zA-Z0-9_\u0020\u0370-\u1FFF_\u2E80-\uFFFF_!:\.&]*|'.+?'/:/[a-zA-Z0-9_\u0370-\u1FFF_\u2E80-\uFFFF][a-zA-Z0-9_\u0020\u0370-\u1FFF_\u2E80-\uFFFF_!|:\.&]*|'.+?'/,ctor:f},{pattern:/'[^']*/,ctor:g},{pattern:/[\0-\x20\s]+/,ctor:r}];return n.prototype.toString=function(){return this.value},e(r,n),e(s,n),s.prototype.value="(",e(a,n),a.prototype.value=")",e(l,n),e(c,l),c.prototype.value="+",c.prototype.precedence=0,c.prototype.commutative=!0,e(h,l),h.prototype.value="-",h.prototype.precedence=0,h.prototype.commutative=!1,e(u,l),u.prototype.value="*",u.prototype.precedence=1,u.prototype.commutative=!0,e(d,l),d.prototype.value="/",d.prototype.precedence=1,d.prototype.commutative=!1,e(p,l),p.prototype.value="^",p.prototype.precedence=2,p.prototype.commutative=!1,z=/^'?(?:([A-Z0-9_]+):)?(.*?)'?$/i,F=/[\+\-\/\*]/,e(f,n),f.prototype.toString=function(){if(this.hasOwnProperty("_ticker")){var e=F.test(this._ticker)?"'":"";return e+(this._exchange?this._exchange+":":"")+this._ticker+e}return this.value},f.prototype.parse=function(){var e=z.exec(this.value);e[1]&&(this._exchange=e[1]),this._ticker=e[2]},f.prototype.parseAsFutures=function(){var e,t,i;if(o)for(this.hasOwnProperty("_ticker")||this.parse(),e=function(e){return o.some(function(t){return t.t===e})},t=2;t>=1;--t)if(i=this._ticker.slice(0,t),e(i)){this._root=i,this._contract=this._ticker.slice(t);break}},f.prototype.exchange=function(e){if(this.hasOwnProperty("_ticker")||this.parse(),!(arguments.length>0))return this._exchange;null===e||void 0===e?delete this._exchange:this._exchange=e+""},f.prototype.ticker=function(e){if(this.hasOwnProperty("_ticker")||this.parse(),!(arguments.length>0))return this._ticker;null===e||void 0===e?delete this._ticker:this._ticker=e+"",delete this._root,delete this._contract},f.prototype.root=function(e){if(this.hasOwnProperty("_root")||this.parseAsFutures(),!(arguments.length>0))return this._root;null===e||void 0===e?delete this._root:(this._root=e+"",this._root&&(this._ticker=this._root+(this._contract||"")))},f.prototype.contract=function(e){if(this.hasOwnProperty("_contract")||this.parseAsFutures(),!(arguments.length>0))return this._root;null===e||void 0===e?delete this._contract:(this._contract=e+"",this._root&&(this._ticker=this._root+this._contract))},e(_,n),_.prototype.toString=function(){
return this.hasOwnProperty("_normalizedValue")?this._normalizedValue:this.value},_.prototype.parse=function(){this._normalizedValue=this.value.replace(/^0+|\.0*$/g,"").replace(/(\.\d*?)0+$/,"$1").replace(/^(\.|$)/,"0$1")},m.prototype.toString=function(){return this.value},e(g,f),g.prototype.isIncomplete=!0,g.prototype.incompleteSuggest=function(){if("'"!==this.value)return"'"},e(v,_),v.prototype.isIncomplete=!0,$=RegExp(H.map(function(e){return"("+("string"==typeof e.pattern?i(e.pattern):e.pattern.source)+")"}).concat(".").join("|"),"g"),{tokenize:y,validate:b,factorOutBraces:w,normalizeTokens:T,flip:P,hasBatsSymbols:A,hasEodSymbols:k,hasChxeurSymbols:M,hasChxjpySymbols:O,hasFreeDelaySymbols:D,getExchange:L,isExchange:V,SymbolToken:f,IncompleteSymbolToken:g,NumberToken:_,BinaryOperatorToken:l,OpenBraceToken:s,CloseBraceToken:a,ticker:x,shortName:R,normalize:B}}();e.exports=n}).call(t,i(3))},function(e,t,i){"use strict";(function(e){function t(e){if(this._isAuthTokenLoaded=!1,this._authTokenDfd=null,this._notificationHandlers={},this._sessions={},this._dataHandleModule=null,this.studyCounter=0,this.childStudyCounter=0,this._sendingQueuedRequestsCount=0,this._pendingMessagesQueue=[],this._wsBackendConnection=e,this._wsBackendConnection.onReconnect(this._bindSocketEvents.bind(this)),this._wsBackendConnection.setLogger(c,l.getLogHistory),this._wsBackendConnection.setTelemetry(C),this._bindSocketEvents(),this._turnaroundPrefix=s(),this._turnaroundIndex=0,null===E){var t=6e3;c.logInfo("Delayed loading protobuf handler after "+t+"ms"),setTimeout(this._loadProtobufHandler.bind(this),t)}else c.logInfo("Protobuf handler is loaded already")}var o,n,r,s,a,l,c,h,u,d,p,f,_,m,g=i(137).WSMode,v=!1,y=!1,b=i(117),S=b.ChartApiInterface,w=b.HandlerInfo,T=i(138),P=i(50),C=i(57).Telemetry,x=i(140),E=null,L=i(3),I=i(116);i(141),o=i(27).ProductFeatures,n=i(10).requireFullInterfaceImplementation,r=i(25).isFeatureEnabled,s=i(17).randomHash,a=i(135).ResponseMethods,l=i(0),c=l.getLogger("ChartApi.Core",{color:"#706"}),h=l.getLogger("ChartApi.ChartSession",{color:"#706"}),u=l.getLogger("ChartApi.ChartSession",{highRate:!0,maxCount:100,color:"#706"}),d=l.getLogger("ChartApi.ChartSession",{maxCount:0,color:"#706"}),p=l.getLogger("ChartApi.ChartSession",{maxCount:50,color:"#706"}),f=l.getLogger("ChartApi.QuoteSession",{maxCount:50,color:"#660"}),_=l.getLogger("ChartApi.QuoteSession",{highRate:!0,maxCount:10,color:"#660"}),m=i(143),t.prototype.defaultWatchlistSymbols=function(){var e=m[window.locale];return void 0===e&&(e=m.default),e},t.prototype.availableTimeFrames=function(e,t){var o=i(32),n={};return n[o.STATUS_DELAYED]=[{text:window.t("ytd"),value:"ytd",targetResolution:"D"},{text:window.t("1y"),value:"12m",targetResolution:"D",description:window.t("%d year",{plural:"%d years",count:1}).replace("%d",1)},{text:window.t("5y"),value:"60m",targetResolution:"W",description:window.t("%d year",{plural:"%d years",count:5}).replace("%d",5)},{text:window.t("All"),value:"all",targetResolution:"M"}],n[o.STATUS_READY]=[{text:window.t("1d"),value:"1d",
targetResolution:"1",description:window.t("%d day",{plural:"%d days",count:1}).replace("%d",1)},{text:window.t("5d"),value:"5d",targetResolution:"5",description:window.t("%d day",{plural:"%d days",count:5}).replace("%d",5)},{text:window.t("1m"),value:"1m",targetResolution:"30",description:window.t("%d month",{plural:"%d months",count:1}).replace("%d",1)},{text:window.t("3m"),value:"3m",targetResolution:"60",description:window.t("%d month",{plural:"%d months",count:3}).replace("%d",3)},{text:window.t("6m"),value:"6m",targetResolution:"120",description:window.t("%d month",{plural:"%d months",count:6}).replace("%d",6)},{text:window.t("YTD"),value:"ytd",targetResolution:"D"},{text:window.t("1y"),value:"12m",targetResolution:"D",description:window.t("%d year",{plural:"%d years",count:1}).replace("%d",1)},{text:window.t("5y"),value:"60m",targetResolution:"W",description:window.t("%d year",{plural:"%d years",count:5}).replace("%d",5)},{text:window.t("All"),value:"all",targetResolution:"M"}],t===o.STATUS_DELAYED_STREAMING&&(t=o.STATUS_READY),n[t]},t.prototype.defaultResolutions=function(){return{1:1,3:1,5:1,15:1,30:1,45:1,60:1,120:1,180:1,240:1,D:1,W:1,M:1}},t.prototype.supportedSymbolsTypes=function(){var e,t=[{name:window.t("All"),value:""},{name:window.t("Stock"),value:"stock"},{name:window.t("Futures"),value:"futures"},{name:window.t("Forex"),value:"forex"},{name:window.t("CFD"),value:"cfd"},{name:window.t("Cryptocurrency"),value:"bitcoin"},{name:window.t("Index"),value:"index"},{name:window.t("Economy"),value:"economic"}],i={name:window.t("Quandl"),value:I.types.QUANDL};return t.push(i),"bovespa"===TradingView.widgetCustomer&&(t=t.filter(function(e){return-1!==["","stock","futures","index"].indexOf(e.value)})),"cme"===TradingView.widgetCustomer&&~(e=t.indexOf(i))&&t.splice(e,1),t},t.prototype.supportedExchangesList=function(){return[{value:"",name:"All Exchanges",desc:window.t("All Exchanges"),flag:""},{value:"796",name:"796",desc:"796",flag:"bitcoin"},{value:"COINFLOOR",name:"COINFLOOR",desc:"COINFLOOR",flag:"bitcoin"},{value:"DFM",name:"DFM",desc:window.t("DFM - Dubai Financial Market"),flag:"ae"},{value:"LSE",name:"LSE",desc:window.t("LSE - London Stock Exchange (UK Companies) "),flag:"uk"},{value:"LSIN",name:"LSIN",desc:window.t("LSIN - London Stock Exchange (International Companies)"),flag:"uk"},{value:"AMEX",name:"NYSE ARCA & MKT",desc:window.t("NYSE ARCA & MKT"),flag:"usa"},{value:"EUREX",name:"EUREX",desc:window.t("EUREX Futures"),flag:"europe"},{value:"MGEX",name:"MGEX",desc:"MGEX - Futures",flag:"usa",hideInSymbolSearch:!0},{value:"MOEX",name:"MOEX",desc:window.t("MOEX - Moscow Exchange"),flag:"russia"},{value:"MYX",name:"MYX",desc:window.t("MYX - Bursa Malaysia Berhad"),flag:"malaysia"},{value:"BITSTAMP",name:"BITSTAMP",desc:"BITSTAMP",flag:"bitcoin"},{value:"FX",name:"FXCM",desc:window.t("FXCM - Forex"),flag:"forex"},{value:"MERCADO",name:"MERCADO",desc:"MERCADO",flag:"bitcoin"},{value:"BTCE",name:"BTC-e",desc:"BTC-E",flag:"bitcoin"},{value:"GOCIO",name:"GOCIO",desc:"GOCIO",flag:"bitcoin"},{value:"NASDAQ",
name:"NASDAQ",desc:window.t("NASDAQ - NASDAQ Stock Market"),flag:"usa"},{value:"BTCYOU",name:"BTCYOU",desc:"BTCYOU",flag:"bitcoin"},{value:"HITBTC",name:"HITBTC",desc:"HITBTC",flag:"bitcoin"},{value:"NYMEX",name:"NYMEX",desc:window.t("NYMEX Futures (E-mini included)"),flag:"usa"},{value:"BSE",name:"BSE",desc:window.t("BSE - Bombay Stock Exchange"),flag:"india"},{value:"NYMEX_MINI",name:"NYMEX E-mini",desc:window.t("NYMEX E-mini Futures"),flag:"usa"},{value:"COMEX",name:"COMEX",desc:window.t("COMEX Futures (E-mini included)"),flag:"usa"},{value:"ICEUSA",name:"ICEUSA",desc:window.t("ICEUSA Futures"),flag:"usa"},{value:"NYSE",name:"NYSE",desc:window.t("NYSE - New York Stock Exchange"),flag:"usa"},{value:"COMEX_MINI",name:"COMEX E-mini",desc:window.t("COMEX E-mini Futures"),flag:"usa"},{value:"ICEEUR",name:"ICEEUR",desc:window.t("ICEEUR Futures"),flag:"europe"},{value:"CBOE",name:"CBOE",desc:window.t("CBOE - Chicago Board Options Exchange"),flag:"usa"},{value:"NSE",name:"NSE",desc:window.t("NSE - National Stock Exchange of India"),flag:"india"},{value:"CBOT",name:"CBOT",desc:window.t("CBOT Futures (E-mini included)"),flag:"usa"},{value:"KCBT",name:"KCBT",desc:"KCBT Futures",flag:"usa",hideInSymbolSearch:!0},{value:"OKCOIN",name:"OKCOIN",desc:"OKCOIN",flag:"bitcoin"},{value:"CBOT_MINI",name:"CBOT E-mini",desc:window.t("CBOT E-mini Futures"),flag:"usa"},{value:"KRAKEN",name:"KRAKEN",desc:"KRAKEN",flag:"bitcoin"},{value:"OTC",name:"OTC",desc:window.t("OTC - OTC Markets"),flag:"usa"},{value:"CME",name:"CME",desc:window.t("CME GLOBEX Futures (E-mini included)"),flag:"usa"},{value:"TSXV",name:"TSXV",desc:window.t("TSXV - Toronto Stock Venture Exchange"),flag:"canada"},{value:"TSX",name:"TSX",desc:window.t("TSX - Toronto Stock Exchange"),flag:"canada"},{value:"CME_MINI",name:"CME E-mini",desc:window.t("CME GLOBEX E-mini Futures"),flag:"usa"},{value:"DJ",name:"DJ",desc:window.t("DJ - Dow Jones Indexes"),flag:"usa",hideInSymbolSearch:!0},{value:"SP",name:"SP",desc:window.t("SP - S&P Indexes"),flag:"usa",hideInSymbolSearch:!0},{value:"BTCCHINA",name:"BTCCHINA",desc:"BTCCHINA",flag:"bitcoin"},{value:"HUOBI",name:"HUOBI",desc:"HUOBI",flag:"bitcoin"},{value:"KORBIT",name:"KORBIT",desc:"KORBIT",flag:"bitcoin"},{value:"THEROCKTRADING",name:"THEROCKTRADING",desc:"THEROCKTRADING",flag:"bitcoin"},{value:"ANX",name:"ANX",desc:"ANX",flag:"bitcoin"},{value:"MEXBT",name:"MEXBT",desc:"MEXBT",flag:"bitcoin"},{value:"ITBIT",name:"ITBIT",desc:"ITBIT",flag:"bitcoin"},{value:"FOXBIT",name:"FOXBIT",desc:"FOXBIT",flag:"bitcoin"},{value:"XCOIN",name:"XCOIN",desc:"XCOIN",flag:"bitcoin"},{value:"BITVC",name:"BITVC",desc:"BITVC",flag:"bitcoin"},{value:"BITYES",name:"BITYES",desc:"BITYES",flag:"bitcoin"},{value:"BITFLYER",name:"BITFLYER",desc:"BITFLYER",flag:"bitcoin"},{value:"BXTH",name:"BXTH",desc:"BXTH",flag:"bitcoin"},{value:"BITMEX",name:"BITMEX",desc:"BITMEX",flag:"bitcoin"},{value:"FOREXCOM",name:"FOREXCOM",desc:"FOREX.com",flag:"forex"},{value:"FX_IDC",name:"IDC",desc:window.t("IDC - Forex"),flag:"forex"},{value:"CEXIO",name:"CEX.IO",
desc:"CEX.IO",flag:"bitcoin"},{value:"BITSO",name:"BITSO",desc:"BITSO",flag:"bitcoin"},{value:"BITFINEX",name:"BITFINEX",desc:"BITFINEX",flag:"bitcoin"},{value:"MTGOX",name:"MTGOX",desc:"MTGOX - Bitcoin",flag:"bitcoin"},{value:"POLONIEX",name:"POLONIEX",desc:"POLONIEX - Bitcoin",flag:"bitcoin"},{value:"BITTREX",name:"BITTREX",desc:"BITTREX - Bitcoin",flag:"bitcoin"},{value:"WEX",name:"WEX",desc:"WEX - Bitcoin",flag:"bitcoin"},{value:"BINANCE",name:"BINANCE",desc:"BINANCE - Bitcoin",flag:"bitcoin"},{value:"BCBA",name:"BCBA",desc:window.t("BCBA - Buenos Aires Stock Exchange"),flag:"argentina"},{value:"BMFBOVESPA",name:"BM&F",desc:window.t("BM&F Bovespa"),flag:"brasil"},{value:"BMV",name:"BMV",desc:window.t("BMV - Mexico Stock Exchange"),flag:"mexico"},{value:"BVL",name:"BVL",desc:window.t("BVL - Bolsa de Valores de Lima"),flag:"peru"},{value:"BCS",name:"SSE",desc:window.t("SSE - Santiago Stock Exchange"),flag:"chile"},{value:"BVC",name:"BVC",desc:window.t("BVC - Bolsa de Valores de Colombia"),flag:"colombia"},{value:"NAG",name:"NAG",desc:window.t("NAG - Nagoya Stock Exchange"),flag:"japan"},{value:"TSE",name:"TSE",desc:window.t("TSE - Tokyo Stock Exchange"),flag:"japan"},{value:"TFX",name:"TFX",desc:window.t("TFX - Tokyo Financial Exchange"),flag:"japan"},{value:"TOCOM",name:"TOCOM",desc:window.t("TOCOM - Tokyo Commodity Exchange"),flag:"japan"},{value:"SGX",name:"SGX",desc:window.t("SGX - Singapore Stock Exchange"),flag:"singapore"},{value:"SSE",name:"SSE",desc:window.t("SSE - Sapporo Securities Exchange"),flag:"japan"},{value:"FSE",name:"FSE",desc:window.t("FSE - Fukuoka Stock Exchange"),flag:"japan"},{value:"TWSE",name:"TWSE",desc:window.t("TWSE - Taiwan Stock Exchange"),flag:"taiwan"},{value:"BAHRAIN",name:"BAHRAIN",desc:window.t("BAHRAIN - Bahrain Stock Exchange"),flag:"bahrain"},{value:"BELEX",name:"BELEX",desc:window.t("BELEX - Belgrade Stock Exchange"),flag:"serbia"},{value:"EGX",name:"EGX",desc:window.t("EGX - Egyptian Exchange"),flag:"egypt"},{value:"TADAWUL",name:"TADAWUL",desc:window.t("Tadawul - Saudi Stock Exchange"),flag:"saudi_arabia"},{value:"OANDA",name:"OANDA",desc:window.t("OANDA - Forex"),flag:"forex"},{value:"EURONEXT",name:"Euronext",desc:window.t("Euronext - European Stock Exchange"),flag:"europe"},{value:"OMX",name:"OMX",desc:window.t("OMX - Nasdaq Nordic"),flag:"sweden"},{value:"FWB",name:"FWB",desc:window.t("FWB - Frankfurt Stock Exchange"),flag:"germany"},{value:"FRA",name:"FRA",desc:window.t("FRA - Frankfurt Stock Exchange"),flag:"germany",hideInSymbolSearch:!0},{value:"SWB",name:"SWB",desc:window.t("SWB - Stuttgart Stock Exchange"),flag:"germany"},{value:"XETR",name:"XETR",desc:window.t("XETR - Xetra"),flag:"germany"},{value:"BME",name:"BME",desc:window.t("BME - Madrid Stock Exchange"),flag:"spain"},{value:"GPW",name:"GPW",desc:window.t("GPW - Warsaw Stock Exchange"),flag:"poland"},{value:"DUB",name:"DUB",desc:window.t("DUB - Irish Stock Exchange"),flag:"ireland"},{value:"MIL",name:"MIL",desc:window.t("MIL - Milan Stock Exchange"),flag:"italy"},{value:"VIE",name:"VIE",
desc:window.t("WB - Vienna Stock Exchange"),flag:"austria"},{value:"OSL",name:"OSL",desc:window.t("OSL - Oslo Stock Exchange"),flag:"norway"},{value:"IST",name:"IST",desc:window.t("IST - Istanbul Stock Exchange"),flag:"turkey",hideInSymbolSearch:!0},{value:"BIST",name:"BIST",desc:window.t("BIST - Borsa Istanbul"),flag:"turkey"},{value:"TASE",name:"TASE",desc:window.t("TASE - Tel Aviv Stock Exchange"),flag:"israel"},{value:"SWX",name:"SWX",desc:window.t("SWX - Swiss Stock Exchange"),flag:"switzerland",hideInSymbolSearch:!0},{value:"SIX",name:"SIX",desc:window.t("SIX - Swiss Stock Exchange"),flag:"switzerland"},{value:"ASX",name:"ASX",desc:window.t("ASX - Australian Securities Exchange"),flag:"australia"},{value:"NZX",name:"NZX",desc:window.t("NZX - New Zealand Stock Exchange"),flag:"new_zealand"},{value:"SZSE",name:"SZSE",desc:window.t("SZSE - Shenzhen Stock Exchange"),flag:"china"},{value:"HKEX",name:"HKEX",desc:window.t("HKEX - Hong Kong Stock Exchange"),flag:"hong_kong"},{value:"NSENG",name:"NSENG",desc:$.t("NSE - Nigerian Stock Exchange"),flag:"nigeria"},{value:"COINBASE",name:"COINBASE",desc:"COINBASE",flag:"bitcoin"},{value:"USI",name:"USI",desc:"USI",flag:"usa",hideInSymbolSearch:!0}]},t.prototype.futuresRegex=function(){return/^(.+?)([12]!|\w\d{4})?$/},t.prototype.enableLowQualityMode=function(){return this._sendRequest("set_data_quality",[])},t.prototype.setLoadNew=function(e){this._loadNewBars=!!e},t.prototype.quoteCreateSession=function(e){return this._sendRequest("quote_create_session",[e])},t.prototype.quoteDeleteSession=function(e){return this._sendRequest("quote_delete_session",[e])},t.prototype.quoteSetFields=function(e,t){return this._sendRequest("quote_set_fields",[e,t])},t.prototype.quoteAddSymbols=function(e,t){return this._sendRequest("quote_add_symbols",[e,t])},t.prototype.quoteRemoveSymbols=function(e,t){return this._sendRequest("quote_remove_symbols",[e,t])},t.prototype.quoteFastSymbols=function(e,t){return this._sendRequest("quote_fast_symbols",[e,t])},t.prototype.quoteHibernateAll=function(e){return this._sendRequest("quote_hibernate_all",[e])},t.prototype.depthCreateSession=function(e,t,i){return this._sendRequest("depth_create_session",[e,t,i])},t.prototype.depthDeleteSession=function(e){return this._sendRequest("depth_delete_session",[e])},t.prototype.depthSetSymbol=function(e,t){return this._sendRequest("depth_set_symbol",[e,t])},t.prototype.depthClearSymbol=function(e){return this._sendRequest("depth_clear_symbol",[e])},t.prototype.depthSetScale=function(e,t){return this._sendRequest("depth_set_scale",[e,t])},t.prototype.chartCreateSession=function(e,t){return this._sendRequest("chart_create_session",[e,t])},t.prototype.chartDeleteSession=function(e){return this._sendRequest("chart_delete_session",[e])},t.prototype.createSession=function(e,t){this._sessions[e]=t,this._notificationHandlers[e]={},this.connected()&&this._isAuthTokenLoaded&&t.onMessage({method:"connected",params:[]})},t.prototype.removeSession=function(e){delete this._sessions[e],delete this._notificationHandlers[e]},
t.prototype.connected=function(){return!!this._isConnected},t.prototype._bindSocketEvents=function(){var e=this;this.connectDfd=new Promise(function(i,o){e._wsBackendConnection.on("connect",function(){e._onConnect(),i()}),e._wsBackendConnection.on("message",e._onMessage.bind(e)),e._wsBackendConnection.on("disconnect",function(i){e._authTokenDfd&&(e._authTokenDfd=null),delete e._isConnected,e.studyCounter=0,c.logNormal("disconnect session:"+e.sessionid+", code:"+i.code+", reason:"+i.reason+", client reason:"+t.disconnectReason(i.code),null,!0),e._notifySessions({method:"disconnected",params:[]}),delete e._metadataCallback,e._disconnectCount=(e._disconnectCount||0)+1,e._wsBackendConnection.isConnected()&&(e._telemetryDisconnectTimeout=setTimeout(function(){C.sendReport("charts","disconnect")},5e3),e._wsBackendConnection.isMaxReconnects()&&(e._notifySessions({method:"reconnect_bailout",params:[]}),o(),C.sendReport("charts","reconnect_bailout")))})})},t.prototype.serverTimeOffset=function(){return this._serverTimeOffset?this._serverTimeOffset:0},t.disconnectReason=function(e){return 1e3===e?"Normal closure, meaning that the purpose for which the connection was established has been fulfilled.":1001===e?'An endpoint is "going away", such as a server going down or a browser having navigated away from a page.':1002===e?"An endpoint is terminating the connection due to a protocol error":1003===e?"An endpoint is terminating the connection because it has received a type of data it cannot accept (e.g., an endpoint that understands only text data MAY send this if it receives a binary message).":1004===e?"Reserved. The specific meaning might be defined in the future.":1005===e?"No status code was actually present.":1006===e?"The connection was closed abnormally, e.g., without sending or receiving a Close control frame":1007===e?"An endpoint is terminating the connection because it has received data within a message that was not consistent with the type of the message (e.g., non-UTF-8 [http://tools.ietf.org/html/rfc3629] data within a text message).":1008===e?'An endpoint is terminating the connection because it has received a message that "violates its policy". This reason is given either if there is no other sutible reason, or if there is a need to hide specific details about the policy.':1009===e?"An endpoint is terminating the connection because it has received a message that is too big for it to process.":1010===e?"An endpoint (client) is terminating the connection because it has expected the server to negotiate one or more extension, but the server didn't return them in the response message of the WebSocket handshake. <br /> Specifically, the extensions that are needed are: "+event.reason:1011===e?"A server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request.":1015===e?"The connection was closed due to a failure to perform a TLS handshake (e.g., the server certificate can't be verified).":"Unknown reason"},t.prototype._getAuthTokenDfd=function(e){var t,i,o
;return this._loadNewBars?Promise.resolve("load_new_token"):L.enabled("widget")||-1!==window.location.search.indexOf("widget_token")||-1!==window.location.hash.indexOf("widget_token")?(t=window.TradingView&&window.TradingView.widgetCustomer||"",-1!==t.indexOf("smartlab")?Promise.resolve("widget_user_token-smartlab"):"seekingalpha"===t?Promise.resolve("widget_user_token-seekingalpha"):"abrilcombr"===t?Promise.resolve("widget_user_token-abrilcombr"):"moneytimescombr"===t?Promise.resolve("widget_user_token-moneytimescombr"):Promise.resolve("widget_user_token")):window.is_authenticated?(i=this,i._authTokenManager||(o=new T,i._authTokenManager=o,i._authTokenManager.invalidated.subscribe(null,function(e){i._authTokenManager.get().then(function(e){e&&i.connected()&&i._sendRequest("set_auth_token",[e])})})),i._authTokenManager.get(e)):Promise.resolve("unauthorized_user_token")},t.prototype._onConnect=function(e){var t,i,o,n,r,s;if(!this.connected()&&(e=e||{},this._isAuthTokenLoaded=!1,t=this,this._authTokenDfd=this._getAuthTokenDfd(e.tokenGrabSession),i=this._wsBackendConnection.getConnectionStart(),o=this._wsBackendConnection.getConnectionDuration(),this._changeHandlerToJson(),this.sessionid=this._wsBackendConnection.getSessionId(),this.sessionid&&!this._isConnected)){this._pendingMessagesQueue=[],this._sendingQueuedRequestsCount=0,this._isConnected=!0,n=JSON.parse(this.sessionid),this._switchWSProtocol(),this._metadataServerHash=n.studies_metadata_hash||null;try{r=n.timestamp-(new Date).valueOf()/1e3,this._serverTimeOffset=r}catch(e){this._serverTimeOffset=0}c.logInfo("Time shift with server:"+Math.round(this._serverTimeOffset)+" seconds."),this._authTokenDfd?(this._sendingQueuedRequestsCount+=1,c.logInfo("Wait for auth token before send messages"),s=this._authTokenDfd,s.then(function(e){if(null===t._authTokenDfd||t._authTokenDfd!==s)return void c.logNormal("Comes auth token after requesting new token or after socket disconnected");t._authTokenDfd=null,e&&t._pendingMessagesQueue.unshift({method:"set_auth_token",args:[e]}),c.logNormal("Auth token request finished"),t._onSendingQueueRequestFinished(),t._isAuthTokenLoaded=!0,t._notifySessions({method:"connected",params:[]})})):this._isAuthTokenLoaded=!0,TradingView.WEB_SOCKET_WAS_CONNECTED=!0,C.sendReport("charts","websocket_connected"),C.sendReport("charts","websocket_connection_time_frame",{v:o}),C.timeCounters.series.wsConnected=i+o,C.sendReport("charts","reconnect_count_frame",{v:this._wsBackendConnection.getReconnectCount()}),C.sendReport("charts","redirect_count_frame",{v:this._wsBackendConnection.getRedirectCount()}),window.performance&&window.performance.timing&&!y&&(y=!0,C.sendReport("charts","before_websocket_connection_time_frame",{v:i-window.performance.timing.requestStart})),this._wsBackendConnection.resetCounters(),clearTimeout(this._telemetryDisconnectTimeout)}},t.prototype.connect=function(){this._wsBackendConnection.isConnected()||this._wsBackendConnection.isConnecting()||this._wsBackendConnection.connect()},t.prototype.disconnect=function(e){
return this._wsBackendConnection.disconnect(),!0},t.prototype.switchTimezone=function(e,t){return this._sendRequest("switch_timezone",[e,t])},t.prototype.resolveSymbol=function(e,t,i,o){return C.timeCounters.series["resolve_symbol_"+e]=Date.now(),this._notificationHandlers[e][t]=new w(o,t),this._sendRequest("resolve_symbol",[e,t,i])},t.prototype.createSeries=function(e,t,i,o,n,r,s){return this._notificationHandlers[e][t]=new w(s,t),this._sendRequest("create_series",[e,t,i,o,n,r])},t.prototype.removeSeries=function(e,t,i){return this._notificationHandlers[e][t]=new w(i,t),this._sendRequest("remove_series",[e,t])},t.prototype.modifySeries=function(e,t,i,o,n,r){return C.timeCounters.series[e+t]=(new Date).getTime(),this._notificationHandlers[e][t]=new w(r,t),this._sendRequest("modify_series",[e,t,i,o,n])},t.prototype.requestMoreData=function(e,t,i,o){return this._notificationHandlers[e][t]=new w(o,t),this._sendRequest("request_more_data",[e,t,i])},t.prototype.requestMetadata=function(e,t,i){var o,n,r,s,a=this;if(a._metadataCallback)return void a._metadataCallback.handlers.push(i);o=L.enabled("widget"),n=o?"studies_metadata_widget":"studies_metadata",r="pro_hash",s=[],a._metadataCallback=function(e){var t;for(a._metadataCallback=null,TVLocalForage.setItem(n,TradingView.clone(e)).then(function(){if(c.logNormal("Updated studies_metadata cache"),!o){var e=pro.hash();TVLocalForage.setItem(r,TradingView.clone(e)).then(function(){c.logNormal("Updated pro_hash cache")}).catch(function(e){c.logError("Cannot update pro_hash cache, reason: "+e)})}}).catch(function(e){c.logError("Cannot update studies_metadata cache, reason: "+e)}),t=0;t<s.length;t++)(0,s[t])(TradingView.clone(e))},a._metadataCallback.handlers=s,a._metadataCallback.handlers.push(i),TVLocalForage.getItem(r).then(function(i){var r=pro.hash();null!==i&&i===r||o?TVLocalForage.getItem(n).then(function(i){var o,n=null!==i&&i.params[1].hash||null;if(null===n||null===a._metadataServerHash||a._metadataServerHash!==n)c.logNormal("Metadata hash has changed (cached:'"+n+"', server:'"+a._metadataServerHash+"'')"),a._requestMetadataFromServer(e,t,a._metadataCallback);else{if(c.logNormal("Using studies_metadata from browser cache"),!a._metadataCallback)return;for(o=0;o<a._metadataCallback.handlers.length;o++)(0,a._metadataCallback.handlers[o])(TradingView.clone(i));a._metadataCallback=null}}).catch(function(i){c.logError("Cannot get studies_metadata, reason: "+i),a._requestMetadataFromServer(e,t,a._metadataCallback)}):(c.logNormal("Pro hash has changed (cached: '"+i+"', current:'"+r+"')"),a._requestMetadataFromServer(e,t,a._metadataCallback))}).catch(function(i){c.logError("Cannot get studies_metadata, reason: "+i),a._requestMetadataFromServer(e,t,a._metadataCallback)})},t.prototype.authTokenManager=function(){return this._authTokenManager},t.prototype._requestMetadataFromServer=function(e,t,i){return!!i&&(c.logNormal("Request studies_metadata from server"),this._notificationHandlers[e][t]=new w(i,t),this._sendRequest("request_studies_metadata",[e,t]))},
t.prototype.isCanCreateStudy=function(e,t){if(!L.enabled(o.STUDY_ON_STUDY))return!1;var i=L.getConfig(o.STUDY_ON_STUDY);return!0===e?this.childStudyCounter<i.child_limit:this.studyCounter<i.limit},t.prototype.createStudy=function(e,t,o,n,r,s,a,l){if(!this.isCanCreateStudy())return i.e(1).then(function(e){(0,i(198).createTooManyStudiesNotice)().open()}.bind(null,i)).catch(i.oe),!1;this._notificationHandlers[e][t]=new w(a,t);var c=this._sendRequest(!0===l?"create_child_study":"create_study",[e,t,o,n,r,s]);return!1!==c&&(this.studyCounter++,l&&this.childStudyCounter++,c)},t.prototype.rebindStudy=function(e,t,i,o,n,r,s,a){if(a===S.REBIND_STUDY_STANDALONE_TO_CHILD){if(!this.isCanCreateStudy(!0))return!1;this.childStudyCounter++}else a===S.REBIND_STUDY_CHILD_TO_STANDALONE&&this.childStudyCounter--;return i=i||"",this._notificationHandlers[e][t]=new w(s,t),this._sendRequest("child_study_rebind",[e,t,i,o,n,r]),!0},t.prototype.removeStudy=function(e,t,i,o){this._notificationHandlers[e][t]=new w(i,t);var n=this._sendRequest("remove_study",[e,t]);return!1!==n&&(this.studyCounter--,o&&this.childStudyCounter--,n)},t.prototype.modifyStudy=function(e,t,i,o,n){return this._notificationHandlers[e][t]=new w(n,t),this._sendRequest("modify_study",[e,t,i,o])},t.prototype.createPointset=function(e,t,i,o,n,r,s){return this._notificationHandlers[e][t]=new w(s,t),this._sendRequest("create_pointset",[e,t,i,o,n,r])},t.prototype.modifyPointset=function(e,t,i,o,n){return this._notificationHandlers[e][t]=new w(n,t),this._sendRequest("modify_pointset",[e,t,i,o])},t.prototype.removePointset=function(e,t,i){return this._notificationHandlers[e][t]=new w(i,t),this._sendRequest("remove_pointset",[e,t])},t.prototype.requestMoreTickmarks=function(e,t,i,o){return this._notificationHandlers[e][t]=new w(o,t),this._sendRequest("request_more_tickmarks",[e,t,i])},t.prototype.requestFirstBarTime=function(e,t,i,o){return this._notificationHandlers[e][t]=new w(o,t),this._sendRequest("get_first_bar_time",[e,t,i])},t.prototype._generateNextTurnaround=function(){var e=this._turnaroundPrefix+this._turnaroundIndex;return this._turnaroundIndex+=1,e},t.prototype.replayCreateSession=function(e){return this._sendRequest("replay_create_session",[e])},t.prototype.replayDeleteSession=function(e){return this._sendRequest("replay_delete_session",[e])},t.prototype.replayReset=function(e,t,i){var o=this._generateNextTurnaround();return this._notificationHandlers[e][o]=new w(i,o),this._sendRequest("replay_reset",[e,o,t])},t.prototype.replayStart=function(e,t,i){var o=this._generateNextTurnaround();return this._notificationHandlers[e][o]=new w(i,o),this._sendRequest("replay_start",[e,o,t])},t.prototype.replayStop=function(e,t){var i=this._generateNextTurnaround();return this._notificationHandlers[e][i]=new w(t,i),this._sendRequest("replay_stop",[e,i])},t.prototype.replayStep=function(e,t,i){var o=this._generateNextTurnaround();return this._notificationHandlers[e][o]=new w(i,o),this._sendRequest("replay_step",[e,o,t])},t.prototype.replayAddSeries=function(e,t,i,o){
var n=this._generateNextTurnaround();return this._notificationHandlers[e][n]=new w(o,n),this._sendRequest("replay_add_series",[e,n,t,i])},t.prototype.replayRemoveSeries=function(e,t,i,o){var n=this._generateNextTurnaround();return this._notificationHandlers[e][n]=new w(o,n),this._sendRequest("replay_remove_series",[e,n,t,i])},t.prototype.replaySetResolution=function(e,t,i){var o=this._generateNextTurnaround();return this._notificationHandlers[e][o]=new w(i,o),this._sendRequest("replay_set_resolution",[e,o,t])},t.prototype.redirectCount=function(){return this._wsBackendConnection.getRedirectCount()},t.prototype.disconnectCount=function(){return this._disconnectCount||0},t.prototype._loadProtobufHandler=function(){c.logInfo("Start loading protobuf handler"),i.e(0).then(function(e){E=i(136),c.logInfo("Protobuf handler loaded."),this.connected()&&this._switchWSProtocol()}.bind(this).bind(null,i)).catch(i.oe)},t.prototype._switchWSProtocol=function(){var e,t,i=r("protobuf-maintenance");i||null===E?(this._changeHandlerToJson(),t=i?"protobuf maintenance":"no alternatives",c.logInfo("stay on json because of "+t)):(this._sendingQueuedRequestsCount+=1,e=JSON.stringify({m:"switch_protocol",p:["protobuf"]}),this._wsBackendConnection.send(e),c.logInfo("Send command to switch protocol to protobuf. Wait response before send other messages..."))},t.prototype._changeHandlerToProtobuf=function(){this._protocol="protobuf",this._dataHandleModule=new E,this._wsBackendConnection.switchWebsocketMode(g.Binary)},t.prototype._changeHandlerToJson=function(){this._protocol="json",this._dataHandleModule=new x,this._wsBackendConnection.switchWebsocketMode(g.Text)},t.prototype._invokeHandler=function(e,t){e&&e(t)},t.prototype._flushPendingMessages=function(){c.logInfo("Flush pending messages. Count="+this._pendingMessagesQueue.length),this._pendingMessagesQueue.forEach(function(e){this._sendRequest(e.method,e.args)},this),this._pendingMessagesQueue=[]},t.prototype._sendRequest=function(e,t){var i,o,n,r,s,a,l,u;return 0!==this._sendingQueuedRequestsCount?(this._pendingMessagesQueue.push({method:e,args:t}),!0):(i=this._dataHandleModule[e].apply(this._dataHandleModule,t),o={m:e,p:i},["create_study","child_study_rebind","create_child_study","modify_study"].includes(e)&&o.p.inputs?(n=JSON.parse(o.p.inputs.readString(o.p.inputs.remaining())),o.p.inputs.clear(),r=Object.assign({},o.p),r.inputs=n,s={m:e,p:r},a=JSON.stringify(s)):a=JSON.stringify(o),("json"===this._protocol?i.length>0:i.session)?(l="json"===this._protocol?i[0]:i.session,l.startsWith("qs_")?f.logNormal("send: "+a):l.startsWith("cs_")&&h.logNormal("send: "+a)):c.logNormal("send: "+a),u=this._dataHandleModule.prepareEncodeMessage(e,i),this._wsBackendConnection.send(u))},t.prototype._onMessage=function(e){var t=this.unpack(e);if("protocol_switched"===t.method&&t.params[0]!==this._protocol)return c.logInfo("Protocol changing accepted. Change handler and try flush queue"),this._changeHandlerToProtobuf(),void this._onSendingQueueRequestFinished();this._dispathNotification(t,e)},
t.prototype._onSendingQueueRequestFinished=function(){this._sendingQueuedRequestsCount-=1,c.logInfo("Sending queue request finished. Remaining pending requests="+this._sendingQueuedRequestsCount),this._sendingQueuedRequestsCount<0&&c.logError("Invalid queue state="+this._sendingQueuedRequestsCount),0===this._sendingQueuedRequestsCount&&this._flushPendingMessages()},t.prototype._convertTimescaleResponse=function(e){return this._dataHandleModule.convertTimescaleResponse(e)},t.prototype._dispathNotification=function(e,t){var i,o,n,r,s,m,g,y,b,S,w,T,P,x=e.params.shift();if(this._notificationHandlers[x])switch(i=e.params[0],o=e.method.split("_")[0],"study_loading"!==e.method&&"series_loading"!==e.method||(C.timeCounters[o][x+i]=(new Date).getTime()),"symbol_resolved"===e.method&&(C.sendReport("charts",e.method),"number"==typeof(n=C.timeCounters.series["resolve_symbol_"+x])&&(r=Date.now()-n,C.sendReport("charts","symbol_resolve_time_frame",{v:r}))),"series_completed"!==e.method&&"study_completed"!==e.method||"number"==typeof(s=C.timeCounters[o][x+i])&&(m=(new Date).getTime()-s,g=this._isStrategy(x,i),o=g?"strategy":o,C.sendReport("charts",o+"_loaded"),C.sendReport("charts",o+"_time_frame",{v:m}),g||delete C.timeCounters[o][x+i]),C.timeCounters.series.wsConnected&&"series_completed"===e.method&&(C.sendReport("charts","first_series_full_time_frame",{v:Date.now()-C.timeCounters.series.wsConnected}),delete C.timeCounters.series.wsConnected,window.performance&&window.performance.timing&&!v&&(v=!0,C.sendReport("charts","page_full_load_time_frame",{v:Date.now()-window.performance.timing.requestStart}))),x.startsWith("cs_")&&(y="recv: "+this._protocol=="json"?t:JSON.stringify({m:e.m,s:x,p:e.p}),"data_update"===e.method?u.logNormal(l.isHighRateEnabled()?y:y.slice(0,500)):"study_loading"===e.method?d.logNormal(y):"tickmark_update"===e.method?p.logNormal(y):h.logNormal(y)),x.startsWith("qs_")&&("quote_symbol_data"===e.method?_.logNormal:f.logNormal)("recv: "+this._protocol=="json"?t:JSON.stringify({m:e.m,s:x,p:e.p})),e.method){case"timescale_update":b=this._dataHandleModule.getTimescaleObjects(e),S=this._dataHandleModule.getTimescaleChangeset(e),w=this._convertTimescaleResponse(S),w.clear=0===w.changes.length&&0===w.index_diff.length&&0===w.marks.length,this._sessions[x].onMessage({method:"timescale_update",params:w}),this._dataHandleModule.prepareTimescaleUpdate(x,b,function(e,t,i){this._invokeNotificationHandler(e,t,i)}.bind(this));break;case"tickmark_update":w=this._convertTimescaleResponse(e.params[0]),w.changes=[],this._sessions[x].onMessage({method:"timescale_update",params:w});break;case"data_update":this._dataHandleModule.prepareDataUpdate(x,e,function(e,t,i){this._invokeNotificationHandler(e,t,i)}.bind(this));break;case"index_update":for(T in e.params[0])P={method:"index_update",params:e.params[0][T]},this._invokeNotificationHandler(x,T,P);break;case"critical_error":c.logInfo(new Date+" critical_error session:"+this.sessionid+" reason:"+e.params[0]),C.sendReport("charts","critical_error"),this._sessions[x].onMessage({
method:"critical_error",params:e.params});break;case"quote_symbol_data":case"quote_list_fields":case"depth_symbol_error":case"depth_symbol_success":case"dd":case"dpu":case"depth_bar_last_value":this._sessions[x].onMessage({method:e.method,params:e.params});break;case a.point:case a.resolutions:case a.endOfData:case a.instanceId:this._sessions[x].onMessage(e);break;default:this._invokeNotificationHandler(x,i,e)}},t.prototype._isStrategy=function(e,t){var i=this._notificationHandlers[e][t];return i&&i.handler&&i.handler.isTVScriptStrategy},t.prototype._invokeNotificationHandler=function(e,t,i){if(void 0!==t){var o=this._notificationHandlers[e][t];"series_deleted"!==i.method&&"study_deleted"!==i.method&&0!==i.method.indexOf("replay_")||delete this._notificationHandlers[e][t],void 0!==o&&this._invokeHandler(o.handler,i)}},t.prototype._notifySessions=function(e){var t,i;for(t in this._sessions){if(!this._sessions.hasOwnProperty(t))return;i=this._sessions[t],"function"==typeof i.onMessage&&i.onMessage(e)}},t.prototype.unpack=function(e){return this._dataHandleModule.unpack(e)},t.prototype._symbolSearchRequest=null,t.prototype.searchSymbols=function(e,t,i,o,n,r,s,a,l){function c(){var e=(new Date).getTime()-_;C.sendReport("charts","symbol_search_time_frame",{v:e})}function h(){c(),C.sendReport("charts","symbol_search_http_error"),m._symbolSearchRequest=null}var u,d,p,f,_,m=this;this._symbolSearchRequest&&this._symbolSearchRequest.abort(),u=location.protocol+"//"+this._wsBackendConnection.getHost(),P.isProd()?u+="/search/":u+="/local_search/",window.SS_HOST&&(u=location.protocol+"//"+window.SS_HOST+"/search/"),window.SS_URL&&(u=window.SS_URL),d={text:e,exchange:t,type:i,hl:n,lang:o},window.SS_DOMAIN_PARAMETER&&(d.domain=window.SS_DOMAIN_PARAMETER),r&&(d.strict=1),i===I.types.QUANDL&&(u="https://quandlapi.tradingview.com/api/v3/datasets.json",d={query:e,database_code:t}),s&&(d.broker=s,a&&(d.tradable=!0)),p=Object.keys(d).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(d[e])}).join("&"),f=new XMLHttpRequest,f.open("GET",u+"?"+p),_=(new Date).getTime(),f.addEventListener("load",function(){var e=JSON.parse(f.responseText);l&&l(e),c(),C.sendReport("charts","symbol_search_http_status",{v:f.status}),m._symbolSearchRequest=null}),f.addEventListener("error",h),f.addEventListener("timeout",h),this._symbolSearchRequest=f,f.send()},t.prototype.getMarks=function(e,t,i,o,n){throw Error("This method is not implemented")},t.prototype.getTimescaleMarks=function(e,t,i,o,n){throw Error("This method is not implemented")},t.prototype.getPingInfo=function(){return this._wsBackendConnection.getPingInfo()},n(t,"TVChartApi",S,"ChartApiInterface"),window.ChartApiInstance=new t(window.WSBackendConnection),void 0!==e&&e&&e.exports&&(e.exports=t)}).call(t,i(15)(e))},function(e,t,i){e.exports=i(98).default},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var n,r;Object.defineProperty(t,"__esModule",{value:!0}),n=i(99),r=o(n),t.default=r.default},function(e,t,i){"use strict";function o(e){var t,i
;if(e&&e.__esModule)return e;if(t={},null!=e)for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var i,o,n,r=Object.getOwnPropertyNames(t);for(i=0;i<r.length;i++)o=r[i],(n=Object.getOwnPropertyDescriptor(t,o))&&n.configurable&&void 0===e[o]&&Object.defineProperty(e,o,n);return e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):r(e,t))}var c,h,u,d,p,f,_,m,g,v,y,b,S,w,T,P,C,x,E,L,I,A,k,M,O,D;Object.defineProperty(t,"__esModule",{value:!0}),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},h=Object.assign||function(e){var t,i,o;for(t=1;t<arguments.length;t++){i=arguments[t];for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},u=i(12),d=n(u),p=i(18),f=n(p),_=i(100),m=n(_),g=i(101),v=n(g),y=i(102),b=n(y),S=i(103),w=n(S),T=i(104),P=n(T),C=i(105),x=n(C),E=i(106),L=n(E),I=i(107),A=i(46),k=n(A),M=i(47),O=o(M),D=function(e){function t(){var i,o=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=arguments[1];return s(this,t),i=a(this,e.call(this)),i.options=(0,I.transformOptions)(o),i.services={},i.logger=d.default,i.modules={},n&&!i.isInitialized&&i.init(o,n),i}return l(t,e),t.prototype.init=function(e,t){function i(e){if(e)return"function"==typeof e?new e:e}var o,n,r,s,a=this;return"function"==typeof e&&(t=e,e={}),e||(e={}),"v1"===e.compatibilityAPI?this.options=h({},(0,I.get)(),(0,I.transformOptions)(O.convertAPIOptions(e)),{}):"v1"===e.compatibilityJSON?this.options=h({},(0,I.get)(),(0,I.transformOptions)(O.convertJSONOptions(e)),{}):this.options=h({},(0,I.get)(),this.options,(0,I.transformOptions)(e)),t||(t=function(){}),this.options.isClone||(this.modules.logger?d.default.init(i(this.modules.logger),this.options):d.default.init(null,this.options),o=new b.default(this.options),this.store=new m.default(this.options.resources,this.options),n=this.services,n.logger=d.default,n.resourceStore=this.store,n.resourceStore.on("added removed",function(e,t){n.cacheConnector.save()}),n.languageUtils=o,n.pluralResolver=new w.default(o,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON}),n.interpolator=new P.default(this.options),n.backendConnector=new x.default(i(this.modules.backend),n.resourceStore,n,this.options),n.backendConnector.on("*",function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o]
;a.emit.apply(a,[e].concat(i))}),n.backendConnector.on("loaded",function(e){n.cacheConnector.save()}),n.cacheConnector=new L.default(i(this.modules.cache),n.resourceStore,n,this.options),n.cacheConnector.on("*",function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];a.emit.apply(a,[e].concat(i))}),this.modules.languageDetector&&(n.languageDetector=i(this.modules.languageDetector),n.languageDetector.init(n,this.options.detection,this.options)),this.translator=new v.default(this.services,this.options),this.translator.on("*",function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];a.emit.apply(a,[e].concat(i))})),r=["getResource","addResource","addResources","addResourceBundle","removeResourceBundle","hasResourceBundle","getResourceBundle"],r.forEach(function(e){a[e]=function(){return this.store[e].apply(this.store,arguments)}}),"v1"===this.options.compatibilityAPI&&O.appendBackwardsAPI(this),s=function(){a.changeLanguage(a.options.lng,function(e,i){a.emit("initialized",a.options),a.logger.log("initialized",a.options),t(e,i)})},this.options.resources||!this.options.initImmediate?s():setTimeout(s,0),this},t.prototype.loadResources=function(e){var t,i=this;if(e||(e=function(){}),this.options.resources)e(null);else if(t=function(){var t,o;if(i.language&&"cimode"===i.language.toLowerCase())return{v:e()};t=[],o=function(e){i.services.languageUtils.toResolveHierarchy(e).forEach(function(e){t.indexOf(e)<0&&t.push(e)})},o(i.language),i.options.preload&&i.options.preload.forEach(function(e){o(e)}),i.services.cacheConnector.load(t,i.options.ns,function(){i.services.backendConnector.load(t,i.options.ns,e)})}(),"object"===(void 0===t?"undefined":c(t)))return t.v},t.prototype.reloadResources=function(e,t){e||(e=this.languages),t||(t=this.options.ns),this.services.backendConnector.reload(e,t)},t.prototype.use=function(e){return"backend"===e.type&&(this.modules.backend=e),"cache"===e.type&&(this.modules.cache=e),("logger"===e.type||e.log&&e.warn&&e.warn)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"postProcessor"===e.type&&k.default.addPostProcessor(e),this},t.prototype.changeLanguage=function(e,t){var i=this,o=function(o){e&&(i.emit("languageChanged",e),i.logger.log("languageChanged",e)),t&&t(o,function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];return i.t.apply(i,t)})};!e&&this.services.languageDetector&&(e=this.services.languageDetector.detect()),e&&(this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.translator.changeLanguage(e),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage(e)),this.loadResources(function(e){o(e)})},t.prototype.getFixedT=function(e,t){var i=this,o=function e(t,o){return o=o||{},o.lng=o.lng||e.lng,o.ns=o.ns||e.ns,i.t(t,o)};return o.lng=e,o.ns=t,o},t.prototype.t=function(){return this.translator&&this.translator.translate.apply(this.translator,arguments)},t.prototype.exists=function(){
return this.translator&&this.translator.exists.apply(this.translator,arguments)},t.prototype.setDefaultNamespace=function(e){this.options.defaultNS=e},t.prototype.loadNamespaces=function(e,t){var i=this;if(!this.options.ns)return t&&t();"string"==typeof e&&(e=[e]),e.forEach(function(e){i.options.ns.indexOf(e)<0&&i.options.ns.push(e)}),this.loadResources(t)},t.prototype.loadLanguages=function(e,t){var i,o;if("string"==typeof e&&(e=[e]),i=this.options.preload||[],o=e.filter(function(e){return i.indexOf(e)<0}),!o.length)return t();this.options.preload=i.concat(o),this.loadResources(t)},t.prototype.dir=function(e){return e||(e=this.language),e?["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"].indexOf(this.services.languageUtils.getLanguagePartFromCode(e))>=0?"rtl":"ltr":"rtl"},t.prototype.createInstance=function(){return new t(arguments.length<=0||void 0===arguments[0]?{}:arguments[0],arguments[1])},t.prototype.cloneInstance=function(){var e=this,i=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],o=arguments[1],n=new t(h({},i,this.options,{isClone:!0}),o);return["store","translator","services","language"].forEach(function(t){n[t]=e[t]}),n},t}(f.default),t.default=new D},function(e,t,i){"use strict";function o(e){var t,i;if(e&&e.__esModule)return e;if(t={},null!=e)for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var i,o,n,r=Object.getOwnPropertyNames(t);for(i=0;i<r.length;i++)o=r[i],(n=Object.getOwnPropertyDescriptor(t,o))&&n.configurable&&void 0===e[o]&&Object.defineProperty(e,o,n);return e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):r(e,t))}var c,h,u,d,p,f;Object.defineProperty(t,"__esModule",{value:!0}),c=Object.assign||function(e){var t,i,o;for(t=1;t<arguments.length;t++){i=arguments[t];for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},h=i(18),u=n(h),d=i(19),p=o(d),f=function(e){function t(){var i,o=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=arguments.length<=1||void 0===arguments[1]?{ns:["translation"],defaultNS:"translation"}:arguments[1];return s(this,t),i=a(this,e.call(this)),i.data=o,i.options=n,i}return l(t,e),t.prototype.addNamespaces=function(e){
this.options.ns.indexOf(e)<0&&this.options.ns.push(e)},t.prototype.removeNamespaces=function(e){var t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)},t.prototype.getResource=function(e,t,i){var o,n=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],r=n.keySeparator||this.options.keySeparator;return void 0===r&&(r="."),o=[e,t],i&&"string"!=typeof i&&(o=o.concat(i)),i&&"string"==typeof i&&(o=o.concat(r?i.split(r):i)),e.indexOf(".")>-1&&(o=e.split(".")),p.getPath(this.data,o)},t.prototype.addResource=function(e,t,i,o){var n,r=arguments.length<=4||void 0===arguments[4]?{silent:!1}:arguments[4],s=this.options.keySeparator;void 0===s&&(s="."),n=[e,t],i&&(n=n.concat(s?i.split(s):i)),e.indexOf(".")>-1&&(n=e.split("."),o=t,t=n[1]),this.addNamespaces(t),p.setPath(this.data,n,o),r.silent||this.emit("added",e,t,i,o)},t.prototype.addResources=function(e,t,i){for(var o in i)"string"==typeof i[o]&&this.addResource(e,t,o,i[o],{silent:!0});this.emit("added",e,t,i)},t.prototype.addResourceBundle=function(e,t,i,o,n){var r,s=[e,t];e.indexOf(".")>-1&&(s=e.split("."),o=i,i=t,t=s[1]),this.addNamespaces(t),r=p.getPath(this.data,s)||{},o?p.deepExtend(r,i,n):r=c({},r,i),p.setPath(this.data,s,r),this.emit("added",e,t,i)},t.prototype.removeResourceBundle=function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)},t.prototype.hasResourceBundle=function(e,t){return void 0!==this.getResource(e,t)},t.prototype.getResourceBundle=function(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?c({},this.getResource(e,t)):this.getResource(e,t)},t.prototype.toJSON=function(){return this.data},t}(u.default),t.default=f},function(e,t,i){"use strict";function o(e){var t,i;if(e&&e.__esModule)return e;if(t={},null!=e)for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var i,o,n,r=Object.getOwnPropertyNames(t);for(i=0;i<r.length;i++)o=r[i],(n=Object.getOwnPropertyDescriptor(t,o))&&n.configurable&&void 0===e[o]&&Object.defineProperty(e,o,n);return e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):r(e,t))}var c,h,u,d,p,f,_,m,g,v,y,b,S;Object.defineProperty(t,"__esModule",{value:!0}),c=Object.assign||function(e){var t,i,o;for(t=1;t<arguments.length;t++){i=arguments[t];for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){
return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},u=i(12),d=n(u),p=i(18),f=n(p),_=i(46),m=n(_),g=i(47),v=o(g),y=i(19),b=o(y),S=function(e){function t(i){var o,n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return s(this,t),o=a(this,e.call(this)),b.copy(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector"],i,o),o.options=n,o.logger=d.default.create("translator"),o}return l(t,e),t.prototype.changeLanguage=function(e){e&&(this.language=e)},t.prototype.exists=function(e){var t=arguments.length<=1||void 0===arguments[1]?{interpolation:{}}:arguments[1];return"v1"===this.options.compatibilityAPI&&(t=v.convertTOptions(t)),void 0!==this.resolve(e,t)},t.prototype.extractFromKey=function(e,t){var i,o,n=t.nsSeparator||this.options.nsSeparator;return void 0===n&&(n=":"),i=t.ns||this.options.defaultNS,n&&e.indexOf(n)>-1&&(o=e.split(n),i=o[0],e=o[1]),"string"==typeof i&&(i=[i]),{key:e,namespaces:i}},t.prototype.translate=function(e){var t,i,o,n,r,s,a,l,u,d,p,f,_,m,g,y,b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if("object"!==(void 0===b?"undefined":h(b))?b=this.options.overloadTranslationOptionHandler(arguments):"v1"===this.options.compatibilityAPI&&(b=v.convertTOptions(b)),void 0===e||null===e||""===e)return"";if("number"==typeof e&&(e+=""),"string"==typeof e&&(e=[e]),(t=b.lng||this.language)&&"cimode"===t.toLowerCase())return e[e.length-1];if(i=b.keySeparator||this.options.keySeparator||".",o=this.extractFromKey(e[e.length-1],b),n=o.key,r=o.namespaces,s=r[r.length-1],a=this.resolve(e,b),l=Object.prototype.toString.apply(a),u=["[object Number]","[object Function]","[object RegExp]"],d=void 0!==b.joinArrays?b.joinArrays:this.options.joinArrays,a&&"string"!=typeof a&&u.indexOf(l)<0&&(!d||"[object Array]"!==l)){if(!b.returnObjects&&!this.options.returnObjects)return this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(n,a,b):"key '"+n+" ("+this.language+")' returned an object instead of string.";p="[object Array]"===l?[]:{};for(f in a)p[f]=this.translate(""+n+i+f,c({joinArrays:!1,ns:r},b));a=p}else if(d&&"[object Array]"===l)(a=a.join(d))&&(a=this.extendTranslation(a,n,b));else{if(_=!1,m=!1,this.isValidLookup(a)||void 0===b.defaultValue||(_=!0,a=b.defaultValue),this.isValidLookup(a)||(m=!0,a=n),m||_){if(this.logger.log("missingKey",t,s,n,a),g=[],"fallback"===this.options.saveMissingTo&&this.options.fallbackLng&&this.options.fallbackLng[0])for(y=0;y<this.options.fallbackLng.length;y++)g.push(this.options.fallbackLng[y]);else"all"===this.options.saveMissingTo?g=this.languageUtils.toResolveHierarchy(b.lng||this.language):g.push(b.lng||this.language);this.options.saveMissing&&(this.options.missingKeyHandler?this.options.missingKeyHandler(g,s,n,a):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(g,s,n,a)),this.emit("missingKey",g,s,n,a)}a=this.extendTranslation(a,n,b),
m&&a===n&&this.options.appendNamespaceToMissingKey&&(a=s+":"+n),m&&this.options.parseMissingKeyHandler&&(a=this.options.parseMissingKeyHandler(a))}return a},t.prototype.extendTranslation=function(e,t,i){var o,n,r,s=this;return i.interpolation&&this.interpolator.init(i),o=i.replace&&"string"!=typeof i.replace?i.replace:i,this.options.interpolation.defaultVariables&&(o=c({},this.options.interpolation.defaultVariables,o)),e=this.interpolator.interpolate(e,o,this.language),e=this.interpolator.nest(e,function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return s.translate.apply(s,t)},i),i.interpolation&&this.interpolator.reset(),n=i.postProcess||this.options.postProcess,r="string"==typeof n?[n]:n,void 0!==e&&r&&r.length&&!1!==i.applyPostProcessor&&(e=m.default.handle(r,e,t,i,this)),e},t.prototype.resolve=function(e){var t=this,i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=void 0;return"string"==typeof e&&(e=[e]),e.forEach(function(e){var n,r,s,a,l,c;t.isValidLookup(o)||(n=t.extractFromKey(e,i),r=n.key,s=n.namespaces,t.options.fallbackNS&&(s=s.concat(t.options.fallbackNS)),a=void 0!==i.count&&"string"!=typeof i.count,l=void 0!==i.context&&"string"==typeof i.context&&""!==i.context,c=i.lngs?i.lngs:t.languageUtils.toResolveHierarchy(i.lng||t.language),s.forEach(function(e){t.isValidLookup(o)||c.forEach(function(n){var s,c,h,u;if(!t.isValidLookup(o))for(s=r,c=[s],h=void 0,a&&(h=t.pluralResolver.getSuffix(n,i.count)),a&&l&&c.push(s+h),l&&c.push(s+=""+t.options.contextSeparator+i.context),a&&c.push(s+=h),u=void 0;u=c.pop();)t.isValidLookup(o)||(o=t.getResource(n,e,u,i))})}))}),o},t.prototype.isValidLookup=function(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)},t.prototype.getResource=function(e,t,i){var o=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];return this.resourceStore.getResource(e,t,i,o)},t}(f.default),t.default=S},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}var s,a,l;Object.defineProperty(t,"__esModule",{value:!0}),s=i(12),a=o(s),l=function(){function e(t){n(this,e),this.options=t,this.whitelist=this.options.whitelist||!1,this.logger=a.default.create("languageUtils")}return e.prototype.getLanguagePartFromCode=function(e){var t,i;return e.indexOf("-")<0?e:(t=["NB-NO","NN-NO","nb-NO","nn-NO","nb-no","nn-no"],i=e.split("-"),this.formatLanguageCode(t.indexOf(e)>-1?i[1].toLowerCase():i[0]))},e.prototype.formatLanguageCode=function(e){var t,i;return"string"==typeof e&&e.indexOf("-")>-1?(t=["hans","hant","latn","cyrl","cans","mong","arab"],i=e.split("-"),this.options.lowerCaseLng?i=i.map(function(e){return e.toLowerCase()}):2===i.length?(i[0]=i[0].toLowerCase(),i[1]=i[1].toUpperCase(),t.indexOf(i[1].toLowerCase())>-1&&(i[1]=r(i[1].toLowerCase()))):3===i.length&&(i[0]=i[0].toLowerCase(),2===i[1].length&&(i[1]=i[1].toUpperCase()),
"sgn"!==i[0]&&2===i[2].length&&(i[2]=i[2].toUpperCase()),t.indexOf(i[1].toLowerCase())>-1&&(i[1]=r(i[1].toLowerCase())),t.indexOf(i[2].toLowerCase())>-1&&(i[2]=r(i[2].toLowerCase()))),i.join("-")):this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e},e.prototype.isWhitelisted=function(e,t){return("languageOnly"===this.options.load||this.options.nonExplicitWhitelist&&!t)&&(e=this.getLanguagePartFromCode(e)),!this.whitelist||!this.whitelist.length||this.whitelist.indexOf(e)>-1},e.prototype.toResolveHierarchy=function(e,t){var i,o,n=this;return t=t||this.options.fallbackLng||[],"string"==typeof t&&(t=[t]),i=[],o=function(e){var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];n.isWhitelisted(e,t)?i.push(e):n.logger.warn("rejecting non-whitelisted language code: "+e)},"string"==typeof e&&e.indexOf("-")>-1?("languageOnly"!==this.options.load&&o(this.formatLanguageCode(e),!0),"currentOnly"!==this.options.load&&o(this.getLanguagePartFromCode(e))):"string"==typeof e&&o(this.formatLanguageCode(e)),t.forEach(function(e){i.indexOf(e)<0&&o(n.formatLanguageCode(e))}),i},e}(),t.default=l},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(){var e={};return c.forEach(function(t){t.lngs.forEach(function(i){return e[i]={numbers:t.nr,plurals:h[t.fc]}})}),e}var s,a,l,c,h,u;Object.defineProperty(t,"__esModule",{value:!0}),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},a=i(12),l=o(a),c=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","tg","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","es_ar","et","eu","fi","fo","fur","fy","gl","gu","ha","he","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt","pt_br","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21}],h={1:function(e){return+(e>1)},2:function(e){return+(1!=e)},3:function(e){return 0},4:function(e){
return+(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return+(0===e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return+(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return+(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return+(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return+(e>=2)},10:function(e){return+(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return+(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return+(e%10!=1||e%100==11)},13:function(e){return+(0!==e)},14:function(e){return+(1==e?0:2==e?1:3==e?2:3)},15:function(e){return+(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return+(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return+(1==e||e%10==1?0:1)},18:function(e){return+(0==e?0:1==e?1:2)},19:function(e){return+(1==e?0:0===e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return+(1==e?0:0===e||e%100>0&&e%100<20?1:2)},21:function(e){return+(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)}},u=function(){function e(t){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];n(this,e),this.languageUtils=t,this.options=i,this.logger=l.default.create("pluralResolver"),this.rules=r()}return e.prototype.addRule=function(e,t){this.rules[e]=t},e.prototype.getRule=function(e){return this.rules[this.languageUtils.getLanguagePartFromCode(e)]},e.prototype.needsPlural=function(e){var t=this.getRule(e);return!(t&&t.numbers.length<=1)},e.prototype.getSuffix=function(e,t){var i,o=this,n=this.getRule(e);return n?(i=function(){var e,i,r;return 1===n.numbers.length?{v:""}:(e=n.noAbs?n.plurals(t):n.plurals(Math.abs(t)),i=n.numbers[e],2===n.numbers.length&&1===n.numbers[0]&&(2===i?i="plural":1===i&&(i="")),r=function(){return o.options.prepend&&""+i?o.options.prepend+""+i:""+i},"v1"===o.options.compatibilityJSON?1===i?{v:""}:"number"==typeof i?{v:"_plural_"+i}:{v:r()}:"v2"===o.options.compatibilityJSON||2===n.numbers.length&&1===n.numbers[0]?{v:r()}:2===n.numbers.length&&1===n.numbers[0]?{v:r()}:{v:o.options.prepend&&""+e?o.options.prepend+""+e:""+e})}(),"object"===(void 0===i?"undefined":s(i))?i.v:void 0):(this.logger.warn("no plural rule found for: "+e),"")},e}(),t.default=u},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e){var t,i;if(e&&e.__esModule)return e;if(t={},null!=e)for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s,a,l,c,h;Object.defineProperty(t,"__esModule",{value:!0}),s=i(19),a=n(s),l=i(12),c=o(l),h=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];r(this,e),this.logger=c.default.create("interpolator"),this.init(t,!0)}return e.prototype.init=function(){var e,t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];arguments[1]&&(this.options=t,this.format=t.interpolation&&t.interpolation.format||function(e){return e}),t.interpolation||(t.interpolation={
escapeValue:!0}),e=t.interpolation,this.escapeValue=e.escapeValue,this.prefix=e.prefix?a.regexEscape(e.prefix):e.prefixEscaped||"{{",this.suffix=e.suffix?a.regexEscape(e.suffix):e.suffixEscaped||"}}",this.formatSeparator=e.formatSeparator?a.regexEscape(e.formatSeparator):e.formatSeparator||",",this.unescapePrefix=e.unescapeSuffix?"":e.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":e.unescapeSuffix||"",this.nestingPrefix=e.nestingPrefix?a.regexEscape(e.nestingPrefix):e.nestingPrefixEscaped||a.regexEscape("$t("),this.nestingSuffix=e.nestingSuffix?a.regexEscape(e.nestingSuffix):e.nestingSuffixEscaped||a.regexEscape(")"),this.resetRegExp()},e.prototype.reset=function(){this.options&&this.init(this.options)},e.prototype.resetRegExp=function(){var e,t,i=this.prefix+"(.+?)"+this.suffix;this.regexp=RegExp(i,"g"),e=this.prefix+this.unescapePrefix+"(.+?)"+this.unescapeSuffix+this.suffix,this.regexpUnescape=RegExp(e,"g"),t=this.nestingPrefix+"(.+?)"+this.nestingSuffix,this.nestingRegexp=RegExp(t,"g")},e.prototype.interpolate=function(e,t,i){function o(e){return e.replace(/\$/g,"$$$$")}var n,r=this,s=void 0,l=void 0,c=function(e){var o,n,s;return e.indexOf(r.formatSeparator)<0?a.getPath(t,e):(o=e.split(r.formatSeparator),n=o.shift().trim(),s=o.join(r.formatSeparator).trim(),r.format(a.getPath(t,n),s,i))};for(this.resetRegExp();s=this.regexpUnescape.exec(e);)n=c(s[1].trim()),e=e.replace(s[0],n),this.regexpUnescape.lastIndex=0;for(;s=this.regexp.exec(e);)l=c(s[1].trim()),"string"!=typeof l&&(l=a.makeString(l)),l||(this.logger.warn("missed to pass in variable "+s[1]+" for interpolating "+e),l=""),l=o(this.escapeValue?a.escape(l):l),e=e.replace(s[0],l),this.regexp.lastIndex=0;return e},e.prototype.nest=function(e,t){function i(e){return e.replace(/\$/g,"$$$$")}function o(e){var t,i;if(e.indexOf(",")<0)return e;t=e.split(","),e=t.shift(),i=t.join(","),i=this.interpolate(i,l);try{l=JSON.parse(i)}catch(t){this.logger.error("failed parsing options string in nesting for key "+e,t)}return e}var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],r=void 0,s=void 0,l=JSON.parse(JSON.stringify(n));for(l.applyPostProcessor=!1;r=this.nestingRegexp.exec(e);)s=t(o.call(this,r[1].trim()),l),"string"!=typeof s&&(s=a.makeString(s)),s||(this.logger.warn("missed to pass in variable "+r[1]+" for interpolating "+e),s=""),s=i(this.escapeValue?a.escape(s):s),e=e.replace(r[0],s),this.regexp.lastIndex=0;return e},e}(),t.default=h},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e){var t,i;if(e&&e.__esModule)return e;if(t={},null!=e)for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function r(e,t){var i,o,n,r=Object.getOwnPropertyNames(t);for(i=0;i<r.length;i++)o=r[i],(n=Object.getOwnPropertyDescriptor(t,o))&&n.configurable&&void 0===e[o]&&Object.defineProperty(e,o,n);return e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){
if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):r(e,t))}function c(e,t){for(var i=e.indexOf(t);-1!==i;)e.splice(i,1),i=e.indexOf(t)}var h,u,d,p,f,_,m,g,v;Object.defineProperty(t,"__esModule",{value:!0}),h=Object.assign||function(e){var t,i,o;for(t=1;t<arguments.length;t++){i=arguments[t];for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},u=function(){function e(e,t){var i,o,n=[],r=!0,s=!1,a=void 0;try{for(i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){s=!0,a=e}finally{try{!r&&i.return&&i.return()}finally{if(s)throw a}}return n}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=i(19),p=n(d),f=i(12),_=o(f),m=i(18),g=o(m),v=function(e){function t(i,o,n){var r,l=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];return s(this,t),r=a(this,e.call(this)),r.backend=i,r.store=o,r.services=n,r.options=l,r.logger=_.default.create("backendConnector"),r.state={},r.queue=[],r.backend&&r.backend.init&&r.backend.init(n,l.backend,l),r}return l(t,e),t.prototype.queueLoad=function(e,t,i){var o=this,n=[],r=[],s=[],a=[];return e.forEach(function(e){var i=!0;t.forEach(function(t){var s=e+"|"+t;o.store.hasResourceBundle(e,t)?o.state[s]=2:o.state[s]<0||(1===o.state[s]?r.indexOf(s)<0&&r.push(s):(o.state[s]=1,i=!1,r.indexOf(s)<0&&r.push(s),n.indexOf(s)<0&&n.push(s),a.indexOf(t)<0&&a.push(t)))}),i||s.push(e)}),(n.length||r.length)&&this.queue.push({pending:r,loaded:{},errors:[],callback:i}),{toLoad:n,pending:r,toLoadLanguages:s,toLoadNamespaces:a}},t.prototype.loaded=function(e,t,i){var o=this,n=e.split("|"),r=u(n,2),s=r[0],a=r[1];t&&this.emit("failedLoading",s,a,t),i&&this.store.addResourceBundle(s,a,i),this.state[e]=t?-1:2,this.queue.forEach(function(i){p.pushPath(i.loaded,[s],a),c(i.pending,e),t&&i.errors.push(t),0!==i.pending.length||i.done||(i.errors.length?i.callback(i.errors):i.callback(),o.emit("loaded",i.loaded),i.done=!0)}),this.queue=this.queue.filter(function(e){return!e.done})},t.prototype.read=function(e,t,i,o,n,r){var s=this;if(o||(o=0),n||(n=250),!e.length)return r(null,{});this.backend[i](e,t,function(a,l){if(a&&l&&o<5)return void setTimeout(function(){s.read.call(s,e,t,i,++o,2*n,r)},n);r(a,l)})},t.prototype.load=function(e,t,i){var o,n,r=this;return this.backend?(o=h({},this.backend.options,this.options.backend),"string"==typeof e&&(e=this.services.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]),n=this.queueLoad(e,t,i),
n.toLoad.length?void(o.allowMultiLoading&&this.backend.readMulti?this.read(n.toLoadLanguages,n.toLoadNamespaces,"readMulti",null,null,function(e,t){e&&r.logger.warn("loading namespaces "+n.toLoadNamespaces.join(", ")+" for languages "+n.toLoadLanguages.join(", ")+" via multiloading failed",e),!e&&t&&r.logger.log("loaded namespaces "+n.toLoadNamespaces.join(", ")+" for languages "+n.toLoadLanguages.join(", ")+" via multiloading",t),n.toLoad.forEach(function(i){var o,n=i.split("|"),s=u(n,2),a=s[0],l=s[1],c=p.getPath(t,[a,l]);c?r.loaded(i,e,c):(o="loading namespace "+l+" for language "+a+" via multiloading failed",r.loaded(i,o),r.logger.error(o))})}):function(){var e=function(e){var t=this,i=e.split("|"),o=u(i,2),n=o[0],r=o[1];this.read(n,r,"read",null,null,function(i,o){i&&t.logger.warn("loading namespace "+r+" for language "+n+" failed",i),!i&&o&&t.logger.log("loaded namespace "+r+" for language "+n,o),t.loaded(e,i,o)})};n.toLoad.forEach(function(t){e.call(r,t)})}()):void(n.pending.length||i())):(this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i())},t.prototype.reload=function(e,t){var i,o=this;this.backend||this.logger.warn("No backend was added via i18next.use. Will not load resources."),i=h({},this.backend.options,this.options.backend),"string"==typeof e&&(e=this.services.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]),i.allowMultiLoading&&this.backend.readMulti?this.read(e,t,"readMulti",null,null,function(i,n){i&&o.logger.warn("reloading namespaces "+t.join(", ")+" for languages "+e.join(", ")+" via multiloading failed",i),!i&&n&&o.logger.log("reloaded namespaces "+t.join(", ")+" for languages "+e.join(", ")+" via multiloading",n),e.forEach(function(e){t.forEach(function(t){var r,s=p.getPath(n,[e,t]);s?o.loaded(e+"|"+t,i,s):(r="reloading namespace "+t+" for language "+e+" via multiloading failed",o.loaded(e+"|"+t,r),o.logger.error(r))})})}):function(){var i=function(e){var t=this,i=e.split("|"),o=u(i,2),n=o[0],r=o[1];this.read(n,r,"read",null,null,function(i,o){i&&t.logger.warn("reloading namespace "+r+" for language "+n+" failed",i),!i&&o&&t.logger.log("reloaded namespace "+r+" for language "+n,o),t.loaded(e,i,o)})};e.forEach(function(e){t.forEach(function(t){i.call(o,e+"|"+t)})})}()},t.prototype.saveMissing=function(e,t,i,o){this.backend&&this.backend.create&&this.backend.create(e,t,i,o),e&&e[0]&&this.store.addResource(e[0],t,i,o)},t}(g.default),t.default=v},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e){var t,i;if(e&&e.__esModule)return e;if(t={},null!=e)for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function r(e,t){var i,o,n,r=Object.getOwnPropertyNames(t);for(i=0;i<r.length;i++)o=r[i],(n=Object.getOwnPropertyDescriptor(t,o))&&n.configurable&&void 0===e[o]&&Object.defineProperty(e,o,n);return e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){
if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):r(e,t))}var c,h,u,d,p,f,_;Object.defineProperty(t,"__esModule",{value:!0}),c=Object.assign||function(e){var t,i,o;for(t=1;t<arguments.length;t++){i=arguments[t];for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},h=i(19),n(h),u=i(12),d=o(u),p=i(18),f=o(p),_=function(e){function t(i,o,n){var r,l=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];return s(this,t),r=a(this,e.call(this)),r.cache=i,r.store=o,r.services=n,r.options=l,r.logger=d.default.create("cacheConnector"),r.cache&&r.cache.init&&r.cache.init(n,l.cache,l),r}return l(t,e),t.prototype.load=function(e,t,i){var o,n=this;if(!this.cache)return i&&i();o=c({},this.cache.options,this.options.cache),"string"==typeof e&&(e=this.services.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]),o.enabled?this.cache.load(e,function(t,o){var r,s,a;if(t&&n.logger.error("loading languages "+e.join(", ")+" from cache failed",t),o)for(r in o)for(s in o[r])"i18nStamp"!==s&&(a=o[r][s])&&n.store.addResourceBundle(r,s,a);i&&i()}):i&&i()},t.prototype.save=function(){this.cache&&this.options.cache&&this.options.cache.enabled&&this.cache.save(this.store.data)},t}(f.default),t.default=_},function(e,t,i){"use strict";function o(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,load:"all",preload:!1,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",saveMissing:!1,saveMissingTo:"fallback",missingKeyHandler:!1,postProcess:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:function(){},parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,overloadTranslationOptionHandler:function(e){return{defaultValue:e[1]}},interpolation:{escapeValue:!0,format:function(e,t,i){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",defaultVariables:void 0}}}function n(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.whitelist&&e.whitelist.indexOf("cimode")<0&&e.whitelist.push("cimode"),e}Object.defineProperty(t,"__esModule",{value:!0}),t.get=o,t.transformOptions=n},function(e,t,i){"use strict";function o(e,t,i){h[e].unsubscribe(i,t)}function n(e,t,i){r(e,t,i)}function r(e,t,i,o){if(h.hasOwnProperty(e)||(h[e]=new c),d[e])return void t.call(i);h[e].subscribe(i,t,o)}function s(e){u.push(e)}function a(e){var t,i,o=[];for(t=1;t<arguments.length;t++)o[t-1]=arguments[t];i=[e].concat(o),
u.forEach(function(e){e.apply(null,i)}),h.hasOwnProperty(e)&&h[e].fire.apply(h[e],o)}function l(e){d[e]&&console.warn("Something went wrong: emitOnce called multiple times with same event ("+e+")"),d[e]=!0,a.apply(null,arguments)}var c,h,u,d;Object.defineProperty(t,"__esModule",{value:!0}),c=i(4),h={},u=[],d={},t.unsubscribe=o,t.on=n,t.subscribe=r,t.subscribeToAll=s,t.emit=a,t.emitOnce=l},,function(e,t,i){"use strict";(function(t,o,n){function r(e){return"cursor"===e||"arrow"===e||"dot"===e}function s(e){!e&&u&&u.stayInDrawingMode.value()||this.tool.setValue(this.cursorTool.value())}function a(e,t){return function(t){e.inFire||(e.inFire=!0,e.fire(t),e.inFire=!1)}}function l(){X||(g.setValue(TVSettings.getValue("chart.cursorPreference","cursor")),g.subscribe(function(e){r(e)&&v.setValue(e)},{callWithLast:!0}),v.subscribe(function(e){e&&TVSettings.setValue("chart.cursorPreference",e)}),u=new c("drawings"),d=new n,p=new n,f=new n,_=new n,d.setValue(!1),p.setValue(!1),f.setValue(!1),_.setValue(!1),g.subscribe(function(){h.emit("onSelectedLineToolChanged")}),X=!0)}var c=i(7).DefaultProperty,h=i(108),u=null,d=null,p=null,f=null,_=null,m=new t,g=new t,v=new t,y=new o,b=new o,S=new o,w=new o,T=new o,P=new o,C=new o,x=new o,E=new o,L=new o,I=new o,A=new o,k=new o,M=new o,O=new o,D=a(y),V=a(b),R=a(S),B=a(w),N=a(T),z=a(P),F=a(C),$=a(x),H=a(E),W=a(L),U=a(I),j=a(A),q=a(k),G=a(M),Y=a(O),X=!1;e.exports={tool:g,cursorTool:v,toolIsCursor:r,resetToCursor:s,init:l,createdLineTool:y,continuedLineTool:b,cancelledLineTool:S,createLineTool:D,continueLineTool:V,cancelLineTool:R,startedMovingLineTool:w,movedLineTool:T,finishedMovingLineTool:P,startMovingLineTool:B,moveLineTool:N,finishMovingLineTool:z,startedChangingLineTool:C,changedLineTool:x,finishedChangingLineTool:E,startChangingLineTool:F,changeLineTool:$,finishChangingLineTool:H,removedLineTool:L,removeLineTool:W,restoredLineTool:M,restoreLineTool:G,restoredLineToolState:O,restoreLineToolState:Y,finishedLineTool:I,finishLineTool:U,changedLineStyle:A,changeLineStyle:j,copiedLineTool:k,copyLineTool:q,properties:function(){return u},hideAllDrawings:function(){return d},hideMarksOnBars:function(){return f},lockDrawings:function(){return p},drawOnAllCharts:function(){return u.drawOnAllCharts},lockTimeAxis:function(){return _},lockTimeAxisTime:m}}).call(t,i(22),i(4),i(37))},function(e,t,i){var o,n;!function(r,s){"object"==typeof e&&e.exports?e.exports=s():(o=s,void 0!==(n="function"==typeof o?o.call(t,i,t,e):o)&&(e.exports=n))}(0,function(){"use strict";function e(e,t){var i,o=document.createElement(e||"div");for(i in t)o[i]=t[i];return o}function t(e){for(var t=1,i=arguments.length;t<i;t++)e.appendChild(arguments[t]);return e}function i(e,t,i,o){var n=["opacity",t,~~(100*e),i,o].join("-"),r=.01+i/o*100,s=Math.max(1-(1-e)/t*(100-r),e),a=c.substring(0,c.indexOf("Animation")).toLowerCase(),l=a&&"-"+a+"-"||"";return p[n]||(h.insertRule("@"+l+"keyframes "+n+"{0%{opacity:"+s+"}"+r+"%{opacity:"+e+"}"+(r+.01)+"%{opacity:1}"+(r+t)%100+"%{opacity:"+e+"}100%{opacity:"+s+"}}",h.cssRules.length),
p[n]=1),n}function o(e,t){var i,o,n=e.style;if(t=t.charAt(0).toUpperCase()+t.slice(1),void 0!==n[t])return t;for(o=0;o<d.length;o++)if(i=d[o]+t,void 0!==n[i])return i}function n(e,t){for(var i in t)e.style[o(e,i)||i]=t[i];return e}function r(e){var t,i,o;for(t=1;t<arguments.length;t++){i=arguments[t];for(o in i)void 0===e[o]&&(e[o]=i[o])}return e}function s(e,t){return"string"==typeof e?e:e[t%e.length]}function a(e){this.opts=r(e||{},a.defaults,f)}function l(){function i(t,i){return e("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',i)}h.addRule(".spin-vml","behavior:url(#default#VML)"),a.prototype.lines=function(e,o){function r(){return n(i("group",{coordsize:h+" "+h,coordorigin:-c+" "+-c}),{width:h,height:h})}function a(e,a,l){t(d,t(n(r(),{rotation:360/o.lines*e+"deg",left:~~a}),t(n(i("roundrect",{arcsize:o.corners}),{width:c,height:o.scale*o.width,left:o.scale*o.radius,top:-o.scale*o.width>>1,filter:l}),i("fill",{color:s(o.color,e),opacity:o.opacity}),i("stroke",{opacity:0}))))}var l,c=o.scale*(o.length+o.width),h=2*o.scale*c,u=-(o.width+o.length)*o.scale*2+"px",d=n(r(),{position:"absolute",top:u,left:u});if(o.shadow)for(l=1;l<=o.lines;l++)a(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=o.lines;l++)a(l);return t(e,d)},a.prototype.opacity=function(e,t,i,o){var n=e.firstChild;o=o.shadow&&o.lines||0,n&&t+o<n.childNodes.length&&(n=n.childNodes[t+o],n=n&&n.firstChild,(n=n&&n.firstChild)&&(n.opacity=i))}}var c,h,u,d=["webkit","Moz","ms","O"],p={},f={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"};return a.defaults={},r(a.prototype,{spin:function(t){var i,o,r,s,a,l,h,u,d,p;return this.stop(),i=this,o=i.opts,r=i.el=e(null,{className:o.className}),n(r,{position:o.position,width:0,zIndex:o.zIndex,left:o.left,top:o.top}),t&&t.insertBefore(r,t.firstChild||null),r.setAttribute("role","progressbar"),i.lines(r,i.opts),c||(s=0,a=(o.lines-1)*(1-o.direction)/2,h=o.fps,u=h/o.speed,d=(1-o.opacity)/(u*o.trail/100),p=u/o.lines,function e(){s++;for(var t=0;t<o.lines;t++)l=Math.max(1-(s+(o.lines-t)*p)%u*d,o.opacity),i.opacity(r,t*o.direction+a,l,o);i.timeout=i.el&&setTimeout(e,~~(1e3/h))}()),i},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=void 0),this},lines:function(o,r){function a(t,i){return n(e(),{position:"absolute",width:r.scale*(r.length+r.width)+"px",height:r.scale*r.width+"px",background:t,boxShadow:i,transformOrigin:"left",transform:"rotate("+~~(360/r.lines*h+r.rotate)+"deg) translate("+r.scale*r.radius+"px,0)",borderRadius:(r.corners*r.scale*r.width>>1)+"px"})}for(var l,h=0,u=(r.lines-1)*(1-r.direction)/2;h<r.lines;h++)l=n(e(),{position:"absolute",top:1+~(r.scale*r.width/2)+"px",transform:r.hwaccel?"translate3d(0,0,0)":"",opacity:r.opacity,
animation:c&&i(r.opacity,r.trail,u+h*r.direction,r.lines)+" "+1/r.speed+"s linear infinite"}),r.shadow&&t(l,n(a("#000","0 0 4px #000"),{top:"2px"})),t(o,t(l,a(s(r.color,h),"0 0 1px rgba(0,0,0,.1)")));return o},opacity:function(e,t,i){t<e.childNodes.length&&(e.childNodes[t].style.opacity=i)}}),"undefined"!=typeof document&&(h=function(){var i=e("style",{type:"text/css"});return t(document.getElementsByTagName("head")[0],i),i.sheet||i.styleSheet}(),u=n(e("group"),{behavior:"url(#default#VML)"}),!o(u,"transform")&&u.adj?l():c=o(u,"animation")),a})},function(e,t,i){"use strict";(function(t){function o(e,t){var i,o,n,r=Object.keys(u);for(i=0;i<r.length;i++)if(o=u[r[i]],n=o.filter(function(t){return-1!==e.indexOf(t)}),n.length)return r[i];return!1}function n(){d._cache={}}var r=i(9).assert,s=i(39),a=i(20).trackEvent,l=i(53).TVXWindowEvents,c=i(0).getLogger("Pine.ScriptLib"),h=i(57).Telemetry,u={fast:["delete","get","is_auth_to_get","is_auth_to_write","parse_title","rename"],medium:["list","eval_pine_ex"],slow:["process_legacy","publish","save","translate","translate_source","gen_alert"]},d={};d._isAuthCache=new n,d._pineDeleted=new t,l.on("TVScriptModified",function(e){d.clearSavedScriptsCache(),d.scriptUpdater()&&d.scriptUpdater().onTVScriptModified(JSON.parse(e))}),l.on("TVScriptDeleted",function(e){d.clearAllCaches(),d.scriptUpdater()&&d.scriptUpdater().onTVScriptDeleted(JSON.parse(e))}),l.on("TVScriptRenamed",function(e){d.clearSavedScriptsCache(),d.scriptUpdater()&&d.scriptUpdater().onTVScriptRenamed(JSON.parse(e))}),l.on("TVScriptLegacyPineProcessed",function(e){d.clearSavedScriptsCache(),d.scriptUpdater()&&d.scriptUpdater().onTVScriptLegacyPineProcessed(JSON.parse(e))}),d.PINE_FACADE_URL=function(){return window.PINE_URL},d.onPineDeleted=function(){return d._pineDeleted},d._pineFacadeAjax=function(e,t,i,n){var r=o(t,u),s=Date.now(),a="GET"===e?void 0:{"X-CSRFToken":$.cookie("csrftoken")},l=n?void 0:{withCredentials:!0};return $.ajax({url:d.PINE_FACADE_URL()+t,type:e,data:i||{},headers:a,xhrFields:l}).done(function(){var e=Date.now()-s;h.sendReport("pine",r+"_group_time_frame",{v:e}),h.sendReport("pine",r+"_group_ok")}).fail(function(){var e=Date.now()-s;h.sendReport("pine",r+"_group_time_frame",{v:e}),h.sendReport("pine",r+"_group_error")})},d.translateScriptAsync=function(e,t,i,o){var n,r,s;return a("Pine","ScriptLib.translateScript"),o=!!o,n=$.Deferred(),r="/translate_source/"+encodeURIComponent(t)+"/?is_pine_ex="+o,s={user_name:window.user&&window.user.username,source:e,inputs:JSON.stringify(i||{})},d._pineFacadeAjax("POST",r,s).done(function(e,t,i){var o=JSON.parse(e);d._translateScriptAsyncDone(n,o)}).fail(function(e,t,i){d._anyRequestAsyncFail(n,e)}),n.promise()},d.translateScriptAsync2=function(e,t){var i,o,n,r,s;return c.logNormal("translateScriptAsync2, pineId="+e+" pineVersion="+t),a("Pine","ScriptLib.translateScript"),i=$.Deferred(),o=0!==e.indexOf("USER"),n=window.user&&window.user.username,r="?user_name="+encodeURIComponent(n),s="/translate/"+encodeURIComponent(e)+"/"+t+"/",o||null==n||(s+=r),
d._pineFacadeAjax("GET",s,void 0,o).done(function(e,o,n){var r,s,a=JSON.parse(e);d._translateScriptAsyncDone(i,a),(r=t<0)&&(d.clearSavedScriptsCache(),s={scriptMetaInfo:a.result.metaInfo},l.emit("TVScriptLegacyPineProcessed",JSON.stringify(s)),setTimeout(function(){s.isSelfCall=!0,null!=d.scriptUpdater()&&d.scriptUpdater().onTVScriptLegacyPineProcessed(s)},0))}).fail(function(e,t,o){d._anyRequestAsyncFail(i,e)}),i.promise()},d._translateScriptAsyncDone=function(e,t){if(t.error)e.reject(d._readableError(t.error));else if(t.success)e.resolve(t.result.metaInfo,t.result.IL);else{var i=t.result?t.result.metaInfo:null;e.reject(t.reason,i)}},d._saveScriptAsyncDone=function(e,t){if(t.error)e.reject(d._readableError(t.error));else if(t.success)e.resolve(t.result.metaInfo);else{var i=t.result?t.result.metaInfo:null;e.resolve(i,t.reason)}},d._readableError=function(e,t){return t},d._anyRequestAsyncFail=function(e,t){0===d.PINE_FACADE_URL().indexOf("http")&&c.logError(t.responseText),e.reject(d._readableError(t.status,t.statusText))},d.isAuthToWritePineScript=function(e){var t,i,o="write_"+e,n=d._isAuthCache.getPromise(o);return null!==n?n:(a("Pine","ScriptLib.isAuthToWritePineScript"),t=$.Deferred(),i="/is_auth_to_write/"+encodeURIComponent(e),d._pineFacadeAjax("GET",i).done(function(e,i,o){var n=JSON.parse(e);t.resolve(n)}).fail(function(e,i,o){d._anyRequestAsyncFail(t,e)}),d._isAuthCache.setPromise(o,t.promise()))},d.isAuthToGetPineSourceCode=function(e,t){var i,o,n="get_"+e+"_"+t,r=d._isAuthCache.getPromise(n);return null!==r?r:(a("Pine","ScriptLib.isAuthToGetPineSourceCode"),i=$.Deferred(),o="/is_auth_to_get/"+encodeURIComponent(e)+"/"+t,d._pineFacadeAjax("GET",o).done(function(e,t,o){var n=JSON.parse(e);i.resolve(n)}).fail(function(e,t,o){d._anyRequestAsyncFail(i,e)}),d._isAuthCache.setPromise(n,i.promise()))},n.prototype.getPromise=function(e){var t=d._cache[e];return void 0===t?null:void 0!==t.value?$.Deferred().resolve(t.value):void 0!==t.promise?t.promise:null},n.prototype.setPromise=function(e,t){return d._cache[e]={promise:t},t.done(function(t){d._cache[e]={value:t}}).fail(function(t){delete d._cache[e]}),t},d.getPineSourceCode=function(e,t,i){var o,n,r;return a("Pine","ScriptLib.getPineSourceCode"),o=$.Deferred(),n="?no_4xx="+!!i,r="/get/"+encodeURIComponent(e)+"/"+t+n,d._pineFacadeAjax("GET",r).done(function(e,t,i){var n=JSON.parse(e);!1===n.success?o.reject(n.reason):o.resolve(n)}).fail(function(e,t,i){d._anyRequestAsyncFail(o,e)}),o.promise()},d._removeDefaultDraft=function(e){var t=e.result.metaInfo.id,i=s.parseIdString(t).id,o="study_"+i;TradingView.saveDefaults(o,{})},d.saveNewDraft=function(e){var t,i,o,n;return a("Pine","ScriptLib.saveNewDraft"),t=$.Deferred(),null==e||""===e?t.reject($.t("Cannot save empty source code")):(i=window.user&&window.user.username,o="/save/new_draft/?user_name="+encodeURIComponent(i)+"&allow_use_existing_draft=true",n={source:e},d._pineFacadeAjax("POST",o,n).done(function(e,i,o){var n=JSON.parse(e);d._removeDefaultDraft(n),d._translateScriptAsyncDone(t,n)}).fail(function(e,i,o){
d._anyRequestAsyncFail(t,e)}),t.promise())},d.saveNextDraft=function(e,t,i){var o,n,r,s;return a("Pine","ScriptLib.saveNextDraft"),o=$.Deferred(),null==t||""===t?o.reject($.t("Cannot save empty source code")):(n=window.user&&window.user.username,i=!!i,r="/save/next_draft/"+encodeURIComponent(e)+"/?user_name="+encodeURIComponent(n)+"&allow_create_new="+i,s={source:t},d._pineFacadeAjax("POST",r,s).done(function(e,t,i){var n=JSON.parse(e);d._removeDefaultDraft(n),d._translateScriptAsyncDone(o,n)}).fail(function(e,t,i){d._anyRequestAsyncFail(o,e)}),o.promise())},d.processLegacy=function(e,t){var i,o,n,r;return a("Pine","ScriptLib.processLegacy"),i=$.Deferred(),o=window.user&&window.user.username,n="/process_legacy/"+encodeURIComponent(e)+"/?user_name="+encodeURIComponent(o),r={},null!=t&&""!==t&&(r.source=t),d._pineFacadeAjax("POST",n,r).done(function(e,t,o){var n=JSON.parse(e);d._translateScriptAsyncDone(i,n)}).fail(function(e,t,o){d._anyRequestAsyncFail(i,e)}),i.promise()},d.generateAlert=function(e){var t,i,o,n,r;return a("Pine","ScriptLib.generateAlert"),t=$.Deferred(),i=window.user&&window.user.username,o="/gen_alert/?user_name="+encodeURIComponent(i),n={alert_info:e},r=Date.now(),d._pineFacadeAjax("POST",o,n).done(function(e,i,o){h.sendReport("alerts","compilation_ok");var n=JSON.parse(e);d._translateScriptAsyncDone(t,n)}).fail(function(e,i,o){h.sendReport("alerts","compilation_error"),d._anyRequestAsyncFail(t,e)}).always(function(){var e=Date.now()-r;h.sendReport("alerts","compilation_time_frame",{v:e})}),t.promise()},d.createScriptStubNoSrc=function(e,t){var i,o;return c.logNormal("createScriptStubNoSrc"),i=d._createScriptStubTemplate(),o={shortDescription:e,id:"Script$"+t+"@tv-scripting-1",scriptIdPart:t},TradingView.merge(i,o)},d._createScriptStubTemplate=function(){return{_metainfoVersion:s.CURRENT_METAINFO_FORMAT_VERSION,isTVScript:!0,isTVScriptStub:!0,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#000080"}},precision:4,inputs:{text:"na~$0;$0()~$1"}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"None",shortDescription:"TODO: set value",is_price_study:!1,inputs:[{defval:"na~$0;$0()~$1",id:"text",name:"ILScript",type:"text",isHidden:!0}],id:"TODO: set value",scriptIdPart:"TODO: set value"}},d.parseScriptTitleAsync=function(e){var t,i;return a("Pine","ScriptLib.parseScriptTitle"),t=$.Deferred(),null==e||""===e?t.reject($.t("Cannot save empty source code")):(i={user_name:window.user&&window.user.username,source:e},d._pineFacadeAjax("POST","/parse_title/",i).done(function(e,i,o){var n=JSON.parse(e);n.error?t.reject(d._readableError(n.error)):n.success?t.resolve(n.result):t.reject(n.reason)}).fail(function(e){d._anyRequestAsyncFail(t,e)}),t.promise())},d.evalMetaInfoExprsAsync=function(e,t){var i,o;return a("Pine","ScriptLib.evalMetaInfoExprs"),i=$.Deferred(),o={username:window.user&&window.user.username,source:e,inputs:JSON.stringify(t||{})},
d._pineFacadeAjax("POST","/eval_pine_ex/",o).done(function(e,t,o){var n=JSON.parse(e);n.error?i.reject(d._readableError(n.error)):n.success?i.resolve(n.result):i.reject(n.reason)}).fail(function(e){d._anyRequestAsyncFail(i,e)}),i.promise()},d.patchPropertiesAsync=function(e,t,i){var o,n,s;return c.logNormal("patchPropertiesAsync"),o=$.Deferred(),t.TVScriptMetaInfoExprs?(n=t.TVScriptMetaInfoExprs.tree,s=t.TVScriptMetaInfoExprs.patchMap,d.evalMetaInfoExprsAsync(n,i).done(function(t){var i,n,a,l,c,h,u,d,p,f=t.rootValues,_=Object.keys(s);for(i=0;i<_.length;i++){for(n=_[i],a=s[n],l=f[a],c=n.split("."),"defaults"===c[0]&&c.splice(0,1),r(c.length>1,"Unexpectedly short json path"),h=e,u=0;u<c.length-1;++u)d=c[u],h=h[d];p=c[c.length-1],h[p].setValue(l)}o.resolve(e)}).fail(function(e){o.reject(e)}),o.promise()):o.resolve(e)},d.scriptUpdater=function(){return window.scriptUpdater},d.clearAllCaches=function(){d.clearIsAuthToCaches(),d.clearSavedScriptsCache()},d.clearIsAuthToCaches=function(e){e?Object.keys(d._cache).filter(function(t){return t.indexOf(e)>=0}).forEach(function(e){delete d._cache[e]}):d._isAuthCache=new n},d.clearSavedScriptsCache=function(e){delete d._userScriptsDfd},d.requestUserScripts=function(e){var t;return a("Pine","ScriptLib.requestUserScripts"),window.is_authenticated?(d._userScriptsDfd||(d._userScriptsDfd=$.Deferred(),t=d._userScriptsDfd,d._pineFacadeAjax("GET","/list?filter=saved").done(function(e,i,o){var n=JSON.parse(e);t.resolve(n)}).fail(function(e){d._anyRequestAsyncFail(t,e)})),t=d._userScriptsDfd):t=$.Deferred().resolve([]),"function"==typeof e&&t.done(e),t.promise()},d.setUserScripts=function(e){d._userScriptsDfd||(d._userScriptsDfd=$.Deferred().resolve(e))},d.requestUserPublishedScripts=function(e,t){var i;return a("Pine","ScriptLib.requestUserPublishedScripts"),window.is_authenticated?(!t&&d._userPublishedScriptsDfd||(d._userPublishedScriptsDfd=$.Deferred(),i=d._userPublishedScriptsDfd,d._pineFacadeAjax("GET","/list?filter=published").done(function(e,t,o){var n=JSON.parse(e);i.resolve(n)}).fail(function(e){d._anyRequestAsyncFail(i,e)})),i=d._userPublishedScriptsDfd):i=$.Deferred().resolve([]),"function"==typeof e&&i.done(e),i.promise()},d.requestPineEditorNewTemplateScripts=function(e){var t,i;return a("Pine","ScriptLib.requestPineEditorNewTemplateScripts"),t=!0,i=$.Deferred(),d._pineFacadeAjax("GET","/list/?filter=template",void 0,t).done(function(e,t,o){var n=JSON.parse(e);i.resolve(n)}).fail(function(e){d._anyRequestAsyncFail(i,e)}),"function"==typeof e&&i.done(e),i.promise()},d.requestBuiltinAndUserScripts=function(e){var t,i;return a("Pine","ScriptLib.requestBuiltinAndUserScripts"),c.logNormal("Request built-in and user scripts"),t=window.user&&window.user.username,i=$.Deferred(),$.when(d._pineFacadeAjax("GET","/list?filter=saved&user_name="+encodeURIComponent(t),void 0,!1),d._pineFacadeAjax("GET","/list?filter=standard",void 0,!0)).done(function(e,t){var o,n,r;c.logNormal("Request built-in and user scripts finished"),o=JSON.parse(e[0]),n=JSON.parse(t[0]),r=o.concat(n),i.resolve(r)
}).fail(function(e){c.logWarn("Request built-in and user scripts finished with fail"),d._anyRequestAsyncFail(i,e)}),"function"==typeof e&&i.done(e),i.promise()},d.requestPineAddons=function(e){a("Pine","ScriptLib.requestPineAddons");var t=$.Deferred();return d._pineFacadeAjax("GET","/list?filter=addon&pine_id_prefix="+e).done(function(e){t.resolve(JSON.parse(e))}).fail(function(e){d._anyRequestAsyncFail(t,e)}),t},d._updateAliveScriptInstances=function(e,t){var i={};i.scriptMetaInfo=e.result.metaInfo,i.scriptVersionToUpdate=t,l.emit("TVScriptModified",JSON.stringify(i)),setTimeout(function(){i.isSelfCall=!0,null!=d.scriptUpdater()&&d.scriptUpdater().onTVScriptModified(i)},0)},d.saveNew=function(e,t,i,o){var n,r,s,l,c;return a("Pine","ScriptLib.saveNew"),n=$.Deferred(),null==e||""===e?n.reject($.t("Cannot save empty source code")):(r=window.user&&window.user.username,s=i?"&allow_overwrite=true":"",l="/save/new/?name="+encodeURIComponent(t)+"&user_name="+encodeURIComponent(r)+s,c={source:e},d._pineFacadeAjax("POST",l,c).done(function(e,t,i){d.clearSavedScriptsCache();var r=JSON.parse(e);d._updateAliveScriptInstances(r,o),d._saveScriptAsyncDone(n,r)}).fail(function(e,t,i){d._anyRequestAsyncFail(n,e)}),n.promise())},d.saveNext=function(e,t,i,o,n){var r,s,l,c,h;return a("Pine","ScriptLib.saveNext"),r=null!=i?"&name="+encodeURIComponent(i):"",s=$.Deferred(),null==t||""===t?s.reject($.t("Cannot save empty source code")):(l=window.user&&window.user.username,c="/save/next/"+encodeURIComponent(e)+"/?user_name="+encodeURIComponent(l)+"&allow_create_new="+!!n+r,h={source:t},d._pineFacadeAjax("POST",c,h).done(function(e,t,i){d.clearSavedScriptsCache();var n=JSON.parse(e);d._updateAliveScriptInstances(n,o),d._saveScriptAsyncDone(s,n)}).fail(function(e,t,i){d._anyRequestAsyncFail(s,e)}),s.promise())},d.deletePine=function(e){var t,i,o;return a("Pine","ScriptLib.deletePine"),t=$.Deferred(),i=window.user&&window.user.username,o="/delete/"+encodeURIComponent(e)+"/?user_name="+encodeURIComponent(i),d._pineFacadeAjax("POST",o).done(function(i,o,n){d.clearIsAuthToCaches(e),d.clearSavedScriptsCache(),t.resolve(i);var r={scriptIdPart:e};l.emit("TVScriptDeleted",JSON.stringify(r)),setTimeout(function(){r.isSelfCall=!0,null!=d.scriptUpdater()&&d.scriptUpdater().onTVScriptDeleted(r),d._pineDeleted.fire(e)},0)}).fail(function(e,i,o){d._anyRequestAsyncFail(t,e)}),t.promise()},d.renamePine=function(e,t,i){var o,n,r;return a("Pine","ScriptLib.renamePine"),o=$.Deferred(),n=window.user&&window.user.username,r="/rename/"+encodeURIComponent(e)+"/?name="+encodeURIComponent(t)+"&user_name="+encodeURIComponent(n)+"&force="+encodeURIComponent(!!i),d._pineFacadeAjax("POST",r).done(function(i,n,r){d.clearSavedScriptsCache();var s={scriptIdPart:e,scriptName:t};l.emit("TVScriptRenamed",JSON.stringify(s)),setTimeout(function(){s.isSelfCall=!0,null!=d.scriptUpdater()&&d.scriptUpdater().onTVScriptRenamed(s)},0),o.resolve(i)}).fail(function(e,t,i){d._anyRequestAsyncFail(o,e)}),o.promise()},d.publishNew=function(e,t){var i,o,n,r
;return a("Pine","ScriptLib.publishNew"),i=$.Deferred(),o=window.user&&window.user.username,n="/publish/new/?access="+encodeURIComponent(t)+"&user_name="+encodeURIComponent(o),r={source:e},d._pineFacadeAjax("POST",n,r).done(function(e,t,o){d.clearSavedScriptsCache();var n=JSON.parse(e);i.resolve(n)}).fail(function(e,t,o){d._anyRequestAsyncFail(i,e)}),i.promise()},d.publishNext=function(e,t){var i,o,n,r;return c.logNormal("ScriptLib.publishNext","pine"),a("Pine","ScriptLib.publishNext"),i=$.Deferred(),o=window.user&&window.user.username,n="/publish/next/"+encodeURIComponent(t)+"?user_name="+encodeURIComponent(o),r={source:e},d._pineFacadeAjax("POST",n,r).done(function(e,t,o){d.clearSavedScriptsCache();var n=JSON.parse(e);n.success||i.reject(n.reason),i.resolve(n)}).fail(function(e,t,o){d._anyRequestAsyncFail(i,e)}),i.promise()},d.tvScriptingPkgVersion=function(e){c.logNormal("tvScriptingPkgVersion");var t;try{t=s.findStudyMetaInfo(e,"Script@tv-scripting")}catch(e){throw Error("Metainfo of 'tv-scripting' package is not found")}return t.version},loginStateChange.subscribe(d,d.clearAllCaches),e.exports=d}).call(t,i(4))},function(e,t,i){"use strict";function o(e){return"number"==typeof e&&isFinite(e)}function n(e){return"number"==typeof e&&e%1==0}function r(e){return!(e<=0||e>0)}function s(e){return Math.round(1e10*e)/1e10}function a(e,t){var i=e/t,o=Math.floor(i),n=i-o;return n>2e-10?s(n>.5?(o+1)*t:o*t):e}Object.defineProperty(t,"__esModule",{value:!0}),t.isNumber=o,t.isInteger=n,t.isNaN=r,t.fixComputationError=s,t.alignTo=a},function(e,t,i){function o(){this._data=null,this._hittest=new n(n.MOVEPOINT)}var n,r,s,a;i(35),n=i(11),r=i(91).LineEnd,s=i(51).distanceToSegment,a=i(42).extendAndClipLineSegment,o.prototype.setData=function(e){this._data=e},o.prototype.setHitTest=function(e){this._hittest=e},o.prototype.drawArrow=function(e,t,i,o){var n,r,s,a,l,c,h,u,d;t.subtract(e).length()<1||(n=t.subtract(e).normalized(),r=5*o,s=n.scaled(r),a=t.subtract(s),l=n.transposed(),c=3*o,h=l.scaled(c),u=a.add(h),d=a.subtract(h),CanvasEx.drawLine(i,Math.round(u.x),Math.round(u.y),t.x,t.y),CanvasEx.drawLine(i,Math.round(d.x),Math.round(d.y),t.x,t.y))},o.prototype.extendAndClipLineSegment=function(e,t){return a(e,t,this._data.width,this._data.height,this._data.extendleft,this._data.extendright)},o.prototype.drawCircle=function(e,t,i,o){o=$.extend({fillStyle:"#000000"},o),t.save(),t.fillStyle=o.fillStyle,t.beginPath(),t.arc(e.x,e.y,i,0,2*Math.PI,!1),t.fill(),o.strokeWidth&&(t.lineWidth=o.strokeWidth,t.stroke()),t.restore()},o.prototype.draw=function(e){var t,i,o,n,r;null===this._data||this._data.points&&this._data.points.length<2||this._data.floatPoints&&this._data.floatPoints.length<2||(e.lineCap="butt",e.strokeStyle=this._data.color,e.lineWidth=this._data.linewidth,e.lineStyle=this._data.linestyle,t=this._data.floatPoints||this._data.points,i=t[0],o=t[1],this._data.overlayLineEndings?n=[$.extend(!0,{},i),$.extend(!0,{},o)]:this.drawEnds(e,[i,o]),r=this.extendAndClipLineSegment(i,o),
null!==r&&this._data.linewidth>0&&CanvasEx.drawLine(e,r[0].x,r[0].y,r[1].x,r[1].y),this._data.overlayLineEndings&&this.drawEnds(e,n))},o.prototype.drawEnds=function(e,t){var i=t[0],o=t[1];switch(this._data.leftend){case r.Arrow:this.drawArrow(o,i,e,e.lineWidth);break;case r.Circle:this.drawCircle(i,e,e.lineWidth,this._data.endstyle)}switch(this._data.rightend){case r.Arrow:this.drawArrow(i,o,e,e.lineWidth);break;case r.Circle:this.drawCircle(o,e,e.lineWidth,this._data.endstyle)}},o.prototype.hitTest=function(e){var t,i,o,n,r,a;return null===this._data||this._data.points&&this._data.points.length<2?null:this._data.floatPoints&&this._data.floatPoints.length<2?null:(t=TradingView.isMobile.any()?24:3,i=this._data.floatPoints||this._data.points,o=i[0],n=i[1],r=this.extendAndClipLineSegment(o,n),null!==r&&(a=s(r[0],r[1],e),a.distance<=t)?this._hittest:null)},t.TrendLineRenderer=o},function(e,t,i){"use strict";function o(e,t,i,o){var n,r;for(this.m_study=e,this.m_series=t,this.m_model=i,this._plotName=o,this.m_items=[],this._invalidated=!0,this._isMarkersEnabled=j.enabled("source_selection_markers"),n=this.m_study.metaInfo().plots,this._colorer=null,this._palette=null,this._paletterProps=null,this._plotIndex=0,r=0;r<n.length;r++)n[r].id===this._plotName&&(this._plotIndex=r),this.m_study.isSelfColorerPlot(r)&&n[r].target===this._plotName&&(this._colorer=r,this._palette=this.m_study.metaInfo().palettes[n[r].palette],this._paletterProps=this.m_study.properties().palettes[n[r].palette])}function n(e,t,i,o){var n,r;for(this._study=e,this._series=t,this._model=i,this._plotName=o,this._items=[],this._invalidated=!0,this._isMarkersEnabled=j.enabled("source_selection_markers"),n=this._study.metaInfo().plots,r=0;r<n.length;r++)n[r].id===this._plotName&&(this._plotIndex=r,d(this._study.isBgColorerPlot(r),"Plot '"+this._plotName+"' is not a background colorer!"))}function r(e,t,i,o){var n,r;for(this.m_study=e,this.m_series=t,this.m_model=i,this.m_plotName=o,this.m_items=[],this.m_invalidated=!0,this._isMarkersEnabled=j.enabled("source_selection_markers"),this.m_selectionData=null,this.m_plotIndex=null,n=this.m_study.metaInfo().plots,r=0;r<n.length;r++)if(n[r].id===this.m_plotName){this.m_plotIndex=r;break}for(n=this.m_study.metaInfo().plots,this._colorer=null,this._textColorer=null,this._palette=null,this._textPalette=null,this._paletterProps=null,this._textPaletterProps=null,this._plotIndex=0,r=0;r<n.length;r++)n[r].id===this.m_plotName&&(this._plotIndex=r),this.m_study.isSelfColorerPlot(r)&&n[r].target===this.m_plotName&&(this._colorer=r,this._palette=this.m_study.metaInfo().palettes[n[r].palette],this._paletterProps=this.m_study.properties().palettes[n[r].palette]),this.m_study.isTextColorerPlot(r)&&n[r].target===this.m_plotName&&(this._textColorer=r,this._textPalette=this.m_study.metaInfo().palettes[n[r].palette],this._textPaletterProps=this.m_study.properties().palettes[n[r].palette])}function s(e,t,i,o){r.call(this,e,t,i,o)}function a(e,t,i,o){s.call(this,e,t,i,o)}function l(e,t,i,o){r.call(this,e,t,i,o),this._maxAbsValue=0}
function c(e,t,i,o){var n,r;for(this.m_study=e,this.m_series=t,this.m_model=i,this.m_plotName=o,this.m_bars=[],this._invalidated=!0,this._isMarkersEnabled=j.enabled("source_selection_markers"),n=this.m_study.metaInfo().plots,this._colorer=null,this._palette=null,this._paletterProps=null,this._ohlcPlotIndexes={},r=0;r<n.length;r++)n[r].target===this.m_plotName&&(this.m_study.isOHLCOpenPlot(r)&&(this._ohlcPlotIndexes[TradingView.OPEN_PLOT]=r),this.m_study.isOHLCHighPlot(r)&&(this._ohlcPlotIndexes[TradingView.HIGH_PLOT]=r),this.m_study.isOHLCLowPlot(r)&&(this._ohlcPlotIndexes[TradingView.LOW_PLOT]=r),this.m_study.isOHLCClosePlot(r)&&(this._ohlcPlotIndexes[TradingView.CLOSE_PLOT]=r),this.m_study.isOHLCColorerPlot(r)&&(this._colorer=r,this._palette=this.m_study.metaInfo().palettes[n[r].palette],this._paletterProps=this.m_study.properties().palettes[n[r].palette]))}function h(e,t,i,o){c.call(this,e,t,i,o)}function u(e,t,i,o){c.call(this,e,t,i,o)}var d=i(9).assert,p=i(8).Point,f=i(55),_=f.rgbToHsl,m=f.hslToRgb,g=f.rgbToHexString,v=f.parseRgb,y=f.parseRgba,b=i(11),S=i(155),w=S.SelectionRenderer,T=S.SelectionRendererArrowsUpDown,P=i(476).PaneRendererBars,C=i(659).PaneRendererHistogram,x=i(660).PaneRendererColumns,E=i(271).PaneRendererLine,L=i(477).PaneRendererArea,I=i(471).PaneRendererCandles,A=i(661).PaneRendererCross,k=i(662).PaneRendererCircles,M=i(274).PaneRendererArrowsUpDownItem,O=i(274).PaneRendererArrowsUpDown,D=i(638).PaneRendererUnicodeChar,V=i(663).PaneRendererBackground,R=i(664).PaneRendererStepLine,B=i(478),N=i(41).CompositeRenderer,z=i(275),F=i(36).clamp,$=i(92),H=i(665),W=i(33),U=i(24).PlotRowSearchMode,j=i(3);i(666),i(667),i(668),i(669),i(670),i(671),i(672),i(479),i(673),o.isIndexValid=function(e,t){return null!==e&&e>=0&&e<t._length()},o.prototype.items=function(){return this.m_items},o.prototype.update=function(){this._invalidated=!0},o.prototype._updateImpl=function(){var e,t,i,n,r,s,a,l,c,h,u,d,f,_,m,g,v,y,S,w,T,P,C,x,E,L,I;if(this._histogramBase=null,this.m_items=[],!(this.m_model.timeScale().isEmpty()||this.m_study.priceScale().isEmpty()||null===(e=this.m_model.timeScale().visibleBars())||(t=this.m_series.nearestIndex(e.firstBar(),U.NearestRight),i=this.m_series.nearestIndex(e.lastBar(),U.NearestLeft),n=this.m_study.offset(this._plotName),n>0?(t-=n,i+=n):(t+=n,i-=n),(r=this.m_study.getMinFirstBarIndexForPlot(this._plotName))>i))){if(t=Math.max(r,t),s=this.m_study.properties().styles[this._plotName],a=s.plottype.value(),l=[$.PlotType.Line,$.PlotType.Area,$.PlotType.Circles,$.PlotType.Cross].indexOf(a)>=0,c=this.m_study.data(),h=this.m_study.firstValue(),l&&c._length()>0){for(u=c._bsearch(t);o.isIndexValid(u,c)&&void 0===c._valueAt(u)[this._plotIndex+1];)u-=1;for(t=o.isIndexValid(u,c)?c._indexAt(u):t,d=c._bsearch(i);o.isIndexValid(d,c)&&void 0===c._valueAt(d)[this._plotIndex+1];)d+=1;i=o.isIndexValid(d,c)?c._indexAt(d):i}if(f=c.range(t,i),_=this.m_study.priceScale(),m=_.properties().percentage.value(),g=F(this._getTranspValue(),0,100),v={},y=function(e,t){var i=e+"@"+t
;return v[i]||(this._plotName&&"vol"===this._plotName?v[i]=W.generateColor(e,t):v[i]=W.generateColor(e,t,!0)),v[i]}.bind(this),f.each(function(e,t){var i,o,r,a,c,u,d,f,_;return e+=n,e=Math.floor(e),i=t[this._plotIndex+1],o=void 0===i||null===i,i=o?NaN:i,m&&!o&&(i=100*(i-h)/h),(!l||!o)&&(r=new p(e,i),a=void 0!==t[this._colorer+1]||this._palette&&this._palette.addDefaultColor,this._colorer&&a&&(i=t[this._colorer+1],r.style={},null!=i?(c=this._palette.valToIndex?this._palette.valToIndex[i]:i,u=this._paletterProps.colors[c],d=u.color.value(),r.style.color=W.isHexColor(d)?y(d,g):d):(d=s.color.value(),r.style.color=y(d,100)),f=void 0!==c?u.width.value():s.linewidth.value(),_=void 0!==c?u.style.value():s.linestyle.value(),r.style.width=f,r.style.style=_),this.m_items.push(r),!1)}.bind(this)),_.pricesToCoordinates(this.m_items),this.m_model.timeScale().indexesToCoordinates(this.m_items),s.histogramBase&&(this._histogramBase=this.m_study.priceScale().priceToCoordinate(s.histogramBase.value())),this.m_study===this.m_model.selectedSource())for(S=z(t,i),this._selectionData={points:[]},this._selectionData.hittestResult=b.REGULAR,w=0;w<S.length;w++)T=S[w],P=this.m_study.data().valueAt(T),T+=n,null!==P&&(C=P[this._plotIndex+1],_.isPercentage()&&(C=100*(C-h)/h),x=this.m_model.timeScale().indexToCoordinate(Math.floor(T)),E=this.m_study.priceScale().priceToCoordinate(C),this._selectionData.points.push(new p(x,E)));L=s,this._lineColor=W.generateColor(L.color.value(),g),this._lineWidth=L.linewidth.value(),I=L.color.value(),this._colorer&&null!=(C=this._paletterProps.colors[0])&&(I=C.color.value(),this._lineWidth=C.width.value(),this._lineColor=W.generateColor(C.color.value(),g)),this._color2=W.generateColor(I,g),this._color1=W.generateColor(o.addHueForColor(I),g)}},o.addHueForColor=H(function(e){var t=_(v(e)),i=t[0]+.05;return t[0]=i-Math.floor(i),g(m(t))}),o.prototype._getTranspValue=function(){var e=this.m_study.properties(),t=e.styles[this._plotName],i=0,o=0,n=this.m_study.metaInfo();return"Volume@tv-basicstudies"===n.id&&n.version<=46&&"transparency"in e?(i=e.transparency.value(),i=isNumber(i)?i:o):(t.transparency&&(i=t.transparency.value(),i=isNumber(i)?i:o),i)},o.prototype.renderer=function(){var e,t,i,o,n,r=this.m_study.properties().styles[this._plotName];if(r.visible.value()&&this.m_study.priceScale()){switch(this._invalidated&&(this._updateImpl(),this._invalidated=!1),e={},e.barSpacing=this.m_model.timeScale().barSpacing(),e.items=this.m_items,e.histogramBase=this._histogramBase?this._histogramBase:this.m_study.priceScale().height(),e.lineIndex=0,e.lineStyle=r.linestyle.value(),e.lineColor=this._lineColor,e.lineWidth=this._lineWidth,e.lineWidth=isNumber(e.lineWidth)?e.lineWidth:1,e.color1=this._color1,e.color2=this._color2,e.bottom=e.histogramBase,this._colorer||(e.simpleMode=!0),t=new N,i=!!r.joinPoints&&r.joinPoints.value(),r.plottype.value()){case $.PlotType.Line:case $.PlotType.LineWithBreaks:t.append(new E(e));break;case $.PlotType.Area:case $.PlotType.AreaWithBreaks:t.append(new L(e));break;case $.PlotType.Histogram:
t.append(new C(e));break;case $.PlotType.Columns:t.append(new x(e));break;case $.PlotType.Cross:t.append(new A(e)),i&&(o=TradingView.merge({},e),o.lineWidth=1,o.forceLineWidth=!0,t.append(new E(o)));break;case $.PlotType.Circles:t.append(new k(e)),i&&(o=TradingView.merge({},e),o.lineWidth=1,o.ignorePaletteLineWidth=!0,t.append(new E(o)));break;case $.PlotType.StepLine:n=new R,n.setData(e),t.append(n);break;default:t.append(new E(e))}return this.m_study===this.m_model.selectedSource()&&this._isMarkersEnabled&&t.append(new w(this._selectionData)),t}},n.prototype.items=function(){return this._items},n.prototype.update=function(){this._invalidated=!0},n.prototype._scalesReady=function(){var e=this._model.timeScale(),t=this._study.priceScale();return e&&t&&!e.isEmpty()&&!t.isEmpty()},n.prototype._getTranspValue=function(){var e=this._study.properties(),t=e.styles[this._plotName],i=0;return t.transparency&&(i=t.transparency.value(),i=isNumber(i)?i:40),i},n.prototype._updateImpl=function(){var e,t,i,o,n,r,s,a,l,c,h,u,f;this._items=[],d(this._scalesReady(),"Scales must be ready!"),null!==(e=this._model.timeScale().visibleBars())&&(t=this._study.metaInfo().plots,i=t[this._plotIndex].palette,o=this._study.properties().palettes[i],n=o.colors,r=this._study.metaInfo().palettes[i],s=this._getTranspValue(),a=this._series.nearestIndex(e.firstBar(),U.NearestRight),l=this._series.nearestIndex(e.lastBar(),U.NearestLeft),c=this._study.offset(this._plotName),c>0?(a-=c,l+=c):(a+=c,l-=c),(h=this._study.getMinFirstBarIndexForPlot(this._plotName))>l||(a=Math.max(h,a),u=this._study.data(),f=u.range(a,l),f.each(function(e,t){var i,o,a,l;return e+=c,i=t[this._plotIndex+1],o=new p(Math.floor(e)-.5),a=isNumber(s)?s:50,a=Math.min(a,100),a=Math.max(a,0),null!=i?(l=r.valToIndex?r.valToIndex[i]:i,o.color=W.generateColor(n[l].color.value(),a)):o.color=null,this._items.push(o),!1}.bind(this)),this._model.timeScale().indexesToCoordinates(this._items)))},n.prototype.renderer=function(){var e,t;if(this._study.properties().styles[this._plotName].visible&&this._study.properties().styles[this._plotName].visible.value()&&this._scalesReady())return this._invalidated&&(this._updateImpl(),this._invalidated=!1),e={items:this._items,y:0,h:this._study.priceScale().height(),w:Math.ceil(this._model.timeScale().barSpacing())},t=new N,t.append(new V(e)),t},r.prototype.items=function(){return this.m_items},r.prototype.update=function(){this.m_invalidated=!0},r.prototype._scalesReady=function(){var e=this.m_model.timeScale(),t=this.m_study.priceScale();return e&&t&&!e.isEmpty()&&!t.isEmpty()},r.prototype._updateImpl=function(){var e,t,i,o,n,r,s,a,l,c,h,u,d,p,f,_,m,g;this.m_items=[],this._scalesReady()&&(e=this.m_model.timeScale(),t=this.m_study.priceScale(),null!==(i=e.visibleBars())&&(o=this.m_series.nearestIndex(i.firstBar(),U.NearestRight),n=this.m_series.nearestIndex(i.lastBar(),U.NearestLeft),r=this.m_study.offset(this.m_plotName),r>0?(o-=r,n+=r):(o+=r,n-=r),(s=this.m_study.getMinFirstBarIndexForPlot(this.m_plotName))>n||(o=Math.max(s,o),a=this.m_study.data(),
l=this.m_study.firstValue(),c=a.range(o,n),h=t.properties().percentage.value(),u=this._getTranspValue(),d=z(o,n),p=this.m_study===this.m_model.selectedSource(),this.m_selectionData=p?{points:[],hittestResult:b.REGULAR,vertOffset:0}:null,f=this.m_series.properties().style.value(),_=f===TradingView.Series.STYLE_LINE?"lineStyle":f===TradingView.Series.STYLE_AREA?"areaStyle":null,_?(m=this.m_series.properties()[_].priceSource.value(),g=m):(m="high",g="low"),this._topCoord=t.coordinateToPrice(t.height()*t.topMargin()),this._bottomCoord=t.coordinateToPrice(t.height()*(1-t.bottomMargin())),c.each(function(e,t){var i,o,n,s,a,c,f,_=Math.floor(e+r),v=t[this.m_plotIndex+1];return null!==v&&void 0!==v&&(i=this._createItem(_,v,m,g,h,l),void 0!==i&&null!==i?(o=void 0!==t[this._colorer+1]||this._palette&&this._palette.addDefaultColor,this._colorer&&o&&(v=t[this._colorer+1],i.style={},null!=v?(s=this._palette.valToIndex?this._palette.valToIndex[v]:v,n=this._paletterProps.colors[s].color.value(),i.style.color=W.generateColor(n,u)):(n=this.m_study.properties().styles[this.m_plotName].color.value(),i.style.color=W.generateColor(n,100)),a=u>9?u-10:0,i.style.borderColor=W.generateColor(n,a)),c=void 0!==t[this._textColorer+1]||this._textPalette&&this._textPalette.addDefaultColor,this._textColorer&&c&&(v=t[this._textColorer+1],i.style||(i.style={}),null!=v?(s=this._textPalette.valToIndex?this._textPalette.valToIndex[v]:v,f=this._textPaletterProps.colors[s].color.value(),i.style.textColor=W.generateColor(f,u)):(f=this.m_study.properties().styles[this.m_plotName].textColor.value(),i.style.textColor=W.generateColor(f,100))),p&&-1!==d.indexOf(e)&&this.m_selectionData.points.push(i),this.m_items.push(i),!1):void 0)}.bind(this)),this._convertItemsToCoordinates())))},r.prototype._getSeriesVal=function(e,t){var i;e=e||"close",i=null;try{i=this.m_series[e](t)}catch(e){}return i},r.prototype._getTranspValue=function(){var e,t=0;return this.m_study.properties().transparency&&(t=this.m_study.properties().transparency.value(),t=isNumber(t)?t:50),e=this.m_study.properties().styles[this.m_plotName],e.transparency&&(t=e.transparency.value(),t=isNumber(t)?t:50),F(t,0,100)},r.prototype._createItem=function(e,t,i,o,n,r){var s,a,l,c=this.m_study.properties().styles[this.m_plotName].location.value();if(!t&&c!==CanvasEx.MARKLOC_ABSOLUTE)return null;switch(c){case CanvasEx.MARKLOC_ABOVEBAR:if(void 0===(s=this._getSeriesVal(i,e))||null==s)return null;a=s;break;case CanvasEx.MARKLOC_BELOWBAR:if(void 0===(l=this._getSeriesVal(o,e))||null==l)return null;a=l;break;case CanvasEx.MARKLOC_TOP:a=this._topCoord;break;case CanvasEx.MARKLOC_BOTTOM:a=this._bottomCoord;break;case CanvasEx.MARKLOC_ABSOLUTE:a=t;break;default:throw Error("Bad value: "+c)}return n&&c!==CanvasEx.MARKLOC_TOP&&c!==CanvasEx.MARKLOC_BOTTOM&&(a=100*(a-r)/r),new p(e,a)},r.prototype._convertItemsToCoordinates=function(){var e=this.m_model.timeScale(),t=this.m_study.priceScale();e.indexesToCoordinates(this.m_items),t.pricesToCoordinatesEx(this.m_items,function(e){return e.y},function(e,t){e.y=t})},
r.prototype._calculateVerticalOffset=function(e,t){var i=0;switch(e){case CanvasEx.MARKLOC_ABOVEBAR:case CanvasEx.MARKLOC_BOTTOM:i=-t;break;case CanvasEx.MARKLOC_BELOWBAR:case CanvasEx.MARKLOC_TOP:i=t}return i},r.prototype._calculateShapeHeight=function(e,t){var i=e;switch(t){case CanvasEx.SIZE_TINY:i=.3*e;break;case CanvasEx.SIZE_SMALL:i=.6*e;break;case CanvasEx.SIZE_NORMAL:i=e;break;case CanvasEx.SIZE_LARGE:i=1.5*e;break;case CanvasEx.SIZE_HUGE:i=2*e}return i},r.prototype.renderer=function(){var e,t,i,o,n,r,s,a,l,c;if(this.m_study.properties().styles[this.m_plotName].visible&&this.m_study.properties().styles[this.m_plotName].visible.value()&&this._scalesReady())return e=this.m_model.timeScale(),this.m_invalidated&&(this._updateImpl(),this.m_invalidated=!1),t={},i=this._getTranspValue(),o=e.barSpacing(),n=this._calculateShapeHeight(o),r=this.m_study.properties().styles[this.m_plotName].location.value(),s=this._calculateVerticalOffset(r,n+n/2),t.barSpacing=o,t.items=this.m_items,t.color=W.generateColor(this.m_study.properties().styles[this.m_plotName].color.value(),i),t.height=n,t.vertOffset=s,a=this.m_study.properties().styles[this.m_plotName].plottype.value(),l=$.plotShapesData[a],c=new N,l&&c.append(new TradingView[l.paneRendererClass](t)),this.m_study===this.m_model.selectedSource()&&this._isMarkersEnabled&&null!==this.m_selectionData&&(this.m_selectionData.vertOffset=s,c.append(new w(this.m_selectionData))),c},inherit(s,r),s.prototype.renderer=function(){var e,t,i,o,n,r,s,a,l,c,h,u,d,p,f,_,m,g,v,y,b=this.m_study.properties().styles[this.m_plotName];if(b.visible&&b.visible.value()&&this._scalesReady())return e=this.m_model.timeScale(),this.m_invalidated&&(this._updateImpl(),this.m_invalidated=!1),t={},i=this._getTranspValue(),o=e.barSpacing(),b.size?(r=b.size.value(),n=this._calculateShapeHeight(25,r)):n=Math.round(o/2),s=b.location.value(),a=W.generateColor(b.color.value(),i),l=i>19?i-10:0,c=this._calculateVerticalOffset(s,Math.round(1.5*n)),t.barSpacing=o,t.items=this.items(),t.color=a,t.borderColor=W.generateColor(b.color.value(),l),t.height=n,t.vertOffset=c,h=b.plottype.value(),u=$.plotShapesData[h],d=new N,p=b.text?b.text.value():void 0,void 0!==p&&""!==p.trim()&&(f=p.trim().replace(/\\n/gm,"\n"),f=TradingView.cleanButAmpersand(f,!0),_=!1,m=!1,g="Arial",v=12,t.textCache=new B(f,_,m,g,v),y=b.textColor?b.textColor.value():void 0,t.textColor=y?W.generateColor(y,i):a),null!=u&&d.append(new TradingView[u.paneRendererClass](t)),this.m_study===this.m_model.selectedSource()&&this._isMarkersEnabled&&null!==this.m_selectionData&&(this.m_selectionData.vertOffset=c,d.append(new w(this.m_selectionData))),d},inherit(a,s),a.prototype.renderer=function(){var e,t,i,o,n,r,s,a,l,c,h,u,d,p,f,_,m,g=this.m_study.properties().styles[this.m_plotName];if(g.visible&&g.visible.value()&&this._scalesReady())return e=this.m_model.timeScale(),this.m_invalidated&&(this._updateImpl(),this.m_invalidated=!1),t={},i=this._getTranspValue(),o=e.barSpacing(),g.size?(r=g.size.value(),n=this._calculateShapeHeight(50,r)):n=Math.round(o),
s=g.location.value(),a=W.generateColor(g.color.value(),i),l=this._calculateVerticalOffset(s,n),t.items=this.items(),t.char=g.char.value(),t.height=n,t.vertOffset=l,t.color=a,c=new N,h=g.text?g.text.value():void 0,void 0!==h&&""!==h.trim()&&(u=h.trim().replace(/\\n/gm,"\n"),u=TradingView.cleanButAmpersand(u,!0),d=!1,p=!1,f="Arial",_=12,t.textCache=new B(u,d,p,f,_),m=g.textColor?g.textColor.value():void 0,t.textColor=m?W.generateColor(m,i):a),c.append(new D(t)),this.m_study===this.m_model.selectedSource()&&this._isMarkersEnabled&&null!==this.m_selectionData&&(this.m_selectionData.vertOffset=l,c.append(new w(this.m_selectionData))),c},inherit(l,r),l.prototype.renderer=function(){var e,t,i,o,n,r,s,a,l;if(this.m_study.properties().styles[this.m_plotName].visible&&this.m_study.properties().styles[this.m_plotName].visible.value()&&this._scalesReady())return this.m_invalidated&&(this._updateImpl(),this.m_invalidated=!1),e={},t=F(this._getTranspValue(),0,100),i=this.m_model.timeScale().barSpacing(),e.items=this.m_items,e.barSpacing=i,e.colorup=W.generateColor(this.m_study.properties().styles[this.m_plotName].colorup.value(),t),e.colordown=W.generateColor(this.m_study.properties().styles[this.m_plotName].colordown.value(),t),o=y(e.colorup),n=o?100*(1-o[3]):0,r=y(e.colordown),s=r?100*(1-r[3]):0,e.colorBorderUp=W.generateColor("#000000",n),e.colorBorderDown=W.generateColor("#000000",s),e.minHeight=this.m_study.properties().styles[this.m_plotName].minHeight.value(),e.maxHeight=this.m_study.properties().styles[this.m_plotName].maxHeight.value(),a=new N,a.append(new O(e)),this.m_study===this.m_model.selectedSource()&&null!==this.m_selectionData&&(l=this.m_selectionData,l.barSpacing=i,a.append(new T(l))),a},l.prototype._createItem=function(e,t,i,o,n,r){var s,a,l,c;if(0!==t){if(Math.abs(t)>this._maxAbsValue&&(this._maxAbsValue=Math.abs(t)),s=t>0){if(void 0===(l=this._getSeriesVal(o,e))||null==l)return null;a=l}else{if(void 0===(c=this._getSeriesVal(i,e))||null==c)return null;a=c}return n&&(a=100*(a-r)/r),new M(e,a,t,s)}},l.prototype._convertItemsToCoordinates=function(){var e,t,i,o,n,r,s,a,l,c=this.m_model.timeScale(),h=this.m_study.priceScale();for(c.indexesToCoordinates(this.m_items),h.pricesToCoordinatesEx(this.m_items,function(e){return e.y},function(e,t){e.y=t}),e=Math.abs(this.m_study.properties().styles[this.m_plotName].minHeight.value()),t=Math.abs(this.m_study.properties().styles[this.m_plotName].maxHeight.value()),e>t&&(i=e,e=t,t=i),o=t-e,n=o/this._maxAbsValue,r=this.m_items,s=0;s<r.length;s++)a=r[s],l=Math.abs(a.height),a.height=l*n+e},c.prototype.update=function(){this._invalidated=!0},c.prototype._updateImpl=function(){var e,t,i,o,n,r,s,a,l,c,h,u,d,f,y,S,w,T,P,C;if(this.m_bars.length=0,!(this.m_model.timeScale().isEmpty()||this.m_study.priceScale().isEmpty()||null===(e=this.m_model.timeScale().visibleBars())||(t=this.m_series.nearestIndex(e.firstBar(),U.NearestRight),i=this.m_series.nearestIndex(e.lastBar(),U.NearestLeft),(o=this.m_study.getMinFirstBarIndexForPlot(this.m_plotName))>i||(t=Math.max(o,t),
n=this.m_study.data(),r=this.m_study.firstValue(),s=n.range(t,i),a=this.m_study.priceScale(),l=a.properties().percentage.value(),c=0,h=this.m_study.properties().ohlcPlots[this.m_plotName],u={},d=function(e,t){var i=e+"@"+t;return u[i]||(u[i]=W.generateColor(e,t)),u[i]},s.each(function(e,t){var i,o,n,s,a,u,p,f,y,b,S,w,T,P,C,x;for(e=Math.floor(e),i=!0,o={},n=TradingView.OPEN_PLOT;n<=TradingView.CLOSE_PLOT;++n){if(void 0===(s=t[this._ohlcPlotIndexes[n]+1])||null===s){i=!1;break}o[n]=s}return!!i&&(a=o[TradingView.OPEN_PLOT],u=o[TradingView.CLOSE_PLOT],p=Math.max(a,o[TradingView.HIGH_PLOT],o[TradingView.LOW_PLOT],u),f=Math.min(a,o[TradingView.HIGH_PLOT],o[TradingView.LOW_PLOT],u),y={},y.time=Math.round(e),l?(y.open=100*(a-r)/r,y.high=100*(p-r)/r,y.low=100*(f-r)/r,y.close=100*(u-r)/r):(y.open=a,y.high=p,y.low=f,y.close=u),b=h.color.value(),S=void 0!==t[this._colorer+1]||this._palette&&this._palette.addDefaultColor,this._colorer&&S&&null!=(s=t[this._colorer+1])&&(w=this._palette.valToIndex?this._palette.valToIndex[s]:s,T=this._paletterProps.colors[w],b=T.color.value()),y.color=d(b,c),P=_(v(b)),C=P[2]>.25?P[2]-.26:P[2]+.75,x=m(P[0],P[1],C),y.borderColor=d(g(x),c),y.hollow=null,this.m_bars.push(y),!1)}.bind(this)),a.barPricesToCoordinates(this.m_bars),this.m_model.timeScale().barIndexesToCoordinates(this.m_bars),this.m_study!==this.m_model.selectedSource()))))for(f=z(t,i),this._selectionData={points:[],hittestResult:b.REGULAR},y=0;y<f.length;y++)S=f[y],null!==(w=this.m_study.data().valueAt(S))&&(T=w[this._plotIndex+1],a.properties().percentage.value()&&(T=100*(T-r)/r),P=this.m_model.timeScale().indexToCoordinate(Math.floor(S)),C=this.m_study.priceScale().priceToCoordinate(T),this._selectionData.points.push(new p(P,C)))},c.prototype.items=function(){return this.m_bars},inherit(h,c),h.prototype.renderer=function(){var e,t;if(this.m_study.properties().ohlcPlots[this.m_plotName].visible.value())return this._invalidated&&(this._updateImpl(),this._invalidated=!1),e={},e.bars=this.m_bars,e.barSpacing=this.m_model.timeScale().barSpacing(),e.dontDrawOpen=this.m_series.properties().barStyle.dontDrawOpen.value(),t=new N,t.append(new P(e)),this.m_series===this.m_model.selectedSource()&&this._isMarkersEnabled&&t.append(new w(this._selectionData)),t},inherit(u,c),u.prototype.renderer=function(){var e,t,i,o=this.m_study.properties().ohlcPlots[this.m_plotName];if(o.visible.value())return this._invalidated&&(this._updateImpl(),this._invalidated=!1),e={},e.bars=this.m_bars,e.barSpacing=this.m_model.timeScale().barSpacing(),e.drawWick=o.drawWick.value(),e.drawBorder=o.drawBorder.value(),t=o.wickColor.value(),e.borderColor=t,e.wickColor=t,i=new N,i.append(new I(e)),this.m_series===this.m_model.selectedSource()&&this._isMarkersEnabled&&i.append(new w(this._selectionData)),i},t.StudyPaneView=o,t.StudyBackgroundPaneView=n,t.StudyPlotShapesPaneView=s,t.StudyPlotCharsPaneView=a,t.StudyPlotArrowsPaneView=l,t.StudyPlotCandlesPaneView=u,t.StudyPlotBarsPaneView=h},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.types={
ECONOMIC:"economic",QUANDL:"quandl"}},function(e,t,i){"use strict";function o(e,t){this.handler=e,this.customId=t}function n(){}var r=i(10).declareClassAsPureInterface;TradingView.WEB_SOCKET_WAS_CONNECTED=!1,n.REBIND_STUDY_STANDALONE_TO_CHILD=1,n.REBIND_STUDY_CHILD_TO_STANDALONE=2,n.prototype.defaultWatchlistSymbols=function(){},n.prototype.availableTimeFrames=function(e,t){},n.prototype.defaultResolutions=function(){},n.prototype.supportedSymbolsTypes=function(){},n.prototype.supportedExchangesList=function(){},n.prototype.futuresRegex=function(){},n.prototype.quoteCreateSession=function(e){},n.prototype.quoteDeleteSession=function(e){},n.prototype.quoteSetFields=function(e,t){},n.prototype.quoteAddSymbols=function(e,t){},n.prototype.quoteRemoveSymbols=function(e,t){},n.prototype.quoteFastSymbols=function(e,t){},n.prototype.depthCreateSession=function(e,t,i){},n.prototype.depthDeleteSession=function(e){},n.prototype.depthSetSymbol=function(e,t){},n.prototype.depthClearSymbol=function(e){},n.prototype.depthSetScale=function(e,t){},n.prototype.chartCreateSession=function(e,t){},n.prototype.chartDeleteSession=function(e){},n.prototype.createSession=function(e,t){},n.prototype.removeSession=function(e){},n.prototype.connected=function(){},n.prototype.connect=function(){},n.prototype.disconnect=function(){},n.prototype.switchTimezone=function(e,t){},n.prototype.resolveSymbol=function(e,t,i,o,n){},n.prototype.createSeries=function(e,t,i,o,n,r,s){},n.prototype.removeSeries=function(e,t,i){},n.prototype.modifySeries=function(e,t,i,o,n,r){},n.prototype.requestMoreData=function(e,t,i,o){},n.prototype.requestMetadata=function(e,t,i){},n.prototype.isCanCreateStudy=function(e,t){},n.prototype.createStudy=function(e,t,i,o,n,r,s){},n.prototype.rebindStudy=function(e,t,i,o,n,r,s,a){},n.prototype.removeStudy=function(e,t,i){},n.prototype.modifyStudy=function(e,t,i,o,n){},n.prototype.createPointset=function(e,t,i,o,n,r,s){},n.prototype.modifyPointset=function(e,t,i,o,n){},n.prototype.removePointset=function(e,t,i){},n.prototype.requestMoreTickmarks=function(e,t,i,o){},n.prototype.requestFirstBarTime=function(e,t,i,o){},n.prototype._invokeHandler=function(e,t){},n.prototype._sendRequest=function(e,t){},n.prototype._onMessage=function(e){},n.prototype._convertTimescaleResponse=function(e){},n.prototype._dispathNotification=function(e){},n.prototype._invokeNotificationHandler=function(e,t,i){},n.prototype._notifySessions=function(e){},n.prototype.unpack=function(e){},n.prototype.searchSymbols=function(e,t,i,o,n,r,s,a,l){},n.prototype.serverTimeOffset=function(){},n.prototype.getMarks=function(e,t,i,o,n){},n.prototype.getTimescaleMarks=function(e,t,i,o,n){},r(n,"ChartApiInterface"),e.exports.HandlerInfo=o,e.exports.ChartApiInterface=n},function(e,t){e.exports={free:{CHART_STORAGE:{limit:1},MULTIPLE_CHARTS:{layout:["s"],limit:1},INDICATORS_ON_CHART:{limit:3},STUDY_ON_STUDY:{limit:120,child_limit:1},SERVER_SIDE_ALERTS:{limit:1},SCREENER_ALERTS:{limit:1},STUDY_TEMPLATES:{limit:1},SIMULTANEOUS_CONNECTIONS:{limit:1}},__legacy_pro:{
CHART_STORAGE:{limit:99999},MULTIPLE_CHARTS:{layout:["s","2h","2v","3v","3h","3s","2-1","4","6","8"],limit:8},CUSTOM_INTERVALS:{},MULTIPLE_WATCHLISTS:{},IMPORT_WATCHLISTS:{},EXPORT_WATCHLISTS:{},INDICATORS_ON_CHART:{limit:99999},PRO_BACKEND:{},TV_VOLUMEBYPRICE:{study_packages:["tv-volumebyprice"]},STUDY_ON_STUDY:{limit:120,child_limit:99999},TICK_BY_TICK_PUSH_DATA:{},SERVER_SIDE_ALERTS:{limit:10},SCREENER_ALERTS:{limit:10},NO_SPONSORED_ADS:{},STUDY_TEMPLATES:{limit:99999},SIMULTANEOUS_CONNECTIONS:{limit:1},IDC_AVAILABLE_DELAY:{}},__legacy_pro_realtime:{CHART_STORAGE:{limit:99999},MULTIPLE_CHARTS:{layout:["s","2h","2v","3v","3h","3s","2-1","4","6","8"],limit:8},CUSTOM_INTERVALS:{},MULTIPLE_WATCHLISTS:{},IMPORT_WATCHLISTS:{},EXPORT_WATCHLISTS:{},INDICATORS_ON_CHART:{limit:99999},EXTENDED_SESSION:{},PRO_BACKEND:{},TV_PROSTUDIES:{study_packages:["tv-prostudies"]},TV_VOLUMEBYPRICE:{study_packages:["tv-volumebyprice"]},STUDY_ON_STUDY:{limit:120,child_limit:99999},TICK_BY_TICK_PUSH_DATA:{},SERVER_SIDE_ALERTS:{limit:1e3},SCREENER_ALERTS:{limit:30},NO_SPONSORED_ADS:{},CAN_EDIT_PUBLIC_CHATS:{},STUDY_TEMPLATES:{limit:99999},SIMULTANEOUS_CONNECTIONS:{limit:1},IDC_AVAILABLE_DELAY:{}},__legacy_pro_premium:{CHART_STORAGE:{limit:99999},MULTIPLE_CHARTS:{layout:["s","2h","2v","3v","3h","3s","2-1","4","6","8"],limit:8},CUSTOM_INTERVALS:{},MULTIPLE_WATCHLISTS:{},IMPORT_WATCHLISTS:{},EXPORT_WATCHLISTS:{},INDICATORS_ON_CHART:{limit:99999},EXTENDED_SESSION:{},PRO_BACKEND:{},TV_PROSTUDIES:{study_packages:["tv-prostudies"]},TV_VOLUMEBYPRICE:{study_packages:["tv-volumebyprice"]},STUDY_ON_STUDY:{limit:120,child_limit:99999},TICK_BY_TICK_PUSH_DATA:{},SERVER_SIDE_ALERTS:{limit:1e3},SCREENER_ALERTS:{limit:100},ALERTS_TRUE_SMS:{},NO_SPONSORED_ADS:{},CAN_EDIT_PUBLIC_CHATS:{},STUDY_TEMPLATES:{limit:99999},SIMULTANEOUS_CONNECTIONS:{limit:1},IDEA_SIGNATURE:{},PROFILE_WEBSITE_FIELD:{},IDC_AVAILABLE_DELAY:{}},pro:{CHART_STORAGE:{limit:5},MULTIPLE_CHARTS:{layout:["s","2h","2v"],limit:2},CUSTOM_INTERVALS:{},MULTIPLE_WATCHLISTS:{},IMPORT_WATCHLISTS:{},EXPORT_WATCHLISTS:{},INDICATORS_ON_CHART:{limit:5},PRO_BACKEND:{},TV_VOLUMEBYPRICE:{study_packages:["tv-volumebyprice"]},STUDY_ON_STUDY:{limit:120,child_limit:1},TICK_BY_TICK_PUSH_DATA:{},SERVER_SIDE_ALERTS:{limit:10},SCREENER_ALERTS:{limit:10},NO_SPONSORED_ADS:{},STUDY_TEMPLATES:{limit:99999},SIMULTANEOUS_CONNECTIONS:{limit:1},IDC_AVAILABLE_DELAY:{}},pro_realtime:{CHART_STORAGE:{limit:10},MULTIPLE_CHARTS:{layout:["s","2h","2v","3v","3h","3s","2-1","4"],limit:4},CUSTOM_INTERVALS:{},MULTIPLE_WATCHLISTS:{},IMPORT_WATCHLISTS:{},EXPORT_WATCHLISTS:{},INDICATORS_ON_CHART:{limit:10},EXTENDED_SESSION:{},PRO_BACKEND:{},TV_PROSTUDIES:{study_packages:["tv-prostudies"]},TV_VOLUMEBYPRICE:{study_packages:["tv-volumebyprice"]},STUDY_ON_STUDY:{limit:120,child_limit:99999},TICK_BY_TICK_PUSH_DATA:{},SERVER_SIDE_ALERTS:{limit:30},SCREENER_ALERTS:{limit:30},NO_SPONSORED_ADS:{},CAN_EDIT_PUBLIC_CHATS:{},SIMULTANEOUS_CONNECTIONS:{limit:2},STUDY_TEMPLATES:{limit:99999},IDC_AVAILABLE_DELAY:{}},pro_premium:{CHART_STORAGE:{limit:99999
},MULTIPLE_CHARTS:{layout:["s","2h","2v","3v","3h","3s","2-1","4","6","8"],limit:8},CUSTOM_INTERVALS:{},MULTIPLE_WATCHLISTS:{},IMPORT_WATCHLISTS:{},EXPORT_WATCHLISTS:{},INDICATORS_ON_CHART:{limit:25},EXTENDED_SESSION:{},PRO_BACKEND:{},TV_PROSTUDIES:{study_packages:["tv-prostudies"]},TV_VOLUMEBYPRICE:{study_packages:["tv-volumebyprice"]},STUDY_ON_STUDY:{limit:120,child_limit:99999},TICK_BY_TICK_PUSH_DATA:{},SERVER_SIDE_ALERTS:{limit:100},SCREENER_ALERTS:{limit:100},NO_SPONSORED_ADS:{},CAN_EDIT_PUBLIC_CHATS:{},SIMULTANEOUS_CONNECTIONS:{limit:5},STUDY_TEMPLATES:{limit:99999},ALERTS_TRUE_SMS:{},IDEA_SIGNATURE:{},PROFILE_WEBSITE_FIELD:{},IDC_AVAILABLE_DELAY:{}},limitless:{CHART_STORAGE:{limit:99999},MULTIPLE_CHARTS:{layout:["s","2h","2v","3v","3h","3s","2-1","4","6","8"],limit:8},CUSTOM_INTERVALS:{},MULTIPLE_WATCHLISTS:{},IMPORT_WATCHLISTS:{},EXPORT_WATCHLISTS:{},INDICATORS_ON_CHART:{limit:99999},EXTENDED_SESSION:{},PRO_BACKEND:{},TV_PROSTUDIES:{study_packages:["tv-prostudies"]},TV_VOLUMEBYPRICE:{study_packages:["tv-volumebyprice"]},STUDY_ON_STUDY:{limit:99999,child_limit:99999},TICK_BY_TICK_PUSH_DATA:{},SERVER_SIDE_ALERTS:{limit:99999},SCREENER_ALERTS:{limit:1e3},NO_SPONSORED_ADS:{},CAN_EDIT_PUBLIC_CHATS:{},SIMULTANEOUS_CONNECTIONS:{limit:99999},STUDY_TEMPLATES:{limit:99999},ALERTS_TRUE_SMS:{},IDEA_SIGNATURE:{},PROFILE_WEBSITE_FIELD:{},IDC_AVAILABLE_DELAY:{},IDC_NO_NEED_AGREEMENT:{}}}},function(e,t){e.exports={14851:{},custom_items_in_context_menu:{},websocket_connection:{},countdown:{},symbol_search_parser_mixin:{},show_pro_features:{},daily_timeframe_suffix:{},symbollist_context_menu:{},pay_attention_to_ticker_not_symbol:{},graying_disabled_tools_enabled:{},update_study_formatter_on_symbol_resolve:{},constraint_dialogs_movement:{},same_data_requery:{},phone_verification:{},show_trading_notifications_history:{},show_interval_dialog_on_key_press:{},header_interval_dialog_button:{subsets:["show_interval_dialog_on_key_press"]},header_fullscreen_button:{},header_symbol_search:{},symbol_search_hot_key:{},header_resolutions:{subsets:["header_interval_dialog_button"]},header_chart_type:{},header_settings:{},header_indicators:{},header_compare:{},header_undo_redo:{},header_screenshot:{},header_saveload:{},study_on_study:{},header_widget:{subsets:["header_widget_dom_node","header_symbol_search","header_resolutions","header_chart_type","header_settings","header_indicators","header_compare","header_undo_redo","header_fullscreen_button","compare_symbol"]},compare_symbol:{subsets:["header_compare"]},property_pages:{subsets:["show_chart_property_page","chart_property_page"]},show_chart_property_page:{},chart_property_page:{subsets:["chart_property_page_style","chart_property_page_scales","chart_property_page_background","chart_property_page_timezone_sessions","chart_property_page_events_alerts","chart_property_page_trading","chart_property_page_template_button"]},disable_userlink_popup:{},left_toolbar:{},keep_left_toolbar_visible_on_small_screens:{},hide_left_toolbar_by_default:{},control_bar:{},widget_logo:{},timeframes_toolbar:{},
edit_buttons_in_legend:{subsets:["show_hide_button_in_legend","format_button_in_legend","study_buttons_in_legend","delete_button_in_legend"]},hide_legend_by_default:{},show_hide_button_in_legend:{},format_button_in_legend:{},study_buttons_in_legend:{},delete_button_in_legend:{},pane_context_menu:{},scales_context_menu:{},legend_context_menu:{},context_menus:{subsets:["pane_context_menu","scales_context_menu","legend_context_menu","objects_tree_context_menu"]},items_favoriting:{},save_chart_properties_to_local_storage:{},use_localstorage_for_settings:{subsets:["items_favoriting","save_chart_properties_to_local_storage"]},plain_studymarket:{},trading_watch_positions:{},disable_resolution_rebuild:{},border_around_the_chart:{},charting_library_debug_mode:{},cl_feed_return_all_data:{},log_data_request_time:{},saveload_requires_authentication:{},saveload_storage_customization:{},new_chart_creation_available:{},volume_force_overlay:{},create_volume_indicator_by_default:{},create_volume_indicator_by_default_once:{},saved_charts_count_restriction:{},lean_chart_load:{},stop_study_on_restart:{},star_some_intervals_by_default:{},predefined_items_only_may_be_starred:{},move_logo_to_main_pane:{},show_logo_on_all_charts:{},link_to_tradingview:{},logo_without_link:{},right_bar_stays_on_scroll:{},chart_content_overrides_by_defaults:{},show_dialog_on_snapshot_ready:{},snapshot_trading_drawings:{},allow_supported_resolutions_set_only:{},study_market_minimized:{},widgetbar_tabs:{},collapsible_header:{},show_extension_popup:{},study_templates:{},side_toolbar_in_fullscreen_mode:{},remove_library_container_border:{},whotrades_auth_only:{},support_multicharts:{},display_market_status:{},display_data_mode:{},show_chart_warn_message:{},datasource_copypaste:{},line_tool_templates:{},expand_symbolsearch_items:{},symbol_search_three_columns_exchanges:{},symbol_search_flags:{},symbol_search_limited_exchanges:{},footer_share_buttons:{},footer_bugreport_button:{},footer_publish_idea_button:{},footer_screenshot:{},footer_showdom_button:{},text_notes:{},symbol_info:{},no_bars_status:{},clear_bars_on_series_error:{},hide_loading_screen_on_series_error:{},seconds_resolution:{},dont_show_boolean_study_arguments:{},hide_last_na_study_output:{},price_scale_always_last_bar_value:{},study_dialog_search_control:{},study_dialog_fundamentals_economy_addons:{},uppercase_instrument_names:{},cqg_trading_confirm_risks:{},trading_notifications:{},chart_crosshair_menu:{},japanese_chart_styles:{},linetoolpropertieswidget_template_button:{},use_overrides_for_overlay:{},timezone_menu:{},main_series_scale_menu:{},show_login_dialog:{},remove_img_from_rss:{},bars_marks:{},chart_scroll:{},chart_zoom:{},source_selection_markers:{},high_density_bars:{},open_account_manager:{},multiple_watchlists:{},onchart_messages:{},custom_resolutions_box:{},referral_program_for_widget_owners:{},referral_program_policy_aggressive:{subsets:["referral_program_policy_passive","referral_program_policy_normal"]},referral_program_policy_normal:{
subsets:["referral_program_policy_passive","header_fake_features_buttons","custom_resolutions_box"]},tv_production:{subsets:["show_pro_features","countdown","symbol_search_parser_mixin","symbollist_context_menu","websocket_connection","header_fullscreen_button","header_widget","dont_show_boolean_study_arguments","left_toolbar","control_bar","timeframes_toolbar","symbol_search_hot_key","context_menus","edit_buttons_in_legend","uppercase_instrument_names","use_localstorage_for_settings","saveload_requires_authentication","volume_force_overlay","new_chart_creation_available","saved_charts_count_restriction","create_volume_indicator_by_default","create_volume_indicator_by_default_once","charts_auto_save","right_bar_stays_on_scroll","save_old_chart_before_save_as","chart_content_overrides_by_defaults","alerts","show_dialog_on_snapshot_ready","show_extension_popup","header_saveload","header_layouttoggle","datasource_copypaste","show_saved_watchlists","watchlists_from_to_file","add_to_watchlist","property_pages","support_multicharts","display_market_status","display_data_mode","show_chart_warn_message","support_manage_drawings","widgetbar_tabs","study_templates","collapsible_header","line_tool_templates","caption_buttons_text_if_possible","footer_share_buttons","footer_screenshot","footer_publish_idea_button","text_notes","trading_watch_positions","symbol_info","linetoolpropertieswidget_template_button","cqg_trading_confirm_risks","trading_notifications","symbol_search_three_columns_exchanges","symbol_search_flags","symbol_search_limited_exchanges","phone_verification","chart_events","onchart_messages","custom_resolutions_box","compare_symbol","timezone_menu","main_series_scale_menu","chart_crosshair_menu","study_on_study","japanese_chart_styles","show_login_dialog","dome_widget","bars_marks","chart_scroll","chart_zoom","screener_alerts","show_trading_notifications_history","source_selection_markers","go_to_date","study_dialog_fundamentals_economy_addons","multiple_watchlists"]},browser_extension:{subsets:["disable_userlink_popup","show_pro_features","show_saved_watchlists","display_market_status","display_data_mode","show_chart_warn_message","widgetbar_tabs","show_login_dialog"]},widget:{
subsets:["show_pro_features","countdown","symbol_search_parser_mixin","symbollist_context_menu","websocket_connection","uppercase_instrument_names","left_toolbar","control_bar","timeframes_toolbar","symbol_search_hot_key","context_menus","edit_buttons_in_legend","use_localstorage_for_settings","saveload_requires_authentication","volume_force_overlay","create_volume_indicator_by_default","create_volume_indicator_by_default_once","right_bar_stays_on_scroll","show_dialog_on_snapshot_ready","dont_show_boolean_study_arguments","header_widget_dom_node","header_symbol_search","header_resolutions","header_chart_type","header_compare","header_indicators","star_some_intervals_by_default","display_market_status","display_data_mode","show_chart_warn_message","symbol_info","linetoolpropertieswidget_template_button","symbol_search_three_columns_exchanges","symbol_search_flags","symbol_search_limited_exchanges","widgetbar_tabs","compare_symbol","timezone_menu","main_series_scale_menu","show_login_dialog","plain_studymarket","japanese_chart_styles","bars_marks","chart_scroll","chart_zoom","source_selection_markers","property_pages"]},bovespa_widget:{subsets:["widget","header_settings","chart_property_page_timezone_sessions","linetoolpropertieswidget_template_button"]},charting_library_base:{subsets:["14851","allow_supported_resolutions_set_only","border_around_the_chart","collapsible_header","constraint_dialogs_movement","context_menus","control_bar","create_volume_indicator_by_default","custom_items_in_context_menu","datasource_copypaste","daily_timeframe_suffix","uppercase_instrument_names","display_market_status","edit_buttons_in_legend","graying_disabled_tools_enabled","header_widget","header_saveload","dont_show_boolean_study_arguments","lean_chart_load","left_toolbar","trading_watch_positions","link_to_tradingview","pay_attention_to_ticker_not_symbol","plain_studymarket","predefined_items_only_may_be_starred","refresh_saved_charts_list_on_dialog_show","right_bar_stays_on_scroll","saveload_storage_customization","show_dialog_on_snapshot_ready","stop_study_on_restart","study_market_minimized","timeframes_toolbar","symbol_search_hot_key","update_study_formatter_on_symbol_resolve","update_timeframes_set_on_symbol_resolve","use_localstorage_for_settings","volume_force_overlay","widget_logo","countdown","use_overrides_for_overlay","trading_notifications","compare_symbol","symbol_info","timezone_menu","main_series_scale_menu","study_dialog_search_control","chart_crosshair_menu","create_volume_indicator_by_default_once","bars_marks","chart_scroll","chart_zoom","source_selection_markers","property_pages","go_to_date","adaptive_logo","caption_buttons_text_if_possible"]},charting_library:{subsets:["charting_library_base","header_screenshot"]},static_charts_service:{subsets:["charting_library","disable_resolution_rebuild","log_data_request_time","same_data_requery"]},trading_terminal:{
subsets:["charting_library_base","footer_showdom_button","support_multicharts","header_layouttoggle","japanese_chart_styles","chart_property_page_trading","footer_screenshot","add_to_watchlist","open_account_manager","show_dom_first_time","multiple_watchlists"]},cqg_terminal:{subsets:["charting_library_base","chart_property_page_trading","expand_symbolsearch_items","clear_bars_on_series_error","no_bars_status","hide_loading_screen_on_series_error","support_multicharts","header_layouttoggle","same_data_requery","footer_bugreport_button","footer_showdom_button","dome_widget","show_dom_first_time","japanese_chart_styles","remove_img_from_rss","footer_screenshot","add_to_watchlist"]},amp_terminal:{subsets:["cqg_terminal"]}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.reduce(function(e,t,i){return~e.indexOf(t)||e.push(t),e},[])},e.exports=t.default},function(e,t,i){"use strict";function o(e,t){var i,o;return void 0===t&&(t=""),i="#"+e+"-symbol-description",o=window.t(i),o===i?t:o}function n(e){var t,i=e.description;return void 0!==e.local_description&&e.language===window.language?e.local_description:void 0!==e.pro_name&&void 0!==e.short_name&&void 0!==i?(t=o(e.pro_name,i),t!==i?t:o(e.short_name,i)):e.description||""}Object.defineProperty(t,"__esModule",{value:!0}),i(5),t.getTranslatedSymbolDescription=n},function(e,t,i){"use strict";var o,n,r,s,a,l,c,h,u;Object.defineProperty(t,"__esModule",{value:!0}),o=i(6),i(5),i(28),i(163),n=i(76),r={connecting:"tv-data-mode--connecting",delayed:"tv-data-mode--delayed",delayed_streaming:"tv-data-mode--delayed",endofday:"tv-data-mode--endofday",forbidden:"tv-data-mode--forbidden",realtime:"tv-data-mode--realtime",snapshot:"tv-data-mode--snapshot",loading:"tv-data-mode--loading",replay:"tv-data-mode--replay"},s={connecting:$.t("Connecting"),delayed:$.t("Delayed"),delayed_streaming:$.t("Delayed"),endofday:$.t("End of Day"),forbidden:$.t("Instrument is not allowed"),realtime:$.t("Realtime"),snapshot:$.t("Snapshot"),loading:"",replay:$.t("Replay Mode")},a={connecting:$.t("C",{context:"data_mode_connecting_letter"}),delayed:$.t("D",{context:"data_mode_delayed_letter"}),delayed_streaming:$.t("D",{context:"data_mode_delayed_streaming_letter"}),endofday:$.t("E",{context:"data_mode_end_of_day_letter"}),forbidden:$.t("F",{context:"data_mode_forbidden_letter"}),realtime:$.t("R",{context:"data_mode_realtime_letter"}),snapshot:$.t("S",{context:"data_mode_snapshot_letter"}),loading:"",replay:$.t("R",{context:"data_mode_replay_letter"})},l=600,c={streaming:"realtime"},h={classMap:r,classSuffix:"",data:{values:{update_mode:"connecting"}},labelMap:s,modeInterval:l,short:!1,shortLabelMap:a,showTooltip:!0},u=function(e){function t(t){var i=e.call(this)||this;return i._quoteSessionPrefix="data-mode-indicator",i._componentClass="tv-data-mode",i._init(t),i}return o.__extends(t,e),t.prototype.getLabel=function(){return!0===this._shortMode?this._shortLabelMap[this._value]||"":e.prototype.getLabel.call(this)},t.prototype.setMode=function(e,t){
this.update({values:{update_mode:e,update_mode_seconds:t}})},t.prototype.hide=function(){this._el.classList.add("i-hidden")},t.prototype.show=function(){this._el.classList.remove("i-hidden")},t.prototype.getTooltipText=function(){var e="",t=this.getValue();if(""===t)return e;switch(t){case"delayed":e=$.t("Quotes are delayed by {0} min and updated every 30 seconds");break;case"delayed_streaming":e=$.t("Quotes are delayed by {0} min");break;default:e=this._labelMap[t]||e}return["delayed","delayed_streaming"].includes(t)&&(e=e.format(Math.round(this._modeInterval/60))),e},t.prototype._init=function(t){void 0===t&&(t={});var i=Object.assign({},h,t);this._modeInterval=i.modeInterval||l,this._shortLabelMap=i.shortLabelMap||a,e.prototype._init.call(this,i),this._render()},t.prototype._getValueFromData=function(e){var t;return t=void 0!==e.values&&void 0!==e.values.update_mode?e.values.update_mode:this.getValue(),c[t]||t},t.prototype._updateValue=function(t,i){void 0!==t.values&&void 0!==t.values.update_mode_seconds&&(this._modeInterval=t.values.update_mode_seconds),e.prototype._updateValue.call(this,t,i)},t}(n.AbstractIndicator),t.DataModeIndicator=u},function(e,t,i){"use strict";var o,n,r,s,a,l;Object.defineProperty(t,"__esModule",{value:!0}),o=i(6),i(5),i(162),n=i(76),r={invalid:"tv-market-status--invalid",market:"tv-market-status--market",out_of_session:"tv-market-status--out-of-session",post_market:"tv-market-status--post-market",pre_market:"tv-market-status--pre-market",loading:"tv-market-status--loading",replay:"tv-market-status--replay"},s={invalid:$.t("Invalid Symbol"),market:$.t("Market Open"),out_of_session:$.t("Market Closed"),post_market:$.t("Post Market"),pre_market:$.t("Pre Market"),loading:$.t("Loading"),replay:""},a={classMap:r,classSuffix:"",data:{},extraTitle:"",labelMap:s,short:!1,showTooltip:!0},l=function(e){function t(t){var i=e.call(this)||this;return i._quoteSessionPrefix="market-status-indicator",i._componentClass="tv-market-status",i._extraTitle="",i._init(t),i}return o.__extends(t,e),t.prototype.setStatus=function(e,t){var i={values:{current_session:e}};this.update(i,t)},t.prototype.getTooltipText=function(){var t=e.prototype.getTooltipText.call(this);return""===t?t:(""!==this._extraTitle&&(t=t+", "+this._extraTitle),t)},t.prototype.setExtraTitle=function(e){this._extraTitle=e},t.prototype.reset=function(){this._clearClasses(),this._labelEl.textContent="",this._extraTitle="",this._el.setAttribute("title",""),this._value=""},t.prototype.enableShortMode=function(t){void 0===t&&(t=!0),void 0!==this._labelEl&&this._labelEl.classList.add("i-hidden"),e.prototype.enableShortMode.call(this)},t.prototype.disableShortMode=function(){void 0!==this._labelEl&&this._labelEl.classList.remove("i-hidden"),e.prototype.disableShortMode.call(this)},t.prototype._renderLabel=function(){this._labelEl.textContent=this.getLabel()},t.prototype._getValueFromData=function(e){return void 0!==e.values&&void 0!==e.values.current_session?e.values.current_session:this.getValue()},t.prototype._render=function(){
this._renderLabelElement(),this._renderDotElement(),e.prototype._render.call(this)},t.prototype._init=function(t){var i=Object.assign({},a,t);e.prototype._init.call(this,i),this.setExtraTitle(i.extraTitle),this._render()},t.prototype._renderLabelElement=function(){void 0===this._labelEl&&(this._labelEl=document.createElement("span"),this._labelEl.classList.add(this._componentClass+"__label"),this._labelEl.classList.add(this._componentClass+"__label"+this._classSuffix),this._el.appendChild(this._labelEl))},t.prototype._renderDotElement=function(){void 0===this._dotEl&&(this._dotEl=document.createElement("span"),this._dotEl.classList.add(this._componentClass+"__dot"),this._dotEl.classList.add(this._componentClass+"__dot"+this._classSuffix),this._el.appendChild(this._dotEl))},t}(n.AbstractIndicator),t.MarketStatusIndicator=l},function(e,t){},function(e,t,i){"use strict";function o(e){var t,i;if(e&&e.__esModule)return e;if(t={},null!=e)for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r,s,a,l,c;Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonLoader=void 0,r=function(){function e(e,t){var i,o;for(i=0;i<t.length;i++)o=t[i],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),s=i(30),a=i(14),l=o(a),$.fn.tvButtonLoader=(0,s.createTvBlockWithInstance)("tv-button-loader",function(e,t){return new c(e,t)}),c=t.ButtonLoader=function(){function e(t,i){n(this,e),this.$btn=$(t).addClass("tv-button--loader"),0===this.$btn.find(".tv-button__loader").length&&this.$btn.html('<span class="tv-button__text">'+this.$btn.html()+'</span><span class="tv-button__loader"><span class="tv-button__loader-item"></span><span class="tv-button__loader-item"></span><span class="tv-button__loader-item"></span></span>'),this.loading=this.$btn.hasClass("i-loading")}return r(e,[{key:"_start",value:function(){var e=this;this.starting=!0,this.$btn.addClass("i-start-load"),this.$btn.trigger("tv-button-loader:start"),setTimeout(function(){e.loading=!0,e.starting=!1,e._startPromise=!1,e.$btn.addClass("i-loading"),e.$btn.removeClass("i-start-load"),e._stopPromise&&e._stop()},2*l.dur)}},{key:"start",value:function(){this.starting||(this.stopping?this._startPromise=!0:this._start())}},{key:"_stop",value:function(){var e=this;this.stopping=!0,this.$btn.addClass("i-stop-load"),this.$btn.trigger("tv-button-loader:stop"),setTimeout(function(){e.loading=!1,e.stopping=!1,e._stopPromise=!1,e.$btn.removeClass("i-loading i-start-load i-stop-load"),e._startPromise&&e._start()},l.dur)}},{key:"stop",value:function(){this.stopping||(this.starting?this._stopPromise=!0:this._stop())}},{key:"toggle",value:function(){this.loading?this.stop():this.start()}},{key:"contentHtml",value:function(e){return e?(this.$btn.find(".tv-button__text").html(e),e):this.$btn.find(".tv-button__text").html()}},{key:"contentNojQuery",
value:function(){return this.$btn.get(0)}},{key:"disable",value:function(){this.stop(),this.$btn.addClass("i-disabled")}},{key:"enable",value:function(){this.$btn.removeClass("i-disabled")}}]),e}()},function(e,t,i){"use strict";function o(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}Object.defineProperty(t,"__esModule",{value:!0}),t.regExpEscape=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(200);t.TVDialogAbstract=o.TVDialogAbstract,t.closeAllDialogs=o.closeAllDialogs},function(e,t,i){"use strict";function o(e){return t.sfFlagMap.hasOwnProperty(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.sfFlagMap={sf_dly:0,sf_rt:0},t.isSfFlag=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LEFT_ARROW=37,t.UP_ARROW=38,t.RIGHT_ARROW=39,t.DOWN_ARROW=40,t.ENTER=13,t.ESC=27,t.SPACE=32,t.SLASH=47},function(e,t,i){"use strict";var o,n,r,s;Object.defineProperty(t,"__esModule",{value:!0}),o={},n=RegExp("^([0-9]*)$"),r=RegExp("^(\\d*)([DWMS])$"),s=function(){function e(t,i){if(void 0===i&&t!==e.INVALID)return e.parse(t);var o=t;o!==e.SECONDS&&o!==e.MINUTES&&o!==e.HOURS&&o!==e.DAYS&&o!==e.WEEKS&&o!==e.MONTHS&&o!==e.INVALID&&(o="invalid"),this._kind=o,this._multiplier=i}return e.prototype.kind=function(){return this._kind},e.prototype.multiplier=function(){return this._multiplier},e.prototype.isValid=function(){return this.kind()!==e.INVALID},e.prototype.isDWM=function(){return this.isValid()&&!this.isIntraday()},e.prototype.isIntraday=function(){return-1!==[e.SECONDS,e.MINUTES,e.HOURS].indexOf(this.kind())},e.prototype.letter=function(){return this.isValid()&&this.kind()!==e.MINUTES?this.kind()[0].toUpperCase():""},e.prototype.value=function(){return this.isValid()?this.kind()===e.MINUTES?this.multiplier()+"":this.multiplier()+this.letter():""},e.prototype.isEqualTo=function(t){if(!(t instanceof e))throw Error("Argument is not an Interval");return this.kind()!==e.INVALID&&t.kind()!==e.INVALID&&(this.kind()===t.kind()&&this.multiplier()===t.multiplier())},e.prototype.inMilliseconds=function(){if(!this.isValid()||this.kind()===e.MONTHS)return NaN;var t=this.multiplier();return void 0===t?NaN:o[this.kind()]*t},e.isEqual=function(t,i){return e.parse(t).isEqualTo(e.parse(i))},e.parse=function(t){var i,o;return t=(t+"").toUpperCase().split(",")[0],i={D:e.DAYS,W:e.WEEKS,M:e.MONTHS,H:e.HOURS,S:e.SECONDS},(o=n.exec(t))?new e(e.MINUTES,parseInt(t,10)):(o=r.exec(t),o?new e(i[o[2]],parseInt(o[1],10)?parseInt(o[1],10):1):new e(e.INVALID))},e.isDWM=function(t){return e.parse(t).isDWM()},e.kind=function(t){return e.parse(t).kind()},e.isValid=function(t){return e.parse(t).isValid()},e.SECONDS="seconds",e.MINUTES="minutes",e.HOURS="hours",e.DAYS="days",e.WEEKS="weeks",e.MONTHS="months",e.INVALID="invalid",e}(),t.Interval=s,o[s.SECONDS]=1e3,o[s.MINUTES]=60*o[s.SECONDS],o[s.HOURS]=60*o[s.MINUTES],o[s.DAYS]=24*o[s.HOURS],o[s.WEEKS]=7*o[s.DAYS]},function(e,t,i){"use strict";function o(e){return"."+e.replace(/\+/g,"")}function n(e,t){var i=o(e)
;c.unbind("keydown"+i).bind("keydown"+i,e,function(e){$(e.target).is("input[type=password]")||h||t.apply(null,Array.prototype.slice.call(arguments))}),l[e]=t}function r(e){c.unbind("keydown"+o(e)),delete l[e]}function s(){h=!0}function a(){h=!1}var l,c,h;Object.defineProperty(t,"__esModule",{value:!0}),i(13),l={},c=$(document),h=!1,t.bind=n,t.unbind=r,t.disable=s,t.enable=a},function(e,t,i){"use strict";function o(e,t,i){a.call(this,e,t),this.properties().listeners().subscribe(this,o.prototype.changeStyles),this._beingCreatedPaneView=new n(this,e),this._anchorsPaneView=new r(this,e),this._constructor=i,this._studyId=null,this._nonseriesdata=null,this._indexes=null,this._metaInfo=null,this._graphics=null,this._inputs=null}function n(e,t){l.call(this,e,t),this._lineRenderer1=new c,this._lineRenderer2=new c,this._medianRenderer=new h}function r(e,t){l.call(this,e,t)}var s=i(9).ensureNotNull,a=i(1).LineDataSource,l=i(461).LineSourcePaneView,c=i(563).VerticalLineRenderer,h=i(114).TrendLineRenderer,u=i(155).SelectionRenderer,d=i(41).CompositeRenderer,p=i(183),f=i(24).PlotList,_=i(39),m=i(2).propertyPages,g=i(91).LineEnd;inherit(o,a),o.prototype.pointsCount=function(){throw Error("Reimplement this in a child class")},o.prototype.title=function(){return this._metaInfo.description},o.prototype.studyId=function(){return this._metaInfo.id},o.prototype._requestStudy=function(){throw Error("Reimplement this in a child class")},o.prototype.changeStyles=function(){var e,t,o,n=i(144);if(this._inputs){e=n.splitInputs(this.properties().inputs.state()),t=e.obj;for(o in t)if(t[o]!==this._inputs[o]){this._inputs=t,this._requestStudy(),this._properties.lastUpdateTime.setValue((new Date).valueOf());break}}else e=n.splitInputs(this.properties().inputs.state()),this._inputs=TradingView.clone(e.obj),this._requestStudy(),this._properties.lastUpdateTime.setValue((new Date).valueOf())},o.prototype._checkTurnaround=function(e){return e===this._turnaround||e===this._model.mainSeries()._turnaround||e===this._model.mainSeries()._turnaround+"_"+this._turnaround},o.prototype.stop=function(){a.prototype.stop.call(this),this._studyId&&(this._model.chartApi().removeStudy(this._studyId),this.disconnect())},o.prototype.onData=function(e){throw Error("Reimplement this in a child class")},o.prototype._correctedPoint=function(e){var t=s(this._model.mainSeries().bars().firstIndex()),i=s(this._model.mainSeries().bars().lastIndex());return e.index=Math.max(e.index,t),e.index=Math.min(e.index,i),e},o.prototype.addPoint=function(e){return a.prototype.addPoint.call(this,this._correctedPoint(e))},o.prototype.setLastPoint=function(e){return a.prototype.setLastPoint.call(this,this._correctedPoint(e))},o.prototype.move=function(e){},o.prototype.clearData=function(){void 0!==this.m_data&&(this.m_data=new f(this._plotFields)),this._nonseriesdata=null,this._indexes=null,this._graphics=new p(this._metaInfo),this.updateAllViews()},o.prototype.state=function(e){var t=a.prototype.state.call(this,e);return e&&(void 0!==this.m_data&&(t.data=this.m_data.state()),
t.nonseriesdata=this._nonseriesdata,t.nonseriesindexes=this._indexes,t.graphics=this._graphics.graphics()),this.metaInfo()instanceof _?t.metaInfo=this.metaInfo().state():(t.metaInfo=$.extend({},this.metaInfo()),t.metaInfo.id=_.parseIdString(t.metaInfo.id+(t.metaInfo.version?"-"+t.metaInfo.version:"")).fullId),t},o.prototype.restoreData=function(e){void 0!==this.m_data&&void 0!==e.data&&this.m_data.restoreState(e.data),this._nonseriesdata=e.nonseriesdata?e.nonseriesdata:null,this._indexes=e.nonseriesindexes?e.nonseriesindexes:null,this._graphics.setGraphics(e.graphics?e.graphics:p.emptyGraphics())},o.prototype.setPoint=function(e,t){this._nonseriesdata=null,this._indexes=null,a.prototype.setPoint.call(this,e,this._correctedPoint(t))},o.prototype.disconnect=function(){this._studyId=0},o.prototype.graphics=function(){return this._graphics.graphics()},o.prototype.firstValue=function(){return this._model.mainSeries().firstValue()},o.prototype.metaInfo=function(){return this._metaInfo},o.prototype.getMinFirstBarIndexForPlot=function(){return-1/0},o.prototype.getInputsPropertyPage=function(){return m.StudyLineDataSourcePropertyPage},o.prototype.getStylesPropertyPage=function(){return m.StudyStylesPropertyPage},o.prototype.paneViews=function(e){var t,i=[];return this._isReady()?null!==(t=a.prototype.paneViews.call(this,e))&&(i=i.concat(t)):i.push(this._beingCreatedPaneView),i.push(this._anchorsPaneView),i},o.prototype._isReady=function(){return!0},inherit(n,l),n.prototype.renderer=function(){var e,t,i,o,n,r,s,a;return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._points.length<2?null:(e=new d,t=this._points[0],i=this._points[1],o=this._model.timeScale().width(),n=this._source.priceScale().height(),r={},r.width=o,r.height=n,r.points=[t],r.color="#808080",r.linewidth=1,r.linestyle=CanvasEx.LINESTYLE_SOLID,this._lineRenderer1.setData(r),e.append(this._lineRenderer1),s={},s.width=o,s.height=n,s.points=[i],s.color="#808080",s.linewidth=1,s.linestyle=CanvasEx.LINESTYLE_SOLID,this._lineRenderer2.setData(s),e.append(this._lineRenderer2),a={points:[t,i],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:"#808080",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,extendleft:!1,extendright:!1,leftend:g.Normal,rightend:g.Normal},this._medianRenderer.setData(a),e.append(this._medianRenderer),e)},inherit(r,l),r.prototype.renderer=function(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);var e=new d;return this.isAnchorsRequired()&&(e.append(new u({points:this._points})),e.append(this.createLineAnchor({points:this._points}))),e},t.StudyLineDataSource=o},function(e,t,i){"use strict";function o(){this._registeredSources={},this._sourcesToRow={},this._rowsToSources={},this._currentSymbol="",this._actualCapacity=0,this._actualWidth=1,this._numericFormatter=new r,this._percentageFormatter=new n}var n=i(73).PercentageFormatter,r=i(66).NumericFormatter;o.prototype.levelsCount=function(){return 0},o.prototype.topByRow=function(e){return e*o.ROW_HEIGHT},
o.prototype.rowHeight=function(e){return o.ROW_HEIGHT},o.prototype.canvas=function(){if(!this._canvas){this._canvas=$("<canvas>"),this._cache=this._canvas.get(0).getContext("2d"),this._canvas.prop("width",100).css("position","absolute").css("top",0).css("z-index",1e3).css("left",0);this._canvas.get(0).getContext("2d").font="12px Verdana"}return this._canvas},o.ROW_HEIGHT=14,o.prototype.points=function(e){return[e.points()[0],e.points()[1]]},o.prototype.startPoint=function(e,t){return t?e.points()[0]:e.points()[1]},o.prototype.priceRange=function(e,t){var i=this.points(e),o=i[0],n=i[1];return t?n.price-o.price:o.price-n.price},o.prototype.sourceIsReady=function(e){return e.points().length>=2},o.prototype._calculateWidth=function(e){var t,i,o,n,r,s,a,l,c,h,u,d,p,f,_,m,g,v,y,b,S,w,T;if(!this.sourceIsReady(e))return null;if(t=this.canvas().get(0).getContext("2d"),t.font="12px Verdana",i=!!e.properties().showPrices&&e.properties().showPrices.value(),o=!!e.properties().coeffsAsPercents&&e.properties().coeffsAsPercents.value(),n=e.properties().showCoeffs.value(),r=e.priceScale().formatter(),s=this.points(e),a=s[0],l=s[1],!a||!l)return null;if(c=!1,h=e.properties(),h.reverse&&h.reverse.value()&&(c=h.reverse.value()),u=this.priceRange(e,c),d=this.startPoint(e,c).price,e.priceScale().isPercent()&&null===(p=e.ownerSource().firstValue()))return 0;for(f=0,_=[],m=1;m<=this.levelsCount();m++)g="level"+m,v=h[g],y=v.coeff.value(),b=d+y*u,e.priceScale().isPercent()&&(b=e.priceScale().priceRange().convertToPercent(b,p)),S="",n&&(S+=o?this._percentageFormatter.format(Math.round(1e4*y)/100):this._numericFormatter.format(y)),i&&(S+="("+r.format(b)+")"),w=t.measureText(S).width,T={text:S,left:f,width:w+4},_.push(T),f+=T.width;return{totalWidth:f,cells:_}},o.prototype._effectiveState=function(e){var t,i,o,n,r,s,a={},l=e.properties();for(l.showPrices&&(a.showPrices=l.showPrices.value()),l.coeffsAsPercents&&(a.coeffsAsPercents=l.coeffsAsPercents.value()),a.showCoeffs=l.showCoeffs.value(),e.priceScale()&&e.priceScale().formatter().state&&(a.formatter=e.priceScale().formatter().state()),l.reverse&&(a.reverse=l.reverse.value()),a.p1=e.points()[0],a.p2=e.points()[1],3===e.points().length&&(a.p3=e.points()[2]),a.items=[],t=1;t<=this.levelsCount();t++)i="level"+t,o=l[i],n=o.coeff.value(),r=o.color.value(),s={coeff:n,color:r},a.items.push(s);return a},o.prototype._findEmptyRow=function(e){for(var t,i=0;this._rowsToSources[i];)i++;return this._rowsToSources[i]=e,i>=this._actualCapacity&&(this._actualCapacity++,t=this.canvas(),TradingView.resizeCanvas(t,this._actualWidth,o.ROW_HEIGHT*this._actualCapacity)),i},o.prototype._repaintSource=function(e,t,i){var n,r,s=o.ROW_HEIGHT*i.row,a=this.canvas().get(0).getContext("2d");for(a.clearRect(0,s,this._actualWidth,o.ROW_HEIGHT),a.textBaseline="bottom",a.font="12px Verdana",s+=o.ROW_HEIGHT,n=0;n<e.cells.length;n++)r=e.cells[n],a.fillStyle=t.items[n].color,a.fillText(r.text,r.left,s)},o.prototype.removeSource=function(e){var t,i;this._sourcesToRow[e]&&(t=this._sourcesToRow[e].row,
i=this.canvas().get(0).getContext("2d"),i.save(),i.clearRect(0,this.topByRow(t),this._actualWidth,o.ROW_HEIGHT),i.restore(),delete this._sourcesToRow[e],delete this._rowsToSources[t])},o.prototype._effectiveStatesEquals=function(e,t){var i,o=function(e,t){return!(!e&&!t)&&(!(!e||t)||(!(e||!t)||(e.minMove!==t.minMove||(e.minMove2!==t.minMove2||(e.fractional!==t.fractional||e.fractionalLength!==t.fractionalLength)))))},n=function(e,t){return!(!e&&!t)&&(!(!e||t)||(!(e||!t)||(e.index!==t.index||e.price!==t.price)))},r=function(e,t){return e.coeff!==t.coeff||e.color!==t.color};if(e&&!t)return!1;if(!e&&t)return!1;if(e.showPrices!==t.showPrices)return!1;if(e.coeffsAsPercents!==t.coeffsAsPercents)return!1;if(e.showCoeffs!==t.showCoeffs)return!1;if(e.reverse!==t.reverse)return!1;if(o(e.formatter,t.formatter))return!1;if(n(e.p1,t.p1))return!1;if(n(e.p2,t.p2))return!1;if(n(e.p3,t.p3))return!1;if(e.items.length!==t.items.length)return!1;for(i=0;i<e.items.length;i++)if(r(e.items[i],t.items[i]))return!1;return!0},o.prototype.updateSource=function(e){var t,i,n,r,s=e.properties().symbol.value();return this._currentSymbol!==s&&(this._currentSymbol=s,this._sourcesToRow={},this._rowsToSources={}),this._sourcesToRow[e.id()]||(t=this._findEmptyRow(e.id()),this._sourcesToRow[e.id()]={effectiveState:null,row:t}),i=this._sourcesToRow[e.id()].effectiveState,n=this._effectiveState(e),this._effectiveStatesEquals(i,n)||(r=this._calculateWidth(e),r?(this._sourcesToRow[e.id()].effectiveState=n,r.totalWidth>this._actualWidth&&(TradingView.resizeCanvas(this.canvas(),r.totalWidth,o.ROW_HEIGHT*this._actualCapacity),this._actualWidth=r.totalWidth),t=this._sourcesToRow[e.id()],this._repaintSource(r,n,t),this._sourcesToRow[e.id()].effectiveState=n,this._sourcesToRow[e.id()].preparedCells=r):this._sourcesToRow[e.id()].effectiveState=null),this._sourcesToRow[e.id()]},e.exports=o},function(e,t,i){"use strict";function o(e,t){return e<t}function n(e,t,i,o,n){var r,s,a;for(void 0===o&&(o=0),void 0===n&&(n=e.length),r=n-o;0<r;)s=r>>1,a=o+s,i(e[a],t)?(o=a+1,r-=s+1):r=s;return o}function r(e,t,i,r){return void 0===i&&(i=0),void 0===r&&(r=e.length),n(e,t,o,i,r)}function s(e,t,i,o,n){var r,s,a;for(void 0===o&&(o=0),void 0===n&&(n=e.length),r=n-o;0<r;)s=r>>1,a=o+s,i(t,e[a])?r=s:(o=a+1,r-=s+1);return o}function a(e,t,i,n){return void 0===i&&(i=0),void 0===n&&(n=e.length),s(e,t,o,i,n)}function l(e,t,i,o,n){var r,s;for(void 0===o&&(o=0),void 0===n&&(n=e.length-1);o<=n;)if(r=o+n>>>1,(s=i(e[r],t))>0)o=r+1;else{if(!(s<0))return r;n=r-1}return-1}Object.defineProperty(t,"__esModule",{value:!0}),t.lowerbound=n,t.lowerbound_int=r,t.upperbound=s,t.upperbound_int=a,t.bSearch=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.error="replay_error",e.point="replay_point",e.ok="replay_ok",e.resolutions="replay_resolutions",e.endOfData="replay_data_end",e.instanceId="replay_instance_id"}(t.ResponseMethods||(t.ResponseMethods={})),function(e){e.tooSmallDelay="too_small_delay",e.alreadyInAutoplay="already_in_autoplay",
e.nothingToStop="nothing_to_stop",e.pointTooDeep="point_too_deep",e.alreadyInSession="already_in_session",e.thereIsNoSuchSeries="no_series",e.notAllowedInAutoplay="not_allow_in_autoplay",e.invalidResolution="invalid_resolution"}(t.ErrorReasons||(t.ErrorReasons={}))},,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.Text=1]="Text",e[e.Binary=2]="Binary"}(t.WSMode||(t.WSMode={}))},function(e,t,i){"use strict";(function(t){function o(e){this._pendingRequestDfdPromise=null,this.invalidated=new t,this._init()}var n=i(139).createDeferredPromise;window.loginStateChange=new t,o.prototype.useToken=!1,o.prototype.token="",o.prototype._init=function(){this._getFromUserHash(),window.loginStateChange.subscribe(this,function(e){e||(this._getFromUserHash(),this.invalidated.fire())})},o.prototype._getFromUserHash=function(){window.user&&user.auth_token?this.set(user.auth_token):this.remove()},o.prototype.get=function(e){var t,i,o=!1;return!this.useToken||this.token?(i=this.useToken?this.token:"",delete this.token,t=new Promise(function(t){if(!e)return void t(i);var o=new XMLHttpRequest;o.open("POST","/grab_session/"),o.addEventListener("load",function(){t(i)}),o.send()})):(o=!0,t=this._request(e)),t.then(function(e){return this._syncExpiresTimeout(e,o),e}.bind(this))},o.prototype.set=function(e){this.useToken=!0,null!==this._pendingRequestDfdPromise?this._pendingRequestDfdPromise.resolve(e):this.token=e},o.prototype.remove=function(){this.token="",this.useToken=!1,null!==this._pendingRequestDfdPromise&&(this._pendingRequestDfdPromise.resolve(""),delete this._token)},o.prototype._request=function(e){var t,i,o,r,s;return null===this._pendingRequestDfdPromise&&(t=this,i=null,o=n(),this._pendingRequestDfdPromise=o,r=function(){null!==i&&(i.abort(),i=null),t._pendingRequestDfdPromise=null},o.promise.then(r),o.promise.catch(r),s=0,function n(){function r(){var e,r=i.status;if(i=null,null!==t._pendingRequestDfdPromise&&t._pendingRequestDfdPromise===o){if(403===r)return void o.resolve("");e=Math.min(1e3*s,3e4),s++,setTimeout(n,e)}}i=new XMLHttpRequest,i.open("POST","/quote_token/"),i.addEventListener("load",function(){var e=JSON.parse(i.responseText);i=null,o.resolve(e)}),i.addEventListener("error",r),i.addEventListener("timeout",r),i.send("grabSession="+!!e)}()),this._pendingRequestDfdPromise.promise},o.prototype._expiration=function(e){var t,i,o=e.split(":");return o[8]&&o[9]?(t=+o[8],i=+o[9],isFinite(t)&&isFinite(i)?{timestamp:1e3*t,lifespan:1e3*i}:null):null},o.prototype._expiresTimeoutId=void 0,o.prototype._syncExpiresTimeout=function(e,t){var i,o;this._expiresTimeoutId&&(clearTimeout(this._expiresTimeoutId),delete this._expiresTimeoutId),e&&(i=this._expiration(e))&&(o=t?i.lifespan:new Date-i.timestamp+i.lifespan,o-=3e5,o=Math.max(0,o),this._expiresTimeoutId=setTimeout(function(){this.invalidated.fire()}.bind(this),o))},e.exports=o}).call(t,i(4))},function(e,t,i){"use strict";function o(){var e,t;return{promise:new Promise(function(i,o){e=i,t=o}),reject:t,resolve:e}}
Object.defineProperty(t,"__esModule",{value:!0}),t.createDeferredPromise=o},function(e,t,i){"use strict";var o=function(){this.set_data_quality=function(){return["low"]},this.quote_create_session=function(e){return[e]},this.quote_delete_session=function(e){return[e]},this.quote_set_fields=function(e,t){return[e].concat(t)},this.quote_add_symbols=function(e,t){return[e].concat(t)},this.quote_remove_symbols=function(e,t){return[e].concat(t)},this.quote_fast_symbols=function(e,t){return[e].concat(t)},this.quote_hibernate_all=function(e){return[e]},this.depth_create_session=function(e,t,i){return[e,t,i]},this.depth_delete_session=function(e){return[e]},this.depth_set_symbol=function(e,t){return[e,t]},this.depth_clear_symbol=function(e){return[e]},this.depth_set_scale=function(e,t){return[e,t]},this.chart_create_session=function(e,t){return[e,t?"disable_statistics":""]},this.chart_delete_session=function(e){return[e]},this.set_auth_token=function(e){return[e]},this.switch_timezone=function(e,t){return[e,t]},this.resolve_symbol=function(e,t,i){return[e,t,i]},this.create_series=function(e,t,i,o,n,r){return i=i||"",[e,t,i,o,n,r]},this.remove_series=function(e,t){return[e,t]},this.modify_series=function(e,t,i,o,n){return i=i||"",[e,t,i,o,n]},this.request_more_data=function(e,t,i){return[e,t,i]},this.request_studies_metadata=function(e,t){return[e,t]},this.create_study=function(e,t,i,o,n,r){return i=i||"",[e,t,i,o,n].concat(r)},this.create_child_study=function(e,t,i,o,n,r){return this.create_study(e,t,i,o,n,r)},this.child_study_rebind=function(e,t,i,o,n,r){return i=i||"",[e,t,i,o,n].concat(r)},this.remove_study=function(e,t){return[e,t]},this.modify_study=function(e,t,i,o){return i=i||"",[e,t,i].concat(o)},this.create_pointset=function(e,t,i,o,n,r){return i=i||"",[e,t,i,o,n].concat(r)},this.modify_pointset=function(e,t,i,o){return i=i||"",[e,t,i].concat(o)},this.remove_pointset=function(e,t){return[e,t]},this.request_more_tickmarks=function(e,t,i){return[e,t,i]},this.get_first_bar_time=function(e,t,i){return[e,t,i]},this.replay_create_session=function(e){return[e]},this.replay_delete_session=function(e){return[e]},this.replay_reset=function(e,t,i){return[e,t,i]},this.replay_start=function(e,t,i){return[e,t,i]},this.replay_stop=function(e,t){return[e,t]},this.replay_step=function(e,t,i){return[e,t,i]},this.replay_add_series=function(e,t,i,o){return[e,t,i,o]},this.replay_remove_series=function(e,t,i,o){return[e,t,i,o]},this.replay_set_resolution=function(e,t,i){return[e,t,i]},this.convertTimescaleResponse=function(e){var t,i,o=e.marks;for(t=0;t<o.length;++t)o[t]={span:o[t][0],time:o[t][1],index:o[t][2]};if(void 0!==e.index_diff)for(i=e.index_diff,t=0;t<i.length;++t)i[t]={old:i[t][0],new:i[t][1]};else e.index_diff=[];return e},this.getTimescaleObjects=function(e){return e.params[0]},this.getTimescaleChangeset=function(e){return e.params[1]},this.prepareTimescaleUpdate=function(e,t,i){var o,n,r;for(o in t)n={},n.customId=o,n.plots=t[o].series,t[o].ns&&(n.nonseries=t[o].ns),n.turnaround=t[o].turnaround,r={method:"data_update",
params:n},i(e,o,r)},this.prepareDataUpdate=function(e,t,i){var o,n,r,s,a,l;for(o in t.params[0]){n=t.params[0][o],r={},r.customId=o,r.plots=n.series?n.series:n.plots,r.turnaround=n.turnaround,"s"in n&&"ns"in n&&(r.plots=n.s,r.nonseries=n.ns);for(s in r.plots)for(a in r.plots[s].value)1e100===r.plots[s].value[a]&&(r.plots[s].value[a]=void 0);l={method:"data_update",params:r},i(e,o,l)}},this.unpack=function(e){function t(e){return e.index=e.i,e.value=e.v,delete e.i,delete e.v,e}var i,o;switch(e=JSON.parse(e),e.m&&e.p&&(e.method=e.m,e.params=e.p),i=e.params[1],e.method){case"qsd":e.method="quote_symbol_data",i.symbolname=i.n,i.status=i.s,i.values=i.v,i.values.change=i.v.ch,i.values.last_price=i.v.lp,i.values.change_percent=i.v.chp,delete i.n,delete i.s,delete i.v,delete i.values.ch,delete i.values.lp,delete i.values.chp;break;case"du":e.method="data_update";for(o in i)i[o].turnaround=i[o].t,i[o].s&&!i[o].series&&(i[o].series=i[o].s.map(t)),i[o].st&&(i[o].s=i[o].st.map(t));break;case"timescale_update":for(o in i)i[o].t&&(i[o].turnaround=i[o].t),i[o].s&&!i[o].series&&(i[o].series=i[o].s.map(t)),i[o].st&&(i[o].s=i[o].st.map(t))}return e},this.prepareEncodeMessage=function(e,t){return JSON.stringify({m:e,p:t})}};e.exports=o},function(e,t,i){"use strict";(function(t){var o,n,r=i(0).getLogger("Common.LocalForage"),s=i(26).TVLocalStorageAsync,a=[t.INDEXEDDB,t.LOCALSTORAGE,t.WEBSQL],l=[t.LOCALSTORAGE,t.WEBSQL,t.INDEXEDDB];window.localForageReady=$.Deferred(),o=function(e){r.logNormal("localForage driver: "+JSON.stringify(e));var i={name:"tradingview",driver:e};t.config(i),window.TVLocalForage=t,window.localForageReady.resolve()};try{n=window.indexedDB.open("tradingviewCheckIndexedDB"),n.onerror=function(e){r.logError("IndexedDB is NOT available"),o(l)},n.onsuccess=function(e){r.logNormal("IndexedDB is available"),o(a)}}catch(e){r.logError("IndexedDB is NOT available, "+e);try{o(l)}catch(e){window.TVLocalForage=s,window.localForageReady.resolve()}}e.exports={TVLocalForage:window.TVLocalForage}}).call(t,i(142))},function(e,t,i){(function(t){var i;!function(t){e.exports=t()}(function(){return function e(t,o,n){function r(s,l){var c,h,u;if(!o[s]){if(!t[s]){if(c="function"==typeof i&&i,!l&&c)return i(s,!0);if(a)return a(s,!0);throw h=Error("Cannot find module '"+s+"'"),h.code="MODULE_NOT_FOUND",h}u=o[s]={exports:{}},t[s][0].call(u.exports,function(e){var i=t[s][1][e];return r(i||e)},u,u.exports,e,t,o,n)}return o[s].exports}var s,a="function"==typeof i&&i;for(s=0;s<n.length;s++)r(n[s]);return r}({1:[function(e,t,i){"use strict";function o(){}function n(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=v,this.queue=[],this.outcome=void 0,e!==o&&l(this,e)}function r(e,t,i){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof i&&(this.onRejected=i,this.callRejected=this.otherCallRejected)}function s(e,t,i){f(function(){var o;try{o=t(i)}catch(t){return _.reject(e,t)}
o===e?_.reject(e,new TypeError("Cannot resolve promise with itself")):_.resolve(e,o)})}function a(e){var t=e&&e.then;if(e&&"object"==typeof e&&"function"==typeof t)return function(){t.apply(e,arguments)}}function l(e,t){function i(t){r||(r=!0,_.reject(e,t))}function o(t){r||(r=!0,_.resolve(e,t))}function n(){t(o,i)}var r=!1,s=c(n);"error"===s.status&&i(s.value)}function c(e,t){var i={};try{i.value=e(t),i.status="success"}catch(e){i.status="error",i.value=e}return i}function h(e){return e instanceof this?e:_.resolve(new this(o),e)}function u(e){var t=new this(o);return _.reject(t,e)}function d(e){function t(e,t){function o(e){r[t]=e,++s!==i||n||(n=!0,_.resolve(l,r))}c.resolve(e).then(o,function(e){n||(n=!0,_.reject(l,e))})}var i,n,r,s,a,l,c=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));if(i=e.length,n=!1,!i)return this.resolve([]);for(r=Array(i),s=0,a=-1,l=new this(o);++a<i;)t(e[a],a);return l}function p(e){function t(e){a.resolve(e).then(function(e){n||(n=!0,_.resolve(s,e))},function(e){n||(n=!0,_.reject(s,e))})}var i,n,r,s,a=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));if(i=e.length,n=!1,!i)return this.resolve([]);for(r=-1,s=new this(o);++r<i;)t(e[r]);return s}var f=e(2),_={},m=["REJECTED"],g=["FULFILLED"],v=["PENDING"];t.exports=i=n,n.prototype.catch=function(e){return this.then(null,e)},n.prototype.then=function(e,t){var i,n;return"function"!=typeof e&&this.state===g||"function"!=typeof t&&this.state===m?this:(i=new this.constructor(o),this.state!==v?(n=this.state===g?e:t,s(i,n,this.outcome)):this.queue.push(new r(i,e,t)),i)},r.prototype.callFulfilled=function(e){_.resolve(this.promise,e)},r.prototype.otherCallFulfilled=function(e){s(this.promise,this.onFulfilled,e)},r.prototype.callRejected=function(e){_.reject(this.promise,e)},r.prototype.otherCallRejected=function(e){s(this.promise,this.onRejected,e)},_.resolve=function(e,t){var i,o,n,r=c(a,t);if("error"===r.status)return _.reject(e,r.value);if(i=r.value)l(e,i);else for(e.state=g,e.outcome=t,o=-1,n=e.queue.length;++o<n;)e.queue[o].callFulfilled(t);return e},_.reject=function(e,t){var i,o;for(e.state=m,e.outcome=t,i=-1,o=e.queue.length;++i<o;)e.queue[i].callRejected(t);return e},i.resolve=h,i.reject=u,i.all=d,i.race=p},{2:2}],2:[function(e,i,o){(function(e){"use strict";function t(){var e,t,i;for(c=!0,i=h.length;i;){for(t=h,h=[],e=-1;++e<i;)t[e]();i=h.length}c=!1}function o(e){1!==h.push(e)||c||n()}var n,r,s,a,l,c,h,u=e.MutationObserver||e.WebKitMutationObserver;u?(r=0,s=new u(t),a=e.document.createTextNode(""),s.observe(a,{characterData:!0}),n=function(){a.data=r=++r%2}):e.setImmediate||void 0===e.MessageChannel?n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var i=e.document.createElement("script");i.onreadystatechange=function(){t(),i.onreadystatechange=null,i.parentNode.removeChild(i),i=null},e.document.documentElement.appendChild(i)}:function(){setTimeout(t,0)
}:(l=new e.MessageChannel,l.port1.onmessage=t,n=function(){l.port2.postMessage(0)}),h=[],i.exports=o}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,i,o){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(1))}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{1:1}],4:[function(e,t,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){}}function r(){try{return!!$e&&(!("undefined"!=typeof openDatabase&&"undefined"!=typeof navigator&&navigator.userAgent&&/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent))&&($e&&"function"==typeof $e.open&&"undefined"!=typeof IDBKeyRange))}catch(e){return!1}}function s(){return"function"==typeof openDatabase}function a(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&localStorage.setItem}catch(e){return!1}}function l(e,t){var i,o,n;e=e||[],t=t||{};try{return new Blob(e,t)}catch(r){if("TypeError"!==r.name)throw r;for(i="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder,o=new i,n=0;n<e.length;n+=1)o.append(e[n]);return o.getBlob(t.type)}}function c(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function h(e,t,i){"function"==typeof t&&e.then(t),"function"==typeof i&&e.catch(i)}function u(e){var t,i=e.length,o=new ArrayBuffer(i),n=new Uint8Array(o);for(t=0;t<i;t++)n[t]=e.charCodeAt(t);return o}function d(e){return new ne(function(t){var i=l([""]);e.objectStore(re).put(i,"key"),e.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},e.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),i=navigator.userAgent.match(/Edge\//);t(i||!e||parseInt(e[1],10)>=43)}}).catch(function(){return!1})}function p(e){return"boolean"==typeof se?ne.resolve(se):d(e).then(function(e){return se=e})}function f(e){var t=ae[e.name],i={};i.promise=new ne(function(e){i.resolve=e}),t.deferredOperations.push(i),t.dbReady?t.dbReady=t.dbReady.then(function(){return i.promise}):t.dbReady=i.promise}function _(e){var t=ae[e.name],i=t.deferredOperations.pop();i&&i.resolve()}function m(e,t){return new ne(function(i,o){var n,r;if(e.db){if(!t)return i(e.db);f(e),e.db.close()}n=[e.name],t&&n.push(e.version),r=$e.open.apply($e,n),t&&(r.onupgradeneeded=function(t){var i=r.result;try{i.createObjectStore(e.storeName),t.oldVersion<=1&&i.createObjectStore(re)}catch(i){if("ConstraintError"!==i.name)throw i;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),
r.onerror=function(){o(r.error)},r.onsuccess=function(){i(r.result),_(e)}})}function g(e){return m(e,!1)}function v(e){return m(e,!0)}function y(e,t){var i,o,n,r;return!e.db||(i=!e.db.objectStoreNames.contains(e.storeName),o=e.version<e.db.version,n=e.version>e.db.version,o&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),!(!n&&!i)&&(i&&(r=e.db.version+1)>e.version&&(e.version=r),!0))}function b(e){return new ne(function(t,i){var o=new FileReader;o.onerror=i,o.onloadend=function(i){var o=btoa(i.target.result||"");t({__local_forage_encoded_blob:!0,data:o,type:e.type})},o.readAsBinaryString(e)})}function S(e){return l([u(atob(e.data))],{type:e.type})}function w(e){return e&&e.__local_forage_encoded_blob}function T(e){var t=this,i=t._initReady().then(function(){var e=ae[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady});return h(i,e,e),i}function P(e){function t(){return ne.resolve()}var i,o,n,r,s,a,l=this,c={db:null};if(e)for(i in e)c[i]=e[i];for(ae||(ae={}),o=ae[c.name],o||(o={forages:[],db:null,dbReady:null,deferredOperations:[]},ae[c.name]=o),o.forages.push(l),l._initReady||(l._initReady=l.ready,l.ready=T),n=[],r=0;r<o.forages.length;r++)(s=o.forages[r])!==l&&n.push(s._initReady().catch(t));return a=o.forages.slice(0),ne.all(n).then(function(){return c.db=o.db,g(c)}).then(function(e){return c.db=e,y(c,l._defaultConfig.version)?v(c):e}).then(function(e){var t,i;for(c.db=o.db=e,l._dbInfo=c,t=0;t<a.length;t++)(i=a[t])!==l&&(i._dbInfo.db=c.db,i._dbInfo.version=c.version)})}function C(e,t){var i,o=this;return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e+=""),i=new ne(function(t,i){o.ready().then(function(){var n=o._dbInfo,r=n.db.transaction(n.storeName,"readonly").objectStore(n.storeName),s=r.get(e);s.onsuccess=function(){var e=s.result;void 0===e&&(e=null),w(e)&&(e=S(e)),t(e)},s.onerror=function(){i(s.error)}}).catch(i)}),c(i,t),i}function x(e,t){var i=this,o=new ne(function(t,o){i.ready().then(function(){var n=i._dbInfo,r=n.db.transaction(n.storeName,"readonly").objectStore(n.storeName),s=r.openCursor(),a=1;s.onsuccess=function(){var i,o,n=s.result;n?(i=n.value,w(i)&&(i=S(i)),o=e(i,n.key,a++),void 0!==o?t(o):n.continue()):t()},s.onerror=function(){o(s.error)}}).catch(o)});return c(o,t),o}function E(e,t,i){var o,n=this;return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e+=""),o=new ne(function(i,o){var r;n.ready().then(function(){return r=n._dbInfo,"[object Blob]"===le.call(t)?p(r.db).then(function(e){return e?t:b(t)}):t}).then(function(t){var n,s=r.db.transaction(r.storeName,"readwrite"),a=s.objectStore(r.storeName);null===t&&(t=void 0),s.oncomplete=function(){void 0===t&&(t=null),i(t)},s.onabort=s.onerror=function(){var e=n.error?n.error:n.transaction.error;o(e)},n=a.put(t,e)}).catch(o)}),c(o,i),o}function L(e,t){var i,o=this;return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e+=""),i=new ne(function(t,i){
o.ready().then(function(){var n=o._dbInfo,r=n.db.transaction(n.storeName,"readwrite"),s=r.objectStore(n.storeName),a=s.delete(e);r.oncomplete=function(){t()},r.onerror=function(){i(a.error)},r.onabort=function(){var e=a.error?a.error:a.transaction.error;i(e)}}).catch(i)}),c(i,t),i}function I(e){var t=this,i=new ne(function(e,i){t.ready().then(function(){var o=t._dbInfo,n=o.db.transaction(o.storeName,"readwrite"),r=n.objectStore(o.storeName),s=r.clear();n.oncomplete=function(){e()},n.onabort=n.onerror=function(){var e=s.error?s.error:s.transaction.error;i(e)}}).catch(i)});return c(i,e),i}function A(e){var t=this,i=new ne(function(e,i){t.ready().then(function(){var o=t._dbInfo,n=o.db.transaction(o.storeName,"readonly").objectStore(o.storeName),r=n.count();r.onsuccess=function(){e(r.result)},r.onerror=function(){i(r.error)}}).catch(i)});return c(i,e),i}function k(e,t){var i=this,o=new ne(function(t,o){if(e<0)return void t(null);i.ready().then(function(){var n=i._dbInfo,r=n.db.transaction(n.storeName,"readonly").objectStore(n.storeName),s=!1,a=r.openCursor();a.onsuccess=function(){var i=a.result;if(!i)return void t(null);0===e?t(i.key):s?t(i.key):(s=!0,i.advance(e))},a.onerror=function(){o(a.error)}}).catch(o)});return c(o,t),o}function M(e){var t=this,i=new ne(function(e,i){t.ready().then(function(){var o=t._dbInfo,n=o.db.transaction(o.storeName,"readonly").objectStore(o.storeName),r=n.openCursor(),s=[];r.onsuccess=function(){var t=r.result;if(!t)return void e(s);s.push(t.key),t.continue()},r.onerror=function(){i(r.error)}}).catch(i)});return c(i,e),i}function O(e){var t,i,o,n,r,s,a,l=.75*e.length,c=e.length,h=0;for("="===e[e.length-1]&&(l--,"="===e[e.length-2]&&l--),s=new ArrayBuffer(l),a=new Uint8Array(s),t=0;t<c;t+=4)i=he.indexOf(e[t]),o=he.indexOf(e[t+1]),n=he.indexOf(e[t+2]),r=he.indexOf(e[t+3]),a[h++]=i<<2|o>>4,a[h++]=(15&o)<<4|n>>2,a[h++]=(3&n)<<6|63&r;return s}function D(e){var t,i=new Uint8Array(e),o="";for(t=0;t<i.length;t+=3)o+=he[i[t]>>2],o+=he[(3&i[t])<<4|i[t+1]>>4],o+=he[(15&i[t+1])<<2|i[t+2]>>6],o+=he[63&i[t+2]];return i.length%3==2?o=o.substring(0,o.length-1)+"=":i.length%3==1&&(o=o.substring(0,o.length-2)+"=="),o}function V(e,t){var i,o,n,r="";if(e&&(r=Ee.call(e)),e&&("[object ArrayBuffer]"===r||e.buffer&&"[object ArrayBuffer]"===Ee.call(e.buffer)))o=pe,e instanceof ArrayBuffer?(i=e,o+=_e):(i=e.buffer,"[object Int8Array]"===r?o+=ge:"[object Uint8Array]"===r?o+=ve:"[object Uint8ClampedArray]"===r?o+=ye:"[object Int16Array]"===r?o+=be:"[object Uint16Array]"===r?o+=we:"[object Int32Array]"===r?o+=Se:"[object Uint32Array]"===r?o+=Te:"[object Float32Array]"===r?o+=Pe:"[object Float64Array]"===r?o+=Ce:t(Error("Failed to get type for BinaryArray"))),t(o+D(i));else if("[object Blob]"===r)n=new FileReader,n.onload=function(){var i=ue+e.type+"~"+D(this.result);t(pe+me+i)},n.readAsArrayBuffer(e);else try{t(JSON.stringify(e))}catch(i){console.error("Couldn't convert value into a JSON string: ",e),t(null,i)}}function R(e){var t,i,o,n,r;if(e.substring(0,fe)!==pe)return JSON.parse(e);switch(t=e.substring(xe),
i=e.substring(fe,xe),i===me&&de.test(t)&&(n=t.match(de),o=n[1],t=t.substring(n[0].length)),r=O(t),i){case _e:return r;case me:return l([r],{type:o});case ge:return new Int8Array(r);case ve:return new Uint8Array(r);case ye:return new Uint8ClampedArray(r);case be:return new Int16Array(r);case we:return new Uint16Array(r);case Se:return new Int32Array(r);case Te:return new Uint32Array(r);case Pe:return new Float32Array(r);case Ce:return new Float64Array(r);default:throw Error("Unkown type: "+i)}}function B(e){var t,i,o=this,n={db:null};if(e)for(t in e)n[t]="string"!=typeof e[t]?""+e[t]:e[t];return i=new ne(function(e,t){try{n.db=openDatabase(n.name,n.version+"",n.description,n.size)}catch(e){return t(e)}n.db.transaction(function(i){i.executeSql("CREATE TABLE IF NOT EXISTS "+n.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],function(){o._dbInfo=n,e()},function(e,i){t(i)})})}),n.serializer=Le,i}function N(e,t){var i,o=this;return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e+=""),i=new ne(function(t,i){o.ready().then(function(){var n=o._dbInfo;n.db.transaction(function(o){o.executeSql("SELECT * FROM "+n.storeName+" WHERE key = ? LIMIT 1",[e],function(e,i){var o=i.rows.length?i.rows.item(0).value:null;o&&(o=n.serializer.deserialize(o)),t(o)},function(e,t){i(t)})})}).catch(i)}),c(i,t),i}function z(e,t){var i=this,o=new ne(function(t,o){i.ready().then(function(){var n=i._dbInfo;n.db.transaction(function(i){i.executeSql("SELECT * FROM "+n.storeName,[],function(i,o){var r,s,a,l=o.rows,c=l.length;for(r=0;r<c;r++)if(s=l.item(r),a=s.value,a&&(a=n.serializer.deserialize(a)),void 0!==(a=e(a,s.key,r+1)))return void t(a);t()},function(e,t){o(t)})})}).catch(o)});return c(o,t),o}function F(e,t,i){var o,n=this;return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e+=""),o=new ne(function(i,o){n.ready().then(function(){var r,s;void 0===t&&(t=null),r=t,s=n._dbInfo,s.serializer.serialize(t,function(t,n){n?o(n):s.db.transaction(function(n){n.executeSql("INSERT OR REPLACE INTO "+s.storeName+" (key, value) VALUES (?, ?)",[e,t],function(){i(r)},function(e,t){o(t)})},function(e){e.code===e.QUOTA_ERR&&o(e)})})}).catch(o)}),c(o,i),o}function $(e,t){var i,o=this;return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e+=""),i=new ne(function(t,i){o.ready().then(function(){var n=o._dbInfo;n.db.transaction(function(o){o.executeSql("DELETE FROM "+n.storeName+" WHERE key = ?",[e],function(){t()},function(e,t){i(t)})})}).catch(i)}),c(i,t),i}function H(e){var t=this,i=new ne(function(e,i){t.ready().then(function(){var o=t._dbInfo;o.db.transaction(function(t){t.executeSql("DELETE FROM "+o.storeName,[],function(){e()},function(e,t){i(t)})})}).catch(i)});return c(i,e),i}function W(e){var t=this,i=new ne(function(e,i){t.ready().then(function(){var o=t._dbInfo;o.db.transaction(function(t){t.executeSql("SELECT COUNT(key) as c FROM "+o.storeName,[],function(t,i){var o=i.rows.item(0).c;e(o)},function(e,t){i(t)})})}).catch(i)});return c(i,e),i}
function U(e,t){var i=this,o=new ne(function(t,o){i.ready().then(function(){var n=i._dbInfo;n.db.transaction(function(i){i.executeSql("SELECT key FROM "+n.storeName+" WHERE id = ? LIMIT 1",[e+1],function(e,i){var o=i.rows.length?i.rows.item(0).key:null;t(o)},function(e,t){o(t)})})}).catch(o)});return c(o,t),o}function j(e){var t=this,i=new ne(function(e,i){t.ready().then(function(){var o=t._dbInfo;o.db.transaction(function(t){t.executeSql("SELECT key FROM "+o.storeName,[],function(t,i){var o,n=[];for(o=0;o<i.rows.length;o++)n.push(i.rows.item(o).key);e(n)},function(e,t){i(t)})})}).catch(i)});return c(i,e),i}function q(e){var t,i=this,o={};if(e)for(t in e)o[t]=e[t];return o.keyPrefix=o.name+"/",o.storeName!==i._defaultConfig.storeName&&(o.keyPrefix+=o.storeName+"/"),i._dbInfo=o,o.serializer=Le,ne.resolve()}function G(e){var t=this,i=t.ready().then(function(){var e,i,o=t._dbInfo.keyPrefix;for(e=localStorage.length-1;e>=0;e--)i=localStorage.key(e),0===i.indexOf(o)&&localStorage.removeItem(i)});return c(i,e),i}function Y(e,t){var i,o=this;return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e+=""),i=o.ready().then(function(){var t=o._dbInfo,i=localStorage.getItem(t.keyPrefix+e);return i&&(i=t.serializer.deserialize(i)),i}),c(i,t),i}function X(e,t){var i=this,o=i.ready().then(function(){var t,o,n,r=i._dbInfo,s=r.keyPrefix,a=s.length,l=localStorage.length,c=1;for(t=0;t<l;t++)if(o=localStorage.key(t),0===o.indexOf(s)&&(n=localStorage.getItem(o),n&&(n=r.serializer.deserialize(n)),void 0!==(n=e(n,o.substring(a),c++))))return n});return c(o,t),o}function K(e,t){var i=this,o=i.ready().then(function(){var t,o=i._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(o.keyPrefix.length)),t});return c(o,t),o}function J(e){var t=this,i=t.ready().then(function(){var e,i=t._dbInfo,o=localStorage.length,n=[];for(e=0;e<o;e++)0===localStorage.key(e).indexOf(i.keyPrefix)&&n.push(localStorage.key(e).substring(i.keyPrefix.length));return n});return c(i,e),i}function Z(e){var t=this,i=t.keys().then(function(e){return e.length});return c(i,e),i}function Q(e,t){var i,o=this;return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e+=""),i=o.ready().then(function(){var t=o._dbInfo;localStorage.removeItem(t.keyPrefix+e)}),c(i,t),i}function ee(e,t,i){var o,n=this;return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e+=""),o=n.ready().then(function(){void 0===t&&(t=null);var i=t;return new ne(function(o,r){var s=n._dbInfo;s.serializer.serialize(t,function(t,n){if(n)r(n);else try{localStorage.setItem(s.keyPrefix+e,t),o(i)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||r(e),r(e)}})})}),c(o,i),o}function te(e,t){e[t]=function(){var i=arguments;return e.ready().then(function(){return e[t].apply(e,i)})}}function ie(){var e,t,i;for(e=1;e<arguments.length;e++)if(t=arguments[e])for(i in t)t.hasOwnProperty(i)&&(Be(t[i])?arguments[0][i]=t[i].slice():arguments[0][i]=t[i]);return arguments[0]}function oe(e){
for(var t in Me)if(Me.hasOwnProperty(t)&&Me[t]===e)return!0;return!1}var ne,re,se,ae,le,ce,he,ue,de,pe,fe,_e,me,ge,ve,ye,be,Se,we,Te,Pe,Ce,xe,Ee,Le,Ie,Ae,ke,Me,Oe,De,Ve,Re,Be,Ne,ze,Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$e=n();"undefined"==typeof Promise&&void 0!==e&&e(3),ne=Promise,re="local-forage-detect-blob-support",le=Object.prototype.toString,ce={_driver:"asyncStorage",_initStorage:P,iterate:x,getItem:C,setItem:E,removeItem:L,clear:I,length:A,key:k,keys:M},he="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ue="~~local_forage_type~",de=/^~~local_forage_type~([^~]+)~/,pe="__lfsc__:",fe=pe.length,_e="arbf",me="blob",ge="si08",ve="ui08",ye="uic8",be="si16",Se="si32",we="ur16",Te="ui32",Pe="fl32",Ce="fl64",xe=fe+_e.length,Ee=Object.prototype.toString,Le={serialize:V,deserialize:R,stringToBuffer:O,bufferToString:D},Ie={_driver:"webSQLStorage",_initStorage:B,iterate:z,getItem:N,setItem:F,removeItem:$,clear:H,length:W,key:U,keys:j},Ae={_driver:"localStorageWrapper",_initStorage:q,iterate:X,getItem:Y,setItem:ee,removeItem:Q,clear:G,length:Z,key:K,keys:J},ke={},Me={INDEXEDDB:"asyncStorage",LOCALSTORAGE:"localStorageWrapper",WEBSQL:"webSQLStorage"},Oe=[Me.INDEXEDDB,Me.WEBSQL,Me.LOCALSTORAGE],De=["clear","getItem","iterate","key","keys","length","removeItem","setItem"],Ve={description:"",driver:Oe.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},Re={},Re[Me.INDEXEDDB]=r(),Re[Me.WEBSQL]=s(),Re[Me.LOCALSTORAGE]=a(),Be=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Ne=function(){function e(t){o(this,e),this.INDEXEDDB=Me.INDEXEDDB,this.LOCALSTORAGE=Me.LOCALSTORAGE,this.WEBSQL=Me.WEBSQL,this._defaultConfig=ie({},Ve),this._config=ie({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver)}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":Fe(e))){if(this._ready)return Error("Can't call config() after localforage has been used.");for(var t in e)"storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),this._config[t]=e[t];return"driver"in e&&e.driver&&this.setDriver(this._config.driver),!0}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,i){var o=new ne(function(t,i){var o,n,r,s,a,l,c;try{if(o=e._driver,n=Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver"),r=Error("Custom driver name already in use: "+e._driver),!e._driver)return void i(n);if(oe(e._driver))return void i(r);for(s=De.concat("_initStorage"),a=0;a<s.length;a++)if(!(l=s[a])||!e[l]||"function"!=typeof e[l])return void i(n);c=ne.resolve(!0),"_support"in e&&(c=e._support&&"function"==typeof e._support?e._support():ne.resolve(!!e._support)),c.then(function(i){Re[o]=i,ke[o]=e,t()},i)}catch(e){i(e)}})
;return h(o,t,i),o},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,i){var o=this,n=ne.resolve().then(function(){if(!oe(e)){if(ke[e])return ke[e];throw Error("Driver not found.")}switch(e){case o.INDEXEDDB:return ce;case o.LOCALSTORAGE:return Ae;case o.WEBSQL:return Ie}});return h(n,t,i),n},e.prototype.getSerializer=function(e){var t=ne.resolve(Le);return h(t,e),t},e.prototype.ready=function(e){var t=this,i=t._driverSet.then(function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready});return h(i,e,e),i},e.prototype.setDriver=function(e,t,i){function o(){a._config.driver=a.driver()}function n(e){return function(){function t(){for(var n,r;i<e.length;)return n=e[i],i++,a._dbInfo=null,a._ready=null,a.getDriver(n).then(function(e){return a._extend(e),o(),a._ready=a._initStorage(a._config),a._ready}).catch(t);return o(),r=Error("No available storage method found."),a._driverSet=ne.reject(r),a._driverSet}var i=0;return t()}}var r,s,a=this;return Be(e)||(e=[e]),r=this._getSupportedDrivers(e),s=null!==this._driverSet?this._driverSet.catch(function(){return ne.resolve()}):ne.resolve(),this._driverSet=s.then(function(){var e=r[0];return a._dbInfo=null,a._ready=null,a.getDriver(e).then(function(e){a._driver=e._driver,o(),a._wrapLibraryMethodsWithReady(),a._initDriver=n(r)})}).catch(function(){o();var e=Error("No available storage method found.");return a._driverSet=ne.reject(e),a._driverSet}),h(this._driverSet,t,i),this._driverSet},e.prototype.supports=function(e){return!!Re[e]},e.prototype._extend=function(e){ie(this,e)},e.prototype._getSupportedDrivers=function(e){var t,i,o,n=[];for(t=0,i=e.length;t<i;t++)o=e[t],this.supports(o)&&n.push(o);return n},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0;e<De.length;e++)te(this,De[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),ze=new Ne,t.exports=ze},{3:3}]},{},[4])(4)})}).call(t,i(58))},function(e,t){e.exports={au:["ASX:XAT","ASX:XAF","INDEX:NZD","SP:SPX","TVC:US30","BITFINEX:BTCUSD","BITFINEX:XRPUSD","BITFINEX:ETHUSD","BITFINEX:BCHUSD","COINBASE:LTCUSD","FX:AUDUSD","FX:EURUSD","FX:USDJPY","FX:GBPUSD","FX_IDC:XAUUSD","NYMEX:CL1!","COMEX:HG1!"],br:["BMFBOVESPA:IBOV","BMFBOVESPA:IBXL","BITFINEX:BTCUSD","BITFINEX:XRPUSD","BITFINEX:ETHUSD","BITFINEX:BCHUSD","COINBASE:LTCUSD","FX_IDC:USDBRL","FX_IDC:EURBRL","FX_IDC:BRLJPY","BMFBOVESPA:PETR3","BMFBOVESPA:GGBR3","BMFBOVESPA:VALE3"],ca:["TSX:TXSX","TSX:VIXC","SP:SPX","TVC:DJI","BITFINEX:BTCUSD","BITFINEX:XRPUSD","BITFINEX:ETHUSD","BITFINEX:BCHUSD","COINBASE:LTCUSD","FX:USDCAD","FX:EURUSD","FX:USDJPY","FX:GBPUSD","FX_IDC:XAUUSD","NYMEX:CL1!"],default:["SP:SPX","AMEX:SPY","TVC:NDX","INDEX:DOWI","TVC:DXY","TVC:UKX","TVC:DAX","TVC:NI225","BITFINEX:BTCUSD","BITFINEX:XRPUSD","BITFINEX:ETHUSD","BITFINEX:BCHUSD","COINBASE:LTCUSD","FX:EURUSD","ICEEUR:CB1!","FX_IDC:XAUUSD","AMEX:DIA","AMEX:GLD","AMEX:FXE"],
es:["TVC:IBEX35","EURONEXT:SABE","BME:SAN","BME:TEF","BME:IBE","BME:REP","SP:SPX","TVC:NDX","TVC:SX5E","TVC:DAX","BME:BKIA","BITFINEX:BTCUSD","BITFINEX:XRPUSD","BITFINEX:ETHUSD","BITFINEX:BCHUSD","COINBASE:LTCUSD","FX:EURUSD","FX:USDJPY","BME:POP","BME:ABE","BME:ELE","BME:GAS","BME:AMS","BME:BKT","BME:TL5"],fr:["TVC:CAC40","TVC:DAX","TVC:US30","SP:SPX","BITFINEX:BTCUSD","BITFINEX:XRPUSD","BITFINEX:ETHUSD","BITFINEX:BCHUSD","COINBASE:LTCUSD","FX:EURUSD","FX:EURGBP","FX:USDJPY","FX:GBPUSD","TVC:DXY","NYMEX:CL1!","CHXEUR:BNPM","LSE:ACA","LSE:GLE","TSX:FP","LSE:ENGI","NASDAQ:UG"],id:["FX_IDC:USDIDR","FX:EURUSD","FX:USDJPY","FX:AUDUSD","TVC:DXY","SP:SPX","TVC:NI225","BITFINEX:BTCUSD","BITFINEX:XRPUSD","BITFINEX:ETHUSD","BITFINEX:BCHUSD","COINBASE:LTCUSD","FX_IDC:XAUUSD","FX_IDC:XAGUSD","TVC:UKOIL","NYMEX:CL1!"],in:["NSE:NIFTY","NSE:BANKNIFTY","BSE:SENSEX","FX_IDC:USDINR","FX_IDC:EURINR","SP:SPX","AMEX:SPY","TVC:NDX","INDEX:DOWI","TVC:DXY","TVC:UKX","TVC:DAX","TVC:NI225","BITFINEX:BTCUSD","BITFINEX:XRPUSD","BITFINEX:ETHUSD","BITFINEX:BCHUSD","COINBASE:LTCUSD","FX:EURUSD"],it:["MIL:IMIB","FX:EURUSD","FX:EURGBP","FX:USDJPY","FX:GBPUSD","TVC:DXY","TVC:UKX","TVC:DAX","SP:SPX","BITFINEX:BTCUSD","BITFINEX:XRPUSD","BITFINEX:ETHUSD","BITFINEX:BCHUSD","COINBASE:LTCUSD","NYMEX:CL1!"],ja:["SP:SPX","TVC:NI225","ASX:XJO","BITFINEX:BTCUSD","BITFINEX:XRPUSD","BITFINEX:ETHUSD","BITFINEX:BCHUSD","COINBASE:LTCUSD","FX:USDJPY","FX:EURJPY","CHXJPY:7203","CHXJPY:9437","CHXJPY:7267","CHXJPY:9433","CHXJPY:8411","CHXJPY:8306","OTC:IHRMF","AMEX:AIA","CME:NY1!"],kr:["FX_IDC:USDKRW","FX_IDC:JPYKRW","FX:USDJPY","SP:SPX","TVC:NI225","INDEX:HSCE","TVC:DXY","BITFINEX:BTCUSD","BITFINEX:XRPUSD","BITFINEX:ETHUSD","BITFINEX:BCHUSD","COINBASE:LTCUSD","KORBIT:BTCKRW","NYMEX:CL1!","FX_IDC:XAUUSD"],ms_MY:["FX_IDC:USDMYR","FX_IDC:SGDMYR","FX:EURUSD","FX:GBPUSD","NYMEX:CL1!","TVC:UKOIL","INDEX:KLSE","BITFINEX:BTCUSD","BITFINEX:XRPUSD","BITFINEX:ETHUSD","BITFINEX:BCHUSD","COINBASE:LTCUSD","FX:GBPUSD","FX_IDC:XAUUSD"],pl:["FX_IDC:USDPLN","FX_IDC:EURPLN","FX:EURUSD","FX:USDJPY","FX:GBPUSD","TVC:DAX","TVC:UKX","SP:SPX","NYMEX:CL1!","BITFINEX:BTCUSD","BITFINEX:XRPUSD","BITFINEX:ETHUSD","BITFINEX:BCHUSD","COINBASE:LTCUSD"],ru:["MOEX:MICEX","MOEX:RTSI","BITFINEX:BTCUSD","BITFINEX:XRPUSD","BITFINEX:ETHUSD","BITFINEX:BCHUSD","COINBASE:LTCUSD","MOEX:USDRUB_TOM","MOEX:EURRUB_TOM","MOEX:SBER","MOEX:GAZP","MOEX:VTBR","MOEX:LKOH","MOEX:MGNT","ICEEUR:CB1!","NYMEX:CL1!","NYMEX:NG1!","TVC:NDX","TVC:SX5E","TVC:DAX","TVC:FTMIB"],tr:["FX:USDTRY","FX:EURTRY","TVC:DAX","SP:SPX","BITFINEX:BTCUSD","BITFINEX:XRPUSD","BITFINEX:ETHUSD","BITFINEX:BCHUSD","COINBASE:LTCUSD","NYMEX:CL1!","FX_IDC:XAUUSD"],uk:["TVC:UKX","TVC:DAX","TVC:SX5E","BITFINEX:BTCUSD","BITFINEX:XRPUSD","BITFINEX:ETHUSD","BITFINEX:BCHUSD","COINBASE:LTCUSD","FX:GBPUSD","FX_IDC:GBPEUR","LSE:LLOY","LSE:BARC","SP:SPX","AMEX:SPY","TVC:NDX","INDEX:DOWI","TVC:DXY","TVC:UKX","TVC:DAX","TVC:NI225","FX:EURUSD"]}},function(e,t,i){"use strict";function o(e,t){var o,n,r,s,a,c,h,u,d;if(!e)throw Error("No studies metainfo");if(o=i(483),
this._studiesMetainfo=e,!t)throw Error("No studies migrations");for(this._studiesMigrations=t,this._migrations={},n=0;n<this._studiesMigrations.length;n++)for(r=this._studiesMigrations[n],s=r.versFrom,a=r.versTo,c=0;c<r.studyMigrations.length;c++)h=r.studyMigrations[c],u=h.studyId,0!==h.rules.length?(d=u in this._migrations?this._migrations[u]:new o(u),d.addMigration(s,a,h.rules),this._migrations[u]=d):l.logError("Study Migration should have at least one convertion rule");this._clientMigrations=[function(e,t){var i,o,n,r,s;if(0===this._studiesMetainfo.length||!e.isTVScript||e.version>=22)return t;for(i={},o=0,n=0;void 0!==(r=t[n]);)s=t[r.id],r.isFake&&(r.id="in_"+o++),i[n]=r,i[r.id]=s,n++;return i}]}var n=i(9).assert,r=i(481).LineToolRegressionTrend,s=i(112),a=i(230).Version,l=i(0).getLogger("Chart.Study.Versioning"),c=i(50),h=i(39);o.prototype.updateMetaInfo=function(e){var t,i,o;if(!e)return e;for(n(!e.isTVScript,"This method should update only built-in java indicators metaInfo. For Pine indicators use updateMetaInfoAsync"),t=null,i=this._studiesMetainfo,o=0;o<i.length;o++)if(i[o].id===e.id){t=i[o];break}return TradingView.clone(t)},o.prototype.updateMetaInfoAsync=function(e,t){var i,o,r,a,l,c,u,d=$.Deferred(),p=d.promise();if(!e)return d.reject("No old metaInfo was given"),p;if(t)return d.resolve(null),p;if(i=e.isTVScript&&e.scriptIdPart&&TVScript.pineType(e.scriptIdPart)===TVScript.PineType.Addon,o=h.versionOf(e),e.isTVScript&&!e.pine&&!i&&o<h.VERSION_PINE_PROTECT_TV_4164)n(TradingView.isExistent(e.scriptIdPart),"scriptIdPart is missing, study "+JSON.stringify(e)),r=e.scriptIdPart,s.processLegacy(r,e.TVScriptSourceCode).done(function(t){h.removeStudyMetaInfo(this._studiesMetainfo,e),t=h.addOrReplaceStudyMetaInfo(this._studiesMetainfo,t),d.resolve(t)}.bind(this)).fail(function(e,t){d.reject(e)});else if((e.isTVScript||e.isTVScriptStubToCompile)&&e.pine&&!i)o!==h.CURRENT_METAINFO_FORMAT_VERSION?s.translateScriptAsync2(e.scriptIdPart,e.pine.version).done(function(e){e=h.addOrReplaceStudyMetaInfo(this._studiesMetainfo,e),d.resolve(e)}.bind(this)).fail(function(e,t){d.reject(e)}):(a=h.addOrReplaceStudyMetaInfo(this._studiesMetainfo,e),d.resolve(a));else{for(l=null,c=this._studiesMetainfo,u=0;u<c.length;u++)if(c[u].id===e.id){l=c[u];break}l?d.resolve(TradingView.clone(l)):d.resolve(null)}return p},o.prototype.updateStudyInputs=function(e,t,i,o,n){var r,s,c,h,u,d,p=TradingView.clone(o);if(e in this._migrations&&(r=a.parse(t),s=a.parse(i),c=this._migrations[e],h=c.updateInputs(r,s,p),p=h),null==n)return p;for(u in n)u in p||(p[u]=n[u]);for(u in p)u in n||(d=p[u],l.logWarn("Extra input detected, studyId="+e+", versionFrom="+t+", inputId="+u+", inputValue="+d+", removing it and continue..."),delete p[u]);return p},o.prototype.updateStudyState=function(e,t,i){var o,n,r,s,a,c,u,d,p,f,_,m,g,v;if(null==e||null==t||null==i)return e;for(e=TradingView.clone(e),o=t.isTVScript||!!t.pine,o||t.version===i.version||(n=i&&i.defaults.inputs,r=this.updateStudyInputs(t.id,t.version,i.version,e.inputs,n),e.inputs=r),
s=0;s<this._clientMigrations.length;++s)r=this._clientMigrations[s].call(this,t,e.inputs),Object.keys(r).length===Object.keys(e.inputs).length?e.inputs=r:l.logWarn("StudyVersioning._clientMigrations application returned bad result. Skipping it...");if(a=h.versionOf(t),t.isTVScript&&t.TVScriptSourceCode&&a>=12&&a<=26){for(c={},s=0;s<t.plots.length;++s)u=t.plots[s],d=i.plots[s],c[u.id]=d.id;for(p=Object.keys(e.styles),s=0;s<p.length;++s)f=p[s],_=e.styles[f],delete e.styles[f],m=c[f],e.styles[m]=_;for(g=Object.keys(e.plots),s=0;s<g.length;++s)v=g[s],f=e.plots[v].id,e.plots[v].id=c[f]}return e},o.prototype.patchPointsBasedStudyState=function(e){return o._fixInputsMaxValue(e.state,e.metaInfo),"LineToolRegressionTrend"===e.type&&(e=r.patchSourceState(e)),e},o.prototype.patchPointsBasedStudyData=function(e,t){if(!c.isProd())return t;if(!e||!t)return t;var i=TradingView.clone(t);return"VbPFixed@tv-volumebyprice"===e.id&&e.version&&e.version<=4&&o._patchOldVolumeProfiles(0,i),i},o.prototype.patchStudyData=function(e,t,i,n){var r,s,a,l,u,d,p;if(!c.isProd())return{data:t,nsData:i,indexes:n};if(r=TradingView.clone(t),s=TradingView.clone(i),a=TradingView.clone(n),"VbPVisible@tv-volumebyprice"===e.id&&e.version&&e.version<=4&&o._patchOldVolumeProfiles(0,r.graphics),"VbPSessions@tv-volumebyprice"===e.id&&e.version&&e.version<=4&&o._patchOldVolumeProfiles(0,r.graphics),l=h.versionOf(e),e.isTVScript&&e.TVScriptSourceCode&&l>=12&&l<=26)for(u=r.columns,r.columns=[],d=0;d<u.length;++d)p="plot_"+d,r.columns.push(p);return{data:r,nsData:s,indexes:a}},o._patchOldVolumeProfiles=function(e,t){var i,o=t.hhists[e].data,n=[];for(i in o)n=n.concat(o[i]);t.hhists[0].data=n},o._fixInputsOrder=function(e,t){var i,n,r,s,a=h.getOrderedInputIds(t),l=o.splitInputs(e.inputs),c=l.arr,u=l.obj,d=TradingView.merge({},u);for(i=0;i<a.length;++i)n=a[i],null!==(r=o.findInputKeyById(c,n))&&(s=c[r],d[i]=s);e.inputs=d},o.INPUT_MAX_VALUE=1e12,o._verifyInputsMaxValue=function(e){var t,i,n=o.INPUT_MAX_VALUE;if(e.inputs)for(t=0;t<e.inputs.length;t++)i=e.inputs[t],"integer"===i.type&&i.max&&i.max>n&&l.logWarn("Bad integer input max value in metaInfo id="+e.id+" title="+e.description)},o._fixInputsMaxValue=function(e,t){var i,n,r,s,a,l;if(!TradingView.isAbsent(t)){if(i=o.INPUT_MAX_VALUE,t.inputs)for(n=0;n<t.inputs.length;n++)r=t.inputs[n],"integer"===r.type&&r.max&&r.max>i&&(r.max=i);if(e&&e.inputs){s=o.splitInputs(e.inputs),a=s.arr;for(l in a)r=a[l],"integer"===r.type&&r.max&&r.max>i&&(r.max=i);e.inputs=TradingView.merge(s.obj,s.arr)}}},o.prototype.patchPropsStateAndMetaInfo=function(e,t,i){var n,r,s,a,l,c,u,d,p,f,_,m,g,v,y,b,S,w;if("Script$BOOKER"!==t.productId||t.alerts||delete e.alerts,o._fixInputsOrder(e,t),o._fixInputsMaxValue(e,t),n=o.splitInputs(e.inputs),e.inputs=n.obj,h.versionOf(t)<h.METAINFO_FORMAT_VERSION_SOS_V2&&t.isChildStudy&&(e.isChildStudy=t.isChildStudy),r=60,t.isTVScript&&t.version<r&&("Script$TV_EARNINGS@tv-scripting"!==t.id&&"Script$TV_DIVIDENDS@tv-scripting"!==t.id&&"Script$TV_SPLITS@tv-scripting"!==t.id||delete t.TVScriptSourceCode),
"Volume"!==t.id&&"Volume@tv-basicstudies"!==t.id||0!==t.inputs.length||(t.inputs=[{id:"length",type:"integer",defval:20,min:1,max:1e3}],t.plots.push({id:"vol_ma",type:"line"})),"Volume@tv-basicstudies"===t.id&&t.version&&t.version<=46&&(e.styles.vol.transparency=e.transparency||87),"PivotPointsStandard@tv-basicstudies"===t.id&&(0===t.inputs.length?(e.inputs={kind:"Traditional",showHistoricalPivots:!0},t.inputs=[{defval:"Traditional",id:"kind",type:"text",options:["Traditional","Fibonacci","Woodie","Classic","DeMark","Camarilla"]},{id:"showHistoricalPivots",type:"bool",defval:!0}]):1===t.inputs.length&&(e.inputs={kind:"Traditional"},t.inputs=[{defval:"Traditional",id:"kind",type:"text",options:["Traditional","Fibonacci","Woodie","Classic","DeMark","Camarilla"]},{id:"showHistoricalPivots",type:"bool",defval:!0}]),void 0===e._hardCodedDefaultsVersion&&(e._hardCodedDefaultsVersion=1,s=e.color,delete e.color,e.levelsStyle={colors:{P:s,"S1/R1":s,"S2/R2":s,"S3/R3":s,"S4/R4":s,"S5/R5":s}})),"CMF"===t.shortId&&2===t.inputs.length&&(e.inputs={length:e.inputs["length fast"]},t.inputs=t.inputs.splice(0,1),t.inputs[0].id="length"),t.defaults&&void 0===t.defaults.precision&&(-1!==["Volume@tv-basicstudies","VbPVisible@tv-volumebyprice","VbPSessions@tv-volumebyprice"].indexOf(t.id)?t.defaults.precision=0:t.defaults.precision=4),a=60,t.version<a)for(l=["TV_DIVIDENDS","TV_SPLITS","TV_EARNINGS"],c=6,u=0;u<l.length;u++)t.id.startsWith("Script$"+l[u]+"@tv-scripting")&&(t.fullId="ESD"+t.fullId.substring(c),t.id="ESD"+t.id.substring(c),t.name="ESD"+t.name.substring(c),t.shortId="ESD"+t.shortId.substring(c),t.productId="ESD"+t.productId.substring(c));if(h.versionOf(t)<h.VERSION_PINE_PROTECT_TV_4164&&(d={"StrategyScript$STD;Consecutive%1Ups/Downs%1Strategy":{pineId:"STD;Consecutive%1Ups%1Downs%1Strategy",className:"StrategyScript"},Script$EDGR_NET_INCOME_FROM_CONTINUING_OPERATIONS_APPLICABLE_TO_COMMON_V2:{pineId:"Script$EDGR_NET_INCOME_FROM_CONTINUING_OPS_APPLICABLE_TO_COMMON_V2",className:"Script"}},t.shortId in d&&(p=d[t.shortId].className+"$"+d[t.shortId].pineId,f={scriptIdPart:d[t.shortId].pineId,fullId:t.fullId.replace(t.shortId,p),id:t.id.replace(t.shortId,p),name:t.name.replace(t.shortId,p),shortId:p},TradingView.merge(t,f),TradingView.merge(e,f)),_=TradingView.StudyMetaInfo.cutScriptIdPart(t.fullId),(m=_.match(/^(USER)(_\d+)(;)(.*)$/))&&(g=m[0],v=m[1]+m[3]+m[2]+m[4],f={scriptIdPart:v,fullId:t.fullId.replace(g,v),id:t.id.replace(g,v),name:t.name.replace(g,v),shortId:t.shortId.replace(g,v)},TradingView.merge(t,f),TradingView.merge(e,f))),"MA"===t.id){switch(y=new h({id:"MAExp",properties:[{id:"is_price_study",type:"bool",value:"true"}],inputs:[{id:"length",type:"integer",defval:20,min:1,max:500},{id:"source",type:"text",defval:"close",options:["open","high","low","close"]}],plots:[{id:"MovAvgExp",type:"line"}],palettes:{}}),b=new h({id:"MASimple",properties:[{id:"is_price_study",type:"bool",value:"true"}],inputs:[{id:"length",type:"integer",defval:20,min:1,max:500},{id:"source",type:"text",defval:"close",
options:["open","high","low","close"]}],plots:[{id:"MovAvgSimple",type:"line"}],palettes:{}}),S=new h({id:"MAVolumeWeighted",properties:[{id:"is_price_study",type:"bool",value:"true"}],inputs:[{id:"length",type:"integer",defval:20,min:1,max:500},{id:"source",type:"text",defval:"close",options:["open","high","low","close"]}],plots:[{id:"MovAvgVolumeWeighted",type:"line"}],palettes:{}}),w=new h({id:"MAWeighted",properties:[{id:"is_price_study",type:"bool",value:"true"}],inputs:[{id:"length",type:"integer",defval:20,min:1,max:500},{id:"source",type:"text",defval:"close",options:["open","high","low","close"]}],plots:[{id:"MovAvgWeighted",type:"line"}],palettes:{}}),e.inputs.type){case"exp":t=y;break;case"simple":t=b;break;case"weighted":t=w;break;case"volume weighted":t=S}e.styles[t.plots[0].id]=e.styles.MovAvg,delete e.styles.MovAvg,delete e.inputs.type}return i.oldShowStudyLastValueProperty&&(e.oldShowLastValue=e.showLastValue),delete e.showLastValue,delete e.showStudyArguments,{propsState:e,metaInfo:t}},o.isVersionTesting=function(e){var t;return!!e&&(e=""+e,t=RegExp("\\d+.\\d+"),t.exec(e)===e)},o.isVersionHead=function(e){var t;return!!e&&(e=""+e,t=RegExp("\\d+"),t.exec(e)===e)},o.mergeInputs=function(e,t){o.mergeInputsArrPart(e,t),o.mergeInputsObjPart(e,t)},o.mergeInputsArrPart=function(e,t){var i,n,r=o.splitInputs(t);for(i in r.arr)n=o.findInputKeyById(e,r.arr[i].id),n?TradingView.merge(e[n],r.arr[i]):o.appendInputInfoToArr(e,r.arr[i])},o.mergeInputsObjPart=function(e,t){var i=o.splitInputs(t);TradingView.merge(e,i.obj)},o.appendInputInfoToArr=function(e,t){var i,o,n=-1;for(i in e)o=parseInt(i,10),isNumber(o)&&o>n&&(n=o);e[n+1]=t},o.splitInputs=function(e){var t,i={},o={};for(t in e)isNumber(parseInt(t,10))?i[t]=e[t]:o[t]=e[t];return{arr:i,obj:o}},o.findInputKeyById=function(e,t){var i,o=null;for(i in e)if(isNumber(parseInt(i,10))&&e[i].id===t){o=i;break}return o},o.getInputKeyById=function(e,t){var i=o.findInputKeyById(e,t);if(!i)throw Error("Cannot find input with id: "+t);return i},e.exports=o},function(e,t,i){"use strict";(function(t,o,n,r){function s(e){this._series=e,this._model=e.m_model,this._points=[new Q(0,0)],this._invalidated=!0,this._lineRenderer=new j}function a(e){this._series=e,this._model=e.m_model,this._points=[new Q(0,0)],this._invalidated=!0,this._lineRenderer=new j}function l(){return{count:TradingView.DEFAULT_BAR_COUNT}}function c(e,n,r){var h,m=i(209);G.call(this,e),this._boxSizeChanged=new t,this._tagsChanged=new t,this._symbolIntervalChanged=new t,this._symbolResolved=new t,this._symbolError=new t,this._symbolNotPermitted=new t,this._symbolGroupNotPermitted=new t,this._intervalChanged=new t,this._extendedHoursChanged=new t,this._extendedHoursNotPermitted=new t,this.chartTypeNotPermitted=new t,this.intradaySpreadNotPermitted=new t,this.intradayExchangeNotPermitted=new t,this.customIntervalNotPermitted=new t,this.chartWidgetInitialized=new t,this._startLoading=new t,this._dataLoaded=new t,this._tickmarksRangeChanged=new t,this._barReceived=new t,this._onStyleChanged=new t,
this._onCompleted=new t,this._onStatusChanged=new t,this._onRestarted=new t,this._onSessionsStudyCreated=new t,this.requestingIntradayWhenNotSupported=new t,this.requestingResolutionWhenNotSupported=new t,this.priceScaleChanged=new t,this._onInReplayStateChanged=new t,this._requestOptions=r||l(),this.m_model=e,this._chartApi=e._chartApi,this.m_data=new J(["time","open","high","low","close","adt","style"]),this.setProperties(n),this._prevChartStyle=n.style.value(),this.createPaneView(),this._dataWindowView=new _(this,e),this._statusView=new u(this,e.properties()),this._priceAxisViews=[new d(this,e),new f(this,{model:e}),new p(this,{model:e})],this._symbolInfo=null,this._status=c.STATUS_OFFLINE,this._syncModel=null,this._replaySubscriber=null,h=this,this._turnaroundCounter=1,this._turnaround="s"+this._turnaroundCounter,this._handler=function(e){h.onData(e)},this._haStyle={studyId:"BarSetHeikenAshi@tv-basicstudies-60"},this._renkoStyle={studyId:"BarSetRenko@tv-prostudies-15"},this._pbStyle={studyId:"BarSetPriceBreak@tv-prostudies-15"},this._kagiStyle={studyId:"BarSetKagi@tv-prostudies-15"},this._pnfStyle={studyId:"BarSetPnF@tv-prostudies-15"},this._properties.addExclusion&&this._properties.addExclusion("visible"),this._base=100,this._formatter=new te(this._base),this._predictBars=0,this._futureBarsPaneView=null,this._properties.showInDataWindow.listeners().subscribe(e,m.prototype.fullUpdate),this.marketStatus=new o,this._seriesLoaded=!1,this.properties().minTick.listeners().subscribe(this,c.prototype._recreateFormatter),h=this,this.properties().minTick.listeners().subscribe(null,function(){h.m_model.invalidate(new Z(Z.FULL_UPDATE))}),this._prevClosePriceLineView=new a(this),this._priceLineView=new s(this),this._gotoDateView=new q(this),this.bindStyleChange(),this.bindJapChartsInputs(),this._createIsPrevClosePriceAvailableProperty(),this.createExtendedHoursProperty(),this.extendedHours.listeners().subscribe(this,function(){this._extendedHoursChanged.fire()}),this._extendedHoursNotPermitted.subscribe(this,function(){this._properties.extendedHours.setValue(!1)}),this._extendedHoursChanged.subscribe(this,function(){this._status!==c.STATUS_SNAPSHOT&&this.restart()}),H("dividends-adjust")&&(this.createDividendsAdjustmentProperty(),this.dividendsAdjustment.listeners().subscribe(this,function(){this._status!==c.STATUS_SNAPSHOT&&this.restart()})),this._symbolIntervalChanged.subscribe(this,this.checkInterval),this.properties().showCountdown.listeners().subscribe(this,c.prototype._onChangeShowCountdown),this._onChangeShowCountdown(this.properties().showCountdown),this._recreateFormatter(),this._isDWMCached=null}var h,u,d,p,f,_,m,g,v,y,b,S,w,T,P,C,x,E,L,I,A,k,M,O,D,V,R,B,N,z,F,$,H,W,U,j,q,G,Y,X,K,J,Z,Q,ee,te,ie,oe,ne,re,se,ae,le,ce,he,ue,de,pe,fe,_e,me;TradingView.DEFAULT_BAR_COUNT=300,TradingView.TIME_PLOT=0,TradingView.OPEN_PLOT=1,TradingView.HIGH_PLOT=2,TradingView.LOW_PLOT=3,TradingView.CLOSE_PLOT=4,TradingView.ADT_PLOT=6,TradingView.STYLE_PLOT=7,h=i(9).ensureNotNull,u=i(845),d=i(846).PrevCloseSeriesPriceAxisView,
p=i(847).ProjectionSeriesPriceAxisView,f=i(493).SeriesPriceAxisView,_=i(848),m=i(494),g=m.SeriesAreaPaneView,v=m.SeriesLinePaneView,y=m.SeriesHollowCandlesPaneView,b=m.SeriesCandlesPaneView,S=m.SeriesBarsPaneView,w=m.SeriesHeikenAshiPaneView,T=m.SeriesBaselinePaneView,P=m.SeriesBaselineLinePaneView,C=i(3),x=i(2).propertyPages,E=i(850),L=E.SeriesRenkoPaneView,I=E.SeriesProjectionRenkoPaneView,A=E.SeriesPriceBreakPaneView,k=E.SeriesProjectionPriceBreakPaneView,M=E.SeriesKagiPaneView,O=E.SeriesProjectionKagiPaneView,D=E.SeriesPnFPaneView,V=E.SeriesProjectionPnFPaneView,R=i(57).Telemetry,B=i(27).ProductFeatures,N=!1,z=i(467),F=i(276),$=i(277).FormattersSerializer,H=i(25).isFeatureEnabled,W=i(495).BarsRange,U=i(273).SeriesBarColorer,j=i(156).HorizontalLineRenderer,q=i(854),G=i(52).PriceDataSource,Y=i(181),X=i(525).FutureBarsPaneView,K=i(130).Interval,J=i(444).SeriesData,Z=i(40),Q=i(8).Point,ee=i(95),te=i(16).PriceFormatter,ie=i(24),oe=ie.PlotList,ne=ie.PlotRowSearchMode,re=ie.mergeMinMax,se=i(39),ae=i(496).SyncModel,le=i(20).trackEvent,ce=i(217).translatedIntervalString,he=i(17),ue=i(0),de=ue.getLogger("Chart.Series"),pe=ue.getLogger("Chart.Series.Updates",{highRate:!0}),fe=i(32),_e=i(635),me=i(268),s.prototype.update=function(){this._invalidated=!0},s.prototype.updateImpl=function(){if(this._visible=!1,this._series.properties().showPriceLine.value()){var e=this._series.lastValueData(TradingView.CLOSE_PLOT,!0);e.noData||(this._visible=!0,this._points=[new Q(0,e.coordinate)],this._color=this._series.priceLineColor(e.color))}},s.prototype.renderer=function(){this._invalidated&&(this.updateImpl(),this._invalidated=!1);var e={};return e.width=this._model.timeScale().width(),e.height=this._series.priceScale().height(),e.points=this._points,e.color=this._color,e.linewidth=this._series.properties().priceLineWidth.value(),e.linestyle=CanvasEx.LINESTYLE_DOTTED,e.visible=this._visible,this._lineRenderer.setData(e),this._lineRenderer},a.prototype.update=function(){this._invalidated=!0},a.prototype._updateImpl=function(){if(this._visible=!1,this._series.properties().showPrevClosePriceLine.value()&&!this._series.isDWM()){var e=this._series.prevClose();null!==e&&(this._visible=!0,this._points=[new Q(0,e.coordinate)],this._color=this._series.properties().prevClosePriceLineColor.value())}},a.prototype.renderer=function(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);var e={};return e.width=this._model.timeScale().width(),e.height=this._series.priceScale().height(),e.points=this._points,e.color=this._color,e.linewidth=this._series.properties().prevClosePriceLineWidth.value(),e.linestyle=CanvasEx.LINESTYLE_DOTTED,e.visible=this._visible,this._lineRenderer.setData(e),this._lineRenderer},inherit(c,G),c.prototype.styleStudyInfos=function(){return{haStyle:this._haStyle,renkoStyle:this._renkoStyle,pbStyle:this._pbStyle,kagiStyle:this._kagiStyle,pnfStyle:this._pnfStyle}},c.prototype.styleStudyInfo=function(e){return this.styleStudyInfos()[e]},c.prototype.priceLineColor=function(e){return this.properties().priceLineColor.value()||e
},c.prototype.endOfData=function(){return this._endOfData},c.prototype.serverTimeOffset=function(){return this._chartApi.serverTimeOffset()},c.prototype._onChangeShowCountdown=function(e){var t=this;e.value()?this._countdownUpdateTimer=this.m_model.setInterval(function(){t.isDWM()||(t._priceAxisViews[0].update(),t.m_model.invalidate(new Z(Z.LIGHT_UPDATE)))},500):(this.m_model.clearInterval(this._countdownUpdateTimer),delete this._countdownUpdateTimer)},c.prototype.lastValueData=function(e,t,i){var o,n,r,s,a,l,c,h,u,d,p={noData:!0};if(this.m_model.timeScale().isEmpty()||this.priceScale().isEmpty()||this.data().isEmpty())return p;if(null===(o=this.m_model.timeScale().visibleBars()))return p;if(t){if(null===(s=this.data().bars().last()))return p;n=s.value,r=s.index}else{if(null===(a=this.data().bars().search(o.lastBar(),ne.NearestLeft)))return p;n=this.data().bars().valueAt(a.index),r=a.index}return l={noData:!1},c=n[e],i&&(l.price=c),this.priceScale().properties().percentage.value()&&(h=this.firstValue(),c=this.priceScale().priceRange().convertToPercent(c,h)),l.text=this.priceScale().formatter().format(c),u=this.barColorer(),d=u.barStyle(r,!1),l.color=d.barColor,l.floatCoordinate=this.priceScale().priceToCoordinate(c,!0),l.coordinate=Math.round(l.floatCoordinate),l.index=r,l},c.prototype.prevClose=function(){var e,t;return this.priceScale().isEmpty()||this.data().isEmpty()||!this.quoteData?null:null==(e=this.quoteData.prev_close_price)?null:(this.priceScale().properties().percentage.value()&&(t=this.firstValue(),e=this.priceScale().priceRange().convertToPercent(e,t)),{coordinate:this.priceScale().priceToCoordinate(e),floatCoordinate:this.priceScale().priceToCoordinate(e,!0),text:this.priceScale().formatter().format(e)})},c.prototype._createIsPrevClosePriceAvailableProperty=function(){this._isPrevClosePriceAvailable=new n(!this.isDWM()),this._onRestarted.subscribe(this,function(){this._isPrevClosePriceAvailable.setValue(!this.isDWM())})},c.prototype.isPrevClosePriceAvailable=function(){return this._isPrevClosePriceAvailable},c.prototype._prepareChartApiParams=function(){return this._requestOptions.startDate?!this._requestOptions.startDate||this._requestOptions.endDate||this._requestOptions.count?this._requestOptions.startDate&&this._requestOptions.endDate?["from_to",this._requestOptions.startDate,this._requestOptions.endDate]:["from_to",this._requestOptions.startDate,this._requestOptions.count]:["from_to",this._requestOptions.startDate]:this._requestOptions.count||TradingView.DEFAULT_BAR_COUNT},c.prototype._nextSymbolId=1,c.prototype._nextSeriesId=1,Object.assign(c,fe),c.PERMISSION_DENIED="permission denied",c.PD_REASON_SYMBOL="symbol",c.PD_REASON_EXTENDED_HOURS="extended_hours",c.PD_REASON_GROUP_PERMISSION="group",c.STUDY_NOT_AUTH="study_not_auth",c.prototype.model=function(){return this.m_model},c.prototype.fixLastBar=function(e){this._futureBarsPaneView||(this._futureBarsPaneView=new X(this,this.data().bars().lastIndex(),e))},c.prototype.clearData=function(){this.data().clear()},c.prototype.data=function(){
return this.m_data},c.prototype.symbolId=function(){return this._symbolId},c.prototype.isPulse=function(){return this._symbolInfo&&this._symbolInfo.resolutions.length>0},c.prototype.onTagsChanged=function(){return this._tagsChanged},c.prototype.onSymbolIntervalChanged=function(){return this._symbolIntervalChanged},c.prototype.onSymbolResolved=function(){return this._symbolResolved},c.prototype.onSymbolError=function(){return this._symbolError},c.prototype.onSymbolNotPermitted=function(){return this._symbolNotPermitted},c.prototype.onSymbolGroupNotPermitted=function(){return this._symbolGroupNotPermitted},c.prototype.onIntervalChanged=function(){return this._intervalChanged},c.prototype.onExtendedHoursNotPermitted=function(){return this._extendedHoursNotPermitted},c.prototype.onStartLoading=function(){return this._startLoading},c.prototype.onDataLoaded=function(){return this._dataLoaded},c.prototype.onStatusChanged=function(){return this._onStatusChanged},c.prototype.onTickmarksRangeChanged=function(){return this._tickmarksRangeChanged},c.prototype.onBarReceived=function(){return this._barReceived},c.prototype.onStyleChanged=function(){return this._onStyleChanged},c.prototype.onCompleted=function(){return this._onCompleted},c.prototype.onRestarted=function(){return this._onRestarted},c.prototype.onBoxSizeChanged=function(){return this._boxSizeChanged},c.prototype.status=function(){return this._status},c.prototype.isDWM=function(){var e,t;return null!==this._isDWMCached?this._isDWMCached:(e=new K(this._properties.interval.value()),e.isDWM()?this._isDWMCached=!0:(t=e.kind()===K.SECONDS?e.multiplier():60*e.multiplier(),this._isDWMCached=!(t<216e3)),this._isDWMCached)},c.prototype.lastPriceLabelFixedCoordinate=function(){return this._priceAxisViews[0]._fixedCoordinate},c.prototype.createPaneView=function(){this._paneView=null,this._projectionBarsPaneView=null,this._baseLineView=null,this._symbolLabelView=new Y(this.m_model,this,TradingView.CLOSE_PLOT,"firstShortName","showSymbolLabels");var e=this._properties.style.value();switch(e){case c.STYLE_BARS:this._paneView=new S(this,this.m_model);break;case c.STYLE_CANDLES:this._paneView=new b(this,this.m_model);break;case c.STYLE_LINE:this._paneView=new v(this,this._properties.lineStyle.priceSource.value(),this.m_model);break;case c.STYLE_AREA:this._paneView=new g(this,this._properties.areaStyle.priceSource.value(),this.m_model);break;case c.STYLE_RENKO:this._paneView=new L(this,this.m_model),this._projectionBarsPaneView=new I(this,this.m_model);break;case c.STYLE_PB:this._paneView=new A(this,this.m_model),this._projectionBarsPaneView=new k(this,this.m_model);break;case c.STYLE_KAGI:this._paneView=new M(this,this.m_model),this._projectionBarsPaneView=new O(this,this.m_model);break;case c.STYLE_PNF:this._paneView=new D(this,this.m_model),this._projectionBarsPaneView=new V(this,this.m_model);break;case c.STYLE_HEIKEN_ASHI:this._paneView=new w(this,this.m_model);break;case c.STYLE_HOLLOW_CANDLES:this._paneView=new y(this,this.m_model);break;case c.STYLE_BASELINE:
this._paneView=new T(this,this._properties.baselineStyle.priceSource.value(),this.m_model),this._baseLineView=new P(this,this.m_model);break;default:throw Error("Unknown chart style assigned: "+e)}},c.prototype._clearStylePlot=function(e,t){var i,o;0!==e.size()&&(i=t||h(e.firstIndex()),o=h(e.lastIndex())+1,e.range(i,o).each(function(e,t){t[TradingView.STYLE_PLOT]=null}))},c.prototype.invalidateBarStylesCache=function(e){de.logDebug("Invalidate style cache starting from "+e),this._clearStylePlot(this.m_data.m_bars,e),this._clearStylePlot(this.m_data.m_nsBars)},c.prototype.invalidateBarColorerCache=function(){delete this._barColorerCache,this.invalidateBarStylesCache()},c.prototype.barColorer=function(){var e,t,i,o;if(this._barColorerCache)return this._barColorerCache;for(e=null,t=this.m_model.dataSources().length-1;t>=0;t--)i=this.m_model.dataSources()[t],i.metaInfo&&TradingView.isInherited(i.constructor,TradingView.Study)&&i.hasBarColorer()&&i.properties().visible.value()&&(o=i.barColorer(),null===e?e=o:e.pushBackBarColorer(o));return null===e?e=new U(this):e.pushBackBarColorer(new U(this)),this._barColorerCache=e,this._barColorerCache},c.prototype.properties=function(){return this._properties},c.prototype._barsState=function(e){var t=e.state();return t.columns=t.columns.filter(function(e){return"style"!==e}),t.data.forEach(function(e){e.value.splice(7,1)}),t},c.prototype.state=function(e){var t=this===this.m_model.mainSeries()?"MainSeries":TradingView.className(this.constructor),i={type:t,id:this.id(),state:this.properties().state(),zorder:this.zorder(),haStyle:this._haStyle,renkoStyle:this._renkoStyle,pbStyle:this._pbStyle,kagiStyle:this._kagiStyle,pnfStyle:this._pnfStyle};return this._symbolInfo&&this._symbolInfo.ticker&&(i.state.symbol=this._symbolInfo.ticker),e&&(i.bars=this._barsState(this.m_data.m_bars),i.nsBars=this._barsState(this.m_data.m_nsBars),i.symbolInfo=this._symbolInfo,i.rtPrice=this.data().lastProjectionPrice),i.boxSize=this.data().boxSize,i.reversalAmount=this.data().reversalAmount,i},c.prototype.stateForAlert=function(){var e=this===this.m_model.mainSeries()?"MainSeries":TradingView.className(this.constructor),t=this.idForAlert(),i=this.formatter();return i=i?$.serialize(i):null,{id:t,uniqueId:t,type:e,proSymbol:this.proSymbol(),actualSymbol:this.actualSymbol(),symbolString:this.getSymbolString(),interval:this.interval(),style:this.properties().style.value(),styleInputs:this.getInputsProperties().state(),extendedHours:this._isExtendedHoursAllowed()&&this.extendedHours.value(),boxSize:this.data().boxSize,reversalAmount:this.data().reversalAmount,isSpread:this.isSpread(),formatter:i}},c.prototype.idForAlert=function(){return""+z(this.getSymbolString()+this.interval())},c.prototype.restoreData=function(e,t,i,o,n,r){this._status=c.STATUS_SNAPSHOT,this.m_data.m_bars.restoreState(e),this.m_data.m_nsBars.restoreState(t),this.updateSymbolInfo(i),this.m_data.lastProjectionPrice=o,this.m_data.boxSize=n,
n||(this.properties().style.value()===c.STYLE_PNF?this.m_data.boxSize=this.properties().pnfStyle.inputs.boxSize.value():this.properties().style.value()===c.STYLE_RENKO&&(this.m_data.boxSize=this.properties().renkoStyle.inputs.boxSize.value())),this.m_data.reversalAmount=r,r||this.properties().style.value()===c.STYLE_KAGI&&(this.m_data.reversalAmount=this.properties().kagiStyle.inputs.reversalAmount.value())},c.prototype.setProperties=function(e){e.timeframe||e.merge({timeframe:""}),e.shortName||e.merge({shortName:""}),this._properties=e,this._properties.symbol.listeners().subscribe(this,c.prototype.changeSymbol),this._properties.interval.listeners().subscribe(this,c.prototype.changeInterval),this._properties.timeframe.listeners().subscribe(this,c.prototype.changeTimeFrame),this._properties.listeners().subscribe(this,c.prototype.changeProperties)},c.prototype.changeSymbol=function(){this.setSymbolIntervalDelayed(),this.m_model.checkLineToolSelection()},c.prototype.changeInterval=function(){this.setSymbolIntervalDelayed()},c.prototype.changeTimeFrame=function(){le("GUI","Change timeframe")},c.prototype.title=function(){return this.properties().symbol.value()+", "+ce(this.properties().interval.value())},c.prototype.changeProperties=function(e){e!==this._properties.symbol&&e!==this._properties.interval&&e!==this._properties.timeframe&&(this._tagsChanged.fire(),this.createPaneView(),this.updateAllViews(),this.m_model.updateSource(this))},c.prototype._makeNextSymbolId=function(){return"symbol_"+this._nextSymbolId++},c.prototype._makeNextSeriesId=function(){return"s"+this._nextSeriesId++},c.prototype.onData=function(e){var t,o,n,r,s,a,l,u,d,p,f,_,m,g,v,y,b,S=this;switch(e.method){case"symbol_resolved":if(e.params[0]!==this._symbolId){de.logNormal("command for old symbol. Expected:"+this._symbolId+", actual"+e.params[0]);break}this.updateSymbolInfo(e.params[1]),this.m_model.updateSource(this),this._symbolResolved.fire(this._symbolInfo),this.m_model.realignLineTools(),TradingView.onWidget()||le("Symbol",e.params[1].listed_exchange,e.params[1].name),t=this.symbolInfo().minmov/this.symbolInfo().pricescale,o=this.properties(),o.style.value()===c.STYLE_RENKO&&o.renkoStyle.inputs.boxSize.value()<t?o.renkoStyle.inputs.merge({boxSize:t}):o.style.value()===c.STYLE_PNF&&o.pnfStyle.inputs.boxSize.value()<t?o.pnfStyle.inputs.merge({boxSize:t}):o.style.value()===c.STYLE_KAGI&&o.kagiStyle.inputs.reversalAmount.value()<t&&o.kagiStyle.inputs.merge({reversalAmount:t});break;case"symbol_error":if(e.params[0]!==this._symbolId){de.logNormal("command for old symbol. Expected:"+this._symbolId+", actual"+e.params[0]);break}if(this._setStatus(c.STATUS_INVALID_SYMBOL),this._properties.shortName.setValue(this._properties.symbol.value()),this.m_model.clearAllStudies(),this.updateAllViews(),this.m_model.updateSource(this),e.params[1]===c.PERMISSION_DENIED)switch(e.params[2]){case c.PD_REASON_EXTENDED_HOURS:this._extendedHoursNotPermitted.fire();break;case c.PD_REASON_SYMBOL:this._symbolNotPermitted.fire(e.params[3]);break
;case c.PD_REASON_GROUP_PERMISSION:this._symbolGroupNotPermitted.fire(e.params[3]);break;default:this._symbolNotPermitted.fire(e.params[2])}else this.m_model.resetTimeScale(),this._symbolError.fire();this.m_model.realignLineTools(),R.sendReport("charts","symbol_error");break;case"series_timeframe":if(e.params[1]!==this._turnaround)break;n=e.params[2],r=e.params[3],s=e.params[4],a=void 0!==s&&s?r:r+10,this.m_model.setTimeViewport(n,a);break;case"series_error":l=e.params[2],delete this._loadingStartTime,C.enabled("charting_library_debug_mode")&&de.logNormal("Error reason: "+l),this._setStatus(C.enabled("no_bars_status")&&this._symbolInfo?c.STATUS_NO_BARS:c.STATUS_INVALID_SYMBOL),"string"==typeof l&&(l.startsWith("study_not_auth:")?(u=l.split(":",2)[1].split("@",2)[0],u in{BarSetRenko:!0,BarSetPriceBreak:!0,BarSetKagi:!0,BarSetPnF:!0}?this.chartTypeNotPermitted.fire(u):"BarSetSpread"===u&&this.intradaySpreadNotPermitted.fire()):"resolution_not_entitled"===l?this.intradayExchangeNotPermitted.fire():"custom_resolution"===l&&this.customIntervalNotPermitted.fire()),this._seriesLoaded=!0,R.sendReport("charts","series_error");break;case"series_loading":if(e.params[1]!==this._turnaround)break;if(e.params[0]!==this._seriesId){de.logNormal("command for old series. Expected:"+this._seriesId+", actual"+e.params.customId);break}this._setStatus(c.STATUS_LOADING),S._loadingStartTime=(new Date).getTime();break;case"series_completed":if(e.params[2]!==this._turnaround)break;if(e.params[0]!==this._seriesId){de.logNormal("command for old series. Expected:"+this._seriesId+", actual"+e.params.customId);break}switch(d="chartSession:"+S._chartApi._sessionid,p=(new Date).getTime()-this._loadingStartTime,de.logDebug(d+", Series loading took "+p+" ms, eod:"+this._endOfData),delete this._loadingStartTime,f=e.params[1],"pulsed"===f&&(f="delayed"),f){case"streaming":this._setStatus(c.STATUS_READY);break;case"endofday":this._setStatus(c.STATUS_EOD);break;case"delayed":this._setStatus(c.STATUS_DELAYED);break;case"pulsed":this._setStatus(c.STATUS_PULSE);break;case"replay":this._setStatus(c.STATUS_REPLAY)}f.match(/delayed_streaming/)&&this._setStatus(c.STATUS_DELAYED_STREAMING),_=this.m_model.paneForSource(this),_.recalculatePriceScale(this.priceScale()),this.m_model.invalidate(new Z(Z.FULL_UPDATE)),this.m_data.size()&&this._tickmarksRangeChanged.fire({start:h(this.data().first()).value[TradingView.TIME_PLOT],end:h(this.data().last()).value[TradingView.TIME_PLOT]}),this.model().recalcVisibleRangeStudy(this.model().dataSources(),!0),this.model().recalcStudyBasedLineTools(),!this.m_priceScale.isLockScale()||this.model().timeScale().isEmpty()||this._seriesLoaded||(this.model().timeScale()._correctOffset(),this.model().timeScale().correctBarSpacing(),m=this.model().timeScale().visibleBars(),this.priceScale().setPriceRange(this.priceRange(m.firstBar(),m.lastBar()))),this._seriesLoaded=!0,this._onCompleted.fire(this._endOfData),N||(N=!0,
window.performance&&window.performance.timing&&i(867)("Chart","Time to series",Date.now()-window.performance.timing.requestStart)),this.requestMoreData();break;case"series_deleted":break;case"data_update":if(e.params.customId!==this._seriesId){de.logNormal("command for old series. Expected:"+this._seriesId+", actual"+e.params.customId);break}if(e.params.turnaround!==this._turnaround){de.logNormal("command for old series turnaround. Expected:"+this._turnaround+", actual"+e.params.turnaround);break}if(this._setSymbolIntervalDelay){if(this._willSymbolIntervalChanged())return void de.logNormal("command comes during symbol/interval changing");de.logNormal("data_update comes when symbol interval delay present but symbol/interval should not be changed")}if(this.status()===c.STATUS_INVALID_SYMBOL)break;e.params.plots.length?(g=this.m_data.bars().size(),v=this.m_data.bars().firstIndex(),y=this.m_data.bars().merge(e.params.plots),(null===v||y.earliestRow.index<v)&&(this._endOfData=!1),b="Merge bars. Changes:{length:"+y.length+", earliestRow:"+y.earliestRow.index+"} ",b+="bars state:{firstBar:"+h(this.m_data.bars().firstIndex())+",lastBar:"+h(this.m_data.bars().lastIndex())+",size:"+this.m_data.bars().size()+"}",pe.logDebug(b),g!==this.bars().size()&&(this._barReceived.fire(y),this.model().recalcVisibleRangeStudy(this.model().dataSources(),!0))):(this.m_data.clear(),this._startLoading.fire()),new Promise(function(t){var i=S.properties().style.value();e.params.nonseries&&me.isJapaneseStyle(i)?S.parseJapProjBars(e.params.nonseries).then(function(e){S.m_data.m_nsBars=e.nsBars,S.m_data.lastProjectionPrice=e.lastPrice;var i=S.m_data.boxSize!==e.boxSize;S.m_data.boxSize=e.boxSize,S.m_data.reversalAmount=e.reversalAmount,i&&S._boxSizeChanged.fire(S.m_data.boxSize),t()}):(e.params.nonseries||(S.m_data.m_nsBars.clear(),S.m_data.lastProjectionPrice=void 0),t(),t())}).then(function(){S._statusView.invalidate();var e=S.m_model.paneForSource(S);S.m_model.updateAllVolumeStudies(),S.m_model.recalculatePane(e),S.m_model.updateSource(S),S.m_model.updateLineTools(),S.m_model.updateCrossHair()})}this._dataLoaded.fire(e)},c.prototype.parseJapProjBars=function(e){var t,i,o,n=new oe(["time","open","high","low","close","adt","style"]),r=this.model().timeScale(),s=this.properties().style.value(),a=this;return new Promise(function(l){e.d&&""!==e.d?TradingView.Study.prototype._makeJSONForNSData.call(a,{params:{nonseries:e}}).then(function(a){var h,u,d,p,f=a.data;for(t=f.price,i=f.boxSize,o=f.reversalAmount,h=f.bars,u=0;h&&u<h.length;u++)d=[],p=e.indexes[h[u].time],d.push(r.points().valueAt(p)),d.push(h[u].open),d.push(h[u].high),d.push(h[u].low),d.push(h[u].close),d.push(h[u].volume),s===c.STYLE_KAGI?d.push(h[u].additionalPrice):s===c.STYLE_PNF&&d.push(h[u].factor),n.add(p,d);l({nsBars:n,lastPrice:t,boxSize:i,reversalAmount:o})}):l({nsBars:n,lastPrice:t,boxSize:i,reversalAmount:o})})},c.prototype.disconnect=function(){this._seriesId&&this._chartApi.removeSeries(this._seriesId),this._symbolId=null,this._seriesId=null,this._predictBars=0,
this._status=c.STATUS_OFFLINE},c.prototype.isStarted=function(){return!!this._symbolId},c.prototype.restart=function(){var e,t=i(209);this._onRestarted.fire(),this._setStatus(c.STATUS_RESOLVING),this.m_data=new J(["time","open","high","low","close","adt","style"]),this.updateSymbolInfo(null),this._prevSymbolId=this._symbolId,this._symbolId=this._makeNextSymbolId(),e=this._properties.interval.value(),this._pendingTimeRange&&(e=this._generateTimeframe(e,this._pendingTimeRange),delete this._pendingTimeRange),this._removeReplaySubscriber(),this._onBeforeModifySeries(this.getSymbolString(),e),this._chartApi.resolveSymbol(this._symbolId,this._getResolvingSymbolString(),this._handler),this._seriesId?(this._turnaround="s"+ ++this._turnaroundCounter,this._chartApi.modifySeries(this._seriesId,this._turnaround,this._symbolId,e,this._handler,this._prevSymbolId)):(this._seriesId=this._makeNextSeriesId(),!1===this._chartApi.createSeries(this._seriesId,this._turnaround,this._symbolId,e,this._prepareChartApiParams(),this._handler)&&(this._seriesId=void 0)),this._properties.showInDataWindow.listeners().subscribe(this.m_model,t.prototype.fullUpdate),this.m_symbol=this._properties.symbol.value(),this.m_interval=this._properties.interval.value()},c.prototype._generateTimeframe=function(e,t){var i,o=t.right(1),n=e;return"ytd"===t?n+=",YTD":"d"===o?(i=t.left(t.length-1),n+=","+i,C.enabled("daily_timeframe_suffix")&&(n+="D")):"m"===o?(i=t.left(t.length-1),n+=","+i+"M"):"all"===t&&(n+=",ALL"),n},c.prototype.hasDelayedSymbolIntervalChange=function(){return!!this._setSymbolIntervalDelay},c.prototype.setSymbolIntervalDelayed=function(){this._isDWMCached=null,this._willSymbolIntervalChanged()&&(this._setSymbolIntervalDelay&&(de.logNormal("Clear timeout to change symbol/interval #"+this._setSymbolIntervalDelay),clearTimeout(this._setSymbolIntervalDelay)),this._setSymbolIntervalDelay=setTimeout(function(){de.logNormal("Timeout #"+this._setSymbolIntervalDelay+' fired, new symbol will be "'+this._properties.symbol.value()+'"'),delete this._setSymbolIntervalDelay,this._setSymbolInterval(this._properties.symbol.value(),this._properties.interval.value())}.bind(this),30),de.logNormal("Started timeout #"+this._setSymbolIntervalDelay+' to change symbol/interval from "'+this.m_symbol+'" to "'+this._properties.symbol.value()+'"'))},c.prototype._willSymbolIntervalChanged=function(){var e=this._checkIntervalWillChanged(this._parseInterval(this._properties.interval.value()).interval);return this._checkSymbolWillChanged(this._properties.symbol.value())||e},c.prototype._checkSymbolWillChanged=function(e){return!this.symbolSameAsCurrent(e)||C.enabled("same_data_requery")},c.prototype._checkIntervalWillChanged=function(e){return this.m_interval!==e||C.enabled("same_data_requery")},c.prototype._parseInterval=function(e){var t=(e+"").split(",");return{interval:2===t.length?t[0]:e,timeframe:2===t.length?t[1]:0}},c.prototype.rerequestData=function(){this._setSymbolInterval(this.m_symbol,this.m_interval,!0)},c.prototype._setSymbolInterval=function(e,t,i){
var o,n,r,s,a,l;delete this._gotoDateResult,o=this._parseInterval(t),n=o.interval,r=o.timeframe,s=this._checkSymbolWillChanged(e),a=this._checkIntervalWillChanged(n),(s||a||i)&&(this._syncModel=null,this.m_symbol=e,this.m_interval=n,this.m_timeframe=r,this._symbolId&&!s||this.updateSymbolInfo(null),(s||a)&&this.isInReplay()&&(this._removeReplaySubscriber(),this._symbolId=null),this.m_model.realignLineTools(),this._status!==c.STATUS_SNAPSHOT&&(this._setStatus(c.STATUS_RESOLVING),this._symbolIntervalChanged.fire(),a&&(l={timeframe:this._pendingTimeRange},this._intervalChanged.fire(this.m_interval,l),this._pendingTimeRange=l.timeframe&&l.timeframe.toLowerCase()),this._onRestarted.fire(),this._seriesLoaded=!1,this._chartApi&&this._chartApi.connected()&&(this._symbolId&&!s||(this._prevSymbolId=this._symbolId,this._symbolId=this._makeNextSymbolId(),this._chartApi.resolveSymbol(this._symbolId,this._getResolvingSymbolString(),this._handler)),this._seriesId?(this._turnaround="s"+ ++this._turnaroundCounter,this._pendingTimeRange&&(t=this._generateTimeframe(t,this._pendingTimeRange),delete this._pendingTimeRange),this._onBeforeModifySeries(this.getSymbolString(),t),this._predictBars=0,this._chartApi.modifySeries(this._seriesId,this._turnaround,this._symbolId,t,this._handler,this._prevSymbolId)):(this._onBeforeModifySeries(this.getSymbolString(),t),this._seriesId=this._makeNextSeriesId(),this._chartApi.createSeries(this._seriesId,this._turnaround,this._symbolId,t,this._prepareChartApiParams(),this._handler)))))},c.prototype.setDefaultTimeframe=function(e){this._pendingTimeRange=e},c.prototype.actualSymbol=function(){return this.symbolInfo()?this.symbolInfo().full_name:this.symbol()},c.prototype.proSymbol=function(){return this.symbolInfo()?this.symbolInfo().pro_name:this.symbol()},c.prototype.symbol=function(){return this.properties().symbol.value()},c.prototype.interval=function(){return this.properties().interval.value()},c.prototype.isIntradayInterval=function(){return!!/^\d*$/.test(this.interval())&&this.interval()<=1440},c.prototype.bars=function(){return this.m_data.m_bars},c.prototype.nsBars=function(){return this.m_data.m_nsBars},c.prototype.open=function(e){return this.m_data.valueAt(e)[TradingView.OPEN_PLOT]},c.prototype.high=function(e){return this.m_data.valueAt(e)[TradingView.HIGH_PLOT]},c.prototype.low=function(e){return this.m_data.valueAt(e)[TradingView.LOW_PLOT]},c.prototype.close=function(e){return this.m_data.valueAt(e)[TradingView.CLOSE_PLOT]},c.prototype.hl2=function(e){return(this.high(e)+this.low(e))/2},c.prototype.hlc3=function(e){return(this.high(e)+this.low(e)+this.close(e))/3},c.prototype.ohlc4=function(e){return(this.open(e)+this.high(e)+this.low(e)+this.close(e))/4},c.prototype.priceRange=function(e,t){var i,o,n,s,a,l,c,h;return TradingView.isInteger(e)?TradingView.isInteger(t)?this.data().isEmpty()?null:this.m_priceScale.isLockScale()&&null!==(i=this._model.mainSeriesScaleRatio())?(o=this.priceScale().internalHeight()/(this.model().timeScale().barSpacing()/i),n=this.data().search(t,ne.NearestLeft),
s=(n.value[TradingView.HIGH_PLOT]+n.value[TradingView.LOW_PLOT])/2,a=new r(s-.5*o,s+.5*o),l=this.data().search(e,ne.NearestRight),this.priceScale().isPercentage()?a.convertToPercents(l.value[TradingView.CLOSE_PLOT]):a):(c=this.data().bars().minMaxOnRange2(e,t,[{index:TradingView.LOW_PLOT,offset:0},{index:TradingView.HIGH_PLOT,offset:0}]),h=this.data().nsBars().minMaxOnRange(e,t,[{index:TradingView.LOW_PLOT,offset:0},{index:TradingView.HIGH_PLOT,offset:0}]),c=re(c,h),a=null!==c?c.min===c.max?new r(c.min-.5,c.max+.5):new r(c.min,c.max):new r(-.5,.5),this.priceScale().isPercent()?(l=this.data().search(e,ne.NearestRight),null===l?null:a.convertToPercents(l.value[TradingView.CLOSE_PLOT])):this.priceScale().isLog()?new r(this.priceScale().priceToLogical(a.minValue()),this.priceScale().priceToLogical(a.maxValue())):a):(de.logDebug("Series.priceRange: incorrect endBar"),null):(de.logDebug("Series.priceRange: incorrect startBar"),null)},c.prototype.nearestData=function(e,t){if(!TradingView.isInteger(e))return void de.logDebug("Series.nearestData: incorrect logicalPoint");var i=this.data().search(e,t);return null!==i?i:void 0},c.prototype.nearestIndex=function(e,t){var i=this.nearestData(e,t);return i?i.index:void 0},c.prototype.paneViews=function(e){if(!this.properties().visible.value())return null;var t=[this._paneView];return this._futureBarsPaneView&&t.push(this._futureBarsPaneView),this._projectionBarsPaneView&&t.push(this._projectionBarsPaneView),null!==this._baseLineView&&t.push(this._baseLineView),t.push(this._prevClosePriceLineView),t.push(this._priceLineView),t.push(this._symbolLabelView),t.push(this._gotoDateView),t},c.prototype.dataWindowView=function(){return this._dataWindowView},c.prototype.statusView=function(){return this._statusView},c.prototype.priceAxisViews=function(e,t){return this.m_model.paneForSource(this)===e&&t===this.priceScale()&&(this.m_model.properties().scalesProperties.showSeriesLastValue.value()||this.properties().showCountdown.value())?this._priceAxisViews:null},c.prototype.base=function(){return this._base},c.prototype.formatter=function(){return this._formatter},c.prototype.purgeSymbolInfo=function(){this._symbolInfo=null},c.prototype.symbolInfo=function(){return this._symbolInfo},c.prototype._recreateFormatter=function(){var e,t,i,o;"default"===this.properties().minTick.value()?this._formatter=new te(this._symbolInfo?this._symbolInfo.pricescale:100,this._symbolInfo?this._symbolInfo.minmov:1,!!this._symbolInfo&&this._symbolInfo.fractional,this._symbolInfo?this._symbolInfo.minmove2:void 0):(e=this.properties().minTick.value().split(","),t=parseInt(e[0]),i=parseInt(e[1]),o="true"===e[2],this._formatter=new te(t,i,o)),this.priceScale()&&this.priceScale().updateFormatter()},c.prototype.updateSymbolInfo=function(e){var t,i,o=this,n=e&&(e.pro_name||e.full_name||e.name);C.enabled("charting_library_single_symbol_request")&&this.m_symbol&&(n=this.m_symbol),this._symbolInfo=e,e&&(this._properties.shortName.setValue(e.name),t=this._properties.symbol.value(),i=n,
C.enabled("uppercase_instrument_names")&&(t=t.toUpperCase(),i=i.toUpperCase()),n&&t!==i&&this._properties.symbol.setValue(n)),this._base=e?e.pricescale/e.minmov:100,this._recreateFormatter(),this._statusView.update(),this.priceScale().updateFormatter(),"undefined"!=typeof quoteSessionMultiplexerInstance&&this._quoteSessionSymbol!==n&&(this._quoteSessionClientId||(this._quoteSessionClientId="series-"+he.guid()),this._unsubscribeQuoteSession(),n&&(this._quoteSessionSymbol=n,quoteSessionMultiplexerInstance.full.subscribe(this._quoteSessionClientId,this._quoteSessionSymbol,function(e,t){o.quoteData=e&&e.values||null,t&&t.values&&t.values.current_session&&o.marketStatus.setValue(t.values.current_session)}))),this.checkInterval(),this.dataPoweredBy=F(e)},c.prototype._unsubscribeQuoteSession=function(){this._quoteSessionSymbol&&(quoteSessionMultiplexerInstance.full.unsubscribe(this._quoteSessionClientId,this._quoteSessionSymbol),this._quoteSessionSymbol=void 0)},c.prototype.symbolSameAsCurrent=function(e){if(this.m_symbol===e)return!0;var t=this._symbolInfo;if(t){if(t.full_name===e||t.pro_name===e)return!0;if(t.ticker===e)return!0;if(t.aliases&&-1!==t.aliases.indexOf(e))return!0;if(t.alternatives&&-1!==t.alternatives.indexOf(e))return!0;if(0===e.indexOf("FRA:")&&t.pro_name===e.replace("FRA:","FWB:"))return!0}return!1},c.prototype.updateAllViews=function(){var e,t;for(this._paneView.update(),this._dataWindowView.update(),this._statusView.update(),e=this._priceAxisViews.length,t=0;t<e;t++)this._priceAxisViews[t].update();this._futureBarsPaneView&&this._futureBarsPaneView.update(),this._projectionBarsPaneView&&this._projectionBarsPaneView.update(),null!==this._baseLineView&&this._baseLineView.update(),this._prevClosePriceLineView.update(),this._priceLineView.update(),this._gotoDateView.update(),this._symbolInfo&&this._symbolLabelView.update()},c.prototype._setStatus=function(e){this._status=e,this._statusView.update(),this.m_model.updateSource(this),this._onStatusChanged.fire()},c.prototype.requestMoreData=function(e){var t,i,o,n;this._status!==c.STATUS_READY&&this._status!==c.STATUS_PULSE&&this._status!==c.STATUS_DELAYED&&this._status!==c.STATUS_DELAYED_STREAMING&&this._status!==c.STATUS_EOD&&this._status!==c.STATUS_REPLAY||this.m_model.timeScale().isEmpty()||null!==(t=this.m_model.timeScale().visibleBars())&&0!==this.bars().size()&&(i=e||t.lastBar()-h(this.data().last()).index,this._predictBars<i&&(this._predictBars=i,this._chartApi&&this._chartApi.connected()&&this._chartApi.requestMoreTickmarks(this._seriesId,i,this._handler)),this._endOfData||(o=h(this.bars().firstIndex()),(n=e||o-t.firstBar())<=0||(this._endOfData=!0,this._chartApi&&this._chartApi.connected()&&(this._chartApi.requestMoreData(this._seriesId,n,this._handler),C.enabled("charting_library_base")&&(this._predictBars=0)),this._setStatus(c.STATUS_LOADING))))},c.prototype.bindStyleChange=function(){var e=this;["candleStyle","hollowCandleStyle","haStyle","barStyle","lineStyle","areaStyle","renkoStyle","pbStyle","kagiStyle","pnfStyle"].forEach(function(t){
e._properties[t].listeners().subscribe(e,c.prototype.invalidateBarStylesCache)})},c.prototype.bindJapChartsInputs=function(){this._properties.style.listeners().subscribe(this,this.onChartStyleChanged),this._properties.renkoStyle.inputs.boxSize.listeners().subscribe(this,this.onInputChanged),this._properties.renkoStyle.inputs.style.listeners().subscribe(this,this.onInputChanged),this._properties.renkoStyle.inputs.atrLength.listeners().subscribe(this,this.onInputChanged),this._properties.renkoStyle.inputs.wicks.listeners().subscribe(this,this.onInputChanged),this._properties.pbStyle.inputs.lb.listeners().subscribe(this,this.onInputChanged),this._properties.kagiStyle.inputs.reversalAmount.listeners().subscribe(this,this.onInputChanged),this._properties.kagiStyle.inputs.style.listeners().subscribe(this,this.onInputChanged),this._properties.kagiStyle.inputs.atrLength.listeners().subscribe(this,this.onInputChanged),this._properties.pnfStyle.inputs.boxSize.listeners().subscribe(this,this.onInputChanged),this._properties.pnfStyle.inputs.reversalAmount.listeners().subscribe(this,this.onInputChanged),this._properties.pnfStyle.inputs.sources.listeners().subscribe(this,this.onInputChanged),this._properties.pnfStyle.inputs.style.listeners().subscribe(this,this.onInputChanged),this._properties.pnfStyle.inputs.atrLength.listeners().subscribe(this,this.onInputChanged)},c.prototype.createExtendedHoursProperty=function(){function e(){var e=void 0!==B&&C.enabled(B.EXTENDED_SESSION),i=t.model().readOnly(),o=t._properties.extendedHours.value(),n=C.enabled("widget");!o||n||i||e||(t._extendedHoursNotPermitted.fire(),o=!1),o&&!t.isIntradayInterval()&&(o=!1),t.extendedHours.setValue(o)}var t=this;t.extendedHours=new n,t._properties.extendedHours.listeners().subscribe(null,e),t._properties.interval.listeners().subscribe(null,e),t.chartWidgetInitialized.subscribe(null,e),e()},c.prototype.createDividendsAdjustmentProperty=function(){function e(){var e=t._properties.dividendsAdjustment.value();t.dividendsAdjustment.setValue(e)}var t=this;t.dividendsAdjustment=new n,t._properties.dividendsAdjustment.listeners().subscribe(null,e),e()},c.prototype.isNeedRestart=function(e){if(void 0===e&&(e=this.properties().style.value()),this._prevChartStyle!==e){var t=[c.STYLE_BARS,c.STYLE_CANDLES,c.STYLE_HOLLOW_CANDLES,c.STYLE_LINE,c.STYLE_AREA,c.STYLE_BASELINE];if(!(t.indexOf(this._prevChartStyle)>-1&&t.indexOf(e)>-1))return!0}return!1},c.prototype.onChartStyleChanged=function(){this.isNeedRestart()&&(this.data().clear(),this.model().timeScale().scrollToRealtime(!1),this.isInReplay()&&!this.isStyleSupportedForReplay(this.style())&&this._removeReplaySubscriber(),this.restart()),this._prevChartStyle=this.properties().style.value(),this._onStyleChanged.fire(this.properties().style.value()),this.invalidateBarStylesCache()},c.prototype.style=function(){return this.properties().style.value()},c.prototype.isJapaneseStyle=function(){return me.isJapaneseStyle(this.style())},c.prototype.onInputChanged=function(){this.restart()},
c.prototype.onExtendedHoursChanged=function(){return this._extendedHoursChanged},c.prototype.getSymbolString=function(){var e,t,i,o;return e=C.enabled("pay_attention_to_ticker_not_symbol")&&this._symbolInfo?this._symbolInfo.ticker:this.actualSymbol(),this.extendedHours.value()&&(e={symbol:e,session:"extended"}),c.SYMBOL_STRING_DATA.hasOwnProperty(this._properties.style.value())&&(t=this.styleStudyInfo(this.getStyleShortName()+"Style").studyId,i=this.getInputsProperties(),e={symbol:e,type:t+"!",inputs:i.state()}),H("dividends-adjust")&&(o=this.properties().dividendsAdjustment.value()?"dividends":"splits","string"!=typeof e?e.adjustment=o:e={symbol:e,adjustment:o}),"string"!=typeof e&&(e="="+JSON.stringify(e)),e},c.prototype._getResolvingSymbolString=function(){var e=this.getSymbolString();return this._replaySubscriber&&(e=this._replaySubscriber.generateReplaySymbol(e)),e},c.prototype.getStyleShortName=function(){var e=this._properties.style.value();if(c.STYLE_SHORT_NAMES.hasOwnProperty(e))return c.STYLE_SHORT_NAMES[e];throw Error("Missed short name for style "+e)};c.prototype.getStyleProperties=function(){return this._properties[this.getStyleShortName()+"Style"]},c.prototype.getInputsProperties=function(){return this.getStyleProperties().inputs||new n},c.prototype.getRealVisibleRange=function(){var e,t,i=this.model().timeScale().visibleBars();return null===i?null:(e=this.data().search(i.firstBar(),ne.NearestRight),t=this.data().search(i.lastBar(),ne.NearestLeft),null===e||null===t?null:new W(e.index,t.index))},c.prototype.firstValue=function(){var e=this.firstBar();return null===e?null:e[TradingView.CLOSE_PLOT]},c.prototype.firstBar=function(){var e,t,i=this.model().timeScale().visibleBars();return null===i?null:(e=i.firstBar(),t=this.data().search(e,ne.NearestRight),null!==t?t.value:null)},c.prototype.sessionsStudy=function(){var e,t,i,o;if(this._sessionsStudy)return this._sessionsStudy;for(e=this.model().paneForSource(this),t=e.dataSources(),i=0;i<t.length;i++)if((o=t[i])instanceof TradingView.Study&&"Sessions"===o.metaInfo().shortId)return this._sessionsStudy=o,this._sessionsStudy;return!1},c.prototype.clearSessionStudy=function(){this._sessionsStudy=null},c.prototype.createSessStudy=function(){if(!this.sessionsStudy()){var e=se.findStudyMetaInfo(this.model().studiesMetaData(),"Sessions@tv-basicstudies");this.model().insertStudy(e,!1,!0),this._onSessionsStudyCreated.fire()}},c.prototype.checkSessStudy=function(){C.enabled("charting_library_base")||(this.sessionsStudy()||this.createSessStudy(),this.sessionsStudy().start())},c.prototype.isSpread=function(){return"spread"===this._symbolInfo.type},c.prototype.firstSymbol=function(){return this._symbolInfo?this._symbolInfo.legs[0]:""},c.prototype.firstShortName=function(){return ee.ticker(this.firstSymbol())},c.prototype.onSessionsStudyCreated=function(){return this._onSessionsStudyCreated},c.prototype.loadDataTo=function(e){this._turnaround="s"+ ++this._turnaroundCounter;var t=this._properties.interval.value();t=this._generateTimeframe(t,e),
this._chartApi.modifySeries(this._seriesId,this._turnaround,this._symbolId,t,this._handler)},c.prototype.checkInterval=function(){if(this._symbolInfo&&(K.kind(this.interval())!==K.MINUTES||this._symbolInfo.has_intraday||this.requestingIntradayWhenNotSupported.fire(),this._symbolInfo.hasOwnProperty("supported_resolutions"))){var e=this._properties.interval.value();-1===this._symbolInfo.supported_resolutions.indexOf(e)&&this.requestingResolutionWhenNotSupported.fire(this._symbolInfo.supported_resolutions[0])}},c.prototype.priceScale=function(){return this.m_priceScale},c.prototype.setPriceScale=function(e){this.m_priceScale!==e&&(this.m_priceScale=e,this.priceScaleChanged.fire(e))},c.prototype.setGotoDateResult=function(e){this._gotoDateResult=e},c.prototype.gotoDateResult=function(){return this._gotoDateResult},c.prototype.syncModel=function(){var e,t;if(!this._syncModel){if(e=this.symbolInfo(),t=this.interval(),!e||!t)return null;this._syncModel=new ae(e,t)}return this._syncModel},c.prototype.turnaround=function(){return this._turnaround},c.prototype.getStylesPropertyPage=function(){return C.enabled("show_chart_property_page")?x.ChartStylesPropertyPage:null},c.prototype.getSourceIcon=function(){return{type:"svg",svgCode:_e[this.properties().style.value()]}},c.prototype.isStyleSupported=function(e){return!this.isInReplay()||this.isStyleSupportedForReplay(e)},c.prototype.isStyleSupportedForReplay=function(e){return!me.isJapaneseStyle(e)},c.prototype.isInReplay=function(){return null!==this._replaySubscriber},c.prototype.onInReplayStateChanged=function(){return this._onInReplayStateChanged},c.prototype.switchToReplay=function(e){this._replaySubscriber=e,this._onInReplayStateChanged.fire(),this._replaySubscriber.modifySeries(this.getSymbolString(),this._properties.interval.value()),this._symbolId=null,this.rerequestData()},c.prototype.switchToRealtime=function(){this.isInReplay()&&(this._removeReplaySubscriber(),this._symbolId=null,this.rerequestData())},c.prototype._removeReplaySubscriber=function(){if(this.isInReplay()){var e=this._replaySubscriber;this._replaySubscriber=null,this._onInReplayStateChanged.fire(),e.destroy()}},c.prototype._onBeforeModifySeries=function(e,t){this._replaySubscriber&&this._replaySubscriber.modifySeries(e,t)},c.prototype._isExtendedHoursAllowed=function(){return this._symbolInfo&&-1!==["stock","index","futures"].indexOf(this._symbolInfo.type)},c.prototype.destroy=function(){this._unsubscribeQuoteSession()},TradingView.Series=c,e.exports=c}).call(t,i(4),i(22),i(37),i(79))},function(e,t,i){"use strict";function o(e){var t,i;if(e&&e.__esModule)return e;if(t={},null!=e)for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r,s,a,l,c,h;Object.defineProperty(t,"__esModule",{value:!0}),t.DropdownView=void 0,r=function(){function e(e,t){var i,o;for(i=0;i<t.length;i++)o=t[i],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),
Object.defineProperty(e,o.key,o)}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),i(188),s=i(30),a=i(83),l=i(129),c=o(l),h=t.DropdownView=function(){function e(t){var i=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,e),this.$el=t,this.$wrap=o.$wrap||t.find(".tv-dropdown-behavior__button"),this.$body=o.$body||t.find(".tv-dropdown-behavior__body"),this.notCloseWithCtrl=!!o.notCloseWithCtrl&&o.notCloseWithCtrl,this.closeWithEsc=void 0===o.closeWithEsc||o.closeWithEsc,this.closeWithEsc&&this.$el.attr("tabIndex",0),(t.data("scroll")||o.scroll)&&(this.$scroll=this.$body.find(".tv-dropdown-behavior__scroll"),this.$inScroll=this.$scroll.find(".tv-dropdown-behavior__inscroll"),this.scroll=new a.SidebarCustomScroll(this.$scroll,this.$inScroll,{showTopShadow:!1,showBottomShadow:!1}),this.$scrollBar=this.scroll.getScrollBar(),this.$scrollBar&&this.$scrollBar.on("mousedown.tv-dropdown-view-scroll",function(){i.offClickOutside(),$(document).on("mouseup.tv-dropdown-view-scroll",function(){i.onClickOutside(),$(document).off("mouseup.tv-dropdown-view-scroll")})})),(t.data("adaptBody")||o.adaptBody)&&(this._adaptBody=!0),this._fitScreen=t.data("fitScreen")||o.fitScreen,this.$wrap.add(t.find(".js-dropdown-toggle")).on("click",function(e){$(e.currentTarget).hasClass("js-prevent-dropdown")||i.toggle()})}return r(e,[{key:"toggle",value:function(){this.opened?this.close(!0):this.open()}},{key:"open",value:function(){var e=this;this.opened||this.disabled||(this.$el.trigger("beforeOpenMenu"),this.$body.removeClass("i-hidden"),this.$wrap.addClass("i-dropped"),this.$el.addClass("i-opened"),"horz"===this._fitScreen&&this.fitHorizontally(),this._adaptBody&&this.adaptBody(),this.onClickOutside(),this.$body.addClass("i-opened"),this.$el.trigger("updateScroll"),this.$el.trigger("afterOpenMenu"),this.opened=!0,this.closeWithEsc&&this.$el.on("keypress keyup",function(t){t.keyCode===c.ESC&&e.close(!0)}))}},{key:"onClickOutside",value:function(){var e=this;setTimeout(function(){e.$body.on("clickoutside",function(){e.close(!0)})},0)}},{key:"offClickOutside",value:function(){this.$body.off("clickoutside")}},{key:"close",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.opened&&!this.disabled&&(!e&&this.notCloseWithCtrl&&(window.event.ctrlKey||window.event.metaKey)||(this.offClickOutside(),this.$wrap.removeClass("i-dropped"),this.$el.trigger("beforeCloseMenu"),this.$body.removeClass("i-opened").addClass("i-hidden"),this.$el.removeClass("i-opened").trigger("afterCloseMenu"),this.opened=!1,this.closeWithEsc&&this.$el.off("keypress keyup")))}},{key:"isOpened",value:function(){return this.opened}},{key:"updateScroll",value:function(){this.scroll&&(this.scroll.updateScrollBar(),this.scroll.scrollToStart())}},{key:"enable",value:function(){this.$wrap.removeClass("i-disabled"),this.disabled=!1}},{key:"disable",value:function(){this.$wrap.addClass("i-disabled"),this.disabled=!0}},{key:"adaptBody",value:function(){function e(){s.height("auto")}
var t,i,o,n,r=15,s=this.$body,a=this.$wrap.get(0).getBoundingClientRect(),l=window.innerHeight,c=this.$inScroll.outerHeight(!0),h=parseFloat(s.css("padding-top"));c+=h,t=parseFloat(s.css("padding-bottom")),c+=t,i=a.top+c+r<=l,o=c+r<=a.bottom,n=void 0,i?(n=0-h,e()):o?(n=-c+t,e()):(n=-a.top+r,l<=c&&s.height(l-2*r)),s.css("top",n)}},{key:"fitHorizontally",value:function(){var e,t,i,o;this.$body.css("marginLeft",0),e=document.body.getBoundingClientRect(),t=parseFloat($(document.body).css("paddingRight")),i=this.$body.offset(),i.right=i.left+this.$body.outerWidth(),(o=Math.max(Math.min(0,e.right-t-i.right),e.left-i.left))&&this.$body.css("marginLeft",o)}},{key:"destroy",value:function(){this.scroll&&this.scroll.destroy(),this.offClickOutside(),this.$el.find(".js-dropdown-toggle").off("click"),this.$wrap.off("click")}}]),e}(),$.fn.tvDropdown=(0,s.createTvBlockWithInstance)("tv-dropdown",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new h(e,t)})},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 95.939 95.939" width="95.939" height="95.939"><path d="M62.82 47.97l32.53-32.534a2 2 0 0 0 0-2.828L83.332.586a2 2 0 0 0-2.827 0L47.97 33.12 15.435.587c-.75-.75-2.078-.75-2.828 0L.587 12.607a2 2 0 0 0 0 2.83L33.12 47.97.588 80.504a2 2 0 0 0 0 2.828l12.02 12.02a1.997 1.997 0 0 0 2.83 0L47.97 62.818l32.535 32.535a2 2 0 0 0 2.827 0l12.02-12.02c.78-.783.78-2.05 0-2.83L62.82 47.97z"/></svg>'},function(e,t,i){"use strict";function o(e){for(var t=0;t<c.length;t++)if(c[t].name===e)return t;return-1}function n(e,t){var i={name:e,func:t},n=o(i.name);n>-1?c[n]=i:c.push(i)}function r(e){c.forEach(function(t,i){t.name===e&&c.splice(i,1)})}function s(e,t){var i={name:e,func:t},n=o(i.name);n>-1&&c.splice(n,1),c.unshift(i)}function a(){h=!0}function l(){h=!1}var c,h;Object.defineProperty(t,"__esModule",{value:!0}),i(13),c=[],h=!1,$(window).on("keypress",function(e){if(!h)for(var t=c.length-1;t>=0&&!0!==c[t].func(e);t--);}),t.registerListener=n,t.removeListener=r,t.pushBackListener=s,t.disable=a,t.enable=l},function(e,t,i){"use strict";function o(e,t,i){var o,n,r,s,a=null,l=0;return i=i||{},s=function(){l=!1===i.leading?0:Date.now(),a=null,r=e.apply(o,n),a||(o=n=null)},function(){var c,h=Date.now();return l||!1!==i.leading||(l=h),c=t-(h-l),o=this,n=arguments,c<=0||c>t?(a&&(clearTimeout(a),a=null),l=h,r=e.apply(o,n),a||(o=n=null)):a||!1===i.trailing||(a=setTimeout(s,c)),r}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o,e.exports=t.default},function(e,t,i){"use strict";!function(e){if(document.createElement("canvas")&&document.createElement("canvas").getContext){var t=function(t){var i=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(e.devicePixelRatio||1)/i}(document.createElement("canvas").getContext("2d"));t<=1||(e.hidpiCanvasRatio=t,function(e){var i,o=function(e,t){for(var i in e)e.hasOwnProperty(i)&&t(e[i],i)},n={fillRect:"all",
clearRect:"all",strokeRect:"all",moveTo:"all",lineTo:"all",arc:[0,1,2],arcTo:"all",bezierCurveTo:"all",isPointinPath:"all",isPointinStroke:"all",quadraticCurveTo:"all",rect:"all",translate:"all",createRadialGradient:"all",createLinearGradient:"all",drawImagePatchedSource:[1,2,3,4]};e.drawImagePatchedSource=e.drawImage,i=e.drawImage,e.drawImagePatchedSourceAndDest=function(e){var o,n=Array.prototype.slice.call(arguments);for(o=1;o<n.length;++o)n[o]&&(n[o]*=t);return n.length>5&&("width"in e&&(n[3]=Math.min(e.width,Math.max(1,n[3]))),"height"in e&&(n[4]=Math.min(e.height,Math.max(1,n[4])))),i.apply(this,n)},o(n,function(i,o){var n=e[o];e[o]=function(){var e,o;if("all"===i)for(o=[],e=arguments.length;0<e--;)o[e]=arguments[e]*t;else for(o=Array.prototype.slice.call(arguments),e=i.length;0<e--;)o[i[e]]&&(o[i[e]]=o[i[e]]*t);return n.apply(this,o)}}),e.drawImage=function(e){return function(){return arguments[0]instanceof HTMLCanvasElement?e.drawImagePatchedSourceAndDest.apply(this,arguments):e.drawImagePatchedSource.apply(this,arguments)}}(e),e.fillText=function(e){return function(){var i=Array.prototype.slice.call(arguments);i[1]*=t,i[2]*=t,this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,function(e,i,o){return i*t+o}),e.apply(this,i),this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,function(e,i,o){return i/t+o})}}(e.fillText),e.strokeText=function(e){return function(){var i=Array.prototype.slice.call(arguments);i[1]*=t,i[2]*=t,this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,function(e,i,o){return i*t+o}),e.apply(this,i),this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,function(e,i,o){return i/t+o})}}(e.strokeText)}(CanvasRenderingContext2D.prototype),function(e){e.getContext=function(e){return function(i){var o=e.call(this,i);return"2d"===i&&this.width!==Math.floor(parseInt(this.style.width)*t)&&(this.style.height=this.height+"px",this.style.width=this.width+"px",this.width*=t,this.height*=t),o}}(e.getContext)}(HTMLCanvasElement.prototype))}}(window)},function(e,t,i){"use strict";function o(e){return!!e&&(!(void 0===e.symbolname||!n.isSfFlag(e.symbolname))||!("permission_denied"!==e.status||!e.values||void 0===e.values.alternative||!n.isSfFlag(e.values.alternative)))}Object.defineProperty(t,"__esModule",{value:!0});var n=i(128);t.isSfQuoteData=o},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 13" width="13" height="13"><path d="M5.182 6.596l-3.889-3.889-.707-.707 1.414-1.414.707.707 3.889 3.889 3.889-3.889.707-.707 1.414 1.414-.707.707-3.889 3.889 3.889 3.889.707.707-1.414 1.414-.707-.707-3.889-3.889-3.889 3.889-.707.707-1.414-1.414.707-.707 3.889-3.889z"/></svg>'},function(e,t,i){"use strict";function o(e,t){e.width=t.w,e.height=t.h;var i=e.getContext("2d");i&&i.translate(.5,.5)}function n(e,t){e.width=0,o(e,t)}function r(e,t,i,o,n,r){e.save(),e.translate(-.5,-.5),e.fillStyle=r,e.fillRect(t,i,o,n),e.restore()}function s(e,t){var i=document.createElement("canvas");return e.append(i),o(i,t),i}Object.defineProperty(t,"__esModule",{value:!0}),i(13);var a=function(){function e(e,t){
this.w=e,this.h=t}return e.prototype.equals=function(e){return this.w===e.w&&this.h===e.h},e}();t.Size=a,t.resizeCanvas=o,t.hardResizeCanvas=n,t.clearRect=r,t.addCanvasTo=s},function(e,t,i){"use strict";var o=i(463),n={instances:[],createMenu:function(e,t,i){var n=new o(e,t,i);return this.instances.push(n),n},hideAll:function(){for(var e in this.instances)this.instances[e].hide()}};e.exports=n},function(e,t,i){"use strict";function o(e){this._data=e}function n(e,t){this._data=e,this._model=t,this.radius=this._data.radius||n.OUTER_RADIUS}function r(e){o.call(this,e)}var s=i(11),a=i(274).PaneRendererArrowsUpDown;i(35),o.RADIUS=3.5,o.prototype.tolerance=2,o.prototype.draw=function(e){function t(e){return void 0===e.x||TradingView.isNaN(e.x)||null===e.x||void 0===e.y||TradingView.isNaN(e.y)||null===e.y}var i,o,n;if(this._data)for(e.strokeStyle="#6B6B6B",e.fillStyle="#D6D6D6",i=this._data.vertOffset||0,o=0;o<this._data.points.length;o++)n=this._data.points[o],t(n)||this._drawMarker(e,n,i)},o.prototype._drawMarker=function(e,t,i){e.beginPath(),e.arc(t.x+.5,t.y+.5+i,o.RADIUS,0,2*Math.PI,!0),e.closePath(),e.fill(),e.stroke()},o.prototype.hitTest=function(e){var t,i;if(!this._data)return null;for(t=0;t<this._data.points.length;t++)if(i=this._data.points[t],i.subtract(e).length()<=o.RADIUS+this.tolerance)return new s(this._data.hittestResult,i.data);return null},n.OUTER_RADIUS=TradingView.isMobile.any()?16:8,n.prototype.tolerance=2,n.prototype.draw=function(e){var t,i,o,n,r,s,a,l,c,h=this._data.currentPoint,u=this._data.outerStrokeWidth||1;for(t=0;t<this._data.points.length;t++)i=this._data.points[t],o=i.subtract(h).length(),n=TradingView.isInteger(i.data)&&this._data.linePointBeingEdited===i.data,r=this.radius,s=this._data.strokeWidth||2,a=o<=r+this.tolerance,l=a?1:0,r+=l,s+=l,n||(i.square?(e.fillStyle=this._data.backgroundColor,e.fillRect(i.x-r,i.y-r,2*r,2*r),e.fillStyle=this._data.color,c=r-u,e.fillRect(i.x-c,i.y-c,2*c,2*c),c=r-u-s,e.fillStyle=this._data.backgroundColor,e.fillRect(i.x-c,i.y-c,2*c,2*c)):(e.beginPath(),e.arc(i.x,i.y,r,0,2*Math.PI,!0),e.closePath(),e.fillStyle=this._data.backgroundColor,e.fill(),e.beginPath(),e.arc(i.x,i.y,r-u,0,2*Math.PI,!0),e.closePath(),e.fillStyle=this._data.color,e.fill(),e.beginPath(),e.arc(i.x,i.y,r-u-s,0,2*Math.PI,!0),e.closePath(),e.fillStyle=this._data.backgroundColor,e.fill()))},n.prototype.hitTest=function(e){var t,i,o;for(t=0;t<this._data.points.length;t++)if(i=this._data.points[t],o=i.subtract(e).length(),o<=this.radius+this.tolerance)return new s(this._data.hittestResult,i.data);return null},inherit(r,o),r.prototype._drawMarker=function(e,t,i){var n=t.isUp?1:-1,r=a.prototype._calculateVerticalOffset(this._data.barSpacing),s=a.prototype._calculateMinHeight(this._data.barSpacing),l=i+n*r+n*s;e.beginPath(),e.arc(t.x+.5,t.y+.5+l,o.RADIUS,0,2*Math.PI,!0),e.closePath(),e.fill(),e.stroke()},t.SelectionRenderer=o,t.LineAnchor=n,t.SelectionRendererArrowsUpDown=r},function(e,t,i){"use strict";var o,n,r;Object.defineProperty(t,"__esModule",{value:!0}),o=i(11),n=i(69),r=function(){
function e(){this._data=null,this._hitTest=new o(o.REGULAR)}return e.prototype.setData=function(e){this._data=e},e.prototype.setHitTest=function(e){this._hitTest=e},e.prototype.draw=function(e){var t,i;null!==this._data&&0!==this._data.points.length&&!1!==this._data.visible&&((t=this._data.points[0].y)<0||t>this._data.height||(i=this._data.width,e.lineCap="square",e.strokeStyle=this._data.color,e.lineWidth=this._data.linewidth,void 0!==this._data.linestyle&&n.setLineStyle(e,this._data.linestyle),n.drawLine(e,0,t,i,t)))},e.prototype.hitTest=function(e){return null===this._data||!1===this._data.visible?null:0===this._data.points.length?null:Math.abs(e.y-this._data.points[0].y)<=5?this._hitTest:null},e}(),t.HorizontalLineRenderer=r},function(e,t,i){"use strict";function o(e,t){this.m_title=e,this.m_value=t,this._visible=!0,this._color=void 0}function n(){this._header="",this._title="",this._items=[]}o.prototype.title=function(){return this.m_title},o.prototype.text=function(){return this.m_value},o.prototype.visible=function(){return this._visible},o.prototype.color=function(){return this._color},o.prototype.setVisible=function(e){this._visible=e},o.prototype.setValue=function(e){this.m_value=e},o.prototype.setColor=function(e){this._color=e},o.prototype.value=function(){return this.m_value},n.prototype.header=function(){return this._header},n.prototype.title=function(){return this._title},n.prototype.items=function(){return this._items},n.prototype.update=function(){},t.DataWindowItem=o,t.DataWindowView=n},function(e,t,i){"use strict";function o(e,t){n.call(this,t),this._study=e,this._inputValueReplacements={NONE:"Default"}}var n=i(480);inherit(o,n),o.prototype.color=function(){return this._study._failed||this._study.metaInfo&&this._study.metaInfo().isTVScriptStub?"#ff0000":n.prototype.color.call(this)},o.prototype.update=function(){this._study._failed?this._text=this._study.title(!0,this._inputValueReplacements)+": "+this._study.status():this._text=this._study.title(!0,this._inputValueReplacements)+" "+this._study.status()},e.exports=o},function(e,t,i){"use strict";function o(e,t){var o=t||new p("linetoolelliott");u.call(this,e,o),i.e(11).then(function(e){var t=i(472).ElliottLabelsPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}function n(e,t){var o=t||new p("linetoolelliott");u.call(this,e,o),this.version=n.version,i.e(11).then(function(e){var t=i(472).ElliottLabelsPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}function r(e,t){this._constructor="LineToolElliottImpulse";var i=t||new p("linetoolelliottimpulse");n.call(this,e,i)}function s(e,t){this._constructor="LineToolElliottTriangle";var i=t||new p("linetoolelliotttriangle");n.call(this,e,i)}function a(e,t){this._constructor="LineToolElliottTripleCombo";var i=t||new p("linetoolelliotttriplecombo");n.call(this,e,i)}function l(e,t){var o=t||new p("linetoolelliott");u.call(this,e,o),this.version=l.version,i.e(11).then(function(e){var t=i(472).ElliottLabelsPaneView
;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}function c(e,t){this._constructor="LineToolElliottCorrection";var i=t||new p("linetoolelliottcorrection");l.call(this,e,i)}function h(e,t){this._constructor="LineToolElliottLineToolElliottDoubleCombo";var i=t||new p("linetoolelliottdoublecombo");l.call(this,e,i)}var u=i(1).LineDataSource,d=i(74).Action,p=i(7).DefaultProperty,f=i(2).propertyPages;inherit(o,u),o.migrateState=function(e){var t={0:11,1:10,2:9,3:8,4:7,5:6,6:5,7:4,8:3},i={0:11,1:8};"LineToolElliottSubminuette"===e.type&&(e.type="LineToolElliottImpulse",e.state.degree=t[e.state.wavesize]),"LineToolElliottMinor"===e.type&&(e.type="LineToolElliottImpulse",e.state.degree=t[e.state.wavesize]),"LineToolElliottCircle"===e.type&&(e.type="LineToolElliottImpulse",e.state.degree=t[e.state.wavesize]),"LineToolElliottMinorRetr"===e.type&&(e.type="LineToolElliottCorrection",e.state.degree=i[e.state.wavesize]),"LineToolElliottMajorRetr"===e.type&&(e.type="LineToolElliottCorrection",e.state.degree=i[e.state.wavesize])},o.prototype.title=function(){return"Elliott Labels"},o.degrees=[$.t("Supermillennium"),$.t("Millennium"),$.t("Submillennium"),$.t("Grand Supercycle"),$.t("Supercycle"),$.t("Cycle"),$.t("Primary"),$.t("Intermediate"),$.t("Minor",{context:"wave"}),$.t("Minute"),$.t("Minuette"),$.t("Subminuette"),$.t("Micro"),$.t("Submicro"),$.t("Miniscule")],o.prototype.additionalActions=function(e){var t=new d({text:$.t("Degree")}),i=this;return t.subActions=o.degrees.map(function(t,o){var n=new d({text:t,checkable:!0,checked:i.properties().degree.value()===o});return n.callbacks().subscribe(null,function(){e.setProperty(i.properties().degree,o,"Change Elliott Degree")}),n}),[t]},o.prototype.label=function(e){var t=o.degrees.length-this.properties().degree.value()-1,i=Math.floor(t/3),n=t%3;return{fontIncrease:4*Math.floor(i),bold:!!(i%2),decoration:["","brackets","circle"][n],label:this.labelsGroup()[i][e]}},o.prototype.getStylesPropertyPage=function(){return f.LineToolElliottStylesPropertyPage},o.prototype.getDegrees=function(){return o.degrees},inherit(n,o),n.version=3,n.prototype.pointsCount=function(){return 6},n.prototype.migrateVersion=function(e,t,i){if(1===e){var o=$.extend({},this._timePoint[0]);this._timePoint.unshift(o),this._points.length>0&&(o=$.extend({},this._points[0]),this._points.unshift(o))}},inherit(r,n),r._labelsGroups=[["0","1","2","3","4","5"],["0","i","ii","iii","iv","v"],["0","1","2","3","4","5"],["0","I","II","III","IV","V"],["0","1","2","3","4","5"]],r.prototype.labelsGroup=function(){return r._labelsGroups},inherit(s,n),s._labelsGroups=[["0","A","B","C","D","E"],["0","a","b","c","d","e"],["0","A","B","C","D","E"],["0","a","b","c","d","e"],["0","A","B","C","D","E"]],s.prototype.labelsGroup=function(){return s._labelsGroups},inherit(a,n),a._labelsGroups=[["0","W","X","Y","X","Z"],["0","w","x","y","x","z"],["0","W","X","Y","X","Z"],["0","w","x","y","x","z"],["0","W","X","Y","X","Z"]],a.prototype.labelsGroup=function(){return a._labelsGroups},inherit(l,o),l.version=3,
l.prototype.pointsCount=function(){return 4},l.prototype.migrateVersion=function(e,t,i){if(1===e){var o=$.extend({},this._timePoint[0]);this._timePoint.insert(o,0),this._points.length>0&&(o=$.extend({},this._points[0]),this._points.insert(o,0))}},inherit(c,l),c._labelsGroups=[["0","A","B","C"],["0","a","b","c"],["0","A","B","C"],["0","a","b","c"],["0","A","B","C"]],c.prototype.labelsGroup=function(){return c._labelsGroups},inherit(h,l),h._labelsGroups=[["0","W","X","Y"],["0","w","x","y"],["0","W","X","Y"],["0","w","x","y"],["0","W","X","Y"]],h.prototype.labelsGroup=function(){return h._labelsGroups},t.LineToolElliott=o,t.LineToolElliottImpulse=r,t.LineToolElliottTriangle=s,t.LineToolElliottTripleCombo=a,t.LineToolElliottCorrection=c,t.LineToolElliottDoubleCombo=h},function(e,t,i){"use strict";function o(e,t,i){var o=this._mtpStudyId()+"@mtp-mtpredictor",n=i||d.findStudyMetaInfo(e.studiesMetaData(),o),s=t||a(n,null,null,e.studyVersioning()),c=l.lineToolNameForPointsBasedStudy(o);r.call(this,e,s,c),this._setPaneViews(this.createPaneViews(e)),this._turnaroundCounter=0,this._nextTurnaround(),this._metaInfo=n,this._graphics=new h(n),this._formatter=new u}var n=i(132),r=n.StudyLineDataSource,s=i(34),a=s.prepareStudyProperties,l=s.Study,c=i(1).LineDataSource,h=i(183),u=i(71).VolumeFormatter,d=i(39);inherit(o,r),o.prototype.series=function(){return TradingView.isInherited(this._ownerSource.constructor,TradingView.Series)?this._ownerSource:this._ownerSource.series()},o.prototype.calcIsActualSymbol=function(){return c.prototype.calcIsActualSymbol.call(this)},o.prototype._nextTurnaround=function(){this._turnaround=this._mtpStudyId()+"_"+ ++this._turnaroundCounter},o.prototype.createPaneViews=function(e){return[new l.StudyPaneView_textmarks(this,e),new l.StudyPaneView_polygons(this,e),new l.StudyPaneView_lines(this,e)]},o.prototype.onData=function(e){var t=this;if("data_update"===e.method&&e.params.customId==="pointset_"+this._currentPointsetId)c.prototype.onData.call(this,e),this._points.length===this.pointsCount()&&this._requestStudy();else if("data_update"===e.method&&e.params.customId===this._studyId){if(!this._checkTurnaround(e.params.turnaround))return;l.prototype._makeJSONForNSData.call(this,e).then(function(i){e.params.nonseries.d=i,""!==e.params.nonseries.d&&t._graphics.process(e.params.nonseries),e.params.nonseries.indexes.length>0&&(t._indexes=e.params.nonseries.indexes),t.updateAllViews(),t._model.updateSource(t)})}},o.prototype._requestStudy=function(){var e=this,t=function(t){e.onData(t)},i=this._studyInputs();i&&(this._studyId?(this._nextTurnaround(),this._model.chartApi().modifyStudy(this._studyId,this._turnaround,i,t)):(this._studyId=l.makeNextStudyId(),this._model.chartApi().createStudy(this._studyId,this._turnaround,this._model.mainSeries()._seriesId,this._metaInfo.fullId+"!",i,t)))},t.LineStudyMtp=o},function(e,t,i){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0}),o=i(14),function(e){function t(e,t){
return 0===e?t&&t.neutral?t.neutral:o.color.black70:e>0?t&&t.up?t.up:o.color.success:t&&t.down?t.down:o.color.danger}function i(e,i){return t(i-e)}function n(e,t,i,o,n){function r(e){var t=document.createElement("span");return t.innerHTML=e,t}var s,a,l,c,h,u;if(void 0===i&&(i=0),void 0===o&&(o=""),void 0===n&&(n=""),!i)return $(r(e));if(s=e+"",a=t+"",l=null,s.length===a.length){for(c=0;c<s.length;c++)if(s.charAt(c)!==a.charAt(c)){l=c;break}}else l=0;return null===l?$(r(s)):(h=r(s.substr(0,l)),u=document.createElement("span"),u.className=i<0?o:n,u.appendChild(r(s.substr(l))),$(h).add(u))}e.formatSign=t,e.formatDiff=i,e.domDifference=n}(t.PriceColorer||(t.PriceColorer={}))},function(e,t){},function(e,t){},function(e,t,i){"use strict";(function(o){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r,s,a,l,c,h;Object.defineProperty(t,"__esModule",{value:!0}),r=function(){function e(e,t){var i,o;for(i=0;i<t.length;i++)o=t[i],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),s=i(30),i(168),a=i(0).getLogger("Ui.TvControlCheckbox"),l={labelWrapper:'{{#hasLabel}}<label>{{#labelLeft}}<span class="tv-control-checkbox__label {{#labelAddClass}}{{labelAddClass}}{{/labelAddClass}}">{{labelLeft}}</span>{{/labelLeft}}{{> inputWrapper }}{{#labelRight}}<span class="tv-control-checkbox__label {{#labelAddClass}}{{labelAddClass}}{{/labelAddClass}}">{{labelRight}}</span>{{/labelRight}}</label>{{/hasLabel}}{{^hasLabel}}{{> inputWrapper }}{{/hasLabel}}',inputWrapper:'<{{ tag }} class="{{ customClass }}{{#disabled}} i-disabled{{/disabled}}">{{^hasCheckbox}}{{> checkbox }}{{/hasCheckbox}}{{> box }}{{> ripple }}</{{ tag }}>',checkbox:'<input{{#id}} id="{{ id }}"{{/id}} class="{{> checkboxClass }}" type="checkbox"{{#name}} name="{{ name }}"{{/name}}{{#checked}} checked{{/checked}}{{#disabled}} disabled{{/disabled}}>',checkboxClass:"{{ customClass }}__input",box:'<span class="{{ customClass }}__box {{#boxAddClass}}{{boxAddClass}}{{/boxAddClass}}">'+i(72)+"</span>",ripple:'<span class="{{ customClass }}__ripple js-ripple"></span>'},c="i-inited",h=function(){function e(t){var i,o=t.customClass,r=void 0===o?"tv-control-checkbox":o,s=t.$checkbox,l=t.tag,h=t.id,u=t.name,d=t.checked,p=t.disabled,f=t.labelLeft,_=t.labelRight,m=t.labelAddClass,g=t.boxAddClass;if(n(this,e),this.$el=null,void 0===l&&(l=f||_?"span":"label"),i=s instanceof $&&!!s.length){if(!s.is("input[type=checkbox]"))return void a.logError("`$checkbox` need to be input[type=checkbox]");if(s.hasClass(c))return;this._setInputId(s,h),this._setInputClass(s,r),this._setInputName(s,u),this._setInputChecked(s,d),this._setInputDisabled(s,p),d=!!s.prop("checked"),p=!!s.attr("disabled")}this.$el=this.render({$checkbox:s,hasCheckbox:i,customClass:r,tag:l,id:h,name:u,checked:d,disabled:p,labelLeft:f,labelRight:_,hasLabel:f||_,labelAddClass:m,boxAddClass:g}),this.$checkbox=i?s:this.$el.find("input[type=checkbox]")}return r(e,[{
key:"_setInputId",value:function(e,t){void 0!==t&&e.attr("id",t)}},{key:"_setInputClass",value:function(e,t){var i=o.render(l.checkboxClass,{customClass:t});e.addClass(i)}},{key:"_setInputName",value:function(e,t){void 0!==t&&e.attr("name",t)}},{key:"_setInputChecked",value:function(e,t){void 0!==t&&e.prop("checked",!!t)}},{key:"_setInputDisabled",value:function(e,t){void 0!==t&&(t?e.setAttribute("disabled","disabled"):e.removeAttr("disabled"))}},{key:"render",value:function(e){var t,i=e.$checkbox,n=$(o.render(l.labelWrapper,e,l));return e.hasCheckbox&&(n.insertBefore(i),t=n.find("."+e.customClass).andSelf().filter("."+e.customClass).eq(0),t.prepend(i.detach()),i.addClass(c)),n}},{key:"checked",set:function(e){this._setInputChecked(this.$checkbox,!!e)},get:function(){return!!this.$checkbox.prop("checked")}}]),e}(),$.fn.tvControlCheckbox=(0,s.createTvBlockWithInstance)("tv-control-checkbox",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new h(TradingView.mergeObj(t,{$checkbox:e}))}),t.default=h,e.exports=t.default}).call(t,i(21))},function(e,t,i){"use strict";function o(e){return r(s(e),n(e))}function n(e){var t,i={shortName:e.shortName,exchange:e.exchange,proName:e.proName,type:e.type};return e.proName&&e.proName.includes(":")&&(t=e.proName.split(":"),i.exchange=t[0],i.shortName=t[1]),i}function r(e,t){return e.replace("{tvexchange}",t.exchange||"").replace("{tvsymbol}",t.shortName||"").replace("{tvprosymbol}",t.proName||"")}function s(e){var t;return e.type&&["spread","expression"].includes(e.type)?e.proName?"/symbols/spread/{tvprosymbol}/":"/":void 0===e.shortName&&void 0===e.proName?(console.warn("Params missed"),"/"):(t=e.type&&["forex","bitcoin"].includes(e.type),t?"/symbols/{tvsymbol}/":e.exchange||e.proName?"/symbols/{tvexchange}-{tvsymbol}/":"/symbols/{tvsymbol}/")}function a(e,t){var i,o=e;return/{tvsymbol}|{tvexchange}|{tvprosymbol}/.test(e)||(i="tvprosymbol",void 0===t.proName&&(i="tvsymbol"),o=e+"?tvwidgetsymbol={"+i+"}"),r(o,n(t))}function l(e,t,i){var o=window.locale_domains?h.determineBaseUrl(window.locale_domains,i):window.location.origin,a=r(s(e),n(e)),l=o+a;return t?h.addUtmToUrl(l,t):l}function c(e,t){var i=window.locale_domains?h.determineBaseUrl(window.locale_domains):window.location.origin,o=r("/chart/?symbol={tvprosymbol}",n(e)),s=i+o;return t?h.addUtmToUrl(s,t):s}Object.defineProperty(t,"__esModule",{value:!0});var h=i(175);t.getSymbolPagePath=o,t.makeSymbolInfoWithSymbolInfoPriority=n,t.renderTemplate=r,t.makeSymbolPagePathTemplate=s,t.makeTemplateSymbolUrl=a,t.makeSymbolPageUrl=l,t.makeSymbolChartUrl=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){void 0===t&&(t=!0),this._customFlags={},this._text=e,this._executeOnPush=t}return e.prototype.text=function(){return this._text},e.prototype.executeOnPush=function(){return this._executeOnPush},e.prototype.customFlag=function(e){return this._customFlags[e]},e.prototype.setCustomFlag=function(e,t){this._customFlags[e]=t},e}();t.UndoCommand=o
},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OFFERS={trial:"trial",early_access:"early_access",upsale:"upsale",black_friday:"black_friday",cyber_monday:"cyber_monday",custom_discount:"custom_discount"}},function(e,t){},,function(e,t,i){"use strict";function o(e,t,i){function o(e,t,i,o,n,r){var s=0;return e<i?s|=1:e>n&&(s|=2),t<o?s|=4:t>r&&(s|=8),s}for(var n,r,s,a=e[0].x,l=e[0].y,c=e[1].x,h=e[1].y,u=t.x,d=t.y,p=i.x,f=i.y,_=o(a,l,u,d,p,f),g=o(c,h,u,d,p,f),v=!1,y=0;;){if(y>1e3)throw Error("Cohen - Sutherland algorithm: infinity loop");if(y++,!(_|g)){v=!0;break}if(_&g)break;n=_||g,r=void 0,s=void 0,8&n?(r=a+(c-a)*(f-l)/(h-l),s=f):4&n?(r=a+(c-a)*(d-l)/(h-l),s=d):2&n?(s=l+(h-l)*(p-a)/(c-a),r=p):(s=l+(h-l)*(u-a)/(c-a),r=u),n===_?(a=r,l=s,_=o(a,l,u,d,p,f)):(c=r,h=s,g=o(c,h,u,d,p,f))}return v?m.equalPoints(m.point(a,l),m.point(c,h))?m.point(a,l):m.lineSegment(m.point(a,l),m.point(c,h)):null}function n(e,t){var i,o,n=e.A,r=t.A,s=e.B,a=t.B,l=e.C,c=t.C,h=n*a-r*s;return Math.abs(h)<1e-6?null:(i=(s*c-a*l)/h,o=(r*l-n*c)/h,new m.Point(i,o))}function r(e,t,i,o){var n,r=t.subtract(e),s=o.subtract(i),a=r.x*s.y-r.y*s.x;return Math.abs(a)<1e-6?null:(n=e.subtract(i),(n.y*s.x-n.x*s.y)/a)}function s(e,t,i,o){var n,s,a,l=r(e,t,i,o);return null===l?null:(n=t.subtract(e),s=n.scaled(l).add(e),a=g.distanceToSegment(i,o,s),Math.abs(a.distance)<1e-6?l:null)}function a(e,t){return-(e.C+e.B*t)/e.A}function l(e,t){return-(e.C+e.A*t)/e.B}function c(e,t){var i,o,n;for(i=0,o=e;i<o.length;i++)if(n=o[i],m.equalPoints(n,t))return!1;return e.push(t),!0}function h(e,t,i){var o,n,r,s,h,u=t.x,d=t.y,p=i.x,f=i.y;if(0===e.A)return o=-e.C/e.B,d<=o&&o<=f?m.lineSegment(m.point(u,o),m.point(p,o)):null;if(0===e.B)return n=-e.C/e.A,u<=n&&n<=p?m.lineSegment(m.point(n,d),m.point(n,f)):null;switch(r=[],s=function(t){var i=l(e,t);d<=i&&i<=f&&c(r,new m.Point(t,i))},h=function(t){var i=a(e,t);u<=i&&i<=p&&c(r,new m.Point(i,t))},s(u),h(d),s(p),h(f),r.length){case 0:return null;case 1:return r[0];case 2:return m.equalPoints(r[0],r[1])?r[0]:m.lineSegment(r[0],r[1])}return _.assert(!1,"We should have at most two intersection points"),null}function u(e,t,i,o){var n,r=s(e,t,i,new m.Point(o.x,i.y)),a=s(e,t,new m.Point(o.x,i.y),o),l=s(e,t,o,new m.Point(i.x,o.y)),c=s(e,t,new m.Point(i.x,o.y),i),h=[];return null!==r&&r>=0&&h.push(r),null!==a&&a>=0&&h.push(a),null!==l&&l>=0&&h.push(l),null!==c&&c>=0&&h.push(c),0===h.length?null:(h.sort(function(e,t){return e-t}),n=v.pointInRectangle(e,i,o)?h[0]:h[h.length-1],e.addScaled(t.subtract(e),n))}function d(e,t){return!(e.length>0&&m.equalPoints(e[e.length-1],t))&&(e.push(t),!0)}function p(e,t){var i,o,r,s,a,l=[];for(i=0;i<e.length;++i)o=e[i],r=e[(i+1)%e.length],s=m.lineThroughPoints(o,r),v.pointInHalfplane(o,t)?(d(l,o),v.pointInHalfplane(r,t)||null!==(a=n(s,t.edge))&&d(l,a)):v.pointInHalfplane(r,t)&&null!==(a=n(s,t.edge))&&d(l,a);return l.length>=3?l:null}function f(e,t){var i,o,n,r,s,a=e;for(i=0;i<t.length&&null!==a;++i)o=t[i],n=t[(i+1)%t.length],r=t[(i+2)%t.length],s=m.lineThroughPoints(o,n),
a=p(a,m.halfplaneThroughPoint(s,r));return a}var _,m,g,v;Object.defineProperty(t,"__esModule",{value:!0}),_=i(9),m=i(8),g=i(51),v=i(70),t.intersectLineSegmentAndRectangle=o,t.intersectLines=n,t.intersectLineSegments=s,t.intersectLineAndRectangle=h,t.intersectRayAndRectangle=u,t.intersectPolygonAndHalfplane=p,t.intersectPolygons=f},,function(e,t,i){(function(e){var t={};t.LINESTYLE_SOLID=0,t.LINESTYLE_DOTTED=1,t.LINESTYLE_DASHED=2,t.LINESTYLE_LARGE_DASHED=3,t.LINESTYLE_SPARSE_DOTTED=4,t.TEXTPOS_TOPLEFT=0,t.TEXTPOS_TOPCENTER=1,t.TEXTPOS_TOPRIGHT=2,t.TEXTPOS_MIDDLELEFT=3,t.TEXTPOS_MIDDLECENTER=4,t.TEXTPOS_MIDDLERIGHT=5,t.TEXTPOS_BOTTOMLEFT=6,t.TEXTPOS_BOTTOMCENTER=7,t.TEXTPOS_BOTTOMRIGHT=8,t.SIZE_AUTO="auto",t.SIZE_TINY="tiny",t.SIZE_SMALL="small",t.SIZE_NORMAL="normal",t.SIZE_LARGE="large",t.SIZE_HUGE="huge",t.MARKLOC_ABOVEBAR="AboveBar",t.MARKLOC_BELOWBAR="BelowBar",t.MARKLOC_TOP="Top",t.MARKLOC_BOTTOM="Bottom",t.MARKLOC_RIGHT="Right",t.MARKLOC_LEFT="Left",t.MARKLOC_ABSOLUTE="Absolute",t.MARKLOC_ABSOLUTEUP="AbsoluteUp",t.MARKLOC_ABSOLUTEDOWN="AbsoluteDown",t.HHISTLOC_RELATIVE="relative",t.HHISTLOC_ABSOLUTE="absolute",t.HHISTDIR_LEFTTORIGHT="left_to_right",t.HHISTDIR_RIGHTTOLEFT="right_to_left",void 0!==e&&e&&e.exports&&(e.exports=t)}).call(t,i(15)(e))},function(e,t,i){"use strict";(function(e){function o(e,t){return e?Object.keys(e).sort(function(t,i){return e[t][0]>e[i][0]?1:e[t][0]<e[i][0]?-1:0}).map(function(i){return{value:i,caption:e[i][0]+" (+"+e[i][1]+")",selected:t?t===i:!0===e[i][2]}}):[]}function n(e,t){!e.ctrlKey&&!e.metaKey&&e.charCode&&e.which&&e.which>=32&&!t.test(String.fromCharCode(e.charCode))&&e.preventDefault()}function r(e,t){return"+"+t+e.trim().replace(/\D+/g,"")}function s(t){var s,a,c,h,u,d,p,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},m=arguments[2],S=f.phone||TVLocalStorage.getItem("_tempPhoneNumber");S&&(~S.indexOf("undefined")||~S.indexOf("+"))&&(S=null,TVLocalStorage.removeItem("_tempPhoneNumber")),s=m.topMessage||(m.fromForm?$.t("Please verify your phone number to complete the signup process."):$.t("We noticed suspicious activity. Please verify the account with your phone number to keep your data safe.")),t.$el.find(".js-top-message").html(s),a=t.$el.find(".js-inputs-wrap"),a.addClass("i-align_left").html(e.render(_.inputs_phone,{phone:S,options:o(f.options,y),region_code:"+"+(b||1)})),v=f.options,c=a.find(".js-region-code"),h=a.find(".js-phone-input"),h.tvControlError("init"),h.on("keypress",function(e){return n(e,/[0-9\s()\-]/)}).on("input",function(){return h.tvControlError("remove",{id:"phone-common"}).tvControlError("render")}).focus(),setTimeout(function(){return h.css("paddingLeft",c.outerWidth())},0),u=a.find(".js-country-code-select"),u.on("change",function(){var e=u.val(),t=f.options[e][1];e===y&&t===b||(y=e,b=t,TVLocalStorage.setItem("_tempPhoneCountryCode",y),TVLocalStorage.setItem("_tempPhoneRegionCode",b),c.text("+"+(b||1)),h.css("paddingLeft",c.outerWidth()))}).trigger("change").tvControlSelect({
addDropdownClass:"tv-phone-dialog__country-code-select-dropdown"}),d=t.$el.find(".js-next-button"),d.tvButtonLoader("stop"),p=function e(){new Promise(function(e,t){var i=h.val().trim();return i?~i.indexOf("+")?(h.tvControlError("add",{id:"phone-common",message:$.t("Please type in your phone number without region code")}).tvControlError("render").focus(),void t()):(d.tvButtonLoader("start"),void e({type:"POST",url:"/accounts/change-phone/",data:{phone:r(i,b),phone_country_code:y}})):(h.tvControlError("add",{id:"phone-common",message:$.t("Please type in your phone number")}).tvControlError("render").focus(),void t())}).then($.ajax).then(function(e){var t,i;if(!g)return t=e.errors&&e.errors.phone_country_code&&e.errors.phone_country_code[0],i=e.errors&&e.errors.phone&&e.errors.phone[0],t||i?(h.tvControlError("add",{id:"phone-common",message:t||i}).tvControlError("render").focus(),Promise.reject()):e.phone?(TVLocalStorage.setItem("_tempPhoneNumber",e.phone.replace(RegExp("^\\+"+b+"\\s*"),"")),{type:"POST",url:"/accounts/phone-verify-send/"}):Promise.reject($.t("Unknown error occurred. Please contact support"))}).then($.ajax).then(function(e){if(!g){if(e&&e.error)return h.tvControlError("add",{id:"phone-common",message:e.error}).tvControlError("render").focus(),Promise.reject();if(!e)return Promise.reject($.t("Unknown error occurred. Please contact support"));t.$el.find(".js-messages-wrap").html(m.messages_sms||_.messages_sms),a.html(_.inputs_sms),d.tvButtonLoader("stop"),d.tvButtonLoader("contentHtml",$.t("Verify")),l(t,e.sid,e.exp,m),i.e(8).then(function(e){(0,i(901).bugDialogCreationHandler)("Other")}.bind(null,i)).catch(i.oe)}}).catch(function(i){d.tvButtonLoader("stop"),i&&t.error(i),t.once("action:next",e)})},t.once("action:next",p)}function a(e,t,i){var o,n=!1,r=function(){n||(e.text(t+" "+$.t("second",{plural:"seconds",count:t})),--t<0&&(clearInterval(o),i()))};return e.text(t+" "+$.t("second",{plural:"seconds",count:t})),o=setInterval(r,1e3),{pause:function(){n=!0},resume:function(){n=!1},stop:function(){return clearInterval(o)}}}function l(e,t,i,o){var r,l,h,d=TVLocalStorage.getItem("_tempPhoneNumber");if(!d)return void e.error($.t("Unknown error occurred. Please contact support"));user.phone_verify_info={sid:t,exp:i+Date.now()/1e3|0},e.$el.find(".js-code-sent-message").html($.t("Check your phone! Weve texted a code to __phoneNumber__. Once you receive the code, enter it below to confirm your phone number.",{phoneNumber:"+"+b+" "+d})),r=e.$el.find(".js-code-input"),r.tvControlError("init"),r.on("keypress",function(e){return n(e,/\w/)}).on("input",function(){return r.tvControlError("remove",{id:"code-common"}).tvControlError("render")}).focus(),l=e.$el.find(".js-next-button"),l.tvButtonLoader("stop"),S=a(e.$el.find(".js-count"),i,function(){delete user.phone_verify_info,l.tvButtonLoader("contentHtml",$.t("Next")),e.off("action:next"),e.$el.find(".js-messages-wrap").html(o.messages_phone||_.messages_phone),e.trigger("verification:codeExpired"),s(e,{options:v},o)}),h=function i(){new Promise(function(e,i){
var o=r.val().trim();if(!o)return r.tvControlError("add",{id:"code-common",message:$.t("Please type in received code")}).tvControlError("render").focus(),void i();l.tvButtonLoader("start"),S.pause(),e({type:"POST",url:"/accounts/phone-verify-check/",data:{sid:t,code:o}})}).then($.ajax).then(function(t){if(!g){if(l.tvButtonLoader("stop"),t&&t.error)return r.tvControlError("add",{id:"code-common",message:t.error}).tvControlError("render").focus(),Promise.reject();if(!t||!t.success)return Promise.reject($.t("Unknown error occurred. Please contact support"));S.stop(),delete user.phone_verify_info,user.has_phone=!0,user.phone_verified=!0,c(e,("+"+b+" "+d).replace(/[^\d+]+/g,"")),u(e,o.successful_message)}}).catch(function(t){S.resume(),l.tvButtonLoader("stop"),t&&e.error(t),e.once("action:next",i)})},e.once("action:next",h)}function c(e,t){g||(TVLocalStorage.removeItem("_tempPhoneNumber"),TVLocalStorage.removeItem("_tempPhoneCountryCode"),TVLocalStorage.removeItem("_tempPhoneRegionCode"),e.trigger("verification:success",[t]))}function h(e){g=!0,e.trigger("verification:cancel"),e.destroy()}function u(e,t){e.$el.find(".js-messages-wrap").html("<p class='tv-phone-dialog__no-margin-bottom'>"+(t||$.t("Verification successful! Now you have access to social features, such as chatting, publishing ideas and following other users."))+"</p>"),e.$el.find(".js-inputs-wrap").addClass("js-hidden"),e.$el.find(".js-cancel-button").addClass("js-hidden"),e.$el.find(".js-next-button").tvButtonLoader("contentHtml",$.t("Close",{context:"input"})),e.once("action:next",function(){return e.destroy()})}function d(){var t,i,o,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g=!1,t=Date.now()/1e3|0,i=user.phone_verify_info&&t<user.phone_verify_info.exp,o=new f.TVModal(p({},m,{content:e.render(_.base,{title:n.title||$.t("Verify your phone number")},{messages:i?n.messages_sms||_.messages_sms:n.messages_phone||_.messages_phone}),ajax:i?{}:{url:"/accounts/phone-options/",success:function(e,t){s(e,t,n)}},actions:[{name:"next",type:"primary",text:i?$.t("Verify"):$.t("Next"),key:13,addClass:"js-next-button"},{name:"cancel",type:"link",text:$.t("No thanks"),addClass:"js-cancel-button tv-button--no-padding i-float_left"}]},n)),i&&(o.$el.find(".js-inputs-wrap").html(_.inputs_sms),l(o,user.phone_verify_info.sid,user.phone_verify_info.exp-t,n)),o.on("action:cancel",h),o}var p,f,_,m,g,v,y,b,S;Object.defineProperty(t,"__esModule",{value:!0}),p=Object.assign||function(e){var t,i,o;for(t=1;t<arguments.length;t++){i=arguments[t];for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},t.phoneDialog=d,i(292),i(206),i(125),i(204),f=i(38),_={
base:'\n\t\t<div class="tv-dialog__header tv-dialog__header--adaptive">\n\t\t\t<div class="tv-dialog__header-logo">'+i(293)+'</div>\n\t\t\t<div class="tv-dialog__header-title"><h2>{{title}}</h2></div>\n\t\t</div>\n\t\t<div class="tv-dialog__section--content">\n\t\t\t<div class="tv-phone-dialog__messages-wrap js-messages-wrap">{{> messages}}</div>\n\t\t\t<div class="tv-phone-dialog__inputs-wrap js-inputs-wrap"></div>\n\t\t</div>',messages_phone:'<p class="js-top-message"></p>\n\t\t<p>'+$.t("We use phone verification to limit fake and spam accounts, and to provide a better experience for the entire community.")+"</p>\n\t\t<p>"+$.t("Choose your country code and enter your phone number below. Well send you a text message with a confirmation code.")+"</p>",messages_sms:'<p class="js-code-sent-message"></p>\n\t\t<p>'+$.t("If you have any problems with receiving the verification code, please {0}send us a report{1}.").format('<a class="_tv-dialog__link js-send-report-link" href="#">',"</a>")+"</p>\n\t\t<p>"+$.t("If you don't receive a code in {0}, you'll be able to&nbsp;send&nbsp;a&nbsp;new&nbsp;one.").format('<strong class="js-count"></strong>')+"</p>",inputs_phone:'<select name="phone_country_code" id="phone_country_code" class="tv-control-select tv-phone-dialog__input tv-phone-dialog__input--left tv-phone-dialog__country-code-select js-country-code-select">{{#options}}\n\t\t\t<option value="{{value}}"{{#selected}} selected{{/selected}}>{{caption}}</option>\n\t\t{{/options}}</select>\n\t\t<div class="tv-control-input-iconed tv-phone-dialog__input tv-phone-dialog__input--right">\n\t\t\t<input type="text" value="{{phone}}" class="tv-control-input-iconed__input tv-control-input-iconed__input--icon-pos_left tv-phone-dialog__phone-input js-phone-input">\n\t\t\t<div class="tv-control-input-iconed__icon tv-control-input-iconed__icon-position_left tv-phone-dialog__region-code-input js-region-code">{{region_code}}</div>\n\t\t</div>\n\t',inputs_sms:'\n\t\t<input type="text" name="code" class="tv-control-input tv-phone-dialog__input tv-phone-dialog__input--center js-code-input" placeholder="'+$.t("Verification code")+'">\n\t'},m={width:510,destroyOnClose:!0,closeOnOutsideClick:!1,closeButton:!1,closeOnEsc:!1,contentWrapTemplate:'<div class="tv-dialog__section tv-dialog__section--no-border">\n\t\t\t<div class="tv-text"></div>\n\t\t</div>',actionsWrapTemplate:'<div class="tv-dialog__section tv-dialog__section--actions-adaptive tv-dialog__section--actions i-align_right tv-dialog__section--no-border">'},g=!1,v=null,y=TVLocalStorage.getItem("_tempPhoneCountryCode"),b=+TVLocalStorage.getItem("_tempPhoneRegionCode")||null,S=null}).call(t,i(21))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.breakpoints={desktop:1/0,desktopHd:1919,phone:767,"phone-vertical":479,tablet:1019}},function(e,t,i){"use strict";function o(e,t){var i=t||window.locale||"en",o=e[i]?e[i]:e.en;return o?document.location.protocol+"//"+o:""}function n(e,t){var i,o,n,s,a,l,c,h
;return/([a-zA-Z0-9.\-]*tradingview.com)|localhost/.test(e)?(i=r.buildUtmQueryString(t),o=e.indexOf("?"),n=e.indexOf("#"),s=-1!==n,a=-1!==o&&(!s||o<n),a?(l=e.slice(0,o),c=s?e.slice(o+1,n):e.slice(o+1),h=s?e.slice(n):"",l+"?"+c+"&"+i+h):s?(l=e.slice(0,n),h=e.slice(n),l+"?"+i+h):""===i?e:e+"?"+i):e}Object.defineProperty(t,"__esModule",{value:!0});var r=i(60);t.determineBaseUrl=o,t.addUtmToUrl=n},function(e,t,i){"use strict";(function(e,t){function o(t,i){this.options=$.extend({throttleTimeout:125},i),this._connected=!1,this._symbol_data={},this._subscriptions={},this._delayed_subscriptions=[],this.fieldsSent=new $.Deferred,this.onConnect=new e,this.onDisconnect=new e,this._quoteApi=new n(ChartApiInstance),this._type=t||"full",this.fieldsSent=new $.Deferred,this._delayUpdateFastSymbols=s(this._updateFastSymbols,250),this._throttledSymbolData={},this._formatterValuesCache={},this._waitingForFormatters={},this._snapshotValuesCache={},this._waitingForSnapshot={},this.connect()}var n,r=i(16).PriceFormatter,s=i(85),a=i(149),l=i(120),c=i(17);n=i(190),o.prototype.destroy=function(){this._quoteApi.destroy(),this._quoteApi=null,this._connected=!1,this.onDisconnect.fire()},o.prototype.typeFields={},o.prototype.typeFields.simple=["ch","chp","current_session","description","local_description","language","exchange","fractional","is_tradable","lp","minmov","minmove2","original_name","pricescale","pro_name","short_name","type","update_mode","volume"],o.prototype.typeFields.simpleDetailed=[].concat(o.prototype.typeFields.simple,["ask","bid","fundamentals","high_price","is_tradable","low_price","open_price","prev_close_price","rch","rchp","rtc","status","basic_eps_net_income","beta_1_year","earnings_per_share_basic_ttm","industry","market_cap_basic","price_earnings_ttm","sector","volume","dividends_yield"]),o.prototype.typeFields.full=[],o.prototype.connect=function(e){this._quoteApi.connect(this.quoteHandler.bind(this))},o.prototype.quoteHandler=function(e){var t=e.method,i=e.params;switch(t){case"connected":this._connected||(this._connected=!0,this.onConnected());break;case"quote_list_fields":break;case"quote_symbol_data":this._connected&&this.onSymbolData(i[0]);break;case"disconnected":this._connected&&(this._connected=!1,this.onDisconnect.fire())}},o.prototype.onConnected=function(){this.setFields();var e=Object.keys(this._symbol_data);e.length&&this._quoteApi.quoteAddSymbols(e,{forcePermission:!0}),this._delayed_subscriptions.forEach(function(e){this.subscribe.apply(this,e)},this),this._delayed_subscriptions=[],this.onConnect.fire()},o.prototype.setFields=function(){var e=o.prototype.typeFields[this._type];e&&e.length&&this._quoteApi.quoteSetFields(e),this.fieldsSent.resolve()},o.prototype.onSymbolData=function(e){var t=e.symbolname,i=this._throttledSymbolData[t];i||(i=this._throttledSymbolData[t]={fnDispatch:a(this.dipatchSymbolData.bind(this),this.options.throttleTimeout)}),i.cache?$.extend(!0,i.cache,e):i.cache=e,i.fnDispatch(t)},o.prototype._parseUpdateMode=function(e){var t=e.update_mode
;t&&(t=t.match(/(delayed_streaming){1}(?:_([\d]+))?/))&&t[1]&&(t[2]&&(e.update_mode_seconds=+t[2]),e.update_mode=t[1])},o.prototype.dipatchSymbolData=function(e){var t,i,o=this._symbol_data[e],n=this._throttledSymbolData[e].cache;if(delete this._throttledSymbolData[e].cache,this._symbol_data[e]){$.extend(!0,o,n),o.values&&this._parseUpdateMode(o.values);for(t in this._subscriptions)i=this._subscriptions[t],i[e]&&i[e].forEach(function(e){e(o,n)})}},o.prototype.subscribe=function(e,t,i){var o,n;if(!this._connected)return void this._delayed_subscriptions.push(arguments);this._subscriptions[e]=this._subscriptions[e]||{},o=this._subscriptions[e],t=[].concat(t),n=[],t.forEach(function(e){this._symbol_data[e]?o&&o[e]||this._symbol_data[e].subscribers_count++:(this._symbol_data[e]={subscribers_count:1},n.push(e)),o[e]=o[e]||[],o[e].push(i),o[e].fast=!0,this._symbol_data[e]&&this._symbol_data[e].values&&i(this._symbol_data[e],this._symbol_data[e])},this),n.length&&(this._quoteApi.quoteAddSymbols(n,{forcePermission:!0}),this._delayUpdateFastSymbols())},o.prototype.unsubscribe=function(e,t,i){var o,n=this._subscriptions[e];n&&(n[t]&&i?(o=n[t].indexOf(i),~o&&n[t].splice(o,1),n[t].length||delete n[t]):delete n[t]),n&&0===Object.keys(n).length&&delete this._subscriptions[e],this._symbol_data.hasOwnProperty(t)&&(n&&!n[t]&&this._symbol_data[t].subscribers_count--,this._symbol_data[t].subscribers_count||(delete this._symbol_data[t],this._quoteApi.quoteRemoveSymbols([t]),this._delayUpdateFastSymbols()))},o.prototype.setFastSymbols=function(e,t){var i,o;if(this._subscriptions[e]){i=this._subscriptions[e];for(o in i)i[o].fast=-1!==t.indexOf(o)}this._delayUpdateFastSymbols()},o.prototype._updateFastSymbols=function(){if(this._connected){var e=this._fastSymbols();0===e.length?this._quoteApi.quoteHibernateAll():this._quoteApi.quoteFastSymbols(e)}},o.prototype._delayUpdateFastSymbols=o.prototype._updateFastSymbols,o.prototype._fastSymbols=function(){var e,t,i,o=[];for(e in this._subscriptions){t=this._subscriptions[e];for(i in t)t[i].fast&&o.push(i)}return o=l(o)},o.prototype.formatter=function(e){function t(e){return new r(e.pricescale,e.minmov,e.fractional,e.minmove2)}function i(e){return e&&null!=e.pricescale&&null!=e.minmov}var o,n=this;return this._waitingForFormatters[e]?this._waitingForFormatters[e]:(o=new Promise(function(o,r){if(n._formatterValuesCache[e])o(t(n._formatterValuesCache[e]));else{var s=c.guid();n.subscribe(s,[e],function(a){a.error&&(n._waitingForFormatters[e]=null,r(a.error)),i(a.values)&&(n._waitingForFormatters[e]=null,n._formatterValuesCache[e]=a.values,o(t(a.values)),n.unsubscribe(s,e))})}}),this._waitingForFormatters[e]=o,o)},o.prototype.snapshot=function(e){var t,i=this;return this._waitingForSnapshot[e]?this._waitingForSnapshot[e]:(t=new Promise(function(t,o){if(i._snapshotValuesCache[e])t(i._snapshotValuesCache[e]);else{var n=c.guid();i.subscribe(n,[e],function(r){r.error&&(i._waitingForSnapshot[e]=null,o(r.error));var s=r.values;s&&s.minmov&&s.pricescale&&s.description&&(i._waitingForSnapshot[e]=null,
i._snapshotValuesCache[e]=s,t(s),i.unsubscribe(n,e))})}}),this._waitingForSnapshot[e]=t,t)},TradingView.QuoteSessionMultiplexer=o,void 0!==t&&t&&t.exports&&(t.exports=o)}).call(t,i(4),i(15)(e))},function(e,t,i){function o(e,t){this._linesMaxWidth=null,this._hittest=t||new n(n.MOVEPOINT),this._data={},this._fontSize=0,this.setData(e)}var n=i(11);o.prototype.setData=function(e){var t,i,o,n=this._data,r=this.fontStyle();this._data=e,this._fontSize=e.fontsize||e.fontSize||30,t=e.text===n.text,i=e.wordWrapWidth===n.wordWrapWidth,o=r===this.fontStyle(),t&&i&&o?(this._data.lines=n.lines,this._lines=n.lines):(this._linesMaxWidth=null,e.lines=this.wordWrap(e.text,e.wordWrapWidth),this._lines=e.lines)},function(){function e(){var e=document.createElement("canvas");e.width=0,e.height=0,t=e.getContext("2d"),e=null}var t;o.prototype.setPoints=function(e,t){this._data.points=e,this._hittest=t||new n(n.MOVEPOINT)},o.prototype._getLinesMaxWidth=function(){var i,o;if(null!==this._linesMaxWidth)return this._linesMaxWidth;if(t||e(),t.textBaseline="alphabetic",t.font=this.fontStyle(),this._data.wordWrapWidth)return this._data.wordWrapWidth;for(i=0,o=0;o<this._lines.length;o++)i=Math.max(i,t.measureText(this._lines[o]).width);return this._linesMaxWidth=i,i},o.prototype.measure=function(){var e=this._fontSize,t=this._getLinesMaxWidth(),i=e*this._lines.length,o=~~(e/6);return this._data.backgroundHorzInflate&&(t+=2*this._data.backgroundHorzInflate),this._data.backgroundVertInflate&&(i+=2*this._data.backgroundVertInflate),t=Math.ceil(t+2*o),i=Math.ceil(i+2*o),t%2!=0&&t++,this._data.padding&&(i+=this._data.padding),{width:t,height:i,textBgPadding:o}},o.prototype.wordWrap=function(i,o,n){var r,s,a,l,c,h,u,d,p;if(t||e(),o=+o,i+="",r=i.split(/[^\S\r\n]*(?:\r\n|\r|\n|$)/),r[r.length-1]||r.pop(),!isFinite(o)||o<=0)return r;for(t.font=n||this.fontStyle(),s=[],a=0;a<r.length;a++)if(l=r[a],(c=t.measureText(l).width)<=o)s.push(l);else for(h=l.split(/([-\)\]\},.!?:;])|(\s+)/);h.length;){if((u=~~(o/c*(h.length+2)/3))<=0||t.measureText(h.slice(0,3*u-1).join("")).width<=o)for(;t.measureText(h.slice(0,3*(u+1)-1).join("")).width<=o;)u++;else for(;u>0&&t.measureText(h.slice(0,3*--u-1).join("")).width>o;);if(u>0)s.push(h.slice(0,3*u-1).join("")),h.splice(0,3*u);else{if(d=h[0]+(h[1]||""),p=1===p?1:~~(o/t.measureText(d)*d.length),t.measureText(d.substr(0,p)).width<=o)for(;t.measureText(d.substr(0,p+1)).width<=o;)p++;else for(;p>1&&t.measureText(d.substr(0,--p)).width>o;);p<1&&(p=1),s.push(d.substr(0,p)),h[0]=d.substr(p),h[1]=""}if((c=t.measureText(h.join("")).width)<=o){s.push(h.join(""));break}}return s}}(),o.prototype._x=function(){return this._data.points[0].x+this._data.offsetX},o.prototype._y=function(){var e,t=this._fontSize*this._lines.length;switch(this._data.scaleY&&(t*=this._data.scaleY),e=this._data.points[0].y+this._data.offsetY+t,this._data.vertAlign){case"top":break;case"bottom":e-=t;break;case"middle":e-=t/2}return e},o.prototype.fontStyle=function(){
return(this._data.bold?"bold ":"")+(this._data.italic?"italic ":"")+this._fontSize+"px "+this._data.font},o.prototype.draw=function(e){var t,i,o,n,r,s,a,l,c,h,u,d,p,f,_;if(0!==this._data.points.length){switch(t=this._x(),i=this._y(),o=this._fontSize,this._data.scaleY&&(o*=this._data.scaleY),i-=o*(this._lines.length-1),e.textBaseline="alphabetic",e.font=this.fontStyle(),this._data.horzAlign){case"left":e.textAlign="start";break;case"right":e.textAlign="end";break;case"center":e.textAlign="center"}if(e.translate(t+.5,i+.5),t=0,i=0,o=this._fontSize,this._data.scaleX&&this._data.scaleY&&(n=Math.min(this._data.scaleX,this._data.scaleY),e.scale(n,n)),r=this._getLinesMaxWidth(),s=0,this._data.backgroundColor||this._data.borderColor||this._data.highlightBorder&&this._data.wordWrapWidth){switch(a=t,this._data.horzAlign){case"left":break;case"right":a-=r;break;case"center":a-=r/2}l=o*this._lines.length,c=~~(o/6),this._data.backgroundHorzInflate&&(r+=2*this._data.backgroundHorzInflate,a-=this._data.backgroundHorzInflate),this._data.backgroundVertInflate&&(l+=2*this._data.backgroundVertInflate,i+=this._data.backgroundVertInflate),h={x:Math.floor(a-c),y:Math.floor(i-o),w:Math.ceil(r+2*c),h:Math.ceil(l+2*c)},h.w%2!=0&&h.w++,this._data.padding&&(h.h+=this._data.padding,s=this._data.padding),this._data.backgroundVertInflate&&(i+=this._data.backgroundVertInflate),this._data.backgroundRoundRect?(e.roundRect(h.x,h.y,h.w,h.h,this._data.backgroundRoundRect),this._data.backgroundColor&&(e.fillStyle=this._data.backgroundColor,e.fill()),this._data.borderColor&&(u=~~Math.max(o/12,1),e.strokeStyle=this._data.borderColor,e.lineWidth=u,e.stroke())):(this._data.backgroundColor&&(e.fillStyle=this._data.backgroundColor,e.fillRect(h.x,h.y,h.w,h.h)),this._data.borderColor?(u=~~Math.max(o/12,1),e.strokeStyle=this._data.borderColor,e.lineWidth=u,e.strokeRect(h.x-u/2,h.y-u/2,h.w+u,h.h+u)):this._data.highlightBorder&&(e.strokeStyle=this._data.color,e.lineWidth=1,e.beginPath(),f=[3,1],e.dashedLineTo(h.x-.5,p=h.y-.5,d=h.x+h.w+.5,p,f),e.dashedLineTo(d,p,d,p=h.y+h.h+.5,f),e.dashedLineTo(d=h.x-.5,p,h.x+h.w+.5,p,f),e.dashedLineTo(d,h.y-.5,d,p,f),e.stroke()))}for(this._data.backgroundVertInflate&&!this._data.backgroundColor&&(i+=2*this._data.backgroundVertInflate),e.fillStyle=this._data.color,_=0;_<this._lines.length;_++)e.fillText(this._lines[_],t,i),i+=o+s}},o.prototype.hitTest=function(e){var t,i,o,n,r,s;return 0===this._data.points.length?null:(t=this._fontSize,this._data.scaleY&&(t*=this._data.scaleY),i=this._getLinesMaxWidth(),this._data.scaleX&&(i*=this._data.scaleX),o=this._data.points[0].x+this._data.offsetX,n=this._data.points[0].y+this._data.offsetY,"bottom"===this._data.vertAlign&&(n-=this._lines.length*this._fontSize),"middle"===this._data.vertAlign&&(n-=this._lines.length*this._fontSize/2),"right"===this._data.horzAlign?o-=i:"center"===this._data.horzAlign&&(o-=i/2),r=this._data.backgroundColor||this._data.borderColor?~~(t/6):0,s=this._data.borderColor?~~Math.max(t/12,1):0,
e.x>=o-r-s&&e.x<=o+i+r+s&&e.y>=n-s&&e.y<=n+this._lines.length*this._fontSize+2*r+s?this._hittest:null)},t.TextRenderer=o},,function(e,t,i){"use strict";(function(t,o,n){function r(){if(void 0===p)return null;var e=p();return e&&e.connectStatus()===f.CONNECTED?e.activeBroker():null}function s(){var e=r();if(e&&e.metainfo().configFlags.supportSymbolSearch)return e.metainfo().symbolSearchId||e.metainfo().id.toLowerCase()}function a(){var e=r();return e&&e.metainfo().title}var l=i(583),c=i(468),h=i(590),u=i(631),d=i(38).isOpenedModals,p=i(191).tradingService,f=i(549).CONNECTSTATUSES,_=i(457).isIntervalAvailable,m=i(93),g=i(578),v=i(148),y=i(62).unifiedSpinner,b=i(61),S=i(126).regExpEscape,w=i(116),T=i(25).isFeatureEnabled,P=i(129),C=0,x=function(){function e(i){var o,n,r,s;if(!(this instanceof e))throw new TypeError("SymbolSearch is a constructor");if(i=i||{},o=!i.dontUseInputParser&&t.enabled("symbol_search_parser_mixin")&&e.canShowSpreadActions(),this._inputParserMixin=o?new l(this):void 0,this._inputElement=$(i.input).get(0),!this._inputElement)throw new TypeError("options.input must be a DOM element, jQuery object or selector");if(this.$list=$(i.list).eq(0),0===this.$list.size()&&delete this.$list,void 0!==i.callback){if("function"!=typeof i.callback)throw new TypeError("options.callback must be function");this._callback=i.callback}if(void 0!==i.onValueChanged){if("function"!=typeof i.onValueChanged)throw new TypeError("options.onValueChanged must be function");this._onValueChanged=i.onValueChanged}if(void 0!==i.onEmptyApply){if("function"!=typeof i.onEmptyApply)throw new TypeError("options.onEmptyApply must be function");this._onEmptyApply=i.onEmptyApply}if(i.ignoreInterval&&(this._ignoreInterval=!0),e.resetStoredInterval(),i.hidePro&&(this._hidePro=!0),i.allowMultipleSymbols&&(this._allowMultipleSymbols=!0),void 0!==i.onParse){if("function"!=typeof i.onParse)throw new TypeError("options.onParse must be function");this._onParse=i.onParse}for(this._state={},this._resolveViaSymbolSearchId=null,this.acceptEmpty=!!i.acceptEmpty,this._quandlFilter=new M(N),$(this._inputElement).data("symbol-search-instance",this),n=this._boundListener=this._eventListener.bind(this),r=this.boundTimeoutListener=function(e){setTimeout(function(){n(e)},0)},s=0;s<z.length;s++)z[s].immediate?$(this._inputElement).on(z[s].name,n):$(this._inputElement).on(z[s].name,r);this._boundOnKeyDown=this._onKeyDown.bind(this),this._boundOnKeyPress=this._onKeyPress.bind(this),$(this._inputElement).on("keydown",this._boundOnKeyDown).on("keypress",this._boundOnKeyPress),this._eventListener(),i.autoFocus&&e.registerAutoFocus(this)}function r(e,t){var i,o=ChartApiInstance.supportedSymbolsTypes();return s()&&(o=o.filter(function(e){return"quandl"!==e.value&&"economic"!==e.value})),i=TVSettings.getValue("symboledit.filter"),!o.some(function(e){return e.value===i})&&o.length>0&&(i=o[0].value),0!==o.length&&(o.forEach(function(o){var n=o.value,r=$('<a class="type-filter">').attr("href","#"+n).text($.t(o.name));n===i&&r.addClass("active"),r.on("click",function(i){
i.preventDefault(),t.find(".type-filter").removeClass("active"),$(this).addClass("active"),e.typeFilter(n),TVSettings.setValue("symboledit.filter",n)}),r.appendTo(t)}),e.typeFilter(i),!0)}function f(e,i){var o,n,r,s=ChartApiInstance.supportedExchangesList();if(s=g.displayedExchangesFilter(s),s=g.sortExchangesListByFlagIfNeeded(s),o=TVSettings.getValue("symboledit.exchangefilter"),"bovespa"!==TradingView.widgetCustomer)return!s.some(function(e){return e.value===o})&&s.length>0&&(o=s[0].value),0!==s.length&&(n=$('<div id="exchange-filter" class="exchange-filter">').appendTo(i),r=$("<select>").appendTo(n),s.forEach(function(e){var t=e.value,i=e.name||t,n=e.desc||i,s=$("<option>").addClass("filter-item").attr("value",t).text($.t(i)).data("custom-option-text",$.t(n)).appendTo(r),a=h.getSvgCodeByFlagId(c.getFlagIdByName(e.flag));a&&s.data("custom-option-prepend",$(a).attr({class:"flag sbIcon"})),e.value===o&&s.attr("selected",!0)}),r.change(function(){var t=$(this).val()||"";TVSettings.setValue("symboledit.exchangefilter",t),e.setExchangeFilter(t)}),r.selectbox({speed:0,useCustomPrependWithSelector:"after",customPrependSelectorClass:"exchange-with-flag",classHolder:"tv-unstyled-select-container tv-symbol-select",classOptions:t.enabled("symbol_search_three_columns_exchanges")?"sbOptions three-column-filter":"sbOptions"}),e.setExchangeFilter(o),!0)}function x(e){var t,i;return e._quandlFilter.load(),t=new k(R,e._quandlFilter),t.makeQuandlFilter(e,e.$filterContainer),i=f(e,e.$filterContainer),e.selectExchangeFilter(),i}function E(e,t){function i(t){o=!o,setTimeout(function(){c.prop("checked",o)}),e.setTradableFilter(o),TVSettings.setValue("symboledit.tradable",o)}var o,n,r,l,c,h;s()&&(o=TVSettings.getBool("symboledit.tradable",!1),n=o?"checked":"",r=a(),l=$('<span class="tradable-filter apply-common-tooltip" title="'+$.t("Show the markets you can place an order with {brokerName}").replace("{brokerName}",r)+'"><input class="tradable-checkbox" type="checkbox" '+n+'/><span class="tradable-text">'+r+"</span></span>"),c=l.find("input"),h=l.find("span"),c.on("click",i),h.on("click",i),t.append(l),e.setTradableFilter(o))}function L(e){var t,i,o,n,s,a,l,c,h,u,d=$('<div class="symbol-edit-popup">').appendTo(document.body),p=$('<div class="filter">').appendTo(d);return e.$filterContainer=p,r(e,p),x(e,p),E(e,p),t=$('<div class="table-wrapper">').appendTo(d),i=$(e._inputElement),o=i.offset(),n=0,s=Math.max(0,Math.min(o.left+n,$(window).width()-d.outerWidth())),d.css("left",s+"px"),d.css("top",o.top+i.outerHeight()+1),a=p.outerHeight(),l=$(window).scrollTop(),c=i.height(),h=TradingView.isMobile.any()?parseInt(window.screen.height,10):parseInt($(window).height(),10),u=h-(o.top-l)-c/2,t.css("maxHeight",u-c-a+"px"),{popup:d,listWrapper:t}}function I(e){return!e.ctrlKey&&(!e.metaKey&&(!!e.charCode&&(!(!e.which||e.which<=32)&&(!/^(input|textarea)$/i.test(e.target.tagName)&&(!TVDialogs.modalDialog&&!d())))))}function A(e,t,i){this._container=e,this._tickerRegExp=t,this._translationCache=i,this._roots={},this._itemsByTicker={}}function k(e,t){
this.databases=e,this.filter=t,this.request=null,this.start=0,this.renderCount=100}function M(e){this.model=e}var O,D,V,R,B,N,z=[{name:"input",immediate:!0},{name:"sync",immediate:!0},{name:"keypress"},{name:"keydown"},{name:"keyup"},{name:"mousedown"},{name:"mouseup"},{name:"cut"},{name:"paste"}],F=T("symbol_search_server_highlight"),H=[/^e\-m/i],W=/<\/?[^>]+(>|$)/g;return e.registerAutoFocus=function(t){if(t instanceof jQuery&&(t=t.data("symbol-search-instance")),!(t instanceof e))throw new TypeError("arg must be an SymbolSearch instance of jQuery input with bound SymbolSearch object");v.registerListener("symbolEdit",function(e){if(I(e)){e.preventDefault(),this.resetState(),this._skipAutoFocus=!0,this._inputElement.focus();var t=String.fromCharCode(e.charCode);"function"==typeof this._setInputValue?this._setInputValue(t):this._inputElement.value=t,this._eventListener()}}.bind(t))},e.prototype.searchRequestDelay=0,e.setSearchRequestDelay=function(t){e.prototype.searchRequestDelay=t},e.prototype.resetState=function(){this._state={}},e.prototype.typeFilter=function(e){if(!(arguments.length>0))return this._state.typeFilter;e!==this._state.typeFilter&&(null==e?delete this._state.typeFilter:this._state.typeFilter=e+"",delete this._state.keepListFor,this._onSelectionChanged(),this.selectExchangeFilter())},e.prototype.setExchangeFilter=function(e){e!==this._state.exchangeFilter&&(null==e?delete this._state.exchangeFilter:this._state.exchangeFilter=e+"",delete this._state.keepListFor,this._onSelectionChanged())},e.prototype.setTradableFilter=function(e){e!==this._state.tradableFilter&&(this._state.tradableFilter=e,this._onSelectionChanged())},e.prototype.getExchangeFilter=function(){return this._state.typeFilter===w.types.QUANDL?this._quandlFilter.getValue():this._state.exchangeFilter},e.prototype.destroy=function(){$(this._inputElement).off(),$(this._inputElement).removeData("symbol-search-instance")},e.prototype._moveSelection=function(e,t){var i,o,n,r,s,a,l,c,h;this.$list&&(i=this.$list.find("table.symbol-edit-popup"),o=i.find("tr:not(.hidden)"),n=i.find("tr.symbol-edit-popup-active").removeClass("symbol-edit-popup-active"),r=0!==n.length?o.index(n):-1,s=1===e?n.get(0)===o.get(-1)?0:r+e:Math.max(-1,r+e),r!==s&&(a=o.get(s))&&(l=this._getItemByElement(a),c=A.isRoot(l),c?(h=a.getAttribute("data-root"),a.classList.add("symbol-edit-popup-active"),this._scrollHighlightIntoView(),h?(this._state.highlightedItem=null,this._selectedGroupRoot=h):(this._state.highlightedItem=l,this._replaceCurrentSymbol(t))):(delete this._selectedGroupRoot,this._highlightItem(l,!0,t))))},e.prototype._groupToggleCollapsed=function(e,t){this._groupListHandler&&this._groupListHandler.toggleCollapsed(e,t)},e.prototype._onKeyDown=function(e){e.keyCode!==P.DOWN_ARROW&&e.keyCode!==P.UP_ARROW||(this._moveSelection(e.keyCode===P.DOWN_ARROW?1:-1,!0),e.preventDefault()),!this._selectedGroupRoot||e.keyCode!==P.LEFT_ARROW&&e.keyCode!==P.RIGHT_ARROW||(this._groupToggleCollapsed(this._selectedGroupRoot,e.keyCode===P.LEFT_ARROW),e.preventDefault())},
e.prototype._onKeyPress=function(e){if(e.keyCode===P.DOWN_ARROW||e.keyCode===P.UP_ARROW){if(e.charCode)return;if(this._boundOnKeyDown)return $(this._inputElement).off("keydown",this._boundOnKeyDown),delete this._boundOnKeyDown,void e.preventDefault();this._moveSelection(e.keyCode===P.DOWN_ARROW?1:-1),e.preventDefault()}e.keyCode===P.ENTER&&(this._selectedGroupRoot?(this._groupToggleCollapsed(this._selectedGroupRoot,!1),e.preventDefault()):this.acceptTypeIn())},e.prototype._eventListener=function(e,i){var o,n,r,s,a,l=this._inputElement,c=this._getInputValue();t.enabled("uppercase_instrument_names")&&(c=c.toUpperCase()),o=!1,n=!1,this._state.value!==c&&(this._state.hasOwnProperty("value")&&this._onValueChanged&&this._onValueChanged(c),this._state.value=c,o=!0,this._inputParserMixin&&this._inputParserMixin.parse()),this._fixIntervalCase(),r=this._limitInputSelectionValue("selectionStart"),this._state.selectionStart!==r&&(this._state.selectionStart=r,n=!0),s=this._limitInputSelectionValue("selectionEnd"),this._state.selectionEnd!==s&&(this._state.selectionEnd=s,n=!0),this._state.selectionDirection!==l.selectionDirection&&(this._state.selectionDirection=l.selectionDirection,n=!0),(o||n&&this._inputParserMixin)&&(this._onSelectionChanged(void 0,i),a=!1,this._getInputValue()!==this._state.value&&(this._setInputValue(this._state.value),a=!0),(a||this._state.selectionStart!==this._limitInputSelectionValue("selectionStart")||this._state.selectionEnd!==this._limitInputSelectionValue("selectionEnd"))&&l.setSelectionRange&&l.setSelectionRange(this._state.selectionStart,this._state.selectionEnd,this._state.selectionDirection))},e.prototype._fixIntervalCase=function(){if(this._selectionInsideInterval()){var t=e.detachInterval(this._inputElement.value);/[a-z]/.test(t.detached)&&(this._inputElement.value=t.rest+t.detached.toUpperCase())}},e.prototype._selectionInsideInterval=function(t){if(this._ignoreInterval)return!1;var i=e.detachInterval(this._inputElement.value);return!!i&&("string"==typeof t?this._inputElement[t]>i.rest.length:this._inputElement.selectionStart>i.rest.length&&this._inputElement.selectionEnd>i.rest.length)},e.prototype._limitInputSelectionValue=function(t){return this._selectionInsideInterval(t)?e.detachInterval(this._inputElement.value).rest.length:t in this._inputElement?this._inputElement[t]:this._inputElement.value.length},e.prototype._getInputValue=function(){if(this._ignoreInterval)return this._inputElement.value;var t=e.detachStoreInterval(this._inputElement.value);return $(this._inputElement).toggleClass("interval-error",e.intervalError()),t},e.prototype._setInputValue=function(t){this._ignoreInterval?this._inputElement.value=t:this._inputElement.value=e.recallAttachInterval(t)},e.prototype._onSelectionChanged=function(e,t){function i(e,t,i,o,r){n._state.contextTicker=e,n._state.contextExchange=t,n._state.contextType=i,n._state.contextTradable=r,n._state.keepListFor&&n._state.keepListFor===o||(n._getSuggestList(),delete n._state.keepListFor)}var o,n=this;!H.some(function(e){return e.test(n._state.value)
})&&(this._isSpreadInInput()||this._inputParserMixin&&!0!==t)?this._inputParserMixin.onSelectionChanged(i):this.$list&&(this._state._selectedTicker=null,o=this._state.value,this._isSpreadInInput()&&this._state.contextToken&&(o=this._state.contextToken.value),i(o,this.getExchangeFilter(),this._state.typeFilter,o,this._state.tradableFilter))},e.prototype._clearSelectionState=function(){delete this._state.contextTicker,delete this._state.contextExchange,delete this._state.contextType,delete this._state.contextToken,delete this._state.keepListFor},e.prototype._clearSearchTimeout=function(){this._searchTimeout&&(clearTimeout(this._searchTimeout),this._searchTimeout=null)},e.prototype._doGetSuggestList=function(){var e,t,i,o,n,r,a;this._clearSearchTimeout(),e=s(),t=this._state.contextTicker||"",i=this._state.contextExchange||this.getExchangeFilter()||"",o=this._state.typeFilter||"",n=e&&this._state.tradableFilter,e&&p().trackEvent("Symbol Search Tradable checkbox",n?"on":"off"),r=window.language||"",this._showLoading(),a=this,ChartApiInstance.searchSymbols(t,i,o,r,F,!1,e,n,function(e){t!==(a._state.contextTicker||"")||i!==(a._state.contextExchange||a.getExchangeFilter()||"")||o!==(a._state.typeFilter||"")||(o===w.types.QUANDL&&(e=a._processQuandlResponse(e)),a._renderSuggestList(e),a._onResponse(e))})},e.prototype._getSuggestList=function(){this._clearSearchTimeout(),this._searchTimeout=setTimeout(this._doGetSuggestList.bind(this),e.prototype.searchRequestDelay)},e.prototype._showLoading=function(){if(this.$list&&!this._spinner){this._clearSuggestList();var e=$('<div class="symbol-search-loading">').appendTo(this.$list);this._spinner=y("medium").spin(e.get(0))}},e.prototype._groupContracts=function(e){var t,i,o,n,r,s=ChartApiInstance.futuresRegex(),a={},l=[];for(t=0;t<e.length;++t){if(i=e[t],i.prefix||Array.isArray(i.contracts))return e;"futures"===i.type?(o=s.exec(i.symbol),o?(n=o[1],n in a?r=a[n]:(r=l.length,a[n]=r,l.push({type:i.type,symbol:n,exchange:i.exchange,description:i.description,full_name:i.exchange+":"+n,contracts:[]})),l[r].contracts.push(i)):l.push(i)):l.push(i)}return l},e.prototype._renderSuggestList=function(i){var o,n,r,s,a,l,c,h,u,d;if(this.$list){if(i=this._groupContracts(i),o=this,n=this._state,this._clearSuggestList(),r=S(n.contextTicker).trim(),s=RegExp(r.replace(" ","|"),"i"+(r.length>1?"g":"")),delete n.highlightedItem,this._hidePro&&(i=i.filter(function(e){return!e.params||-1===e.params.indexOf("pro")})),0===i.length)return void this.$list.html('<div style="text-align: center; padding: 7px 0; font-style: italic;">'+$.t("No symbols matched your criteria")+"</div>");for(a=document.createElement("table"),a.setAttribute("class","symbol-edit-popup"),l={},c=new e.GroupListHandler(a,s,l),h=null,this._renderedResponse=[],u=0;u<i.length;u++)d=i[u],d=e.migrateItemFormat(d),e.isFXCMCFD(d)||this._hidePro&&Array.isArray(d.params)&&~d.params.indexOf("pro")||(c.append(d),h||d.ticker!==n.contextTicker||d.exchange!==n.contextExchange||(h=d),this._renderedResponse.push(d))
;t.enabled("expand_symbolsearch_items")||c.collapse(),this._groupListHandler=c,h&&this._highlightItem(d),$(a).on("click","tr",function(e){if(!e.isDefaultPrevented()){e.preventDefault();var t=o._getItemByElement(this);t&&t.full_name&&(o._isSpreadInInput()?o._highlightItem(t,!0,!1):o.accept(t.full_name,t.ticker))}}).appendTo(this.$list)}},e.prototype._isSpreadInInput=function(){return this._inputParserMixin&&this._state.parsed.length>1},e.prototype._getItemByElement=function(e){return this._renderedResponse&&this._groupListHandler?this._groupListHandler.getItemByTicker(e.getAttribute("data-item-ticker")):null},e.prototype._getElementByItem=function(e){return this._renderedResponse&&this.$list?this.$list.get(0).querySelector('tr[data-item-ticker="'+(e.ticker||e.full_name)+'"]'):null},e.prototype._highlightItem=function(e,t,i){var o,n,r=this._state;r.highlightedItem&&(o=this._getElementByItem(r.highlightedItem))&&$(o).removeClass("symbol-edit-popup-active"),r.highlightedItem=e,n=this._getElementByItem(r.highlightedItem),n&&($(n).addClass("symbol-edit-popup-active"),this._scrollHighlightIntoView()),t&&this._replaceCurrentSymbol(i)},e.prototype._scrollHighlightIntoView=function(){var e=this.$list.find("tr.symbol-edit-popup-active");e.length&&(e.offset().top<this.$list.offset().top?this.$list.scrollTop(this.$list.scrollTop()-(this.$list.offset().top-e.offset().top)):e.offset().top+e.outerHeight()>this.$list.offset().top+this.$list.outerHeight()&&this.$list.scrollTop(this.$list.scrollTop()+(e.offset().top+e.outerHeight()-(this.$list.offset().top+this.$list.outerHeight()))))},e.prototype._clearSuggestList=function(){this._renderedResponse=null,this._spinner&&(this._spinner.stop(),delete this._spinner),this.$list&&this.$list.empty()},e.prototype._showErrorNotice=function(){this.$list&&(this._clearSuggestList(),this.$list.text("Invalid expression"))},e.prototype._replaceCurrentSymbol=function(e){var t,i,o,n,r=this._state;if(r.highlightedItem){if(t=r.highlightedItem,i="",o=0,this._isSpreadInInput()||this._inputParserMixin&&!0!==e){if(n=this._inputParserMixin.replaceCurrentSymbol(t),!n.ok)return;i=n.newValue,o=n.newCaretPos,r.keepListFor=n.keepListFor}else this._state._selectedTicker=t.ticker||t.symbol,r.keepListFor=this._state._selectedTicker,i=!0===e&&t.full_name&&this._inputParserMixin?t.full_name:t.symbol,i=l.wrapSymbol(i),r.keepListFor=l.wrapSymbol(this._state._selectedTicker),o=i.length;this._setInputValue(F?i.replace(W,""):i),this._inputElement.setSelectionRange?this._inputElement.setSelectionRange(o,o):this._inputElement.select(),this._eventListener(void 0,e)}},e.prototype.splitAndAcceptUserInput=function(){var e,t=this._getInputValue().split(",");for(e=0;e<t.length;e++)this.acceptSymbolIn(t[e])},e.prototype.acceptSymbolIn=function(e){var t,i;this._inputParserMixin?t=this._inputParserMixin.parseSymbol(e):(t=e,i=this._state._selectedTicker||e),this.accept(t,i)},e.prototype.acceptTypeIn=function(){this._allowMultipleSymbols?this.splitAndAcceptUserInput():this.acceptSymbolIn(this._getInputValue())},
e.prototype.accept=function(t,i){var o=this,n=function(){if((i=i||t)||""===i&&o.acceptEmpty){delete o._state.keepListFor;var n=o._ignoreInterval?void 0:e.getInterval(!0);o._inputElement.value=t,o._eventListener(),o._callback&&o._callback(i,n),$(o._inputElement).trigger("accept-symbol",[i])}},r=this._state.contextExchange||this.getExchangeFilter()||"",a=this._state.typeFilter||"",l=s(),c=l&&this._state.tradableFilter,h=window.language||"",u=C++;this._resolveViaSymbolSearchId=u,!i&&-1===t.indexOf(":")&&l&&a!==w.types.QUANDL?(this._resolvingViaSymbolSearch=!0,ChartApiInstance.searchSymbols(t,r,a,h,F,!0,l,c,function(e){var t,r,s;o._resolveViaSymbolSearchId===u&&(e&&e.length>0&&(t=e[0],r=t.prefix||t.exchange,s=t.symbol,r&&s&&(i=r+":"+s)),o._resolveViaSymbolSearchId=null,n())})):n()},e.prototype.bindListWrapper=function(e){if(e=$(e).eq(0),0===e.size())throw new TypeError("element must be a DOM element, jQuery object or selector");this.$list=e,this._clearSelectionState(),this._eventListener()},e.prototype.removeListWrapper=function(){delete this.$list,this._clearSuggestList(),this._clearSelectionState(),this._eventListener()},e.prototype.selectExchangeFilter=function(){this.$filterContainer.find(".exchange-filter").hide(),this._state.typeFilter===w.types.QUANDL?this.$filterContainer.find("#quandl-filter").show():this._state.typeFilter!==w.types.ECONOMIC&&this.$filterContainer.find("#exchange-filter").show()},e.prototype._onResponse=function(e){if(e.length>0){this._state.typeFilter===w.types.QUANDL&&this._showNotification()}},e.prototype._showNotification=function(){var e,t,i;TVSettings.getBool("symboledit.show_quandl_notification",!0)&&(e=$.t("Quandl is a huge financial database that we have connected to TradingView. Most of its data is EOD and is not updated in real-time, however the information may be extremely useful for fundamental analysis.")+' <a target="_blank" href="'+("ru"===window.locale?"http://blog.tradingview.com/?p=1530&lang=ru":"http://blog.tradingview.com/?p=1530")+'">'+$.t("Read our blog for more info!")+"</a>",t=$('<div class="symbol-edit-notification">').prependTo(this.$list),t.html(e),t.find("a").click(function(e){e.preventDefault();var t=$(this).attr("href");window.open(t,"_blank")}),i=$('<a class="close">').appendTo(t),i.click(function(){TVSettings.setValue("symboledit.show_quandl_notification",!1),t.remove()}))},e.prototype._processQuandlResponse=function(e){return e.datasets.filter(function(e){return!e.premium}).map(function(e){return{description:e.name,exchange:e.database_code,full_name:"QUANDL:"+e.database_code+"/"+e.dataset_code,params:["eod"],symbol:e.dataset_code,type:"quandl"}})},e.prototype.forceFocus=function(){this._inputElement.focus()},e.isFXCMCFD=function(e){return(!window.initData||!window.initData.fxcm_cfd)&&u.isFXCMCFD(e.ticker||e.full_name)},e.migrateItemFormat=function(t,i){var o,n,r;if(i){for(o=["type","exchange","description"],n=0;n<o.length;++n)r=o[n],!t[r]&&i[r]&&(t[r]=i[r]);t.rootItem=i}
if(t.full_name||(t.prefix||t.exchange?t.full_name=(t.prefix||t.exchange)+":"+t.symbol:Array.isArray(t.contracts)&&t.contracts.length&&t.contracts[0].prefix?t.full_name=t.contracts[0].prefix+":"+t.symbol:t.full_name=t.symbol),F&&(t.full_name=t.full_name.replace(W,"")),t.ticker||(t.ticker=t.full_name),Array.isArray(t.contracts))for(n=0;n<t.contracts.length;++n)e.migrateItemFormat(t.contracts[n],t);return t},e.createSuggestListRow=function(t,i,o,n){var r,s,a,l,c,h,u,d,p,f,_;return n||(n={}),r=document.createElement("tr"),s="symbol-edit-popup",n.addClass&&(s+=" "+n.addClass),r.setAttribute("class",s),a=!F||"quandl"===t.type,l=document.createElement("td"),l.setAttribute("class","symbol-edit-popup-td name apply-overflow-tooltip"),c=a?t.symbol.replace(i,"<strong>$&</strong>"):t.symbol,h=n.nameContent||c,t.broker_symbol&&(h=h+" ("+(a?t.broker_symbol.replace(i,"<strong>$&</strong>"):t.broker_symbol)+")"),l.innerHTML=h,u=document.createElement("td"),u.setAttribute("class","symbol-edit-popup-td desc apply-overflow-tooltip"),u.innerHTML=!a||i.test(t.symbol)?t.description:t.description.replace(i,"<strong>$&</strong>"),d=document.createElement("td"),d.setAttribute("class","symbol-edit-popup-td type apply-overflow-tooltip"),p="",n.typeContent?p=n.typeContent:(t.params&&~t.params.indexOf("eod")&&(p='<i class="eod">eod</i>&nbsp;'),t.type in o||(o[t.type]="bitcoin"===t.type?$.t("crypto"):$.t(t.type)),t.exchange?t.exchange.startsWith("CHXEUR_")?p+=o[t.type]+" - "+t.exchange.split("_")[0]:p+=o[t.type]+" - "+t.exchange:p+=o[t.type]),d.innerHTML=p,f=document.createElement("td"),f.setAttribute("class","symbol-edit-popup-td flag apply-overflow-tooltip"),f.innerHTML=e.getItemFlag(t),_=f.getElementsByTagName("svg")[0],_&&_.setAttribute("class","flag"),r.appendChild(l),r.appendChild(u),r.appendChild(d),r.appendChild(f),r},e.getItemFlag=function(e){var t=c.getFlagIdBySymbolInfo(e);return h.getSvgCodeByFlagId(t)},e.showDialog=function(t){var o,n,s,a,c,h,u,d,p,f,_,m,g=i(211);if(t=t||{},o="Symbol Search",!TVDialogs.get(o))return n=TVDialogs.createDialog(o,{hideTitle:!0,hideCloseCross:!0,dragHandle:".filter",width:"750px",dragOptions:{cancel:".sbOptions"},content:g.dialogs.symbolSearch}),TVDialogs.positionDialog(n),s=n.find("._tv-dialog-content").addClass("symbol-search-dialog"),a=s.find(".results"),a.mousewheel(function(e,t){var i=$(this);t>0?i.scrollTop(i.scrollTop()-15):i.scrollTop(i.scrollTop()+15)}),c=s.find("input").get(0),t.initialValue&&(c.value=t.initialValue),"selectionStart"in c&&(c.selectionStart=c.selectionEnd=c.value.length),c.focus(),this.canShowSpreadActions()&&(t.ignoreInterval||(u=e.getInputValueGetter(c),d=e.getInputValueSetter(c)),h=l.addSpreadActions(s.find(".spread-actions"),c,u,d)),p=new e({input:c,list:s.find(".results").get(0),callback:function(e,i){t.callback&&t.callback(e,i),TVDialogs.destroy(o)},onParse:h,ignoreInterval:t.ignoreInterval}),f=s.find(".filter"),p.$filterContainer=f,_=r(p,f),m=x(p,f),_||m||f.attr("style","display: none"),E(p,f),TVDialogs.resizeContent(n.height(),a),TVDialogs.applyHandlers(n),
TVDialogs.positionDialog(n),n.on("destroy",function(){TVSettings.setValue("symboledit.dialog_last_entry",c.value)}),n},e.bindToInput=function(i,o){function n(){f&&(S.removeListWrapper(),f.off(),f.remove(),f=null,b.hide(),"function"==typeof o.onPopupClose&&o.onPopupClose())}function r(e){e.preventDefault()}function s(){var e,i,n,s;if(f||(e=L(S),f=e.popup,S.bindListWrapper(e.listWrapper),f.on("focus",r),f.on("click",r),f.on("mousedown",r),f.on("focus","*",r),f.on("click","*",r),f.on("mousedown","*",r),"function"==typeof o.onPopupOpen&&o.onPopupOpen(e.popup)),t.enabled("charting_library_base")&&(i=this._state,i.keepListFor)){if(!i.highlightedItem)return void delete this._state.keepListFor;n=i.highlightedItem,s=this._getInputValue(),t.enabled("uppercase_instrument_names")&&(s=s.toUpperCase()),n.symbol!==s&&delete this._state.keepListFor}}function a(e,t){var i;return t?(RegExp("^"+w.types.QUANDL,"i").test(e)?(i=e.split(/\//),i.length&&(e=i[i.length-1])):e=m.seriesShortSymbol.value()||e,e):e}function c(e){var t=m.symbol.value()||"";t=a(t,e),i.val(t),S.resetState()}var h,u,d,p,f,_,g,v,y,S,T,C,x;return o=o||{},i=$(i).eq(0),h=o.callback,u=null,d=null,p=!1,f=null,g=o.spreadActions&&$(o.spreadActions).eq(0),g&&g.size()&&this.canShowSpreadActions()&&(o.ignoreInterval||(v=e.getInputValueGetter(i.get(0)),y=e.getInputValueSetter(i.get(0))),_=l.addSpreadActions(g,i.get(0),v,y)),S=new e({input:i,onValueChanged:s,callback:function(e,t){n(),"function"==typeof d&&d(e,t)||("function"==typeof h&&h(e,t),"function"==typeof u&&u(e,t)),o.clearAfterAccept&&i.val(""),o.keepFocus?i.get(0).focus():i.get(0).blur(),S.resetState()},hidePro:o.hidePro,autoFocus:o.autoFocus,onEmptyApply:o.onEmptyApply,onParse:_,acceptEmpty:o.acceptEmpty,dontUseInputParser:o.dontUseInputParser,allowMultipleSymbols:o.allowMultipleSymbols,ignoreInterval:o.ignoreInterval}),T=!1,C=!0,TradingView.isMobile.iOS()&&$("body").css("cursor","pointer"),i.on("focus",function(e,t){T=!0,p=!0,S._skipAutoFocus?delete S._skipAutoFocus:setTimeout(function(){T&&i.get(0).select()},0)}),i.on("blur",function(e){var t,o,r,s,a=this;if(f&&(t=document.activeElement,o=f.is(t),r=f.has(t).length>0,(-1!==navigator.userAgent.indexOf("Trident")||-1!==navigator.userAgent.indexOf("MSIE"))&&(o||r)))return e.preventDefault(),e.stopImmediatePropagation(),void setTimeout(function(){i.focus()},0);TradingView.isMobile.iOS()&&C&&(C=!1,T=!0),TradingView.isMobile.iOS()&&T&&null===e.relatedTarget?(s=function(e){$(a).is($(e.target))||(T=!1,setTimeout(function(){n()},0),$(document).off("click","body",s))},$(document).on("click","body",s)):T=!1,setTimeout(function(){T||n()},0)}),o.syncWithChartWidget&&(c(!0),m.seriesShortSymbol.subscribe(function(){c(!0)}),u=function(e,t){p=!(e||t),e&&m.symbol.setValue(e),t&&m.interval.setValue(t)},d=function(e,t){return!t&&(e===m.symbol.value()||(e===m.seriesShortSymbol.value()||void 0))},o.syncOnBlur&&i.on("blur",function(){p&&(c(!0),p=!1)}),x=function(){i.get(0).blur(),c(!1)},i.on("keypress",function(e){e.keyCode===P.ESC&&x()}),i.on("keydown",function(e){e.keyCode===P.ESC&&x()})),
S},A.isRoot=function(e){return!(!e||!Array.isArray(e.contracts))},A.prototype.addRoot=function(e,t){var i,o;this._currentTbody=null,i=document.createElement("tbody"),this._container.appendChild(i),o=this,t.addEventListener("click",function(i){i.preventDefault(),t.classList.contains("collapsed")?o.expand(e):o.collapse(e)}),t.setAttribute("data-root",e),i.appendChild(t),this._roots[e]={titleRow:t,tbody:i}},A.prototype.append=function(t){var i,o,n,r,s,a=null,l=null;if(A.isRoot(t))for(i=t.symbol,o=(t.exchange||"unknown")+"_"+i,this._translationCache[t.type]||(this._translationCache[t.type]="bitcoin"===t.type?$.t("crypto"):$.t(t.type)),a=e.createSuggestListRow(t,this._tickerRegExp,this._translationCache,{nameContent:"<div>"+(F?i:i.replace(this._tickerRegExp,"<strong>$&</strong>"))+"</div>",typeContent:this._translationCache[t.type]+(t.exchange&&" - "+t.exchange||""),addClass:"group-title"}),this._roots[o]||this.addRoot(o,a),n=0;n<t.contracts.length;++n)r=t.contracts[n],s=e.createSuggestListRow(r,this._tickerRegExp,this._translationCache),l=r.ticker||r.full_name,this._itemsByTicker[l]=r,s.setAttribute("data-item-ticker",l),this._roots[o].tbody.appendChild(s);else this._currentTbody||(this._currentTbody=document.createElement("tbody"),this._container.appendChild(this._currentTbody)),a=e.createSuggestListRow(t,this._tickerRegExp,this._translationCache),this._currentTbody.appendChild(a);l=t.ticker||t.full_name,this._itemsByTicker[l]=t,a.setAttribute("data-item-ticker",l)},A.prototype.toggleCollapsed=function(e,t){var i;if(e)(i=this._roots[e])&&($(i.titleRow).toggleClass("collapsed",!!t),$(i.tbody).find("tr:not(.group-title)").toggleClass("hidden",!!t));else for(e in this._roots)this.toggleCollapsed(e,t)},A.prototype.collapse=function(e){this.toggleCollapsed(e,!0)},A.prototype.expand=function(e){this.toggleCollapsed(e,!1)},A.prototype.getItemByTicker=function(e){return this._itemsByTicker[e]||null},e.GroupListHandler=A,e.isIntervalInit=function(e){return/[\d,]/.test(e)&&t.enabled("show_interval_dialog_on_key_press")},e.isIntervalChar=function(e){return t.enabled("seconds_resolution")?/[\dhdwms]/i.test(e):/[\dhdwm]/i.test(e)},e.parseIntervalValue=function(e){var t=/^[,\s]*(\d*)\s*([hdwms]?)\s*$/i.exec(e)||[],i=~~t[1],o=t[2]&&t[2].toUpperCase(),n={qty:!i&&o?1:i,unit:o||null};return n.error=!i&&!o,n.intraday=!(n.error||n.unit&&"H"!==n.unit),n},e.sanitizeIntervalValue=function(t){var i=e.parseIntervalValue(t),o=i.qty,n=i.unit;return i.error?null:("H"===n&&(o*=60,n=null),o&&!n?o+"":n&&(!o||1===o&&"S"!==n)?n:o+n)},e.detachInterval=function(e){var t=/,[^,]*$/i.exec(e)||[];if(t[0])return{rest:e.substr(0,e.length-t[0].length),detached:t[0]}},e.intervalIsSupported=function(i){var o,n,r;return t.enabled("allow_supported_resolutions_set_only")?null!==(o=this.sanitizeIntervalValue(i))&&_(o):(n=e.parseIntervalValue(i),!n.error&&(n.intraday?m.intraday.value():!(r=m.supportedResolutions.value())||!!~r.indexOf(n.unit)))},function(){var t="",i=null;e.resetStoredInterval=function(){t="",i=null},e.detachStoreInterval=function(o){
var n=e.detachInterval(o);return n?(t=n.detached,i=e.sanitizeIntervalValue(t),n.rest):(e.resetStoredInterval(),o)},e.recallAttachInterval=function(e){return e+t},e.getInterval=function(t){var o=i;return!0===t&&e.resetStoredInterval(),o},e.getInputValueGetter=function(t){return function(){return e.detachStoreInterval(t.value)}},e.getInputValueSetter=function(t){return function(i){t.value=e.recallAttachInterval(i)}},e.intervalError=function(){return!(!t||/^,\s*$/.test(t))&&!i}}(),e.activateKeyPressHandler=function(){v.pushBackListener("symbolEdit",this._keyPressHandler)},e._keyPressHandler=function(o){var n,r=i(507);if(I(o))if(o.preventDefault(),n=String.fromCharCode(o.charCode),e.isIntervalInit(n))new r({callback:function(e){m.interval.setValue(e)}}).show(n);else{if(!t.enabled("symbol_search_hot_key"))return;e.showDialog({initialValue:n,callback:function(e,t){m.symbol.setValue(e),t&&m.interval.setValue(t)}})}},e.canShowSpreadActions=function(){return void 0!==l&&"cme"!==TradingView.widgetCustomer&&"bovespa"!==TradingView.widgetCustomer},O=o.Model.extend({defaults:{database_code:null,name:null},getName:function(){return 0===this.get("database_code").length?this.get("name"):this.get("database_code")},getDesc:function(){return 0===this.get("database_code").length?this.get("name"):this.get("database_code")+" - "+this.get("name")}}),D=function(){},V=o.Collection.extend({url:"https://www.quandl.com/api/v3/databases.json",model:O,initialize:function(e){this.next_page=1,this.prev_page=null},parse:function(e){return this.next_page=e.meta.next_page,this.prev_page=e.meta.prev_page,n.where(e.databases,{premium:!1})},loadMore:function(){if(null==this.next_page)throw new D("No bliny left.");return this.fetch({remove:!1,data:{page:this.next_page}})}}),R=new V,B="",N=new O({database_code:B,name:"All providers",id:0}),k.prototype.renderItem=function(e){var t=e.get("database_code"),i=e.getName(),o=e.getDesc(),n=$("<option>").addClass("filter-item").attr("value",t).text(i).data("custom-option-text",o).appendTo(this.$providerSelect);t===this.filter.getValue()&&n.attr("selected",!0)},k.prototype.renderListTip=function(){var e=this,t=[N];""!==this.filter.getValue()&&t.push(this.filter.model),n.each(t,function(t){e.renderItem(t)}),this.$providerSelect.selectbox("refresh",this.start),this.start+=t.length},k.prototype.renderList=function(){var e=this,t=this.databases.slice(this.start,this.start+this.renderCount);n.each(t,function(t){t.get("database_code")!==e.filter.getValue()&&e.renderItem(t)}),this.$providerSelect.selectbox("refresh",this.start),this.start+=t.length},k.prototype.showSpinner=function(){var e=this.$providerSelect.selectbox("option","sbOptions"),t=$('<li class="spinner-container">').appendTo(e);y("medium").spin(t.get(0))},k.prototype.hideSpinner=function(){$(this.$providerSelect.selectbox("option","sbOptions")).find(".spinner-container").remove()},k.prototype.loadMore=function(){var e=this;if(!(this.request||this.start<this.databases.length))try{this.request=this.databases.loadMore(),this.showSpinner(),
this.request.done(this.renderList.bind(this)).always(function(){e.$providerSelect.selectbox("close").selectbox("open"),delete e.request,e.hideSpinner()})}catch(e){if(!(e instanceof D))throw e}},k.prototype.makeQuandlFilter=function(e,t){var i,o=$('<div id="quandl-filter" class="exchange-filter">').appendTo(t);this.$providerSelect=$("<select>").appendTo(o),this.$providerSelect.selectbox({speed:0,classHolder:"tv-unstyled-select-container tv-symbol-select",classOptions:"sbOptions tv-quandl-select",onOpen:this.onOpen.bind(this)}),i=this.$providerSelect.selectbox("option","sbOptions"),this.addScrollListener(i),this.renderListTip(),this.renderList(),this.addChangeListener(e)},k.prototype.onOpen=function(){0===R.length&&this.loadMore()},k.prototype.addScrollListener=function(e){var t=this,i=0,o=20,n=function(e){var n=$(this).scrollTop();n>i&&n>$(this).get(0).scrollHeight-$(this).height()-o&&(t.renderList(),t.loadMore()),i=n};e.scroll(n)},k.prototype.addChangeListener=function(e){var t=this;this.$providerSelect.change(function(){var i=$(this).val()||"";t.filter.model=""===i?N:t.databases.findWhere({database_code:i}),t.filter.save(),e._onSelectionChanged()})},M.prototype.getValue=function(){return this.model.get("database_code")},M.prototype.load=function(){var e=TVSettings.getJSON("symboledit.quandlprovider");return e&&(this.model=new O(e)),this.model},M.prototype.save=function(){TVSettings.setJSON("symboledit.quandlprovider",this.model)},e}();e.exports=x}).call(t,i(3),i(178),i(29))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,i){"use strict";(function(t){function o(e){this._data=e,this._textWidthCache=new l}function n(e,t,i,o,n){this._model=e,this._source=t,this._plotIndex=i,this._getterName=o||"symbol",this._propertyName=n,this._cache={},this._invalidated=!0,this._rendererData={}}var r=i(55),s=r.parseRgb,a=r.rgbToBlackWhiteString,l=i(258),c=i(41).CompositeRenderer,h=i(259).makeFont,u=i(33);o.prototype.hitTest=function(e){return null},o.prototype.draw=function(e){var t,i,o,n,r,s,a,l,c,h;this._data.visible&&(this._textWidthCache.font!==this._data.font&&(this._textWidthCache.reset(),this._textWidthCache.font=this._data.font),e.font=this._data.font,t=this._data.fontSize,i=Math.floor(t/4.5),o=Math.ceil(t/4.5),n=Math.ceil(t/3),r=Math.ceil(this._textWidthCache.measureText(e,this._data.text)),s=Math.round(t/10),a=t+i+o,l=r+2*n,c=this._data.x-.5,"right"===this._data.align&&(c-=l),h=this._data.y-Math.floor(t/2)-i-.5,e.fillStyle=u.resetTransparency(this._data.backColor),e.fillRect(c,h,l,a),e.fillStyle=this._data.color,e.textAlign="left",e.fillText(this._data.text,c+n,h+i+t-s))},n.prototype.isPropertyEnabled=function(){return this._model.properties().scalesProperties[this._propertyName].value()},n.prototype.update=function(){this._invalidated=!0},n.prototype.updateImpl=function(){var e,i,o,n,r,l,u,d,p=this._rendererData;if(p.visible=!1,p.text="",
this.isPropertyEnabled()&&this._source.properties().visible.value()&&(e=this._source.lastValueData(this._plotIndex,t.enabled("price_scale_always_last_bar_value")),!e.noData)){if(i=this._model.paneForSource(this._source),o="right",i.leftPriceScale()===this._source.priceScale()&&(o="left"),n=this._model.properties(),r=!i.leftPriceScale().mainSource()||!i.rightPriceScale().mainSource(),r&&n.scalesProperties.showLeftScale.value()&&!n.scalesProperties.showRightScale.value()&&(o="left"),!r){if("left"===o&&!n.scalesProperties.showLeftScale.value())return new c;if("right"===o&&!n.scalesProperties.showRightScale.value())return new c}l=e.coordinate,u=this._source.m_data.m_series&&this._source.m_data.m_series.properties().style.value()===TradingView.Series.STYLE_HEIKEN_ASHI,this._source.lastPriceLabelFixedCoordinate&&!u&&"showSymbolLabels"===!this._propertyName&&(l=this._source.lastPriceLabelFixedCoordinate(this._plotIndex)||l),e.color!==p.backColor&&(p.backColor=this._source.priceLineColor(e.color),d=a(s(p.backColor),160),p.color="black"===d?"white":"black"),p.text=this._source[this._getterName](this._plotIndex),p.visible=""!==p.text,p.align=o,p.x="right"===o?this._model.timeScale().width():0,p.y=l,p.fontSize=this._model.properties().scalesProperties.fontSize.value(),p.font=h(p.fontSize,"Arial","")}},n.prototype.renderer=function(){return this._invalidated&&(this.updateImpl(),this._invalidated=!1),this._renderer||(this._renderer=new o(this._rendererData)),this._renderer},e.exports=n}).call(t,i(3))},function(e,t,i){"use strict";(function(e){function o(e,t){var i,o,n,r,s;if(a.call(this),this._study=e,this._model=t,i=e.metaInfo().plots){for(o=0;o<i.length;++o)if(!(this._study.isSelfColorerPlot(o)||this._study.isBarColorerPlot(o)||this._study.isBgColorerPlot(o)||this._study.isDataOffsetPlot(o)||this._study.isOHLCColorerPlot(o))){if(n=i[o].id,"Compare@tv-basicstudies"===this._study.metaInfo().id)r=new l(this._study.inputsForGUI()[1],"");else{s=this._study.title();try{s=this._study.properties().styles[n].title.value()}catch(e){}r=new l(s,"")}r.plotId=n,r.plotIndex=o,this._items.push(r)}this.update(),this._invalidated=!0}}function n(e,t){o.call(this,e,t)}var r=i(276),s=i(157),a=s.DataWindowView,l=s.DataWindowItem,c=i(24).PlotRowSearchMode;inherit(o,a),o.prototype.update=function(){this._invalidated=!0},o.prototype._updateImpl=function(){var t,i,o,n,r,s,a,l,h,u,d,p,f,_,m,g,v,y,b,S,w,T,P=!0;for(this._header=this._study.title(P),this._title=this._study.title(),t=this._study.isVisible()?$.t("n/a"):"",i=0;i<this._items.length;++i)this._items[i].setValue(t);if(e.enabled("hide_last_na_study_output")&&this._items.length&&this._items[this._items.length-1].setValue(""),!this._model.timeScale().isEmpty()){if(o=this._study.metaInfo().plots,n=null,r={},o)for(i=0;i<o.length;i++)(this._study.isSelfColorerPlot(i)||this._study.isOHLCColorerPlot(i))&&(r[o[i].target]={index:i},r[o[i].target].palette=this._study.metaInfo().palettes[o[i].palette],r[o[i].target].paletterProps=this._study.properties().palettes[o[i].palette])
;for(s=this._study.data().size()-1,a=this._model.crossHairSource().appliedIndex(),l=this._study.formatter(),h={},i=0;i<this._items.length;++i)u=this._items[i],d=u.plotId,p=u.plotIndex,f=this._study.offset(d),void 0!==(_=isNumber(a)?this._study.nearestIndex(a-f,c.NearestLeft):s)&&(m=h[d],void 0===m&&(m=this._study.getMinFirstBarIndexForPlot(d),h[d]=m),m>_||(g=this._study.data().last(),null!==(v=this._study.data().valueAt(_)||(null!==g?g.value:null))&&(y=v[p+1],isNumber(y)&&(u.setValue(l.format(y)),b=this._study.properties().styles[d].color.value(),this._study.isOHLCSeriesPlot(p)&&(d=o[p].target,b=this._study.properties().ohlcPlots[d].color.value()),r[d]&&v.length>r[d].index+1?(S=v[r[d].index+1],void 0!==S&&null!==S?(n=r[d].palette,w=r[d].paletterProps,T=n.valToIndex?n.valToIndex[S]:S,this._items[i].setColor(w.colors[T].color.value())):this._items[i].setColor(b)):this._items[i].setColor(b)))))}},o.prototype.items=function(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._items},inherit(n,o),n.prototype.additional=function(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._additional},n.prototype._updateImpl=function(){var e=r(this._study.symbolInfo());return this._additional=e?"(Data Provided by "+e+")":void 0,o.prototype._updateImpl.call(this)},t.StudyDataWindowView=o,t.DataVendorStudyDataWindowView=n}).call(t,i(3))},function(e,t,i){"use strict";function o(e){this._graphics=o.emptyGraphics(),n(!!e,"Study metaInfo is absent!"),this._metaInfo=e}var n=i(9).assert,r=i(0).getLogger("Chart.StudyGraphics");o.emptyGraphics=function(){return{indexes:[]}},o.prototype.isEmpty=function(){var e=Object.keys(this._graphics).length>1;return 0===this._graphics.indexes.length&&!e},o.prototype.graphics=function(){return this._graphics},o.prototype.setGraphics=function(e){this._graphics=e,this._postProcessGraphicsData()},o.prototype.process=function(e){if(""!==e.d)return e.d.indexes_replace?void this.replaceIndexes(e):void(e.d.graphicsCmds&&(this.processEraseCmds(e.d.graphicsCmds.erase),this.processCreateCmds(e.d.graphicsCmds.create,e.indexes)))},o.prototype.replaceIndexes=function(e){""!==e.d&&(n(!!e.d.indexes_replace),this._graphics.indexes=e.indexes)},o.prototype.processEraseCmds=function(e){var t,i,r,s,a;if(e)for(n(!!this._graphics,"_graphics object doesn't exist in the study!"),n(!!this._graphics.indexes,"_graphics.indexes array doesn't exist in the study!"),t=0;t<e.length;++t)if(i=e[t],"all"===i.action)this._graphics=o.emptyGraphics();else{if("one"!==i.action)throw Error("Unknown graphics command "+i.action);for(r in this._graphics[i.type])s=this._graphics[i.type][r],(a=o._findGraphicsObjIndexById(s.data,i.id))>=0&&s.data.splice(a,1)}},o._findGraphicsObjIndexById=function(e,t){for(var i=0;i<e.length;++i)if(e[i].id===t)return i;return-1},o.prototype.processCreateCmds=function(e,t){var i,o,r,s,a,l;if(e){n(!!t,"indexes are missing in the study nonseries response!"),n(!!this._graphics,"_graphics object doesn't exist in the study!"),
n(!!this._graphics.indexes,"_graphics.indexes array doesn't exist in the study!");for(i in e){n(i in this._metaInfo.graphics,"There is a '"+i+"' in study response, but it doesn't present in metaInfo!");for(o=0;o<e[i].length;++o){r=e[i][o],s=r.styleId,n(s in this._metaInfo.graphics[i]),this._graphics[i]||(this._graphics[i]=[]),a=null;for(l=0;l<this._graphics[i].length;++l)if(this._graphics[i][l].styleId===s){a=this._graphics[i][l];break}null===a&&(a={styleId:s,data:[]},this._graphics[i].push(a)),a.data=a.data.concat(r.data)}}"nochange"===t||(n(Array.isArray(t)),this._graphics.indexes=t),this._postProcessGraphicsData()}},o.prototype._postProcessGraphicsData=function(){this._graphics&&this._splitHHistItems()},o.prototype._splitHHistItems=function(){var e,t,i,n,r,s,a,l,c,h,u,d;if(void 0!==this._graphics.hhists){for(e in this._graphics.hhists)t=this._graphics.hhists[e],o._sortHHistItemsByPrice(t.data),i=this._graphics.indexes,t.dataObj=o._splitHHistItemsBySession(t.data,i);if(n=this._graphics.hhists[0],r=this._graphics.hhists[1],n&&r&&n.dataObj&&r.dataObj)for(s in n.dataObj)if(a=n.dataObj[s],l=r.dataObj[s],a&&l){for(c=l[0],h=l[l.length-1],u=0;u<a.length;u++)d=a[u],(d.priceHigh>=c.priceHigh||d.priceLow>=c.priceLow)&&(d.priceHigh<=h.priceHigh||d.priceLow<=h.priceLow)&&(d.va=!0);n.shortDataObj||(n.shortDataObj={}),n.shortDataObj[s]=a.slice()}}},o._sortHHistItemsByPrice=function(e){e.sort(function(e,t){return e.priceLow-t.priceLow})},o._splitHHistItemsBySession=function(e,t){var i,o,n,s={};for(i=0;i<e.length;++i)o=e[i],n=t[o.firstBarTime],void 0!==n?(n in s||(s[n]=[]),s[n].push(o)):r.logError("Cannot find index "+o.firstBarTime+" in study timescale indexes");return s},e.exports=o},function(e,t,i){"use strict";var o,n,r;Object.defineProperty(t,"__esModule",{value:!0}),o=i(229),n=i(272),r=function(){function e(e){void 0===e&&(e=!1),this._dwm=e}return e.prototype.format=function(e){var t=(new n.DateFormatter).format(e);return this._dwm||(t+=" "+(new o.TimeFormatter).format(e)),t},e.prototype.formatLocal=function(e){var t=(new n.DateFormatter).formatLocal(e);return this._dwm||(t+=" "+(new o.TimeFormatter).formatLocal(e)),t},e}(),t.DateTimeFormatter=r},function(e,t,i){"use strict";function o(e,t,i,o,r){this._paneView=r,n.call(this,e,t,i,o)}var n=i(34).Study;inherit(o,n),o.prototype.onData=function(e){var t=this;switch(e.method){case"data_update":n.prototype._makeJSONForNSData.call(this,e,{}).then(function(i){i.indexes_replace?t._indexes=e.params.nonseries.indexes:(t._nonseriesdata=i.data,t._indexes=e.params.nonseries.indexes);var o=t._model.paneForSource(t);t._model.recalculatePane(o),t._model.updateSource(t)});break;default:return n.prototype.onData.call(this,e)}},o.prototype.updateAllViews=function(){this._paneView.update(),this._dataWindowView.update(),this._statusView.update()},o.prototype.paneViews=function(e){return[this._paneView]},o.prototype.state=function(e){var t=n.prototype.state.call(this,e);return e&&(t.nonSeriesData=this._nonseriesdata,t.indexes=this._indexes),t},o.prototype.restoreData=function(e,t,i){
n.prototype.restoreData.call(this,e),this._nonseriesdata=t,this._indexes=i},o.prototype.clearData=function(){this._nonseriesdata=null,this._indexes=null},o.prototype.nonSeriesData=function(){return this._nonseriesdata},e.exports=o},function(e,t,i){"use strict";function o(e,t){var o=t||new c("linetoolarrowmark");l.call(this,e,o),i.e(11).then(function(t){var o=i(650).TextPaneView,n=i(651).MarkPaneView,r=[new n(this,e,this.image,this.width,this.height,this.offsetX,this.offsetY)],s=this._createTextPaneView(o);null!==s&&r.push(s),this._setPaneViews(r)}.bind(this).bind(null,i)).catch(i.oe)}function n(e,t){this._constructor="LineToolArrowMarkLeft",o.call(this,e,t)}function r(e,t){this._constructor="LineToolArrowMarkUp",o.call(this,e,t)}function s(e,t){this._constructor="LineToolArrowMarkRight",o.call(this,e,t)}function a(e,t){this._constructor="LineToolArrowMarkDown",o.call(this,e,t)}var l=i(1).LineDataSource,c=i(7).DefaultProperty,h=i(2).propertyPages;inherit(o,l),o.prototype.width=21,o.prototype.height=21,o.prototype.offsetX=0,o.prototype.offsetY=0,o.prototype.paneViews=function(e){var t=l.prototype.paneViews.call(this,e);return null!==t&&this._textPaneView&&t.push(this._textPaneView),t},o.prototype.pointsCount=function(){return 1},o.prototype.title=function(){return"Arrow Mark"},o.prototype.getStylesPropertyPage=function(){return h.LineToolArrowMarkStylesPropertyPage},o.prototype._createTextPaneView=function(e){return null},inherit(n,o),n.prototype.image=new Image,n.prototype.image.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAAB50lEQVR4AWMgETAKKAgIAGkQ5mCgAmCWdtTWV4yxvgFkWwKxOKUGssr5Gccrx9t+Vk6w+w/kxwKxIrmGMTKIivIohFvONKsI+e/cl/ofamgGECuTYyCTqJ2mqlK01Vnr+uj/HjNy/1v1J8AMzSTHUBYZP6MgpTjb97bNsf9dpmf9N++J/W/UEQEztAiIbUEGo2EpIObE8C4oVuVDzLuBmv869aT8t5+c+t+0K/q/YXs4GGsWeIAMRscwy/yhBiO8K2ijJKcYZXXYuj7qv/u0nP/W/Yn/jTsjQYYRwliDhUXKy8BVKdbmuW1T7H+3Gdn/LXrjQN4FaSDLUBa5MItyoOAvp67k/45T0pC9S56hSrHWhY4tif9D5pUDXZjz36w7Blkx+S5VDLNoBUWMY3fKfwdExMAw+WEq7Wvkoxhn+waUhFwRSYhcQxGxL26jpqQYbX3CBpjY3aeDYj+BothHpFNxcW75cIvJpmXB/516Uv/bT0r5b9IVRUY6xQSssr6GkcAc9dGuNe6/y7RMMnMUJmCWcNTSBgbHZeuG6P+eM/P+W/VRlPcRwSGoJMgvH265yKIq/L9LfzqKoZSXp0Em6cDy9BvU0Dhyy1PM4PAwMFWKs7kFZFsBsQQDlQAjr4a0MJAWxFdHAQAcI3sGHsO1dgAAAABJRU5ErkJggg==",n.prototype.offsetX=1,n.prototype.offsetY=-10,n.prototype.title=function(){return"Arrow Mark Left"},n.prototype._createTextPaneView=function(e){var t=new e(this,this._model,22,-3,"middle","left");return t.disableSelection(),t},inherit(r,o),r.prototype.image=new Image,
r.prototype.image.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAACBklEQVR4AWMgErAoxVoXgmgGKgEWxTCLVseWxP9yYRbl1DCYSdrXyEc5we5vyLzy/0D6l5SXgStInFwDGcVt1JQU42zfOHan/HebkfPfqSv5v1KszXNBGyU5kDzpRoqLcytGW5+wbY797zA59b9Zd8x/xylp/22bYv8rRlkdBqrgINVIVvlwi8k29dH/Xadn/Tftiv5v2B4Opt1mZP+3ro/6Lx9i3k1K+DLL+hpGmpYF/3efnvPfvCcWZCAcW/TG/XeflvMfFM4yfkZBxIQvo4SjlrZSnO1Hp57U/9b9Cf+NOiKQDQXxgeKJ/516Uv4D1b0XtdNUxRu+gkqC/MBwvGzXGvffflLKf+POSISBCAwWtweGMyi8laKtzjKIivLgCUfLRdYN0f9dpmX+N+mKghiCieHh6wIMb2tguCuEW84E6ccIR7kgk3SLqvD/njPzYOFICIPVeczI/W9WEfJfzs84HmQOIhw9DEyV422/ufSn/7fqg4cjIQxWZwUMd+e+1P9A/Z+lHbX1weHLqyEtrBRncwsYm/+RsWaBBz4DwfLoehRjrG8IKAgIgOMHiK2AOA6IM6G4CKgIr6EgeZA6qPoMII4FYksgFmCA5gwJIFYEYmUotiXSUFuYHqh+cXw5TZlIQ5WxaR4mhuLBZBkqBcT+oJjFg/3B6kgAnFANyniwFEQdJgAAOuN7Bp7MBuYAAAAASUVORK5CYII=",r.prototype.offsetX=-9,r.prototype.offsetY=0,r.prototype.title=function(){return"Arrow Mark Up"},r.prototype._createTextPaneView=function(e){var t=new e(this,this._model,0,18,"top","center");return t.disableSelection(),t},inherit(s,o),s.prototype.image=new Image,s.prototype.image.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAAB60lEQVR4AWPAAziAWJBXQ1oYSDMyUAlIALGVUpzNLQkPA1Mgm5kahioCcZxygt1/5Xjbb3JBJulAPiulhioDcSbIUJf+9P8WVeH/5cMtFwkqCfKDgoNiQ636Ev57zsz7b90Q/V8x2vqyhKOWNqHg4ARiKZAhaNgWiItAhhp1RPw374n97zIt879da9x/pTjbj7K+hpE4gwNqoD9IMzasWeDx37A9HIxNuqL+209K+e/Uk/rftCwYGBwWkxnExbkRwYHpTZBGgti4M/K/dX/Cf/fpOf9t6sHBcULcRk0JaAYT6YYiMDw4XKdn/bdtjv2vGGf7RtrXyAdoDguZhiKwaVf0f4fJqf8du1NAQfVXMcyiFWQwmYYisFl3zH+3GTn/Q+aV/3dsSfyvFGtdSLFLHaek/XfqSga59JdcmEU5yKVkh6lFbxzQhdn/bZtiga6zeS7lZeAKMpCC2E/87z4t5791fdR/xSirw4I2SnKg2CcxnSK8aw+MGKceSMTIh5h3Q0szRvJzFCQJgXLUexk/oyCQd8nP+8DE7jEjF+jd6P9K0VZnRe00VWHeJcfQDJChzn2p/80qQv4rhFvOZBAV5QF5l5LyNBZann6W8zOOp0Z5Kg7Eloox1jekHbX1qVLyQ2NVQEBBQIBU7wIAOFZ7BmG7RzYAAAAASUVORK5CYII=",s.prototype.offsetX=-19,s.prototype.offsetY=-10,s.prototype.title=function(){return"Arrow Mark Right"},s.prototype._createTextPaneView=function(e){var t=new e(this,this._model,-22,-3,"middle","right");return t.disableSelection(),t},inherit(a,o),a.prototype.image=new Image,a.prototype.image.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAAB/UlEQVR4AWPAATj3Wij8J4RB6hhIAFIgTS9a8nBhmKFSpBiqDNJ0P80PF4YZqkyyobfD7HDh4WJolaKY+G5zhXvoMXva2xifoWB5dD07zeTvFKvxioDMFY6RFUgEGvzzQVk8OGafVib9v5fkhc9QkDxIHVj9vaKY/7vM5b+HS/JFA80TAhnKA8TGZSoiS057GYFiFqzhTpQTPkNB8iB1YPUnPQz+5ykKzQGaYwjE3CBDmUCuBWKHabqSZ0656oI0EY1B6idoSx4F6reDupIJFrTMQCwtxsYcvNZY5uU5T0OiDDwLdOFKI9knvMzM/kD9kmBz0AAbEKs6iHAX7zSX/3nF3xyvgZd8Tf9vM5P/ZiXAmQdNBazYEgIjEHOBwiVHXmjWcSctnAbeDLH5f8xR83+SjNBEoHo9sD4owGWwIBDb9mtJHMIVviDxDg3x3UB11kDMD9ZHADCDwkeAmdlvhZHMI2C4oRh4xl3//1IDmbvszAxeQHXiUPWEATR8lE0EubJB4QYMP7CBF31M/m82k/usy8uRCpRXAKsjEXCCwiteVqD/qIPG/+tBVv/3WCj8C5Pi7wCKawMxBwMZgBEaXlbtGuI7T7ro/G9QFdsI5JsDMR/+cCQcvuLsLAzubRoSa4FsJyAWBSdwsgEifKVBXoYmcBYGagCoQZzEGggAoyq6zKXuV5gAAAAASUVORK5CYII=",a.prototype.offsetX=-9,a.prototype.offsetY=-18,a.prototype.title=function(){return"Arrow Mark Down"},
a.prototype._createTextPaneView=function(e){var t=new e(this,this._model,0,-23,"bottom","center");return t.disableSelection(),t},s.prototype.version=n.prototype.version=a.prototype.version=r.prototype.version=2,t.LineToolArrowMark=o,t.LineToolArrowMarkLeft=n,t.LineToolArrowMarkRight=s,t.LineToolArrowMarkUp=r,t.LineToolArrowMarkDown=a},function(e,t,i){"use strict";(function(e,o,n){function r(t,i){var r,a=t._undoModel._chartWidget,l=a.onWidget(),c=!1;c=l?a._options&&!a._options.hideIdeas:!!e.enabled("bars_marks")&&TVSettings.getBool("BarsMarksContainer.visibile",!1),i?i.merge({visible:c,frozen:!1}):i=new o({visible:c,frozen:!1}),r=this,i.visible.listeners().subscribe(null,function(t){l||a._containsData||!e.enabled("bars_marks")||TVSettings.setValue("BarsMarksContainer.visibile",!!t.value()),r._tooltip&&r._tooltip.removeAll()}),s.call(this,t,i),this.onNeedRepaint=new n,this._requests=[],this._marks={},this._loadedRange=null,this._getDataTimeout=null,this._collectedRange=null,this._model.mainSeries().onSymbolIntervalChanged().subscribe(this,this.clearMarks),this._model.mainSeries().onSymbolResolved().subscribe(this,this.clearMarks),this._model.mainSeries().onTickmarksRangeChanged().subscribe(this,this.getData),this._initialize(),this.pinnedTooltips={},this._tooltip=new h(this._createTooltip.bind(this),this)}var s=i(1).LineDataSource,a=i(10).isNumber,l=i(193).BarsMarksContainerPaneView,c=i(193).BarsMarksContainerRenderer,h=i(888).TooltipRenderer,u=i(0).getLogger("Chart.BarsMarksContainer");inherit(r,s),r.prototype._constructor="Child class must override this member",r.prototype._initialize=function(e){throw Error("Child class must override this member")},r.prototype.onClicked=function(){throw Error("Child class must override this member")},r.prototype._getData=function(e){throw Error("Child class must override this member")},r.prototype._createTooltip=function(){throw Error("Child class must override this member")},r.prototype.updateDotData=function(e,t){return t},r.prototype.updatePlateData=function(e,t){},r.prototype._plateViewData=function(e){return{}},r.prototype.pinTooltip=function(e,t){this.pinnedTooltips[e]=t},r.prototype.timeScale=function(){return this._model.timeScale()},r.prototype.getIntervalInTicks=function(){function e(e){if((e=parseInt(e))!=e)throw new TypeError("Unexpected interval");return 60*e}var t=e(1440),i=7*t,o=31*t,n=this._model.mainSeries().properties().interval.value();switch(n){case"M":return o;case"W":return i;case"D":return t;default:return e(n)}},r.prototype._maxDate=Math.round(new Date(2037,0,1).getTime()/1e3),r.prototype.getVisibleTickmarksRange=function(){var e,t;return this.timeScale().isEmpty()?{start:0,end:0}:(e=this.timeScale().visibleBars(),e.lastBar()>this.timeScale().points().firstIndex()&&e.firstBar()<this.timeScale().points().lastIndex()?(t=e.lastBar()<this.timeScale().points().lastIndex()?this.timeScale().indexToTimePoint(e.lastBar()):this._maxDate,e={start:this.timeScale().indexToTimePoint(Math.max(e.firstBar(),this.timeScale().points().firstIndex())),end:t},{
start:e.start?e.start:void 0,end:e.end?e.end:void 0}):{start:0,end:0})},r.prototype.getVisibleRangePlates=function(){var e=[],t=this.getVisibleTickmarksRange(),i=this.getIntervalInTicks();return $.each(this._marks,function(o,n){var r=n.tickmark;r>=t.start&&r<=t.end+i&&e.push(n)}),e},r.prototype.getPublishedPlates=function(){var e={},t=this;return is_authenticated?($.each(this.getVisibleRangePlates(),function(i,o){o.is_public&&(t.pinnedTooltips[o.id]||o.user__id===user.id)&&(e[o.id]=o)}),e):e},r.prototype._maxPlatesPerBar=10,r.prototype.filterDisplayedPlates=function(e){return e=e.reduce(function(e,t){var i=this._getIndex(t.tickmark);return e[i]=e[i]||[],e[i].push(t),e}.bind(this),{}),e=Object.keys(e).reduce(function(t,i){var o=e[i];return o=o.sort(function(e,t){return t.views_count-e.views_count}),o=o.slice(0,this._maxPlatesPerBar),t.concat(o)}.bind(this),[])},r.prototype._layout=function(e){switch(e){default:case 0:return"up";case 1:return"down";case 2:return"up";case 3:case 4:case 5:case 6:return"up"}},r.prototype._theme=function(e){switch(e){default:case 0:return"neutral";case 1:return"green";case 2:return"red";case 3:return"yellow";case 4:return"blue";case 5:return"green";case 6:return"red"}},r.prototype._offset=function(e,t){var i;switch(e){default:case"up":i=t[TradingView.HIGH_PLOT];break;case"down":i=t[TradingView.LOW_PLOT]}return this.priceScale().isPercent()&&(i=this.priceScale().priceRange().convertToPercent(i,this.ownerSource().firstValue())),this.priceScale().priceToCoordinate(i)},r.prototype._getIndex=function(e){return this.timeScale().timePointToIndex(e)},r.prototype.getViewData=function(){return{barWidth:this.barWidth(),plates:this.getPlatesViewData(),tooltip:this._tooltip}},r.prototype.barWidth=function(){return this.timeScale().barSpacing()},r.prototype.getPlatesViewData=function(){var e,t,i,o,n,r;if(this._model.mainSeries().data().isEmpty())return[];e=this.filterDisplayedPlates(this.getVisibleRangePlates()),t=this,i={},o=this._model.lastHittestData(),e=e.map(function(e){var n,r,s,a,l,c,h=this._getIndex(e.tickmark),u=this._getBar(h);return null!==u&&(n=this._layout(e.direction),r=this._theme(e.direction),s=o&&o.id===e.id,a=this.timeScale().indexToCoordinate(h),l=this._offset(n,u),c=0,h in i||(i[h]={up:0,down:0}),c=i[h][n]++,TradingView.merge({id:e.id,x:a,y:l,order:c,direction:n,theme:r,hovered:s,pinned:!0===t.pinnedTooltips[e.id],user__id:e.user__id,label:e.label,labelFontColor:e.labelFontColor||"#444",minSize:e.minSize||0},this._plateViewData(e)))}.bind(this)),e=e.filter(function(e){return!!e}),n=e.filter(function(e){return!0===e.hovered});for(r=0;r<e.length;r++)null!=n[0]&&e[r].user__id===n[0].user__id&&(e[r].highlightByAuthor=!0);return e.sort(function(e,t){return e.hovered&&!t.hovered?1:0}),e},r.prototype._getBar=function(e){return this._model.mainSeries().data().valueAt(e)},r.prototype.paneViews=function(e){var t=this;return this._properties.visible.value()?[new l(this,e,function(e){return new c(e.getViewData(),t)})]:[]},r.prototype.dataWindowView=function(){return null},
r.prototype.priceAxisViews=function(){return null},r.prototype.statusView=function(){return null},r.prototype.updateAllViews=function(){},r.prototype.pointsCount=function(){return 0},r.prototype.properties=function(){return this._properties},r.prototype._rangeDifference=function(e){return e=$.extend({},e),this._loadedRange&&(e.start<this._loadedRange.start?e.end=this._loadedRange.start:e.end>this._loadedRange.end&&(e.start=this._loadedRange.end)),e},r.prototype._rangeUnion=function(e,t){return e=$.extend({},e),t&&(e.start=Math.min(t.start,e.start),e.end=Math.max(t.end,e.end)),e},r.prototype._pushGetDataStack=function(e){if(!a(e.start)||!a(e.end))return void u.logError("Wrong tickmark range");this._getDataTimeout&&clearTimeout(this._getDataTimeout),this._collectedRange=this._rangeUnion(e,this._collectedRange),this._getDataTimeout=setTimeout(function(){this._getData(this._collectedRange),this._getDataTimeout=this._collectedRange=null}.bind(this),300)},r.prototype.roundRange=function(e){return{start:Math.round(e.start),end:Math.round(e.end)}},r.prototype.refreshData=function(){this.getData(this._lastRange)},r.prototype.getData=function(e){if(!a(e.start)||!a(e.end))return void u.logError("Wrong range");this._lastRange=e;var e=$.extend({},e);e.end=this._maxDate,this._pushGetDataStack(e)},r.prototype._abortAllRequests=function(){this._requests.forEach(function(e){e.abort()}),this._requests=[],this._getDataTimeout&&clearTimeout(this._getDataTimeout),this._getDataTimeout=this._collectedRange=null},r.prototype.clearMarks=function(){this._abortAllRequests(),this._marks={},this._loadedRange=null},t.BarsMarksContainer=r}).call(t,i(3),i(37),i(4))},function(e,t){},,function(e,t,i){"use strict";(function(e){function t(e){this._chartApi=e,this._sessionid="qs_"+o(),this._sessionstarted=!1}var o=i(17).randomHash;t.prototype.destroy=function(){this._sessionstarted&&(this._chartApi.quoteDeleteSession(this._sessionid),this._sessionid=null,this._sessionstarted=!1)},t.prototype.connected=function(){return this._chartApi.connected()},t.prototype.connect=function(e){this._globalHandler=e,this._chartApi.createSession(this._sessionid,this),this._chartApi.connect()},t.prototype.disconnect=function(){this._chartApi.disconnect()},t.prototype.quoteAddSymbols=function(e,t){e=[].concat(e),t&&t.forcePermission&&(e=e.concat({flags:["force_permission"]})),this._chartApi.quoteAddSymbols(this._sessionid,e)},t.prototype.quoteRemoveSymbols=function(e){this._chartApi.quoteRemoveSymbols(this._sessionid,e)},t.prototype.quoteFastSymbols=function(e){this._chartApi.quoteFastSymbols(this._sessionid,e)},t.prototype.quoteSetFields=function(e){this._chartApi.quoteSetFields(this._sessionid,e)},t.prototype.onMessage=function(e){switch(e.method){case"connected":this._sessionstarted||(this._chartApi.quoteCreateSession(this._sessionid),this._sessionstarted=!0);break;case"disconnected":this._sessionstarted=!1}this._globalHandler(e)},t.prototype.quoteHibernateAll=function(e){this._chartApi.quoteHibernateAll(this._sessionid)},TradingView.QuoteSession=t,
void 0!==e&&e&&e.exports&&(e.exports=t)}).call(t,i(15)(e))},function(e,t,i){"use strict";function o(){return n.hasService(t.TRADING_SERVICE)?n.service(t.TRADING_SERVICE):null}Object.defineProperty(t,"__esModule",{value:!0});var n=i(522);t.TRADING_SERVICE={id:"TradingService"},t.tradingService=o},function(e,t,i){"use strict";function o(e,t){var i=e.offset();t.localX=t.pageX-i.left,t.localY=t.pageY-i.top}function n(e,t,i,o){new c(e,t,i,o)}var r,s,a,l,c;Object.defineProperty(t,"__esModule",{value:!0}),i(13),i(109),r=i(458),s=i(9),a=2,l=!1,c=function(){function e(e,t,i,o){this._clickCount=0,this._clickTimeoutId=null,this._touchContextMenuTimeout=null,this._lastTouchPosition={x:0,y:0},this._mouseMoveStartPosition=null,this._cancelClick=!1,this._$target=e,this._handler=t,this._originalPreventDefault=i,this._preventDefault=!o&&i,this._verticalTouchScroll=o,this._init()}return e.prototype._mouseEnterHandler=function(e){this._$target.off("mousemove.chartgui"),this._$target.on("mousemove.chartgui",this._mouseMoveHandler.bind(this)),Modernizr.touch&&this._mouseMoveHandler(e),this._processEvent(e,this._handler.mouseEnterEvent),this._preventDefaultIfNeeded(e)},e.prototype._resetClickTimeout=function(){null!==this._clickTimeoutId&&clearTimeout(this._clickTimeoutId),this._clickCount=0,this._clickTimeoutId=null},e.prototype._mouseMoveHandler=function(e){l&&!Modernizr.touch||(this._processEvent(e,this._handler.mouseMoveEvent),this._preventDefaultIfNeeded(e))},e.prototype._mouseMoveWithDownHandler=function(e){var t,i,o,n,r,l,c;void 0===e.button&&(e.button=0),t=!1,i=Modernizr.touch||e.originalEvent.touches,i&&(this._fixMouseTouchEvent(e,e.originalEvent),e.clientX=e.pageX,e.clientY=e.pageY,this._verticalTouchScroll&&(o=Math.abs(.5*(e.pageX-this._lastTouchPosition.x)),n=Math.abs(e.pageY-this._lastTouchPosition.y),o<=n?(t=!0,this._preventDefault=!1):this._preventDefault=this._originalPreventDefault),this._lastTouchPosition.x=e.pageX,this._lastTouchPosition.y=e.pageY),r=s.ensure(this._mouseMoveStartPosition),l=Math.abs(r.x-e.pageX),c=Math.abs(r.y-e.pageY),l+c>5&&(this._cancelClick=!0,i&&this._clearContextMenuTimeout()),e.button===a||t||this._processEvent(e,this._handler.pressedMouseMoveEvent),this._preventDefaultIfNeeded(e)},e.prototype._mouseUpHandler=function(e){void 0===e.button&&(e.button=0),(Modernizr.touch||e.originalEvent.touches)&&(e.pageX=this._lastTouchPosition.x,e.pageY=this._lastTouchPosition.y,e.localX=this._lastTouchPosition.x,e.localY=this._lastTouchPosition.y,this._clearContextMenuTimeout()),this._mouseMoveStartPosition=null,l=!1,$(document.body).off("mousemove.chartgui"),$(document.body).off("mouseup.chartgui"),Modernizr.touch||e.originalEvent.touches?($(document.body).off("touchmove.chartgui"),$(document.body).off("touchend.chartgui"),this._mouseLeaveHandler(e)):($(document.body).off("mousemove.chartgui touchmove.chartgui"),$(document.body).off("mouseup.chartgui touchend.chartgui")),e.button!==a&&(this._processEvent(e,this._handler.mouseUpEvent),++this._clickCount,
this._clickTimeoutId&&this._clickCount>1?(this._processEvent(e,this._handler.mouseDoubleClickEvent),this._resetClickTimeout()):this._cancelClick||this._processEvent(e,this._handler.mouseClickEvent)),this._preventDefaultIfNeeded(e),Modernizr.touch&&this._mouseLeaveHandler(e)},e.prototype._clearContextMenuTimeout=function(){null!==this._touchContextMenuTimeout&&(clearTimeout(this._touchContextMenuTimeout),this._touchContextMenuTimeout=null)},e.prototype._mouseDownHandler=function(e){if(void 0===e.button&&(e.button=0),this._cancelClick=!1,(Modernizr.touch||e.originalEvent.touches)&&(this._fixMouseTouchEvent(e,e.originalEvent),this._lastTouchPosition.x=e.pageX,this._lastTouchPosition.y=e.pageY,this._mouseEnterHandler(e)),this._mouseMoveStartPosition={x:e.pageX,y:e.pageY},Modernizr.touch?($(document.body).off("touchmove.chartgui"),$(document.body).off("touchend.chartgui"),$(document.body).on("touchmove.chartgui",this._mouseMoveWithDownHandler.bind(this)),$(document.body).on("touchend.chartgui",this._mouseUpHandler.bind(this)),this._clearContextMenuTimeout(),this._touchContextMenuTimeout=setTimeout(this._contextMenuHandler.bind(this,e),500)):($(document.body).off("mousemove.chartgui touchmove.chartgui"),$(document.body).off("mouseup.chartgui touchend.chartgui"),$(document.body).on("mousemove.chartgui touchmove.chartgui",this._mouseMoveWithDownHandler.bind(this)),$(document.body).on("mouseup.chartgui touchend.chartgui",this._mouseUpHandler.bind(this))),l=!0,e.button!==a&&(this._processEvent(e,this._handler.mouseDownEvent),this._clickTimeoutId||(this._clickCount=0,this._clickTimeoutId=setTimeout(this._resetClickTimeout.bind(this),500))),this._preventDefaultIfNeeded(e),this._preventDefault)try{window.focus()}catch(e){}},e.prototype._init=function(){var e=this;this._$target.mouseenter(this._mouseEnterHandler.bind(this)),this._$target.on("touchcancel",this._clearContextMenuTimeout.bind(this)),this._$target.on("touchstartoutside mousedownoutside",function(t){e._handler.mouseDownOutsideEvent&&e._handler.mouseDownOutsideEvent(t,e._$target)}),this._$target.mouseleave(this._mouseLeaveHandler.bind(this)),this._$target.contextMenu&&this._$target.contextMenu(this._contextMenuHandler.bind(this)),Modernizr.touch?(this._$target.on("touchstart.chartgui",this._mouseDownHandler.bind(this)),this._initGestureEvents()):this._$target.on("mousedown.chartgui touchstart.chartgui",this._mouseDownHandler.bind(this))},e.prototype._mouseLeaveHandler=function(e){this._$target.off("mousemove.chartgui touchmove.chartgui"),this._processEvent(e,this._handler.mouseLeaveEvent),this._preventDefaultIfNeeded(e)},e.prototype._contextMenuHandler=function(e){this._processEvent(e,this._handler.contextMenuEvent),this._preventDefaultIfNeeded(e),this._cancelClick=!0},e.prototype._processEvent=function(e,t){t&&(o(this._$target,e),t.call(this._handler,e,this._$target))},e.prototype._preventDefaultIfNeeded=function(e){this._preventDefault&&e.preventDefault()},e.prototype._initGestureEvents=function(){var e=this,t=new r(this._$target.get(0));t.get("pinch").set({enable:!0
}),t.on("pinchstart",function(t){e._handler.gestureStartEvent&&e._handler.gestureStartEvent(t,e._$target),e._clearContextMenuTimeout()}),t.on("pinchmove",function(t){e._handler.gestureChangeEvent&&e._handler.gestureChangeEvent(t,e._$target)}),t.on("pinchend pinchcancel",function(t){e._handler.gestureEndEvent&&e._handler.gestureEndEvent(t,e._$target)})},e.prototype._fixMouseTouchEvent=function(e,t){var i=t.touches[0].pageX,o=t.touches[0].pageY;e.pageX=i,e.pageY=o,e.localX=i,e.localY=o},e}(),t.setMouseEventHandler=n},function(e,t,i){"use strict";function o(e,t,i){this.source=e,this.pane=t,this._rendererFactory=i}function n(e,t){this._barWidth=e.barWidth,this._plates=e.plates,this._tooltip=e.tooltip,this._model=t}function r(){this._layout=[],this._currentId=void 0,this.tooltipHovered=!1}var s=i(8).Point,a=i(70).pointInCircle,l=i(11);o.prototype.update=function(){},o.prototype.renderer=function(){return this._rendererFactory(this.source)},n.prototype.draw=function(e){e.save();for(var t=0;t<this._plates.length;t++)if(this._plates[t].highlightByAuthor){this._highlightByAuthor=!0;break}this._plates.forEach(this._drawItem.bind(this,e)),this._tooltip.draw(this._plates.map(function(e){return this._plateTransform(e)}.bind(this)),e),this._tooltip.endDraw(),e.restore()},n.prototype._drawItem=function(e,t){e.save(),this._highlightByAuthor&&!t.highlightByAuthor&&(e.globalAlpha=.4);var i=this._dotTransform(t);i.mine?this._drawTriangle(e,i):this._drawDot(e,i),e.restore()},n.prototype._commonTransform=function(e){var t=Math.max(1.4*e.minSize,this._barWidth+4),i=e.y+{up:-1,down:1}[e.direction]*(t*(e.order+.6)+.25*t),o=TradingView.clone(e.overridedTheme||this.themes[e.theme]);return o.dotBorderWidth=e.hovered||e.highlightByAuthor?4:2,{id:e.id,theme:o,themeName:e.theme,x:Math.round(e.x+1),y:Math.round(i),pinned:e.pinned,hovered:e.hovered}},n.prototype._dotTransform=function(e){var t=this._commonTransform(e);return t.radius=Math.max(e.minSize/2,.4*this._barWidth),t.label=e.label,t.labelFontColor=e.labelFontColor,t.labelFontSize=Math.ceil(Math.max(10,Math.min(t.radius,20))),this._model.updateDotData(e,t)},n.prototype._plateTransform=function(e){var t=this._commonTransform(e);return this._model.updatePlateData(e,t)},n.THEMES=["green","red","neutral","yellow","blue"],n.prototype.themes={green:{border:"#78C143",background:"#8DDD54"},red:{border:"#CC4545",background:"#ED5A5A"},neutral:{border:"#EAC300",background:"#FFD400"},yellow:{border:"#EAC300",background:"#FFD400"},blue:{border:"#047ACE",background:"#0496FF"}},n.prototype._drawTriangle=function(e,t){var i,o,n,r;e.strokeStyle=t.theme.border,e.fillStyle=t.theme.background,e.lineWidth=t.theme.dotBorderWidth,i=t,o=t.radius,n=Math.cos(Math.PI/6)*o,r=Math.sin(Math.PI/6)*o,e.translate(i.x,i.y),"up"===t.direction&&e.rotate(Math.PI),t.public||(e.lineWidth/=2),e.beginPath(),e.moveTo(0,-o),e.lineTo(n,r),e.lineTo(-n,r),e.lineTo(0,-o),e.closePath(),e.stroke(),t.public&&e.fill()},n.prototype._drawDot=function(e,t){e.strokeStyle=t.theme.border,e.fillStyle=t.theme.background,
e.lineWidth=t.theme.dotBorderWidth,e.beginPath(),e.arc(t.x,t.y,t.radius,0,2*Math.PI,!0),e.closePath(),e.stroke(),e.fill(),t.label&&t.radius>6&&(e.textAlign="center",e.textBaseline="middle",e.font="bold "+t.labelFontSize+"px Arial",e.fillStyle=t.labelFontColor,e.fillText(t.label,t.x,t.y))},n.prototype.hitTest=function(e){var t,i;for(i=this._plates.length-1;i>=0;--i)if(t=this._hitTestDot(this._plates[i],e))return t;return null},n.prototype._hitTestDot=function(e,t){var i=this._dotTransform(e),o=new s(i.x,i.y);return a(t,o,Math.max(i.radius,8))?new l(l.REGULAR,e):null},r.prototype._createLayout=function(){throw Error("Child class must override this member")},r.prototype._updatePlate=function(e){throw Error("Child class must override this member")},r.prototype._getContainer=function(e){return this._container&&this._context===e||(this._context=e,this._container=$(e.canvas).parent()),this._container},r.prototype._plateArrowSize=14,r.prototype.showPlate=function(e,t){var i,o,n,r,s,a,l,c;this._currentId===e.id&&this._layout&&0!==this._layout.length&&null!=this._layout[0].parentNode||(this._currentId=e.id,this._createLayout(),this._getContainer(t).append(this._layout),i=this,this._layout.hover(function(){i.tooltipHovered=!0,$(this).stop(!0).fadeTo(0,1)},function(){i.tooltipHovered=!1})),o=Math.round(e.barWidth/2),o>15&&(o=15),o<10&&(o=10),this._updatePlate(e),n=t.canvas.getBoundingClientRect(),r=e.x-this._layout.outerWidth()<this._plateArrowSize,s=n.width-e.x+Math.round(e.barWidth/2+o),r&&(s-=this._layout.outerWidth()+2*this._plateArrowSize),a=n.height,l=20,c=10,this._layout.toggleClass("right",r),this._layout.css({top:Math.min(Math.max(e.y,l),a-this._layout.outerHeight()-c),right:s,fontSize:o+"px",display:"block"})},r.prototype._removeLayout=function(){this.tooltipHovered||(this._layout.stop(!0),this._layout.remove())},r.prototype._toggleLayout=function(e){this._layout.toggle(e)},r.prototype.hide=function(e){this.tooltipHovered?this._layout.stop(!0).fadeTo(0,1):this._layout.fadeOut(400,function(){$(this).remove(),e()})},r.prototype.setSource=function(e){this.source=e},t.BarsMarksContainerPaneView=o,t.BarsMarksContainerRenderer=n,t.BarMarkTooltip=r},function(e,t,i){"use strict";(function(e){function o(e,t){var i=TVSettings.getBool("_phone_verif_dlg_initial",!0);TVSettings.setValue("_phone_verif_dlg_initial",!1),(0,l.trackEvent)("Phone verification",e+(i?" initial":""),t)}function n(e){var t=$.Deferred();return i.e(29).then(function(n){i(173).phoneDialog(e).on("afterOpen",function(){return o("Show dialog",e.source)}).on("verification:success",function(i){t.resolve(i),o("Verified",e.source)}).on("verification:cancel",function(){t.reject(),o("Cancelled",e.source)}).on("verification:codeExpired",function(){return o("Show dialog",e.source)}).open()}.bind(null,i)).catch(i.oe),t}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}
;return!!window.is_authenticated&&((!0===t.doNotCheckStaff||!user.is_staff&&!user.is_superuser)&&((!0===t.doNotCheckPro||!user.is_pro)&&((!0===t.doNotCheckReputation||!user.reputation)&&(!(!e.enabled("phone_verification")||user.has_phone&&user.phone_verified)&&(!TradingView.isFeatureEnabled("detect-squatters")||!0===t.doNotCheckSuspicious||user.is_suspicious)))))}function s(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r({doNotCheckSuspicious:t.doNotCheckSuspicious,doNotCheckStaff:t.doNotCheckStaff,doNotCheckPro:t.doNotCheckPro,doNotCheckReputation:t.doNotCheckReputation})?t.showDialog?(e={source:t.source,messages_sms:t.messages_sms,messages_phone:t.messages_phone,successful_message:t.successful_message},n(e)):c.promise():c.resolve()}function a(e){return r()?(e||(e={}),e.showDialog=!0,s(e)):c.resolve()}var l,c;Object.defineProperty(t,"__esModule",{value:!0}),t.getDialogDfd=n,t.whenVerified=s,t.verifyIfRequired=a,l=i(20),c=$.Deferred(),window.loginStateChange&&loginStateChange.subscribe(null,function(){window.is_authenticated&&(c=$.Deferred(),r()||c.resolve())})}).call(t,i(3))},,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(215);t.TVPopup=o.TVPopup},function(e,t,i){"use strict";function o(e,t){u.call(this),this.m_model=e,this._data=t,this._paneView=new n(this,e),this.toolname="AlertLabel",this._resetUserEditEnabled(),this._resetProperties(),this.hasAlert.setValue(!0),t.on("change:id",this._resetProperties.bind(this)),t.on("change:id",this._resetUserEditEnabled.bind(this)),t.on("change:extra",this._resetUserEditEnabled.bind(this))}function n(e,t){this.m_alertLabel=e,this.m_model=t,this.m_item=null,this._invalidated=!0,this.labelWidth=10,this.m_alertLabel.alert().on("fired",this.highlight.bind(this)),this.m_alertLabel.alert().on("change:hovered",this.updateHover.bind(this))}function r(e){e.items=[e.item.points[0]],_.call(this,e)}function s(e){this.points=e.item.points,this.alert=e.item.alert,this.borderColor=e.color,this.cursor=e.cursor,this.labelWidth=e.width}function a(e){this.color=e.color,this.points=e.item.points,this.lineWidth=e.lineWidth,this.lineStyle=e.lineStyle}function l(e){this.item=e.item,this.height=e.height,this.width=e.width,this.color=e.color,this.horzLineWidth=e.lineWidth,this.connectingLineWidth=e.connectingLineWidth}var c=i(8).Point,h=i(36).max,u=i(52).DataSource,d=i(11),p=i(155).SelectionRenderer,f=i(68).PaneRendererAbstractShape,_=i(479).PaneRendererTriangleApexLeft,m=i(41).CompositeRenderer,g=i(40),v=i(93),y=i(7).DefaultProperty;inherit(o,u),o.prototype._resetUserEditEnabled=function(){var e=this._data;this._userEditEnabled=!e.isNew()&&e.isPrice()&&e.get("extra")},o.prototype._resetProperties=function(){var e=this._data,t=e.TVSettingsPropertiesKey(),i=TVSettings.getJSON(t,{}),o=TradingView.factoryDefaults("chartproperties.alertsProperties."+(e.isNew()?"fakeLabels":"labels"));e.isNew()||(o.color=""),o.highlightColor="",o.line.style="",o.line.width="",TradingView.merge(o,i),this._properties=new y(t,o,!0)},
o.prototype.data=function(){return this._data},o.prototype.alert=o.prototype.data,o.prototype.alertId=function(){return this.alert().id},o.prototype.getAlert=function(){var e=$.Deferred();return e.resolve(this.alert()),e.promise()},o.prototype.state=function(){var e=this.alert().get("extra"),t=[];return e&&e.conditionData().isChannel?(t.push({price:e.price().upper}),t.push({price:e.price().lower})):t.push({price:e.price()}),{points:t}},o.prototype.restorePoints=function(e,t){var i=this.alert().get("extra");i.conditionData().isChannel?i.price({upper:e[0].price,lower:e[1].price}):i.price(e[0].price)},o.prototype.createServerPoints=function(){},o.prototype.properties=function(){return this._properties},o.prototype.globalProperties=function(){return this.m_model.properties().alertsProperties.labels},o.prototype.paneViews=function(){return TradingView.printing?null:this.properties().visible.value()&&this.globalProperties().visible.value()?[this._paneView]:null},o.prototype.dataWindowView=function(){return null},o.prototype.priceAxisViews=function(){return null},o.prototype.statusView=function(){return null},o.prototype.updateAllViews=function(){this._paneView.update()},o.prototype.pointsCount=function(){return 0},o.prototype.title=function(){return this.alert().title()},o.prototype.startMoving=function(e,t){this._userEditEnabled=!1,this._startMovingPoint=e,this.alert().saveState()},o.prototype.move=function(e,t){var i=e.price,o=this.alert().get("extra");o.conditionData().isChannel&&(0===t?i={upper:i}:1===t&&(i={lower:i})),o.price(i),this._currentMovingPoint=e},o.prototype.endMoving=function(){function e(){setTimeout(function(){t._undoMode=!0,t.m_model._undoModel.undoHistory.undo(),t._undoMode=!1},0)}var t=this,i=this._startMovingPoint,o=this._currentMovingPoint;this._userEditEnabled=!0,delete this._startMovingPoint,delete this._currentMovingPoint,i&&o&&i!==o&&!this._undoMode&&TradingView.alertsDispatcher.openEditDialog(this.alert(),{onEditCancel:e})},o.prototype.showInObjectTree=function(){return!1},o.prototype.isRemovedByStudyTemplates=function(){return!1},o.prototype.isUserDeletable=function(){return!1},n.prototype.update=function(){this._invalidated=!0},n.prototype.invalidate=function(){this.m_model.invalidate(new g(g.FULL_UPDATE))},n.prototype.highlight=function(){var e=function(){this._highlighted=!0,this.update(),this.invalidate(),setTimeout(t,500)}.bind(this),t=function(){this._highlighted=!1,this.update(),this.invalidate()}.bind(this);e(),setTimeout(e,1e3)},n.prototype.updateHover=function(e,t){this._hovered=!!t,this.update(),this.invalidate()},n.prototype._updateImpl=function(){var e,t,i,o,n,r=this,s=this.m_alertLabel.alert(),a=s.get("extra"),l=a&&a.getMainSeries(),h=l&&l.getStyle&&l.getStyle(),u=this.m_model.mainSeries(),p=u&&u.properties(),f=p&&p.style&&p.style.value(),_=s.isPrice()&&(s.get("resolution")===v.interval.value()||s.get("crossInterval"))&&(!s.isJapaneseStyle()&&!u.isJapaneseStyle()||h===f),m=[],g=-1,y=function(e){if(r.m_alertLabel.priceScale().isPercent()){
var t=r.m_model.paneForSource(r.m_alertLabel).mainDataSource().firstValue();e=r.m_alertLabel.priceScale().priceRange().convertToPercent(e,t)}return r.m_alertLabel.priceScale().priceToCoordinate(e)};if(!_)return void(this.m_item=null);e=this.m_model.paneForSource(this.m_alertLabel).width()-this.labelWidth/2+g,t=s.get("extra").price(),s.get("extra").conditionData().isChannel?(i=y(t.upper),o=y(t.lower),m.push(new c(e,i)),m.push(new c(e,o))):(n=y(t),m.push(new c(e,n))),this.m_item={alert:s,points:m},this.m_alertLabel===this.m_model.selectedSource()?this._selectionData={points:m,hittestResult:d.MOVEPOINT}:this._selectionData=null},n.prototype.color=function(){return this._highlighted?this.m_alertLabel.globalProperties().highlightColor.value():this.m_alertLabel.properties().color.value()||this.m_alertLabel.globalProperties().color.value()},n.prototype.renderer=function(){var e,t,i,o,n,c,h;if(this._invalidated&&(this._updateImpl(),this._invalidated=!1),this.m_item)return e=this.m_alertLabel,t=this.m_model,i=this.m_item.alert,o={},o.item=this.m_item,o.barSpacing=t.timeScale().barSpacing(),o.height=this._hovered?12:10,o.width=this._hovered?this.labelWidth+2:this.labelWidth,o.connectingLineWidth=this._hovered?3:1,o.color=this.color(),o.lineWidth=(e.properties().line.width.value()||e.globalProperties().line.width.value())+(this._hovered?2:0),o.lineStyle=e.properties().line.style.value()||e.globalProperties().line.style.value(),o.cursor=t.crossHairSource(),n=new m,i.get("extra").conditionData().isChannel?n.append(new l(o)):n.append(new r(o)),e.properties().line.visible.value()&&e.globalProperties().line.visible.value()&&n.append(new a(o)),c=e===t.hoveredSource(),c&&n.append(new s(o)),h=e===t.selectedSource(),h&&n.append(new p(this._selectionData)),n},inherit(r,_),r.prototype.hitTest=function(e){return f.prototype.hitTest.call(this,e,d.CUSTOM)},s.prototype.draw=function(e){var t=function(e,t,i){var o,n,r,s,a,l,u,d,p,f,_,m,g,v=1,y=12,b=8,S=20,w=20,T=5,P=[$.t("Alert: ")+this.alert.get("description")];for(e.font=y+"px Arial, sans-serif",n=2*S+h($.map(P,function(t){return e.measureText(t).width||0})),r=P.length*y+2*b+(P.length-1)*b,s=2===this.points.length,s?(a=this.points[0],l=this.points[1],p=this.cursor.x<a.x-this.labelWidth,p?(u=this.cursor.x,d=Math.abs(l.y-this.cursor.y)<Math.abs(a.y-this.cursor.y)?l.y:a.y):(u=a.x,d=this.cursor.y,d=Math.min(l.y,d),d=Math.max(a.y,d)),o=new c(u,d)):o=new c(this.cursor.x,this.points[0].y),f={x:o.x-w-T-n,y:o.y-r/2},e.lineWidth=v,e.strokeStyle=this.borderColor,e.fillStyle=t,e.translate(f.x,f.y),e.beginPath(),e.moveTo(0,0),e.lineTo(n,0),e.lineTo(n,r/2-T),e.lineTo(n+T,r/2),e.lineTo(n,r/2+T),e.lineTo(n,r),e.lineTo(0,r),e.lineTo(0,0),e.stroke(),e.fill(),e.textBaseline="bottom",e.fillStyle=i,_=0,m=S,g=0;g<P.length;g++)_+=b+y,e.fillText(P[g],m,_);e.translate(-f.x,-f.y)}.bind(this);i.e(16).then(i.bind(null,236)).then(function(i){var o=i.setThemedColor,n=o("color-alert-bg"),r=o("color-alert-text");t(e,n,r)})},s.prototype.hitTest=function(){return null},a.prototype.draw=function(e){var t,i,o
;for(e.lineWidth=this.lineWidth,e.strokeStyle=this.color,CanvasEx.setLineStyle(e,this.lineStyle),o=0;o<this.points.length;o++)i=this.points[o].y,t=this.points[o].x,e.beginPath(),e.moveTo(t,i),e.lineTo(0,i),e.stroke()},a.prototype.hitTest=function(e){var t,i,o;for(o=0;o<this.points.length;o++)if(t=this.points[o].y,Math.abs(t-e.y)<=3)return i=o,new d(d.MOVEPOINT,i);return null},l.prototype._claculateTriangleHeight=function(e,t){var i=this.height;return e.y<=t.y&&(i=Math.min(i,Math.abs(e.y-t.y)/2)),i},l.prototype.draw=function(e){var t=this.item.points[0],i=this.item.points[1],o=this._claculateTriangleHeight(t,i),n=this.width,r=this.connectingLineWidth,s=this.horzLineWidth/2;e.fillStyle=this.color,e.strokeStyle=this.color,e.lineWidth=r,e.beginPath(),e.moveTo(t.x-n/2,t.y-s),e.lineTo(t.x+n/2,t.y-s),e.lineTo(t.x+n/2,t.y+o),e.closePath(),e.fill(),e.beginPath(),e.moveTo(i.x-n/2,i.y+s),e.lineTo(i.x+n/2,i.y+s),e.lineTo(i.x+n/2,i.y-o),e.closePath(),e.fill(),i.y<t.y||(e.beginPath(),e.moveTo(i.x+n/2,i.y),e.lineTo(t.x+n/2,t.y),e.stroke())},l.prototype.hitTest=function(e){var t,i,o,n=this.item.points[0],r=this.item.points[1],s=this.width,a=this._claculateTriangleHeight(n,r),l=n.x-s/2<=e.x&&e.x<=n.x+s/2&&n.y<=e.y&&e.y<=n.y+a,c=r.x-s/2<=e.x&&e.x<=r.x+s/2&&r.y-a<=e.y&&e.y<=r.y;return l?t=0:c&&(t=1),i=3,o=Math.abs(e.x-(n.x+s/2))<=i&&n.y<=e.y&&e.y<=r.y,void 0!==t?new d(d.CUSTOM,t):o?new d(d.REGULAR):null},e.exports=o},function(e,t,i){"use strict";(function(e){function o(t){return"number"!=typeof t&&(t=TradingView.STUDY_COUNT_LIMIT,t=e.getConfig(r.ProductFeatures.STUDY_ON_STUDY).limit),(0,n.createNoticeDialog)({title:$.t("Warning"),content:$.t("Studies limit exceeded: {0} studies per layout.<br>\nPlease, remove some studies.").format(t)})}var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.createTooManyStudiesNotice=o,n=i(67),r=i(27)}).call(t,i(3))},function(e,t,i){"use strict";(function(e){function o(e){return e&&e.__esModule?e:{default:e}}function n(e){var t,i;if(e&&e.__esModule)return e;if(t={},null!=e)for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(){return 0!==S.length}var c,h,u,d,p,f,_,m,g,v,y,b,S,w;Object.defineProperty(t,"__esModule",{value:!0}),t.TVModal=void 0,c=Object.assign||function(e){var t,i,o;for(t=1;t<arguments.length;t++){i=arguments[t];for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},h=function(){function e(e,t){var i,o;for(i=0;i<t.length;i++)o=t[i],
o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),t.isOpenedModals=l,u=i(14),d=n(u),p=i(88),f=o(p),_=i(127),m=i(62),g=i(131),v=n(g),y=i(148),b=n(y),S=[],w={ajax:{},closingDuration:d.dur/2,overlayTemplate:'<div class="tv-dialog__overlay"></div>',containerTemplate:'<div class="tv-dialog__modal-wrap"><div class="tv-dialog__modal-container"><div class="tv-dialog__modal-body"></div></div></div>',ajaxErrorTemplate:'<div class="tv-dialog__error js-dialog__close">'+$.t("Error")+"</div>"},t.TVModal=function(t){function i(){var e,t,o,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(this,i),e=s(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,c({},w,a))),e.$overlay=$(e.options.overlayTemplate),e.$modalWrap=$(e.options.containerTemplate),e.$body=e.$modalWrap.find(".tv-dialog__modal-body").append(e.$el),e.options.closeOnOutsideClick&&e.$overlay.add(e.$modalWrap).click(function(t){e.isEventOut(t)&&e.close()}),e.on("change:zIndex",function(){e.$overlay.css("z-index",e.zIndex),e.$modalWrap.css("z-index",e.zIndex)}),e.on("destroy",function(){var t=function(){e.$overlay.remove(),e.$modalWrap.remove()};e.opened?(e.close(),setTimeout(t,e.options.closingDuration)):t()}),e.on("beforeOpen",function(){S.push(e)}),e.options.ajax.url&&(t=e.options.ajax.beforeSend||$.noop,o=e.options.ajax.success||!1,n=e.options.ajax.error||$.noop,$.extend(e.options.ajax,{beforeSend:function(){e.trigger("beforeLoading",[e]),e.startSpinner(),t(e)},success:function(t){e.trigger("afterLoading",[e]),e.renderContent(o?o(e,t):t).showContent(),e.trigger("afterLoadingShow",[e])},error:function(){e.renderContent(e.options.ajaxErrorTemplate),n(e),e.trigger("errorLoading",[e])}})),e.on("error",function(t,i){e.$modalWrap[0].getBoundingClientRect().height<e.$content[0].getBoundingClientRect().height&&i.addClass("i-fixed").css({width:e.$el.width()})}),e}return a(i,t),h(i,[{key:"open",value:function(){var e,t=this;if(!this.opened)return this.opened=!0,v.disable(),b.disable(),f.default.setFixedBodyState(!0),e=function(){t.focus(),t.toTop(),$("body").append(t.$overlay.addClass("i-hidden i-closed").css("z-index",t.zIndex)).append(t.$modalWrap.addClass("i-hidden i-closed").css("z-index",t.zIndex)),t.trigger("beforeOpen",[t]),t.$overlay.removeClass("i-hidden"),setTimeout(function(){t.$overlay.removeClass("i-closed")},20),t.options.ajax.url?t.ajaxRequest=$.ajax(t.options.ajax):t.showContent()},f.default.isMobileSafari?setTimeout(function(){return e()},50):e(),this}},{key:"close",value:function(){var t=this;if(this.opened)return this.opened=!1,v.enable(),b.enable(),this.trigger("beforeClose",[this]),this.ajaxRequest&&(this.ajaxRequest.abort(),delete this.ajaxRequest),this.hideContent(),this.$overlay.addClass("i-closed"),setTimeout(function(){t.$modalWrap.addClass("i-hidden").detach(),t.$overlay.addClass("i-hidden").detach(),S=e.without(S,t),f.default.setFixedBodyState(!1),t.trigger("afterClose",[t]),t.unfocus(),
S.length>0&&S[S.length-1].focus(),t.options.destroyOnClose&&t.destroy()},this.options.closingDuration),this}},{key:"showContent",value:function(){var e=this;return this.$modalWrap.removeClass("i-hidden"),setTimeout(function(){e.$modalWrap.removeClass("i-closed")},20),setTimeout(function(){e.trigger("afterOpen",[e]),e.spinner&&e.stopSpinner()},.75*d.dur+20),this}},{key:"hideContent",value:function(){if(this.$el)return this.$modalWrap.addClass("i-closed"),this.unfocus(),this}},{key:"startSpinner",value:function(){return this.spinner=(0,m.unifiedSpinner)("xlarge",{color:d.color.black255,zIndex:!1}),this.spinner.spin(this.$overlay[0]),this}},{key:"stopSpinner",value:function(){if(this.spinner)return this.spinner.stop(),delete this.spinner,this}}]),i}(_.TVDialogAbstract)}).call(t,i(29))},function(e,t,i){"use strict";(function(e,o){function n(e){return e&&e.__esModule?e:{default:e}}function r(e){var t,i;if(e&&e.__esModule)return e;if(t={},null!=e)for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(){y.forEach(function(e){return e.close()})}var h,u,d,p,f,_,m,g,v,y,b,S,w,T,P,C,x;Object.defineProperty(t,"__esModule",{value:!0}),t.TVDialogAbstract=void 0,h=Object.assign||function(e){var t,i,o;for(t=1;t<arguments.length;t++){i=arguments[t];for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},u=function(){function e(e,t){var i,o;for(i=0;i<t.length;i++)o=t[i],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),t.closeAllDialogs=c,d=i(14),p=r(d),i(125),f=i(164),_=n(f),i(201),i(202),m=i(65),g=n(m),v=0,y=[],b=void 0,S=110,w=$(document),T={closeOnEsc:!0,closeButton:!0,focusFirstControl:!0,closeOnOutsideClick:!0,closeButtonAddClass:"",focusClass:"i-focused",template:'<div class="tv-dialog">',errorTemplate:'<div class="tv-dialog__error i-slided{{# errorMod }} tv-dialog__error--{{ errorMod }}{{/ errorMod }}">{{{ error }}}</div>',titleTemplate:'<div class="tv-dialog__section tv-dialog__section--title js-dialog__drag"><div class="js-title-text tv-dialog__title">{{{ title }}}</div></div>',contentWrapTemplate:'<div class="tv-dialog__section tv-dialog__section--no-border">',actionsWrapTemplate:'<div class="tv-dialog__section tv-dialog__section--actions tv-dialog__section--no-border">',closeButtonTemplate:'<div class="tv-dialog__close js-dialog__close">'+i(152)+"</div>",
helpButtonTemplate:'<a href="{{{ link }}}" target="_blank" class="tv-dialog__help apply-common-tooltip" title="{{{ title }}}"></a>',helpActionsMod:"tv-dialog__section--actions_with-help"},P={default:"tv-button tv-button--default",primary:"tv-button tv-button--primary",success:"tv-button tv-button--success",danger:"tv-button tv-button--danger",warning:"tv-button tv-button--warning",link:"tv-button tv-button--link",checkbox:"tv-control-checkbox tv-control-checkbox--in-actions","default-ghost":"tv-button tv-button--default_ghost","primary-ghost":"tv-button tv-button--primary_ghost","success-ghost":"tv-button tv-button--success_ghost","danger-ghost":"tv-button tv-button--danger_ghost","warning-ghost":"tv-button tv-button--warning_ghost"},C={_default:'<div data-name="{{ name }}" class="js-dialog__action-click js-dialog__no-drag {{ class }}">{{ text }}</div>',"submit-success":'<button type="submit" class="tv-button tv-button--success">{{ text }}</button>'},$(function(){T.$wrap=$(document.all&&!document.querySelector?"html":"body")}),x=function(t){function i(){var t,o,n,r,l,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(s(this,i),t=a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this)),t._id=v++,t.loadingActions=[],t.disabledActions=[],t.firstFocusControl=null,t.options=h({},T,c),t.$el=$(e.render(t.options.template,{title:t.options.title,closeButton:t.options.closeButton})),t.$el.addClass("js-dialog"),t.el=t.$el[0],t.options.addClass&&t.$el.addClass(t.options.addClass),t.options.width&&t.$el.css({width:"100%","max-width":t.options.width}),t.options.title&&(t.$title=$(e.render(t.options.titleTemplate,{title:t.options.title})).appendTo(t.$el)),t.$content=$(t.options.contentWrapTemplate).appendTo(t.$el),t.$contentIn=t.$content;t.$contentIn.length;)t.$contentIn=t.$contentIn.children();if(t.$contentIn=t.$contentIn.end(),t.options.content&&t.renderContent(t.options.content),(t.options.actions||t.options.help)&&(t.$content.hasClass("tv-dialog__section")&&t.$content.addClass("tv-dialog__section--no-padding_bottom"),t.$actions=$(t.options.actionsWrapTemplate).appendTo(t.$el)),t.options.actions)for(t.actions={},t.$el.on("click touchend",".js-dialog__action-click",function(e){e.preventDefault(),t.actionDispatcher($(e.currentTarget).data("name"))}),o=function(i){var o,n,r,s,a,l,c=t.options.actions[i];c.type||(c.type="default"),c.class||(c.class=P[c.type]?P[c.type]:P.default),"checkbox"===c.type?(o=new _.default({labelRight:c.text,name:c.name,checked:c.checked}),t.actions[c.name]=o.$el.appendTo(t.$actions),t.actions[c.name].on("change",function(e){setTimeout(function(){return TVSettings.setValue("publish.showIntroText",!o.checked)},0)})):t.actions[c.name]=$(e.render(c.template?c.template:C[c.type]||C._default,c,c)).appendTo(t.$actions),c.method&&"function"==typeof t[c.method]&&t.on("action:"+c.name,t[c.method].bind(t)),c.addClass&&t.actions[c.name].addClass(c.addClass),c.key&&(n=void 0,"string"==typeof c.key&&c.key.split("+").length>1?(r=[],s=c.key.split("+"),n=function(e){r=[]},a=function(e){var i=""+e.keyCode
;-1!==s.indexOf(i)&&r.indexOf(i)&&r.push(i),t._focused&&r.length===s.length&&(r=[],t.actionDispatcher(c.name))},t.on("afterOpen",function(){w.on("keydown",a),w.on("keyup",n)}),t.on("beforeClose",function(){w.off("keydown",a),w.off("keyup",n)})):(l=$.isArray(c.key)?c.key:[c.key],n=function(e){t._focused&&-1!==l.indexOf(e.keyCode)&&t.actionDispatcher(c.name)},t.on("afterOpen",function(){return w.on("keyup",n)}),t.on("beforeClose",function(){return w.off("keyup",n)})))},n=t.options.actions.length-1;n>=0;n--)o(n);return t.options.help&&$(e.render(t.options.helpButtonTemplate,t.options.help)).prependTo(t.$actions.addClass(t.options.helpActionsMod)),t.options.closeButton&&(r=$(t.options.closeButtonTemplate),r.addClass(t.options.closeButtonAddClass||""),l=t.$el,1===t.$el.find(".js-close-button-place").length&&(l=t.$el.find(".js-close-button-place")),r.appendTo(l)),t.setZIndex(S+y.length),c.errorMod&&(t.errorMod=c.errorMod),t.on("afterOpen",function(){t.options.focusFirstControl&&!Modernizr.touch&&(t.firstFocusControl||t.$el.find('input:not([type="hidden"]), textarea').first()).focus()}),t.$el.on("click touchend",".js-dialog__close",t.close.bind(t)),t.$el.on("mousedown touchstart",t.focus.bind(t)),y.push(t),t}return l(i,t),u(i,[{key:"renderContent",value:function(e){return this.$contentIn.html("function"==typeof e?e(this):e),this}},{key:"setDestroyOnClose",value:function(e){this.options.destroyOnClose=e}},{key:"setZIndex",value:function(e){return this.zIndex=e,this.trigger("change:zIndex",[this]),this}},{key:"toTop",value:function(){for(var e=y.length-1;e>=0;e--)y[e].zIndex>this.zIndex&&y[e].setZIndex(y[e].zIndex-1);return this.setZIndex(S+y.length),this}},{key:"isEventOut",value:function(e){var t,i,o;return this.options.isClickOutFn&&void 0!==(t=this.options.isClickOutFn(e))?t:(i=!0,o=$(e.target),o.get(0)!==this.$el.get(0)&&($(">*",this.$el).each(function(){o.get(0)===$(this).get(0)&&(i=!1),0===o.closest("HTML",$(this).get(0)).length&&(i=!1)}),i))}},{key:"focus",value:function(){var e=this;b&&b!==this&&b.unfocus(),this._setFocused(),this._focused=!0,this.$el.addClass(this.options.focusClass),this.trigger("focus",[this]),setTimeout(function(){w.on("mousedown.tv-dialog-unfocus-"+e._id,function(t){e.isEventOut(t)&&(e.unfocus(),w.off("mousedown.tv-dialog-unfocus-"+e._id))})},20)}},{key:"_setFocused",value:function(){b!==this&&(b=this)}},{key:"_setUnfocused",value:function(){b===this&&(b=void 0)}},{key:"unfocus",value:function(){b===this&&(this._setUnfocused(),this._focused=!1,this.$el.removeClass(this.options.focusClass).find(":focus").blur(),this.trigger("unfocus",[this]))}},{key:"isFocused",value:function(){return this._focused}},{key:"setTitle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.$title.toggleClass("tv-dialog__section--one-line apply-overflow-tooltip",t),this.$title.html(e),this}},{key:"setTitleText",value:function(e){this.$title.find(".js-title-text").text(e)}},{key:"actionDispatcher",value:function(e){
this.disabledActions.includes(e)||this.loadingActions.includes(e)||this.trigger("action:"+e,[this])}},{key:"toggleAction",value:function(e,t){return!t&&this.disabledActions.includes(e)?this.disabledActions.push(e):t&&this.disabledActions.includes(e)&&(this.disabledActions=o.without(this.disabledActions,e)),this.actions[e].toggleClass("i-disabled",!t),this}},{key:"actionLoader",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"init";return this.actions[e].tvButtonLoader(i),"init"===i&&(this.actions[e].off("tv-button-loader:start.dialog-action").on("tv-button-loader:start.dialog-action",function(){t.loadingActions.push(e)}),this.actions[e].off("tv-button-loader:stop.dialog-action").on("tv-button-loader:stop.dialog-action",function(){t.loadingActions=o.without(t.loadingActions,e)})),this}},{key:"error",value:function(t){var i=$(e.render(this.options.errorTemplate,{error:t,errorMod:this.errorMod})).appendTo(this.$el),o=function(){i.addClass("i-slided"),setTimeout(function(){return i.remove()},.75*p.dur)};return setTimeout(function(){return i.removeClass("i-slided")},20),w.one("touchstart mousedown keydown",o),this.trigger("error",[this,i]),this}},{key:"destroy",value:function(){y=o.without(y,this);for(var e=0;e<y.length;e++)y[e].setZIndex(S+e);this.trigger("destroy",[this])}},{key:"isOpened",value:function(){return!!this.opened}}]),i}(g.default),t.TVDialogAbstract=x,w.on("keyup.tv-dialog-esc",function(e){b&&b.options.closeOnEsc&&!$(".tv-dropdown__body.i-opened").length&&!$(e.target).closest(".js-dialog-skip-escape").length&&27===e.keyCode&&b.close()})}).call(t,i(21),i(29))},function(e,t){},function(e,t){},function(e,t,i){"use strict";(function(t){var i=TradingView.postMessageWrapper=function(){var e,i={},o={},n={},r=0,s=0,a="TradingView";return window.addEventListener&&window.addEventListener("message",function(n){var r;try{r=JSON.parse(n.data),t.enabled("charting_library_debug_mode")&&console.log("PostMessage: incoming message: "+JSON.stringify(r))}catch(e){return}if(r.provider&&r.provider===a)if("get"===r.type){if(!o[r.name])return;o[r.name].forEach(function(t){"function"==typeof t&&t.call(r,r.data,function(t){var i={id:r.id,type:"on",name:r.name,client_id:r.client_id,data:t,provider:a};e.postMessage(JSON.stringify(i),"*")})})}else if("on"===r.type)i[r.client_id]&&i[r.client_id][r.id]&&(i[r.client_id][r.id].call(r,r.data),delete i[r.client_id][r.id]);else if("post"===r.type){if(!o[r.name])return;o[r.name].forEach(function(e){"function"==typeof e&&e.call(r,r.data,function(){})})}}),function(t,l){i[l]={},n[l]=t,e=t;var c="";return{on:function(e,t,i){o[e]&&i||(o[e]=[]),o[e].push(t)},get:function(e,t,o){var s={id:r++,type:"get",name:e,client_id:l,data:t,provider:a};i[l][s.id]=o,n[l].postMessage(JSON.stringify(s),"*")},post:function(e,t,i){var o={id:s++,type:"post",name:t,client_id:c,data:i,provider:a};e&&"function"==typeof e.postMessage&&e.postMessage(JSON.stringify(o),"*")},setClientId:function(e){c=e}}}}();e.exports=i}).call(t,i(3))},function(e,t,i){"use strict";function o(e){var t,i
;if(e&&e.__esModule)return e;if(t={},null!=e)for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r,s,a,l,c;Object.defineProperty(t,"__esModule",{value:!0}),t.ControlError=void 0,r=function(){function e(e,t){var i,o;for(i=0;i<t.length;i++)o=t[i],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),i(240),s=i(30),a=i(14),l=o(a),c=t.ControlError=function(){function e(t){function o(e,t){return e.some(function(e){return t.test(e)})}var r,s,a,l,c=this,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=h.addFocusEvents,d=void 0===u||u,p=h.addErrorOnElement,f=void 0===p||p,_=h.leftMessageAlign,m=void 0!==_&&_,g=h.maxWidth,v=void 0===g?void 0:g;n(this,e),r=$(t),s=r.hasClass("tv-control-checkbox__input"),a=r.hasClass("tv-control-number-input"),l=o(r.attr("class").split(/\s+/),/^.+--size_small$/),this.options={smallMode:l,addErrorOnElement:f,maxWidth:v},s&&(r=r.closest(".tv-control-checkbox")),this.errors={},this.$control=r,r.data("tv-control-material")?this.$toWrap=r.data("tv-control-material").$el:r.data("tv-control-error-wrap")?this.$toWrap=r.data("tv-control-error-wrap"):this.$toWrap=r,this.$toWrap.parent().hasClass("tv-control-error")||this.$toWrap.wrap('<div class="tv-control-error '+(a?"tv-control-error--for-number-input":"")+'"></div>'),this.$el=this.$toWrap.parent(),s&&this.$el.addClass("tv-control-error--msg_left"),l&&this.$el.addClass("tv-control-error--size_small"),s||(this.$icon=this.$el.find(".tv-control-error__icon"),this.$icon.length||(this.$icon=$('<span class="tv-control-error__icon">'+$("<div>").append($(i(228)).attr("focusable","false")).html()+"</span>").appendTo(this.$el)),r.data("tv-control-material")&&this.$icon.addClass("tv-control-error__icon--material-input")),this.$widthControlWrapper=this.$el.find(".tv-control-error__width-control-wrapper"),this.$widthControlWrapper.length||(this.$widthControlWrapper=$('<div class="tv-control-error__width-control-wrapper">').appendTo(this.$el)),this.$widthControlWrapper.css("width",this.options.maxWidth),m&&this.$widthControlWrapper.addClass("tv-control-error__width-control-wrapper--from-left"),this.$messages=this.$el.find(".tv-control-error__messages"),this.$messages.length||(this.$messages=$('<span class="tv-control-error__messages"></span>').appendTo(this.$widthControlWrapper)),r.on("focus",function(){c.$el.addClass("i-focus"),r.removeClass("i-error"),d&&r.on("keyup.tv-control-error",function(e){9!==e.keyCode&&16!==e.keyCode&&(c.clear().render(),c.$el.removeClass("i-focus"),r.off("keyup.tv-control-error"))})}),r.on("blur",function(){c.$el.removeClass("i-focus"),c.hasErrors()&&r.addClass("i-error")})}return r(e,[{key:"add",value:function(e){var t=e.id,i=e.message;return this.errors[t]=i,this}},{key:"remove",value:function(e){var t=e.id;return delete this.errors[t],this}},{key:"clear",value:function(){
return this.errors={},this}},{key:"hasErrors",value:function(){return!!Object.keys(this.errors).length}},{key:"render",value:function(){var e,t,i=this;if(this.emptyTimeout&&clearTimeout(this.emptyTimeout),e=Object.keys(this.errors),e.length)for(this.$messages.empty(),this.$el.addClass("i-error"),this.options.addErrorOnElement&&this.$control.addClass("i-error"),t=0;t<e.length;t++)this.errors[e[t]]&&$('<span class="tv-control-error__message">'+this.errors[e[t]]+"</span>").appendTo(this.$messages);else this.$el.removeClass("i-error"),this.$control.removeClass("i-error"),this.emptyTimeout=setTimeout(function(){i.$messages.empty()},l.dur);return this}}]),e}(),$.fn.tvControlError=(0,s.createTvBlockWithInstance)("tv-control-error",function(e,t){return new c(e,t)})},function(e,t,i){"use strict";function o(e){return/\d{0,2}_discount$/.test(e)}function n(e){return RegExp(t.TRIAL_SUFFIX+"$").test(e)}function r(e){return e&&e.split(t.TRIAL_SUFFIX)[0]}function s(e){var t=e.match(/(\d{0,2})_discount$/);return t?+t[1]||50:0}function a(e){switch(e){case"pro":return window.t("Pro");case"pro_realtime":return window.t("Pro+");case"pro_premium":return window.t("Premium")}return e}function l(e){return"y"===e?365:"2y"===e?730:30}function c(e){return RegExp(t.DELAY_SUFFIX+"$").test(e)}function h(e){return e&&e.split(t.DELAY_SUFFIX)[0]}Object.defineProperty(t,"__esModule",{value:!0}),i(5),t.TRIAL_SUFFIX="_trial",t.DELAY_SUFFIX="_dly",t.EA_SUFFIX="_discount",t.UPSALE_SUFFIX="_year_6_months_free",t.isEarlyAccess=o,t.isTrialProduct=n,t.getProductForTrial=r,t.getDiscountFromEarlyAccess=s,t.humanizeProPlan=a,t.getAmountOfDaysForBillingCycle=l,t.isDelayExchange=c,t.getDelayExchangeName=h},function(e,t,i){"use strict";(function(e,t){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n,r,s,a,l=function(){function e(e,t){var i,o;for(i=0;i<t.length;i++)o=t[i],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();i(242),n=i(30),i(146),r=i(72),s={wrap:'<span class="tv-control-select__wrap tv-dropdown-behavior {{ class }}{{# touch }} tv-control-select__wrap--touch{{/ touch }}{{# disabled }} i-disabled{{/ disabled }}"><span class="tv-control-select__control{{^ touch }} tv-dropdown-behavior__button{{/ touch }}{{# disabled }} i-disabled{{/ disabled }}"><span class="tv-control-select__control-inner"></span></span>{{^ touch }}<span class="tv-control-select__dropdown tv-dropdown-behavior__body {{ dropdown_class }} i-hidden"><span class="tv-control-select__scroll tv-dropdown-behavior__scroll"><span class="tv-dropdown-behavior__inscroll">{{> route }}</span></span></span>{{/ touch }}<span class="tv-control-select__caret js-dropdown-toggle"></span></span>',route:"{{# items }}{{# option }}{{> option }}{{/ option }}{{^ option }}{{# optgroup }}{{> optgroup }}{{/ optgroup }}{{/ option }}{{/ items }}",
optgroup:'<span class="tv-dropdown-behavior__item tv-control-select__optgroup-label">{{ label }}</span>{{> route}}',option:'<span data-id="{{ id }}" class="tv-dropdown-behavior__item tv-control-select__option{{# disabled }} i-disabled{{/ disabled }}">\n\t\t\t<span class="tv-control-select__option-wrap">\n\t\t\t{{# multiple }}\n\t\t\t\t<span class="tv-control-checkbox">\n\t\t\t\t\t<input class="tv-control-checkbox__input" type="checkbox" {{# selected }} checked{{/ selected }}>\n\t\t\t\t\t<span class="tv-control-checkbox__box">'+r+'</span>\n\t\t\t\t\t<span class="tv-control-checkbox__ripple js-ripple"></span>\n\t\t\t\t</span>\n\t\t\t\t<span class="tv-control-checkbox__label">{{ label }}</span>\n\t\t\t{{/ multiple }}\n\t\t\t{{^ multiple }}\n\t\t\t\t{{ label }}\n\t\t\t{{/ multiple }}\n\t\t\t</span>\n\t\t</span>'},a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t),this._options=Object.assign({noAnimation:!0},e),this.touch=Modernizr.touch,this.$select=this._options.$select,this._selectElement=this.$select[0],this.multiple=!!this.$select.attr("multiple"),this._minDisplayCount=this._options.minDisplayCount||1,this._emptyString=this._options.emptyString||$.t("Nothing selected",{context:"combobox_input"}),this.disabled=!!this.$select.is(":disabled"),this.options=[],this.filterQuery=[],this.items=this._parseDomItems(this.$select),this._render(),e.initialValue&&this.val(e.initialValue),this.$el.insertBefore(this.$select),this.$select.detach().addClass("i-inited").appendTo(this.$el)}return l(t,[{key:"val",value:function(e){this.multiple?this._setMultipleValues(e):this._setSingleValue(this._findOption(e))}},{key:"enable",value:function(){this.disabled=!1,this.$el.add(this.$dropdown).removeClass("i-disabled"),this.touch||(this.$el.tvDropdown("enable"),this.$control.attr("tabindex",this.$select.attr("tabindex")||0))}},{key:"disable",value:function(){this.disabled=!0,this.$el.add(this.$dropdown).addClass("i-disabled"),this.touch||(this.$el.tvDropdown("disable"),this.$control.removeAttr("tabindex"))}},{key:"toggle",value:function(){this.disabled||(this.touch?this.$select.click():this.$el.tvDropdown("toggle"))}},{key:"open",value:function(){this.disabled||(this.touch?this.$select.click():this.$el.tvDropdown("open"))}},{key:"close",value:function(){this.disabled||(this.touch?this.$select.click():(this._focusOption(this._selectElement.selectedIndex),this.$el.tvDropdown("close")))}},{key:"destroy",value:function(){this.$select.off("change"),this.$dropdown.off("click"),this.$select.removeClass("i-inited").insertBefore(this.$el),this.$el.tvDropdown("destroy"),this.$el.remove()}},{key:"updateItems",value:function(){var e,t,i,o,n;if(this.options=[],this.items=this._parseDomItems(this.$select),e=this._renderDropdown(),!this.touch)for(this.$dropdown.find(".tv-control-select__option").remove(),t=this.$dropdown.find(".tv-dropdown-behavior__inscroll"),this.$options=e.find(".tv-control-select__option"),i=0;i<this.$options.length;i++)o=$(this.$options[i]),n=o.data("id"),
this.options[n]&&(this.options[n].$el=o,t.append(o));this.multiple?(this._updateSelectBoxTitle(),this._updateCheckBoxes()):this._updateSingleView(this._selectElement.selectedIndex)}},{key:"_focusOption",value:function(e){var t,i,o,n,r,s,a=this.options[e].$el;if(this._focusedOption=e,!this.touch){if(this._clearFocus(),a.addClass("i-active"),!this.dropdownScroll||!this.opened)return;t=this.dropdownScroll.currentPosition(),i=a.outerHeight(),o=a.position().top,n=this.dropdownScroll.getContainerHeightWithoutHeader(),r=o<-t,s=-t+n<o+i,r?this.dropdownScroll.scrollTo(o):s&&this.dropdownScroll.scrollTo(o+i)}}},{key:"_setSingleValue",value:function(e){var t=this.options[e].value;(this.$select.val()&&""+this.$select.val())!==""+t&&this.$select.val(t).trigger("change")}},{key:"_updateSingleView",value:function(e){var t=this.options[e];t&&(this._focusOption(e),this._selectElement.selectedIndex=e,this.$controlInner.text(t.label),this.$controlInner.toggleClass("tv-control-select__control-inner--option-disabled",t.disabled))}},{key:"_toggleOption",value:function(e){var t,i,o=this,n=this.options[e].value,r=this.$select.val()||[],s=r.indexOf(n);-1!==s?r.splice(s,1):r.length?(t=this.options[this._findOption(n)].id,i=r.find(function(e){return o.options[o._findOption(e)].id>t}),r.splice(i?r.indexOf(i):0,0,n)):r.push(n),this._setMultipleValues(r)}},{key:"_updateCheckBoxes",value:function(){var e,t,i=this.$select.val()||[];for(e=0;e<this.items.length;e++)t=this.items[e],t.$el.find(".tv-control-checkbox__input").prop("checked",-1!==i.indexOf(t.value))}},{key:"_updateSelectBoxTitle",value:function(){var e,t=this,i=this.$select.val()||[];i.length?i.length===this.items.length?this.$controlInner.text($.t("All items",{context:"combobox_input"})):i.length>this._minDisplayCount?this.$controlInner.text($.t("{0} item",{plural:"{0} items",count:i.length,context:"combobox_input"}).format(i.length)):(e=i.map(function(e){return t.options[t._findOption(e)].label}),this.$controlInner.text(e.join(", "))):this.$controlInner.text(this._emptyString)}},{key:"_setMultipleValues",value:function(e){var t,i;for(this.$select.find("option").prop("selected",!1),t=0;t<e.length;t++)i=e[t],this.$select.find('option[value="'+i+'"]').prop("selected",!0);this.$select.trigger("change")}},{key:"_clearFocus",value:function(){this.$options.removeClass("i-active")}},{key:"_findOption",value:function(e){var t,i=Object.keys(this.options);for(t=0;t<i.length;t++)if(""+this.options[i[t]].value==""+e)return this.options[i[t]].id}},{key:"_parseDomItems",value:function(e){var t,i,o,n=e.children(),r=[];for(t=0;t<n.length;t++)i=$(n[t]),o=void 0,"optgroup"===i.prop("tagName").toLowerCase()?o={optgroup:!0,label:i.attr("label"),items:this._parseDomItems(i)}:"option"===i.prop("tagName").toLowerCase()&&(o={id:i[0].index,option:!0,label:i.text(),value:i.attr("value"),disabled:i.is(":disabled")},this.options[o.id]=o),r.push(o);return r}},{key:"_render",value:function(){var e,t,i,o=this;if(this.$el=this._renderDropdown(),this.$control=this.$el.find(".tv-control-select__control"),
this.$controlInner=this.$el.find(".tv-control-select__control-inner"),!this.touch)for(this.$dropdown=this.$el.find(".tv-control-select__dropdown"),this.$options=this.$el.find(".tv-control-select__option"),e=0;e<this.$options.length;e++)t=$(this.$options[e]),i=t.data("id"),this.options[i]&&(this.options[i].$el=t);this.multiple?(this._updateSelectBoxTitle(),this._updateCheckBoxes()):(-1===this._selectElement.selectedIndex&&(this._selectElement.selectedIndex=0),this._updateSingleView(this._selectElement.selectedIndex)),this.$select.on("change",function(e){o.multiple?(o._updateSelectBoxTitle(),o._updateCheckBoxes()):o._updateSingleView(o._findOption(o.$select.val()))}),this.touch||(this.$el.tvDropdown({scroll:!0,adaptBody:!0,noAnimation:this._options.noAnimation}),this.dropdownScroll=this.$el.tvDropdown("get","scroll"),this.$dropdown.on("click",".tv-control-select__option",function(e){var t=parseInt($(e.currentTarget).data("id"));o.options[t]&&!o.options[t].disabled&&(o.multiple?o._toggleOption(t):(o._setSingleValue(t),o.close()))}),this.$el.on("beforeOpenMenu",function(){o.opened=!0}),this.$el.on("afterCloseMenu",function(){o.opened=!1,o.filterQuery=[],o.multiple||""+o._focusedOption==""+o._selectElement.selectedIndex||o._focusOption(o._selectElement.selectedIndex),o.multiple&&o._clearFocus()}),this.$el.on("click",function(){o.$control.focus()}),this.$el.on("keydown",function(e){o._filter(e)}),this.disabled?this.disable():this.enable())}},{key:"_renderDropdown",value:function(){return $(e.render(s.wrap,{items:this.items,class:this.$select.attr("class"),touch:this.touch,multiple:this.multiple,disabled:this.disabled,dropdown_class:this._options.addDropdownClass},s)).removeClass("tv-control-select")}},{key:"_filter",value:function(e){var t,i,o,n,r,s,a,l=this;if(9===e.which)return void this.close();if(13!==e.which||this.opened){if((40===e.which||32===e.which)&&!this.opened)return this.open(),void e.preventDefault();if(e.preventDefault(),this.opened||this.open(),t=String.fromCharCode(e.which).toLowerCase(),i=[9,13,27,38,40],t&&-1===i.indexOf(e.which)){for(this.filterQuery.push(t),o=this.filterQuery.join(""),n=void 0,r=Object.keys(this.options),s=0;s<r.length;s++)if(0===this.options[r[s]].label.toLowerCase().indexOf(o)&&!this.options[r[s]].disabled){n=this.options[r[s]].id;break}void 0!==n&&this._focusOption(n),this.clearFilter&&clearTimeout(this.clearFilter),this.clearFilter=setTimeout(function(){l.filterQuery=[]},500)}32!==e.which&&13!==e.which||!this.opened||(this.multiple?this._toggleOption(this._focusedOption):(this._setSingleValue(this._focusedOption),this.close(),this.$el.one("keyup",function(e){return e.stopPropagation()}))),a=function(e){var t,i=void 0;return l.options[l._focusedOption]?(t=l.options[l._focusedOption].$el[e](l.$dropdown,".tv-control-select__option:not(.i-disabled)"),i=t.length?t.data("id"):l._focusedOption):i=l.$options.first(".tv-control-select__option:not(.i-disabled)").data("id"),i},40===e.which&&(this.filterQuery=[],this._focusOption(a("nextUntil"))),38===e.which&&(this.filterQuery=[],
this._focusOption(a("prevUntil"))),27===e.which&&this.close()}}}]),t}(),$.fn.tvControlSelect=(0,n.createTvBlockWithInstance)("tv-control-select",function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new a(t.extend(i,{$select:e}))})}).call(t,i(21),i(29))},function(e,t,i){"use strict";function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"y",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i.paymentMethod||n.PAYPAL;runOrSignIn(function(){if("function"==typeof i.canVisit&&!i.canVisit())return void(location.href="/");$('\n\t\t\t<form action="/order/" method="post" '+(i.newWindow?'target="_blank"':"")+'>\n\t\t\t\t<input type="hidden" name="product" value="'+e+'"/>\n\t\t\t\t<input type="hidden" name="billing_cycle" value="'+t+'"/>\n\t\t\t\t<input type="hidden" name="fixed_billing_cycle" value="'+(i.fixedCycle?"1":"")+'"/>\n\t\t\t\t<input type="hidden" name="exchanges_only" value="'+(i.exchangesOnly?"1":"")+'"/>\n\t\t\t\t<input type="hidden" name="is_upgrade_from_m" value="'+(i.upgradeFromM?"1":"")+'"/>\n\t\t\t\t<input type="hidden" name="selected_packages" value="'+(i.selectedPackages||[]).join(",")+'"/>\n\t\t\t\t<input type="hidden" name="payment_method" value="'+o+'"/>\n\t\t\t</form>\n\t\t').appendTo(document.body).submit()},{source:o===n.BITCOIN?"Bitcoin payment":"Paypal payment"})}Object.defineProperty(t,"__esModule",{value:!0});var n={PAYPAL:"paypal",BITCOIN:"bitcoin"};TradingView.visitPaymentPage=o,t.default=o,e.exports=t.default},function(e,t,i){"use strict";function o(e){for(var i=0;i<t.availableTimezones.length;i++)if(e===t.availableTimezones[i].id)return!0;return!1}var n,r,s,a,l,c,h;for(Object.defineProperty(t,"__esModule",{value:!0}),i(5),n=i(210),r=[{id:"Etc/UTC",title:$.t("UTC")},{id:"exchange",title:$.t("Exchange")}],s=[{id:"Pacific/Honolulu",title:$.t("Honolulu"),offset:0},{id:"America/Vancouver",title:$.t("Vancouver"),offset:0},{id:"America/Los_Angeles",title:$.t("Los Angeles"),offset:0},{id:"America/Phoenix",title:$.t("Phoenix"),offset:0},{id:"America/El_Salvador",title:$.t("San Salvador"),offset:0},{id:"America/Mexico_City",title:$.t("Mexico City"),offset:0},{id:"America/Chicago",title:$.t("Chicago"),offset:0},{id:"America/Bogota",title:$.t("Bogota"),offset:0},{id:"America/Toronto",title:$.t("Toronto"),offset:0},{id:"America/New_York",title:$.t("New York"),offset:0},{id:"America/Caracas",title:$.t("Caracas"),offset:0},{id:"America/Argentina/Buenos_Aires",title:$.t("Buenos Aires"),offset:0},{id:"America/Sao_Paulo",title:$.t("Sao Paulo"),offset:0},{id:"Europe/London",title:$.t("London"),offset:0},{id:"Europe/Madrid",title:$.t("Madrid"),offset:0},{id:"Europe/Paris",title:$.t("Paris"),offset:0},{id:"Europe/Rome",title:$.t("Rome"),offset:0},{id:"Europe/Belgrade",title:$.t("Belgrade"),offset:0},{id:"Europe/Berlin",title:$.t("Berlin"),offset:0},{id:"Africa/Cairo",title:$.t("Cairo"),offset:0},{id:"Europe/Luxembourg",title:$.t("Luxembourg"),offset:0},{id:"Europe/Warsaw",title:$.t("Warsaw"),offset:0},{id:"Europe/Zurich",title:$.t("Zurich"),offset:0},{
id:"Europe/Athens",title:$.t("Athens"),offset:0},{id:"Europe/Istanbul",title:$.t("Istanbul"),offset:0},{id:"Asia/Jerusalem",title:$.t("Jerusalem"),offset:0},{id:"Asia/Kuwait",title:$.t("Kuwait"),offset:0},{id:"Europe/Moscow",title:$.t("Moscow"),offset:0},{id:"Asia/Riyadh",title:$.t("Riyadh"),offset:0},{id:"Asia/Qatar",title:$.t("Qatar"),offset:0},{id:"Asia/Tehran",title:$.t("Tehran"),offset:0},{id:"Asia/Dubai",title:$.t("Dubai"),offset:0},{id:"Asia/Muscat",title:$.t("Muscat"),offset:0},{id:"Asia/Ashkhabad",title:$.t("Ashkhabad"),offset:0},{id:"Asia/Kolkata",title:$.t("Kolkata"),offset:0},{id:"Asia/Almaty",title:$.t("Almaty"),offset:0},{id:"Asia/Bangkok",title:$.t("Bangkok"),offset:0},{id:"Asia/Taipei",title:$.t("Taipei"),offset:0},{id:"Asia/Singapore",title:$.t("Singapore"),offset:0},{id:"Asia/Shanghai",title:$.t("Shanghai"),offset:0},{id:"Asia/Chongqing",title:$.t("Chongqing"),offset:0},{id:"Asia/Hong_Kong",title:$.t("Hong Kong"),offset:0},{id:"Asia/Seoul",title:$.t("Seoul"),offset:0},{id:"Asia/Tokyo",title:$.t("Tokyo"),offset:0},{id:"Australia/Brisbane",title:$.t("Brisbane"),offset:0},{id:"Australia/Adelaide",title:$.t("Adelaide"),offset:0},{id:"Australia/Sydney",title:$.t("Sydney"),offset:0},{id:"Pacific/Auckland",title:$.t("New Zealand"),offset:0},{id:"Pacific/Fakaofo",title:$.t("Tokelau"),offset:0},{id:"Pacific/Chatham",title:$.t("Chatham Islands"),offset:0}],a=0,l=s;a<l.length;a++)c=l[a],h=n.parseTzOffset(c.id),c.title="("+h.string+") "+c.title,c.offset=h.offset;s.sort(function(e,t){var i=e.offset-t.offset;return 0!==i?i:e.title.localeCompare(t.title)}),t.availableTimezones=r.concat(s),t.timezoneIsAvailable=o,t.monthsShort=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],t.futuresRoots=[{d:"E-Mini S&P 500",t:"ES"},{d:"E-Mini Nasdaq 100",t:"NQ"},{d:"Gold",t:"GC"},{d:"Silver",t:"SI"},{d:"Crude Oil WTI",t:"CL"},{d:"Natural Gas",t:"NG"},{d:"Australian Dollar",t:"6A"},{d:"Australian Dollar (Floor)",t:"AD"},{d:"Euro FX",t:"6E"},{d:"Euro FX (Floor)",t:"EC"},{d:"Corn",t:"ZC"},{d:"Corn (Floor)",t:"C"},{d:"Eurodollar",t:"GE"},{d:"Eurodollar (Floor)",t:"ED"}]},function(e,t,i){"use strict";var o,n=i(9).assert,r=i(55),s=r.rgba,a=r.rgbaToString,l=r.parseRgb,c=i(771),h=i(287),u=i(231),d=i(445),p=i(1).LineDataSource,f=i(132).StudyLineDataSource,_=i(87).LineToolBarsPattern,m=i(87).LineToolCallout,g=i(891),v=i(34),y=v.Study,b=v.prepareStudyPropsStateForLoadChart,S=v.prepareStudyPropertiesForLoadChart,w=v.createStudy,T=i(145),P=i(32),C=i(7).DefaultProperty,x=i(39),E=i(3),L=i(0).getLogger("Chart.Serialization"),I=i(197),A=i(112),k=i(27).ProductFeatures,M=i(43),O=i(87).LineToolParallelChannel,D=i(87).LineToolTrendAngle,V=i(87).LineToolGhostFeed,R=i(87).LineToolElliott,B=i(52).PriceDataSource,N=i(286),z=i(40),F=i(33);c.version=2,c.prototype.state=function(e,t){var i,o,n,r={};for(r.panes=[],i=0;i<this.panes().length;i++)r.panes.push(this.panes()[i].state(!0,e,!1,t));return r.timeScale=this.m_timeScale.state(e),o=null,o=this.publishedChartsTimelineSource(),n=this.properties(),r.chartProperties={
paneProperties:n.paneProperties.state(),scalesProperties:n.scalesProperties.state(),publishedChartsTimelineProperties:o?o.state(e):void 0,chartEventsSourceProperties:n.chartEventsSourceProperties.state()},n.chartEventsSourceProperties&&(r.chartProperties.chartEventsSourceProperties=n.chartEventsSourceProperties.state()),r.version=c.version,r.timezone=this.timezone(),r},c.prototype.asyncState=function(e){return this.publishedChartsTimelineSource().asyncState(e).pipe(function(e){var t={};return t.chartProperties={publishedChartsTimelineProperties:e},t})},c.prototype.chartPropertiesTransparencyMigrate=function(e){var t,i,o;e.chartProperties.paneProperties.crossHairProperties&&(o=e.chartProperties.paneProperties.crossHairProperties,F.isHexColor(o.color)&&(i=o.transparency/100,t=l(o.color),o.color=a(s(t,i)))),e.chartProperties.paneProperties.dataWindowProperties&&(o=e.chartProperties.paneProperties.dataWindowProperties,F.isHexColor(o.color)&&(i=o.transparency/100,t=l(o.color),o.color=a(s(t,i))))},c.prototype.resetDeferredStudies=function(){new o(this).reset()},c.prototype._getExceedingChildStudies=function(e){var t,i,o,n,r,s,a,l,c=[];for(t=0;t<e.length;++t)c=c.concat(e[t].sources||[]);for(i=0,o=1,o=E.getConfig(k.STUDY_ON_STUDY).child_limit,n=[],r={},s=0,a=1e6;c.length&&--a;)l=c[s],(l.ownerSource&&r[l.ownerSource]||!l.ownerSource)&&(r[l.id]=l,c.splice(c.indexOf(l),1),l.ownerSource&&"Study"===l.type&&l.state&&l.state.isChildStudy&&++i>o&&n.push(l)),s=(s+1)%c.length;return n},c.prototype.restoreState=function(e,t){var i,n,r,s,a,l,c,h,u,d,f,_;if(new o(this).reset(),i={},!e.panes)return void L.logDebug("ChartModel.restoreState: invalid state");if(!Array.isArray(e.panes))return void L.logDebug("ChartModel.restoreState: invalid state");if(e.panes.length<1)return void L.logDebug("ChartModel.restoreState: invalid state");if(e.chartProperties&&!e.chartProperties.timezone&&(e.chartProperties.timezone=e.timezone),e.chartProperties&&(n=TradingView.factoryDefaults("chartproperties").scalesProperties,TradingView.merge(n,e.chartProperties.scalesProperties),!("showLastValue"in n)||"showSeriesLastValue"in n||"showStudyLastValue"in n||(n.showSeriesLastValueProperty=n.showLastValue,n.showStudyLastValueProperty=n.showLastValue),"showSeriesLastValue"in n&&(i.showSeriesLastValueProperty=!0),"showStudyLastValue"in n&&(i.showStudyLastValueProperty=!0),e.chartProperties.paneProperties.vertGridProperties=e.chartProperties.paneProperties.vertGridProperties||TradingView.clone(e.chartProperties.paneProperties.gridProperties),e.chartProperties.paneProperties.horzGridProperties=e.chartProperties.paneProperties.horzGridProperties||TradingView.clone(e.chartProperties.paneProperties.gridProperties),this._properties.paneProperties.merge(e.chartProperties.paneProperties),this._properties.scalesProperties.merge(n),e.chartProperties.timezone&&this._properties.timezone.setValue(e.chartProperties.timezone),
e.chartProperties.chartEventsSourceProperties&&this._properties.chartEventsSourceProperties&&this._properties.chartEventsSourceProperties.merge(e.chartProperties.chartEventsSourceProperties),this.m_timeScale.restoreState(e.timeScale,t)),e.timeScale&&this.m_timeScale.restoreState(e.timeScale,t),!this.readOnly()&&(r=this._getExceedingChildStudies(e.panes),r.length)){for(s=e.panes.length-1;s>=0;--s){for(a=e.panes[s],l=a.sources.length-1;l>=0;--l)c=a.sources[l],~r.indexOf(c)&&a.sources.splice(l,1);a.sources.length||e.panes.splice(s,1)}setTimeout(function(){M.createGoProDialog({feature:"studyOnStudy"}).then(function(e){e.open()})},500)}for(h=e.panes,this.panes()[0].restoreState(h[0],t,e.version,i),s=1;s<e.panes.length;s++)a=this.panes()[s]||this.createPane(),a.restoreState(e.panes[s],t,e.version,i);for(e.chartProperties&&e.chartProperties.publishedChartsTimelineProperties&&this.publishedChartsTimelineSource().restoreData(e.chartProperties.publishedChartsTimelineProperties,t),this._invalidateBarColorerCaches(),u=this.dataSources(),d=0,s=0;s<u.length;s++)f=u[s],TradingView.isInherited(f.constructor,p)&&(d++,f.calcIsActualSymbol());return this._version=e.version,this.updateTimeScaleBaseIndex(),this.recalculateAllPanes(),this.invalidate(new z(z.FULL_UPDATE)),_=TVLocalStorage.getItem("linetools_limit")||1e3,window.is_authenticated&&window.user&&window.user.settings&&(_=window.user.settings.linetools_limit||_),d>_?{lines_limit_exceeded:!0,line_tools_count:d}:{}},N.prototype.state=function(e,t,i,o){function n(e){return i&&!e.isSavedInStudyTemplates()||e instanceof I||!e.state||!e.state()||!e.isSavedInChart(t)||o&&e.isActualSymbol&&!e.isActualSymbol()}var r,s,a={};if(e)for(a.sources=[],r=0;r<this.m_dataSources.length;r++)n(this.m_dataSources[r])||a.sources.push(this.m_dataSources[r].state(t));for(a.leftAxisState=this.m_leftPriceScale.state(),a.leftAxisState.m_isLockScale&&null!==this._lastLeftPriceScaleRatio&&(a.leftPriceScaleRatio=this._lastLeftPriceScaleRatio),a.leftAxisSources=[],r=0;r<this.m_leftPriceScale.dataSources().length;r++)n(this.m_leftPriceScale.dataSources()[r])||a.leftAxisSources.push(this.m_leftPriceScale.dataSources()[r].id());for(a.rightAxisState=this.m_rightPriceScale.state(),a.rightAxisState.m_isLockScale&&null!==this._lastRightPriceScaleRatio&&(a.rightPriceScaleRatio=this._lastRightPriceScaleRatio),a.rightAxisSources=[],r=0;r<this.m_rightPriceScale.dataSources().length;r++)n(this.m_rightPriceScale.dataSources()[r])||a.rightAxisSources.push(this.m_rightPriceScale.dataSources()[r].id());for(a.overlayPriceScales={},r=0;r<this.m_dataSources.length;r++)s=this.m_dataSources[r],this.isOverlay(s)&&s.isSavedInChart(t)&&(a.overlayPriceScales[s.id()]=s.priceScale().state());return a.stretchFactor=this._stretchFactor,this.m_mainDataSource&&(a.mainSourceId=this.m_mainDataSource.id()),a},N.prototype.sourceById=function(e){for(var t=0;t<this.m_dataSources.length;t++)if(this.m_dataSources[t].id()===e)return this.m_dataSources[t];return null},N.prototype.isESDStudy=function(e){
return"Script$TV_EARNINGS@tv-scripting"===e.id||"Script$TV_DIVIDENDS@tv-scripting"===e.id||"Script$TV_SPLITS@tv-scripting"===e.id||"ESD$TV_EARNINGS@tv-scripting"===e.id||"ESD$TV_DIVIDENDS@tv-scripting"===e.id||"ESD$TV_SPLITS@tv-scripting"===e.id},N.prototype.isStudyToSkip=function(e){return!!this.isESDStudy(e)},N.prototype.restoreState=function(e,t,i,o){var n,r,s,a,l,c,u,d,f,_,m,g,v,b,S;if(o=o||{},!e.leftAxisState||!e.rightAxisState)throw Error("invalid state");if(!e.leftAxisSources||!e.rightAxisSources)throw Error("invalid state");if(e.stretchFactor&&(this._stretchFactor=e.stretchFactor),n={},e.sources)for(r=-1!==this.m_dataSources.indexOf(this._model.mainSeries()),this.clearSeries(),this.m_mainDataSource=null,r&&this.m_dataSources.push(this._model.mainSeries()),s=this.getZOrderMinMax(),a=s.minZOrder,l=s.maxZOrder,c=0;c<e.sources.length;c++)u=e.sources[c],d=u.type,Math.abs(u.zorder)>1e200?(f=a-1,L.logWarn("Datasource zorder has bad value: "+u.zorder+" Resetting it to "+f),u.zorder=f):this.isZOrderAvailable(u.zorder)||r&&"MainSeries"===d&&this._model.mainSeries().zorder()===u.zorder||(u.zorder=l+1),_=u.id,n[_]=u.ownerSource,d&&("MainSeries"===d?this._restoreMainSeries(u,t,r,o):d.toLowerCase().startsWith("study")?this._restoreStudy(u,t,o):TradingView.isInherited(TradingView[d],p)?this._restoreLineTool(u,t):TradingView[d]&&TradingView[d].createFromState&&this._restoreSpecialSource(u,t)),a=Math.min(a,u.zorder),l=Math.max(l,u.zorder);for(this.m_leftPriceScale.dataSources().splice(0,1/0),this.m_leftPriceScale._hasSeries=!1,m=defaults("chartproperties").paneProperties.leftAxisProperties,TradingView.merge(m,e.leftAxisState),this.m_leftPriceScale.restoreState(m),void 0!==e.leftPriceScaleRatio&&(this._lastLeftPriceScaleRatio=e.leftPriceScaleRatio),c=0;c<e.leftAxisSources.length;c++)(g=this.dataSourceForId(e.leftAxisSources[c]))&&(void 0!==m.m_showSymbolLabels&&g instanceof T&&this.model().properties().scalesProperties.showSymbolLabels.setValue(m.m_showSymbolLabels),g.setPriceScale(this.m_leftPriceScale),this.m_leftPriceScale.addDataSource(g));for(this.m_rightPriceScale.dataSources().splice(0,1/0),this.m_rightPriceScale._hasSeries=!1,m=defaults("chartproperties").paneProperties.rightAxisProperties,TradingView.merge(m,e.rightAxisState),this.m_rightPriceScale.restoreState(m),void 0!==e.rightPriceScaleRatio&&(this._lastRightPriceScaleRatio=e.rightPriceScaleRatio),c=0;c<e.rightAxisSources.length;c++)(g=this.dataSourceForId(e.rightAxisSources[c]))&&(void 0!==m.m_showSymbolLabels&&g instanceof T&&this.model().properties().scalesProperties.showSymbolLabels.setValue(m.m_showSymbolLabels),g.setPriceScale(this.m_rightPriceScale),this.m_rightPriceScale.addDataSource(g));for(c=0;c<this.m_dataSources.length;c++)g=this.m_dataSources[c],-1===this.m_rightPriceScale.dataSources().indexOf(g)&&-1===this.m_leftPriceScale.dataSources().indexOf(g)?(g._isOverlay=!0,v=new h(this._model.properties().scalesProperties),v.setHeight(this.m_height),v.setTopMargin(this.m_rightPriceScale.topMargin()),v.setBottomMargin(this.m_rightPriceScale.bottomMargin()),
v.addDataSource(g),e.overlayPriceScales&&e.overlayPriceScales[g.id()]&&(m=e.overlayPriceScales[g.id()],m.m_isAutoScale=!0,m.m_isLog=!1,m.m_isPercentage=!1,m.m_isLockScale=!1,v.restoreState(m)),g.setPriceScale(v)):g._isOverlay=!1;for(_ in n)(b=n[_])&&(g=this.sourceById(_))&&this.sourceById(_).setOwnerSource(this.sourceById(b));if(e.mainSourceId&&!this.m_mainDataSource&&(this.m_mainDataSource=this.dataSourceForId(e.mainSourceId)),!this.m_mainDataSource)for(c=0;c<this.m_dataSources.length;c++)if(g=this.m_dataSources[c],TradingView.isInherited(g.constructor,B)){this.m_mainDataSource=g;break}for(c=0;c<this.m_dataSources.length;c++)g=this.m_dataSources[c],TradingView.isInherited(g.constructor,p)?(g.ownerSource()||g.setOwnerSource(this.mainDataSource()),g.isFixed()&&g.restoreFixedPoints(),1===i&&g.priceScale().isPercent()&&!g.isFixed()&&g.correctPricesToPercents(),g.fixAfterRestorePriceAxis&&g.fixAfterRestorePriceAxis()):TradingView.isInherited(g.constructor,y)&&(S=g.properties(),S.linkedToSeries&&S.linkedToSeries.value()&&(g.ownerSource()||g.setOwnerSource(this.model().mainSeries())));this._updateMargins(),this._cachedOrderedSoruces=null,this._cachedHitTestSources=null},N.prototype._restoreMainSeries=function(e,t,i,o){var n,r,s,a,l,c,h,u,d,p,f,_,m,g,v,y=e.id,b=e.state,S=e.zorder;if(b&&["candleStyle","hollowCandleStyle","haStyle"].forEach(function(e){b[e]&&(b[e].wickUpColor=b[e].wickUpColor||b[e].wickColor,b[e].wickDownColor=b[e].wickDownColor||b[e].wickColor)}),i||(n=this._model.paneForSource(this._model.mainSeries()),n.removeDataSource(this._model.mainSeries()),this.m_dataSources.push(this._model.mainSeries())),this.m_mainDataSource=this._model.mainSeries(),r=b&&b.style?b.style:void 0,r===T.STYLE_PNF&&"ATR"===this._model.mainSeries().properties().pnfStyle.inputs.style.value()?this._model.mainSeries().properties().pnfStyle.inputs.style._value="Traditional":r===T.STYLE_RENKO&&"ATR"===this._model.mainSeries().properties().renkoStyle.inputs.style.value()&&(this._model.mainSeries().properties().renkoStyle.inputs.style._value="Traditional"),b&&!b.hasOwnProperty("showSessions")&&(b.showSessions=!1),b&&!b.extendedHours&&(b.extendedHours=!1),b&&t&&(b.showCountdown=!1),b&&(t&&!("showSeriesLastValueProperty"in o)&&"showLastValue"in b&&this._model.properties().scalesProperties.showSeriesLastValue.setValue(b.showLastValue),delete b.showLastValue),b)for(s={haStyle:"BarSetHeikenAshi@tv-basicstudies-60",renkoStyle:"BarSetRenko@tv-prostudies-15",pbStyle:"BarSetPriceBreak@tv-prostudies-15",kagiStyle:"BarSetKagi@tv-prostudies-15",pnfStyle:"BarSetPnF@tv-prostudies-15"},a=this._model.studyVersioning(),l=this._model.mainSeries().styleStudyInfos(),c=Object.keys(P.SYMBOL_STRING_DATA),h=0;h<c.length;h++)r=c[h],u=P.STYLE_SHORT_NAMES[r]+"Style",d=u in e?e[u].studyId:s[u],null!=(r=b[u])&&(p=r.inputs,f=x.parseIdString(d),_=l[u].studyId,m=x.parseIdString(_),g=a.updateStudyInputs(f.id,f.version,m.version,p,null),r.inputs=g);this._model.mainSeries().clearSessionStudy(),this._model.mainSeries().properties().merge(b),
this._model.mainSeries()._prevChartStyle=this._model.mainSeries().properties().style.value(),this._model.mainSeries().createPaneView(),this._model.mainSeries().setId(y),t&&this._model.mainSeries().restoreData(e.bars,e.nsBars,e.symbolInfo,e.rtPrice,e.boxSize,e.reversalAmount),void 0!==S&&this._model.mainSeries().setZorder(S),this._model.mainSeries().properties().extendedHours.listeners().fire(this._model.mainSeries().properties().extendedHours),(v=this._model.mainSeries().symbolInfo())&&this._model.mainSeries().onSymbolResolved().fire(this._model.mainSeries().symbolInfo())},N.prototype._restoreStudy=function(e,t,i){var n,r,s,a,l,c,h,d,p,f;return t&&void 0===e.data&&void 0===e.nonSeriesData&&void 0===e.indexes?void L.logError("Cannot restore (skipping) study without data "+e.id+", "+e.metaInfo.id):(n=e.id,r=e.state,s=e.zorder,a=e.ownerSource,l=TradingView.clone(e.metaInfo),$.extend(l,x.parseIdString(l.id)),this.isStudyToSkip(l)&&!t?void L.logNormal("Skipping study "+l.id):(c=r,h=this._model.studyVersioning(),d=h.patchPropsStateAndMetaInfo(c,l,{oldShowStudyLastValueProperty:t&&!i.showStudyLastValueProperty}),c=d.propsState,l=d.metaInfo,p=new u(this._model,e,l.shortDescription),p.setId(n),f=this,h.updateMetaInfoAsync(l,t).done(function(i){function r(o){var r,a=S(l,i,c,null,h,o),u=w(f._model,a,o||f._model.mainSeries(),s);u.setId(n),t&&(r=h.patchStudyData(l,e.data,e.nonSeriesData,e.indexes),u.restoreData(r.data,r.nsData,r.indexes)),f._model.replaceStudyStub(p,u)||(p=u),_.add(n,u)}var s,u,d,_,m;p.setStatus(""),s=i||l,s.isTVScript&&!t&&(u=x.parseIdString(s.fullId||s.id),d=u.productId,pro.hasPackage(d)||(s=A.createScriptStubNoSrc("Error: '"+s.shortDescription+"' is not authorized",s.scriptIdPart),$.extend(s,x.parseIdString(s.id)),l=s,i=s,c={})),_=new o(f._model),m=a&&e.state.isChildStudy,m?_.get(a).done(r):r()}).fail(function(e){p.setStatus("error: "+e),p.setFailed(!0)}),p&&this.m_dataSources.push(p),delete this._cachedOrderedSoruces,delete this._cachedHitTestSources,p&&void 0!==s&&p.setZorder(s),p))},N.prototype._restoreLineTool=function(e,t,i){var o,r,s,a,l,c,h,v,y,S,w,T,P,L,I,A,k,M,B,N,z,F,H;for(i=void 0===i||i,R.migrateState(e),g.migrateState(e),o=e.type,r=e.id,s=e.state,a=i?e.zorder:this._newZOrderForLineTool(),l=TradingView[o],n(TradingView.isInherited(l,p),"invalid data source type:"+o+" (expected to be a Line Tool)"),c=e.points,h=!1,v=0;v<c.length;v++)if(Math.abs(c[v].offset)>1e4){h=!0;break}if(!h){if(y=null,S=TradingView.factoryDefaults("linetool"),TradingView.isInherited(l,f)){if(y=this._model.studyVersioning(),e=y.patchPointsBasedStudyState(e),TradingView.merge(S,s),P=e.metaInfo,$.extend(P,x.parseIdString(P.fullId)),!t&&(L=P.productId,!pro.hasPackage(L)))return I=new u(this._model,e,P.shortDescription),I.setId(r),this.m_dataSources.push(I),void 0!==a&&I.setZorder(a),I.setStatus($.t("not authorized")),void I.setFailed(!0);A=y.updateMetaInfo(P),k=A||P,S=b(k,P,S,null,y),t?TradingView.merge(S,{fixedSize:!1}):TradingView.merge(S,{fixedSize:!0}),T=new C("study_"+k.id,S,!0),
w=d.create(o,this._model,T,k,this.mainDataSource())}else M=o.toLowerCase(),TradingView.merge(S,TradingView.factoryDefaults(M)),T=TradingView[o].prototype.createPropertiesObject(M,S),T.merge(s),t?T.merge({fixedSize:!1}):T.merge({fixedSize:!0}),w=new TradingView[o](this._model,T,!0);return w.setId(r),w.linkKey=e.linkKey,B=e.alertId,B&&"function"==typeof w.setAlert&&E.enabled("alerts")&&!this._model.readOnly()&&!this._model.isJustClonedChart()&&w.setAlert(B,{noChartSave:!0}),N=e.indexes?e.indexes:[],N=N.slice(0,e.points.length),w.isFixed()?w.restorePositionPercents(e.positionPercents):w.restorePoints(e.points,N,t),w instanceof _||w instanceof m||w instanceof D||w instanceof V||w instanceof O?w.restoreData(e):t&&w.restoreData&&(z=e,y&&(z.graphics=y.patchPointsBasedStudyData(z.metaInfo,z.graphics)),w.restoreData(z)),F=null==e.version?1:e.version,H=null==w.version?1:w.version,F!==H&&"function"==typeof w.migrateVersion&&w.migrateVersion(F,H,{pane:this,model:this._model,properties:T}),this.m_dataSources.push(w),delete this._cachedOrderedSoruces,delete this._cachedHitTestSources,void 0!==a&&w.setZorder(a),w}},N.prototype._restoreSpecialSource=function(e,t){var i,o=TradingView[e.type];o&&o.createFromState&&(i=o.createFromState(e,t,this._model))&&(i.setId(e.id),this.m_dataSources.push(i),i.zorder&&i.setZorder(i.zorder))},c.prototype.studyTemplate=function(e){var t,i,o,n,r={};for(r.panes=[],t=0;t<this.panes().length;t++)i=!0,o=!1,n=!0,r.panes.push(this.panes()[t].state(i,o,n));return e&&(r.interval=this.mainSeries().interval()),r.version=c.version,r},c.prototype.restoreStudyTemplate=function(e,t){this._undoModel.studyLoadTemplate(this._undoModel,this.studyTemplate(),e,t)},c.prototype.theme=function(){var e={};return e.chartProperties={paneProperties:this.properties().paneProperties.state(),scalesProperties:this.properties().scalesProperties.state(),symbolWatermarkProperties:this.properties().symbolWatermarkProperties.state()},e.mainSourceProperties=this.mainSeries().state().state,delete e.mainSourceProperties.symbol,delete e.mainSourceProperties.interval,delete e.chartProperties.paneProperties.topMargin,delete e.chartProperties.paneProperties.bottomMargin,e.version=c.version,e},c.prototype.restoreTheme=function(e){var t,i,o={hollowCandle:{related:"candle"}};for(t in o)e.mainSourceProperties[t+"Style"]||(i=e.mainSourceProperties[o[t].related+"Style"],e.mainSourceProperties[t+"Style"]=TradingView.clone(i));this._undoModel.chartLoadTheme(this,e)},o=function(){function e(o){var n=t.indexOf(o);return~n?i[n]:this instanceof e?(this._source=o,this._studies={},this._deferreds={},t.push(o),void i.push(this)):new e(o)}var t=[],i=[];return e.prototype.add=function(e,t){this._deferreds[e]&&(this._deferreds[e].resolve(t),delete this._deferreds[e]),this._studies[e]=t},e.prototype.get=function(e){return this._studies[e]?$.Deferred().resolve(this._studies[e]):(this._deferreds[e]||(this._deferreds[e]=$.Deferred()),this._deferreds[e].promise())},e.prototype.reset=function(){var e=t.indexOf(this._source);~e&&(t.splice(e,1),i.splice(e,1))},e}(),
e.exports=c},function(e,t,i){"use strict";function o(e){var t,i=n.get_timezone(e).offset_utc(Date.now()),o="",r=i/1e3/60/60;return r%1&&(o=":"+r%1*60),t="",t=r>0?"+"+(r-r%1)+o:0===r?"":r-r%1+o+"",{offset:i,string:"UTC"+t}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(94);t.parseTzOffset=o},function(e,t,i){"use strict";i(28),e.exports=TradingView.templates={dialogs:{billingCycleSelection:'<div class="main billing-cycle-dialog"><div class="bcd-title">'+$.t("Subscription Plans")+'</div><div class="bcd-subtitle">'+$.t("You're subscribing to {{ product_title }}")+'</div><div class="bcd-choice-container clearfix"><div class="bcd-choice active" data-cycle="y"><div class="bcd-choice-bg"></div><div class="bcd-choice-marker"></div><div class="bcd-choice-copy"><h5>'+$.t("Buy Annual")+'</h5><div class="bcd-prices"><p>${{price_1_m}} '+$.t("per month")+"</p><p>${{price_1_y}} "+$.t("per year")+"</p><p>"+$.t("Save ${{savings}}")+"</p><p>"+$.t("No monthly invoices")+'</p></div></div></div><div class="bcd-choice" data-cycle="m"><div class="bcd-choice-bg"></div><div class="bcd-choice-marker"></div><div class="bcd-choice-copy"><h5>'+$.t("Buy Monthly")+'</h5><div class="bcd-prices"><p>${{price_2_m}} '+$.t("per month")+"</p><p>${{price_2_y}} "+$.t("per year")+"</p><p>"+$.t("Invoiced every month")+'</p></div></div></div></div><div class="bcd-continue"><a class="bcd-continue-button">'+$.t("Continue")+"</a></div></div>",symbolSearch:'<div class="symbol-block"><div class="spread-actions"></div><div class="symbol-block-inputspacer"><input maxlength="1000" /><div class="search-icon"></div></div></div><div class="filter"></div><div class="results"></div>',browserExtension:'<div class="main-browser-extension"><div class="_tv-dialog-title _tv-dialog-title-hidden"><a class="_tv-dialog-title-close"></a></div><div class="left"><div class="extension-poster"></div></div><div class="right"><div class="browser-info"><img class="logo" src="{{ browser.logo }}"><div class="name ">{{ browser.name }}</div><div class="info">'+$.t("Extension")+'</div><div class="clearfix"></div></div><h1>'+$.t("TradingView Free Quotes and Chat")+"</h1><p>"+$.t("Follow free market quotes, your watchlist, public and private chats from TradingView, while surfing the web in any browser tab.")+'</p><a href="{{{ browser.href }}}" class="install-extension" target="_blank"><button>'+$.t("Install")+'</button></a></div><div class="clearfix"></div></div>',
chartingLibraryForm:'<div class="main"><div class="line"></div><p class="lead-in">'+$.t("Here are a few steps to get your Charting Library:")+'</p><form action="/send-charting-library-mail/"><div class="agreement"><div class="dropzone"></div><div class="description tv-text">'+$.t('Download our <a href="{0}" target="_blank">License Agreement</a>, sign it, scan it, and attach. Please make sure that the document you attached contains all pages and your name and signature are readable.').format("https://s3.amazonaws.com/tradingview/charting_library_license_agreement.pdf")+'</div></div><div class="clear two-columns"><div class="column-wrap"><div class="description">'+$.t("Your name:")+'</div><input type="text" name="name" placeholder="'+$.t("Full name")+'"/></div><div class="column-wrap"><div class="description">'+$.t("Enter your email address:")+'</div><input type="text" name="email" placeholder="user@email.com"/></div></div><div><div class="description">'+$.t("List the link to your individual (not org) GitHub profile:")+'</div><input type="text" name="github" placeholder="github.com/username"/></div><div><div class="description">'+$.t("URL of your website. Free library only licensed for public use:")+'</div><input type="text" name="website" placeholder="http://www.yoursite.com"/></div><div><div class="description">'+$.t("Describe your company and project in a few sentences:")+'</div><textarea name="description" placeholder="'+$.t("Eg. I have a financial website/app at <URL> and need interactive charts for <abc>")+'"></textarea></div></form><p>'+$.t("We will review your application and grant access within 1-2 business days.")+'</p><div class="big-buttons"><button class="cancel-button">'+$.t("Cancel")+'</button><button class="big-button">'+$.t("Send")+"</button></div></div>",chartingLibraryHelp:'<div class="main"><div class="line"></div><p>'+$.t('Your setup is almost complete. Access will granted within 1-2 business days once we review the application. Youll get an email notification (check Spam folder) with an acceptance link, or visit <a target="_blank" href="{0}">our page</a>.').format("https://github.com/tradingview")+"</p><p>"+$.t("Resources")+'</p><ol><li><a target="_blank" href="http://demo_chart.tradingview.com/">'+$.t("Demo Charting Library")+'</a></li><li><a target="_blank" href="https://github.com/tradingview/charting_library/wiki">'+$.t("Wiki on Github")+'</a>*</li><li><a target="_blank" href="https://github.com/tradingview/charting_library/wiki/Running-Your-Charting-Library">'+$.t("Article on Github")+'</a>*</li><li><a target="_blank" href="https://github.com/tradingview/charting_library/issues">'+$.t("Bugtracker on Github")+"</a>*</li></ol><small>"+$.t("*&nbsp;You have to be logged into your authorized Github profile to access. Otherwise it will show 404 Not Found.")+"</small><p><div>"+$.t("Stan Bokov")+"</div><div>"+$.t("Co-Founder, COO")+'</div><a class="email" href="mailto:founders@tradingview.com">founders@tradingview.com</a></p><div class="big-buttons"><button class="big-button">'+$.t("Close",{
context:"input"})+"</button></div></div>"},lists:{savedChart:'<span class="tv-header__dropdown-itmwrap tv-header__charts-list-item"><a class="tv-header__dropdown-link tv-header__chartlink" href="/chart/{{url}}/"><span class="tv-header__chartlink__name apply-overflow-tooltip">{{name}}</span><span class="tv-header__chartlink__info apply-overflow-tooltip">{{modified}}{{#short_symbol}} | {{short_symbol}}{{#interval}}, {{interval}}{{/interval}}{{/short_symbol}}</span><span class="tv-header__chartlink__del" title="'+$.t("Delete")+'" data-id="{{url}}" data-name="{{name}}">'+i(147)+"</span></a></span>"},globalNotification:'<div class="tv-global-notification {{#isOverlay}}tv-global-notification--notification-overlay {{/isOverlay}}" id="global-notification-{{ id }}"><div class="tv-global-notification__text-continer {{#fullWidth}}tv-global-notification__text-continer--padding_left {{/fullWidth}}{{^fullWidth}}tv-layout-width tv-layout-width--no-padding {{/fullWidth}}"><span class="tv-global-notification__icon-info">'+i(233)+'</span> {{{ text }}}</div><span class="tv-global-notification__icon-close js-global-notification__close ">'+i(147)+"</span></div>",onChartMessage:'<div class="onchart-message"><span class="onchart-message-close"></span><div class="onchart-message-top"><div class="onchart-message-copy"></div></div><div class="onchart-message-bottom"><div class="onchart-message-ear"></div></div></div>',miniWidgetWizardAddSymbol:'<tr class="tv-external-tools__symbol-item"><td class="tv-external-tools__symbol-item-cell">{{symbol}}</td><td class="tv-external-tools__symbol-item-cell{{#descriptionShortening}} apply-common-tooltip" title="{{description}}"{{/descriptionShortening}}">{{#descriptionShortening}}{{descriptionShortening}}{{/descriptionShortening}}{{^descriptionShortening}}{{description}}{{/descriptionShortening}}</td>{{#timeframeSelectAllow}}<td class="tv-external-tools__symbol-item-cell">{{timeframe}}</td>{{/timeframeSelectAllow}}<td class="tv-external-tools__remove-cell"><div class="tv-external-tools__remove-symbol"></div></td></tr>',textNotesWidgetLayout:'<div class="notes-block"><div class="textnotes-search-header"><div class="search-input-block">'+i(234)+'<div class="search-clean"></div><input type="text" class="search-input" placeholder="'+$.t("Search Note")+'" maxlength="1000" autocomplete="off"></div><div class="new-note-btn">'+i(243)+$.t("NEW")+'</div></div><div class="notes-wrapper"><div class="notes"></div></div></div><div class="notes-desc-block"><div class="notes-desc-wrapper"><div class="notes-desc-inner"><div class="remove-note-btn" title="'+$.t("Delete Text Note")+'">'+i(232)+'</div><div class="title-wrap"><input type="text" maxlength="100" value="" class="title"></div><div class="date"><span class="created">'+$.t("Created ")+'<span class="created-val"></span>. </span><span class="modified">'+$.t("Last edited ")+'<span class="modified-val"></span></span></div><textarea></textarea></div></div></div>',
textNotesWidgetItem:'<div class="note"><div class="note-header"><div {{#symbol}}title="'+$.t("Open {{symbol}} Text Note")+'"{{/symbol}} class="title {{#symbol}}title_with-badge{{/symbol}}">{{title}}</div>{{#symbol}}<div class="symbol-badge">'+i(244)+'<span class="symbol">{{symbol}}</span></div>{{/symbol}}</div><div class="note-desc">{{description}}</div><span class="favorite"></span></div>',tvDataTable:'<table class="tv-data-table {{className}}"><thead class="tv-data-table__thead"><tr class="tv-data-table__stroke">{{#columns}}<th class="tv-data-table__cell tv-data-table__cell--bold {{className}}"><span class="tv-data-table__cell-text{{^notSortable}} tv-data-table__sortable{{/notSortable}}{{#help}} apply-common-tooltip{{/help}}{{#htmlHelp}} common-tooltip-html{{/htmlHelp}}" {{#help}}title="{{help}}"{{/help}}>{{{label}}}</span></th>{{/columns}}</tr></thead>{{#bodies}}<tbody class="tv-data-table__tbody {{className}}">{{#strokes}}<tr class="tv-data-table__stroke">{{#cells}}<td class="tv-data-table__cell {{className}}"{{#colspan}}colspan="{{colspan}}"{{/colspan}}>{{#contain}}{{{contain}}}{{/contain}}</td>{{/cells}}</tr>{{/strokes}}</tbody>{{/bodies}}</table>',tvDataTableRow:'<tr class="tv-data-table__stroke {{rowClassName}}">{{#columns}}<td class="tv-data-table__cell {{className}}">{{#contain}}{{{contain}}}{{/contain}}</td>{{/columns}}</tr>',tvDataTableCell:'<td class="tv-data-table__cell {{className}}">{{#contain}}{{{contain}}}{{/contain}}</td>'}},function(e,t,i){"use strict";function o(e){$(e).attr("title")||e.offsetWidth+r>=e.scrollWidth||$(e).attr("title",$(e).text())}var n,r;Object.defineProperty(t,"__esModule",{value:!0}),i(13),n=i(61),r=$.browser.msie||/\btrident\b/i.test(navigator.userAgent)?1:0,$(function(){$(document).on("mouseenter",".apply-overflow-title",function(){o(this)}),$(document).on("mouseenter",".apply-overflow-tooltip",function(){function e(){n.hide(),i.off("mouseleave mousedown",e)}var t,i=$(this);i[0].offsetWidth+r>=i[0].scrollWidth||(t="",t=i.is(".apply-overflow-tooltip--allow-text")?i.text():i.clone().children().remove().end().text().trim(),n.showOnElement(i[0],{text:t}),i.on("mouseleave mousedown",e))})})},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 8" width="16" height="8"><path d="M0 1.475l7.396 6.04.596.485.593-.49L16 1.39 14.807 0 7.393 6.122 8.58 6.12 1.186.08z"/></svg>'},function(e,t,i){"use strict";function o(e){var t=e.type||"popup";return delete e.type,"modal"===t?new n.TVModal(e):new r.TVPopup(e)}var n,r;Object.defineProperty(t,"__esModule",{value:!0}),n=i(38),r=i(196),t.createDialog=o},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e){var t,i;if(e&&e.__esModule)return e;if(t={},null!=e)for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
;return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l,c,h,u,d,p,f,_,m,g,v,y,b;Object.defineProperty(t,"__esModule",{value:!0}),t.TVPopup=void 0,l=Object.assign||function(e){var t,i,o;for(t=1;t<arguments.length;t++){i=arguments[t];for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},c=function(){function e(e,t){var i,o;for(i=0;i<t.length;i++)o=t[i],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),h=i(14),u=n(h),d=i(88),p=o(d),f=i(127),_=i(83),m=i(78),g=$("body"),v=$(window),y={closeOnClickAtOtherDialogs:!0,draggable:!0,scrollWrap:'<div class="tv-dialog__scroll-wrap">',scrollWrapInner:'<div class="tv-dialog__scroll-wrap-inner">',withScroll:!0},b="js-dialog__scroll-wrap",t.TVPopup=function(e){function t(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(this,t),e=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,l({},y,i))),e.$scrollWrap=e.$content.hasClass(b)?e.$content:e.$content.find("."+b),e.$scrollWrap.length?e.$scrollWrapInner=e.$scrollWrap.children().first():(e.$scrollWrap=e.$content.wrap($(e.options.scrollWrap)).parent(),e.$scrollWrapInner=e.$content.wrap($(e.options.scrollWrapInner)).parent()),e.$actions&&e.$scrollWrap.addClass("i-with-actions"),e.options.withScroll&&(e.scroll=new _.SidebarCustomScroll(e.$scrollWrap,e.$scrollWrapInner),e.scroll.scrolled.subscribe(null,function(){return e.trigger("scroll")})),e.$scrollWrap.css("overflow",""),e.$el.addClass("tv-dialog--popup i-closed i-hidden"),e.options.width&&e.$el.css({width:"calc(100% - 20px)","max-width":e.options.width}),e.$el.on("mousedown touchstart",e.toTop.bind(e)),e.options.closeOnOutsideClick&&(e.on("beforeOpen",function(){setTimeout(function(){e.opened&&$(document).on("click.tv-popup-"+e.id,function(t){var i=$(t.target).closest(".js-dialog");(e.options.closeOnClickAtOtherDialogs||0===i.length)&&e.isEventOut(t)&&e.close()})},0)}),e.on("beforeClose",function(){return $(document).off("click.tv-popup-"+e.id)})),e.on("change:zIndex",function(){e.$el.css("z-index",e.zIndex)}),e.on("destroy",function(){var t=function(){e.$el.remove()};e.opened?(e.close(),setTimeout(t,u.dur/2)):t()}),e}return a(t,e),c(t,[{key:"open",value:function(){var e=this;return this.opened?this:(this.opened=!0,this.trigger("beforeOpen",[this]),this.$el.appendTo(this.options.$wrap).removeClass("i-hidden").css(function(){var t,i,o,n,r;return e.calcHeight(),t=v.height(),i=v.width(),o=e.$el.height(),n=e.$el.width(),r=e.options.position,r||(r={top:t/2-o/2,left:i/2-n/2}),r.top>t-o&&(r.top=t-o),r.left>i-n&&(r.left=i-n),r}()),this.focus(),this.toTop(),this._doOpenAnimation().then(function(){
e.opened&&(e.$el.removeClass("i-closed"),e.options.draggable&&((0,m.lazyJqueryUI)(e.$el).draggable({handle:".js-dialog__drag",cancel:"input, textarea, button, select, option, .js-dialog__no-drag, .js-dialog__close",containment:"window",cursor:"-webkit-grabbing"}),e.$el.find(".js-dialog__drag").addClass("tv-dialog__grab")),e.trigger("afterOpen",[e]))}),v.on("resize.tv-popup-"+this.id,function(){e.calcHeight(),e.fixPos()}),this)}},{key:"close",value:function(){var e=this;if(this.opened)return this.trigger("beforeClose",[this]),this.$el.addClass("i-closed"),this.opened=!1,this._doCloseAnimation().then(function(){e.opened||((0,m.lazyJqueryUI)(e.$el).draggable("instance").then(function(e){e&&e.destroy()}),e.$el.addClass("i-hidden").detach(),g.css("cursor","auto"),e.trigger("afterClose",[e]),e.options.destroyOnClose&&e.destroy())}),v.off("resize.tv-popup-"+this.id),this}},{key:"hide",value:function(){this.$el.addClass("i-hidden")}},{key:"show",value:function(){this.$el.removeClass("i-hidden")}},{key:"fixPos",value:function(){var e=this.$el[0].getBoundingClientRect(),t={};e.bottom>p.default.height-10&&(t.top=p.default.height-10-e.height,t.top<10&&(t.top=10)),e.right>p.default.width-10&&(t.left=p.default.width-10-e.width,t.left<10&&(t.left=10)),(t.top||t.left)&&this.$el.css(t)}},{key:"calcHeight",value:function(){var e,t,i=this.$el[0].getBoundingClientRect(),o=this.$scrollWrapInner[0].getBoundingClientRect(),n=this.$scrollWrap[0].getBoundingClientRect(),r=this.options.height&&this.options.height<p.default.height-20?this.options.height:p.default.height-20;this.$scrollWrap.css({height:""}).removeClass("i-scrollable"),e=this.$el[0].getBoundingClientRect(),(this.options.height||e.height>r)&&(r-=i.height-n.height,r<60&&(r=60),this.$scrollWrap.css({height:r})),this.options.withScroll&&this.scroll.resize(),t=r<o.height,t||this.$scrollWrapInner.css("top",0),this.$scrollWrap.toggleClass("i-scrollable",t),this.$actions&&this.$actions.toggleClass("tv-dialog__section--actions_with-border",t)}},{key:"updateScroll",value:function(){this.scroll&&(this.scroll.updateScroll(),this.scroll.updateScrollBar())}},{key:"scrollToStart",value:function(){this.scroll&&this.scroll.scrollToStart()}},{key:"_doOpenAnimation",value:function(){return Promise.resolve()}},{key:"_doCloseAnimation",value:function(){return Promise.resolve()}}]),t}(f.TVDialogAbstract)},function(e,t,i){"use strict";function o(e){var t,i,o=(e+"").match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return null===o?0:(t=o[1]?o[1].length:0,i=o[2]?parseInt(o[2],0):0,Math.max(0,t-i))}function n(e){return e=Math.abs(e),!l.isInteger(e)&&e>1&&(e=parseFloat((""+e).replace(/^.+\./,"0."))),0<e&&e<1?Math.pow(10,o(e)):1}function r(e,t){var i,o,r,s,a,c;e.trigger("tvticker-beforechange"),i=e.data("TVTicker"),o=i&&i.step,r=0,r=i.parser?i.parser(e.val()):l.isInteger(o)?parseInt(e.val(),10):parseFloat(e.val()),isNaN(r)&&(r=0),s=n(o),a=Math.max(s,n(r)),c=t(r,a),i.formatter&&(c=i.formatter(c)),e.val(c),e.change()}function s(e){var t=e.data("TVTicker"),i=t&&t.step,o=t&&t.max;r(e,function(e,t){
var n=(Math.round(e*t)+Math.round(i*t))/t;return void 0!==o&&null!==o&&o<n&&(n=e),n})}function a(e){var t=e.data("TVTicker"),i=t&&t.step,o=t&&t.min;r(e,function(e,t){var n=(Math.round(e*t)-Math.round(i*t))/t;return void 0!==o&&null!==o&&n<o&&(n=e),n})}var l,c;Object.defineProperty(t,"__esModule",{value:!0}),i(13),i(448),l=i(10),c=i(213),$.fn.TVTicker=function(e){return void 0===e&&(e={}),this.each(function(){var t,i,o,n=!1,r=$(this),l=r.data("TVTicker");l?n=!0:l={step:+r.data("step")||1},"step"in e&&(l.step=+e.step||l.step),"min"in e&&(l.min=e.min),"max"in e&&(l.max=e.max),"formatter"in e&&(l.formatter=e.formatter),"parser"in e&&(l.parser=e.parser),r.data("TVTicker",l),n||(t=$('<div class="tv-ticker">').appendTo(r.parent()),i=$('<div class="tv-ticker__btn tv-ticker__btn--up">').html(c).appendTo(t),o=$('<div class="tv-ticker__btn tv-ticker__btn--down">').html(c).appendTo(t),t.on("mousedown",function(e){e.preventDefault(),r.focus()}),i.click(function(){r.is(":disabled")||s(r)}),o.click(function(){r.is(":disabled")||a(r)}),r.keydown(function(e){r.is(":disabled")||(38===e.keyCode?i.addClass("i-active"):40===e.keyCode&&o.addClass("i-active"))}),r.keyup(function(e){r.is(":disabled")||(38===e.keyCode?(s(r),i.removeClass("i-active")):40===e.keyCode&&(a(r),o.removeClass("i-active")))}),r.mousewheel(function(e,t){t>0?i.click():o.click()}))})}},function(e,t,i){"use strict";function o(e){var t=(""+e).match(/(.*)([DWM])/);return t?t[1]+$.t(t[2],{context:"interval_short"}):e}Object.defineProperty(t,"__esModule",{value:!0}),i(5),t.translatedIntervalString=o},function(e,t,i){"use strict";function o(){var e,t,i,o;this._registeredSources={},this._sourcesToRow={},this._rowsToSources={},this._currentSymbol="",this._actualCapacity=0,this._actualWidth=0,this._canvas=$("<canvas>"),this._cache=this._canvas.get(0).getContext("2d"),this._currentWidth=400,this._canvas.prop("width",this._currentWidth).prop("height",1).css("position","absolute").css("top",0).css("z-index",1e3).css("left",0),this._ctx=this._canvas.get(0).getContext("2d"),this._ctx.font=u.fontSize+"px"+u.font,e=u.fontSize,t=u.lineSpacing,i=e+t,o=3,this._padding=8,this._rowHeight=i*o-t+2*this._padding+2}function n(e,t){this._constructor="LineToolTrendLine";var n=t||new a("linetooltrendline");s.call(this,e,n),e._trendLineStatsCache||(e._trendLineStatsCache=new o),i.e(11).then(function(e){var t=i(1205).TrendLinePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var r=i(8).Point,s=i(1).LineDataSource,a=i(7).DefaultProperty,l=i(2).propertyPages,c=i(0).getLogger("Chart.LineToolTrendLine"),h=i(649).TrendLineStatsRenderer,u=i(634).LabelSettings;o.prototype.canvas=function(){return this._canvas},o.prototype.topByRow=function(e){return e*this._rowHeight},o.prototype.rowHeight=function(e){return this._rowHeight},o.prototype.rowWidth=function(e){var t=this._rowsToSources[e];return this._sourcesToRow[t].width},o.prototype.currentWidth=function(){return this._currentWidth},o.prototype._findEmptyRow=function(e){for(var t=0;this._rowsToSources[t];)t++
;return this._rowsToSources[t]=e,t>=this._actualCapacity&&(this._actualCapacity++,TradingView.resizeCanvas(this._canvas,this._currentWidth,this._rowHeight*this._actualCapacity),this._ctx=this._canvas.get(0).getContext("2d"),c.logDebug("TrendLineCache. Expanging cache to "+this._actualCapacity+" items")),t},o.prototype._effectiveState=function(e){var t,i={};return i.p1=$.extend({},e.points()[0]),i.p2=$.extend({},e.points()[1]),t=e.properties(),i.showBars=t.showBarsRange.value(),i.showTimeRange=t.showDateTimeRange.value(),i.showDistance=t.showDistance.value(),i.showPriceRange=t.showPriceRange.value(),i.showAngle=t.showAngle.value(),i.color=t.textcolor.value(),i.showAngle&&(i.priceRange=e.priceScale().priceRange().state(),i.barSpacing=e._model.timeScale().barSpacing()),i},o.prototype._effectiveStatesEquals=function(e,t){var i=function(e,t){return!(!e&&!t)&&(!(!e||t)||(!(e||!t)||(e.index!==t.index||e.price!==t.price)))};if(e&&!t)return!1;if(!e&&t)return!1;if(i(e.p1,t.p1))return!1;if(i(e.p2,t.p2))return!1;if(e.color!==t.color)return!1;if(e.showBars!==t.showBars)return!1;if(e.showTimeRange!==t.showTimeRange)return!1;if(e.showDistance!==t.showDistance)return!1;if(e.showPriceRange!==t.showPriceRange)return!1;if(e.showAngle!==t.showAngle)return!1;if(e.showAngle){if(e.priceRange.min!==t.priceRange.min)return!1;if(e.priceRange.max!==t.priceRange.max)return!1;if(e.barSpacing!==t.barSpacing)return!1}return!0},o.prototype.removeSource=function(e){if(this._sourcesToRow[e]){var t=this._sourcesToRow[e].row;this._ctx.save(),this._ctx.clearRect(0,this.topByRow(t),this._currentWidth,this.rowHeight(t)),this._ctx.restore(),delete this._sourcesToRow[e],delete this._rowsToSources[t]}},o.prototype._repaintSource=function(e,t,i){var o,n;this._ctx.save(),this._ctx.translate(0,this.topByRow(t)+.5),i.points[0]=new r(0,0),i.offsetX=0,i.offsetY=0,delete i.horzAlign,delete i.vertAlign,this._ctx.clearRect(0,0,this._currentWidth,this.rowHeight(t)),o=new h(i,{}),n=o.draw(this._ctx),this._sourcesToRow[e].width=n.width,this._ctx.restore()},o.prototype.updateSource=function(e,t){var i,o,n,r,s,a=e.properties().symbol.value();return this._currentSymbol!==a&&(c.logDebug("TrendLineCache. Clearing canvas because of changing symbol from "+this._currentSymbol+" to "+a),this._currentSymbol=a,this._sourcesToRow={},this._rowsToSources={}),i=e.id(),this._sourcesToRow[i]||(o=this._findEmptyRow(i),this._sourcesToRow[i]={effectiveState:null,row:o}),n=this._sourcesToRow[e.id()].effectiveState,r=this._effectiveState(e),this._effectiveStatesEquals(n,r)||(o=this._sourcesToRow[e.id()],s=t(),this._repaintSource(i,o.row,s),this._sourcesToRow[i].effectiveState=r),this._sourcesToRow[i]},inherit(n,s),n.prototype.stop=function(){s.prototype.stop.call(this),this._model._trendLineStatsCache.removeSource(this.id())},n.prototype.pointsCount=function(){return 2},n.prototype.title=function(){return"Trend Line"},n.prototype.canHasAlert=function(){return!0},n.prototype._getAlertPlots=function(){
return[this._linePointsToAlertPlot(this._points,null,this.properties().extendLeft.value(),this.properties().extendRight.value())]},n.prototype.getStylesPropertyPage=function(){return l.LineToolTrendLineStylesPropertyPage},t.LineToolTrendLine=n},function(e,t,i){"use strict";function o(e,t){var i,o;return t.isPercentage()?null===(i=t.mainSource())?null:(o=i.firstValue(),null===o||void 0===o?null:e.convertFromPercents(o).length()):e.length()}function n(e){var t,i;return e.isEmpty()?null:null===(t=e.priceRange())?null:(i=o(t,e),null===i?null:e.internalHeight()/i)}function r(e,t){var i,o,r;return e.isEmpty()||t.isEmpty()?null:null===(i=n(t))?null:(o=e.getValidBarSpacing(),r=Math.max(c,i),o/r)}function s(e,t,i){var n,r,s,a;return null===i||e.isEmpty()?null:null===(n=e.priceRange())||n.isEmpty()?null:(r=e.internalHeight()/(t/i),null===(s=o(n,e))?null:r===s?n:(a=(r-s)/2,new l(n.minValue()-a,n.maxValue()+a)))}function a(e,t){var i,n;return null===t||e.isEmpty()?null:null===(i=e.priceRange())?null:(n=o(i,e),null===n?null:e.internalHeight()/n*t)}var l,c;Object.defineProperty(t,"__esModule",{value:!0}),l=i(79),c=1e-10,t.scaleRatio=r,t.priceRangeByScaleRatio=s,t.barSpacingByScaleRatio=a},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolPitchfork";var i=t||this.createPropertiesObject("linetoolpitchfork");n.call(this,e,i),this._properties.style.listeners().subscribe(this,o.prototype._recreatePaneView),this._recreatePaneView()}var n=i(1).LineDataSource,r=i(31),s=i(74).Action,a=i(2).propertyPages,l=i(497).LineToolPitchforkStyle,c=null;inherit(o,n),o.prototype.additionalActions=function(){var e,t,i=[],o=["Original","Modified Schiff","Inside","Schiff"];for(e=0;e<4;e++)t=new s({checked:this.properties().style.value()===e,checkable:!0,text:$.t(o[e]),callbackContext:{target:this,value:e}}),t.callbacks().subscribe(null,function(e){var t=e.callbackContext(),i=t.target,o=t.value;i.properties().style.setValue(o),i.updateAllViews(),i._model.updateSource(i)}),i.push(t);return[i[0],i[3],i[1],i[2]]},o.prototype._recreatePaneView=function(){if(null===c)return void i.e(11).then(function(e){null===c&&(c=i(1213)),this._recreatePaneView()}.bind(this).bind(null,i)).catch(i.oe);var e=[];this._properties.style.value()===l.Original?e=[new c.PitchforkLinePaneView(this,this._model)]:this._properties.style.value()===l.Schiff?e=[new c.SchiffPitchforkLinePaneView(this,this._model)]:this._properties.style.value()===l.Schiff2?e=[new c.SchiffPitchfork2LinePaneView(this,this._model)]:this._properties.style.value()===l.Inside&&(e=[new c.InsidePitchforkLinePaneView(this,this._model)]),this._setPaneViews(e)},o.prototype.pointsCount=function(){return 3},o.prototype.title=function(){return $.t("Pitchfork")},o.prototype.processErase=function(e,t){var i="level"+t,o=this.properties()[i].visible;e.setProperty(o,!1,"Erase level line")},o.prototype.createPropertiesObject=function(e,t,i){return new r(e,t,i,{range:[0,8]})},o.prototype.getStylesPropertyPage=function(){return a.LineToolPitchforkStylesPropertyPage},t.LineToolPitchfork=o},function(e,t,i){
"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tzData={"America/New_York":{time:[-2717668562,-1633298400,-1615154400,-1601848800,-1583704800,-1570399200,-1551650400,-1536530400,-1523224800,-1504476e3,-1491775200,-1473026400,-1459720800,-1441576800,-1428271200,-1410127200,-1396821600,-1378677600,-1365372e3,-1347228e3,-1333922400,-1315173600,-1301868e3,-1283724e3,-1270418400,-1252274400,-1238968800,-1220824800,-1207519200,-1189375200,-1176069600,-1157320800,-114462e4,-1125871200,-1112565600,-1094421600,-1081116e3,-1062972e3,-1049666400,-1031522400,-1018216800,-1000072800,-986767200,-968018400,-955317600,-936568800,-923263200,-905119200,-891813600,-880236e3,-76941e4,-765410400,-747266400,-733960800,-715816800,-702511200,-684367200,-671061600,-652917600,-639612e3,-620863200,-608162400,-589413600,-576108e3,-557964e3,-544658400,-526514400,-513208800,-495064800,-481759200,-463615200,-447285600,-431560800,-415836e3,-400111200,-384386400,-368661600,-352936800,-337212e3,-321487200,-305762400,-289432800,-273708e3,-257983200,-242258400,-226533600,-210808800,-195084e3,-179359200,-163634400,-147909600,-13158e4,-11646e4,-100130400,-84405600,-68680800,-52956e3,-37231200,-21506400,-5781600,9943200,25668e3,41392800,57722400,73447200,89172e3,104896800,120621600,126669600,152071200,162352800,183520800,199245600,215575200,230695200,247024800,262749600,278474400,294199200,309924e3,325648800,341373600,357098400,372823200,388548e3,404877600,419997600,436327200,452052e3,467776800,483501600,499226400,514951200,530676e3,544586400,562125600,576036e3,59418e4,607485600,625629600,638935200,657079200,670989600,688528800,702439200,719978400,733888800,752032800,765338400,783482400,796788e3,814932e3,828842400,846381600,860292e3,877831200,891741600,909280800,923191200,941335200,954640800,972784800,986090400,1004234400,1018144800,1035684e3,1049594400,1067133600,1081044e3,1099188e3,1112493600,1130637600,1143943200,1162087200,1173578400,1194141600,1205028e3,1225591200,1236477600,1257040800,1268532e3,1289095200,1299981600,1320544800,1331431200,1351994400,1362880800,1383444e3,1394330400,1414893600,142578e4,1446343200,1457834400,1478397600,1489284e3,1509847200,1520733600,1541296800,1552183200,1572746400,1583632800,1604196e3,1615687200,1636250400,1647136800,16677e5,1678586400,1699149600,1710036e3,1730599200,1741485600,1762048800,1772935200,1793498400,1804989600,1825552800,1836439200,1857002400,1867888800,1888452e3,1899338400,1919901600,1930788e3],
offset:[-17762,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3]},"America/Los_Angeles":{
time:[-2717668378,-1633298400,-1615154400,-1601848800,-1583704800,-880236e3,-769420800,-765410400,-687995940,-662680800,-620866800,-608162400,-589417200,-576108e3,-557967600,-544658400,-526518e3,-513208800,-495068400,-481759200,-463618800,-450309600,-431564400,-418255200,-400114800,-386805600,-368665200,-355356e3,-337215600,-323906400,-305766e3,-292456800,-273711600,-261007200,-242262e3,-226533600,-210812400,-195084e3,-179362800,-163634400,-147913200,-13158e4,-116463600,-100130400,-84405600,-68680800,-52956e3,-37231200,-21506400,-5781600,9943200,25668e3,41392800,57722400,73447200,89172e3,104896800,120621600,126669600,152071200,162352800,183520800,199245600,215575200,230695200,247024800,262749600,278474400,294199200,309924e3,325648800,341373600,357098400,372823200,388548e3,404877600,419997600,436327200,452052e3,467776800,483501600,499226400,514951200,530676e3,544586400,562125600,576036e3,59418e4,607485600,625629600,638935200,657079200,670989600,688528800,702439200,719978400,733888800,752032800,765338400,783482400,796788e3,814932e3,828842400,846381600,860292e3,877831200,891741600,909280800,923191200,941335200,954640800,972784800,986090400,1004234400,1018144800,1035684e3,1049594400,1067133600,1081044e3,1099188e3,1112493600,1130637600,1143943200,1162087200,1173578400,1194141600,1205028e3,1225591200,1236477600,1257040800,1268532e3,1289095200,1299981600,1320544800,1331431200,1351994400,1362880800,1383444e3,1394330400,1414893600,142578e4,1446343200,1457834400,1478397600,1489284e3,1509847200,1520733600,1541296800,1552183200,1572746400,1583632800,1604196e3,1615687200,1636250400,1647136800,16677e5,1678586400,1699149600,1710036e3,1730599200,1741485600,1762048800,1772935200,1793498400,1804989600,1825552800,1836439200,1857002400,1867888800,1888452e3,1899338400,1919901600,1930788e3],offset:[-28378,-28800,-25200,-28800,-25200,-28800,-25200,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800]},"America/Chicago":{
time:[-2717668236,-1633298400,-1615154400,-1601848800,-1583704800,-1563746400,-1551650400,-1538949600,-1520200800,-1504476e3,-1491775200,-1473026400,-1459720800,-1441576800,-1428271200,-1410127200,-1396821600,-1378677600,-1365372e3,-1347228e3,-1333922400,-1315173600,-1301868e3,-1283724e3,-1270418400,-1252274400,-1238968800,-1220824800,-1207519200,-1189375200,-1176069600,-1157320800,-114462e4,-1125871200,-1112565600,-1094421600,-1081116e3,-1067810400,-1045432800,-1031522400,-1018216800,-1000072800,-986767200,-968018400,-955317600,-936568800,-923263200,-905119200,-891813600,-880236e3,-769413600,-765410400,-747266400,-733960800,-715816800,-702511200,-684367200,-671061600,-652917600,-639612e3,-620863200,-608162400,-589413600,-576108e3,-557964e3,-544658400,-526514400,-513208800,-495064800,-481759200,-463615200,-447285600,-431560800,-415836e3,-400111200,-384386400,-368661600,-352936800,-337212e3,-321487200,-305762400,-289432800,-273708e3,-257983200,-242258400,-226533600,-210808800,-195084e3,-179359200,-163634400,-147909600,-13158e4,-11646e4,-100130400,-84405600,-68680800,-52956e3,-37231200,-21506400,-5781600,9943200,25668e3,41392800,57722400,73447200,89172e3,104896800,120621600,126669600,152071200,162352800,183520800,199245600,215575200,230695200,247024800,262749600,278474400,294199200,309924e3,325648800,341373600,357098400,372823200,388548e3,404877600,419997600,436327200,452052e3,467776800,483501600,499226400,514951200,530676e3,544586400,562125600,576036e3,59418e4,607485600,625629600,638935200,657079200,670989600,688528800,702439200,719978400,733888800,752032800,765338400,783482400,796788e3,814932e3,828842400,846381600,860292e3,877831200,891741600,909280800,923191200,941335200,954640800,972784800,986090400,1004234400,1018144800,1035684e3,1049594400,1067133600,1081044e3,1099188e3,1112493600,1130637600,1143943200,1162087200,1173578400,1194141600,1205028e3,1225591200,1236477600,1257040800,1268532e3,1289095200,1299981600,1320544800,1331431200,1351994400,1362880800,1383444e3,1394330400,1414893600,142578e4,1446343200,1457834400,1478397600,1489284e3,1509847200,1520733600,1541296800,1552183200,1572746400,1583632800,1604196e3,1615687200,1636250400,1647136800,16677e5,1678586400,1699149600,1710036e3,1730599200,1741485600,1762048800,1772935200,1793498400,1804989600,1825552800,1836439200,1857002400,1867888800,1888452e3,1899338400,1919901600,1930788e3],
offset:[-21036,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600]},"America/Phoenix":{time:[-2717670498,-1633298400,-1615154400,-1601848800,-1583704800,-880236e3,-820540740,-812678340,-796867140,-84405600,-68680800,1924966800],offset:[-26898,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200]},"America/Toronto":{
time:[-2366755200,-1632088800,-1615154400,-1601771400,-1583712e3,-1567375200,-1554681600,-1534716e3,-1524088800,-1503266400,-149238e4,-1471816800,-1460930400,-1440972e3,-1428876e3,-1409522400,-1397426400,-1378072800,-1365976800,-1346623200,-1333922400,-1315173600,-1301868e3,-1283724e3,-1270418400,-1252274400,-1238968800,-1220824800,-1207519200,-1188770400,-1176069600,-1157320800,-1144015200,-1125871200,-1112565600,-1094421600,-1081116e3,-1062972e3,-1049666400,-1031522400,-1018216800,-1000072800,-986767200,-968018400,-955317600,-936568800,-880232400,-76941e4,-765410400,-747266400,-733960800,-715824e3,-702518400,-684374400,-671068800,-652924800,-634176e3,-620863200,-602719200,-589413600,-576108e3,-557964e3,-544658400,-526514400,-513208800,-495064800,-481759200,-463615200,-450309600,-431560800,-418255200,-400111200,-384386400,-368661600,-352936800,-337212e3,-321487200,-305762400,-289432800,-273708e3,-257983200,-242258400,-226533600,-210808800,-195084e3,-179359200,-163634400,-147909600,-13158e4,-11646e4,-100130400,-84405600,-68680800,-52956e3,-37231200,-21506400,-5781600,9943200,25668e3,41392800,57722400,73447200,89172e3,104896800,120621600,136346400,152071200,167796e3,183520800,199245600,215575200,230695200,247024800,262749600,278474400,294199200,309924e3,325648800,341373600,357098400,372823200,388548e3,404877600,419997600,436327200,452052e3,467776800,483501600,499226400,514951200,530676e3,544586400,562125600,576036e3,59418e4,607485600,625629600,638935200,657079200,670989600,688528800,702439200,719978400,733888800,752032800,765338400,783482400,796788e3,814932e3,828842400,846381600,860292e3,877831200,891741600,909280800,923191200,941335200,954640800,972784800,986090400,1004234400,1018144800,1035684e3,1049594400,1067133600,1081044e3,1099188e3,1112493600,1130637600,1143943200,1162087200,1173578400,1194141600,1205028e3,1225591200,1236477600,1257040800,1268532e3,1289095200,1299981600,1320544800,1331431200,1351994400,1362880800,1383444e3,1394330400,1414893600,142578e4,1446343200,1457834400,1478397600,1489284e3,1509847200,1520733600,1541296800,1552183200,1572746400,1583632800,1604196e3,1615687200,1636250400,1647136800,16677e5,1678586400,1699149600,1710036e3,1730599200,1741485600,1762048800,1772935200,1793498400,1804989600,1825552800,1836439200,1857002400,1867888800,1888452e3,1899338400,1919901600,1930788e3],
offset:[-19052,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-14400,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3]},"America/Vancouver":{
time:[-2713910400,-1632088800,-1615154400,-880236e3,-769420800,-765410400,-747266400,-732751200,-715816800,-702511200,-684367200,-671061600,-652917600,-639612e3,-620863200,-608162400,-589413600,-576108e3,-557964e3,-544658400,-526514400,-513208800,-495064800,-481759200,-463615200,-450309600,-431560800,-418255200,-400111200,-386805600,-368661600,-355356e3,-337212e3,-323906400,-305762400,-292456800,-273708e3,-261007200,-242258400,-226533600,-210808800,-195084e3,-179359200,-163634400,-147909600,-13158e4,-11646e4,-100130400,-84405600,-68680800,-52956e3,-37231200,-21506400,-5781600,9943200,25668e3,41392800,57722400,73447200,89172e3,104896800,120621600,136346400,152071200,167796e3,183520800,199245600,215575200,230695200,247024800,262749600,278474400,294199200,309924e3,325648800,341373600,357098400,372823200,388548e3,404877600,419997600,436327200,452052e3,467776800,483501600,499226400,514951200,530676e3,544586400,562125600,576036e3,59418e4,607485600,625629600,638935200,657079200,670989600,688528800,702439200,719978400,733888800,752032800,765338400,783482400,796788e3,814932e3,828842400,846381600,860292e3,877831200,891741600,909280800,923191200,941335200,954640800,972784800,986090400,1004234400,1018144800,1035684e3,1049594400,1067133600,1081044e3,1099188e3,1112493600,1130637600,1143943200,1162087200,1173578400,1194141600,1205028e3,1225591200,1236477600,1257040800,1268532e3,1289095200,1299981600,1320544800,1331431200,1351994400,1362880800,1383444e3,1394330400,1414893600,142578e4,1446343200,1457834400,1478397600,1489284e3,1509847200,1520733600,1541296800,1552183200,1572746400,1583632800,1604196e3,1615687200,1636250400,1647136800,16677e5,1678586400,1699149600,1710036e3,1730599200,1741485600,1762048800,1772935200,1793498400,1804989600,1825552800,1836439200,1857002400,1867888800,1888452e3,1899338400,1919901600,1930788e3],
offset:[-29548,-28800,-25200,-28800,-25200,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800]},"America/Argentina/Buenos_Aires":{time:[-2372112e3,-1567468800,-1233446400,-1222992e3,-1205971200,-1194048e3,-117288e4,-1162512e3,-1141344e3,-1130976e3,-1109808e3,-109944e4,-1078272e3,-1067817600,-1046649600,-1036281600,-1015113600,-1004745600,-983577600,-973209600,-952041600,-941587200,-931046400,-900892800,-890352e3,-83376e4,-82728e4,-752284800,-733795200,-197337600,-190857600,-184204800,-164505600,-152668800,-132969600,-121132800,-101433600,-86832e3,-71107200,-54777600,-39052800,-23328e3,-7603200,128131200,136598400,596937600,605059200,624412800,636508800,656467200,667958400,687916800,699408e3,719366400,731462400,938908800,952041600,1198972800,1205625600,1224374400,1237075200,1924981200],offset:[-14028,-15408,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-10800,-10800,-7200,-10800,-7200,-10800]},"America/El_Salvador":{time:[-1546300800,546998400,559699200,578448e3,591148800,1924970400],offset:[-21408,-21600,-18e3,-21600,-18e3,-21600]},"America/Sao_Paulo":{
time:[-1767225600,-1206968400,-1191369600,-1175385600,-1159833600,-633830400,-622076400,-602294400,-59184e4,-570758400,-560217600,-539136e3,-53136e4,-195436800,-184204800,-155174400,-150076800,-128908800,-121132800,-99964800,-89596800,-68428800,-57974400,499737600,511228800,530582400,540259200,562118400,571190400,592963200,602035200,624412800,634694400,656467200,666748800,687916800,697593600,719971200,728438400,750816e3,761702400,782265600,793152e3,813715200,823996800,84456e4,856051200,876096e3,888710400,908064e3,919555200,938908800,951609600,970963200,982454400,1003017600,1013904e3,1036281600,1045353600,1066521600,1076803200,1099353600,1108857600,1129420800,1140307200,1162684800,1172361600,119232e4,1203206400,1224374400,1234656e3,1255824e3,1266710400,1287273600,129816e4,1318723200,1330214400,1350777600,1361059200,1382227200,1392508800,1413676800,1424563200,1445126400,1456012800,1476576e3,1487462400,1508025600,1518912e3,154008e4,1550361600,1571529600,1581811200,1602979200,1613865600,1634428800,1645315200,1665878400,1677369600,1697328e3,1708214400,1729382400,1739664e3,1760832e3,1771718400,1792281600,1803168e3,1823731200,1834617600,1855180800,1866067200,1887235200,1897516800,1918684800,1928966400],offset:[-11188,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200]},"America/Bogota":{time:[-2707689600,-1739059200,704851200,733881600,1924974e3],offset:[-17776,-17776,-18e3,-14400,-18e3]},"America/Caracas":{time:[-2524521600,-1826755200,-157766400,1197169200,1462069800,1924977600],offset:[-16064,-16060,-16200,-14400,-16200,-14400]},"Europe/Moscow":{
time:[-2840140800,-1688256e3,-165681e4,-1641340800,-1627956e3,-1618700400,-1596416400,-1593804521,-1589846400,-1542416400,-1539478800,-1525305600,-1522713600,-1491177600,-1247529600,354931200,370742400,386467200,402278400,418003200,433814400,449625600,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,695786400,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1414288800,1925002800],offset:[9017,9017,9079,12679,9079,16279,12679,16279,14400,10800,14400,18e3,14400,10800,7200,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,10800,7200,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800]},"Europe/Athens":{time:[-2344636800,-1686095940,-1182988800,-1178150400,-906854400,-904867200,-85725e4,-844473600,-828230400,-812419200,-552355200,-541641600,166492800,186195600,198036e3,213764400,228880800,244090800,260330400,275457600,291805200,307418400,323395200,338947200,354682800,370411200,386132400,401860800,417582e3,433310400,449031600,465364800,481086e3,496814400,512535600,528264e3,543985200,559713600,575434800,591163200,606884400,622612800,638334e3,654667200,670388400,686116800,701838e3,717566400,733287600,749016e3,764737200,780465600,796186800,811915200,828241200,846388800,859690800,877838400,891140400,909288e3,92259e4,941342400,954039600,972792e3,985489200,1004241600,1017543600,1035691200,1048993200,1067140800,1080442800,1099195200,1111892400,1130644800,1143342e3,1162094400,1174791600,1193544e3,1206846e3,1224993600,1238295600,1256443200,1269745200,1288497600,1301194800,1319947200,1332644400,1351396800,1364698800,1382846400,1396148400,1414296e3,1427598e3,1445745600,1459047600,14778e5,1490497200,1509249600,1521946800,1540699200,1554001200,1572148800,1585450800,1603598400,1616900400,1635652800,164835e4,1667102400,1679799600,1698552e3,1711854e3,1730001600,1743303600,1761451200,1774753200,1792900800,1806202800,1824955200,1837652400,1856404800,1869102e3,1887854400,1901156400,1919304e3,1932606e3],
offset:[5692,5692,7200,10800,7200,10800,7200,3600,7200,3600,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200]},"Europe/Belgrade":{time:[-2713910400,-905821200,-85725e4,-844552800,-828219600,-812498400,-79677e4,-777938400,-766616400,417578400,433306800,449028e3,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1319943600,1332640800,1351393200,1364695200,1382842800,1396144800,1414292400,1427594400,1445742e3,1459044e3,1477796400,1490493600,1509246e3,1521943200,1540695600,1553997600,1572145200,1585447200,1603594800,1616896800,1635649200,1648346400,1667098800,1679796e3,1698548400,1711850400,1729998e3,17433e5,1761447600,1774749600,1792897200,1806199200,1824951600,1837648800,1856401200,1869098400,1887850800,1901152800,1919300400,1932602400],offset:[4920,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600]},"Europe/Berlin":{
time:[-2422051200,-1693702800,-1680476400,-1663452e3,-1650142800,-1632002400,-1618693200,-938901600,-85725e4,-844552800,-828219600,-812498400,-79677e4,-781048800,-776556e3,-765925200,-761173200,-748476e3,-733266e3,-717627600,-714603600,-71037e4,-701902800,-684972e3,-670453200,-654127200,-639003600,323834400,338958e3,354679200,370407600,386128800,401857200,417578400,433306800,449028e3,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1319943600,1332640800,1351393200,1364695200,1382842800,1396144800,1414292400,1427594400,1445742e3,1459044e3,1477796400,1490493600,1509246e3,1521943200,1540695600,1553997600,1572145200,1585447200,1603594800,1616896800,1635649200,1648346400,1667098800,1679796e3,1698548400,1711850400,1729998e3,17433e5,1761447600,1774749600,1792897200,1806199200,1824951600,1837648800,1856401200,1869098400,1887850800,1901152800,1919300400,1932602400],offset:[3208,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,10800,7200,3600,7200,3600,7200,10800,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600]},"Europe/London":{
time:[-3852662400,-1691964e3,-1680469200,-1664143200,-1650142800,-1633903200,-1617483600,-1601848800,-1586034e3,-1570399200,-1552165200,-1538344800,-152253e4,-15075e5,-1490562e3,-1473631200,-1460926800,-1442786400,-1428872400,-1410732e3,-1396213200,-1379282400,-1364763600,-1348437600,-1333314e3,-1315778400,-1301259600,-1284328800,-126981e4,-1253484e3,-1238360400,-1221429600,-1206910800,-118998e4,-1175461200,-1159135200,-1143406800,-1126476e3,-1111957200,-1095631200,-1080507600,-1063576800,-1049058e3,-1032127200,-1017608400,-1001282400,-986158800,-969228e3,-950475600,-942012e3,-904514400,-896043600,-875484e3,-864594e3,-844034400,-832539600,-812584800,-798066e3,-781048800,-772059600,-764802e3,-748476e3,-733352400,-719445600,-717026400,-706741200,-699483600,-687996e3,-668034e3,-654732e3,-636584400,-622072800,-605739600,-590623200,-57429e4,-558568800,-542235600,-527119200,-512600400,-496274400,-481150800,-46422e4,-449701200,-432165600,-417646800,-401320800,-386197200,-369266400,-354747600,-337816800,-323298e3,-306972e3,-291848400,-276732e3,-257979600,-245282400,-22653e4,-213228e3,-195080400,-182383200,-163630800,-150933600,-132181200,-119484e3,-100731600,-88034400,-68677200,-59004e3,-37238400,57726e3,69818400,89175600,101268e3,120625200,132717600,152074800,164167200,183524400,196221600,214974e3,227671200,246423600,259120800,278478e3,290570400,309927600,32202e4,341377200,354675600,372823200,386125200,404272800,417574800,435722400,449024400,467776800,481078800,499226400,512528400,530676e3,543978e3,562125600,575427600,593575200,606877200,625629600,638326800,657079200,670381200,688528800,701830800,719978400,733280400,751428e3,76473e4,782877600,796179600,814327200,828234e3,846381600,859683600,877831200,891133200,909280800,922582800,941335200,954032400,972784800,985482e3,1004234400,1017536400,1035684e3,1048986e3,1067133600,1080435600,1099188e3,1111885200,1130637600,1143334800,1162087200,1174784400,1193536800,1206838800,1224986400,1238288400,1256436e3,1269738e3,1288490400,1301187600,131994e4,1332637200,1351389600,1364691600,1382839200,1396141200,1414288800,1427590800,1445738400,1459040400,1477792800,149049e4,1509242400,1521939600,1540692e3,1553994e3,1572141600,1585443600,1603591200,1616893200,1635645600,1648342800,1667095200,1679792400,1698544800,1711846800,1729994400,1743296400,1761444e3,1774746e3,1792893600,1806195600,1824948e3,1837645200,1856397600,1869094800,1887847200,1901149200,1919296800,1932598800],
offset:[-75,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,0,3600,0,3600,7200,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0]},"Europe/Luxembourg":{time:[-2069712e3,-1692493200,-1680476400,-1662339600,-165015e4,-1632002400,-1618693200,-1612656e3,-1604278800,-1585515600,-1574038800,-1552255200,-1539997200,-1520546400,-1507510800,-1490569200,-1473642e3,-1459116e3,-1444006800,-142767e4,-1411866e3,-1396220400,-1379293200,-1364770800,-1348448400,-1333321200,-1316394e3,-1301266800,-1284339600,-126981e4,-1253484e3,-1238360400,-1221429600,-1206910800,-1191189600,-1175461200,-1160344800,-1143406800,-1127685600,-1111957200,-1096840800,-1080507600,-1063576800,-1049058e3,-1033336800,-1017608400,-1002492e3,-986158800,-969228e3,-950475600,-942012e3,-935182800,-85725e4,-844552800,-828219600,-812498400,-797979600,-781048800,-766616400,-745452e3,-733266e3,228880800,244004400,260330400,276058800,29178e4,307508400,323834400,338958e3,354679200,370407600,386128800,401857200,417578400,433306800,449028e3,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1319943600,1332640800,1351393200,1364695200,1382842800,1396144800,1414292400,1427594400,1445742e3,1459044e3,1477796400,1490493600,1509246e3,1521943200,1540695600,1553997600,1572145200,1585447200,1603594800,1616896800,1635649200,1648346400,1667098800,1679796e3,1698548400,1711850400,1729998e3,17433e5,1761447600,1774749600,1792897200,1806199200,1824951600,1837648800,1856401200,1869098400,1887850800,1901152800,1919300400,1932602400],
offset:[1476,3600,7200,3600,7200,3600,7200,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600]},"Europe/Madrid":{time:[-2177453684,-1631926800,-1616972400,-1601168400,-1585436400,-1442451600,-1427756400,-1379293200,-1364857200,-1348448400,-1333407600,-1316390400,-1301353200,-1284339600,-1269903600,-1026954e3,-1017702e3,-1001898e3,-999478800,-986083200,-951519600,-940208400,-873075600,-862614e3,-842835600,-828313200,-811386e3,-796863600,-779936400,-765414e3,-748486800,-733964400,-652323600,-639010800,135126e3,150253200,166575600,181702800,196815600,212547600,22887e4,243997200,260330400,276058800,29178e4,307508400,323834400,338958e3,354679200,370407600,386128800,401857200,417578400,433306800,449028e3,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1319943600,1332640800,1351393200,1364695200,1382842800,1396144800,1414292400,1427594400,1445742e3,1459044e3,1477796400,1490493600,1509246e3,1521943200,1540695600,1553997600,1572145200,1585447200,1603594800,1616896800,1635649200,1648346400,1667098800,1679796e3,1698548400,1711850400,1729998e3,17433e5,1761447600,1774749600,1792897200,1806199200,1824951600,1837648800,1856401200,1869098400,1887850800,1901152800,1919300400,1932602400],
offset:[-884,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,7200,3600,0,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600]},"Europe/Paris":{time:[-2486678340,-1855958340,-1689814800,-1680393600,-1665363600,-1648339200,-1635123600,-1616889600,-1604278800,-158544e4,-1574038800,-1552262400,-1539997200,-1520553600,-1507510800,-1490572800,-1470618e3,-1459123200,-1444006800,-1427673600,-1411952400,-1396224e3,-1379293200,-1364774400,-1348448400,-1333324800,-1316394e3,-1301270400,-1284339600,-1269820800,-1253494800,-1238371200,-1221440400,-1206921600,-1191200400,-1175472e3,-1160355600,-1143417600,-1127696400,-1111968e3,-1096851600,-1080518400,-1063587600,-1049068800,-1033347600,-1017619200,-1002502800,-986169600,-969238800,-950486400,-942012e3,-932432400,-85725e4,-844552800,-828219600,-812498400,-800064e3,-796258800,-781048800,-766616400,196822800,212547600,228880800,244004400,260330400,276058800,29178e4,307508400,323834400,338958e3,354679200,370407600,386128800,401857200,417578400,433306800,449028e3,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1319943600,1332640800,1351393200,1364695200,1382842800,1396144800,1414292400,1427594400,1445742e3,1459044e3,1477796400,1490493600,1509246e3,1521943200,1540695600,1553997600,1572145200,1585447200,1603594800,1616896800,1635649200,1648346400,1667098800,1679796e3,1698548400,1711850400,1729998e3,17433e5,1761447600,1774749600,1792897200,1806199200,1824951600,1837648800,1856401200,1869098400,1887850800,1901152800,1919300400,1932602400],
offset:[561,561,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,7200,3600,7200,3600,7200,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600]},"Europe/Rome":{time:[-3259094400,-2403562204,-1690761600,-168048e4,-1664755200,-1648944e3,-163512e4,-1616889600,-1604275200,-1585526400,-1571011200,-1555286400,-932428800,-85725e4,-844552800,-828219600,-812498400,-798066e3,-781048800,-76671e4,-750895200,-733352400,-719452800,-70191e4,-689205600,-670453200,-114048e3,-103161600,-81993600,-71708400,-50544e3,-40258800,-18489600,-8204400,1296e4,23245200,43804800,54694800,75859200,86749200,107913600,118198800,138758400,149648400,170812800,181098e3,202262400,212547600,233107200,243997200,265161600,276051600,296611200,307501200,323834400,338958e3,354679200,370407600,386128800,401857200,417578400,433306800,449028e3,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1319943600,1332640800,1351393200,1364695200,1382842800,1396144800,1414292400,1427594400,1445742e3,1459044e3,1477796400,1490493600,1509246e3,1521943200,1540695600,1553997600,1572145200,1585447200,1603594800,1616896800,1635649200,1648346400,1667098800,1679796e3,1698548400,1711850400,1729998e3,17433e5,1761447600,1774749600,1792897200,1806199200,1824951600,1837648800,1856401200,1869098400,1887850800,1901152800,1919300400,1932602400],
offset:[2996,2996,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600]},"Europe/Warsaw":{time:[-2840140800,-1717027200,-1693702800,-1680476400,-1663452e3,-1650142800,-1632002400,-1618693200,-1600466400,-1587157200,-1501718400,-931730400,-85725e4,-844552800,-828219600,-812498400,-796600800,-778723200,-762652800,-748483200,-733266e3,-715212e3,-701902800,-684972e3,-670453200,-654127200,-639003600,-397090800,-386805600,-371084400,-355356e3,-334191600,-323301600,-307580400,-291852e3,-271292400,-260402400,-239842800,-228952800,-208393200,-197503200,-176338800,-166053600,228877200,244000800,260326800,276055200,291776400,307504800,323830800,338954400,354675600,370404e3,386125200,401853600,417574800,433303200,449024400,465357600,481078800,496807200,512528400,528256800,543978e3,559706400,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1319943600,1332640800,1351393200,1364695200,1382842800,1396144800,1414292400,1427594400,1445742e3,1459044e3,1477796400,1490493600,1509246e3,1521943200,1540695600,1553997600,1572145200,1585447200,1603594800,1616896800,1635649200,1648346400,1667098800,1679796e3,1698548400,1711850400,1729998e3,17433e5,1761447600,1774749600,1792897200,1806199200,1824951600,1837648800,1856401200,1869098400,1887850800,1901152800,1919300400,1932602400],
offset:[5040,5040,3600,7200,3600,7200,3600,7200,7200,10800,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600]},"Europe/Istanbul":{time:[-2840140800,-1869868800,-1693699200,-168048e4,-1570406400,-1552176e3,-1538352e3,-1522540800,-1507507200,-1490572800,-1440201600,-1428019200,-1409702400,-1396483200,-931132800,-922752e3,-917827200,-892425600,-875836800,-857347200,-781056e3,-764726400,-744336e3,-733795200,-716428800,-701913600,-684979200,-670464e3,-654134400,-639014400,-621820800,-60696e4,-590025600,-575424e3,-235612800,-228268800,-177724800,-165715200,10540800,23846400,41990400,55296e3,74044800,87350400,107917200,12123e4,133927200,152686800,165369600,183513600,202435200,215568e3,228873600,245808e3,260323200,277257600,308793600,323838e3,340243200,354682800,371692800,386132400,403142400,428457600,433900800,482803200,496713600,512528400,528256800,543978e3,559706400,575427600,591156e3,606877200,622605600,638326800,65466e4,670381200,686109600,701830800,717559200,733280400,749008800,764125200,780458400,796179600,811908e3,828234e3,846381600,859683600,877831200,891133200,909280800,922582800,941335200,954032400,972784800,985482e3,1004234400,1017536400,1035684e3,1048986e3,1067133600,1080435600,1099188e3,1111885200,1130637600,1143334800,1162087200,1174791600,1193544e3,1206846e3,1224993600,1238295600,1256443200,1269745200,1288497600,1301281200,1319947200,1332644400,1351396800,1364698800,1382846400,1396234800,1414296e3,1427598e3,1446955200,1459047600,1473206400,1925002800],offset:[6952,7016,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,10800]},"Europe/Zurich":{
time:[-3675196800,-2385244800,-904431600,-891122400,-872982e3,-859672800,354679200,370407600,386128800,401857200,417578400,433306800,449028e3,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1319943600,1332640800,1351393200,1364695200,1382842800,1396144800,1414292400,1427594400,1445742e3,1459044e3,1477796400,1490493600,1509246e3,1521943200,1540695600,1553997600,1572145200,1585447200,1603594800,1616896800,1635649200,1648346400,1667098800,1679796e3,1698548400,1711850400,1729998e3,17433e5,1761447600,1774749600,1792897200,1806199200,1824951600,1837648800,1856401200,1869098400,1887850800,1901152800,1919300400,1932602400],offset:[2048,1786,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600]},"Australia/Sydney":{time:[-2364076800,-1672531140,-1665352800,-883605600,-876088800,-860364e3,-844639200,-828309600,-813189600,57722400,68007600,89172e3,100062e3,120621600,131511600,152071200,162961200,183520800,195015600,215575200,226465200,247024800,257914800,278474400,289364400,309924e3,320814e3,341373600,352263600,372823200,386737200,404877600,415767600,436327200,447217200,467776800,478666800,499226400,511326e3,530071200,542775600,562125600,57483e4,59418e4,606279600,625629600,636519600,657079200,667969200,688528800,699418800,719978400,731473200,752032800,762922800,783482400,794372400,814932e3,828241200,846381600,859690800,877831200,891140400,909280800,92259e4,941335200,954039600,967341600,985489200,1004234400,1017543600,1035684e3,1048993200,1067133600,1080442800,1099188e3,1111892400,1130637600,1143946800,1162087200,1174791600,1193536800,1207450800,1223172e3,1238900400,1254621600,127035e4,1286071200,1301799600,1317520800,1333249200,1349575200,1365303600,1381024800,1396753200,1412474400,1428202800,1443924e3,1459652400,1475373600,1491102e3,1506823200,1522551600,1538877600,1554606e3,1570327200,1586055600,1601776800,1617505200,1633226400,1648954800,1664676e3,1680404400,1696125600,1712458800,172818e4,1743908400,1759629600,1775358e3,1791079200,1806807600,1822528800,1838257200,1853978400,1869706800,1886032800,1901761200,1917482400,1933210800],
offset:[36292,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600]},"Australia/Brisbane":{time:[-2366755200,-1672531140,-1665352800,-883605600,-876088800,-860364e3,-844639200,-828309600,-813189600,57722400,68007600,625629600,636519600,657079200,667969200,688528800,699418800,1925028e3],offset:[36728,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3]},"Australia/Adelaide":{time:[-2364076800,-2230156800,-1672531140,-1665352800,-883605600,-876088800,-860364e3,-844639200,-828309600,-813189600,57722400,68007600,89172e3,100062e3,120621600,131511600,152071200,162961200,183520800,195015600,215575200,226465200,247024800,257914800,278474400,289364400,309924e3,320814e3,341373600,352263600,372823200,384318e3,404877600,415767600,436327200,447217200,467776800,478666800,499226400,511326e3,530071200,542775600,562125600,57483e4,59418e4,606279600,625629600,637729200,657079200,667969200,688528800,701233200,719978400,731473200,752032800,764132400,783482400,796186800,814932e3,828241200,846381600,859690800,877831200,891140400,909280800,92259e4,941335200,954039600,972784800,985489200,1004234400,1017543600,1035684e3,1048993200,1067133600,1080442800,1099188e3,1111892400,1130637600,1143946800,1162087200,1174791600,1193536800,1207450800,1223172e3,1238900400,1254621600,127035e4,1286071200,1301799600,1317520800,1333249200,1349575200,1365303600,1381024800,1396753200,1412474400,1428202800,1443924e3,1459652400,1475373600,1491102e3,1506823200,1522551600,1538877600,1554606e3,1570327200,1586055600,1601776800,1617505200,1633226400,1648954800,1664676e3,1680404400,1696125600,1712458800,172818e4,1743908400,1759629600,1775358e3,1791079200,1806807600,1822528800,1838257200,1853978400,1869706800,1886032800,1901761200,1917482400,1933210800],
offset:[33260,32400,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800]},"Australia/ACT":{time:[-2364076800,-1672531140,-1665352800,-883605600,-876088800,-860364e3,-844639200,-828309600,-813189600,57722400,68007600,89172e3,100062e3,120621600,131511600,152071200,162961200,183520800,195015600,215575200,226465200,247024800,257914800,278474400,289364400,309924e3,320814e3,341373600,352263600,372823200,386737200,404877600,415767600,436327200,447217200,467776800,478666800,499226400,511326e3,530071200,542775600,562125600,57483e4,59418e4,606279600,625629600,636519600,657079200,667969200,688528800,699418800,719978400,731473200,752032800,762922800,783482400,794372400,814932e3,828241200,846381600,859690800,877831200,891140400,909280800,92259e4,941335200,954039600,967341600,985489200,1004234400,1017543600,1035684e3,1048993200,1067133600,1080442800,1099188e3,1111892400,1130637600,1143946800,1162087200,1174791600,1193536800,1207450800,1223172e3,1238900400,1254621600,127035e4,1286071200,1301799600,1317520800,1333249200,1349575200,1365303600,1381024800,1396753200,1412474400,1428202800,1443924e3,1459652400,1475373600,1491102e3,1506823200,1522551600,1538877600,1554606e3,1570327200,1586055600,1601776800,1617505200,1633226400,1648954800,1664676e3,1680404400,1696125600,1712458800,172818e4,1743908400,1759629600,1775358e3,1791079200,1806807600,1822528800,1838257200,1853978400,1869706800,1886032800,1901761200,1917482400,1933210800],offset:[36292,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600]},"Asia/Almaty":{
time:[-1441152e3,-1247529600,354931200,370742400,386467200,402278400,418003200,433814400,449625600,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,695786400,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1925013600],offset:[18468,18e3,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,21600,18e3,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600]},"Asia/Ashkhabad":{time:[-1441152e3,-1247529600,354931200,370742400,386467200,402278400,418003200,433814400,449625600,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,695786400,192501e4],offset:[14012,14400,18e3,21600,18e3,21600,18e3,21600,18e3,21600,18e3,21600,18e3,21600,18e3,21600,18e3,21600,18e3,21600,18e3,21600,18e3,18e3,14400,18e3]},"Asia/Tokyo":{time:[-2587678861,-683762400,-672357600,-654732e3,-640908e3,-620258400,-609458400,-588808800,-578008800,1925024400],offset:[33539,32400,36e3,32400,36e3,32400,36e3,32400,36e3,32400]},"Asia/Taipei":{time:[-2335219200,-1017792e3,-766191600,-745804800,-733795200,-716860800,-699580800,-683856e3,-670636800,-65232e4,-639100800,-620784e3,-607564800,-589248e3,-576028800,-562896e3,-541728e3,-528681600,-510192e3,-497145600,-478656e3,-465609600,-449798400,-433987200,-418176e3,-402451200,-38664e4,-370915200,-355104e3,-339379200,-323568e3,-302486400,-291945600,-270950400,-260409600,134006400,149817600,165542400,181353600,299635200,307584e3,1925020800],offset:[29160,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800]},"Asia/Singapore":{time:[-2177452800,-2038176e3,-1167609600,-1073001600,-894153600,-879638400,-766972800,378691200,1925020800],offset:[24925,24925,25200,26400,26400,27e3,32400,27e3,28800]},"Asia/Shanghai":{time:[-2177452800,-933465600,-923097600,-908755200,-891561600,515548800,52704e4,545184e3,558489600,576633600,589939200,608688e3,621993600,640137600,653443200,671587200,684892800,1925020800],offset:[29143,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800]},"Asia/Seoul":{time:[-1948752e3,-1830384e3,-767318400,-498096e3,-462672e3,-451699200,-429753600,-418262400,-399513600,-387417600,-368064e3,-355968e3,-336614400,-324518400,-305164800,-293068800,-264902400,547610400,560919600,57906e4,592369200,1925024400],
offset:[30472,30600,32400,32400,30600,34200,30600,34200,30600,34200,30600,34200,30600,34200,30600,34200,30600,32400,36e3,32400,36e3,32400]},"Asia/Tehran":{time:[-1704153600,-757382400,247190400,259286400,277776e3,283996800,290822400,306547200,322444800,338515200,673228800,685497600,701222400,71712e4,732758400,748656e3,764294400,780192e3,795830400,811728e3,827366400,843264e3,858988800,874886400,890524800,906422400,922060800,937958400,953596800,969494400,985219200,1001116800,1016755200,1032652800,1048291200,1064188800,1079827200,1095724800,1111449600,1127347200,1206057600,1221955200,123768e4,1253577600,1269216e3,1285113600,1300752e3,1316649600,1332288e3,1348185600,1363910400,1379808e3,1395446400,1411344e3,1426982400,144288e4,1458518400,1474416e3,1490140800,1506038400,1521676800,1537574400,1553212800,1569110400,1584748800,1600646400,1616371200,1632268800,1647907200,1663804800,1679443200,1695340800,1710979200,1726876800,1742601600,1758499200,1774137600,1790035200,1805673600,1821571200,1837209600,1853107200,1868745600,1884643200,1900368e3,1916265600,1931904e3],offset:[12344,12344,12600,14400,18e3,14400,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600]},"Asia/Dubai":{time:[-1577923200,1925006400],offset:[13272,14400]},"Asia/Kolkata":{time:[-2840140800,-891561600,-872035200,-862617600,-764121600,1925011800],offset:[21208,21200,23400,19800,23400,19800]},"Asia/Hong_Kong":{time:[-2056665600,-907360200,-891635400,-884217600,-766713600,-747952200,-728512200,-717021e3,-694470600,-683757e3,-668032200,-654726600,-636582600,-623277e3,-605133e3,-591827400,-573683400,-559773e3,-542320200,-528323400,-510179400,-498083400,-478729800,-466633800,-446675400,-435184200,-415225800,-403129800,-383776200,-371680200,-352326600,-340230600,-320877e3,-308781e3,-288822600,-277331400,-257373e3,-245881800,-225923400,-213827400,-194473800,-182377800,-163024200,-148509e3,-132784200,-117059400,-101334600,-85609800,-69280200,-53555400,-37830600,-22105800,-6381e3,9343800,25068600,40793400,56518200,72243e3,88572600,104297400,120022200,126070200,151471800,167196600,182921400,198646200,214371e3,295414200,309324600,1925020800],offset:[27402,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800]},"Asia/Bangkok":{time:[-2840140800,-1570060800,1925017200],
offset:[24124,24124,25200]},"Asia/Chongqing":{time:[-2177452800,-933465600,-923097600,-908755200,-891561600,515548800,52704e4,545184e3,558489600,576633600,589939200,608688e3,621993600,640137600,653443200,671587200,684892800,1925020800],offset:[29143,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800]},"Asia/Jerusalem":{time:[-2840140800,-1640995200,-933638400,-857347200,-844293600,-825811200,-812678400,-794188800,-779846400,-762645600,-748303200,-731116800,-681955200,-673228800,-667951200,-65232e4,-636415200,-62208e4,-608936400,-59184e4,-572475600,-558568800,-542840400,-527724e3,-514414800,-490838400,-482976e3,-459468e3,-451526400,-428544e3,-418251600,-400024800,-387417600,142387200,150854400,167184e3,178675200,482284800,495590400,516758400,526435200,545443200,558489600,576633600,589334400,609897600,620784e3,638323200,651628800,669772800,683683200,701827200,715737600,733708800,747187200,765158400,778032e3,796608e3,810086400,826848e3,842832e3,858902400,874195200,890352e3,90504e4,923018400,936324e3,955677600,970794e3,986778e3,1001293200,1017363600,1033952400,1048813200,1065142800,1081299600,1095814800,1112320800,1128823200,1143770400,1159668e3,117522e4,1189908e3,1206669600,1223172e3,1238119200,1254016800,1269568800,1284256800,1301623200,1317520800,1333072800,1348365600,1364522400,1382839200,1395972e3,1414288800,1427421600,1445738400,1458871200,1477792800,1490320800,1509242400,1521770400,1540692e3,1553824800,1572141600,1585274400,1603591200,1616724e3,1635645600,1648173600,1667095200,1679623200,1698544800,1711677600,1729994400,1743127200,1761444e3,1774576800,1792893600,1806026400,1824948e3,1837476e3,1856397600,1868925600,1887847200,190098e4,1919296800,1932429600],offset:[8454,8440,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,14400,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200]},"Asia/Kuwait":{time:[-719625600,1925002800],offset:[11212,10800]},"Asia/Muscat":{time:[-1577923200,1925006400],offset:[13272,14400]},"Asia/Qatar":{time:[-1577923200,76204800,1925002800],offset:[12368,14400,10800]},"Asia/Riyadh":{time:[-719625600,1925002800],offset:[11212,10800]},"Pacific/Auckland":{
time:[-3192393600,-1330293600,-1320012e3,-1300658400,-1287352800,-1269208800,-1255903200,-1237759200,-1224453600,-1206309600,-1192399200,-117486e4,-1160949600,-1143410400,-1125871200,-1112565600,-1094421600,-1081116e3,-1062972e3,-1049666400,-1031522400,-1018216800,-1000072800,-986767200,-968018400,-955317600,-936568800,-923263200,-757382400,152676e3,162356400,183520800,195015600,215575200,226465200,247024800,257914800,278474400,289364400,309924e3,320814e3,341373600,352263600,372823200,384318e3,404877600,415767600,436327200,447217200,467776800,478666800,499226400,510116400,530676e3,541566e3,562125600,573620400,59418e4,60507e4,623815200,637729200,655264800,669178800,686714400,700628400,718164e3,732682800,749613600,764132400,781063200,795582e3,812512800,827031600,844567200,858481200,876016800,889930800,907466400,921985200,938916e3,953434800,970365600,984884400,100242e4,1016334e3,1033869600,1047783600,1065319200,1079838e3,1096768800,1111287600,1128218400,1142737200,1159668e3,1174186800,1191117600,1207450800,1222567200,1238900400,1254016800,127035e4,1285466400,1301799600,1316916e3,1333249200,1348970400,1365303600,138042e4,1396753200,1411869600,1428202800,1443319200,1459652400,1474768800,1491102e3,1506218400,1522551600,1538272800,1554606e3,1569722400,1586055600,1601172e3,1617505200,1632621600,1648954800,1664071200,1680404400,1695520800,1712458800,1727575200,1743908400,1759024800,1775358e3,1790474400,1806807600,1821924e3,1838257200,1853373600,1869706800,1885428e3,1901761200,1916877600,1933210800],offset:[41944,41400,45e3,41400,43200,41400,43200,41400,43200,41400,43200,41400,43200,41400,43200,41400,43200,41400,43200,41400,43200,41400,43200,41400,43200,41400,43200,41400,43200,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800]},"Pacific/Chatham":{
time:[-3192393600,-757382400,152678700,162359100,183523500,195018300,215577900,226467900,247027500,257917500,278477100,289367100,309926700,320816700,341376300,352266300,372825900,384320700,404880300,415770300,436329900,447219900,467779500,478669500,499229100,510119100,530678700,541568700,562128300,573623100,594182700,605072700,623817900,637731900,655267500,669181500,686717100,700631100,718166700,732685500,749616300,764135100,781065900,795584700,812515500,827034300,844569900,858483900,876019500,889933500,907469100,921987900,938918700,953437500,970368300,984887100,1002422700,1016336700,1033872300,1047786300,1065321900,1079840700,1096771500,1111290300,1128221100,1142739900,1159670700,1174189500,1191120300,1207453500,1222569900,1238903100,1254019500,1270352700,1285469100,1301802300,1316918700,1333251900,1348973100,1365306300,1380422700,1396755900,1411872300,1428205500,1443321900,1459655100,1474771500,1491104700,1506221100,1522554300,1538275500,1554608700,1569725100,1586058300,1601174700,1617507900,1632624300,1648957500,1664073900,1680407100,1695523500,1712461500,1727577900,1743911100,1759027500,1775360700,1790477100,1806810300,1821926700,1838259900,1853376300,1869709500,1885430700,1901763900,1916880300,1933213500],offset:[44028,44100,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500]},"Pacific/Fakaofo":{time:[-2177452800,1325203200,1925038800],offset:[-41096,-39600,46800]},"Pacific/Honolulu":{time:[-2334139200,-1157320800,-1155470400,-880236e3,-765410400,-712188e3,1924956e3],offset:[-37886,-37800,-34200,-37800,-34200,-37800,-36e3]},"America/Mexico_City":{
time:[-1514763396,-1343091600,-1234828800,-1220317200,-1207180800,-1191369600,-975283200,-963187200,-917136e3,-907372800,-821923200,-810086400,-627523200,-613008e3,828842400,846381600,860292e3,877831200,891741600,909280800,923191200,941335200,954640800,972784800,989114400,1001815200,1018144800,1035684e3,1049594400,1067133600,1081044e3,1099188e3,1112493600,1130637600,1143943200,1162087200,1175392800,1193536800,1207447200,1224986400,1238896800,1256436e3,1270346400,1288490400,1301796e3,131994e4,1333245600,1351389600,13653e5,1382839200,1396749600,1414288800,1428199200,1445738400,1459648800,1477792800,1491098400,1509242400,1522548e3,1540692e3,1554602400,1572141600,1586052e3,1603591200,1617501600,1635645600,1648951200,1667095200,1680400800,1698544800,1712455200,1729994400,1743904800,1761444e3,1775354400,1792893600,1806804e3,1824948e3,1838253600,1856397600,1869703200,1887847200,1901757600,1919296800,1933207200],offset:[-23796,-25200,-21600,-25200,-21600,-25200,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600]},"Africa/Cairo":{time:[-2185401600,-929836800,-923097600,-906163200,-892857600,-875836800,-857779200,-844300800,-825811200,-812678400,-794188800,-779846400,-762652800,-399081600,-38664e4,-368323200,-355104e3,-336783600,-323643600,-305161200,-292021200,-273625200,-260485200,-242089200,-228949200,-210553200,-197413200,-178930800,-165790800,-147394800,-134254800,-115858800,-102632400,-84322800,-71096400,-52700400,-39474e3,-21164400,-7938e3,10371600,23598e3,41907600,55134e3,7353e4,86756400,105066e3,118292400,136602e3,149828400,168138e3,181364400,199760400,212986800,231296400,244522800,262832400,276058800,294368400,307594800,325990800,339217200,357526800,370753200,396406800,402289200,426819600,433825200,452221200,465447600,483757200,496983600,515293200,528519600,546829200,560055600,578451600,591678e3,610419600,623214e3,641523600,65475e4,673059600,686286e3,704682e3,717908400,736218e3,749444400,767754e3,780980400,799027200,812332800,830476800,843782400,861926400,875232e3,893376e3,906681600,925430400,938736e3,95688e4,970185600,988329600,1001635200,1019779200,1033084800,1051228800,1064534400,1083283200,1096588800,1114732800,1128038400,1146182400,1158883200,1177632e3,1189123200,1209081600,1219968e3,1240531200,1250812800,1272585600,1281484800,1284076800,1285891200,1400198400,1403827200,1406851200,1411689600,1924999200],
offset:[7509,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200]},"Africa/Johannesburg":{time:[-2458166400,-2109283200,-860968800,-845244e3,-829519200,-813794400,1924999200],offset:[6720,5400,7200,10800,7200,10800,7200]},"Asia/Kathmandu":{time:[-1577923200,504921600,1925012700],offset:[20476,19800,20700]},"US/Mountain":{time:[-2717668796,-1633298400,-1615154400,-1601848800,-1583704800,-1570399200,-1551650400,-1538949600,-1534111200,-880236e3,-769417200,-765410400,-147909600,-13158e4,-11646e4,-100130400,-84405600,-68680800,-52956e3,-37231200,-21506400,-5781600,9943200,25668e3,41392800,57722400,73447200,89172e3,104896800,120621600,126669600,152071200,162352800,183520800,199245600,215575200,230695200,247024800,262749600,278474400,294199200,309924e3,325648800,341373600,357098400,372823200,388548e3,404877600,419997600,436327200,452052e3,467776800,483501600,499226400,514951200,530676e3,544586400,562125600,576036e3,59418e4,607485600,625629600,638935200,657079200,670989600,688528800,702439200,719978400,733888800,752032800,765338400,783482400,796788e3,814932e3,828842400,846381600,860292e3,877831200,891741600,909280800,923191200,941335200,954640800,972784800,986090400,1004234400,1018144800,1035684e3,1049594400,1067133600,1081044e3,1099188e3,1112493600,1130637600,1143943200,1162087200,1173578400,1194141600,1205028e3,1225591200,1236477600,1257040800,1268532e3,1289095200,1299981600,1320544800,1331431200,1351994400,1362880800,1383444e3,1394330400,1414893600,142578e4,1446343200,1457834400,1478397600,1489284e3,1509847200,1520733600,1541296800,1552183200,1572746400,1583632800,1604196e3,1615687200,1636250400,1647136800,16677e5,1678586400,1699149600,1710036e3,1730599200,1741485600,1762048800,1772935200,1793498400,1804989600,1825552800,1836439200,1857002400,1867888800,1888452e3,1899338400,1919901600,1930788e3],
offset:[-25196,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200]}}},function(e,t,i){"use strict";var o,n,r,s,a,l;Object.defineProperty(t,"__esModule",{value:!0}),o=i(6),n=i(4),r=i(289),s=i(0),a=s.getLogger("ChartSession"),l=function(e){function t(t,i){void 0===i&&(i=!1);var o=e.call(this,t,"cs",!1)||this;return o._sessionDisabled=!1,o._handler=null,o._criticalError=new n,o._disableStatistics=i,o}return o.__extends(t,e),t.prototype.destroy=function(){this._criticalError.destroy(),this._handler=null,e.prototype.destroy.call(this)},t.prototype.serverTimeOffset=function(){return this._getChartApi().serverTimeOffset()},t.prototype.switchTimezone=function(e){return this._getChartApi().switchTimezone(this.sessionId(),e)},t.prototype.resolveSymbol=function(e,t,i){return this._getChartApi().resolveSymbol(this.sessionId(),e,t,i)},t.prototype.requestFirstBarTime=function(e,t,i){return this._getChartApi().requestFirstBarTime(this.sessionId(),e,t,i)},t.prototype.createSeries=function(e,t,i,o,n,r){return this._getChartApi().createSeries(this.sessionId(),e,t,i,o,n,r)},t.prototype.modifySeries=function(e,t,i,o,n){return this._getChartApi().modifySeries(this.sessionId(),e,t,i,o,n)},t.prototype.removeSeries=function(e,t){return!!this.isConnected().value()&&this._getChartApi().removeSeries(this.sessionId(),e,t)},t.prototype.requestMoreData=function(e,t,i){return this._getChartApi().requestMoreData(this.sessionId(),e,t,i)},t.prototype.requestMoreTickmarks=function(e,t,i){return this._getChartApi().requestMoreTickmarks(this.sessionId(),e,t,i)},t.prototype.requestMetadata=function(e,t){var i=this;window.localForageReady.done(function(){i._getChartApi().requestMetadata(i.sessionId(),e,t)}).fail(function(e){a.logError("localForage is not initialized, cannot proceed. "+e)})},t.prototype.isCanCreateStudy=function(e){return this._getChartApi().isCanCreateStudy(e)},t.prototype.createStudy=function(e,t,i,o,n,r,s){return this._getChartApi().createStudy(this.sessionId(),e,t,i,o,n,r,s)},t.prototype.rebindStudy=function(e,t,i,o,n,r,s){return this._getChartApi().rebindStudy(this.sessionId(),e,t,i,o,n,r,s)},
t.prototype.modifyStudy=function(e,t,i,o){return this._getChartApi().modifyStudy(this.sessionId(),e,t,i,o)},t.prototype.removeStudy=function(e,t,i){return this._getChartApi().removeStudy(this.sessionId(),e,t,i)},t.prototype.createPointset=function(e,t,i,o,n,r){return this._getChartApi().createPointset(this.sessionId(),e,t,i,o,n,r)},t.prototype.modifyPointset=function(e,t,i,o){return this._getChartApi().modifyPointset(this.sessionId(),e,t,i,o)},t.prototype.removePointset=function(e){return this._getChartApi().removePointset(this.sessionId(),e)},t.prototype.criticalError=function(){return this._criticalError},t.prototype.connect=function(t){void 0===t&&(t=null),null!==t&&(this._handler=t),e.prototype.connect.call(this)},t.prototype.setHandler=function(e){this._handler=e},t.prototype.connected=function(){return this.isConnected().value()&&!this._sessionDisabled},t.prototype.disable=function(){this._sessionDisabled=!0},t.prototype.chartApi=function(){return this._getChartApi()},t.prototype._sendCreateSession=function(){var e=this;Object.keys(this).forEach(function(t){/^(s|st|symbol_)\d+$/.test(t)&&delete e[t]}),this._getChartApi().chartCreateSession(this.sessionId(),this._disableStatistics)},t.prototype._sendRemoveSession=function(){this._getChartApi().chartDeleteSession(this.sessionId())},t.prototype._onMessage=function(e){this._handler&&this._handler(e)},t.prototype._onCriticalError=function(t,i){this._criticalError.fire(t,i),e.prototype._onCriticalError.call(this,t,i)},t}(r.Session),t.ChartSession=l},function(e,t,i){"use strict";!function(e,t,i){"$:nomunge";function o(o,n){function r(t){e(s).each(function(){var i=e(this);this===t.target||i.has(t.target).length||i.triggerHandler(n,[t.target])})}n=n||o+i;var s=e(),a=o+"."+n+"-special-event";e.event.special[n]={setup:function(){s=s.add(this),delete s.prevObject,1===s.length&&e(t).bind(a,r)},teardown:function(){s=s.not(this),delete s.prevObject,0===s.length&&e(t).unbind(a)},add:function(e){var t=e.handler;e.handler=function(e,i){e.target=i,t.apply(this,arguments)}}}}e.map("click dblclick mousemove mousedown mouseup mouseover mouseout change select submit keydown keypress keyup".split(" "),function(e){o(e)}),o("focusin","focus"+i),o("focusout","blur"+i),Modernizr.touch&&(o("touchstart","mousedown"+i),o("touchmove","mousemove"+i),o("touchend","mouseup"+i)),e.addOutsideEvent=o}(jQuery,document,"outside")},,function(e,t,i){"use strict";(function(e){function o(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!window.is_authenticated)return t={width:510,destroyOnClose:!0,closeOnOutsideClick:!1,closeButton:!1,closeOnEsc:!1,contentWrapTemplate:'\n\t\t\t<div class="tv-dialog__section tv-dialog__section--no-border">\n\t\t\t\t<div class="tv-text"></div>\n\t\t\t</div>\n\t\t',actionsWrapTemplate:'<div class="tv-dialog__section tv-dialog__section--actions-adaptive tv-dialog__section--actions tv-dialog__section--no-border">',content:e.render(a.base,{content:a[i.from]||i.from||""}),actions:[{name:"yes",type:"primary",text:$.t("Continue")}]},
new r.TVModal(n({},t,i)).on("action:yes",function(e){(0,s.showSignModal)({mode:i.mode||"signup",source:"AB Hard Registration Popup From "+i.from+" Message",from:a[i.from]?i.from:"",dontCloseOnEsc:!0,signinSuccess:function(){return e.close()}})}).open()}var n,r,s,a;Object.defineProperty(t,"__esModule",{value:!0}),n=Object.assign||function(e){var t,i,o;for(t=1;t<arguments.length;t++){i=arguments[t];for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},t.createGoRegistrateDialog=o,r=i(38),s=i(63),a={base:'\n\t\t<div>\n\t\t\t<div class="tv-dialog__header tv-dialog__header--adaptive">\n\t\t\t\t<div class="tv-dialog__header-logo">'+i(254)+'</div>\n\t\t\t\t<div class="tv-dialog__header-title"><h2 class="tv-dialog__header-title-text">'+$.t("Please Sign Up To Continue")+'</h2></div>\n\t\t\t</div>\n\t\t\t<div class="tv-dialog__section--content">\n\t\t\t\t{{{content}}}\n\t\t\t</div>\n\t\t</div>\n\t',chart:"\n\t\t<p>"+$.t("To continue working with TradingView charts please create a free account or sign in. It only takes two clicks and its free!")+"</p>\n\t\t<p>"+$.t("Free accounts are packed with features:")+'</p>\n\t\t<ul class="tv-list-plain">\n\t\t\t<li>'+$.t("Best HTML5 charts on the web")+"</li>\n\t\t\t<li>"+$.t("Save your work and get it anywhere")+"</li>\n\t\t\t<li>"+$.t("Enjoy chatting in real-time and publishing ideas")+"</li>\n\t\t</ul>\n\t",ideas:"\n\t\t<p>"+$.t("To continue reading ideas please create a free account or sign in. Only takes two clicks and its free!")+"</p>\n\t\t<p>"+$.t("Free accounts are packed with features:")+'</p>\n\t\t<ul class="tv-list-plain">\n\t\t\t<li>'+$.t("Follow authors and get followed back")+"</li>\n\t\t\t<li>"+$.t("Comment ideas and share them on")+"</li>\n\t\t\t<li>"+$.t("Discuss markets in real-time with other members")+"</li>\n\t\t</ul>\n\t"}}).call(t,i(21))},,function(e,t,i){"use strict";var o=i(54);window.language&&(o.locale(window.language,{months:[$.t("January"),$.t("February"),$.t("March"),$.t("April"),$.t("May"),$.t("June"),$.t("July"),$.t("August"),$.t("September"),$.t("October"),$.t("November"),$.t("December")],monthsShort:[$.t("Jan"),$.t("Feb"),$.t("Mar"),$.t("Apr"),$.t("May"),$.t("Jun"),$.t("Jul"),$.t("Aug"),$.t("Sep"),$.t("Oct"),$.t("Nov"),$.t("Dec")],weekdays:[$.t("Sunday"),$.t("Monday"),$.t("Tuesday"),$.t("Wednesday"),$.t("Thursday"),$.t("Friday"),$.t("Saturday")],weekdaysShort:[$.t("Sun"),$.t("Mon"),$.t("Tue"),$.t("Wed"),$.t("Thu"),$.t("Fri"),$.t("Sat")],weekdaysMin:[$.t("Su",{context:"day_of_week"}),$.t("Mo",{context:"day_of_week"}),$.t("Tu",{context:"day_of_week"}),$.t("We",{context:"day_of_week"}),$.t("Th",{context:"day_of_week"}),$.t("Fr",{context:"day_of_week"}),$.t("Sa",{context:"day_of_week"})],longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MMM D",l:"M/D/YYYY",LL:"MMM D, YYYY",ll:"MMM D LT",LLL:"LT - LL",lll:"MMM D, YYYY LT",LLLL:"ddd D MMMM YYYY LT",llll:"ddd D MMM YYYY LT"},calendar:{sameDay:$.t("__specialSymbolOpen__Today at__specialSymbolClose__ __dayTime__",{specialSymbolOpen:"[",specialSymbolClose:"]",dayTime:"LT"}),
nextDay:$.t("__specialSymbolOpen__Tomorrow at__specialSymbolClose__ __dayTime__",{specialSymbolOpen:"[",specialSymbolClose:"]",dayTime:"LT"}),nextWeek:$.t("__dayName__ __specialSymbolOpen__at__specialSymbolClose__ __dayTime__",{specialSymbolOpen:"[",specialSymbolClose:"]",dayTime:"LT",dayName:"dddd"}),lastDay:$.t("__specialSymbolOpen__Yesterday at__specialSymbolClose__ __dayTime__",{specialSymbolOpen:"[",specialSymbolClose:"]",dayTime:"LT"}),lastWeek:$.t("__specialSymbolOpen__Last__specialSymbolClose__ __dayName__ __specialSymbolOpen__at__specialSymbolClose__ __dayTime__",{specialSymbolOpen:"[",specialSymbolClose:"]",dayTime:"LT",dayName:"dddd"}),sameElse:"L"},relativeTime:{future:function(e){return e===$.t("just now")?e:$.t("in %s",{context:"time_range"}).replace("%s",e)},past:function(e){return e===$.t("just now")?e:$.t("%s ago",{context:"time_range"}).replace("%s",e)},s:$.t("just now"),m:function(e){return $.t("%d minute",{plural:"%d minutes",count:e}).replace("%d",e)},mm:function(e){return $.t("%d minute",{plural:"%d minutes",count:e}).replace("%d",e)},h:$.t("an hour"),hh:function(e){return $.t("%d hour",{plural:"%d hours",count:e}).replace("%d",e)},d:$.t("a day"),dd:function(e){return $.t("%d day",{plural:"%d days",count:e}).replace("%d",e)},M:$.t("a month"),MM:function(e){return $.t("%d month",{plural:"%d months",count:e}).replace("%d",e)},y:$.t("a year"),yy:function(e){return $.t("%d year",{plural:"%d years",count:e}).replace("%d",e)}},week:{dow:1,doy:4}}),o.locale(window.language))},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 508.52 508.52" enable-background="new 0 0 508.52 508.52"><path d="M254.26 0c-140.415 0-254.26 113.845-254.26 254.26s113.845 254.26 254.26 254.26 254.26-113.845 254.26-254.26-113.845-254.26-254.26-254.26zm0 412.664c-17.544 0-31.782-14.239-31.782-31.782 0-17.576 14.239-31.782 31.782-31.782s31.782 14.207 31.782 31.782c0 17.543-14.238 31.782-31.782 31.782zm31.782-126.622c0 17.544-14.239 31.782-31.782 31.782s-31.782-14.239-31.782-31.782v-158.912c0-17.544 14.239-31.782 31.782-31.782s31.782 14.239 31.782 31.782v158.912z"/></svg>'},function(e,t,i){"use strict";var o,n;Object.defineProperty(t,"__esModule",{value:!0}),o=i(16),n=function(){function e(e){this._formatStr=e||"%h:%m:%s"}return e.prototype.format=function(e){return o.customFormatters.timeFormatter?o.customFormatters.timeFormatter.format(e):this._formatStr.replace("%h",o.numberToStringWithLeadingZero(e.getUTCHours(),2)).replace("%m",o.numberToStringWithLeadingZero(e.getUTCMinutes(),2)).replace("%s",o.numberToStringWithLeadingZero(e.getUTCSeconds(),2))},e.prototype.formatLocal=function(e){return o.customFormatters.timeFormatter?o.customFormatters.timeFormatter.formatLocal?o.customFormatters.timeFormatter.formatLocal(e):o.customFormatters.timeFormatter.format(e):this._formatStr.replace("%h",o.numberToStringWithLeadingZero(e.getHours(),2)).replace("%m",o.numberToStringWithLeadingZero(e.getMinutes(),2)).replace("%s",o.numberToStringWithLeadingZero(e.getSeconds(),2))},e}(),t.TimeFormatter=n},function(e,t,i){
"use strict";var o,n;Object.defineProperty(t,"__esModule",{value:!0}),o=i(9),n=function(){function e(e,t){this._major=e,this._minor=t}return e.prototype.major=function(){return this._major},e.prototype.minor=function(){return this._minor},e.prototype.isZero=function(){return 0===this._major&&0===this._minor},e.prototype.toString=function(){return this._major+"."+this._minor},e.prototype.compareTo=function(e){return this._major<e._major?-1:this._major>e._major?1:this._minor<e._minor?-1:this._minor>e._minor?1:0},e.prototype.isLess=function(e){return this.compareTo(e)<0},e.prototype.isLessOrEqual=function(e){return this.compareTo(e)<=0},e.prototype.isEqual=function(e){return 0===this.compareTo(e)},e.prototype.isGreater=function(e){return this.compareTo(e)>0},e.prototype.isGreaterOrEqual=function(e){return this.compareTo(e)>=0},e.parse=function(t){var i,n,r;if(t instanceof e)return new e(t.major(),t.minor());if("number"==typeof t)return o.assert(Math.floor(t)===t,"Version should not be a float number"),new e(t,0);if("string"==typeof t){if(i=t.split("."),1===i.length)return n=parseInt(i[0],10),o.assert(!isNaN(n),"Bad version string: "+t),new e(n,0);if(2===i.length)return n=parseInt(i[0],10),o.assert(!isNaN(n),"Bad version string: "+t),r=parseInt(i[1],10),o.assert(!isNaN(r),"Bad version string: "+t),new e(n,r);throw Error("Bad version string (one dot expected): "+t)}throw Error("Bad version: "+t)},e.ZERO=new e(0,0),e}(),t.Version=n},function(e,t,i){"use strict";(function(t){function o(e,i,o){r.call(this,e),this._origState=i,this._title=o;var a={visible:!0};this._properties=new t(a),this._statusView=new n(this,e.properties()),this._status=$.t("compiling..."),this._statusView.setText(this._title+" "+this._status),this._formatter=new s(Math.pow(10,2)),this._failed=!1}var n=i(158),r=i(52).PriceDataSource,s=i(16).PriceFormatter;inherit(o,r),o.prototype.properties=function(){return this._properties},o.prototype.statusView=function(){return this._statusView},o.prototype.state=function(e){return this._origState},o.prototype.setStatus=function(e){this._status=e,this._statusView.setText(this._title+" "+this._status)},o.prototype.formatter=function(){return this._formatter},o.prototype.title=function(){return this._title},o.prototype.setFailed=function(e){this._failed=e},o.prototype.start=function(e){},o.prototype.firstValue=function(e){return null},e.exports=o}).call(t,i(37))},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg"><line x2="100%" y2="100%"/><line x2="100%" y1="100%"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22" width="22px" height="22px"><g fill-rule="evenodd"><path d="M12 16h-2v-6h2v6zm0-8h-2V6h2v2z"/><path d="M11.016.25C5.09.25.282 5.06.282 10.984c0 5.925 4.81 10.734 10.734 10.734 5.925 0 10.734-4.81 10.734-10.734S16.94.25 11.016.25zm0 1.5c5.096 0 9.234 4.138 9.234 9.234s-4.138 9.234-9.234 9.234-9.234-4.138-9.234-9.234S5.92 1.75 11.016 1.75z"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 973.125"><path d="M960 832L710.875 582.875C746.438 524.812 768 457.155 768 384 768 171.97 596 0 384 0 171.97 0 0 171.97 0 384c0 212 171.97 384 384 384 73.156 0 140.812-21.562 198.875-57L832 960c17.5 17.5 46.5 17.375 64 0l64-64c17.5-17.5 17.5-46.5 0-64zM384 640c-141.375 0-256-114.625-256-256s114.625-256 256-256 256 114.625 256 256-114.625 256-256 256z"/></svg>'},,function(e,t,i){"use strict";function o(e,t){var i=_.colorsPalette[e];if(!i)throw Error("No such color "+e);return i}function n(e){return!e.isPrivate}function r(){return t.themes[t.watchedTheme.value()]||t.themes[t.DEFAULT_THEME]}function s(e){return r().getThemedColor(e)}function a(e){(window.TradingView.onChartPage||d.enabled("widget"))&&t.watchedTheme.setValue(e)}function l(){a(u.getValue(m)||t.DEFAULT_THEME)}function c(){u.setValue(m,r().name,{forceFlush:!0})}var h,u,d,p,f,_,m;Object.defineProperty(t,"__esModule",{value:!0}),i(180),i(5),h=i(22),u=i(48),d=i(3),p=i(1441),f=i(1442),_=i(1443),t.themes={light:{name:"light",label:window.t("Light",{context:"colorThemeName"}),className:"theme-light",order:2,getThemedColor:function(e){return o(e)}},dark:{name:"dark",label:window.t("Dark",{context:"colorThemeName"}),className:"theme-dark",order:1,getThemedColor:function(e){return o(p[e])}},sa:{isPrivate:!0,noChartTheme:!0,name:"sa",className:"theme-sa",getThemedColor:function(e){return o(f[e])}}},t.DEFAULT_THEME="light",t.watchedTheme=new h,t.watchedTheme.subscribe(function(e){var i=document.getElementsByTagName("html")[0];Object.keys(t.themes).forEach(function(e){i.classList.remove(t.themes[e].className)}),i.classList.add(t.themes[e].className)}),t.isPublicTheme=n,t.getCurrentTheme=r,t.setThemedColor=s,t.setTheme=a,m="current_theme.name",t.restoreTheme=l,t.syncTheme=c},function(e,t,i){"use strict";var o,n,r,s,a,l,c,h,u,d,p;Object.defineProperty(t,"__esModule",{value:!0}),i(453),o=i(443),i(109),n=i(14),r=i(75),s=i(4),a=i(238),l=i(257),c=i(48),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right"}(h||(h={})),u={saveTab:"",noSlider:!1,onTabClick:!1,loadedClass:"i-loaded",tabsContainerClass:"tv-tabs",tabClass:"tv-tabs__tab",tabDisabledClass:"disabled",activeTabClass:"i-active",activePageClass:"active",sliderClass:"tv-tabs__slider",scrollBoxClass:"tv-tabs__scroll-box",scrollWrapClass:"tv-tabs__scroll-wrap",lArrowClass:"tv-tabs__left-arrow",rArrowClass:"tv-tabs__right-arrow"},d={leftArrow:a,rightArrow:l},p=function(){function e(e,t,i){void 0===i&&(i={}),this._animating=!1,this._prevWidth=-1,this._bindings=[],this._options=r.deepExtend({},u,i),this.tabChanged=new s,this._elTabs=e,this._elPages=t,this._elScrollWrap=this._findOrCreateElement(this._options.scrollWrapClass||"",this._elTabs,"wrapInner"),this._elScrollBox=this._findOrCreateElement(this._options.scrollBoxClass||"",this._elScrollWrap,"wrapInner"),this._elArrowLeft=this._findOrCreateElement(this._options.lArrowClass||"",this._elTabs,"append",'<div class="'+(this._options.lArrowClass||"")+' i-slided">'+d.leftArrow+"</div>"),
this._elArrowRight=this._findOrCreateElement(this._options.rArrowClass||"",this._elTabs,"append",'<div class="'+(this._options.rArrowClass||"")+' i-slided">'+d.rightArrow+"</div>"),this._options.noSlider||(this._elSlider=this._findOrCreateElement(this._options.sliderClass||"",this._elScrollBox,"append")),this._addClass(this._elArrowLeft,this._options.addLeftArrowsClass),this._addClass(this._elArrowRight,this._options.addRightArrowsClass),this._addClass(this._elScrollBox,this._options.addScrollBoxClass),this._addClass(this._elTabs,this._options.tabsContainerClass),this._addClass(this.getTabsArray(),this._options.tabClass),this._addClass(this._elTabs,this._options.loadedClass),"string"==typeof this._options.sliderMod&&this._addClass(this._elSlider,this._options.sliderClass+"--"+this._options.sliderMod),this.checkScrollArrows(!0),this._initActivePage(),this._bindEvents()}return e.prototype.getTabsArray=function(){var e,t,i,o=this._elScrollBox.children;if(!this._options.sliderClass)return Array.prototype.slice.call(o);for(e=[],t=0;t<o.length;t++)i=o[t],i.classList.contains(this._options.sliderClass)||e.push(i);return e},e.prototype.getPagesArray=function(){return this._elPages?Array.prototype.slice.call(this._elPages.children):[]},e.prototype.getElTabs=function(){return this._elTabs},e.prototype.getElPages=function(){return this._elPages},e.prototype.checkScrollArrows=function(e){function t(e){e.classList.remove("i-slided"),$.Velocity&&$.Velocity.animate(e,{translateX:"0%"},{duration:n.dur/2,easing:"easeOutCubic",queue:!1})}function i(t,i){if(e)return t.classList.add("i-slided"),void t.setAttribute("style","");var r=i===h.Left?"-100%":"100%";o.lazyVelocity().then(function(){$.Velocity.animate(t,{translateX:r},{complete:function(){return t.classList.add("i-slided")},duration:n.dur/2,easing:"easeOutCubic",queue:!1})})}var r,s,a,l;void 0===e&&(e=!1),r=Math.ceil(this._elScrollWrap.scrollLeft),s=this._getElWidth(this._elScrollWrap),a=10,l=this._elScrollWrap.scrollWidth-s,r>=a?t(this._elArrowLeft):(r<=a||this._elScrollWrap.scrollWidth<=s)&&i(this._elArrowLeft,h.Left),l-r>1?t(this._elArrowRight):(r>=l||this._elScrollWrap.scrollWidth<=s)&&i(this._elArrowRight,h.Right)},e.prototype.index=function(){var e=this.getElActiveTab();return e?this.getTabsArray().indexOf(e):-1},e.prototype.getElActiveTab=function(){return this._getActiveElement(this.getTabsArray(),this._options.activeTabClass||"",this._options.inactiveTabClass)},e.prototype.getElActivePage=function(){return this._getActiveElement(this.getPagesArray(),this._options.activePageClass||"",this._options.inactivePageClass)},e.prototype.setActivePage=function(e,t,i){function o(t,i,o){t.forEach(function(t,n){var r=e===n,s=t.classList;i&&s.toggle(i,r),o&&s.toggle(o,!r)})}if(-1!==e&&(e!==this.index()||i)){var n=this.index();o(this.getTabsArray(),this._options.activeTabClass,this._options.inactiveTabClass),o(this.getPagesArray(),this._options.activePageClass,this._options.inactivePageClass),this._options.noSlider||this.updateSlider(n,e,t),
this._options.saveTab&&c.setValue(this._options.saveTab,e),this.tabChanged.fire(e)}},e.prototype.updateSlider=function(e,t,i){var r,s,a,l,c,h,u=this;this._options.noSlider||(r=this.getTabsArray()[t],0===r.clientWidth||0===r.clientHeight||"none"===window.getComputedStyle(r).getPropertyValue("display")||(s=window.getComputedStyle(r),a=r.offsetLeft+parseInt(s.getPropertyValue("padding-left")),l=this._getElWidth(r),c=r.querySelector(".js-tabs__slider-pos"),c&&(h=window.getComputedStyle(c),a+=parseInt(h.getPropertyValue("padding-left"))+c.offsetLeft,l-=l-this._getElWidth(c)),i=i||-1===e||document.all&&!window.atob,i?(this._elSlider.style.left=a+"px",this._elSlider.style.width=l+"px"):(this._animating=!0,o.lazyVelocity().then(function(){$.Velocity.animate(u._elSlider,{left:a},{duration:n.dur,easing:"easeOutCubic",queue:!1}),$.Velocity.animate(u._elSlider,{width:l},{complete:function(){u._animating=!1},duration:n.dur,easing:"easeOutCubic",queue:!1})}))))},e.prototype.onTabClick=function(e){var t=e.currentTarget||e.target,i=this.getTabsArray().indexOf(t);-1===i||this._isTabDisabled(t)||this.setActivePage(i),document.activeElement.blur(),e.preventDefault()},e.prototype.resizeSlider=function(){var e,t;this._options.noSlider||(e=this._elTabs.offsetWidth)!==this._prevWidth&&(this._prevWidth=e,t=this.index(),this.updateSlider(t,t,!0))},e.prototype.count=function(){return this.getTabsArray().length},e.prototype.add=function(e,t){this._elScrollBox.appendChild(e),this._elPages&&t&&this._elPages.appendChild(t),this._bindTabEvents(e),this.checkScrollArrows(!0)},e.prototype.remove=function(e){function t(e){e.parentElement&&e.parentElement.removeChild(e)}var i,o,n=this.tabAt(e);n&&(this._unbindTabEvents(n),t(n)),i=this.pageAt(e),i&&t(i),o=e-1>=0?e-1:0,this.setActivePage(o),this.checkScrollArrows(!0)},e.prototype.indexOfTab=function(e){return this.getTabsArray().indexOf(e)},e.prototype.indexOfPage=function(e){return this.getPagesArray().indexOf(e)},e.prototype.pageAt=function(e){return this.getPagesArray()[e]||null},e.prototype.tabAt=function(e){return this.getTabsArray()[e]||null},e.prototype.deselect=function(e){var t,i=this.getElActiveTab();return this._options.activeTabClass&&i&&i.classList.remove(this._options.activeTabClass),t=this.getElActivePage(),this._options.activePageClass&&t&&t.classList.remove(this._options.activePageClass),this._elSlider&&(this._elSlider.style.left="",this._elSlider.style.width=""),this},e.prototype.stop=function(){this._unbindEvents({})},e.prototype._getElWidth=function(e){if(0===e.offsetWidth)return 0;var t=window.getComputedStyle(e);return e.offsetWidth-parseFloat(t.getPropertyValue("padding-left"))-parseFloat(t.getPropertyValue("padding-right"))-parseFloat(t.getPropertyValue("border-left-width"))-parseFloat(t.getPropertyValue("border-right-width"))},e.prototype._findOrCreateElement=function(e,t,i,o){var n,r,s,a=t.querySelector("."+e);if(!a)if(n=document.createElement("div"),n.innerHTML=o||'<div class="'+e+'"></div>',a=n.firstElementChild,"append"===i)t.appendChild(a);else{
if("wrapInner"!==i)throw Error("Unknown insertMethod");for(r=Array.prototype.slice.call(t.childNodes),s=0;s<r.length;s++)a.appendChild(r[s]);t.appendChild(a)}return a},e.prototype._addClass=function(e,t){if("string"==typeof t){Array.isArray(e)||(e=[e]);var i=t.split(/\s+/);e.forEach(function(e){i.forEach(function(t){e.classList.add(t)})})}},e.prototype._initActivePage=function(){var e,t=0;this._options.saveTab&&(t=c.getInt(this._options.saveTab,0)),e=this.index(),-1!==e&&(t=e),void 0!==this._options.activeTab&&(t=this._options.activeTab),this.setActivePage(t,!0,!0)},e.prototype._bindEvents=function(){var e,t=this;this.getTabsArray().forEach(this._bindTabEvents.bind(this)),this._bindOneEvent({eventName:"scroll",listener:this.checkScrollArrows.bind(this,!1),target:this._elScrollWrap}),this._bindOneEvent({eventName:"touchstart",listener:function(e){var i=t._elScrollWrap.scrollLeft,o=e.touches[0].clientX,n=function(e){var n=o-e.touches[0].clientX;t._elScrollWrap.scrollLeft=i+n},r=function(e){t._elScrollWrap.removeEventListener("touchmove",n),t._elScrollWrap.removeEventListener("touchend",r)};t._elScrollWrap.addEventListener("touchmove",n),t._elScrollWrap.addEventListener("touchend",r)},target:this._elScrollWrap}),this._bindOneEvent({eventName:"click",listener:function(e){var i=t.getTabsArray(),r=0,s=!1,a=t._elScrollWrap.scrollLeft;i.forEach(function(e){if(!s){var t=e.offsetLeft+e.offsetWidth;t>a?s=!0:r=t}}),o.lazyVelocity().then(function(){$.Velocity.animate(t._elScrollWrap,"scroll",{axis:"x",container:$(t._elScrollWrap),duration:n.dur/2,easing:"easeInOutCubic",offset:Math.floor(r-a-t._getElWidth(t._elArrowLeft)),queue:!1})})},target:this._elArrowLeft}),this._bindOneEvent({eventName:"click",listener:function(e){var i=t.getTabsArray(),r=0,s=t._elScrollWrap.scrollLeft+t._getElWidth(t._elScrollWrap);i.forEach(function(e){if(0===r){var t=e.offsetLeft+e.offsetWidth;t>s&&(r=t)}}),o.lazyVelocity().then(function(){$.Velocity.animate(t._elScrollWrap,"scroll",{axis:"x",container:$(t._elScrollWrap),duration:n.dur/2,easing:"easeInOutCubic",offset:Math.ceil(r-s+t._getElWidth(t._elArrowRight)),queue:!1})})},target:this._elArrowRight}),e=Array.prototype.slice.call(this._elTabs.querySelectorAll(".js-tabs__slider-hover")||[]),e.length&&e.forEach(function(e){return t._bindOneEvent({eventName:"mouseenter",listener:function(e){if(!t._animating){var i=e.currentTarget;i&&t._options.activeTabClass&&i.classList&&i.classList.contains(t._options.activeTabClass)&&t._hoverSlider(i)}},target:e})}),this._bindOneEvent({eventName:"resize",listener:function(){t.checkScrollArrows(!0),t._options.noSlider||t.resizeSlider()},target:window})},e.prototype._bindTabEvents=function(e){var t=this;this._bindOneEvent({eventName:Modernizr.touch?"touchend":"click",listener:function(e){"function"==typeof t._options.onTabClick?t._options.onTabClick(e):t.onTabClick(e)},target:e})},e.prototype._unbindTabEvents=function(e){this._unbindEvents({target:e})},e.prototype._bindOneEvent=function(e){e.target.addEventListener(e.eventName,e.listener),this._bindings.push(e)},
e.prototype._unbindEvents=function(e){var t=function(t){return!(void 0!==t.eventName&&t.eventName!==e.eventName||void 0!==t.target&&t.target!==e.target||void 0!==t.listener&&t.listener!==e.listener)};this._bindings.filter(t).forEach(function(e){return e.target.removeEventListener(e.eventName,e.listener)}),this._bindings=this._bindings.filter(function(e){return!t(e)})},e.prototype._getActiveElement=function(e,t,i){var o=function(e,o,n){return t?e.classList.contains(t):!!i&&!e.classList.contains(i)};return e.filter(o)[0]||null},e.prototype._isTabDisabled=function(e){return e.classList.contains("i-disabled")||this._options.tabDisabledClass&&e.classList.contains(this._options.tabDisabledClass)||e.hasAttribute("disabled")},e.prototype._hoverSlider=function(e){var t,i=this,r=this._getElWidth(e),s=window.getComputedStyle(e),a=e.offsetLeft+parseInt(s.getPropertyValue("padding-left"))+parseInt(s.getPropertyValue("margin-left")),l={duration:n.dur/4,easing:"easeOutCubic",queue:!1};o.lazyVelocity().then(function(){$.Velocity.animate(i._elSlider,{left:a},l),$.Velocity.animate(i._elSlider,{width:r},l)}),t=function(){i.getElActiveTab()===e&&i._unhoverSlider(e),e.removeEventListener("mousleave",t)},e.addEventListener("mouseleave",t)},e.prototype._unhoverSlider=function(e){var t=this,i=window.getComputedStyle(e),r=e.querySelector(".js-tabs__slider-pos"),s=window.getComputedStyle(r),a=e.offsetLeft+parseInt(i.getPropertyValue("padding-left"))+parseInt(i.getPropertyValue("margin-left"))+parseInt(s.getPropertyValue("padding-left"))+r.offsetLeft,l=this._getElWidth(e),c=l-(l-this._getElWidth(r)),h={duration:n.dur/2,easing:"easeInSine",queue:!1};o.lazyVelocity().then(function(){$.Velocity.animate(t._elSlider,{left:a},h),$.Velocity.animate(t._elSlider,{width:c},h)})},e}(),t.Tabs=p},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="-80 -25 140 140" width="16" height="16"><path d="M10 12L-.7.7-41 43.2l.1.1-.1.1L-.7 85.9l10-10.6-29.7-31.2z"/></svg>'},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.Closed=0]="Closed",e[e.Connecting=1]="Connecting",e[e.Open=2]="Open"}(t.ConnectionStatus||(t.ConnectionStatus={}))},function(e,t){},function(e,t,i){"use strict";function o(){return r||(this instanceof o?(r=this,this._ready=$.Deferred(),void n(function(e){e&&(h=e),this._ready.resolve()}.bind(this))):new o)}function n(e){var t,i,o,n;return Modernizr.websockets?(t=window.WebSocket||window.MozWebSocket)?(i=Date.now().toString(36),o=new t(u),o.onopen=function(t){o.send(i),n=setTimeout(function(){e("Error. Websocket response timeout")},d)},o.onerror=function(t){clearTimeout(n),e("Error. "+t.data)},void(o.onmessage=function(t){clearTimeout(n),e(t.data===i?"Success":"Error. Incorrect response"),o.close()})):void e("Error. Websocket constructor is undefined"):void e("Error. Not Supported")}var r,s,a,l=i(262),c=!1,h="Pending",u="wss://echo.websocket.org/",d=3e4;o.prototype.browser=function(){return s||(s=l.name+" "+l.version),s},o.prototype.setBrowser=function(e){"string"==typeof e&&e&&(s=e)
},o.prototype.os=function(){var e,t;return a||(e=["mac","windows","windowsphone","linux","chromeos","android","ios","blackberry","firefoxos","webos","bada","tizen","sailfish"],t=Object.keys(l),a=e.filter(function(e){return t.includes(e)})[0]),a},o.prototype.setOS=function(e){"string"==typeof e&&e&&(a=e)},o.prototype.cookieEnabled=function(){return navigator.cookieEnabled},o.prototype.viewportSize=function(){return $(window).width()+" x "+$(window).height()},o.prototype.screenSize=function(){return window.screen&&(screen.width||screen.availWidth)+" x "+(screen.height||screen.availHeight)||"unknown"},o.prototype.colorDepth=function(){return window.screen&&screen.colorDepth||"unknown"},o.prototype.pixelRatio=function(){return window.hidpiCanvasRatio||window.devicePixelRatio||0},o.prototype.wsTestResult=function(){return h},o.prototype.confirmBrowser=function(){c=!0},o.prototype.browserConfirmed=function(){return c},o.prototype.ready=function(){return this._ready.promise()},o.prototype.state=function(){return{os:this.os(),browser:this.browser(),browserConfirmed:c,cookieEnabled:this.cookieEnabled(),websocketTest:this.wsTestResult(),viewportSize:this.viewportSize(),screenSize:this.screenSize(),colorDepth:this.colorDepth(),pixelRatio:this.pixelRatio()}},e.exports=o},function(e,t){},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28"><path fill="#ffffff" d="M18 10V0h-8v10H0v8h10v10h8V18h10v-8"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 14" width="25" height="14" style="position:relative;top:3px"><path d="M10.43 8.683L9.345 8.68c-.943-.005-1.712-.774-1.716-1.717-.003-.452.172-.877.49-1.195.32-.32.744-.493 1.196-.492l4.002.016c.83.004 2.22.18 2.225 1.316.002.522.427.943.95.942.52-.002.942-.427.94-.95-.007-1.932-1.62-3.188-4.107-3.198l-4.003-.016c-.96-.003-1.862.368-2.54 1.045-.677.68-1.048 1.58-1.044 2.54.003.99.41 1.887 1.06 2.54.652.65 1.55 1.056 2.54 1.06l1.086.004c.522.002.947-.42.948-.942.002-.52-.42-.946-.942-.947zm13.832-1.655c-.008-2.076-1.41-3.59-3.33-3.597l-1.357-.003c-.522-.002-.947.42-.948.942-.002.52.42.946.94.947l1.356.006c.996.003 1.445.863 1.448 1.714.004.453-.17.878-.49 1.196-.317.32-.742.493-1.195.492l-4.27-.017c-1.952-.008-1.955-.924-1.957-1.315-.002-.522-.426-.943-.948-.942-.523.003-.945.428-.943.95.004.896.296 1.63.834 2.17.66.66 1.69 1.023 3.01 1.028l4.27.017c.96.003 1.86-.368 2.54-1.046.675-.678 1.046-1.58 1.043-2.54z"/></svg>'},function(e,t){},,,function(e,t,i){(function(e){TradingView.cleanButAmpersand=function(e,t){var i=t?["&amp;"]:["&"];return TradingView.clean(e,t,i)},TradingView.strip_tags=function(e){return e&&e.replace?e.replace(/(<([^>]+)>)/gi,""):e},TradingView.encodeSpread=function(e){return encodeURIComponent(e)},TradingView.clean=function(e,t,i){var o,n,r,s=[["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#039;"],["'","&#39;"]],a=e;if(!e||!e.replace)return a;for(o=0;o<s.length;o++)n=s[o][0],r=s[o][1],i&&i.indexOf&&-1!==i.indexOf(t?r:n)||(a=t?a.replace(RegExp(r,"g"),n):a.replace(RegExp(n,"g"),r))
;return a},void 0!==e&&e&&e.exports&&(e.exports={clean:TradingView.clean,cleanButAmpersand:TradingView.cleanButAmpersand,stripTags:TradingView.strip_tags})}).call(t,i(15)(e))},function(e,t,i){"use strict";!function(e){e.fn.contextMenu=function(t){e(this).bind("contextmenu",function(e){return t(e),!1})}}(jQuery)},function(module,exports,__webpack_require__){"use strict";(function(Delegate,_,Featuresets){function reloadPageOnSingOut(){var e=[/^\/chart\//],t=!0;e.forEach(function(e){e.test(window.location.pathname)&&(t=!1)}),t&&window.location.reload(!0)}function loginUser(e,t){window.TVDialogs&&window.TVDialogs.signModal&&window.TVDialogs.signModal.close(),user=$.extend(!0,{},e),TradingView.changeLoginState(!0),"function"==typeof t&&window.TVDialogs&&window.TVDialogs.signModal?window.TVDialogs.signModal.on("signinSuccess",function(){t()}):"function"==typeof t&&t()}function onLoginStateChange(is_initial){window.iframeAuthWidget&&user.is_first_login&&(window.iframeAuthWidget.preventClose=!0);var available_offers=user.available_offers;$("html").toggleClass("is-authenticated",is_authenticated).toggleClass("is-not-authenticated",!is_authenticated).toggleClass("is-pro",is_authenticated&&user&&!!user.is_pro).toggleClass("is-not-pro",!(is_authenticated&&user&&user.is_pro)).toggleClass("is-trial",is_authenticated&&user&&!!user.is_trial).toggleClass("is-not-trial",!(is_authenticated&&user&&user.is_trial)).toggleClass("is-not-trial-available",void 0===available_offers[OFFERS.trial]).toggleClass("is-trial-available",void 0!==available_offers[OFFERS.trial]).toggleClass("is-upsale-available",is_authenticated&&void 0!==available_offers[OFFERS.upsale]),window.TVSettings&&window.TVSettings.sync(user.settings),$(".js-header__gopro-button").attr("href",is_authenticated?"/gopro/":""),is_authenticated?(is_initial||__webpack_require__.e(9).then(function(e){var t=__webpack_require__(270).userBadge;$(".header-item-profile strong.user-badge").remove(),$(".header-item-profile > a").append(t(user,!0,"strong")),$('input[name="csrfmiddlewaretoken"]').val($.cookie("csrftoken")||"")}.bind(null,__webpack_require__)).catch(__webpack_require__.oe),$(".saved_charts_count").html(user.saved_charts),$(".treated_charts_count").html(user.treated_charts_count),$(".js-trial-days-left").html(user.trial_days_left_text||""),$(".js-header-gopro-button").attr("href","/gopro/"),user.fastpass_script&&eval(user.fastpass_script),user.is_first_login&&($(function(){__webpack_require__(63).showSignModal({mode:"step-two",noCloseButton:!!user.social_registration,dontCloseOnEsc:!!user.social_registration,nameFields:!user.social_registration,noUsernameField:!user.social_registration,newUserHandler:user.social_registration}).then(function(e){window.iframeAuthWidget&&(window.iframeAuthWidget.preventClose=!1,e.on("destroy",function(){window.iframeAuthWidget.postClose()}))}),user.social_registration?(__webpack_require__.e(7).then(function(e){__webpack_require__(538)("Social")}.bind(null,__webpack_require__)).catch(__webpack_require__.oe),
delete user.social_registration):TVXWindowEvents.emit("loginStateChange",JSON.stringify({is_authenticated:is_authenticated,user:user}))}),trackEvent("Conversion","First login"),user.prort_trial_started&&(__webpack_require__.e(10).then(function(e){(0,__webpack_require__(288).trialMessageSuccessDialog)()}.bind(null,__webpack_require__)).catch(__webpack_require__.oe),delete user.prort_trial_started),delete user.is_first_login),TradingView.setTrialAvailiable(void 0!==user.available_offers[OFFERS.trial])):(Object.keys(available_offers).forEach(function(e){available_offers[e].available_for_anons||delete available_offers[e]}),user={username:"Guest",following:"0",followers:"0",ignore_list:{},available_offers:available_offers},$(".user-info-username").html(user.username),TVLocalStorage.removeItem("trial_availiable"))}var checkEvercookie,goProDialog,loginStateChange,djangoLogoutFinished,TVXWindowEvents=__webpack_require__(53).TVXWindowEvents,trackEvent=__webpack_require__(20).trackEvent,OFFERS={};OFFERS=__webpack_require__(167).OFFERS,checkEvercookie=__webpack_require__(251).checkEvercookie,__webpack_require__(252),goProDialog=__webpack_require__(43),__webpack_require__(212),$(document).ajaxSend(function(e,t,i){"POST"!==i.type||i.crossDomain||t.setRequestHeader("X-CSRFToken",$.cookie("csrftoken")),i.crossDomain&&!i.forceLanguageHeader||(window.locale?t.setRequestHeader("X-Language",window.locale):console.warn("window.locale is not defined"))}),loginStateChange=window.loginStateChange?window.loginStateChange:window.loginStateChange=new Delegate,djangoLogoutFinished=window.djangoLogoutFinished?window.djangoLogoutFinished:window.djangoLogoutFinished=new Delegate,loginStateChange.subscribe(null,onLoginStateChange),TVXWindowEvents.on("loginStateChange",function(){var e=JSON.parse(this);window.user=e.user,window.is_authenticated=!!e.is_authenticated,loginStateChange.fire()}),TVXWindowEvents.on("signOut",function(){reloadPageOnSingOut()}),function(){var e="user-obj-changed",t={};window.crossTabSyncUserAttr=function(t){var i={};t instanceof Array?t.forEach(function(e){i[e]=window.user[e]}):i[t]=window.user[t],TVXWindowEvents.emit(e,JSON.stringify(i))},window.onChangeUserAttrInAnotherTab=function(e){var i=new Delegate;return t[e]||(t[e]=[]),t[e].push(i),i},TVXWindowEvents.on(e,function(e){var i,o;e=JSON.parse(e);for(i in e)if(window.user[i]=e[i],t[i])for(o=0;o<t[i].length;o++)t[i][o].fire(e[i])})}(),TradingView.changeLoginState=function(e){window.is_authenticated=!!e,TVXWindowEvents.emit("loginStateChange",JSON.stringify({is_authenticated:is_authenticated,user:user})),loginStateChange.fire()},window.loginUser=loginUser,TradingView.signOut=function(){var e=_.clone(window.user);TradingView.changeLoginState(!1),$.ajax({type:"POST",url:"/accounts/logout/",dataType:"html"}).done(function(){TVXWindowEvents.emit("djangoLogoutFinished"),djangoLogoutFinished.fire(),TVXWindowEvents.emit("signOut"),reloadPageOnSingOut()}).fail(function(){window.user=e,TradingView.changeLoginState(!0)})},checkEvercookie(loginStateChange),
window.loginRequiredDelegate=new Delegate,window.runOrSignIn=function(e,t){var i,o;t||(t={}),!0===t.verifiedPhoneRequired&&(i=__webpack_require__(194).whenVerified,o=e,e=function(){i({showDialog:!0,source:t.source,doNotCheckSuspicious:t.doNotCheckSuspicious}).done(o)}),is_authenticated||Featuresets.enabled("charting_library_base")?e():__webpack_require__(63).showSignModal({source:t.source,sourceMeta:t.sourceMeta,feature:t.feature,signinSuccess:e})},TradingView.runOrGoPro=function(e,t,i){Featuresets.enabled(t)?e():goProDialog.createGoProDialog(i).then(function(e){e.open()})},window.onLoginStateChange=onLoginStateChange,TradingView.isPro=function(){return is_authenticated&&user.is_pro},TradingView.setTrialAvailiable=function(e){TVLocalStorage.setItem("trial_availiable",e?1:0)},$.fn.reverse=[].reverse,$(window).load(function(){window.loaded=!0}),TradingView.notificationsChanged=new Delegate}).call(exports,__webpack_require__(4),__webpack_require__(29),__webpack_require__(3))},function(e,t,i){"use strict";function o(e){function t(){return f||(f=new window.evercookie({domain:"battle"===d||"staging"===d?".tradingview.com":location.hostname,lso:!1})),f}function i(){return new Promise(function(e,t){var i;o().then(function(e){return i=e,c(e)}).then(function(t){if(void 0===t)throw Error("getRemoteEcUids() returned no response. User: "+window.user.username+" ("+window.user.id+")");e({isLocalEcUidOld:t.is_local_ecuid_old,localEcUid:i,oldRemoteEcUid:t.ecuid_old,remoteEcUids:t.ecuids})}).catch(function(e){t(e)})})}function o(){return new Promise(function(e){t().get(p,function(t){e(t)})})}function c(e){return new Promise(function(t,i){var o=new FormData;e&&o.append("local_ecuid",e),l.fetch("/accounts/get-ecuid/",{body:o,credentials:"include",method:"POST"}).then(function(e){if(e.ok)return e.json().catch(function(e){h.logWarn("Error in reponse.json() of /accounts/get-ecuid/. User: "+window.user.username+" ("+window.user.id+")\nActual error: "+e)});throw Error("Unable to get remote ecuids. Response was not OK")}).then(function(e){t(e)}).catch(function(e){i(e)})})}var d,p,f;TradingView.onWidget&&TradingView.onWidget()||!window.user||(d=s.environment(),p="tv_ecuid","battle"!==d&&(p+="_"+d),e.subscribe(null,function(){if(n.isFeatureEnabled("detect-squatters")&&window.is_authenticated&&!window.user.is_staff&&!window.user.is_superuser&&a.TVLocalStorage.getItem("_tv_ec_ignore_username")!==window.user.username){var e=window.user.id;i().catch(function(e){h.logWarn("Error thrown inside getEcUids(). Leave evercookie data untouched. User: "+window.user.username+" ("+window.user.id+")\nActual error: "+e)}).then(function(i){var o,n,s,a,c;if(void 0===i)return void h.logWarn("getEcUids() returned no data. Leave evercookie data untouched. User: "+window.user.username+" ("+window.user.id+")");o=i.localEcUid,n=i.oldRemoteEcUid,s=i.remoteEcUids,a=i.isLocalEcUidOld,o&&n!==o&&!a&&u.test(o)||(o=r.guid(),t().set(p,o)),s&&0!==s.length||e!==window.user.id?-1===s.indexOf(o)&&e===window.user.id&&(c=new FormData,c.append("new_ecuid",o),
l.fetch("/accounts/ch-ecuid/",{body:c,credentials:"include",method:"POST"}).then(function(e){if(!e.ok)throw Error("Unable to change remote ecuids. Response was not OK")})):(c=new FormData,c.append("first_ecuid",o),l.fetch("/accounts/set-ecuid/",{body:c,credentials:"include",method:"POST"}).then(function(e){if(e.ok)return e.json().catch(function(e){h.logWarn("Error in reponse.json() of /accounts/set-ecuid/. User: "+window.user.username+" ("+window.user.id+")\nActual error: "+e)});throw Error("Unable to set remote ecuids. Response was not OK")}).then(function(t){e===window.user.id&&t&&t.is_suspicious&&(window.user.is_suspicious=!0)}))}).catch(function(e){h.logError(e.message+" User: "+window.user.username+" ("+window.user.id+")")})}}))}var n,r,s,a,l,c,h,u;Object.defineProperty(t,"__esModule",{value:!0}),i(180),i(517),n=i(25),r=i(17),s=i(50),a=i(26),l=i(64),c=i(0),h=c.getLogger("Common.Evercookie"),u=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i,t.checkEvercookie=o},function(e,t,i){"use strict";function o(e){runOrSignIn(function(){var t,o=$(e.currentTarget),s=o.data("id");o.is(".self")||(t=o.is(".js-follow-user--followed")?0:1,$.ajax({data:{follow:t,targetId:s},type:"POST",url:"/social/follow-the-user/"}).done(function(e){var t,o;return"max_followings"===e.error?(t={closeOnEsc:!1,closeOnOutsideClick:!1,closeButton:!1,width:546,contentWrapTemplate:'\n\t\t\t\t\t\t\t\t<div class="tv-dialog__section tv-dialog__section--no-border">\n\t\t\t\t\t\t\t\t\t<div class="tv-text"></div>\n\t\t\t\t\t\t\t\t</div>',content:'\n\t\t\t\t\t\t\t\t<div class="tv-dialog__header">\n\t\t\t\t\t\t\t\t\t<div class="tv-dialog__header-logo">'+r+'</div>\n\t\t\t\t\t\t\t\t\t<h2 class="tv-dialog__header-title">'+$.t("Unfollow some authors")+'</h2>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<p class="tv-text__font tv-text__font--size_semilarge">\n\t\t\t\t\t\t\t\t\t\t'+$.t("Sorry, follow limit reached and you cannot follow more authors without removing some first.")+"\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>",actions:[{name:"goToProfile",type:"primary",text:$.t("Go to Profile"),key:13},{addClass:"tv-button--no-padding i-float_left",name:"cancel",type:"link",text:$.t("No thanks"),method:"close"}]},o=new n.TVModal(t),o.on("action:goToProfile",function(e){window.location.replace("/u/"+window.user.username+"/#following-people"),e.destroy()}),void o.open()):e.error?void i.e(47).then(function(t){(0,i(67).createNoticeDialog)({content:e.error,title:$.t("Error")}).open()}.bind(null,i)).catch(i.oe):void $(".js-follow-user-"+s).toggleClass("js-follow-user--followed").toggleClass("i-checked")}))},{source:"Follow user",verifiedPhoneRequired:!0})}var n,r;Object.defineProperty(t,"__esModule",{value:!0}),i(13),i(5),n=i(38),r=i(253),$("body").on("click",".js-follow-user",o)},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 108 108" width="108px" height="108px" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink"><defs/><g fill="none" fill-rule="evenodd" stroke="none" stroke-width="1" id="Page-1"><g id="Unfolow-Copy-5"><g transform="translate(23.000000, 18.000000)" id="icons"><path fill="#1BCAF9" stroke="#1BCAF9" stroke-linejoin="round" stroke-width="2" d="M34.2857143,36 C25.7647496,36 18.8571429,29.0923933 18.8571429,20.5714286 C18.8571429,12.0504639 25.7647496,5.14285714 34.2857143,5.14285714 C42.806679,5.14285714 49.7142857,12.0504639 49.7142857,20.5714286 C49.7142857,29.0923933 42.806679,36 34.2857143,36 Z M39.3453066,46.3060283 C43.2007533,46.3060283 60,51.734096 60,67.5057149 L60,70.9714286 L8.57142857,70.9714286 L8.57142857,67.8857143 C8.57142857,55.9563637 18.242078,46.2857143 30.1714286,46.2857143 C30.4881693,46.2857143 39.3453066,46.3060283 39.3453066,46.3060283 Z" id="Combined-Shape-Copy"/><g fill="#4A4A4A" fill-rule="nonzero" id="Group"><path d="M25.7142857,32.8571429 C16.0887515,32.8571429 8.28571429,25.0541056 8.28571429,15.4285714 C8.28571429,5.80303722 16.0887515,-2 25.7142857,-2 C35.3398199,-2 43.1428571,5.80303722 43.1428571,15.4285714 C43.1428571,25.0541056 35.3398199,32.8571429 25.7142857,32.8571429 Z M25.7142857,28.8571429 C33.1306809,28.8571429 39.1428571,22.8449666 39.1428571,15.4285714 C39.1428571,8.01217622 33.1306809,2 25.7142857,2 C18.2978905,2 12.2857143,8.01217622 12.2857143,15.4285714 C12.2857143,22.8449666 18.2978905,28.8571429 25.7142857,28.8571429 Z" id="Oval-Copy-2"/><path d="M2,63.8285714 L2,62.7428571 C2,51.918076 10.7752189,43.1428571 21.6,43.1428571 C22.0121334,43.1428571 24.4506127,43.1452945 26.1851226,43.1479506 C28.7407896,43.1518642 30.5969196,43.1574044 30.6878335,43.1613194 C31.7913803,43.2088404 32.7245052,42.3527624 32.7720262,41.2492156 C32.8195473,40.1456688 31.9634693,39.212544 30.8599225,39.1650229 C30.6756133,39.1570862 29.1181262,39.1524374 26.1912479,39.1479553 C24.4548709,39.1452964 22.0145599,39.1428571 21.6,39.1428571 C8.5660799,39.1428571 -2,49.708937 -2,62.7428571 L-2,65.8285714 C-2,66.9331409 -1.1045695,67.8285714 0,67.8285714 L51.4285714,67.8285714 C52.5331409,67.8285714 53.4285714,66.9331409 53.4285714,65.8285714 C53.4285714,64.7240019 52.5331409,63.8285714 51.4285714,63.8285714 L2,63.8285714 Z" id="Oval-Copy-3"/><path d="M41.1428571,52 L61.7142857,52 C62.8188552,52 63.7142857,51.1045695 63.7142857,50 C63.7142857,48.8954305 62.8188552,48 61.7142857,48 L41.1428571,48 C40.0382876,48 39.1428571,48.8954305 39.1428571,50 C39.1428571,51.1045695 40.0382876,52 41.1428571,52 Z" id="Path-2"/></g></g></g></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 75 58" width="75" height="58"><g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"><path fill="#5EC8F4" stroke="#5EC8F4" stroke-width="2" d="M45.94 29.634h-7.694c.258 8.283 7.047 14.927 15.44 14.927s15.178-6.643 15.443-14.926h.048c.004 12.767-10.4 23.12-23.238 23.12-12.837 0-23.243-10.353-23.24-23.12h-7.745L30.447 6.522 45.94 29.634z"/><path stroke="#FFF" stroke-width="3" d="M22.193 24.908l.56-.835m1.8-2.685l4.862-7.256"/><path stroke="currentColor" stroke-width="4" d="M39.96 23.94h-7.18c.24 7.73 6.576 13.928 14.41 13.928 7.83 0 14.163-6.2 14.41-13.93h.046c.004 11.915-9.706 21.577-21.686 21.577S18.27 35.853 18.273 23.94h-7.23l14.46-21.57L39.96 23.94z"/><path stroke="currentColor" stroke-width="4" d="M40.54 10.124H72.9V55.44H2V10.124h8.442"/></g></svg>'},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(906);t.createConfirmDialog=o.createConfirmDialog},function(e,t,i){"use strict";function o(e){var t,o=e.chartWidget;if(!navigator.onLine&&!n.isAlertsOnline(o))return t=n.getAlertDialogType(e),void n.openOfflineDialog(t);i.e(13).then(function(t){new(0,i(647).MakeAlertDialog)(e)}.bind(null,i)).catch(i.oe)}Object.defineProperty(t,"__esModule",{value:!0});var n=i(633);t.MakeAlertDialog=o},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="-90 -55 140 140" width="16" height="16"><path d="M10 12l-40.3-42.5-10 10.6 29.7 31.2L-41 43.4l10.7 11.3L10 12.2l-.1-.1z"/></svg>'},function(e,t,i){"use strict";function o(e){this._maxSize=e||50,this.reset()}var n=/[2-9]/g;o.prototype.measureText=function(e,t,i){var o,r,s=i||n,a=(t+"").replace(s,"0");return this._cache[a]?this._cache[a].width:(this._actualSize===this._maxSize&&(o=this._tick2Labels[this._oldestTick],delete this._tick2Labels[this._oldestTick],delete this._cache[o],this._oldestTick++,this._actualSize--),0===(r=e.measureText(a).width)&&t.length?0:(this._cache[a]={width:r,tick:this._usageTick},this._tick2Labels[this._usageTick]=a,this._actualSize++,this._usageTick++,r))},o.prototype.reset=function(){this._actualSize=0,this._cache={},this._usageTick=1,this._oldestTick=1,this._tick2Labels={}},e.exports=o},function(e,t,i){"use strict";function o(e,t,i){return i&&(i+=" "),(i||"")+e+"px "+t}Object.defineProperty(t,"__esModule",{value:!0}),t.makeFont=o},function(e,t,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){var i=new Date(e+t),o=Math.round(Math.abs(t)/6e4),n="UTC";return 0!==o&&(n+=t>0?"+":"-",n+=Math.floor(o/60),o%60&&(n+=":"+o%60)),i.getUTCFullYear()+"-"+("0"+(i.getUTCMonth()+1)).slice(-2)+"-"+("0"+i.getUTCDate()).slice(-2)+" "+("0"+i.getUTCHours()).slice(-2)+":"+("0"+i.getUTCMinutes()).slice(-2)+" ("+n+")"}function r(e){return"string"==typeof e&&0!==e.trim().length}function s(e){var t,i,o,n,s;if(!e||0===e.length)return!0;for(t=0;t<e.length;t++){if(r(e[t])||e[t].id||r(e[t].title))return!1;if(e[t].lines)for(i=e[t].lines,o=i.length,
n=0;n<o;n++)if(s=i[n],r(s)||r(s.line))return!1}return!0}function a(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.hasOwnProperty("text")?e.hasOwnProperty("color")&&i?t.append($("<span>",{style:"color: "+e.color}).text(e.text)):t.text(e.text):t.text(e)}function l(e,t){if(Array.isArray(e)&&2===e.length)$("<dl>").append(a(e[0],$("<dt>")),a(e[1],$("<dd>"),!0)).appendTo(t);else if(e.hasOwnProperty("br")&&e.br)$("<br>").appendTo(t);else{var i=$("<dl>").append(a(e,$("<dt>"))).appendTo(t);e.hasOwnProperty("listItem")&&i.addClass("list-item")}}function c(e,t){$("<a>").attr("href",e.href).text(e.text).addClass(e.class).appendTo(t)}function h(e,t){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("string"==typeof e)$("<h2>").text(e).appendTo(t);else if(e.hasOwnProperty("lines"))for(i=0;i<e.lines.length;i++)e.lines[i].hasOwnProperty("line")?0===i?e.lines[i].line.isEmpty||$("<h2>").text(e.lines[i].line).appendTo(t):l(e.lines[i].line,t):e.lines[i].hasOwnProperty("link")&&c(e.lines[i].link,t);else e.hasOwnProperty("title")&&$("<h2>").text(e.title).appendTo(t),e.hasOwnProperty("actual")&&$("<dl>").append($("<dt>").text($.t("Actual")+": "),$("<dd>").text(e.actual||"")).appendTo(t),e.hasOwnProperty("forecast")&&$("<dl>").append($("<dt>").text($.t("Forecast")+": "),$("<dd>").text(e.forecast||"")).appendTo(t),e.hasOwnProperty("previous")&&$("<dl>").append($("<dt>").text($.t("Previous")+": "),$("<dd>").text(e.previous||"")).appendTo(t),e.hasOwnProperty("timestamp")&&$("<dl>").append($("<dt>").text($.t("Date")+": "),$("<dd>").text(n(e.timestamp,o)||"")).appendTo(t)}var u;Object.defineProperty(t,"__esModule",{value:!0}),t.Tooltip=void 0,u=function(){function e(e,t){var i,o;for(i=0;i<t.length;i++)o=t[i],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),i(676),t.Tooltip=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.direction,n=void 0===i?"top":i,r=t.clickable,s=void 0!==r&&r,a=t.wide,l=void 0!==a&&a;o(this,e),this._direction=n,this._tooltipShown=!1,this._tooltipX=void 0,this._tooltipY=void 0,this._tooltipItems=null,this._width=l?250:200,this._$tooltip=$("<div>").addClass("tv-chart-events-source__tooltip").css({position:"absolute",width:this._width+"px"}),this._$tooltipContent=$("<div>").addClass("tv-chart-events-source__tooltip__content").appendTo(this._$tooltip),s&&this._$tooltip.addClass("tv-chart-events-source__tooltip--clickable")}return u(e,[{key:"show",value:function(){var e,t,i,o,n,r,a,l,c,u,d,p,f,_,m,g,v,y,b,S=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},w=S.items,T=void 0===w?[]:w,P=S.x,C=void 0===P?0:P,x=S.y,E=void 0===x?0:x,L=S.wrapElement,I=void 0===L?null:L,A=S.timeOffset,k=void 0===A?"":A,M=S.leftBorderColor,O=void 0===M?null:M;if(I&&!s(T)){if(e=$(I).width(),t=$(I).height(),i=!1,o=!1,this._tooltipShown||(this._$tooltip.appendTo(I),this._tooltipShown=!0,i=!0,o=!0),
C===this._tooltipX&&E===this._tooltipY||(i=!0),i&&(n=Math.max(Math.min(C-this._width/2,e-this._width-10),0),this._$tooltip.css({left:Math.round(n),bottom:Math.round(t-E+10)})),this._tooltipItems||(o=!0),!o)for(r=T.length;r--;)if(this._tooltipItems[r]!==T[r]){o=!0;break}if(o){if(a=void 0,T.length<=1)a=T;else{for(l={},c=T.length;c--;)u=T[c].importance,null==u&&(u=-1),l[u]||(l[u]=[]),l[u].push(T[c]);if(d=Object.keys(l).sort(function(e,t){return e-t}),d.length<=1)a=l[d[0]];else for(a=[],p=d.length;p--;)for(f=l[d[p]],_=f.length;_--;)a.push(f[_])}for(this._$tooltipContent.empty(),m=a.length;m--;)g=a[m],v="",g.hasOwnProperty("importance")?("string"==typeof g.importance&&("earnings"===g.importance?v="--importance-earnings":"splits"===g.importance?v="--importance-splits":"dividends"===g.importance?v="--importance-dividends":"list"===g.importance&&(v="--importance-list")),0===g.importance?v="--importance-normal":g.importance>0&&(v="--importance-high")):O||(v="--importance-none"),y="tv-chart-events-source__tooltip__item",v&&(y+=" "+y+v),b=$("<div>").attr("class",y),O&&b.css("border-left-color",O),h(g,b,k),b.appendTo(this._$tooltipContent);this._tooltipItems=T}"bottom"===this._direction&&this._$tooltip.css({bottom:Math.round(t-E-this._$tooltipContent.height()+10)})}}},{key:"hide",value:function(){this._tooltipShown&&(this._$tooltip.detach(),this._tooltipShown=!1)}},{key:"isOpened",value:function(){return this._tooltipShown}}]),e}()},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(e){var t=Array.prototype.slice.call(arguments);t.shift(),"function"==typeof e&&e.apply(this,t)}function i(i){403===i.status?t(e.onError,$.t("Please, try to reload page to edit user data")):t(e.onError,(0,o.isProd)()?$.t("Sorry, an error has occurred"):i.responseText)}var n,r;return e&&e.name&&void 0!==e.value?"sms_email"===e.name&&""===e.value.trim()?(i({}),void t(e.onComplete)):(n={},n[e.name]=e.value,r="status"!==e.name?"/accounts/change_data_json/":"/accounts/change_status/",void $.post(r,n,function(i){if(!i.errors||$.isEmptyObject(i.errors)){var o=i[e.name];user[e.name]=o,t(e.onSuccess,o)}else t(e.onError,i.errors[e.name])}).error(function(e){i(e)}).always(function(){t(e.onComplete)})):void console.warn("Required options.name and options.value")};var o=i(50);e.exports=t.default},function(e,t,i){!function(t,o,n){void 0!==e&&e.exports?e.exports=n():i(290)(o,n)}(0,"bowser",function(){function e(e){function t(t){var i=e.match(t);return i&&i.length>1&&i[1]||""}function i(t){var i=e.match(t);return i&&i.length>1&&i[2]||""}function o(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}
var n,r,a,l=t(/(ipod|iphone|ipad)/i).toLowerCase(),c=/like android/i.test(e),h=!c&&/android/i.test(e),u=/nexus\s*[0-6]\s*/i.test(e),d=!u&&/nexus\s*[0-9]+/i.test(e),p=/CrOS/.test(e),f=/silk/i.test(e),_=/sailfish/i.test(e),m=/tizen/i.test(e),g=/(web|hpw)os/i.test(e),v=/windows phone/i.test(e),y=(/SamsungBrowser/i.test(e),!v&&/windows/i.test(e)),b=!l&&!f&&/macintosh/i.test(e),S=!h&&!_&&!m&&!g&&/linux/i.test(e),w=i(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),T=t(/version\/(\d+(\.\d+)?)/i),P=/tablet/i.test(e)&&!/tablet pc/i.test(e),C=!P&&/[^-]mobi/i.test(e),x=/xbox/i.test(e);return/opera/i.test(e)?n={name:"Opera",opera:s,version:T||t(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(e)?n={name:"Opera",opera:s,version:t(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||T}:/SamsungBrowser/i.test(e)?n={name:"Samsung Internet for Android",samsungBrowser:s,version:T||t(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(e)?n={name:"Opera Coast",coast:s,version:T||t(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(e)?n={name:"Yandex Browser",yandexbrowser:s,version:T||t(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(e)?n={name:"UC Browser",ucbrowser:s,version:t(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(e)?n={name:"Maxthon",maxthon:s,version:t(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(e)?n={name:"Epiphany",epiphany:s,version:t(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(e)?n={name:"Puffin",puffin:s,version:t(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(e)?n={name:"Sleipnir",sleipnir:s,version:t(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(e)?n={name:"K-Meleon",kMeleon:s,version:t(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:v?(n={name:"Windows Phone",osname:"Windows Phone",windowsphone:s},w?(n.msedge=s,n.version=w):(n.msie=s,n.version=t(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(e)?n={name:"Internet Explorer",msie:s,version:t(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:p?n={name:"Chrome",osname:"Chrome OS",chromeos:s,chromeBook:s,chrome:s,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/edg([ea]|ios)/i.test(e)?n={name:"Microsoft Edge",msedge:s,version:w}:/vivaldi/i.test(e)?n={name:"Vivaldi",vivaldi:s,version:t(/vivaldi\/(\d+(\.\d+)?)/i)||T}:_?n={name:"Sailfish",osname:"Sailfish OS",sailfish:s,version:t(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?n={name:"SeaMonkey",seamonkey:s,version:t(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(e)?(n={name:"Firefox",firefox:s,version:t(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(n.firefoxos=s,n.osname="Firefox OS")):f?n={name:"Amazon Silk",silk:s,version:t(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(e)?n={name:"PhantomJS",phantom:s,version:t(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(e)?n={name:"SlimerJS",slimer:s,version:t(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?n={name:"BlackBerry",osname:"BlackBerry OS",blackberry:s,version:T||t(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:g?(n={name:"WebOS",osname:"WebOS",
webos:s,version:T||t(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(n.touchpad=s)):/bada/i.test(e)?n={name:"Bada",osname:"Bada",bada:s,version:t(/dolfin\/(\d+(\.\d+)?)/i)}:m?n={name:"Tizen",osname:"Tizen",tizen:s,version:t(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||T}:/qupzilla/i.test(e)?n={name:"QupZilla",qupzilla:s,version:t(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||T}:/chromium/i.test(e)?n={name:"Chromium",chromium:s,version:t(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||T}:/chrome|crios|crmo/i.test(e)?n={name:"Chrome",chrome:s,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:h?n={name:"Android",version:T}:/safari|applewebkit/i.test(e)?(n={name:"Safari",safari:s},T&&(n.version=T)):l?(n={name:"iphone"==l?"iPhone":"ipad"==l?"iPad":"iPod"},T&&(n.version=T)):n=/googlebot/i.test(e)?{name:"Googlebot",googlebot:s,version:t(/googlebot\/(\d+(\.\d+))/i)||T}:{name:t(/^(.*)\/(.*) /),version:i(/^(.*)\/(.*) /)},!n.msedge&&/(apple)?webkit/i.test(e)?(/(apple)?webkit\/537\.36/i.test(e)?(n.name=n.name||"Blink",n.blink=s):(n.name=n.name||"Webkit",n.webkit=s),!n.version&&T&&(n.version=T)):!n.opera&&/gecko\//i.test(e)&&(n.name=n.name||"Gecko",n.gecko=s,n.version=n.version||t(/gecko\/(\d+(\.\d+)?)/i)),n.windowsphone||!h&&!n.silk?!n.windowsphone&&l?(n[l]=s,n.ios=s,n.osname="iOS"):b?(n.mac=s,n.osname="macOS"):x?(n.xbox=s,n.osname="Xbox"):y?(n.windows=s,n.osname="Windows"):S&&(n.linux=s,n.osname="Linux"):(n.android=s,n.osname="Android"),r="",n.windows?r=o(t(/Windows ((NT|XP)( \d\d?.\d)?)/i)):n.windowsphone?r=t(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):n.mac?(r=t(/Mac OS X (\d+([_\.\s]\d+)*)/i),r=r.replace(/[_\s]/g,".")):l?(r=t(/os (\d+([_\s]\d+)*) like mac os x/i),r=r.replace(/[_\s]/g,".")):h?r=t(/android[ \/-](\d+(\.\d+)*)/i):n.webos?r=t(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):n.blackberry?r=t(/rim\stablet\sos\s(\d+(\.\d+)*)/i):n.bada?r=t(/bada\/(\d+(\.\d+)*)/i):n.tizen&&(r=t(/tizen[\/\s](\d+(\.\d+)*)/i)),r&&(n.osversion=r),a=!n.windows&&r.split(".")[0],P||d||"ipad"==l||h&&(3==a||a>=4&&!C)||n.silk?n.tablet=s:(C||"iphone"==l||"ipod"==l||h||u||n.blackberry||n.webos||n.bada)&&(n.mobile=s),n.msedge||n.msie&&n.version>=10||n.yandexbrowser&&n.version>=15||n.vivaldi&&n.version>=1||n.chrome&&n.version>=20||n.samsungBrowser&&n.version>=4||n.firefox&&n.version>=20||n.safari&&n.version>=6||n.opera&&n.version>=10||n.ios&&n.osversion&&n.osversion.split(".")[0]>=6||n.blackberry&&n.version>=10.1||n.chromium&&n.version>=20?n.a=s:n.msie&&n.version<10||n.chrome&&n.version<20||n.firefox&&n.version<20||n.safari&&n.version<6||n.opera&&n.version<10||n.ios&&n.osversion&&n.osversion.split(".")[0]<6||n.chromium&&n.version<20?n.c=s:n.x=s,n}function t(e){return e.split(".").length}function i(e,t){var i,o=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(i=0;i<e.length;i++)o.push(t(e[i]));return o}function o(e){for(var o=Math.max(t(e[0]),t(e[1])),n=i(e,function(e){var n=o-t(e);return e+=Array(n+1).join(".0"),i(e.split("."),function(e){return Array(20-e.length).join("0")+e}).reverse()});--o>=0;){if(n[0][o]>n[1][o])return 1
;if(n[0][o]!==n[1][o])return-1;if(0===o)return 0}}function n(t,i,n){var r,s,l=a;"string"==typeof i&&(n=i,i=void 0),void 0===i&&(i=!1),n&&(l=e(n)),r=""+l.version;for(s in t)if(t.hasOwnProperty(s)&&l[s]){if("string"!=typeof t[s])throw Error("Browser version in the minVersion map should be a string: "+s+": "+t);return o([r,t[s]])<0}return i}function r(e,t,i){return!n(e,t,i)}var s=!0,a=e("undefined"!=typeof navigator?navigator.userAgent||"":"");return a.test=function(e){var t,i;for(t=0;t<e.length;++t)if("string"==typeof(i=e[t])&&i in a)return!0;return!1},a.isUnsupportedBrowser=n,a.compareVersions=o,a.check=r,a._detect=e,a.detect=e,a})},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 9 9" width="9px" height="9px"><path d="M2 1L1 2l2.5 2.5L1 7l1 1 2.5-2.5L7 8l1-1-2.5-2.5L8 2 7 1 4.5 3.5z"/></svg>'},,,function(e,t,i){"use strict";function o(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=window._kmq;o&&o.push(["record","Button {0}".format(t),n({Location:e,Page:window.location.pathname},i)])}Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){var t,i,o;for(t=1;t<arguments.length;t++){i=arguments[t];for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e};t.record=o},function(e,t,i){"use strict";var o={};o.renderAttributes=function(e){var t,i="";for(t in e)e[t]&&(i+=" "+t+'="'+e[t]+'"');return i},o.create=function(e,t){var i=$(document.createElement(e));return t&&(t.html&&(i.html(t.html),delete t.html),i.attr(t)),i},o.validAttributes=["abbr","accept-charset","accept","accesskey","action","align","alink","alt","archive","axis","background","bgcolor","border","cellpadding","cellspacing","char","charoff","charset","checked","cite","class","classid","clear","code","codebase","codetype","color","cols","colspan","compact","content","coords","data","datetime","declare","defer","dir","disabled","enctype","face","for","frame","frameborder","headers","height","href","hreflang","hspace","http-equiv","id","ismap","label","lang","language","link","longdesc","marginheight","marginwidth","maxlength","media","method","multiple","name","nohref","noresize","noshade","nowrap","object","onblur","onchange","onclick","ondblclick","onfocus","onkeydown","onkeypress","onkeyup","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onreset","onselect","onsubmit","onunload","profile","prompt","readonly","rel","rev","rows","rowspan","rules","scheme","scope","scrolling","selected","shape","size","span","src","standby","start","style","summary","tabindex","target","text","title","type","usemap","valign","value","valuetype","version","vlink","vspace","width"],o.validAttribute=function(e){return-1!==jQuery.inArray(e,o.validAttributes)},o.cleanAttributes=function(e){return jQuery.each(e,function(t,i){o.validAttribute(t)||delete e[t]}),e},e.exports=o},function(e,t,i){"use strict";function o(e){return-1!==s.indexOf(e)}function n(e){return-1!==a.indexOf(e)}var r,s,a;Object.defineProperty(t,"__esModule",{value:!0}),r=i(32),
s=[r.STYLE_RENKO,r.STYLE_KAGI,r.STYLE_PNF,r.STYLE_PB,r.STYLE_HEIKEN_ASHI],t.isJapaneseStyle=o,a=[r.STYLE_RENKO,r.STYLE_PB,r.STYLE_KAGI,r.STYLE_PNF],t.hasProjection=n},function(e,t,i){"use strict";var o=i(40),n={_fontHeightCache:{},_parsedColorCache:{}};n._parseColor=function(e){var t,i,o;return this._parsedColorCache[e]?this._parsedColorCache[e]:(t=document.createElement("div"),t.style.color=e,i=t.style.color.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i)||t.style.color.match(/^rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\,\s*(\d*\.?\d+)\s*\)$/i),o={r:i[1],g:i[2],b:i[3],a:i[4]||"1"},this._parsedColorCache[e]=o,o)},n.getColorFromProperties=function(e,t){var i=1-t.value()/100,o=this._parseColor(e.value());return"rgba("+o.r+","+o.g+","+o.b+","+i+")"},n.setColorToProperties=function(e,t,i){var o,n=this._parseColor(e);t.setValue("rgb("+n.r+","+n.g+","+n.b+")"),o=100*(1-n.a),i.setValue(Math.max(0,Math.min(o,100)))},n._parseFont=function(e){var t,i,o=document.createElement("div");return o.style.font=e,t=o.style.fontSize.match(/(\d+)pt/),i=t&&t[0]===o.style.fontSize,{family:o.style.fontFamily,size:i?t[1]:"",bold:"bold"===o.style.fontWeight,italic:"italic"===o.style.fontStyle}},n.getFontFromProperties=function(e,t,i,o){return[i.value()?"bold":"",o.value()?"italic":"",t.value()+"pt",e.value()].join(" ")},n.setFontToProperties=function(e,t,i,o,n){var r=this._parseFont(e);r.family.length>0&&t.setValue(r.family),r.size.length>0&&i.setValue(r.size),o.setValue(r.bold),n.setValue(r.italic)},n.fontHeight=function(e){var t,i;return this._fontHeightCache[e]||(t=document.createElement("span"),t.appendChild(document.createTextNode("height")),document.body.appendChild(t),t.style.cssText="font: "+e+"; white-space: nowrap; display: inline;",i=t.offsetHeight,document.body.removeChild(t),this._fontHeightCache[e]=Math.ceil(i)),this._fontHeightCache[e]},n.drawPolyHoverOrPress=function(e,t,i,o){o?(e.save(),e.fillStyle="rgba(0, 0, 0, 0.15)",CanvasEx.drawPoly(e,t,!0),e.restore()):i&&(e.save(),e.fillStyle="rgba(0, 0, 0, 0.1)",CanvasEx.drawPoly(e,t,!0),e.restore())},n.repaint=function(e){var t=new o(o.LIGHT_UPDATE);t.force=!0,e.invalidate(t)},n.roundToMinTick=function(e,t){var i=e.mainSource().base(),o=1/i;return o*Math.round(t/o)},e.exports=n},,function(e,t,i){"use strict";function o(e){this.items=e.items,this._simpleMode=e.simpleMode,this.barSpacing=e.barSpacing,this.lineColor=e.lineColor,this.lineWidth=e.lineWidth,this.lineStyle=e.lineStyle,this.withMarkers=e.withMarkers,this.withSteps=e.withSteps,this.hittest=e.hittest,this.ignorePaletteLineWidth=e.ignorePaletteLineWidth,this.forceLineColor=!!e.forceLineColor}var n=i(8).Point,r=i(51).distanceToSegment,s=i(42),a=i(11);o.prototype.draw=function(e){e.lineCap="square",e.lineJoin=this.withMarkers?"round":"miter",e.strokeStyle=this.lineColor,e.fillStyle=this.lineColor,e.lineWidth=this.lineWidth,e.lineStyle=this.lineStyle,s.setValidLineStyle(e,this.lineStyle),this._simpleMode?this._drawSimpleMode(e):this._drawLines(e)},o.prototype._drawSimpleMode=function(e){var t,i,o,n;if(e.beginPath(),
this.walkLine(e,this.items),e.stroke(),this.withMarkers){for(t=this.lineWidth+2,i=2*Math.PI,e.beginPath(),n=this.items.length;n--;)(o=this.items[n])&&(e.moveTo(o.x,o.y),e.arc(o.x,o.y,t,0,i));e.fill()}},o.prototype.walkLine=function(e,t,i,o){var n,r,a,l,c,h,u,d,p,f,_;if(t){for(n=.25*this.barSpacing,u=s.coordinateIsValid,d=0,p=t.length;d<p;d++)if(f=t[d],u(f.y)){a=f,r=d;break}if(void 0!==r&&a)for(_=this.withSteps&&this.lineWidth&&this.lineWidth%2==0?.5:0,d=r,p=t.length;d<p;d++){if(c=t[d],h=t[d+1]||{},u(c.y))if(l&&u(l.y))this.withSteps&&e.lineTo(l.x+_,c.y+_),e.lineTo(c.x+_,c.y+_),i&&!u(h.y)&&e.lineTo(c.x+_,o);else if(h&&u(h.y))i?(d!==r&&e.lineTo(c.x+_,o),e.lineTo(c.x+_,c.y+_)):e.moveTo(c.x+_,c.y+_);else if(i){if(0===d)continue;d!==r&&e.lineTo(c.x-n+_,o),e.lineTo(c.x-n+_,c.y+_),e.lineTo(c.x+n+_,c.y+_),e.lineTo(c.x+n+_,o)}else e.moveTo(c.x-n+_,c.y+_),e.lineTo(c.x+n+_,c.y+_);l=c}}},o.prototype._drawLines=function(e){function t(t,i,o){a(i.y)&&(a(t.y)?e.lineTo(i.x,i.y):o&&a(o.y)?e.moveTo(i.x,i.y):(e.moveTo(i.x-r,i.y),e.lineTo(i.x+r,i.y)))}var i,o,n,r,a,l,c,h,u,d,p,f,_,m;if(this.items.length){for(r=.25*this.barSpacing,a=s.coordinateIsValid,e.beginPath(),l=this.items[0],l&&e.moveTo(l.x,l.y),c=e.strokeStyle,h=e.lineWidth,u=e.lineStyle,d=1;d<this.items.length;++d)i=this.items[d-1],o=this.items[d],n=this.items[d+1],o.style&&!this.forceLineColor?(p=o.style.color,f=o.style.width,_=o.style.style):(p=this.lineColor,f=this.lineWidth,_=this.lineStyle),this.ignorePaletteLineWidth&&(f=this.lineWidth),m=p!==c||f!==h||_!==u,m&&(c=p,h=f,u=_,e.stroke(),e.beginPath(),e.strokeStyle=p,e.lineWidth=f,s.setValidLineStyle(e,_),e.moveTo(i.x,i.y)),t(i,o,n);e.stroke()}},o.prototype.hitTest=function(e){for(var t,i,o,l,c,h,u,d,p=s.selectionTolerance(this.lineWidth),f=0,_=this.items.length-1;_-f>2;)h=Math.round((_+f)/2),u=this.items[h],u.x<=e.x?f=h:_=h;for(f=Math.max(1,f-1),_=Math.min(this.items.length-1,_+1),d=f;d<=_;++d)if(t=this.items[d-1],i=this.items[d],o=t.x,l=i.x,c=r(new n(o,t.y),new n(l,i.y),new n(e.x,e.y)),c.distance<=p)return this.hittest?this.hittest:new a(a.REGULAR);return null},t.PaneRendererLine=TradingView.PaneRendererLine=o},function(e,t,i){"use strict";var o,n;Object.defineProperty(t,"__esModule",{value:!0}),o=i(16),n=function(){function e(){}return e.prototype.format=function(e){return o.customFormatters&&o.customFormatters.dateFormatter?o.customFormatters.dateFormatter.format(e):o.numberToStringWithLeadingZero(e.getUTCFullYear(),4)+"-"+o.numberToStringWithLeadingZero(e.getUTCMonth()+1,2)+"-"+o.numberToStringWithLeadingZero(e.getUTCDate(),2)},e.prototype.formatLocal=function(e){return o.customFormatters.dateFormatter?o.customFormatters.dateFormatter.formatLocal?o.customFormatters.dateFormatter.formatLocal(e):o.customFormatters.dateFormatter.format(e):o.numberToStringWithLeadingZero(e.getFullYear(),4)+"-"+o.numberToStringWithLeadingZero(e.getMonth()+1,2)+"-"+o.numberToStringWithLeadingZero(e.getDate(),2)},e}(),t.DateFormatter=n},function(e,t,i){"use strict";function o(){this.backColorers=[]}function n(e){o.call(this),this._series=e}
function r(e,t){o.call(this),this._study=e,this._plotIndex=t}var s=i(24).PlotRowSearchMode;o.prototype.barStyle=function(e,t,i){var o,n={};for(o=this.backColorers.length-1;o>=0;o--)this.backColorers[o].applyBarStyle(e,t,n,i);return this.applyBarStyle(e,t,n,i),n},o.prototype.pushBackBarColorer=function(e){this.backColorers.push(e)},o.prototype.applyBarStyle=function(e,t,i){throw Error("This function is supposed to be reimplemented in a subclass")},inherit(n,o),n.prototype.applyBarStyle=function(e,t,i,o){var n,r,s,a,l,c,h,u,d,p,f,_,m,g,v;switch(i||(i={}),i.barColor=null,i.barBorderColor=null,i.barWickColor=null,i.isBarHollow=null,i.isBarUp=null,i.upColor=null,i.downColor=null,i.isTwoColorBar=null,n=this._series.properties(),n.style.value()){case TradingView.Series.STYLE_LINE:i.barColor=n.lineStyle.color.value();break;case TradingView.Series.STYLE_AREA:i.barColor=n.areaStyle.linecolor.value();break;case TradingView.Series.STYLE_BARS:r=n.barStyle.upColor.value(),s=n.barStyle.downColor.value(),a=r,l=s,c=this.findBar(e,!1,o),n.barStyle.barColorsOnPrevClose.value()?(h=this.findPrevBar(e,!1,o),i.barColor=h[TradingView.CLOSE_PLOT]<=c[TradingView.CLOSE_PLOT]?r:s,i.barBorderColor=h[TradingView.CLOSE_PLOT]<=c[TradingView.CLOSE_PLOT]?a:l):(i.barColor=c[TradingView.OPEN_PLOT]<=c[TradingView.CLOSE_PLOT]?r:s,i.barBorderColor=c[TradingView.OPEN_PLOT]<=c[TradingView.CLOSE_PLOT]?a:l);break;case TradingView.Series.STYLE_CANDLES:r=n.candleStyle.upColor.value(),s=n.candleStyle.downColor.value(),a=n.candleStyle.borderUpColor?n.candleStyle.borderUpColor.value():n.candleStyle.borderColor.value(),l=n.candleStyle.borderDownColor?n.candleStyle.borderDownColor.value():n.candleStyle.borderColor.value(),u=n.candleStyle.wickUpColor?n.candleStyle.wickUpColor.value():n.candleStyle.wickColor.value(),d=n.candleStyle.wickDownColor?n.candleStyle.wickDownColor.value():n.candleStyle.wickColor.value(),c=this.findBar(e,!1,o),n.candleStyle.barColorsOnPrevClose.value()?(h=this.findPrevBar(e,!1,o),p=h[TradingView.CLOSE_PLOT]<=c[TradingView.CLOSE_PLOT]):p=c[TradingView.OPEN_PLOT]<=c[TradingView.CLOSE_PLOT],i.barColor=p?r:s,i.barBorderColor=p?a:l,i.barWickColor=p?u:d;break;case TradingView.Series.STYLE_HOLLOW_CANDLES:r=n.hollowCandleStyle.upColor.value(),s=n.hollowCandleStyle.downColor.value(),a=n.hollowCandleStyle.borderUpColor?n.hollowCandleStyle.borderUpColor.value():n.hollowCandleStyle.borderColor.value(),l=n.hollowCandleStyle.borderDownColor?n.hollowCandleStyle.borderDownColor.value():n.hollowCandleStyle.borderColor.value(),u=n.hollowCandleStyle.wickUpColor?n.hollowCandleStyle.wickUpColor.value():n.hollowCandleStyle.wickColor.value(),d=n.hollowCandleStyle.wickDownColor?n.hollowCandleStyle.wickDownColor.value():n.hollowCandleStyle.wickColor.value(),c=this.findBar(e,!1,o),h=this.findPrevBar(e,!1,o),h[TradingView.CLOSE_PLOT]<=c[TradingView.CLOSE_PLOT]?(i.barColor=r,i.barBorderColor=a,i.barWickColor=u):(i.barColor=s,i.barBorderColor=l,i.barWickColor=d),c[TradingView.OPEN_PLOT]<=c[TradingView.CLOSE_PLOT]?i.isBarHollow=!0:i.isBarHollow=!1;break
;case TradingView.Series.STYLE_HEIKEN_ASHI:r=n.haStyle.upColor.value(),s=n.haStyle.downColor.value(),a=n.haStyle.borderUpColor.value(),l=n.haStyle.borderDownColor.value(),u=n.haStyle.wickUpColor.value(),d=n.haStyle.wickDownColor.value(),c=this.findBar(e,t,o),n.haStyle.barColorsOnPrevClose.value()?(h=this.findPrevBar(e,t,o),p=h[TradingView.CLOSE_PLOT]<=c[TradingView.CLOSE_PLOT]):p=c[TradingView.OPEN_PLOT]<=c[TradingView.CLOSE_PLOT],i.barColor=p?r:s,i.barBorderColor=p?a:l,i.barWickColor=p?u:d;break;case TradingView.Series.STYLE_RENKO:c=this.findBar(e,t,o),p=c[TradingView.OPEN_PLOT]<=c[TradingView.CLOSE_PLOT],r=t?n.renkoStyle.upColorProjection.value():n.renkoStyle.upColor.value(),s=t?n.renkoStyle.downColorProjection.value():n.renkoStyle.downColor.value(),a=t?n.renkoStyle.borderUpColorProjection.value():n.renkoStyle.borderUpColor.value(),l=t?n.renkoStyle.borderDownColorProjection.value():n.renkoStyle.borderDownColor.value(),u=n.renkoStyle.wickUpColor.value(),d=n.renkoStyle.wickDownColor.value(),i.barColor=p?r:s,i.barBorderColor=p?a:l,i.barWickColor=p?u:d,i.isBarUp=p;break;case TradingView.Series.STYLE_PB:c=this.findBar(e,t,o),p=c[TradingView.OPEN_PLOT]<=c[TradingView.CLOSE_PLOT],r=t?n.pbStyle.upColorProjection.value():n.pbStyle.upColor.value(),s=t?n.pbStyle.downColorProjection.value():n.pbStyle.downColor.value(),a=t?n.pbStyle.borderUpColorProjection.value():n.pbStyle.borderUpColor.value(),l=t?n.pbStyle.borderDownColorProjection.value():n.pbStyle.borderDownColor.value(),i.barColor=p?r:s,i.barBorderColor=p?a:l,i.isBarUp=p;break;case TradingView.Series.STYLE_KAGI:i.upColor=t?n.kagiStyle.upColorProjection.value():n.kagiStyle.upColor.value(),i.downColor=t?n.kagiStyle.downColorProjection.value():n.kagiStyle.downColor.value(),f=null,c=this.findBar(e,t,o),c[TradingView.LOW_PLOT]<c[TradingView.ADT_PLOT]&&c[TradingView.ADT_PLOT]<c[TradingView.HIGH_PLOT]?(f=c[TradingView.OPEN_PLOT]<=c[TradingView.CLOSE_PLOT],i.isTwoColorBar=!0):(f=c[TradingView.OPEN_PLOT]<=c[TradingView.CLOSE_PLOT]?c[TradingView.OPEN_PLOT]===c[TradingView.ADT_PLOT]:c[TradingView.OPEN_PLOT]!==c[TradingView.ADT_PLOT],i.isTwoColorBar=!1),i.barColor=f?i.upColor:i.downColor,i.isBarUp=c[TradingView.OPEN_PLOT]<=c[TradingView.CLOSE_PLOT];break;case TradingView.Series.STYLE_PNF:c=this.findBar(e,t,o),p=c[TradingView.ADT_PLOT]>0,r=t?n.pnfStyle.upColorProjection.value():n.pnfStyle.upColor.value(),s=t?n.pnfStyle.downColorProjection.value():n.pnfStyle.downColor.value(),i.isBarUp=p,i.barColor=p?r:s;break;case TradingView.Series.STYLE_BASELINE:c=this.findBar(e,t,o),_=n.baselineStyle,m=this._series.priceScale(),g=Math.round(m.height()*(Math.abs(100-_.baseLevelPercentage.value())/100)),v=m.coordinateToPrice(g),c[TradingView.CLOSE_PLOT]>v?i.barColor=n.baselineStyle.topLineColor.value():i.barColor=n.baselineStyle.bottomLineColor.value()}return i},n.prototype.getSeriesBars=function(e){return e?this._series.nsBars():this._series.bars()},n.prototype._findBarFieldValue=function(e,t,i){var o=this.getSeriesBars(i).valueAt(e);if(null!==o)return o[t]},n.prototype.findBar=function(e,t,i){
return i?i.value:this.getSeriesBars(t).valueAt(e)||[]},n.prototype.findPrevBar=function(e,t,i){var o,n;return i&&i.previousValue?i.previousValue:(o=this._series.bars(),n=o._search(e,s.Exact),null!==n&&n>0?this._series.bars()._valueAt(n-1):[])},inherit(r,o),r.prototype.applyBarStyle=function(e,t,i){var o,n,r,s,a,l,c,h,u,d,p,f,_;return i||(i={}),t?i:(o=this._study.properties(),o.visible.value()?(n=this._study.metaInfo(),(r=this._study.data())&&0!==r.size()?(s=n.plots[this._plotIndex],this._study.getMinFirstBarIndexForPlot(s.id)>e?i:(a=o.styles[s.id],a.visible&&!a.visible.value()?i:(l=this._study.offset(s.id),null===(c=r.valueAt(e-l))?i:null==(h=c[this._plotIndex+1])?i:(h=Math.round(h),u=n.plots[this._plotIndex].palette,d=o.palettes,p=d[u],f=n.palettes[u].valToIndex?n.palettes[u].valToIndex[h]:h,_=p.colors[f].color.value(),i.barColor=_,i.upColor=_.color,i.downColor=_.color,i)))):i):i)},t.SeriesBarColorer=n,t.StudyBarColorer=r},function(e,t,i){"use strict";function o(e){this.items=e.items,this.barSpacing=e.barSpacing,this.colorUp=e.colorup,this.colorDn=e.colordown,this.colorBorderUp=e.colorBorderUp,this.colorBorderDown=e.colorBorderDown,this.width=this._calculateWidth(e.barSpacing),this.minHeight=e.minHeight,this.vertOffset=this._calculateVerticalOffset(e.barSpacing)}function n(e,t,i,o){this.x=e,this.y=t,this.height=i,this.isUp=o}var r=i(8).Point,s=i(11);o.prototype._calculateVerticalOffset=function(e){return Math.round((e||0)/4)},o.prototype._calculateMinHeight=function(e){return this.width||this._calculateWidth(e)},o.prototype._calculateWidth=function(e){var e=e||this.barSpacing;return Math.round(e/2)},o.prototype.draw=function(e){var t,i,o,n,r,s,a,l=this.width,c=l<4,h=Math.max(parseInt(l/2),1),u=Math.round(this.width/2),d=Math.round(this.width);for(e.translate(1,1),t=0,i=this.items.length;t<i;t++)o=this.items[t],n=o.isUp?-1:1,r=Math.abs(o.height),s=o.y-n*this.vertOffset,e.beginPath(),e.translate(o.x,s),c?(e.moveTo(0,0),e.lineTo(-u,-u*n),e.moveTo(0,0),e.lineTo(u,-u*n),e.moveTo(0,0),e.lineTo(0,-r*n),e.moveTo(-u,-r*n),e.lineTo(u,-r*n),e.lineWidth=h,e.strokeStyle=o.isUp?this.colorUp:this.colorDn,e.stroke()):(e.moveTo(0,0),r<d?(e.lineTo(l,-r*n),e.lineTo(-l,-r*n)):(e.lineTo(l,-d*n),e.lineTo(u,-d*n),e.lineTo(u,-r*n),e.lineTo(-u,-r*n),e.lineTo(-u,-d*n),e.lineTo(-l,-d*n)),e.lineTo(0,0),a=o.isUp?this.colorBorderUp:this.colorBorderDown,e.strokeStyle=a,e.stroke(),e.fillStyle=o.isUp?this.colorUp:this.colorDn,e.fill()),e.translate(-o.x,-s);e.translate(-1,-1)},o.prototype.hitTest=function(e){var t,i,o,n,r,a,l,c,h,u=Math.round(this.width/2),d=Math.round(this.width);for(t=0;t<this.items.length;++t)if((i=this.items[t])&&void 0!==i.x&&null!==i.x&&!TradingView.isNaN(i.x)&&void 0!==i.y&&null!==i.y&&!TradingView.isNaN(i.y)&&(o=Math.abs(i.height),n=i.isUp?-1:1,r=o+d,a=i.y-n*this.vertOffset,l=a-n*r,c=i.x-u,h=i.x+u,c<e.x&&e.x<h&&(i.isUp?a<e.y&&e.y<l:l<e.y&&e.y<a)))return new s(s.REGULAR);return null},inherit(n,r),t.PaneRendererArrowsUpDown=TradingView.PaneRendererArrowsUpDown=o,
t.PaneRendererArrowsUpDownItem=TradingView.PaneRendererArrowsUpDownItem=n},function(e,t,i){"use strict";e.exports=function(e,t){var i,o=10,n=e%o;for(n&&(e=e-n+o),i=[];e<=t;e+=o)i.push(e);return i}},function(e,t,i){"use strict";function o(e){if(e)return"QUANDL"===e.exchange?"Quandl.com":["BMFBOVESPA","ASX","BME","NAG","TSE","TFX","NZX","BCBA","TWSE","TASE","EURONEXT","TOCOM","BMV","SIX","SGX","GPW","SWB","BCS","WB","SZSE","BELEX","BAHRAIN","EGX","TADAWUL","BVL","LUXSE","DFM","BVC","NSENG"].includes(e.exchange)?"ICE Data services":void 0}e.exports=o},function(e,t,i){"use strict";var o,n,r,s,a,l;Object.defineProperty(t,"__esModule",{value:!0}),o=i(16),n=i(71),r=i(73),s=i(632),a=i(9),l={price:o.PriceFormatter,volume:n.VolumeFormatter,percentage:r.PercentageFormatter,quoteSessionPrice:s.QuoteSessionPriceFormater},function(e){function t(e){var t=a.ensureDefined(l[e.type]);return{type:e.type,state:t.serialize(e)}}function i(e){return a.ensureDefined(l[e.type]).deserialize(e.state)}e.serialize=t,e.deserialize=i}(t.FormattersSerializer||(t.FormattersSerializer={}))},function(e,t,i){"use strict";var o,n,r,s,a;Object.defineProperty(t,"__esModule",{value:!0}),o=i(6),n=i(9),r=i(80),s=i(10),a=function(e){function t(t,i){var o=e.call(this)||this;return o._activeBackground="#0F6DBF",o._background="#5592C9",o._active=!1,o._source=t,o._data=i,o}return o.__extends(t,e),t.prototype.setActive=function(e){this._active=e},t.prototype.setBackground=function(e){this._background=e},t.prototype._updateRendererData=function(e){var t,i,o,r,a,l,c,h;if(e.visible=!1,t=this._source.model(),t.timeScale()&&!t.timeScale().isEmpty()&&null!==(i=this._source.priceScale())&&!i.isEmpty()&&(t.selectedSource()===this._source||this._source.isForcedDrawPriceAxisLabel())&&null!==t.timeScale().visibleBars()&&(o=this._source.axisPoints(),r=this._data.pointIndex,!(o.length<=r)&&(a=o[r],isFinite(a.price)))){if(i.isPercent()){if(!(l=this._source.ownerSource()))return;if(c=l.firstValue(),!s.isNumber(c))return;a.price=n.ensureNotNull(i.priceRange()).convertToPercent(a.price,c)}h=this._active?this._activeBackground:this._background,this._data.backgroundProperty&&(h=this._data.backgroundProperty.value()),e.background=h,e.borderColor="#2E84A6",e.color=this.generateTextColor(h),e.coordinate=i.priceToCoordinate(a.price),e.text=i.formatter().format(a.price),e.visible=!0}},t}(r.PriceAxisView),t.LineToolPriceAxisView=a},function(e,t,i){"use strict";var o,n;Object.defineProperty(t,"__esModule",{value:!0}),o=i(55),n=function(){function e(){this._text="",this._background="#585858",this._coordinate=0}return e.prototype.text=function(){return this._text},e.prototype.background=function(){return this._background},e.prototype.color=function(){return"black"===o.rgbToBlackWhiteString(o.parseRgb(this._background),150)?"white":"black"},e.prototype.coordinate=function(){return this._coordinate},e}(),t.TimeAxisView=n},function(e,t,i){"use strict";function o(){this._data=null}var n=/[1-9]/g;o.prototype.setData=function(e){this._data=e},o.prototype.draw=function(e,t){
var i,o,r,s,a,l,c,h,u,d,p,f,_,m,g,v,y,b,S;null!=this._data&&!1!==this._data.visible&&0!==this._data.text.length&&(e.font=t.font,(i=Math.round(t.widthCache.measureText(e,this._data.text,n)))<=0||(o=t.paddingHorizontal,r=i+2*o,s=r/2,a=this._data.width,l=this._data.coordinate,c=Math.floor(l-s)+.5,c<0?(l+=Math.abs(0-c),c=Math.floor(l-s)+.5):c+r>a&&(l-=Math.abs(a-(c+r)),c=Math.floor(l-s)+.5),h=c,u=h+r,d=u,p=Math.round(this._data.coordinate+1),f=p,_=.5,m=_+t.borderSize+t.tickLength+t.paddingTop+t.fontSize+t.paddingBottom,g=m,v=_,y=v,b=y+t.borderSize+t.tickLength,S=m-t.baselineOffset-t.paddingBottom,e.fillStyle=this._data.background,e.lineWidth=1,e.beginPath(),e.strokeStyle=this._data.color,e.moveTo(c,_),e.lineTo(h,m),e.lineTo(u,g),e.lineTo(d,v),e.fill(),e.beginPath(),e.moveTo(p,y),e.lineTo(f,b),e.stroke(),e.textAlign="left",e.fillStyle=this._data.color,e.fillText(this._data.text,c+o,S)))},e.exports=o},function(e,t,i){"use strict";function o(e){function t(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)||""}var i,o,s,a=e||{},l="QUANDL"===a.exchange,c="",h={symbolDescription:"",interval:"",exchange:"",chartStyle:"",extended:""};switch(a.description&&l?2===a.description.split("/").length?h.symbolDescription=a.description.split("/")[1]:(i=a.description.split("'").filter(function(e){return e.length}),i.forEach(function(e){e=e&&("/"===e[0]||/\d+\/\(?/.test(e))?[e]:e.split("/").filter(function(e){return e.length}),h.symbolDescription+=e[2===e.length?1:0]})):a.description?h.symbolDescription=a.description:h.symbolDescription=a.symbol,a.interval&&(h.interval=n(a.interval)),l&&a.description&&(o=/[\w_]+\/[\w_]+/.exec(a.description),o&&o[0]?h.provider=o[0].split("/")[0]:h.provider=a.description.split("/")[0]),a.exchange&&(h.exchange=a.exchange),a.style){case r.STYLE_RENKO:s=a.inputs.style+("ATR"===a.inputs.style?"("+a.inputs.atrLength+")":""),h.chartStyle=$.t("Renko")+" ["+s+", "+t(a.boxSize,4)+"]";break;case r.STYLE_PB:h.chartStyle=$.t("Line Break")+" ["+a.inputs.lb+"]";break;case r.STYLE_KAGI:s=a.inputs.style+("ATR"===a.inputs.style?"("+a.inputs.atrLength+")":""),h.chartStyle=$.t("Kagi")+" ["+s+(void 0!==a.reversalAmount?", "+t(a.reversalAmount,8):"")+"]";break;case r.STYLE_PNF:s=a.inputs.style+("ATR"===a.inputs.style?"("+a.inputs.atrLength+")":""),h.chartStyle=$.t("PnF")+" ["+s+", "+t(a.boxSize,8)+", "+a.inputs.reversalAmount+"]";break;case r.STYLE_HEIKEN_ASHI:h.chartStyle=$.t("Heikin Ashi")}return a.extended&&(h.extended=window.t("ext",{context:"shorthand_for_extended_session"})),c=h.symbolDescription+(h.interval?", "+h.interval:"")+(h.provider?", "+h.provider:"")+(h.exchange?", "+h.exchange:"")+(h.chartStyle?", "+h.chartStyle:"")+(h.extended?", "+h.extended:""),c=c.replace(/\'/g,"")}var n=i(217).translatedIntervalString,r=i(32);e.exports={generateTitleForGui:o}},function(e,t,i){"use strict";function o(e,t){this.customization={forcePriceAxisLabel:!0,disableSelection:!0,disableErasing:!0},n.call(this,e,t)}var n=i(1).LineDataSource;inherit(o,n),o.POINTS_COUNT=1,o.prototype.pointsCount=function(){return o.POINTS_COUNT},
o.prototype.hasContextMenu=function(){return!1},o.prototype.state=function(){return null},o.prototype.startMoving=function(){n.prototype.startMoving.apply(this,arguments),this._cursorMoved=!1},o.prototype.endMoving=function(){n.prototype.endMoving.apply(this,arguments),this._cursorMoved=!1},o.prototype.correctPoints=function(e){var t,i,o,n,r;for(this._currentMovingPoint&&this._startMovingPoint?this._currentMovingPoint.price-this._startMovingPoint.price&&(this._cursorMoved=!0):this._cursorMoved=!1,t=this.priceScale(),i=t.mainSource().base(),o=1/i,n=0;n<e.length;n++)r=e[n],this._cursorMoved&&(r.price=this._currentMovingPoint.price),r.price=o*Math.round(r.price/o),e[n]=r},o.prototype.userEditEnabled=function(){return!0},o.prototype.canBeHidden=function(){return!1},o.prototype.isUserDeletable=function(){return!1},o.prototype.showInObjectTree=function(){return!1},o.prototype.getInputsPropertyPage=function(){return null},e.exports=o},function(e,t,i){"use strict";(function(e){function o(t,n){var r,s,c,d,p,f,_,m,g,v,y=n||new h("linetoolriskreward");a.call(this,t,y),this._properties.addExclusion&&(this._properties.addExclusion("stopLevel"),this._properties.addExclusion("profitLevel")),n.stopLevel||n.profitLevel||(r=t.timeScale().visibleBars(),s=r.firstBar(),c=r.lastBar(),d=t.mainSeries().priceRange(s,c),p=t.mainSeries().priceScale(),p.isLog()&&(f=p.logicalToPrice(d.minValue()),_=p.logicalToPrice(d.maxValue()),d=new e(f,_)),p.isPercent()&&(m=t.mainSeries().firstValue(),f=p.priceRange().convertFromPercent(d.minValue(),m),_=p.priceRange().convertFromPercent(d.maxValue(),m),d=new e(f,_)),d&&!d.isEmpty()&&(g=Math.round(.2*d.length()*t.mainSeries().base()),y.merge({stopLevel:g,profitLevel:g}))),v=this,y.stopLevel.listeners().subscribe(this,this.recalculate),y.stopLevel.listeners().subscribe(null,function(){v.properties().stopPrice._listeners.fire(v.properties().stopPrice)}),y.profitLevel.listeners().subscribe(this,this.recalculate),y.profitLevel.listeners().subscribe(null,function(){v.properties().targetPrice._listeners.fire(v.properties().targetPrice)}),y.addChild("entryPrice",new o.PriceProperty(this,0)),y.addChild("stopPrice",new o.StopPriceProperty(this)),y.addChild("targetPrice",new o.TargetPriceProperty(this)),y.addProperty("riskSize",250),y.addProperty("qty",0),y.addProperty("amountTarget",y.accountSize.value()),y.addProperty("amountStop",y.accountSize.value()),this._riskInPercentsFormatter=new u(2),this._riskInMoneyFormatter=new u,y.risk.subscribe(this,this._recalculateRiskSize),y.accountSize.subscribe(this,this._recalculateRiskSize),y.riskDisplayMode.subscribe(this,this._recalculateRisk),y.riskDisplayMode.subscribe(this,this._recalculateRiskSize),y.entryPrice.subscribe(this,this._recalculateRiskSize),y.stopPrice.subscribe(this,this._recalculateRiskSize),y.profitLevel.subscribe(this,this._recalculateRiskSize),y.stopLevel.subscribe(this,this._recalculateRiskSize),y.qty.subscribe(this,this._recalculateRiskSize),"percents"===y.riskDisplayMode.value()&&y.risk.value()>100&&y.riskDisplayMode.setValueSilently("money"),
this._syncStateExclusions=["entryPrice","stopPrice","targetPrice","riskSize","qty","amountTarget","amountStop","risk","accountSize"],this.version=o.version,this._entryPriceAxisView=new l(this,{colorProperty:y.linecolor,priceProperty:y.entryPrice}),this._stopPriceAxisView=new l(this,{colorProperty:y.stopBackground,priceProperty:y.stopPrice}),this._profitPriceAxisView=new l(this,{colorProperty:y.profitBackground,priceProperty:y.targetPrice}),i.e(11).then(function(e){var t=i(1224).RiskRewardPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}function n(e,t){var i,n;this._constructor="LineToolRiskRewardShort",i=t||new h("linetoolriskrewardshort"),o.call(this,e,i),n=this.properties(),n.entryPrice.subscribe(this,this._recalculateQty),n.stopPrice.subscribe(this,this._recalculateQty),n.riskSize.subscribe(this,this._recalculateQty),n.entryPrice.subscribe(this,this._recalculateAmount),n.profitLevel.subscribe(this,this._recalculateAmount),n.stopLevel.subscribe(this,this._recalculateAmount),n.accountSize.subscribe(this,this._recalculateAmount),n.riskSize.subscribe(this,this._recalculateAmount),n.qty.subscribe(this,this._recalculateAmount)}function r(e,t){var i,n;this._constructor="LineToolRiskRewardLong",i=t||new h("linetoolriskrewardlong"),o.call(this,e,i),n=this.properties(),n.entryPrice.subscribe(this,this._recalculateQty),n.stopPrice.subscribe(this,this._recalculateQty),n.riskSize.subscribe(this,this._recalculateQty),n.entryPrice.subscribe(this,this._recalculateAmount),n.profitLevel.subscribe(this,this._recalculateAmount),n.stopLevel.subscribe(this,this._recalculateAmount),n.accountSize.subscribe(this,this._recalculateAmount),n.riskSize.subscribe(this,this._recalculateAmount),n.qty.subscribe(this,this._recalculateAmount)}var s=i(9).ensureNotNull,a=i(1).LineDataSource,l=i(807).LineToolRiskRewardPriceAxisView,c=i(110),h=i(7).DefaultProperty,u=i(66).NumericFormatter,d=i(2).propertyPages,p=i(652).RiskRewardPointIndex;inherit(o,a),o.prototype.riskFormatter=function(e){return"percents"===e?this._riskInPercentsFormatter:this._riskInMoneyFormatter},o.prototype.getRiskStep=function(e){return"percents"===e?.01:1},o.prototype._roundValue=function(e){return parseFloat(e.toFixed(2))},o.prototype._recalculateRisk=function(){var e=this.properties(),t=e.riskDisplayMode.value(),i=e.riskSize.value(),o=e.accountSize.value(),n=e.risk.value();n="percents"===t?this._roundValue(i/o*100):this._roundValue(o/100*n),this._riskInChange=!0,e.risk.setValue(this.riskFormatter(t).format(n)),this._riskInChange=!1},o.prototype._recalculateRiskSize=function(){var e,t,i,o;this._riskInChange||(e=this.properties(),t=e.risk.value(),i=e.riskDisplayMode.value(),o=e.accountSize.value(),"percents"===i?e.riskSize.setValue(t/100*o):t>o?(e.risk.setValue(o),e.riskSize.setValue(o)):e.riskSize.setValue(t))},o.version=2,o.prototype.i18nCache={title:$.t("Risk/Reward")},o.prototype.lastBarData=function(){var e,t,i,o,n,r=this._model.mainSeries().bars().firstIndex(),a=this._model.mainSeries().bars().lastIndex()
;return null===r||null===a||isNaN(r)||isNaN(a)?null:(e=this.points(),4===e.length?(t=e[p.ActualClose],t.index<r?null:{closePrice:t.price,index:Math.min(a,t.index)}):(i=e[p.Close],i.index<r?null:(o=Math.min(a,i.index),n=s(this._model.mainSeries().bars().valueAt(o)),{closePrice:n[TradingView.CLOSE_PLOT],index:o})))},o.prototype.migrateVersion=function(e,t,i){var o,n,r,s;1===e&&this._points.length>=1&&(o=[],o.push(this._points[0]),n=this._points[0],n={price:n.price,index:n.index+50},o.push(n),this._points[1]&&o.push(this._points[1]),this._points[2]&&o.push(this._points[2]),this._points=o,this._timePoint.length>=1&&(r=[],n=this._timePoint[0],r.push(n),s={price:n.price,time_t:n.time_t,offset:n.offset+50},r.push(s),this._timePoint[1]&&o.push(this._points[1]),this._timePoint[2]&&o.push(this._points[2]),this._timePoint=r))},o.prototype.checkAlert=function(){this.recalculate()},o.prototype.priceAxisViews=function(e,t){return this.isSourceHidden()?null:t!==this.priceScale()||this._model.paneForSource(this)!==e?null:[this._entryPriceAxisView,this._stopPriceAxisView,this._profitPriceAxisView]},o.prototype.updateAllViews=function(){this.isActualSymbol()&&this._properties.visible.value()&&(c.hideAllDrawings().value()&&this.userEditEnabled()||(a.prototype.updateAllViews.call(this),this._entryPriceAxisView.update(),this._stopPriceAxisView.update(),this._profitPriceAxisView.update()))},o.prototype.setPoint=function(e,t){var i,o=this.priceScale();switch(o.isPercent()&&(i=this.ownerSource().firstValue(),t.price=o.priceRange().convertFromPercent(t.price,i)),e){case 0:t.price=this._roundPrice(t.price),o.isPercent()&&(t.price=o.priceRange().convertToPercent(t.price,i)),a.prototype.setPoint.call(this,e,t),this.recalculate();break;case 1:this.isActualSymbol()&&this.properties().stopPrice.setValue(this.preparseStopPrice(t.price));break;case 2:this.isActualSymbol()&&this.properties().targetPrice.setValue(this.preparseProfitPrice(t.price));break;case 3:t.price=this._roundPrice(t.price),o.isPercent()&&(t.price=o.priceRange().convertToPercent(t.price,i)),a.prototype.setPoint.call(this,1,t),this.recalculate()}},o.PriceProperty=function(e,t){a.PointPriceProperty.call(this,e,t)},inherit(o.PriceProperty,a.PointPriceProperty),o.PriceProperty.prototype.setValue=function(e){var t=this._lineSource.points()[this._pointIndex];t.price=parseFloat(e),this._lineSource.setPoint(this._pointIndex,t),this._lineSource.recalculate(),this._lineSource._model.updateSource(this._lineSource),this._listeners.fire(this),this._lineSource.endChanging(),this._lineSource._syncMultichartState()},o.StopPriceProperty=function(e){o.PriceProperty.call(this,e,1)},inherit(o.StopPriceProperty,o.PriceProperty),o.StopPriceProperty.prototype.value=function(){var e=this._lineSource.stopPrice(),t=this._lineSource.ownerSource().formatter(),i=t.parse(t.format(e));return i.price?i.price:i.value},o.StopPriceProperty.prototype.setValue=function(e){var t=Math.round(Math.abs(e-this._lineSource.entryPrice())*this._lineSource._model.mainSeries().base())
;this._lineSource.properties().stopLevel.setValue(t),this._lineSource.properties().stopLevel.listeners().fire(this._lineSource.properties().stopLevel)},o.TargetPriceProperty=function(e){o.PriceProperty.call(this,e,2)},inherit(o.TargetPriceProperty,o.PriceProperty),o.TargetPriceProperty.prototype.value=function(){var e=this._lineSource.profitPrice(),t=this._lineSource.ownerSource().formatter(),i=t.parse(t.format(e));return i.price?i.price:i.value},o.TargetPriceProperty.prototype.setValue=function(e){var t=Math.round(Math.abs(e-this._lineSource.entryPrice())*this._lineSource._model.mainSeries().base());this._lineSource.properties().profitLevel.setValue(t),this._lineSource.properties().profitLevel.listeners().fire(this._lineSource.properties().profitLevel)},o.prototype.pointsCount=function(){return 1},o.prototype.title=function(){return this.i18nCache.title},o.prototype.addPoint=function(e){var t,i;return e.price=this._roundPrice(e.price),a.prototype.addPoint.call(this,e,null,!0),t={price:e.price,index:e.index+50},a.prototype._addPointIntenal.call(this,t,null,!0),i=this.calculateActualEntry(e,t),i&&(a.prototype._addPointIntenal.call(this,i,null,!0),(t=this.findClosePoint(i,t))&&a.prototype._addPointIntenal.call(this,t,null,!0)),this._lastPoint=null,this.normalizePoints(),this.createServerPoints(),!0},o.prototype._roundPrice=function(e){var t=this._model.mainSeries().base();return Math.round(e*t)/t},o.prototype.recalculate=function(){var e,t,i,o,n;this.properties().interval.value()===this._model.mainSeries().interval()&&0!==this.points().length&&(e=this.properties().targetPrice.value(),t=this.properties().stopPrice.value(),i=[this._points[0],this._points[1]],o=this.calculateActualEntry(this.points()[0],this.points()[1]),o&&(i.push(o),(n=this.findClosePoint(o,this.points()[1]))&&i.push(n)),this._points=i,e!==this.properties().targetPrice.value()&&this.properties().targetPrice._listeners.fire(this.properties().targetPrice),t!==this.properties().stopPrice.value()&&this.properties().stopPrice._listeners.fire(this.properties().stopPrice))},o.prototype.start=function(){a.prototype.start.call(this),this.recalculate()},o.prototype.startMoving=function(e){e.price=this._roundPrice(e.price),a.prototype.startMoving.call(this,e)},o.prototype.move=function(e){e.price=this._roundPrice(e.price),a.prototype.move.call(this,e),this.recalculate(),this._entryPriceAxisView.update()},o.prototype.correctPoints=function(e){return!!this.isActualSymbol()&&a.prototype.correctPoints.call(this,[e[0],e[1]])},o.prototype.entryPrice=function(){return this.points()[0].price},o.prototype.findClosePoint=function(e,t){var i,o,n,r=this._model.mainSeries().bars(),a=s(r.firstIndex()),l=Math.max(e.index,a),c=s(r.lastIndex());for(i=l;i<=Math.min(c,t.index);i++)if(o=s(r.valueAt(i)),null!=(n=this.checkStopPrice(o)))return{index:i,price:n};return null},o.prototype.calculateActualEntry=function(e,t){var i,o,n=this._model.mainSeries().bars(),r=s(n.firstIndex()),a=Math.max(e.index,r),l=e.price,c=s(n.lastIndex());for(i=a;i<=Math.min(c,t.index);i++)if(o=s(n.valueAt(i)),
o[TradingView.HIGH_PLOT]>=l&&o[TradingView.LOW_PLOT]<=l)return{index:i,price:l};return null},o.prototype.axisPoints=function(){var e,t,i;if(!this._points[p.ActualEntry])return[];if(e=this._points[p.ActualEntry],t=null,4===this._points.length)t=this._points[p.ActualClose];else{if(!(i=this.lastBarData()))return[];t={index:i.index,price:i.closePrice}}return[e,t]},o.prototype.getInputsPropertyPage=function(){return d.LineToolRiskRewardInputsPropertyPage},o.prototype.getStylesPropertyPage=function(){return d.LineToolRiskRewardStylesPropertyPage},inherit(n,o),n.prototype.i18nCache={title:$.t("Risk/Reward short")},n.prototype._recalculateQty=function(){var e,t,i,o,n;0!==this.points().length&&(e=this.properties(),t=e.entryPrice.value(),i=e.stopPrice.value(),o=e.riskSize.value(),n=Math.floor(o/Math.abs(i-t)),e.qty.setValue(n))},n.prototype._recalculateAmount=function(){var e,t,i,o,n,r,s,a;0!==this.points().length&&(e=this.properties(),t=e.accountSize.value(),i=e.entryPrice.value(),o=e.qty.value(),n=e.stopPrice.value(),r=e.targetPrice.value(),s=this._roundValue(t+(i-r)*o),a=this._roundValue(t-(n-i)*o),e.amountTarget.setValue(s),e.amountStop.setValue(a))},n.prototype.title=function(){return this.i18nCache.title},n.prototype.stopPrice=function(){return this.entryPrice()+this.properties().stopLevel.value()/this._model.mainSeries().base()},n.prototype.profitPrice=function(){return this.entryPrice()-this.properties().profitLevel.value()/this._model.mainSeries().base()},n.prototype.calculatePL=function(e){return this.entryPrice()-e},n.prototype.preparseStopPrice=function(e){e=this._roundPrice(e);var t=this.entryPrice()+1/this._model.mainSeries().base();return Math.max(e,t)},n.prototype.preparseProfitPrice=function(e){e=this._roundPrice(e);var t=this.entryPrice()-1/this._model.mainSeries().base();return Math.min(e,t)},n.prototype.checkStopPrice=function(e){var t=this.stopPrice(),i=this.profitPrice();return e[TradingView.HIGH_PLOT]>=t?this.stopPrice():e[TradingView.LOW_PLOT]<=i?this.profitPrice():null},r.prototype.i18nCache={title:$.t("Risk/Reward long")},inherit(r,o),r.prototype._recalculateQty=function(){var e,t,i,o,n;0!==this.points().length&&(e=this.properties(),t=e.entryPrice.value(),i=e.stopPrice.value(),o=e.riskSize.value(),n=Math.floor(o/Math.abs(t-i)),e.qty.setValue(n))},r.prototype._recalculateAmount=function(){var e,t,i,o,n,r,s,a;0!==this.points().length&&(e=this.properties(),t=e.accountSize.value(),i=e.entryPrice.value(),o=e.qty.value(),n=e.stopPrice.value(),r=e.targetPrice.value(),s=this._roundValue(t+(r-i)*o),a=this._roundValue(t-(i-n)*o),e.amountTarget.setValue(s),e.amountStop.setValue(a))},r.prototype.stopPrice=function(){return this.entryPrice()-this.properties().stopLevel.value()/this._model.mainSeries().base()},r.prototype.profitPrice=function(){return this.entryPrice()+this.properties().profitLevel.value()/this._model.mainSeries().base()},r.prototype.calculatePL=function(e){return e-this.entryPrice()},r.prototype.preparseStopPrice=function(e){e=this._roundPrice(e)
;var t=this.entryPrice()-1/this._model.mainSeries().base();return Math.min(e,t)},r.prototype.preparseProfitPrice=function(e){e=this._roundPrice(e);var t=this.entryPrice()+1/this._model.mainSeries().base();return Math.max(e,t)},r.prototype.checkStopPrice=function(e){var t=this.stopPrice(),i=this.profitPrice();return e[TradingView.LOW_PLOT]<=t?this.stopPrice():e[TradingView.HIGH_PLOT]>=i?this.profitPrice():null},r.prototype.title=function(){return this.i18nCache.title},t.LineToolRiskReward=o,t.LineToolRiskRewardLong=r,t.LineToolRiskRewardShort=n}).call(t,i(79))},function(e,t,i){"use strict";function o(e,t){this._formatter=e,this._maxSize=t||50,this._actualSize=0,this._cache={},this._usageTick=1,this._oldestTick=1,this._tick2Labels={}}o.prototype.format=function(e){var t,i;return this._cache[e]?this._cache[e].string:(this._actualSize===this._maxSize&&(t=this._tick2Labels[this._oldestTick],delete this._tick2Labels[this._oldestTick],delete this._cache[t],this._oldestTick++,this._actualSize--),i=this._formatter(e),this._cache[e]={string:i,tick:this._usageTick},this._tick2Labels[this._usageTick]=e,this._actualSize++,this._usageTick++,i)},e.exports=o},function(e,t,i){"use strict";function o(e,t,i){a.call(this,e,t,i)}function n(e,t,i){o.call(this,e,t,i)}function r(e,t,i){o.call(this,e,t,i)}function s(e,t,i){o.call(this,e,t,i)}var a=i(160).LineStudyMtp;inherit(o,a),o.prototype.pointsCount=function(){return 1},o.prototype._studyInputs=function(){var e,t,i=this.points();return i.length<this.pointsCount()?null:(e=i[0].index,t=this._model.mainSeries().bars().valueAt(e),null===t?null:[this.properties().inputs.displayZoneLabels.value(),1e3*t[TradingView.TIME_PLOT]])},inherit(n,o),n.prototype._mtpStudyId=function(){return"mtp_ew_main"},inherit(r,o),r.prototype._mtpStudyId=function(){return"mtp_ew_major"},inherit(s,o),s.prototype._mtpStudyId=function(){return"mtp_ew_minor"},t.LineStudyMtpElliotWaveMinor=s,t.LineStudyMtpElliotWaveMajor=r,t.LineStudyMtpElliotWaveMain=n,t.LineStudyMtpElliotWave=o},function(e,t,i){"use strict";(function(t){function o(e,i,n){var r,s;this.m_timeScale=e,r=i.rightAxisProperties.state(),r.autoScale=!0,this.m_rightPriceScale=new h(n.properties().scalesProperties,r),s=i.leftAxisProperties.state(),s.autoScale=!0,this.m_leftPriceScale=new h(n.properties().scalesProperties,s),this.m_dataSources=[],this.m_height=0,this.m_width=0,this.m_mainDataSource=null,this._properties=i,this._model=n,this._tagsChanged=new t,this._leftPriceScaleRatioChanged=new t,this._rightPriceScaleRatioChanged=new t,this._leftPriceScaleRatioChanged.subscribe(this,this._mainSeriesPaneScaleRatioOnChange),this._rightPriceScaleRatioChanged.subscribe(this,this._mainSeriesPaneScaleRatioOnChange),this.m_timeScale.barSpacingChanged().subscribe(this,this._recalculatePriceScaleByScaleRatio),this.m_leftPriceScale.internalHeightChanged().subscribe(this,this._recalculatePriceScaleByScaleRatio),this.m_rightPriceScale.internalHeightChanged().subscribe(this,this._recalculatePriceScaleByScaleRatio),
this.m_leftPriceScale.priceRangeChanged().subscribe(this,this._recalculateTimeScaleByLeftScaleRatio),this.m_rightPriceScale.priceRangeChanged().subscribe(this,this._recalculateTimeScaleByRightScaleRatio),this.m_leftPriceScale.priceRangeChanged().subscribe(this,this._onLeftPriceScaleSetMinMaxPriceRange),this.m_rightPriceScale.priceRangeChanged().subscribe(this,this._onRightPriceScaleSetMinMaxPriceRange),this._lastLeftPriceScaleRatio=u(this.m_timeScale,this.m_leftPriceScale),this._lastRightPriceScaleRatio=u(this.m_timeScale,this.m_rightPriceScale),i.topMargin.listeners().subscribe(this,o.prototype._updateMargins),i.bottomMargin.listeners().subscribe(this,o.prototype._updateMargins),this._updateMargins(),this._stretchFactor=o.DEFAULT_STRETCH_FACTOR,this._isInInsertManyDataSourcesState=!1,this._lastLineDataSourceZOrder=null,this._maximized=!1,this._isMainPane=!1}var n=i(486).ExecutionsPositionController,r=i(1).LineDataSource,s=i(79),a=i(52).PriceDataSource,l=i(0).getLogger("Chart.Pane"),c=i(197),h=i(287),u=i(219).scaleRatio,d=i(219).priceRangeByScaleRatio,p=i(219).barSpacingByScaleRatio;o.DEFAULT_STRETCH_FACTOR=1e3,o.PANE_ANIMATION_DURATION=500,o.sortSourcesPreOrdered={"Volume@tv-basicstudies":0,ChartEventsSource:1,"ESD$TV_DIVIDENDS@tv-scripting":2,"ESD$TV_SPLITS@tv-scripting":3,"ESD$TV_EARNINGS@tv-scripting":4,LineToolOrder:5,LineToolPosition:6,LineToolExecution:7},o.prototype.destroy=function(){var e,t;for(this._leftPriceScaleRatioChanged.unsubscribe(this,this._mainSeriesPaneScaleRatioOnChange),this._rightPriceScaleRatioChanged.unsubscribe(this,this._mainSeriesPaneScaleRatioOnChange),this.m_rightPriceScale.priceRangeChanged().unsubscribe(this,this._recalculateTimeScaleByRightScaleRatio),this.m_leftPriceScale.priceRangeChanged().unsubscribe(this,this._recalculateTimeScaleByLeftScaleRatio),this.m_timeScale.barSpacingChanged().unsubscribe(this,this._recalculatePriceScaleByScaleRatio),this.m_leftPriceScale.internalHeightChanged().unsubscribe(this,this._recalculatePriceScaleByScaleRatio),this.m_rightPriceScale.internalHeightChanged().unsubscribe(this,this._recalculatePriceScaleByScaleRatio),this.m_leftPriceScale.priceRangeChanged().unsubscribe(this,this._onLeftPriceScaleSetMinMaxPriceRange),this.m_rightPriceScale.priceRangeChanged().unsubscribe(this,this._onRightPriceScaleSetMinMaxPriceRange),this._properties.topMargin.listeners().unsubscribe(this,o.prototype._updateMargins),this._properties.bottomMargin.listeners().unsubscribe(this,o.prototype._updateMargins),e=0;e<this.m_dataSources.length;e++)t=this.m_dataSources[e],t.destroy&&t.destroy()},o.prototype.setPaneSize=function(e){var t={large:1,medium:.6,small:.3,tiny:.15};if(!t[e])throw Error("Unknown size enum value: "+e);this._stretchFactor=t[e]*o.DEFAULT_STRETCH_FACTOR},o.sortSources=function(e){return e.map(function(e){var t,i,n=e._constructor;return isFunction(e.metaInfo)&&(n=e.metaInfo().id),i=o.sortSourcesPreOrdered[n]||0,t=i>0?1/0:i<0?-1/0:e.zorder(),[e,i,t]}).sort(function(e,t){return e[1]-t[1]||e[2]-t[2]}).map(function(e){return e[0]})},
o.prototype._updateMargins=function(){var e,t,i=.01*this._properties.topMargin.value(),o=.01*this._properties.bottomMargin.value();for(this.m_leftPriceScale.setTopMargin(i),this.m_leftPriceScale.setBottomMargin(o),this.m_rightPriceScale.setTopMargin(i),this.m_rightPriceScale.setBottomMargin(o),e=0;e<this.m_dataSources.length;e++)(t=this.m_dataSources[e])instanceof TradingView.Study&&this.isOverlay(t)&&"Volume"!==t.metaInfo().shortId&&t.priceScale()&&t.priceScale()!==this.m_leftPriceScale&&t.priceScale()===this.m_rightPriceScale&&(t.priceScale().setTopMargin(i),t.priceScale().setBottomMargin(o),this.recalculatePriceScale(t.priceScale()));this.recalculatePriceScale(this.m_leftPriceScale),this.recalculatePriceScale(this.m_rightPriceScale),this.updateAllViews()},o.prototype.model=function(){return this._model},o.prototype.width=function(){return this.m_width},o.prototype.height=function(){return this.m_height},o.prototype.setWidth=function(e){this.m_width=e,this.updateAllViews()},o.prototype.setHeight=function(e){var t,i;for(this.m_height=e,this.m_leftPriceScale.setHeight(e),this.m_rightPriceScale.setHeight(e),t=0;t<this.m_dataSources.length;t++)i=this.m_dataSources[t],this.isOverlay(i)&&i.priceScale()&&i.priceScale().setHeight(e);this.updateAllViews()},o.prototype.leftPriceScale=function(){return this.m_leftPriceScale},o.prototype.rightPriceScale=function(){return this.m_rightPriceScale},o.prototype.timeScale=function(){return this.m_timeScale},o.prototype.dataSources=function(){return this.m_dataSources},o.prototype.isOverlay=function(e){return e._isOverlay},o.prototype._processMainSourceChange=function(){var e,t,i,n,s,l,h;if(null===this.m_mainDataSource)for(t=0;t<this.m_dataSources.length;t++)if(i=this.m_dataSources[t],TradingView.isInherited(i.constructor,a)&&!this.isOverlay(i)&&(!i.properties().linkedToSeries||!i.properties().linkedToSeries.value())&&!(i instanceof c)){this.m_mainDataSource=i,e=!0;break}if(this.m_mainDataSource&&e){for(n=[],t=0;t<this.m_dataSources.length;t++)i=this.m_dataSources[t],TradingView.isInherited(i.constructor,r)&&n.push(i);for(n=o.sortSources(n),t=0;t<n.length;t++)this.move(n[t],this.m_mainDataSource.priceScale(),!0)}else if(!this.m_mainDataSource||this.isOverlay(this.m_mainDataSource)&&0===this.nonOverlayPricesSourcesCount())for(t=0;t<this.m_dataSources.length;t++)if(i=this.m_dataSources[t],TradingView.isInherited(i.constructor,a)&&this.isOverlay(i)&&i.showInObjectTree()){for(this.m_mainDataSource=i,this.m_rightPriceScale.addDataSource(i),i.setPriceScale(this.m_rightPriceScale),s=this._model.children(i),h=0;h<s.length;h++)l=s[h],this.m_rightPriceScale.addDataSource(l),l.setPriceScale(this.m_rightPriceScale),l._isOverlay=!1;this.recalculatePriceScale(this.m_rightPriceScale),i._isOverlay=!1;break}},o.prototype._newZOrderForLineTool=function(){var e,t,i,o=null;for(e=0;e<this.m_dataSources.length;++e)(t=this.m_dataSources[e])instanceof r&&(i=t.zorder(),(null===o||i>o)&&(o=i));return null===o&&(o=this.getZOrderMinMax().minZOrder-1),this.m_dataSources.forEach(function(e){
e.zorder()>o&&e.setZorder(e.zorder()+1)}),o+1},o.prototype.beginInsertManyLineDataSources=function(){this._isInInsertManyDataSourcesState=!0,this._lastLineDataSourceZOrder=null},o.prototype.endInsertManyLineDataSources=function(){this._isInInsertManyDataSourcesState=!1,this._lastLineDataSourceZOrder=null,this.updateAlertLabelsSources()},o.prototype.addDataSource=function(e,t,i){var o;e instanceof r&&!i?(o=null!==this._lastLineDataSourceZOrder?this._lastLineDataSourceZOrder:this._newZOrderForLineTool(),this._isInInsertManyDataSourcesState&&(this._lastLineDataSourceZOrder=o)):o=this.getZOrderMinMax().minZOrder-1,this.insertDataSource(e,t,o)},o.prototype.insertDataSource=function(e,t,i){var n,r,s;this.m_dataSources.push(e),n=!1,e===this._model.mainSeries()?(this.m_mainDataSource=e,n=!0):null!==this.m_mainDataSource||e instanceof c||(this.m_mainDataSource=e,n=!0),e._isOverlay=!1,null!==t||this.canHaveMoreNoScaleSources()||(t=this.rightPriceScale()),null===t&&(r=this.m_rightPriceScale.topMargin(),s=this.m_rightPriceScale.bottomMargin(),e.metaInfo&&"Volume@tv-basicstudies"===e.metaInfo().id&&(r=.75,s=0),t=new h(this._model.properties().scalesProperties),t.setHeight(this.m_height),t.setTopMargin(r),t.setBottomMargin(s),e._isOverlay=!0),t.addDataSource(e,this._isInInsertManyDataSourcesState),e.setPriceScale(t),e.onTagsChanged&&e.onTagsChanged().subscribe(this,o.prototype.onSourceTagsChanged),e.setZorder(i),n&&this._processMainSourceChange(),e instanceof c||this._isInInsertManyDataSourcesState||this.updateAlertLabelsSources(),this._tagsChanged.fire(),TradingView.isInherited(e.constructor,a)&&this.recalculatePriceScale(t),this.invalidateSourcesCache()},o.prototype.removeDataSource=function(e,t){var i,n=this.m_dataSources.indexOf(e);if(-1===n)return void l.logDebug("removeDataSource: invalid data source");e._isOverlay=!1,this.m_dataSources.splice(n,1),e!==this.m_mainDataSource||t||(this.m_mainDataSource=null),i=null,-1!==this.m_leftPriceScale.dataSources().indexOf(e)?(this.m_leftPriceScale.removeDataSource(e),i=this.m_leftPriceScale):-1!==this.m_rightPriceScale.dataSources().indexOf(e)&&(this.m_rightPriceScale.removeDataSource(e),i=this.m_rightPriceScale),e.onTagsChanged&&e.onTagsChanged().unsubscribe(this,o.prototype.onSourceTagsChanged),TradingView.isInherited(e.constructor,a)&&this._processMainSourceChange(),e instanceof c||this._model.mainSeries()!==e||this.updateAlertLabelsSources(),this._tagsChanged.fire(),i&&TradingView.isInherited(e.constructor,a)&&this.recalculatePriceScale(i),this.invalidateSourcesCache()},o.prototype.updateAlertLabelsSources=function(){function e(e){return u.dataSources().filter(function(t){return t instanceof c&&t.data()===e})[0]}var t,i,o,n,r,s,a,l,h,u=this,d=this._model.alertsList();if(d)for(t=this.dataSources().filter(function(e){return e instanceof c}).map(function(e){return e.alert().id}),i=this.dataSources().map(function(e){return e.idForAlert()}),d=d.models,o=d.length-1;o>=0;o--)n=d[o],n.get("extra")&&(r=n.get("extra").alertSeries().id,s=-1!==t.indexOf(n.id),a=-1!==i.indexOf(r),
s&&!a&&(l=e(n))&&this.removeDataSource(l),a&&!s&&(l=new c(this._model,n),h=this.rightPriceScale()||this.leftPriceScale(),this.addDataSource(l,h)))},o.prototype.startScalePrice=function(e,t){e.startScale(t)},o.prototype.scalePriceTo=function(e,t){e.scaleTo(t),this.updateAllViews()},o.prototype.endScalePrice=function(e){e.endScale()},o.prototype.startScrollPrice=function(e,t){e.startScroll(t)},o.prototype.scrollPriceTo=function(e,t){e.scrollTo(t),this.updateAllViews()},o.prototype.endScrollPrice=function(e){e.endScroll()},o.prototype.setPriceAutoScale=function(e,t){if(e.setAutoScale(t),this.timeScale().isEmpty())return void e.setPriceRange(null);this.recalculatePriceScale(e)},o.prototype.restorePriceScaleState=function(e,t){e.restoreState(t),this.updateAllViews()},o.prototype.updateAllViews=function(){for(var e=0;e<this.m_dataSources.length;e++)this.m_dataSources[e].updateAllViews()},o.prototype.defaultPriceScale=function(){var e=this.m_mainDataSource?this.m_mainDataSource.priceScale():this.rightPriceScale();return void 0===e&&(e=new h(this._model.properties().scalesProperties)),e},o.prototype._priceScaleIsPrice=function(e){var t=e.mainSource();return!!t&&(!!TradingView.isInherited(t.constructor,TradingView.Series)||!!TradingView.isInherited(t.constructor,TradingView.Study)&&t.metaInfo().is_price_study)},o.prototype.findSuitableScale=function(e){if(TradingView.isInherited(e.constructor,TradingView.Study)&&"Volume@tv-basicstudies"===e.metaInfo().id)return this.m_rightPriceScale.mainSource()||this.m_leftPriceScale.mainSource()?null:this.m_rightPriceScale;var t=!1;if(TradingView.isInherited(e.constructor,TradingView.Study)?t=e.metaInfo().is_price_study:TradingView.isInherited(e.constructor,TradingView.Series)&&(t=!0),t){if(this._priceScaleIsPrice(this.m_rightPriceScale))return this.m_rightPriceScale;if(this._priceScaleIsPrice(this.m_leftPriceScale))return this.m_leftPriceScale}return this.m_rightPriceScale.mainSource()?this.m_leftPriceScale.mainSource()?null:this.m_leftPriceScale:this.m_rightPriceScale},o.prototype.mainDataSource=function(){return this.m_mainDataSource},o.prototype.recalculatePriceScale=function(e){var t,i;e&&(t=e.sourcesForAutoscale(),e.isAutoScale()&&t&&t.length>0&&!this.timeScale().isEmpty()&&(i=this.timeScale().visibleBars(),e.recalculatePriceRange(i)),e.updatePaneViews())},o.prototype.resetPriceScale=function(e){var t=this.timeScale().visibleBars();e.isLockScale()||e.setAutoScale(!0),e.recalculatePriceRange(t),this.updateAllViews()},o.prototype.recalculate=function(){var e,t;for(this.recalculatePriceScale(this.m_rightPriceScale),this.recalculatePriceScale(this.m_leftPriceScale),e=0;e<this.m_dataSources.length;e++)t=this.m_dataSources[e],!this.isOverlay(t)||t instanceof r||this.recalculatePriceScale(t.priceScale());this.updateAllViews(),this._model.updatePane(this)},o.prototype.isEmpty=function(){return null===this.m_mainDataSource},o.prototype.move=function(e,t,i){var o=this.m_dataSources.slice(),n=null!==t;this.removeDataSource(e,n),this.addDataSource(e,t,i),this.m_dataSources=o,
this.invalidateSourcesCache()},o.prototype.dataSourceForId=function(e){for(var t=0;t<this.m_dataSources.length;t++)if(this.m_dataSources[t].id()===e)return this.m_dataSources[t];return null},o.prototype.priceScaleForSource=function(e){return-1!==this.rightPriceScale().dataSources().indexOf(e)?this.rightPriceScale():-1!==this.leftPriceScale().dataSources().indexOf(e)?this.leftPriceScale():null},o.prototype.sourceById=function(e){for(var t=0;t<this.m_dataSources.length;t++)if(this.m_dataSources[t].id()===e)return this.m_dataSources[t];return null},o.prototype.containsMainSeries=function(){return-1!==this.m_dataSources.indexOf(this._model.mainSeries())},o.prototype.priceScaleByName=function(e){return"left"===e?this.m_leftPriceScale:"right"===e?this.m_rightPriceScale:null},o.prototype.priceScaleName=function(e){return e===this.m_leftPriceScale?"left":e===this.m_rightPriceScale?"right":""},o.prototype.hitTestSources=function(){var e,t,i,o,n;if(this._cachedHitTestSources)return this._cachedHitTestSources;for(e=this.orderedSources(),t=[],i=[this._model.crossHairSource()],o=0;o<e.length;o++)n=e[o],TradingView.isInherited(n.constructor,r)?t.push(n):i.push(n);return this._cachedHitTestSources=i.concat(t),this._cachedHitTestSources},o.prototype.orderedSources=function(){var e,t,i,n;if(this._cachedOrderedSoruces)return this._cachedOrderedSoruces;for(e=[],t=0,i=this.m_dataSources.length;t<i;t++)n=this.m_dataSources[t],TradingView.isInherited(n.constructor,r)&&!n.isActualSymbol()||e.push(n);return e=o.sortSources(e),this._cachedOrderedSoruces=e,e},o.prototype.createDrawingsCaches=function(){n.recreateOrderedByBarsSourcesCache(this)},o.prototype.clearDrawingCaches=function(){n.clearOrderedByBarsSourcesCache()},o.prototype.invalidateSourcesCache=function(){this._cachedOrderedSoruces=null,this._cachedHitTestSources=null,this.m_leftPriceScale.invalidateSourcesCache(),this.m_rightPriceScale.invalidateSourcesCache()},o.prototype.getZOrderMinMax=function(){var e,t,i,o,n=this.orderedSources();if(0===n.length)return{minZOrder:0,maxZOrder:0};for(e=n[0].zorder(),t=n[0].zorder(),i=1;i<n.length;i++)o=n[i],o.zorder()<e&&(e=o.zorder()),o.zorder()>t&&(t=o.zorder());return{minZOrder:e,maxZOrder:t}},o.prototype.isZOrderAvailable=function(e){var t,i;for(t=0;t<this.m_dataSources.length;t++)if(i=this.m_dataSources[t],i.zorder()===e)return!1;return!0},o.prototype.sendToBack=function(e){var t,i=this.getZOrderMinMax().minZOrder,o=Math.abs(e.zorder()-i);for(t=0;t<o;t++)this.changeZOrder(e,-1)},o.prototype.bringToFront=function(e){var t,i=this.getZOrderMinMax().maxZOrder,o=Math.abs(e.zorder()-i);for(t=0;t<o;t++)this.changeZOrder(e,1)},o.prototype.changeZOrder=function(e,t){var i,o,n,r,s,a=this.orderedSources().filter(function(e){return e.showInObjectTree()}),l=0;for(i=0,o=a.length;i<o;i++)if(a[i]===e){l=i;break}l>0&&t<0?(n=a[l-1].zorder(),r=e.zorder(),a[l-1].setZorder(r),e.setZorder(n)):l<a.length-1&&t>0&&(s=a[l+1].zorder(),r=e.zorder(),a[l+1].setZorder(r),e.setZorder(s)),this.invalidateSourcesCache()},o.prototype.onSourceTagsChanged=function(){
this._tagsChanged.fire()},o.prototype.onTagsChanged=function(){return this._tagsChanged},o.prototype.dumpPriceScale=function(e){var t,i,o,n=e.dataSources(),r=[];for(t=0;t<n.length;t++)if(i=n[t].priceAxisViews(this,e))for(o=0;o<i.length;o++)r.push(i[o].dump());return r},o.prototype.dumpViews=function(){var e,t,i,o,n,r={};for(r.paneViews={},e=this.orderedSources(),t=0;t<e.length;t++)if(i=e[t],r.paneViews[t]=[],o=i.paneViews())for(n=0;n<o.size();n++)r.paneViews[t].push(o.item(t).dump());return r.leftAxis=this.dumpPriceScale(this.m_leftPriceScale),r.rightAxis=this.dumpPriceScale(this.m_rightPriceScale),r},o.prototype.clearSeries=function(){for(var e=this.m_dataSources.length-1;e>=0;e--)TradingView.isInherited(this.m_dataSources[e].constructor,TradingView.Series)&&this.m_dataSources.splice(e,1)},o.prototype.nonOverlayPricesSourcesCount=function(){return this.m_dataSources.filter(function(e){return(!e.properties().linkedToSeries||!e.properties().linkedToSeries.value())&&(TradingView.isInherited(e.constructor,a)&&e.showInObjectTree()&&!e.isNoScale())}).length},o.prototype.canHaveMoreNoScaleSources=function(){return this.nonOverlayPricesSourcesCount()>1},o.prototype.actionNoScaleIsEnabled=function(e){return!(!this.isOverlay(e)&&TradingView.isInherited(e.constructor,a))||this.canHaveMoreNoScaleSources()},o.prototype.executionsPositionController=function(){return this._executionsPositionController||(this._executionsPositionController=new n(this,this._model.timeScale())),this._executionsPositionController},o.prototype.isLast=function(){var e=this._model.panes();return e[e.length-1]===this},o.prototype.setMaximized=function(e){this._maximized=e},o.prototype.isMaximized=function(){return this._maximized},o.prototype.isMainPane=function(){var e=this._model.mainSeries(),t=!1;return this.m_dataSources.forEach(function(i){t||(t=i===e)}),this._isMainPane=t,t},o.prototype.properties=function(){return this._properties},o.prototype._mainSourceVisiblePriceRange=function(e){var t=this.m_timeScale.visibleBars();return null!==t?e.mainSource().priceRange(t.firstBar(),t.lastBar()):new s(-.5,.5)},o.prototype.applyLeftPriceScaleRatio=function(e){this._lastLeftPriceScaleRatio!==e&&(this._setNewPriceRangeByScaleRatio(this.m_leftPriceScale,e,this._mainSourceVisiblePriceRange(this.m_leftPriceScale),!0,!0),this._tryToApplyNewLeftPriceScaleRatio(u(this.m_timeScale,this.m_leftPriceScale)))},o.prototype.applyRightPriceScaleRatio=function(e){this._lastRightPriceScaleRatio!==e&&(this._setNewPriceRangeByScaleRatio(this.m_rightPriceScale,e,this._mainSourceVisiblePriceRange(this.m_rightPriceScale),!0,!0),this._tryToApplyNewRightPriceScaleRatio(u(this.m_timeScale,this.m_rightPriceScale)))},o.prototype.isLeftPriceScaleLocked=function(){return!this.m_leftPriceScale.isLog()&&this.m_leftPriceScale.isLockScale()},o.prototype.isRightPriceScaleLocked=function(){return!this.m_rightPriceScale.isLog()&&this.m_rightPriceScale.isLockScale()},o.prototype.leftPriceScaleRatio=function(){
return null===this._lastLeftPriceScaleRatio&&(this._lastLeftPriceScaleRatio=u(this.m_timeScale,this.m_leftPriceScale)),this._lastLeftPriceScaleRatio},o.prototype.rightPriceScaleRatio=function(){return null===this._lastRightPriceScaleRatio&&(this._lastRightPriceScaleRatio=u(this.m_timeScale,this.m_rightPriceScale)),this._lastRightPriceScaleRatio},o.prototype._mainSeriesPaneScaleRatioOnChange=function(){this.isMainPane()&&(this._lastLeftPriceScaleRatio=null,this._lastRightPriceScaleRatio=null,this._model.mainSeriesScaleRatioPropertyOnChanged())},o.prototype._applyOldScaleRatioToPriceScale=function(e,t){if(this._isRecalculatingScales||null===t||void 0===t)return!1;this._isRecalculatingScales=!0,this._setNewPriceRangeByScaleRatio(e,t,this._mainSourceVisiblePriceRange(e)),this._isRecalculatingScales=!1},o.prototype._applyOldScaleRatioToTimeScale=function(e,t){if(this._isRecalculatingScales||null===t||void 0===t)return!1;this._isRecalculatingScales=!0,this._setNewBarSpacingByScaleRatio(e,t),this._isRecalculatingScales=!1},o.prototype._tryToApplyNewLeftPriceScaleRatio=function(e){if(this._lastLeftPriceScaleRatio===e)return!1;this._leftPriceScaleRatioChanged.fire(this._lastLeftPriceScaleRatio,e),this._lastLeftPriceScaleRatio=e},o.prototype._tryToApplyNewRightPriceScaleRatio=function(e){if(this._lastRightPriceScaleRatio===e)return!1;this._rightPriceScaleRatioChanged.fire(this._lastRightPriceScaleRatio,e),this._lastRightPriceScaleRatio=e},o.prototype._recalculatePriceScaleByScaleRatio=function(){this.isMainPane()&&(this.m_leftPriceScale.mainSource()&&(this.isLeftPriceScaleLocked()&&null!==this._lastLeftPriceScaleRatio?this._applyOldScaleRatioToPriceScale(this.m_leftPriceScale,this._lastLeftPriceScaleRatio):this._tryToApplyNewLeftPriceScaleRatio(u(this.m_timeScale,this.m_leftPriceScale))),this.m_rightPriceScale.mainSource()&&(this.isRightPriceScaleLocked()&&null!==this._lastRightPriceScaleRatio?this._applyOldScaleRatioToPriceScale(this.m_rightPriceScale,this._lastRightPriceScaleRatio):this._tryToApplyNewRightPriceScaleRatio(u(this.m_timeScale,this.m_rightPriceScale))))},o.prototype._recalculateTimeScaleByLeftScaleRatio=function(){this.isLeftPriceScaleLocked()&&null!==this._lastLeftPriceScaleRatio?this._applyOldScaleRatioToTimeScale(this.m_leftPriceScale,this._lastLeftPriceScaleRatio):this._tryToApplyNewLeftPriceScaleRatio(u(this.m_timeScale,this.m_leftPriceScale))},o.prototype._recalculateTimeScaleByRightScaleRatio=function(){this.isRightPriceScaleLocked()&&null!==this._lastRightPriceScaleRatio?this._applyOldScaleRatioToTimeScale(this.m_rightPriceScale,this._lastRightPriceScaleRatio):this._tryToApplyNewRightPriceScaleRatio(u(this.m_timeScale,this.m_rightPriceScale))},o.prototype._setNewPriceRangeByScaleRatio=function(e,t,i,o,n){var r=d(e,this.m_timeScale.barSpacing(),t);e.setPriceRange(null!==r?r:i,o,n)},o.prototype._setMinMaxPriceRange=function(e,t){var i=d(e,this.m_timeScale.maxBarSpacing(),t),o=d(e,this.m_timeScale.minBarSpacing(),t);null!==i&&e.setMaxPriceRange(i),null!==o&&e.setMinPriceRange(o)},
o.prototype._onLeftPriceScaleSetMinMaxPriceRange=function(){this._setMinMaxPriceRange(this.m_leftPriceScale,this._lastLeftPriceScaleRatio)},o.prototype._onRightPriceScaleSetMinMaxPriceRange=function(){this._setMinMaxPriceRange(this.m_rightPriceScale,this._lastRightPriceScaleRatio)},o.prototype._setNewBarSpacingByScaleRatio=function(e,t){var i=this.m_timeScale.getValidBarSpacing(p(e,t));this.m_timeScale.isValidBarSpacing(i)&&this.m_timeScale.setBarSpacing(i)},e.exports=o}).call(t,i(4))},function(e,t,i){"use strict";(function(t,o){function n(e,t){if(this.m_base=e,this.m_integralDividers=t,this.m_fractionalDividers=[],p.isBaseDecimal(this.m_base))this.m_fractionalDividers=[2,2.5,2];else for(var i=this.m_base;1!==i;){if(i%2==0)this.m_fractionalDividers.push(2),i/=2;else{if(i%5!=0)throw new RangeError("unexpected base");this.m_fractionalDividers.push(2),this.m_fractionalDividers.push(2.5),i/=5}if(this.m_fractionalDividers.length>100)throw Error("something wrong with base")}}function r(e,t,i){this.m_marks=[],this.m_base=t,this.m_priceScale=e,this._formatter=i,i&&(this._cache=new f(function(e){return i.format(e)})),this._currentFormatBase=0}function s(e){for(var t=1;e*t!==Math.round(e*t);)t*=10;return t}function a(e,i){function n(){var e,t,i=s.m_dataSources;for(e=0;e<i.length;e++)t=i[e],t.priceScaleChanged&&t.priceScaleChanged.fire(s)}this._properties=new t(i||l),this._scalesProperties=e,this.m_height=0,this._internalHeightCache=null,this._internalHeightChanged=new o,this.m_priceRange=null,this._priceRangeChanged=new o,this.m_dataSources=[],this.m_topMargin=0,this.m_bottomMargin=0,this._studyTopMargin=0,this._studyBottomMargin=0,this.m_scrollStartPoint=null,this.m_scaleStartPoint=null,this.m_maxPriceRange=null,this.m_minPriceRange=null,this.m_priceRangeSnapshot=null,this._invalidatedForRange={isValid:!0},this.onMarksChanged=new o,this.m_markBuilder=new r(this,100,new y(100)),this._properties.percentage.listeners().subscribe(this,a.prototype.updateFormatter);var s=this;this._properties.log.listeners().subscribe(null,function(e){var t,i,o,n;s.m_priceRange&&(t=s.m_priceRange,e.value()?(i=new S(s._toLog(t.minValue()),s._toLog(t.maxValue())),s.setPriceRange(i)):(o=s._fromLog(t.minValue()),n=s._fromLog(t.maxValue()),isFinite(o)&&isFinite(n)?(i=new S(o,n),s.setPriceRange(i)):s.properties().autoScale.setValue(!0)))}),this._properties.percentage.listeners().subscribe(null,function(){s._properties.autoScale.setValue(!0)}),this._properties.percentage.listeners().subscribe(null,function(){var e,t,i;s._properties.autoScaleDisabled.setValue(s._properties.percentage.value()),e=s.priceRange(),s.mainSource()&&!s.mainSource().model().timeScale().isEmpty()&&!s.mainSource().data().isEmpty()&&s.isLockScale()&&e&&(t=s.mainSource().model().timeScale().visibleBars(),i=s.mainSource().data().search(t.firstBar(),v.NearestRight).value[TradingView.CLOSE_PLOT],null!=e&&void 0!==i&&(s._properties.percentage.value()?s.setPriceRange(e.convertToPercents(i)):s.setPriceRange(e.convertFromPercents(i))))}),
this._properties.lockScale.listeners().subscribe(null,function(e){var t=e.value();t&&(s._properties.autoScale.setValue(!1),s._properties.percentage.setValue(!1),s._properties.log.setValue(!1)),s._properties.percentageDisabled.setValue(t),s._properties.logDisabled.setValue(t)}),this._sourcesForAutoscale=null,this._sourcesToUpdateViews=null,this._hasSeries=!1,this._properties.percentage.listeners().subscribe(null,n),this._properties.log.listeners().subscribe(null,n),this._properties.listeners().subscribe(null,function(){s.mainSource()&&s.mainSource().model()&&s.mainSource().model().fullUpdate()})}var l,c=i(86),h=c.study_ESD$TV_EARNINGS,u=c.study_ESD$TV_SPLITS,d=c.study_ESD$TV_DIVIDENDS,p=i(36),f=i(284),_=i(1).LineDataSource,m=i(52).PriceDataSource,g=i(145),v=i(24).PlotRowSearchMode,y=i(16).PriceFormatter,b=i(73).PercentageFormatter,S=i(79);n.prototype.TICK_SPAN_EPSILON=1e-9,n.prototype.tickSpan=function(e,t,i){var o,n=0===this.m_base?0:1/this.m_base,r=this.TICK_SPAN_EPSILON,s=Math.pow(10,Math.max(0,Math.ceil(p.log10(e-t)))),a=0;for(a=0,o=this.m_integralDividers[0];s>n+r&&p.greaterOrEqual(s,n,r)&&p.greaterOrEqual(s,i*o,r)&&p.greaterOrEqual(s,1,r);++a,o=this.m_integralDividers[a%this.m_integralDividers.length])s/=o;if(s<=n+r&&(s=n),s=Math.max(1,s),this.m_fractionalDividers.length>0&&p.equal(s,1,r))for(a=0,o=this.m_fractionalDividers[0];s>n+r&&p.greaterOrEqual(s,i*o,r);++a,o=this.m_fractionalDividers[a%this.m_fractionalDividers.length])s/=o;return s},r.prototype.TICK_DENSITY=2.5,r.prototype.base=function(){return this.m_base},r.prototype.setBase=function(e){if(e<0)throw new RangeError("base < 0");this.m_base=e},r.prototype.fontHeight=function(){return this.m_priceScale.fontSize()},r.prototype.tickSpan=function(e,t){var i,o,r,s,a,l,c;if(e<t)throw new RangeError("high < low");return i=this.m_priceScale.height(),o=this.tickMarkHeight(),r=(e-t)*o/i,s=new n(this.m_base,[2,2.5,2]),a=new n(this.m_base,[2,2,2.5]),l=new n(this.m_base,[2.5,2,2]),c=[],c.push(s.tickSpan(e,t,r)),c.push(a.tickSpan(e,t,r)),c.push(l.tickSpan(e,t,r)),p.min(c)},r.prototype.tickMarkHeight=function(){return Math.ceil(this.fontHeight()*this.TICK_DENSITY)},r.prototype.rebuildTickMarks=function(){var e,t,i,o,n,r,a,l,c,h,u,d,p;if(null===this.m_priceScale)throw new TypeError("scale is null");if(this.m_priceScale.isEmpty())return void(this.m_marks=[]);if(e=this.m_priceScale.height(),t=this.m_priceScale.coordinateToPrice(e-1),i=this.m_priceScale.coordinateToPrice(0),o=i>=t?1:-1,n=Math.max(i,t),r=Math.min(i,t),i=n,t=r,i!==t)for(a=this.tickSpan(i,t),l=i%a,l+=l<0?a:0,this.m_marks=[],this._formatter||(c=s(a),this._cache&&this._currentFormatBase===c||(h=new y(c),this._cache=new f(function(e){return h.format(e)}))),u=null,d=i-l;d>t;d-=a)p=this.m_priceScale.priceToCoordinate(d),null!==u&&Math.abs(p-u)<this.tickMarkHeight()||(this.m_marks.push({coord:p,label:this._cache.format(d)}),u=p,this.m_priceScale.isLog()&&(a=this.tickSpan(d*o,t)))},r.prototype.marks=function(){return this.m_marks},l={autoScale:!0,autoScaleDisabled:!1,lockScale:!1,percentage:!1,percentageDisabled:!1,
log:!1,logDisabled:!1,alignLabels:!0},a.prototype.isLog=function(){return this._properties.log.value()},a.prototype.isPercent=function(){return this._properties.percentage.value()},a.prototype.isPercentage=function(){return this._properties.percentage.value()},a.prototype.properties=function(){return this._properties},a.prototype.fontSize=function(){return this._scalesProperties.fontSize.value()},a.prototype.height=function(){return this.m_height},a.prototype.setHeight=function(e){this.m_height!==e&&(this.m_height=e,this._invalidateInternalHeightCache(),this._marksCache=null)},a.prototype.topMargin=function(){return Math.max(this.m_topMargin,this._studyTopMargin)},a.prototype.setTopMargin=function(e){if(!isNumber(e))throw new TypeError("invalid margin");if(e<0||e>30)throw new RangeError("invalid margin");this.m_topMargin!==e&&(this.m_topMargin=e,this._invalidateInternalHeightCache(),this._marksCache=null)},a.prototype.bottomMargin=function(){return Math.max(this.m_bottomMargin,this._studyBottomMargin)},a.prototype.setBottomMargin=function(e){if(!isNumber(e))throw new TypeError("invalid margin");if(e<0||e>30)throw new RangeError("invalid margin");this.m_bottomMargin!==e&&(this.m_bottomMargin=e,this._invalidateInternalHeightCache(),this._marksCache=null)},a.prototype.internalHeight=function(){if(this._internalHeightCache)return this._internalHeightCache;var e=this.height()*(1-this.topMargin()-this.bottomMargin());return this._internalHeightCache=e,e},a.prototype._invalidateInternalHeightCache=function(){this._internalHeightCache=null,this._internalHeightChanged.fire()},a.prototype.internalHeightChanged=function(){return this._internalHeightChanged},a.prototype.priceRange=function(){return this.makeSureItIsValid(),this.m_priceRange},a.prototype.priceRangeChanged=function(){return this._priceRangeChanged},a.prototype.setPriceRange=function(e,t,i){var o,n,r;if(!(e instanceof S))throw new TypeError("incorrect price range");return o=this.m_priceRange,!!(t||null===o&&null!==e||null!==o&&!o.equals(e))&&(n=null!==this.m_maxPriceRange&&this.m_maxPriceRange.containsStrictly(e),r=null!==this.m_minPriceRange&&e.containsStrictly(this.m_minPriceRange),!(this.isLockScale()&&!t&&(n||r))&&(this._marksCache=null,this.m_priceRange=e,void(i||this._priceRangeChanged.fire(o,e))))},a.prototype.isEmpty=function(){return this.makeSureItIsValid(),0===this.m_height||!this.m_priceRange||this.m_priceRange.isEmpty()},a.prototype.invertedCoordinate=function(e){return this.height()-1-e},a._logicalOffset=4,a._coordOffset=1e-4,a.prototype.log10=function(e){return Math.log(e)/Math.log(10)},a.prototype._toLog=function(e){var t,i=Math.abs(e);return i<1e-8?0:(t=this.log10(i+a._coordOffset)+a._logicalOffset,e<0?-t:t)},a.prototype.priceToLogical=function(e){return this.isLog()&&e?this._toLog(e):e},a.prototype._fromLog=function(e){var t,i=Math.abs(e);return i<1e-8?0:(t=Math.pow(10,i-a._logicalOffset)-a._coordOffset,e<0?-t:t)},a.prototype.logicalToPrice=function(e){return this.isLog()?this._fromLog(e):e},a.prototype.priceToCoordinate=function(e,t){var i,o
;return this.makeSureItIsValid(),this.isEmpty()?0:(e=this.priceToLogical(e),i=this.bottomMargin()*this.height()+(this.internalHeight()-1)*(e-this.priceRange().minValue())/(this.priceRange().maxValue()-this.priceRange().minValue()),o=this.invertedCoordinate(i),t?o:Math.round(o))},a.prototype.pricesToCoordinates=function(e){this.pricesToCoordinatesEx(e,function(e){return e.y},function(e,t){e.y=t})},a.prototype.pricesToCoordinatesEx=function(e,t,i){var o,n,r,s,a,l,c,h,u;if(this.makeSureItIsValid(),o=this.bottomMargin()*this.height(),n=this.priceRange().minValue(),r=this.priceRange().maxValue(),s=this.internalHeight()-1,a=s/(r-n),this.isLog())for(l=0;l<e.length;l++)c=t(e[l]),i(e[l],this.priceToLogical(c));for(l=0;l<e.length;l++)c=t(e[l]),TradingView.isNaN(c)||void 0===c||null===c||(h=o+a*(c-n),u=this.m_height-1-h,i(e[l],Math.round(u)))},a.prototype.pointsArrayToCoordinates=function(e){var t,i,o,n,r,s,a,l,c;if(this.makeSureItIsValid(),t=this.bottomMargin()*this.height(),i=this.priceRange().minValue(),o=this.priceRange().maxValue(),n=this.internalHeight()-1,r=n/(o-i),this.isLog())for(s=0;s<e.length;s++)e[s].y=this.priceToLogical(e[s].y);for(s=0;s<e.length;s++)a=e[s].y,TradingView.isNaN(a)||void 0===a||null===a||(l=t+r*(a-i),c=this.m_height-1-l,e[s].y=Math.round(c))},a.prototype.pricesArrayToCoordinates=function(e){var t,i,o,n,r,s,a,l,c;if(this.makeSureItIsValid(),t=this.bottomMargin()*this.height(),i=this.priceRange().minValue(),o=this.priceRange().maxValue(),n=this.internalHeight()-1,r=n/(o-i),this.isLog())for(s=0;s<e.length;s++)e[s]=this.priceToLogical(e[s]);for(s=0;s<e.length;s++)void 0!==(a=e[s])&&null!==a&&(l=t+r*(a-i),c=this.m_height-1-l,e[s]=Math.round(c))},a.prototype.barPricesToCoordinates=function(e){var t,i,o,n,r,s,a,l,c,h,u;if(this.makeSureItIsValid(),t=e,i=this.bottomMargin()*this.height(),o=this.priceRange().minValue(),n=this.priceRange().maxValue(),r=this.internalHeight()-1,s=r/(n-o),this.isLog())for(a=0;a<t.length;a++)t[a]&&(t[a].open=this.priceToLogical(t[a].open),t[a].high=this.priceToLogical(t[a].high),t[a].low=this.priceToLogical(t[a].low),t[a].close=this.priceToLogical(t[a].close),t[a].additionalPrice&&(t[a].additionalPrice=this.priceToLogical(t[a].additionalPrice)));for(a=0;a<t.length;a++)(l=t[a])&&(c=l.open,h=i+s*(c-o),u=this.m_height-1-h,l.open=Math.round(u),c=l.high,h=i+s*(c-o),u=this.m_height-1-h,l.high=Math.round(u),c=l.low,h=i+s*(c-o),u=this.m_height-1-h,l.low=Math.round(u),c=l.close,h=i+s*(c-o),u=this.m_height-1-h,l.close=Math.round(u),l.additionalPrice&&(c=l.additionalPrice,h=i+s*(c-o),u=this.m_height-1-h,l.additionalPrice=Math.round(u)))},a.prototype.coordinateToPrice=function(e){var t,i;return this.makeSureItIsValid(),this.isEmpty()?0:(t=this.invertedCoordinate(e),i=this.priceRange().minValue()+(this.priceRange().maxValue()-this.priceRange().minValue())*((t-this.bottomMargin()*this.height())/(this.internalHeight()-1)),this.logicalToPrice(i))},a.prototype.dataSources=function(){return this.m_dataSources},a.prototype.orderedSources=function(){var e,t,o,n
;if(this._cachedOrderedSoruces)return this._cachedOrderedSoruces;for(e=[],t=0;t<this.m_dataSources.length;t++)o=this.m_dataSources[t],null==o.zorder()&&o.setZorder(t+1),e.push(o);return n=i(286),e=n.sortSources(e),this._cachedOrderedSoruces=e,this._cachedOrderedSoruces},a.prototype.invalidateSourcesCache=function(){this._cachedOrderedSoruces=null},a.prototype.hasSeries=function(){return this._hasSeries},a.prototype.addDataSource=function(e,t){var i,o;(t||-1===this.m_dataSources.indexOf(e))&&(TradingView.isInherited(e.constructor,g)&&(i=e.properties(),!0!==this._hasSeries&&(i.lockScale&&(this._properties.lockScale.setValue(i.lockScale.value()),i.removeProperty("lockScale")),i.pnfStyle.lockScale&&i.pnfStyle.removeProperty("lockScale")),this._hasSeries=!0),o=this,e.properties().visible.listeners().subscribe(null,function(){o._sourcesForAutoscale=null}),this.m_dataSources.push(e),this._mainSource=void 0,this._sourcesForAutoscale=null,this._sourcesToUpdateViews=null,this.updateFormatter(),this.initScaleProperties(),this.invalidateSourcesCache())},a.prototype.initScaleProperties=function(){var e=this.isLockScale();e&&(this.properties().percentage.setValue(!1),this.properties().log.setValue(!1),this.properties().autoScale.setValue(!1)),this.properties().percentageDisabled.setValue(e),this.properties().logDisabled.setValue(e),this.properties().autoScaleDisabled.setValue(this.properties().percentage.value()),this.properties().percentage.value()&&this.properties().log.setValue(!1)},a.prototype.removeDataSource=function(e){var t=this.m_dataSources.indexOf(e);if(-1===t)throw Error("source is not attached to scale");this.m_dataSources.splice(t,1),TradingView.isInherited(e.constructor,g)&&(this._hasSeries=!1),this.mainSource()||this.setAutoScale(!0),this._mainSource=void 0,this._sourcesForAutoscale=null,this._sourcesToUpdateViews=null,this.updateFormatter(),this.invalidateSourcesCache()},a.prototype.isAutoScale=function(){return this._properties.autoScale.value()&&!this.isLockScale()},a.prototype.isLockScale=function(){return this._properties.lockScale.value()},a.prototype.setAutoScale=function(e){this._properties.autoScale.setValue(e)},a.prototype.isScaled=function(){return"number"==typeof this.m_scaleStartPoint},a.prototype.startScale=function(e){this.isPercentage()||null===this.m_scaleStartPoint&&null===this.m_priceRangeSnapshot&&(this.isEmpty()||(this.m_scaleStartPoint=this.m_height-e,this.m_priceRangeSnapshot=this.priceRange().clone()))},a.prototype.marks=function(){return this._marksCache?this._marksCache:(this.m_markBuilder.rebuildTickMarks(),this._marksCache=this.m_markBuilder.marks(),this.onMarksChanged.fire(),this._marksCache)},a.prototype.setMaxPriceRange=function(e){this.m_maxPriceRange=e},a.prototype.setMinPriceRange=function(e){this.m_minPriceRange=e},a.prototype.scaleTo=function(e){var t,i;this.isPercentage()||null!==this.m_scaleStartPoint&&(this.setAutoScale(!1),e=this.m_height-e,e<0&&(e=0),t=(this.m_scaleStartPoint+.2*(this.m_height-1))/(e+.2*(this.m_height-1)),i=this.m_priceRangeSnapshot.clone(),t=Math.max(t,.1),
i.scaleAroundCenter(t),this.setPriceRange(i))},a.prototype.endScale=function(){this.isPercentage()||null!==this.m_scaleStartPoint&&(this.m_scaleStartPoint=null,this.m_priceRangeSnapshot=null)},a.prototype.startScroll=function(e){this.isAutoScale()||null===this.m_scrollStartPoint&&null===this.m_priceRangeSnapshot&&(this.isEmpty()||(this.m_scrollStartPoint=e,this.m_priceRangeSnapshot=this.priceRange().clone()))},a.prototype.scrollTo=function(e){var t,i,o,n;this.isAutoScale()||null!==this.m_scrollStartPoint&&(t=this.priceRange().length()/(this.height()-1),i=e-this.m_scrollStartPoint,o=i*t,n=this.m_priceRangeSnapshot.clone(),n.shift(o),this.setPriceRange(n,!0),this._marksCache=null)},a.prototype.endScroll=function(){this.isAutoScale()||null!==this.m_scrollStartPoint&&(this.m_scrollStartPoint=null,this.m_priceRangeSnapshot=null)},a.prototype.state=function(){var e={};return e.m_priceRange=this.priceRange()?this.priceRange().serialize():null,e.m_isAutoScale=this.isAutoScale(),e.m_isPercentage=this._properties.percentage.value(),e.m_isLog=this._properties.log.value(),e.m_isLockScale=this.isLockScale(),e.m_height=this.m_height,e.m_topMargin=this.m_topMargin,e.m_bottomMargin=this.m_bottomMargin,e},a.prototype.restoreState=function(e){var t=e.m_priceRange;if(void 0===t)throw new TypeError("invalid state");if(void 0===e.m_isAutoScale)throw new TypeError("invalid state");void 0!==e.m_isPercentage&&this._properties.percentage.setValue(e.m_isPercentage),void 0!==e.m_isLog&&this._properties.log.setValue(e.m_isLog),void 0!==e.m_isLockScale&&this._properties.lockScale.setValue(e.m_isLockScale),t?this.setPriceRange(new S(t),!0):this.m_priceRange=null,void 0!==e.m_height&&(this.m_height=Math.max(0,e.m_height)),this.setAutoScale(e.m_isAutoScale),void 0!==e.m_topMargin&&(this.m_topMargin=e.m_topMargin),void 0!==e.m_bottomMargin&&(this.m_bottomMargin=e.m_bottomMargin),this._mainSource=void 0,this._scaleSeriesOnly=!1},a.prototype.mainSource=function(){var e,t;if(void 0!==this._mainSource)return this._mainSource;for(e=void 0,t=0;t<this.m_dataSources.length;t++){if(TradingView.isInherited(this.m_dataSources[t].constructor,g)){e=this.m_dataSources[t];break}!e&&TradingView.isInherited(this.m_dataSources[t].constructor,m)&&(e=this.m_dataSources[t])}return this._mainSource=e,this._mainSource||null},a.prototype.formatter=function(){return this._formatter||this.updateFormatter(),this._formatter},a.prototype.updateFormatter=function(){var e,t;this._marksCache=null,e=this.mainSource(),t=100,e&&(t=e.base()),this._formatter=null,this.properties().percentage.value()?this._formatter=new b:this._formatter=e?e.formatter():new y(100,1),this.m_markBuilder=new r(this,t,this._formatter),this.m_markBuilder.rebuildTickMarks()},a.prototype._recalculateSourcesForAutoscale=function(){var e,t;this._mainSource&&(this._scaleSeriesOnly=this._scalesProperties.scaleSeriesOnly.value()),e=this._scaleSeriesOnly&&this._hasSeries,t=function(t){
return!!(t.properties().visible.value()||t instanceof g)&&(!(t instanceof d||t instanceof u||t instanceof h)&&(e?TradingView.isInherited(t.constructor,g):TradingView.isInherited(t.constructor,m)))},this._sourcesForAutoscale=this.m_dataSources.filter(t)},a.prototype.sourcesForAutoscale=function(){return this._mainSource&&this._scaleSeriesOnly!==this._scalesProperties.scaleSeriesOnly.value()&&(this._sourcesForAutoscale=null),this._sourcesForAutoscale||this._recalculateSourcesForAutoscale(),this._sourcesForAutoscale},a.prototype.recalculatePriceRange=function(e){this._invalidatedForRange={visibleBars:e,isValid:!1}},a.prototype.makeSureItIsValid=function(){this._invalidatedForRange.isValid||(this._invalidatedForRange.isValid=!0,this.recalculatePriceRangeImpl())},a.prototype.recalculatePriceRangeImpl=function(){var e,t,i,o,n,r,s,a,l,c,h=this._invalidatedForRange.visibleBars;if(null!==h){for(e=null,t=this.sourcesForAutoscale(),i=0,o=0,n=0;n<t.length;n++)r=t[n],r.properties().visible.value()&&(s=h.firstBar(),a=h.lastBar(),l=r.priceRange(s,a),null===e&&l?e=l:l&&(e=e.merge(l)),r.margins&&(c=r.margins(),i=Math.max(c[0],i),o=Math.max(c[1],o)));(Math.abs(o-this._studyBottomMargin)>.01||Math.abs(i-this._studyTopMargin)>.01)&&(this._studyBottomMargin=o,this._studyTopMargin=i,this._marksCache=null,this._invalidateInternalHeightCache()),e?(e.minValue()===e.maxValue()&&(e=new S(e.minValue()-.5,e.maxValue()+.5)),this.setPriceRange(e)):this.m_priceRange||this.setPriceRange(new S(-.5,.5)),this._invalidatedForRange.isValid=!0}},a.prototype.sourcesToUpdateViews=function(){var e,t;if(!this._sourcesToUpdateViews)for(this._sourcesToUpdateViews=[],e=0;e<this.m_dataSources.length;e++)t=this.m_dataSources[e],TradingView.isInherited(t.constructor,_)&&!t.isActualSymbol()||this._sourcesToUpdateViews.push(t);return this._sourcesToUpdateViews},a.prototype.updatePaneViews=function(){var e,t=this.sourcesToUpdateViews();for(e=0;e<t.length;e++)t[e].updateAllViews()},a.prototype.priceRangeInPrice=function(){var e,t,i,o,n,r;return this.isEmpty()?null:this.isPercent()?(e=this.mainSource().model().timeScale().visibleBars(),t=this.mainSource().data().search(e.firstBar(),v.NearestRight).value[TradingView.CLOSE_PLOT],i=this.priceRange().convertFromPercents(t),{from:i.minValue(),to:i.maxValue()}):(o=this.height(),n=this.coordinateToPrice(o-1),r=this.coordinateToPrice(0),{from:n,to:r})},e.exports=a}).call(t,i(37),i(4))},,function(e,t,i){"use strict";var o,n,r,s,a,l,c,h;Object.defineProperty(t,"__esModule",{value:!0}),o=i(9),n=i(22),r=i(4),s=i(17),a=i(0),l=a.getLogger("ChartApi.AbstractSession"),c="",h=function(){function e(e,t,i){this._isConnected=new n(!1),this._state=0,this._isConnectForbidden=!1,this._sessionId=c,this._sessionIdChanged=new r,this._chartApi=e,this._sessionPrefix=t,this._shouldReconnectAfterCriticalError=i}return e.prototype.destroy=function(){this._logNormal("Destroying session"),this._isConnected.unsubscribe(),this.disconnect(),this._sessionIdChanged.destroy(),delete this._chartApi,this._logNormal("Session has been destroyed")},
e.prototype.isConnected=function(){return this._isConnected},e.prototype.sessionId=function(){return this._sessionId},e.prototype.onSessionIdChanged=function(){return this._sessionIdChanged},e.prototype.connect=function(){0===this._state&&(o.assert(!this._isConnectForbidden,"Cannot call connect because it is forbidden at this moment"),this._setSessionId(this._sessionPrefix+"_"+s.randomHash()),this._logNormal("Connecting session - wait until transport stay connected"),this._state=1,this._chartApi.createSession(this._sessionId,this))},e.prototype.disconnect=function(){var e=this;0!==this._state&&(o.assert(this._sessionId!==c,"sessionId must not be invalid"),this._logNormal("Disconnecting session..."),this._forbidConnectWhile(function(){e._chartApi.connected()&&e._sendRemoveSession(),e._processDestroyingOnServer()}))},e.prototype.onMessage=function(e){var t,i;switch(e.method){case"connected":return void this._onChartApiConnected();case"disconnected":return void this._onChartApiDisconnected();case"critical_error":return t=e.params[0]+"",i=e.params[1]+"",void this._onCriticalError(t,i)}this._onMessage(e)},e.prototype._getChartApi=function(){return this._chartApi},e.prototype._generateLogMessage=function(e){return"["+this._sessionId+"] "+e},e.prototype._onCriticalError=function(e,t){var i=this;this._logError("Critical error. Reason="+e+", info="+t+"."),this._forbidConnectWhile(function(){i._processDestroyingOnServer()}),this._shouldReconnectAfterCriticalError?(this._logNormal("Reconnecting after critical error..."),this.connect()):this._logNormal("Reconnecting after critical error skipped")},e.prototype._onChartApiConnected=function(){o.assert(1===this._state,"Session is not registered"),this._logNormal("Transport is connected. Creating session on the server"),this._sendCreateSession(),this._state=2,this._isConnected.setValue(!0)},e.prototype._onChartApiDisconnected=function(){var e=this;this._logNormal("Transport is disconnected. Reconnecting..."),this._forbidConnectWhile(function(){e._processDestroyingOnServer()}),this.connect()},e.prototype._setSessionId=function(e){var t=this._sessionId;this._logNormal("Changing sessionId: old="+t+", new="+e),this._sessionId=e,this._sessionIdChanged.fire(e,t)},e.prototype._logNormal=function(e){l.logNormal(this._generateLogMessage(e))},e.prototype._logError=function(e){l.logError(this._generateLogMessage(e))},e.prototype._processDestroyingOnServer=function(){this._state=0,this._isConnected.setValue(!1),this._chartApi.removeSession(this._sessionId),this._setSessionId(c)},e.prototype._forbidConnectWhile=function(e){this._isConnectForbidden=!0,e(),this._isConnectForbidden=!1},e}(),t.Session=h},function(e,t){e.exports=function(){throw Error("define cannot be used indirect")}},function(e,t,i){"use strict";!function(e){e.fn.selectable=function(t){return this.each(function(){var i=e(this);i.css("user-select",t?"text":"none"),i.css("-moz-user-select",t?"text":"-moz-none"),i.css("-webkit-user-select",t?"auto":"none"),(e.browser.msie||e.browser.opera)&&i.attr("unselectable",t?"off":"on")})}
}(jQuery)},function(e,t){},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 79" width="48" height="79"><g fill="none" fill-rule="evenodd" transform="translate(2 2)"><rect width="39" height="70" fill="#5EC8F4" rx="3" x="7" y="7"/><path stroke="#FFF" stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M13 26v5M13 18v1"/><rect width="39" height="70" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" rx="3"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M6 14.004C6 12.897 6.898 12 8.007 12h22.986C32.1 12 33 12.897 33 14.004v42.992A2.006 2.006 0 0 1 30.993 59H8.007A2.006 2.006 0 0 1 6 56.996V14.004zM15.5 6h7"/><ellipse fill="#4A4A4A" cx="19.5" cy="64.5" rx="2.5" ry="2.5"/></g></svg>'},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";function o(e){var t,i;if(3===e.nodeType&&e.data.trim())return e;if(e.childNodes)for(t=e.childNodes.length;t--;)if(i=o(e.childNodes[t]))return i;return null}function n(e,t){var i,o=t.parentNode;o&&(i=t.nextSibling,i?o.insertBefore(e,i):o.appendChild(e))}function r(e){var t,i,r,s=o(e);if(s){if(t=s.data,s.parentNode&&s.parentNode.tagName&&"sup"===s.parentNode.tagName.toLowerCase())return;i=/^([^]*)(\S)(\s*)$/.exec(t),i&&(s.data=i[1],r=document.createElement("sup"),r.textContent=i[2],n(r,s),i[3]&&n(document.createTextNode(i[3]),r))}}Object.defineProperty(t,"__esModule",{value:!0}),t.lastCharSup=r},function(e,t,i){"use strict";function o(e){return e.keys().map(e)}window.TradingView=window.TradingView||{},window.requireAll=o,i(227),i(249),i(291),i(35),i(223),i(10),i(69),i(28),i(434),i(435),i(436),i(96),i(89),i(203),i(26),i(248),i(250),i(48),i(437),i(25),i(150),i(111)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(432);$.fn.lastCharSup=function(){for(var e=0;e<this.size();e++)o.lastCharSup(this.get(e));return this}},function(e,t,i){"use strict";!function(e){function t(){return"-tvtags-"+Math.random().toString(16).replace(/^0./,"")}function i(i,o){function n(e,t){return o.caseInsensitive?e.toLowerCase()===t.toLowerCase():e===t}function r(e){z=e,J.val(e)}function s(e){var t;if(t="string"==typeof e?{str:e}:{str:e.str||"",readonly:!!e.readonly},!t.str)return void L.call(i);V.push(t.str),ee(t.str,function(e){var o,n;for(o=V.length;o--;)if(V[o]===t.str){V.splice(o,1);break}return e?null==(n=P(t.str))?void L.call(i):(a(n),t.str=n,D.push(t),E.call(i),void h()):void L.call(i)})}function a(e){for(var t=D.length;t--;)n(D[t].str,e)&&D.splice(t,1)}function l(){D.splice(0,D.length)}function c(t){var i,n,r=C(t);return r||(r={str:t.str}),"string"==typeof r&&(r={str:r}),i=e(document.createElement("span")).addClass("tvtags-tag"),r.addClass&&i.addClass(r.addClass),t.readonly?i.addClass("tvtags-tag-readonly"):(e(document.createElement("span")).addClass("tvtags-removetag").appendTo(i),i.addClass("tvtags-tag-deletable")),
n="function"==typeof o.tagContentCreator?o.tagContentCreator(r.str):document.createElement("span"),e(n).addClass("tvtags-tag-content").text(r.str).appendTo(i),i}function h(){var t,o,n;if(X.empty(),e.each(D,function(t,i){var o=e(c(i));o.find(".tvtags-removetag").on("click",function(e){a(i.str),h()}),o.appendTo(X)}),t=D.join(A),i.val()!==t){for(o=[],n=0;n<D.length;n++)o.push(D[n].str);i.val(o.join(A)),i.trigger("change")}D.length>0?J.removeAttr("placeholder"):O&&J.attr("placeholder",O)}function u(e){var t,i=e.keyCode,o=!!e.shiftKey;if("keydown"===e.type&&-1!==B.indexOf(i))R[i]=!0;else if("keypress"===e.type&&R[i])return;switch(e.keyCode){case 13:return void(-1!==k.indexOf("\n")&&(e.preventDefault(),v(!0)));case 9:return void(-1!==k.indexOf("\t")&&(e.preventDefault(),v(!0)));case 8:if(0===J.prop("selectionStart")&&0===J.prop("selectionStart"))for(e.preventDefault(),t=D.length;t--;)if(!D[t].readonly)return a(D[t].str),void h();return;case 40:if(!o)return e.preventDefault(),void g(1);break;case 38:if(!o)return e.preventDefault(),void g(-1);break;case 27:return e.preventDefault(),void f()}}function d(){setTimeout(function(){var e=J.val();if(e!==z){if(M<=D.length)return r(z),void T();v(),e=J.val(),N=e.length>(z?z.length:0),z=e,p()}},0)}function p(){var e,t=J.val();null!=j&&t===j?t=W:j=void 0,t!==W&&(F=null,e={},$=e,I(t,function(t){e===$&&(F=t,$=null,_(),m())})),($||F)&&Y.addClass("tvtags-open"),W=t}function f(){Y.removeClass("tvtags-open"),Q.empty(),e(document.createElement("div")).addClass("tvtags-suggest-message").text("Searching...").appendTo(Q),F=null,$=null,H=void 0,W=void 0,U=[],j=void 0}function _(){var t,i,o=J.val();if(Q.empty(),!F)return void f();for(H=void 0,U=e.map(F,function(t,i){var o,s,a,l,c;for("string"==typeof t&&(t={str:t}),o=t.str,s=P(o),a=D.length;a--;)if(n(s,D[a].str))return;for(a=V.length;a--;)if(o===V[a])return;return l=x(t),c=e(document.createElement("div")).addClass("tvtags-suggest"),l.content?c.append(l.content):c.text(l.str),l.addClass&&c.addClass(l.addClass),c.on("mousedown",!1),c.on("click",function(e){r(o),v(!0)}),c.appendTo(Q),{$element:c,str:o}}),t=U.length;t--;)U[t]||U.splice(t,1);for(t=0;t<U.length;t++)if(n(U[t].str,o)){H=t;break}if(N&&null==H&&J.prop("selectionEnd")===o.length&&J.prop("selectionStart")===o.length)for(t=0;t<U.length;t++)if(i=U[t].str,n(i.substr(0,o.length),o)){H=t,r(o+i.substr(o.length)),J.prop("selectionStart",o.length),J.prop("selectionEnd",i.length);break}0===U.length&&(Y.removeClass("tvtags-open"),Q.empty(),e(document.createElement("div")).addClass("tvtags-suggest-message").text("No matches").appendTo(Q))}function m(){var e,t,i,o,n,r=U[H],s=null;r&&(s=r.$element),s!==q&&(q&&q.removeClass("tvtags-suggest-active"),q=s,s&&(s.addClass("tvtags-suggest-active"),e=s.position().top,t=-e,t>0?Q.scrollTop(Q.scrollTop()-t):(i=s.outerHeight(),o=Q.height(),(n=e+i-o)>0&&Q.scrollTop(Q.scrollTop()+n))))}function g(e){if(H=isFinite(H)?(H+U.length+e)%U.length:e<1?U.length-1:0,U[H]){var t=U[H].str;j=t,r(t)}p(),m()}function v(e){for(var t,i,o,n,a,l,c,h=J.val(),u=h;h;){for(t=1/0,i="",
o=k.length;o--;)n=k[o],n instanceof RegExp?(a=n.exec(h))&&((l=a.index)<t||l===t&&a[0].length>i.length)&&(t=l,i=a[0]):-1!==(l=h.indexOf(n))&&(l<t||l===t&&n.length>i.length)&&(t=l,i=n);if(!isFinite(t)){e&&h&&(s(h),h="");break}c=h.substr(0,t),c&&s(h.substr(0,t)),h=h.substr(t+i.length)}h!==u&&r(h),!h&&u&&f()}function y(e){if(!e)return void w();l(),r(e),v(!0),h()}function b(){var e,t=[];for(e=0;e<D.length;e++)t.push(D[e].str);return t}function S(){var e,t=b();for(e=0;e<V.length;e++)t.push(P(V[e]));return t}function w(){r(""),l(),h(),i.val("")}var T,P,C,x,E,L,I,A,k,M,O,D,V,R,B,N,z,F,$,H,W,U,j,q,G,Y,X,K,J,Z,Q,ee=function(e,t){t(!0)};return"function"==typeof o.validate&&(ee=o.validate),T=function(){},"function"==typeof o.onReachLimit&&(T=o.onReachLimit),P=function(e){return e},"function"==typeof o.transform&&(P=o.transform),C=function(e){return{str:e.str,addClass:""}},"function"==typeof o.format&&(C=o.format),x=function(e){return{str:e.str,addClass:""}},"function"==typeof o.formatSuggest&&(x=o.formatSuggest),E=function(){},"function"==typeof o.onTagAdded&&(E=o.onTagAdded),L=function(){},"function"==typeof o.onTagError&&(L=o.onTagError),I=function(e,t){t()},"function"==typeof o.suggest&&(I=o.suggest),A=o.separator||",",k=["\n",","],o.keys&&o.keys.slice?k=o.keys.slice():"string"==typeof o.keys&&(k=o.keys.split("")),M=1/0,o.maxTagsNumber&&(M=parseInt(o.maxTagsNumber)),O=i.attr("placeholder"),D=[],V=[],R={},B=[13,9,8,40,38],N=!1,F=null,$=null,U=[],q=null,G=t(),Y=e(document.createElement("label")).addClass("tvtags-main").attr("for",G).insertAfter(i),o.addClass&&Y.addClass(o.addClass),i.addClass("tvtags-value").appendTo(Y),e(document.createElement("span")).addClass("tvtags-suggestarrow").appendTo(Y).on("mousedown",!1).on("click",function(e){e.preventDefault(),Y.is(".tvtags-open")?f():p()}),X=e(document.createElement("div")).addClass("tvtags-tags").appendTo(Y),K=e(document.createElement("div")).addClass("tvtags-input-container").appendTo(Y),J=e(document.createElement("input")).addClass("tvtags-input").attr("id",G).appendTo(K),O&&J.attr("placeholder",O),o.maxLength&&isFinite(o.maxLength)&&J.attr("maxlength",+o.maxLength),Z=e(document.createElement("div")).addClass("tvtags-suggests-anchor").appendTo(Y),Q=e(document.createElement("div")).addClass("tvtags-suggests").appendTo(Z),Y.data("bridge",{showSuggests:p,setTags:y,getTagsStr:b,getTagsStrWithPending:S,extractTags:v,reset:w}),r(i.val()),v(!0),J.on("focus",function(){Y.addClass("tvtags-focused")}).on("blur",function(){f(),Y.removeClass("tvtags-focused")}).on("keypress keydown",u).on("keypress keydown keyup input copy paste cut",d),Y}function o(t,o){var n;return o=o||{},null==t&&(t="init"),this.each(function(){var n,r,s=e(this);if(s.is("input, textarea")){if(n=s.parent(".tvtags-main"),0===n.size())return void("init"===t&&i(s,o));"showSuggests"===t?(r=n.data("bridge"))&&r.showSuggests():"extractTags"===t?(r=n.data("bridge"))&&r.extractTags(!0):"reset"===t?(r=n.data("bridge"))&&r.reset():"setTags"===t&&(r=n.data("bridge"))&&r.setTags(o.tags)}}),
"tags"===t?(n=e(this).parent(".tvtags-main").data("bridge"),n?n.getTagsStr():void 0):"tagsWithPending"===t?(n=e(this).parent(".tvtags-main").data("bridge"),n?n.getTagsStrWithPending():void 0):this}e.fn.tvtags=o}(jQuery),e.exports=$},function(e,t,i){"use strict";var o=i(0).getLogger("Chart.FollowSymbolsButton");!function(){function e(e){var t,i;return e.symbol?null==e.follow&&Object.prototype.hasOwnProperty.call(h,e.symbol)?h[e.symbol].promise:(t=$.Deferred(),i=t.promise(),h[e.symbol]||(h[e.symbol]={}),h[e.symbol].promise=i,$.post("/social/follow-the-symbol/",e,"json").done(function(i){i.error?t.reject(i):(t.resolve(i),i.symbol!==e.symbol&&(h[i.symbol]=h[e.symbol]))}).fail(function(){t.reject.apply(t,arguments)}),i):$.Deferred().reject().promise()}function t(t,o){return e({symbol:t,follow:+!!o}).done(function(e){var o=e.followTheSymbol;i(t,o)}).promise()}function i(e,t){$(c).each(function(){var i=$(this);i.data("symbol")===e&&l(i,t)})}function n(t){var i,n;return t=t||{},i=t.$button,n=t.symbol,i?(i.addClass("js-follow-symbol tv-button tv-button--success"),n||(n=i.data("symbol"))):i=$('<span class="js-follow-symbol tv-button tv-button--success">'),i.data({"follow-symbol-button-followed-style-class":"i-checked","follow-symbol-button-change-text":void 0===t.changeText||!!t.changeText}),n?(e({symbol:n}).pipe(function(e){i.attr("data-symbol",e.symbol),l(i,e.followTheSymbol)}),i):(o.logError("symbol is required"),i)}function r(){for(var e in h)delete h[e];l($(c),!1)}function s(){r(),$(c).each(function(){var t=$(this).data("symbol");t&&(Object.prototype.hasOwnProperty.call(h,t)||e({symbol:t}).done(function(e){i(e.symbol,e.followTheSymbol)}))})}function a(e){return e.hasClass("js-follow-symbol--followed")}function l(e,t){t=!!t,e.each(function(){var e=$(this);e.toggleClass("js-follow-symbol--followed",t).toggleClass(e.data("follow-symbol-button-followed-style-class")?e.data("follow-symbol-button-followed-style-class"):"i-checked",t)})}var c=".js-follow-symbol",h={};$(document).on("click",c,function(e){var i=$(this),o=i.data("symbol");o&&runOrSignIn(function(){var e=a(i),n=t(o,!e);l(i,!e),n.fail(function(){l(i,e)})},{source:"Follow symbol button"})}),TradingView.FollowSymbols={changeState:t,makeButton:n,request:e},$(function(){loginStateChange.subscribe(TradingView.FollowSymbols,function(e){e||(window.is_authenticated?s():r())})})}()},function(e,t,i){"use strict";(function(e,t,o){var n,r,s,a,l,c,h,u,d;i(241),n=i(63).showSignModal,r=i(261),s=i(43),a=i(36).max,l=i(67).createNoticeDialog,c=i(78).lazyJqueryUI,i(216),h=null,u=function(e){h||(h=l({type:"modal",title:e.title,content:e.content}).open(),h.on("beforeClose",function(){h=null}))},d=window.TVDialogs={modalDialog:null,dialogs:[],messageInterval:null,messageDelay:4e3,NOTIFICATION_ANIMATION_START_OFFSET:"-33px",_constrainDraggableOptionsIfNeeded:function(t){return e.enabled("constraint_dialogs_movement")&&(t.containment=".chart-page"),t},validateHelpers:{isErrorListening:function(e){e.on("keyup.error-checker",d.validateHelpers.isError(e.val(),e))},isError:function(e,t){
return function(){t.val()!==e&&(t.removeClass("error"),t.off("keyup.error-checker"))}},makeValidator:function(e,t,i,o,n){return function(r){var s,a,l;if(e.removeClass("error"),$("._tv-dialog-field-error").hide(),""!==r.errors)if("object"==typeof r.errors){for(s in r.errors)a=e.filter("input[name^="+s+"]"),a.addClass("error").data("error",r.errors[s][0]),d.validateHelpers.isErrorListening(a);l=e.filter(".error").first().focus(),d.showError(l.data("error"),n)}else d.showError($.t("Error:")+r.errors,n);else"function"==typeof o&&o(r,i);t.removeClass("process")}}},applyMQMatcher:function(e){var t,i;e||(e=d.modalDialog),t=function(){d.positionDialog()},window.matchMedia&&(i=["(max-height: 645px)","(max-width: 460px)"].map(function(e){var i=matchMedia(e);return i.addListener(t),i}),e.on("destroy",function(){i.forEach(function(e){e.removeListener(t)})}))},showBrowserExtensionDialog:function(e){var o,n;if(e)return o={chrome:{logo:"/static/images/svg/google-chrome-logo.svg",name:"Google Chrome",href:"https://chrome.google.com/webstore/detail/tradingview-free-quotes-a/ommjfbdmijjlbhlhnnnfkmbnkpnjpipj"}},n=i(211),d.createModalDialog("Browser Extension",{noHeader:!0,width:"730px",content:t.render(n.dialogs.browserExtension,{browser:o[e]})}),d.modalDialog.find(".install-extension, ._tv-dialog-title-close").click(function(e){d.destroy()}),d.positionDialog(),d.modalDialog},showIntervalMismatchDialog:function(e){var t,i,o,n,r=$.t("Interval is not applicable"),s=$("<div></div>"),a=$.t("<p>Only <b>D, W, M</b> intervals are supported for this symbol/exchange. You will be automatically switched to a D interval. Intraday intervals are not available because of exchange policies.</p>");s.append(a),e&&(t=$.t("Do not show this message again"),i='<label class="dialog-trail-checkbox"><input type="checkbox" style="margin: 0; vertical-align: middle;"/> '+t+"</label>",s.append(i),o=s.find("input"),o.attr("checked",e.silentIntervalChange.value()),o.bind("click",function(){e.silentIntervalChange.setValue(this.checked)})),n=l({title:r,content:s}),n.open()},showGoProDialog:function(){s.createGoProDialog(arguments[0]).then(function(e){e.open()})},showSignInDialog:function(e,t){return e&&(t.onSuccess=e),n(t)},goRegistrate:function(e){return i(225).createGoRegistrateDialog(e)},showUpdateAccountDataDialog:function(e){var i=t.render('<form>{{#html}}<p>{{&html}}</p>{{/html}}<input type="text" value="{{value}}"></form>',{value:e.value||"",html:e.html}),o=d.showCustomDialog({title:e.title,html:i,addClass:e.addClass,action:function(t){var i=t.find("._tv-button.ok");return i.addClass("process"),r({name:e.paramName,value:t.find("input[type=text]").val(),onSuccess:e.success,onError:function(i){var o=(i||[]).join(" ");"function"==typeof e.error?e.error(o):d.showError(o||$.t("Unexpected error: can't change profile data"),t)},onComplete:function(){i.removeClass("process")}}),{notClose:!0}},onCancel:e.cancel});return o},showTrialConfirmationDialog:function(e){var t,i,o,n;e=e||{},d.createModalDialog("",{noHeader:!0,addClass:"trialconfirm-dialog ",appearance:"flat"}),
t=d.modalDialog,t.css({zIndex:1e3}),i=t.find("._tv-dialog-content"),i.html('<div class="main"><h3 class="title">'+(e.title||$.t("Trial confirmation dialog"))+'</h3><div class="copy">'+(e.text||$.t("Trial confirmation text"))+'</div><div class="actions-block"><a class="no-button">'+(e.noText||$.t("No, thank you"))+'</a><a class="yes-button">'+$.t("30 Days Free Trial")+"</a></div></div>"),o=i.find(".no-button"),n=i.find(".yes-button"),o.on("click",function(t){if(t.preventDefault(),"function"==typeof e.onCancel)return e.onCancel(t);d.destroy()}),n.on("click",function(t){if("function"==typeof e.onSubmit)return e.onSubmit(t);t.preventDefault()}),d.positionDialog(),d.applyHandlers(null)},showAlertMaintenanceDialog:function(){u({title:$.t("Alerts maintenance"),content:$.t("We are doing some brief daily maintenance. Alerts will be back really soon, thanks for your patience!")})},showAlertTextNotesDialog:function(){u({title:$.t("Oops!"),content:'<div class="tv-text">'+$.t('Text Notes are available only on chart page. Please <a href="/chart/">open a chart</a> and then try again.')+"</div>"})},showNotice:function(e,i,o){var n,r,s,a,l,c;return"object"==typeof i&&(o=i,i=""),o=o||{},n=o.doNotCloseOnBgClick||!1,r=o.html||"",s=o.width||"400px",a={},a.noClose=o.noClose||null,a.addClass=o.modalDialogClass||null,d.createModalDialog(e,a),l=o.centerCaption?"caption-big-center":"caption-big",d.modalDialog.find("._tv-dialog").css("width",s),c=o.customButtonCaption?o.customButtonCaption:$.t("OK"),d.modalDialog.find("._tv-dialog-content").html(t.render('<div class="main"><div class="{{captionClassName}} {{classSuffix}}">{{text}}'+r+'</div>{{^removeOkButton}}<div class="buttons"><input type="button" class="_tv-button ok" value="'+c+'"/></div>{{/removeOkButton}}</div>',{captionClassName:l,classSuffix:o.classSuffix||"",text:i,removeOkButton:o&&o.removeOkButton})),d.modalDialog.find("._tv-button.ok").on("click",function(){d.destroy(),o.onOkButtonClick&&o.onOkButtonClick()}),d.positionDialog(),d.applyHandlers(!1,{doNotCloseOnBgClickIfShadowbox:n,beforeDestroy:o.onClose}),d.modalDialog},showConfirm:function(e,i,o,n,r){var s,a;return r=r||{},r.dontAskSetting&&TVSettings.getBool(r.dontAskSetting)?void o():(s=d.createModalDialog(e,r),d.modalDialog.find("._tv-dialog").css("width",r.customWidth?r.customWidth:"400px"),d.modalDialog.find("._tv-dialog-content").html(t.render('<div class="main"><div class="caption-big">{{{text}}}</div>{{#dontAskSetting}}<input type="checkbox" id="confirm-dialog-checkbox" style="margin: 0; vertical-align: middle;"> <label for="confirm-dialog-checkbox" style="font-size: 11px;">'+$.t("Do not ask again")+'</label>{{/dontAskSetting}}</div><div class="_tv-dialogs-bottom _tv-dialog-center"><input class="_tv-button wide ok" type="button" value="'+$.t("YES")+'" style="margin-right: 10px;"/><input class="_tv-button wide cancel" type="button" value="'+$.t("NO")+'"/></div>',{text:i,dontAskSetting:!!r.dontAskSetting})),r.okButtonText&&d.modalDialog.find(".ok").val(r.okButtonText),
r.cancelButtonText&&d.modalDialog.find(".cancel").val(r.cancelButtonText),a=d.modalDialog.find(".ok"),a.click(function(){r.dontAskSetting&&$("#confirm-dialog-checkbox").is(":checked")&&TVSettings.setValue(r.dontAskSetting,!0),o(),r.manualClose||d.destroy()}),d.modalDialog.find(".cancel").click(function(){n&&n(),r.manualCloseOnCancel||d.destroy()}),d.positionDialog(),d.applyHandlers(s,{processEnterButton:a}),s)},showPrompt:function(e,i,o,n,r){function s(){var e,t=c.val();if(l&&(e=l(t)))return!0===e&&(e=$.t("Wrong value")),void d.showError(e,d.modalDialog);d.destroy(),o&&o(t)}var a,l,c;r=r||{},a=r&&r.defaultValue,l=r&&r.validate,d.createModalDialog(e,r),d.modalDialog.find("._tv-dialog").css("width","400px"),d.modalDialog.find("._tv-dialog-content").html(t.render('<div class="main"><form><div class="caption-big-center slim">{{text}}: <input type="text" name="prompt-value" class="prompt-value"/></div></form></div><div class="_tv-dialogs-bottom _tv-dialog-{{bottomAlign}}"><input class="_tv-button wide ok" type="button" value="'+$.t("OK")+'" style="margin-right: 10px;"/><input class="_tv-button wide cancel" type="button" value="'+$.t("Cancel")+'"/></div>',{text:i,bottomAlign:r.bottomAlign?r.bottomAlign:"center"})),c=d.modalDialog.find('[name="prompt-value"]'),a&&c.val(a),d.modalDialog.find("form").submit(function(e){s(),e.preventDefault()}),d.modalDialog.find(".ok").click(function(e){s(),e.preventDefault()}),d.modalDialog.find(".cancel").click(function(){d.destroy(),n&&n()}),d.positionDialog(),d.applyHandlers(),setTimeout(function(){c.focus().select()},0)},showCustomDialog:function(e){function t(t){var i=e.action(d.modalDialog),o=i&&!i.error,n=void 0===i,r=i&&i.notClose;!o&&!n||r?i.error&&d.showError(i.error):d.destroy(),t.preventDefault()}function i(t){"function"==typeof e.onCancel?e.onCancel():d.destroy()}return d.createModalDialog(e.title||$.t("Dialog"),{addClass:e.addClass||""}),d.modalDialog.find("._tv-dialog").css("width",e.width||"400px"),d.modalDialog.find("._tv-dialog-content").html('<div class="main">'+(e.html||$.t("Content"))+"</div>"+(e.noButtons?"":'<div class="_tv-dialogs-bottom _tv-dialog-center">'+(e.noButtonOk?"":'<input class="_tv-button wide ok" type="button" value="'+$.t("OK")+'" style="margin-right: 10px;"/>')+(e.noButtonCancel?"":'<input class="_tv-button wide cancel" type="button" value="'+$.t("Cancel")+'"/>')+"</div>")),e.okButtonText&&d.modalDialog.find(".ok").val(e.okButtonText),e.cancelButtonText&&d.modalDialog.find(".cancel").val(e.cancelButtonText),d.modalDialog.find(".ok").click(t),d.modalDialog.find("form").submit(t),d.modalDialog.find(".cancel").click(i),d.modalDialog.find("._tv-dialog-title-close").click(i),d.positionDialog(),d.applyHandlers(),d.modalDialog},createModalDialog:function(e,t){var i,o;return t=t||{},null!==d.modalDialog&&d.destroy(),
d.modalDialog=$('<div class="_tv-dialog-shadowbox"><div class="_tv-dialog _tv-dialog-modal'+(t.addClass?" "+t.addClass:"")+'">'+(t.noHeader?"":'<div class="_tv-dialog-title">'+(t.noClose?"":'<a class="_tv-dialog-title-close"></a>')+'<span class="_tv-dialog-title-text">'+e+"</span></div>")+'<div class="_tv-dialog-error"><span class="message"></span></div><div class="_tv-dialog-message"><span class="message"></span></div><div class="_tv-dialog-content"></div></div></div>').appendTo($("body")).data("title",e),d._addMessageCloseButton(d.modalDialog.find("._tv-dialog-error")),d._addMessageCloseButton(d.modalDialog.find("._tv-dialog-message")),t.noShadowBox&&d.modalDialog.addClass("transparent"),t.addClass&&d.modalDialog.addClass(t.addClass),t.width&&d.modalDialog.find("._tv-dialog").css({width:t.width}),t.content&&d.modalDialog.find("._tv-dialog-content").html(t.content),i=$(".fancybox-overlay"),i.length&&(o=i.css("z-index"),$("._tv-dialog-shadowbox").css("z-index",o+1)),t.draggable&&c(d.modalDialog).draggable(d._constrainDraggableOptionsIfNeeded({handle:d.modalDialog.find("._tv-dialog-title")})),t.zIndex&&d.modalDialog.css("z-index",t.zIndex),d.modalDialog},_addMessageCloseButton:function(e){var t=$(i(263)).attr({class:"close",title:$.t("Close message")});e.append(t),$(t).on("click",function(){e.animate({marginTop:d.NOTIFICATION_ANIMATION_START_OFFSET,opacity:0},"fast",function(){e.hide()})})},createDialog:function(e,i){var o,n,r;return d.isOpen(e)?(o=d.get(e),o.find("._tv-dialog-content").html(""),o.data("new",!1),o):(i=i||{},o=$(t.render('<div class="_tv-dialog _tv-dialog-nonmodal {{&addClass}}"><div class="_tv-dialog-title{{#hideTitle}} _tv-dialog-title-hidden{{/hideTitle}}{{#hideCloseCross}} _tv-dialog-title-no-close{{/hideCloseCross}}">{{^hideTitle}} {{&title}}{{/hideTitle}}{{^hideCloseCross}}<a class="_tv-dialog-title-close"></a>{{/hideCloseCross}}</div><div class="_tv-dialog-error"><span class="message"></span></div><div class="_tv-dialog-message"><span class="message"></span></div><div class="_tv-dialog-content"></div></div>',{addClass:i.addClass||"",hideTitle:i.hideTitle,hideCloseCross:i.hideCloseCross,title:e})).appendTo($("body")),d._addMessageCloseButton(o.find("._tv-dialog-error")),d._addMessageCloseButton(o.find("._tv-dialog-message")),i.width&&o.css({width:i.width}),i.content&&o.find("._tv-dialog-content").html(i.content),n=0,n=i.zIndex?i.zIndex:d.dialogs&&d.dialogs.length?a($.map(d.dialogs,function(e){return parseInt((e.dialog||e).css("z-index"),10)}))+1:110,o.css("z-index",n),o.data("new",!0),o.data("title",e),o.data("id",d.dialogs.length+1),d.dialogs.push({title:e,dialog:o,id:d.dialogs.length+1}),r={start:function(e,t){var i,o,n=t.helper.css("z-index"),r=0,s=null;for(i=0;i<d.dialogs.length;i++)(o=d.dialogs[i].dialog.css("z-index"))>r&&(r=o,s=d.dialogs[i].dialog);t.helper.css("z-index",r),s.css("z-index",n)}},i.dragHandle?r.handle=i.dragHandle:i.hideTitle||(r.handle="._tv-dialog-title"),i.dragOptions&&$.extend(r,i.dragOptions),c(o).draggable(d._constrainDraggableOptionsIfNeeded(r)),o)},
positionDialog:function(e,t,i){function o(){n.css("margin-left",-Math.round(n.outerWidth()/2)+"px"),n.css("margin-top",-Math.round(n.outerHeight()/2)+"px")}var n,r,s,a,l,c,h,u;i=i||{},t=t||i.position,e?(r=e.width(),s=e.height(),a=$(window).width(),l=$(window).height(),t&&t.top&&t.left?(h=i.forcePosition?t.left:Math.max(2,Math.min(a-r-4,t.left))+"px",c=i.forcePosition?t.top:Math.max(2,Math.min(l-s-4,t.top))+"px"):t&&t.considerScroll?(u=$(document),h=Math.round((a-r)/2+u.scrollLeft())+"px",c=Math.round((l-s)/2+u.scrollTop())+"px"):(h=Math.round((a-r)/2)+"px",c=Math.round((l-s)/2)+"px"),i.fadeIn?e.css({left:h,top:c}).hide().fadeIn("fast"):i.smooth?e.animate({left:h,top:c}):e.css({left:h,top:c})):(e=d.modalDialog,n=e.find("._tv-dialog"),o(),n.resize(o))},applyHandlers:function(e,t){var i,o,n=!e||e===this.modalDialog;t=t||{},i=n?function(){d.destroy()}:function(){d.destroy(e.data("title"))},e=e||d.modalDialog.find("._tv-dialog"),t.beforeDestroy&&e.on("destroy",t.beforeDestroy),e.find("._tv-dialog-title ._tv-dialog-title-close, .js-dialog-close").on("click",function(e){t.closeHandler&&"function"==typeof t.closeHandler?t.closeHandler(e):i()}),t.doNotCloseOnBgClick||setTimeout(function(){e.on("mousedownoutside",function(o){var n=$(o.target).parents().andSelf();t.doNotCloseOnBgClickIfShadowbox&&n.is("._tv-dialog-shadowbox, .tv-dialog__modal-wrap")||n.is(".colorpicker, .charts-popup-list, ._tv-dialog, .tvcolorpicker-popup, .symbol-edit-popup, .ui-datepicker, .clockpicker-popover, .pac-container")||(e.unbind("mousedownoutside"),i())})},0),e.find('input[type="checkbox"]').change(function(){var e=$(this);e.next("._tv-dialog-checkbox-mask").toggleClass("disabled",e.prop("disabled")).toggleClass("_tv-dialog-checkbox-mask-active",e.is(":checked"))}),o=e.find('input[type="text"]').focus(function(){$(this).addClass("_tv-dialog-content-textactive")}).blur(function(){$(this).removeClass("_tv-dialog-content-textactive")}).first(),Modernizr.touch||t.notFocusFirst||o.focus(),e.find('input[type="password"]').focus(function(){$(this).addClass("_tv-dialog-content-textactive")}).blur(function(){$(this).removeClass("_tv-dialog-content-textactive")}),e.find("textarea").focus(function(){$(this).addClass("_tv-dialog-content-textareaactive")}).blur(function(){$(this).removeClass("_tv-dialog-content-textareaactive")}),e.find("._tv-dialog-checkbox-mask").click(function(){var e=$(this).prev();e.prop("disabled")||(e.prop("checked",!e[0].checked),e.change())}),t.doNotCloseOnEsc||$(window).bind("keyup.hideDialog",function(t){if(27===t.keyCode)return e?d.destroy(e.data("title")):d.destroy(),!1}),t.processEnterButton&&$(window).bind("keyup.confirmAndCloseDialog",function(e){13===e.keyCode&&"textarea"!==e.target.tagName.toLowerCase()&&(t.processEnterButton.click(),$(window).unbind("keyup.confirmAndCloseDialog"))})},showError:function(e,t,i){d.showMessage(e,t,$.extend(i||{},{isError:!0}))},showMessage:function(e,t,i){var o,n,r;t||(t=$("._tv-dialog")),i=i||{},o=i.isError&&"_tv-dialog-error"||"_tv-dialog-message",n=t.find("."+o),r=n.find(".message"),
i.html?r.html("string"==typeof i.html?i.html:e):r.text(e),r.css("width",t.width()).toggleClass("selectable",!!i.selectable),n.toggleClass("with-close",!!i.withClose).css({marginTop:d.NOTIFICATION_ANIMATION_START_OFFSET,opacity:"0"}).show().animate({marginTop:0,opacity:1},"fast"),i.withClose||(i.hideWithoutAnimation?n.on("touchstartoutside mousedownoutside keydownoutside",function e(){n.hide(),n.off("touchstartoutside mousedownoutside keydownoutside",e)}):n.on("touchstartoutside mousedownoutside keydownoutside",function e(){n.animate({marginTop:d.NOTIFICATION_ANIMATION_START_OFFSET,opacity:0},"fast",function(){n.hide()}),n.off("touchstartoutside mousedownoutside keydownoutside",e)}))},showPhoneDialog:function(e){return i(173).phoneDialog(e)},showStocktwitsDialog:function(e,i){return d.showCustomDialog({title:$.t("Send Message to stocktwits"),html:t.render('<textarea style="width: 100%" maxLength="120">{{text}}</textarea>',{text:e}),action:i})},showInvalidFileFormatDialog:function(){var e,t,i;return d.createModalDialog($.t("Invalid data format"),{addClass:"invalid-file-dialog",noClose:!0}),e=d.modalDialog,e.css({zIndex:1e3}),t=d.modalDialog.find("._tv-dialog-content"),t.html('<div class="main"><p>'+$.t('File contains incorrectly formatted data. Please correct the format and try again. Examples: "NYSE:GE,NYSE:F,NASDAQ:MSFT" or "F,GE,MSFT"')+'<div class="_tv-dialog-right"></div></div>'),i=t.find("._tv-dialog-right"),$('<a class="_tv-button wide ok">'+$.t("Close",{context:"input"})+"</a>").appendTo(i).bind("click",function(){e.remove()}),d.positionDialog(),d.applyHandlers(!1,{doNotCloseOnBgClick:!0,doNotCloseOnEsc:!0}),e},isOpen:function(e){for(var t=0;t<d.dialogs.length;t++)if(d.dialogs[t].title===e)return!0;return!1},get:function(e){for(var t=0;t<d.dialogs.length;t++)if(d.dialogs[t].title===e)return d.dialogs[t].dialog},submit:function(e,t){var i=t?$(t):$("._tv-dialog form").first(),o=i.serialize(),n=i.attr("action");$.post(n,o,function(t){void 0!==e&&e(t)},"json")},destroy:function(e,t){if(void 0!==d.chart&&(d.chart.destroy(),delete d.chart),$(window).unbind("keyup.hideDialog"),$(window).unbind("keyup.confirmAndCloseDialog"),e&&"string"==typeof e)for(var i=0;i<d.dialogs.length;i++)d.dialogs[i].title===e&&(d.dialogs[i].dialog.find(".apply-common-tooltip").mouseout(),d.dialogs[i].dialog.trigger("destroy",t),$(document).unbind("mouseup.hideDialog"+d.dialogs[i].id),$("input",d.dialogs[i].dialog).blur(),d.dialogs[i].dialog.remove(),d.dialogs.splice(i,1));else d.modalDialog&&(d.modalDialog.find(".apply-common-tooltip").mouseout(),d.modalDialog.find("._tv-dialog").trigger("destroy"),d.modalDialog.remove(),d.modalDialog=null)},changeTitle:function(e,t){e&&d.dialogs.forEach(function(i){var o,n;if(i.title===e)return o=i.dialog,n=o.find("._tv-dialog-title"),i.title=t,o.data("title",t),n.html(n.html().replace(e,t)),n.find("a").on("click",function(){d.destroy(t)}),!0})},toggleTitleEl:function(e,t){d.dialogs.filter(function(t){return t.title===e}).map(function(e){return e.dialog}).forEach(function(e){
var i=e.find("._tv-dialog-title");"boolean"!=typeof t&&(t=i.hasClass("_tv-dialog-title-hidden")),i.toggleClass("_tv-dialog-title-hidden",!t)})},calcHeight:function(e,t,i){null==i&&(i=20),e+=i;var o=parseInt($("body").height(),10);return e>o&&(t-=e-o,t=Math.max(0,t)),t},resizeContent:function(e,t,i){var o,n;null==i&&(i=20),e+=i,o=parseInt($("body").height(),10),n=t.height(),e>o&&(n-=e-o,n=Math.max(0,n),t.height(n))},resizeContentWidth:function(e,t,i){var o,n;null==i&&(i=20),e+=i,o=parseInt($(window).width(),10),n=t.width(),e>o&&(n-=e-o,n=Math.max(0,n),t.width(n))}},d.ideaDialogs={dialogs:[],add:function(e){d.ideaDialogs.dialogs.push(e)},remove:function(e){d.ideaDialogs.dialogs=$.grep(d.ideaDialogs.dialogs,function(t){return""+t!=""+e})},clear:function(){d.ideaDialogs.dialogs.forEach(function(e){d.destroy(e)})},getDraggableEmptyTitle:function(){return $(document.createElement("div")).css({height:"30px","margin-bottom":"-10px",position:"relative"})}},void 0!==o&&o&&o.exports&&(o.exports=d)}).call(t,i(3),i(21),i(15)(e))},,,,,,,function(e,t,i){"use strict";var o,n,r,s;Object.defineProperty(t,"__esModule",{value:!0}),o=i(9),n=i(24),function(e){e[e.FromLeft=-1]="FromLeft",e[e.FromRight=1]="FromRight"}(r=t.TimePointIndexSearchMode||(t.TimePointIndexSearchMode={})),s=function(){function e(e){this.m_bars=new n.PlotList(e),this.m_nsBars=new n.PlotList(e)}return e.prototype.bars=function(){return this.m_bars},e.prototype.nsBars=function(){return this.m_nsBars},e.prototype.size=function(){return this.m_bars.size()+this.m_nsBars.size()},e.prototype.each=function(e){this.m_bars.each(e),this.m_nsBars.each(e)},e.prototype.clear=function(){this.m_bars.clear(),this.m_nsBars.clear(),this.lastProjectionPrice=void 0},e.prototype.isEmpty=function(){return this.m_bars.isEmpty()&&this.m_nsBars.isEmpty()},e.prototype.first=function(){return this.m_bars.isEmpty()?this.m_nsBars.first():this.m_bars.first()},e.prototype.last=function(){return this.m_nsBars.isEmpty()?this.m_bars.last():this.m_nsBars.last()},e.prototype.search=function(e,t){return this.nsBars().isEmpty()?this.bars().search(e,t):this.bars().isEmpty()?this.nsBars().search(e,t):o.ensureNotNull(this.nsBars().firstIndex())<=e?this.nsBars().search(e,t):this.bars().search(e,t)},e.prototype.valueAt=function(e){var t=this.search(e);return null!==t?t.value:null},e.prototype.plotValueToTimePointIndex=function(e,t,i){var o,n,s,a;if(i===r.FromRight)return o=function(i,o){var n=o[t];return void 0!==n&&null!==n&&e>=n},null!==(n=this.m_bars.findLast(o))?n.index:(s=this.m_nsBars.findLast(o),null!==s?s.index:this.m_bars.firstIndex());if(i===r.FromLeft)return a=function(i,o){var n=o[t];return void 0!==n&&null!==n&&e<=n},null!==(n=this.m_bars.findFirst(a))?n.index:(s=this.m_nsBars.findFirst(a),null!==s?s.index:this.m_bars.lastIndex());throw Error("plotValueToTimePointIndex: unsupported search mode")},e}(),t.SeriesData=s},function(e,t,i){"use strict";function o(){}var n=i(9).assert,r=i(87),s=i(834);o.isValid=function(e){return!(!r[e]&&!s[e])},o.create=function(e,t,i,a,l){var c
;return n(o.isValid(e),"Unknown line tool: "+e),c=r[e]||s[e],"LineToolVbPFixed"===e?new c(t,i,a,l):"LineToolRegressionTrend"===e?new c(t,i,a):["LineStudyMtpAnalysis","LineStudyMtpDecisionPoint","LineStudyMtpRiskReward","LineStudyMtpElliotWaveMain","LineStudyMtpElliotWaveMajor","LineStudyMtpElliotWaveMinor","LineStudyMtpDownWave1OrA","LineStudyMtpDownWave2OrB","LineStudyMtpDownWave3","LineStudyMtpDownWave4","LineStudyMtpDownWave5","LineStudyMtpDownWaveC","LineStudyMtpUpWave1OrA","LineStudyMtpUpWave2OrB","LineStudyMtpUpWave3","LineStudyMtpUpWave4","LineStudyMtpUpWave5","LineStudyMtpUpWaveC"].indexOf(e)>=0?new c(t,i,a):new c(t,i)},e.exports=o},function(e,t,i){"use strict";(function(t){function o(e,t,i){this.pane=e,this._isLeft=o.isLeft(t),this._properties=e.chart().properties().scalesProperties,this._disableContextMenu=!!i,this.jqCell=$(document.createElement("td")),this.jqCell.addClass("chart-markup-table"),this.jqCell.addClass("price-axis"),this.jqCell.width(25),this._dv=$("<div>"),this._dv.css("width","100%"),this._dv.css("height","100%"),this._dv.css("position","relative"),this._dv.css("overflow","hidden"),this._dv.appendTo(this.jqCell),this.canvas=g(this._dv,new v(16,16)),$(this.canvas).css("position","absolute"),$(this.canvas).css("z-order","2"),$(this.canvas).css("left",0),$(this.canvas).css("top",0),this.ctx=this.canvas.getContext("2d"),this.top_canvas=g(this._dv,new v(16,16)),$(this.top_canvas).css("position","absolute"),$(this.top_canvas).css("z-order","1"),$(this.top_canvas).css("left",0),$(this.top_canvas).css("top",0),this.top_ctx=this.top_canvas.getContext("2d"),this._textWidthCache=new s,this.restoreDefaultCursor(),this.update(),y(this.jqCell,this,!0),this.dialog=this.pane.chart().dialog,this.contextMenu=null,this.actions={},this._isVisible=!0,this.priceScale().onMarksChanged.subscribe(this,this.onMarksChanged)}function n(e){var t=new P(e);return function(e,i){return isNumber(i)&&!e.isLog()?t.format(i):""}}var r,s,a,l,c,h,u,d,p,f,_,m,g,v,y,b,S,w,T,P,C;i(998),r=i(1).LineDataSource,s=i(258),a=i(74),l=a.Action,c=a.ActionSeparator,h=i(154),u=i(999),d=i(40),p=i(153),f=p.resizeCanvas,_=p.hardResizeCanvas,m=p.clearRect,g=p.addCanvasTo,v=p.Size,y=i(192).setMouseEventHandler,b=i(20).trackEvent,S=i(259).makeFont,w=i(499).ActionBinder,T=i(0).getLogger("Chart.PriceAxisWidget"),P=i(455).LimitedPrecisionNumericFormatter,o.prototype._BORDER_SIZE=1,o.prototype._OFFSET_SIZE=1,o.prototype._TICK_LENGTH=3,o.LHS=1,o.RHS=2,o.isLeft=function(e){return e===o.LHS||e!==o.RHS&&(T.logDebug("PriceAxisWidget.isLeft: wrong side"),!1)},o.prototype.destroy=function(){this.actions.reset&&this.actions.reset.setActive(!1)},o.prototype.backgroundColor=function(){return this.pane.chart().properties().paneProperties.background.value()},o.prototype.lineColor=function(){return this._properties.lineColor.value()},o.prototype.textColor=function(){return this._properties.textColor.value()},o.prototype.fontSize=function(){return this._properties.fontSize.value()},o.prototype.baseFont=function(){return S(this.fontSize(),"Arial","")},
o.prototype.rendererOptions=function(){var e,t,i;return this._rendererOptions||(this._rendererOptions={isLeft:this._isLeft,width:0,height:0,borderSize:this._BORDER_SIZE,offsetSize:this._OFFSET_SIZE,tickLength:this._TICK_LENGTH,fontSize:NaN,font:"",widthCache:new s,_tickmarksCache:new u(11,"Arial","","#000"),color:""}),e=this._rendererOptions,t=!1,e.color!==this.textColor()&&(e.color=this.textColor(),t=!0),e.fontSize!==this.fontSize()&&(i=this.fontSize(),e.fontSize=i,e.font=this.baseFont(),e.paddingTop=Math.floor(i/4.5),e.paddingBottom=Math.ceil(i/4.5),e.paddingInner=Math.max(Math.ceil(i/3-e.tickLength/2),0),e.paddingOuter=Math.ceil(i/3),e.baselineOffset=Math.round(i/10),e.widthCache.reset(),t=!0),t&&e._tickmarksCache.reset(e.fontSize,"Arial","",e.color),this.size&&(e.width=this.size.w,e.height=this.size.h),this._rendererOptions},o.prototype.mouseDownEvent=function(e){var i,o;!this.priceScale().isEmpty()&&t.enabled("chart_zoom")&&(i=this.pane.chart().model(),o=this.pane.state(),this._mousedown=!0,this.setCursor("ns-resize"),i.startScalePrice(o,this.priceScale(),e.localY))},o.prototype.pressedMouseMoveEvent=function(e){var t=this.pane.chart().model(),i=this.pane.state(),o=this.priceScale();t.scalePriceTo(i,o,e.localY)},o.prototype.mouseDownOutsideEvent=function(e){var t=this.pane.chart().model(),i=this.pane.state(),o=this.priceScale();this._mousedown&&(this._mousedown=!1,t.endScalePrice(i,o),this.restoreDefaultCursor())},o.prototype.mouseUpEvent=function(e){var t=this.pane.chart().model(),i=this.pane.state(),o=this.priceScale();this._mousedown=!1,t.endScalePrice(i,o),this.restoreDefaultCursor()},o.prototype._initActions=function(e){var t,i,n,r,s;this.pane.state()&&(t=this,this.actions.reset=new l({text:$.t("Reset Scale"),shortcut:"Alt+R",statName:"ResetScale"}),this.actions.reset.callbacks().subscribe(this,o.prototype.reset),this.priceScale().mainSource()instanceof TradingView.Series&&(i=function(e){this._undoModel.setLockScaleProperty(this._property,e.checked,t.priceScale().mainSource(),this._undoText)},n=C(this.priceScale(),this.pane.chart().model().model().mainSeriesScaleRatio()),this.actions.setLockScale=new l({text:$.t("Lock Scale")+" "+n,checkable:!0,checked:this.priceScale().isLockScale(),statName:"ToggleLockScale"}),this._lockScaleBinding=new w(this.actions.setLockScale,this.priceScale().properties().lockScale,this.pane.chart().model(),"Lock Scale",i),this._lockScaleBinding.setValue(this.priceScale().isLockScale())),r=function(){this._undoModel.setAutoScaleProperty(this._property,this.value(),t.priceScale(),this._undoText)},this.actions.setAutoScale=new l({text:$.t("Auto Scale"),checkable:!0,checked:!0,statName:"ToggleAutoScale"}),this._autoScaleBinding=new w(this.actions.setAutoScale,this.priceScale().properties().autoScale,this.pane.chart().model(),"Undo AutoScale",r),this._autoScaleBinding.setValue(this._autoScaleBinding.property().value()),this.actions.setPercentage=new l({text:$.t("Percentage",{context:"scale_menu"}),checkable:!0,checked:!1,statName:"TogglePercantage"}),s=function(){
this._undoModel.setPercentProperty(this._property,this.value(),t.priceScale(),this._undoText)},this.actions.setPercentage.binding=new w(this.actions.setPercentage,this.priceScale().properties().percentage,this.pane.chart().model(),"Undo Percentage",s),this.actions.setLog=new l({text:$.t("Log Scale",{context:"scale_menu"}),checkable:!0,checked:!1,statName:"ToggleLogScale"}),this.actions.setLog.binding=new w(this.actions.setLog,this.priceScale().properties().log,this.pane.chart().model(),"Undo Log Scale"),this.actions.alignLabels=new l({text:$.t("No Overlapping Labels",{context:"scale_menu"}),checkable:!0,checked:!1,statName:"TogglePreciseLabels"}),this.actions.alignLabels.binding=new w(this.actions.alignLabels,this.priceScale().properties().alignLabels,this.pane.chart().model(),"No Overlapping Labels"),this._updateScalesActions())},o.prototype._updateScalesActions=function(){var e=this.priceScale(),t=e.mainSource()instanceof TradingView.Series,i=e.mainSource().properties();this.actions.setPercentage.setEnabled(!(e.isLog()||t&&e.isLockScale()||t&&i.style.value()===TradingView.Series.STYLE_PNF)),this.actions.setLog.setEnabled(!(e.isPercent()||t&&e.isLockScale()||t&&i.style.value()===TradingView.Series.STYLE_PNF)),this.actions.setAutoScale.setChecked(e.properties().autoScale.value()),this.actions.setAutoScale.setEnabled(!e.properties().autoScaleDisabled.value())},o.prototype.mouseClickEvent=function(e){},o.prototype.mouseDoubleClickEvent=function(e){this.reset(),b("GUI","Double click price scale")},o.prototype.contextMenuEvent=function(e,i){!this._disableContextMenu&&t.enabled("scales_context_menu")&&this._createContextMenu().show(e)},o.prototype._createContextMenu=function(){return h.createMenu(this.getContextMenuActions(),{statName:"PriceScaleContextMenu"})},o.prototype.getContextMenuActions=function(){var e,i;return this._initActions(),e=this.pane.chart().actions(),i=[],i.push(this.actions.reset,new c,e.showLeftAxis,e.showRightAxis,new c,this.actions.setAutoScale),this.actions.setLockScale&&i.push(this.actions.setLockScale),i.push(e.scaleSeriesOnly,new c,this.actions.setPercentage,this.actions.setLog,new c),t.enabled("fundamental_widget")||i.push(e.showSymbolLabelsAction,e.showSeriesLastValue,e.showSeriesPrevCloseValue),i.push(e.showStudyPlotNamesAction,e.showStudyLastValue),t.enabled("countdown")&&i.push(e.showCountdown),i.push(this.actions.alignLabels),!TradingView.onWidget()&&t.enabled("show_chart_property_page")&&t.enabled("chart_property_page_scales")&&e.scalesProperties&&i.push(new c,e.scalesProperties),i},o.prototype.backLabels=function(e){var t,i,o,n,r,s=[],a=this.priceScale().orderedSources().slice(),l=this.pane,c=l.chart().model(),h=l.state(),u=[],d=c.sourceBeingMoved()||c.lineBeingEdited()||c.lineBeingCreated();if(d&&u.push(d),c.selectedSource()&&u.push(c.selectedSource()),c.hoveredSource()&&u.push(c.hoveredSource()),this.priceScale()===h.defaultPriceScale())for(t=this.pane.state().dataSources(),i=0;i<t.length;i++)h.isOverlay(t[i])&&a.push(t[i]);for(i=0;i<a.length;++i)if(o=a[i],
(e||-1===u.indexOf(o))&&(n=o.priceAxisViews(h,o.priceScale())))for(r=0;r<n.length;r++)s.push(n[r]);return s},o.prototype.optimalWidth=function(){var e,t,i,o,n,r,s;if(!this.isVisible())return 0;if(e=0,t=this.rendererOptions(),this.pane.state())for(i=this.ctx,o=this.priceScale().marks(),i.setFont(this.baseFont()),o.length>0&&(e=Math.max(t.widthCache.measureText(i,o[0].label),t.widthCache.measureText(i,o[o.length-1].label))),n=this.backLabels(!0),r=n.length;r--;)(s=t.widthCache.measureText(i,n[r].text()))>e&&(e=s);return Math.ceil(t.offsetSize+t.borderSize+t.tickLength+t.paddingInner+t.paddingOuter+e)},o.prototype.setSize=function(e){this.size&&this.size.equals(e)||(this.size=e,f(this.canvas,e),f(this.top_canvas,e),this.jqCell.css({width:e.w,"min-width":e.w,height:e.h}))},o.prototype.update=function(){},o.prototype._hightlightBackground=function(e,t,i){var o,n,r,s,a,l,c=t[0].price,h=t[0].price;for(o=1;o<t.length;o++)c=Math.min(c,t[o].price),h=Math.max(h,t[o].price);n=this.priceScale(),n.isPercent()&&i&&(r=i.firstValue(),c=n.priceRange().convertToPercent(c,r),h=n.priceRange().convertToPercent(h,r)),s=this.priceScale().priceToCoordinate(c),a=this.priceScale().priceToCoordinate(h),l="rgba(109, 158, 235, 0.3)",m(e,1,s,this.size.w-1,a-s,l)},o.prototype.drawBackground=function(e){var t,i,o,n;if(m(e,0,0,this.size.w,this.size.h,this.backgroundColor()),t=this.pane.chart().model(),(i=t.model().selectedSource())&&i.priceScale()===this.priceScale()&&i instanceof r){if(o=i.axisPoints(),0===o.length)return;this._hightlightBackground(e,o,i.ownerSource())}n=t.model().crossHairSource(),n.startMeasurePoint()&&this._hightlightBackground(e,n.measurePoints(),this.pane.state().mainDataSource())},o.prototype.drawBorder=function(e){var t,i,o;e.save(),e.fillStyle=this.lineColor(),t=this.size.h,this._isLeft?(e.translate(-.5,-.5),i=this.size.w-this._BORDER_SIZE-1,o=this.size.w-1):(e.translate(.5,-.5),i=0,o=i+this._BORDER_SIZE),e.fillRect(i,0,o-i,t),e.restore()},o.prototype.drawTickMarks=function(e){var t,i,o,n,r,s;if(e.save(),e.strokeStyle=this.lineColor(),t=this.priceScale().marks(),e.fillStyle=this.textColor(),e.setFont(this.baseFont()),i=this,e.translate(-.5,-.5),o=this.rendererOptions(),i._isLeft){for(e.fillStyle=i.lineColor(),e.beginPath(),n=this.size.w-i._OFFSET_SIZE-i._BORDER_SIZE-i._TICK_LENGTH,r=t.length;r--;)e.rect(n,t[r].coord,i._TICK_LENGTH,1);for(e.fill(),r=t.length;r--;)o._tickmarksCache.paintTo(e,t[r].label,n-o.paddingInner,t[r].coord,"right")}else{for(e.fillStyle=i.lineColor(),e.beginPath(),s=i._BORDER_SIZE+i._OFFSET_SIZE,r=t.length;r--;)e.rect(s,t[r].coord,i._TICK_LENGTH,1);for(e.fill(),r=t.length;r--;)o._tickmarksCache.paintTo(e,t[r].label,s+i._TICK_LENGTH+o.paddingInner,t[r].coord,"left")}e.restore()},o.prototype._alignLabels=function(){var e,t,i,o,n,r,s,a,l,c,h,u,d,p,f,_=this.size.h/2,m=[],g=this.priceScale().orderedSources().slice(),v=this.pane,y=v.state(),b=this.rendererOptions();if(this.priceScale()===y.defaultPriceScale())for(e=this.pane.state().dataSources(),t=0;t<e.length;t++)y.isOverlay(e[t])&&g.push(e[t])
;for(i=this.priceScale().mainSource(),t=0;t<g.length;++t)if(o=g[t],n=o.priceAxisViews(y,o.priceScale())){for(r=0;r<n.length;r++)s=n[r],s.isVisible()&&m.push(s);i===o&&n.length>0&&(_=n[0].floatCoordinate())}for(a=m.filter(function(e){return e.floatCoordinate()<=_}),l=m.filter(function(e){return e.floatCoordinate()>_}),a.sort(function(e,t){return t.floatCoordinate()-e.floatCoordinate()}),a.length&&l.length&&l.push(a[0]),l.sort(function(e,t){return e.floatCoordinate()-t.floatCoordinate()}),c=m.length,t=0;t<c;t++)s=m[t],s.setFixedCoordinate(s.coordinate());if(h=this.priceScale().properties(),h.alignLabels&&h.alignLabels.value()){for(t=1;t<a.length;t++)s=a[t],u=a[t-1],d=u.height(b,!1),p=s.coordinate(),f=u.getFixedCoordinate(),(p||f)&&p>f-d&&s.setFixedCoordinate(f-d);for(r=1;r<l.length;r++)s=l[r],u=l[r-1],d=u.height(b,!0),p=s.coordinate(),f=u.getFixedCoordinate(),(p||f)&&p<f+d&&s.setFixedCoordinate(f+d)}},o.prototype.drawBackLabels=function(e){var t,i,o,n;for(e.save(),t=this.backLabels(),i=this.rendererOptions(),o=0;o<t.length;o++)n=t[o],n.renderer().draw(e,i);e.restore()},o.prototype.drawCrossHairLabel=function(e){var t,i,o,n,r,s,a=this.pane.chart().model().model(),l=[],c=a.sourceBeingMoved()||a.lineBeingEdited()||a.lineBeingCreated();for(c&&l.push({source:c,scale:c.priceScale()}),a.selectedSource()&&l.push({source:a.selectedSource(),scale:a.selectedSource().priceScale()}),a.hoveredSource()&&l.push({source:a.hoveredSource(),scale:a.hoveredSource().priceScale()}),l.push({source:a.crossHairSource(),scale:this.priceScale()}),t=this.pane.state(),i=0;i<l.length;i++)if(o=l[i],n=o.source.priceAxisViews(t,o.scale))for(r=0;r<n.length;r++)s=n[r],e.save(),s.renderer().draw(e,this.rendererOptions()),e.restore()},o.prototype.priceScale=function(){var e=this.pane.state(),t=[];return t=this._isLeft?[e.leftPriceScale(),e.rightPriceScale()]:[e.rightPriceScale(),e.leftPriceScale()],null===t[0].mainSource()?null===t[1].mainSource()?t[0]:t[1]:t[0]},o.prototype.isVisible=function(){return this._isVisible},o.prototype.setVisible=function(e){(e=!!e)!==this._isVisible&&(e?this.jqCell.css("display","table-cell"):this.jqCell.css("display","none"),this._isVisible=e)},o.prototype.setAutoScale=function(e){var t=this.pane.state,i=this.priceScale();this.pane.chart().model().setPriceAutoScale(t,i,e)},o.prototype.reset=function(){var e=this.pane.state(),t=this.priceScale();this.pane.chart().model().resetPriceScale(e,t)},o.prototype.hardResetCanvas=function(){this.size&&(_(this.canvas,this.size),_(this.top_canvas,this.size))},o.prototype.paint=function(e){this._isVisible&&e&&(e===d.UPDATE_CURSOR_ONLY?(this.top_ctx.clearRect(-.5,-.5,this.size.w,this.size.h),this.drawCrossHairLabel(this.top_ctx)):(this._alignLabels(),this.drawBackground(this.ctx),this.drawBorder(this.ctx),this.pane.state()&&(this.drawTickMarks(this.ctx),this.drawBackLabels(this.ctx),this.top_ctx.clearRect(-.5,-.5,this.size.w,this.size.h),this.drawCrossHairLabel(this.top_ctx))))},o.prototype.restoreDefaultCursor=function(){this.setCursor("")},o.prototype.setCursor=function(e){var t=""
;"grabbing"!==e&&"ns-resize"!==e||(t="price-axis--cursor-"+e),this._currentCursorClassName!==t&&(this._currentCursorClassName&&this.jqCell.removeClass(this._currentCursorClassName),t&&this.jqCell.addClass(t),this._currentCursorClassName=t,this.jqCell.css("cursor"))},o.prototype.image=function(){var e={};return e.content=this.canvas.toDataURL(),e.contentWidth=this.size.w,e.contentHeight=this.size.h,e},o.prototype.onMarksChanged=function(){var e,t=this.optimalWidth();this._prevOptimalWidth<t&&(e=this,this.updateTimeout||(this.updateTimeout=setTimeout(function(){e.pane&&e.pane.chart&&e.pane.chart()&&e.pane.chart().model().model().fullUpdate(),e.updateTimeout=null},100))),this._prevOptimalWidth=t},C=n(7),e.exports={PriceAxisWidget:o,scaleRatioForContextMenuTransformer:n}}).call(t,i(3))},function(e,t,i){"use strict";function o(e,t){var i,o;return void 0===t&&(t=!1),i=window.pro,o=(e||"").toLowerCase(),i.getIDCExchanges(t).includes(o)}Object.defineProperty(t,"__esModule",{value:!0}),t.isIDCExchange=o},,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DELAY_NOT_AVAILABLE="DELAY_NOT_AVAILABLE",t.NEED_SIGN_AGREEMENT="NEED_SIGN_AGREEMENT",t.NEED_ADD_SERVICE="NEED_ADD_SERVICE"},,,,function(e,t){},function(e,t,i){"use strict";(function(t){function o(e,i){var n,s,a=TVSettings.getValue("PublishedChartsTimeline.filter","all");is_authenticated||(a=o.FILTER_NONE),n=new t({filter:a}),r.call(this,e,n),this._currentRange=null,this._properties.visible.listeners().subscribe(this,function(e){this._getData(this._currentRange)}),this._properties.filter.listeners().subscribe(this,function(e){TVSettings.setValue("PublishedChartsTimeline.filter",e.value()),this.clearMarks(),this._getData(this._currentRange)}),s=e._undoModel._chartWidget,this._containsData=s._containsData,this._containsData&&this._properties.visible.setValue(!0),this.setUserEditEnabled(!1),this._onIdeaClickedHandler=i}function n(e){a.call(this)}var r=i(187).BarsMarksContainer,s=i(193).BarsMarksContainerRenderer,a=i(193).BarMarkTooltip,l=i(49),c=i(120),h=i(20).trackEvent,u=i(0).getLogger("Chart.PublishedChartsTimeLine"),d=i(64).fetch;o.FILTER_NONE="all",o.FILTER_FOLLOWING="following",o.FILTER_PRIVATE="private",inherit(o,r),o.prototype._initialize=function(e){l&&(this._boundOnMessage=this._onMessage.bind(this),l.on("ideas",this._boundOnMessage),l.on("ideas.post",this._boundOnMessage))},o.prototype._constructor="PublishedChartsTimeline",o.prototype._plateViewData=function(e){return{title:e.title,user_id:e.user__id,username:e.username,suggested:e.is_hot,mine:null!=window.user&&e.user__id===window.user.id,public:e.is_public}},o.prototype.paneViews=function(e){return this._model.isInReplay()?[]:r.prototype.paneViews.call(this,e)},o.prototype.showIdea=function(e,t){var i,o=this._marks[e];return o?(h("GUI","View published idea"),t&&h("GUI","Ideas navigation arrow"),TradingView.onWidget()||this._containsData?(i=o.published_chart_url||"/v/"+o.image_url+"/",i=this._getBaseUrl()+i,void window.open(i)):void this._onIdeaClickedHandler({chartId:o.image_url,
chartName:o.name,publishedUrl:o.published_chart_url,shortSymbol:o.short_name})):void u.logDebug("PublishedChartsTimeline.showIdea: unexpected published chart id")},o.prototype._getBaseUrl=function(){var e,t;return TradingView.onWidget()&&window.locale_domains?(e=window.locale||"en",t=window.locale_domains[e]?window.locale_domains[e]:window.locale_domains.en,t?document.location.protocol+"//"+t:""):""},o.prototype.onClicked=function(){this.showIdea(this._model.lastHittestData().id)},o.prototype.state=function(e){var t={type:"BarsMarksContainer",id:this.id(),zorder:this._zOrder,pinnedTooltips:this.pinnedTooltips};return e&&(t.marks=this.getPublishedPlates()),t},o.prototype.asyncState=function(e){var t=$.Deferred(),i=this;return!this._properties.visible.value()&&e?this._getData(this._currentRange,!0).then(function(){t.resolve(i.state(e))}):t.resolve(i.state(e)),t.promise()},o.prototype.restoreData=function(e,t){null!=this.pinnedTooltips&&(this.pinnedTooltips=e.pinnedTooltips),t&&null!=e.marks&&(this._marks=e.marks)},o.prototype._getData=function(e,t){var i,o,n,r,s=this._model.mainSeries().properties(),a=this._model.mainSeries().symbolInfo();if(this._currentRange=e,a&&(this._properties.visible.value()||t))return i=a.base_name.length>1?a.base_name:[a.pro_name],o=this.roundRange(this._rangeDifference(e)),i=c(i),i=i.sort(function(e,t){return e-t}),n={interval:s.interval.value(),legs:JSON.stringify(i),startTickmark:o.start,endTickmark:o.end,filter:this._properties.filter.value()},r=$.ajax("/charttimeline/",{type:"POST",data:n,dataType:"json"}).done(function(t){t.forEach(function(e){this._marks[e.id]=e},this),this._loadedRange=this._rangeUnion(e,this._loadedRange);var i=this._requests.indexOf(r);~i&&this._requests.splice(i,1),this.onNeedRepaint.fire()}.bind(this)),this._requests.push(r),r},o.prototype._onMessage=function(e){var t,i,o,n;this._containsData||(t=this._model.mainSeries(),i=t.symbolInfo(),(o=i&&i.base_name)&&(n=t.properties(),e.interval===n.interval.value()&&~o.indexOf(e.pro_symbol)&&(this._marks[e.id]=e,this.onNeedRepaint.fire())))},o.prototype._createTooltip=function(){return new n},o.prototype.updateDotData=function(e,t){return t.mine=e.mine,t.public=e.public,t.direction=e.direction,t},o.prototype.updatePlateData=function(e,t){return t.title=e.title,t.user_id=e.user_id,t.username=e.username,t.barWidth=this.barWidth(),t},o.prototype.destroy=function(){this._onIdeaClickedHandler=null,this._boundOnMessage&&(l.off("ideas",this._boundOnMessage),l.off("ideas.post",this._boundOnMessage),this._boundOnMessage=void 0),r.prototype.destroy.call(this)},inherit(n,a),n.prototype._createLayout=function(){this._layout=$('<div class="published-charts-tooltip"></div>'),this._layout_avatar=$('<div class="avatar"><img></div>').appendTo(this._layout),this._layout_text=$('<div class="text"></div>').appendTo(this._layout),this._layout_username=$('<div class="username">'+$.t("by __username__",{username:"<b></b>"})+"</div>").appendTo(this._layout),this._layout_pin=$('<div class="pin"></div>').appendTo(this._layout),
this._picture_fetched=!1;var e=this;this._layout_pin.click(function(){e.plateData.pinned=!e.plateData.pinned,e.source.pinTooltip(e.plateData.id,e.plateData.pinned),e._layout_pin.toggleClass("pinned",e.plateData.pinned)}),this._layout_text.click(function(){e.source.showIdea(e.plateData.id)})},n.prototype._updatePlate=function(e){this.plateData=e,this._layout.removeClass(s.THEMES.join(" ")).addClass(e.themeName),this._layout_text.text(e.title),this._layout_username.find("b").text(e.username),this._layout_pin.toggleClass("pinned",e.pinned),this._picture_fetched||(this._picture_fetched=!0,d("/user-info-json/{0}/".format(e.user_id)).then(function(e){return e.json()}).then(function(t){this._layout_avatar.find("img").attr("alt",e.username),this._layout_avatar.find("img").attr("src",t.user_data.mid_picture_url)}.bind(this)))},e.exports=o}).call(t,i(37))},function(e,t,i){"use strict";var o,n;Object.defineProperty(t,"__esModule",{value:!0}),o=i(10),n=function(){function e(e){void 0===e&&(e=1),this._precision=e}return e.prototype.format=function(e){var t,i;return o.isNumber(e)||(e=parseFloat(e)),t=e.toFixed(this._precision),i=Math.pow(10,-this._precision),Math.max(parseFloat(t),i)+""},e}(),t.LimitedPrecisionNumericFormatter=n},function(e,t,i){"use strict";var o,n,r;Object.defineProperty(t,"__esModule",{value:!0}),o=i(9),n=i(22),i(13),r=function(){function e(e){var t=this;this._alive=new n,this._body=new n,this._width=new n,this._height=new n,this._fullscreen=new n,this._detachable=new n,this._visible=new n,this._availWidth=new n,this._availHeight=new n,this._owner=new n,this._ownersStack=[],this.owner=this._owner.readonly(),this._bridge={alive:this._alive.readonly(),body:this._body.readonly(),width:this._width.readonly(),height:this._height.readonly(),fullscreen:this._fullscreen.readonly(),detachable:this._detachable.readonly(),visible:this._visible.readonly(),availWidth:this._availWidth.readonly(),availHeight:this._availHeight.readonly(),remove:function(){var e=t._owner.value();e&&e.remove&&e.remove()},negotiateWidth:function(e){var i=t._owner.value();i&&i.negotiateWidth&&i.negotiateWidth(e)},negotiateHeight:function(e){var i=t._owner.value();i&&i.negotiateHeight&&i.negotiateHeight(e)},requestFullscreen:function(){var e=t._owner.value();e&&e.requestFullscreen&&e.requestFullscreen()},exitFullscreen:function(){var e=t._owner.value();e&&e.exitFullscreen&&e.exitFullscreen()},detach:function(e){var i=t._owner.value();i&&i.detach&&i.detach(e)},attach:function(){var e=t._owner.value();e&&e.attach&&e.attach()}},e&&this.pushOwner(e)}return e.prototype.bridge=function(){return this._bridge},e.prototype.pushOwner=function(e){var t,i,o,n;if(e.alive.value()){for(t=0,i=this._ownersStack;t<i.length;t++)o=i[t],this._unsubscribeOwner(o);n={owner:e},this._ownersStack.push(n),this._subscribeOwner(n)}},e.prototype._subscribeOwner=function(e){var t,i,o=this,n=e.owner;e.deathWatcher||(this._alive.setValue(!0),e.deathWatcher=n.alive.spawn(),e.deathWatcher.subscribe(function(t){t||o._deadHandler(e)})),e.subscriptions||(t=e.subscriptions=[],
this._visible.setValue(!1),i=function(e,i){if(e){var o=e.spawn();t.push(o),o.subscribe(function(e){i.setValue(e)},{callWithLast:!0})}else i.deleteValue()},i(n.body,this._body),i(n.width,this._width),i(n.height,this._height),i(n.fullscreen,this._fullscreen),i(n.detachable,this._detachable),i(n.availWidth,this._availWidth),i(n.availHeight,this._availHeight),i(n.visible,this._visible)),this._owner.setValue(n)},e.prototype._unsubscribeOwner=function(e,t){var i,o,n;if(e.subscriptions){for(i=0,o=e.subscriptions;i<o.length;i++)n=o[i],n.unsubscribe();e.subscriptions=null}t&&e.deathWatcher&&(e.deathWatcher.unsubscribe(),e.deathWatcher=null)},e.prototype._deadHandler=function(e){var t,i=this._ownersStack.indexOf(e);for(o.assert(-1!==i,"sanitized owner should be in stack"),t=this._ownersStack.length-1;t>=i;t--)this._unsubscribeOwner(this._ownersStack[t],!0);this._ownersStack.length=i,i>0?this._subscribeOwner(this._ownersStack[i-1]):(this._alive.setValue(!1),this._owner.deleteValue())},e}(),t.ResizerDetacherState=r},function(e,t,i){"use strict";function o(e){return _.Interval.parse(e).value()}function n(e){var t,i,n,r;return e=o(e),t=m.supportedResolutions.value(),i=!1,void 0!==t?(n=t.map(o),i=-1!==n.indexOf(e)):i=!0,r=m.intraday.value(),r?i:_.Interval.isDWM(e)&&i}function r(e){return void 0===e&&(e=[]),e.concat(f.enabled("star_some_intervals_by_default")?["1","30","60"]:[]).filter(function(e,t,i){return i.indexOf(e)===t})}function s(e){var t={};return e.forEach(function(e){return t[e]=1}),t}function a(e){var t=new _.Interval(e);return t.kind()!==_.Interval.MINUTES?v[t.letter()]*(t.multiplier()||1):t.multiplier()||0}function l(e){return e.sort(function(e,t){return a(e)-a(t)})}function c(e){void 0===e&&(e=[]);var t=e;return window.user.is_pro&&(t=t.concat(Object.keys(g.getJSON("IntervalWidget.intervals",[]))).filter(function(e,t,i){return i.indexOf(e)===t})),l(t)}function h(e,t){if(t){var i=" ";switch(e){case _.Interval.DAYS:i+=window.t("day",{plural:"days",count:t});break;case _.Interval.WEEKS:i+=window.t("week",{plural:"weeks",count:t});break;case _.Interval.MONTHS:i+=window.t("month",{plural:"months",count:t});break;case _.Interval.SECONDS:i+=window.t("second",{plural:"seconds",count:t});break;case _.Interval.MINUTES:i+=window.t("minute",{plural:"minutes",count:t});break;case _.Interval.HOURS:i+=window.t("hour",{plural:"hours",count:t});break;default:i+=e}return i}switch(e){case _.Interval.MINUTES:return window.t("m",{context:"interval_short"});case _.Interval.HOURS:return window.t("h",{context:"interval_short"});case _.Interval.DAYS:return window.t("D",{context:"interval_short"});case _.Interval.WEEKS:return window.t("W",{context:"interval_short"});case _.Interval.MONTHS:return window.t("Mo",{context:"interval_short"});default:return""}}function u(e){return e>=60&&!(e%60)}function d(e){var t=_.Interval.parse(e),i=t.multiplier(),o=t.kind();if(!t.isValid()||void 0===i)throw new TypeError("Can't translate invalid interval");return u(i)&&(i=~~(i/60),o=_.Interval.HOURS),{multiplier:""+i,shortKind:h(o),hint:i+" "+h(o,i),
mayOmitMultiplier:t.isDWM()&&1===i}}function p(e){var t=d(e);return""+t.multiplier+t.shortKind}var f,_,m,g,v,y;Object.defineProperty(t,"__esModule",{value:!0}),i(5),f=i(3),_=i(130),m=i(93),g=i(48),t.normalizeIntervalString=o,t.isIntervalAvailable=n,t.groupTranslations=(y={},y[_.Interval.SECONDS]=window.t("Second",{context:"interval_group_name"}),y[_.Interval.MINUTES]=window.t("Minute",{context:"interval_group_name"}),y[_.Interval.HOURS]=window.t("Hour",{context:"interval_group_name"}),y[_.Interval.DAYS]=window.t("Day",{context:"interval_group_name"}),y[_.Interval.WEEKS]=window.t("Week",{context:"interval_group_name"}),y[_.Interval.MONTHS]=window.t("Month",{context:"interval_group_name"}),y),t.getDefaultFavoriteIntervals=r,t.convertIntervalsToObject=s,v={S:1/60,D:1440,W:10080,M:43200},t.sortIntervals=l,t.getIntervals=c,t.isHour=u,t.getTranslatedModel=d,t.getTranslated=p},function(e,t,i){var o;!function(n,r,s,a){"use strict";function l(e,t,i){return setTimeout(p(e,i),t)}function c(e,t,i){return!!Array.isArray(e)&&(h(e,i[t],i),!0)}function h(e,t,i){var o;if(e)if(e.forEach)e.forEach(t,i);else if(e.length!==a)for(o=0;o<e.length;)t.call(i,e[o],o,e),o++;else for(o in e)e.hasOwnProperty(o)&&t.call(i,e[o],o,e)}function u(e,t,i){var o="DEPRECATED METHOD: "+t+"\n"+i+" AT \n";return function(){var t=Error("get-stack-trace"),i=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=n.console&&(n.console.warn||n.console.log);return r&&r.call(n.console,o,i),e.apply(this,arguments)}}function d(e,t,i){var o,n=t.prototype;o=e.prototype=Object.create(n),o.constructor=e,o._super=n,i&&_e(o,i)}function p(e,t){return function(){return e.apply(t,arguments)}}function f(e,t){return typeof e==Tt?e.apply(t?t[0]||a:a,t):e}function _(e,t){return e===a?t:e}function m(e,t,i){h(b(t),function(t){e.addEventListener(t,i,!1)})}function g(e,t,i){h(b(t),function(t){e.removeEventListener(t,i,!1)})}function v(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function y(e,t){return e.indexOf(t)>-1}function b(e){return e.trim().split(/\s+/g)}function S(e,t,i){if(e.indexOf&&!i)return e.indexOf(t);for(var o=0;o<e.length;){if(i&&e[o][i]==t||!i&&e[o]===t)return o;o++}return-1}function w(e){return Array.prototype.slice.call(e,0)}function T(e,t,i){for(var o,n=[],r=[],s=0;s<e.length;)o=t?e[s][t]:e[s],S(r,o)<0&&n.push(e[s]),r[s]=o,s++;return i&&(n=t?n.sort(function(e,i){return e[t]>i[t]}):n.sort()),n}function P(e,t){for(var i,o,n=t[0].toUpperCase()+t.slice(1),r=0;r<St.length;){if(i=St[r],(o=i?i+n:t)in e)return o;r++}return a}function C(){return ve++}function x(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||n}function E(e,t){var i=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){f(e.options.enable,[e])&&i.handler(t)},this.init()}function L(e){var t=e.options.inputClass;return new(t||(Se?H:we?j:be?G:$))(e,I)}function I(e,t,i){
var o=i.pointers.length,n=i.changedPointers.length,r=t&Le&&o-n==0,s=t&(Ae|ke)&&o-n==0;i.isFirst=!!r,i.isFinal=!!s,r&&(e.session={}),i.eventType=t,A(e,i),e.emit("hammer.input",i),e.recognize(i),e.session.prevInput=i}function A(e,t){var i,o,n,r,s,a,l=e.session,c=t.pointers,h=c.length;l.firstInput||(l.firstInput=O(t)),h>1&&!l.firstMultiple?l.firstMultiple=O(t):1===h&&(l.firstMultiple=!1),i=l.firstInput,o=l.firstMultiple,n=o?o.center:i.center,r=t.center=D(c),t.timeStamp=xt(),t.deltaTime=t.timeStamp-i.timeStamp,t.angle=N(n,r),t.distance=B(n,r),k(l,t),t.offsetDirection=R(t.deltaX,t.deltaY),s=V(t.deltaTime,t.deltaX,t.deltaY),t.overallVelocityX=s.x,t.overallVelocityY=s.y,t.overallVelocity=Ct(s.x)>Ct(s.y)?s.x:s.y,t.scale=o?F(o.pointers,c):1,t.rotation=o?z(o.pointers,c):0,t.maxPointers=l.prevInput?t.pointers.length>l.prevInput.maxPointers?t.pointers.length:l.prevInput.maxPointers:t.pointers.length,M(l,t),a=e.element,v(t.srcEvent.target,a)&&(a=t.srcEvent.target),t.target=a}function k(e,t){var i=t.center,o=e.offsetDelta||{},n=e.prevDelta||{},r=e.prevInput||{};t.eventType!==Le&&r.eventType!==Ae||(n=e.prevDelta={x:r.deltaX||0,y:r.deltaY||0},o=e.offsetDelta={x:i.x,y:i.y}),t.deltaX=n.x+(i.x-o.x),t.deltaY=n.y+(i.y-o.y)}function M(e,t){var i,o,n,r,s,l,c,h=e.lastInterval||t,u=t.timeStamp-h.timeStamp;t.eventType!=ke&&(u>Ee||h.velocity===a)?(s=t.deltaX-h.deltaX,l=t.deltaY-h.deltaY,c=V(u,s,l),o=c.x,n=c.y,i=Ct(c.x)>Ct(c.y)?c.x:c.y,r=R(s,l),e.lastInterval=t):(i=h.velocity,o=h.velocityX,n=h.velocityY,r=h.direction),t.velocity=i,t.velocityX=o,t.velocityY=n,t.direction=r}function O(e){for(var t=[],i=0;i<e.pointers.length;)t[i]={clientX:Pt(e.pointers[i].clientX),clientY:Pt(e.pointers[i].clientY)},i++;return{timeStamp:xt(),pointers:t,center:D(t),deltaX:e.deltaX,deltaY:e.deltaY}}function D(e){var t,i,o,n=e.length;if(1===n)return{x:Pt(e[0].clientX),y:Pt(e[0].clientY)};for(t=0,i=0,o=0;o<n;)t+=e[o].clientX,i+=e[o].clientY,o++;return{x:Pt(t/n),y:Pt(i/n)}}function V(e,t,i){return{x:t/e||0,y:i/e||0}}function R(e,t){return e===t?Me:Ct(e)>=Ct(t)?e<0?Oe:De:t<0?Ve:Re}function B(e,t,i){i||(i=Fe);var o=t[i[0]]-e[i[0]],n=t[i[1]]-e[i[1]];return Math.sqrt(o*o+n*n)}function N(e,t,i){i||(i=Fe);var o=t[i[0]]-e[i[0]],n=t[i[1]]-e[i[1]];return 180*Math.atan2(n,o)/Math.PI}function z(e,t){return N(t[1],t[0],$e)+N(e[1],e[0],$e)}function F(e,t){return B(t[0],t[1],$e)/B(e[0],e[1],$e)}function $(){this.evEl=We,this.evWin=Ue,this.pressed=!1,E.apply(this,arguments)}function H(){this.evEl=Ge,this.evWin=Ye,E.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function W(){this.evTarget=Ke,this.evWin=Je,this.started=!1,E.apply(this,arguments)}function U(e,t){var i=w(e.touches),o=w(e.changedTouches);return t&(Ae|ke)&&(i=T(i.concat(o),"identifier",!0)),[i,o]}function j(){this.evTarget=Qe,this.targetIds={},E.apply(this,arguments)}function q(e,t){var i,o,n,r,s,l=w(e.touches),c=this.targetIds;if(t&(Le|Ie)&&1===l.length)return c[l[0].identifier]=!0,[l,l];if(n=w(e.changedTouches),r=[],s=this.target,o=l.filter(function(e){return v(e.target,s)}),
t===Le)for(i=0;i<o.length;)c[o[i].identifier]=!0,i++;for(i=0;i<n.length;)c[n[i].identifier]&&r.push(n[i]),t&(Ae|ke)&&delete c[n[i].identifier],i++;return r.length?[T(o.concat(r),"identifier",!0),r]:a}function G(){E.apply(this,arguments);var e=p(this.handler,this);this.touch=new j(this.manager,e),this.mouse=new $(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function Y(e,t){e&Le?(this.primaryTouch=t.changedPointers[0].identifier,X.call(this,t)):e&(Ae|ke)&&X.call(this,t)}function X(e){var t,i,o,n=e.changedPointers[0];n.identifier===this.primaryTouch&&(t={x:n.clientX,y:n.clientY},this.lastTouches.push(t),i=this.lastTouches,o=function(){var e=i.indexOf(t);e>-1&&i.splice(e,1)},setTimeout(o,et))}function K(e){var t,i,o,n,r=e.srcEvent.clientX,s=e.srcEvent.clientY;for(t=0;t<this.lastTouches.length;t++)if(i=this.lastTouches[t],o=Math.abs(r-i.x),n=Math.abs(s-i.y),o<=tt&&n<=tt)return!0;return!1}function J(e,t){this.manager=e,this.set(t)}function Z(e){var t,i;return y(e,at)?at:(t=y(e,lt),i=y(e,ct),t&&i?at:t||i?t?lt:ct:y(e,st)?st:rt)}function Q(){var e,t;return!!ot&&(e={},t=n.CSS&&n.CSS.supports,["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(i){e[i]=!t||n.CSS.supports("touch-action",i)}),e)}function ee(e){this.options=_e({},this.defaults,e||{}),this.id=C(),this.manager=null,this.options.enable=_(this.options.enable,!0),this.state=ut,this.simultaneous={},this.requireFail=[]}function te(e){return e&mt?"cancel":e&ft?"end":e&pt?"move":e&dt?"start":""}function ie(e){return e==Re?"down":e==Ve?"up":e==Oe?"left":e==De?"right":""}function oe(e,t){var i=t.manager;return i?i.get(e):e}function ne(){ee.apply(this,arguments)}function re(){ne.apply(this,arguments),this.pX=null,this.pY=null}function se(){ne.apply(this,arguments)}function ae(){ee.apply(this,arguments),this._timer=null,this._input=null}function le(){ne.apply(this,arguments)}function ce(){ne.apply(this,arguments)}function he(){ee.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ue(e,t){return t=t||{},t.recognizers=_(t.recognizers,ue.defaults.preset),new de(e,t)}function de(e,t){this.options=_e({},ue.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=L(this),this.touchAction=new J(this,this.options.touchAction),pe(this,!0),h(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function pe(e,t){var i,o=e.element;o.style&&(h(e.options.cssProps,function(n,r){i=P(o.style,r),t?(e.oldCssProps[i]=o.style[i],o.style[i]=n):o.style[i]=e.oldCssProps[i]||""}),t||(e.oldCssProps={}))}function fe(e,t){var i=r.createEvent("Event");i.initEvent(e,!0,!0),i.gesture=t,t.target.dispatchEvent(i)}
var _e,me,ge,ve,ye,be,Se,we,Te,Pe,Ce,xe,Ee,Le,Ie,Ae,ke,Me,Oe,De,Ve,Re,Be,Ne,ze,Fe,$e,He,We,Ue,je,qe,Ge,Ye,Xe,Ke,Je,Ze,Qe,et,tt,it,ot,nt,rt,st,at,lt,ct,ht,ut,dt,pt,ft,_t,mt,gt,vt,yt,bt,St=["","webkit","Moz","MS","ms","o"],wt=r.createElement("div"),Tt="function",Pt=Math.round,Ct=Math.abs,xt=Date.now;_e="function"!=typeof Object.assign?function(e){var t,i,o,n;if(e===a||null===e)throw new TypeError("Cannot convert undefined or null to object");for(t=Object(e),i=1;i<arguments.length;i++)if((o=arguments[i])!==a&&null!==o)for(n in o)o.hasOwnProperty(n)&&(t[n]=o[n]);return t}:Object.assign,me=u(function(e,t,i){for(var o=Object.keys(t),n=0;n<o.length;)(!i||i&&e[o[n]]===a)&&(e[o[n]]=t[o[n]]),n++;return e},"extend","Use `assign`."),ge=u(function(e,t){return me(e,t,!0)},"merge","Use `assign`."),ve=1,ye=/mobile|tablet|ip(ad|hone|od)|android/i,be="ontouchstart"in n,Se=P(n,"PointerEvent")!==a,we=be&&ye.test(navigator.userAgent),Te="touch",Pe="pen",Ce="mouse",xe="kinect",Ee=25,Le=1,Ie=2,Ae=4,ke=8,Me=1,Oe=2,De=4,Ve=8,Re=16,Be=Oe|De,Ne=Ve|Re,ze=Be|Ne,Fe=["x","y"],$e=["clientX","clientY"],E.prototype={handler:function(){},init:function(){this.evEl&&m(this.element,this.evEl,this.domHandler),this.evTarget&&m(this.target,this.evTarget,this.domHandler),this.evWin&&m(x(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&g(this.element,this.evEl,this.domHandler),this.evTarget&&g(this.target,this.evTarget,this.domHandler),this.evWin&&g(x(this.element),this.evWin,this.domHandler)}},He={mousedown:Le,mousemove:Ie,mouseup:Ae},We="mousedown",Ue="mousemove mouseup",d($,E,{handler:function(e){var t=He[e.type];t&Le&&0===e.button&&(this.pressed=!0),t&Ie&&1!==e.which&&(t=Ae),this.pressed&&(t&Ae&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:Ce,srcEvent:e}))}}),je={pointerdown:Le,pointermove:Ie,pointerup:Ae,pointercancel:ke,pointerout:ke},qe={2:Te,3:Pe,4:Ce,5:xe},Ge="pointerdown",Ye="pointermove pointerup pointercancel",n.MSPointerEvent&&!n.PointerEvent&&(Ge="MSPointerDown",Ye="MSPointerMove MSPointerUp MSPointerCancel"),d(H,E,{handler:function(e){var t=this.store,i=!1,o=e.type.toLowerCase().replace("ms",""),n=je[o],r=qe[e.pointerType]||e.pointerType,s=r==Te,a=S(t,e.pointerId,"pointerId");n&Le&&(0===e.button||s)?a<0&&(t.push(e),a=t.length-1):n&(Ae|ke)&&(i=!0),a<0||(t[a]=e,this.callback(this.manager,n,{pointers:t,changedPointers:[e],pointerType:r,srcEvent:e}),i&&t.splice(a,1))}}),Xe={touchstart:Le,touchmove:Ie,touchend:Ae,touchcancel:ke},Ke="touchstart",Je="touchstart touchmove touchend touchcancel",d(W,E,{handler:function(e){var t,i=Xe[e.type];i===Le&&(this.started=!0),this.started&&(t=U.call(this,e,i),i&(Ae|ke)&&t[0].length-t[1].length==0&&(this.started=!1),this.callback(this.manager,i,{pointers:t[0],changedPointers:t[1],pointerType:Te,srcEvent:e}))}}),Ze={touchstart:Le,touchmove:Ie,touchend:Ae,touchcancel:ke},Qe="touchstart touchmove touchend touchcancel",d(j,E,{handler:function(e){var t=Ze[e.type],i=q.call(this,e,t);i&&this.callback(this.manager,t,{pointers:i[0],changedPointers:i[1],
pointerType:Te,srcEvent:e})}}),et=2500,tt=25,d(G,E,{handler:function(e,t,i){var o=i.pointerType==Te,n=i.pointerType==Ce;if(!(n&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(o)Y.call(this,t,i);else if(n&&K.call(this,i))return;this.callback(e,t,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}}),it=P(wt.style,"touchAction"),ot=it!==a,nt="compute",rt="auto",st="manipulation",at="none",lt="pan-x",ct="pan-y",ht=Q(),J.prototype={set:function(e){e==nt&&(e=this.compute()),ot&&this.manager.element.style&&ht[e]&&(this.manager.element.style[it]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return h(this.manager.recognizers,function(t){f(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),Z(e.join(" "))},preventDefaults:function(e){var t,i,o,n,r,s,l,c=e.srcEvent,h=e.offsetDirection;return this.manager.session.prevented?void c.preventDefault():(t=this.actions,i=y(t,at)&&!ht[at],o=y(t,ct)&&!ht[ct],n=y(t,lt)&&!ht[lt],i&&(r=1===e.pointers.length,s=e.distance<2,l=e.deltaTime<250,r&&s&&l)||n&&o?a:i||o&&h&Be||n&&h&Ne?this.preventSrc(c):a)},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}},ut=1,dt=2,pt=4,ft=8,_t=ft,mt=16,gt=32,ee.prototype={defaults:{},set:function(e){return _e(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(c(e,"recognizeWith",this))return this;var t=this.simultaneous;return e=oe(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return c(e,"dropRecognizeWith",this)?this:(e=oe(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(c(e,"requireFailure",this))return this;var t=this.requireFail;return e=oe(e,this),-1===S(t,e)&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(c(e,"dropRequireFailure",this))return this;e=oe(e,this);var t=S(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){function t(t){i.manager.emit(t,e)}var i=this,o=this.state;o<ft&&t(i.options.event+te(o)),t(i.options.event),e.additionalEvent&&t(e.additionalEvent),o>=ft&&t(i.options.event+te(o))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=gt},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(gt|ut)))return!1;e++}return!0},recognize:function(e){var t=_e({},e);if(!f(this.options.enable,[this,t]))return this.reset(),void(this.state=gt);this.state&(_t|mt|gt)&&(this.state=ut),this.state=this.process(t),this.state&(dt|pt|ft|mt)&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},d(ne,ee,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,i=e.eventType,o=t&(dt|pt),n=this.attrTest(e)
;return o&&(i&ke||!n)?t|mt:o||n?i&Ae?t|ft:t&dt?t|pt:dt:gt}}),d(re,ne,{defaults:{event:"pan",threshold:10,pointers:1,direction:ze},getTouchAction:function(){var e=this.options.direction,t=[];return e&Be&&t.push(ct),e&Ne&&t.push(lt),t},directionTest:function(e){var t=this.options,i=!0,o=e.distance,n=e.direction,r=e.deltaX,s=e.deltaY;return n&t.direction||(t.direction&Be?(n=0===r?Me:r<0?Oe:De,i=r!=this.pX,o=Math.abs(e.deltaX)):(n=0===s?Me:s<0?Ve:Re,i=s!=this.pY,o=Math.abs(e.deltaY))),e.direction=n,i&&o>t.threshold&&n&t.direction},attrTest:function(e){return ne.prototype.attrTest.call(this,e)&&(this.state&dt||!(this.state&dt)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=ie(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),d(se,ne,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[at]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&dt)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),d(ae,ee,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[rt]},process:function(e){var t=this.options,i=e.pointers.length===t.pointers,o=e.distance<t.threshold,n=e.deltaTime>t.time;if(this._input=e,!o||!i||e.eventType&(Ae|ke)&&!n)this.reset();else if(e.eventType&Le)this.reset(),this._timer=l(function(){this.state=_t,this.tryEmit()},t.time,this);else if(e.eventType&Ae)return _t;return gt},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===_t&&(e&&e.eventType&Ae?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=xt(),this.manager.emit(this.options.event,this._input)))}}),d(le,ne,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[at]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&dt)}}),d(ce,ne,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Be|Ne,pointers:1},getTouchAction:function(){return re.prototype.getTouchAction.call(this)},attrTest:function(e){var t,i=this.options.direction;return i&(Be|Ne)?t=e.overallVelocity:i&Be?t=e.overallVelocityX:i&Ne&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&i&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&Ct(t)>this.options.velocity&&e.eventType&Ae},emit:function(e){var t=ie(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),d(he,ee,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[st]},process:function(e){var t,i,o=this.options,n=e.pointers.length===o.pointers,r=e.distance<o.threshold,s=e.deltaTime<o.time;if(this.reset(),e.eventType&Le&&0===this.count)return this.failTimeout();if(r&&s&&n){if(e.eventType!=Ae)return this.failTimeout()
;if(t=!this.pTime||e.timeStamp-this.pTime<o.interval,i=!this.pCenter||B(this.pCenter,e.center)<o.posThreshold,this.pTime=e.timeStamp,this.pCenter=e.center,i&&t?this.count+=1:this.count=1,this._input=e,0===this.count%o.taps)return this.hasRequireFailures()?(this._timer=l(function(){this.state=_t,this.tryEmit()},o.interval,this),dt):_t}return gt},failTimeout:function(){return this._timer=l(function(){this.state=gt},this.options.interval,this),gt},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==_t&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ue.VERSION="2.0.7",ue.defaults={domEvents:!1,touchAction:nt,enable:!0,inputTarget:null,inputClass:null,preset:[[le,{enable:!1}],[se,{enable:!1},["rotate"]],[ce,{direction:Be}],[re,{direction:Be},["swipe"]],[he],[he,{event:"doubletap",taps:2},["tap"]],[ae]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},vt=1,yt=2,de.prototype={set:function(e){return _e(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?yt:vt},recognize:function(e){var t,i,o,n,r=this.session;if(!r.stopped)for(this.touchAction.preventDefaults(e),i=this.recognizers,o=r.curRecognizer,(!o||o&&o.state&_t)&&(o=r.curRecognizer=null),n=0;n<i.length;)t=i[n],r.stopped===yt||o&&t!=o&&!t.canRecognizeWith(o)?t.reset():t.recognize(e),!o&&t.state&(dt|pt|ft)&&(o=r.curRecognizer=t),n++},get:function(e){var t,i;if(e instanceof ee)return e;for(t=this.recognizers,i=0;i<t.length;i++)if(t[i].options.event==e)return t[i];return null},add:function(e){if(c(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){var t,i;return c(e,"remove",this)?this:(e=this.get(e),e&&(t=this.recognizers,-1!==(i=S(t,e))&&(t.splice(i,1),this.touchAction.update())),this)},on:function(e,t){if(e!==a&&t!==a){var i=this.handlers;return h(b(e),function(e){i[e]=i[e]||[],i[e].push(t)}),this}},off:function(e,t){if(e!==a){var i=this.handlers;return h(b(e),function(e){t?i[e]&&i[e].splice(S(i[e],t),1):delete i[e]}),this}},emit:function(e,t){var i,o;if(this.options.domEvents&&fe(e,t),(i=this.handlers[e]&&this.handlers[e].slice())&&i.length)for(t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()},o=0;o<i.length;)i[o](t),o++},destroy:function(){this.element&&pe(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},_e(ue,{INPUT_START:Le,INPUT_MOVE:Ie,INPUT_END:Ae,INPUT_CANCEL:ke,STATE_POSSIBLE:ut,STATE_BEGAN:dt,STATE_CHANGED:pt,STATE_ENDED:ft,STATE_RECOGNIZED:_t,STATE_CANCELLED:mt,STATE_FAILED:gt,DIRECTION_NONE:Me,DIRECTION_LEFT:Oe,DIRECTION_RIGHT:De,DIRECTION_UP:Ve,DIRECTION_DOWN:Re,DIRECTION_HORIZONTAL:Be,DIRECTION_VERTICAL:Ne,DIRECTION_ALL:ze,Manager:de,Input:E,TouchAction:J,TouchInput:j,MouseInput:$,PointerEventInput:H,
TouchMouseInput:G,SingleTouchInput:W,Recognizer:ee,AttrRecognizer:ne,Tap:he,Pan:re,Swipe:ce,Pinch:se,Rotate:le,Press:ae,on:m,off:g,each:h,merge:ge,extend:me,assign:_e,inherit:d,bindFn:p,prefixed:P}),bt=a!==n?n:"undefined"!=typeof self?self:{},bt.Hammer=ue,(o=function(){return ue}.call(t,i,t,e))!==a&&(e.exports=o)}(window,document)},function(e,t,i){"use strict";function o(e,t,o,r){var s=n.loadPropertyPages();return new Promise(function(n){i.e(21).then(function(a){s.then(function(){var s=i(982),a=new s(e,t,r);a.show(o),n(a)})}.bind(null,i)).catch(i.oe)})}Object.defineProperty(t,"__esModule",{value:!0});var n=i(2);t.showEditObjectDialog=o},,function(e,t,i){"use strict";var o,n,r,s,a,l;Object.defineProperty(t,"__esModule",{value:!0}),o=i(6),n=i(8),r=i(35),s=i(11),a=i(155),l=function(){function e(e,t){this._invalidated=!0,this._middlePoint=null,this._points=[],this._floatPoints=[],this._source=e,this._model=t}return e.prototype.priceToCoordinate=function(e){var t,i,o,n=this._source.priceScale();return null===n?null:null===(t=n.priceRange())?null:(n.isPercent()&&null!==(i=this._source.ownerSource())&&null!==(o=i.firstValue())&&void 0!==o&&(e=t.convertToPercent(e,o)),n.priceToCoordinate(e))},e.prototype.currentPoint=function(){var e=this._model.crossHairSource();return new n.Point(e.x,e.y)},e.prototype.anchorColor=function(){return this._source.isBeingEdited()?"#D61AD3":this._model.isDark()?"#FFFFFF":"#606060"},e.prototype.isHoveredSource=function(){return this._source===this._model.hoveredSource()},e.prototype.isSelectedSource=function(){return this._source===this._model.selectedSource()},e.prototype.isAnchorsRequired=function(){return(this.isHoveredSource()||this.isSelectedSource())&&!this._model.isSnapshot()},e.prototype.update=function(){this._invalidated=!0},e.prototype.addAnchors=function(e){if(this.isAnchorsRequired()){var t=this._points;this._model.lineBeingCreated()===this._source&&(t=t.slice(0,-1)),e.append(this.createLineAnchor({points:t}))}},e.prototype.createLineAnchor=function(e){var t=r.CheckMobile.any();return new a.LineAnchor(o.__assign({},e,{color:this.anchorColor(),backgroundColor:this._model.backgroundColor(),currentPoint:this.currentPoint(),linePointBeingEdited:this._model.linePointBeingEdited(),hittestResult:s.CHANGEPOINT,radius:(t?15:7)+(this.isSelectedSource()?1:0),strokeWidth:(t?3:1)+(this.isSelectedSource()?1:0)}))},e.prototype._updateImpl=function(){var e,t,i,o,n,r,s,a;if(this._points=[],this._floatPoints=[],e=this._source.priceScale(),t=this._model.timeScale(),e&&!e.isEmpty()&&!t.isEmpty()){for(i=this._source.points(),o=0;o<i.length;o++){if(n=i[o],!(r=this._source.pointToScreenPoint(n)))return;s=r[0],s.data=o,a=r[1],a.data=o,this._floatPoints.push(s),this._points.push(a)}2===this._points.length&&(this._middlePoint=this._source.calcMiddlePoint(this._points[0],this._points[1]))}},e.prototype._getSource=function(){return this._source},e.prototype._getPoints=function(){return this._points},e.prototype._getModel=function(){return this._model},e}(),t.LineSourcePaneView=l},,function(e,t,i){"use strict"
;function o(e){var t,i=[],n=e.m_items;for(t=0;t<n.length;t++)n[t]._menu&&(i.push(n[t]._menu),i=i.concat(o(n[t]._menu)));return i}function n(e,t,i){var o,n;this.options={},this._parentMenuItem=i,$.extend(this.options,t),this.options.class&&(this.options.attributes.class=this.options.class),this.jqMenu=null,this.m_wrapper=null,this.m_items=[];for(o in e)n=e[o],this.addItem(n)}var r=i(464),s=i(74).ActionPlaceholder,a=i(568),l=a.Item,c=a.ItemPlaceholder,h=i(569),u=i(267);n.prototype.addItem=function(e){var t;return t=e instanceof s?new c(e,this):new l(e,this),this.m_items.push(t),t},n.renderItem=function(e,t){e.append(t.render(e))},n.prototype.closeOtherSubmenus=function(e){for(var t=0;t<this.m_items.length;++t)this.m_items[t].highlight(!1),this.m_items[t]._menu&&(this.m_items[t]._menu.destroy(),this.m_items[t]._menu=null)},n.prototype.isShown=function(){return null!==this.jqMenu},n.prototype.render=function(){var e,t,i,o=this.getAttributes();if(this._parentMenuItem){e=$("<table>"),this.jqMenu=e,e.attr("cellspacing","0"),e.attr("cellpadding","0"),e.addClass("context-menu"),e.addClass("submenu");for(t in this.m_items)i=this.m_items[t],n.renderItem(e,i)}else{e=u.create(r.MENU_TAG,o),this.jqMenu=e;for(t in this.m_items)i=this.m_items[t],n.renderItem(e,i)}return this.jqMenu},n.prototype.getAttributes=function(){var e={},t=["context-menu"];return this.options.attributes&&this.options.attributes.class&&t.push(this.options.attributes.class),e.cellspacing=0,e.cellpadding=0,e.class=t.join(),e},n.prototype.deploy=function(e,t){var i=this.wrapper();return this.jqMenu=i.append(this.render()),t?($(t).data("submenu",this.jqMenu),$(document.body).append(this.jqMenu),this.jqMenu.data("parent-menu",t),this.jqMenu.data("parent-item",e.currentTarget)):$(document.body).append(this.jqMenu),h.unbindContextMenu(this.jqMenu),this._setCoords(e),this.jqMenu},n.prototype.show=function(e,t){this.deploy(e,t).show()},n.prototype.hide=function(){this.isShown()&&this.destroy()},n.prototype.destroy=function(){$.each(this.m_items,function(e,t){t._menu&&t._menu.destroy()}),this.jqMenu&&(this.jqMenu.remove(),this.jqMenu=null),this.m_wrapper.empty()},n.prototype._setCoords=function(e){var t,i,o,n,r,s,a,l=5,c=this.jqMenu,h=$(this.jqMenu.data("parent-item")),u={width:$(window).width(),height:Math.min($(window).height(),$("body").height())},d={top:$(document).scrollTop(),left:$(document).scrollLeft()};for(this.jqMenu.css({maxWidth:u.width-2*l,maxHeight:u.height-2*l}),t={width:c.outerWidth(),height:c.outerHeight()},h.size()?(o=h.offset(),i={top:o.top-1,left:o.left+h.outerWidth()}):i={top:e.pageY,left:e.pageX},this.jqMenu.offset(i),n=!1,r={},r.top=Math.min(i.top,u.height+d.top-t.height-l),i.left+t.width+l>u.width+d.left||this.options.reverse?(n=!0,r.left=i.left-t.width):r.left=i.left,s=e.target;s&&s!==document;s=s.parentNode)if("fixed"===$(s).css("position")){this.jqMenu.css("position","fixed");break}this.jqMenu.offset(r),n&&(a=t.width-this.jqMenu.outerWidth())&&(r.left+=a,this.jqMenu.offset(r))},n.prototype._wrapper=function(){var e=this,t=r.WRAPPER_ATTRIBUTES
;return this._parentMenuItem?this.m_wrapper=u.create(r.WRAPPER_TAG,t):(this.m_wrapper=h.createPopup(t,void 0,{mouseDownOutsideEvent:function(t){var i=$();$.each(o(e),function(){i=i.add(this.m_wrapper)}),$(t.target).parents().andSelf().is(i)||e.hide()}}),this.m_wrapper.addClass("topmenu")),this.m_wrapper},n.prototype.wrapper=function(e){return this.m_wrapper||this._wrapper()},e.exports=n},function(e,t,i){"use strict";e.exports={INSERT_AT_END:0,INSERT_AT_START:1,INSERT_AT_POS:2,WRAPPER_TAG:"div",WRAPPER_ATTRIBUTES:{class:"context-menu-wrapper"},MENU_TAG:"table",ITEM_ROW_TAG:"tr",ICON_CELL_TAG:"td",TEXT_CELL_TAG:"td",RIGHT_CELL_TAG:"td",SUBMENU_CELL_TAG:"td"}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){r.default.trackGoPro("Gopro Features",e,t)},n=i(949),r=o(n),e.exports=t.default},function(e,t,i){"use strict";function o(e,t,i){c=i||c,l=e,t=t||"aggressive",a.enable("referral_program_for_widget_owners"),a.enable("referral_program_policy_"+t),r.trackEvent("Referral program enabled",t)}function n(){return l?"http://tradingview.go2cloud.org/aff_c?offer_id=2&url_id="+c+"&aff_id="+l+"&"+s.buildUtmQueryStringFromUrlParams(!1):"https://tradingview.com"+s.buildUtmQueryStringFromUrlParams(!0)}var r,s,a,l,c;Object.defineProperty(t,"__esModule",{value:!0}),r=i(20),s=i(60),a=i(3),c="11",t.enable=o,t.referenceToTradingView=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,i=0,o=void 0;if(0===e.length)return i;for(t=0;t<e.length;t++)o=e.charCodeAt(t),i=(i<<5)-i+o,i&=i;return i},e.exports=t.default},function(e,t,i){"use strict";function o(){return Object.keys(s)}function n(e){return e&&s[e]?s[e]:""}function r(e){if(!e)return"";var t="";return t="forex"===e.type||"FXCM"===e.exchange?"forex":e.exchange.startsWith("CHXEUR_")?a[e.exchange.split("_")[1]]:a[e.full_name?e.full_name.split(":")[0]:e.exchange],n(t)}var s={ae:"flag-ae",argentina:"flag-ar",canada:"flag-ca",colombia:"flag-co",bitcoin:"flag-btc",brasil:"flag-br",uk:"flag-uk",usa:"flag-us",egypt:"flag-eg",europe:"flag-eu",russia:"flag-ru",japan:"flag-jp",india:"flag-in",forex:"flag-fx",luxembourg:"flag-lu",mexico:"flag-mx",germany:"flag-de",ireland:"flag-ie",italy:"flag-it",peru:"flag-pe",spain:"flag-es",saudi_arabia:"flag-sa",serbia:"flag-rs",sweden:"flag-se",switzerland:"flag-ch",turkey:"flag-tr",norway:"flag-no",austria:"flag-at",australia:"flag-au",new_zealand:"flag-nz",hong_kong:"flag-hk",taiwan:"flag-tw",singapore:"flag-sg",poland:"flag-pl",israel:"flag-il",chile:"flag-cl",china:"flag-cn",malaysia:"flag-my",bahrain:"flag-bh",nigeria:"flag-ng"},a=function(){var e=ChartApiInstance.supportedExchangesList(),t={BMFBOVESPA:"brasil",CHXEUR:"europe",CHXJPY:"japan"};return e.filter(function(e){return e.flag}).forEach(function(e){t[e.value]=e.flag,e.value!==e.name&&(t[e.name]=e.flag)}),t}();e.exports.supportedFlags=o,e.exports.getFlagIdByName=n,e.exports.getFlagIdBySymbolInfo=r},,function(e,t,i){"use strict"
;(function(t){function o(e){this._band=e||{}}function n(){o.apply(this,arguments)}function r(){o.apply(this,arguments)}function s(){o.apply(this,arguments)}function a(){o.apply(this,arguments)}var l,c=i(92).PlotTypes,h=i(281).generateTitleForGui,u=i(0).getLogger("Alerts.Band"),d=i(268);TradingView="object"==typeof t?t.TradingView:TradingView||{},l={create:function(e){var t,i=e||{},o=i.type;if("MainSeries"===o)t=n;else if("Study"===o||/^study_\w+/.test(o))t=r;else if("Value"===o)t=s;else{if(!/^LineTool.*/i.test(o))return u.logError("Unknown alert band type "+o),null;t=a}return new t(i)}},o.prototype.id=function(){return this._band.id},o.prototype.type=function(){return this._band.type},o.prototype.title=function(){return this._band.title},o.prototype.hasPlots=function(){return this._band.plots&&this._band.plots.length},o.prototype.getActualSymbol=function(){return this._band.actualSymbol},o.prototype.getSymbolString=function(){return this._band.symbolString},o.prototype.getPlotTitle=function(e){return e.title?e.title:e.type===c.OHLC_OPEN?e.ohlcTitle+" "+$.t("Open"):e.type===c.OHLC_HIGH?e.ohlcTitle+" "+$.t("High"):e.type===c.OHLC_LOW?e.ohlcTitle+" "+$.t("Low"):e.type===c.OHLC_CLOSE?e.ohlcTitle+" "+$.t("Close"):"vol"===e.id?$.t("Volume"):"vol_ma"===e.id?$.t("Volume MA"):"open"===e.id?$.t("Open"):"high"===e.id?$.t("High"):"low"===e.id?$.t("Low"):"close"===e.id?$.t("Close"):e.id},o.prototype.getPlots=function(e){var t,i=e||{},o=this;return this._band.plots&&this._band.plots.length&&"inputSelect"===i.format?(t=-1,this._band.plots.map(function(e){return t++,{value:t,title:o.getPlotTitle(e)}})):this._band.plots},inherit(n,o),n.prototype.title=function(e){var t=i(95),o=e||{},n=!!o.withInterval,r=this._band.actualSymbol;return t&&(r=t.shortName(r)),h({symbol:r,interval:n?this._band.interval:null,style:this._band.style,inputs:this._band.styleInputs||{},boxSize:this._band.boxSize,reversalAmount:this._band.reversalAmount,extended:o.extended})},n.prototype.getStyle=function(){return this._band.style},n.prototype.getStyleInputs=function(){return this._band.styleInputs},n.prototype.isJapaneseStyle=function(){return d.isJapaneseStyle(this._band.style)},n.prototype.isSpread=function(){return this._band.isSpread},n.prototype.isExtended=function(){return this._band.extendedHours},inherit(r,o),r.prototype.title=function(e){var t,i,o,n=e||{},r=n.withPlotTitle,s=this._band;return n.short&&s.shortTitle?t=s.shortTitle:s.title?t=s.title:(t=s.shortDescription||"Study",i=[],Object.keys(s.inputs).forEach(function(e){var t=s.inputs[e]&&s.inputs[e].id;t&&!s.inputs[e].isHidden&&void 0!==s.inputs[t]&&i.push(s.inputs[t])}),i.length&&(t+=" ("+i.join(", ")+")")),r&&(o=this.selectedPlot())&&(t+=" "+(o.title||$.t("Untitled Plot"))),t},r.prototype.selectedPlot=function(){var e=this._band;return void 0===e.plotIndex?null:this.getPlots().filter(function(t){return t.value===e.plotIndex})[0]||null},inherit(s,o),s.prototype.title=function(e){var t=this._band.value||0;return e.formatter?e.formatter.format(parseFloat(t)):""+parseFloat(t)},inherit(a,o),
e.exports.AlertBandAbstract=o,e.exports.AlertBandValue=s,e.exports.alertBandFactory=l}).call(t,i(58))},function(e,t,i){"use strict";function o(e){this._data=e,this.bars=e.bars,this._barWidth=n.optimalBarWidth(e.barSpacing),this._barBorderWidth=1}var n=i(42),r=i(11);o.prototype.draw=function(e){var t,i,o,n,r,s,a,l,c,h,u,d,p,f,_=this.bars,m=this._data.barSpacing,g=this._data.drawWick,v=this._data.drawBorder,y=this._data.wickColor,b=this._barBorderWidth,S=this._barWidth;if(e.lineCap="square",e.lineStyle=this._data.lineStyle,m<1){if(g){for(e.strokeStyle=y,e.lineWidth=1,e.beginPath(),h=_.length;h-- >0;)u=_[h],e.moveTo(u.time,u.low),e.lineTo(u.time,u.high);e.stroke()}for(e.lineWidth=1,d="",p=!1,e.beginPath(),h=_.length;h-- >0;)u=_[h],c=u.time,d!==u.color&&(p&&(e.stroke(),e.beginPath(),p=!1),e.strokeStyle=u.color,d=u.color),e.moveTo(u.time,u.open),e.lineTo(u.time,u.close),p=!0;p&&e.stroke()}else{if(_=_.slice().sort(function(e,t){return e.color>t.color?-1:e.color<t.color?1:0}),e.translate(-.5,-.5),e.lineWidth=b,g)for(f=y,e.fillStyle=y,h=_.length;h--;)u=_[h],c=u.time,t=u.open,i=u.high,o=u.low,n=u.close,u.wickColor&&u.wickColor!==f&&(e.fillStyle=u.wickColor,f=u.wickColor),a=Math.min(t,n),l=Math.max(t,n),u.hollow?(e.fillRect(c,i,1,a-i),e.fillRect(c,l,1,o-l)):e.fillRect(c,i,1,o-i);if(v)for(h=_.length;h--;)u=_[h],_[h+1]&&u.borderColor===_[h+1].borderColor||(e.fillStyle=u.borderColor),u.hollow||(c=u.time,t=u.open,n=u.close,r=Math.round(c-S),s=Math.round(c+S),a=Math.min(t,n),l=Math.max(t,n),e.fillRect(r,a,s-r+1,l-a+1));for(h=_.length;h--;)u=_[h],c=u.time,t=u.open,i=u.high,o=u.low,n=u.close,r=Math.round(c-S),s=Math.round(c+S),a=Math.min(t,n),l=Math.max(t,n),_[h+1]&&u.color===_[h+1].color||(e.strokeStyle=u.color),e.fillStyle=u.color,Math.abs(a-l)<=1&&(e.fillStyle=u.borderColor),u.hollow?(e.translate(-.5,-.5),e.strokeRect(r+1,a+1,s-r,l-a),e.translate(.5,.5)):(v&&(r+=1,a+=1,s-=1,l-=1),e.fillRect(r,a,s-r+1,l-a+1))}},o.prototype.hitTest=function(e){var t,i,o,s,a=this.bars,l=.5*this._data.barSpacing;if(0===a.length)return null;if(e.x<a[0].time-l)return null;if(e.x>a[a.length-1].time+l)return null;for(t=null,i=0;i<a.length;++i)if(o=a[i],e.x<=o.time+l){t=o;break}return s=n.selectionTolerance(this._barBorderWidth),t&&t.high-s<=e.y&&e.y<=t.low+s?this._data.hittest||new r(r.REGULAR):null},t.PaneRendererCandles=TradingView.PaneRendererCandles=o},,function(e,t,i){"use strict";var o,n,r,s,a;Object.defineProperty(t,"__esModule",{value:!0}),o=i(9),n=i(474),r=i(0),s=r.getLogger("PushStream"),a=function(){function e(e,t){this._channels=[],this._transport=new n.Transport(this._onPushStreamMessage.bind(this)),this._settings=t,this._messageHandler=e}return e.prototype.addChannel=function(e){o.assert(!this.hasChannel(e),"Channel already subscribed"),s.logNormal("Adding channel "+e),this._channels.push(e),this._transport.setUrl(this._generateUrl())},e.prototype.removeChannel=function(e){var t=this._channels.indexOf(e);o.assert(-1!==t,"There is no that channel"),s.logNormal("Removing channel "+e),this._channels.splice(t,1),
this._transport.setUrl(this._generateUrl())},e.prototype.getChannels=function(){return this._channels},e.prototype.hasChannel=function(e){return-1!==this._channels.indexOf(e)},e.prototype.connectionStatus=function(){return this._transport.connectionStatus()},e.prototype.connect=function(){o.assert(0!==this._channels.length,"There is no channels"),this._transport.connect()},e.prototype.disconnect=function(){this._transport.disconnect()},e.prototype.sendMessage=function(e){this._transport.sendMessage(e)},e.prototype._onPushStreamMessage=function(e){var t=JSON.parse(e),i=t.id,o=t.channel;-2===i?s.logWarn("Received unexpected message: about removed the channel"):i>0&&(s.logDebug('Received message: id="'+i+'" channel="'+o+'"'),this._messageHandler(t.text,i,o))},e.prototype._generateUrl=function(){var e=this._channels.join("/");return this._settings.url+"/"+this._settings.urlPath+"/"+e},e}(),t.PushStream=a},function(e,t,i){"use strict";function o(e){var t=e,i=function(){window.removeEventListener("online",i),t&&t()};return window.addEventListener("online",i),function(){t=null}}var n,r,s,a,l;Object.defineProperty(t,"__esModule",{value:!0}),n=i(239),r=i(22),s=i(0),a=s.getLogger("PushStream.Transport"),l=function(){function e(e){var t=this;this._url="",this._socket=null,this._reconnectCount=0,this._onlineCancellationToken=null,this._connectionStatus=new r(n.ConnectionStatus.Closed),this._socketCloseHandler=this._onCloseCallback.bind(this),this._socketErrorHandler=this._onErrorCallback.bind(this),this._socketOpenHandler=this._onOpenCallback.bind(this),this._socketMessageHandler=this._onMessageCallback.bind(this),this._shouldReconnect=!0,this._messageHandler=e,window.addEventListener("unload",function(){a.logNormal("Unload event comes - disconnecting without reconnect after that..."),t._shouldReconnect=!1,t.disconnect()},!1)}return e.prototype.setUrl=function(e){if(this._url!==e){var t=this._connectionStatus.value()!==n.ConnectionStatus.Closed;t&&this.disconnect(),this._url=e,t&&this.connect()}},e.prototype.connect=function(){if(this._connectionStatus.value()!==n.ConnectionStatus.Closed)return void a.logNormal("Attempt to open connection but it is not closed");this._socket&&(a.logError("Something went wrong - code 0x2"),this.disconnect()),this._onlineCancellationToken&&(this._onlineCancellationToken(),this._onlineCancellationToken=null),a.logNormal("Connecting to "+this._url),this._socket=new WebSocket(this._url),this._socket.addEventListener("error",this._socketErrorHandler),this._socket.addEventListener("close",this._socketCloseHandler),this._socket.addEventListener("open",this._socketOpenHandler),this._socket.addEventListener("message",this._socketMessageHandler),this._connectionStatus.setValue(n.ConnectionStatus.Connecting)},e.prototype.connectionStatus=function(){return this._connectionStatus.readonly()},e.prototype.disconnect=function(){if(this._connectionStatus.value()===n.ConnectionStatus.Closed)return void a.logNormal("Attempt to close connection but it is closed already")
;if(!this._socket)return void a.logError("Something went wrong - code 0x1");a.logNormal("Closing connection to: "+this._socket.url+", currentStatus: "+n.ConnectionStatus[this._connectionStatus.value()]),this._socket.removeEventListener("error",this._socketErrorHandler),this._socket.removeEventListener("close",this._socketCloseHandler),this._socket.removeEventListener("open",this._socketOpenHandler),this._socket.removeEventListener("message",this._socketMessageHandler);var e=this._socket;this._socket=null,this._connectionStatus.setValue(n.ConnectionStatus.Closed),e.readyState!==WebSocket.CLOSED&&e.close()},e.prototype.sendMessage=function(e){return this._connectionStatus.value()!==n.ConnectionStatus.Open?void a.logWarn("Attempt to send message but connection is not opened"):this._socket?void this._socket.send(e):void a.logError("Something went wrong - code 0x3")},e.prototype._onErrorCallback=function(){a.logInfo("Connection is closed by error"),this._tryReconnect()},e.prototype._onCloseCallback=function(e){a.logInfo("Connection is closed - code="+e.code+" msg="+e.reason),this._tryReconnect()},e.prototype._tryReconnect=function(){this.disconnect();var e=this._getReconnectTimeout();a.logNormal("Sleeping some time before reconnect "+e+"ms"),setTimeout(this._tryReconnectImpl.bind(this),e)},e.prototype._tryReconnectImpl=function(){var e=this;return this._shouldReconnect?(this._reconnectCount+=1,a.logInfo("Reconnecting count: "+this._reconnectCount),navigator.onLine?(a.logInfo("Network status: online - trying to connect"),void this.connect()):(a.logInfo("Network status: offline - wait until online"),void(this._onlineCancellationToken=o(function(){a.logInfo("Network status changed to online - trying to connect"),e.connect()})))):void a.logNormal("Skip reconnecting because of shouldReconnect state")},e.prototype._onOpenCallback=function(){a.logNormal("Connection opened"),this._reconnectCount=0,this._connectionStatus.setValue(n.ConnectionStatus.Open)},e.prototype._onMessageCallback=function(e){this._messageHandler(e.data)},e.prototype._getReconnectTimeout=function(){return this._reconnectCount<5?300:5e3},e}(),t.Transport=l},function(e,t,i){"use strict";var o,n,r;Object.defineProperty(t,"__esModule",{value:!0}),o=i(6),n=i(80),r=function(e){function t(t,i){var o=e.call(this)||this;return o._source=t,o._data=i,o}return o.__extends(t,e),t.prototype._updateRendererData=function(e){e.visible=!1;var t=this._source.lastValueData(this._data.plotIndex,!1);t.noData||(e.background=t.color,e.color=this.generateTextColor(t.color),e.coordinate=t.coordinate,e.floatCoordinate=t.floatCoordinate,e.text=t.text,e.visible=!0)},t}(n.PriceAxisView),t.StudyPriceAxisView=r},function(e,t,i){"use strict";function o(e){this.bars=e.bars,this.barSpacing=e.barSpacing,this.barWidth=n.optimalBarWidth(e.barSpacing),this.barLineWidth=Math.max(1,Math.round(this.barWidth)),this.dontDrawOpen=e.dontDrawOpen}var n=i(42),r=i(11);o.prototype.draw=function(e){var t,i,o;for(e.save(),e.translate(.5,.5),i=0;i<this.bars.length;++i)o=this.bars[i],
t!==o.color&&(e.fillStyle=o.color,t=o.color),e.fillRect(Math.round(o.time-this.barLineWidth/2),Math.round(o.high-this.barWidth/2),Math.round(this.barLineWidth),Math.round(o.low-o.high+this.barWidth)),this.barLineWidth<this.barSpacing-1&&(this.dontDrawOpen||e.fillRect(Math.round(o.time-1.5*this.barWidth),Math.round(o.open-this.barWidth/2),Math.round(1.5*this.barWidth),Math.round(this.barWidth)),e.fillRect(Math.round(o.time),Math.round(o.close-this.barWidth/2),Math.round(1.5*this.barWidth),Math.round(this.barWidth)));e.restore()},o.prototype.hitTest=function(e){var t,i,o,s,a=this.bars,l=.5*this.barSpacing;if(0===a.length)return null;if(e.x<a[0].time-l)return null;if(e.x>a[a.length-1].time+l)return null;for(t=null,i=0;i<a.length;++i)if(o=a[i],e.x<=o.time+l){t=o;break}return s=n.selectionTolerance(this.barLineWidth),t&&t.high-s<=e.y&&e.y<=t.low+s?new r(r.REGULAR):null},t.PaneRendererBars=TradingView.PaneRendererBars=o},function(e,t,i){"use strict";function o(e){e.forceLineColor=!1,r.call(this,e),this.color1=e.color1,this.color2=e.color2,this.bottom=e.bottom,this.isSeries=!!e.isSeries,this._simpleMode=e.simpleMode}var n=i(42).coordinateIsValid,r=i(271).PaneRendererLine;inherit(o,r),o.prototype.draw=function(e){var t,i,o,s,a,l,c,h,u,d,p,f;if(0!==this.items.length){for(e.lineCap="square",e.strokeStyle=this.lineColor,e.lineWidth=this.lineWidth,e.lineStyle=this.lineStyle,e.lineWidth=1,t=0;t<this.items.length&&!n(this.items[t].y);)t++;for(i=this.items.length-1;i>=0&&!n(this.items[i].y);)i--;if(!(t>=i)){for(e.translate(.5,.5),o={},s=this.items,a=t;a<=i;a++)l=s[a],c=l.style?l.style.color:this.lineColor,a<i&&s[a+1].style&&(h=s[a+1].style.color,c!==h&&(u=o[h]||[],u.push(l),o[h]=u)),d=o[c]||[],d.push(l),o[c]=d;for(c in o){for(d=o[c],e.beginPath(),p=0,a=0;a<d.length;a++)d[a].style&&d[a].style.color!==c&&(e.moveTo(d[p].x,this.bottom),this.walkLine(e,d.slice(p,a),!0,this.bottom),p=a);e.moveTo(d[p].x,this.bottom),this.walkLine(e,d.slice(p,d.length),!0,this.bottom),e.closePath(),this.isSeries?(f=e.createLinearGradient(0,0,0,this.bottom),f.addColorStop(0,this.color1),f.addColorStop(1,this.color2),e.fillStyle=f,this._simpleMode=!0):e.fillStyle=c,e.fill()}e.lineWidth=this.lineWidth,r.prototype.draw.call(this,e)}}},t.PaneRendererArea=TradingView.PaneRendererArea=o},function(e,t,i){"use strict";function o(e,t,i,o,n){var r,s,a,l,c;for(this._canvasesMap={},this._lines=e.split(/[^\S\r\n]*(?:\r\n|\r|\n)/),this._font=this._fontStyle(t,i,o,n),this._fontSize=n,r=$("<canvas>"),s=r.get(0).getContext("2d"),s.font=this._font,a=0,l=0;l<this._lines.length;l++)c=s.measureText(this._lines[l]).width,a=Math.max(a,c);this.textImageWidth=a+1,this.textImageHeight=this._lines.length*n}o.prototype.paintTo=function(e,t,i,o,n,r){var s=this._getTextImage(t),a=this._x(i,n,this.textImageWidth),l=this._y(o,r,this.textImageHeight);e.drawImage(s,a-.5,l-.5)},o.prototype._getTextImage=function(e){var t,i,o,n,r;if(this._canvasesMap[e])return this._canvasesMap[e].get(0);for(t=$("<canvas>").attr("width",this.textImageWidth).attr("height",this.textImageHeight),
i=t.get(0).getContext("2d"),i.textBaseline="top",i.font=this._font,i.textAlign="center",i.fillStyle=e,o=Math.round(this.textImageWidth/2),n=0,r=0;r<this._lines.length;r++)i.fillText(this._lines[r],o,n),n+=this._fontSize;return this._canvasesMap[e]=t,t.get(0)},o.prototype._x=function(e,t,i){var o=e;switch(t){case"left":break;case"right":o-=i;break;case"center":o-=i/2}return Math.round(o)},o.prototype._y=function(e,t,i){var o=e;switch(t){case"top":break;case"bottom":o-=i;break;case"middle":o-=i/2}return Math.round(o)},o.prototype._fontStyle=function(e,t,i,o){return(e?"bold ":"")+(t?"italic ":"")+o+"px "+i},e.exports=o},function(e,t,i){"use strict";function o(e){s.call(this,e)}function n(e){s.call(this,e)}function r(e){s.call(this,e)}var s=i(68).PaneRendererAbstractShape;inherit(o,s),o.prototype.drawShape=function(e){var t,i,o,n,r,s,a,l,c=this.width,h=this.height,u=Math.round(h/3),d=this._vertOffset-2*u,p=!1;for(i=0,o=this.items.length;i<o;i++)n=this.items[i],n.style&&null!=n.style.color?(r=n.style.color,s=n.style.borderColor):(r=this._color,s=this._borderColor),r!==t&&(t=r,p&&(e.fill(),e.stroke()),e.beginPath(),e.fillStyle=r,e.strokeStyle=s),a=n.x,l=n.y+d,e.moveTo(a,l),e.lineTo(a+c/2,l+h),e.lineTo(a-c/2,l+h),e.lineTo(a,l),p=!0;p&&(e.fill(),e.stroke())},inherit(n,s),n.prototype.drawShape=function(e){var t,i,o,n,r,s,a,l,c=this.width,h=this.height,u=Math.round(h/3),d=this._vertOffset-u,p=!1;for(i=0,o=this.items.length;i<o;i++)n=this.items[i],n.style&&null!=n.style.color?(r=n.style.color,s=n.style.borderColor):(r=this._color,s=this._borderColor),r!==t&&(t=r,p&&(e.fill(),e.stroke()),e.beginPath(),e.fillStyle=r,e.strokeStyle=s),a=n.x-c/2,l=n.y+d,e.moveTo(a,l),e.lineTo(a+c,l),e.lineTo(a+c/2,l+h),e.lineTo(a,l),p=!0;p&&(e.fill(),e.stroke())},inherit(r,s),r.prototype.drawShape=function(e){var t,i,o,n,r,s,a,l=this.width,c=this.height,h=this._vertOffset,u=!1;for(i=0,o=this.items.length;i<o;i++)n=this.items[i],r=n.style&&null!=n.style.color?n.style.color:this._color,r!==t&&(t=r,u&&e.fill(),e.beginPath(),e.fillStyle=r),s=n.x+l/2,a=n.y-c/2+h,e.moveTo(s,a),e.lineTo(s,a+c),e.lineTo(s-l,a+c/2),e.lineTo(s,a),u=!0;u&&e.fill()},t.PaneRendererTriangleApexUp=TradingView.PaneRendererTriangleApexUp=o,t.PaneRendererTriangleApexDown=TradingView.PaneRendererTriangleApexDown=n,t.PaneRendererTriangleApexLeft=TradingView.PaneRendererTriangleApexLeft=r},function(e,t,i){"use strict";function o(e){this._props=e,this._text="",this._size="12px",this._bold=!1}o.prototype.text=function(){return this._text},o.prototype.setText=function(e){this._text=e},o.prototype.color=function(){if(this._props)return this._props.scalesProperties.textColor.value();i.e(16).then(function(e){return(0,i(236).setThemedColor)("color-text-regular")}.bind(null,i)).catch(i.oe)},o.prototype.bold=function(){return this._bold},o.prototype.size=function(){return this._size},e.exports=o},function(e,t,i){"use strict";function o(e,t,o){var n,r,l="RegressionTrend@tv-basicstudies",d=h.lineToolNameForPointsBasedStudy(l);o=o||u.findStudyMetaInfo(e.studiesMetaData(),l),n=e.studyVersioning(),
r=t||c(o,null,null,n),r.merge({blockCopying:!0}),s.call(this,e,r,d),this._turnaroundCounter=1,this._turnaround="linreg_"+this._turnaroundCounter,this._metaInfo=o,this._graphics=new a(o),i.e(11).then(function(e){var t=i(1188).RegressionTrendPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}function n(e){return void 0!==e.startPrice&&void 0!==e.endPrice}var r=i(1).LineDataSource,s=i(132).StudyLineDataSource,a=i(183),l=i(34),c=l.prepareStudyProperties,h=l.Study,u=i(39),d=i(2).propertyPages;inherit(o,s),o.prototype.version=2,o.prototype.pointsCount=function(){return 2},o.prototype.recalcStudyIfNeeded=function(){this._studyId||2!==this._points.length||this._requestStudy()},o.prototype._requestStudy=function(){var e,t,i,o,n,r,s,a,l,c,u=this.points();if(!(u.length<2)){if(e=u[0],t=u[1],i=Math.min(e.index,t.index),o=Math.max(e.index,t.index),i===o)return void this.clearData();n=this._model.mainSeries().bars().valueAt(i),r=this._model.mainSeries().bars().valueAt(o),null!==n&&null!==r&&(s=1e3*n[TradingView.TIME_PLOT],a=1e3*r[TradingView.TIME_PLOT],l={"upper diviation":this.properties().inputs["upper diviation"].value(),"lower diviation":this.properties().inputs["lower diviation"].value(),"use upper diviation":this.properties().inputs["use upper diviation"].value(),"use lower diviation":this.properties().inputs["use lower diviation"].value(),"first bar time":s,"last bar time":a,source:this.properties().inputs.source.value()},c=this,this._studyId?(this._turnaround="linreg_"+ ++this._turnaroundCounter,this._model.chartApi().modifyStudy(this._studyId,this._turnaround,l,function(e){c.onData(e)})):(this._studyId=h.makeNextStudyId(),this._model.chartApi().createStudy(this._studyId,this._turnaround,this._model.mainSeries()._seriesId,this._metaInfo.fullId+"!",l,function(e){c.onData(e)})))}},o.prototype.onData=function(e){var t=this;if("data_update"===e.method&&e.params.customId==="pointset_"+this._currentPointsetId&&(r.prototype.onData.call(this,e),2===this._points.length&&this._requestStudy()),"data_update"===e.method&&e.params.customId===this._studyId){if(!this._checkTurnaround(e.params.turnaround))return;h.prototype._makeJSONForNSData.call(this,e,{}).then(function(i){i.data&&(i.indexes_replace?t._indexes=e.params.nonseries.indexes:(t._nonseriesdata=i.data,TradingView.isNaN(i.data.baseLine.startPrice)||TradingView.isNaN(i.data.baseLine.endPrice)||(t._points[0].price=t._nonseriesdata.baseLine.startPrice,t._points[1].price=t._nonseriesdata.baseLine.endPrice),t._indexes=e.params.nonseries.indexes),t.updateAllViews(),t._model.updateSource(t))})}},o.patchSourceState=function(e){var t={palettes:{},inputs:[{defval:2,id:"upper diviation",max:500,min:-500,name:$.t("Upper Deviation"),type:"integer"},{defval:-2,id:"lower diviation",max:500,min:-500,name:$.t("Lower Deviation"),type:"integer"},{defval:!0,id:"use upper diviation",name:$.t("Use Upper Deviation"),type:"bool"},{defval:!0,id:"use lower diviation",name:$.t("Use Lower Deviation"),type:"bool"},{defval:0,id:"first bar time",max:253370764800,min:0,
name:$.t("First bar time"),type:"time"},{defval:0,id:"last bar time",max:253370764800,min:0,name:$.t("Last bar time"),type:"time"},{defval:"close",id:"source",name:$.t("Source"),options:["open","high","low","close","hl2","hlc3","ohlc4"],type:"text"}],plots:[],graphics:{},defaults:{inputs:{"first bar time":0,"last bar time":0,"lower diviation":-2,source:"close","upper diviation":2,"use lower diviation":!0,"use upper diviation":!0}},_metainfoVersion:6,description:"Regression Trend",id:"RegressionTrend@tv-basicstudies",is_price_study:!0,shortDescription:"Reg Trend",shortId:"RegressionTrend",version:"2",fullId:"RegressionTrend@tv-basicstudies-2",name:"RegressionTrend@tv-basicstudies"};return e.metaInfo||(e.metaInfo=t),e},o.prototype.getInputsPropertyPage=function(){return d.LineToolRegressionTrendInputsPropertyPage},o.prototype.getStylesPropertyPage=function(){return d.StudyLinearRegressionStylesPropertyPage},o.prototype._isReady=function(){return this._nonseriesdata&&void 0!==this._nonseriesdata.startIndex&&void 0!==this._nonseriesdata.endIndex&&n(this._nonseriesdata.upLine)&&n(this._nonseriesdata.baseLine)&&n(this._nonseriesdata.downLine)},t.LineToolRegressionTrend=o},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M22.5 4v-1h-19.5v19.5h1v-18.5z"/><path d="M5.493 24v1h19.507v-19.5h-1v18.5z"/><path d="M5.275 23.432l18.213-18.213-.707-.707-18.213 18.213z"/><path d="M5.568 24.383l19.079-5.906-.296-.955-19.079 5.906z" id="Line-Copy-18"/><path d="M4.587 22.68l5.891-19.032-.955-.296-5.891 19.032z"/><path d="M3.5 11h21v-1h-21z"/><path d="M3.5 18h21v-1h-21z"/><path d="M10 3.5v21h1v-21z"/><path d="M17 3.5v21h1v-21z"/><path d="M23.975 23.475l1.025 1.025c0-11.874-9.626-21.5-21.5-21.5l1.025 1.025c10.506.517 18.932 8.944 19.45 19.45z"/><path d="M3.5 26c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM24.5 5c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t,i){"use strict";function o(e){this._studyId=e,this._maxToVers=n.ZERO,this._maxFromVers=n.ZERO,this._migrs=[]}var n=i(230).Version,r=i(0).getLogger("Chart.StudyMigration");o.prototype.addMigration=function(e,t,i){var o=n.parse(e),r=n.parse(t);o.isGreater(this._maxFromVers)&&(this._maxFromVers=o),r.isGreater(this._maxToVers)&&(this._maxToVers=r),this._migrs.push({fromVers:o,toVers:r,rules:i})},o.prototype.updateInputs=function(e,t,i){var o,n,s;if(!i)return i;for(o=TradingView.clone(i),n=e;n.isLess(t)&&null!=(s=this._findMigration(n));){if(r.logNormal("Migrating study inputs from "+s.fromVers+" to "+s.toVers+" version, studyId: "+this._studyId+", migration: "+JSON.stringify(s)+", inputs: "+JSON.stringify(i)),o=this._applyMigration(o,s),
!n.isLess(s.toVers))throw Error("Problems in study migration process... Possible infinite cycle has been detected and stopped.");n=s.toVers}return n>e&&r.logNormal("Study inputs migration is done, studyId: "+this._studyId+", inputs: "+JSON.stringify(o)),o},o.prototype._findMigration=function(e){var t,i,o=-1,n=this._maxFromVers;for(t=0;t<this._migrs.length;t++)i=this._migrs[t],i.fromVers.isLess(e)||i.fromVers.isLessOrEqual(n)&&(n=i.fromVers,o=t);return o<0?null:this._migrs[o]},o.prototype._applyMigration=function(e,t){var i,o,n,r=e;for(i=0;i<t.rules.length;i++)o=t.rules[i],n=this._getApplyRuleFun(o.type),r=n(r,o);return r},o.prototype._getApplyRuleFun=function(e){if("inputRemoved"===e)return o._applyInputRemovedRule;if("inputChangedType"===e)return o._applyInputChangedTypeRule;if("inputChangedMinMax"===e)return o._applyInputChangedMinMaxRule;if("inputChangedOptions"===e)return o._applyInputChangedOptionsRule;throw Error("Unknown migration rule type: "+e)},o._applyInputRemovedRule=function(e,t){if(!(t.inputId in e))return e;if("removeVal"!==t.action)throw Error("Unexpected rule.action="+t.action+" in rule.type="+t.type);var i=e[t.inputId];return delete e[t.inputId],r.logNormal("Input "+t.inputId+"="+i+" removed"),e},o._applyInputChangedTypeRule=function(e,t){var i=e[t.inputId];if("resetToDefVal"===t.action)return e[t.inputId]=t.defVal,r.logNormal("Input "+t.inputId+"="+i+" reset to default value "+t.defVal),e;if("convertVal"===t.action){if(null==i)return e;if("float"===t.inputTypeFrom&&"integer"===t.inputType)return e[t.inputId]=Math.round(e[t.inputId]),r.logNormal("Input "+t.inputId+"="+i+" converted to value "+e[t.inputId]),e;if("integer"===t.inputTypeFrom&&"float"===t.inputType)return e;if("text"===t.inputTypeFrom&&"source"===t.inputType)return o._isValidSource(i,t.options)?e:(e[t.inputId]=t.defVal,e);throw Error("Cannot convertVal from "+t.inputTypeFrom+" to "+t.inputType)}throw Error("Unknown action "+t.action+" for rule with type "+t.type)},o._isValidSource=function(e,t){return e.indexOf("$")>=0||t.indexOf(e)>=0},o._applyInputChangedMinMaxRule=function(e,t){if("adjustValIfNeeded"!==t.action)throw Error("Unknown action "+t.action+" for rule with type "+t.type);var i=e[t.inputId];return i<t.minVal?e[t.inputId]=t.minVal:i>t.maxVal&&(e[t.inputId]=t.maxVal),r.logNormal("Input "+t.inputId+"="+i+" adjusted to value "+e[t.inputId]),e},o._applyInputChangedOptionsRule=function(e,t){if(!(["text"].indexOf(t.inputType)>=0&&"resetToDefValIfNeeded"===t.action))throw Error("Unexpected rule.inputType="+t.inputType+" in rule.action="+t.action);var i=e[t.inputId];return t.options.indexOf(i)<0&&(e[t.inputId]=t.defVal,r.logNormal("Input "+t.inputId+"="+i+" reset to default value "+t.defVal)),e},e.exports=o},function(e,t,i){"use strict";function o(){a.call(this)}function n(e,t){this._constructor="LineToolFibSpeedResistanceArcs";var n=t||this.createPropertiesObject("linetoolfibwedge");r.call(this,e,n),e._fibWedgeLabelsCache||(e._fibWedgeLabelsCache=new o),i.e(11).then(function(e){var t=i(1119).FibWedgePaneView
;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var r=i(1).LineDataSource,s=i(31),a=i(133),l=i(2).propertyPages;inherit(o,a),o.prototype.levelsCount=function(){return n.LevelsCount},inherit(n,r),n.LevelsCount=11,n.prototype.getCache=function(){return this._model._fibWedgeLabelsCache||(this._model._fibWedgeLabelsCache=new o),this._model._fibWedgeLabelsCache},n.prototype.pointsCount=function(){return 3},n.prototype.title=function(){return"Fib Wedge"},n.prototype.setPoint=function(e,t){var i,o,n,s,a,l,c;r.prototype.setPoint.call(this,e,t),this._recursiveGuard||(this._recursiveGuard=!0,2===e?(i=this.pointToScreenPoint(this._points[0])[0],o=this.pointToScreenPoint(this._points[1])[0],n=this.pointToScreenPoint(this._points[2])[0],s=n.subtract(i).length(),a=o.subtract(i).normalized(),o=i.add(a.scaled(s)),l=this.screenPointToPoint(o),this._properties.points[1].price.setValue(l.price),this._properties.points[1].bar.setValue(l.index)):(i=this.pointToScreenPoint(this._points[0])[0],o=this.pointToScreenPoint(this._points[1])[0],n=this.pointToScreenPoint(this._points[2])[0],c=o.subtract(i).length(),a=n.subtract(i).normalized(),n=i.add(a.scaled(c)),l=this.screenPointToPoint(n),this._properties.points[2].price.setValue(l.price),this._properties.points[2].bar.setValue(l.index)),this._recursiveGuard=!1)},n.prototype.addPoint=function(e){var t,i,o,n,s,a,l,c;return 2===this._points.length&&(t=this.pointToScreenPoint(this._points[0])[0],i=this.pointToScreenPoint(this._points[1])[0],this.priceScale().isPercent()&&(o=this.ownerSource().firstValue(),e.price=this.priceScale().priceRange().convertFromPercent(e.price,o)),n=this.pointToScreenPoint(e)[0],s=i.subtract(t).length(),a=n.subtract(t).normalized(),n=t.add(a.scaled(s)),l=this.priceScale().coordinateToPrice(n.y),c=Math.round(this._model.timeScale().coordinateToIndex(n.x)),e={index:c,price:l}),r.prototype.addPoint.call(this,e)},n.prototype.processErase=function(e,t){var i="level"+t,o=this.properties()[i].visible;e.setProperty(o,!1,"Erase level line")},n.prototype.createPropertiesObject=function(e,t,i){return new s(e,t,i,{range:[1,11]})},n.prototype.getInputsPropertyPage=function(){return null},n.prototype.getStylesPropertyPage=function(){return l.LineToolFibWedgeStylesPropertyPage},t.LineToolFibWedge=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.Bars=0]="Bars",e[e.Line=1]="Line",e[e.OpenClose=2]="OpenClose",e[e.LineOpen=3]="LineOpen",e[e.LineHigh=4]="LineHigh",e[e.LineLow=5]="LineLow",e[e.LineHL2=6]="LineHL2"}(t.LineToolBarsPatternMode||(t.LineToolBarsPatternMode={}))},function(e,t,i){"use strict";(function(e){function o(e,t){this._pane=e,this._timeScale=t}function n(e){this._line=e}function r(e,t){this._adapter=new n(this),this._constructor="LineToolExecution";var o=t||new l("linetoolexecution");this.customization={forcePriceAxisLabel:!1,disableSelection:!0,disableErasing:!0},s.call(this,e,o),i.e(11).then(function(e){var t=i(1206).ExecutionPaneView;this._setPaneViews([new t(this,this._model)])
}.bind(this).bind(null,i)).catch(i.oe)}var s=i(1).LineDataSource,a=i(269),l=i(7).DefaultProperty,c=i(24).PlotRowSearchMode;o.prototype._cachedByBarIndexOrderedExecutions={},o.recreateOrderedByBarsSourcesCache=function(e){var t,i,n,r,s;for(o.clearOrderedByBarsSourcesCache(),t=o.prototype,i=e.orderedSources(),n=0;n<i.length;++n)r=i[n],r._adapter&&void 0!==r._adapter._index&&(s=t._cachedByBarIndexOrderedExecutions[r._adapter._index],t._cachedByBarIndexOrderedExecutions[r._adapter._index]=s||[],t._cachedByBarIndexOrderedExecutions[r._adapter._index].push(r))},o.clearOrderedByBarsSourcesCache=function(){o.prototype._cachedByBarIndexOrderedExecutions={}},o.prototype.getXYCoordinate=function(e,t,i){var o,n,s,a,l,h,u,d,p,f,_=0,m=e.getDirection(),g="buy"===m,v=this._pane.model().mainSeries();if(v.bars&&(o=g?10:-10,null!==(n=v.bars().search(i,c.NearestLeft))&&(i=n.index,s=g?n.value[TradingView.LOW_PLOT]:n.value[TradingView.HIGH_PLOT],a=v.priceScale(),a.isPercent()&&(l=v.firstValue(),s=a.priceRange().convertToPercent(s,l)),_=a.priceToCoordinate(s)+o)),e._index=i,h=t.visibleBars(),!isFinite(i)||null===h||i>h.lastBar()||i<h.firstBar())return{x:-1,y:-1};for(u=this._cachedByBarIndexOrderedExecutions[i]||this._pane.orderedSources(),d=u.length-1;d>=0;--d)if((p=u[d])instanceof r&&p._adapter._index===i&&p._adapter.getDirection()===m){if(p===e._line)break;f=p._adapter._height(),_=g?_+f:_-f}return{x:t.indexToCoordinate(i),y:_}},n.prototype._height=function(){var e,t=this.getArrowHeight(),i=this.getArrowSpacing();return this.getText()&&a.fontHeight(this.getFont()),e=10,t+i+0+e},n.prototype.getIndex=function(){return this._line._model.timeScale().baseIndex()-this._line.points()[0].index},n.prototype.setIndex=function(e){var t,i=this._line._model.timeScale(),o=i.baseIndex(),n=o-Math.abs(e);return this._line.startMoving(this._line.points()[0]),t=TradingView.merge({},this._line.points()[0]),t.index=n,this._line.move(t),this._line.endMoving(),this},n.prototype.getTime=function(){return this._unixtime},n.prototype.setTime=function(e){var t=this._line._model.mainSeries();return this._unixtime=ChartApiInstance.alignTimePoint?ChartApiInstance.alignTimePoint(e,t.interval(),t.symbolInfo()):e,this._line.restorePoints([{offset:0,price:this.getPrice(),time_t:this._unixtime}],[]),this._line.createServerPoints(),this},n.prototype.getPrice=function(){return this._line.points().length>0?this._line.points()[0].price:this._line._timePoint.length>0?this._line._timePoint[0].price:void 0},n.prototype.setPrice=function(e){return this._line.points().length>0&&(this._line.points()[0].price=e),this._line._timePoint.length>0&&(this._line._timePoint[0].price=e),this},n.prototype.getText=function(){return this._line.properties().text.value()},n.prototype.setText=function(e){return this._line.properties().text.setValue(e||""),this._line.updateAllViewsAndRedraw(),this},n.prototype.getArrowHeight=function(){return this._line.properties().arrowHeight.value()},n.prototype.setArrowHeight=function(e){return this._line.properties().arrowHeight.setValue(e||5),this},
n.prototype.getArrowSpacing=function(){return this._line.properties().arrowSpacing.value()},n.prototype.setArrowSpacing=function(e){return this._line.properties().arrowSpacing.setValue(e||1),this},n.prototype.getDirection=function(){return this._line.properties().direction.value()},n.prototype.setDirection=function(e){return this._line.properties().direction.setValue(e||"buy"),this},n.prototype.getArrowColor=function(){return a.getColorFromProperties(this._line.properties().arrowColor,this._line.properties().arrowTransparency)},n.prototype.setArrowColor=function(e){return a.setColorToProperties(e,this._line.properties().arrowColor,this._line.properties().arrowTransparency),this},n.prototype.getTextColor=function(){return a.getColorFromProperties(this._line.properties().textColor,this._line.properties().textTransparency)},n.prototype.setTextColor=function(e){return a.setColorToProperties(e,this._line.properties().textColor,this._line.properties().textTransparency),this},n.prototype.getFont=function(){return a.getFontFromProperties(this._line.properties().fontFamily,this._line.properties().fontSize,this._line.properties().fontBold,this._line.properties().fontItalic)},n.prototype.setFont=function(e){return a.setFontToProperties(e,this._line.properties().fontFamily,this._line.properties().fontSize,this._line.properties().fontBold,this._line.properties().fontItalic),this},n.prototype.setTooltip=function(e){return null==e?e="":e+="",this._line.properties().tooltip.setValue(e),this},n.prototype.getTooltip=function(){return this._line.properties().tooltip.value()},n.prototype.remove=function(){this._line._model.removeSource(this._line),delete this._line},inherit(r,s),r.POINTS_COUNT=1,r.skipMagnetting=!0,r.prototype.pointsCount=function(){return r.POINTS_COUNT},r.prototype.title=function(){return"Execution"},r.prototype.hasContextMenu=function(){return!1},r.prototype.state=function(){return null},r.prototype.updateAllViews=function(){return this._isVisible()?s.prototype.updateAllViews.call(this):null},r.prototype.priceAxisViews=function(e,t){return this._isVisible()?s.prototype.priceAxisViews.call(this,e,t):null},r.prototype._isVisible=function(){var e=this._model.properties().tradingProperties.showExecutions.value();return e=e&&!this._model.isInReplay()},r.prototype.paneViews=function(t){return TradingView.printing&&!e.enabled("snapshot_trading_drawings")?null:this._model.properties().tradingProperties.showExecutions.value()?s.prototype.paneViews.call(this,t):null},r.prototype.userEditEnabled=function(){return!1},r.prototype.showInObjectTree=function(){return!1},r.prototype.getInputsPropertyPage=function(){return null},t.ExecutionsPositionController=o,t.LineToolExecution=r}).call(t,i(3))},function(e,t,i){"use strict";function o(e,t,i){return new a(e,t,i)}var n,r,s,a;Object.defineProperty(t,"__esModule",{value:!0}),n=i(6),r=i(10),s=i(31),a=function(e){function t(t,i,o){return e.call(this,t,i,o,{names:["width","color","visible"]})||this}return n.__extends(t,e),t.prototype._iterateLevels=function(e,t){var i,o,n
;for(i in e.levels)if(e.levels[i]&&r.isSameType(e.levels[i],t.typecheck())){o=t.tpl();for(n in this._map.names)this._map.names.hasOwnProperty(n)&&(o=t.fill(n,this._map.names[n],e.levels[i],o));e.levels[i]=o}return e},t}(s),t.LineToolGannComplexProperty=a,t.createPropertiesObject=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineTool5PointsPattern";var o=t||new r("linetool5pointspattern");n.call(this,e,o),i.e(11).then(function(e){var t=i(1120).Pattern5PaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(1).LineDataSource,r=i(7).DefaultProperty,s=i(184).DateTimeFormatter,a=i(2).propertyPages;inherit(o,n),o.prototype.pointsCount=function(){return 5},o.prototype.title=function(){return"XABCD Pattern"},o.prototype._tooltipFieldsHash={time0:{title:"Date 1",value:null},price0:{title:"Price 1",value:null},time1:{title:"Date 2",value:null},price1:{title:"Price 2",value:null},time2:{title:"Date 3",value:null},price2:{title:"Price 3",value:null},time3:{title:"Date 4",value:null},price3:{title:"Price 4",value:null},time4:{title:"Date 5",value:null},price4:{title:"Price 5",value:null}},o.prototype._updateTooltip=function(){var e,t,i,o,n,r=this._tooltipFieldsHash,a=this.points().m_values;a[0]&&(t=this._model.timeScale().indexToUserTime(a[0].index),r.time0.value=t?new s(this._model.mainSeries().isDWM()).format(t):0,r.price0.value=this._model.mainSeries()._formatter.format(a[0].price)),a[1]&&(e=this._model.timeScale().indexToUserTime(a[1].index),r.time1.value=e?new s(this._model.mainSeries().isDWM()).format(e):0,r.price1.value=this._model.mainSeries()._formatter.format(a[1].price)),a[2]&&(i=this._model.timeScale().indexToUserTime(a[2].index),r.time2.value=i?new s(this._model.mainSeries().isDWM()).format(i):0,r.price2.value=this._model.mainSeries()._formatter.format(a[2].price)),a[3]&&(o=this._model.timeScale().indexToUserTime(a[3].index),r.time3.value=o?new s(this._model.mainSeries().isDWM()).format(o):0,r.price3.value=this._model.mainSeries()._formatter.format(a[3].price)),a[4]&&(n=this._model.timeScale().indexToUserTime(a[4].index),r.time4.value=e?new s(this._model.mainSeries().isDWM()).format(n):0,r.price4.value=this._model.mainSeries()._formatter.format(a[4].price))},o.prototype.tooltip=function(){return this._updateTooltip(),this._formatTooltip()},o.prototype.getStylesPropertyPage=function(){return a.LineToolLineTool5PointsPatternStylesPropertyPage},t.LineTool5PointsPattern=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolNote";var n=t||new s("linetoolnote");r.call(this,e,n),this.version=o.version,i.e(11).then(function(e){var t=i(1228).NotePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}function n(e,t){var i=t||new s("linetoolnoteabsolute");i.locked.value()||i.locked.setValue(!0),o.call(this,e,i)}var r=i(1).LineDataSource,s=i(7).DefaultProperty,a=i(2).propertyPages;inherit(o,r),o.TOOLTIP_WIDTH=300,o.TOOLTIP_PADDING=10,o.TOOLTIP_LINESPACING=5,o.version=1,o.prototype.pointsCount=function(){
return 1},o.prototype.title=function(){return $.t("Note")},o.prototype.applyTemplate=function(e){delete e.locked,delete e.text,r.prototype.applyTemplate.call(this,e)},o.prototype.getTooltipWidth=function(){return o.TOOLTIP_WIDTH},o.prototype.getTooltipPadding=function(){return o.TOOLTIP_PADDING},o.prototype.getTooltipLineSpacing=function(){return o.TOOLTIP_LINESPACING},inherit(n,o),n.prototype.title=function(){return $.t("Anchored Note")},o.prototype.state=function(e){var t=r.prototype.state.call(this,e);return e&&(t.state.fixedSize=!1),t},o.prototype.getStylesPropertyPage=function(){return a.LineToolNotePropertyPage},t.LineToolNote=o,t.LineToolNoteAbsolute=n},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolText";var o=t||new a("linetooltext");r.call(this,e,o),this._timeScale=e.timeScale(),this._barSpacing=e.timeScale().barSpacing(),i.e(11).then(function(e){var t=i(650).TextPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}function n(e,t){var i=t||new a("linetooltextabsolute");i.locked.value()||i.locked.setValue(!0),o.call(this,e,i)}var r=i(1).LineDataSource,s=i(52).DataSource,a=i(7).DefaultProperty,l=i(2).propertyPages;inherit(o,r),o.MIN_WIDTH=100,o.prototype.setPoint=function(e,t){var i,n,r=this.properties();if(0===e&&r.wordWrapWidth&&r.wordWrapWidth.value()){if(i=r.locked&&r.locked.value()?this.fixedPoints()[0].x:this._timeScale.indexToCoordinate(this.points()[0].index),n=this._timeScale.indexToCoordinate(t.index)-i-~~(r.fontsize.value()/6),!isFinite(n))return;r.wordWrapWidth.setValue(Math.max(o.MIN_WIDTH,n))}},o.prototype.pointsCount=function(){return 1},o.prototype.title=function(){return $.t("Text")},o.prototype.setPriceScale=function(e){s.prototype.setPriceScale.call(this,e),e&&e.priceRange()&&(this._priceDencity=e.height()/e.priceRange().length(),this._isPriceDencityLog=e.isLog())},o.prototype.restoreSize=function(){this._barSpacing=this._model.timeScale().barSpacing(),this._priceDencity=this.priceScale().height()/this.priceScale().priceRange().length(),this.updateAllViews(),this._model.updateSource(this)},o.prototype.applyTemplate=function(e){delete e.locked,delete e.text,r.prototype.applyTemplate.call(this,e)},inherit(n,o),n.prototype.title=function(){return $.t("Anchored Text")},o.prototype.state=function(e){var t=r.prototype.state.call(this,e);return e&&(t.state.fixedSize=!1),t},o.prototype.getInputsPropertyPage=function(){return null},o.prototype.getStylesPropertyPage=function(){return l.LineToolTextStylesPropertyPage},t.LineToolText=o,t.LineToolTextAbsolute=n},function(e,t,i){"use strict";var o,n,r,s,a;Object.defineProperty(t,"__esModule",{value:!0}),o=i(6),n=i(9),r=i(80),s=i(10),a=function(e){function t(t){var i=e.call(this)||this;return i._source=t,i}return o.__extends(t,e),t.prototype._updateRendererData=function(e){var t,i,o,r,a,l;if(e.visible=!1,t=this._source.points(),i=this._source.priceScale(),0!==t.length&&null!==i&&!i.isEmpty()&&(o=t[0],isFinite(o.price))){if(i.isPercent()){if(!(r=this._source.ownerSource()))return
;if(a=r.firstValue(),!s.isNumber(a))return;o.price=n.ensureNotNull(i.priceRange()).convertToPercent(o.price,a)}l=this._source.properties().linecolor.value(),e.background=l,e.color=this.generateTextColor(l),e.coordinate=i.priceToCoordinate(o.price),e.text=i.formatter().format(o.price),e.visible=!0}},t}(r.PriceAxisView),t.LineToolHorzLinePriceAxisView=a},function(e,t,i){"use strict";function o(e,t,i){this._study=e,this._series=t,this._model=i,this._invalidated=!0,this._orderArrow={vMargin:o.DEFAULT_ORDER_ARROW_VMARGIN,width:o.DEFAULT_ORDER_ARROW_WIDTH,height:o.DEFAULT_ORDER_ARROW_HEIGHT},this._exitLineWidth=o.DEFAULT_ORDER_ARROW_EXIT_LINE_WIDTH,this._priceArrow={width:o.DEFAULT_PRICE_ARROW_WIDTH,height:o.DEFAULT_PRICE_ARROW_HEIGHT},this._text={vMargin:o.DEFAULT_TEXT_VMARGIN,font:o.DEFAULT_FONT,fontSize:o.DEFAULT_FONT_SIZE},this._checkHideTextIfBarSpacingLT=o.DEFAULT_CHECK_HIDE_TEXT_IF_BARSPACING_LT,this._textIsVisible=!0,this._colors={entryBuy:o.DEFAULT_ENTRY_BUY_COLOR,entrySell:o.DEFAULT_ENTRY_SELL_COLOR,exit:o.DEFAULT_EXIT_COLOR},this._items={entryBuy:[],entrySell:[],exit:[]},this._textWidths={},this._study.properties().strategy.orders.subscribe(this,this.update)}var n=i(8).Point,r=i(835).PaneRendererStudyStrategyOrders,s=i(41).CompositeRenderer,a=i(24).PlotRowSearchMode;o.DEFAULT_ORDER_ARROW_VMARGIN=7,o.DEFAULT_ORDER_ARROW_WIDTH=9,o.DEFAULT_ORDER_ARROW_HEIGHT=11,o.DEFAULT_ORDER_ARROW_EXIT_LINE_WIDTH=2,o.DEFAULT_PRICE_ARROW_WIDTH=5,o.DEFAULT_PRICE_ARROW_HEIGHT=9,o.DEFAULT_TEXT_VMARGIN=2,o.DEFAULT_FONT="Arial",o.DEFAULT_FONT_SIZE=10,o.DEFAULT_CHECK_HIDE_TEXT_IF_BARSPACING_LT=10,o.DEFAULT_ENTRY_BUY_COLOR="#008fff",o.DEFAULT_ENTRY_SELL_COLOR="#f00",o.DEFAULT_EXIT_COLOR="#cc47ed",o.prototype._updateImpl=function(){var e,t,i,o,r,s,l,c,h,u,d,p,f,_,m,g,v,y,b,S,w,T,P,C,x,E;if(this.clearItems(),(e=this._study.ordersData())&&e.length&&(t=this._model.timeScale(),i=this._series.priceScale(),!(!t||!i||t&&t.isEmpty()||i&&i.isEmpty())&&null!==(o=t.visibleBars()))){for(r=this._study.barsIndexes(),s=this._series.nearestIndex(o.firstBar(),a.NearestRight),l=this._series.nearestIndex(o.lastBar(),a.NearestLeft),c=s,h=[],u=[];c<=l;c++)for(d=-1;-1!==(d=r.indexOf(c,d+1));)(p=e[d])&&(h.push(p),u.push(c));for(f=this._study.properties(),_=f.strategy.orders.showLabels.value(),m=f.strategy.orders.showQty.value(),g=_||m,g&&t.barSpacing()<this._checkHideTextIfBarSpacingLT&&this._orderArrow.width*h.length*2>t.width()&&(g=!1),v=g&&this._text.fontSize+this._text.vMargin||0,y=v&&v*(_+m),b=0,S={upper:[],lower:[]};b<h.length;b++)p=h[b],d=u[b],w=t.indexToCoordinate(d,!0),T=i.priceToCoordinate(this._series[p.b?"low":"high"](d),!0),P=p.b?"lower":"upper",C="number"==typeof S[P][d]&&S[P][d]||0,T+=p.b?C:-C,"number"!=typeof S[P][d]&&(S[P][d]=0),S[P][d]+=(p.e?0:this._exitLineWidth)+this._orderArrow.vMargin+this._orderArrow.height+y,x=i.priceToCoordinate(p.p,!0),E=p.e?!p.b&&p.e?"entrySell":"entryBuy":"exit",this._items[E].push({orderPoint:new n(w,T),pricePoint:new n(w,x),label:_&&(p.c||p.id||"Untitled")||null,qty:m&&(p.b?"+":"-")+~~p.q||null,pos:P})
;this._textLabelIsVisible=_,this._textQtyIsVisible=m,this._textIsVisible=g}},o.prototype.update=function(){this._invalidated=!0},o.prototype.clearItems=function(){this._items.entryBuy.length=this._items.entrySell.length=this._items.exit.length=0},o.prototype.renderer=function(){var e,t,i,o=this._study.properties();if(o.visible.value()&&o.strategy.orders.visible.value()&&(e=this._series.priceScale(),(this._invalidated||e&&e.isScaled())&&(this._updateImpl(),this._invalidated=!1),this._items.entryBuy.length||this._items.entrySell.length||this._items.exit.length)){t=new s;for(i in this._items)this._items[i].length&&t.append(new r({items:this._items[i],color:this._colors[i],orderArrow:this._orderArrow,exitLineWidth:"exit"===i&&this._exitLineWidth||0,priceArrow:this._priceArrow,text:this._textIsVisible&&this._text||null},this._textWidths));return t}},e.exports=o},function(e,t,i){"use strict";var o,n,r,s,a,l,c,h,u,d;Object.defineProperty(t,"__esModule",{value:!0}),o=i(6),n=i(9),r=i(130),s=i(80),a=i(3),l=i(32),c=a.enabled("countdown"),h=a.enabled("price_scale_always_last_bar_value"),u=[l.STYLE_BARS,l.STYLE_CANDLES,l.STYLE_LINE,l.STYLE_AREA,l.STYLE_HOLLOW_CANDLES,l.STYLE_HEIKEN_ASHI],d=function(e){function t(t,i){var o=e.call(this)||this;return o._source=t,o._data=i,o}return o.__extends(t,e),t.prototype._getSource=function(){return this._source},t.prototype._getData=function(){return this._data},t.prototype._isCountdownEnabled=function(){return c},t.prototype._countdownText=function(){var e,t,i,o,s,a,l,c,h,u,d;return this._source.isDWM()?"":(e=1e3*n.ensure(n.ensureNotNull(this._source.data().bars().last()).value[0]),t=1e3*this._source.serverTimeOffset(),i=r.Interval.parse(this._source.interval()),o=i.multiplier()||0,s=i.kind()===r.Interval.SECONDS?o:60*o,a=e.valueOf()+1e3*s,l=(new Date).valueOf()+t,(c=Math.round((a-l)/1e3))<=0?"":(c=Math.min(c,s),h=null,c>=3600&&(h=this._addLeadingZero(Math.floor(c/3600))),c%=3600,u=this._addLeadingZero(Math.floor(c/60)),c%=60,d=this._addLeadingZero(Math.floor(c)),null!==h?h+":"+u+":"+d:u+":"+d))},t.prototype._updateRendererData=function(e){var t,i,o,n,r;e.visible=!1,this._data.model.properties().scalesProperties.showSeriesLastValue.value()&&(t=this._source.lastValueData(TradingView.CLOSE_PLOT,h),t.noData||(i=this._source.properties(),i.style.value()===l.STYLE_HEIKEN_ASHI&&i.haStyle.showRealLastPrice.value()&&(o=this._source.lastValueData(TradingView.CLOSE_PLOT,!1),n=this._source.lastValueData(TradingView.CLOSE_PLOT,!0),!o.noData&&!n.noData&&o.index===n.index)||(r="",c&&i.showCountdown.value()&&-1!==u.indexOf(i.style.value())&&(r=this._countdownText()),e.secondLine=r,e.background=this._source.priceLineColor(t.color),e.color=this.generateTextColor(e.background),e.coordinate=t.coordinate,e.floatCoordinate=t.floatCoordinate,e.text=t.text,e.visible=!0)))},t.prototype._addLeadingZero=function(e){return("0"+e).slice(-2)},t}(s.PriceAxisView),t.SeriesPriceAxisView=d},function(e,t,i){"use strict";function o(e,t){this.m_series=e,this.m_model=t,this.m_bars=[],this._invalidated=!0,
this._isMarkersEnabled=x.enabled("source_selection_markers")}function n(e,t){o.call(this,e,t)}function r(e,t){o.call(this,e,t)}function s(e,t){o.call(this,e,t)}function a(e,t){o.call(this,e,t)}function l(e,t,i){this.m_series=e,this.m_priceSource=t,this.m_model=i,this.m_items=[],this._barGetter={open:function(e){return e[TradingView.OPEN_PLOT]},high:function(e){return e[TradingView.HIGH_PLOT]},low:function(e){return e[TradingView.LOW_PLOT]},close:function(e){return e[TradingView.CLOSE_PLOT]},hl2:function(e){return(e[TradingView.HIGH_PLOT]+e[TradingView.LOW_PLOT])/2},hlc3:function(e){return(e[TradingView.HIGH_PLOT]+e[TradingView.LOW_PLOT]+e[TradingView.CLOSE_PLOT])/3},ohlc4:function(e){return(e[TradingView.OPEN_PLOT]+e[TradingView.HIGH_PLOT]+e[TradingView.LOW_PLOT]+e[TradingView.CLOSE_PLOT])/4}}[this.m_priceSource]}function c(e,t,i){l.call(this,e,t,i),this._invaidated=!0}function h(e,t,i){l.call(this,e,t,i),this._invaidated=!0}function u(e,t,i){l.call(this,e,t,i),this._invaidated=!0,this._renderer=new b}function d(e,t){this._source=e,this._model=t,this._points=[new p(0,0)],this._invalidated=!0,this._renderer=new S;var i={cursorType:E.VerticalResize,pressedMouseMoveHandler:function(e){var t,i,o,n,r=this._source.priceScale();null!==r&&(t=this._source.properties().baselineStyle,i=r.height(),o=100-e.y/i*100,n=o<0?0:Math.round(10*o)/10,t.baseLevelPercentage.setValue(Math.max(Math.min(n,100),0)))}.bind(this)};this._renderer.setHitTest(new _(_.CUSTOM_MOVE,i))}var p=i(8).Point,f=i(155).SelectionRenderer,_=i(11),m=i(476).PaneRendererBars,g=i(271).PaneRendererLine,v=i(477).PaneRendererArea,y=i(471).PaneRendererCandles,b=i(849).PaneRendererBaseline,S=i(156).HorizontalLineRenderer,w=i(41).CompositeRenderer,T=i(275),P=i(33),C=i(24).PlotRowSearchMode,x=i(3),E=i(509).PaneCursorType;o.prototype.update=function(){this._invalidated=!0},o.prototype._updateImpl=function(){var e,t,i,o,n,r,s,a,l,c,h,u,d,f,m,g=this;if(this.m_bars=[],!this.m_model.timeScale().isEmpty()&&!this.m_series.priceScale().isEmpty()&&null!==(e=this.m_model.timeScale().visibleBars())&&0!==this.m_series.bars().size()){for(t=this.m_series.nearestIndex(e.firstBar(),C.NearestRight),i=this.m_series.nearestIndex(e.lastBar(),C.NearestLeft);t<=i&&null===this.m_series.bars().valueAt(t);t++);if(!(t>i)&&(e=this.m_series.bars().range(t,i),n=this.m_series.priceScale(),r=n.properties().percentage.value(),s=this.m_series.barColorer(),a={},e.each(function(e,t){var i,n;void 0!==t[TradingView.OPEN_PLOT]&&void 0!==t[TradingView.HIGH_PLOT]&&void 0!==t[TradingView.LOW_PLOT]&&void 0!==t[TradingView.CLOSE_PLOT]&&(void 0===o&&(o=t[TradingView.CLOSE_PLOT]),i={},i.time=Math.round(e),r?(i.open=100*(t[TradingView.OPEN_PLOT]-o)/o,i.high=100*(t[TradingView.HIGH_PLOT]-o)/o,i.low=100*(t[TradingView.LOW_PLOT]-o)/o,i.close=100*(t[TradingView.CLOSE_PLOT]-o)/o):(i.open=t[TradingView.OPEN_PLOT],i.high=t[TradingView.HIGH_PLOT],i.low=t[TradingView.LOW_PLOT],i.close=t[TradingView.CLOSE_PLOT]),a.value=t,n=t[TradingView.STYLE_PLOT]?t[TradingView.STYLE_PLOT]:s.barStyle(e,!1,a),t[TradingView.STYLE_PLOT]=n,
a.previousValue=t,i.color=n.barColor,i.borderColor=n.barBorderColor,i.wickColor=n.barWickColor,i.hollow=n.isBarHollow,g.m_bars.push(i))},this),n.barPricesToCoordinates(this.m_bars),this.m_model.timeScale().barIndexesToCoordinates(this.m_bars),this.m_series===this.m_model.selectedSource()))for(l=T(t,i),this._selectionData={points:[]},this._selectionData.hittestResult=_.REGULAR,c=0;c<l.length;c++)h=l[c],null!==(u=this.m_series.bars().valueAt(h))&&(d=.5*(u[TradingView.OPEN_PLOT]+u[TradingView.CLOSE_PLOT]),n.isPercentage()&&(d=100*(d-o)/o),f=this.m_model.timeScale().indexToCoordinate(h),m=this.m_series.priceScale().priceToCoordinate(d),this._selectionData.points.push(new p(f,m)))}},o.prototype.items=function(){return this.m_bars},o.prototype.dump=function(){var e={};return e.bars=this.m_bars,e},inherit(n,o),n.prototype.renderer=function(){var e,t;return this._invalidated&&(this._updateImpl(),this._invalidated=!1),e={},e.bars=this.m_bars,e.barSpacing=this.m_model.timeScale().barSpacing(),e.dontDrawOpen=this.m_series.properties().barStyle.dontDrawOpen.value(),t=new w,t.append(new m(e)),this.m_series===this.m_model.selectedSource()&&this._isMarkersEnabled&&t.append(new f(this._selectionData)),t},inherit(r,o),r.prototype.renderer=function(){var e,t;return this._invalidated&&(this._updateImpl(),this._invalidated=!1),e={},e.bars=this.m_bars,e.barSpacing=this.m_model.timeScale().barSpacing(),e.drawWick=this.m_series.properties().candleStyle.drawWick.value(),e.drawBorder=this.m_series.properties().candleStyle.drawBorder.value(),e.borderColor=this.m_series.properties().candleStyle.borderColor.value(),e.wickColor=this.m_series.properties().candleStyle.wickColor.value(),t=new w,t.append(new y(e)),this.m_series===this.m_model.selectedSource()&&this._isMarkersEnabled&&t.append(new f(this._selectionData)),t},inherit(s,o),s.prototype.renderer=function(){var e,t;return this._invalidated&&(this._updateImpl(),this._invalidated=!1),e={},e.bars=this.m_bars,e.barSpacing=this.m_model.timeScale().barSpacing(),e.drawWick=this.m_series.properties().haStyle.drawWick.value(),e.drawBorder=this.m_series.properties().haStyle.drawBorder.value(),e.borderColor=this.m_series.properties().haStyle.borderColor.value(),e.wickColor=this.m_series.properties().haStyle.wickColor.value(),t=new w,t.append(new y(e)),this.m_series===this.m_model.selectedSource()&&this._isMarkersEnabled&&t.append(new f(this._selectionData)),t},inherit(a,o),a.prototype.renderer=function(){var e,t;return this._invalidated&&(this._updateImpl(),this._invalidated=!1),e={},e.bars=this.m_bars,e.barSpacing=this.m_model.timeScale().barSpacing(),e.drawWick=this.m_series.properties().hollowCandleStyle.drawWick.value(),e.drawBorder=this.m_series.properties().hollowCandleStyle.drawBorder.value(),e.borderColor=this.m_series.properties().hollowCandleStyle.borderColor.value(),e.wickColor=this.m_series.properties().hollowCandleStyle.wickColor.value(),t=new w,t.append(new y(e)),this.m_series===this.m_model.selectedSource()&&this._isMarkersEnabled&&t.append(new f(this._selectionData)),t},
l.prototype.update=function(){var e,t,i,o,n,r,s,a,l,c,h,u,d,f;if(this.m_items=[],!this.m_model.timeScale().isEmpty()&&this.m_series.priceScale()&&!this.m_series.priceScale().isEmpty()&&null!==(e=this.m_model.timeScale().visibleBars())&&0!==this.m_series.bars().size()&&(t=this.m_series.nearestIndex(e.firstBar(),C.NearestRight),i=this.m_series.nearestIndex(e.lastBar(),C.NearestLeft),e=this.m_series.bars().range(t,i),n=this.m_series.priceScale(),r={color:this.m_series.properties().lineStyle.color.value()},s=n.properties().percentage.value(),e.each(function(e,t){var i,n=this._barGetter(t);return void 0!==n&&null!==n&&(void 0===o&&(o=n),s&&(n=100*(n-o)/o),i=new p(e,n),i.style=r,this.m_items.push(i),!1)}.bind(this)),n.pointsArrayToCoordinates(this.m_items),this.m_model.timeScale().indexesToCoordinates(this.m_items),this.m_series===this.m_model.selectedSource()))for(a=T(t,i),this._selectionData={points:[]},this._selectionData.hittestResult=_.REGULAR,l=0;l<a.length;l++)c=a[l],h=this.m_series.data().valueAt(c),u=this._barGetter(h),n.isPercentage()&&(u=100*(u-o)/o),d=this.m_model.timeScale().indexToCoordinate(c),f=this.m_series.priceScale().priceToCoordinate(u),this._selectionData.points.push(new p(d,f))},inherit(c,l),c.prototype.update=function(){this._invalidated=!0},c.prototype.renderer=function(){var e,t,i,o;return this._invalidated&&(l.prototype.update.call(this),this._invalidated=!1),e=this.m_series.properties().lineStyle,t={barSpacing:this.m_model.timeScale().barSpacing(),items:this.m_items,lineColor:e.color.value(),lineStyle:e.linestyle.value(),withMarkers:e.styleType.value()===TradingView.Series.STYLE_LINE_TYPE_MARKERS,withSteps:e.styleType.value()===TradingView.Series.STYLE_LINE_TYPE_STEP,lineWidth:e.linewidth.value(),simpleMode:!0},i=new g(t),this.m_series===this.m_model.selectedSource()?(o=new w,o.append(i),this._isMarkersEnabled&&o.append(new f(this._selectionData))):o=i,o},inherit(h,l),h.prototype.update=function(){this._invalidated=!0},h.prototype.renderer=function(){var e,t,i;return this._invalidated&&(l.prototype.update.call(this),this._invalidated=!1),e={},e.simpleMode=!1,e.barSpacing=this.m_model.timeScale().barSpacing(),e.items=this.m_items,e.lineColor=this.m_series.properties().areaStyle.linecolor.value(),e.lineStyle=this.m_series.properties().areaStyle.linestyle.value(),e.lineWidth=this.m_series.properties().areaStyle.linewidth.value(),t=this.m_series.properties().areaStyle.transparency.value(),e.isSeries=!0,e.color1=P.generateColor(this.m_series.properties().areaStyle.color1.value(),t),e.color2=P.generateColor(this.m_series.properties().areaStyle.color2.value(),t),e.bottom=this.m_series.priceScale().height(),i=new w,i.append(new v(e)),this.m_series===this.m_model.selectedSource()&&this._isMarkersEnabled&&i.append(new f(this._selectionData)),i},inherit(u,l),u.prototype.update=function(){this._invalidated=!0},u.prototype._updateImpl=function(){var e,t;l.prototype.update.call(this),e=this.m_series.properties().baselineStyle,t=e.transparency.value(),
this._topFillColor1=P.generateColor(e.topFillColor1.value(),t),this._topFillColor2=P.generateColor(e.topFillColor2.value(),t),this._bottomFillColor1=P.generateColor(e.bottomFillColor1.value(),t),this._bottomFillColor2=P.generateColor(e.bottomFillColor2.value(),t),this._topLineColor=e.topLineColor.value(),this._bottomLineColor=e.bottomLineColor.value(),this._topLineWidth=e.topLineWidth.value(),this._bottomLineWidth=e.bottomLineWidth.value(),this._barSpacing=this.m_model.timeScale().barSpacing(),this._bottom=this.m_series.priceScale().height(),this._baseLevelCoordinate=Math.round(this._bottom*(Math.abs(100-e.baseLevelPercentage.value())/100))},u.prototype.renderer=function(){this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._renderer.setData({items:this.m_items,topFillColor1:this._topFillColor1,topFillColor2:this._topFillColor2,bottomFillColor1:this._bottomFillColor1,bottomFillColor2:this._bottomFillColor2,topLineColor:this._topLineColor,bottomLineColor:this._bottomLineColor,topLineWidth:this._topLineWidth,bottomLineWidth:this._bottomLineWidth,lineStyle:CanvasEx.LINESTYLE_SOLID,barSpacing:this._barSpacing,baseLevelCoordinate:this._baseLevelCoordinate,bottom:this._bottom});var e=new w;return e.append(this._renderer),this.m_series===this.m_model.selectedSource()&&e.append(new f(this._selectionData)),e},d.prototype.update=function(){this._invalidated=!0},d.prototype._updateImpl=function(e){var t=this._source.properties().baselineStyle,i=Math.abs(100-t.baseLevelPercentage.value());this._visible=!0,this._points=[new p(0,Math.round(e*(i/100)))],this._color=t.baselineColor.value()},d.prototype.renderer=function(e){return this._invalidated&&(this._updateImpl(e),this._invalidated=!1),this._renderer.setData({visible:this._visible,width:this._model.timeScale().width(),height:e,points:this._points,color:this._color,linewidth:1,linestyle:CanvasEx.LINESTYLE_SPARSE_DOTTED}),this._renderer},t.SeriesBarsPaneView=n,t.SeriesCandlesPaneView=r,t.SeriesHollowCandlesPaneView=a,t.SeriesLinePaneView=c,t.SeriesAreaPaneView=h,t.SeriesHeikenAshiPaneView=s,t.SeriesBaselinePaneView=u,t.SeriesBaselineLinePaneView=d},function(e,t,i){"use strict";var o,n;Object.defineProperty(t,"__esModule",{value:!0}),o=i(9),n=function(){function e(e,t){o.assert(e<=t,"The last bar in the bars range should be greater than or equal to the first bar"),this._firstBar=e,this._lastBar=t}return e.prototype.firstBar=function(){return this._firstBar},e.prototype.lastBar=function(){return this._lastBar},e.prototype.count=function(){return this._lastBar-this._firstBar+1},e.prototype.contains=function(e){return this._firstBar<=e&&e<=this._lastBar},e}(),t.BarsRange=n},function(e,t,i){"use strict";function o(e){return e+"("+new Date(1e3*e).toUTCString()+")"}function n(e){var t,i,o,n;return e+="",t=e.slice(0),i=!1,o=t[t.length-1],-1==="DWM".indexOf(o)&&"S"!==o&&(i=!0,o=""),n=parseInt(i?t:t.length>1?t.slice(0,t.length-1):1),{resolution:o,interval:n}}var r,s=i(855),a=i(94),l=i(130).Interval,c=!1,h=null,u=0,d=function(e,t){this._session=new s.Session,
this._session.init(e.timezone,e.session),this._symbolInfo=e,this._resolution=t,this._extrapolatedData=[],this._modelId=u++,this._valid=!!e.timezone&&!!e.session,c&&console.log('Created model "{0}", interval "{1}", session "{2}", tz "{3}"'.format(this._modelId,this._resolution,e.session,e.timezone))};d.prototype.uniqueId=function(){return this._modelId},d.prototype.isValid=function(){return this._valid},d.prototype._barBuilder=function(){if(!this._builderCache){var e=n(this._resolution);this._builderCache=s.newBarBuilder(e.resolution,e.interval,this._session,this._session)}return this._builderCache},d.prototype.distance=function(e,t){var i,n,r,a,l;return isNumber(e)&&isNumber(t)&&this.isValid()?(i=this._extrapolatedData.length>0?this._extrapolatedData[0]:null,n=i&&this._extrapolatedData[this._extrapolatedData.length-1],1e3*e!==i&&(this._extrapolatedData=[1e3*e],i=null,n=null),(null===i||1e3*t>n)&&(r=500,a=s.extrapolateBarsFrontToTime(this._barBuilder(),n||1e3*e,1e3*t,r),this._extrapolatedData=this._extrapolatedData.concat(a)),(n=this._extrapolatedData[this._extrapolatedData.length-1])<1e3*t?{success:!1}:(l=this._extrapolatedData.indexOf(1e3*t),-1!==l?(c&&console.log('Model "{0}" "{1}", distance between "{2}" and "{3}" is "{4}"'.format(this._modelId,this._resolution,o(e),o(t),l)),{success:!0,result:l}):{success:!1})):{success:!1}},d.prototype.projectTime=function(e,t){var i,n,r,a;return isNumber(e)&&isNumber(t)&&this.isValid()?(i=this._extrapolatedData.length>0?this._extrapolatedData[0]:null,n=i&&this._extrapolatedData[this._extrapolatedData.length-1],1e3*e!==i&&(this._extrapolatedData=[1e3*e],i=null,n=null),(null===i||t>=this._extrapolatedData.length)&&(r=s.extrapolateBarsFrontByCount(this._barBuilder(),n||1e3*e,t-this._extrapolatedData.length+1),this._extrapolatedData=this._extrapolatedData.concat(r)),t<this._extrapolatedData.length?(a=this._extrapolatedData[t]/1e3,c&&console.log('Model "{0}" "{1}", proj.time from "{2}" offset "{3}" is "{4}"'.format(this._modelId,this._resolution,o(e),t,o(a))),a):e):e},r=function(e,t){this._source=e,this._target=t,this._isSessionTheSame=e._symbolInfo.timezone===t._symbolInfo.timezone&&e._symbolInfo.session===t._symbolInfo.session,this._isResolutionTheSame=e._resolution===t._resolution,this._shouldCorrectTradingDay=l.isDWM(e._resolution)&&!this._isSessionTheSame,this._cache={},null===h&&(h=new s.Session,h.init("UTC","24x7"))},r.prototype._sourceTargetBuilder=function(){var e,t;return this._sourceTargetBuilderCache||(e=n(this._target._resolution),t=this._isSessionTheSame?this._target._session:h,this._sourceTargetBuilderCache=s.newBarBuilder(e.resolution,e.interval,this._target._session,t)),this._sourceTargetBuilderCache},r.prototype.sourceTimeToTargetTime=function(e){var t,i,n,r,s,l;return this._isSessionTheSame&&this._isResolutionTheSame?e:isNumber(e)&&this._source.isValid()&&this._target.isValid()?(t=this._cache[e],t||(i=1e3*e,this._shouldCorrectTradingDay&&(n=a.utc_to_cal(this._source._session.timezone,i),
n=this._source._session.spec.correctTradingDay(n,this._source._session.timezone),r=new Date(n),a.set_hms(r,0,0,0,0),i=r.valueOf()),s=this._sourceTargetBuilder(),s.moveTo(i),l=s.indexOfBar(i),t=s.startOfBar(Math.max(0,l))/1e3,this._cache[e]=t),c&&console.log('Model "{0}" "{1}" sourceTime "{2}" => model "{3}" "{4}" targetTime "{5}"'.format(this._source.uniqueId(),this._source._resolution,o(e),this._target.uniqueId(),this._target._resolution,o(t))),t):e},e.exports.SyncPoint=r,e.exports.SyncModel=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.Original=0]="Original",e[e.Schiff=1]="Schiff",e[e.Inside=2]="Inside",e[e.Schiff2=3]="Schiff2"}(t.LineToolPitchforkStyle||(t.LineToolPitchforkStyle={}))},,function(e,t,i){function o(e,t,i,s,a){if(!i)return void r.logDebug("Missed undo model");n.call(this,e,t,!0,i,s),a?e.callbacks().subscribe(this,a):e.callbacks().subscribe(this,o.prototype.onActionCallback)}var n=i(535).Binding,r=i(0).getLogger("Chart.PropertyPage.ActionBinder");inherit(o,n),o.prototype.onActionCallback=function(e){this._undoModel.setProperty(this._property,this.value(),this._undoText)},o.prototype.value=function(){return this.control().checked},o.prototype.setValue=function(e){return this.control().checked=!!e},t.ActionBinder=o},function(e,t,i){"use strict";var o=function(){function e(e){switch(e){case"c67":case"m67":case"c45":return"copy";case"c86":case"m86":case"s45":return"paste";case"c88":case"m88":case"s46":return"cut"}}function t(e){var t=[];return e.shiftKey&&t.push("s"),e.ctrlKey&&t.push("c"),e.metaKey&&t.push("m"),e.altKey&&t.push("a"),t.push(e.keyCode),t.join("")}function i(e){var t=$.Event(u+":"+e);return $(window).trigger(t,{AppClipboard:f}),t}function o(o){var n,r,s;if((document.activeElement===document.body||document.activeElement===document.documentElement)&&(n=t(o),r=e(n))){if("keydown"===o.type)d[n]=!0;else if(d[n])return;if(document.getSelection){if(!document.getSelection().isCollapsed)return}else if(document.selection&&"None"!==document.selection.type)return;o.isDefaultPrevented()||(s=i(r),s.isDefaultPrevented()&&o.preventDefault())}}function n(e){e=e.originalEvent||e,e.key===h&&i("change")}function r(){p||($(document).on("keypress keydown",o),$(window).on("storage",n),p=!0)}function s(){$(document).off("keypress keydown",o),$(window).off("storage",n),$(window).off(u+":copy"),$(window).off(u+":paste"),$(window).off(u+":cut"),$(window).off(u+":change"),p=!1}function a(){try{return JSON.parse(TVLocalStorage.getItem(h))}catch(e){return null}}function l(e){if(null==e)return c();var t=JSON.stringify(e);t!==TVLocalStorage.getItem(h)&&(TVLocalStorage.setItem(h,t),i("change"))}function c(){TVLocalStorage.getItem(h)&&(TVLocalStorage.removeItem(h),i("change"))}var h="application-clipboard",u="appclip",d={},p=!1,f={init:r,set:l,get:a,clear:c,destroy:s};return f}();e.exports=o},function(e,t){},function(e,t,i){"use strict";function o(e,t){return void 0===t&&(t=!0),new Promise(function(i,o){var h=n.getExchange(e)
;return h?s.enabled(a.ProductFeatures.IDC_NO_NEED_AGREEMENT)?i(e):l.checkIfExchangeAvailable(h).then(function(n){return n?i(e):s.enabled(a.ProductFeatures.IDC_AVAILABLE_DELAY)?t?void r.fetch("/idc-sign-agreement-check/"+h+"/",{credentials:"include"}).then(function(t){return t.json().then(function(t){return t.res===c.DELAY_NOT_AVAILABLE?o({exchange:h,errCode:t.res,reason:"delay not available",symbol:e}):t.res===c.NEED_SIGN_AGREEMENT?o({exchange:h,errCode:t.res,reason:"need sign agreement",symbol:e}):t.res===c.NEED_ADD_SERVICE?o({exchange:h,errCode:t.res,reason:"need add service",symbol:e}):i(e)})}).catch(function(){i(e)}):i(e):o({exchange:h,errCode:c.DELAY_NOT_AVAILABLE,reason:"delay not available",symbol:e})}):i(e)})}var n,r,s,a,l,c;Object.defineProperty(t,"__esModule",{value:!0}),n=i(95),r=i(64),s=i(3),a=i(27),l=i(503),c=i(449),t.check=o},function(e,t,i){"use strict";function o(e){var t,i;return!!r.isIDCExchange(e)&&(e="exchange-{0}".format(e.toLowerCase()),t=window.pro,i=t.getProduct(e),void 0!==i.idc_service_codes_delay&&((!Array.isArray(i.included_exchanges)||!i.included_exchanges.some(function(e){return t.hasPackage("exchange-{0}".format(e))}))&&(!t.hasPackage(e)&&!t.hasPackage(e+"_dly"))))}function n(e){var t=window.pro;return new Promise(function(i){window.is_authenticated?!t.getIDCExchanges(!0).length||t.isInvalidShopConf()?t.updateShopConf().then(function(){i(!o(e))}).catch(function(){i(!0)}):i(!o(e)):i(!0)})}Object.defineProperty(t,"__esModule",{value:!0}),i(28);var r=i(447);t.checkIfExchangeAvailable=n},,function(e,t,i){"use strict";function o(){var e,t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o="";return i.feature&&(o=a.features[i.feature],(0,s.trackEvent)("Referral program enabled","feature "+i.feature)),e=[o?o+"<br/><br/>":"",$.t('You can become PRO to use this and many other features with the full version of <a href="{0}" target="_blank">TradingView</a>.').format((0,r.referenceToTradingView)())].join("\n"),t={title:$.t("This feature is available only on TradingView"),width:500,destroyOnClose:!0,addClass:"tv-referral-dialog",contentWrapTemplate:'\n\t\t\t<div class="tv-dialog__section tv-dialog__section--no-border">\n\t\t\t\t<div class="tv-text"></div>\n\t\t\t</div>',actionsWrapTemplate:'<div class="tv-dialog__section tv-dialog__section--actions tv-dialog__section--no-border">',content:'<p class="tv-referral-dialog__content">'+e+"</p>",actions:[{name:"yes",type:"primary",text:$.t("Lets go!")}]},new n.TVModal(t).on("action:yes",function(e){window.open((0,r.referenceToTradingView)(),"_blank"),e.destroy()})}var n,r,s,a;Object.defineProperty(t,"__esModule",{value:!0}),t.showGoToTradingViewReferralDialog=o,i(565),n=i(38),r=i(466),s=i(20),a={features:{alerts:$.t("Stay on top of market moves! Alerts are immediate notifications when markets meet your custom criteria. Pick from visual popups, audio signals & email alerts."),pinescript:$.t("Create your own indicators and strategies! Pine Script is a flexible and efficient language for doing just that."),
saveload:$.t("Save the analysis you do! Your custom settings, indicator setups and so on are saved onsite as individual charts for later access from anywhere."),customIntervals:$.t("Customize how you look at the markets! View charts in custom timeframes, such as 7 minutes, 12 minutes, or even 8 hours per bar."),kagiRenko:$.t("Get a new look at the markets with advanced chart types! Use Kagi and Renko charts with intraday resolutions for a complete picture."),plusMenu:$.t("Stay on top of market moves. Set alerts and place orders in one click!"),indicators:$.t("Maximum number of indicators on TradingView widget is 3.")}}},function(e,t,i){"use strict";function o(e,t,i){if(!e||!/[0-9a-zA-Z]{8}/.test(e))return"";if(e&&t){return"/chart/"+t+"/"+e+(i?"-"+i:"")+"/"}return"/v/"+e+"/"}function n(e){var t;return c.test(e)?(t=e.match(c)||[],{image_url:t[1]}):h.test(e)?(t=e.match(h)||[],{image_url:t[2],symbol:t[1],title:t[3]}):u.test(e)?(t=e.match(u)||[],{image_url:t[1],title:t[2]}):d.test(e)?{image_url:e}:{}}function r(e){var t,i;return e&&/[0-9a-zA-Z]{8}/.test(e)?(t=l.environment(),"battle"===t||"staging"===t?(i=e.charAt(0).toLowerCase(),"https://s3.amazonaws.com/"+("battle"===t?"tradingview":"tradingview_staging")+"/"+i+"/"+e+".png"):"/i/"+e+"/"):""}function s(e){var t,i,o,n;return e&&/[0-9a-zA-Z]{8}/.test(e)?(t=l.environment(),"battle"===t||"staging"===t?(i=e.charAt(0).toLowerCase(),o="battle"===t?"tradingview":"tradingview_staging",n="https://s3.amazonaws.com/"+o+"/snapshots/"+i,{preview:n+"/"+e+"_thumb.png",url:n+"/"+e+".png"}):(n=window.location.protocol+"//"+window.location.host,{preview:n+"/x/"+e+"/s/",url:n+"/x/"+e+"/"})):null}var a,l,c,h,u,d;Object.defineProperty(t,"__esModule",{value:!0}),a=i(567),l=i(50),c=RegExp(a.urlsRegExp.publishedChartOld),h=RegExp(a.urlsRegExp.publishedChart),u=RegExp(a.urlsRegExp.publishedScript),d=RegExp(a.urlsRegExp.imageUrl),t.createPublishedChartUrl=o,t.parsePublishedChartUrl=n,t.createPublishedChartImageUrl=r,t.createSnapshotImageUrls=s},function(e,t,i){"use strict";function o(e){this._options=e||{},this._setInput(),this._caption=$('<i class="interval-caption">').html("&nbsp;"),this._helpTooltipTrigger=$('<i class="help-tooltip-trigger apply-common-tooltip common-tooltip-below">').text("?").attr("title",$.t("Type the interval number for minute charts (i.e. 5 if it is going to be a five minute chart). Or number plus letter for H (Hourly), D (Daily), W (Weekly), M (Monthly) intervals (i.e. D or 2H)")),this._dialogTitle=$.t("Change Interval")}var n=i(93),r=i(179);o.prototype._setInput=function(){this._input=$('<input type="text" class="change-interval-input" autocomplete="off" maxlength="4">'),this._input.on("keypress",this._handleInput.bind(this)).on("input",function(){this._validate(),this._updateCaption()}.bind(this)).on("blur",function(){setTimeout(this._submit.bind(this),0)}.bind(this))},o.prototype._validate=function(){var e=this._input.val();this._parsed=r.parseIntervalValue(e),this._valid=!this._parsed.error,this._supported=!this._parsed.error&&r.intervalIsSupported(e),
!this._supported||this._parsed.unit&&"H"!==this._parsed.unit||this._parsed.qty*("H"===this._parsed.unit?60:1)>1440&&(this._supported=!1)},o.prototype._updateCaption=function(){var e,t,i;this._valid&&this._supported?(t=this._parsed.qty||1,i=this._parsed.unit?{H:"hour",D:"day",W:"week",M:"month",S:"second"}[this._parsed.unit]:"minute",e=t+" "+$.t(i,{count:t}),this._input.add(this._caption).removeClass("error")):(e=this._parsed.error?"&nbsp;":$.t("Not applicable"),this._input.add(this._caption).addClass("error")),this._caption.html(e)},o.prototype._handleInput=function(e){if(13===e.which)return void this._submit();e.ctrlKey||e.metaKey||!e.charCode||!e.which||e.which<=32||r.isIntervalChar(String.fromCharCode(e.charCode))||e.preventDefault()},o.prototype._submit=function(){var e,t;TVDialogs.isOpen(this._dialogTitle)&&(this._valid&&this._supported&&(e=r.sanitizeIntervalValue(this._input.val()),t=n.interval.value(),e&&t!==e&&"function"==typeof this._options.callback&&this._options.callback(e)),TVDialogs.destroy(this._dialogTitle))},o.prototype._setInitialValue=function(e){var t,i;e=e||this._options.initialValue,t="",i=!1,e&&","!==e?t=r.sanitizeIntervalValue(e)||"":(e=n.interval.value(),t=e,i=!0),this._input.val(t),i&&this._input.select()},o.prototype.isValid=function(){return!!this._valid},o.prototype.show=function(e){var t=TVDialogs.createDialog(this._dialogTitle,{hideCloseCross:!0,addClass:"change-interval-dialog"}),i=t.find("._tv-dialog-content");return t.css("min-width",0),i.css("min-width",0).mousedown(function(e){this._input.is(e.target)||e.preventDefault()}.bind(this)).append(this._input.add(this._caption).add(this._helpTooltipTrigger)),TVDialogs.applyHandlers(t),TVDialogs.positionDialog(t),this._setInitialValue(e),this._validate(),this._updateCaption(),t},e.exports=o},function(e,t,i){"use strict";(function(e){function o(e,t){this._lastClickedId=null,this._model=e,this._study=t,this._metaInfo=t.metaInfo(),this._lollipops={},this._textCache={},this.templatesCache={},this._invalidated=!0,this.templatesCache.hovered=this.createTemplate(this.hoveredStyle),this.templatesCache.default=this.createTemplate(this.defaultStyle),e.properties().paneProperties.background.subscribe(this,this.onPaneBgChange)}function n(e){this.data=e}function r(e){this.data=e,this._hittest=new d(d.CUSTOM,e)}function s(e,t){this._data=e,this._paneView=t,this.textRenderer=new s.TextRenderer(e.style.lollipop.importance)}function a(e,t){this.defaultStyle={strokeStyle:"#eb4d5c",lineWidth:1,fillStyle:"white",barLine:{lineStyle:CanvasEx.LINESTYLE_DASHED},lollipop:{width:32,height:96,circleHeight:16,radius:12,lineWidth:2,importance:"earnings",strokeStyle:"#eb4d5c",fillStyle:e.properties().paneProperties.background.value(),fillCircle:!0,text:{label:"E",strokeStyle:"#eb4d5c",font:"normal 12px Verdana, Arial, sans-serif"}}};var i={strokeStyle:"#e8304f",lollipop:{fillCircle:!0,fillStyle:"#eb4d5c",text:{strokeStyle:"white"}}};this.hoveredStyle=$.extend(!0,{},this.defaultStyle,i),o.call(this,e,t)}function l(e,t){this.defaultStyle={strokeStyle:"#53b987",
lineWidth:1,fillStyle:"white",barLine:{lineStyle:CanvasEx.LINESTYLE_DASHED},lollipop:{width:32,height:96,circleHeight:16,radius:12,lineWidth:2,importance:"splits",strokeStyle:"#53b987",fillStyle:e.properties().paneProperties.background.value(),fillCircle:!0,text:{label:"S",strokeStyle:"#53b987",font:"normal 12px Verdana, Arial, sans-serif"}}};var i={strokeStyle:"#53b987",lollipop:{fillCircle:!0,fillStyle:"#53b987",text:{strokeStyle:"white"}}};this.hoveredStyle=$.extend(!0,{},this.defaultStyle,i),o.call(this,e,t)}function c(e,t){this.defaultStyle={strokeStyle:"#0496ff",lineWidth:1,fillStyle:"white",barLine:{lineStyle:CanvasEx.LINESTYLE_DASHED},lollipop:{width:32,height:96,circleHeight:16,radius:12,lineWidth:2,importance:"dividends",strokeStyle:"#0496ff",fillStyle:e.properties().paneProperties.background.value(),fillCircle:!0,text:{label:"D",strokeStyle:"#0496ff",font:"normal 12px Verdana, Arial, sans-serif"}}};var i={strokeStyle:"#0496ff",lollipop:{fillCircle:!0,fillStyle:"#0496ff",text:{strokeStyle:"white"}}};this.hoveredStyle=$.extend(!0,{},this.defaultStyle,i),o.call(this,e,t)}var h=i(8).Point,u=i(70).pointInCircle,d=i(11),p=i(41).CompositeRenderer,f=i(260).Tooltip,_=i(86);o.prototype.onPaneBgChange=function(){this.defaultStyle.lollipop.fillStyle=this._model.properties().paneProperties.background.value(),this._stylesCache=null,Object.keys(this.templatesCache).forEach(function(e){0===e.indexOf("default")&&(this.templatesCache[e]=null)},this)},o.prototype.onClickOutside=function(){this._lastClickedId=null},o.prototype.closeTooltips=function(){var e,t;for(e in this._lollipops)this._lollipops.hasOwnProperty(e)&&(t=this._lollipops[e],t.visible&&(t.tooltip.isOpened()&&t.tooltip.hide(),t.visible=!1))},o.prototype.getLastClickedLollipopId=function(){return this._lastClickedId},o.prototype._setStackStudies=function(){var e,t,i;if(this._stackStudies=[],!(this._study instanceof _.study_ESD$TV_EARNINGS))for(e=this._model.dataSources(),t=0;t<e.length;++t)((i=e[t])instanceof _.study_ESD$TV_EARNINGS||i instanceof _.study_ESD$TV_SPLITS&&this._study instanceof _.study_ESD$TV_DIVIDENDS)&&this._stackStudies.push(i)},o.prototype._getY=function(){var e,t,i=0,o=this._model.panes();for(e=o.length;e--;)t=o[e],t.containsMainSeries()&&(i+=t.height());return i},o.prototype.update=function(){this._invalidated=!0},o.prototype.updateImpl=function(){var e,t,i,o,n,r,s,a,l,c,h,u;this._setStackStudies(),e=this,t=this._study.data(),i=this._model.timeScale(),o=i.visibleBars(),n=this._model.mainSeries().bars(),r=this._study.priceScale(),s=this._model.mainSeries(),a=s.firstBar(),r&&!r.isEmpty()&&!i.isEmpty()&&a&&t&&(this.closeTooltips(),l=this._getY(),c=o.firstBar(),h=o.lastBar(),u=t.range(c,h),u.each(function(t,o){var s,a=0;for(s=0;s<e._stackStudies.length;++s)e._stackStudies[s].data().contains(t)&&++a;t>c&&t<h&&e.addLollipop(l,n,i,r,t,o,a)}),this.afterUpdate(l,n,i,r))},o.prototype.addLollipop=function(e,t,i,o,n,r,s){var a,l,c,u,d,p,_,m,g=r[0],v=this._model.mainSeries().symbolInfo();v&&(a=v.name,l=null,c=this._study.metaInfo().id+"_"+g+"_"+a,
u=this._model.lastHittestData(),d=u&&u.id===c,d&&null!==(p=t.valueAt(n))&&(_=p[TradingView.LOW_PLOT],o.isPercent()&&(m=this._model.mainSeries().firstValue(),_=o.priceRange().convertToPercent(_,m)),l=o.priceToCoordinate(_)),this._lollipops[c]=$.extend({id:c,visible:!0,basePoint:new h(i.indexToCoordinate(n)+1,e),hovered:d||c===this.getLastClickedLollipopId(),barY:l,stack:s,tooltip:this._lollipops.hasOwnProperty(c)?this._lollipops[c].tooltip:new f},this.extraData(r)))},o.prototype.afterUpdate=function(e,t,i){},o.prototype.extraData=function(e){throw Error("Not Implemented")},o.prototype.createText=function(e,t){throw Error("Not Implemented")},o.prototype.showBarLine=function(){return!0},o.prototype.getStyle=function(e,t){var i,o=e;return t.stack&&(o+="_stack:"+t.stack),"hovered"===o?this.hoveredStyle:"default"===o?this.defaultStyle:(this._stylesCache||(this._stylesCache={}),this._stylesCache[o]||(i=TradingView.clone("hovered"===e?this.hoveredStyle:this.defaultStyle),t.stack&&(i.lollipop.incHeight=24*t.stack),this._stylesCache[o]=i),this._stylesCache[o])},o.prototype.hasTooltip=function(e){return!0},o.prototype.renderer=function(){var e,t,i,o,a,l,c,u,d;this._invalidated&&(this.updateImpl(),this._invalidated=!1),e=new p;for(t in this._lollipops)this._lollipops.hasOwnProperty(t)&&(i=this._lollipops[t],o=15,a=this.getStyle(i.hovered?"hovered":"default",i),i.visible&&(l=$.extend({tooltipPoint:new h(i.basePoint.x,i.basePoint.y-a.lollipop.circleHeight-o-(a.lollipop.incHeight||0)),style:a,createText:this.createText.bind(this)},i),c=this.getTemplate(i.hovered?"hovered":"default",i),u={circlePoint:new h(i.basePoint.x,i.basePoint.y-a.lollipop.circleHeight-(a.lollipop.incHeight||0)),style:a,template:c,basePoint:i.basePoint,id:i.id,mouseClickHandler:this._lollipopMouseClickHandler.bind(this,i.id)},e.append(new r(u)),i.hovered&&this.hasTooltip(i)&&i.barY&&this.showBarLine()&&(d={style:{lineStyle:a.barLine.lineStyle,strokeStyle:a.strokeStyle,lineWidth:a.lineWidth},startPoint:new h(i.basePoint.x,i.basePoint.y-a.lollipop.circleHeight),endPoint:new h(i.basePoint.x,i.barY)},e.append(new n(d))),e.append(new s(l,this))));return e},o.prototype.getTemplate=function(e,t){var i=e;return t.stack&&(i+="_stack:"+t.stack),this.templatesCache[i]||(this.templatesCache[i]=this.createTemplate(this.getStyle(e,t))),this.templatesCache[i]},o.prototype.createTemplate=function(e){var t=document.createElement("canvas"),i=t.getContext("2d"),o=new h(e.lollipop.width/2,e.lollipop.height-e.lollipop.circleHeight-(e.lollipop.incHeight||0));return this.drawCircle(i,e,o),this.drawLabel(i,e,o),t},o.prototype.drawCircle=function(e,t,i){e.strokeStyle=t.strokeStyle,e.fillStyle=t.lollipop.fillStyle,e.lineWidth=t.lollipop.lineWidth,CanvasEx.setLineStyle(e,CanvasEx.LINESTYLE_SOLID),e.beginPath(),e.arc(i.x,i.y,t.lollipop.radius,0,2*Math.PI,!1),e.closePath(),e.stroke(),t.lollipop.fillCircle&&e.fill()},o.prototype.drawLabel=function(e,t,i){e.textAlign="center",e.textBaseline="middle",e.fillStyle=t.lollipop.text.strokeStyle,e.font=t.lollipop.text.font,
e.fillText(t.lollipop.text.label,i.x,i.y)},o.prototype._lollipopMouseClickHandler=function(e){this._lastClickedId=this._lastClickedId===e?null:e},n.prototype.draw=function(e){e.strokeStyle=this.data.style.strokeStyle,e.lineWidth=this.data.style.lineWidth,CanvasEx.setLineStyle(e,this.data.style.lineStyle),CanvasEx.drawLine(e,this.data.startPoint.x,this.data.startPoint.y,this.data.endPoint.x,this.data.endPoint.y)},n.prototype.hitTest=function(e){return null},r.prototype.hitTest=function(e){return u(e,this.data.circlePoint,this.data.style.lollipop.radius)?this._hittest:null},r.prototype.draw=function(e){var t=this.data.template;e.drawImage(t,this.data.basePoint.x-(.5+this.data.style.lollipop.width/2<<0)+.5,this.data.basePoint.y-this.data.style.lollipop.height+.5)},s.prototype.draw=function(e){this._data.createText(this._data,this.textRenderer),this._paneView.getLastClickedLollipopId()===this._data.id?this._data.tooltip.show({items:[this.textRenderer],x:this._data.basePoint.x,y:this._data.basePoint.y-this._data.style.lollipop.circleHeight-10-2*this._data.style.lollipop.radius*(this._data.stack?this._data.stack:0),wrapElement:e.canvas.parentNode,leftBorderColor:this._data.color}):this._data.tooltip.hide()},s.prototype.hitTest=function(e){return null},s.TextRenderer=function(e){this.lines=[],this.fontHeight=12,this.font=this.fontHeight+"px Arial, sans-serif",this.lineSpacing=8,this.fillStyle="black",e&&(this.importance=e)},s.TextRenderer.prototype.draw=function(e,t){var i,o,n=t.y;for(i=0;i<this.lines.length;i++)o=this.lines[i],e.font=this.font,o.options.fontWeight&&(e.font=o.options.fontWeight+" "+this.font),e.fillStyle=this.fillStyle,o.renderer(e,o.line,{x:t.x,y:n}),n+=this.lineSpacing+this.fontHeight},s.TextRenderer.prototype.measure=function(){return this.lines.length*(this.fontHeight+this.lineSpacing)-this.lineSpacing},s.TextRenderer.prototype.basicRenderer=function(e,t,i){e.fillText(t,i.x,i.y)},s.TextRenderer.prototype.addMulticolorTextLine=function(e,t){this.addTextLine(e,t,this.multicolorRenderer)},s.TextRenderer.prototype.addTextLine=function(e,t,i){i||(i=this.basicRenderer),t||(t={}),this.lines.push({line:e,renderer:i,options:t})},s.TextRenderer.prototype.multicolorRenderer=function(e,t,i){var o,n,r=i.x;for(o=0;o<t.length;++o)n=t[o],e.fillStyle=n.color,e.fillText(n.text,r,i.y),r+=e.measureText(n.text).width},inherit(a,o),a.prototype.extraData=function(e){return{reported:e[1],estimate:e[2],period:e[3],date:e[4]}},a.prototype.afterUpdate=function(e,t,i,o){var n,r=this._study.getEstimate();r&&(n=r.value.slice(),n[4]*=1e3,this.addLollipop(e,t,i,o,r.index,n))},a.prototype.createText=function(t,i){var o,n,r,s,a,l,c,h,u,d=t.reported,p=t.estimate,f=null!==d&&void 0!==d,_=null!==p&&void 0!==p;f&&i.addTextLine($.t("Earnings")+": "+d,{fontWeight:"bold"}),_&&(f?i.addTextLine($.t("Estimate")+": "+p):i.addTextLine($.t("Estimate")+": "+p,{fontWeight:"bold"})),f&&_&&(o=(""+d).split("."),n=o[1]?o[1].length:0,r=(""+p).split("."),s=r[1]?r[1].length:0,a=Math.max(n,s),
null!==(l=+(d-p).toFixed(a))&&void 0!==l&&(c=l>0?"#238853":"#DD5538",h=100*Math.abs(l/p),u=l,isFinite(h)&&(u+=" ("+h.toFixed(2)+"%)"),i.addMulticolorTextLine([{text:$.t("Surprise")+": ",color:"black"},{text:u,color:c}]))),i.addTextLine($.t("Date")+": "+e(t.date).format("l")),i.addTextLine($.t("Period Ending")+": "+e.unix(t.period).format("M/YYYY"))},a.prototype.showBarLine=function(){return!this._model.mainSeries().properties().esdShowBreaks.value()},a.prototype.renderer=function(){var e,t,i,r,s,a,l,c=o.prototype.renderer.call(this),u=this._model.mainSeries().properties();if(u.esdShowBreaks.value()){e=u.esdBreaksStyle.color.value(),t=u.esdBreaksStyle.style.value(),i=u.esdBreaksStyle.width.value();for(r in this._lollipops)this._lollipops.hasOwnProperty(r)&&(s=this._lollipops[r],s.visible&&(a=this.defaultStyle,s.hovered&&(a=this.hoveredStyle),l=$.extend({startPoint:new h(s.basePoint.x,s.basePoint.y-a.lollipop.circleHeight-a.lollipop.radius),endPoint:new h(s.basePoint.x,0),style:{strokeStyle:e,lineWidth:i,lineStyle:t}},s),c.insert(new n(l),0)))}return c},inherit(l,o),l.prototype.extraData=function(e){var t=e[1];return{numerator:e[2],denominator:t,date:e[3]}},l.prototype.createText=function(t,i){$.isNumeric(t.numerator)&&$.isNumeric(t.denominator)&&i.addTextLine($.t("Split")+": "+t.numerator+"/"+t.denominator,{fontWeight:"bold"}),i.addTextLine($.t("Date")+": "+e(t.date).format("l"))},inherit(c,o),c.prototype.extraData=function(e){return{value:e[1],date:e[2]}},c.prototype.createText=function(t,i){var o=+t.value;isFinite(o)&&i.addTextLine($.t("Dividends")+": "+o,{fontWeight:"bold"}),i.addTextLine($.t("Date")+": "+e(t.date).format("l"))},t.ESDPaneView=o,t.EarningsPaneView=a,t.DividendsPaneView=c,t.SplitsPaneView=l}).call(t,i(54))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.Default=0]="Default",e[e.Pointer=1]="Pointer",e[e.Eraser=2]="Eraser",e[e.Dot=3]="Dot",e[e.Grabbing=4]="Grabbing",e[e.ZoomIn=5]="ZoomIn",e[e.VerticalResize=6]="VerticalResize"}(t.PaneCursorType||(t.PaneCursorType={}))},function(e,t,i){"use strict";function o(e,t,i,o){n.call(this,e,t,i,o)}var n=i(34).Study;inherit(o,n),o.prototype.hasContextMenu=function(){return!1},o.prototype.showInObjectTree=function(){return!1},o.prototype.isSavedInStudyTemplates=function(){return!1},o.prototype.isRemovedByStudyTemplates=function(){return!1},o.prototype.removeByRemoveAllStudies=function(){return!1},o.prototype.isUserDeletable=function(){return!1},o.prototype.statusView=function(){return!1},o.prototype.isDraggable=function(){return!1},e.exports=o},function(e,t,i){"use strict";function o(e,t){return r.__awaiter(this,void 0,void 0,function(){var i,o,a,l,c,h,u,d,p;return r.__generator(this,function(r){switch(r.label){case 0:return i=NaN,(o=NaN,a="",l=e.proSymbol(),c=(e.symbolInfo()||{name:null}).name||l,h=e.priceScale(),t)?(i=h.coordinateToPrice(t),h.isPercentage()&&(u=e.firstValue(),i=void 0!==u&&null!==u?s.ensure(h.priceRange()).convertFromPercent(i,u):null),[4,n(l,i)]):[3,2];case 1:i=r.sent(),a=e.formatter().format(i),
r.label=2;case 2:return d=e.bars().last(),null!==d&&(o=s.ensure(d.value[TradingView.CLOSE_PLOT])),p=!!(e.symbolInfo()||{is_tradable:!1}).is_tradable,[2,{symbol:l,displaySymbol:c,value:i,formattedValue:a,last:o,symbolInfoTradable:p}]}})})}function n(e,t){return r.__awaiter(this,void 0,void 0,function(){var i,o,n,l,h,u;return r.__generator(this,function(r){switch(r.label){case 0:return null===t?[2,null]:null===(i=s.ensureNotNull(a.tradingService()).activeBroker())||1!==i.connectionStatus()?[2,t]:(n=i,n?[4,i.isTradable(e)]:[3,2]);case 1:n=r.sent(),r.label=2;case 2:if(!(o=n))return[2,t];r.label=3;case 3:return r.trys.push([3,5,,6]),[4,i.symbolInfo(e)];case 4:return l=r.sent(),h=l.minTick,[2,Math.round(t/h)*h];case 5:return u=r.sent(),c.logError("Unable to resolve symbol: "+e),[2,t];case 6:return[2]}})})}var r,s,a,l,c;Object.defineProperty(t,"__esModule",{value:!0}),r=i(6),s=i(9),a=i(191),l=i(0),c=l.getLogger("Chart.TradeContext"),t.createTradeContext=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MINUTE_SPAN=20,t.HOUR_SPAN=30,t.DAY_SPAN=40,t.WEEK_SPAN=50,t.MONTH_SPAN=60,t.YEAR_SPAN=70},,,,,,,function(e,t,i){"use strict";var o,n=function(e,t,o){var r,s,a,l,c,h;e=$(e),o=o||{},o.activeClass=o.activeClass||"",r=(o.event||"click")+".popup-menu",o.hideEvent&&(s=o.hideEvent+".popup-menu"),a=function(){},l=a,c={},h=function(r,s,h){function u(t){var i=$(t.target).parents().andSelf();i.is(_)||i.is(e)||i.is(".charts-popup-tab-headers, .charts-popup-itemheader")||l()}function d(e){var t=$(e.target).parents().andSelf();t.is(".charts-popup-tab-headers, .charts-popup-itemheader")||o.notCloseOnButtons&&t.is(".icon-delete")||l()}function p(t,r,s){var a,l,c,h,u,d,f,m,g,v,y,b,S,w,T,P,C;if(t instanceof n.TabGroup){if(!t.tabs||!t.tabs.length)return;return 1!==t.tabs.length||t.tabs[0].title?(a=$('<div class="charts-popup-tab-group"></div>').appendTo(s),l=$('<div class="charts-popup-tab-headers"></div>').appendTo(a),c=null,void $.each(t.tabs||[],function(e,i){var o,n;i.items&&i.items.length&&(o=$('<div class="charts-popup-tab"></div>').hide().appendTo(a),$.each(i.items,function(){p(this,void 0,o)}),n=$('<span class="charts-popup-tab-header">').append($('<a href="javascript://" class="charts-popup-tab-header-label">').text(i.name)).appendTo(l),n.on("click",function(e){n.is(".active")||(l.find(".charts-popup-tab-header.active").removeClass("active"),n.addClass("active"),a.find(".charts-popup-tab").hide(),o.show(),e&&e.preventDefault(),"function"==typeof t.onChange&&t.onChange.call(t,i.name))}),c&&!i.active||(c=n,l.find(".charts-popup-tab-header.active").removeClass("active"),n.addClass("active"),a.find(".charts-popup-tab").hide(),o.show()))})):void $.each(t.tabs[0].items,function(){p(this,void 0,s)})}return t instanceof n.Group?(h=$('<div class="charts-popup-group"></div>').appendTo(s),t.title&&(u=$('<div class="charts-popup-itemheader"></div>').text(t.title).prepend($('<span class="charts-popup-itemheader-icon"></span>')),t.collapsible&&(h.addClass("charts-popup-group-collapsible"),
h.toggleClass("collapsed",t.collapsed),u.on("click",function(){h.toggleClass("collapsed"),"function"==typeof t.onChange&&t.onChange(h.hasClass("collapsed")),_.height()===parseInt(_.css("max-height"))?_.addClass("popup-menu-scroll-y"):_.height()<parseInt(_.css("max-height"))&&_.removeClass("popup-menu-scroll-y")})),h.append(u)),void $.each(t.items,function(e){p(this,1,h)})):t instanceof n.Header?void s.append($('<div class="charts-popup-itemheader"></div>').text(t.title)):t.separator?(d=$('<span class="separator"></span>'),void s.append(d)):(d=$('<a class="item" href="#">'),t.url&&d.attr("href",t.url),t.target&&d.attr("target",t.target),r||d.addClass("first"),"function"==typeof t.active?t.active(t)&&d.addClass("active"):t.active&&d.addClass("active"),t.addClass&&d.addClass(t.addClass),t.addData&&d.data(t.addData),t.disabled&&d.addClass("disabled"),"function"==typeof t.action&&(f=t.action,m=function(e){$(e.target).parents().andSelf().is(w)||(f.apply(d,arguments),!t.url&&e&&"function"==typeof e.preventDefault&&e.preventDefault())},o.upAction?d.bind("mouseup",m):d.bind("click",m)),t.date?(g=$('<span class="title"></span>').appendTo(d),$('<span class="date"></span>').text(t.date||"").appendTo(d)):t.icon&&!o.svg?(v=$('<span class="icon"></span>').appendTo(d),v.css("background-image",t.icon.image||""),t.icon.offset&&v.css("background-position","string"==typeof t.icon.offset?t.icon.offset:t.icon.offset.x+"px "+t.icon.offset.y+"px"),g=$('<span class="title"></span>').appendTo(d)):!0===o.svg&&t.svg?(o.wrapIcon?d.append($('<span class="icon-wrap">').addClass(t.iconClass).append(t.svg)):d.append(t.svg),g=$('<span class="title"></span>').appendTo(d)):t.iconClass?(d.append($('<span class="icon"></span>').addClass(t.iconClass)),g=$('<span class="title"></span>').appendTo(d)):g=$('<span class="title-expanded"></span>').appendTo(d),t.html?g.html(t.html):g.text(TradingView.clean(t.title,!0)||""),y=$('<span class="shortcut"></span>').appendTo(d),t.shortcut&&y.text(t.shortcut.keys),"function"==typeof t.deleteAction&&(b=t.deleteAction,S=t.deleteAction.title||$.t("Delete"),w=$('<span class="icon-delete">'),w.html(i(152)),w.attr("title",S),w.on("click",function(e){b.apply(d,arguments),e.preventDefault()}),d.append(w)),t.externalLink&&(T=$('<span class="icon-external">'),T.html(i(976)),d.append(T)),t.buttons instanceof Array&&t.buttons.length&&t.buttons.forEach(function(e){e.el instanceof $||(e.el=$(e.el)),e.el.appendTo(d),e.handler&&e.el.on("click",function(t){e.handler.apply(d,arguments)})}),void 0!==t.counter&&("function"==typeof t.counter?(P=$('<span class="counter"></span>').html(t.counter()),P.appendTo(d)):(C=t.counterBlue?"blue":"",$('<span class="counter"></span>').text(t.counter+"").addClass(C).appendTo(d))),s.append(d),void e.data("popup-menu",s))}var f,_,m,g,v,y,b,S,w,T,P,C,x,E,L,I,A,k,M,O,D,V,R,B,N,z,F=s||t;if("function"==typeof F&&(F=F()),$(this).hasClass("open")||$(this).hasClass("active"))return r.preventDefault(),l(),void(f=c.scrollTop);switch(l=function(){c.scrollTop=_.scrollTop(),_.remove(),
e.removeClass("active open "+o.activeClass),e.data("popup-menu",null),$(document).off("click",d),$(document).off("mousedown",u),Modernizr.touch&&$(document).off("touchstart.chartgui",u),$(document).off("selectstart.popup-menu"),l=a,o.onRemove&&o.onRemove()},e.addClass("active open "+o.activeClass),_=$('<div class="charts-popup-list">'),o.addClass&&_.addClass(o.addClass),o.zIndex&&_.css("z-index",o.zIndex),m=_,o.listInner&&(m=$('<div class="list-inner">').appendTo(m)),o.listTable&&(m=$('<div class="list-table">').appendTo(m)),$.each(F,function(e){p(this,e,m)}),setTimeout(function(){$(document).on("click",d),$(document).on("mousedown",u),Modernizr.touch&&$(document).on("touchstart.chartgui",u)},0),o.upAction&&$(document).on("selectstart.popup-menu",function(){return!1}),_.appendTo(document.body),g=$(window).width(),v=Math.min($(window).height(),$("body").height()),y=e.outerWidth(),b=e.outerHeight(),S=e.offset(),f=$(window).scrollTop()||0,S.top-=f,S.top=Math.round(S.top),S.left=Math.round(S.left),w=_.outerWidth(),T=_.outerHeight(),P=void 0!==o.viewportSpacing?o.viewportSpacing:10,C=o.popupSpacing?~~o.popupSpacing:1,x=o.popupDrift?~~o.popupDrift:0,E=T-_.height(),L="down",o.direction&&(L="function"==typeof o.direction?o.direction():o.direction),I=!!o.reverse,"down"===L?(A=v-S.top-b-C-P-E,k=S.top-C-P-E,A<Math.max(T||0,100)&&k>A&&(L="up")):"right"===L&&(M=g-S.left-y-C-P-E,O=S.left-C-P-E,M<Math.max(w||0,100)&&O>M&&(L="left")),L){case"down":case"up":"down"===L?_.css("top",S.top+b+C+"px"):_.css("bottom",v-S.top+C+"px").css("top","auto"),I?_.css("left",Math.max(S.left+x+y-w,P)+"px").css("right","auto"):_.css("left",S.left+x+"px").css("right","auto");break;case"right":case"left":C=Math.max(C,4),"right"===L?_.css("left",Math.floor(S.left+y+C)+"px").css("right","auto"):_.css("left",Math.floor(Math.max(S.left-w-C,P))+"px").css("right","auto"),I?_.css("top",Math.floor(Math.max(S.top+x+b-T,P))+"px"):_.css("top",Math.floor(S.top+x)+"px")}for(_.show(),D=S.top,"up"===L||{left:1,right:1}[L]&&I?"up"!==L?D+=b:D-=b+C+E+P:D=v-D-b-2*C-E,_.height()>D&&_.addClass("popup-menu-scroll-y"),_.css("max-height",D+"px"),o.careRightBorder&&(V=g+$(window).scrollLeft(),parseInt(_.css("left"))+_.width()+P>V&&_.css("left",V-_.width()-P+"px").css("right","auto")),o.careBottomBorder&&parseInt(_.css("top"))+_.height()+P>v+f&&_.css("top",v-_.height()-P+f+"px"),B=e.parents().andSelf(),N=B.size();N--;)if("fixed"===B.eq(N).css("position")){R=B.eq(N);break}R&&(z=_.offset(),_.css({position:"fixed",left:z.left-$(document).scrollLeft(),right:"auto"})),_[0].scrollHeight>_.height()&&_.addClass("popup-with-scroll"),r&&r.preventDefault()},r&&e.bind(r,h),s&&e.bind(s,function(){l()}),o.runOpened&&h()};n.TabGroup=function e(t){if(!(this instanceof e))return new e(t);t=t||{},this.tabs=[],"function"==typeof t.onChange&&(this.onChange=t.onChange)},n.TabGroup.prototype.appendTab=function(e,t,i){if(null==e?e="":e+="",t||(t=[]),i||(i={}),!Array.isArray(t))throw new TypeError("items must be an array");return this.tabs.push({name:e,items:t,active:!!i.active}),t},
n.Header=function e(t){if(!(this instanceof e))return new e(t);this.title=t},n.Group=function e(t){if(!(this instanceof e))return new e(t);t=t||{},this.items=[],this.title=null==t.title?"":t.title+"",this.collapsible=!!t.collapsible,this.collapsed=!!t.collapsed,"function"==typeof t.onChange&&(this.onChange=t.onChange)},n.Group.prototype.push=function(){this.items.push.apply(this.items,arguments)},t.bindPopupMenu=n,o=function(e){e=$(e),e.unbind(".popup-menu"),e.removeData("popup-menu")},t.unbindPopupMenu=o},,,function(e,t,i){"use strict";function o(e,t){if(n(e))throw Error("Service already registered");s[e.id]=t}function n(e){return void 0!==s[e.id]}function r(e){var t=s[e.id];if(void 0===t)throw Error("ServiceLocator: Service "+e.id+" not found");return t}Object.defineProperty(t,"__esModule",{value:!0});var s={};t.registerService=o,t.hasService=n,t.service=r},,function(e,t,i){(function(e){function o(e,t,i,o,n){c.call(this,e,t),this._study=i,this._showOnlyConfirmInputs=o,this._symbolSearchZindex=n,this.prepareLayout(),this._$symbolSearchPopup=null}var n=i(938),r=n.UppercaseTransformer,s=n.SymbolBinder,a=n.BarTimeBinder,l=n.SessionBinder,c=n.PropertyPage,h=n.GreateTransformer,u=n.LessTransformer,d=n.ToIntTransformer,p=n.ToFloatTransformer,f=n.SimpleComboBinder,_=n.BooleanBinder,m=n.SimpleStringBinder,g=i(179),v=i(66).NumericFormatter,y=i(39),b=i(0).getLogger("Chart.Study.PropertyPage.Inputs");inherit(o,c),o.prototype._addSessionEditor=function(e,t,i,o){var n,r,s,a,c,h;if("session"!==i.type)return void b.logError("Session editor adding FAILED: wrong input type.");n=function(e,t){var i,o=$("<td/>");o.appendTo(e),o.css("padding-left","0px"),o.css("padding-right","0px"),i=$("<input>"),i.attr("type","text"),i.addClass("ticker"),i.css("width","40px"),i.attr("id",t),i.appendTo(o)},r=function(e,t,i){var o,n=$("<td/>");n.css("padding-left",i),n.css("padding-right",i),n.appendTo(e),o=$("<div/>"),o.appendTo(n),o.append(t),o.css("font-size","150%")},s=$("<table/>"),s.appendTo(e),a=$("<tr/>"),a.appendTo(s),c=["start_hours","start_minutes","end_hours","end_minutes"],n.call(this,a,c[0]),r.call(this,a,":",0),n.call(this,a,c[1]),r.call(this,a,"-",4),n.call(this,a,c[2]),r.call(this,a,":",0),n.call(this,a,c[3]),h=!1,this.bindControl(new l(a,c,t,h,this.model(),o))},o.prototype.prepareLayoutImpl=function(t,i){function o(e){return(new v).format(e)}function n(e){return function(t){var i,o,n,r=this,s=null;if(0===t.indexOf("#")){if(i=t.slice(1,t.indexOf("$")),null===(o=ie._model.model().getStudyById(i)))return void b.logError("Can not get Study by id "+i);if(o.isStarted()||o.start(null,!0),!(n=o.sourceId()))return void b.logError("Can not get source id for "+o.metaInfo().id);s=t.replace(/^[^\$]+/,n)}!~t.indexOf("$")&&!~t.indexOf("#")||ie._study.isStarted()||ie._study.start(null,!0),ie._study.testInputValue(e,t)?r.setValueToProperty(s||r.value()):r.setValue(ie._property.inputs[e.id].value())}}function l(e){return function(t){var i,o,n,r;if(e.hasOwnProperty(t)||0===t.indexOf("#")||!~t.indexOf("$"))return t;for(i=t.slice(0,t.indexOf("$")),
o=ie._model.model().allStudies(),n=0;n<o.length;++n)if(r=o[n],r.sourceId()===i){t=t.replace(/^[^\$]+/,"#"+r.id());break}return t}}var c,S,w,T,P,C,x,E,L,I,A,k,M,O,D,V,R,B,N,z,F,H,W,U,j,q,G,Y,X,K,J,Z,Q,ee,te,ie=this;for(c=0;c<t.inputs.length;c++)if(S=t.inputs[c],"first_visible_bar_time"!==(w=S.id)&&"last_visible_bar_time"!==w&&"time"!==S.type&&!S.isHidden&&(!this._showOnlyConfirmInputs||S.confirm)&&void 0===S.groupId){if(T=S.name||w.toLowerCase().replace(/\b\w/g,function(e){return e.toUpperCase()}),P="Change "+T,C=$("<tr/>"),C.appendTo(i),x=$("<td/>"),x.appendTo(C),x.addClass("propertypage-name-label"),x.text($.t(T,{context:"input"})),E=$("<td/>"),E.appendTo(C),L=null,I=null,A=null,"resolution"===S.type)L=$('<select><option value="1">1</option><option value="3">3</option><option value="5">5</option><option value="15">15</option><option value="30">30</option><option value="45">45</option><option value="60">1'+$.t("h",{context:"interval_short"})+'</option><option value="120">2'+$.t("h",{context:"interval_short"})+'</option><option value="180">3'+$.t("h",{context:"interval_short"})+'</option><option value="D">1'+$.t("D",{context:"interval_short"})+'</option><option value="W">1'+$.t("W",{context:"interval_short"})+"</option></select>");else if("symbol"===S.type)L=$('<input class="symbol-edit single">'),g.bindToInput(L,{onPopupOpen:function(e){this._$symbolSearchPopup=e,this._symbolSearchZindex&&e.css("z-index",this._symbolSearchZindex)}.bind(this),onPopupClose:function(){this._$symbolSearchPopup=null}.bind(this)});else if("session"===S.type)this._addSessionEditor(E,this._property.inputs[w],S,P);else if("source"===S.type){for(k={},M={open:window.t("open"),high:window.t("high"),low:window.t("low"),close:window.t("close"),hl2:window.t("hl2"),hlc3:window.t("hlc3"),ohlc4:window.t("ohlc4")},O=Object.keys(M),D=0;D<O.length;++D)k[O[D]]||(k[O[D]]=O[D]);if(V=this._study&&this._study.isChildStudy()){R=this._study.source(),B=R.title(!0,null,!0),N=y.getChildSourceInputTitles(S,this._study.source().metaInfo(),B);for(z in k)N[z]&&(k[z]=1===Object.keys(N).length?B:N[z])}if(e.enabled("study_on_study")&&this._study&&y.isSourceInput(S)&&(V||y.canBeChild(this._study.metaInfo()))){for(F=[this._study],F=F.concat(this._study.getAllChildren()),H=this._model.model().allStudies(),W=0;W<H.length;++W)if(U=H[W],-1===F.indexOf(U)&&U.canHaveChildren())if(j=U.title(!0,null,!0),q=U.sourceId()||"#"+U.id(),G=U.metaInfo(),Y=G.styles,X=G.plots||[],1===X.length)k[q+"$0"]=j;else for(D=0;D<X.length;++D)K=X[D],~y.CHILD_STUDY_ALLOWED_PLOT_TYPES.indexOf(K.type)&&(k[q+"$"+D]=j+":"+(Y&&Y[K.id]&&Y[K.id].title||K.id));I=n(S),A=l(k)}L=$(document.createElement("select"));for(J in k)Z=M[J]||k[J],$("<option>").attr("value",J).text(Z).appendTo(L);E.addClass("js-value-cell")}else if(S.options)for(L=$("<select/>"),W=0;W<S.options.length;W++)J=S.options[W],$("<option value='"+J+"'>"+J+"</option>").appendTo(L);else L=$("<input/>"),"bool"===S.type?L.attr("type","checkbox"):L.attr("type","text");L&&(L.appendTo(E),L.is(":checkbox")||L.css("width","100px")),
S.options?this.bindControl(new f(L,this._property.inputs[w],null,!0,this.model(),P,I,A)):"bar_time"===S.type?(Q=10,this.bindControl(new a(L,this._property.inputs[w],!0,this.model(),P,this.model().mainSeries(),Q)),L.addClass("ticker")):"integer"===S.type?(ee=[d(S.defval)],(0===S.min||S.min)&&ee.push(h(S.min)),(0===S.max||S.max)&&ee.push(u(S.max)),this.bindControl(new m(L,this._property.inputs[w],ee,!1,this.model(),P)),L.addClass("ticker"),isFinite(S.step)&&S.step>0&&L.attr("data-step",S.step)):"float"===S.type?(ee=[p(S.defval)],(0===S.min||S.min)&&ee.push(h(S.min)),(0===S.max||S.max)&&ee.push(u(S.max)),te=new m(L,this._property.inputs[w],ee,!1,this.model(),P),te.addFormatter(o),this.bindControl(te),L.addClass("ticker"),isFinite(S.step)&&S.step>0&&L.attr("data-step",S.step)):"text"===S.type?this.bindControl(new m(L,this._property.inputs[w],null,!1,this.model(),P)):"bool"===S.type?this.bindControl(new _(L,this._property.inputs[w],!0,this.model(),P)):"resolution"===S.type?this.bindControl(new f(L,this._property.inputs[w],r,!0,this.model(),"Change Interval")):"symbol"===S.type&&this.bindControl(new s(L,this._property.inputs[w],!0,this.model(),"Change Symbol"))}this._property.offset&&(T=this._property.offset.title?this._property.offset.title.value():$.t("Offset"),L=this.addOffsetEditorRow(i,T),ee=[d(this._property.offset.val)],ee.push(h(this._property.offset.min)),ee.push(u(this._property.offset.max)),this.bindControl(new m(L,this._property.offset.val,ee,!1,this.model(),"Undo "+T))),this._property.offsets&&$.each(t.plots,function(e,t){var o,n,r,s;this._property.offsets[t.id]&&(o=this._property.offsets[t.id],void 0!==o.isHidden&&o.isHidden.value()||(n=o.title.value(),r=this.addOffsetEditorRow(i,n),s=[d(o.val)],s.push(h(o.min)),s.push(u(o.max)),this.bindControl(new m(r,o.val,s,!1,this.model(),"Undo "+n))))}.bind(this))},o.prototype.prepareLayout=function(){this._table=$("<table/>"),this._table.addClass("property-page"),this._table.attr("cellspacing","0"),this._table.attr("cellpadding","2");var e=this._study.metaInfo();this.prepareLayoutImpl(e,this._table),this.loadData()},o.prototype.symbolSearchPopup=function(){return this._$symbolSearchPopup},o.prototype.widget=function(){return this._table},t.StudyInputsPropertyPage=o}).call(t,i(3))},function(e,t,i){"use strict";function o(e,t,i){var o,n,r,s,a,l,c,h=e.allLineTools(),u=h.length,d=e.timeScale();for(o=0;o<u;++o){for(n=h[o],r=0,s=n.points(),a=s.length,l=0;l<a;++l)c=s[l],c.time>t&&c.time<=i&&(c.index=d.m_points.indexOf(c.time),++r);r>0&&n.updateAllViews()}}function n(e,t){function i(i){e._currentRequest.requestFirstBarTime(i,g,function(o){if(o.p[1]>y)return e._currentRequest.isConnected().unsubscribe(r),e._currentRequest.destroy(),delete e._currentRequest,_.disconnect(),e._haveNoMoreData=!0,void t(!0);n(i)})}function n(i){var o,n,s,l,c,h,d,v,b,S,w="series_id",T=1;for(e._haveNoMoreData=!0,o=!1,e._currentRequest.createSeries(w,"turnaround",i,g,["bar_count",y-1,-p],function(i){var n,s;switch(i.method){case"data_update":if(!i.params.plots.length)return
;n=i.params.plots[0].value[TradingView.TIME_PLOT],s=i.params.plots,e._haveNoMoreData=s.length<p,o=0===s.length,f=n===y,m.mainSeries().fixLastBar(e._chartDirection),m.mainSeries().bars().addTail(s,f),m.mainSeries().parseJapProjBars(i.params.nonseries).then(function(e){m.mainSeries().m_data.m_nsBars=e.nsBars,m.mainSeries().m_data.lastProjectionPrice=e.lastPrice,m.model().recalculateAllPanes(),m.model().updateSource(m.mainSeries()),m.model().updateLineTools(),m.model().updateTimeScaleBaseIndex(),m.timeScale().scrollToOffsetAnimated(u)});break;case"series_completed":T--,0===T&&(e._currentRequest.isConnected().unsubscribe(r),e._currentRequest.destroy(),delete e._currentRequest,_.disconnect(),t())}}),n=m.dataSources(),s={},l=a(m.mainSeries().bars().lastIndex()),c=function(i){var n,a,c=i.method;"study_completed"===c||"study_error"===c?0===--T&&(e._currentRequest.isConnected().unsubscribe(r),e._currentRequest.destroy(),delete e._currentRequest,_.disconnect(),t()):"data_update"!==c||o||(n=i.params.customId,a=s[n],a.replaceData(l,f,i.params.plots),m.model().recalculateAllPanes(),m.model().updateSource(m.mainSeries()))},h=0;h<n.length;h++)d=n[h],TradingView.isInherited(d.constructor,TradingView.Study)&&-1!==["Volume","Compare","Overlay","Sessions"].indexOf(d.metaInfo().shortId)&&(v="study_"+h,b=d.metaInfo().fullId+"!",s[v]=d,T++,S=d.inputs(),e._currentRequest.createStudy(v,"turnaround",w,b,S,c))}function r(){var t,o,n=m.model().timezone();n||(n=defaults("chartproperties").mainSeriesProperties.timezone),e._currentRequest.switchTimezone(n),t="symbol_id",o=function(n){switch(n.method){case"symbol_error":if(n.params[1]===TradingView.Series.PERMISSION_DENIED){var r;switch(n.params[2]){case TradingView.Series.PD_REASON_EXTENDED_HOURS:m.mainSeries().properties().extendedHours.setValue(!1),r=m.mainSeries().getSymbolString();break;case TradingView.Series.PD_REASON_SYMBOL:r=n.params[3];break;default:r=n.params[2]}r&&(t+="_re",e._currentRequest.resolveSymbol(t,r,o))}break;default:i(t)}},e._currentRequest.resolveSymbol(t,d,o)}var s,u,d,p,f,_,m=e.model(),g=m.mainSeries().interval(),v=a(m.mainSeries().bars().last()),y=v.value[TradingView.TIME_PLOT];if("function"!=typeof t&&(t=function(){}),s=100,null!=e._currentRequest)return void h.logDebug("requestSnapshotBars: unexpected requestSnapshotBars");(u=m.timeScale().rightOffset())<0||e._haveNoMoreData||(d=m.mainSeries().getSymbolString(),p=Math.max(Math.ceil(u),s),f=!1,_=new l(new window.WSBackendConnectionCtor(window.WEBSOCKET_HOST,window.WEBSOCKET_PORT,{pingRequired:window.WS_HOST_PING_REQUIRED,proHost:window.WEBSOCKET_PRO_HOST,reconnectHost:window.WEBSOCKET_HOST_FOR_RECONNECT})),_.setLoadNew(!0),e._currentRequest=new c(_),e._currentRequest.isConnected().subscribe(r),e._currentRequest.connect(function(e){var t,i,n,r,s,l,c;"timescale_update"===e.method&&(t=a(m.mainSeries().bars().lastIndex()),i=a(m.timeScale().indexToUserTime(t)).valueOf()/1e3,n=m.timeScale().points(),r=n.valueAt(t),e.params.changes.length>0&&(s=e.params.changes[0]===r,s||(i+=1),m.timeScale().points().remove(t+1),
m.timeScale().addTail(e,i,s),l=n.lastIndex(),c=n.valueAt(l),o(m.model(),r,c)))}))}function r(){this._data=null,this._colors=null}function s(e,t,i){this._series=e,this._lastBar=t,this._direction=i,this._renderer=new r}var a=i(9).ensureNotNull,l=i(96),c=i(222).ChartSession,h=i(0).getLogger("Chart.Snapshot");r.prototype.setData=function(e){this._data=e},r.prototype.setPredictCode=function(e){this._colors=this.getBackgroundColor(e)},r.prototype.hitTest=function(){return null},r.prototype.getBackgroundColor=function(e){return[{background:"rgba(255, 158, 171, 0.3)",line:"#7E202F"},{background:"rgba(244, 255, 158, 0.3)",line:"#EBFF3F"},{background:"rgba(195, 255, 160, 0.3)",line:"#308020"}][e+1]},r.prototype.draw=function(e){if(null!==this._data&&null!==this._colors){e.fillStyle=this._colors.background,e.fillRect(Math.max(0,this._data.x),0,this._data.width,this._data.height),e.strokeStyle=this._colors.line,e.beginPath(),e.lineWidth=1;var t=Math.round(this._data.x);e.moveTo(t,0),e.lineTo(t,this._data.height),e.stroke()}},s.prototype.update=function(){this._x=this._series.m_model.timeScale().indexToCoordinate(this._lastBar)+.5*this._series.m_model.timeScale().barSpacing()+1},s.prototype.renderer=function(){var e={x:this._x,height:this._series.priceScale().height(),width:this._series.m_model.timeScale().width()},t=this._series.data().bars(),i=a(t.last()).value[TradingView.CLOSE_PLOT]>a(t.valueAt(this._lastBar))[TradingView.CLOSE_PLOT]?1:-1,o=0;return 1===this._direction?o=i:2===this._direction&&(o=-1*i),this._renderer.setData(e),this._renderer.setPredictCode(o),this._renderer},t.FutureBarsPaneView=s,t.requestChartSnapshotBars=n},function(e,t,i){(function(e){var t;"undefined"!=typeof window&&(t=window.TVScript=window.TVScript||{}),t=t||{},t.Access={},t.Access.ACCESS_OPEN_NO_AUTH="open_no_auth",t.Access.ACCESS_CLOSED_NO_AUTH="closed_no_auth",t.Access.ACCESS_CLOSED_NEEDS_AUTH="closed_needs_auth",t.Access.MAP_ID_TO_NAME={1:t.Access.ACCESS_OPEN_NO_AUTH,2:t.Access.ACCESS_CLOSED_NO_AUTH,3:t.Access.ACCESS_CLOSED_NEEDS_AUTH},t.Access.MAP_NAME_TO_ID={},Object.keys(t.Access.MAP_ID_TO_NAME).forEach(function(e){t.Access.MAP_NAME_TO_ID[t.Access.MAP_ID_TO_NAME[e]]=e}),t.Kinds={},t.Kinds.STUDY="study",t.Kinds.STRATEGY="strategy",t.createScriptStudyId=function(e,t,i,o){if("string"!=typeof e)throw new TypeError("scriptIdPart must be a string");if("string"!=typeof t)throw new TypeError("scriptingPkgVers must be a string");return(null==o||null==o.classNameOverride?i?"StrategyScript":"Script":o.classNameOverride)+(e.length>0?"$"+e:"")+"@tv-scripting-"+t},t.PinePrefix={},t.PinePrefix.USER="USER;",t.PinePrefix.PUB="PUB;",t.PinePrefix.STD="STD;",t.PinePrefix.TV="TV_",t.PinePrefix.EDGR="EDGR_",t.PineType={},t.PineType.UserSaved="PineType_UserSaved",t.PineType.UserPublished="PineType_UserPublished",t.PineType.BuiltIn="PineType_BuiltIn",t.PineType.Addon="PineType_Addon",t.Type=t.Type||function(){},t.Type.VOID="void",t.Type.INTEGER="integer",t.Type.FLOAT="float",t.Type.STRING="string",t.Type.BOOL="bool",t.Type.COLOR="color",t.Type.SERIES="series",
t.Type.PLOT="plot",t.Type.HLINE="hline",t.Type.BARCOLOR="barcolor",t.Type.BGCOLOR="bgcolor",t.Type.PLOTSHAPES="plotshape",t.Type.PLOTCHARS="plotchar",t.Type.PLOTARROWS="plotarrow",t.Type.NA="na",t.Type.ARRAY="array",t.TranslatorDefaultVersion=1,t.TranslatorMinSupportedVersion=3,t.TranslatorLastVersion=3,t.pineType=function(e){return e.startsWith(t.PinePrefix.USER)?t.PineType.UserSaved:e.startsWith(t.PinePrefix.PUB)?t.PineType.UserPublished:e.startsWith(t.PinePrefix.STD)||e.startsWith(t.PinePrefix.TV)||e.startsWith(t.PinePrefix.EDGR)?t.PineType.BuiltIn:t.PineType.Addon},t.patchILTemplate=function(e,i,o){var n=o||{},r=/<(in_\d+)>/g;return t._patchTemplate(r,e,i,n)},t.decorateQuotes=function(e){var t,i,o;return e?(t=/([^\\']+?)(')[^']*?/g,i="$1\\$2",o=e,"'"==o.charAt(0)&&"'"==o.charAt(o.length-1)?(o=o.substr(1,o.length-2),"'"+o.replace(t,i)+"'"):o.replace(t,i)):e},t.patchInputs=function(e,t){var i,o,n,r={};for(i in e)e.hasOwnProperty(i)&&(o=e[i],n=o.isFake?{v:t[o.id],f:!0,t:o.type}:t[o.id],r[o.id]=n);return r},t._patchTemplate=function(e,i,o,n){var r=n||{};return i.replace(e,function(e,i){var n,s,a=i in r?r[i]:o.defaults.inputs[i];for(n=0;n<o.inputs.length;++n)o.inputs[n].id===i&&("bool"===o.inputs[n].type?a=a?"1.0":"0.0":["text","symbol","resolution","session"].indexOf(o.inputs[n].type)>=0?a="'"+t.decorateQuotes(a)+"'":"source"===o.inputs[n].type&&(s=a.split("$"),s[0]="'"+s[0]+"'",a="source("+s.join(",")+")"));return a})},t.isStrategy=function(e){return/^\s*strategy\s*\(/m.test(e)},void 0!==e&&e&&e.exports&&(e.exports=t)}).call(t,i(15)(e))},,,,,,,,function(e,t,i){"use strict";(function(t){function o(){this.history=window.history,this._activePage=null,window.addEventListener("popstate",function(){var e=this.history.state||{},t=this.pageList[e.pageIndex];t!==this._activePage&&(this._activePage&&this.closePage(this._activePage,!0),t&&this.openPage(t))}.bind(this));var e=new o.BasePage;this.push(e,!0),window.addEventListener("hashchange",function(){var e=this._activePage||this.pageList[0];e instanceof o.BasePage&&e.replaceUrl(location.href)}.bind(this))}var n=i(38).TVModal,r=i(506);o.prototype.pageList=[],o.prototype.pushBasePage=function(){this.pushHistoryState(this.pageList[0])},o.prototype.push=function(e,t){this.pageList.push(e),e.index=this.pageList.length-1,t?this.replaceHistoryState(e):this.pushHistoryState(e)},o.prototype.closePage=function(e,t){this._activePage=null,e.pageVisible&&e.close(!!t),t||this.pushBasePage()},o.prototype.openPage=function(e){this._activePage=e,e.onHistoryData().subscribe(this,this.replaceHistoryState.bind(this)),e.show(),e.onClose().subscribe(this,function(){this._activePage===e&&this.closePage(e)}.bind(this))},o.prototype.pushHistoryState=function(e){var t,i=e.getHistoryData();try{t=Object.assign({},i.data,{pageIndex:e.index}),this.history.pushState(Object.assign({},i.data,{pageIndex:e.index}),i.title,i.url),dispatchEvent(this.createPopStateEvent({state:t}))}catch(e){console.info("History.pushState failed")}},o.prototype.replaceHistoryState=function(e){var t,i=e.getHistoryData();try{
if(this.history.state&&this.history.state.url===location.href)return;t=Object.assign({},i.data,{pageIndex:e.index}),this.history.replaceState(t,i.title,i.url),dispatchEvent(this.createPopStateEvent({state:t}))}catch(e){console.info("History.replaceState failed")}},o.prototype.createPopStateEvent=function(e){try{return new PopStateEvent("popstate",e)}catch(i){var t=document.createEvent("PopStateEvent");return t.initPopStateEvent("popstate",!0,!1,e),t}},o.Page=function(){this._onClose=new t,this._onOpen=new t,this._afterOpen=new t,this._onHistoryData=new t},o.Page.prototype.show=function(e){this.pageVisible=!0;var t=this;this.modal=new n($.extend({destroyOnClose:!0,focusFirstControl:!1,addClass:"tv-chart-view__dialog",contentWrapTemplate:"<div>",closeButtonTemplate:'<div class="tv-chart-view__dialog-close tv-dialog__close tv-dialog__close--new-style js-dialog__close">'+i(656)+"</div>"},e)).on("beforeOpen",function(){t._onOpen.fire()}).on("afterOpen",function(){t._afterOpen.fire()}).on("afterClose",function(){t.pageVisible=!1,t._onClose.fire()}).on("destroy",function(){delete t.modal}).open()},o.Page.prototype.close=function(e){"function"==typeof $.fancybox&&$.fancybox.close(e)},o.Page.prototype.onClose=function(e){return this._onClose},o.Page.prototype.onOpen=function(e){return this._onOpen},o.Page.prototype.afterOpen=function(e){return this._afterOpen},o.Page.prototype.getHistoryData=function(e){if(!this.historyData)throw Error("History data not implemented");return this.historyData},o.Page.prototype.onHistoryData=function(){return this._onHistoryData},o.Page.prototype.callSuper=function(e){this.superclass.prototype[e].apply(this,Array.prototype.slice.call(arguments,1))},o.Page.prototype.replaceUrl=function(e){this.historyData.url=e},o.BasePage=function(){this.superclass.call(this),this.historyData={title:document.title,url:window.location.href+"",data:{}}},inherit(o.BasePage,o.Page),o.BasePage.prototype.show=function(){this.pageVisible=!0},o.BasePage.prototype.close=function(){this.pageVisible=!1},o.ChartPage=function(e){var t,o,n,s,a,l,c,h,u;this.superclass.call(this),this._publicationView=null,t=e.chartId,o=e.chartName,n=e.publishedUrl,s=e.shortSymbol,a=e.socialStatsModel,l=e.chartWidgetCollection,l&&l.setActive(!1),this.data={chart:t,publishedUrl:n},c=s||r.parsePublishedChartUrl(n).symbol,this.historyData={data:{},url:n||"/v/"+t+"/",title:o+" - "+(c?c+" ":"")+"TradingView"},h=a?{socialStatsModel:a}:{},u=this,this._afterOpen.subscribe(this,function(){i.e(27).then(function(e){if(u.pageVisible){var t=i(513).createPublicationView;u._publicationView=t({containerSelector:".js-chart-view",viewerOptions:Object.assign({},h,{dialog:u.modal})})}}.bind(null,i)).catch(i.oe)},!0),this._onClose.subscribe(this,function(){null!==this._publicationView&&(this._publicationView.destroy(),this._publicationView=null),l&&l.setActive(!0)},!0)},inherit(o.ChartPage,o.Page),o.ChartPage.prototype.show=function(){var e=document.querySelector("html").classList.contains("theme-dark");this.callSuper("show",{ajax:{
url:(this.data.published_chart_url||"/v/"+this.data.chart+"/")+"?popup=true&dark="+e}}),i.e(27).then(function(e){}.bind(null,i)).catch(i.oe)},TradingView.historyManager=new o,e.exports=o}).call(t,i(4))},function(e,t,i){function o(e,t,i,o,r,s){if(!e)return void n.logDebug("Missing control");this._control=e,this._property=t,this._applyOnFly=i,this._undoModel=o,this._undoText=r,t&&(this._formatters=[],this._changed=!1,this.setValue(t.value()),t.listeners().subscribe(this,this.propertyChanged))}var n=i(0).getLogger("Chart.PropertyPage.Binding");o.prototype.addFormatter=function(e){this._formatters.push(e),this.setValue(this._property.value())},o.prototype._formatValue=function(e){return this._formatters.reduce(function(e,t){return t(e)},e)},o.prototype._setValueToProperty=function(e){this._setter?this._setter.call(this,e):this.setValueToProperty(e)},o.prototype._attachToControl=function(e,t){var i=this;t?e.on("keyup change input",function(e){var t=i.value();i._setValueToProperty(t),i.setValue(t)}):(e.keypress(function(e){if(i._changed=!0,13===e.which){var t=i.value();i._setValueToProperty(t),i.setValue(t)}}),e.focusout(function(e){var t=i.value();i.changed()&&(i._setValueToProperty(t),i.setValue(t))}),e.change(function(e){var t=i.value();$(e.target).is(".ticker")?(void 0!==i._changeTimerId&&clearTimeout(i._changeTimerId),i._changeTimerId=setTimeout(function(){i._setValueToProperty(t)},250)):i._setValueToProperty(t),i.setValue(t)}))},o.prototype.control=function(){return this._control},o.prototype.changed=function(){return this._changed},o.prototype.setValueToProperty=function(e){this._undoModel.setProperty(this._property,e,this._undoText),this._changed=!1},o.prototype.property=function(){return this._property},o.prototype.propertyChanged=function(e){this.setValue(e.value())},o.prototype.destroy=function(){this._property&&this._property.listeners().unsubscribe(this,this.propertyChanged)},t.Binding=o},function(e,t,i){"use strict";function o(e){return"alwaysOn"===e||"alwaysOff"===e?e:"visibleOnMouseOver"}function n(){if(!c){var e="NavigationButtons.visibility";c=new a,c.setValue(o(l.getValue(e))),c.subscribe(c,function(t){l.setValue(e,o(t.value()))})}return c}function r(){return[{value:"visibleOnMouseOver",title:window.t("Visible on Mouse Over")},{value:"alwaysOn",title:window.t("Always Visible")},{value:"alwaysOff",title:window.t("Always Invisible")}]}function s(){var e,t;return h||(h=new a,e=n(),t=function(){var t=e.value();"alwaysOn"!==t&&"alwaysOff"!==t&&(t=Modernizr.touch?"alwaysOn":"visibleOnMouseOver"),h&&h.setValue(t)},e.subscribe(h,t),t()),h}var a,l,c,h;Object.defineProperty(t,"__esModule",{value:!0}),i(5),i(109),a=i(37),l=i(48),t.property=n,t.availableValues=r,t.actualBehavior=s},function(e,t,i){"use strict";(function(t){function o(e,i,o,r){n.call(this,e,i,o,r),this._barsIndexes=[],this._reportDataBuffer=null,this._reportData=null,this.watchedData=new t,this.model().addStrategySource(this)}var n=i(34).Study,r=i(492),s=i(2).propertyPages;inherit(o,n),o.prototype.stop=function(){if(n.prototype.stop.call(this),
this._avoidRemoveStrategySource)return void delete this._avoidRemoveStrategySource;this.model().removeStrategySource(this)},o.prototype.start=function(){this.model().addStrategySource(this),n.prototype.start.call(this)},o.prototype.processHibernate=function(){this._studyId&&!this.isVisible()&&(this._avoidRemoveStrategySource=!0),n.prototype.processHibernate.call(this)},o.prototype.onData=function(e){var t=this;n.prototype.onData.call(this,e).then(function(){var i,o,n,r;e.method&&"data_update"===e.method&&(i=e.params&&e.params.nonseries&&e.params.nonseries.d,o=i&&i.data&&i.data.report,o?(i.isUpdate&&t._reportDataBuffer&&(o=$.extend(t._reportDataBuffer,o)),t._reportDataBuffer=t._reportData=$.extend(t._reportDataBuffer||{},o)):(n=$.extend({},e),n.params.nonseries.d.data={report:t._reportDataBuffer},e=n),"nochange"!==(r=e.params&&e.params.nonseries&&e.params.nonseries.indexes)&&r instanceof Array&&r.length&&t._collateBarsIndexes(r)),t.watchedData.setValue(e)})},o.prototype._collateBarsIndexes=function(e){var t,i;if(Array.isArray(e)&&(t=this._reportData&&this._reportData.filledOrders)&&t.length)for(this._barsIndexes.length=0,i=0;i<t.length;i++)this._barsIndexes[i]=e[t[i].tm]},o.prototype.reportData=function(){return this._reportData},o.prototype.ordersData=function(){return this._reportData&&this._reportData.filledOrders},o.prototype.barsIndexes=function(){return this._barsIndexes},o.prototype.clearData=function(){n.prototype.clearData.call(this),this._strategyOrdersPaneView&&this._strategyOrdersPaneView.clearItems()},o.prototype.restoreData=function(e){n.prototype.restoreData.apply(this,arguments),this.model().addStrategySource(this),e.reportData&&e.barsIndexes&&(this._reportData=e.reportData,this._barsIndexes=e.barsIndexes,this.watchedData.setValue({method:"data_update",params:{nonseries:{d:{data:{report:this._reportData}}}}})),e.activeState&&(this._activeState=!0)},o.prototype.activeState=function(){return this._activeState},o.prototype.updateAllViews=function(){n.prototype.updateAllViews.call(this),this._strategyOrdersPaneView&&this._strategyOrdersPaneView.update()},o.prototype.createViews=function(){n.prototype.createViews.call(this),this._strategyOrdersPaneView=new r(this,this._series,this._model)},o.prototype.state=function(e){var t=n.prototype.state.apply(this,arguments);return e&&this._reportData&&this._barsIndexes&&(t.data||(t.data={}),t.data.reportData=this._reportData,t.data.barsIndexes=this._barsIndexes,t.data.activeState=this.model().activeStrategySource().value()===this),t},o.prototype.getStrategyPropertyPage=function(){return s.StudyStrategyPropertyPage},e.exports=o}).call(t,i(22))},,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.layouts={s:{title:"1 chart",count:1,sizer:function(e,t,i,o){return{width:t.width-o-o,height:t.height-o-o,top:o,left:o}}},"2h":{title:"2-up Horizontal",count:2,sizer:function(e,t,i,o){var n,r=t.width-o-o,s=t.height-o-o,a=r-i>>1;switch(e){case 0:return{width:a,height:s,top:o,left:o};case 1:return n=i+a,{width:r-n,height:s,top:o,left:o+n}}
throw Error("incorrect index")}},"2-1":{title:"2 at top and 1 at bottom",count:3,sizer:function(e,t,i,o){var n,r,s=t.width-o-o,a=t.height-o-o,l=a-i>>1,c=s-i>>1;switch(e){case 0:return{width:c,height:l,left:o,top:o};case 1:return n=i+l,{width:s,height:a-n,top:n+o,left:o};case 2:return r=c+i,{width:s-r,height:l,left:r+o,top:o}}throw Error("incorrect index")}},"2v":{title:"2-up Vertical",count:2,sizer:function(e,t,i,o){var n,r=t.width-o-o,s=t.height-o-o,a=s-i>>1;switch(e){case 0:return{width:r,height:a,top:o,left:o};case 1:return n=i+a,{width:r,height:s-n,top:n+o,left:o}}throw Error("incorrect index")}},"3h":{title:"3-up Horizontal",count:3,sizer:function(e,t,i,o){var n,r=t.width-o-o,s=t.height-o-o,a=(r-i-i)/3|0;switch(e){case 0:return{width:a,height:s,top:o,left:o};case 1:return{width:a,height:s,top:o,left:i+a+o};case 2:return n=2*(i+a),{width:r-n,height:s,top:o,left:n+o}}throw Error("incorrect index")}},"3v":{title:"3-up Vertical",count:3,sizer:function(e,t,i,o){var n,r=t.width-o-o,s=t.height-o-o,a=(s-i-i)/3|0;switch(e){case 0:return{width:r,height:a,top:o,left:o};case 1:return{width:r,height:a,top:i+a+o,left:o};case 2:return n=2*(i+a),{width:r,height:s-n,top:n+o,left:o}}throw Error("incorrect index")}},"3s":{title:"3-up Stacked",count:3,sizer:function(e,t,i,o){var n,r=t.width-o-o,s=t.height-o-o,a=s-i>>1,l=r-i>>1;switch(e){case 0:return{width:l,height:s,left:o,top:o};case 1:return{width:l,height:a,left:l+i+o,top:o};case 2:return n=i+a,{width:l,height:s-n,left:l+i+o,top:n+o}}throw Error("incorrect index")}},4:{title:"4-up",count:4,sizer:function(e,t,i,o){var n,r,s=t.width-o-o,a=t.height-o-o,l=a-i>>1,c=s-i>>1;switch(e){case 0:return{width:c,height:l,left:o,top:o};case 1:return r=l+i,{width:c,height:a-r,left:o,top:r+o};case 2:return n=c+i,{width:s-n,height:l,left:n+o,top:o};case 3:return r=l+i,n=c+i,{width:s-n,height:a-r,left:n+o,top:r+o}}throw Error("incorrect index")}},6:{title:"6-up",count:6,sizer:function(e,t,i,o){var n,r,s=t.width-o-o,a=t.height-o-o,l=a-i>>1,c=(s-i-i)/3|0;switch(e){case 0:return{width:c,height:l,left:o,top:o};case 1:return r=l+i,{width:c,height:a-r,left:o,top:r+o};case 2:return n=c+i,{width:c,height:l,left:n+o,top:o};case 3:return n=c+i,r=l+i,{width:c,height:a-r,left:n+o,top:r+o};case 4:return n=c+i+c+i,{width:s-n,height:l,left:n+o,top:o};case 5:return n=c+i+c+i,r=l+i,{width:s-n,height:a-r,left:n+o,top:r+o}}throw Error("incorrect index")}},8:{title:"8-up",count:8,sizer:function(e,t,i,o){var n,r,s=t.width-o-o,a=t.height-o-o,l=a-i>>1,c=s-3*i>>2;switch(e){case 0:return{width:c,height:l,left:o,top:o};case 1:return r=l+i,{width:c,height:a-r,left:o,top:r+o};case 2:return n=c+i,{width:c,height:l,left:n+o,top:o};case 3:return n=c+i,r=l+i,{width:c,height:a-r,left:n+o,top:r+o};case 4:return n=c+i+c+i,{width:c,height:l,left:n+o,top:o};case 5:return n=c+i+c+i,r=l+i,{width:c,height:a-r,left:n+o,top:r+o};case 6:return n=3*(c+i),{width:s-n,height:l,left:n+o,top:o};case 7:return n=3*(c+i),r=l+i,{width:s-n,height:a-r,left:n+o,top:r+o}}throw Error("incorrect index")}}}},function(e,t,i){"use strict";var o,n,r
;Object.defineProperty(t,"__esModule",{value:!0}),o=i(6),n=i(166),r=function(e){function t(t){var i=e.call(this,t,!1)||this;return i._subcommands=[],i}return o.__extends(t,e),t.prototype.addCommand=function(e){this._subcommands.push(e)},t.prototype.isEmpty=function(){return 0===this._subcommands.length},t.prototype.redo=function(){for(var e=0;e<this._subcommands.length;e++)this._subcommands[e].redo()},t.prototype.undo=function(){for(var e=this._subcommands.length-1;e>=0;e--)this._subcommands[e].undo()},t}(n.UndoCommand),t.UndoMacroCommand=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.createConfirmDialog)({type:"modal",title:$.t("Confirm Remove Study Tree"),content:$.t("Do you really want to delete study and all of it's children?")}).on("action:yes",function(t){e(),t.close()})};var o=i(255);e.exports=t.default},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="-2.4 120.9 14 14" width="14" height="14" enable-background="new -2.4 120.9 600 600"><path d="M-2.4 120.9v14h14v-14zm3.34 2.123l3.66 3.66 3.66-3.66 1.217 1.22-3.66 3.658 3.66 3.66-1.22 1.22-3.658-3.66-3.66 3.66-1.22-1.22 3.66-3.66-3.66-3.66z"/></svg>'},function(e,t,i){"use strict";(function(t){function o(e,i){var o,s,l,c=this;n.call(this),this._series=e,this._clickedId=null,this._clickedHoverItemIndex=null,i&&i.fixedData?(this._distribution=i.fixedData,o=e.model().properties().chartEventsSourceProperties.state(),o.visible=!0,this._properties=new t(o)):(this._chartEvents=new r({minImportance:1}),this._properties=e.model().properties().chartEventsSourceProperties),this.setOwnerSource(e),s=function(t){var i,o,n,r,s,a,l,h,u,d,p,f,_,m,g,v,y,b,S,w,T,P,C,x,E,L,I,A,k,M,O,D;if(c._coordinates||c._recalcCoordinates(),!(i=c._coordinates)||!i.length)return void c._hideTooltip();if(c._series.model().hoveredSource()!==c&&(c._hoverGroupIndex=void 0),c._createTemplates(),o=c._paneHeight,n=null,r=c._LOLLIPOP_LINE_WIDTH,s=r/2,a=c._LOLLIPOP_LINE_HEIGHT,l=c._LOLLIPOP_CIRCLE_DIAMETER,h=-l/2,u=c._LOLLIPOP_COUNTER_SIZE,d=c._LOLLIPOP_COUNTER_OFFSET,p=c.properties().breaks,f=p.visible.value())for(t.strokeStyle=p.color.value(),t.lineWidth=p.width.value(),CanvasEx.setLineStyle(t,p.style.value()),_=0;_<i.length;_++)CanvasEx.drawLine(t,i[_].x,0,i[_].x,o-a-l*i[_].items.length);for(c._importanceByIndex||(c._importanceByIndex={}),m=c._importanceByIndex,_=i.length;_--;)for(t.drawImage(c._templatesCache.line,i[_].x-s+.5,o-a-.5,r,a),g=i[_].index,m[g]||(m[g]=[]),v=i[_].items.length;v--;){if(y=i[_].items[v],v in m[g])b=m[g][v];else{for(b=-1,S=y.length;S--;)y[S].importance>b&&(b=y[S].importance);m[g][v]=b}w=o-a-l*(v+1)-.5,T=i[_].x,P=y.length,C=y[0].currency,x=c._hoverGroupIndex===i[_].index&&c._hoverItemIndex===v,c._clickedId!==i[_].index||c._clickedHoverItemIndex!==v?(E=x?"hovered":b<-.5?"low":b<.5?"mid":"hi",L=c._templatesCache[E][C],t.drawImage(L,T+h,w,l,l),P>1&&(I=c._amountImage(P),t.drawImage(I,0,0,I.width,I.height,T+d,w-d,u,u))):n={y:w,x:T,count:P,currency:C,currencyGroup:y,maxImportance:b,hovered:!0}}
!f&&n&&(w=0,A=e.bars().valueAt(c._hoverGroupIndex),null!==A&&(k=A[TradingView.LOW_PLOT],M=e.priceScale(),isFinite(k)&&M&&(M.isPercent()&&(O=e.firstValue(),k=M.priceRange().convertToPercent(k,O)),w=M.priceToCoordinate(k))),t.strokeStyle=c.color,t.lineWidth=1,CanvasEx.setLineStyle(t,CanvasEx.LINESTYLE_DASHED),CanvasEx.drawLine(t,n.x,0,n.x,o-a-l*(n.count-1))),n&&(D=n.hovered?c._templatesCache.hovered:c._templatesCache[b]||c._templatesCache[-1],L=D[n.currency]||D[""],t.drawImage(L,n.x+h,n.y,l,l),n.count>1&&(I=c._amountImage(n.count),t.drawImage(I,0,0,I.width,I.height,n.x+d,n.y-d,u,u))),n?c._showTooltip(n.currencyGroup,n.x,n.y,t):c._hideTooltip()},l=function(e){var t,i,o,n,r,s,l,h,u,d,p,f,_,m,g,v;if(c._hoverGroupIndex=void 0,c._hoverItemIndex=void 0,t=e.x,i=e.y,c._coordinates||c._recalcCoordinates(),!(o=c._coordinates)||!o.length)return null;if(n=c._paneHeight,r=c._LOLLIPOP_CIRCLE_DIAMETER,s=c._LOLLIPOP_LINE_HEIGHT,l=Math.floor((n-s-i)/r),h=n-l*r-s-r/2,u=h-i,d=Math.sqrt(r*r/4-u*u),!isFinite(d))return null;for(p=t-d,f=0,_=o.length-1;_-f>1;)m=f+_>>1,o[m].x>=p&&(_=m),o[m].x<=p&&(f=m);for(g=f;g<o.length&&!((v=o[g].x-t)>d);g++)if(!(v<-d)&&o[g].items[l])return c._hoverGroupIndex===o[g].index&&c._hoverItemIndex===l||(c._hoverGroupIndex=o[g].index,c._hoverItemIndex=l,c._invalidate()),new a(a.CUSTOM,{mouseClickHandler:c._lollipopMouseClickHandler.bind(c,o[g].index)});return null},this._paneView={renderer:function(){return{hitTest:l,draw:s}}},this._series.model().timeScale().tickMarks().changed.subscribe(this,this._recalcDistribution),this._chartEvents&&this._chartEvents.changed.subscribe(this,this._recalcDistribution),this._properties.subscribe(this,this._recalcDistribution),this._recalcDistribution()}var n=i(52).DataSource,r=i(898),s=i(130).Interval,a=i(11),l=i(94),c=i(14),h=i(260).Tooltip,u=2,d=["EUR","USD","JPY","GBP","CHF","AUD","CAD","NZD","CNY"];inherit(o,n),o.prototype.color=c.color.black80,o.prototype.bgcolor="white",o.prototype._tooltipShown=!1,o.prototype._$tooltip=null,o.prototype._$content=null,o.prototype._tooltipX=void 0,o.prototype._tooltipY=void 0,o.prototype._tooltipItems=null,o.prototype._distribution=null,o.prototype._colorsByIndex=null,o.prototype._coordinates=null,o.prototype._hoverGroupIndex=void 0,o.prototype._hoverItemIndex=void 0,o.prototype._LOLLIPOP_LINE_WIDTH=2,o.prototype._LOLLIPOP_LINE_HEIGHT=2,o.prototype._LOLLIPOP_CIRCLE_DIAMETER=24,o.prototype._LOLLIPOP_COUNTER_OFFSET=2,o.prototype._LOLLIPOP_COUNTER_SIZE=14,o.prototype.title=function(){return"Chart Events"},o.prototype.showInObjectTree=function(){return!1},o.prototype.onClickOutside=function(){this._clickedId=null},o.prototype._constructor="ChartEventsSource",o.prototype.properties=function(){return this._properties},o.prototype.updateAllViews=function(){var e,t=this._series.model().timeScale();t&&this._coordinates&&(e={width:t.width(),barSpacing:t.barSpacing(),rightOffset:t.rightOffset()},
this._cachedTimescaleState&&this._cachedTimescaleState.width===e.width&&this._cachedTimescaleState.barSpacing===e.barSpacing&&this._cachedTimescaleState.rightOffset===e.rightOffset||(this._cachedTimescaleState=e,this._coordinates=null))},o.prototype.paneViews=function(e){return this._properties.visible.value()?(this._paneHeight=e.height(),this._paneWidth=e.width(),[this._paneView]):null},o.prototype._recalcDistribution=function(){var e,t,i,o,n,r,a,c,h,u,p,f,_,m,g,v,y,b,S,w,T,P,C=this._series.model().timezone();if(C&&"exchange"!==C||(e=this._series.symbolInfo(),C=e&&e.timezone),C&&(this._timeOffset=l.get_timezone(C).offset_utc(new Date)),isFinite(this._timeOffset)){if(!this._chartEvents)return void(this.distibution&&this._createTemplates());if(this._coordinates=null,this._distribution=null,this._importanceByIndex=null,!this._properties.visible.value())return this._hideTooltip(),void(this._clickedId=null);if((e=this._series.symbolInfo())&&e.name&&!(e.name.length<6)&&("forex"===e.type||"cfd"===e.type||"bitcoin"===e.type)){for(t=null,i=e.name,o=0,n=0;n<2;n++)"bitcoin"===e.type&&"DOGE"===i.substr(o,4).toUpperCase()?(r="DOGE",o+=4):(r=i.substr(o,3).toUpperCase(),o+=3),-1!==d.indexOf(r)&&(t||(t={}),t[r]=!0);if(t&&(c=new s(this._series.interval()),c.isValid())){switch(h=NaN,c.kind()){case s.WEEKS:h=168*c.multiplier();break;case s.DAYS:h=24*c.multiplier();break;case s.HOURS:h=c.multiplier();break;case s.MINUTES:h=c.multiplier()/60;break;case s.SECONDS:h=c.multiplier()/3600;break;default:return}if(h<4)a=-1;else if(h<48)a=0;else{if(!(h<672))return;a=1}if(this._minImportance===a&&this._symbolName===i||(this._chartEvents.reset({minImportance:a,currencyFilter:Object.keys(t)}),this._minImportance=a,this._symbolName=i),this._createTemplates(),u=this._chartEvents.items(),p=this._series.model().timeScale(),f=p.tickMarks(),_={},this._distribution=_,m=+f.minIndex,this._properties.futureOnly.value()&&(m=Math.max(m,p.baseIndex())),isFinite(m)){if(g=+f.maxIndex,v=u.length,y=0,b=f.indexToTime(g))for(S=+b-this._timeOffset;y<u.length&&!(u[y].timestamp<=S);y++);for(w=g;w>=m;w--)if(b=f.indexToTime(w))for(S=+b-this._timeOffset;;y++){if(y>=v)return void(this._chartEvents.minObtainedTimestamp>f.indexToTime(m)&&this._chartEvents.requestMore({from:f.indexToTime(m)}));if(T=u[y],!t||t[T.currency]){if(T.timestamp<S)break;for(_[w]||(_[w]=[]),P=_[w].length;P--;)if(_[w][P][0].currency===T.currency){_[w][P].push(T);break}P<0&&_[w].push([T])}}}}}}},o.prototype._recalcCoordinates=function(){var e,t,i,o,n,r,s;if(this._distribution||this._recalcDistribution(),e=[],this._coordinates=e,(t=this._distribution)&&(i=this._series.model().timeScale(),null!==(o=i.visibleBars())))for(n=o.lastBar(),r=o.firstBar(),this._coordinates=e,s=r;s<=n;s++)t[s]&&e.push({x:i.indexToCoordinate(s)+1,items:t[s],index:s})},o.prototype._onNewItems=function(){this._recalcDistribution(),this._series.model().updateSource(this)},o.prototype._createTemplates=function(){var e,t;if(!this._templatesCache)for(this._templatesCache={line:null,hovered:{},numbers:{}},this._createTemplateLine(),
e=0;e<d.length;e++)t=d[e],this._createTemplateCircle(t,"low",c.color.attention),this._createTemplateCircle(t,"mid",c.color.attention50),this._createTemplateCircle(t,"hi",c.color.danger),this._createTemplateCircle(t,"hovered",c.color.brandHover)},o.prototype._createTemplateLine=function(){var e,t,i,o=document.createElement("canvas");o.width=this._LOLLIPOP_LINE_WIDTH,o.height=this._LOLLIPOP_LINE_HEIGHT,e=o.getContext("2d"),e.strokeStyle=this.color,CanvasEx.setLineStyle(e,CanvasEx.LINESTYLE_DASHED),t=this._templatesCache,t.line=o,i=new Image,i.onload=function(){t.line=i},i.src=o.toDataURL()},o.prototype._createTemplateCircle=function(e,t,o){function n(){var i=new Image;i.onload=function(){l[t][e]=i},i.src=g.toDataURL()}function r(){a.beginPath(),a.arc(c,c,v/2-h/2,0,2*Math.PI),a.closePath(),a.lineWidth=h,a.strokeStyle=o,a.stroke()}function s(e){e.width=d,e.height=d,a.drawImage(e,c-d/2,c-d/2,d,d),a.globalCompositeOperation="destination-in",a.beginPath(),a.arc(c,c,d/2,0,2*Math.PI),a.closePath(),a.fillStyle=p,a.fill(),a.globalCompositeOperation="source-over"}var a,l,c,h,d,p,f,_,m=this,g=document.createElement("canvas"),v=m._LOLLIPOP_CIRCLE_DIAMETER*u,y=2.5*u;switch(g.width=v,g.height=v,a=g.getContext("2d"),l=this._templatesCache,l[t]||(l[t]={}),l[t][e]=g,c=Math.floor(v/2),h=1.5*u,d=v-2*h-2*y,p=this.bgcolor,f="",e){case"EUR":f=i(1e3);break;case"USD":f=i(1001);break;case"JPY":f=i(1002);break;case"GBP":f=i(1003);break;case"CHF":f=i(1004);break;case"AUD":f=i(1005);break;case"CAD":f=i(1006);break;case"NZD":f=i(1007);break;case"CNY":f=i(1008)}f?(_=new Image,_.onload=function(){s(_),r(),n(),m._invalidate()},/\b(MSIE|Trident)\b/.test(navigator&&navigator.appVersion)?_.src=this._fallbackImages[e]:_.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(f)):(r(),n())},o.prototype._amountImage=function(e){var t,i,o,n,r;return e+="",this._templatesCache.numbers[e]?this._templatesCache.numbers[e]:(t=document.createElement("canvas"),i=this._LOLLIPOP_COUNTER_SIZE*u,o=10*u,t.width=i,t.height=i,n=t.getContext("2d"),r=i/2,n.font=o+"px sans-serif",n.textBaseline="middle",n.textAlign="center",n.fillStyle="white",n.arc(r,r,i/2,0,2*Math.PI),n.fill(),n.fillStyle="black",n.fillText(e,r,r),this._templatesCache.numbers[e]=t,t)},o.prototype._createTooltipLayout=function(){this._$tooltip=new h},o.prototype._showTooltip=function(e,t,i,o){var n=o.canvas.parentNode;n&&(this._$tooltip||this._createTooltipLayout(),this._$tooltip.show({items:e,x:t,y:i,wrapElement:n,timeOffset:this._timeOffset}))},o.prototype._hideTooltip=function(){this._$tooltip&&this._$tooltip.hide()},o.prototype._invalidate=function(){this._series.model().updateSource(this)},o.prototype._dateStr=function(e){var t=new Date(e+this._timeOffset),i=Math.round(Math.abs(this._timeOffset)/6e4),o="UTC";return 0!==i&&(this._timeOffset>0?o+="+":o+="-",o+=Math.floor(i/60),i%60&&(o+=":"+i%60)),t.getUTCFullYear()+"-"+("0"+(t.getUTCMonth()+1)).slice(-2)+"-"+("0"+t.getUTCDate()).slice(-2)+" "+("0"+t.getUTCHours()).slice(-2)+":"+("0"+t.getUTCMinutes()).slice(-2)+" ("+o+")"},
o.prototype._fallbackImages={AUD:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAtFBMVEUAAABHV6hGV6hIWKdGV6lGV6mjrNVba6/MoLvXrcJdarOGg7man8+dptF4hcDhtsXhtsRndbhHWKn0lJ5SYq74v8X2qbG3vt6Ml8mXoc+AjMT1z9bd4O9pd7nGy+ROX63///9ebbP1pK3vY3HpnKrbt8mutdnc3+/yipXuXm339/vl6PPyprCjrNTfmKv09fqOmcp9icLZscTxdIGvttnglqitia/o6vTl5/Ogk771nKXR1uok/dPkAAAAEnRSTlMAkNAgz4/kQ/D0l1Q146P+/tdT9Ek9AAAAl0lEQVQYGU3ABRLCMAAEwEtS3C9CCxR3d/3/vwhMkcVLJl1dM0gpJLJXq+v0UngbOqtbHTIe9wJ4uenssDydyUbXMA8Umv3BvTm6kYaGjyJKVjtrJx0aemEZFT13C2vrpr2iF0Bvtm7Xcnu2I76A/46GkPwT9iQEGfNHQDG6RPxSgGh0Q34IeDUTMyHxJpgQSCghSSkUvCcoxxGR2DVB1AAAAABJRU5ErkJggg==",CAD:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAWlBMVEUAAADyna7wnqf19/v19/n09/rvipX09vr09/ruXm3udYPte4fue4j09/rvj5nwkJv0+vr39//tVWXtXm307PD04uf02N7uaHf19/rzztTxpq/udIHuX27uc4Cmg02WAAAAEnRSTlMAPFd/gL/A7/D+8OfmwK+tMCDHCHMKAAAAfElEQVR4AWWPRQLEIAwAU6GuBFL//ze3kfU5wcSBmTJXli6bwBhWpRxBaP1q+E7i/i38AJD6T1GnUIgI+x5Y+AIaEdF7EtEAsjgP74+TRa1i8TcXC9SScJslSIk1pW0ja5qijI1RxmLyv9jX6q0dV+m/GsCY8r6q+nzm9wN3vQ/0RJj4yQAAAABJRU5ErkJggg==",CHF:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAxElEQVR4AWNAB+9DUw3ehqTUvwlJ2Q+k34MwlF0PkmPAB4CKCt6Gpv7HhUGGAel8rJqBtmyAKCSM34SmrifKZgKuKYD7GZuCD6VN/6EAxMbqHZBekO0N2Az4WN8N0w9i43JFAwPQPwfQbAZr+DJvOUw/iA0Sw3AJSC8DkPEBWZAAwPAGRQaA9OL2wvwVMD0gNk4vUByIsGj8QGo0gvS8D8hQoCghkZ2UQWrxZaYPeDR/QLcZV3ZugMbOBxAGsUFiYD+jAQBm1lU4Y8LtqgAAAABJRU5ErkJggg==",CNY:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAbFBMVEUAAADvVGTtVGTsVWXtVGTvUGDvUGjtVGTtVWXsU2PtVWXsVGTsVWXtVGTsVGTvWmHuWmLtVWXwhVDtVWXuW2L2u0LylE7yjlHxgVXzmkzvdVn1tUT0p0fvaF7vblvxe1jxiFP1rUb0oUr0m0w7gi5vAAAAE3RSTlMAQIDA7xAg4JBQ8L9gf7CT4N95YlMWdQAAAIZJREFUGBlVwAcSgjAURdGX0LF7A0q37H+PfjOMg0df+WGXprtDrtU+hQlIK0UnIDQzppRx9x7oQ8A4KTs/uwCEcQEuma6NaYF5wjj5sWnemMeM8Upew3DDtAvmqOQWwp2pm4iO8kRtIPKq+OOUFWwUmeTYcDIlP6WifU1UV1rlPqmLxOcyH/tmDpsy+r2pAAAAAElFTkSuQmCC",EUR:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAYFBMVEUAAABIWKdFVapHV6hHV6hGWKlGWKlGV6lHV6hHWKhGWKlGV6lGV6lHWKlSX6JeZpxpbZd1dJCAe4uMgoWXiX+ikHqjkHmvl3LFpGfGpWfcslzds1voulXoulbzwFD/yEoW9yMBAAAADXRSTlMAIDBvcH+Ar7C/wO/wuFJj1gAAAJdJREFUeAE9z4UBxDAIQFHqxk+pe9l/y/N7cSfyEmdV01RZLF8pH00ibyVA1wEU//XhPAeA9Hke+mnEnXHqaWLJYfDTnk4fIJcahm2Ab1OLEgIBILx6jShcBy8cJ6jULH4bgN0+U0sOS9sGCG27QC6xQlj3ed7XABq9AsMuN/PLIP2GvvRm/QLl93PKC5rKV5zXqnUevfoPfJIMWKgHm2UAAAAASUVORK5CYII=",JPY:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAP1BMVEUAAAD39//0+vr2+Pr2+Pr19/v19/n19vn19vn09/r09/r09vr09/rxpa/yw8r19/rxpq/zxMvvh5PtVWXviJT5Un0aAAAADXRSTlMAIDBvcH+Ar7C/wO/wuFJj1gAAAGpJREFUeAFljoMBRDEMQFMrxcf+s16D8ytiAGFDaa0EC4qfQnNi5/kiafyN3/WsjLUOrrIQSZ7X5iYtQqX4xYytVsD9d3F0qvl14H/Ju+kpTS2SHL0Pkmj+FvtePQPjUUz0oNhYEWs0pD8AMW8Lpf/OkoMAAAAASUVORK5CYII=",
NZD:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAn1BMVEUAAABGV6lHV6hGWKlGWKlFVaqQgrRGV6lIWKfmmaimqdFHV6hGWKlGV6nTqb/e2ed1gb/TqL50gb/d2OZHWKhRVqRHV6j2qbH+9PX83+Lxf4tHWKn1o6v0maJmV5yFV49RV6TuXWxod7n0mqOMl8lcV6DOVXG5VXn2qrJGWKnuXm2vVn7yiZR6VpOPVouZVoelVoKkqNCDe7KaVobuX26RZHfdAAAAF3RSTlMA8HDAgDBq7yD++29/r/D90/DT/b/wsEIK9MUAAACcSURBVBgZTcAFEsIwAATAixR3S5MrLTXc4f9vI80wDItGazY/9xaDCF9TEztbkO0+gm6SOFsd6A3hjcr3sdzvn2xIoGWSPE+MebLRjjCJ3Xrt4uqQZvQ0xs4aY11c7LYkawVnK2Mq6x7phjxtlxD8c8kEFIPrjYGCZnDfMdCIBBsbelktOoDkzyuV8Fb8kQikYCAkviKthFC6A+8Dc4QUp0+PRNwAAAAASUVORK5CYII=",GBP:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABsElEQVR4AaVTA6+dURA8P6Fx+i/6D2rbttu4tm3HtS6fbdv2u7ated+W15zkaHd2ksVh4Zi3Tjxr6dYfa3M+1uQP33hrokV3srFEWLyZN2fJ1p+dS7f9xFB+E/SbD9P6dScb+YgTPXgbbx+RaEUVCPIRlwWDlzWw9eaTOiQr8OV7J3786NnMCHfu1MweaBm1mbsG0d48iVW7+DEFjp4pgkqih62hHZMTOjsjLNnyc93xc8XQyIywN3bA6/biybvmCAFRVj8sU0qYOwfR3TaNNXsEWLbt+zxWz29oIAItdV0X3F0DcLV2wZFb+k/AlVcKV3MnvP3DkFZ14C+/XtjQwNRn7niJFLE2HYp6D14Um7lAcAq0zM09cLV1w5VT8pfI3Yvh7uyHhksxmEuxjIpIFb7zogGBAGCra4VJY8F0Wds/ATmXt9/v54rcDq3CiJMXSqgrv4tIqCgf0Zu46lqmlRBy1Y7WxmXbf6K1YRzmnhGYxuXg8bqV7C++va7YouT6e+R0YcJBuvqwFh6nB19flW/OfJSjf6YfXbEEyEcclghU2OwPtQWjN9+aaNGdbNG4M6B0Sa2MTP3yAAAAAElFTkSuQmCC",USD:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAn1BMVEUAAAD19/n2+Prte4f09/rvipXuXm3wnqf0+vrvj5nudYOtlb5+jsu81PLwipbwkJvAutjue4judIKSib99i8d5hMPvkJusyu339/+GsOZznNv09vr00dfyna5KidztVWWCrudVkN7tXm319/q70/Jsn+KlxO6wy/Bgl+DS4veOtel3puWZvevvfYrM2/Pzz9XH2vRUhtVyhsfp8fvd6fm1RKu9AAAAHnRSTlMAgHDn8MD+VzCv8Hb7cr6t4ubv3vb45NIgr/PvyzyfYTeeAAAAkElEQVR4XlXLVQ7DMBBF0ReGMvMYwlDu/tfW2I6q9Gh+7pMGymg1ftJyGqA3r8UnJcb8melN3RDPiHUWqg9UkrpEsYFJLd45VYUZTiF2JbUNtZwSzcKRFEF01864cVFx8ciJaT7SjAquXswgsX71rtoWVvLHQugO290D9nCw0XHYjwMtkiZlhF7gxVLG3kXFF0FcGmdRqkNIAAAAAElFTkSuQmCC"},o.prototype.isSavedInChart=function(e){return!!e},o.prototype.state=function(e){var t,i,o,n,r,s,a,l,c,h,u,d,p,f,_,m=300,g=400;if(this._distribution||this._recalcDistribution(),!this._distribution)return null;if(t={type:"ChartEventsSource",id:this.id(),state:null,zorder:this.zorder()},e){for(i={},o=Object.keys(this._distribution).map(Number).filter(isFinite).sort(function(e,t){return t-e}),n=this._series.model().timeScale(),r=1/0,s=n.visibleBars(),null!==s&&(r=s.firstBar()),a=0,l=0;l<o.length&&!(a>m)&&!((c=o[l])<r);l++)for(i[c]=[],h=this._distribution[c],u=0;u<h.length&&!(a>g);u++)for(i[c][u]=[],d=this._distribution[c][u],p=0;p<d.length&&!(a>g);p++)f=d[p],_={timestamp:f.timestamp,currency:f.currency},f.actual&&(_.actual=f.actual),f.forecast&&(_.forecast=f.forecast),f.previous&&(_.previous=f.previous),f.title&&(_.title=f.title),isFinite(f.importance)&&(_.importance=f.importance),i[c][u][p]=_,a++;t.state={distribution:i}}return t},o.createFromState=function(e,t,i){var n,r;return t&&(n=i.mainSeries())?(r=e&&e.state&&e.state.distribution,r?new o(n,{fixedData:r}):null):null},o.prototype._lollipopMouseClickHandler=function(e){this._clickedId=this._clickedId===e?null:e,
this._clickedHoverItemIndex=this._hoverItemIndex},TradingView.ChartEventsSource=o,e.exports=o}).call(t,i(37))},function(e,t,i){"use strict";var o,n,r,s,a;Object.defineProperty(t,"__esModule",{value:!0}),o=i(166),n=i(4),r=i(0),s=r.getLogger("Common.UndoStack"),a=function(){function e(){this._commands=[],this._onChange=new n}return e.prototype.onChange=function(){return this._onChange},e.prototype.isEmpty=function(){return 0===this._commands.length},e.prototype.clear=function(){this._commands.length=0,this._onChange.fire()},e.prototype.push=function(e){if(!(e instanceof o.UndoCommand))throw new TypeError("argument must be an instance of UndoCommand");this._commands.push(e),this._onChange.fire()},e.prototype.pop=function(){if(this.isEmpty())return void s.logDebug("pop: undo stack is empty");var e=this._commands.pop();return this._onChange.fire(),e},e.prototype.head=function(){if(!this.isEmpty())return this._commands[this._commands.length-1]},e}(),t.UndoStack=a},function(e,t,i){"use strict";var o,n,r,s,a;Object.defineProperty(t,"__esModule",{value:!0}),o=i(6),n=i(166),r=function(e){function t(t,i,o){var n=e.call(this,o)||this;return n._chartModel=t,n._defaultProperty=i,n._state=i.state(),n}return o.__extends(t,e),t.prototype.undo=function(){this._defaultProperty.merge(this._state),this._defaultProperty.listeners().fire(this._defaultProperty),this._chartModel.mainSeries().onChartStyleChanged()},t}(n.UndoCommand),t.RestoreDefaultsUndoCommand=r,s=function(e){function t(t,i,o){return void 0===o&&(o="Restore User Defaults"),e.call(this,t,i,o)||this}return o.__extends(t,e),t.prototype.redo=function(){this._chartModel.restoreDefaults(this._defaultProperty)},t}(r),t.RestoreUserDefaultsUndoCommand=s,a=function(e){function t(t,i,o){return void 0===o&&(o="Restore Defaults"),e.call(this,t,i,o)||this}return o.__extends(t,e),t.prototype.redo=function(){this._chartModel.restoreFactoryDefaults(this._defaultProperty)},t}(r),t.RestoreFactoryDefaultsUndoCommand=a},function(e,t,i){"use strict";function o(e){i.e(20).then(function(t){i(983).showGoToDateDialog(e)}.bind(null,i)).catch(i.oe)}Object.defineProperty(t,"__esModule",{value:!0}),t.showGoToDateDialog=o},function(e,t,i){"use strict";var o,n;Object.defineProperty(t,"__esModule",{value:!0}),o=i(22),n=function(){function e(e){var t,i,n,r,s,a,l=this;this.isVisible=new o(!0),i=null,n=function(o){var n=o?o+"Hidden":"hidden";if(n in e)return t=o+"visibilitychange",i=function(){l.isVisible.setValue(!e[n])},i(),e.addEventListener(t,i,!1),"break"};for(r=0,s=["","moz","ms","webkit"];r<s.length&&(a=s[r],"break"!==n(a));r++);this.destroy=function(){i&&(e.removeEventListener(t,i,!1),i=null)}}return e}(),t.VisibilityApi=n},,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.CONNECTED=1]="CONNECTED",e[e.CONNECTING=2]="CONNECTING",e[e.DISCONNECTED=3]="DISCONNECTED",e[e.ERROR=4]="ERROR"}(t.CONNECTSTATUSES||(t.CONNECTSTATUSES={})),function(e){e[e.LIMIT=1]="LIMIT",e[e.MARKET=2]="MARKET",e[e.STOP=3]="STOP",e[e.STOPLIMIT=4]="STOPLIMIT"
}(t.ORDERTYPE||(t.ORDERTYPE={})),function(e){e[e.BUY=1]="BUY",e[e.SELL=-1]="SELL"}(t.SIDE||(t.SIDE={})),function(e){e[e.CANCELED=1]="CANCELED",e[e.FILLED=2]="FILLED",e[e.INACTIVE=3]="INACTIVE",e[e.PLACING=4]="PLACING",e[e.REJECTED=5]="REJECTED",e[e.WORKING=6]="WORKING"}(t.ORDERSTATUS||(t.ORDERSTATUS={})),function(e){e[e.ORDER=1]="ORDER",e[e.POSITION=2]="POSITION"}(t.PARENTTYPE||(t.PARENTTYPE={})),function(e){e[e.STOPLOSS=1]="STOPLOSS",e[e.STOPPRICE=2]="STOPPRICE",e[e.TAKEPROFIT=3]="TAKEPROFIT"}(t.TICKETFOCUS||(t.TICKETFOCUS={})),function(e){e[e.ERROR=0]="ERROR",e[e.SUCCESS=1]="SUCCESS"}(t.NOTIFICATION||(t.NOTIFICATION={}))},function(e,t,i){"use strict";function o(){T||(T=!0,b[2]=$.t("Market"),b[1]=$.t("Limit"),b[3]=$.t("Stop"),b[4]=$.t("StopLimit"),S[1]=$.t("Buy",{context:"trading"}),S[-1]=$.t("Sell",{context:"trading"}),w[2]=$.t("filled"),w[1]=$.t("cancelled"),w[6]=$.t("working"),w[3]=$.t("inactive"),w[4]=$.t("placing"),w[5]=$.t("rejected"))}function n(e){return e?e.map(function(e){if("-"===e.text||e.separator)return new v.ActionSeparator;var t=new v.Action({checkable:e.checkable,checked:e.checked,enabled:e.enabled,shortcut:e.shortcut,text:e.text,toolTip:e.tooltip,statName:e.statName});return t.callbacks().subscribe(null,function(t){e.action({checkable:t.checkable,checked:t.checked,enabled:t.enabled,text:t.text})}),t}):[]}function r(e){return e?e.map(function(e){if("-"===e.text||e.separator)return{separator:!0};var t={};return e.checkable&&(t.icon={image:"url('"+TradingView.wrapUrl("/static/images/dialogs/checkbox.png")+"')",offset:e.checked?"0 -16px":""}),t.title=e.text,t.action=e.action,e.url&&(t.url=e.url),e.target&&(t.target=e.target),e.externalLink&&(t.externalLink=e.externalLink),t}):[]}function s(e){if(!e||!e.done)return e;var t=e;return new Promise(function(e,i){t.done(function(t){e(t)}).fail(function(e){i(e)})})}function a(e,t){o();var i=S[e];return t?i.toUpperCase():i}function l(e,t){return o(),t?b[e].toUpperCase():b[e]}function c(e){return o(),w[e]}function h(e){switch(e){case 2:return"orderstatus-filled";case 1:return"orderstatus-cancelled";case 6:return"orderstatus-working";case 3:return"orderstatus-inactive";case 4:return"orderstatus-placing";case 5:return"orderstatus-rejected";default:return"orderstatus-unknown"}}function u(e){return 6===e||3===e}function d(e){return e.indexOf("JPY")===e.length-3?.01:1e-4}function p(e,t,i,o){var n={added:[],modified:[],removed:[]},r=e.slice(0);return t.forEach(function(t){var s,a,l,c,h=e.findIndex(function(e){return e[i]===t[i]});if(-1===h)return void n.added.push(t);for(r[h]=null,s=e[h],a=0,l=o;a<l.length;a++)if(c=l[a],(null===s[c]||"object"!=typeof s[c])&&s[c]!==t[c])return void n.modified.push(t)}),r.forEach(function(e){e&&n.removed.push(e)}),n}function f(e,t,i){var o,n,r;for(o=0,n=i;o<n.length;o++)if(r=n[o],(null===e[r]||"object"!=typeof e[r])&&e[r]!==t[r])return!0;return!1}function _(e,t){return e.reduce(function(e,i){return e[i[t]]=i,e},{})}function m(e){return Math.abs(e||0)<.001?"0.00":y.splitThousands((e||0).toFixed(2))}function g(e){
return-1!==[2,1,5].indexOf(e)}var v,y,b,S,w,T;Object.defineProperty(t,"__esModule",{value:!0}),i(5),v=i(74),y=i(552),b={},S={},w={},T=!1,t.convertActionDescriptionsToActions=n,t.convertActionDescriptionsToPopupMenuDescriptions=r,t.wrapDeferredWithPromise=s,t.sideToText=a,t.orderTypeToText=l,t.orderStatusToText=c,t.orderStatusId=h,t.isOrderActive=u,t.pipSizeForForex=d,t.findArraysDifferences=p,t.isObjectDifferent=f,t.objectsArrayToMap=_,t.formatNumber=m,t.isFinalOrderStatus=g},function(e,t,i){"use strict";var o,n,r,s,a,l,c,h;Object.defineProperty(t,"__esModule",{value:!0}),o=i(11),n=i(51),r=i(70),s=i(8),a=i(33),l=i(9),c=i(69),h=function(){function e(e,t,i){this._data=null,this._hitTestResult=e||new o(o.MOVEPOINT),this._backHitTestResult=t||new o(o.MOVEPOINT_BACKGROUND),this._forceOverrideTransparency=!!i}return e.prototype.setData=function(e){this._data=e},e.prototype.draw=function(e){var t,i,o,n;null===this._data||this._data.points.length<2||(e.lineCap="butt",e.strokeStyle=this._data.color,e.lineWidth=this._data.linewidth,void 0!==this._data.linestyle&&c.setLineStyle(e,this._data.linestyle),t=this._data.points,i=t[0],o=t[1],n=o.subtract(i),e.beginPath(),e.rect(i.x,i.y,n.x,n.y),this._data.linewidth>0&&e.stroke(),this._data.fillBackground&&(e.fillStyle=this.getColor(),e.fill()))},e.prototype.hitTest=function(e){var t,i,o,a,l,c,h,u,d,p;return null===this._data||this._data.points.length<2||this._data.nohittest?null:(t=this._data.points,i=t[0],o=t[1],a=new s.Point(o.x,i.y),l=new s.Point(i.x,o.y),c=n.distanceToSegment(i,a,e),c.distance<=3?this._hitTestResult:(c=n.distanceToSegment(a,o,e),c.distance<=3?this._hitTestResult:(c=n.distanceToSegment(o,l,e),c.distance<=3?this._hitTestResult:(c=n.distanceToSegment(l,i,e),c.distance<=3?this._hitTestResult:this._data.fillBackground&&(h=Math.min(i.x,o.x),u=Math.max(i.x,o.x),d=Math.min(i.y,o.y),p=Math.max(i.y,o.y),i=new s.Point(h,d),o=new s.Point(u,p),r.pointInRectangle(e,i,o))?this._backHitTestResult:null))))},e.prototype.getColor=function(){var e=l.ensure(this._data);return a.generateColor(e.backcolor,e.transparency,this._forceOverrideTransparency)},e}(),t.RectangleRenderer=h},function(e,t,i){"use strict";function o(e,t){void 0===t&&(t="&nbsp;");var i=(e+"").split(".");return i[0].replace(/\B(?=(\d{3})+(?!\d))/g,t)+(i[1]?"."+i[1]:"")}Object.defineProperty(t,"__esModule",{value:!0}),t.splitThousands=o},,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i(13),i(5),t.lineToolsInfo={LineTool5PointsPattern:{icon:i(678),localizedName:$.t("XABCD Pattern")},LineToolABCD:{icon:i(679),localizedName:$.t("ABCD Pattern")},LineToolArc:{icon:i(680),localizedName:$.t("Arc")},LineToolArrow:{icon:i(681),localizedName:$.t("Arrow")},LineToolArrowMarkDown:{icon:i(682),localizedName:$.t("Arrow Mark Down")},LineToolArrowMarkLeft:{icon:i(683),localizedName:$.t("Arrow Mark Left")},LineToolArrowMarkRight:{icon:i(684),localizedName:$.t("Arrow Mark Right")},LineToolArrowMarkUp:{icon:i(685),localizedName:$.t("Arrow Mark Up")},LineToolBalloon:{icon:i(686),localizedName:$.t("Balloon")
},LineToolBarsPattern:{icon:i(687),localizedName:$.t("Bars Pattern")},LineToolBezierCubic:{icon:i(688),localizedName:$.t("Double Curve")},LineToolBezierQuadro:{icon:i(689),localizedName:$.t("Curve")},LineToolBrush:{icon:i(690),localizedName:$.t("Brush")},LineToolCallout:{icon:i(691),localizedName:$.t("Callout")},LineToolCircleLines:{icon:i(692),localizedName:$.t("Cyclic Lines")},LineToolCypherPattern:{icon:i(693),localizedName:$.t("Cypher Pattern")},LineToolDateAndPriceRange:{icon:i(694),localizedName:$.t("Date and Price Range")},LineToolDateRange:{icon:i(695),localizedName:$.t("Date Range")},LineToolDisjointAngle:{icon:i(696),localizedName:$.t("Disjoint Angle")},LineToolElliottCorrection:{icon:i(697),localizedName:$.t("Elliott Correction Wave (ABC)")},LineToolElliottDoubleCombo:{icon:i(698),localizedName:$.t("Elliott Double Combo Wave (WXY)")},LineToolElliottImpulse:{icon:i(699),localizedName:$.t("Elliott Impulse Wave (12345)")},LineToolElliottTriangle:{icon:i(700),localizedName:$.t("Elliott Triangle Wave (ABCDE)")},LineToolElliottTripleCombo:{icon:i(701),localizedName:$.t("Elliott Triple Combo Wave (WXYXZ)")},LineToolEllipse:{icon:i(702),localizedName:$.t("Ellipse")},LineToolExtended:{icon:i(703),localizedName:$.t("Extended")},LineToolFibChannel:{icon:i(704),localizedName:$.t("Fib Channel")},LineToolFibCircles:{icon:i(705),localizedName:$.t("Fib Circles")},LineToolFibRetracement:{icon:i(706),localizedName:$.t("Fib Retracement")},LineToolFibSpeedResistanceArcs:{icon:i(707),localizedName:$.t("Fib Speed Resistance Arcs")},LineToolFibSpeedResistanceFan:{icon:i(708),localizedName:$.t("Fib Speed Resistance Fan")},LineToolFibSpiral:{icon:i(709),localizedName:$.t("Fib Spiral")},LineToolFibTimeZone:{icon:i(710),localizedName:$.t("Fib Time Zone")},LineToolFibWedge:{icon:i(711),localizedName:$.t("Fib Wedge")},LineToolFlagMark:{icon:i(712),localizedName:$.t("Flag Mark")},LineToolFlatBottom:{icon:i(713),localizedName:$.t("Flat Top/Bottom")},LineToolGannComplex:{icon:i(482),localizedName:$.t("Gann Square")},LineToolGannFixed:{icon:i(482),localizedName:$.t("Gann Square Fixed")},LineToolGannFan:{icon:i(714),localizedName:$.t("Gann Fan")},LineToolGannSquare:{icon:i(715),localizedName:$.t("Gann Box")},LineToolGhostFeed:{icon:i(716),localizedName:$.t("Ghost Feed")},LineToolHeadAndShoulders:{icon:i(717),localizedName:$.t("Head and Shoulders")},LineToolHorzLine:{icon:i(718),localizedName:$.t("Horizontal Line")},LineToolHorzRay:{icon:i(719),localizedName:$.t("Horizontal Ray")},LineToolIcon:{icon:"icon",localizedName:$.t("Font Icons")},LineToolInsidePitchfork:{icon:i(720),localizedName:$.t("Inside Pitchfork")},LineToolNote:{icon:i(721),localizedName:$.t("Note")},LineToolNoteAbsolute:{icon:i(722),localizedName:$.t("Anchored Note")},LineToolParallelChannel:{icon:i(723),localizedName:$.t("Parallel Channel")},LineToolPitchfan:{icon:i(724),localizedName:$.t("Pitchfan")},LineToolPitchfork:{icon:i(725),localizedName:$.t("Pitchfork")},LineToolPolyline:{icon:i(726),localizedName:$.t("Polyline")},LineToolPrediction:{icon:i(727),
localizedName:$.t("Forecast")},LineToolPriceLabel:{icon:i(728),localizedName:$.t("Price Label")},LineToolPriceRange:{icon:i(729),localizedName:$.t("Price Range")},LineToolProjection:{icon:i(730),localizedName:$.t("Projection")},LineToolRay:{icon:i(731),localizedName:$.t("Ray")},LineToolRectangle:{icon:i(732),localizedName:$.t("Rectangle")},LineToolRegressionTrend:{icon:i(733),localizedName:$.t("Regression Trend")},LineToolRiskRewardLong:{icon:i(734),localizedName:$.t("Long Position")},LineToolRiskRewardShort:{icon:i(735),localizedName:$.t("Short Position")},LineToolRotatedRectangle:{icon:i(736),localizedName:$.t("Rotated Rectangle")},LineToolSchiffPitchfork:{icon:i(737),localizedName:$.t("Modified Schiff Pitchfork")},LineToolSchiffPitchfork2:{icon:i(738),localizedName:$.t("Schiff Pitchfork")},LineToolSineLine:{icon:i(739),localizedName:$.t("Sine Line")},LineToolText:{icon:i(740),localizedName:$.t("Text")},LineToolTextAbsolute:{icon:i(741),localizedName:$.t("Anchored Text")},LineToolThreeDrivers:{icon:i(742),localizedName:$.t("Three Drives Pattern")},LineToolTimeCycles:{icon:i(743),localizedName:$.t("Time Cycles")},LineToolTrendAngle:{icon:i(744),localizedName:$.t("Trend Angle")},LineToolTrendBasedFibExtension:{icon:i(745),localizedName:$.t("Trend-Based Fib Extension")},LineToolTrendBasedFibTime:{icon:i(746),localizedName:$.t("Trend-Based Fib Time")},LineToolTrendLine:{icon:i(747),localizedName:$.t("Trend Line")},LineToolTriangle:{icon:i(748),localizedName:$.t("Triangle")},LineToolTrianglePattern:{icon:i(749),localizedName:$.t("Triangle Pattern")},LineToolVertLine:{icon:i(750),localizedName:$.t("Vertical Line")},SyncDrawing:{icon:i(751),iconActive:i(752),localizedName:$.t("Sync drawings to all charts")},arrow:{icon:i(753),localizedName:$.t("Arrow")},cursor:{icon:i(754),localizedName:$.t("Cross")},dot:{icon:i(755),localizedName:$.t("Dot")},drawginmode:{icon:i(756),iconActive:i(757),localizedName:$.t("Stay in Drawing Mode")},eraser:{icon:i(758),localizedName:$.t("Eraser")},group:{icon:i(759),localizedName:$.t("Show Hidden Tools")},hideAllDrawings:{icon:i(645),iconActive:i(760),localizedName:$.t("Hide All Drawing Tools")},lockAllDrawings:{icon:i(761),iconActive:i(762),localizedName:$.t("Lock All Drawing Tools")},magnet:{icon:i(763),localizedName:$.t("Magnet Mode pulls the points of drawings to symbol values")},measure:{icon:i(764),localizedName:$.t("Measure (Shift + Click on the chart)")},removeAllDrawingTools:{icon:i(765),localizedName:$.t("Remove All Drawing Tools")},showObjectsTree:{icon:i(766),localizedName:$.t("Show Objects Tree")},zoom:{icon:i(767),localizedName:$.t("Zoom In")},"zoom-out":{icon:i(768),localizedName:$.t("Zoom Out")}}},function(e,t,i){"use strict";function o(e,t,i){this._cache=e,this._cacheRect=t,this._targetRect=i}var n=i(8).Point,r=i(70).pointInRectangle,s=i(11);o.prototype.draw=function(e){e.translate(.5,.5),
e.drawImage(this._cache,this._cacheRect.left,this._cacheRect.top,this._cacheRect.width,this._cacheRect.height,this._targetRect.left,this._targetRect.top,this._targetRect.width,this._targetRect.height),e.translate(-.5,-.5)},o.prototype.hitTest=function(e){var t=new n(this._targetRect.left,this._targetRect.top),i=t.add(new n(this._targetRect.width,this._targetRect.height));return r(e,t,i)?new s(s.REGULAR):null},e.exports=o},function(e,t,i){"use strict";function o(e){var t=e.split(":");return{name:t[0],type:2===t.length?t[1]:null}}function n(e,t,i,n){var r,s,a,l,c,p,f,_,m,g,v,y,b,S,w,T=i.split(".");if(0!==T.length&&0!==T[0].length){if(r=o(T[0]),s=r.name,a=r.type,l=null!==a,c=!l||"plot"===a,p=!l||"band"===a,f=!l||"area"===a,_=!l||"input"===a,m=c?d.getPlotIdByTitle(e,s):null,g=p?d.getBandIndexByName(e,s):null,v=f?d.getFilledAreaIdByTitle(e,s):null,y=_?d.getInputByName(e,s):null,b=t.hasOwnProperty(s),(null!==m?1:0)+(null!==g?1:0)+(null!==v?1:0)+(null!==y?1:0)+(b?1:0)>1)return void h.logWarn("Study '"+e.description+"' has ambiguous identifier '"+s+"'");if(S=T[1],null!==m){if(1===T.length)return void h.logWarn("Path of sub-property of '"+s+"' plot for study '"+e.description+"' must be not empty");w=T.slice(1),u.applyPlotProperty(e,t,m,w,n)}else if(null!==y)u.applyInputValue(t,y,n);else if(null!==g){if(void 0===S)return void h.logWarn("Property name of '"+s+"' band for study '"+e.description+"' must be set");u.applyBandProperty(t,g,S,n)}else if(null!==v){if(void 0===S)return void h.logWarn("Property name of '"+s+"' area for study '"+e.description+"' must be set");u.applyFilledAreaProperty(t,v,S,n)}else b?u.setRootProperty(t,T,n):h.logWarn("Study '"+e.description+"' has no plot or input '"+s+"'")}}function r(e,t){var i,o,r=e.properties(),s=r.state();for(i in t)t.hasOwnProperty(i)&&n(e.metaInfo(),s,i,t[i]);r.merge(s),o=r.precision,void 0!==o?o.listeners().fire(o):r.listeners().fire(r)}function s(e,t,i){var o,r,s,a,l;for(o in e)e.hasOwnProperty(o)&&-1!==(r=o.indexOf("."))&&(s=o.substr(0,r),a=d.getMetaInfoByDescription(t,s),null!==a?(l=i(a.id),null!==l?n(a,l,o.substr(r+1),e[o]):h.logWarn("Cannot apply overrides for study "+s)):h.logWarn("There is no such study "+s))}var a,l,c,h,u,d;Object.defineProperty(t,"__esModule",{value:!0}),a=i(92),l=i(9),c=i(0),h=c.getLogger("Chart.Model.StudyPropertiesOverrider"),function(e){function t(e){return"colorer"===e.type}function i(e,i,o){var n,r,s,a;if(void 0===e.plots)return null;for(n=0,r=e.plots;n<r.length;n++)if(s=r[n],t(s)&&void 0!==i.palettes&&(a=i.palettes[s.palette],s.target===o&&void 0!==a))return a;return null}function o(e,t,i,o,n){return void 0===e.styles?void h.logWarn("Study does not have styles"):null===t&&!isNaN(o)&&o>0?void h.logWarn("Study plot does not have color #"+o):((0===o||isNaN(o))&&(l.ensureDefined(e.styles[i]).color=n+"",o=0),void(null!==t&&(l.ensureDefined(t.colors[o]).color=n+"")))}function n(e,t,n,r,s){var a,l,c,u,p;if(void 0===t.styles)return void h.logWarn("Study does not have styles");if("color"===(a=r[0]))return l=i(e,t,n),c=r.length>1?parseInt(r[1]):NaN,
void o(t,l,n,c,s);if(void 0===(u=t.styles[n])||!u.hasOwnProperty(a))return void h.logWarn("Study plot does not have property '"+a+"'");if("plottype"===a){if(void 0===(p=d[s+""]))return void h.logWarn("Unsupported plot type for plot: "+s);s=p}u[a]=s}function r(e,t,i,o){var n,r;if(void 0===e.bands)return void h.logWarn("Study does not have bands");if(void 0===(n=e.bands[t])||!n.hasOwnProperty(i))return void h.logWarn("Study band does not have property '"+i+"'");if("plottype"===i){if(void 0===(r=d[o+""]))return void h.logWarn("Unsupported plot type for band: "+o);o=r}n[i]=o}function s(e,t,i,o){if(void 0===e.filledAreasStyle)return void h.logWarn("Study does not have areas");var n=e.filledAreasStyle[t];if(void 0===n||!n.hasOwnProperty(i))return void h.logWarn("Study area does not have property '"+i+"'");n[i]=o}function c(e,t,i){if(void 0===e.inputs||!e.inputs.hasOwnProperty(t))return void h.logWarn("Study does not have input '"+t+"'");e.inputs[t]=i}function u(e,t,i){var o,n,r,s,a;if(0!==t.length){for(o=e,n=0,r=t.slice(0,-1);n<r.length&&(s=r[n],null!=o&&e.hasOwnProperty(s));n++)o=e[s];if(a=t[t.length-1],null==o||!o.hasOwnProperty(a))return void h.logWarn("Study does not have property "+t.join("."));o[a]=i}}var d={line:a.PlotType.Line,histogram:a.PlotType.Histogram,cross:a.PlotType.Cross,area:a.PlotType.Area,columns:a.PlotType.Columns,circles:a.PlotType.Circles,line_with_breaks:a.PlotType.LineWithBreaks,area_with_breaks:a.PlotType.AreaWithBreaks};e.applyPlotProperty=n,e.applyBandProperty=r,e.applyFilledAreaProperty=s,e.applyInputValue=c,e.setRootProperty=u}(u||(u={})),function(e){function t(e,t){var i,o,n;if(void 0===e.inputs)return null;for(t=t.toLowerCase(),i=0,o=e.inputs;i<o.length;i++)if(n=o[i],n.name.toLowerCase()===t)return n.id;return null}function i(e,t){var i,o,n;if(void 0===e.styles)return null;t=t.toLowerCase();for(i in e.styles)if(o=e.styles[i],n=void 0!==o&&void 0!==o.title?o.title:i,n.toLowerCase()===t)return i;return null}function o(e,t){var i,o,n;if(void 0===e.filledAreas)return null;for(t=t.toLowerCase(),i=0,o=e.filledAreas;i<o.length;i++)if(n=o[i],n.title.toLowerCase()===t)return n.id;return null}function n(e,t){if(void 0===e.bands)return null;t=t.toLowerCase();for(var i=0;i<e.bands.length;++i)if(e.bands[i].name.toLowerCase()===t)return i;return null}function r(e,t){var i,o,n;for(t=t.toLowerCase(),i=0,o=e;i<o.length;i++)if(n=o[i],n.description.toLowerCase()===t||n.shortDescription.toLowerCase()===t)return n;return null}e.getInputByName=t,e.getPlotIdByTitle=i,e.getFilledAreaIdByTitle=o,e.getBandIndexByName=n,e.getMetaInfoByDescription=r}(d||(d={})),t.applyOverridesToStudy=r,t.applyOverridesToStudyDefaults=s},,,function(e,t,i){"use strict";var o=function(){function e(e,t){return t.id||(t.id=e),t}function t(e,t){var o;return o=t?i(t)[e]:a[e],o&&!o.id&&(o.id=e),o}function i(t){var i,o,n,r,s,l,c={},h=t&&t.drawing(),u=t&&t.alertSeriesAlerts();for(h?(s="LineToolVertLine"===h.type?function(e){return"cross"===e.id}:1===h.plots.length?function(e){return!e.isChannel}:2===h.plots.length?function(e){
return!!e.isChannel}:function(e){return"comparsion"===e.type},o=a):u&&u.conditions?(o=$.extend(!0,{},a),$.each(u.conditions,function(e,t){t.type="pine_script",o[e]=t})):o=a,i=Object.keys(o),l=0;l<i.length;l++)r=i[l],n=o[r],e(r,n),s&&!s(n)||(c[r]=n);return c}function o(e){return void 0!==e?a[e]:a}function n(e,t){var o,n,r,s=i(e),a=["cross","crosses_from_below","crosses_from_above","above","below","enters_channel","leaves_channel","inside_channel","outside_channel","moving_up","moving_down","moving_up_percents","moving_down_percents"],l=[],c=Object.keys(s);for(t=t||{},n=c.length-1;n>=0;n--)o=c[n],"pine_script"===s[o].type&&l.push(s[o]);if(l.sort(function(e,t){return e.title.localeCompare(t.title)}),(r=e&&e.alertSeries&&e.alertSeries())&&r.plots&&0===r.plots.length)return l;for(t.needSeparator&&l.push({separator:!0}),n=0;n<a.length;n++)o=a[n],s.hasOwnProperty(o)&&l.push(s[o]);return l}var r,s,a={cross:{title:$.t("Crossing"),type:"comparison"},crosses_from_below:{title:$.t("Crossing Up"),type:"comparison"},crosses_from_above:{title:$.t("Crossing Down"),type:"comparison"},above:{title:$.t("Greater Than"),type:"comparison"},below:{title:$.t("Less Than"),type:"comparison"},enters_channel:{title:$.t("Entering Channel"),isChannel:!0,type:"comparison"},leaves_channel:{title:$.t("Exiting Channel"),isChannel:!0,type:"comparison"},inside_channel:{title:$.t("Inside Channel"),isChannel:!0,type:"comparison"},outside_channel:{title:$.t("Outside Channel"),isChannel:!0,type:"comparison"},moving_up:{title:$.t("Moving Up"),type:"moving"},moving_down:{title:$.t("Moving Down"),type:"moving"},moving_up_percents:{title:$.t("Moving Up %"),descriptionTitle:$.t("Moving Up"),type:"moving",percents:!0},moving_down_percents:{title:$.t("Moving Down %"),descriptionTitle:$.t("Moving Down"),type:"moving",percents:!0}},l=Object.keys(a);for(s=l.length-1;s>=0;s--)r=l[s],e(r,a[r]);return r=null,{get:i,getData:t,defaults:o,ordered:n}}();TradingView.AlertConditions=o,e.exports=o},,function(e,t,i){"use strict";(function(t,o){function n(e){var e=parseInt(e);return"chartproperties.alertsProperties."+e}var r=i(572),s=i(562),a=i(281).generateTitleForGui,l=i(646).parseSymbolString,c=i(277).FormattersSerializer,h=i(770).AlertFrequency,u=r.extend({constructor:function(e,i){var o={};["autoDeactivation","frequency","extra","crossInterval"].forEach(function(t){e.hasOwnProperty(t)&&(o[t]=e[t],delete e[t])}),t.isEmpty(o)||(this.__delayedInitAttrs=o),e.version=e.version||this.VERSION,r.call(this,e,i),this.frequency=new h(this)},initialize:function(){function e(e){t.set("crossInterval",!!e)}var t=this;this.on("change:extra",function(t,i,o){i&&(i.crossInterval.unsubscribe(e),i.crossInterval.subscribe(e),t.set("crossInterval",i.crossInterval.value()))}).on("change:crossInterval",function(e,t,i){var o=e.get("extra");t?e.set("resolution","1"):o&&o.mainSeries()&&e.set("resolution",o.mainSeries().interval)}).on("destroy",function(){TVSettings.remove(t.TVSettingsPropertiesKey(t.id))}),
this.id===parseInt(TVSettings.getValue("alerts.widget.selected_alert_id",0))&&this.set("selected",!0),this.__delayedInitAttrs&&(this.set(this.__delayedInitAttrs),delete this.__delayedInitAttrs)},set:function(e,t,i){var o;return i=i||{},null==e?this:i.noPrepare?r.prototype.set.call(this,e,t,i):("object"==typeof e?(o=e,i=t):(o={})[e]=t,o=this._prepareToSet(o),r.prototype.set.call(this,o,i))},_prepareToSet_soundDuration:function(e){var e=parseInt(e);return isNaN(e)&&(e=0),e},_prepareToSet_expired:function(e){return e instanceof Date?e:new Date(1e3*e)},_prepareToSet_extra:function(e){var t=this.get("extra"),i=t&&e,o=e&&!(e instanceof s);return i?e=t.update(e):o?(e=new s(e),this.set("scriptDeps",e.getDependencies())):e||(e=null),e},_prepareToSet_symbolInternal:function(e){if(e)return e},isPrice:function(){return null!==(this.get("extra")?this.get("extra").price():null)},isDrawing:function(){return!(!this.get("extra")||!this.get("extra").drawing())},isMoving:function(){return this.get("extra")&&"moving"===(this.get("extra").conditionData()||{}).type},isOHLC:function(){var e=this.get("extra");if(e&&e.alertSeries())return"MainSeries"===e.alertSeries().type},isJapaneseStyle:function(){var e=this.get("extra"),t=e&&e.getMainSeries();return!(!t||"MainSeries"!==t.type()||!t.isJapaneseStyle())},isComplexSymbol:function(){var e=this.get("symbolInternal");return e!==this.get("symbol")&&e},isPine:function(){var e=this.get("extra"),t=e&&e.alertSeries();return t&&t.alerts},expiredReadable:function(){return this._formatDate(this.get("expired"))},expiredUnix:function(){return Math.round(this.get("expired").getTime()/1e3)},defaultDescription:function(){function e(e){return e.getPlots()&&e.getPlots().length>1}var t,i,n,r,s,l,c,h,u,d="",p=this.get("extra"),f=p.conditionData(),_=p.getAlertSeries();switch(f.type){case"pine_script":return f.message;case"comparison":f.isChannel?(s=p.getUpperBand(),l=p.getLowerBand(),n="("+$.t("Upper Bound: __alertChannelUpperBoundaryTitle__ , Lower Bound: __alertChannelLowerBoundaryTitle__",{alertChannelUpperBoundaryTitle:s.title({withPlotTitle:e(s),formatter:this.getFormatter()}),alertChannelLowerBoundaryTitle:l.title({withPlotTitle:e(l),formatter:this.getFormatter()})})+")"):(c=p.getBand(),n=c.title({withPlotTitle:e(c),formatter:this.getFormatter()}));break;case"moving":f.percents?n=p.movingValue()+"% "+$.t("in __period__ bars",{period:p.movingPeriod()}):(h=this.getFormatter(),u=h?h.format(p.movingValue()):p.movingValue(),n=u+" "+$.t("in __period__ bars",{period:p.movingPeriod()}))}switch(i=f.descriptionTitle||f.title,_.type()){case"MainSeries":d=o.render("{{{series}}} {{condition}} {{{conditionOptions}}}",{series:_.title({withInterval:!this.get("crossInterval")}),condition:i,conditionOptions:n});break;default:t=this.getSeriesProperties(),r=t?a({symbol:this.shortSymbol(),interval:this.get("crossInterval")?null:this.resolutionReadable(),style:t.style,inputs:t.inputs,boxSize:(t.inputs||{}).boxSize,reversalAmount:(t.inputs||{}).reversalAmount}):this.shortSymbol(),
d=$.t("__alertSeries__ __alertCondition__ __alertConditionOptions__ on __chartSeries__",{alertSeries:_.title(),chartSeries:r,alertCondition:i,alertConditionOptions:n})}return d},setDefaultDescription:function(){this.set("description",this.defaultDescription())},statusTitle:function(){var e="",t=this.get("stopReason")||"",i=this.get("error"),o={drawing_is_expired:$.t("Drawing Outdated")};return this.get("active")?e=$.t("Active"):"error"===t&&o[i]?e=o[i]:(e={manual:$.t("Stopped Manually"),expired:$.t("Expired"),auto:$.t("Triggered and Not Active"),error:$.t("Error"),default:$.t("Stopped")}[t||"default"],"error"===t&&i&&(e+=i)),e},state:function(){return this.toJSON()},toJSON:function(){var e,t,i={};for(e in this.attributes)this.attributes.hasOwnProperty(e)&&(t=this.attributes[e],i[e]=t&&"function"==typeof t.toJSON?t.toJSON():t);return i.expired&&(i.expired=this.expiredUnix()),i},prepareToSend:function(){var e,t,i,o,n=this.toJSON(),r=["id","crossInterval","autoDeactivation","description","sendEmail","expired","extra","showPopup","resolution","script","scriptDeps","sendSms","sendTrueSms","playSound","soundDuration","soundFile","symbol"];for(r.push("symbolInternal"),e={},o=r.length-1;o>=0;o--)t=r[o],void 0!==(i=n[t])&&(e[t]=i);return e.playSound||(delete e.soundDuration,delete e.soundFile),e.extra&&(e.extra=JSON.stringify(e.extra)),e},saveState:function(){this._oldState=this.state()},restoreState:function(e){var e=e||this._oldState||{};!e.extra||e.extra instanceof s||(e.extra=new s(e.extra),e.scriptDeps=e.extra.getDependencies()),this.set(e),delete this._oldState},getSavedState:function(){var e;return this._oldState&&(e=$.extend({},this._oldState),e.extra&&(e.extra=new s(e.extra),e.scriptDeps=e.extra.getDependencies())),e},TVSettingsPropertiesKey:function(){return n(this.id)},getSeriesProperties:function(){var e=this.get("symbolInternal");return e||this.get("extra")&&this.get("extra").getMainSeries()&&(e=this.get("extra").getMainSeries().getSymbolString()),l(e)},getFormatter:function(){var e,t=this.get("extra");return t&&(e=t.alertSeries(),e.formatter)?c.deserialize(e.formatter):null}});e.exports=u}).call(t,i(29),i(21))},function(e,t,i){"use strict";(function(t){function o(e){this._data={},this.crossInterval=new s,this.update(e)}var n,r,s,a=i(0).getLogger("Alerts.Extra"),l=i(769).deepCopy;TradingView="object"==typeof t?t.TradingView:TradingView||{},"function"!=typeof TradingView.merge&&(TradingView.merge=function(e,t){for(var i in t)"object"==typeof t[i]&&e.hasOwnProperty(i)?TradingView.merge(e[i],t[i]):e[i]=t[i];return e}),n=i(559),r=i(470).alertBandFactory,s=i(22),o.VERSION=19,o.prototype.update=function(e){return e=this._prepareExtraObject(e),o._isValidExtra(e)?(this._data=e||{},this._updateCrossInterval()):a.logError("Wrong alert extra"),this},o.prototype.addDatasourse=function(e,t){this._addDatasourseToJson(this._data,e,t)},o.prototype._addDatasourseToJson=function(e,t,i){(i||e.condition[t])&&(e.condition[t]={id:i.id,plotIndex:i.plotIndex},e.statesForAlert[i.id]=i,i.plotIndex&&delete e.statesForAlert[i.id].plotIndex)
},o.prototype.getDependencies=function(){var e,t,i,o={};for(e in this._data.statesForAlert)this._data.statesForAlert.hasOwnProperty(e)&&(t=this._data.statesForAlert[e],("Study"===t.type||/^study_\w+/.test(t.type))&&null!=t.studyDependencies&&t.studyDependencies.forEach(function(e){o[e.id]=e}));return i=Object.keys(o).map(function(e){return o[e]}),i.map(function(e){return e.study=e.study.replace(/(\d)$/,"$1!"),e})},o.prototype.updateDataSourseStates=function(){var e=this,t=this.getAvailableBands().map(function(t){return e._data.condition[t]}).filter(function(e){return!!e}).map(function(e){return e.id});Object.keys(e._data.statesForAlert).filter(function(e){return t.indexOf(e)<0}).forEach(function(t){delete e._data.statesForAlert[t]})},o.prototype._prepareExtraObject=function(e){var t,i;return"string"==typeof e?e=JSON.parse(e):e instanceof o&&(e=e.toJSON()),o._isValidExtra(e)?e:(t=function(t){var i=n.defaults(e.conditionId||"cross");this._addDatasourseToJson(t,"mainSeries",e.mainSeries),this._addDatasourseToJson(t,"alertSeries",e.alertSeries),"moving"===i.type?(t.condition.movValue=+e.value,t.condition.movPeriod=+e.period):"comparison"===i.type&&i.isChannel?(this._addDatasourseToJson(t,"upperBand",e.upperBand),this._addDatasourseToJson(t,"lowerBand",e.lowerBand)):"comparison"!==i.type||i.isChannel?"pine_script"===i.type||a.logError("[Alerts] Unknown condition type: "+i.type):this._addDatasourseToJson(t,"band",e.band)}.bind(this),i={version:o.VERSION,condition:{id:e.conditionId,fireInfo:e.fireInfo},statesForAlert:{}},t(i),i)},o.prototype.isValid=function(){return o._isValidExtra(this._data)},o._isValidExtra=function(e){var t,i,r=!!("object"==typeof e&&null!==e&&e.version>=o.VERSION&&e.statesForAlert&&e.condition&&e.condition.id&&e.condition.alertSeries&&e.condition.fireInfo&&(e.condition.fireInfo.type||e.condition.fireInfo.frequency));return r?(t=Object.keys(e.statesForAlert),r=r&&t.indexOf(e.condition.alertSeries.id)>=0,r=r&&(!e.condition.mainSeries||t.indexOf(e.condition.mainSeries.id)>=0),i=n.defaults(e.condition.id),i&&"comparison"===i.type&&!i.isChannel?(r=r&&!!e.condition.band,r=r&&t.indexOf(e.condition.band.id)>=0):i&&"comparison"===i.type&&i.isChannel?(r=r&&!!e.condition.upperBand,r=r&&!!e.condition.lowerBand,r=r&&t.indexOf(e.condition.upperBand.id)>=0,r=r&&t.indexOf(e.condition.lowerBand.id)>=0):i&&"moving"===i.type&&(r=r&&!!e.condition.movPeriod,r=r&&!!e.condition.movValue),r):r},o.prototype._prepareToJSON=function(){var e,t,i=this.bandsObject(),o=Object.keys(i);for(e=0;e<o.length;e++)t=i[o[e]],TradingView.isExistent(t.value)&&(t.value=t.value+"")},o.prototype.toJSON=function(){return this._prepareToJSON(),l(this._data)},o.prototype.state=o.prototype.toJSON,o.prototype.conditionData=function(){var e=this._data&&this._data.condition&&this._data.condition.id;if(e)return n.getData(e,this)},o.prototype.bandsObject=function(e){return this._data.statesForAlert},o.prototype.bandsArray=function(e){var t=this;return e=e||"object",this.getAvailableBands().map(function(i){return t._getSomeBand(i,e)}).filter(function(e){
return!!e})},o.prototype.price=function(e){function t(e,t){var i=r._getSomeBand(e,"object");i&&"Value"===i.type&&void 0!==t&&(i.value=parseFloat(t),r[e](i))}function i(e){var t=r._getSomeBand(e,"object");return t&&!isNaN(t.value)&&void 0!==t.value&&null!==t.value?parseFloat(t.value):null}var o,n,r=this,s=r.conditionData();return s&&"comparison"===s.type?(void 0!==e&&(r.conditionData().isChannel?(t("upperBand",e.upperBand||e.upper),t("lowerBand",e.lowerBand||e.lower)):t("band",e.band||e),this._updateCrossInterval()),r.conditionData().isChannel?(o=i("upperBand"),n=i("lowerBand"),null===o||null===n?null:{upper:o,lower:n}):i("band")):null},o.prototype.conditionId=function(e,t){return void 0!==e&&(this._data.condition.id=e,t||this._updateCrossInterval()),this._data.condition.id},o.prototype.getAvailableConditionParams=function(e){return["movPeriod","movValue"]},o.prototype.getAvailableOptionalBands=function(e){return["band","lowerBand","upperBand"]},o.prototype.getAvailableBands=function(e){return["band","lowerBand","upperBand","alertSeries","mainSeries"]},o.prototype.getAvailableOptionalConditions=function(e){return this.getAvailableOptionalBands().concat(this.getAvailableOptionalBands())},o.prototype.clearOptionalConditions=function(e){var t=this;this.getAvailableOptionalConditions().forEach(function(e){delete t._data.condition[e]}),this.updateDataSourseStates(),e||this._updateCrossInterval()},o.prototype.alertSeries=function(e,t){return void 0!==e&&(this.addDatasourse("alertSeries",e),this.updateDataSourseStates(),t||this._updateCrossInterval(),this.setValidConditionId()),this._getSomeBand("alertSeries","object")},o.prototype.getAlertSeries=function(e){return this._getSomeBand("alertSeries",e)},o.prototype.mainSeries=function(e,t){return void 0!==e&&(this.addDatasourse("mainSeries",e),this.updateDataSourseStates(),t||this._updateCrossInterval()),this._getSomeBand("mainSeries","object")},o.prototype.getMainSeries=function(e){return this._getSomeBand("mainSeries",e)},o.prototype._getSomeBand=function(e,t){var i,o=t||"model",n=this._data.condition[e];if(n)return i=TradingView.merge(this._data.statesForAlert[n.id],n),"object"===o?TradingView.merge({},i):r.create(i)},o.prototype.upperBand=function(e,t){return void 0!==e&&(this.addDatasourse("upperBand",e),delete this._data.condition.band,this.updateDataSourseStates(),t||this._updateCrossInterval()),this._getSomeBand("upperBand","object")},o.prototype.getUpperBand=function(e){return this._getSomeBand("upperBand",e)},o.prototype.lowerBand=function(e,t){return void 0!==e&&(this.addDatasourse("lowerBand",e),delete this._data.condition.band,this.updateDataSourseStates(),t||this._updateCrossInterval()),this._getSomeBand("lowerBand","object")},o.prototype.getLowerBand=function(e){return this._getSomeBand("lowerBand",e)},o.prototype.band=function(e,t){return void 0!==e&&(this.addDatasourse("band",e),delete this._data.condition.upperBand,delete this._data.condition.lowerBand,this.updateDataSourseStates(),t||this._updateCrossInterval()),this._getSomeBand("band","object")},
o.prototype.getBand=function(e){return this._getSomeBand("band",e)},o.prototype.value=function(e,t){return void 0!==e&&(this._data.condition.movValue=+e,t||this._updateCrossInterval()),this._data.condition.movValue},o.prototype.movingValue=o.prototype.value,o.prototype.period=function(e,t){return void 0!==e&&(this._data.condition.movPeriod=+e,t||this._updateCrossInterval()),this._data.condition.movPeriod},o.prototype.movingPeriod=o.prototype.period,o.prototype._updateCrossInterval=function(){var e=this.getAlertSeries(),t=null!==this.price()&&e&&"MainSeries"===e.type()&&!e.isJapaneseStyle()&&!e.isSpread();this.crossInterval.setValue(t)},o.prototype.frequency=function(e){return-1!==["once","on_first_fire","on_bar_close","60"].indexOf(e)&&(this._data.condition.fireInfo.frequency=e),this._data.condition.fireInfo.frequency},o.prototype.alertSeriesAlerts=function(){return this.alertSeries()&&this.alertSeries().alerts},o.prototype.drawing=function(e){var t,i,o,n,r,s,l,c,h,u=this;for(e&&e.canHasAlert()&&(t=e.stateForAlert(),i=t.plots,o=!!u.conditionData().isChannel,n=(1===i.length?!o:o)&&"comparison"===u.conditionData().type,n?1===i.length?(r={},r=TradingView.merge(r,t),r.plotIndex=0,u.band(r)):(s={},l={},s=TradingView.merge(s,t),s.plotIndex=0,u.upperBand(s),l=TradingView.merge(l,t),l.plotIndex=1,u.lowerBand(l)):a.logError("[Alerts] Can't set drawing to alert with current condition")),c=this.bandsArray(),h=0;h<c.length;h++)if(/^LineTool.*/i.test(c[h].type))return c[h];return null},o.prototype.setValidConditionId=function(){var e=this.conditionId(),t=n.get(this);t[e]||this.conditionId(Object.keys(t)[0])},o.prototype.verticalLine=function(){var e=this.drawing();return e&&1===e.plots.length&&e.plots[0].offset1&&e.plots[0].offset1===e.plots[0].offset2?e:null},TradingView.AlertExtra=o,e.exports=o}).call(t,i(58))},function(e,t,i){"use strict";var o,n,r;Object.defineProperty(t,"__esModule",{value:!0}),o=i(11),n=i(69),r=function(){function e(){this._data=null,this._hitTest=null}return e.prototype.setData=function(e){this._data=e},e.prototype.setHitTest=function(e){this._hitTest=e},e.prototype.draw=function(e){if(null!==this._data&&0!==this._data.points.length&&!(this._data.linewidth<=0)){var t=this._data.points[0].x;t<0||t>this._data.width||(e.translate(1,0),e.lineCap="square",e.strokeStyle=this._data.color,e.lineWidth=this._data.linewidth,void 0!==this._data.linestyle&&n.setLineStyle(e,this._data.linestyle),n.drawLine(e,t,0,t,this._data.height))}},e.prototype.hitTest=function(e){if(null===this._data||0===this._data.points.length)return null;var t=this._hitTest||new o(o.MOVEPOINT);return Math.abs(e.x-this._data.points[0].x)<=3?t:null},e}(),t.VerticalLineRenderer=r},function(e,t,i){"use strict";var o,n,r;Object.defineProperty(t,"__esModule",{value:!0}),o=i(6),n=i(16),r=function(e){function t(t,i,o,n){var r=this;return i||(i=1),"forex"!==o&&"cfd"!==o||!n?(r=e.call(this,1)||this,r._isForex=!1):(r=e.call(this,n)||this,r._isForex=!0),r._pipPriceScale=t,r._pipMinMove=i,r._pipMinMove2=n,r}return o.__extends(t,e),
t.prototype.format=function(t,i,o){var n=this._isForex?this._pipMinMove2:this._pipMinMove;return void 0===n&&(n=NaN),e.prototype.format.call(this,t*this._pipPriceScale/n,i,o)},t}(n.PriceFormatter),t.PipFormatter=r},function(e,t){},,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.urlsRegExp={amazonawsLinks:"(?:https://|http://)(s3\\.amazonaws\\.com\\/tradingview?(\\w*?)\\/snapshots)\\/(?:\\S*?)\\.(png|bmp|jpg|jpeg)",imageUrl:"^[0-9a-zA-Z]{8}$",publishedChart:"/chart/([0-9a-zA-Z!_:+*()-]+?)/([0-9a-zA-Z]{8})(?:-([^/]+))?/?",publishedChartOld:"/v/([0-9a-zA-Z]{8})/?",publishedImage:"/(?:i|x)/([0-9a-zA-Z]{8})/?",publishedScript:"/script/([0-9a-zA-Z]{8})(?:-([^/]+))?/?"}},function(e,t,i){"use strict";function o(e){return null==e._parentMenu?null:n(e._parentMenu)}function n(e){return null==e._parentMenuItem?e:o(e._parentMenuItem)}function r(e,t){this.action=e,this._parentMenu=t}function s(e,t){this.action=e,this._parentMenu=t}var a=i(464),l=i(267),c=i(20).trackEvent;r.prototype._createIconTag=function(){var e=this._iconTagAttributes();return this.jqIcon=l.create(a.ICON_CELL_TAG,e),this.jqIcon.addClass("context-menu"),this.jqIcon},r.prototype._createDeleteButton=function(){var e,t,i;if(!this.action.deleteButton)return null;e=this,t=this.action.deleteButton.action,i=l.create("span",{class:"context-menu-delete-button"}),t&&i.click(function(){return t.call(e),!1}),this.jqSubmenu.addClass("delete-spacer"),this.jqSubmenu.append(i)},r.prototype._createTextTag=function(){var e=this._textTagAttributes();return this.jqText=l.create(a.TEXT_CELL_TAG,e),this.jqIcon.addClass("context-menu"),this.jqText},r.prototype._createRightTag=function(){var e=this._rightTagAttributes();return this.jqRight=l.create(a.RIGHT_CELL_TAG,e),this.jqIcon.addClass("context-menu"),this.jqRight},r.prototype._createSubmenuTag=function(){var e=this._submenuTagAttributes();return this.jqSubmenu=l.create(a.SUBMENU_CELL_TAG,e),this.jqIcon.addClass("context-menu"),this.jqSubmenu},r.prototype._iconTagAttributes=function(){var e={},t=[];return this.action&&(this.action.icon?(t.push("icon"),t.push(this.action.icon.replace(/\./,"_"))):this.action.checkable?(t.push("icon"),this.action.checked?(t.push("checked-icon"),e.html=i(72)):t.push("unchecked-icon")):t.push("spacer")),e.class=t.join(" "),e},r.prototype._textTagAttributes=function(){return{class:"text",html:this.action?this.action.text:""}},r.prototype.highlight=function(e){e?(this.jqRow.addClass("context-menu-hover"),this.jqIcon.addClass("context-menu-hover")):(this.jqRow.removeClass("context-menu-hover"),this.jqIcon.removeClass("context-menu-hover")),this.action&&this.action.hasSubActions()&&(e?this.jqSubmenu.addClass("expanded"):this.jqSubmenu.removeClass("expanded"))},r.prototype._rightTagAttributes=function(){var e={},t=["right"];return this.action&&this.action.shortcut&&(t.push("shortcut"),e.class=t.join(" "),e.html=this.action.shortcut),e},r.prototype._submenuTagAttributes=function(){var e={}
;return this.action&&this.action.hasSubActions()?e.class="submenu-arrow":e.class="context-menu spacer",e},r.prototype.render=function(){this._createRow(),this.jqRow.append(this._createIconTag()),this.jqRow.append(this._createTextTag()),this.jqRow.append(this._createRightTag()),this.jqRow.append(this._createSubmenuTag()),this._createDeleteButton(),this.appendCallback();var e=this;return this.jqRow.mouseenter(function(t){e.showSubmenu(t),e.highlight(!0),e._parentMenu&&e._parentMenu._parentMenuItem&&e._parentMenu._parentMenuItem.highlight(!0)}),this.jqRow.mouseleave(function(){e.highlight(!1)}),this.jqRow},r.prototype._createRow=function(){var e,t,i=this._rowTagAttributes();this.jqRow=l.create(a.ITEM_ROW_TAG,i),this.jqRow.addClass("context-menu"),e=this,this.action&&!this.action.hasSubActions()&&(t=function(e){e.destroy(),e._parentMenuItem&&t(e._parentMenuItem._parentMenu)},this.jqRow.click(function(i){t(e._parentMenu)}))},r.prototype.showSubmenu=function(e){var t,o;this._parentMenu.closeOtherSubmenus(this),this.action&&!this.action.hasSubActions()||(this._menu||(t=i(154),o={},this._parentMenu.options&&this._parentMenu.options.statName&&(o.statName=this._parentMenu.options.statName),this._menu=t.createMenu(this.action.subActions,o,this)),e.pageX=this._parentMenu.jqMenu.width()-2,e.pageY=this.jqSubmenu.offset().top-this._parentMenu.jqMenu.offset().top-1,this._menu.show(e,this._parentMenu.jqMenu))},r.prototype._rowTagAttributes=function(){var e=[];return this.action&&(!1===this.action.enabled&&e.push("disabled"),!1===this.action.visible&&e.push("hidden"),this.action.font&&e.push("font_"+this.action.font),this.action.hasSubActions()&&e.push("has_submenu"),this.action.htmlclass&&e.push(this.action.htmlclass)),{class:e.join(" ")}},r.prototype.appendCallback=function(){var e=this;this.jqRow.click(function(t){if(e.action.enabled){var i=e.getStatName();""!==i&&c("ContextMenuClick",e._parentMenu.options.statName,i),e.action.executeCallback(t)}})},r.prototype.getTopLevelMenu=function(){return o(this)},r.prototype.getStatName=function(){var e="";return this._parentMenu&&this._parentMenu._parentMenuItem&&(e=this._parentMenu._parentMenuItem.getStatName()),[e,this.action.statName||""].filter(function(e){return""!==e}).join(".")||""},s.prototype.render=function(e){this._createRow();var t=this;return this.action.deferred.then(function(o){var n,r,s,a=i(463);for(n in o)r=o[n],s=t._parentMenu.addItem(r),a.renderItem(e,s)}).always(function(){t.jqRow.hide()}),this.jqRow},s.prototype._createIconTag=function(){var e=this._iconTagAttributes();return this.jqIcon=l.create(a.ICON_CELL_TAG,e),this.jqIcon.addClass("context-menu"),this.jqIcon},s.prototype._createRow=function(){var e=this._rowTagAttributes();this.jqRow=l.create(a.ITEM_ROW_TAG,e),this.jqRow.append(this._createIconTag()),this.jqRow.addClass("context-menu")},s.prototype._rowTagAttributes=function(){var e=[];return this.action&&e.push("spinner"),{class:e.join(" ")}},s.prototype.highlight=function(e){},s.prototype._iconTagAttributes=function(){var e={},t=[];return t.push("spacer"),
e.class=t.join(" "),e.colspan="10",e},t.Item=r,t.ItemPlaceholder=s},function(e,t,i){"use strict";var o=i(267),n=i(192).setMouseEventHandler,r={};r.createLabel=function(e,t,i){return o.create("label",$.extend(i,{html:t,for:e}))},r.unbindContextMenu=function(e){e.contextMenu(function(e){return!1})},r.offsetX=function(e,t){return e.width()+t.pageX},r.offsetY=function(e,t){return e.height()+t.pageY},r.isElementInViewport=function(e){"function"==typeof jQuery&&e instanceof jQuery&&(e=e[0]);var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)},r.isVisible=function(e,t,i){var o,n,r;for("function"==typeof jQuery&&e instanceof jQuery&&(e=e[0]),o=.01,t||(t=1),i||(i=1),n=e.getBoundingClientRect(),r=[];e.parentElement;)r.push(e.parentElement.getBoundingClientRect()),e=e.parentElement;return r.every(function(e){var r=Math.min(n.right,e.right)-Math.max(n.left,e.left),s=Math.min(n.bottom,e.bottom)-Math.max(n.top,e.top),a=r/n.width*100,l=s/n.height*100;return a+o>t&&l+o>i})},r.checkObjIsOutOfWindowX=function(e,t){var i,o=$(window).width()-r.offsetX(e,t);return o<0?(i=t.pageX+o,i>0?i:0):t.pageX},r.checkObjIsOutOfWindowY=function(e,t){var i,o=$(window).height()-r.offsetY(e,t);return o<0?(i=t.pageY+o,i>0?i:0):t.pageY},r.checkObjIsOutOfWindow=function(e,t){return{left:r.checkObjIsOutOfWindowX(e,t),top:r.checkObjIsOutOfWindowY(e,t)}},r.setAttr=function(e,t,i){return e.attr?e.attr(t,i):e[t]=i,e},r.removeAttr=function(e,t){return e.removeAttr?e.removeAttr(t):e.removeAttribute(t),e},r.notNull=function(e){return-1===$.inArray(e,[null,void 0,"false","null","undefined",0])},r.hideControl=function(e){return e.css({position:"absolute",top:-1e3,left:-1e3})},r.createPopup=function(e,t,i){return new r.Popup(e,t,i).render()},r.Popup=function(e,t,i){if(void 0!==e.selector?this.jqDiv=e:e.nodeType?this.jqDiv=$(e):this.jqDiv=o.create("div",e),i){var r=this;$.each(i,function(e,t){r[e]=t})}n(this.jqDiv,this),this._callback=t},r.Popup.prototype.render=function(){return this.jqDiv},r.Popup.prototype.show=function(){this.jqDiv.show()},r.Popup.prototype.hide=function(){this.jqDiv.hide()},r.Popup.prototype.setVisible=function(e){e?this.show():this.hide()},r.Popup.prototype.isVisible=function(){return this.jqDiv.is(":visible")},r.Popup.prototype.contextMenuEvent=function(e){return!1},r.Popup.prototype.mouseDownOutsideEvent=function(e){if(this.isVisible()){if(this._callback&&!this._callback())return;this.hide()}},e.exports=r},function(e,t,i){"use strict";function o(e){var t=JSON.stringify(e);return t=t.replace(/'/g,"\\'")}function n(e,t){var i,n,s,a,l,c={};if(t.isTVScript)i=t.defaults.inputs.text,c.text=r.patchILTemplate(i,t,e);else for(n=Object.keys(e),s=n.length-1;s>=0;s--)a=n[s],(l=e[a]?e[a].id:null)&&e[l]&&(c[l]=e[l]);return o(c)}var r=i(526);e.exports={formatCallstudyArg:o,prepareCallStudyArgs:n}},function(e,t,i){"use strict";function o(e,t,i){void 0!==t&&void 0!==i&&i.forEach(function(i){var o,n=e[i]
;"string"==typeof n?(o=n.split("$")[1],e[i]=t+(void 0===o?"":"$"+o)):"source"===n.t?(o=n.v.split("$")[1],n.v=t+(void 0===o?"":"$"+o)):l.logError("Cannot patch source input, its type is not source: "+JSON.stringify(n))})}function n(e,t){return""+s(e+a.sortedStringify(t))}var r,s,a,l;Object.defineProperty(t,"__esModule",{value:!0}),r=i(0),s=i(467),a=i(675),l=r.getLogger("Chart.Study"),t.patchChildIdInInputs=o,t.idForAlert=n},function(e,t,i){"use strict";(function(t,o){var n=i(0).getLogger("Alerts.Price.Abstract"),r=i(457),s=i(95),a=t.Model.extend({constructor:function(e,i){e=this._prepareToSet(e,!0),t.Model.call(this,e,i)},_prepareToSet:function(e,t){var i,o,n;if(e)for(i in e)e.hasOwnProperty(i)&&(o=e[i],n="_prepareToSet_"+i,"function"==typeof this[n]&&(e[i]=this[n](o,e,t)));return e},destroy:function(){this.stopListening(),this.trigger("destroy",this)},save:function(){n.logError("[Alerts] Use disaptcher to save")},shortSymbol:function(e){return s?s.shortName(e||this.get("symbol")||""):(n.logWarn("[Alerts] can't get short symbol"),e)},resolutionReadable:function(e){if(!r)return n.logWarn("[Alerts] can't get resolution readable"),e;var e=e||this.get("resolution");return e?r.getTranslated(e):""},title:function(e){var t;return t=e?this.get("symbol"):this.shortSymbol(),this.get("crossInterval")||(t=t+", "+this.resolutionReadable()),t},_formatDate:function(e){return o(e||new Date).format("ll")}});e.exports=a}).call(t,i(178),i(54))},function(e,t,i){"use strict";function o(e,t,i,o){return null!==e?a.intersectPolygonAndHalfplane(e,r.halfplaneThroughPoint(r.lineThroughPoints(t,i),o)):null}var n,r,s,a,l,c,h,u,d;Object.defineProperty(t,"__esModule",{value:!0}),n=i(9),r=i(8),s=i(51),a=i(170),l=i(69),c=i(11),h=i(42),u=i(33),d=function(){function e(e,t){this._data=null,this._hittestResult=e||new c(c.MOVEPOINT),this._backHittestResult=t||new c(c.MOVEPOINT_BACKGROUND)}return e.prototype.setData=function(e){this._data=e},e.prototype.draw=function(e){var t,i,o,n,r,s,a,c;null===this._data||this._data.points.length<2||(e.lineCap="butt",e.strokeStyle=this._data.color,e.lineWidth=this._data.linewidth,l.setLineStyle(e,this._data.linestyle),t=this._data.points,i=t[0],o=t[1],this._data.skipLines||this._extendAndDrawLineSegment(e,i,o),4===this._data.points.length&&(n=this._data.points,r=n[2],s=n[3],this._data.skipLines||this._data.skipTopLine||this._extendAndDrawLineSegment(e,r,s),this._data.fillBackground&&this._drawBackground(e,this._data.points),this._data.showMidline&&!this._data.skipLines&&(e.strokeStyle=this._data.midcolor,e.lineWidth=this._data.midlinewidth,l.setLineStyle(e,this._data.midlinestyle),a=i.add(r).scaled(.5),c=o.add(s).scaled(.5),this._extendAndDrawLineSegment(e,a,c))))},e.prototype.hitTest=function(e){var t,i,o,n,r,s,a,l,c,h,u;if(null===this._data||this._data.points.length<2)return null;if(t=this._data.points,i=t[0],o=t[1],null!==(n=this._extendAndHitTestLineSegment(e,i,o)))return n;if(4===this._data.points.length&&!this._data.skipTopLine){if(r=this._data.points,s=r[2],a=r[3],
null!==(l=this._extendAndHitTestLineSegment(e,s,a)))return l;if(this._data.showMidline&&!this._data.skipLines&&(c=i.add(s).scaled(.5),h=o.add(a).scaled(.5),null!==(u=this._extendAndHitTestLineSegment(e,c,h))))return u}return this._data.hittestOnBackground&&this._data.fillBackground?this._hitTestBackground(e):null},e.prototype._getColor=function(){var e=n.ensureNotNull(this._data);return u.generateColor(e.backcolor,e.transparency)},e.prototype._extendAndDrawLineSegment=function(e,t,i){var o=this._extendAndClipLineSegment(t,i);null!==o&&l.drawLine(e,o[0].x,o[0].y,o[1].x,o[1].y)},e.prototype._extendAndHitTestLineSegment=function(e,t,i){var o,n=this._extendAndClipLineSegment(t,i);return null!==n&&(o=s.distanceToSegment(n[0],n[1],e),o.distance<=3)?this._hittestResult:null},e.prototype._extendAndClipLineSegment=function(e,t){var i=n.ensureNotNull(this._data);return h.extendAndClipLineSegment(e,t,i.width,i.height,i.extendleft,i.extendright)},e.prototype._drawBackground=function(e,t){var i,a,l,c=n.ensureNotNull(this._data),h=t[0],u=t[1],d=t[2],p=t[3];if(!(r.equalPoints(h,u)||r.equalPoints(d,p)||s.distanceToLine(h,u,d).distance<1e-6||s.distanceToLine(h,u,p).distance<1e-6||c.width<=0||c.height<=0||(i=[new r.Point(0,0),new r.Point(c.width,0),new r.Point(c.width,c.height),new r.Point(0,c.height)],a=i,a=o(a,h,u,p),c.extendright||(a=o(a,u,p,d)),a=o(a,p,d,h),c.extendleft||(a=o(a,d,h,u)),null===a))){for(e.beginPath(),e.moveTo(a[0].x,a[0].y),l=1;l<a.length;l++)e.lineTo(a[l].x,a[l].y);e.fillStyle=this._getColor(),e.fill()}},e.prototype._hitTestBackground=function(e){var t,i,o,r,s,a,l,c,h,u,d,p=n.ensureNotNull(this._data);return 4!==p.points.length?null:(t=p.points,i=t[0],o=t[1],r=t[2],s=(o.y-i.y)/(o.x-i.x),a=i.y+s*(e.x-i.x),l=r.y+s*(e.x-r.x),c=Math.max(a,l),h=Math.min(a,l),u=Math.min(i.x,o.x),d=Math.max(i.x,o.x),!p.extendleft&&e.x<u?null:!p.extendright&&e.x>d?null:e.y>=h&&e.y<=c?this._backHittestResult:null)},e}(),t.ParallelChannelRenderer=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i(5);var o=function(){function e(){}return e.prototype.format=function(e){var t,i,o,n,r=e<0;return e=Math.abs(e),t=Math.floor(e/86400),e-=86400*t,i=Math.floor(e/3600),e-=3600*i,o=Math.floor(e/60),e-=60*o,n="",t&&(n+=t+$.t("d",{context:"dates"})+" "),i&&(n+=i+$.t("h",{context:"dates"})+" "),o&&(n+=o+$.t("m",{context:"dates"})+" "),e&&(n+=e+$.t("s",{context:"dates"})+" "),r&&(n="-"+n),n.trim()},e}();t.TimeSpanFormatter=o},function(e,t,i){"use strict";function o(e){this._data=null,this._hittest=e||new a(a.MOVEPOINT),this._backHittest=new a(a.MOVEPOINT_BACKGROUND),this._points=[]}var n=i(70).pointInPolygon,r=i(51).distanceToSegment,s=i(114).TrendLineRenderer,a=i(11),l=i(33),c=i(91).LineEnd;o.prototype.setData=function(e){this._data=e,this._points=e.points},o.prototype.draw=function(e){var t,i,o;if(null!==this._data&&0!==this._points.length){for(e.beginPath(),e.lineCap="butt",e.strokeStyle=this._data.color,e.lineWidth=this._data.linewidth,e.lineStyle=this._data.linestyle,t=this._points[0],e.moveTo(t.x,t.y),
i=0;i<this._points.length;i++)o=this._points[i],e.lineTo(o.x,o.y);this._data.filled&&this._data.fillBackground&&(e.fillStyle=l.generateColor(this._data.backcolor,this._data.transparency),e.fill()),this._data.filled&&!this._data.skipClosePath&&e.closePath(),this._data.linewidth>0&&e.stroke(),this._points.length>1&&(this._data.leftend===c.Arrow&&s.prototype.drawArrow(this._points[1],this._points[0],e,e.lineWidth),this._data.rightend===c.Arrow&&s.prototype.drawArrow(this._points[this._points.length-2],this._points[this._points.length-1],e,e.lineWidth))}},o.prototype.hitTest=function(e){var t,i,o,s,a;if(null===this._data||void 0!==this._data.mouseTouchable&&!this._data.mouseTouchable)return null;for(t=TradingView.isMobile.any()?24:3,i=1;i<this._points.length;i++)if(o=this._points[i-1],s=this._points[i],a=r(o,s,e),a.distance<=t)return this._hittest;return this._data.filled&&this._data.fillBackground&&this._points.length>0&&(o=this._points[0],s=this._points[this._points.length-1],a=r(o,s,e),a.distance<=t)?this._hittest:this._data.filled&&this._data.fillBackground&&n(e,this._data.points)?this._backHittest:null},e.exports=o},,,function(e,t,i){"use strict";function o(e,t){function i(e){var t=o[e];t&&(n=n.concat(t.sort(function(e,t){return e.name.localeCompare(t.name)})),delete o[e])}var o,n,s=RegExp("country-([a-z*_]+)","i"),a=r.supportedFlags().filter(function(e){return"forex"!==e&&"bitcoin"!==e}).sort(),l=["forex","country-usa","country-canada","country-ae","country-uk","country-europe","country-germany","country-ireland","country-italy","country-luxembourg","country-austria","country-norway","country-spain","country-poland","country-sweden","country-switzerland","country-turkey","country-israel","country-argentina","country-australia","country-brasil","country-mexico","country-peru","country-chile","country-colombia","country-new_zealand","country-brasil","country-india","country-japan","country-china","country-hong_kong","country-singapore","country-taiwan","country-russia","country-malaysia","country-bahrain","country-egypt","country-saudi_arabia","country-serbia","country-*","bitcoin"];return t&&t.order&&(l=t.order),o={},r.supportedFlags().forEach(function(e){o[e]=[]}),n=[],e.forEach(function(e){e.flag&&o[e.flag].push(e),e.value||n.push(e)}),l.forEach(function(e){var t,o;"forex"===e||"bitcoin"===e?i(e):(t=s.exec(e),o=t&&t[1],"*"===o?a.forEach(function(e){i(e)}):i(o))}),Object.keys(o).forEach(function(e){i(e)}),n}var n=i(3),r=i(468);e.exports.displayedExchangesFilter=function(e){return n.enabled("symbol_search_limited_exchanges")&&(e=e.filter(function(e){return!("bitcoin"===e.flag||e.hideInSymbolSearch)})),e},e.exports.sortExchangesListByFlagIfNeeded=function(e){return n.enabled("symbol_search_flags")&&(e=o(e)),e}},function(e,t,i){var o,n,r;!function(s){n=[i(13),i(959),i(582),i(452),i(921)],o=s,void 0!==(r="function"==typeof o?o.apply(t,n):o)&&(e.exports=r)}(function(e){return e.widget("ui.slider",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all",
"ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,i,o=this.options,n=this.element.find(".ui-slider-handle"),r=[];for(i=o.values&&o.values.length||1,n.length>i&&(n.slice(i).remove(),n=n.slice(0,i)),t=n.length;t<i;t++)r.push("<span tabindex='0'></span>");this.handles=n.add(e(r.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t).attr("tabIndex",0)})},_createRange:function(){var t=this.options;t.range?(!0===t.range&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=e("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),"min"!==t.range&&"max"!==t.range||this._addClass(this.range,"ui-slider-range-"+t.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(t){var i,o,n,r,s,a,l,c=this,h=this.options;return!h.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},o=this._normValueFromMouse(i),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var i=Math.abs(o-c.values(t));(n>i||n===i&&(t===c._lastChangedValue||c.values(t)===h.min))&&(n=i,r=e(this),s=t)}),!1!==this._start(t,s)&&(this._mouseSliding=!0,this._handleIndex=s,this._addClass(r,null,"ui-state-active"),r.trigger("focus"),a=r.offset(),l=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:t.pageX-a.left-r.width()/2,top:t.pageY-a.top-r.height()/2-(parseInt(r.css("borderTopWidth"),10)||0)-(parseInt(r.css("borderBottomWidth"),10)||0)+(parseInt(r.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,s,o),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t)
;return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,o,n,r;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),o=i/t,o>1&&(o=1),o<0&&(o=0),"vertical"===this.orientation&&(o=1-o),n=this._valueMax()-this._valueMin(),r=this._valueMin()+o*n,this._trimAlignValue(r)},_uiHash:function(e,t,i){var o={handle:this.handles[e],handleIndex:e,value:void 0!==t?t:this.value()};return this._hasMultipleValues()&&(o.value=void 0!==t?t:this.values(e),o.values=i||this.values()),o},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(e,t){return this._trigger("start",e,this._uiHash(t))},_slide:function(e,t,i){var o,n=this.value(),r=this.values();this._hasMultipleValues()&&(o=this.values(t?0:1),n=this.values(t),2===this.options.values.length&&!0===this.options.range&&(i=0===t?Math.min(o,i):Math.max(o,i)),r[t]=i),i!==n&&!1!==this._trigger("slide",e,this._uiHash(t,i,r))&&(this._hasMultipleValues()?this.values(t,i):this.value(i))},_stop:function(e,t){this._trigger("stop",e,this._uiHash(t))},_change:function(e,t){this._keySliding||this._mouseSliding||(this._lastChangedValue=t,this._trigger("change",e,this._uiHash(t)))},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,i){var o,n,r;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this._hasMultipleValues()?this._values(t):this.value();for(o=this.options.values,n=arguments[0],r=0;r<o.length;r+=1)o[r]=this._trimAlignValue(n[r]),this._change(null,r);this._refreshValue()},_setOption:function(t,i){var o,n=0;switch("range"===t&&!0===this.options.range&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(n=this.options.values.length),this._super(t,i),t){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(i),this.handles.css("horizontal"===i?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),
o=n-1;o>=0;o--)this._change(null,o);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(e){this._super(e),this._toggleClass(null,"ui-state-disabled",!!e)},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,o;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this._hasMultipleValues()){for(i=this.options.values.slice(),o=0;o<i.length;o+=1)i[o]=this._trimAlignValue(i[o]);return i}return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,o=e-i;return 2*Math.abs(i)>=t&&(o+=i>0?t:-t),parseFloat(o.toFixed(5))},_calculateNewMax:function(){var e=this.options.max,t=this._valueMin(),i=this.options.step;e=Math.round((e-t)/i)*i+t,e>this.options.max&&(e-=i),this.max=parseFloat(e.toFixed(this._precision()))},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=""+e,i=t.indexOf(".");return-1===i?0:t.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(e){"vertical"===e&&this.range.css({width:"",left:""}),"horizontal"===e&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var t,i,o,n,r,s=this.options.range,a=this.options,l=this,c=!this._animateOff&&a.animate,h={};this._hasMultipleValues()?this.handles.each(function(o){i=(l.values(o)-l._valueMin())/(l._valueMax()-l._valueMin())*100,h["horizontal"===l.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[c?"animate":"css"](h,a.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===o&&l.range.stop(1,1)[c?"animate":"css"]({left:i+"%"},a.animate),1===o&&l.range[c?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:a.animate})):(0===o&&l.range.stop(1,1)[c?"animate":"css"]({bottom:i+"%"},a.animate),1===o&&l.range[c?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:a.animate}))),t=i}):(o=this.value(),n=this._valueMin(),r=this._valueMax(),i=r!==n?(o-n)/(r-n)*100:0,h["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[c?"animate":"css"](h,a.animate),"min"===s&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:i+"%"},a.animate),"max"===s&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:100-i+"%"},a.animate),"min"===s&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:i+"%"},a.animate),"max"===s&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:100-i+"%"},a.animate))},_handleEvents:{keydown:function(t){var i,o,n,r=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:
case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(e(t.target),null,"ui-state-active"),!1===this._start(t,r)))return}switch(n=this.options.step,i=o=this._hasMultipleValues()?this.values(r):this.value(),t.keyCode){case e.ui.keyCode.HOME:o=this._valueMin();break;case e.ui.keyCode.END:o=this._valueMax();break;case e.ui.keyCode.PAGE_UP:o=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:o=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(i===this._valueMax())return;o=this._trimAlignValue(i+n);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i===this._valueMin())return;o=this._trimAlignValue(i-n)}this._slide(t,r,o)},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),this._removeClass(e(t.target),null,"ui-state-active"))}}})})},function(e,t,i){"use strict";function o(){return[[1,0,0],[0,1,0],[0,0,1]]}function n(e,t){var i,o,n,r=[[0,0,0],[0,0,0],[0,0,0]];for(i=0;i<3;i++)for(o=0;o<3;o++)for(n=0;n<3;n++)r[i][o]+=e[i][n]*t[n][o];return r}function r(e){var t=Math.cos(e),i=Math.sin(e);return[[t,-i,0],[i,t,0],[0,0,1]]}function s(e,t){return[[e,0,0],[0,t,0],[0,0,1]]}function a(e,t){return[[1,0,e],[0,1,t],[0,0,1]]}function l(e,t){var i,o,n=[t.x,t.y,1],r=[0,0,0];for(i=0;i<3;i++)for(o=0;o<3;o++)r[i]+=n[o]*e[i][o];return new c.Point(r[0],r[1])}Object.defineProperty(t,"__esModule",{value:!0});var c=i(8);t.identityMatrix=o,t.multiplyMatrices=n,t.rotationMatrix=r,t.scalingMatrix=s,t.translationMatrix=a,t.transformPoint=l},function(e,t,i){"use strict";(function(t,o){var n=i(0).getLogger("Common.CollectionObserver"),r=t.Collection.extend({initialize:function(e){if(this._observableCollection=e.observableCollection,this._validator=e.validator,this._syncEvents=o.isArray(e.syncEvents)?e.syncEvents:[],this._syncEvents.push("reset"),this._syncEvents=o.uniq(this._syncEvents),!this._observableCollection)return void n.logError("'observableCollection' option required");if(!(this._observableCollection instanceof t.Collection))return void n.logError("'observableCollection' need to be Backbone.Collection");this.comparator||"function"!=typeof this._observableCollection.comparator||(this.comparator=this._observableCollection.comparator),this._observableCollection.on("add",this.onAdd,this),this._observableCollection.on("remove",this.remove,this);for(var i=this._syncEvents.length-1;i>=0;i--)this._observableCollection.on(this._syncEvents[i],this.syncCollections,this)},syncCollections:function(){var e=this._validator;e&&this.reset(o.filter(this._observableCollection.models,e))},onAdd:function(e,t){var i=this._validator;i&&!i(e)||this.add.apply(this,arguments)},destroy:function(){this._observableCollection.off("add",this.onAdd,this),
this._observableCollection.off("remove",this.remove,this);for(var e=this._syncEvents.length-1;e>=0;e--)this._observableCollection.off(this._syncEvents[e],this.syncCollections,this)}});e.exports=r}).call(t,i(178),i(29))},function(e,t,i){var o,n,r;!function(s){n=[i(13),i(452)],o=s,void 0!==(r="function"==typeof o?o.apply(t,n):o)&&(e.exports=r)}(function(e){return e.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}})},function(e,t,i){"use strict";function o(e){this._search=e}var n=i(95),r=i(0).getLogger("Chart.SymbolSearchInputParseMixin");o.prototype._isEntityToken=function(e){return e instanceof n.SymbolToken||e instanceof n.NumberToken},o.prototype.parse=function(){var e,t=this._search,i=t._state,o=$(t._inputElement);i.parsed=n.tokenize(t._state.value,{recover:!0}),o.removeClass("incomplete error"),e=n.validate(t._state.parsed),i.isError=!!e.errors,i.isIncomplete=!!e.warnings,i.isEmpty=!!e.isEmpty,i.isError?o.addClass("error"):i.isIncomplete&&!i.isEmpty&&o.addClass("incomplete"),e.errors||"var"===e.currentState||i.parsed.push(new n.IncompleteSymbolToken("")),t._onParse&&t._onParse(i.parsed,e)},o.prototype.onSelectionChanged=function(e){var t,i,o,r,s=this._search,a=this._getSelectedToken();this._isEntityToken(a)&&s.$list?(a instanceof n.SymbolToken?(t=a.ticker()||"",i=a.exchange()||s.getExchangeFilter()||""):(t=a.value||"",i=s.getExchangeFilter()||""),o=s._state.typeFilter||"",r=s._state.tradableFilter,s._state.contextToken=a,t===s._state.contextTicker&&i===s._state.contextExchange&&o===s._state.contextType&&r===s._state.contextTradable||e(t,i,o,""+a)):s._state.contextToken&&(s._clearSuggestList(),s._clearSelectionState())},o.wrapSymbol=function(e){var t=new n.SymbolToken(e);return t.parse(),""+t},o.prototype.replaceCurrentSymbol=function(e){var t,i,n,s=this._search,a=s._state;return a.contextToken?(t="",i=0,n=a.contextToken,e.full_name?(n.value=o.wrapSymbol(e.full_name),n.parse(),n.hasOwnProperty("_exchange")||r.logError("Can't find exchange in full_name ("+e.full_name+")"),n.hasOwnProperty("_ticker")||r.logError("Can't find ticker in full_name ("+e.full_name+")")):(n.exchange(e.exchange),n.ticker(e.symbol),n.value=""+n),a.parsed.forEach(function(e){t+=e.hasOwnProperty("value")?e.value:""+e,e===n&&(i=t.length)}),{ok:!0,newValue:t,newCaretPos:i,keepListFor:""+n}):{ok:!1}},o.prototype._getSelectedToken=function(){var e,t,i,o,n=this._search,r=n._state,s=0;for(e=0;e<r.parsed.length;e++)if(t=r.parsed[e],i=s,s+=t.value.length,o=s,r.selectionStart>=i&&(r.selectionEnd<o||r.selectionEnd===o&&!this._isEntityToken(r.parsed[e+1])))return t},o.prototype.parseSymbol=function(e){var t=this._search,i=n.tokenize(e,{recover:!0}),o=n.validate(i);return o.warnings||o.errors?(""===e.trim()&&t._onEmptyApply&&t._onEmptyApply(),""):(n.normalizeTokens(i),i=n.factorOutBraces(i),i.join(""))},o.addSpreadActions=function(e,t,o,r){function s(e){var i="function"==typeof o?o():t.value,n=i+e;"function"==typeof r?r(n):t.value=n,
t.selectionStart=t.selectionEnd=n.length,$(t).trigger("sync")}var a=[{icon:i(584),insert:"/",type:"binaryOp"},{icon:i(585),insert:"-",type:"binaryOp"},{icon:i(586),insert:"+",type:"binaryOp"},{icon:i(587),insert:"*",type:"binaryOp"},{icon:i(588),insert:"^",type:"binaryOp"},{icon:i(589),type:"complete",callback:function(){var e,i=n.tokenize("function"==typeof o?o():t.value,{recover:!0}),s=n.validate(i);s.errors||s.warnings||(e=n.flip(i).join(""),"function"==typeof r?r(e):t.value=e,t.selectionStart=t.selectionEnd=e.length,$(t).trigger("sync"))}}];return a.forEach(function(t){t.button=$('<button class="disabled">').append($(t.icon).attr("class","action-icon")).appendTo(e),t.button.on("mousedown mouseup",function(e){e&&e.preventDefault&&e.preventDefault()}).on("click",function(e){$(this).is(".disabled")||(t.insert&&s(t.insert),t.callback&&t.callback(e))})}),function(e,t){a.forEach(function(e){var i=!1;if(!t.errors)switch(e.type){case"binaryOp":i="var"===t.currentState;break;case"openBrace":i="var"!==t.currentState;break;case"closeBrace":i="var"===t.currentState&&t.braceBalance>0;break;case"complete":i=!t.errors&&!t.warnings}e.button.toggleClass("disabled",!i)})}},e.exports=o},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 13" width="13" height="13"><path fill="none" stroke="currentColor" stroke-linecap="square" d="M2.5 6.5h9"/><circle fill="currentColor" cx="7" cy="3" r="1"/><circle fill="currentColor" cx="7" cy="10" r="1"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 13" width="13" height="13"><path fill="none" stroke="currentColor" stroke-linecap="square" d="M2.5 6.5h8"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 13" width="13" height="13"><path fill="none" stroke="currentColor" stroke-linecap="square" d="M2.5 6.5h8m-4-4v8"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 13" width="13" height="13"><path fill="none" stroke="currentColor" stroke-linecap="square" d="M3 10l7-7M3 3l7 7"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 13" width="13" height="13"><path fill="none" stroke="currentColor" stroke-linecap="square" d="M3 7l3.5-3.5L10 7"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 13" width="13" height="13"><g fill="none" fill-rule="evenodd" stroke="currentColor"><path stroke-linecap="square" stroke-linejoin="round" d="M3.5 10V2.5L1 5"/><path stroke-linecap="square" d="M1.5 10.5h4"/><path d="M8 12l3-11"/></g></svg>'},function(e,t,i){"use strict";function o(e){return n[e]||""}Object.defineProperty(t,"__esModule",{value:!0});var n={"flag-ae":i(591),"flag-ar":i(592),"flag-at":i(593),"flag-au":i(594),"flag-bh":i(595),"flag-br":i(596),"flag-btc":i(597),"flag-ca":i(598),"flag-ch":i(599),"flag-cl":i(600),"flag-cn":i(601),"flag-co":i(602),"flag-de":i(603),"flag-eg":i(604),"flag-es":i(605),"flag-eu":i(606),"flag-fx":i(607),"flag-hk":i(608),"flag-ie":i(609),
"flag-il":i(610),"flag-in":i(611),"flag-it":i(612),"flag-jp":i(613),"flag-lu":i(614),"flag-my":i(615),"flag-mx":i(616),"flag-ng":i(617),"flag-no":i(618),"flag-nz":i(619),"flag-pe":i(620),"flag-pl":i(621),"flag-rs":i(622),"flag-ru":i(623),"flag-sa":i(624),"flag-se":i(625),"flag-sg":i(626),"flag-tr":i(627),"flag-tw":i(628),"flag-uk":i(629),"flag-us":i(630)};t.getSvgCodeByFlagId=o},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path d="M0 0h16v11H0z" id="a"/></defs><g fill="none"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#199D00" xlink:href="#a"/><g fill-rule="nonzero" mask="url(#b)"><path fill="#000" d="M0 7h16v4H0z"/><path fill="#F7F8FA" d="M0 3h16v5H0z"/><path fill="#199D00" d="M0 0h16v3H0z"/><path fill="#CE1126" d="M0 0h4v11H0z"/></g></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#fff" d="M0 0h16v11H0z"/><path fill="#74acdf" d="M0 8h16v3H0zM0 0h16v3H0z"/><circle fill="#f6b40e" fill-opacity=".5" cx="8" cy="5.5" r="2"/><circle fill="#f6b40e" cx="8" cy="5.5" r="1"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#df0000" d="M0 0h16v11H0z"/><path fill="#fff" d="M0 4h16v3H0z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#00008b" d="M0 0h16v11H0z"/><path fill="#fff" d="M0 0v1.043l.5.357H0v2.2h.498L0 3.955V5h1.46l.94-.672V5h2.2v-.67l.94.67H7V3.957L6.5 3.6H7V1.4h-.5l.5-.357V0H5.537L4.6.67V0H2.4v.672L1.46 0H0zm12 5h1v1h-1z"/><path fill="red" d="M0 0v.307L1.67 1.5h.86L.43 0H0zm3 0v2H0v1h3v2h1V3h3V2H4V0H3zm3.57 0l-2.1 1.5h.86L7 .307V0h-.43zm-4.9 3.5L0 4.693V5h.43l2.1-1.5h-.86zm2.8 0L6.57 5H7v-.307L5.33 3.5h-.86z"/><circle fill="#fff" cx="12.5" cy="1.5" r="1"/><circle fill="#fff" cx="14.5" cy="3.5" r="1"/><circle fill="#fff" cx="9.5" cy="4.5" r="1"/><circle fill="#fff" cx="11.5" cy="9.5" r="1"/><path fill="#fff" d="M3 6.5l-1 1v1l1 1h1l1-1v-1l-1-1H3z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="11" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path d="M0 0h16v11H0z" id="a"/></defs><g fill="none"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#199D00" xlink:href="#a"/><g mask="url(#b)"><path fill="#E10011" d="M4 11h12V0H4z"/><path fill="#F7F8FA" d="M0 0v11.014h7.666L5 11v-1h1V9H5V8h1V7H5V6h1V5H5V4h1V3H5V2h1V1H5V0l2.666-.014z"/></g></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#009b3a" d="M0 0h16v11H0z"/><path fill="#fedf00" d="M8 1l7 4.5L8 10 1 5.5z"/><circle fill="#002776" cx="8" cy="5.5" r="3"/><path fill="#fff" d="M5.424 3.97c-.114.19-.207.394-.276.606 2.325-.12 4.046.182 5.635 2.037.086-.218.147-.445.18-.677C9.39 4.156 7.72 3.89 5.423 3.97z"/></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path fill="#f68f2d" d="M10.67 7.597c.617-.314 1.003-.868.913-1.79C11.463 4.547 10.375 4.12 9 4V2.258H8V4H7V2.258H6V4c-.23.005-.438.014-.66.014V4.01L3.873 4v1.144s.787-.015.774 0c.43 0 .572.25.612.466v4.787c-.02.135-.1.352-.4.352.013.01-.776 0-.776 0L3.874 12H6v1.793h1V12h1v1.793h1V12c1.79-.103 3.042-.524 3.197-2.204.126-1.352-.51-1.955-1.527-2.2zM7.013 5.22c.6 0 2.585-.19 2.585 1.063 0 1.202-1.984 1.06-2.585 1.06zm0 5.538V8.416c.722 0 3.08-.207 3.08 1.17 0 1.322-2.358 1.17-3.08 1.172z"/><path fill="#f68f2d" d="M8 0a8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8 8 8 0 0 0-8-8zm0 1.234A6.766 6.766 0 0 1 14.766 8 6.766 6.766 0 0 1 8 14.766 6.766 6.766 0 0 1 1.234 8 6.766 6.766 0 0 1 8 1.234z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#fff" d="M0 0h16v11H0z"/><path fill="red" d="M0 0h4v11H0zm12 0h4v11h-4zM6.75 2.5l.25 2L5.5 4l-1 .75L5 6l1 .5V7h1.5v1.877h1V7H10v-.5l1-.5.5-1.25-1-.75-1.5.5.2-2L8 1.75z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#d52b1e" d="M0 0h16v11H0z"/><path fill="#fff" d="M7 2v2H5v3h2v2h3V7h2V4h-2V2H7z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><g fill="none" fill-rule="evenodd"><path fill="#F5F7FA" d="M8 6h8v-8H8z"/><path fill="#3089E3" d="M0 6h8v-8H0z"/><path fill="#F5F7FA" d="M5.29 5l-1.245-.889L2.8 5l.445-1.511L2 2.6h1.6L4.045 1l.445 1.6h1.6l-1.245.889z"/><path fill="#FF4A68" d="M0 14h16V6H0z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#de2910" d="M0 0h16v11H0z"/><circle fill="#ffde00" cx="5.5" cy="1.5" r=".5"/><circle fill="#ffde00" cx="5.5" cy="4.5" r=".5"/><circle fill="#ffde00" cx="6.5" cy="2.5" r=".5"/><circle fill="#ffde00" cx="6.5" cy="3.5" r=".5"/><path fill="#ffde00" d="M2.97 1.047l.587 1.19 1.314.192-.95.925.225 1.31-1.175-.62-1.177.62.225-1.31-.95-.927 1.313-.192z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path d="M0 0h16v11H0z" id="a"/></defs><g fill="none"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#199D00" xlink:href="#a"/><g fill-rule="nonzero" mask="url(#b)"><path fill="#CE1126" d="M0 8h16v3H0z"/><path fill="#0051BB" d="M0 4h16v4H0z"/><path fill="#FFCC01" d="M0 0h16v5H0z"/></g></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#ffce00" d="M0 0h16v11H0z"/><path fill="#d00" d="M0 4h16v3H0z"/><path d="M0 0h16v4H0z"/></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="11" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path d="M0 0h16v11H0z" id="a"/></defs><g fill="none"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#199D00" xlink:href="#a"/><g mask="url(#b)"><path fill="#000" fill-rule="nonzero" d="M0 7h16v4H0z"/><path fill="#F7F8FA" fill-rule="nonzero" d="M0 3h16v5H0z"/><path fill="#CE1126" fill-rule="nonzero" d="M0 0h16v3H0z"/><path stroke="#FE9812" d="M5.5 5.5h5v1h-5zM6.5 6.5h3v1h-3zM7.5 4.5h1v1h-1z"/></g></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#ffc400" d="M0 0h16v11H0z"/><path fill="#c60b1e" d="M0 8h16v3H0zm0-8h16v3H0zm7 5v2c0 .278-.446.5-1 .5S5 7.28 5 7V5z"/><path fill="#ffc400" fill-opacity=".5" d="M5 6h2v2H5z"/><path fill="#ccc" d="M6 5h1v1H6zM7.5 4.5H8v3h-.5zM4 4.5h.5v3H4z"/><path fill="#c60b1e" d="M6 4s-.9 0-1 .268c-.1.268.3.532 1 .632.7-.1 1.1-.364 1-.632C6.9 4 6 4 6 4z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#039" d="M0 0h16v11H0z"/><path fill="#fc0" d="M8 2h1v1H8zM6 3h1v1H6zM5 5h1v1H5zm1 2h1v1H6zm2 1h1v1H8zm2-1h1v1h-1zm1-2h1v1h-1zm-1-2h1v1h-1z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 10" width="16" height="10"><title>Artboard</title><path fill="#758696" d="M0 0v10h2.5V6H6V4H2.5V2H6V0H0zm12.64 4.4L15.5 0H13l-1.56 2.4L10 0H7l2.88 4.8L6.5 10H9l2.08-3.2L13 10h3l-3.36-5.6z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><g><path fill="#DE2910" d="M0 0h16v11H0z"/><path fill="#FFF" d="M8.77 1.506C6.4 1.342 5.3 4.56 7.78 5.61c-.55-.432-.407-1.246.275-1.552.408-.187.745-.947.44-1.424-.275-.423-.205-.885.274-1.128zM7.42 2.79l.188.172.235-.094-.102.235.158.204-.25-.03-.142.218-.047-.26-.252-.06.227-.127-.023-.258h.008zm-3.247.603c-.887 2.2 1.843 4.244 3.607 2.216-.572.39-1.31 0-1.388-.737-.055-.447-.674-1.002-1.223-.86-.496.132-.91-.08-.997-.612v-.007zm5.584.18c-.95.04-1.86.697-1.977 2.036.236-.65 1.06-.776 1.56-.22.307.336 1.138.414 1.49-.024.323-.39.786-.47 1.17-.086a2.203 2.203 0 0 0-2.243-1.7v-.007zm.157.728l.188.18.243-.093-.102.235.157.196-.25-.03-.142.218-.055-.25-.25-.063.234-.133-.023-.26zM5.2 4.694l.188.18.236-.094-.102.234.164.195-.26-.024-.14.22-.047-.26-.252-.062.228-.125L5.2 4.7v-.007zm3.06.837c-.16.013-.317.04-.472.08.683.014 1.06.758.683 1.408-.22.392-.046 1.206.487 1.41.47.18.682.594.44 1.072 1.88-1.174 1.12-4.11-1.146-3.97h.01zm-.48.08c.19.656-.4 1.236-1.13 1.087-.446-.094-1.176.33-1.2.893-.03.5-.352.837-.885.75C6.385 9.86 9.17 7.904 7.78 5.6v.01zm1.46 1.533l.195.18.236-.094-.1.234.155.196-.25-.03-.142.218-.047-.25-.25-.063.227-.125-.024-.26v-.007zm-2.91.243l.188.18.235-.094-.102.235.166.196-.26-.032-.132.22-.055-.258-.252-.062.227-.126-.016-.258z"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#fff" d="M0 0h16v11H0z"/><path fill="#009A49" d="M0 0h5v11H0z"/><path fill="#FF7900" d="M11 0h5v11h-5z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#fff" d="M0 0h16v11H0z"/><path fill="#0038b8" d="M0 1h16v2H0zM0 8h16v2H0z"/><path fill="#0038b8" color="#000" d="M5.834 4.25L8 8l.217-.375 1.95-3.375H5.833zm.867.5h2.6L8 7 6.7 4.75z"/><path fill="#0038b8" d="M8 3l-.217.375-1.95 3.375h4.333L8 3zm0 1l1.3 2.25H6.7L8 4z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#fff" d="M0 0h16v11H0z"/><path fill="#f93" d="M0 0h16v3H0z"/><path fill="#128807" d="M0 8h16v3H0z"/><circle fill="#008" cx="8" cy="5.5" r="1.5"/><circle fill="#fff" cx="8" cy="5.5" opacity=".7" r="1.25"/><circle fill="#008" cx="8" cy="5.5" r=".4"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#fff" d="M0 0h16v11H0z"/><path fill="#009246" d="M0 0h5v11H0z"/><path fill="#ce2b37" d="M11 0h5v11h-5z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#fff" d="M0 0h16v11H0z"/><circle fill="#bc002d" cx="8" cy="5.5" r="3.25"/><path fill="#000" fill-opacity=".15" d="M0 0v11h16V0zm.5.5h15v10H.5z" class="flag-shade"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path d="M0 0h16v11H0z" id="a"/></defs><g fill="none"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#199D00" xlink:href="#a"/><g fill-rule="nonzero" mask="url(#b)"><path fill="#3089E4" d="M0 7h16v4H0z"/><path fill="#F7F8FA" d="M0 3h16v4H0z"/><path fill="#F00" d="M0 0h16v4H0z"/></g></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="11" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path d="M0 0h16v11H0z" id="a"/></defs><g fill="none"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#FFF" xlink:href="#a"/><path fill="#DD0202" d="M9 0h7v1H9V0zm0 2h7v1H9V2zm0 2h7v1H9V4zM0 6h16v1H0V6zm0 2h16v1H0V8zm0 2h16v1H0v-1z" mask="url(#b)"/><path fill="#003499" d="M0 0h9v6H0z" mask="url(#b)"/><path fill="#FFCC01" d="M5 4V2h2v2H5zM1 4V2h1V1h2v1H3v2h1v1H2V4H1z" mask="url(#b)"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><g fill="none"><path fill="#CE1126" d="M10.667 11H16V0h-5.333z"/><path fill="#F5F7FA" d="M5.333 11h5.333V0H5.333z"/><path fill="#006847" d="M0 11h5.333V0H0z"/><g transform="translate(6 3)"><path stroke="#8C9157" stroke-linecap="round" stroke-width=".933" d="M.222 2.222c0 .657.357 1.231.887 1.539m1.848-.04c.493-.316.82-.87.82-1.499"/><ellipse fill="#C59262" cx="2" cy="1.778" rx=".889" ry="1.333"/></g></g></svg>'
},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="11" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path d="M0 0h16v11H0z" id="a"/></defs><g fill="none"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#199D00" xlink:href="#a"/><g fill-rule="nonzero" mask="url(#b)"><path fill="#029246" d="M0 0h5v11H0z"/><path fill="#F7F8FA" d="M5 0h6v11H5z"/><path fill="#029246" d="M11 0h5v11h-5z"/></g></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#ef2b2d" d="M0 0h16v11H0z"/><path fill="#fff" d="M4.1 0h3.4v11H4.1z"/><path fill="#fff" d="M0 4.1h16v3.4H0z"/><path fill="#002868" d="M5 0h1.6v11h-1.6z"/><path fill="#002868" d="M0 5h16v1.6H0z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#00008b" d="M0 0h16v11H0z"/><path fill="#fff" d="M0 0v1.043l.5.357H0v2.2h.498L0 3.955V5h1.46l.94-.672V5h2.2v-.67l.94.67H7V3.957L6.5 3.6H7V1.4h-.5l.5-.357V0H5.537L4.6.67V0H2.4v.672L1.46 0H0z"/><path fill="red" d="M0 0v.307L1.67 1.5h.86L.43 0zm3 0v2H0v1h3v2h1V3h3V2H4V0zm3.57 0l-2.1 1.5h.86L7 .307V0zm-4.9 3.5L0 4.693V5h.43l2.1-1.5zm2.8 0L6.57 5H7v-.307L5.33 3.5z"/><circle fill="red" cx="12.5" cy="1.5" r="1"/><circle fill="red" cx="14.5" cy="3.5" r="1"/><circle fill="red" cx="9.5" cy="4.5" r="1"/><circle fill="red" cx="11.5" cy="9.5" r="1"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path d="M0 0h16v11H0z" id="a"/></defs><g fill="none"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#199D00" xlink:href="#a"/><g mask="url(#b)"><path fill="#F7F8FA" fill-rule="nonzero" d="M0 0h16v11H0z"/><path fill="#ED5565" d="M7 5h2v1H7z"/><path fill="#4A89DC" d="M7 4h1v1H7z"/><path fill="#57A863" d="M7 6h2v1H7zM6 4h1v2H6zM9 4h1v2H9z"/><path fill="#CE1126" fill-rule="nonzero" d="M0 0h5v11H0zM11 0h5v11h-5z"/></g></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#fff" d="M0 0h16v11H0z"/><path fill="#dc143c" d="M0 6h16v5H0z"/><path fill-opacity=".15" d="M0 0v6L.5.5h15L16 6V0z" class="flag-shade"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="11" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path d="M0 0h16v11H0z" id="a"/></defs><g fill="none"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#199D00" xlink:href="#a"/><g mask="url(#b)"><path fill="#0051BB" fill-rule="nonzero" d="M0 7h16v4H0z"/><path fill="#F7F8FA" fill-rule="nonzero" d="M0 3h16v4H0z"/><path fill="red" fill-rule="nonzero" d="M0 0h16v4H0z"/><path fill="#338AF3" fill-rule="nonzero" d="M7 4V3H6v1zM9 4V3H8v1z"/><path fill="#0052B4" fill-rule="nonzero" d="M8 4H7V3l.492-.5L8 3z"/><path fill="#D0021B" d="M6 4h1v1H6zM8 4h1v1H8zM7 5h1v1H7zM6 6h1v1H6zM8 6h1v1H8zM7 7h1v1H7z"/></g></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#0039a6" d="M0 0h16v11H0z"/><path fill="#d52b1e" d="M0 8h16v3H0z"/><path fill="#fff" d="M0 0h16v4H0z"/><path fill-opacity=".15" d="M0 0v4L.5.5h15L16 4V0z" class="flag-shade"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="11" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path d="M0 0h16v11H0z" id="a"/></defs><g fill="none"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#199D00" xlink:href="#a"/><g fill="#F0F0F0" fill-rule="nonzero" mask="url(#b)"><path d="M5 7l1 1h3v1h2V7zM13 3v2h-1v1h2V3zM3 5H2v1h2V3H3zM11 3h1v2h-1zM8.5 4H8V3H7v1H6V3H5v2h4l-.5.5.5.5 1-1V3H9v1z"/></g></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><rect width="16" height="10" fill="#006aa7"/><rect width="2" height="10" fill="#fecc00" x="5"/><rect width="16" height="2" fill="#fecc00" y="4"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><g fill="none" fill-rule="evenodd"><path fill="#F5F7FA" d="M0 0h16v11H0V0"/><path fill="#e62625" d="M0 0h16v6H0V0"/><g fill="#F5F7FA"><path d="M5.305 1.364c-1.259.271-2.054 1.48-1.775 2.7.196.86.889 1.532 1.775 1.722-1.242.403-2.587-.246-3.003-1.45-.417-1.205.253-2.508 1.495-2.912a2.36 2.36 0 0 1 .219-.06c.42-.12.869-.12 1.29 0"/><path d="M5.806 2.314l-.353-.25h.442l.132-.407.14.407h.443l-.361.25.147.407-.369-.25-.368.25.147-.407zm1.275.922l-.354-.25h.406l.132-.407.177.4h.428l-.354.25.147.407-.353-.243-.361.25.132-.407zm-.479 1.428l-.353-.3h.442l.132-.407.14.407h.442l-.353.25.132.407-.36-.25-.354.25.132-.357zm-1.613 0l-.354-.285h.435l.132-.408.148.4h.442l-.354.25.133.408-.361-.243-.354.25.133-.372zm-.487-1.428l-.353-.25h.442l.132-.415.14.408h.442l-.383.25.162.407-.36-.25-.354.25.132-.4z"/></g><path stroke="#E9E9E9" stroke-width=".5" d="M.25.25h15.5v10.5H.25z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#e30a17" d="M0 0h16v11H0z"/><path fill="#fff" d="M5.1 2a3.5 3.5 0 0 0-3.5 3.5A3.5 3.5 0 0 0 5.1 9a3.5 3.5 0 0 0 2.79-1.393A2.9 2.9 0 0 1 5.9 8.4 2.9 2.9 0 0 1 3 5.5a2.9 2.9 0 0 1 2.9-2.9 2.9 2.9 0 0 1 2 .804A3.5 3.5 0 0 0 5.1 2zM7.9 5.5l1.155-.373-.002-1.214.71.984 1.155-.378-.716.98.716.98-1.154-.377-.71.984V5.873z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#fe0000" d="M0 0h16v11H0z"/><path fill="#000095" d="M0 0h8v6H0z"/><circle fill="#fff" cx="4" cy="3" r="1"/><circle fill="#fff" fill-opacity=".3" cx="4" cy="3" r="2"/></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#00247d" d="M0 0h16v11H0z"/><path fill="#fff" d="M0 0v1.518L3.61 4H0v3h3.61L0 9.482V11h2.207L6 8.393V11h4V8.393L13.793 11H16V9.482L12.39 7H16V4h-3.61L16 1.518V0h-2.207L10 2.607V0H6v2.607L2.207 0H0z"/><path fill="#cf142b" d="M0 0v.91L4.494 4h1.324L0 0zm7 0v5H0v1h7v5h2V6h7V5H9V0H7zm7.676 0L10 3.215V4h.182L16 0h-1.324zM5.818 7L0 11h1.324L6 7.785V7h-.182zm4.364 0L16 11v-.91L11.506 7h-1.324z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#fff" d="M0 0h16v11H0z"/><path fill="#b22234" d="M0 0v1h16V0H0zm0 2v1h16V2H0zm0 2v1h16V4H0zm0 2v1h16V6H0zm0 2v1h16V8H0zm0 2v1h16v-1H0z"/><path fill="#3c3b6e" d="M0 0h9v7H0z"/><path fill="#fff" d="M1 1v1h1V1H1zm2 0v1h1V1H3zm2 0v1h1V1H5zm2 0v1h1V1H7zM2 3v1h1V3H2zm2 0v1h1V3H4zm2 0v1h1V3H6zM1 5v1h1V5H1zm2 0v1h1V5H3zm2 0v1h1V5H5zm2 0v1h1V5H7z"/></svg>'},function(e,t,i){"use strict";function o(e){return-1===e.indexOf(":")&&(e="FX:"+e),-1!==n.indexOf(e)}var n=["FX:AUS200","FX:BUND","FX:COPPER","FX:ESP35","FX:EUSTX50","FX:FRA40","FX:GER30","FX:HKG33","FX:JPN225","FX:NAS100","FX:NGAS","FX:SPX500","FX:UK100","FX:UKOIL","FX:US30","FX:USOIL","FX:XAGUSD","FX:XAUUSD"];t.isFXCMCFD=o},function(e,t,i){"use strict";var o,n;Object.defineProperty(t,"__esModule",{value:!0}),o=i(16),n=function(){function e(e){this.type="quoteSessionPrice",this.reset(e)}return e.prototype.state=function(){return this._priceFormatter.state()},e.prototype.reset=function(e){this._priceFormatter=e||new o.PriceFormatter(100,1,0)},e.prototype.update=function(e,t){var i=null!=t.pricescale||null!=t.minmov||null!=t.fractional||null!=t.minmove2,n=null!=e.pricescale&&null!=e.minmov&&null!=e.fractional&&null!=e.minmove2;i&&n&&(this._priceFormatter=new o.PriceFormatter(e.pricescale,e.minmov,e.fractional,e.minmove2))},e.prototype.format=function(e,t,i){return this._priceFormatter.format(e,t,i)},e.prototype.hasForexAdditionalPrecision=function(){return this._priceFormatter.hasForexAdditionalPrecision()},e.serialize=function(e){return e.state()},e.deserialize=function(t){return new e(new o.PriceFormatter(t.priceScale,t.minMove,t.fractional,t.minMove2))},e}(),t.QuoteSessionPriceFormater=n},function(e,t,i){"use strict";function o(e){var t="create_alert"===e?window.t("Cannot create alert when offline"):window.t("Cannot edit alert when offline");s.createNoticeDialog({content:t,title:window.t("Oops!")}).open()}function n(e){var t,i;return!(e=e||TradingView.alertsDispatcher&&TradingView.alertsDispatcher.chartWidget())||(t=e.model(),i=t?t.mainSeries().status():a.STATUS_OFFLINE,!l.includes(i))}function r(e){return e.alert?e.type||"edit_alert":"create_alert"}var s,a,l;Object.defineProperty(t,"__esModule",{value:!0}),i(5),s=i(67),a=i(32),l=[a.STATUS_OFFLINE,a.STATUS_RESOLVING,a.STATUS_LOADING],t.openOfflineDialog=o,t.isAlertsOnline=n,t.getAlertDialogType=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e.offset=8,
e.font="Arial",e.fontSize=12,e.lineSpacing=10,e.bgColor="rgba(255,255,255,.8)",e.borderColor="#e3e3e3",e.padding=8}(t.LabelSettings||(t.LabelSettings={}))},function(e,t,i){"use strict";var o,n=i(32),r=i(856),s=i(857),a=i(858),l=i(859),c=i(860),h=i(861),u=i(862),d=i(863),p=i(864),f=i(865),_=i(866),m=(o={},o[n.STYLE_AREA]=r,o[n.STYLE_BARS]=s,o[n.STYLE_CANDLES]=a,o[n.STYLE_HEIKEN_ASHI]=l,o[n.STYLE_HOLLOW_CANDLES]=c,o[n.STYLE_LINE]=h,o[n.STYLE_BASELINE]=u,o[n.STYLE_RENKO]=d,o[n.STYLE_PNF]=p,o[n.STYLE_PB]=f,o[n.STYLE_KAGI]=_,o);e.exports=m},,function(e,t,i){"use strict";function o(){this.cache={}}function n(e){this.cache=e}function r(e){this.currentSymbol=null,this.cache=e,this.onDataHandler=this.onData.bind(this),this.onExpiredHandler=this.onExpired.bind(this),this.cache.on("data",this.onDataHandler),this.cache.on("expired",this.onExpiredHandler)}var s,a=i(65);o.prototype.now=function(){return(new Date).getTime()},o.prototype.put=function(e,t,i,o){var n,r,s,a=this.cache[e];a&&clearTimeout(a.timeout),n=i+this.now(),r={value:t,expire:n},isNaN(n)||(s=setTimeout(function(){var t=this.cache[e];this.del(e),"function"==typeof o&&t&&o(e,t.value)}.bind(this),i),r.timeout=s),this.cache[e]=r},o.prototype.del=function(e){delete this.cache[e]},o.prototype.get=function(e){var t=this.cache[e];if(void 0!==t){if(isNaN(t.expire)||t.expire>=this.now())return t.value;this.del(e)}return null},inherit(n,a),n.prototype.maxRetryCount=1,n.prototype.retryDelay=5e3,n.prototype.itemExpired=function(e,t){this.emit("expired",t)},n.prototype.getKey=function(e,t){return e+"_"+t},n.prototype.requestSymbol=function(e,t,i,o){var n,r,s,a,l,c=36e5;return o=o||0,n=this.getKey(e,t),(r=this.cache.get(n))?void(r.pending||this.emit("data",r,i)):(s={exchange:e,symbol:t,pending:!0},this.cache.put(n,s,c),a=this,l=window.ESD_ESTIMATES_URL||"/estimates",$.ajax({url:l,type:"GET",data:{symbol:t,exchange:e},timeout:6e4}).then(function(r){if(r.error&&o<a.maxRetryCount)return void setTimeout(function(){a.cache.del(n),a.requestSymbol(e,t,i,o+1)},a.retryDelay);a.cache.put(n,$.extend(r,{exchange:e,symbol:t}),c,a.itemExpired.bind(a)),a.emit("data",r)}).fail(function(i,o,r){a.cache.put(n,{exchange:e,symbol:t,error:r},36e5,a.itemExpired.bind(a))}))},s=new n(new o),inherit(r,a),r.prototype.supportedExchange=function(e){return e=e.toLowerCase(),$.inArray(e,["nasdaq","bats","nyse","otc","amex"])>-1},r.prototype.onData=function(e,t){t&&t!==this||this.isCurrentSymbol(e)&&this.emit("data",e)},r.prototype.onExpired=function(e){this.isCurrentSymbol(e)&&this.setSymbol(e.exchange,e.symbol)},r.prototype.isCurrentSymbol=function(e){return!(!this.currentSymbol||!e)&&(this.currentSymbol.exchange===e.exchange&&this.currentSymbol.symbol===e.symbol)},r.prototype.resetSymbol=function(){this.currentSymbol=null},r.prototype.setSymbol=function(e,t){e=e.toLowerCase(),t=t.toLowerCase(),this.currentSymbol={exchange:e,symbol:t},this.supportedExchange(e)&&this.cache.requestSymbol(this.currentSymbol.exchange,this.currentSymbol.symbol,this)},r.prototype.destroy=function(){
this.cache.off("data",this.onDataHandler),this.cache.off("expired",this.onExpiredHandler)},e.exports.createEstimatesProvider=function(){return new r(s)}},function(e,t,i){"use strict";function o(e){l.call(this,e),this.ch=e.char[0]||" ",this.fontFamily=e.fontFamily||"Arial",this._charCache=new a(this.ch,!1,!1,this.fontFamily,this.height)}var n=i(8).Point,r=i(42).selectionTolerance,s=i(11),a=i(478),l=i(68).PaneRendererAbstractShape;inherit(o,l),o.prototype.drawShape=function(e){var t,i,o,n,r,s,a=this._vertOffset>0?1:-1;for(t=0,i=this.items.length;t<i;t++)o=this.items[t],n=o.x,r=o.y+this._vertOffset-a*Math.round(this.height/2),s=o.style&&null!=o.style.color?o.style.color:this._color,this._charCache.paintTo(e,s,n,r,"center",this._vertOffset>0?"middle":"bottom")},o.prototype.hitTest=function(e){var t,i,o,a=this._vertOffset,l=r(this.height);for(t=0;t<this.items.length;++t)if((i=this.items[t])&&(o=new n(i.x,i.y+a),o.subtract(e).length()<=l))return new s(s.REGULAR);return null},t.PaneRendererUnicodeChar=TradingView.PaneRendererUnicodeChar=o},,,,,,,function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path fill-rule="nonzero" d="M4.034 14.18l-.07-.18.07-.18c1.535-3.975 5.645-6.82 9.966-6.82 4.32 0 8.431 2.845 9.966 6.82l.07.18-.07.18c-1.535 3.975-5.646 6.82-9.966 6.82-4.321 0-8.431-2.845-9.966-6.82zm9.966 5.82c3.84 0 7.521-2.503 8.962-6-1.441-3.497-5.122-6-8.962-6-3.841 0-7.521 2.503-8.962 6 1.441 3.497 5.121 6 8.962 6z"/><path d="M11 14.001c0 1.66 1.341 2.999 3.001 2.999s2.999-1.339 2.999-2.999c0-1.66-1.339-3.001-2.999-3.001-1.66 0-3.001 1.341-3.001 3.001z"/></g></svg>'},function(e,t,i){"use strict";function o(e){var t,i,o,s,a,l=Object.keys(n.SYMBOL_STRING_DATA),c={symbol:null,style:null,extendedHours:null,inputs:null};if(e&&0===e.indexOf("=")){if(t=e.slice(1),t=JSON.parse(t),c.symbol=t.symbol,c.inputs=t.inputs,t.type)for(s=0;s<l.length;s++)if(o=l[s],i=n.SYMBOL_STRING_DATA[o],a=r.cutFullId(t.type),i.type===a){c.style=parseInt(o);break}"extended"===t.session&&(c.extendedHours=!0),"extended"===c.symbol.session&&(c.extendedHours=!0,c.symbol=c.symbol.symbol)}else c.symbol=e;return c}var n=i(32),r=i(39);e.exports={parseSymbolString:o}},,function(e,t,i){"use strict";function o(e,t){this._model=e,this._source=t,this._lines=[],this._pearsons=null,this._invalidated=!0,this._pearsonsTextRenderer=new l({})}function n(e,t,i,n){c.call(this,e,t,i,n,new o(e,this))}var r=i(8).Point,s=i(461).LineSourcePaneView,a=i(573).ParallelChannelRenderer,l=i(177).TextRenderer,c=i(185),h=i(114).TrendLineRenderer,u=i(11),d=i(41).CompositeRenderer,p=i(33),f=i(2).propertyPages,_=i(91).LineEnd;inherit(o,s),o.prototype.update=function(){this._invalidated=!0},o.prototype.updateImpl=function(){var e,t,i,o,n,s,a,l,c,h,u,d,p,f,m,g,v,y,b,S,w,T,P,C,x,E,L;if(this._lines=[],this._pearsons=null,this._source._nonseriesdata&&void 0!==this._source._nonseriesdata.startIndex&&void 0!==this._source._nonseriesdata.endIndex&&this._source.properties().visible.value()&&(e=this._source._nonseriesdata,
t=this._source._indexes,i=this._model.timeScale(),o=this._source.priceScale(),n=this._model.mainSeries(),s=n.firstBar(),o&&!o.isEmpty()&&!i.isEmpty()&&s)){for(a=t[e.startIndex],l=t[e.endIndex],c=[e.baseLine,e.downLine,e.upLine],h=Math.round(i.indexToCoordinate(a)),u=Math.round(i.indexToCoordinate(l)),d=this._source.properties(),p=[d.styles.baseLine,d.styles.downLine,d.styles.upLine],f=0;f<c.length;f++)p[f].visible.value()&&(m=c[f].startPrice,g=c[f].endPrice,o.isPercent()&&(m=o.priceRange().convertToPercent(m,s[TradingView.CLOSE_PLOT]),g=o.priceRange().convertToPercent(g,s[TradingView.CLOSE_PLOT])),v=o.priceToCoordinate(m,!0),y=o.priceToCoordinate(g,!0),b=new r(h,v),S=new r(u,y),w=p[f].color.value(),T=p[f].linewidth.value(),P=p[f].linestyle.value(),C={floatPoints:[b,S],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:w,linewidth:T,linestyle:P,extendleft:!1,extendright:d.styles.extendLines.value(),leftend:_.Normal,rightend:_.Normal},this._lines.push(C));d.styles.showPearsons.value()&&(x=e.downLine.startPrice,o.isPercent()&&(x=o.priceRange().convertToPercent(x,s[TradingView.CLOSE_PLOT])),E=o.priceToCoordinate(x),L=new r(h,E),this._pearsons={points:[L],text:""+e.pearsons,color:d.styles.downLine.color.value(),vertAlign:"top",horzAlign:"center",font:"Arial",offsetX:0,offsetY:4,fontsize:12})}},o.prototype.getTransparencyResetLines=function(){return this._lines.map(function(e){var t=$.extend({},e);return t.color=p.resetTransparency(t.color),t})},o.prototype.renderer=function(){var e,t,i,o,n,r,s;for(this._invalidated&&(this.updateImpl(),this._invalidated=!1),e=new d,t=[this._lines[1],this._lines[0],this._lines[2]],i=[],o=0;o<t.length;o++)t[o]&&i.push(t[o]);for(o=1;o<i.length;o++)n={},n.points=[t[o].floatPoints[0],t[o].floatPoints[1],t[o-1].floatPoints[0],t[o-1].floatPoints[1]],n.color=t[o].color,n.width=this._model.timeScale().width(),n.height=this._source.priceScale().height(),n.linewidth=t[o].linewidth,n.linestyle=t[o].linestyle,n.extendleft=!1,n.extendright=t[o].extendright,n.backcolor=n.color,n.transparency=this._source.properties().styles.transparency.value(),n.skipLines=!0,n.fillBackground=!0,r=new a(new u(u.REGULAR),new u(u.REGULAR)),r.setData(n),e.append(r);for(s=this.getTransparencyResetLines(),o=0;o<this._lines.length;o++)r=new h,r.setData(s[o]),r.setHitTest(new u(u.REGULAR)),e.append(r);return this._pearsons&&(this._pearsons.color=p.resetTransparency(this._pearsons.color),this._pearsonsTextRenderer.setData(this._pearsons),e.append(this._pearsonsTextRenderer)),e},inherit(n,c),n.prototype.isVisible=function(){if(!this.properties().visible.value())return!1;var e=this.properties().styles;return e.upLine.visible.value()||e.downLine.visible.value()||e.baseLine.visible.value()},n.prototype.getStylesPropertyPage=function(){return f.StudyLinearRegressionStylesPropertyPage},t.LinearRegressionPaneView=o,t.study_LinearRegression=n},function(e,t,i){"use strict";function o(e,t,i){this._textSizeCache=t,this._data=e,this._fontSize=e.fontsize?e.fontsize:e.fontSize?e.fontSize:12,
this._lineSpacing="number"==typeof this._data.lineSpacing&&this._data.lineSpacing?this._data.lineSpacing:0,e.lines=this._lines=l.prototype.wordWrap.call(this,e.text,e.wordWrapWidth),this._hittest=i||new c(c.MOVEPOINT)}function n(){var e=document.createElement("canvas");e.width=0,e.height=0,r=e.getContext("2d"),e=null}var r,s=i(8).Point,a=i(70).pointInRectangle,l=i(177).TextRenderer,c=i(11),h={priceRange:{width:15,height:14,data:[134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255]},barsRange:{width:16,height:15,
data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,134,134,138,255,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,136,136,136,56,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,136,136,136,56,134,134,138,255,134,134,138,255,136,136,136,56,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,136,136,136,56,134,134,138,255,134,134,138,255,136,136,136,56,134,134,138,255,0,0,0,0,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,0,0,0,0,134,134,138,255,136,136,136,56,134,134,138,255,134,134,138,255,136,136,136,56,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,136,136,136,56,134,134,138,255,134,134,138,255,137,137,137,74,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,137,137,137,74,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,134,134,138,255,134,134,138,255,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},angle:{width:14,height:12,
data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,130,130,134,76,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,130,130,134,76,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,130,130,134,76,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,130,130,134,76,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,130,130,134,76,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,130,130,134,76,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,130,130,134,76,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,130,130,134,76,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,130,130,134,76,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,130,130,134,76,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255]}};o.prototype._preRender=function(){var e,t,i,o,a,l,c,h,u,d,p,f,_,m,g,v,y,b,S,w,T,P,C;if(!this._preRendered){if(r||n(),e=this._data.points[0].x+(this._data.offsetX||0),t=e,i=this._data.points[0].y+(this._data.offsetY||0),o=i,a=this._fontSize,l=this._lineSpacing,c=a+l,h=c*this._lines.length-l,r.textBaseline="top",r.font=this.fontStyle(),u=[],this._data.wordWrapWidth)for(d=this._data.wordWrapWidth,p=0;p<this._lines.length;p++)u.push(this._data.wordWrapWidth);else for(d=0,p=0;p<this._lines.length;p++)f=r.measureText(this._lines[p]).width,u.push(f),d=Math.max(d,f);if(this._data.backgroundColor||this._data.borderColor||this._data.highlightBorder&&this._data.wordWrapWidth){_={top:this._data.paddingTop||0,right:this._data.paddingRight||0,bottom:this._data.paddingBottom||0,left:this._data.paddingLeft||0},m={x:0,y:0},this._data.backgroundHorzInflate&&(g=this._data.backgroundHorzInflate/2,_.left+=g,_.right+=g,m.x=-g),this._data.backgroundVertInflate&&(v=this._data.backgroundVertInflate/2,_.top+=v,_.bottom+=v,m.y=-v),y="number"==typeof this._data.padding?this._data.padding:~~(a/6);for(p in _)_[p]||(_[p]=y);b={x:Math.floor(e+m.x),y:Math.floor(i+m.y),w:Math.ceil(d+_.left+_.right),h:Math.ceil(h+_.top+_.bottom)},t+=_.left+m.x,o+=_.top+m.y,"bottom"!==this._data.vertAlign&&"middle"!==this._data.vertAlign||(S="middle"===this._data.vertAlign?i-b.h/2:i-b.h-(b.y-i),w=S-b.y,o+=w,b.y=S),
"right"!==this._data.horzAlign&&"center"!==this._data.horzAlign||(T="center"===this._data.horzAlign?e-b.w/2:e-b.w-(b.x-e),P=T-b.x,t+=P,b.x=T,!0!==this._data.doNotAlignText&&("right"===this._data.horzAlign?(r.textAlign="end",t+=d):(r.textAlign="center",t+=d/2))),b.w%2!=0&&b.w++,b.x+=.5,b.y+=.5,this._boundingRect=[new s(b.x,b.y),new s(b.x+b.w,b.y+b.h)],this._rect=b,this._padding=_,this._defaultPadding=y}else"bottom"!==this._data.vertAlign&&"middle"!==this._data.vertAlign||(o-=Math.round(h*("middle"===this._data.vertAlign?.5:1))),C=t,"right"!==this._data.horzAlign&&"center"!==this._data.horzAlign||(C-=Math.round(d*("center"===this._data.horzAlign?.5:1))),this._boundingRect=[new s(C,o),new s(C+d,o+h)];this._textPoint={x:t,y:o},this._textSizeCache&&(this._textSizeCache.widths=u),this._preRendered=!0,this._maxWidth=d}},o.prototype._drawIcon=function(e,t,i,o){var n,r,s,a;if(h.hasOwnProperty(o)){if(n=h[o],!n.src){for(n.src=document.createElement("canvas"),n.src.width=n.width,n.src.height=n.height,r=n.src.getContext("2d"),s=r.createImageData(n.width,n.height),a=0;a<n.data.length;a++)s.data[a]=n.data[a];r.putImageData(s,0,0)}e.drawImage(n.src,t,i)}},o.prototype.fontStyle=function(){return(this._data.bold?"bold ":"")+(this._data.italic?"italic ":"")+this._fontSize+"px "+this._data.font},o.prototype.draw=function(e){var t,i,o,n,r,s,a,l,c,h,u;if(0!==this._data.points.length){for(this._preRender(),t=this._fontSize,i=this._lineSpacing,o=t+i,e.textBaseline="top",e.font=this.fontStyle(),n=this._rect,(this._data.backgroundColor||this._data.borderColor||this._data.highlightBorder&&this._data.wordWrapWidth)&&this._rect?("right"!==this._data.horzAlign&&"center"!==this._data.horzAlign||!0!==this._data.doNotAlignText&&(e.textAlign="right"===this._data.horzAlign?"end":"center"),this._data.backgroundRoundRect?(e.roundRect(n.x,n.y,n.w,n.h,this._data.backgroundRoundRect),this._data.backgroundColor&&(e.fillStyle=this._data.backgroundColor,e.globalAlpha=this._data.backgroundTransparency,e.fill(),e.globalAlpha=1),this._data.borderColor&&(r="number"==typeof this._data.borderWidth?this._data.borderWidth:~~Math.max(t/12,1),e.strokeStyle=this._data.borderColor,e.lineWidth=r,e.stroke())):(this._data.backgroundColor&&(e.fillStyle=this._data.backgroundColor,e.globalAlpha=this._data.backgroundTransparency,e.fillRect(n.x,n.y,n.w,n.h),e.globalAlpha=1),this._data.borderColor?(r="number"==typeof this._data.borderWidth?this._data.borderWidth:~~Math.max(t/12,1),e.strokeStyle=this._data.borderColor,e.lineWidth=r,e.strokeRect(n.x-r/2,n.y-r/2,n.w+r,n.h+r)):this._data.highlightBorder&&(e.strokeStyle=this._data.color,e.lineWidth=1,e.beginPath(),l=[3,1],e.dashedLineTo(n.x-.5,a=n.y-.5,s=n.x+n.w+.5,a,l),e.dashedLineTo(s,a,s,a=n.y+n.h+.5,l),e.dashedLineTo(s=n.x-.5,a,n.x+n.w+.5,a,l),e.dashedLineTo(s,n.y-.5,s,a,l),e.globalAlpha=.5,e.stroke(),e.globalAlpha=1)),this._data.icons&&this._data.icons.forEach(function(t,i){var r=n.x+this._defaultPadding,s=n.y+this._padding.top+o*i;this._drawIcon(e,r,s,t)
},this)):"right"===this._data.horzAlign?e.textAlign="end":"center"===this._data.horzAlign&&(e.textAlign="center"),c=this._textPoint.x,h=this._textPoint.y,e.fillStyle=this._data.color,u=0;u<this._lines.length;u++)e.fillText(this._lines[u],c,h),h+=o;return{width:n.w+2}}},o.prototype.hitTest=function(e){return 0===this._data.points.length?null:(this._preRender(),this._boundingRect&&a(e,this._boundingRect[0],this._boundingRect[1])?this._hittest:null)},t.TrendLineStatsRenderer=o},,,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.Entry=0]="Entry",e[e.Close=1]="Close",e[e.ActualEntry=2]="ActualEntry",e[e.ActualClose=3]="ActualClose"}(t.RiskRewardPointIndex||(t.RiskRewardPointIndex={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Waiting=0]="Waiting",e[e.Success=1]="Success",e[e.Failure=2]="Failure"}(t.AlertStatus||(t.AlertStatus={})),function(e){e[e.Up=1]="Up",e[e.Down=2]="Down"}(t.Direction||(t.Direction={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.RoundRadius=8]="RoundRadius",e[e.TextMargins=2]="TextMargins",e[e.MinWidth=100]="MinWidth"}(t.CalloutConsts||(t.CalloutConsts={}))},function(e,t,i){"use strict";function o(e,t){return e.compareTo(t)}function n(e){return Array.from(e).reduce(function(e,t){var i=+t;return-1===e.indexOf(i)&&e.push(i),e},[])}function r(e,t,i){var o=6e4,n=new Date(t.valueOf()+e*o);return e+(i.offset_loc(t)/o-i.offset_loc(n)/o)}var s,a,l,c,h,u,d,p;Object.defineProperty(t,"__esModule",{value:!0}),s=i(94),a=i(134),l=i(0),c=l.getLogger("Chart.Model.ExchangeSession"),h=[s.MONDAY,s.TUESDAY,s.WEDNESDAY,s.THURSDAY,s.FRIDAY],u=[s.SUNDAY,s.MONDAY,s.TUESDAY,s.WEDNESDAY,s.THURSDAY,s.FRIDAY,s.SATURDAY],d=function(){function e(e,t,i){this._dayOfWeek=e,this._start=t,this._length=i}return e.prototype.start=function(){return this._start},e.prototype.alignedStart=function(){return this._start<0?this._start+s.minutesPerDay:this._start},e.prototype.isOvernight=function(){return this._start<0},e.prototype.dayOfWeek=function(){return this._dayOfWeek},e.prototype.length=function(){return this._length},e.prototype.weight=function(){return this._dayOfWeek*s.minutesPerDay+this._start},e.prototype.compareTo=function(e){var t=this.weight(),i=t+this._length,o=e.weight();return t<=o&&o<i?0:t>o?1:-1},e}(),t.SessionEntry=d,p=function(){function e(e){void 0===e&&(e="0000-0000");var t=this;this._entries=[],this._firstDayOfWeek=s.MONDAY,this._weekEndsCount=null,"24x7"===e.toLowerCase()?u.forEach(function(e){t.addSessionEntry(e,0,0)}):this._parseSpec(e),this._entries.sort(o)}return e.prototype.entries=function(){return this._entries},e.prototype.firstDayOfWeek=function(){return this._firstDayOfWeek},e.prototype.addSessionEntry=function(e,t,i){i<=t&&0!==t&&(t-=s.minutesPerDay);var o=i===t?s.minutesPerDay:i-t;this._entries.push(new d(e,t,o))},e.prototype.isWeekEnd=function(e){var t=a.lowerbound(this._entries,new d(e,0,0),function(e,t){return e.dayOfWeek()<t.dayOfWeek()})
;return t>this._entries.length-1||this._entries[t].dayOfWeek()!==e},e.prototype.weekEndsCount=function(){if(null===this._weekEndsCount){var e={};this._entries.forEach(function(t){e[t.dayOfWeek()]=1}),this._weekEndsCount=7-Object.keys(e).reduce(function(t,i){return t+(e[+i]||0)},0)}return this._weekEndsCount},e.prototype.hasWeekEnds=function(){return this.weekEndsCount()>0},e.prototype.indexOfSessionEntry=function(e,t){var i=a.lowerbound(this._entries,new d(e,t,0),function(e,t){return e.compareTo(t)<0});return i>this._entries.length-1?0:i},e.prototype.findSessionEntry=function(e,t){return this._entries[this.indexOfSessionEntry(e,t)]},e.prototype.correctTradingDay=function(e,t){var i=s.get_day_of_week(e),o=60*s.get_hours(e)+s.get_minutes(e),n=this.findSessionEntry(i,o),r=n.dayOfWeek(),a=(r-i+7)%7;return 0!==a?s.add_days_considering_dst(t,e,a):e},e.prototype.alignToSessionStart=function(e,t){var i=s.get_day_of_week(e),o=s.get_minutes_from_midnight(e),n=this.findSessionEntry(i,o),a=n.alignedStart(),l=n.dayOfWeek(),c=n.isOvernight(),h=(l-i+7)%7-(c?1:0);return 0!==h&&s.add_date(e,h),s.set_hms(e,a/60|0,a%60,0,0),r(n.length(),e,t)},e.prototype._parseSpec=function(e){var t=this,i={},o=!1;e=this._parseFirstDayOfWeek(e),e.split("|").forEach(function(e){var t,r,s=e.split(":");if(1!==s.length&&2!==s.length)return void c.logError("Bad session section: "+e);if(t=1===s.length){if(o)return void c.logError("Duplicated default section: "+e);o=!0}r=t?h:n(s[1]),r.forEach(function(e){t&&i[e]||(i[e]=s[0])})}),u.forEach(function(o){var n=i[o];void 0!==n&&n.split(",").forEach(function(i){var n,r,a=i.split("-");2!==a.length&&(c.logError("Bad sessions spec: "+e),a=["0000","0000"]),n=a[0],r=a[1],t.addSessionEntry(o,s.get_minutes_from_hhmm(n),s.get_minutes_from_hhmm(r))})})},e.prototype._parseFirstDayOfWeek=function(e){var t,i,o,n=e.split(";");return n.length>2?(c.logError("Only one `first day` specification expected @ session "+e),e):1===n.length?e:(t=n[0].indexOf("-")>=0,i=t?NaN:parseInt(n[0]),o=1,isNaN(i)&&(o=0,i=parseInt(n[1])),i<s.SUNDAY||i>s.SATURDAY?(c.logError("Unexpected day index @ session: "+e+"; day index "+i),e):(this._firstDayOfWeek=i,n[o]))},e}(),t.ExchangeSession=p},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 12" width="14" height="12"><g fill="none" fill-rule="evenodd" stroke="#9DB2BD"><path d="M1 0l12 12M13 0L1 12"/></g></svg>'},function(e,t,i){"use strict";function o(e,t){this._source=t,this._properties=e,this._points=[new l(-1,-1)],this._invalidated=!0,this._lineRenderer=new h}function n(){this._data=null}function r(e){this._source=e,this._points=[],this._bandBgRenderer=new n}function s(e,t,i){this._source=e,this._points=[],a(t.type===u.FilledArea.TYPE_HLINES,"Wrong filledArea type: "+t.type),this._initBandIndexes(t.objAId,t.objBId),this._fillStyleProps=i,this._bandBgRenderer=new n}var a=i(9).assert,l=i(8).Point,c=i(36).clamp,h=i(156).HorizontalLineRenderer,u=i(39),d=i(33);o.prototype.update=function(){this._invalidated=!0},o.prototype.updateImpl=function(){
var e,t=this._source.priceScale();if(!t||t.isEmpty())return void(this._points[0]=new l(-1,-1));e=this._properties.value.value(),isNumber(e)?this._points[0]=new l(-1,t.priceToCoordinate(e)):this._points[0]=new l(-1,NaN)},o.prototype.renderer=function(){this._invalidated&&(this.updateImpl(),this._invalidated=!1);var e={};return e.width=this._source.model().timeScale().width(),e.height=this._source.priceScale().height(),e.points=this._points,e.color=this._properties.color.value(),e.linewidth=this._properties.linewidth.value(),e.linestyle=this._properties.linestyle.value(),this._lineRenderer.setData(e),this._lineRenderer},n.prototype.setData=function(e){this._data=e},n.prototype.draw=function(e){var t,i,o;null!==this._data&&0!==this._data.points.length&&(t=e.canvas.width,e.fillStyle=d.generateColor(this._data.backcolor,this._data.transparency),i=Math.min(this._data.points[0],this._data.points[1]),o=Math.max(this._data.points[0],this._data.points[1]),e.fillRect(0,i,t,o-i))},n.prototype.hitTest=function(e){return null},r.prototype.update=function(){var e,t,i,o;this._points=[],e=this._source.properties().bandsBackground,e.fillBackground.value()&&(t=this._source.properties().bands[0],i=this._source.properties().bands[1],(o=this._source.priceScale())&&!o.isEmpty()&&(this._points.push(o.priceToCoordinate(t.value.value())),this._points.push(o.priceToCoordinate(i.value.value()))))},r.prototype.renderer=function(){var e={};return e.points=this._points,e.backcolor=this._source.properties().bandsBackground.backgroundColor.value(),e.transparency=this._source.properties().bandsBackground.transparency.value(),this._bandBgRenderer.setData(e),this._bandBgRenderer},s.prototype._initBandIndexes=function(e,t){var i,o;for(this._bandAKey=null,this._bandBKey=null,i=0;i<this._source.metaInfo().bands.length;++i)o=this._source.metaInfo().bands[i],null!==this._bandAKey||o.id!==e?null!==this._bandBKey||o.id!==t||(this._bandBKey=i):this._bandAKey=i},s.prototype.update=function(){var e,t,i;this._points=[],this._fillStyleProps.visible.value()&&(e=this._source.properties().bands[this._bandAKey],t=this._source.properties().bands[this._bandBKey],(i=this._source.priceScale())&&!i.isEmpty()&&(this._points.push(i.priceToCoordinate(e.value.value())),this._points.push(i.priceToCoordinate(t.value.value()))))},s.prototype.renderer=function(){var e,t=this._fillStyleProps.transparency.value();return t=c(t,0,100),e={},e.points=this._points,e.backcolor=d.generateColor(this._fillStyleProps.color.value(),t),e.transparency=this._fillStyleProps.transparency.value(),this._bandBgRenderer.setData(e),this._bandBgRenderer},t.BandPaneView=o,t.BandBackgroundPaneView=r,t.HlineFillPaneView=s},function(e,t,i){"use strict";var o,n,r;Object.defineProperty(t,"__esModule",{value:!0}),o=i(6),n=i(33),r=function(){function e(e){this.setData(e)}return e.prototype.setData=function(e){this._data=o.__assign({},e)},e.prototype.draw=function(e,t){var i,o,r,s,a,l,c,h,u,d,p,f,_,m,g,v,y,b,S,w;this._data.visible&&(i=t.fontSize,e.font=t.font,o=t.tickLength,r=t.borderSize,s=t.paddingTop,
a=t.paddingBottom,l=t.paddingInner,c=t.paddingOuter,h=Math.ceil(t.widthCache.measureText(e,this._data.text)),u=t.baselineOffset,d=t.fontSize+s+a,p=r+h+l+c+o,f=this._data.coordinate,this._data.fixedCoordinate&&(f=this._data.fixedCoordinate),_=f-Math.floor(i/2)-s-.5,m=_+d,g=t.isLeft?t.width-r-.5:.5,v=g,e.fillStyle=n.resetTransparency(this._data.background),e.lineWidth=1,this._data.text&&(t.isLeft?(v=g-p,y=g-o,b=v+c):(v=g+p,y=g+o,b=g+r+o+l),e.beginPath(),e.moveTo(g,_),e.lineTo(v,_),e.lineTo(v,m),e.lineTo(g,m),e.fill(),e.beginPath(),e.strokeStyle=this._data.color,e.moveTo(g,f),e.lineTo(y,f),e.stroke(),e.textAlign="left",e.fillStyle=this._data.color,e.fillText(this._data.text,b,m-a-u)),this._data.secondLine&&(S=Math.ceil(t.widthCache.measureText(e,this._data.secondLine)),w=S+l+c,e.fillStyle=n.resetTransparency(this._data.background),this._data.text&&(_+=d+1,m+=d+1),t.isLeft?(v=Math.min(v,t.width-o),g=v+w,b=v+c):(g=Math.max(v-w,r),v=g+w,b=g+l),e.beginPath(),e.moveTo(g,_),e.lineTo(v,_),e.lineTo(v,m),e.lineTo(g,m),e.fill(),e.textAlign="left",e.fillStyle=this._data.color,e.fillText(this._data.secondLine,b,m-a-u)))},e.prototype.height=function(e,t){var i=e.fontSize+e.paddingTop+e.paddingBottom;return this._data.secondLine&&t?2*i+1:i},e}(),t.PriceAxisViewRenderer=r},function(e,t,i){"use strict";function o(e){this.items=e.items,this.barSpacing=e.barSpacing,this.histogramBase=e.histogramBase,this.lineColor=e.lineColor,this.lineWidth=e.lineWidth}var n=i(8).Point,r=i(51).distanceToSegment,s=i(42).selectionTolerance,a=i(11);o.prototype.draw=function(e){var t,i,o,n,r;for(e.translate(.5,.5),e.fillStyle=this.lineColor,t=this.lineWidth,i=0;i<this.items.length;++i)o=this.items[i],n=o.x,r=o.y,o.style&&(e.fillStyle=o.style.color,t=o.style.width),e.fillRect(Math.round(n-.5*t),r,t,this.histogramBase-r)},o.prototype.hitTest=function(e){var t,i,o,l,c,h=s(this.lineWidth);for(c=0;c<this.items.length;++c)if(t=this.items[c],i=t.x,o=t.y,l=r(new n(i,o),new n(i,this.histogramBase),new n(e.x,e.y)),l.distance<=h)return new a(a.REGULAR);return null},t.PaneRendererHistogram=TradingView.PaneRendererHistogram=o},function(e,t,i){"use strict";function o(e){this.items=e.items,this.barSpacing=e.barSpacing,this.histogramBase=e.histogramBase,this.lineColor=e.lineColor,this.lineWidth=e.lineWidth}var n=i(11);o.prototype.draw=function(e){var t,i,o,n,r,s,a,l,c,h,u,d,p;if(0!==this.items.length){for(t=this.barSpacing,i=this.lineColor,o=this.histogramBase,e.translate(.5,.5),n={},r=this.items,s=0;s<r.length;++s)a=r[s],l=0===s?null:r[s-1],c=a.style?a.style.color:i,h=n[c]||[],h.push({item:a,prev:l}),n[c]=h;for(c in n){for(h=n[c],e.fillStyle=c,e.strokeStyle=c,e.lineWidth=1,e.beginPath(),s=0;s<h.length;s++)a=h[s].item,u=Math.ceil(a.x-.5*t),d=Math.ceil(u+t),p=a.y,e.rect(u,p,d-u,o-p);for(e.fill(),e.beginPath(),s=0;s<h.length;s++)a=h[s].item,u=Math.ceil(a.x-.5*t),d=Math.ceil(u+t),p=a.y,l=h[s].prev,e.moveTo(d-.5,o),e.lineTo(d-.5,p+.5),e.lineTo(u+.5,p+.5),l&&l.y>p&&e.lineTo(u+.5,l.y);e.stroke()}}},o.prototype.hitTest=function(e){
var t,i,o,r=.5*this.barSpacing+this.lineWidth,s=e.x-r,a=e.x+r,l=this.items;for(t=l.length;t--;)if((i=l[t].x)>=s&&i<=a&&(o=l[t].y,e.y>=Math.min(o,this.histogramBase)&&e.y<=Math.max(o,this.histogramBase)))return new n(n.REGULAR);return null},t.PaneRendererColumns=TradingView.PaneRendererColumns=o},function(e,t,i){"use strict";function o(e){this.items=e.items,this.barSpacing=e.barSpacing,this.lineColor=e.lineColor,this.lineWidth=e.lineWidth,this.lineStyle=e.lineStyle}var n=i(8).Point,r=i(51).distanceToSegment,s=i(42).selectionTolerance,a=i(11);o.prototype.draw=function(e){var t,i,o,n,r,s,a,l,c=!1;for(o=0;o<this.items.length;++o)n=this.items[o],r=n.x,s=n.y,TradingView.isNaN(r)||TradingView.isNaN(s)||(null!=n.style?(a=n.style.color,t=n.style.width):(a=this.lineColor,t=this.lineWidth),a!==i&&(i=a,c&&e.fill(),e.beginPath(),e.fillStyle=a),l=3*t,e.rect(r-l/2,s-t/2,l,t),e.rect(r-t/2,s-l/2,t,l),c=!0);c&&e.fill()},o.prototype.hitTest=function(e){var t,i,o,l,c,h,u=s(this.lineWidth);for(h=1;h<this.items.length;++h)if(t=this.items[h-1],i=this.items[h],o=t.x,l=i.x,c=r(new n(o,t.y),new n(l,i.y),new n(e.x,e.y)),c.distance<=u)return new a(a.REGULAR);return null},t.PaneRendererCross=TradingView.PaneRendererCross=o},function(e,t,i){"use strict";function o(e){this.items=e.items,this.barSpacing=e.barSpacing,this.lineColor=e.lineColor||e.color,this.radius=e.lineWidth||e.height/2,this.vertOffset=e.vertOffset||0}var n=i(8).Point,r=i(42).selectionTolerance,s=i(11);o.prototype.draw=function(e){var t,i,o,n,r,s,a,l=2*Math.PI,c=!1;for(o=0;o<this.items.length;++o)n=this.items[o],r=n.x,s=n.y+this.vertOffset,TradingView.isNaN(r)||TradingView.isNaN(s)||(null!=n.style?(a=n.style.color,t=n.style.width):(a=this.lineColor,t=this.radius),a!==i&&(i=a,c&&e.fill(),e.beginPath(),e.fillStyle=a),e.moveTo(r+t,s),e.arc(r,s,t,0,l,!1),c=!0);c&&e.fill()},o.prototype.hitTest=function(e){var t,i,o,a=2*this.radius,l=this.vertOffset,c=r(a);for(t=0;t<this.items.length;++t)if((i=this.items[t])&&(o=new n(i.x,i.y+l),o.subtract(e).length()+this.radius<=c))return new s(s.REGULAR);return null},t.PaneRendererCircles=TradingView.PaneRendererCircles=o},function(e,t,i){"use strict";function o(e){this._items=e.items,this._y=e.y,this._h=e.h,this._w=e.w}o.prototype.draw=function(e){},o.prototype.drawBackground=function(e){var t,i,o;for(e.save(),e.translate(-.5,-.5),t=0;t<this._items.length;++t)i=this._items[t],null!=i.color&&(e.fillStyle=i.color,o=t===this._items.length-1?this._w:this._items[t+1].x-i.x,e.fillRect(i.x,this._y,o,this._h));e.restore()},o.prototype.hitTest=function(e){return null},t.PaneRendererBackground=TradingView.PaneRendererBackground=o},function(e,t,i){"use strict";var o,n,r,s,a,l,c;Object.defineProperty(t,"__esModule",{value:!0}),o=i(11),n=i(8),r=i(69),s=i(134),a=i(51),l=i(42),c=function(){function e(){this._data=null}return e.prototype.setData=function(e){this._data=e},e.prototype.draw=function(e){var t,i,o,n,s,a,l,c,h,u;if(null!==this._data&&0!==this._data.items.length){for(t=this._data,i=t.lineWidth,o=t.lineStyle,n=t.lineColor,s=t.items,e.save(),
e.lineCap="square",e.strokeStyle=n,e.lineWidth=i,i%2==0&&e.translate(-.5,-.5),void 0!==o&&r.setLineStyle(e,o),e.beginPath(),e.moveTo(s[0].x,s[0].y),a=s.length,l=0;l<a;l++)c=s[l],e.lineTo(c.x,c.y),(h=s[l+1])&&(u=Math.round((c.x+h.x)/2),e.lineTo(u,c.y),e.lineTo(u,h.y));e.stroke(),e.restore()}},e.prototype.hitTest=function(e){var t,i,r,c,h,u,d,p,f,_,m,g,v;if(null===this._data||0===this._data.items.length)return null;for(t=this._data,i=t.items,r=t.lineWidth,c=l.selectionTolerance(r),h=s.lowerbound(i,e,function(e,t){return e.x<=t.x}),u=Math.max(0,h-1),d=Math.min(i.length-1,h+1),p=u;p<d;p++)if(f=i[p],(_=i[p+1])&&(m=Math.round((f.x+_.x)/2),g=new n.Point(m,f.y),v=new n.Point(m,_.y),Math.min(a.distanceToSegment(f,g,e).distance,a.distanceToSegment(g,v,e).distance,a.distanceToSegment(v,_,e).distance)<=c))return new o(o.REGULAR);return null},e}(),t.PaneRendererStepLine=c},function(e,t,i){"use strict";function o(e,t){var i=function i(o){var n=i.cache,r=""+(t?t.apply(this,arguments):o);return n.hasOwnProperty(r)||(n[r]=e.apply(this,arguments)),n[r]};return i.cache={},i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o,e.exports=t.default},function(e,t,i){"use strict";function o(e){s.call(this,e),this.width=this._calculateWidth(e.barSpacing),this._isUp=!1}function n(e){o.call(this,e),this._isUp=!0}function r(e){o.call(this,e),this._isUp=!1}var s=i(68).PaneRendererAbstractShape;inherit(o,s),o.prototype._calculateWidth=function(e){return e=e||this.barSpacing,Math.round(e/4)},o.prototype.drawShape=function(e){var t,i,o,n,r,s,a,l,c=!1,h=this.width,u=Math.abs(this.height),d=h<4,p=Math.max(parseInt(h/2),1),f=Math.round(this.width/2),_=Math.round(this.width),m=this._isUp?-1:1;for(i=0,o=this.items.length;i<o;i++)n=this.items[i],r=n.x,s=n.y+this._vertOffset+m*Math.round(u/2),n.style&&null!=n.style.color?(a=n.style.color,l=n.style.borderColor):(a=this._color,l=this._borderColor),a!==t&&(t=a,c&&(e.fill(),e.stroke()),e.beginPath(),e.fillStyle=a,e.strokeStyle=l),e.translate(r,s),d?(e.moveTo(0,0),e.lineTo(-f,-f*m),e.moveTo(0,0),e.lineTo(f,-f*m),e.moveTo(0,0),e.lineTo(0,-u*m),e.moveTo(-f,-u*m),e.lineTo(f,-u*m),e.lineWidth=p):(e.moveTo(0,0),u<_?(e.lineTo(h,-u*m),e.lineTo(-h,-u*m)):(e.lineTo(h,-_*m),e.lineTo(f,-_*m),e.lineTo(f,-u*m),e.lineTo(-f,-u*m),e.lineTo(-f,-_*m),e.lineTo(-h,-_*m)),e.lineTo(0,0)),e.translate(-r,-s),c=!0;c&&(e.fill(),e.stroke())},inherit(n,o),inherit(r,o),t.PaneRendererArrowBase=TradingView.PaneRendererArrowBase=o,t.PaneRendererArrowUp=TradingView.PaneRendererArrowUp=n,t.PaneRendererArrowDown=TradingView.PaneRendererArrowDown=r},function(e,t,i){"use strict";function o(e){n.call(this,e)}var n=i(68).PaneRendererAbstractShape;inherit(o,n),o.prototype.drawShape=function(e){var t,i,o,n,r,s,a,l,c=Math.max(this.width,this.height)/2,h=this._vertOffset,u=2*Math.PI,d=!1;for(i=0,o=this.items.length;i<o;i++)n=this.items[i],n.style&&null!=n.style.color?(r=n.style.color,s=n.style.borderColor):(r=this._color,s=this._borderColor),r!==t&&(t=r,d&&(e.fill(),e.stroke()),e.beginPath(),e.fillStyle=r,e.strokeStyle=s),a=n.x,l=n.y+h,
e.moveTo(a+c,l),e.arc(a,l,c,0,u,!1),d=!0;d&&(e.fill(),e.stroke())},t.PaneRendererCircleShape=TradingView.PaneRendererCircleShape=o},function(e,t,i){"use strict";function o(e){n.call(this,e)}var n=i(68).PaneRendererAbstractShape;inherit(o,n),o.prototype.drawShape=function(e){var t,i,o,n,r,s,a,l,c,h,u;for(e.lineWidth=2,t=this.width,i=this.height,o=this._vertOffset,r=!1,s=0,a=this.items.length;s<a;s++)l=this.items[s],c=l.style&&null!=l.style.color?l.style.color:this._color,c!==n&&(n=c,r&&e.stroke(),e.beginPath(),e.strokeStyle=c),h=l.x-t/2,u=l.y-i/2+o,e.moveTo(h+t/2,u),e.lineTo(h+t/2,u+i),e.moveTo(h,u+i/2),e.lineTo(h+t,u+i/2),r=!0;r&&e.stroke()},t.PaneRendererCrossShape=TradingView.PaneRendererCrossShape=o},function(e,t,i){"use strict";function o(e){n.call(this,e)}var n=i(68).PaneRendererAbstractShape;inherit(o,n),o.prototype.drawShape=function(e){var t,i,o,n,r,s,a,l,c=!1,h=Math.round(this.height/2);for(i=0,o=this.items.length;i<o;i++)n=this.items[i],n.style&&null!=n.style.color?(r=n.style.color,s=n.style.borderColor):(r=this._color,s=this._borderColor),r!==t&&(t=r,c&&(e.fill(),e.stroke()),e.beginPath(),e.fillStyle=r,e.strokeStyle=s),a=n.x,l=n.y+this._vertOffset,e.moveTo(a,l-h),e.lineTo(a+h,l),e.lineTo(a,l+h),e.lineTo(a-h,l),e.lineTo(a,l-h),c=!0;c&&(e.fill(),e.stroke())},t.PaneRendererDiamond=TradingView.PaneRendererDiamond=o},function(e,t,i){"use strict";function o(e){n.call(this,e)}var n=i(68).PaneRendererAbstractShape;inherit(o,n),o.prototype.drawShape=function(e){var t,i,o,n,r,s,a,l,c=this.width,h=this.height,u=h/2,d=this._vertOffset,p=3,f=(c-p)/3,_=!1;for(i=0,o=this.items.length;i<o;i++)n=this.items[i],n.style&&null!=n.style.color?(r=n.style.color,s=n.style.borderColor):(r=this._color,s=this._borderColor),r!==t&&(t=r,_&&(e.fill(),e.stroke()),e.beginPath(),e.fillStyle=r,e.strokeStyle=s),a=n.x-c/2,l=n.y-u+d,e.moveTo(a,l),e.lineTo(a+p,l),e.bezierCurveTo(a+f,l-f,a+2*f,l+f,a+c,l),e.lineTo(a+c,l+u),e.bezierCurveTo(a+c-f,l+u+f,a+c-2*f,l+u-f,a+p,l+u),e.lineTo(a+p,l+h),e.lineTo(a,l+h),e.lineTo(a,l),_=!0;_&&(e.fill(),e.stroke())},t.PaneRendererFlagShape=TradingView.PaneRendererFlagShape=o},function(e,t,i){"use strict";function o(e,t){l.call(this,e),this._isUp=t,this._stepX=Math.round(this.height/2*.65)+.5,this._stepY=Math.round(this.height/2)+.5,this._textCache?(this._padding=this._stepX/2,this._shapeWidth=this._textImageWidth+2*this._stepX,this._shapeHeight=this._textImageHeight+2*this._padding+this._stepY,0===this._vertOffset?this._isUp?this._textVertOffset=this._stepY+this._padding+this._textImageHeight:this._textVertOffset=-this._stepY-this._padding:this._textVertOffset=this._vertOffset>0?this._stepY+this._padding:-this._stepY-this._padding):(this._padding=0,this._shapeWidth=2*this._stepX,this._shapeHeight=2.5*this._stepY)}function n(e){o.call(this,e,!0)}function r(e){o.call(this,e,!1)}var s=i(8).Point,a=i(11),l=i(68).PaneRendererAbstractShape;inherit(o,l),o.prototype.drawShape=function(e){var t,i,o,n,r,s,a,l,c=!1,h=this._isUp?1:-1,u=Math.round(this._shapeWidth/2)-.5,d=Math.round(this._shapeHeight)-.5,p=0
;for(0!==this._vertOffset&&this._vertOffset<0===this._isUp&&(p=-h*Math.round(d+this._stepY)),i=0,o=this.items.length;i<o;i++)n=this.items[i],r=n.x+.5,s=n.y+this._vertOffset+p+.5,n.style&&null!=n.style.color?(a=n.style.color,l=n.style.borderColor):(a=this._color,l=this._borderColor),a!==t&&(t=a,c&&(e.fill(),e.stroke()),e.beginPath(),e.fillStyle=a,e.strokeStyle=l),e.translate(r,s),e.moveTo(0,0),e.lineTo(this._stepX,this._stepY*h),e.lineTo(u,this._stepY*h),e.lineTo(u,d*h),e.lineTo(-u,d*h),e.lineTo(-u,this._stepY*h),e.lineTo(-this._stepX,this._stepY*h),e.lineTo(0,0),e.translate(-r,-s),c=!0;c&&(e.fill(),e.stroke())},o.prototype.hitTest=function(e,t){var i,o,n,r,l,c,h,u,d,p,f,_,m,g,v=this._stepY/2,y=this._vertOffset,b=this._isUp?1:-1;for(o=0;o<this.items.length;++o)if(n=this.items[o]){if(r=b*v,0!==this._vertOffset&&this._vertOffset<0===this._isUp&&(r=-b*(this._shapeHeight+v)),i=new s(n.x,n.y+y+r),i.subtract(e).length()<=v)return new a(a.REGULAR);if(l=this._shapeWidth/2,r=0,0!==this._vertOffset&&this._vertOffset<0===this._isUp&&(r=-b*(this._shapeHeight+this._stepY)),c=n.y+y+r,h=this._isUp?this._stepY:-this._shapeHeight,u=this._isUp?this._shapeHeight:-this._stepY,d=e.x,p=e.y,f=n.x-l,_=c+h,m=n.x+l,g=c+u,d>f&&d<m&&p>_&&p<g)return new a(a.REGULAR)}return null},inherit(n,o),inherit(r,o),t.PaneRendererLabelBase=TradingView.PaneRendererLabelBase=o,t.PaneRendererLabelUp=TradingView.PaneRendererLabelUp=n,t.PaneRendererLabelDown=TradingView.PaneRendererLabelDown=r},function(e,t,i){"use strict";function o(e){n.call(this,e)}var n=i(68).PaneRendererAbstractShape;inherit(o,n),o.prototype.drawShape=function(e){var t,i,o,n,r,s,a,l,c=!1,h=Math.round(this.height/2);for(i=0,o=this.items.length;i<o;i++)n=this.items[i],n.style&&null!=n.style.color?(r=n.style.color,s=n.style.borderColor):(r=this._color,s=this._borderColor),r!==t&&(t=r,c&&(e.fill(),e.stroke()),e.beginPath(),e.fillStyle=r,e.strokeStyle=s),a=n.x-h,l=n.y+this._vertOffset-h,e.rect(a,l,this.height,this.height),c=!0;c&&(e.fill(),e.stroke())},t.PaneRendererSquare=TradingView.PaneRendererSquare=o},function(e,t,i){"use strict";function o(e){n.call(this,e)}var n=i(68).PaneRendererAbstractShape;inherit(o,n),o.prototype.drawShape=function(e){var t,i,o,n,r,s,a,l,c,h,u;for(e.lineWidth=2,t=this.width,i=this.height,o=this._vertOffset,r=!1,s=0,a=this.items.length;s<a;s++)l=this.items[s],c=l.style&&null!=l.style.color?l.style.color:this._color,c!==n&&(n=c,r&&e.stroke(),e.beginPath(),e.strokeStyle=c),h=l.x-t/2,u=l.y-i/2+o,e.moveTo(h,u),e.lineTo(h+t,u+i),e.moveTo(h,u+i),e.lineTo(h+t,u),r=!0;r&&e.stroke()},t.PaneRendererXCross=TradingView.PaneRendererXCross=o},function(e,t,i){"use strict";function o(){this._data=null}function n(e){this._source=e,this._points1=[],this._points2=[],this._timePoints=[],this._getBarSpacing=e.model().timeScale().barSpacing.bind(e.model().timeScale()),this._invalidated=!0,this._areaRenderer=new o}function r(e){n.call(this,e)}function s(e,t,i){var o,r;if(n.call(this,e),this._isHlineFill=t.type===h.FilledArea.TYPE_HLINES,
a(this._isHlineFill||t.type===h.FilledArea.TYPE_PLOTS,"Wrong filledArea type: "+t.type),this._isHlineFill&&this._initBandIndexes(t.objAId,t.objBId),this._fillMetaInfo=t,this._fillStyleProps=i,o=e._metaInfo,t.palette)for(r in o.plots)if(o.plots[r].palette===t.palette){this._colorPlotOffset=parseInt(r),this._colorsMap=o.palettes[t.palette].valToIndex,this._colorValues=e.properties().palettes[t.palette].colors;break}}var a=i(9).assert,l=i(11),c=i(42).coordinateIsValid,h=i(39),u=i(33),d=i(36).clamp,p=i(24).PlotRowSearchMode;o.prototype.setData=function(e){this._data=e},o.prototype.hitTest=function(e){var t,i,o;if(null===this._data)return null;for(o=1;o<this._data.points1.length;++o)if(t=this._data.points1[o],i=this._data.points2[o],this._data.timePoints[o]===e.x&&(e.y>=t&&e.y<=i||e.y<=t&&e.y>=i))return new l(l.REGULAR);return null},o.prototype.draw=function(e){var t,i,o,n,r,s,a,l,h,d,p,f,_,m,g,v,y,b;if(null!==this._data&&((t=this._data.isHlineFill)||0!==this._data.points1.length&&0!==this._data.points2.length)){for(i=this._data.timePoints,o=this._data.points1,n=this._data.points2,r=this._data.colors,s=isNumber(this._data.transparency)?this._data.transparency:50,s=Math.min(s,100),s=Math.max(s,0),a={},l=[],d=0;d<this._data.timePoints.length;d++)p={point1:t?this._data.level1:o[d],point2:t?this._data.level2:n[d],timePoint:i[d]},f=c(p.point1)&&c(p.point2),f&&(h=r&&r[d]?r[d]:this._data.backcolor,l.push(p)),(d===this._data.timePoints.length-1||r&&h!==r[d+1]||!f)&&(l.length>0&&(_=a[h]||[],_.push(l),a[h]=_),l=f?[p]:[]);for(m in a){for(g=a[m],e.beginPath(),v=0;v<g.length;v++){for(y=g[v],e.moveTo(y[0].timePoint,y[0].point1),b=1;b<y.length;b++)e.lineTo(y[b].timePoint,y[b].point1);for(b=y.length-1;b>=0;b--)e.lineTo(y[b].timePoint,y[b].point2)}e.closePath(),e.fillStyle=u.generateColor(m,s),e.fill()}}},n.prototype.update=function(){this._invalidated=!0},n.prototype._updateImpl=function(){var e,t,i,o,n,r,s,a,l,c,h,u,d,f,_,m,g,v,y,b,S,w,T,P,C,x,E,L;if(this._points1=[],this._points2=[],this._colorsMap&&(this._colors=[]),this._timePoints=[],this._visible()&&(e=this._source.priceScale(),t=this._source._model.timeScale(),e&&!e.isEmpty()&&!this._source._model.timeScale().isEmpty()&&!(this._source._series.bars().isEmpty()||(this._isHlineFill&&(i=this._source.properties().bands[this._bandAKey],o=this._source.properties().bands[this._bandBKey],this._level1=e.priceToCoordinate(i.value.value()),this._level2=e.priceToCoordinate(o.value.value())),n=this._source.data().plotNames().indexOf(this._plotAId())+1,r=this._source.data().plotNames().indexOf(this._plotBId())+1,null===(s=this._source._model.timeScale().visibleBars())||(a=this._source._series.nearestIndex(s.firstBar(),p.NearestRight),l=this._source._series.nearestIndex(s.lastBar(),p.NearestLeft),(a=this._correctStartBarIndex(a))>l))))){if(c=this._source.data().range(a,l),c.size()>0)for(h=this._source.firstValue(),u=c.firstIndex(),d=c.lastIndex(),f=this._source.offset(this._plotAId()),_=this._source.offset(this._plotBId()),m=Math.max(f,_),g=Math.min(f,_),v=u+m,y=this._source.data().firstIndex(),
u>y&&(v=u<m+y?m+y:u),b=d+g,S=this._source.data().lastIndex(),d>S+g&&d<S&&(b=S+g),g<0&&d<=S+g&&(b=d),w=v<u?u+m:v>d?u+m:v,T=v;T<=b;++T)this._timePoints.push(t.indexToCoordinate(w++)),this._colors&&null!=(P=this._source.data().valueAt(T-g)[this._colorPlotOffset+1])&&this._colors.push(this._colorValues[this._colorsMap[P]].color.value()),this._isHlineFill||(C=this._source.data().valueAt(T-f),x=this._source.data().valueAt(T-_),E=C[n],L=x[r],e.isPercentage()&&(E=100*(E-h)/h,L=100*(L-h)/h),this._points1.push(E),this._points2.push(L));e.pricesArrayToCoordinates(this._points1),e.pricesArrayToCoordinates(this._points2)}},n.prototype.renderer=function(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);var e={};return e.points1=this._points1,e.points2=this._points2,e.timePoints=this._timePoints,e.getBarSpacing=this._getBarSpacing,e.backcolor=this._color(),e.transparency=this._transparency(),e.isHlineFill=this._isHlineFill,e.level1=this._level1,e.level2=this._level2,this._colors&&(e.colors=this._colors),this._areaRenderer.setData(e),this._areaRenderer},n.prototype._plotAId=function(){a(!1,"Pure virtual call!")},n.prototype._plotBId=function(){a(!1,"Pure virtual call!")},n.prototype._color=function(){a(!1,"Pure virtual call!")},n.prototype._transparency=function(){a(!1,"Pure virtual call!")},n.prototype._visible=function(){a(!1,"Pure virtual call!")},n.prototype._correctStartBarIndex=function(e){return e},inherit(r,n),r.prototype._plotAId=function(){return this._source.properties().area[0].name.value()},r.prototype._plotBId=function(){return this._source.properties().area[1].name.value()},r.prototype._color=function(){return this._source.properties().areaBackground.backgroundColor.value()},r.prototype._transparency=function(){var e=this._source.properties().areaBackground.transparency.value();return d(e,0,100)},r.prototype._visible=function(){return this._source.properties().areaBackground.fillBackground.value()},inherit(s,n),s.prototype._initBandIndexes=function(e,t){var i,o;for(this._bandAKey=null,this._bandBKey=null,i=0;i<this._source.metaInfo().bands.length;++i)o=this._source.metaInfo().bands[i],null!==this._bandAKey||o.id!==e?null!==this._bandBKey||o.id!==t||(this._bandBKey=i):this._bandAKey=i},s.prototype._plotAId=function(){return this._fillMetaInfo.objAId},s.prototype._plotBId=function(){return this._fillMetaInfo.objBId},s.prototype._color=function(){return this._fillStyleProps.color.value()},s.prototype._transparency=function(){return this._fillStyleProps.transparency.value()},s.prototype._visible=function(){return this._fillStyleProps.visible.value()},s.prototype._correctStartBarIndex=function(e){var t=this._source.getMinFirstBarIndexForPlot(this._fillMetaInfo.id);return Math.max(t,e)},t.PlotFillPaneView=s,t.AreaBackgroundPaneView=r},function(e,t,i){"use strict";function o(e,t){var i,o,a,l,c;return t||(t={}),"function"==typeof t&&(t={cmp:t}),i=t.space||"","number"==typeof i&&(i=Array(i+1).join(" ")),o="boolean"==typeof t.cycles&&t.cycles,a=t.replacer||function(e,t){return t},l=t.cmp&&function(e){
return function(t){return function(i,o){var n={key:i,value:t[i]},r={key:o,value:t[o]};return e(n,r)}}}(t.cmp),c=[],function e(t,h,u,d){var p,f,_,m,g,v,y=i?"\n"+Array(d+1).join(i):"",b=i?": ":":";if(u&&u.toJSON&&"function"==typeof u.toJSON&&(u=u.toJSON()),void 0!==(u=a.call(t,h,u))){if("object"!==(void 0===u?"undefined":n(u))||null===u)return JSON.stringify(u);if(r(u)){for(p=[],f=0;f<u.length;f++)_=e(u,f,u[f],d+1)||JSON.stringify(null),p.push(y+i+_);return"["+p.join(",")+y+"]"}if(-1!==c.indexOf(u)){if(o)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}for(c.push(u),m=s(u).sort(l&&l(u)),p=[],f=0;f<m.length;f++)h=m[f],(g=e(u,h,u[h],d+1))&&(v=JSON.stringify(h)+b+g,p.push(y+i+v));return c.splice(c.indexOf(u),1),"{"+p.join(",")+y+"}"}}({"":e},"",e,0)}var n,r,s;Object.defineProperty(t,"__esModule",{value:!0}),n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.sortedStringify=o,r=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},s=Object.keys||function(e){var t,i=Object.prototype.hasOwnProperty||function(){return!0},o=[];for(t in e)i.call(e,t)&&o.push(t);return o}},function(e,t){},function(e,t,i){"use strict";function o(e,t){this.array=[];for(var i in e)e[i].key=i,this.array.push(e[i]);this.rearrange(t)}o.prototype.rearrange=function(e){if("function"!=typeof e)throw Error("sort param is not a function");return this.array.sort(e)},o.byValue=function(e){return function(e,t){return e-t}},o.byField=function(e){return function(t,i){return t[e]>i[e]?1:t[e]<i[e]?-1:t[e]===i[e]?0:void 0}},o.byOrder=function(e){return function(t,i){return e.indexOf(t.key)-e.indexOf(i.key)}},e.exports=o},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M20.449 8.505l2.103 9.112.974-.225-2.103-9.112zM13.943 14.011l7.631 4.856.537-.844-7.631-4.856zM14.379 11.716l4.812-3.609-.6-.8-4.812 3.609zM10.96 13.828l-4.721 6.744.819.573 4.721-6.744zM6.331 20.67l2.31-13.088-.985-.174-2.31 13.088zM9.041 7.454l1.995 3.492.868-.496-1.995-3.492z"/><path d="M8.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM5.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM12.5 14c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM20.5 8c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM23.5 21c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M21.487 5.248l-12.019 1.502.124.992 12.019-1.502zM6.619 9.355l-2.217 11.083.981.196 2.217-11.083zM6.534 22.75l12.071-1.509-.124-.992-12.071 1.509zM21.387 18.612l2.21-11.048-.981-.196-2.21 11.048zM8.507 9.214l10.255 10.255.707-.707-10.255-10.255z"/><path d="M7.5 9c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM4.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM23.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM20.5 22c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M8.013 23.846c4.923 2.247 9.792 2.626 13.448-.517l-.652-.758c-3.277 2.817-7.775 2.467-12.381.365l-.415.91z"/><path d="M24.035 20.056c2.262-4.176 1.814-8.73-.13-12.98l-.909.416c1.826 3.993 2.244 8.24.16 12.088l.879.476z"/><path d="M8.221 21.401l13.249-14.077-.728-.685-13.249 14.077z"/><path d="M6.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM22.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM22.5 23c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path fill-rule="nonzero" d="M7.354 21.354l14-14-.707-.707-14 14z"/><path d="M21 7l-8 3 5 5z"/><path fill-rule="nonzero" d="M22.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM5.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill-rule="nonzero" d="M17 12v-6h-6v6h-4.865l7.865 9.438 7.865-9.438h-4.865zm-7-7h8v6h6l-10 12-10-12h6v-6z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill-rule="nonzero" d="M16 17h6v-6h-6v-4.865l-9.438 7.865 9.438 7.865v-4.865zm7 1h-6v6l-12-10 12-10v6h6v8z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill-rule="nonzero" d="M12 11h-6v6h6v4.865l9.438-7.865-9.438-7.865v4.865zm-7 7v-8h6v-6l12 10-12 10v-6h-6z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill-rule="nonzero" d="M11 16v6h6v-6h4.865l-7.865-9.438-7.865 9.438h4.865zm7 7h-8v-6h-6l10-12 10 12h-6v6z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill-rule="nonzero" d="M9.586 18h7.414c3.309 0 6-2.689 6-6 0-3.309-2.687-6-5.994-6h-5.012c-3.306 0-5.994 2.686-5.994 5.994v9.592l3.586-3.586zm-4.586 6v-12.006c0-3.863 3.137-6.994 6.994-6.994h5.012c3.863 0 6.994 3.142 6.994 7 0 3.866-3.142 7-7 7h-7l-5 5z"/></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M6 6v6.5h1v-6.5zM7 22v-2.5h-1v2.5zM11 11v2.5h1v-2.5zM12 24v-7.5h-1v7.5zM16 5v5.5h1v-5.5zM17 21v-2.5h-1v2.5zM21 7v4.5h1v-4.5zM22 19v-2.5h-1v2.5z"/><path d="M6 13v6h1v-6h-1zm-1-1h3v8h-3v-8z"/><path d="M11 16h1v-2h-1v2zm-1-3h3v4h-3v-4z"/><path d="M16 18h1v-7h-1v7zm-1-8h3v9h-3v-9z"/><path d="M21 16h1v-4h-1v4zm-1-5h3v6h-3v-6z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M17.605 19.584c.295-2.304-.584-3.586-3.274-5.959-2.462-2.172-3.191-3.241-2.94-5.111l-.991-.133c-.312 2.322.567 3.61 3.269 5.994 2.452 2.163 3.181 3.227 2.943 5.083l.992.127z"/><path d="M6.053 24.868c3.772 1.644 7.307 1.643 9.712-1.249l-.769-.64c-2.045 2.458-5.133 2.459-8.544.972l-.4.917z"/><path d="M12.949 5.087c2.044-2.525 5.157-2.54 8.602-1.036l.4-.917c-3.81-1.663-7.376-1.646-9.779 1.324l.777.629z"/><path d="M4.5 25c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM16.5 23c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM11.5 8c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM23.5 6c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M6.256 20.652c.548-3.024 1.607-5.962 3.329-8.312l-.807-.591c-1.825 2.493-2.933 5.565-3.506 8.725l.984.178z"/><path d="M12.243 9.657c2.365-1.764 5.345-2.846 8.416-3.402l-.178-.984c-3.21.581-6.326 1.712-8.836 3.584l.598.802z"/><path d="M10.5 12c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM22.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM5.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M1.789 23l.859-.854.221-.228c.18-.19.38-.409.597-.655.619-.704 1.238-1.478 1.815-2.298.982-1.396 1.738-2.776 2.177-4.081 1.234-3.667 5.957-4.716 8.923-1.263 3.251 3.785-.037 9.38-5.379 9.38h-9.211zm9.211-1c4.544 0 7.272-4.642 4.621-7.728-2.45-2.853-6.225-2.015-7.216.931-.474 1.408-1.273 2.869-2.307 4.337-.599.852-1.241 1.653-1.882 2.383l-.068.078h6.853z"/><path d="M18.182 6.002l-1.419 1.286c-1.031.935-1.075 2.501-.096 3.48l1.877 1.877c.976.976 2.553.954 3.513-.045l5.65-5.874-.721-.693-5.65 5.874c-.574.596-1.507.609-2.086.031l-1.877-1.877c-.574-.574-.548-1.48.061-2.032l1.419-1.286-.672-.741z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill-rule="nonzero" d="M6 21.586l3.586-3.586h13.407c.004 0 .007-11.993.007-11.993 0-.007-17-.007-17-.007v15.586zm-1 2.414v-18.005c0-.549.451-.995.995-.995h17.01c.549 0 .995.45.995 1.007v11.986c0 .556-.45 1.007-1.007 1.007h-12.993l-5 5z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M23 4v21h1v-21z"/><path d="M17 4v21h1v-21z"/><path d="M5 16.5v8.5h1v-8.5z"/><path d="M5 4v8.5h1v-8.5z"/><path d="M5.5 16c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/><path d="M11 16.5v8.5h1v-8.5z"/><path d="M11 4v8.5h1v-8.5z"/><path d="M11.5 16c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path d="M15.246 21.895l1.121.355c-.172.625-.458 1.089-.857 1.393-.4.303-.907.455-1.521.455-.76 0-1.385-.26-1.875-.779-.49-.52-.734-1.23-.734-2.131 0-.953.246-1.693.738-2.221.492-.527 1.139-.791 1.941-.791.701 0 1.27.207 1.707.621.26.245.456.596.586 1.055l-1.145.273c-.068-.297-.209-.531-.424-.703-.215-.172-.476-.258-.783-.258-.424 0-.769.152-1.033.457-.264.305-.396.798-.396 1.48 0 .724.13 1.24.391 1.547.26.307.599.461 1.016.461.307 0 .572-.098.793-.293.221-.195.38-.503.477-.922z"/><path fill-rule="nonzero" d="M20.449 8.505l2.103 9.112.974-.225-2.103-9.112zM13.943 14.011l7.631 4.856.537-.844-7.631-4.856zM14.379 11.716l4.812-3.609-.6-.8-4.812 3.609zM10.96 13.828l-4.721 6.744.819.573 4.721-6.744zM6.331 20.67l2.31-13.088-.985-.174-2.31 13.088zM9.041 7.454l1.995 3.492.868-.496-1.995-3.492z"/><path fill-rule="nonzero" d="M8.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM5.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM12.5 14c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM20.5 8c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM23.5 21c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path fill-rule="nonzero" d="M6.5 23v1h17.5v-17.5h-1v16.5z"/><path fill-rule="nonzero" d="M21.5 5v-1h-17.5v17.5h1v-16.5z"/><path fill-rule="nonzero" d="M4.5 25c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM23.5 6c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/><path fill-rule="nonzero" d="M13 9v13h1v-13z" id="Line"/><path d="M13.5 6l2.5 3h-5z"/><path fill-rule="nonzero" d="M19 14h-13v1h13z"/><path d="M19 17v-5l3 2.5z"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path fill-rule="nonzero" d="M20 14h-14v1h14z" id="Line"/><path d="M20 17v-5l3 2.5z"/><path fill-rule="nonzero" d="M24 8.5v16.5h1v-16.5zM4 4v16.5h1v-16.5z"/><path fill-rule="nonzero" d="M4.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM24.5 8c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M20.534 4.664l-13.318 4.701.333.943 13.318-4.701zM20.802 22.371l-13.285-4.689-.333.943 13.285 4.689z"/><path d="M5.5 12c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM22.5 6c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM5.5 19c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM22.5 25c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path fill-rule="nonzero" d="M5.238 18.469l4.17-4.17-.707-.707-4.17 4.17zM16.47 17.763l-.707.707-4.265-4.265.707-.707zM22.747 13.546l-4.192 4.192.707.707 4.192-4.192z"/><path fill-rule="nonzero" d="M10.5 14c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM17.5 21c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM24.5 14c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM3.5 21c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/><path d="M13.746 7h-1.258l-.5-1.301h-2.289l-.473 1.301h-1.227l2.23-5.727h1.223l2.293 5.727zm-2.129-2.266l-.789-2.125-.773 2.125h1.563z"/><path d="M26.246 4.895l1.121.355c-.172.625-.458 1.089-.857 1.393-.4.303-.907.455-1.521.455-.76 0-1.385-.26-1.875-.779-.49-.52-.734-1.23-.734-2.131 0-.953.246-1.693.738-2.221.492-.527 1.139-.791 1.941-.791.701 0 1.27.207 1.707.621.26.245.456.596.586 1.055l-1.145.273c-.068-.297-.209-.531-.424-.703-.215-.172-.476-.258-.783-.258-.424 0-.769.152-1.033.457-.264.305-.396.798-.396 1.48 0 .724.13 1.24.391 1.547.26.307.599.461 1.016.461.307 0 .572-.098.793-.293.221-.195.38-.503.477-.922z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path fill-rule="nonzero" d="M5.238 18.469l4.17-4.17-.707-.707-4.17 4.17zM16.47 17.763l-.707.707-4.265-4.265.707-.707zM22.747 13.546l-4.192 4.192.707.707 4.192-4.192z"/><path fill-rule="nonzero" d="M10.5 14c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM17.5 21c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM24.5 14c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM3.5 21c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/><path d="M8.395 7l-1.367-5.727h1.184l.863 3.934 1.047-3.934h1.375l1.004 4 .879-4h1.164l-1.391 5.727h-1.227l-1.141-4.281-1.137 4.281z"/><path d="M24.086 7v-2.41l-2.098-3.316h1.355l1.348 2.266 1.32-2.266h1.332l-2.105 3.324v2.402z"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path fill-rule="nonzero" d="M5.238 18.469l4.17-4.17-.707-.707-4.17 4.17zM16.47 17.763l-.707.707-4.265-4.265.707-.707zM22.747 13.546l-4.192 4.192.707.707 4.192-4.192z"/><path fill-rule="nonzero" d="M10.5 14c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM17.5 21c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM24.5 14c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM3.5 21c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/><path d="M11.148 7h-1.098v-4.137c-.401.375-.874.652-1.418.832v-.996c.286-.094.598-.271.934-.533.336-.262.566-.567.691-.916h.891v5.75z"/><path d="M23.355 5.527l1.094-.113c.031.247.124.443.277.588.154.145.331.217.531.217.229 0 .423-.093.582-.279.159-.186.238-.467.238-.842 0-.352-.079-.615-.236-.791-.158-.176-.363-.264-.615-.264-.315 0-.598.139-.848.418l-.891-.129.563-2.98h2.902v1.027h-2.07l-.172.973c.245-.122.495-.184.75-.184.487 0 .9.177 1.238.531.339.354.508.814.508 1.379 0 .471-.137.892-.41 1.262-.372.505-.889.758-1.551.758-.529 0-.96-.142-1.293-.426-.333-.284-.533-.665-.598-1.145z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path fill-rule="nonzero" d="M5.238 18.469l4.17-4.17-.707-.707-4.17 4.17zM16.47 17.763l-.707.707-4.265-4.265.707-.707zM22.747 13.546l-4.192 4.192.707.707 4.192-4.192z"/><path fill-rule="nonzero" d="M10.5 14c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM17.5 21c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM24.5 14c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM3.5 21c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/><path d="M13.746 7h-1.258l-.5-1.301h-2.289l-.473 1.301h-1.227l2.23-5.727h1.223l2.293 5.727zm-2.129-2.266l-.789-2.125-.773 2.125h1.563z"/><path d="M22.582 7v-5.727h4.246v.969h-3.09v1.27h2.875v.965h-2.875v1.559h3.199v.965z"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path fill-rule="nonzero" d="M5.238 18.469l4.17-4.17-.707-.707-4.17 4.17zM16.47 17.763l-.707.707-4.265-4.265.707-.707zM22.747 13.546l-4.192 4.192.707.707 4.192-4.192z"/><path fill-rule="nonzero" d="M10.5 14c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM17.5 21c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM24.5 14c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM3.5 21c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/><path d="M8.395 7l-1.367-5.727h1.184l.863 3.934 1.047-3.934h1.375l1.004 4 .879-4h1.164l-1.391 5.727h-1.227l-1.141-4.281-1.137 4.281z"/><path d="M22.086 7v-1.043l3.008-3.715h-2.668v-.969h4.191v.898l-3.137 3.863h3.258v.965z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M12.435 6.136c-4.411.589-7.983 3.039-9.085 6.27l.946.323c.967-2.836 4.209-5.059 8.271-5.602l-.132-.991zM3.347 16.584c1.101 3.243 4.689 5.701 9.117 6.283l.13-.991c-4.079-.537-7.335-2.767-8.301-5.613l-.947.321zM16.554 22.865c4.381-.582 7.94-3 9.071-6.2l-.943-.333c-.994 2.811-4.224 5.006-8.26 5.542l.132.991zM25.646 12.394c-1.107-3.225-4.675-5.668-9.078-6.257l-.133.991c4.056.542 7.293 2.76 8.265 5.591l.946-.325z"/><path d="M14.5 8c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM14.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM3.5 16c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM25.5 16c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M4.354 25.354l5-5-.707-.707-5 5z"/><path d="M12.354 17.354l5-5-.707-.707-5 5z"/><path d="M20.354 9.354l5-5-.707-.707-5 5z"/><path d="M18.5 12c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM10.5 20c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M7.463 12.026l13.537-7.167-.468-.884-13.537 7.167z"/><path d="M22.708 16.824l-17.884 9.468.468.884 17.884-9.468z"/><path d="M22.708 9.824l-15.839 8.386.468.884 15.839-8.386z"/><path d="M5.5 14c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM5.5 21c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM22.5 5c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M23.868 7.825c2.791 3.916 2.918 9.33-.065 13.435-3.733 5.138-10.925 6.277-16.063 2.544l.721-.714c4.682 3.294 11.157 2.229 14.534-2.418 2.641-3.635 2.657-8.502.153-12.133l.721-.714z"/><path d="M8.477 5.899c3.584-2.509 8.298-2.514 11.865-.127l.718-.721c-3.845-2.669-9.099-2.813-13.157.028-5.203 3.643-6.467 10.814-2.824 16.016l.718-.721c-3.201-4.737-2.022-11.185 2.68-14.476z"/><path d="M14.5 22c4.142 0 7.5-3.358 7.5-7.5 0-4.142-3.358-7.5-7.5-7.5-4.142 0-7.5 3.358-7.5 7.5 0 4.142 3.358 7.5 7.5 7.5zm0 1c-4.694 0-8.5-3.806-8.5-8.5s3.806-8.5 8.5-8.5 8.5 3.806 8.5 8.5-3.806 8.5-8.5 8.5z"/><path d="M14.5 19c2.485 0 4.5-2.015 4.5-4.5s-2.015-4.5-4.5-4.5-4.5 2.015-4.5 4.5 2.015 4.5 4.5 4.5zm0 1c-3.038 0-5.5-2.462-5.5-5.5s2.462-5.5 5.5-5.5 5.5 2.462 5.5 5.5-2.462 5.5-5.5 5.5z"/><path d="M22.5 8c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM6.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M3 5h22v-1h-22z"/><path d="M3 17h22v-1h-22z"/><path d="M3 11h19.5v-1h-19.5z"/><path d="M5.5 23h19.5v-1h-19.5z"/><path d="M3.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM24.5 12c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M8 9.5c0 3.038 2.462 5.5 5.5 5.5s5.5-2.462 5.5-5.5v-.5h-1v.5c0 2.485-2.015 4.5-4.5 4.5s-4.5-2.015-4.5-4.5v-.5h-1v.5z"/><path d="M0 9.5c0 7.456 6.044 13.5 13.5 13.5s13.5-6.044 13.5-13.5v-.5h-1v.5c0 6.904-5.596 12.5-12.5 12.5s-12.5-5.596-12.5-12.5v-.5h-1v.5z"/><path d="M4 9.5c0 4.259 2.828 7.964 6.86 9.128l.48.139.277-.961-.48-.139c-3.607-1.041-6.137-4.356-6.137-8.167v-.5h-1v.5z"/><path d="M16.141 18.628c4.032-1.165 6.859-4.869 6.859-9.128v-.5h-1v.5c0 3.811-2.53 7.125-6.136 8.167l-.48.139.278.961.48-.139z"/><path d="M13.5 20c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM13.5 11c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M4 2v19.5h1v-19.5zM15.5 10h-11v1h11zM17 12.5v11h1v-11zM6.29 22.417l10.162-10.162-.707-.707-10.162 10.162z" id="Line"/><path d="M19.264 9.443l6.589-6.589-.707-.707-6.589 6.589z"/><path d="M6.577 23.381l19.071-5.903-.296-.955-19.071 5.903z"/><path d="M5.573 21.724l5.905-19.076-.955-.296-5.905 19.076z"/><path d="M6.5 24h19.5v-1h-19.5z"/><path d="M4.5 25c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM17.5 12c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M4.395 10.18c3.432-4.412 10.065-4.998 13.675-.973l.745-.668c-4.044-4.509-11.409-3.858-15.209 1.027l.789.614z"/><path d="M19.991 12.494c.877 2.718.231 5.487-1.897 7.543-2.646 2.556-6.752 2.83-9.188.477-1.992-1.924-2.027-5.38-.059-7.281 1.582-1.528 3.78-1.587 5.305-.115 1.024.99 1.386 2.424.876 3.491l.902.431c.709-1.482.232-3.37-1.084-4.641-1.921-1.855-4.734-1.78-6.695.115-2.378 2.297-2.337 6.405.059 8.719 2.846 2.749 7.563 2.435 10.577-.477 2.407-2.325 3.147-5.493 2.154-8.569l-.952.307z"/><path d="M21.01 9.697l3.197-3.197-.707-.707-3.197 3.197z"/><path d="M14.989 15.719l3.674-3.674-.707-.707-3.674 3.674z"/><path d="M13.5 18c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM19.5 12c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M17 4v21h1v-21z"/><path d="M23 4v21h1v-21z"/><path d="M5 16.5v8.5h1v-8.5z"/><path d="M5 4v8.5h1v-8.5z"/><path d="M11 16.5v8.5h1v-8.5z"/><path d="M11 4v8.5h1v-8.5z"/><path d="M5.5 16c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM11.5 16c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M21.5 23h-14v1h14zM5 7.5v14h1v-14z"/><path d="M12 23c0-3.314-2.686-6-6-6h-.5v1h.5c2.761 0 5 2.239 5 5v.5h1v-.5z"/><path d="M20 23c0-7.732-6.268-14-14-14h-.5v1h.5c7.18 0 13 5.82 13 13v.5h1v-.5z"/><path d="M16 23c0-5.523-4.477-10-10-10h-.5v1h.5c4.971 0 9 4.029 9 9v.5h1v-.5z"/><path d="M5.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM23.5 25c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM5.5 25c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill-rule="nonzero" d="M7.382 16h14.483l-4.167-5 4.167-5h-15.865v12.764l1.382-2.764zm-2.382 7v-18h19l-5 6 5 6h-16l-3 6z"/></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M7.5 23h13v-1h-13z"/><path d="M7.55 13.088l13.29-6.254-.426-.905-13.29 6.254z"/><path d="M5.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM5.5 15c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM22.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM22.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M7.354 21.354l7.097-7.097-.707-.707-7.097 7.097z"/><path d="M17.249 11.458l7.105-7.105-.707-.707-7.105 7.105z"/><path d="M7.542 22.683l17.296-2.739-.156-.988-17.296 2.739z" id="Line"/><path d="M7.538 22.062l15.708-7.661-.438-.899-15.708 7.661z"/><path d="M6.802 20.97l7.695-15.777-.899-.438-7.695 15.777z"/><path d="M6.285 20.741l2.76-17.423-.988-.156-2.76 17.423z"/><path d="M5.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM15.5 14c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M3.5 11h21v-1h-21z"/><path d="M3.5 18h21v-1h-21z"/><path d="M10 3.5v21h1v-21z"/><path d="M17 3.5v21h1v-21z"/><path d="M22.5 4v-1h-19.5v19.5h1v-18.5z"/><path d="M24 24h-18.507v1h19.507v-19.5h-1z"/><path d="M3.5 26c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM24.5 5c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path fill-rule="nonzero" d="M4.529 18.21l3.157-1.292-.379-.926-3.157 1.292z"/><path fill-rule="nonzero" d="M9.734 16.081l2.97-1.215-.379-.926-2.97 1.215z"/><path fill-rule="nonzero" d="M14.725 14.039l2.957-1.21-.379-.926-2.957 1.21z"/><path fill-rule="nonzero" d="M19.708 12.001l3.114-1.274-.379-.926-3.114 1.274z"/><path d="M8 18h1v3h-1z" id="Path"/><path d="M8 9h1v5h-1z"/><path fill-rule="nonzero" d="M8 18h1v-4h-1v4zm-1-5h3v6h-3v-6z" id="Rectangle-44"/><path d="M18 16h1v3h-1z" id="Path"/><path d="M18 3h1v6h-1z"/><path fill-rule="nonzero" d="M18 16h1v-7h-1v7zm-1-8h3v9h-3v-9z" id="Rectangle-44"/><path d="M13 6h1v5h-1z"/><path d="M13 15h1v5h-1z"/><path fill-rule="nonzero" d="M13 15h1v-4h-1v4zm-1-5h3v6h-3v-6z"/><path fill-rule="nonzero" d="M2.5 20c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM24.5 11c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M4.436 21.667l2.083-9.027-.974-.225-2.083 9.027zM10.046 16.474l-2.231-4.463-.894.447 2.231 4.463zM13.461 6.318l-2.88 10.079.962.275 2.88-10.079zM18.434 16.451l-2.921-10.224-.962.275 2.921 10.224zM21.147 12.089l-2.203 4.405.894.447 2.203-4.405zM25.524 21.383l-2.09-9.055-.974.225 2.09 9.055z"/><path d="M1 19h7.5v-1h-7.5z"/><path d="M12.5 19h4v-1h-4z"/><path d="M20.5 19h6.5v-1h-6.5z"/><path d="M6.5 12c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM3.5 25c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM10.5 20c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM18.5 20c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM22.5 12c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM25.5 25c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM14.5 6c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M4 15h8.5v-1h-8.5zM16.5 15h8.5v-1h-8.5z"/><path d="M14.5 16c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M8.5 15h16.5v-1h-16.5z"/><path d="M6.5 16c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M6.5 23h12v-1h-12z" id="Line"/><path d="M21.596 20.715l3.091-9.66-.952-.305-3.091 9.66z"/><path d="M8.413 22.664l1.95-6.094-.952-.305-1.95 6.094z"/><path d="M11.602 12.695l3.085-9.641-.952-.305-3.085 9.641z"/><path d="M11.783 16.167l6.817 5.454.625-.781-6.817-5.454z"/><path d="M15.976 18.652l3.711-11.598-.952-.305-3.711 11.598z"/><path d="M4.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM10.5 16c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM20.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path fill-rule="nonzero" d="M20 11c0-3.314-2.686-6-6-6s-6 2.686-6 6c0 2.913 2.872 8.112 6 11.551 3.128-3.438 6-8.638 6-11.551zm-6 13c-3-3-7-9.134-7-13 0-3.866 3.134-7 7-7s7 3.134 7 7-4 10-7 13z"/><ellipse cx="14" cy="11" rx="2" ry="2"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path fill-rule="nonzero" d="M16 11c0-3.314-2.686-6-6-6s-6 2.686-6 6c0 2.913 2.872 8.112 6 11.551 3.128-3.438 6-8.638 6-11.551zm-6 13c-3-3-7-9.134-7-13 0-3.866 3.134-7 7-7s7 3.134 7 7-4 10-7 13z"/><ellipse cx="10" cy="11" rx="2" ry="2"/><path fill-rule="nonzero" d="M25 20c0 2.485-2.015 4-4.5 4s-4.5-1.515-4.5-4h1c0 1.797 1.421 3 3.5 3 2.079 0 3.5-1.203 3.5-3h1zm-1 0h1c0 2.485-2.015 4-4.5 4s-4.5-1.515-4.5-4h1c0 1.797 1.421 3 3.5 3 2.079 0 3.5-1.203 3.5-3z"/><path fill-rule="nonzero" d="M18 19h5v-1h-5zM20 15.5v8h1v-8z"/><ellipse cx="20.5" cy="14.5" rx="1.5" ry="1.5"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M8.354 18.354l10-10-.707-.707-10 10zM12.354 25.354l5-5-.707-.707-5 5z"/><path d="M20.354 17.354l5-5-.707-.707-5 5z"/><path d="M19.5 8c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM6.5 21c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM18.5 20c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M20.349 20.654l4.489-.711-.156-.988-4.489.711z"/><path d="M7.254 22.728l9.627-1.525-.156-.988-9.627 1.525z"/><path d="M7.284 22.118l15.669-8.331-.469-.883-15.669 8.331z"/><path d="M6.732 21.248l8.364-15.731-.883-.469-8.364 15.731z"/><path d="M17.465 18.758l-8.188-8.188-.707.707 8.188 8.188z"/><path d="M6.273 20.818l1.499-9.467-.988-.156-1.499 9.467z"/><path d="M8.329 7.834l.715-4.516-.988-.156-.715 4.516z"/><path d="M7.354 21.354l17-17-.707-.707-17 17z"/><path d="M5.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM7.5 11c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM18.5 22c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M7.275 21.432l12.579-12.579-.707-.707-12.579 12.579z"/><path d="M6.69 13.397l7.913 7.913.707-.707-7.913-7.913zM7.149 10.558l7.058-7.058-.707-.707-7.058 7.058z"/><path d="M18.149 21.558l7.058-7.058-.707-.707-7.058 7.058z"/><path d="M5.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM5.5 13c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM16.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M16.5 6h4v-1h-4z" id="Line"/><path d="M16.5 15h4v-1h-4z"/><path d="M8.5 23h4v-1h-4z"/><path d="M8.298 11.591l5.097-4.46-.659-.753-5.097 4.46zM22 7.5v5h1v-5z"/><path d="M14 16.5v4h1v-4z"/><path d="M6 14.5v6h1v-6z"/><path d="M6.5 14c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM14.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM22.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM14.5 16c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM22.5 16c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM6.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM14.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path d="M19 11h5l-2.5 3z"/><circle cx="21.5" cy="16.5" r="1.5"/><path fill-rule="nonzero" d="M22 11v-6h-1v6z"/><path d="M14 18h1v3h-1z" id="Path"/><path d="M14 5h1v6h-1z"/><path d="M7 19h1v3h-1z"/><path d="M7 6h1v7h-1z"/><path fill-rule="nonzero" d="M7 13v6h1v-6h-1zm-1-1h3v8h-3v-8zM14 18h1v-7h-1v7zm-1-8h3v9h-3v-9z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M6.995 5c.008 0 .005 15.5.005 15.5h-1v-15.493c0-.556.451-1.007.995-1.007h17.01c.549 0 .995.45.995 1.007v11.986c0 .556-.45 1.007-1.007 1.007h-12.993l-3.104 3.104-.707-.707 3.397-3.397h13.407c.004 0 .007-11.993.007-11.993 0-.007-17.005-.007-17.005-.007z"/><path d="M6.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path fill-rule="nonzero" d="M4 5h16.5v-1h-16.5zM25 24h-16.5v1h16.5z" id="Line"/><path fill-rule="nonzero" d="M6.5 26c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM22.5 6c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/><path fill-rule="nonzero" d="M14 9v14h1v-14z"/><path d="M14.5 6l2.5 3h-5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M23.886 21.431c-.953-8.558-7.742-15.354-16.299-16.315l-.112.994c8.093.909 14.516 7.338 15.417 15.432l.994-.111z"/><path d="M5 7.5v14h1v-14zM21.5 23h-14v1h14z"/><path d="M5.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM23.5 25c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM5.5 25c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M8.354 20.354l5-5-.707-.707-5 5z"/><path d="M16.354 12.354l8-8-.707-.707-8 8z"/><path d="M14.5 15c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM6.5 23c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M7.5 6h13v-1h-13z" id="Line"/><path d="M7.5 23h13v-1h-13z"/><path d="M5 7.5v13h1v-13z"/><path d="M22 7.5v13h1v-13z"/><path d="M5.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM22.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM22.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM5.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M7.551 17.98l13.284-7.033-.468-.884-13.284 7.033z"/><path d="M6 11.801l16-8.471v4.17h1v-5.83l-18 9.529v5.301h1z"/><path d="M6 24.67v-4.17h-1v5.83l18-9.529v-5.301h-1v4.699z"/><path d="M5.5 20c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM22.5 11c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path fill-rule="nonzero" d="M6 6h19v-1h-19z" id="Line"/><path fill-rule="nonzero" d="M6 24h19v-1h-19z"/><path fill-rule="nonzero" d="M6 17h17v-1h-17z"/><path d="M14.5 7l2.5 3h-5z"/><path d="M14.5 22l2.5-3h-5z"/><path fill-rule="nonzero" d="M14 10v10h1v-10z"/><path fill-rule="nonzero" d="M4.5 18c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM4.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM4.5 25c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM24.5 18c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path fill-rule="nonzero" d="M6 6h19v-1h-19z" id="Line"/><path fill-rule="nonzero" d="M6 24h19v-1h-19z"/><path fill-rule="nonzero" d="M6 13h17v-1h-17z"/><path d="M14.5 7l2.5 3h-5z"/><path d="M14.5 22l2.5-3h-5z"/><path fill-rule="nonzero" d="M14 10v10h1v-10z"/><path fill-rule="nonzero" d="M4.5 14c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM4.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM4.5 25c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM24.5 14c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M14.743 3.55l-4.208 4.208.707.707 4.208-4.208zM7.71 10.583l-4.187 4.187.707.707 4.187-4.187zM3.536 18.244l6.171 6.171.707-.707-6.171-6.171zM13.232 24.475l4.22-4.22-.707-.707-4.22 4.22zM20.214 17.494l4.217-4.217-.707-.707-4.217 4.217zM24.423 9.716l-6.218-6.218-.707.707 6.218 6.218z"/><path d="M2.5 18c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM9.5 11c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM16.5 4c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM11.5 27c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM18.5 20c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM25.5 13c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M7.854 22.854l14-14-.707-.707-14 14z"/><path d="M8.336 13.043l8.621 8.621.707-.707-8.621-8.621zM9.149 10.558l7.058-7.058-.707-.707-7.058 7.058z" id="Line"/><path d="M20.149 21.558l7.058-7.058-.707-.707-7.058 7.058z"/><path d="M5.5 23h11v-1h-11z"/><path d="M7.5 13c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM18.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM3.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M10.275 20.432l11.579-11.579-.707-.707-11.579 11.579z"/><path d="M8.336 13.043l8.621 8.621.707-.707-8.621-8.621zM9.149 10.558l7.058-7.058-.707-.707-7.058 7.058z" id="Line"/><path d="M20.149 21.558l7.058-7.058-.707-.707-7.058 7.058z"/><path d="M6.5 23h10v-1h-10z"/><path d="M4.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM7.5 13c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM18.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M5.205 14.111l-.013-.172c-.054-.906.022-1.966.327-2.961.395-1.289 1.111-2.215 2.221-2.666l-.377-.926c-1.42.578-2.324 1.746-2.8 3.3-.346 1.128-.429 2.299-.369 3.313l.017.219.994-.106z"/><path d="M11.051 8.554c1.12.893 1.766 2.343 2.973 6.099 1.274 3.963 1.947 5.48 3.28 6.557l.629-.778c-1.112-.899-1.754-2.345-2.956-6.085-1.28-3.982-1.957-5.503-3.302-6.575l-.623.782z"/><path d="M21.722 21.558c1.439-.634 2.428-1.886 3.046-3.551.311-.836.509-1.726.618-2.616.066-.539.088-.967.088-1.227l-1 .002-.01.304c-.012.241-.035.51-.071.798-.101.818-.282 1.634-.563 2.39-.533 1.434-1.354 2.474-2.512 2.985l.403.915z"/><path d="M9.5 9c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM19.5 23c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M14 5.5v17h1v-17z" id="Line"/><path d="M9 8.5v-2.001c0-.272.229-.499.502-.499h9.995c.28 0 .502.221.502.499v2.001h1v-2.001c0-.832-.672-1.499-1.502-1.499h-9.995c-.824 0-1.502.673-1.502 1.499v2.001h1z"/><path d="M12 23h5v-1h-5z"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path fill-rule="nonzero" d="M25 19c0 2.485-2.015 4-4.5 4s-4.5-1.515-4.5-4h1c0 1.797 1.421 3 3.5 3 2.079 0 3.5-1.203 3.5-3h1zm-1 0h1c0 2.485-2.015 4-4.5 4s-4.5-1.515-4.5-4h1c0 1.797 1.421 3 3.5 3 2.079 0 3.5-1.203 3.5-3z"/><path fill-rule="nonzero" d="M18 18h5v-1h-5zM20 14.5v8h1v-8z" id="Line"/><ellipse cx="20.5" cy="13.5" rx="1.5" ry="1.5"/><path fill-rule="nonzero" d="M11 5.5v17h1v-17z" id="Line"/><path fill-rule="nonzero" d="M6 8.5v-2.001c0-.272.229-.499.502-.499h9.995c.28 0 .502.221.502.499v2.001h1v-2.001c0-.832-.672-1.499-1.502-1.499h-9.995c-.824 0-1.502.673-1.502 1.499v2.001h1z"/><path fill-rule="nonzero" d="M9 23h5v-1h-5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M.303 17.674l1.104.473.394-.919-1.104-.473z"/><path d="M5.133 19.744l3.335 1.429.394-.919-3.335-1.429z"/><path d="M12.134 22.744l3.352 1.436.394-.919-3.352-1.436z"/><path d="M19.203 25.774l1.6.686.394-.919-1.6-.686z"/><path d="M.3 4.673l1.13.484.394-.919-1.13-.484-.394.919zm.394-.919l1.13.484-.394.919-1.13-.484.394-.919z"/><path d="M5.141 6.747l3.325 1.425.394-.919-3.325-1.425z"/><path d="M12.133 9.744l3.353 1.437.394-.919-3.353-1.437z"/><path d="M19.221 12.782l5.838 2.502.394-.919-5.838-2.502z"/><path d="M3 7.473v8.969h1v-8.969zM8.93 9.871l-4.616 6.594.819.573 4.616-6.594zM11 19.5v-9h-1v9zM15.898 12.916l-4.616 6.594.819.573 4.616-6.594zM18 22.5v-9h-1v9zM24.313 5.212l-6.57 17.247.934.356 6.57-17.247z"/><path d="M3.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM3.5 20c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM10.5 23c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM17.5 13c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM25.5 5c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM17.5 26c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM10.5 10c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path fill-rule="nonzero" d="M27.186 9.411c-.691-.27-1.429-.411-2.186-.411-3.314 0-6 2.686-6 6h1c0-2.761 2.239-5 5-5 .632 0 1.246.117 1.821.342l.364-.931z"/><path fill-rule="nonzero" d="M9 15c0-3.314-2.686-6-6-6-.754 0-1.489.139-2.177.407l.363.932c.573-.223 1.185-.339 1.814-.339 2.761 0 5 2.239 5 5h1z"/><path d="M8 15h1v1h-1v-1zm11 0h1v1h-1v-1zm1 0h-1c0-2.761-2.239-5-5-5s-5 2.239-5 5h-1c0-3.314 2.686-6 6-6s6 2.686 6 6z"/><path fill-rule="nonzero" d="M8.5 19c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM19.5 19c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M15.5 22.5c0-2.697-1.073-5.225-2.947-7.089l-.705.709c1.687 1.679 2.652 3.952 2.652 6.38h1z"/><path d="M7.354 21.354l14-14-.707-.707-14 14z"/><path d="M7.5 23h16.5v-1h-16.5z"/><path d="M22.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM5.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M4 25h22v-1h-22z" id="Line"/><path d="M4 21h22v-1h-22z"/><path d="M6.5 17h19.5v-1h-19.5z"/><path d="M5 14.5v-3h-1v3zM6.617 9.275l10.158-3.628-.336-.942-10.158 3.628z"/><path d="M18.5 6c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM4.5 11c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM4.5 18c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M20 2v22h1v-22z"/><path d="M24 2v22h1v-22z"/><path d="M4.673 11.471l3.69 10.333.942-.336-3.69-10.333z"/><path d="M17 21.535v-19.535h-1v19.535z"/><path d="M11.5 24h3v-1h-3z"/><path d="M4.5 11c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM9.5 25c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM16.5 25c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M7.354 21.354l14-14-.707-.707-14 14z"/><path d="M22.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM5.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M8.5 23h11v-1h-11zM6 8.5v12h1v-12zM7.483 8.28l12.293 13.112.73-.684-12.293-13.112z"/><path d="M6.5 8c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM6.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM21.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M9.457 18.844l-5.371 2.4.408.913 5.371-2.4z"/><path d="M13.13 17.203l.408.913 13.688-6.116-6.736-3.01-.408.913 4.692 2.097z"/><path d="M11.077 5.88l5.34 2.386.408-.913-5.34-2.386z"/><path d="M7.401 4.237l.408-.913-5.809-2.595v19.771h1v-18.229z"/><path d="M3.708 20.772l5.51-14.169-.932-.362-5.51 14.169zM9.265 6.39l1.46 10.218.99-.141-1.46-10.218zM13.059 17.145l4.743-6.775-.819-.573-4.743 6.775z"/><path d="M9.5 6c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM11.5 20c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM18.5 10c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM2.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M15 12.5v-8.5h-1v8.5zM14 16.5v8.5h1v-8.5z"/><path d="M14.5 16c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path fill-rule="nonzero" d="M15.039 5.969l-.019-.019-2.828 2.828.707.707 2.474-2.474c1.367-1.367 3.582-1.367 4.949 0s1.367 3.582 0 4.949l-2.474 2.474.707.707 2.828-2.828-.019-.019c1.415-1.767 1.304-4.352-.334-5.99-1.638-1.638-4.224-1.749-5.99-.334zM5.97 15.038l-.019-.019 2.828-2.828.707.707-2.475 2.475c-1.367 1.367-1.367 3.582 0 4.949s3.582 1.367 4.949 0l2.474-2.474.707.707-2.828 2.828-.019-.019c-1.767 1.415-4.352 1.304-5.99-.334-1.638-1.638-1.749-4.224-.334-5.99z"/><path d="M10.485 16.141l5.656-5.656.707.707-5.656 5.656z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path fill-rule="nonzero" d="M14.039 6.969l-.019-.019-2.828 2.828.707.707 2.474-2.474c1.367-1.367 3.582-1.367 4.949 0s1.367 3.582 0 4.949l-2.474 2.474.707.707 2.828-2.828-.019-.019c1.415-1.767 1.304-4.352-.334-5.99-1.638-1.638-4.224-1.749-5.99-.334zM6.968 14.039l-.019-.019 2.828-2.828.707.707-2.475 2.475c-1.367 1.367-1.367 3.582 0 4.949s3.582 1.367 4.949 0l2.474-2.474.707.707-2.828 2.828-.019-.019c-1.767 1.415-4.352 1.304-5.99-.334-1.638-1.638-1.749-4.224-.334-5.99z"/><path d="M10.485 16.141l5.656-5.656.707.707-5.656 5.656z"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path d="M11.682 16.09l3.504 6.068 1.732-1-3.497-6.057 3.595-2.1L8 7.74v10.512l3.682-2.163zm-.362 1.372L7 20V6l12 7-4.216 2.462 3.5 6.062-3.464 2-3.5-6.062z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path d="M18 15h8v-1h-8z"/><path d="M14 18v8h1v-8zM14 3v8h1v-8zM3 15h8v-1h-8z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><circle cx="14" cy="14" r="3"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M23.002 23C23 23 23 18.003 23 18.003L15.998 18C16 18 16 22.997 16 22.997l7.002.003zM15 18.003A1 1 0 0 1 15.998 17h7.004c.551 0 .998.438.998 1.003v4.994A1 1 0 0 1 23.002 24h-7.004A.993.993 0 0 1 15 22.997v-4.994z"/><path d="M19 20h1v2h-1z"/><path fill-rule="nonzero" d="M22 14.5a2.5 2.5 0 0 0-5 0v3h1v-3a1.5 1.5 0 0 1 3 0v.5h1v-.5z"/><g fill-rule="nonzero"><path d="M3 14.707A1 1 0 0 1 3.293 14L14.439 2.854a1.5 1.5 0 0 1 2.122 0l2.585 2.585a1.5 1.5 0 0 1 0 2.122L8 18.707a1 1 0 0 1-.707.293H4a1 1 0 0 1-1-1v-3.293zm1 0V18h3.293L18.439 6.854a.5.5 0 0 0 0-.708l-2.585-2.585a.5.5 0 0 0-.708 0L4 14.707z"/><path d="M13.146 4.854l4 4 .708-.708-4-4zm-9 9l4 4 .708-.708-4-4z"/><path d="M15.146 6.146l-9 9 .708.708 9-9z"/></g></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M23.002 23C23 23 23 18.003 23 18.003L15.998 18C16 18 16 22.997 16 22.997l7.002.003zM15 18.003A1 1 0 0 1 15.998 17h7.004c.551 0 .998.438.998 1.003v4.994A1 1 0 0 1 23.002 24h-7.004A.993.993 0 0 1 15 22.997v-4.994z"/><path d="M19 20h1v2h-1z"/><path fill-rule="nonzero" d="M22 17.5v-2a2.5 2.5 0 0 0-5 0v2h1v-2a1.5 1.5 0 0 1 3 0v2h1z"/><g fill-rule="nonzero"><path d="M3 14.707A1 1 0 0 1 3.293 14L14.439 2.854a1.5 1.5 0 0 1 2.122 0l2.585 2.585a1.5 1.5 0 0 1 0 2.122L8 18.707a1 1 0 0 1-.707.293H4a1 1 0 0 1-1-1v-3.293zm1 0V18h3.293L18.439 6.854a.5.5 0 0 0 0-.708l-2.585-2.585a.5.5 0 0 0-.708 0L4 14.707z"/><path d="M13.146 4.854l4 4 .708-.708-4-4zm-9 9l4 4 .708-.708-4-4z"/><path d="M15.146 6.146l-9 9 .708.708 9-9z"/></g></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29 31" width="29" height="31"><g fill-rule="nonzero"><path d="M15.3 22l8.187-8.187c.394-.394.395-1.028.004-1.418l-4.243-4.243c-.394-.394-1.019-.395-1.407-.006l-11.325 11.325c-.383.383-.383 1.018.007 1.407l1.121 1.121h7.656zm-9.484-.414c-.781-.781-.779-2.049-.007-2.821l11.325-11.325c.777-.777 2.035-.78 2.821.006l4.243 4.243c.781.781.78 2.048-.004 2.832l-8.48 8.48h-8.484l-1.414-1.414z"/><path d="M13.011 22.999h7.999v-1h-7.999zM13.501 11.294l6.717 6.717.707-.707-6.717-6.717z"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M5.5 13A2.5 2.5 0 0 0 3 15.5 2.5 2.5 0 0 0 5.5 18 2.5 2.5 0 0 0 8 15.5 2.5 2.5 0 0 0 5.5 13zm9.5 0a2.5 2.5 0 0 0-2.5 2.5A2.5 2.5 0 0 0 15 18a2.5 2.5 0 0 0 2.5-2.5A2.5 2.5 0 0 0 15 13zm9.5 0a2.5 2.5 0 0 0-2.5 2.5 2.5 2.5 0 0 0 2.5 2.5 2.5 2.5 0 0 0 2.5-2.5 2.5 2.5 0 0 0-2.5-2.5z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill-rule="nonzero" d="M17.537 7.635l-.789.789c-.886-.275-1.812-.424-2.748-.424-3.841 0-7.521 2.503-8.962 6 .562 1.364 1.465 2.577 2.585 3.549l-.709.709c-1.265-1.112-2.274-2.506-2.881-4.077l-.07-.18.07-.18c1.535-3.975 5.645-6.82 9.966-6.82 1.213 0 2.409.224 3.537.635zm3.549 2.108c1.265 1.112 2.274 2.506 2.881 4.077l.07.18-.07.18c-1.535 3.975-5.646 6.82-9.966 6.82-1.213 0-2.409-.224-3.537-.635l.789-.789c.886.275 1.812.424 2.748.424 3.84 0 7.521-2.503 8.962-6-.562-1.364-1.465-2.577-2.585-3.549l.709-.709zm-6.049.392l-4.902 4.902c-.088-.33-.135-.677-.135-1.036 0-2.213 1.788-4.001 4.001-4.001.358 0 .705.047 1.036.135zm2.828 2.829c.088.331.135.679.135 1.038 0 2.213-1.786 3.999-3.999 3.999-.359 0-.707-.047-1.038-.135l4.901-4.901zm-12.365 10.243l-.707-.707 17.707-17.707.707.707-17.707 17.707z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path fill-rule="nonzero" d="M7 13.003v8.994c0 .557.445 1.003.994 1.003h12.012c.547 0 .994-.449.994-1.003v-8.994c0-.557-.445-1.003-.994-1.003h-12.012c-.547 0-.994.449-.994 1.003zm-1 0c0-1.106.895-2.003 1.994-2.003h12.012c1.101 0 1.994.894 1.994 2.003v8.994c0 1.106-.895 2.003-1.994 2.003h-12.012c-1.101 0-1.994-.894-1.994-2.003v-8.994z"/><path fill-rule="nonzero" d="M11 11v-4h-1v4z"/><path fill-rule="nonzero" d="M10 7c0-2.209 1.791-4 4-4s4 1.791 4 4h-1c0-1.657-1.343-3-3-3s-3 1.343-3 3h-1zm1 0h-1c0-2.209 1.791-4 4-4s4 1.791 4 4h-1c0-1.657-1.343-3-3-3s-3 1.343-3 3z"/><rect width="2" height="4" rx="1" x="13" y="17"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path fill-rule="nonzero" d="M7 13.003v8.994c0 .557.445 1.003.994 1.003h12.012c.547 0 .994-.449.994-1.003v-8.994c0-.557-.445-1.003-.994-1.003h-12.012c-.547 0-.994.449-.994 1.003zm-1 0c0-1.106.895-2.003 1.994-2.003h12.012c1.101 0 1.994.894 1.994 2.003v8.994c0 1.106-.895 2.003-1.994 2.003h-12.012c-1.101 0-1.994-.894-1.994-2.003v-8.994z"/><path fill-rule="nonzero" d="M11 11v-3h-1v3z"/><path fill-rule="nonzero" d="M18 11v-3h-1v3z"/><path fill-rule="nonzero" d="M10 8c0-2.209 1.791-4 4-4s4 1.791 4 4h-1c0-1.657-1.343-3-3-3s-3 1.343-3 3h-1zm1 0h-1c0-2.209 1.791-4 4-4s4 1.791 4 4h-1c0-1.657-1.343-3-3-3s-3 1.343-3 3z"/><rect width="2" height="4" rx="1" x="13" y="17"/></g></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M14 10a2 2 0 0 0-2 2v11H6V12c0-4.416 3.584-8 8-8s8 3.584 8 8v11h-6V12a2 2 0 0 0-2-2zm-3 2a3 3 0 0 1 6 0v10h4V12c0-3.864-3.136-7-7-7s-7 3.136-7 7v10h4V12z"/><path d="M6.5 18h5v1h-5zm10 0h5v1h-5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28"><path fill="none" stroke="currentColor" d="M3.207 19.793L19.793 3.207a1 1 0 0 1 1.414 0l3.586 3.586a1 1 0 0 1 0 1.414L8.207 24.793a1 1 0 0 1-1.414 0l-3.586-3.586a1 1 0 0 1 0-1.414zM5.5 17.5l2 2m1-5l3 3m0-6l2 2m1-5l3 3m0-6l2 2"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path fill-rule="nonzero" d="M8 21c0 1.1.825 2 1.833 2h7.333c1.008 0 1.833-.9 1.833-2v-12h-11v12zm-1 0v-13h13v13c0 1.634-1.252 3-2.833 3h-7.333c-1.581 0-2.833-1.366-2.833-3z"/><path d="M17 6l-1-1h-5l-1 1h-3v1h13v-1z"/><path fill-rule="nonzero" d="M10 11v9.062h1v-9.062z"/><path fill-rule="nonzero" d="M13 11v9.062h1v-9.062z"/><path fill-rule="nonzero" d="M16 11v9.062h1v-9.062z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path fill-rule="nonzero" d="M14 18.634l-.307-.239-7.37-5.73-2.137-1.665 9.814-7.633 9.816 7.634-.509.394-1.639 1.269-7.667 5.969zm7.054-6.759l1.131-.876-8.184-6.366-8.186 6.367 1.123.875 7.063 5.491 7.054-5.492z"/><path d="M7 14.5l-1 .57 8 6.43 8-6.5-1-.5-7 5.5z"/><path d="M7 17.5l-1 .57 8 6.43 8-6.5-1-.5-7 5.5z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path d="M17.646 18.354l4 4 .708-.708-4-4z"/><path d="M12.5 21a8.5 8.5 0 1 1 0-17 8.5 8.5 0 0 1 0 17zm0-1a7.5 7.5 0 1 0 0-15 7.5 7.5 0 0 0 0 15z"/><path d="M9 13h7v-1H9z"/><path d="M13 16V9h-1v7z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path d="M17.646 18.354l4 4 .708-.708-4-4z"/><path d="M12.5 21a8.5 8.5 0 1 1 0-17 8.5 8.5 0 0 1 0 17zm0-1a7.5 7.5 0 1 0 0-15 7.5 7.5 0 0 0 0 15z"/><path d="M9 13h7v-1H9z"/></svg>'},function(e,t,i){"use strict";function o(e){var t,i,n,r;if("object"!=typeof e||null==e||"number"==typeof e.nodeType)t=e;else if(Array.isArray(e))for(t=[],i=0,n=e.length;i<n;i++)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=o(e[i]));else{t={};for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=o(e[r]))}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.deepCopy=o},function(e,t,i){"use strict";var o,n;Object.defineProperty(t,"__esModule",{value:!0}),o=i(268),n=function(){function e(e){var t=this;this._alert=e,e.on("change:autoDeactivation",function(e,i){var o=t.getAvailableFrequencies();i&&-1!==o.indexOf("once")&&e.set("frequency","once")}),e.on("change:frequency",function(e,i){var o=t.getAvailableFrequencies();if(t._putFrequencyToExtra(),-1===o.indexOf(i))return e.set("frequency",o[0]),
void t._putFrequencyToExtra();"once"===i&&e.set("autoDeactivation",!0),"on_first_fire"!==i&&"on_bar_close"!==i&&!/^\d+$/.test(i)||-1===o.indexOf("once")||e.set("autoDeactivation",!1)})}return e.prototype.getAvailableFrequencies=function(){var e=this._alert.get("extra"),t=this._alert.isDrawing()&&"LineToolVertLine"===e.drawing().type,i=e&&e.alertSeries().style,n=e&&e.mainSeries().style,r=o.hasProjection(i)||o.hasProjection(n),s=this._alert.get("crossInterval"),a=[];return t?a.push("once"):(s||r||(a.push("once"),a.push("60"),a.push("on_bar_close")),r?a.push("on_bar_close"):a.push("on_first_fire")),a},e.prototype.switchFrequencies=function(){var e=this._alert,t=e.get("frequency"),i=this.getAvailableFrequencies();!1===e.get("autoDeactivation")&&(1===i.length?e.set("frequency",i[0]):("on_first_fire"===t&&-1!==i.indexOf("60")&&e.set("frequency","60"),"on_bar_close"===t&&-1!==i.indexOf("on_bar_close")&&e.set("frequency","on_bar_close")))},e.prototype._putFrequencyToExtra=function(){var e=this._alert.get("extra");e&&e.frequency(this._alert.get("frequency"))},e}(),t.AlertFrequency=n},function(e,t,i){"use strict";(function(t,o,n,r,s){function a(e){return e instanceof M}function l(e){return TradingView.isInherited(e.constructor,m)}function c(e,i,r,s,a,l,h,u,d,p){var f,_,m;for(this._version=c.version,this._readOnly=s,this._undoModel=u,this._properties=r,this._modelIntervals=[],this._isSnapshot=d,this.setStudiesMetaData(l,h),this.m_timeScale=new w(this),H.init(),f=this,this.m_panes=[],this.m_gridSource=new b,this.m_crossHairSource=new g(this,H.properties()),this.m_crossHairSource.selectBarMode().subscribe(function(e){if(e&&f.lineBeingCreated()){var t=H.tool.value();f.cancelCreatingLine(),H.tool.setValue(t)}}),this.m_width=0,this._tagsChanged=new t,this._lineCancelled=new t,this._magnet=new S(H.properties().magnet,this.m_timeScale,r.paneProperties.magnetSensivity),_=new W("chartproperties.mainSeriesProperties"),_.addExclusion("minTick"),_.addExclusion("priceAxisProperties.lockScale"),_.addExclusion("priceAxisProperties.percentage"),_.addExclusion("priceAxisProperties.log"),this.createPane(void 0,{rightAxisProperties:_.priceAxisProperties.state(["autoScale"])}),this.m_panes[0]._stretchFactor=2*v.DEFAULT_STRETCH_FACTOR,this.m_panes[0]._isMainPane=!0,this.m_selectedSource=null,this._selectedSourceChanged=new t,this._chartApi=e,this._invalidateHandler=i,this.m_hoveredSource=null,this._properties.listeners().subscribe(this,c.prototype.propertyChangeHandler),this._properties.timezone.listeners().subscribe(null,function(){f._chartApi&&f._chartApi.connected()&&f._chartApi.switchTimezone(f.timezone())}),this.m_timeScale.defaultRightOffsetProperty().listeners().subscribe(null,function(){f.recalculateAllPanes()}),_.merge(r.mainSeriesProperties.state()),this.m_mainSeries=new F(this,_,a),this.m_panes[0].addDataSource(this.m_mainSeries,this.m_panes[0].rightPriceScale()),this._mainSeriesScaleRatioProperty=new Y(this),this.m_mainSeries.onCompleted().subscribe(this,function(){f.clearCurrentPosition(),f._scrollingState&&f.gotoTime()}),
this.m_mainSeries.onIntervalChanged().subscribe(this,function(){this._oldStartVisibleIndex=-1,this._oldEndVisibleIndex=-1}),this.m_mainSeries.onBarReceived().subscribe(this,c.prototype.updateTimeScaleBaseIndex),s||(_.addChild("priceAxisProperties",this.m_mainSeries.m_priceScale.properties()),this._properties.paneProperties.legendProperties.showStudyTitles.listeners().subscribe(this,function(e){e.value()||f._properties.paneProperties.legendProperties.showStudyArguments.setValue(!1)})),this._barsMarksSources=p(this),m=0;m<this._barsMarksSources.length;m++)this._barsMarksSources[m].setOwnerSource(this.m_mainSeries);this._syncPointCache={},this.m_watermarkSource=new y(this.m_mainSeries),this._brandingSource=null,o.enabled("alerts")&&!this.readOnly()&&(this._alertsList=null,this._initAlertsList()),this.strategySources=[],this.strategySources.change=new t,this._activeStrategySource=new n(null),this._oldStartVisibleIndex=-1,this._oldEndVisibleIndex=-1,this._currentTool="",H.hideAllDrawings().subscribe(this,this.visibilityChangeHandler),this._properties.scalesProperties.listeners().subscribe(this,c.prototype.fullUpdate),this._id=q.guid(),this._studyInserted=new t,this._chartThemeLoaded=new t,this._resetScales=new t,this._studyShiftColorStartOffset=void 0}var h=i(9).ensureNotNull,u=i(8).Point,d=i(55),p=d.parseRgb,f=d.rgbToBlackWhiteString,_=i(445),m=i(1).LineDataSource,g=i(875),v=i(286),y=i(882),b=i(883),S=i(884),w=i(885),T=i(287),P=i(187).BarsMarksContainer,C=i(889).Branding,x=i(52).PriceDataSource,E=i(454),L=i(197),I=i(581),A=i(40),k=i(34),M=k.Study,O=k.createStudy,D=k.prepareStudyProperties,V=i(144),R=i(231),B=i(132).StudyLineDataSource,N=i(92).ScaleType,z=i(24).PlotRowSearchMode,F=i(145),H=i(110),W=i(7).DefaultProperty,U=i(496).SyncPoint,j=i(20).trackEvent,q=i(17),G=i(0).getLogger("Chart.ChartModel"),Y=i(890).MainSeriesScaleRatioProperty,X=i(86),K=X.study_ESD$TV_EARNINGS,J=X.study_ESD$TV_SPLITS,Z=X.study_ESD$TV_DIVIDENDS,Q=i(444).SeriesData,ee=i(24).PlotList,te=i(470).alertBandFactory;c.prototype.setStudiesMetaData=function(e,t){this._studiesMetaData=e,this._studyVersioning=new V(this._studiesMetaData,t)},c.prototype.isSnapshot=function(){return this._isSnapshot},c.prototype.currentTool=function(){return this._currentTool},c.prototype.setCurrentTool=function(e){this._currentTool=e},c.prototype.timezone=function(){return this._properties.timezone.value()},c.prototype.version=function(){return this._version},c.prototype.initConnection=function(){this._chartApi.switchTimezone(this.timezone())},c.prototype.dumpViews=function(){var e,t,i,o,n={};for(n.panes=[],e=0;e<this.m_panes.length;e++)n.panes.push(this.m_panes[e].dumpViews());for(n.dataWindow=[],t=this.dataSources(),e=0;e<t.length;e++)i=t[e],(o=i.dataWindowView())&&n.dataWindow.push(o.dump());return n},c.prototype._paneInvalidationMask=function(e,t){var i=new A,o=this.m_panes.indexOf(e);return void 0===t&&(t=A.LIGHT_UPDATE),i.invalidatePane(o,t),i},c.prototype.updatePane=function(e){var t=this._paneInvalidationMask(e);this.invalidate(t)},c.prototype.fullUpdate=function(){
this.invalidate(new A(A.FULL_UPDATE))},c.prototype.updateSource=function(e){var t=this.paneForSource(e),i=this._paneInvalidationMask(t);this.invalidate(i)},c.prototype.studiesMetaData=function(){return this._studiesMetaData},c.prototype.studyVersioning=function(){return this._studyVersioning},c.prototype.disconnect=function(){var e,t,i=this.dataSources();for(t=0;t<i.length;t++)e=i[t],e.disconnect&&e.disconnect()},c.prototype.restart=function(){var e,t,i;for(this.initConnection(),this.m_timeScale.reset(),this.m_mainSeries.restart(),e=this.dataSources(),t=0;t<e.length;t++)i=e[t],i.restart&&i!==this.m_mainSeries&&i.restart()},c.prototype.startNotStartedStudies=function(){var e,t;if(!this.m_mainSeries.isStarted())throw Error("Cannot start studies: main series is not started");for(e=this.dataSources(),t=0;t<e.length;t++)a(e[t])&&!e[t].isStarted()&&e[t].restart&&e[t]!==this.m_mainSeries&&e[t].restart()},c.prototype.updateLineTools=function(){var e,t,i=this.dataSources();for(e=0;e<i.length;e++)l(i[e])&&(t=i[e],t.tryCreateServerPoints(),t.checkAlert&&t.checkAlert())},c.prototype.realignLineTools=function(){var e,t,i=this.dataSources();for(e=0;e<i.length;e++)l(i[e])&&(t=i[e],t.calcIsActualSymbol());for(e=0;e<this.m_panes.length;e++)this.m_panes[e].invalidateSourcesCache()},c.prototype.readOnly=function(){return this._readOnly},c.prototype.properties=function(){return this._properties},c.prototype.lineCancelled=function(){return this._lineCancelled},c.prototype.crossHairMoved=function(){return this.m_crossHairSource.moved()},c.prototype.chartApi=function(){return this._chartApi},c.prototype.propertyChangeHandler=function(){this.invalidate(new A(A.LIGHT_UPDATE))},c.prototype.visibilityChangeHandler=function(){this.setSelectedSource(),this.invalidate(new A(A.LIGHT_UPDATE))},c.prototype.updateAllPaneViews=function(){var e,t;for(e=0;e<this.m_panes.length;e++)t=this.m_panes[e],t.updateAllViews()},c.prototype.mainSeries=function(){return this.m_mainSeries},c.prototype.timeScale=function(){return this.m_timeScale},c.prototype.panes=function(){return this.m_panes},c.prototype.gridSource=function(){return this.m_gridSource},c.prototype.watermarkSource=function(){return this.m_watermarkSource},c.prototype.brandingSource=function(){return this._brandingSource},c.prototype.crossHairSource=function(){return this.m_crossHairSource},c.prototype.publishedChartsTimelineSource=function(){for(var e=0;e<this._barsMarksSources.length;++e)if(this._barsMarksSources[e]instanceof E)return this._barsMarksSources[e]},c.prototype.barsMarksSources=function(){return this._barsMarksSources},c.prototype.width=function(){return this.m_width},c.prototype.setPaneHeight=function(e,t){e.setHeight(t),this.recalculateAllPanes(),this.invalidate(new A(A.LIGHT_UPDATE))},c.prototype.setWidth=function(e){var t,i;for(this.m_width=e,this.m_timeScale.setWidth(this.m_width),t=0;t<this.m_panes.length;++t)i=this.m_panes[t],i.setWidth(e);this.recalculateAllPanes(),this.recalcVisibleRangeStudy(this.dataSources())},c.prototype.createPane=function(e,t){var i,o
;if(this._undoModel._chartWidget.isMaximizedPane()&&this._undoModel._chartWidget.toggleMaximizePane(),i=this._properties.paneProperties,t&&i.merge(t),o=new v(this.m_timeScale,i,this),"number"==typeof e&&isFinite(e)){if(e<0||e>this.m_panes.length)return void G.logDebug("ChartModel.createPane: invalid index: "+e);this.m_panes.splice(e,0,o)}else this.m_panes.push(o);return o.onTagsChanged().subscribe(this,c.prototype.onPaneTagsChanged),o},c.prototype.removePane=function(e){this._undoModel._chartWidget.isMaximizedPane()&&this._undoModel._chartWidget.toggleMaximizePane(),e.destroy();var t=this.m_panes.indexOf(e);-1!==t&&this.m_panes.splice(t,1),this.invalidate(new A(A.FULL_UPDATE))},c.prototype.startScalePrice=function(e,t,i){e.startScalePrice(t,i)},c.prototype.scalePriceTo=function(e,t,i){e.scalePriceTo(t,i),this.mainSeries().priceScale().isLockScale()?this.invalidate(new A(A.LIGHT_UPDATE)):this.invalidate(this._paneInvalidationMask(e,A.LIGHT_UPDATE))},c.prototype.endScalePrice=function(e,t){e.endScalePrice(t),this.invalidate(this._paneInvalidationMask(e,A.LIGHT_UPDATE))},c.prototype.startScrollPrice=function(e,t,i){e.startScrollPrice(t,i)},c.prototype.scrollPriceTo=function(e,t,i){e.scrollPriceTo(t,i),this.invalidate(this._paneInvalidationMask(e,A.LIGHT_UPDATE))},c.prototype.endScrollPrice=function(e,t){e.endScrollPrice(t),this.invalidate(this._paneInvalidationMask(e,A.LIGHT_UPDATE))},c.prototype.setPriceAutoScale=function(e,t,i){e.setPriceAutoScale(t,i),this.invalidate(this._paneInvalidationMask(e,A.LIGHT_UPDATE))},c.prototype.restorePriceScaleState=function(e,t,i){e.restorePriceScaleState(t,i),this.invalidate(this._paneInvalidationMask(e,A.LIGHT_UPDATE))},c.prototype.resetPriceScale=function(e,t){e.resetPriceScale(t),this.invalidate(this._paneInvalidationMask(e,A.LIGHT_UPDATE))},c.prototype.updateScales=function(e,t){this._undoModel._chartWidget._updateScalesActions()},c.prototype.startScaleTime=function(e){this.m_timeScale.startScale(e)},c.prototype.mainSeriesScaleRatioProperty=function(){return this._mainSeriesScaleRatioProperty},c.prototype.mainSeriesScaleRatioPropertyOnChanged=function(){this._mainSeriesScaleRatioProperty.listeners().fire(this._mainSeriesScaleRatioProperty)},c.prototype._mainSeriesPriceScaleName=function(){var e=this.paneForSource(this.m_mainSeries);return e.priceScaleName(e.priceScaleForSource(this.m_mainSeries))},c.prototype.mainSeriesScaleRatio=function(){var e=this.paneForSource(this.m_mainSeries);return"left"===this._mainSeriesPriceScaleName()?e.leftPriceScaleRatio():e.rightPriceScaleRatio()},c.prototype.setMainSeriesScaleRatio=function(e){var t=this.paneForSource(this.m_mainSeries);"left"===this._mainSeriesPriceScaleName()?t.applyLeftPriceScaleRatio(e):t.applyRightPriceScaleRatio(e)},c.prototype.scaleTimeTo=function(e){this.m_timeScale.scaleTo(e),this.recalculateAllPanes(),this.invalidate(new A(A.LIGHT_UPDATE))},c.prototype.endScaleTime=function(){this.m_timeScale.endScale(),this.invalidate(new A(A.LIGHT_UPDATE)),this.mainSeries().requestMoreData(),
this.recalcVisibleRangeStudy(this.dataSources())},c.prototype.startScrollTime=function(e){this.m_timeScale.startScroll(e),this._isTimeScrolling=!0},c.prototype.scrollTimeTo=function(e){this.m_timeScale.scrollTo(e),this.recalculateAllPanes(),this.updateCrossHair(),this.invalidate(new A(A.LIGHT_UPDATE))},c.prototype.endScrollTime=function(){this.m_timeScale.endScroll(),this.invalidate(new A(A.LIGHT_UPDATE)),this.mainSeries().requestMoreData(),this.recalcVisibleRangeStudy(this.dataSources()),this._isTimeScrolling=!1},c.prototype.recalcStudyBasedLineTools=function(){this.dataSources().forEach(function(e){e instanceof B&&e.recalcStudyIfNeeded&&e.recalcStudyIfNeeded()})},c.prototype.recalcVisibleRangeStudy=function(e,t){void 0!==this._recalcVRTimerId&&clearTimeout(this._recalcVRTimerId);var i=this;this._recalcVRTimerId=setTimeout(function(){i._recalcVisibleRangeStudy(e,t)},1e3)},c.prototype._recalcVisibleRangeStudy=function(e,t){var i,o,n,r,s,l,c,h,u,d,p,f,_,m,g,v;if(!this.timeScale().isEmpty()&&(i=this.timeScale().visibleBars(),o=this.mainSeries().nearestData(i.firstBar(),z.NearestRight),n=this.mainSeries().nearestData(i.lastBar(),z.NearestLeft),r=this.mainSeries().bars().lastIndex(),s=o?o.index:void 0,l=n?n.index:void 0,c=s===this._oldStartVisibleIndex,h=l===this._oldEndVisibleIndex,!c||!h||t))for(this._oldStartVisibleIndex=s,this._oldEndVisibleIndex=l,u={first_visible_bar_time:1e3*Math.floor(o&&o.value?o.value[TradingView.TIME_PLOT]:0),last_visible_bar_time:1e3*Math.floor(n&&n.value?n.value[TradingView.TIME_PLOT]:0),subscribeRealtime:n&&n.index===r},d=0;d<e.length;d++)if(a(e[d])){for(p=e[d],f=p.metaInfo().inputs,_=[],m=0;m<f.length;m++)u.hasOwnProperty(f[m].id)&&_.push(f[m].id);for(g=p.properties().inputs,m=0;m<_.length;m++)v=_[m],g[v].setValueSilently(u[v]);_.length>0&&g.listeners().fire(g)}},c.prototype.onResetScales=function(){return this._resetScales},c.prototype.resetTimeScale=function(){this.m_timeScale.restoreDefault(),this.recalculateAllPanes(),this.mainSeries().requestMoreData(),this.recalcVisibleRangeStudy(this.dataSources()),this.updateCrossHair(),this.invalidate(new A(A.LIGHT_UPDATE)),this._resetScales.fire()},c.prototype.restoreTimeScaleState=function(e){this.m_timeScale.restoreState(e),this.recalculateAllPanes(),this.updateCrossHair(),this.invalidate(new A(A.LIGHT_UPDATE))},c.prototype.restoreFactoryDefaults=function(e){e.restoreFactoryDefaults(),this.recalcVisibleRangeStudy(this.dataSources(),!0),this.mainSeries().onChartStyleChanged()},c.prototype.restoreDefaults=function(e){e.restoreDefaults(),this.recalcVisibleRangeStudy(this.dataSources(),!0),this.mainSeries().onChartStyleChanged()},c.prototype.setSelectedSource=function(e,t){if(!(this.m_selectedSource===e&&this._lastHittestData===t||e&&e.customization&&e.customization.disableSelection)){this._lastHittestData=t;var i=new A;this.m_selectedSource&&(this.m_selectedSource.updateAllViews(),TradingView.alertsDispatcher&&this.m_selectedSource.hasAlert.value()&&this.m_selectedSource.getAlert({fromCache:!0}).done(function(e){e&&e.set("selected",!1)})),
this.m_selectedSource=e,this._selectedSourceChanged.fire(e),e&&(e.updateAllViews(),TradingView.alertsDispatcher&&e.hasAlert.value()&&e.getAlert({fromCache:!0}).done(function(e){e&&e.set("selected",!0)})),i.force=!0,this.invalidate(new A(A.LIGHT_UPDATE)),this.setHoveredSource(e,t)}},c.prototype.checkLineToolSelection=function(){this.m_selectedSource&&this.m_selectedSource instanceof m&&(this.m_selectedSource.calcIsActualSymbol(),this.m_selectedSource.isActualSymbol()||this.setSelectedSource(null))},c.prototype.onSelectedSourceChanged=function(){return this._selectedSourceChanged},c.prototype.setHoveredSource=function(e,t){if(this.m_hoveredSource!==e||this._lastHittestData!==t){this._lastHittestData=t;var i=null;this.m_hoveredSource&&(this.m_hoveredSource.updateAllViews(),i||(i=new A),TradingView.alertsDispatcher&&this.m_hoveredSource.hasAlert.value()&&this.m_hoveredSource.getAlert({fromCache:!0}).done(function(e){e&&e.set("hovered",!1)}),i.merge(this._paneInvalidationMask(this.paneForSource(this.m_hoveredSource),A.LIGHT_UPDATE))),this.m_hoveredSource=e,e&&(e.updateAllViews(),i||(i=new A),i.merge(this._paneInvalidationMask(this.paneForSource(e),A.LIGHT_UPDATE)),TradingView.alertsDispatcher&&e.hasAlert.value()&&e.getAlert({fromCache:!0}).done(function(e){e&&e.set("hovered",!0)})),i&&this.invalidate(i)}},c.prototype.selectedSource=function(){return this.m_selectedSource},c.prototype.hoveredSource=function(){return this.m_hoveredSource},c.prototype.lastHittestData=function(){return this._lastHittestData},c.prototype.invalidate=function(e){this._invalidateHandler&&this._invalidateHandler(e)},c.prototype.dataSources=function(){var e,t,i,o=[];for(o.push(this.m_crossHairSource),e=0;e<this.m_panes.length;++e)for(t=this.m_panes[e].dataSources(),i=0;i<t.length;i++)o.push(t[i]);return o},c.prototype.orderedDataSources=function(e){var t,i,o=[];for(o.push(this.m_crossHairSource),t=0;t<this.m_panes.length;t++)i=this.m_panes[t].orderedSources().slice(),e&&i.reverse(),o=o.concat(i);return o},c.prototype.dataSourceForId=function(e){var t,i;for(i=0;i<this.m_panes.length;++i)if(t=this.m_panes[i].dataSourceForId(e))return t;return null},c.prototype.children=function(e,t){return this.dataSources().filter(function(i){return(!0!==t||!a(i)||!i.isChildStudy())&&i.ownerSource()===e})},c.prototype.setAndSaveCurrentPosition=function(e,t,i,o){this.m_crossHairSource.saveOriginCoord(e,t),this.setCurrentPosition(e,t,i,o)},c.prototype.setCurrentPosition=function(e,t,i,o){var n,r,s,a,l,c,h,u,d,p,f,_,g,v=NaN,y=Math.round(this.m_timeScale.coordinateToIndex(e));if(i&&(n=i.defaultPriceScale(),n.isEmpty()||(v=n.coordinateToPrice(t))),(this._lineBeingCreated||m.isLineTool(this.currentTool()))&&(v=this._magnet.align(v,y,i)),this._isTimeScrolling)return void this.m_crossHairSource.setPosition(this.m_crossHairSource.index,v,i);for(this.m_crossHairSource.setOnHoveredChartWidget(!0),this.m_crossHairSource.setPosition(y,v,i),this.m_crossHairSource.dataWindowView().update(),r=this.m_panes,s=r.length;s--;)for(a=r[s].dataSources(),
l=a.length;l--;)(c=a[l].dataWindowView())&&c.update();this._lineBeingCreated?(this._lineBeingCreated.setLastPoint({index:y,price:v},o),this._lineBeingCreated.updateAllViews(),this.invalidate(new A(A.LIGHT_UPDATE))):this.crossHairSource().startMeasurePoint()?this.invalidate(new A(A.LIGHT_UPDATE)):this.invalidate(new A(A.UPDATE_CURSOR_ONLY)),this._isSettingsExternalPosition||(h=this._undoModel._chartWidget,h._chartWidgetCollection&&(u=this.mainSeries(),(d=u.syncModel())&&(p=this.m_timeScale.points().roughTime(y,d.projectTime.bind(d)),f={timeStamp:p},_=i.mainDataSource(),_ instanceof F&&(f.price=v,f.symbol=_.symbol()),f.syncModel=d,g=this._lineBeingCreated||this._linePointBeingEdited||this._sourceBeingMoved,g=g&&H.drawOnAllCharts().value(),h._chartWidgetCollection.syncCrosshair(f,h,g,o))))},c.prototype.clearCurrentPosition=function(){var e,t,i,o,n,r,s=this.crossHairSource();for(s.clearPosition(),s.dataWindowView().update(),e=this.m_panes,t=e.length;t--;)for(i=e[t].dataSources(),o=i.length;o--;)(n=i[o].dataWindowView())&&n.update();this.invalidate(new A(A.UPDATE_CURSOR_ONLY)),r=this._undoModel._chartWidget,r._chartWidgetCollection&&r._chartWidgetCollection.syncCrosshair(NaN,r)},c.prototype.onSyncScrollNeeded=function(e){var t,i,o,n=this._undoModel._chartWidget;n._chartWidgetCollection&&(t=this.mainSeries(),(i=t.syncModel())&&(o=1e3*this.m_timeScale.points().roughTime(e,i.projectTime.bind(i)),n._chartWidgetCollection.syncScroll(o,this)))},c.prototype.gotoTime=function(e,t){function i(){return p.tickMarks().indexToTime(p.tickMarks().minIndex).valueOf()-e}function o(t){var o,n,r,s,a;if(i()<0){for(o=p.tickMarks().nearestIndex(e),n=h(f.bars().lastIndex()),o=Math.min(o,n),r=p.tickMarks().indexToTime(o).valueOf();r<e&&o<n;)o++,r=p.tickMarks().indexToTime(o).valueOf();return s=p.visibleBars(),a=s.lastBar()-s.firstBar(),!t&&s.contains(o)||(p.zoomToBarsRange(o-a/2,o+a/2),f.requestMoreData()),{timestamp:p.indexToTimePoint(o)}}}var n,r,s,a,l,c,u,d,p=this.timeScale(),f=this.mainSeries();if(t&&t.model&&(n=f.syncModel())&&(r=this._createSyncPoint(t.model.mainSeries().syncModel(),n),e=1e3*r.sourceTimeToTargetTime(e/1e3)),t=t||{centerIfVisible:!0},e)this._scrollingState&&this._scrollingState.deferred.reject(),s=$.Deferred(),this._scrollingState={targetDate:e,deferred:s,centerIfVisible:t.centerIfVisible};else{if(!this._scrollingState)return G.logError("scrollTo called without an argument"),$.Deferred().reject().promise();e=this._scrollingState.targetDate,s=this._scrollingState.deferred}return a=o(this._scrollingState.centerIfVisible),a||(l=p.tickMarks().minIndex,c=p.visibleBars(),u=c.lastBar()-c.firstBar(),f.endOfData()?(p.zoomToBarsRange(l-u/2,l+u/2),a={timestamp:p.indexToTimePoint(l),eod:!0}):(d=this.timeScale().tickMarks().estimateLeft(e),f.requestMoreData(Math.ceil(d+u/2)))),a&&(this.fullUpdate(),this._scrollingState=null,s.resolve(a)),s.promise()},c.prototype._createSyncPoint=function(e,t){var i,o,n=this._syncPointCache[e.uniqueId()];if(n){if(i=n[t.uniqueId()])return i}else this._syncPointCache[e.uniqueId()]={};return o=new U(e,t),
this._syncPointCache[e.uniqueId()][t.uniqueId()]=o,o},c.prototype.setExternalPosition=function(e,t){var i,o,n,r,s,a,l,c,h,u,d,p=this.crossHairSource();if(p.setOnHoveredChartWidget(!1),!Number.isNaN(e)&&isNumber(e.timeStamp)&&(o=this.mainSeries(),(n=o.syncModel())&&(r=this._createSyncPoint(e.syncModel,n),s=r.sourceTimeToTargetTime(e.timeStamp),i=this.m_timeScale.points().roughIndex(s,n.distance.bind(n)))),this.mainSeries().symbol()===e.symbol)return this._isSettingsExternalPosition=!0,a=this.paneForSource(this.mainSeries()),l=this.m_timeScale.indexToCoordinate(i),c=this.mainSeries().priceScale().priceToCoordinate(e.price,!0),this.setCurrentPosition(l,c,a,t||{}),p.setOnHoveredChartWidget(!1),void delete this._isSettingsExternalPosition;for(isFinite(i)?p.setPosition(i,NaN,null):(p.clearPosition(),p.dataWindowView().update()),h=this.dataSources(),u=h.length;u--;)(d=h[u].dataWindowView())&&d.update();this.invalidate(new A(A.UPDATE_CURSOR_ONLY))},c.prototype.updateCrossHair=function(){this.m_crossHairSource.update()},c.prototype.updateTimeScale=function(e,t,i,o,n,r){var s,a,l;if(r)for(this.m_timeScale.reset(),s=this.dataSources(),a=0;a<s.length;a++)s[a].clearData&&s[a].clearData();if(o.length>0)for(s=this.dataSources(),a=0;a<s.length;a++)s[a].moveData&&s[a].moveData(o);this.m_timeScale.update(e,t,i,n),l="ChartModel.prototype.updateTimeScale("+e+","+t+","+i.length+","+o.length+","+n.length+","+r+")",l+="TimeScale: {first:"+this.m_timeScale.m_points.firstIndex()+",last:"+this.m_timeScale.m_points.lastIndex()+"}",G.logDebug(l),this.recalculateAllPanes(),this.invalidate(new A(A.LIGHT_UPDATE))},c.prototype.updateTimeScaleBaseIndex=function(e){var t,i,o,n,r,s=this.mainSeries().bars();s.isEmpty()||(t=this.timeScale(),i=t.baseIndex(),o=h(s.lastIndex()),n=t.visibleBars().contains(i),e&&e.earliestRow.index>0&&!n&&(r=o-i,t.setRightOffset(t.rightOffset()-r)),t.setBaseIndex(o))},c.prototype.recalculatePane=function(e){e&&e.recalculate()},c.prototype.paneForSource=function(e){for(var t=this.m_panes.length-1;t>=0;t--)if(-1!==this.m_panes[t].dataSources().indexOf(e))return this.m_panes[t];return e instanceof P?this.paneForSource(this.m_mainSeries):null},c.prototype.recalculateAllPanes=function(){for(var e=0;e<this.m_panes.length;++e)this.m_panes[e].recalculate();this.updateAllPaneViews()},c.prototype._invalidateBarColorerCaches=function(){var e,t,i=this.dataSources();for(e=0;e<i.length;++e)(t=i[e])instanceof F&&t.invalidateBarColorerCache()},c.prototype.addStrategySource=function(e){~this.strategySources.indexOf(e)||(this.strategySources.push(e),this.strategySources.change.fire())},c.prototype.removeStrategySource=function(e){var t=this.strategySources.indexOf(e);~t&&(this.strategySources.splice(t,1),this.strategySources.change.fire())},c.prototype.setActiveStrategySource=function(e){~this.strategySources.indexOf(e)&&this._activeStrategySource.setValue(e)},c.prototype.unsetActiveStrategySource=function(){this._activeStrategySource.setValue(null)},c.prototype.activeStrategySource=function(){return this._activeStrategySource},
c.prototype.insertStudy=function(e,t,i,o){var n,r,s,l,c,h=null;return-1===["Study_ESD$TV_SPLITS@tv-scripting","Study_ESD$TV_DIVIDENDS@tv-scripting","Study_ESD$TV_SPLITS@tv-scripting","Volume@tv-basicstudies","Sessions@tv-basicstudies"].indexOf(e.id)&&j("studies","Study_"+e.id),n=!1,i||e.is_price_study?h=this.paneForSource(o||this.mainSeries()):(h=this.createPane(),t&&t.paneSize&&h.setPaneSize(t.paneSize),n=!0),"Compare@tv-basicstudies"===e.id&&(j("compare","symbol:"+t.inputs.symbol),this.m_mainSeries.priceScale().properties().log.setValue(!1),this.m_mainSeries.priceScale().properties().percentage.setValue(!0)),r=D(e,t,h,this.studyVersioning(),o),s=O(this,r,o||this.mainSeries(),e),this._recalcVisibleRangeStudy([s],!0),s.start(),s.childStudyByRebind().subscribe(null,function(){j("SOS","Apply SOS","Rebind SOS")}),l=s.metaInfo().priceScale||N.Right,!n&&a(o)&&(c=o.isNoScale()?null:o.priceScale()),c||(l===N.Right?c=h.rightPriceScale():l===N.Left?c=h.leftPriceScale():e.is_price_study?c=null:(G.logWarn("Cannot add study "+s.metaInfo().id+" with 'No Scale' setting, because study is not a price study. Using right price scale."),c=h.rightPriceScale())),i?h.addDataSource(s,null):h.addDataSource(s,c),s.properties().linkedToSeries&&s.properties().linkedToSeries.value()&&s.setOwnerSource(this.mainSeries()),this.recalculatePane(h),this.invalidate(new A(A.FULL_UPDATE)),this._invalidateBarColorerCaches(),this.recalcVisibleRangeStudy(this.dataSources(),!0),this._studyInserted.fire(s),h.updateAlertLabelsSources(),s},c.prototype.studyInserted=function(){return this._studyInserted},c.prototype.replaceStudyStub=function(e,t){var i,o,n,r=this.paneForSource(e);return null!==r&&(i=e.isNoScale()?null:e.priceScale(),o=e.zorder(),n=e.ownerSource(),r.insertDataSource(t,i,o),t.setOwnerSource(n),this.panes().forEach(function(i){i.dataSources().forEach(function(i){i._ownerSource===e&&i.setOwnerSource(t)})}),this.removeSource(e),t.start(),this.recalculatePane(r),this.invalidate(new A(A.FULL_UPDATE)),!0)},c.prototype.insertStudyStub=function(e){var t=this.mainSeries(),i=this.paneForSource(t),o=new R(this,null,e);return i.addDataSource(o,null),this.recalculatePane(i),this.invalidate(new A(A.FULL_UPDATE)),o},c.prototype.removeStudyStub=function(e){var t=this.dataSourceForId(e);return void 0===t?(G.logNormal("StudyStub id="+e+" is not found in chart model"),!1):(this.removeSource(t),!0)},c.prototype.detachSource=function(e,t){var i=this.paneForSource(e);if(i)return i.removeDataSource(e),i.isEmpty()?(this._lineBeingCreated&&i===this._paneBeingCreatedLineOn&&this.cancelCreatingLine(),this.removePane(i,t),!0):(this.invalidate(new A(A.FULL_UPDATE)),this._alertsList&&this._alertsList.trigger("reset"),!1)},c.prototype.removeSource=function(e,t){var i,o,n,r;if(e===this.m_selectedSource&&this.setSelectedSource(null),e===this._sourceBeingMoved&&(this._sourceBeingMoved=null,this._linePointBeingMoved=null),e.stop&&e.stop(),i=this.detachSource(e,t),e.metaInfo&&e.metaInfo()&&"Compare@tv-basicstudies"===e.metaInfo().id){for(o=this.paneForSource(this.m_mainSeries),
n=o.dataSources(),r=0;r<n.length;r++)if(n[r].metaInfo&&"Compare@tv-basicstudies"===n[r].metaInfo().id)return;this.m_mainSeries.priceScale().properties().percentage.setValue(!1)}return this.invalidate(new A(A.FULL_UPDATE)),this._invalidateBarColorerCaches(),e.linkKey&&H.removeLineTool({model:this,linkKey:e.linkKey}),a(e)&&e.isChildStudy()&&e.source().unsetChild(e),e.destroy&&e.destroy(),i},c.prototype._isStudyOrMainSeries=function(e){return TradingView.isInherited(e.constructor,M)||e===this.m_mainSeries},c.prototype.isMergeUpAvailableForSource=function(e){return!!this._isStudyOrMainSeries(e)&&this.paneForSource(e)!==this.panes()[0]},c.prototype.mergeSourceUp=function(e){var t,i,o,n;this.isMergeUpAvailableForSource(e)&&(t=this.paneForSource(e),i=this.panes().indexOf(t),o=this.panes()[i-1],n=o.findSuitableScale(e),this.move(e,o,n))},c.prototype.isMergeDownAvailableForSource=function(e){var t,i;return!!this._isStudyOrMainSeries(e)&&(t=this.paneForSource(e),i=this.panes(),t!==i[i.length-1])},c.prototype.mergeSourceDown=function(e){var t,i,o,n;this.isMergeDownAvailableForSource(e)&&(t=this.paneForSource(e),i=this.panes().indexOf(t),o=this.panes()[i+1],n=o.findSuitableScale(e),this.move(e,o,n))},c.prototype.isUnmergeAvailableForSource=function(e){var t,i;return!!this._isStudyOrMainSeries(e)&&(t=this.paneForSource(e),i=t.dataSources().filter(function(e){return TradingView.isInherited(e.constructor,x)&&e.showInObjectTree()}),i.length>1)},c.prototype.unmergeSourceUp=function(e){var t,i,o,n;this.isUnmergeAvailableForSource(e)&&(t=this.paneForSource(e),i=this.panes().indexOf(t),o=this.createPane(i),n=o.findSuitableScale(e),this.move(e,o,n))},c.prototype.unmergeSourceDown=function(e){var t,i,o,n;this.isUnmergeAvailableForSource(e)&&(t=this.paneForSource(e),i=this.panes().indexOf(t),o=this.createPane(i+1),n=o.findSuitableScale(e),this.move(e,o,n))},c.prototype.move=function(e,t,i){var o,n,r,s,a=this.children(e,!0),l=this.paneForSource(e),c=t?t.priceScaleName(i):"right";if(l===t){for(o=t.priceScaleByName(c),n=0;n<a.length;n++)t.move(a[n],o);t.move(e,o)}else{for(r=t||this.createPane(),s=r.priceScaleByName(c),n=0;n<a.length;n++)this.detachSource(a[n]);for(n=0;n<a.length;n++)r.addDataSource(a[n],s);this.detachSource(e),r.addDataSource(e,s)}this._alertsList&&this._alertsList.trigger("reset"),this.invalidate(new A(A.FULL_UPDATE))},c.prototype.isSingleInstanceLineTool=function(e){return"LineStudyMtpRiskReward"===e||"LineStudyMtpAnalysis"===e},c.prototype._externalTimeStamp=function(e){var t=this.mainSeries().syncModel();return this.m_timeScale.points().roughTime(e,t&&t.projectTime.bind(t))},c.prototype.createLineTool=function(e,t,i,o,n){var r,s,a,l,c,h,d,p,f,m,g;return _.isValid(i)?(this.isSingleInstanceLineTool(i)&&this._undoModel.removeAllDrawingTools(i),"LineToolExecution"!==i&&j("drawings","Study_Drawing_"+i),o&&(r=o.state(),s=TradingView.factoryDefaults("linetool"),a=i.toLowerCase(),TradingView.merge(s,TradingView.factoryDefaults(a)),o=TradingView[i].prototype.createPropertiesObject(a,s),o.merge(r)),
l=_.create(i,this,o,null,e.mainDataSource()),o||(o=l.properties()),c=!l.linkKey&&!n,H.drawOnAllCharts().value()?l.linkKey=n||q.randomHash():l.linkKey=n,l.toolname=i,l.setOwnerSource(e.mainDataSource()),h=e.defaultPriceScale(),e.addDataSource(l,h),p=this.m_timeScale.indexToCoordinate(t.index),f=h.priceToCoordinate(t.price),l.isFixed()?d=l.addFixedPoint(new u(p,f)):(m=l.constructor,m.skipMagnetting||(t.price=this._magnet.align(t.price,t.index,e)),d=l.addPoint(t)),d||(this._lineBeingCreated=l,this._paneBeingCreatedLineOn=e),c&&l.enableCurrentIntervalVisibility(),this.invalidate(new A(A.FULL_UPDATE)),n||!H.drawOnAllCharts().value()||l.properties().singleChartOnly||(g=this._externalTimeStamp(t.index),H.createLineTool({point:{price:t.price,timeStamp:g},linetool:i,properties:o,symbol:this.mainSeries().symbol(),model:this,linkKey:l.linkKey})),l):null},c.prototype.lineBeingCreated=function(){return this._lineBeingCreated},c.prototype.paneBeingCreatedLineOn=function(){return this._paneBeingCreatedLineOn},c.prototype.coninueCreatingLine=function(e,t,i,o){var n,r,s,a,l,c=this.paneForSource(this._lineBeingCreated);return e.price=this._magnet.align(e.price,e.index,c),n=this._lineBeingCreated.addPoint(e,t,i),r=this._lineBeingCreated,this._lineBeingCreated.updateAllViews(),s=new A(A.LIGHT_UPDATE),a=null,n&&(a={points:this._lineBeingCreated._timePoint,interval:this.mainSeries().interval()},this._paneBeingCreatedLineOn=null,this._lineBeingCreated=null,s.force=!0),this.invalidate(s),o||!H.drawOnAllCharts().value()||r.properties().singleChartOnly||(l=this._externalTimeStamp(e.index),H.continueLineTool({point:{price:e.price,timeStamp:l},envState:t,finalState:a,model:this})),n},c.prototype.cancelCreatingLine=function(){if(this._lineBeingCreated){var e=this._lineBeingCreated;this.removeSource(this._lineBeingCreated),this._lineBeingCreated=null,this._lineCancelled.fire(),H.drawOnAllCharts().value()&&!e.properties().singleChartOnly&&H.cancelLineTool({model:this})}},c.prototype.startChangingLinetool=function(e,t,i,o){var n,r,s;this._lineBeingEdited=e,this._linePointBeingEdited=i,this._lineBeingEdited.startChanging(i,t),n=this.paneForSource(e),t.price=this._magnet.align(t.price,t.index,n),this._lineBeingEdited.startDragPoint&&this._lineBeingEdited.startDragPoint(i,t),this._lineBeingEdited.setPoint(i,t,o),this._lineBeingEdited.updateAllViews(),r=this._paneInvalidationMask(n,A.LIGHT_UPDATE),r.force=!0,this.invalidate(r),e.linkKey&&!e.properties().singleChartOnly&&(s=this._externalTimeStamp(t.index),H.startChangingLineTool({linkKey:e.linkKey,model:this,symbol:this.mainSeries().symbol(),point:{price:t.price,timeStamp:s},pointIndex:i,envState:o}))},c.prototype.lineBeingEdited=function(){return this._lineBeingEdited},c.prototype.linePointBeingEdited=function(){return this._linePointBeingEdited},c.prototype.changeLinePoint=function(e,t){var i,o,n,r,s=this.paneForSource(this._lineBeingEdited);void 0!==e.x&&void 0!==e.y?(n=this._lineBeingEdited.priceScale(),i=n.coordinateToPrice(e.y),o=Math.round(this.timeScale().coordinateToIndex(e.x)),
i=this._magnet.align(i,o,s),this._lineBeingEdited.setPoint(this._linePointBeingEdited,{price:i,index:o},t)):this._lineBeingEdited.setPoint(this._linePointBeingEdited,e,t),this._lineBeingEdited.updateAllViews(),this.invalidate(new A(A.LIGHT_UPDATE)),this._lineBeingEdited.linkKey&&!this._lineBeingEdited.properties().singleChartOnly&&(r=this._externalTimeStamp(o),H.changeLineTool({linkKey:this._lineBeingEdited.linkKey,model:this,symbol:this.mainSeries().symbol(),point:{price:i,timeStamp:r},envState:t}))},c.prototype.endChangingLinetool=function(e){var t,i,o=this._lineBeingEdited;this._lineBeingEdited.endChanging(!1,e),this._lineBeingEdited=null,this._linePointBeingEdited=null,t=new A(A.LIGHT_UPDATE),t.force=!0,this.invalidate(t),i={points:o._timePoint,interval:this.mainSeries().interval()},o.linkKey&&!o.properties().singleChartOnly&&H.finishChangingLineTool({model:this,linkKey:o.linkKey,symbol:this.mainSeries().symbol(),finalState:i})},c.prototype.startMovingSource=function(e,t,i){var o,n,r;this._sourceBeingMoved=e,this._linePointBeingMoved=i,this._sourceBeingMoved.startMoving(t,i),o=this.paneForSource(this._sourceBeingMoved),n=this._paneInvalidationMask(o,A.LIGHT_UPDATE),n.force=!0,this.invalidate(n),e.linkKey&&!e.properties().singleChartOnly&&(r=this._externalTimeStamp(t.index),H.startMovingLineTool({linkKey:e.linkKey,model:this,symbol:this.mainSeries().symbol(),point:{price:t.price,timeStamp:r}}))},c.prototype.sourceBeingMoved=function(){return this._sourceBeingMoved},c.prototype.moveSource=function(e){if(this._sourceBeingMoved.move(e,this._linePointBeingMoved),this.invalidate(new A(A.LIGHT_UPDATE)),this._sourceBeingMoved.linkKey&&!this._sourceBeingMoved.properties().singleChartOnly){var t=this._externalTimeStamp(e.index);H.moveLineTool({linkKey:this._sourceBeingMoved.linkKey,model:this,point:{price:e.price,timeStamp:t}})}},c.prototype.endMovingSource=function(e){var t,i,o=this._sourceBeingMoved,n=this.paneForSource(this._sourceBeingMoved);this._sourceBeingMoved.endMoving(e),this._sourceBeingMoved=null,this._linePointBeingMoved=null,t=this._paneInvalidationMask(n,A.LIGHT_UPDATE),t.invalidateAll(A.LIGHT_UPDATE),t.force=!0,this.invalidate(t),o instanceof m&&(i={points:o._timePoint,interval:this.mainSeries().interval()},o.linkKey&&!o.properties().singleChartOnly&&H.finishMovingLineTool({linkKey:o.linkKey,model:this,finalState:i}))},c.prototype.finishLineTool=function(e){var t=this.lineBeingCreated();t&&(t.finish&&t.finish(),!e&&H.drawOnAllCharts().value()&&t.linkKey&&!t.properties().singleChartOnly&&H.finishLineTool({linkKey:t.linkKey,model:this}))},c.prototype.calculateDefaultTags=function(){var e,t,i=[],o=this.dataSources();for(e=0;e<o.length;e++)t=o[e],t.tags&&(i=i.concat(t.tags()));return i},c.prototype.changeZOrder=function(e,t){this.paneForSource(e).changeZOrder(e,t),this.invalidate(new A(A.FULL_UPDATE))},c.prototype.sendToBack=function(e){this.paneForSource(e).sendToBack(e),this.invalidate(new A(A.FULL_UPDATE))},c.prototype.bringToFront=function(e){this.paneForSource(e).bringToFront(e),
this.invalidate(new A(A.FULL_UPDATE))},c.prototype.onTagsChanged=function(){return this._tagsChanged},c.prototype.onPaneTagsChanged=function(){this._tagsChanged.fire()},c.prototype.setTimeViewport=function(e,t){this.timeScale().zoomToBarsRange(e,t),this.recalculateAllPanes(),this.invalidate(new A(A.LIGHT_UPDATE))},c.prototype.zoomToViewport=function(e,t,i,o,n){var s,a,l;this.setTimeViewport(e,t),s=Math.min(i,o),a=Math.max(i,o),l=n.defaultPriceScale(),l.setAutoScale(!1),l.isLog()&&(s=l.priceToLogical(s),a=l.priceToLogical(a)),l.setPriceRange(new r(s,a)),this.recalculateAllPanes(),this.invalidate(this._paneInvalidationMask(n,A.LIGHT_UPDATE))},c.prototype.clearAllStudies=function(){var e,t=this.dataSources();for(e=0;e<t.length;e++)t[e].clearData&&t[e].clearData()},c.prototype.allStudies=function(){return this._getAllSources(a)},c.prototype.allLineTools=function(){return this._getAllSources(l)},c.prototype.getStudyById=function(e){var t=this.dataSourceForId(e);return null!==t&&a(t)?t:null},c.prototype.getLineToolById=function(e){var t=this.dataSourceForId(e);return null!==t&&l(t)?t:null},c.prototype._getAllSources=function(e){var t,i,o,n,r,s,a=[],l=this.m_panes,c=l.length;for(t=0;t<c;++t)for(i=l[t],o=i.dataSources(),n=o.length,r=0;r<n;++r)s=o[r],e(s)&&a.push(s);return a},c.prototype.getStudyById=function(e){var t=this.dataSourceForId(e);return t instanceof M?t:null},c.prototype.backgroundColor=function(){return this._properties.paneProperties.background._value},c.prototype.backgroundCounterColor=function(){return"black"===f(p(this.backgroundColor()),150)?"white":"black"},c.prototype.isDark=function(){return"white"===this.backgroundCounterColor()},c.prototype.canZoomIn=function(){return this.m_timeScale.canZoomIn()&&o.enabled("chart_zoom")},c.prototype.canZoomOut=function(){return this.m_timeScale.canZoomOut()&&o.enabled("chart_zoom")},c.prototype.updateAllVolumeStudies=function(){var e,t,i,o,n,r,s=this.m_panes;for(e=s.length;e--;)for(t=!1,i=s[e],o=i.dataSources(),n=o.length;n--;)r=o[n],a(r)&&"Volume"===r.metaInfo().shortId&&(r.updateAllViews(),t||(this.updatePane(i),t=!0))},c.prototype._initAlertsList=function(){function e(){TradingView.alertsDispatcher.requestList({symbol:i.mainSeries().actualSymbol(),resolution:i.mainSeries().interval(),active:!0,success:function(){i._alertsList.syncCollections()},error:function(){i._alertsList.reset()}})}function t(t){i.mainSeries().onSymbolResolved()[t](i,e),i.mainSeries().onSymbolError()[t](i,i._removeAllAlertLabelsFromChart),i.mainSeries().properties().interval[t](i,e)}var i=this;i._alertsList=new I({observableCollection:TradingView.alertsDispatcher.alerts,syncEvents:["change:active","change:crossInterval","change:resolution","change:symbol"],validator:function(e){return(e.get("active")||e.isNew())&&(e.get("crossInterval")||e.get("resolution")===i.mainSeries().interval())&&e.get("symbol")===i.mainSeries().actualSymbol()}}),i._alertsList.on("add",function(e){i._addAlertLabelToChart(e)}),i._alertsList.on("remove",function(e){i._removeAlertLabelFromChart(e)}),
i._alertsList.on("reset",function(){var e,t=i._alertsList.models;for(i._removeAllAlertLabelsFromChart(),e=t.length-1;e>=0;e--)i._addAlertLabelToChart(t[e])}),i._alertsList.on("change:alertSeries",function(e){i._removeAlertLabelFromChart(e),i._addAlertLabelToChart(e)}),i._alertsList.syncCollections(),loginStateChange.subscribe(i,function(){t(is_authenticated?"subscribe":"unsubscribe")}),is_authenticated&&(t("subscribe"),e())},c.prototype._addAlertLabelToChart=function(e){function t(e,t){var i,o;t&&(i=t.mainDataSource(),(o=t.priceScaleForSource(i)||t.rightPriceScale()||t.leftPriceScale())&&t.addDataSource(new L(s,e),o))}function i(e){var t,i,o,n,r,a=[];for(t=0;t<s.m_panes.length;t++)for(i=s.m_panes[t],o=i.dataSources(),n=0;n<o.length;n++)r=o[n],r.idForAlert()===e&&a.push(i);return a}var o,n,r,s=this;if(e.get("extra")){if(o=e.get("extra").alertSeries().id,n=i(o),n.length)for(r=0;r<n.length;r++)t(e,n[r]);else e.isOHLC()&&t(e,this.paneForSource(this.m_mainSeries));this.invalidate(new A(A.LIGHT_UPDATE))}},c.prototype._removeAlertLabelFromChart=function(e){function t(t){return t.alert&&t.alert()&&t.alert().id===e.id}var i,o,n,r=this.m_panes;for(i=r.length-1;i>=0;i--)o=r[i],(n=s.find(o.dataSources(),t))&&o.removeDataSource&&o.removeDataSource(n);this.invalidate(new A(A.LIGHT_UPDATE))},c.prototype._removeAllAlertLabelsFromChart=function(){var e,t,i,o=this.m_panes;for(e=o.length-1;e>=0;e--)for(t=o[e].dataSources(),i=t.length-1;i>=0;i--)t[i]instanceof L&&o[e].removeDataSource(t[i]);this.invalidate(new A(A.LIGHT_UPDATE))},c.prototype.alertsList=function(){return this._alertsList},c.prototype.setAlertsStudiesList=function(e){this._alertsStudiesList=$.map($.grep(e,function(e){var t,i=e.plots||[];for(t=0;t<i.length;t++)if("line"===i[t].type)return!0;return!1}),function(e){return e.id})},c.prototype.canCreateAlertForDataSource=function(e){function t(e){var t,i,o,n;if(e=e,e instanceof Q&&(e=e.bars()),e instanceof ee&&(e=e.state().data),!$.isArray(e))return!0;for(t=e.length-1;t>=0;t--){if(i=e[t],!$.isArray(i.value))return!0;for(o=i.value.length-1;o>0;o--)if(null!==(n=i.value[o])&&void 0!==n&&!TradingView.isNaN(n))return!0}return!1}var i,n,r,s,a,l,c,h,u,d,p;return!!o.enabled("alerts")&&(i=function(){return e.data()&&!e.data().isEmpty()&&t(e.data())},n="function"==typeof e.idForAlert,r=e===this.mainSeries(),s=e instanceof M,a=e instanceof Z||e instanceof J||e instanceof K,l=e.metaInfo?e.metaInfo():null,c=!!l&&l.isTVScript,h=!!l&&l.isTVScriptStrategy,u=function(){var t,i=e.stateForAlert&&e.stateForAlert();return!!i&&((t=te.create(i).getPlots())&&t.length)},d=function(){var t=e.stateForAlert&&e.stateForAlert();return!!t&&!(!t.alerts||!t.alerts.conditions)},p=!!l&&-1!==$.inArray(l.fullId,this._alertsStudiesList),!!r||!h&&!a&&n&&s&&(c?d()||u()&&i():p&&i()))},c.prototype.setInterval=function(e,t){var i=setInterval(e,t);return this._modelIntervals.push(i),i},c.prototype.clearInterval=function(e){clearInterval(e);var t=this._modelIntervals.indexOf(e);t>-1&&this._modelIntervals.splice(t,1)},c.prototype.clearIntervals=function(){
for(var e=0;e<this._modelIntervals.length;e++)clearInterval(this._modelIntervals[e]);this._modelIntervals=[]},c.prototype.destroy=function(){var e;for(e=0;e<this._barsMarksSources.length;e++)this._barsMarksSources[e].destroy();for(this.clearIntervals(),H.hideAllDrawings().unsubscribe(this,this.visibilityChangeHandler),this.resetDeferredStudies(),this._brandingSource&&this._brandingSource.destroy(),e=0;e<this._barsMarksSources.length;e++)this._barsMarksSources[e].destroy();for(e=0;e<this.m_panes.length;e++)this.m_panes[e].destroy();this.m_panes.length=0},c.prototype.countUserStudies=function(e){var t,i,o,n,r,s,l=0;for(e=e||{},t=0;t<this.m_panes.length;t++)for(i=this.m_panes[t].dataSources(),o=0;o<i.length;o++)if(n=i[o],a(n)&&n.showInObjectTree()){if(r=n.metaInfo&&n.metaInfo()){if(s=r.id,e.dontCountVolume&&"Volume@tv-basicstudies"===s)continue;if(e.dontCountCompare&&"Compare@tv-basicstudies"===s)continue;if(e.dontCountOverlay&&"Overlay@tv-basicstudies"===s)continue}l++}return l},c.prototype.isJustClonedChart=function(){return this._undoModel.isJustClonedChart()},c.prototype.copyToOtherCharts=function(e){var t,i,o,n;e.linkKey=e.linkKey||q.randomHash(),t=this,i=e.state(),o=this.mainSeries(),(n=o.syncModel())&&(i.points=e._timePoint.map(function(e){var i=t.timeScale().timePointToIndex(e.time_t)+e.offset;return{price:e.price,timeStamp:t._externalTimeStamp(i)}}),i.linetool=e.getType(),i.model=this,i.symbol=this.mainSeries().symbol(),i.finalState={points:e._timePoint,interval:this.mainSeries().interval()},H.copyLineTool(i))},c.prototype.restoreSource=function(e,t,i,o,n){var r,s,a,l,c,h,u,d;return r=e?this.createPane(t):this.panes()[t],a=o.type,s=a.toLowerCase().startsWith("study")?r._restoreStudy(o):r._restoreLineTool(o),l=s.ownerSource()?s.ownerSource().priceScale():r.priceScaleByName(n),l?(s.setPriceScale(l),l.addDataSource(s)):(l=new T(this.properties().scalesProperties),l.setHeight(r.m_height),c=s.metaInfo&&"Volume@tv-basicstudies"===s.metaInfo().id,h=c?.75:r.m_rightPriceScale.topMargin(),u=c?0:r.m_rightPriceScale.bottomMargin(),l.setTopMargin(h),l.setBottomMargin(u),l.addDataSource(s),s.setPriceScale(l),s._isOverlay=!0),d=null,o.ownerSource&&(d=r.dataSourceForId(o.ownerSource)),s.setOwnerSource(d),s.setPriceScale(l),s.start(),s.restore&&s.restore(),e&&r.restoreState(i),this.recalculateAllPanes(),this.mainSeries().invalidateBarColorerCache(),this.invalidate(new A(A.FULL_UPDATE,!0)),s.linkKey&&H.restoreLineTool({model:this,linkKey:s.linkKey,state:{restorePane:e,paneIndex:t,paneState:i,sourceState:o,priceScaleName:n}}),s},c.prototype.restoreLineToolState=function(e,t){e.restorePoints(t.points,t.indexes||[]),e.properties().merge(t.state),e.restoreData&&e.restoreData(t),e.createServerPoints(),this.invalidate(new A(A.FULL_UPDATE)),e.linkKey&&H.restoreLineToolState({model:this,linkKey:e.linkKey,state:t})},c.prototype.createBrandingSource=function(){this._brandingSource=new C(this)},c.prototype.onChartThemeLoaded=function(){return this._chartThemeLoaded},c.prototype.chartThemeLoaded=function(){this._chartThemeLoaded.fire()},
c.prototype.selectBarMode=function(){return this.m_crossHairSource.selectBarMode()},c.prototype.toggleSelectBarMode=function(){this.m_crossHairSource.toggleSelectBarMode()},c.prototype.onBarSelected=function(){return this.m_crossHairSource.onBarSelected()},c.prototype.isSeriesStyleSupported=function(e){return this.m_mainSeries.isStyleSupported(e)},c.prototype.getStudyShiftColorStartOffset=function(){return this._studyShiftColorStartOffset},c.prototype.setStudyShiftColorStartOffset=function(e){this._studyShiftColorStartOffset=e},c.prototype.isInReplay=function(){return this.m_mainSeries.isInReplay()},c.prototype.switchToReplay=function(e){this.m_mainSeries.switchToReplay(e)},c.prototype.switchToRealtime=function(){this.m_mainSeries.switchToRealtime(),this.m_timeScale.resetRightOffset()},e.exports=c}).call(t,i(4),i(3),i(22),i(79),i(29))},function(e,t,i){"use strict";function o(){s.call(this)}function n(e,t){this._constructor="LineToolFibRetracement";var r=t||this.createPropertiesObject("linetoolfibretracement");a.call(this,e,r),this.version=n.version,this._properties._stateVersion=1,e._fibRetracementLabelsCache||(e._fibRetracementLabelsCache=new o),i.e(11).then(function(e){var t=i(1189).FibRetracementPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var r=i(31),s=i(133),a=i(1).LineDataSource,l=i(2).propertyPages;inherit(o,s),o.prototype.levelsCount=function(){return n.LevelsCount},inherit(n,a),n.version=2,n.LevelsCount=24,n.prototype.levelsCount=function(){return n.LevelsCount},n.prototype.stop=function(){a.prototype.stop.call(this),this._model._fibRetracementLabelsCache.removeSource(this.id())},n.prototype.pointsCount=function(){return 2},n.prototype.title=function(){return"Fib Retracement"},n.prototype.migrateVersion=function(e,t,i){1===e&&this.properties().extendLines.setValue(!0)},n.prototype.processErase=function(e,t){var i="level"+t,o=this.properties()[i].visible;e.setProperty(o,!1,"Erase level line")},n.prototype.createPropertiesObject=function(e,t,i){return new r(e,t,i,{range:[1,24],names:["coeff","color","visible"]})},n.prototype.getStylesPropertyPage=function(){return l.LineToolFibRetracementStylesPropertyPage},t.LineToolFibRetracement=n},function(e,t,i){"use strict";(function(t){function i(e){t.call(this,""),this.subscribe(this,i.prototype.checkSelfColor),this.reloadProperties(e)}inherit(i,t),i.prototype.reloadProperties=function(e){for(;this._childs.length>0;)this.removeProperty(this._childs[0]);this._initValues=[];for(var t=0;t<e.length;++t)this._initValues.push(e[t].defaultValue),this.addChild(t,e[t].property);this.checkSelfColor()},i.prototype.setValue=function(e,i){if(this._value!==e||i){var o=this;this._childs.forEach(function(t){o[t].setValue(e||o._initValues[t])}),t.prototype.setValue.call(this,e,i)}},i.prototype.checkSelfColor=function(){var e,i=!0;for(e=0;e<this._initValues.length;++e)if(this[e].value()!==this[0].value()){i=!1;break}t.prototype.setValue.call(this,i?this[0].value():"")},e.exports=i}).call(t,i(37))},function(e,t,i){"use strict";function o(){
a.call(this)}function n(e,t){this._constructor="LineToolFibChannel";var s=t||this.createPropertiesObject("linetoolfibchannel");r.call(this,e,s),this.version=n.version,e._fibChannelLabelsCache||(e._fibChannelLabelsCache=new o),i.e(11).then(function(e){var t=i(1190).FibChannelPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var r=i(1).LineDataSource,s=i(31),a=i(133),l=i(2).propertyPages;inherit(o,a),o.prototype.levelsCount=function(){return n.LevelsCount},inherit(n,r),n.LevelsCount=24,n.version=2,n.prototype.levelsCount=function(){return n.LevelsCount},n.prototype.migrateVersion=function(e,t,i){i.properties.removeProperty("reverse")},n.prototype.pointsCount=function(){return 3},n.prototype.title=function(){return"Fib Channel"},n.prototype.processErase=function(e,t){var i="level"+t,o=this.properties()[i].visible;e.setProperty(o,!1,"Erase level line")},n.prototype.createPropertiesObject=function(e,t,i){return new s(e,t,i,{range:[1,24],names:["coeff","color","visible"]})},n.prototype.getStylesPropertyPage=function(){return l.LineToolFibChannelStylesPropertyPage},t.LineToolFibChannel=n},function(e,t,i){"use strict";function o(){a.call(this)}function n(e,t){this._constructor="LineToolFibSpeedResistanceArcs";var n=t||this.createPropertiesObject("linetoolfibspeedresistancearcs");r.call(this,e,n),e._fibSpeedResistanceArcsLabelsCache||(e._fibSpeedResistanceArcsLabelsCache=new o),i.e(11).then(function(e){var t=i(1191).FibSpeedResistanceArcsPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var r=i(1).LineDataSource,s=i(31),a=i(133),l=i(2).propertyPages;inherit(o,a),o.prototype.levelsCount=function(){return n.LevelsCount},inherit(n,r),n.LevelsCount=11,n.prototype.levelsCount=function(){return n.LevelsCount},n.prototype.pointsCount=function(){return 2},n.prototype.title=function(){return"Fib Speed Resistance Arcs"},n.prototype.processErase=function(e,t){var i="level"+t,o=this.properties()[i].visible;e.setProperty(o,!1,"Erase level line")},n.prototype.createPropertiesObject=function(e,t,i){return new s(e,t,i,{range:[1,11]})},n.prototype.getStylesPropertyPage=function(){return l.LineToolFibSpeedResistanceArcsStylesPropertyPage},t.LineToolFibSpeedResistanceArcs=n},function(e,t,i){"use strict";function o(){a.call(this)}function n(e,t){this._constructor="LineToolProjection";var o=t||this.createPropertiesObject("linetoolprojection");l.call(this,e,o),i.e(11).then(function(e){var t=i(1192).ProjectionLinePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var r=i(31),s=i(484).LineToolFibWedge,a=i(133),l=i(1).LineDataSource,c=i(2).propertyPages;inherit(o,a),o.prototype.levelsCount=function(){return 1},inherit(n,s),n.prototype.title=function(){return"Projection"},n.prototype.getCache=function(){return this._model._projectionLabelsCache||(this._model._projectionLabelsCache=new o),this._model._projectionLabelsCache},n.prototype.createPropertiesObject=function(e,t,i){return new r(e,t,i,{range:[1,1]})},
n.prototype.getStylesPropertyPage=function(){return c.LineToolProjectionStylesPropertyPage},t.LineToolProjection=n},function(e,t,i){"use strict";function o(){a.call(this)}function n(e,t){this._constructor="LineToolTrendBasedFibExtension";var s=t||new this.createPropertiesObject("linetooltrendbasedfibextension");r.call(this,e,s),this.version=n.version,e._trendBasedFibExtensionLabelsCache||(e._trendBasedFibExtensionLabelsCache=new o),i.e(11).then(function(e){var t=i(1193).TrendBasedFibExtensionPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var r=i(1).LineDataSource,s=i(31),a=i(133),l=i(2).propertyPages;inherit(o,a),o.prototype.levelsCount=function(){return n.LevelsCount},o.prototype.points=function(e){return[e.points()[0],e.points()[1]]},o.prototype.startPoint=function(e,t){return e.points()[2]},o.prototype.priceRange=function(e,t){var i=this.points(e),o=i[0],n=i[1];return t?o.price-n.price:n.price-o.price},o.prototype.sourceIsReady=function(e){return e.points().length>=3},inherit(n,r),n.version=2,n.LevelsCount=24,n.prototype.levelsCount=function(){return n.LevelsCount},n.prototype.stop=function(){r.prototype.stop.call(this),this._model._trendBasedFibExtensionLabelsCache.removeSource(this.id())},n.prototype.pointsCount=function(){return 3},n.prototype.title=function(){return"Trend-Based Fib Extension"},n.prototype.migrateVersion=function(e,t,i){1===e&&this.properties().extendLines.setValue(!0)},n.prototype.processErase=function(e,t){var i="level"+t,o=this.properties()[i].visible;e.setProperty(o,!1,"Erase level line")},n.prototype.createPropertiesObject=function(e,t,i){return new s(e,t,i,{range:[0,8]})},n.prototype.getStylesPropertyPage=function(){return l.LineToolTrendBasedFibExtensionStylesPropertyPage},t.LineToolTrendBasedFibExtension=n},function(e,t,i){"use strict";function o(){a.call(this)}function n(e,t){this._constructor="LineToolFibCircles";var n=t||this.createPropertiesObject("linetoolfibcircles");r.call(this,e,n),e._fibCirclesLabelsCache||(e._fibCirclesLabelsCache=new o),i.e(11).then(function(e){var t=i(1194).FibCirclesPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var r=i(1).LineDataSource,s=i(31),a=i(133),l=i(2).propertyPages;inherit(o,a),o.prototype.levelsCount=function(){return n.LevelsCount},inherit(n,r),n.LevelsCount=11,n.prototype.levelsCount=function(){return n.LevelsCount},n.prototype.pointsCount=function(){return 2},n.prototype.title=function(){return"Fib Circles"},n.prototype.processErase=function(e,t){var i="level"+t,o=this.properties()[i].visible;e.setProperty(o,!1,"Erase level line")},n.prototype.createPropertiesObject=function(e,t,i){return new s(e,t,i,{range:[1,11]})},n.prototype.getStylesPropertyPage=function(){return l.LineToolFibCirclesStylesPropertyPage},t.LineToolFibCircles=n},function(e,t,i){"use strict";function o(e,t,i,o){var n,r,a,_,v,y,b,S,w,T,P,C,x,E,L,I,A="VbPFixed@tv-volumebyprice",k=l.lineToolNameForPointsBasedStudy(A);for(i=i||f.findStudyMetaInfo(e.studiesMetaData(),A),
n=e.studyVersioning(),r=t||c(i,null,null,n),this._metaInfo=i,this.m_data=new p,this._plotOffsets={},this._plotOffsetsMetaInfoOverride={},a=this,_=new l.StudyPaneView_hhists(a,e),v=new l.StudyPaneView_horizlines(a,e),y=new l.StudyPaneView_polygons(a,e),b=[_,v,y],o=e.mainSeries(),S=r.styles,w=0;w<g.length;w++)(T=S[g[w]])&&T.plottype&&T.plottype.setValue(m.StepLine);if(i.plots.length>0&&(P=new h(a,o,e,i.plots[0].id),b.push(P)),i.plots.length>1&&(C=new h(a,o,e,i.plots[1].id),b.push(C)),i.plots.length>2&&(x=new h(a,o,e,i.plots[2].id),b.push(x)),s.call(this,e,r,k),this._setPaneViews(b),this._turnaroundCounter=1,this._turnaround="vbpfixed_"+this._turnaroundCounter,this._metaInfo=i,this._graphics=new u(i),this._plotFields=[],E=this.metaInfo().plots)for(w=0,L=E.length;w<L;w++)I=E[w].id,this._plotFields.push(I);this.clearData(),this._studyAlreadyCreated=!1,this._formatter=new d}var n=i(132),r=i(1).LineDataSource,s=n.StudyLineDataSource,a=i(34),l=a.Study,c=a.prepareStudyProperties,h=i(115).StudyPaneView,u=i(183),d=i(71).VolumeFormatter,p=i(24).PlotList,f=i(39),_=i(2).propertyPages,m=i(92).PlotType,g=["developingPoc","developingVAHigh","developingVALow"];inherit(o,s),o.prototype.pointsCount=function(){return 2},o.prototype._requestStudy=function(){var e,t,i,o,n,r,s,a,c,h=this.points();if(!(h.length<2)){if(e=h[0],t=h[1],i=Math.min(e.index,t.index),o=Math.max(e.index,t.index),n=this._model.mainSeries().bars().lastIndex(),i===o)return void this.clearData();r=this._model.mainSeries().bars().valueAt(i),s=this._model.mainSeries().bars().valueAt(o),null!==r&&null!==s&&(a={rowsLayout:this.properties().inputs.rowsLayout.value(),rows:this.properties().inputs.rows.value(),volume:this.properties().inputs.volume.value(),vaVolume:this.properties().inputs.vaVolume.value(),first_bar_time:1e3*r[TradingView.TIME_PLOT],last_bar_time:1e3*s[TradingView.TIME_PLOT]},null!=this.properties().inputs.subscribeRealtime&&(a.subscribeRealtime=n===o),c=this,this._studyId?(this._turnaround="vbpfixed_"+ ++this._turnaroundCounter,this._model.chartApi().modifyStudy(this._studyId,this._turnaround,a,function(e){c.onData(e)})):(this._studyId=l.makeNextStudyId(),this._model.chartApi().createStudy(this._studyId,this._turnaround,this._model.mainSeries()._seriesId,this._metaInfo.fullId+"!",a,function(e){c.onData(e)})))}},o.prototype.onData=function(e){var t=this;if("data_update"===e.method&&e.params.customId==="pointset_"+this._currentPointsetId)r.prototype.onData.call(this,e),2===this._points.length&&this._requestStudy(),this._studyAlreadyCreated=!0;else if("data_update"===e.method&&e.params.customId===this._studyId){if(!this._checkTurnaround(e.params.turnaround))return;l.prototype._makeJSONForNSData.call(this,e).then(function(i){e.params.nonseries.d=i,t._studyAlreadyCreated&&(t.clearData(),t._studyAlreadyCreated=!1),t._processPlotOffsets(e.params),t._mergeData(e.params.plots),""!==e.params.nonseries.d&&(t._graphics.process(e.params.nonseries),t._correctPoints(t._graphics.graphics())),e.params.nonseries.indexes.length>0&&(t._indexes=e.params.nonseries.indexes),
t.updateAllViews(),t._model.updateSource(t)})}},o.prototype._correctPoints=function(e){var t,i,o,n,r,s;if(e&&(void 0===e.indexes||0!==e.indexes.length)&&e.hhists){for(t=e.hhists[0].data,i=null,o=null,n=0;n<t.length;++n)r=t[n].priceLow,s=t[n].priceHigh,(!i||r<i)&&(i=r),(!o||s>o)&&(o=s);this._points[0].price=o,this._points[1].price=i}},o.prototype.calcIsActualSymbol=function(){this._isActualSymbol=!0,this.calcIsActualInterval()},o.prototype.formatter=function(){return this._formatter},o.prototype.isSelfColorerPlot=function(e){return l.isSelfColorerPlot(this,e)},o.prototype.offset=function(e){return l.offset(this,e)},o.prototype.data=function(){return this.m_data},o.prototype._processPlotOffsets=function(e){l.processPlotOffsets(this,e)},o.prototype._mergeData=function(e){this.m_data.merge(e)},o.prototype.getStylesPropertyPage=function(){return _.LinetoolVolumeProfilePropertyPage},o.prototype._isReady=function(){return this._graphics&&!this._graphics.isEmpty()},t.LineToolVbPFixed=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolVertLine";var o=t||new r("linetoolvertline");this._timeAxisView=new a(this,e),n.call(this,e,o),i.e(11).then(function(e){var t=i(1195).VertLinePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(1).LineDataSource,r=i(7).DefaultProperty,s=i(2).propertyPages,a=i(781).LineToolVertLineTimeAxisView;inherit(o,n),o.prototype.pointsCount=function(){return 1},o.prototype.title=function(){return"Vertical Line"},o.prototype.timeAxisViews=function(){return this.isSourceHidden()?null:this.properties().showTime.value()?[this._timeAxisView]:null},o.prototype.updateAllViews=function(){n.prototype.updateAllViews.call(this),this._timeAxisView.update()},o.prototype.canHasAlert=function(){return!0},o.prototype._getAlertPlots=function(){var e=this._points[0],t={index:e.index,price:e.price+1};return[this._linePointsToAlertPlot([e,t],null,!0,!0)]},o.prototype.getInputsPropertyPage=function(){return s.LineToolVertLineInputsPropertyPage},o.prototype.getStylesPropertyPage=function(){return s.LineToolVertLineStylesPropertyPage},t.LineToolVertLine=o},function(e,t,i){"use strict";function o(e,t){n.call(this),this._source=e,this._model=t,this._invalidated=!0,this._renderer=new r}var n=i(279).TimeAxisView,r=i(280),s=i(184).DateTimeFormatter;inherit(o,n),o.prototype.update=function(){this._invalidated=!0},o.prototype.updateImpl=function(){var e,t;this._model.timeScale().isEmpty()||0!==this._source.points().length&&(this._text="",this._background=this._source.properties().linecolor.value(),e=this._source.points()[0].index,this._coordinate=this._model.timeScale().indexToCoordinate(e),t=this._model.timeScale().indexToUserTime(e),t&&(this._text=new s(this._model.mainSeries().isDWM()).format(t)),this._invalidated=!1)},o.prototype.renderer=function(){this._invalidated&&this.updateImpl();var e={text:this._text,coordinate:this._coordinate,color:this.color(),background:this._background};return this._renderer.setData(e),this._renderer},
t.LineToolVertLineTimeAxisView=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolBarsPattern";var r=t||new s("linetoolbarspattern");n.call(this,e,r),r.mirrored.listeners().subscribe(this,o.prototype.mirror),r.flipped.listeners().subscribe(this,o.prototype.flip),r.addExclusion("mirrored"),r.addExclusion("flipped"),this._scaleCoeff=1,this.version=o.version,this._pattern=[],this._properties.mode.listeners().subscribe(this,o.prototype.onModeChanged),i.e(11).then(function(e){var t=i(1196).BarsPatternPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(1).LineDataSource,r=i(74).Action,s=i(7).DefaultProperty,a=i(24).PlotRowSearchMode,l=i(2).propertyPages,c=i(485).LineToolBarsPatternMode;inherit(o,n),o.version=2,o.prototype.onModeChanged=function(){var e=this.patternPriceDiff();e*=this._pressCoeff,this._points[1].price=this._timePoint[1].price=this._points[0].price+e},o.prototype.additionalActions=function(e){var t,i,o=new r({checked:this.properties().mirrored.value(),checkable:!0,text:$.t("Mirrored"),callbackContext:{target:this}}),n=new r({checked:this.properties().flipped.value(),checkable:!0,text:$.t("Flipped"),callbackContext:{target:this}});return o.callbacks().subscribe(null,function(t){var i=t.callbackContext(),o=i.target;e.setProperty(o.properties().mirrored,!o.properties().mirrored.value(),"Bats Pattern Mirroring"),o.updateAllViews(),o._model.updateSource(o)}),n.callbacks().subscribe(null,function(t){var i=t.callbackContext(),o=i.target;e.setProperty(o.properties().flipped,!o.properties().flipped.value(),"Bats Pattern Flipping"),o.updateAllViews(),o._model.updateSource(o)}),t=new r({checkable:!0,text:$.t("Restore Size")}),i=this,t.callbacks().subscribe(null,function(t){var o=i.points()[0],n=i.patternPriceDiff(),r=o.price+n,s=o.index+i._pattern.length-1;e.startChangingLinetool(i,{price:r,index:s},1,{}),e.changeLinePoint({price:r,index:s},{}),e.endChangingLinetool()}),[o,n,t]},o.prototype.pointsCount=function(){return 2},o.prototype.state=function(e){var t=n.prototype.state.call(this,e);return t.pattern=this._pattern,t},o.prototype.restoreData=function(e){e.pattern&&(this._pattern=e.pattern)},o.prototype.title=function(){return"Bars Pattern"},o.prototype.cloneData=function(e){this._pattern=TradingView.clone(e._pattern)},o.prototype.mirror=function(){var e,t,i,o,n,r=this._pattern,s=r[0][TradingView.HIGH_PLOT],a=Math.min(r[0][TradingView.LOW_PLOT],r[0][TradingView.HIGH_PLOT]),l=Math.max(r[0][TradingView.LOW_PLOT],r[0][TradingView.HIGH_PLOT]);for(e=1;e<r.length;e++)a=Math.min(a,r[e][TradingView.LOW_PLOT]),l=Math.max(l,r[e][TradingView.HIGH_PLOT]);if(a<l)for(t=(a+l)/2,i=function(e){return t-(e-t)},e=0;e<r.length;e++)r[e][TradingView.HIGH_PLOT]=i(r[e][TradingView.HIGH_PLOT]),r[e][TradingView.LOW_PLOT]=i(r[e][TradingView.LOW_PLOT]),r[e][TradingView.OPEN_PLOT]=i(r[e][TradingView.OPEN_PLOT]),r[e][TradingView.CLOSE_PLOT]=i(r[e][TradingView.CLOSE_PLOT]);o=r[0][TradingView.HIGH_PLOT]-s,n=r[r.length-1][TradingView.LOW_PLOT]-r[0][TradingView.HIGH_PLOT],
this._points[0].price+=o,this._points[1].price=this._points[0].price+n,this.updateAllViews()},o.prototype.flip=function(){var e,t,i;for(this._points[0].price=this._points[1].price,e=0;e<this._pattern.length/2;e++)t=this._pattern[e],this._pattern[e]=this._pattern[this._pattern.length-e-1],this._pattern[this._pattern.length-e-1]=t;i=this._pattern[this._pattern.length-1][TradingView.LOW_PLOT]-this._pattern[0][TradingView.HIGH_PLOT],this._points[1].price=this._points[0].price+i,this.updateAllViews()},o.prototype.firstPatternPrice=function(){var e,t,i=parseInt(this.properties().mode.value(),10);return i===c.LineHL2?(this._pattern[0][TradingView.HIGH_PLOT]+this._pattern[0][TradingView.LOW_PLOT])/2:(e={0:TradingView.HIGH_PLOT,1:TradingView.CLOSE_PLOT,2:TradingView.OPEN_PLOT,3:TradingView.OPEN_PLOT,4:TradingView.HIGH_PLOT,5:TradingView.LOW_PLOT},t=e[i],this._pattern[0][t])},o.prototype.lastPatternPrice=function(){var e,t,i=parseInt(this.properties().mode.value(),10);return i===c.LineHL2?(this._pattern[this._pattern.length-1][TradingView.HIGH_PLOT]+this._pattern[this._pattern.length-1][TradingView.LOW_PLOT])/2:(e={0:TradingView.LOW_PLOT,1:TradingView.CLOSE_PLOT,2:TradingView.CLOSE_PLOT,3:TradingView.OPEN_PLOT,4:TradingView.HIGH_PLOT,5:TradingView.LOW_PLOT},t=e[i],this._pattern[this._pattern.length-1][t])},o.prototype.patternPriceDiff=function(){return this.lastPatternPrice()-this.firstPatternPrice()},o.prototype.pressCoeff=function(){var e=this.patternPriceDiff(),t=this.points()[0].price,i=this.points()[1].price,o=i-t,n=o/e;return this._pressCoeff=n,n},o.prototype.addPoint=function(e,t){var i,o,r,s,l,h,u,d,p,f,_=this._model.mainSeries(),m=_.nearestIndex(e.index,a.NearestRight);if(this.properties().mode.value()===c.Bars?e.price=_.bars().valueAt(m)[TradingView.HIGH_PLOT]:e.price=_.bars().valueAt(m)[TradingView.CLOSE_PLOT],i=this.priceScale().priceRange().length(),e.price+=.05*i,o=_.priceScale(),o.isPercent()&&(r=_.firstValue(),e.price=o.priceRange().convertToPercent(e.price,r)),s=n.prototype.addPoint.call(this,e,t,!0)){for(l=Math.min(this.points()[0].index,this.points()[1].index),h=Math.max(this.points()[0].index,this.points()[1].index),m=this._model.mainSeries().nearestIndex(l,a.NearestRight),u=this._model.mainSeries().nearestIndex(h,a.NearestLeft),this.points()[0].index>this.points()[1].index&&(this._points[0].price=this._points[1].price),this._pattern=[],d=m;d<=u;d++)p=this._model.mainSeries().data().valueAt(d),this._pattern.push(TradingView.clone(p));this._pattern.length>0&&(f=this.patternPriceDiff(),this._points[1].price=this._points[0].price+f,this._points[1].index=this._points[0].index+(u-m),this.normalizePoints(),this.createServerPoints())}return s},o.prototype.setPoint=function(e,t,i){1===e&&t.index<=this._points[0].index&&(t.index=this._points[0].index+1),0===e&&t.index>=this._points[1].index&&(t.index=this._points[1].index-1),n.prototype.setPoint.call(this,e,t,i)},o.prototype.migrateVersion=function(e,t,i){if(1===e&&this._pattern.length>0){var o=this.patternPriceDiff()
;2===this._timePoint.length&&(this._timePoint[1].price=this._timePoint[0].price+o),2===this._points.length&&(this._points[1].price=this._points[0].price+o)}},o.prototype.getInputsPropertyPage=function(){return null},o.prototype.getStylesPropertyPage=function(){return l.LineToolBarsPatternStylesPropertyPage},t.LineToolBarsPattern=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolTrendBasedFibTime";var r=t||new this.createPropertiesObject("linetooltrendbasedfibtime");n.call(this,e,r),this.version=o.version,i.e(11).then(function(e){var t=i(1197).TrendBasedFibTimePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(1).LineDataSource,r=i(31),s=i(2).propertyPages;inherit(o,n),o.version=1,o.prototype.pointsCount=function(){return 3},o.prototype.title=function(){return"Trend-Based Fib Time"},o.prototype.migrateVersion=function(e,t,i){},o.prototype.processErase=function(e,t){var i="level"+t,o=this.properties()[i].visible;e.setProperty(o,!1,"Erase level line")},o.prototype.createPropertiesObject=function(e,t,i){return new r(e,t,i,{range:[1,11]})},o.prototype.getStylesPropertyPage=function(){return s.LineToolTrendBasedFibTimeStylesPropertyPage},t.LineToolTrendBasedFibTime=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolFibTimeZone";var r=t||this.createPropertiesObject("linetoolfibtimezone");n.call(this,e,r),this.version=o.version,i.e(11).then(function(e){var t=i(1198).FibTimeZonePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(1).LineDataSource,r=i(31),s=i(2).propertyPages;inherit(o,n),o.version=2,o.prototype.migrateVersion=function(e,t,i){var o;if(1===e){for(i.properties.level1.color.setValue(i.properties.baselinecolor.value()),o=2;o<=11;o++)i.properties["level"+o].color.setValue(i.properties.linecolor.value());for(o=1;o<=11;o++)i.properties["level"+o].linewidth.setValue(i.properties.linewidth.value()),i.properties["level"+o].linestyle.setValue(i.properties.linestyle.value())}},o.prototype.pointsCount=function(){return 2},o.prototype.title=function(){return"Fib Time Zone"},o.prototype.processErase=function(e,t){var i="level"+t,o=this.properties()[i].visible;e.setProperty(o,!1,"Erase level line")},o.prototype.createPropertiesObject=function(e,t,i){return new r(e,t,i,{range:[1,11]})},o.prototype.getStylesPropertyPage=function(){return s.LineToolFibTimeZoneStylesPropertyPage},t.LineToolFibTimeZone=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolCircleLines";var o=t||new r("linetoolcirclelines");n.call(this,e,o),i.e(11).then(function(e){var t=i(1199).LineToolCircleLinesPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(1).LineDataSource,r=i(7).DefaultProperty,s=i(2).propertyPages;inherit(o,n),o.prototype.pointsCount=function(){return 2},o.prototype.title=function(){return"Cyclic Lines"},o.prototype.getStylesPropertyPage=function(){return s.LineToolCircleLinesStylesPropertyPage},t.LineToolCircleLines=o
},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolDateRange";var o=t||new r("linetooldaterange");n.call(this,e,o),i.e(11).then(function(e){var t=i(1200).DateRangePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(1).LineDataSource,r=i(7).DefaultProperty,s=i(2).propertyPages;inherit(o,n),o.prototype.pointsCount=function(){return 2},o.prototype.title=function(){return"Date Range"},o.prototype.getStylesPropertyPage=function(){return s.LineToolDateRangeStylesPropertyPage},t.LineToolDateRange=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolPriceRange";var o=t||new r("linetoolpricerange");n.call(this,e,o),i.e(11).then(function(e){var t=i(1201).PriceRangePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(1).LineDataSource,r=i(7).DefaultProperty,s=i(2).propertyPages;inherit(o,n),o.prototype.pointsCount=function(){return 2},o.prototype.title=function(){return"Price Range"},o.prototype.getStylesPropertyPage=function(){return s.LineToolDateRangeStylesPropertyPage},t.LineToolPriceRange=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolDateAndPriceRange";var o=t||new r("linetooldateandpricerange");n.call(this,e,o),i.e(11).then(function(e){var t=i(1202).DateAndPriceRangePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(1).LineDataSource,r=i(7).DefaultProperty,s=i(2).propertyPages;inherit(o,n),o.prototype.pointsCount=function(){return 2},o.prototype.title=function(){return"Date and Price Range"},o.prototype.getStylesPropertyPage=function(){return s.LineToolDateAndPriceRangeStylesPropertyPage},t.LineToolDateAndPriceRange=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolParallelChannel";var o=t||new r("linetoolparallelchannel");n.call(this,e,o),i.e(11).then(function(e){var t=i(1203).ParallelChannelPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(1).LineDataSource,r=i(7).DefaultProperty,s=i(2).propertyPages;inherit(o,n),o.prototype.addPoint=function(e){var t,i=n.prototype.addPoint.call(this,e);return i&&(t=this.points()[0],this._points[2].index=t.index,this._points[2].price=t.price+this._priceOffset),i},o.prototype.calculatePriceDiff=function(){var e,t,i,o,n,r,s,a,l,c,h,u,d,p,f,_,m,g,v;if(3===this.points().length){if(e=this.points()[0],t=this.points()[1],i=this.points()[2],e.index===t.index)return;if(null===(o=this.priceScale()))return;if(o.isLog()){if(n=this._model.timeScale(),n.isEmpty())return;r=n.indexToCoordinate(e.index),s=n.indexToCoordinate(t.index),a=o.priceToCoordinate(e.price),l=o.priceToCoordinate(t.price),c=n.indexToCoordinate(i.index),h=(l-a)/(s-r),u=a+h*(c-r),d=o.priceToCoordinate(i.price),p=d-u,f=.5*(a+l),_=o.coordinateToPrice(f),m=f+p,g=o.coordinateToPrice(m),this._priceOffset=g-_}else h=(t.price-e.price)/(t.index-e.index),v=e.price+h*(i.index-e.index),this._priceOffset=i.price-v}},
o.prototype.setLastPoint=function(e,t){t&&t.shift&&2===this.points().length&&this._snapPoint45Degree(e,this.points()[0]),n.prototype.setLastPoint.call(this,e),this.calculatePriceDiff()},o.prototype.restorePoints=function(e,t,i){n.prototype.restorePoints.call(this,e,t,i),e&&e.length>=3&&(this._priceOffset=e[2].price-e[0].price)},o.prototype.setPoint=function(e,t,i){i&&i.shift&&e<2&&this._snapPoint45Degree(t,this.points()[1-e]),n.prototype.setPoint.call(this,e,t,i),2===e&&this.calculatePriceDiff();var o=this.points()[0];this._points[2].index=o.index,this._points[2].price=o.price+this._priceOffset},o.prototype.pointsCount=function(){return 3},o.prototype.title=function(){return"Parallel Channel"},o.prototype.addPoint=function(e,t){return t&&t.shift&&2===this.points().length&&this._snapPoint45Degree(e,this.points()[0]),n.prototype.addPoint.call(this,e,t)},o.prototype.fixAfterRestorePriceAxis=function(){this.priceScale().isLog()||delete this._priceOffset},o.prototype.cloneData=function(e){this._priceOffset=e._priceOffset},o.prototype.restoreData=function(e){e.priceOffset&&(this._priceOffset=e.priceOffset)},o.prototype.state=function(e){var t=n.prototype.state.call(this,e);return t.priceOffset=this._priceOffset,t},o.prototype.canHasAlert=function(){return!0},o.prototype._getAlertPlots=function(){function e(e,t){return e.index<=t.index?[e,t]:[t,e]}var t,i,o,n,r,s,a,l,c=[].concat(this._points).splice(0,2);return c=c.concat([{price:c[0].price+this._priceOffset,time:c[0].time,index:c[0].index},{price:c[1].price+this._priceOffset,time:c[1].time,index:c[1].index}]),t=e(c[0],c[1]),i=e(c[2],c[3]),this._priceOffset<0?(n=i,o=t):(n=t,o=i),a=this.properties().extendLeft.value(),l=this.properties().extendRight.value(),c[0].index<=c[1].index?(r=a,s=l):(r=l,s=a),[this._linePointsToAlertPlot(o,"Upper",r,s),this._linePointsToAlertPlot(n,"Lower",r,s)]},o.prototype.getInputsPropertyPage=function(){return null},o.prototype.getStylesPropertyPage=function(){return s.LineToolParallelChannelStylesPropertyPage},t.LineToolParallelChannel=o},function(e,t,i){"use strict";(function(e){function o(e,t){this._constructor="LineToolTrendAngleLine";var n=t||new s("linetooltrendangle");r.call(this,e,n),this._properties.addProperty("angle"),this._properties.angle=new o.AngleProperty(this),i.e(11).then(function(e){var t=i(1204).TrendAnglePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(8).Point,r=i(1).LineDataSource,s=i(7).DefaultProperty,a=i(2).propertyPages;inherit(o,r),o.AngleProperty=function(t){e.call(this),this._lineSource=t},inherit(o.AngleProperty,e),o.AngleProperty.prototype.value=function(){var e=this._lineSource._angle,t=180*e/Math.PI;return Math.round(t)},o.AngleProperty.prototype.setValue=function(e){var t,i,o,r,s,a,l=e*Math.PI/180;this._lineSource._angle=l,t=this._lineSource.pointToScreenPoint(this._lineSource.points()[0])[0],i=Math.cos(this._lineSource._angle),o=-Math.sin(this._lineSource._angle),r=new n(i,o),s=t.addScaled(r,this._lineSource._distance),a=this._lineSource.screenPointToPoint(s),
this._lineSource._points[1]=a,this._lineSource._model.updateSource(this._lineSource),this._lineSource.updateAllViews(),this._lineSource._model.updateSource(this._lineSource)},o.prototype.pointsCount=function(){return 2},o.prototype.title=function(){return"Trend Angle"},o.prototype._calculateAngle=function(){var e,t=this.pointToScreenPoint(this.points()[0])[0],i=this.pointToScreenPoint(this.points()[1])[0],o=i.subtract(t);o.length()>0?(o=o.normalized(),this._angle=Math.acos(o.x),o.y>0&&(this._angle=-this._angle),this._distance=i.subtract(t).length()):delete this._angle,e=this.properties(),e.hasOwnProperty("angle")&&this.properties().angle.listeners().fire(this.properties().angle)},o.prototype.addPoint=function(e,t){var i=r.prototype.addPoint.call(this,e,t);return i&&this._calculateAngle(),i},o.prototype.setLastPoint=function(e,t){r.prototype.setLastPoint.call(this,e,t),this.points().length>1&&this._calculateAngle()},o.prototype.axisPoints=function(){var e,t,i,o,r,s;return this.points().length<2?[]:(e=[this.points()[0]],t=this.pointToScreenPoint(this.points()[0])[1],i=Math.cos(this._angle)*this._distance,o=-Math.sin(this._angle)*this._distance,r=t.add(new n(i,o)),s=this.screenPointToPoint(r),e.push(s),e)},o.prototype.setPoint=function(e,t,i){r.prototype.setPoint.call(this,e,t,i),this.points().length>1&&1===e&&this._calculateAngle()},o.prototype.restoreData=function(e){this._angle=e.angle,this._distance=e.distance},o.prototype.state=function(e){var t=r.prototype.state.call(this,e);return t.angle=this._angle,t.distance=this._distance,t},o.prototype.cloneData=function(e){this._angle=e._angle,this._distance=e._distance},o.prototype.canHasAlert=function(){return!0},o.prototype._getAlertPlots=function(){return[this._linePointsToAlertPlot(this._points,null,this.properties().extendLeft.value(),this.properties().extendRight.value())]},o.prototype.getInputsPropertyPage=function(){return a.LineToolTrendAngleInputsPropertyPage},o.prototype.getStylesPropertyPage=function(){return a.LineToolTrendAngleStylesPropertyPage},t.LineToolTrendAngle=o}).call(t,i(37))},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolPitchfan";var o=t||this.createPropertiesObject("linetoolpitchfan");n.call(this,e,o),i.e(11).then(function(e){var t=i(1207).PitchfanLinePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(1).LineDataSource,r=i(31),s=i(2).propertyPages;inherit(o,n),o.prototype.pointsCount=function(){return 3},o.prototype.title=function(){return"Pitchfan"},o.prototype.processErase=function(e,t){var i="level"+t,o=this.properties()[i].visible;e.setProperty(o,!1,"Erase level line")},o.prototype.createPropertiesObject=function(e,t,i){return new r(e,t,i,{range:[0,8]})},o.prototype.getStylesPropertyPage=function(){return s.LineToolPitchfanStylesPropertyPage},t.LineToolPitchfan=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolGannSquare";var o=t||this.createPropertiesObject("linetoolgannsquare");s.call(this,e,o),i.e(11).then(function(e){
var t=i(1208).GannSquarePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n,r,s=i(1).LineDataSource,a=i(31),l=i(2).propertyPages;inherit(o,s),o.prototype.pointsCount=function(){return 2},o.prototype.title=function(){return"Gann Box"},n=[4.5,9,11.25,18,22.5,36,45],r=function(){for(var e=[],t=1e10,i=n.length-1,o=1,r=0,s=0;s<t;)s=n[r]*o,e.push(Math.round(s)),e.push(Math.ceil(-s)),r===i-1&&(o*=10),r=(r+1)%i;return e.sort(function(e,t){return e<t?-1:e>t?1:0}),e}(),o.prototype._alignPriceOnPattern=function(e,t){var i,o,r,s,a,l,c=Math.round(1e6*(e.price-t.price))/1e6;if(0===c)return t.price;for(i=n[0],o=n[n.length-1],r=1,s=Math.abs(c);s<i*r||o*r<s;)s<i*r?r*=.1:o*r<s&&(r*=10);for(a=o*r,l=n.length-2;l>=0&&!(n[l]*r<s);--l)a=n[l]*r;return e.price=t.price+(c>=0?a:-a),e},o.prototype._alignTimeOnPattern=function(e,t){var i,o=e.index-t.index;if(0===o)return 0;for(i=r.length-2;i>=0&&!(r[i]<o);--i);return i+=o>0?1:0,e.index=t.index+r[i],e},o.prototype._alignPointsFixedIncrement=function(e,t){return this._alignTimeOnPattern(e,t),this._alignPriceOnPattern(e,t),e},o.prototype._preparePoint=function(e,t){return t&&t.shift&&0!==this._points.length&&this._alignPointsFixedIncrement(e,this._points[0]),s.prototype._preparePoint.call(this,e,t)},o.prototype.setPoint=function(e,t,i){if(i&&i.shift){var o=0===e?this._points[1]:this._points[0];this._alignPointsFixedIncrement(t,o)}s.prototype.setPoint.call(this,e,t,i)},o.prototype.createPropertiesObject=function(e,t,i){return new a(e,t,i,{range:[1,7],prefixes:["h","v"],names:["coeff","color","visible"]})},o.prototype.getStylesPropertyPage=function(){return l.LineToolGannSquareStylesPropertyPage},t.LineToolGannSquare=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolFibSpeedResistanceFan";var o=t||this.createPropertiesObject("linetoolfibspeedresistancefan");n.call(this,e,o),i.e(11).then(function(e){var t=i(1209).FibSpeedResistanceFanPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(1).LineDataSource,r=i(31),s=i(2).propertyPages;inherit(o,n),o.prototype.pointsCount=function(){return 2},o.prototype.title=function(){return"Fib Speed Resistance Fan"},o.prototype.processErase=function(e,t){var i="h"===t.type?"hlevel"+t.index:"vlevel"+t.index,o=this.properties()[i].visible;e.setProperty(o,!1,"Erase level line")},o.prototype.createPropertiesObject=function(e,t,i){return new r(e,t,i,{range:[1,7],prefixes:["h","v"],names:["coeff","color","visible"]})},o.prototype.getStylesPropertyPage=function(){return s.LineToolFibSpeedResistanceFanStylesPropertyPage},t.LineToolFibSpeedResistanceFan=o},function(e,t,i){"use strict";var o,n,r,s,a,l,c,h,u;Object.defineProperty(t,"__esModule",{value:!0}),o=i(6),n=i(8),r=i(9),s=i(455),a=i(1),l=i(219),c=i(2),h=i(487),u=function(e){function t(t,o){var n,r=e.call(this,t,null==o?h.createPropertiesObject("linetoolganncomplex"):o)||this;return r.version=2,r._constructor="LineToolGannComplex",r._scaleRatioFormatter=new s.LimitedPrecisionNumericFormatter(7),
i.e(11).then(function(e){var t=i(1210).GannComplexPaneView;r._setPaneViews([new t(r,r.model())])}.bind(null,i)).catch(i.oe),n=r.properties(),r._adjustScaleRatio(n),n.subscribe(r,r._adjustScaleRatio),n.scaleRatio.subscribe(r,r._correctFirstPoint),r._syncStateExclusions=["scaleRatio"],n.addExclusion("scaleRatio"),r._onRestoringFactoryDefaults.subscribe(r,r._handleRestoringFactoryDefaults),r._onTemplateApplying.subscribe(r,r._handleTemplateApplying),r._onTemplateApplied.subscribe(r,r._correctFirstPoint),r}return o.__extends(t,e),t.prototype.migrateVersion=function(e,t,i){var o=this;1===e&&(this._points.length>=this.pointsCount()?setTimeout(function(){return o._migratePoint()}):this._timePoint.length>=this.pointsCount()&&this._pointAdded.subscribe(this,this._migratePoint))},t.prototype.destroy=function(){var e=this.properties();e.unsubscribe(this,this._adjustScaleRatio),e.scaleRatio.unsubscribe(this,this._correctFirstPoint),this._onRestoringFactoryDefaults.unsubscribe(this,this._handleRestoringFactoryDefaults),this._onTemplateApplying.unsubscribe(this,this._handleTemplateApplying),this._onTemplateApplied.unsubscribe(this,this._correctFirstPoint)},t.prototype.pointsCount=function(){return 2},t.prototype.title=function(){return"Gann Square"},t.prototype.addPoint=function(t,i,o){var n,s,a;return this._points.length>1&&this._points.pop(),n=e.prototype.addPoint.call(this,t,i,o),s=this.priceScale(),a=r.ensureNotNull(s).isLog(),!a&&n&&this._correctFirstPoint(),n},t.prototype.setPoint=function(t,i,o){e.prototype.setPoint.call(this,t,i,o),void 0!==o&&o.shift?this._correctPoint(t):this._correctScaleRatio()},t.prototype.setLastPoint=function(t,i){var o=this.priceScale();r.ensureNotNull(o).isLog()||(this._convertPriceFromPercentIfNeeded(t),this._points[1]=t,this._correctPoint(1),this._convertPriceToPercentIfNeeded(t)),e.prototype.setLastPoint.call(this,t,i)},t.prototype.createPropertiesObject=function(e,t,i){return h.createPropertiesObject(e,t,i)},t.prototype.getStylesPropertyPage=function(){return c.propertyPages.LineToolGannComplexStylesPropertyPage},t.prototype.isReversed=function(){return this.properties().reverse.value()},t.prototype.levelsCount=function(){return this.properties().levels.childCount()},t.prototype.levels=function(){var e,t,i=[],o=this.properties(),n=o.levels.childCount();for(e=0;e<n;e++)t=o.levels[e],i.push({index:e,visible:t.visible.value(),color:t.color.value(),width:t.width.value()});return i},t.prototype.fanLinesCount=function(){return this.properties().fanlines.childCount()},t.prototype.fanLines=function(){var e,t,i=[],o=this.properties(),n=o.fanlines.childCount();for(e=0;e<n;e++)t=o.fanlines[e],i.push({index:e,visible:t.visible.value(),x:t.x.value(),y:t.y.value(),color:t.color.value(),width:t.width.value()});return i},t.prototype.arcsCount=function(){return this.properties().arcs.childCount()},t.prototype.arcs=function(){var e,t,i=[],o=this.properties(),n=o.arcs.childCount();for(e=0;e<n;e++)t=o.arcs[e],i.push({index:e,visible:t.visible.value(),x:t.x.value(),y:t.y.value(),color:t.color.value(),
width:t.width.value()});return i},t.prototype.arcsBackgroundTransparency=function(){return this.properties().arcsBackground.transparency.value()},t.prototype.isArcsBackgroundFilled=function(){return this.properties().arcsBackground.fillBackground.value()},t.prototype.isLabelsVisible=function(){return this.properties().showLabels.value()},t.prototype.getLabelsStyle=function(){var e=this.properties(),t=e.labelsStyle,i=t.font,o=t.fontSize,n=t.bold,r=t.italic,s=e.levels.childCount();return{textColor:e.levels[s-1].color.value(),font:i.value(),fontSize:o.value(),bold:n.value(),italic:r.value()}},t.prototype.getScaleRatioStep=function(){return 1e-7},t.prototype.getScaleRatioFormatter=function(){return this._scaleRatioFormatter},t.prototype.getPriceDiff=function(){var e,t,i=this.points();return i.length<2?null:(e=i[0],t=i[1],t.price-e.price)},t.prototype.getPercantageDiff=function(){var e,t,i,o,n,r,s,a=this.points();return a.length<2?null:(e=a[0],t=a[1],i=this.model(),o=i.mainSeries(),n=o.priceScale(),r=n.priceRange(),s=o.firstValue(),null===r||null==s?null:r.convertToPercent(t.price,s)-r.convertToPercent(e.price,s))},t.prototype.getIndexDiff=function(){var e,t,i=this.points();return i.length<2?null:(e=i[0],t=i[1],t.index-e.index)},t.prototype.getScaleRatio=function(){var e=this.getPriceDiff(),t=this.getIndexDiff();return null!==e&&null!==t&&0!==t?Math.abs(e/t):null},t.prototype._correctScaleRatio=function(){var e=this.properties(),t=this.getScaleRatio();e.scaleRatio.setValue(t)},t.prototype._getAdjustedScaleRatio=function(){var e=this.model().mainSeries().priceScale(),t=this.model().timeScale();return l.scaleRatio(t,e)},t.prototype._adjustScaleRatio=function(e){var t=e.scaleRatio.value();""!==t&&null!==t||e.scaleRatio.setValue(this._getAdjustedScaleRatio())},t.prototype._correctPoint=function(e){var t,i,o,n,r,s,a,l;this._points.length<2||null!==(t=this.getIndexDiff())&&(i=this.properties(),o=i.scaleRatio.value(),null!==o&&(n=this._points[e],r=0===e?this._points[1]:this._points[0],s=n.price-r.price>0,a=n.index-r.index>0,l=s&&!a||!s&&a?-1:1,0===e&&(l=-l),n.price=r.price+l*t*o,this._pointChanged.fire(e)),this.normalizePoints())},t.prototype._correctFirstPoint=function(){this._correctPoint(this.isReversed()?0:1)},t.prototype._handleRestoringFactoryDefaults=function(){this.properties().scaleRatio.setValue(this._getAdjustedScaleRatio())},t.prototype._handleTemplateApplying=function(e){""===e.scaleRatio&&(e.scaleRatio=this._getAdjustedScaleRatio())},t.prototype._migratePoint=function(){var e,t;this.points().length<this.pointsCount()||null!==(e=this._getScreenPoints())&&(t=this.screenPointToPoint(e[1]),this.setPoint(1,t),this._pointAdded.unsubscribe(this,this._migratePoint))},t.prototype._getScreenPoints=function(){var e,t,i,o,r,s,a,l,c,h,u,d=this._calcAngle();return null===d?null:(e=this.points(),t=e[0],i=e[1],this.isReversed()&&(u=[i,t],t=u[0],i=u[1]),o=this.pointToScreenPoint(t)[0],r=this.pointToScreenPoint(i)[0],s=Math.sqrt(Math.pow(o.x-r.x,2)+Math.pow(o.y-r.y,2)),a=new n.Point(Math.cos(d),-Math.sin(d)),l=a.normalized(),
c=l.x<0?-1:1,h=l.y<0?-1:1,[o.addScaled(a,s),o.add(new n.Point(5*s*c,5*s*h))])},t.prototype._calcAngle=function(){var e,t=this.points(),i=t[0],o=t[1],n=this.pointToScreenPoint(i)[0],r=this.pointToScreenPoint(o)[0],s=r.subtract(n);return s.length()>0?(s=s.normalized(),e=Math.acos(s.x),s.y>0&&(e=-e),e):null},t}(a.LineDataSource),t.LineToolGannComplex=u,u.prototype.superclass=a.LineDataSource},function(e,t,i){"use strict";var o,n,r,s,a,l;Object.defineProperty(t,"__esModule",{value:!0}),o=i(6),n=i(8),r=i(1),s=i(487),a=i(2),l=function(e){function t(t,o){var n=e.call(this,t,null==o?s.createPropertiesObject("linetoolgannfixed"):o)||this;return n._constructor="LineToolGannFixed",i.e(11).then(function(e){var t=i(1211).GannFixedPaneView;n._setPaneViews([new t(n,n.model())])}.bind(null,i)).catch(i.oe),n.properties().reverse.subscribe(n,n._reversePoints),n}return o.__extends(t,e),t.prototype.pointsCount=function(){return 2},t.prototype.title=function(){return"Gann Square Fixed"},t.prototype.createPropertiesObject=function(e,t,i){return s.createPropertiesObject(e,t,i)},t.prototype.getStylesPropertyPage=function(){return a.propertyPages.LineToolGannFixedStylesPropertyPage},t.prototype.axisPoints=function(){var e=this.points(),t=this.getScreenPoints();return e.length<2||t.length<2?[]:[e[0],this.screenPointToPoint(t[1])]},t.prototype.getScreenPoints=function(){var e,t,i,o,r,s,a,l,c,h,u=this.points();return u.length<2?[]:null===(e=this._calcAngle())?[]:(t=u[0],i=u[1],o=this.pointToScreenPoint(t)[0],r=this.pointToScreenPoint(i)[0],s=Math.sqrt(Math.pow(o.x-r.x,2)+Math.pow(o.y-r.y,2)),a=new n.Point(Math.cos(e),-Math.sin(e)),l=a.normalized(),c=l.x<0?-1:1,h=l.y<0?-1:1,[o.addScaled(a,s),o.add(new n.Point(5*s*c,5*s*h))])},t.prototype.levelsCount=function(){return this.properties().levels.childCount()},t.prototype.levels=function(){var e,t,i=[],o=this.properties(),n=o.levels.childCount();for(e=0;e<n;e++)t=o.levels[e],i.push({index:e,visible:t.visible.value(),color:t.color.value(),width:t.width.value()});return i},t.prototype.fanLinesCount=function(){return this.properties().fanlines.childCount()},t.prototype.fanLines=function(){var e,t,i=[],o=this.properties(),n=o.fanlines.childCount();for(e=0;e<n;e++)t=o.fanlines[e],i.push({index:e,visible:t.visible.value(),x:t.x.value(),y:t.y.value(),color:t.color.value(),width:t.width.value()});return i},t.prototype.arcsCount=function(){return this.properties().arcs.childCount()},t.prototype.arcs=function(){var e,t,i=[],o=this.properties(),n=o.arcs.childCount();for(e=0;e<n;e++)t=o.arcs[e],i.push({index:e,visible:t.visible.value(),x:t.x.value(),y:t.y.value(),color:t.color.value(),width:t.width.value()});return i},t.prototype.arcsBackgroundTransparency=function(){return this.properties().arcsBackground.transparency.value()},t.prototype.isArcsBackgroundFilled=function(){return this.properties().arcsBackground.fillBackground.value()},t.prototype._calcAngle=function(){var e,t,i,o,n,r,s=this.points();return s.length<2?null:(e=s[0],t=s[1],i=this.pointToScreenPoint(e)[0],o=this.pointToScreenPoint(t)[0],
n=o.subtract(i),n.length()<=0?null:(n=n.normalized(),r=Math.acos(n.x),n.y>0&&(r=-r),r))},t.prototype._reversePoints=function(){var e=this._points,t=e[0],i=e[1];this._points[0]=i,this._points[1]=t,this.normalizePoints(),this.restart()},t}(r.LineDataSource),t.LineToolGannFixed=l,l.prototype.superclass=r.LineDataSource},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolGannFan";var o=t||this.createPropertiesObject("linetoolgannfan");n.call(this,e,o),i.e(11).then(function(e){var t=i(1212).GannFanPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(1).LineDataSource,r=i(31),s=i(2).propertyPages;inherit(o,n),o.prototype.pointsCount=function(){return 2},o.prototype.title=function(){return"Gann Fan"},o.prototype.processErase=function(e,t){var i="level"+t,o=this.properties()[i].visible;e.setProperty(o,!1,"Erase level line")},o.prototype.createPropertiesObject=function(e,t,i){return new r(e,t,i,{range:[1,9]})},o.prototype.getStylesPropertyPage=function(){return s.LineToolGannFanStylesPropertyPage},t.LineToolGannFan=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolDisjointAngle";var s=t||new r("linetooldisjointangle");n.call(this,e,s),this.version=o.version,i.e(11).then(function(e){var t=i(1214).DisjointAnglePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(1).LineDataSource,r=i(7).DefaultProperty,s=i(2).propertyPages;inherit(o,n),o.version=1,o.prototype.pointsCount=function(){return 3},o.prototype.title=function(){return"Disjoint Angle"},o.prototype.addPoint=function(e,t){return t&&t.shift&&2===this.points().length&&this._snapPoint45Degree(e,this.points()[this.points().length-2]),n.prototype.addPoint.call(this,e)},o.prototype.setLastPoint=function(e,t){return t&&t.shift&&2===this.points().length&&this._snapPoint45Degree(e,this.points()[this.points().length-2]),n.prototype.setLastPoint.call(this,e)},o.prototype.setPoint=function(e,t,i){var o,r,s,a,l,c=.5*(this._points[1].price+this._points[2].price);i&&i.shift&&1===e&&(o=0,this._snapPoint45Degree(t,this.points()[o])),e<3&&n.prototype.setPoint.call(this,e,t),0!==e&&2!==e&&(1===e?(r=this._points[1].price-c,this._points[2].price=this._points[1].price-2*r):3===e&&(s=this.priceScale(),a=t.price,s.isPercent()&&(l=this.ownerSource().firstValue(),a=s.priceRange().convertFromPercent(a,l)),r=a-this._points[2].price,this._points[0].price=this._points[1].price-r,this._points[0].index=t.index))},o.prototype.canHasAlert=function(){return!0},o.prototype._getAlertPlots=function(){var e,t,i,o,n,r,s,a,l,c=this._points[0],h=this._points[1],u=[];return c.index<=h.index?(u.push(c),u.push(h)):(u.push(h),u.push(c)),e=this._points[2],e.time=h.time,e.index=h.index,t={price:e.price+(h.price-c.price),time:c.time,index:c.index},i=[],e.index<=t.index?(i.push(e),i.push(t)):(i.push(t),i.push(e)),u[0].price>i[0].price?(o=u,n=i):i[0].price>u[0].price?(o=i,n=u):i[1].price>u[1].price?(o=i,n=u):(o=u,n=i),a=this.properties().extendLeft.value(),
l=this.properties().extendRight.value(),c.index<=h.index?(r=a,s=l):(r=l,s=a),[this._linePointsToAlertPlot(o,"Upper",r,s),this._linePointsToAlertPlot(n,"Lower",r,s)]},o.prototype.getInputsPropertyPage=function(){return null},o.prototype.getStylesPropertyPage=function(){return s.LineToolDisjointAngleStylesPropertyPage},t.LineToolDisjointAngle=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolFlatBottom";var s=t||new r("linetoolflatbottom");n.call(this,e,s),this.version=o.version,i.e(11).then(function(e){var t=i(1215).FlatBottomPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(1).LineDataSource,r=i(7).DefaultProperty,s=i(2).propertyPages;inherit(o,n),o.version=1,o.prototype.pointsCount=function(){return 3},o.prototype.title=function(){return"Flat Bottom"},o.prototype.addPoint=function(e,t){return t&&t.shift&&2===this.points().length&&this._snapPoint45Degree(e,this.points()[this.points().length-2]),n.prototype.addPoint.call(this,e)},o.prototype.setLastPoint=function(e,t){return t&&t.shift&&2===this.points().length&&this._snapPoint45Degree(e,this.points()[this.points().length-2]),n.prototype.setLastPoint.call(this,e)},o.prototype.setPoint=function(e,t,i){if(i&&i.shift&&1===e){this._snapPoint45Degree(t,this.points()[0])}e<3?n.prototype.setPoint.call(this,e,t):this._points[0].index=t.index},o.prototype.canHasAlert=function(){return!0},o.prototype._getAlertPlots=function(){var e,t,i,o,n,r,s,a,l,c=this._points[0],h=this._points[1],u=[];return c.index<=h.index?(u.push(c),u.push(h)):(u.push(h),u.push(c)),e=this._points[2],e.time=h.time,e.index=h.index,t={price:e.price,time:c.time,index:c.index},i=[],e.index<=t.index?(i.push(e),i.push(t)):(i.push(t),i.push(e)),u[0].price>i[0].price?(o=u,n=i):i[0].price>u[0].price?(o=i,n=u):i[1].price>u[1].price?(o=i,n=u):(o=u,n=i),a=this.properties().extendLeft.value(),l=this.properties().extendRight.value(),c.index<=h.index?(r=a,s=l):(r=l,s=a),[this._linePointsToAlertPlot(o,"Upper",r,s),this._linePointsToAlertPlot(n,"Lower",a,s)]},o.prototype.getInputsPropertyPage=function(){return null},o.prototype.getStylesPropertyPage=function(){return s.LineToolFlatBottomStylesPropertyPage},t.LineToolFlatBottom=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolIcon";var s=t||new r("linetoolicon");s.addExclusion("angle"),s.addExclusion("scale"),n.call(this,e,s),this.version=o.version,i.e(11).then(function(e){var t=i(1216).IconPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(1).LineDataSource,r=i(7).DefaultProperty,s=i(2).propertyPages;inherit(o,n),o.version=1,o.anchorLimit=80,o.prototype.getAnchorLimit=function(){return o.anchorLimit},o.prototype.pointsCount=function(){return 1},o.prototype.title=function(){return"Icon"},o.prototype.startChanging=function(e,t){var i,r;n.prototype.startChanging.call(this,e,t),i=this.properties(),r=65536*i.icon.value()+i.size.value(),this._startChangeWidth=this._paneViews[0]._cache[r],
i.size.value()<o.anchorLimit?this._sizeScale=i.size.value()/o.anchorLimit:this._sizeScale=1,this._origScale=i.scale.value(),this._startChangeWidth*this._origScale<o.anchorLimit?this._resizeRatio=this._startChangeWidth/o.anchorLimit:this._resizeRatio=1},o.prototype.endChanging=function(){n.prototype.endChanging.call(this),delete this._startChangeWidth,delete this._sizeScale,delete this._resizeRatio},o.prototype.setPoint=function(e,t,i){var n,r,s,a,l,c,h,u,d,p,f=$.extend({},t),_=this.priceScale();_.isPercent()&&(n=this.ownerSource().firstValue(),f.price=_.priceRange().convertFromPercent(f.price,n)),i&&i.shift&&this._properties.snapTo45Degrees&&this._snapPoint45Degree(f,this.points()[0]),r=this.pointToScreenPoint(this.points()[0])[1],s=this.pointToScreenPoint(f)[1],0===e||1===e?(a=s.subtract(r).normalized(),l=2*s.subtract(r).length(),l*=this._sizeScale,this._properties.size.setValue(l),c=-a.x,h=Math.acos(c),Math.asin(a.y)>0&&(h=2*Math.PI-h),0===e&&(h+=Math.PI),this._properties.angle.setValue(h)):(u=this._startChangeWidth,d=s.subtract(r).length(),this._origScale*u<o.anchorLimit?(p=o.anchorLimit/2,this._properties.scale.setValue(this._origScale*d/p)):(p=u/2,this._properties.scale.setValue(d/p)))},o.prototype.getInputsPropertyPage=function(){return null},o.prototype.getStylesPropertyPage=function(){return s.LineToolIconStylesPropertyPage},o.prototype.getSourceIcon=function(){return{type:"text",text:String.fromCharCode(this.properties().icon.value())}},t.LineToolIcon=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolRotatedRectangle";var o=t||new a("linetoolrotatedrectangle");s.call(this,e,o),i.e(11).then(function(e){var t=i(1217).RotatedRectanglePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(8).Point,r=i(51).distanceToLine,s=i(1).LineDataSource,a=i(7).DefaultProperty,l=i(2).propertyPages;inherit(o,s),o.prototype.startChanging=function(e,t){var i,o,n,a;s.prototype.startChanging.call(this,e,t),0!==e&&1!==e||(i=this._paneViews[0],o=i._points[0],n=i._points[1],a=i._points[2],this._distance=r(o,n,a).distance)},o.prototype.setPoint=function(e,t,i){var o,r,a,l,c,h,u;s.prototype.setPoint.call(this,e,t,i),0!==e&&1!==e||(o=this._paneViews[0],o.update(),r=o._points[0],a=o._points[1],l=a.subtract(r),c=new n(l.y,-l.x).normalized().scaled(this._distance),h=r.add(c),u=this.screenPointToPoint(h),this._points[2]=u)},o.prototype.endChanging=function(){delete this._distance},o.prototype.pointsCount=function(){return 3},o.prototype.title=function(){return"Rotated Rectangle"},o.prototype.getInputsPropertyPage=function(){return null},o.prototype.getStylesPropertyPage=function(){return l.LineToolRectangleStylesPropertyPage},t.LineToolRotatedRectangle=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolFibSpiral";var o=t||new r("linetoolfibspiral");n.call(this,e,o),i.e(11).then(function(e){var t=i(1218).FibSpiralPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}
var n=i(1).LineDataSource,r=i(7).DefaultProperty,s=i(2).propertyPages;inherit(o,n),o.prototype.pointsCount=function(){return 2},o.prototype.title=function(){return"Fib Spiral"},o.prototype.getStylesPropertyPage=function(){return s.LineToolFibSpiralStylesPropertyPage},t.LineToolFibSpiral=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolHeadAndShoulders";var o=t||new r("linetoolheadandshoulders");n.call(this,e,o),i.e(11).then(function(e){var t=i(1219).LineToolHeadAndShouldersPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(1).LineDataSource,r=i(7).DefaultProperty,s=i(2).propertyPages;inherit(o,n),o.prototype.pointsCount=function(){return 7},o.prototype.title=function(){return"Head and Shoulders"},o.prototype.getStylesPropertyPage=function(){return s.LineToolLineTool5PointsPatternStylesPropertyPage},t.LineToolHeadAndShoulders=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolTriangle";var o=t||new r("linetooltriangle");n.call(this,e,o),i.e(11).then(function(e){var t=i(1220).TrianglePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(1).LineDataSource,r=i(7).DefaultProperty,s=i(2).propertyPages;inherit(o,n),o.prototype.pointsCount=function(){return 3},o.prototype.title=function(){return"Triangle"},o.prototype.getStylesPropertyPage=function(){return s.LineToolTriangleStylesPropertyPage},t.LineToolTriangle=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolTrianglePattern";var o=t||new r("linetooltrianglepattern");n.call(this,e,o),i.e(11).then(function(e){var t=i(1221).LineToolTrianglePatternPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(1).LineDataSource,r=i(7).DefaultProperty,s=i(2).propertyPages;inherit(o,n),o.prototype.pointsCount=function(){return 4},o.prototype.title=function(){return"Triangle Pattern"},o.prototype.getStylesPropertyPage=function(){return s.LineToolTrianglePatternStylesPropertyPage},t.LineToolTrianglePattern=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolThreeDrivers";var o=t||new r("linetoolthreedrivers");n.call(this,e,o),i.e(11).then(function(e){var t=i(1222).LineToolThreeDrivesPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(1).LineDataSource,r=i(7).DefaultProperty,s=i(2).propertyPages;inherit(o,n),o.prototype.pointsCount=function(){return 7},o.prototype.title=function(){return"Three Drives Pattern"},o.prototype.getStylesPropertyPage=function(){return s.LineToolABCDPatternStylesPropertyPage},t.LineToolThreeDrivers=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolABCD";var o=t||new r("linetoolabcd");n.call(this,e,o),i.e(11).then(function(e){var t=i(1223).ABCDPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(1).LineDataSource,r=i(7).DefaultProperty,s=i(184).DateTimeFormatter,a=i(2).propertyPages;inherit(o,n),
o.prototype.pointsCount=function(){return 4},o.prototype.title=function(){return"ABCD Pattern"},o.prototype._tooltipFieldsHash={time0:{title:"Date 1",value:null},price0:{title:"Price 1",value:null},time1:{title:"Date 2",value:null},price1:{title:"Price 2",value:null},time2:{title:"Date 3",value:null},price2:{title:"Price 3",value:null},time3:{title:"Date 4",value:null},price3:{title:"Price 4",value:null}},o.prototype._updateTooltip=function(){var e,t,i,o,n=this._tooltipFieldsHash,r=this.points().m_values;r[0]&&(e=this._model.timeScale().indexToUserTime(r[0].index),n.time0.value=e?new s(this._model.mainSeries().isDWM()).format(e):0,n.price0.value=this._model.mainSeries()._formatter.format(r[0].price)),r[1]&&(t=this._model.timeScale().indexToUserTime(r[1].index),n.time1.value=t?new s(this._model.mainSeries().isDWM()).format(t):0,n.price1.value=this._model.mainSeries()._formatter.format(r[1].price)),r[2]&&(i=this._model.timeScale().indexToUserTime(r[2].index),n.time2.value=i?new s(this._model.mainSeries().isDWM()).format(i):0,n.price2.value=this._model.mainSeries()._formatter.format(r[2].price)),r[3]&&(o=this._model.timeScale().indexToUserTime(r[3].index),n.time3.value=o?new s(this._model.mainSeries().isDWM()).format(o):0,n.price3.value=this._model.mainSeries()._formatter.format(r[3].price))},o.prototype.tooltip=function(){return this._updateTooltip(),this._formatTooltip()},o.prototype.getStylesPropertyPage=function(){return a.LineToolABCDPatternStylesPropertyPage},t.LineToolABCD=o},function(e,t,i){"use strict";var o,n,r;Object.defineProperty(t,"__esModule",{value:!0}),o=i(6),n=i(80),r=function(e){function t(t,i){var o=e.call(this)||this;return o._source=t,o._data=i,o}return o.__extends(t,e),t.prototype._updateRendererData=function(e){var t,i,o;e.visible=!1,t=this._source.priceScale(),0===this._source.points().length||null===t||t.isEmpty()||(i=this._data.priceProperty.value(),o=this._data.colorProperty.value(),e.background=o,e.color=this.generateTextColor(o),e.coordinate=t.priceToCoordinate(i),e.text=t.formatter().format(i),e.visible=!0)},t}(n.PriceAxisView),t.LineToolRiskRewardPriceAxisView=r},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolPolyline";var o;t?o=t:(o=new s("linetoolpolyline"),o.filled.setValue(!1)),r.call(this,e,o),o.addExclusion("filled"),i.e(11).then(function(e){var t=i(1225).PolylinePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(8).Point,r=i(1).LineDataSource,s=i(7).DefaultProperty,a=i(2).propertyPages;inherit(o,r),o.prototype.pointsCount=function(){return-1},o.prototype.title=function(){return"Polyline"},o.prototype.addPoint=function(e){var t,i,o,s,a,l,c,h,u,d,p=this._model.timeScale().indexToCoordinate(e.index),f=e.price,_=null;if(this.priceScale().isPercent()&&(_=this.ownerSource().firstValue()),t=this.priceScale().priceToCoordinate(f),i=5,this._points.length>0){if(o=this._points[this._points.length-1],s=this._model.timeScale().indexToCoordinate(o.index),a=o.price,
this.priceScale().isPercent()&&(a=this.priceScale().priceRange().convertToPercent(a,_)),l=this.priceScale().priceToCoordinate(a),new n(p,t).subtract(new n(s,l)).length()<i)return this._lastPoint=null,this.normalizePoints(),this.createServerPoints(),!0;if(c=this._points[0],h=this._model.timeScale().indexToCoordinate(c.index),u=c.price,this.priceScale().isPercent()&&(u=this.priceScale().priceRange().convertToPercent(u,_)),d=this.priceScale().priceToCoordinate(u),new n(p,t).subtract(new n(h,d)).length()<i)return this._properties.filled.setValue(!0),this._lastPoint=null,this.normalizePoints(),this.createServerPoints(),!0}return r.prototype.addPoint.call(this,e)},o.prototype.setPoint=function(e,t){var i,o,s,a,l,c;r.prototype.setPoint.call(this,e,t),this._model.timeScale().isEmpty()||this.priceScale().isEmpty()||e!==this._points.length-1&&0!==e||(i=5,o=this._model.timeScale().indexToCoordinate(t.index),s=this.priceScale().priceToCoordinate(t.price),a=e===this._points.length-1?this._points[0]:this._points[this._points.length-1],l=this._model.timeScale().indexToCoordinate(a.index),c=this.priceScale().priceToCoordinate(a.price),new n(o,s).subtract(new n(l,c)).length()<i&&this._properties.filled.setValue(!0))},o.prototype.getInputsPropertyPage=function(){return null},o.prototype.getStylesPropertyPage=function(){return a.LineToolPolylineStylesPropertyPage},t.LineToolPolyline=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolPrediction";var o=t||new s("linetoolprediction");o.merge({status:l.AlertStatus.Waiting}),r.call(this,e,o),i.e(11).then(function(e){var t=i(1226).PredictionPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(9).ensureNotNull,r=i(1).LineDataSource,s=i(7).DefaultProperty,a=i(2).propertyPages,l=i(653);inherit(o,r),o.prototype.status=function(){return this._properties.status.value()},o.prototype.setStatus=function(e){return this._properties.status.setValue(e)},o.prototype.pointsCount=function(){return 2},o.prototype.title=function(){return"Forecast"},o.prototype.restorePoints=function(e,t,i){r.prototype.restorePoints.call(this,e,t,i),this.checkAlert()},o.prototype.checkAlert=function(){var e,t,i,o;if(!(this._points.length<2||this._model.mainSeries().bars().isEmpty())){if(e=this._points[1],this.status())return void(e.index>this._model.timeScale().baseIndex()&&this.setStatus(l.AlertStatus.Waiting));t=this._model.mainSeries().bars().valueAt(e.index),null!==t&&(i=this.direction(),i===l.Direction.Up&&t[TradingView.HIGH_PLOT]>=e.price?this.setStatus(l.AlertStatus.Success):i===l.Direction.Down&&t[TradingView.LOW_PLOT]<=e.price?this.setStatus(l.AlertStatus.Success):(o=n(this._model.mainSeries().bars().lastIndex()),e.index!==o&&this.setStatus(l.AlertStatus.Failure)))}},o.prototype.addPoint=function(e){var t=r.prototype.addPoint.call(this,e);return t&&this.checkAlert(),t},o.prototype.endChanging=function(){r.prototype.endChanging.call(this),this.setStatus(l.AlertStatus.Waiting),this.checkAlert()},o.prototype.onData=function(e){
r.prototype.onData.call(this,e),this.checkAlert()},o.prototype.endMoving=function(){r.prototype.endMoving.call(this),this.setStatus(l.AlertStatus.Waiting),this.checkAlert()},o.prototype.direction=function(){var e,t;return this.points().length<2?l.Direction.Up:(e=this.points()[0],t=this.points()[1],t.price>e.price?l.Direction.Up:l.Direction.Down)},o.prototype.getStylesPropertyPage=function(){return a.LineToolPredictionStylesPropertyPage},t.LineToolPrediction=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolPriceLabel";var o=t||new r("linetoolpricelabel");n.call(this,e,o),i.e(11).then(function(e){var t=i(1227).PriceLabelPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(1).LineDataSource,r=i(7).DefaultProperty,s=i(2).propertyPages;inherit(o,n),o.prototype.pointsCount=function(){return 1},o.prototype.title=function(){return"Price Label"},o.prototype.getStylesPropertyPage=function(){return s.LineToolPriceLabelStylesPropertyPage},t.LineToolPriceLabel=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolBrush";var o=t||new r("linetoolbrush");n.call(this,e,o),this._finished=!1,i.e(11).then(function(e){var t=i(1229).BrushPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(1).LineDataSource,r=i(7).DefaultProperty,s=i(2).propertyPages;inherit(o,n),o.prototype.pointsCount=function(){return-1},o.prototype.finished=function(){return this._finished},o.prototype.finish=function(){this._finished=!0,this._lastPoint=null,this.normalizePoints(),this.createServerPoints()},o.prototype.title=function(){return"Brush"},o.prototype.percentDistance=function(e,t){return Math.abs((t-e)/e)},o.prototype.addPoint=function(e){var t,i,o;return!!this._finished||(this._lastPoint=null,this._points.length>0&&(t=this._points[this._points.length-1],i=this.pointToScreenPoint(t)[1],o=this.pointToScreenPoint(e)[1],o.subtract(i).length()<2)?this._finished:(n.prototype.addPoint.call(this,e),this._finished))},o.prototype.restorePoints=function(e,t,i){n.prototype.restorePoints.call(this,e,t,i),this._finished=!0},o.prototype.getInputsPropertyPage=function(){return null},o.prototype.getStylesPropertyPage=function(){return s.LineToolBrushStylesPropertyPage},t.LineToolBrush=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolArc";var n=t||new d("linetoolarc");u.call(this,e,n),this.version=o.version,i.e(11).then(function(e){var t=i(1230).ArcPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(8).Point,r=i(51).distanceToLine,s=i(580),a=s.rotationMatrix,l=s.scalingMatrix,c=s.translationMatrix,h=s.transformPoint,u=i(1).LineDataSource,d=i(7).DefaultProperty,p=i(2).propertyPages;inherit(o,u),o.prototype.startChanging=function(e,t){var i,o,s,a,l,c,h;u.prototype.startChanging.call(this,e,t),0!==e&&1!==e||(i=this.pointToScreenPoint(this._points[0])[0],o=this.pointToScreenPoint(this._points[1])[0],s=this.pointToScreenPoint(this._points[2])[0],
this._dist=r(i,o,s).distance,a=o.subtract(i),l=new n(-a.y,a.x),c=i.add(o).scaled(.5),h=s.subtract(c),h.dotProduct(l)<0&&(this._dist=-this._dist))},o.prototype.pointsCount=function(){return 3},o.prototype.title=function(){return"Arc"},o.prototype.setPoint=function(e,t){var i,o,s,u,d,p,f,_,m,g,v,y,b,S=$.extend({},t),w=this.pointToScreenPoint(this._points[0])[0],T=this.pointToScreenPoint(this._points[1])[0],P=this.pointToScreenPoint(this._points[2])[0],C=this.priceScale();switch(C.isPercent()&&(i=this.ownerSource().firstValue(),S.price=C.priceRange().convertFromPercent(S.price,i)),e){case 0:w=this.pointToScreenPoint(S)[0],o=T.subtract(w),s=w.add(T).scaled(.5),u=new n(-o.y,o.x),u=u.normalized(),P=s.add(u.scaled(this._dist)),P=this.screenPointToPoint(P),this._points[0]=S,this._points[2]=P;break;case 1:d=r(w,T,P).distance,T=this.pointToScreenPoint(S)[0],o=T.subtract(w),s=w.add(T).scaled(.5),u=new n(-o.y,o.x),u=u.normalized(),P=s.add(u.scaled(this._dist)),P=this.screenPointToPoint(P),this._points[1]=S,this._points[2]=P;break;case 2:S=this.pointToScreenPoint(S)[0],d=r(w,T,S).distance,o=T.subtract(w),s=w.add(T).scaled(.5),u=new n(-o.y,o.x),u=u.normalized(),P=s.add(u.scaled(d)),p=s.add(u.scaled(-d)),f=o.length(),_=o.x/f,m=o.y/f,g=Math.acos(_),m<0&&(g=-g),v=c(-s.x,-s.y),S=h(v,S),y=h(v,P),v=a(-g),S=h(v,S),y=h(v,y),v=l(1,f/(2*d)),S=h(v,S),y=h(v,y),b=S.y*y.y>=0?new n(P.x,P.y):new n(p.x,p.y),b=this.screenPointToPoint(b),this._points[2]=b}this.normalizePoints()},o.version=2,o.prototype.migrateVersion=function(e,t,i){var o,n;1===e&&2===this._points.length&&(o=(2*this._points[0].price+3*this._points[1].price)/5,this._points.append({price:o,index:this._points[1].index})),1===e&&2===this._timePoint.length&&(o=(2*this._timePoint[0].price+3*this._timePoint[1].price)/5,n={price:o,offset:this._timePoint[1].offset,time_t:this._timePoint[1].time_t},this._timePoint.append(n))},o.prototype.getInputsPropertyPage=function(){return null},o.prototype.getStylesPropertyPage=function(){return p.LineToolArcStylesPropertyPage},t.LineToolArc=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolCallout";var o=t||new s("linetoolcallout");n.call(this,e,o),this._barOffset=0,this._timeScale=e.timeScale(),i.e(11).then(function(e){var t=i(1231).CalloutPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(1).LineDataSource,r=i(52).DataSource,s=i(7).DefaultProperty,a=i(2).propertyPages,l=i(654).CalloutConsts;inherit(o,n),o.prototype.pointsCount=function(){return 2},o.prototype.title=function(){return"Callout"},o.prototype.correctPoints=function(e){var t=this._currentMovingPoint.index-this._startMovingPoint.index,i=this._currentMovingPoint.price-this._startMovingPoint.price,o=e[1];o.index+=t,o.price+=i,e[1]=o},o.prototype.addPoint=function(e){var t=n.prototype.addPoint.call(this,e);return t&&this._calculateBarOffset(),t},o.prototype._calculateBarOffset=function(){this.points().length>1&&(this._barOffset=this.points()[1].index-this.points()[0].index)},o.prototype.setLastPoint=function(e){
n.prototype.setLastPoint.call(this,e),2===this.points().length&&this._calculateBarOffset()},o.prototype.setPoint=function(e,t){var i,o,r,s,a;switch(e){case 0:n.prototype.setPoint.call(this,e,t),this._calculateBarOffset();break;case 1:if(i=this.properties(),!i.wordWrapWidth)return;if(o=this._points,r=this._dragStartLeftEdgeIndex,s=Math.round((t.index-r)/2),isFinite(r)&&isFinite(s)){if(o[1]={index:r+s,price:o[1].price},this._calculateBarOffset(),this.normalizePoints(),a=this._timeScale.indexToCoordinate(r+2*s)-this._timeScale.indexToCoordinate(r)-l.RoundRadius-l.TextMargins,!isFinite(a))return;i.wordWrapWidth.setValue(Math.max(l.MinWidth,a));break}o[1]=t,this._calculateBarOffset(),this.normalizePoints()}},o.prototype.startDragPoint=function(e,t){var i=this.properties();1===e&&i.wordWrap&&i.wordWrap.value()&&(this._dragStartLeftEdgeIndex=2*this.points()[1].index-t.index)},o.prototype.move=function(e){n.prototype.move.call(this,e),this._calculateBarOffset()},o.prototype.state=function(e){var t=n.prototype.state.call(this,e);return t.barOffset=this._barOffset,t},o.prototype.restoreData=function(e){e.barOffset?this._barOffset=e.barOffset:this._calculateBarOffset(),this._calculatePoint2()},o.prototype.setPriceScale=function(e){r.prototype.setPriceScale.call(this,e),e&&e.priceRange()&&this._calculatePoint2()},o.prototype._calculatePoint2=function(){var e,t;this._model.lineBeingEdited()!==this&&this._model.sourceBeingMoved()!==this&&(this._points.length<2||(e=this.points()[0],t=this.points()[1],this._points[1]={price:t.price,index:e.index+this._barOffset}))},o.prototype.getStylesPropertyPage=function(){return a.LineToolCalloutStylesPropertyPage},t.LineToolCallout=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolBalloon";var o=t||new r("linetoolballoon");n.call(this,e,o),i.e(11).then(function(e){var t=i(1232).BalloonPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(1).LineDataSource,r=i(7).DefaultProperty,s=i(2).propertyPages;inherit(o,n),o.prototype.pointsCount=function(){return 1},o.prototype.title=function(){return"Balloon"},o.prototype.getStylesPropertyPage=function(){return s.LineToolBalloonStylesPropertyPage},t.LineToolBalloon=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolHorzLine";var o=t||new s("linetoolhorzline");this._priceAxisView=new r(this),n.call(this,e,o),i.e(11).then(function(e){var t=i(1233).HorzLinePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(1).LineDataSource,r=i(491).LineToolHorzLinePriceAxisView,s=i(7).DefaultProperty,a=i(2).propertyPages;inherit(o,n),o.prototype.state=function(e){var t=n.prototype.state.call(this,e);return t.points&&0!==t.points.length&&(t.points[0].offset=0),t},o.prototype.pointsCount=function(){return 1},o.prototype.title=function(){return"Horizontal Line"},o.prototype.priceAxisViews=function(e,t){
return this.isSourceHidden()?null:t===this.priceScale()&&this.properties().showPrice.value()&&this._model.paneForSource(this)===e?[this._priceAxisView]:null},o.prototype.updateAllViews=function(){n.prototype.updateAllViews.call(this),this._priceAxisView.update()},o.prototype.canHasAlert=function(){return!0},o.prototype._getAlertPlots=function(){return[this.points()[0].price]},o.prototype.getInputsPropertyPage=function(){return a.LineToolHorzLineInputsPropertyPage},o.prototype.getStylesPropertyPage=function(){return a.LineToolHorzLineStylesPropertyPage},t.LineToolHorzLine=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolHorzRay";var o=t||new s("linetoolhorzray");this._priceAxisView=new r(this),n.call(this,e,o),i.e(11).then(function(e){var t=i(1234).HorzRayPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(1).LineDataSource,r=i(491).LineToolHorzLinePriceAxisView,s=i(7).DefaultProperty,a=i(2).propertyPages;inherit(o,n),o.prototype.pointsCount=function(){return 1},o.prototype.title=function(){return"Horizontal Ray"},o.prototype.priceAxisViews=function(e,t){return this.isSourceHidden()?null:t===this.priceScale()&&this.properties().showPrice.value()&&this._model.paneForSource(this)===e?[this._priceAxisView]:null},o.prototype.updateAllViews=function(){n.prototype.updateAllViews.call(this),this._priceAxisView.update()},o.prototype.canHasAlert=function(){return!0},o.prototype._getAlertPlots=function(){var e=this._points[0],t={index:e.index+1,price:e.price};return[this._linePointsToAlertPlot([e,t],null,!1,!0)]},o.prototype.getStylesPropertyPage=function(){return a.LineToolHorzLineStylesPropertyPage},t.LineToolHorzRay=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolRectangle";var o=t||new r("linetoolrectangle");n.call(this,e,o),i.e(11).then(function(e){var t=i(1235).RectanglePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(1).LineDataSource,r=i(7).DefaultProperty,s=i(2).propertyPages;inherit(o,n),o.prototype.pointsCount=function(){return 2},o.prototype.title=function(){return"Rectangle"},o.prototype.setPoint=function(e,t,i){var o,r,s;if(e<2)return void n.prototype.setPoint.call(this,e,t,i);i&&i.shift&&this._properties.snapTo45Degrees&&(o=this.points()[0],r=this.points()[1],s={price:2===e?o.price:r.price,index:2===e?r.index:o.index},this._snapPoint45Degree(t,s)),this._convertPriceFromPercentIfNeeded(t),3===e?(this._points[0].price=t.price,this._points[1].index=t.index):(this._points[1].price=t.price,this._points[0].index=t.index),this.normalizePoints()},o.prototype.getStylesPropertyPage=function(){return s.LineToolRectangleStylesPropertyPage},t.LineToolRectangle=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolEllipse";var n=t||new a("linetoolellipse");s.call(this,e,n),this.version=o.version,i.e(11).then(function(e){var t=i(1236).EllipsePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}
var n=i(8).Point,r=i(51).distanceToLine,s=i(1).LineDataSource,a=i(7).DefaultProperty,l=i(2).propertyPages;inherit(o,s),o.prototype.startChanging=function(e,t){var i,o,n;s.prototype.startChanging.call(this,e,t),0!==e&&1!==e||(i=this.pointToScreenPoint(this._points[0])[0],o=this.pointToScreenPoint(this._points[1])[0],n=this.pointToScreenPoint(this._points[2])[0],this._dist=r(i,o,n).distance||0)},o.prototype._preparePoint=function(e,t){var i=this._preparePointInternal(e,t,!1);return t&&t.shift&&this._points[0].index===this._points[1].index&&this._fixVerticalDiameterPoints(this._points[1],this._points[0],i),i},o.prototype._preparePointInternal=function(e,t,i){var o,r,a,l,c,h,u,d,p,f,_;if(this._convertPriceFromPercentIfNeeded(e),o=$.extend({},e),t&&t.shift){if(r=this.points().length,!this._fakePointAdded&&3===r&&!i)return o;(this._fakePointAdded||2===r||i)&&(this._snapPoint45Degree(e,this._points[0]),this._fakePointAdded?this._points[1]=e:i||(this._fakePointAdded=!0,s.prototype._addPointIntenal.call(this,e)),a=this.pointToScreenPoint(this._points[0])[0],l=this.pointToScreenPoint(this._points[1])[0],c=l.x-a.x,h=l.y-a.y,u=Math.sqrt(c*c+h*h)/2,d=l.subtract(a),p=a.add(l).scaled(.5),f=new n(-d.y,d.x),f=f.normalized(),_=p.add(f.scaled(u)),o=this.screenPointToPoint(_),(TradingView.isNaN(o.price)||TradingView.isNaN(o.index))&&(o=this.screenPointToPoint(p)))}else this._fakePointAdded&&(this._points.splice(1,1),this._fakePointAdded=!1);return o},o.prototype._fixVerticalDiameterPoints=function(e,t,i){var o=this.pointToScreenPoint(e)[0],n=this.pointToScreenPoint(t)[0],r=this._model.timeScale(),s=r.indexToCoordinate(e.index),a=r.indexToCoordinate(i.index),l=2*Math.abs(s-a);l*=t.price>e.price?1:-1,e.price=this.screenPointToPoint({x:o.x,y:n.y+l}).price},o.prototype.addPoint=function(e,t,i){var o=s.prototype.addPoint.call(this,e,t,i);return o&&(this._fakePointAdded=!1),o},o.prototype.setPoint=function(e,t,i){var o,s,a,l,c=$.extend({},t),h=this.pointToScreenPoint(this._points[0])[0],u=this.pointToScreenPoint(this._points[1])[0],d=this.pointToScreenPoint(this._points[2])[0];switch(this._convertPriceFromPercentIfNeeded(c),e){case 0:if(i&&i.shift){this._snapPoint45Degree(c,this._points[1]),this._points[0]=c,this._points[2]=this._preparePointInternal(this._points[2],i,!0),this._points[0].index===this._points[1].index&&this._fixVerticalDiameterPoints(this._points[0],this._points[1],this._points[2]);break}h=this.pointToScreenPoint(c)[0],o=u.subtract(h),s=h.add(u).scaled(.5),a=new n(-o.y,o.x),a=a.normalized(),d=s.add(a.scaled(this._dist)),d=this.screenPointToPoint(d),this._points[0]=c,this._points[2]=d;break;case 1:if(i&&i.shift){this._snapPoint45Degree(c,this._points[0]),this._points[1]=c,this._points[2]=this._preparePointInternal(this._points[2],i,!0),this._points[0].index===this._points[1].index&&this._fixVerticalDiameterPoints(this._points[1],this._points[0],this._points[2]);break}u=this.pointToScreenPoint(c)[0],o=u.subtract(h),s=h.add(u).scaled(.5),a=new n(-o.y,o.x),a=a.normalized(),d=s.add(a.scaled(this._dist)),
d=this.screenPointToPoint(d),this._points[1]=c,this._points[2]=d;break;case 2:case 3:c=this.pointToScreenPoint(c)[0],l=r(h,u,c).distance,o=u.subtract(h),s=h.add(u).scaled(.5),a=new n(-o.y,o.x),a=a.normalized(),d=s.add(a.scaled(l)),d=this.screenPointToPoint(d),this._points[2]=d}this.normalizePoints()},o.prototype.pointsCount=function(){return 3},o.prototype.title=function(){return"Ellipse"},o.version=2,o.prototype.migrateVersion=function(e,t,i){var o,n,r;1===e&&2===this._points.length&&(o=this._points[0].price,n=.5*(this._points[0].price+this._points[1].price),this._points[0]={price:n,index:this._points[0].index},this._points[1]={price:n,index:this._points[1].index},this._points.push({price:o,index:this._points[0].index})),1===e&&2===this._timePoint.length&&(o=this._timePoint[0].price,n=.5*(this._timePoint[0].price+this._timePoint[1].price),this._timePoint[0].price=n,this._timePoint[1].price=n,r={price:o,offset:this._timePoint[0].offset,time_t:this._timePoint[0].time_t},this._timePoint.push(r))},o.prototype.getInputsPropertyPage=function(){return null},o.prototype.getStylesPropertyPage=function(){return l.LineToolEllipseStylesPropertyPage},t.LineToolEllipse=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolTimeCycles";var o;o=t||new r("linetooltimecycles"),n.call(this,e,o),i.e(11).then(function(e){var t=i(1237).TimeCyclesPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(1).LineDataSource,r=i(7).DefaultProperty,s=i(2).propertyPages;inherit(o,n),o.prototype.pointsCount=function(){return 2},o.prototype.title=function(){return"Time Cycles"},o.prototype.setPoint=function(e,t,i){var o,n=$.extend({},t),r=this._points[0],s=this._points[1],a=this.priceScale();a.isPercent()&&(o=this.ownerSource().firstValue(),n.price=a.priceRange().convertFromPercent(n.price,o)),r.price=n.price,s.price=n.price,this._points[e]=n,this.normalizePoints()},o.prototype.addPoint=function(e,t,i){var o,r,s=n.prototype.addPoint.call(this,e,t,!0);return s&&(o=this._points[0],r=this._points[1],r.price=o.price,i||(this.normalizePoints(),this.createServerPoints())),s},o.prototype.getStylesPropertyPage=function(){return s.LineToolTimeCyclesPropertyPage},t.LineToolTimeCycles=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolSineLine";var o;o=t||new r("linetoolsineline"),n.call(this,e,o),i.e(11).then(function(e){var t=i(1238).SineLinePaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(1).LineDataSource,r=i(7).DefaultProperty,s=i(2).propertyPages;inherit(o,n),o.prototype.pointsCount=function(){return 2},o.prototype.title=function(){return"Sine Line"},o.prototype.getStylesPropertyPage=function(){return s.LineToolTimeCyclesPropertyPage},t.LineToolSineLine=o},function(e,t,i){"use strict";function o(e,t,i){this._source=e,this._index=t,this._bars=i||[]}function n(e,t,i){this._source=e,l.call(this,"linetoolghostfeed",t,i)}function r(e,t,o){var s,l;this._constructor="LineToolGhostFeed",t?(s=t,
s._source=this):s=new n(this),o||(l=Math.round(this.calculateATR(e)),s.averageHL.setValue(l)),a.call(this,e,s),this._segments=[],s.averageHL.listeners().subscribe(this,r.prototype.regenerate),s.variance.listeners().subscribe(this,r.prototype.regenerate),s.points||s.addProperty("points"),this._currentAverageHL=this._properties.averageHL.value(),this._currentVariance=this._properties.variance.value(),this._currentInterval=e.mainSeries().interval(),i.e(11).then(function(e){var t=i(1239).GhostFeedPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var s=i(36).sign,a=i(1).LineDataSource,l=i(7).DefaultProperty,c=i(2).propertyPages;o.prototype.setBars=function(e){this._bars=e||[]},o.prototype.clone=function(e){return new o(e,this._index,TradingView.clone(this._bars))},o.prototype.createBar=function(){var e,t,i,o,n,r=this._source.properties().averageHL.value(),s=this._source.properties().variance.value()/100,a=this._source._model.mainSeries().base(),l=Math.random(),c=r*(1-2*l)*s;return l=Math.random(),e=r*(1+(.5-l)*s),t=c-e/2,i=t+e,o=t+Math.random()*e,n=t+Math.random()*e,{o:o/a,h:i/a,l:t/a,c:n/a}},o.prototype.generate=function(){var e,t,i,o,n,r;if(this._bars=[],e=this._source.points(),t=e[this._index],i=e[this._index+1],t&&i&&t.index!==i.index)for(this._avgHL=this._source.properties().averageHL.value(),this._variance=this._source.properties().variance.value()/100,o=this._index?t.index+1:t.index,n=s(i.index-t.index),r=o;r!==i.index;r+=n)this._bars.push(this.createBar())},o.prototype.bars=function(){return this._bars},o.prototype.setSize=function(e){if(e<this._bars.length)this._bars.splice(e,this._bars.length-e);else for(;this._bars.length<e;)this._bars.push(this.createBar())},inherit(n,l),n.prototype.restoreFactoryDefaults=function(){l.prototype.restoreFactoryDefaults.call(this);var e=Math.round(this._source.calculateATR());this.averageHL.setValue(e)},inherit(r,a),r.prototype.createPropertiesObject=function(e,t,i){return new n(null,t,i)},r.prototype.regenerate=function(){this._currentAverageHL=this._properties.averageHL.value(),this._currentVariance=this._properties.variance.value(),this._segments.forEach(function(e){e.generate()}),this.updateAllViews(),this._model.updateSource(this)},r.prototype.propertiesChanged=function(){a.prototype.propertiesChanged.call(this),this._currentAverageHL===this._properties.averageHL.value()&&this._currentVariance===this._properties.variance.value()||this.regenerate()},r.prototype.pointsCount=function(){return-1},r.prototype.title=function(){return"Ghost Feed"},r.prototype.segmentBars=function(e){return this._segments[e].bars()},r.prototype.segments=function(){return this._segments},r.prototype.generateBars=function(e){this._segments.length<=e&&this._segments.push(new o(this,e)),this._segments[e].generate()},r.prototype.addPoint=function(e){var t,i,o;if(this._points.length>0&&(t=this._points[this._points.length-1],t.index===e.index)){for(this._lastPoint=null,this.normalizePoints(),this.createServerPoints(),
i=0;i<this._points.length;i++)this._createPointProperty(i);return!0}return o=a.prototype.addPoint.call(this,e),this._finished&&(this._lastPoint=null),this._points.length>1&&this.generateBars(this._points.length-2),o||this._finished},r.prototype.finish=function(){this._finished=!0,this._lastPoint=null,this.normalizePoints(),this.createServerPoints()},r.prototype.setPoint=function(e,t,i){var o,n,r;a.prototype.setPoint.call(this,e,t,i),e>0&&(o=this.points()[e-1],n=t.index-o.index,this._segments[e-1].setSize(Math.abs(n))),e<this.points().length-1&&(r=this.points()[e+1],n=r.index-t.index,this._segments[e].setSize(Math.abs(n)))},r.prototype.state=function(e){var t=a.prototype.state.call(this,e);return t.segments=this._segments.map(function(e){return{bars:e.bars()}}),t},r.prototype.restoreData=function(e){var t=this;e.segments&&(this._segments=e.segments.map(function(e,i){return new o(t,i,[].concat(e.bars))})),this._currentAverageHL=this._properties.averageHL.value(),this._currentVariance=this._properties.variance.value()},r.prototype.onData=function(e){if(a.prototype.onData.call(this,e),0===this.properties().points._childs.length)for(var t=0;t<this._points.length;t++)this._createPointProperty(t);this._currentInterval!==this._model.mainSeries().interval()&&(this.regenerate(),this._currentInterval=this._model.mainSeries().interval())},r.prototype.cloneData=function(e){var t=this;this._segments=e._segments.map(function(e){return e.clone(t)})},r.prototype.calculateATR=function(e){var t,i=(void 0!==e?e:this._model).mainSeries(),o=[];return i.bars().each(function(e,t){o.push(t[TradingView.HIGH_PLOT]-t[TradingView.LOW_PLOT])}),t=0===o.length?0:o.reduce(function(e,t){return e+t},0)/o.length,t*=i.base()},r.prototype.getInputsPropertyPage=function(){return c.LineToolGhostFeedInputsPropertyPage},r.prototype.getStylesPropertyPage=function(){return c.LineToolGhostFeedStylesPropertyPage},t.LineToolGhostFeed=r},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolBezierQuadro";var o;o=t||new r("linetoolbezierquadro"),n.call(this,e,o),i.e(11).then(function(e){var t=i(1240).BezierQuadroPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(1).LineDataSource,r=i(7).DefaultProperty,s=i(2).propertyPages;inherit(o,n),o.prototype.pointsCount=function(){return 2},o.prototype.title=function(){return"Curve"},o.prototype.controlPoint=function(){var e=this.pointToScreenPoint(this.points()[0])[0],t=this.pointToScreenPoint(this.points()[1])[0],i=t.subtract(e).scaled(.5),o=i.transposed().scaled(.3),n=e.add(t).scaled(.5),r=n.add(o);return this.screenPointToPoint(r)},o.prototype.setLastPoint=function(e,t){n.prototype.setLastPoint.call(this,e,t),this._controlPoint=this.controlPoint()},o.prototype.addPoint=function(e,t,i){var o,r=n.prototype.addPoint.call(this,e,t,!0);return r&&(o=this.controlPoint(),this._points.push(o),delete this._controlPoint,i||(this.normalizePoints(),this.createServerPoints()),this._createPointProperty(2)),r},o.prototype.restorePoints=function(e,t,i){
n.prototype.restorePoints.call(this,e,t,i),this._createPointProperty(2)},o.prototype.getStylesPropertyPage=function(){return s.LineToolBezierStylesPropertyPage},t.LineToolBezierQuadro=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolBezierCubic";var o;o=t||new r("linetoolbeziercubic"),n.call(this,e,o),i.e(11).then(function(e){var t=i(1241).BezierCubicPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(1).LineDataSource,r=i(7).DefaultProperty,s=i(2).propertyPages;inherit(o,n),o.prototype.pointsCount=function(){return 2},o.prototype.title=function(){return"Double Curve"},o.prototype.controlPoints=function(){var e=this.pointToScreenPoint(this.points()[0])[0],t=this.pointToScreenPoint(this.points()[1])[0],i=t.subtract(e).scaled(.5),o=i.transposed().scaled(.3),n=e.add(t).scaled(.33),r=e.add(t).scaled(.67),s=n.add(o),a=r.subtract(o);return[this.screenPointToPoint(s),this.screenPointToPoint(a)]},o.prototype.setLastPoint=function(e,t){n.prototype.setLastPoint.call(this,e,t),this._controlPoints=this.controlPoints()},o.prototype.addPoint=function(e,t,i){var o,r=n.prototype.addPoint.call(this,e,t,!0);return r&&(o=this.controlPoints(),delete this._controlPoints,this._points.push(o[0]),this._points.push(o[1]),i||(this.normalizePoints(),this.createServerPoints()),this._createPointProperty(2),this._createPointProperty(3)),r},o.prototype.restorePoints=function(e,t,i){n.prototype.restorePoints.call(this,e,t,i),this._createPointProperty(2),this._createPointProperty(3)},o.prototype.getStylesPropertyPage=function(){return s.LineToolBezierStylesPropertyPage},t.LineToolBezierCubic=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolArrow";var i=t||new r("linetoolarrow");n.call(this,e,i)}var n=i(218).LineToolTrendLine,r=i(7).DefaultProperty;inherit(o,n),o.prototype.title=function(){return"Arrow"},t.LineToolArrow=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolRay";var i=t||new r("linetoolray");n.call(this,e,i)}var n=i(218).LineToolTrendLine,r=i(7).DefaultProperty;inherit(o,n),o.prototype.title=function(){return"Ray"},t.LineToolRay=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolExtended";var i=t||new r("linetoolextended");n.call(this,e,i)}var n=i(218).LineToolTrendLine,r=i(7).DefaultProperty;inherit(o,n),o.prototype.title=function(){return"Extended Line"},t.LineToolExtended=o},function(e,t,i){"use strict";function o(e,t){var i=t||this.createPropertiesObject("linetoolschiffpitchfork");r.call(this,e,i),this._constructor="LineToolSchiffPitchfork"}var n=i(31),r=i(220).LineToolPitchfork;inherit(o,r),o.prototype.title=function(){return $.t("Modified Schiff Pitchfork")},o.prototype.createPropertiesObject=function(e,t,i){return new n(e,t,i,{range:[0,8]})},t.LineToolSchiffPitchfork=o},function(e,t,i){"use strict";function o(e,t){var i=t||this.createPropertiesObject("linetoolschiffpitchfork2");r.call(this,e,i),this._constructor="LineToolSchiffPitchfork2"}var n=i(31),r=i(220).LineToolPitchfork
;inherit(o,r),o.prototype.title=function(){return $.t("Schiff Pitchfork")},o.prototype.createPropertiesObject=function(e,t,i){return new n(e,t,i,{range:[0,8]})},t.LineToolSchiffPitchfork2=o},function(e,t,i){"use strict";function o(e,t){var i=t||this.createPropertiesObject("linetoolinsidepitchfork");r.call(this,e,i),this._constructor="LineToolInsidePitchfork"}var n=i(31),r=i(220).LineToolPitchfork;inherit(o,r),o.prototype.title=function(){return $.t("Inside Pitchfork")},o.prototype.createPropertiesObject=function(e,t,i){return new n(e,t,i,{range:[0,8]})},t.LineToolInsidePitchfork=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolFlagMark";var o=t||new s("linetoolflagmark");r.call(this,e,o),i.e(11).then(function(t){var o=i(651).MarkPaneView,r=new o(this,e,this.image,25,25,-8,-21);r.setAnchors(new n(0,0)),this._setPaneViews([r])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(8).Point,r=i(1).LineDataSource,s=i(7).DefaultProperty;inherit(o,r),o.prototype.image=new Image,o.prototype.image.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAsElEQVR4AWMYWcDExOS/YUd4hWF7+H90bNAePpO2liDwJTxyi2htyVXLvlBOWlry2bAtVIumwWXQERFF4zgJ20iPiP8JDCpLeqSuJ6ZdoRJ0SMIRx7QbQtmItgSXnGFbRCzMEnIzK8ISWgL6WzJqibGxsYaFhYUC7SxBWMQPNMjazMxMjebBZWhoKAq00NHc3FyL5nFiaWkpDTTYz8jISI/mEW9qaqoExGFgS+gFRgEAaE0hWxrw50oAAAAASUVORK5CYII=",o.prototype.pointsCount=function(){return 1},o.prototype.title=function(){return"Flag Mark"},o.prototype.version=2,t.LineToolFlagMark=o},function(e,t,i){"use strict";function o(e,t){this._constructor="LineToolCypherPattern";var o=t||new r("linetoolcypherpattern");n.call(this,e,o),i.e(11).then(function(e){var t=i(1242).CypherPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var n=i(1).LineDataSource,r=i(7).DefaultProperty,s=i(488).LineTool5PointsPattern;inherit(o,s),t.LineToolCypherPattern=o},function(e,t,i){"use strict";(function(e){function o(e){this._line=e,this._data={bodyText:"position",quantityText:"0"},this._closeEnabled=!0}function n(e,t){this._adapter=new o(this),this._constructor="LineToolPosition";var n=t||new c("linetoolposition");r.call(this,e,n),i.e(11).then(function(e){var t=i(1243).PositionPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var r=i(282),s=i(1).LineDataSource,a=i(278).LineToolPriceAxisView,l=i(269),c=i(7).DefaultProperty;o.prototype.getPrice=function(){return this._line.points().length>0?this._line.points()[0].price:this._line._timePoint.length>0?this._line._timePoint[0].price:void 0},o.prototype.setPrice=function(e){if(this._line.points().length>0){var t=this._line.points()[0];t.price=e,this._line._points[0]=t,this._line.normalizePoints(),this._line.updateAllViewsAndRedraw()}return this._line._timePoint.length>0&&(this._line._timePoint[0].price=e),this},o.prototype.getText=function(){return this._data.bodyText},o.prototype.setText=function(e){return this._data.bodyText=e||"",this._line.updateAllViewsAndRedraw(),this},o.prototype.setTooltip=function(e){
return null==e?e="":e+="",this._line.properties().tooltip.setValue(e),this},o.prototype.getTooltip=function(){return this._line.properties().tooltip.value()},o.prototype.getQuantity=function(){return this._data.quantityText},o.prototype.setQuantity=function(e){return this._data.quantityText=e||"",this._line.updateAllViewsAndRedraw(),this},o.prototype.getExtendLeft=function(){var e=this._line.properties().extendLeft.value();return"inherit"===e?this._line._model.properties().tradingProperties.extendLeft.value():e},o.prototype.setExtendLeft=function(e){return this._line.properties().extendLeft.setValue(e),this},o.prototype.getLineLength=function(){var e=this._line.properties().lineLength.value();return"inherit"===e?this._line._model.properties().tradingProperties.lineLength.value():e},o.prototype.setLineLength=function(e){return this._line.properties().lineLength.setValue(Math.max(0,Math.min(e,100))),this},o.prototype.getLineColor=function(){return l.getColorFromProperties(this._line.properties().lineColor,this._line.properties().lineTransparency)},o.prototype.setLineColor=function(e){return l.setColorToProperties(e,this._line.properties().lineColor,this._line.properties().lineTransparency),this},o.prototype.getLineStyle=function(){var e=this._line.properties().lineStyle.value();return"inherit"===e?this._line._model.properties().tradingProperties.lineStyle.value():e},o.prototype.setLineStyle=function(e){return this._line.properties().lineStyle.setValue(e),this},o.prototype.getLineWidth=function(){var e=this._line.properties().lineWidth.value();return"inherit"===e?this._line._model.properties().tradingProperties.lineWidth.value():e},o.prototype.setLineWidth=function(e){return this._line.properties().lineWidth.setValue(e),this},o.prototype.getBodyBorderColor=function(){return l.getColorFromProperties(this._line.properties().bodyBorderColor,this._line.properties().bodyBorderTransparency)},o.prototype.setBodyBorderColor=function(e){return l.setColorToProperties(e,this._line.properties().bodyBorderColor,this._line.properties().bodyBorderTransparency),this},o.prototype.getBodyBackgroundColor=function(){return l.getColorFromProperties(this._line.properties().bodyBackgroundColor,this._line.properties().bodyBackgroundTransparency)},o.prototype.setBodyBackgroundColor=function(e){return l.setColorToProperties(e,this._line.properties().bodyBackgroundColor,this._line.properties().bodyBackgroundTransparency),this},o.prototype.getBodyTextColor=function(){return l.getColorFromProperties(this._line.properties().bodyTextColor,this._line.properties().bodyTextTransparency)},o.prototype.setBodyTextColor=function(e){return l.setColorToProperties(e,this._line.properties().bodyTextColor,this._line.properties().bodyTextTransparency),this},o.prototype.getBodyFont=function(){return l.getFontFromProperties(this._line.properties().bodyFontFamily,this._line.properties().bodyFontSize,this._line.properties().bodyFontBold,this._line.properties().bodyFontItalic)},o.prototype.setBodyFont=function(e){
return l.setFontToProperties(e,this._line.properties().bodyFontFamily,this._line.properties().bodyFontSize,this._line.properties().bodyFontBold,this._line.properties().bodyFontItalic),this},o.prototype.getQuantityBorderColor=function(){return l.getColorFromProperties(this._line.properties().quantityBorderColor,this._line.properties().quantityBorderTransparency)},o.prototype.setQuantityBorderColor=function(e){return l.setColorToProperties(e,this._line.properties().quantityBorderColor,this._line.properties().quantityBorderTransparency),this},o.prototype.getQuantityBackgroundColor=function(){return l.getColorFromProperties(this._line.properties().quantityBackgroundColor,this._line.properties().quantityBackgroundTransparency)},o.prototype.setQuantityBackgroundColor=function(e){return l.setColorToProperties(e,this._line.properties().quantityBackgroundColor,this._line.properties().quantityBackgroundTransparency),this},o.prototype.getQuantityTextColor=function(){return l.getColorFromProperties(this._line.properties().quantityTextColor,this._line.properties().quantityTextTransparency)},o.prototype.setQuantityTextColor=function(e){return l.setColorToProperties(e,this._line.properties().quantityTextColor,this._line.properties().quantityTextTransparency),this},o.prototype.getQuantityFont=function(){return l.getFontFromProperties(this._line.properties().quantityFontFamily,this._line.properties().quantityFontSize,this._line.properties().quantityFontBold,this._line.properties().quantityFontItalic)},o.prototype.setQuantityFont=function(e){return l.setFontToProperties(e,this._line.properties().quantityFontFamily,this._line.properties().quantityFontSize,this._line.properties().quantityFontBold,this._line.properties().quantityFontItalic),this},o.prototype.getReverseButtonBorderColor=function(){return l.getColorFromProperties(this._line.properties().reverseButtonBorderColor,this._line.properties().reverseButtonBorderTransparency)},o.prototype.setReverseButtonBorderColor=function(e){return l.setColorToProperties(e,this._line.properties().reverseButtonBorderColor,this._line.properties().reverseButtonBorderTransparency),this},o.prototype.getReverseButtonBackgroundColor=function(){return l.getColorFromProperties(this._line.properties().reverseButtonBackgroundColor,this._line.properties().reverseButtonBackgroundTransparency)},o.prototype.setReverseButtonBackgroundColor=function(e){return l.setColorToProperties(e,this._line.properties().reverseButtonBackgroundColor,this._line.properties().reverseButtonBackgroundTransparency),this},o.prototype.getReverseButtonIconColor=function(){return l.getColorFromProperties(this._line.properties().reverseButtonIconColor,this._line.properties().reverseButtonIconTransparency)},o.prototype.setReverseButtonIconColor=function(e){return l.setColorToProperties(e,this._line.properties().reverseButtonIconColor,this._line.properties().reverseButtonIconTransparency),this},o.prototype.getCloseButtonBorderColor=function(){
return l.getColorFromProperties(this._line.properties().closeButtonBorderColor,this._line.properties().closeButtonBorderTransparency)},o.prototype.setCloseButtonBorderColor=function(e){return l.setColorToProperties(e,this._line.properties().closeButtonBorderColor,this._line.properties().closeButtonBorderTransparency),this},o.prototype.getCloseButtonBackgroundColor=function(){return l.getColorFromProperties(this._line.properties().closeButtonBackgroundColor,this._line.properties().closeButtonBackgroundTransparency)},o.prototype.setCloseButtonBackgroundColor=function(e){return l.setColorToProperties(e,this._line.properties().closeButtonBackgroundColor,this._line.properties().closeButtonBackgroundTransparency),this},o.prototype.getCloseButtonIconColor=function(){return l.getColorFromProperties(this._line.properties().closeButtonIconColor,this._line.properties().closeButtonIconTransparency)},o.prototype.setCloseButtonIconColor=function(e){return l.setColorToProperties(e,this._line.properties().closeButtonIconColor,this._line.properties().closeButtonIconTransparency),this},o.prototype.block=function(){this._blocked=!0,this._line.updateAllViewsAndRedraw()},o.prototype.unblock=function(){this._blocked=!1,this._line.updateAllViewsAndRedraw()},o.prototype.isFunction=function(e){return"function"==typeof e},o.prototype.onReverse=function(e,t){return t?this.isFunction(t)&&(this._onReverseData=e,this._onReverseCallback=t):this.isFunction(e)&&(this._onReverseCallback=e),this},o.prototype.callOnReverse=function(){this.isFunction(this._onReverseCallback)&&this._onReverseCallback.call(this,this._onReverseData)},o.prototype.isOnReverseCallbackPresent=function(){return this.isFunction(this._onReverseCallback)},o.prototype.onClose=function(e,t){return t?this.isFunction(t)&&(this._onCloseData=e,this._onCloseCallback=t):this.isFunction(e)&&(this._onCloseCallback=e),this},o.prototype.setCloseEnabled=function(e){return this._closeEnabled===e?this:(this._closeEnabled=e,this._onCloseCallback&&this._line.updateAllViewsAndRedraw(),this)},o.prototype.isCloseEnabled=function(){return this._closeEnabled},o.prototype.callOnClose=function(){this.isFunction(this._onCloseCallback)&&this._closeEnabled&&this._onCloseCallback.call(this,this._onCloseData)},o.prototype.isOnCloseCallbackPresent=function(){return this._closeEnabled&&this.isFunction(this._onCloseCallback)},o.prototype.onModify=function(e,t){return t?this.isFunction(t)&&(this._onModifyData=e,this._onModifyCallback=t):this.isFunction(e)&&(this._onModifyCallback=e),this},o.prototype.callOnModify=function(){this.isFunction(this._onModifyCallback)&&this._onModifyCallback.call(this,this._onModifyData)},o.prototype.onContextMenu=function(e,t){return t?this.isFunction(t)&&(this._onContextMenuData=e,this._onContextMenuCallback=t):this.isFunction(e)&&(this._onContextMenuCallback=e),this},o.prototype.callOnContextMenu=function(){if(this.isFunction(this._onContextMenuCallback))return this._onContextMenuCallback.call(this,this._onContextMenuData)},o.prototype.remove=function(){
this._line._model.removeSource(this._line),delete this._line},inherit(n,r),n.prototype.setPoint=function(e,t,i){this._points[e]=t,this.normalizePoints()},n.prototype.addPoint=function(e,t){return this._points.push(e),this._lastPoint=null,this.normalizePoints(),this.createServerPoints(),!0},n.skipMagnetting=!0,n.prototype.title=function(){return"Position"},n.prototype.createPriceAxisView=function(e){return this._priceAxisView=new a(this,{pointIndex:e,backgroundProperty:this.properties().lineColor}),this._priceAxisView},n.prototype.paneViews=function(t){return TradingView.printing&&!e.enabled("snapshot_trading_drawings")?null:this._model.properties().tradingProperties.showPositions.value()?s.prototype.paneViews.call(this,t):null},n.prototype.priceAxisViews=function(t,i){return TradingView.printing&&!e.enabled("snapshot_trading_drawings")?null:this._model.properties().tradingProperties.showPositions.value()?s.prototype.priceAxisViews.call(this,t,i):null},n.prototype.hasContextMenu=function(){return!0},n.prototype.contextMenuItems=function(){return this._adapter.callOnContextMenu()},t.LineToolPosition=n}).call(t,i(3))},function(e,t,i){"use strict";(function(e){function o(e){this._line=e,this._data={bodyText:"order",quantityText:"0"},this._editable=!0}function n(e,t){this._adapter=new o(this),this._constructor="LineToolOrder";var n=t||new c("linetoolorder");r.call(this,e,n),i.e(11).then(function(e){var t=i(1244).OrderPaneView;this._setPaneViews([new t(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var r=i(282),s=i(278).LineToolPriceAxisView,a=i(269),l=i(1).LineDataSource,c=i(7).DefaultProperty;o.prototype.setEditable=function(e){return this._editable=e,this},o.prototype.getPrice=function(){return this._line.points().length>0?this._line.points()[0].price:this._line._timePoint.length>0?this._line._timePoint[0].price:void 0},o.prototype.setPrice=function(e){if(this._line.points().length>0){var t=this._line.points()[0];t.price=e,this._line._points[0]=t,this._line.normalizePoints(),this._line.updateAllViewsAndRedraw()}return this._line._timePoint.length>0&&(this._line._timePoint[0].price=e),this},o.prototype.getText=function(){return this._data.bodyText},o.prototype.setText=function(e){return this._data.bodyText=e||"",this._line.updateAllViewsAndRedraw(),this},o.prototype.setTooltip=function(e){return null==e?e="":e+="",this._line.properties().tooltip.setValue(e),this},o.prototype.getTooltip=function(){return this._line.properties().tooltip.value()},o.prototype.getQuantity=function(){return this._data.quantityText},o.prototype.setQuantity=function(e){return this._data.quantityText=e||"",this._line.updateAllViewsAndRedraw(),this},o.prototype.getExtendLeft=function(){var e=this._line.properties().extendLeft.value();return"inherit"===e?this._line._model.properties().tradingProperties.extendLeft.value():e},o.prototype.setExtendLeft=function(e){return this._line.properties().extendLeft.setValue(e),this},o.prototype.getLineLength=function(){var e=this._line.properties().lineLength.value()
;return"inherit"===e?this._line._model.properties().tradingProperties.lineLength.value():e},o.prototype.setLineLength=function(e){return this._line.properties().lineLength.setValue(Math.max(0,Math.min(e,100))),this},o.prototype.getLineColor=function(){return a.getColorFromProperties(this._line.properties().lineColor,this._line.properties().lineTransparency)},o.prototype.setLineColor=function(e){return a.setColorToProperties(e,this._line.properties().lineColor,this._line.properties().lineTransparency),this},o.prototype.getLineStyle=function(){var e=this._line.properties().lineStyle.value();return"inherit"===e?this._line._model.properties().tradingProperties.lineStyle.value():e},o.prototype.setLineStyle=function(e){return this._line.properties().lineStyle.setValue(e),this},o.prototype.getLineWidth=function(){var e=this._line.properties().lineWidth.value();return"inherit"===e?this._line._model.properties().tradingProperties.lineWidth.value():e},o.prototype.setLineWidth=function(e){return this._line.properties().lineWidth.setValue(e),this},o.prototype.getBodyBorderColor=function(){return a.getColorFromProperties(this._line.properties().bodyBorderColor,this._line.properties().bodyBorderTransparency)},o.prototype.setBodyBorderColor=function(e){return a.setColorToProperties(e,this._line.properties().bodyBorderColor,this._line.properties().bodyBorderTransparency),this},o.prototype.getBodyBackgroundColor=function(){return a.getColorFromProperties(this._line.properties().bodyBackgroundColor,this._line.properties().bodyBackgroundTransparency)},o.prototype.setBodyBackgroundColor=function(e){return a.setColorToProperties(e,this._line.properties().bodyBackgroundColor,this._line.properties().bodyBackgroundTransparency),this},o.prototype.getBodyTextColor=function(){return a.getColorFromProperties(this._line.properties().bodyTextColor,this._line.properties().bodyTextTransparency)},o.prototype.setBodyTextColor=function(e){return a.setColorToProperties(e,this._line.properties().bodyTextColor,this._line.properties().bodyTextTransparency),this},o.prototype.getBodyFont=function(){return a.getFontFromProperties(this._line.properties().bodyFontFamily,this._line.properties().bodyFontSize,this._line.properties().bodyFontBold,this._line.properties().bodyFontItalic)},o.prototype.setBodyFont=function(e){return a.setFontToProperties(e,this._line.properties().bodyFontFamily,this._line.properties().bodyFontSize,this._line.properties().bodyFontBold,this._line.properties().bodyFontItalic),this},o.prototype.getQuantityBorderColor=function(){return a.getColorFromProperties(this._line.properties().quantityBorderColor,this._line.properties().quantityBorderTransparency)},o.prototype.setQuantityBorderColor=function(e){return a.setColorToProperties(e,this._line.properties().quantityBorderColor,this._line.properties().quantityBorderTransparency),this},o.prototype.getQuantityBackgroundColor=function(){return a.getColorFromProperties(this._line.properties().quantityBackgroundColor,this._line.properties().quantityBackgroundTransparency)},
o.prototype.setQuantityBackgroundColor=function(e){return a.setColorToProperties(e,this._line.properties().quantityBackgroundColor,this._line.properties().quantityBackgroundTransparency),this},o.prototype.getQuantityTextColor=function(){return a.getColorFromProperties(this._line.properties().quantityTextColor,this._line.properties().quantityTextTransparency)},o.prototype.setQuantityTextColor=function(e){return a.setColorToProperties(e,this._line.properties().quantityTextColor,this._line.properties().quantityTextTransparency),this},o.prototype.getQuantityFont=function(){return a.getFontFromProperties(this._line.properties().quantityFontFamily,this._line.properties().quantityFontSize,this._line.properties().quantityFontBold,this._line.properties().quantityFontItalic)},o.prototype.setQuantityFont=function(e){return a.setFontToProperties(e,this._line.properties().quantityFontFamily,this._line.properties().quantityFontSize,this._line.properties().quantityFontBold,this._line.properties().quantityFontItalic),this},o.prototype.getCancelButtonBorderColor=function(){return a.getColorFromProperties(this._line.properties().cancelButtonBorderColor,this._line.properties().cancelButtonBorderTransparency)},o.prototype.setCancelButtonBorderColor=function(e){return a.setColorToProperties(e,this._line.properties().cancelButtonBorderColor,this._line.properties().cancelButtonBorderTransparency),this},o.prototype.getCancelButtonBackgroundColor=function(){return a.getColorFromProperties(this._line.properties().cancelButtonBackgroundColor,this._line.properties().cancelButtonBackgroundTransparency)},o.prototype.setCancelButtonBackgroundColor=function(e){return a.setColorToProperties(e,this._line.properties().cancelButtonBackgroundColor,this._line.properties().cancelButtonBackgroundTransparency),this},o.prototype.getCancelButtonIconColor=function(){return a.getColorFromProperties(this._line.properties().cancelButtonIconColor,this._line.properties().cancelButtonIconTransparency)},o.prototype.setCancelButtonIconColor=function(e){return a.setColorToProperties(e,this._line.properties().cancelButtonIconColor,this._line.properties().cancelButtonIconTransparency),this},o.prototype.block=function(){this._blocked=!0,this._line.updateAllViewsAndRedraw()},o.prototype.unblock=function(){this._blocked=!1,this._line.updateAllViewsAndRedraw()},o.prototype.isFunction=function(e){return"function"==typeof e},o.prototype.onCancel=function(e,t){return t?this.isFunction(t)&&(this._onCancelData=e,this._onCancelCallback=t):this.isFunction(e)&&(this._onCancelCallback=e),this},o.prototype.callOnCancel=function(){this.isFunction(this._onCancelCallback)&&this._onCancelCallback.call(this,this._onCancelData)},o.prototype.isOnCancelCallbackPresent=function(){return this.isFunction(this._onCancelCallback)},o.prototype.onModify=function(e,t){return t?this.isFunction(t)&&(this._onModifyData=e,this._onModifyCallback=t):this.isFunction(e)&&(this._onModifyCallback=e),this},o.prototype.callOnModify=function(){
this.isFunction(this._onModifyCallback)&&this._onModifyCallback.call(this,this._onModifyData)},o.prototype.onMove=function(e,t){return t?this.isFunction(t)&&(this._onMoveData=e,this._onMoveCallback=t):this.isFunction(e)&&(this._onMoveCallback=e),this},o.prototype.callOnMove=function(){this.isFunction(this._onMoveCallback)&&this._onMoveCallback.call(this,this._onMoveData)},o.prototype.onContextMenu=function(e,t){return t?this.isFunction(t)&&(this._onContextMenuData=e,this._onContextMenuCallback=t):this.isFunction(e)&&(this._onContextMenuCallback=e),this},o.prototype.callOnContextMenu=function(){if(this.isFunction(this._onContextMenuCallback))return this._onContextMenuCallback.call(this,this._onContextMenuData)},o.prototype.remove=function(){this._line._model.removeSource(this._line),delete this._line},inherit(n,r),n.skipMagnetting=!0,n.prototype.setPoint=function(e,t,i){this._points[e]=t,this.normalizePoints()},n.prototype.addPoint=function(e,t){return this._points.push(e),this._lastPoint=null,this.normalizePoints(),this.createServerPoints(),!0},n.prototype.title=function(){return"Order"},n.prototype.endMoving=function(e){var t=this._startMovingPoint&&this._currentMovingPoint&&this._startMovingPoint.price!==this._currentMovingPoint.price;r.prototype.endMoving.call(this),!e&&t&&this._adapter.callOnMove()},n.prototype.createPriceAxisView=function(e){return this._priceAxisView=new s(this,{pointIndex:e,backgroundProperty:this.properties().lineColor}),this._priceAxisView},n.prototype.paneViews=function(t){return TradingView.printing&&!e.enabled("snapshot_trading_drawings")?null:this._model.properties().tradingProperties.showOrders.value()?l.prototype.paneViews.call(this,t):null},n.prototype.priceAxisViews=function(t,i){return TradingView.printing&&!e.enabled("snapshot_trading_drawings")?null:this._model.properties().tradingProperties.showOrders.value()?l.prototype.priceAxisViews.call(this,t,i):null},n.prototype.hasContextMenu=function(){return!0},n.prototype.contextMenuItems=function(){return this._adapter.callOnContextMenu()},n.prototype.onlyYMoving=function(){return!0},t.LineToolOrder=n}).call(t,i(3))},function(e,t,i){"use strict";for(var o={StudyStrategy:i(537),StatusView:i(158),StudyLineDataSource:i(132).StudyLineDataSource,StudyVersioning:i(144),StudyMigration:i(483),StudyHHistsDataWindowView:i(836),ESDStudyBase:i(86).ESDStudyBase,study_ESD$TV_EARNINGS:i(86).study_ESD$TV_EARNINGS,study_ESD$TV_SPLITS:i(86).study_ESD$TV_SPLITS,study_ESD$TV_DIVIDENDS:i(86).study_ESD$TV_DIVIDENDS,study_ElliottWave:i(837),study_LinearRegression:i(648).study_LinearRegression,study_PivotPointsHighLow:i(838),study_PivotPointsStandard:i(839),study_VbPSessions:i(841),study_VbPVisible:i(842),study_ZigZag:i(843),study_Overlay:i(844).study_Overlay,study_Compare:i(869),study_Sessions:i(510),study_Volume:i(870).study_Volume,study_ScriptWithDataOffset:i(871),StudyPaneView:i(115).StudyPaneView,StudyBackgroundPaneView:i(115).StudyBackgroundPaneView,StudyPlotShapesPaneView:i(115).StudyPlotShapesPaneView,
StudyPlotCharsPaneView:i(115).StudyPlotCharsPaneView,StudyPlotArrowsPaneView:i(115).StudyPlotArrowsPaneView,StudyPlotCandlesPaneView:i(115).StudyPlotCandlesPaneView,StudyStrategyOrdersPaneView:i(492),StudyPriceAxisView:i(475).StudyPriceAxisView,StudyDataWindowView:i(182).StudyDataWindowView,DataVendorStudyDataWindowView:i(182).DataVendorStudyDataWindowView,LineStudyMtpAnalysis:i(872),LineStudyMtpDecisionPoint:i(873),LineStudyMtpRiskReward:i(874),LineStudyMtpElliotWaveMain:i(285).LineStudyMtpElliotWaveMain,LineStudyMtpElliotWaveMajor:i(285).LineStudyMtpElliotWaveMajor,LineStudyMtpElliotWaveMinor:i(285).LineStudyMtpElliotWaveMinor,LineStudyMtpDownWave1OrA:i(59).LineStudyMtpDownWave1OrA,LineStudyMtpDownWave2OrB:i(59).LineStudyMtpDownWave2OrB,LineStudyMtpDownWave3:i(59).LineStudyMtpDownWave3,LineStudyMtpDownWave4:i(59).LineStudyMtpDownWave4,LineStudyMtpDownWave5:i(59).LineStudyMtpDownWave5,LineStudyMtpDownWaveC:i(59).LineStudyMtpDownWaveC,LineStudyMtpUpWave1OrA:i(59).LineStudyMtpUpWave1OrA,LineStudyMtpUpWave2OrB:i(59).LineStudyMtpUpWave2OrB,LineStudyMtpUpWave3:i(59).LineStudyMtpUpWave3,LineStudyMtpUpWave4:i(59).LineStudyMtpUpWave4,LineStudyMtpUpWave5:i(59).LineStudyMtpUpWave5,LineStudyMtpUpWaveC:i(59).LineStudyMtpUpWaveC},n=Object.keys(o),r=n.length;r--;)TradingView[n[r]]=o[n[r]];e.exports=o},function(e,t,i){"use strict";function o(e,t){this._items=e.items,this._color=e.color,this._orderArrow=e.orderArrow,this._exitLineWidth=e.exitLineWidth,this._priceArrow=e.priceArrow,this._text=e.text,this._textWidths=t}var n=i(11);o.prototype._drawOrderArrow=function(e,t,i,o){var n,r=t.x,s=t.y;o?(e.rotate(Math.PI),r=-r-this._orderArrow.width/2,s=-s-this._orderArrow.height):(r-=this._orderArrow.width/2,s-=this._orderArrow.height),i&&(s-=i),n=o?"floor":"ceil",r=Math[n](r)+(o?-.5:.5),s=Math[n](s)+.5,e.translate(r,s),e.moveTo(.25*this._orderArrow.width,0),e.lineTo(.75*this._orderArrow.width,0),e.lineTo(.75*this._orderArrow.width,.45*this._orderArrow.height),e.lineTo(this._orderArrow.width,.45*this._orderArrow.height),e.lineTo(.5*this._orderArrow.width,this._orderArrow.height),i&&(e.lineTo(this._orderArrow.width,this._orderArrow.height),e.lineTo(this._orderArrow.width,this._orderArrow.height+i),e.lineTo(0,this._orderArrow.height+i),e.lineTo(0,this._orderArrow.height),e.lineTo(.5*this._orderArrow.width,this._orderArrow.height)),e.lineTo(0,.45*this._orderArrow.height),e.lineTo(.25*this._orderArrow.width,.45*this._orderArrow.height)},o.prototype._drawPriceArrow=function(e,t,i){var o=t.x,n=t.y;i?(e.rotate(Math.PI),o=-o-this._priceArrow.width,n=-n-this._priceArrow.height/2):(o-=this._priceArrow.width,n-=this._priceArrow.height/2),o=Math.round(o)+(i?-1.5:.5),n=Math.floor(n)+.5,e.translate(o,n),e.moveTo(0,0),e.lineTo(this._priceArrow.width,.5*this._priceArrow.height),e.lineTo(0,this._priceArrow.height)},o.prototype.draw=function(e){e.beginPath();for(var t,i,o=0;o<this._items.length;o++)t=this._items[o],i="lower"===t.pos,e.save(),e.translate(0,i?this._orderArrow.vMargin:-this._orderArrow.vMargin),
this._drawOrderArrow(e,t.orderPoint,this._exitLineWidth,i),e.restore(),e.save(),this._drawPriceArrow(e,t.pricePoint,!i),e.restore();if(e.closePath(),e.fillStyle=this._color,e.fill(),this._text)for(e.font=this._text.fontSize+"px "+this._text.font,e.textAlign="center",e.textBaseline="top",o=0;o<this._items.length;o++)t=this._items[o],i="lower"===t.pos,e.save(),e.translate(0,i?this._orderArrow.vMargin:-this._orderArrow.height-this._orderArrow.vMargin),t.label&&(e.translate(0,i?this._text.fontSize+this._text.vMargin+this._exitLineWidth:-this._text.fontSize-this._text.vMargin-this._exitLineWidth),e.fillText(t.label,Math.ceil(t.orderPoint.x),t.orderPoint.y),"number"!=typeof this._textWidths[t.label]&&(this._textWidths[t.label]=e.measureText(t.label).width)),t.qty&&(e.translate(0,i?this._text.fontSize+this._text.vMargin+this._exitLineWidth:-this._text.fontSize-this._text.vMargin-this._exitLineWidth),e.fillText(t.qty,Math.ceil(t.orderPoint.x),t.orderPoint.y),"number"!=typeof this._textWidths[t.qty]&&(this._textWidths[t.qty]=e.measureText(t.qty).width)),e.restore()},o.prototype._testOrderArrows=function(e){for(var t,i,o,n,r,s,a,l=0,c=this._orderArrow.width/2;l<this._items.length;l++)if(t=this._items[l].orderPoint,!(e.x<t.x-c||e.x>t.x+c||(i=this._items[l],o="lower"===i.pos,n=this._orderArrow.height+this._exitLineWidth,o||(n=-n),r=t.y+(o?this._orderArrow.vMargin:-this._orderArrow.vMargin),s=Math.min(r,r+n),a=Math.max(r,r+n),e.y<s||e.y>a)))return!0;return!1},o.prototype._testText=function(e){for(var t,i,o,n,r,s,a,l,c,h,u,d=0;d<this._items.length;d++)if(t=this._items[d],i=t.orderPoint,o="lower"===t.pos,n=this._orderArrow.vMargin+this._orderArrow.height+this._exitLineWidth,o||(n=-n),r=i.y+n,s=this._text.vMargin+this._text.fontSize*(!!t.label+!!t.qty),o||(s=-s),a=Math.min(r,r+s),l=Math.max(r,r+s),!(e.y<a||e.y>l||(c=t.label&&t.qty?o&&e.y<r+this._text.fontSize||!o&&e.y>r-this._text.fontSize?t.label:t.qty:t.label||t.qty,h=this._textWidths[c],u=h&&h/2,!h||e.x<i.x-u||e.x>i.x+u)))return!0;return!1},o.prototype.hitTest=function(e){var t=this._testOrderArrows(e),i=!t&&this._text&&this._testText(e);return t||i?new n(n.REGULAR):null},t.PaneRendererStudyStrategyOrders=TradingView.PaneRendererStudyStrategyOrders=o},function(e,t,i){"use strict";function o(e,t){var i,o,n,a,l,c;if(r.call(this),this._study=e,this._model=t,i=e.metaInfo().graphics.hhists){o=0;for(n in i){for(a=i[n],l=0;l<a.titles.length;l++)c=new s(this._study.title(),""),c.histElemIndex=l,c.histIndex=o,c.histId=n,this._items.push(c);o++}this.update(),this._invalidated=!0}}var n=i(157),r=n.DataWindowView,s=n.DataWindowItem;inherit(o,r),o.prototype.update=function(){this._invalidated=!0},o.prototype._updateImpl=function(){var e,t,i,n,r,s,a,l,c,h,u,d,p,f,_;for(this._header=this._study.title(),e=0;e<this._items.length;++e)this._items[e].setValue("n/a");if(t=this._study.priceScale(),i=this._model.timeScale(),t&&!t.isEmpty()&&i&&!i.isEmpty())for(n=this._model.crossHairSource(),r=n.appliedIndex(),s=n.price,a=this._study.formatter(),e=0;e<this._items.length;++e){if(l=this._items[e].histId,
c=this._items[e].histIndex,h=this._items[e].histElemIndex,!(u=this._study.graphics().hhists))return;d=u[c].dataObj,d&&((p=o._findHistogramBar(d,r,s))&&(f=p.rate[h],this._items[e].setValue(isNumber(f)?a.format(f):""),_=this._study.properties().graphics.hhists[l].colors[h].value(),this._items[e].setColor(_)))}},o._findHistogramBar=function(e,t,i){var o,n,r;return 0===e.length?null:(o=this._findHistogramKey(e,t),(n=e[o])&&0!==n.length?(r=this._findBar(n,i),n[r]):null)},o._findHistogramKey=function(e,t){var i,o,n=Object.keys(e),r=[];for(i in n)n[i]<=t&&r.push(parseInt(n[i],10));if(0===r.length)return null;for(o=null,i=0;i<r.length;++i)(null===o||r[i]>o)&&(o=r[i]);return o},o._findBar=function(e,t){for(var i,o,n,r=0,s=e.length-1;r<=s;)if(i=r+s>>>1,o=e[i].priceHigh,n=e[i].priceLow,o<t)r=i+1;else{if(!(n>t))return i;s=i-1}return null},o.prototype.items=function(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._items},e.exports=o},function(e,t,i){"use strict";function o(e,t){this._model=e,this._source=t,this._waves=[],this._highlights=[],this._retracements=[],this._invalidated=!0}function n(e,t,i,n){l.call(this,e,t,i,n,new o(e,this))}var r=i(9).ensureNotNull,s=i(8).Point,a=i(177).TextRenderer,l=i(185),c=i(114).TrendLineRenderer,h=i(11),u=i(41).CompositeRenderer,d=i(33),p=i(2).propertyPages,f=i(91).LineEnd;o._wave5Labels=[["i","ii","iii","iv","v"],["(i)","(ii)","(iii)","(iv)","(v)"],["((i))","((ii))","((iii))","((iv))","((v))"],["1","2","3","4","5"],["(1)","(2)","(3)","(4)","(5)"],["((1))","((2))","((3))","((4))","((5))"],["I","II","III","IV","V"],["(I)","(II)","(III)","(IV)","(V)"],["((I))","((II))","((III))","((IV))","((V))"]],o._wave3Labels=[["a","b","c"],["A","B","C"]],o._fontSizes=[10,10,10,11,11,11,12,12,12],o.prototype.update=function(){this._invalidated=!0},o.prototype.updateImpl=function(){var e,t,i,n,a,l,c,h,u,d,p,f,_,m,g,v,y,b,S,w,T,P,C,x,E,L,I,A,k,M,O,D,V,R,B,N,z,F,$,H;if(this._waves=[],this._highlights=[],this._retracements=[],this._source._nonseriesdata&&this._source.properties().visible.value()&&(e=this._source._nonseriesdata.waves,t=this._source._indexes,i=this._model.timeScale(),n=this._source.priceScale(),a=this._model.mainSeries(),l=a.firstBar(),n&&!n.isEmpty()&&!i.isEmpty()&&l&&e)){for(c=i.visibleBars(),h=c.lastBar(),u=c.firstBar(),d=["m0StartIndex","startIndex","endIndex","m2EndIndex","m3EndIndex"],f=0;f<e.length;f++)if(e[f]){for(_=[],m=0;m<5&&(g=t[e[f][d[m]]],isFinite(g));m++)_.push(g);if(0!==_.length&&!(_[0]>h||_[_.length-1]<u)&&(v=+e[f].size,isFinite(v)&&(y="level"+v,b=this._source.properties()[y],b.visible.value()))){for(S=parseInt(e[f].direction,10),w=[],w.dir=S,w.prices=[],w.orig_prices=[],p=a.firstValue(),T=0;T<_.length;T++){if(void 0!==_[T]){if(P={},C=_[T],l=r(a.bars().first()),C<l.index)continue;if(P.x=i.indexToCoordinate(C),null===(x=a.bars().valueAt(C))){w.push(void 0),w.prices.push(void 0),w.orig_prices.push(void 0),S=-S;continue}E=1===S?x[TradingView.HIGH_PLOT]:x[TradingView.LOW_PLOT],w.orig_prices.push(E),n.isPercent()?(L=n.priceRange().convertToPercent(E,p),
P.y=n.priceToCoordinate(L),w.prices.push(L)):(w.prices.push(E),P.y=n.priceToCoordinate(E)),P.label=o._wave5Labels[v][T],P.align=-1===S?"top":"bottom",P.color=b.color.value(),delete P.backgroundColor,w.id="wave_"+f,this._source===this._model.hoveredSource()&&(I=this._model.lastHittestData())&&I.wave&&I.wave.id===w.id&&(P.color="#FFFFFF",P.backgroundColor=b.color.value()),P.fontsize=o._fontSizes[v],P._textCache={widths:[]},P.wave=w,w.push(P)}else w.push(void 0),w.prices.push(void 0);S=-S}w.inds=_,w.dir=S,w.color=b.color.value(),this._waves.push(w)}}if(this._source===this._model.hoveredSource()&&(I=this._model.lastHittestData())){for(_=I.wave.inds,S=-I.wave.dir,A=I.backgroundColor?I.backgroundColor:I.color,k=I.wave.orig_prices,M=null,T=0;T<_.length;T++){if(void 0!==_[T]){if(C=_[T],O=i.indexToCoordinate(C),null===(x=a.bars().valueAt(C))){S=-S;continue}E=k[T],n.isPercent()&&(E=n.priceRange().convertToPercent(E,p)),D=n.priceToCoordinate(E),V=new s(O,D),M&&this._highlights.push({points:[M,V],color:A}),M=V}S=-S}void 0!==k[1]&&void 0!==k[2]&&(R=k[1],B=k[2],N=k[3],z=k[0],n.isPercent()&&(R=n.priceRange().convertToPercent(R,p),B=n.priceRange().convertToPercent(B,p),void 0!==z&&(z=n.priceRange().convertToPercent(z,p)),void 0!==N&&(N=n.priceRange().convertToPercent(N,p))),this._retracements.push({y:n.priceToCoordinate(R),x:0,extendLeft:!0,extendRight:!0,color:A,text:"",style:CanvasEx.LINESTYLE_SOLID}),this._retracements.push({y:n.priceToCoordinate(R),x:0,extendLeft:!0,extendRight:!0,color:A,text:"",style:CanvasEx.LINESTYLE_SOLID}),S=B-R,void 0!==k[0]&&(F=z-R,$=F/S,E=R+$*S,O=i.indexToCoordinate(_[0]),this._retracements.push({y:n.priceToCoordinate(E),x:O,extendLeft:!1,extendRight:!0,color:A,text:""+$.toFixed(3),style:CanvasEx.LINESTYLE_DASHED})),void 0!==N&&(H=B-N,$=H/S,E=B-$*S,O=i.indexToCoordinate(_[3]),this._retracements.push({y:n.priceToCoordinate(E),x:O,extendLeft:!0,extendRight:!1,color:A,text:""+$.toFixed(3),style:CanvasEx.LINESTYLE_DASHED})))}}},o.prototype.CIRCLE_SIZE=16,o.prototype.renderer=function(){var e,t,i,o,n,r,l,p,_,m,g,v,y,b,S,w;for(this._invalidated&&(this.updateImpl(),this._invalidated=!1),e=new u,t=this.CIRCLE_SIZE,i={},o=0;o<this._waves.length;o++)for(n=this._waves[o],r=0;r<n.length;r++)void 0!==(l=n[r])&&("top"===l.align?(p=l.y+4,i["top_"+l.x]?(p+=i["top_"+l.x]*t,i["top_"+l.x]=i["top_"+l.x]+1):i["top_"+l.x]=1,_=p+t):(p=l.y-t-4,i["bottom_"+l.x]?(p-=i["bottom_"+l.x]*t,i["bottom_"+l.x]=i["bottom_"+l.x]+1):i["bottom_"+l.x]=1,_=p+t),m={},m.points=[new s(l.x,(p+_)/2)],m.text=l.label,m.color=l.color,m.backgroundColor=l.backgroundColor,m.font="Verdana",m.bold=!0,m.offsetX=0,m.offsetY=0,m.vertAlign="middle",m.horzAlign="center",m.fontsize=l.fontsize,g=new h(h.REGULAR,l),e.append(new a(m,g)));for(o=0;o<this._highlights.length;o++)v=this._highlights[o],y={points:v.points,width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:d.generateColor(v.color,50),linewidth:3,linestyle:CanvasEx.LINESTYLE_SOLID,extendleft:!1,extendright:!1,leftend:f.Circle,rightend:f.Circle},b=new c,b.setData(y),
e.append(b);for(o=0;o<this._retracements.length;o++)S=this._retracements[o],y={points:[new s(S.x+1,S.y),new s(S.x,S.y)],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:d.generateColor(S.color,50),linewidth:1,linestyle:S.style,extendleft:S.extendLeft,extendright:S.extendRight,leftend:f.Normal,rightend:f.Normal},b=new c,b.setData(y),e.append(b),w={points:[new s(S.x,S.y)],text:this._retracements[o].text,backgroundColor:"#606060",color:"#FFFFFF",vertAlign:"middle",horzAlign:"center",font:"Arial",offsetX:S.extendRight?-50:50,offsetY:-2,fontsize:12},e.append(new a(w));return e},inherit(n,l),n.prototype.margins=function(){return[.1,.1]},n.prototype.isVisible=function(){if(!this.properties().visible.value())return!1;for(var e=0;e<=8;e++)if(this.properties()["level"+e].visible.value())return!0;return!1},n.prototype.getInputsPropertyPage=function(){return p.StudyElliottInputsPropertyPage},e.exports=n},function(e,t,i){"use strict";function o(e,t){this._data=e,this._textCache=t}function n(e,t){this._model=e,this._source=t,this._pivots=[],this._textCache={},this._invalidated=!0}function r(e,t,i,o){s.call(this,e,t,i,o,new n(e,this))}var s=i(185),a=i(11),l=i(41).CompositeRenderer,c=i(2).propertyPages;o.prototype.draw=function(e){e.textBaseline="bottom",e.font=(this._data.bold?"bold ":"normal ")+this._data.fontsize+"px "+this._data.font;var t=Math.round(e.measureText(this._data.text).width+4);this._textCache.width=t,e.translate(this._data.x+.5,this._data.y),e.strokeStyle=this._data.borderColor,e.fillStyle=this._data.backColor,e.beginPath(),e.moveTo(0,0),1===this._data.type?(e.lineTo(5,-5),e.lineTo(t/2,-5),e.lineTo(t/2,-5-this._data.fontsize),e.lineTo(-t/2,-5-this._data.fontsize),e.lineTo(-t/2,-5),e.lineTo(-5,-5),e.lineTo(0,0)):(e.lineTo(5,5),e.lineTo(t/2,5),e.lineTo(t/2,5+this._data.fontsize),e.lineTo(-t/2,5+this._data.fontsize),e.lineTo(-t/2,5),e.lineTo(-5,5),e.lineTo(0,0)),e.fill(),e.stroke(),e.fillStyle=this._data.textColor,e.textAlign="center",1===this._data.type?e.fillText(this._data.text,0,-4):e.fillText(this._data.text,0,6+this._data.fontsize)},o.prototype.hitTest=function(e){var t=this._textCache.width,i=this._data.fontsize+12,o=this._data.x-t/2,n=this._data.y;return 1===this._data.type&&(n-=i),e.x>=o&&e.x<=o+t&&e.y>=n&&e.y<=n+i?new a(a.REGULAR):null},n.prototype.update=function(){this._invalidated=!0},n.prototype.updateImpl=function(){var e,t,i,o,n,r,s,a,l,c,h,u,d,p,f,_;if(this._pivots=[],this._source._nonseriesdata&&this._source._nonseriesdata.pivots&&this._source.properties().visible.value()&&(e=this._source._nonseriesdata.pivots,t=this._source._indexes,i=this._model.timeScale(),o=this._source.priceScale(),n=this._model.mainSeries(),r=n.firstValue(),o&&!o.isEmpty()&&!i.isEmpty()&&r))for(s=i.visibleBars(),a=s.firstBar(),l=s.lastBar(),c=0;c<e.length;c++)e[c]&&((h=t[e[c].index])<a||h>l||(u=e[c].type,null!==(d=n.bars().valueAt(h))&&(p=1===u?d[TradingView.HIGH_PLOT]:d[TradingView.LOW_PLOT],o.isPercent()&&(p=o.priceRange().convertToPercent(p,r)),f=Math.round(i.indexToCoordinate(h)),
_=o.priceToCoordinate(p),1===u?_-=i.barSpacing()/6:_+=i.barSpacing()/6+1,_=Math.round(_),this._pivots.push({x:f,y:_,price:o.formatter().format(p),type:u}))))},n.prototype.renderer=function(){var e,t,i,n,r,s,a,c,h,u;if(this._invalidated&&(this.updateImpl(),this._invalidated=!1),0!==this._pivots.length){for(e=this._source.properties().font.value(),t=this._source.properties().fontsize.value(),i=this._source.properties().borderColor.value(),n=this._source.properties().backColor.value(),r=this._source.properties().textColor.value(),s=new l,a=0;a<this._pivots.length;a++)c=this._pivots[a],h={x:c.x,y:c.y,type:c.type,text:c.price,font:e,fontsize:t,borderColor:i,backColor:n,textColor:r},u=a,this._textCache[u]||(this._textCache[u]={}),s.append(new o(h,this._textCache[u]));return s}},inherit(r,s),r.prototype.isVisible=function(){return this.properties().visible.value()},r.prototype.margins=function(){return[.1,.1]},r.prototype.getStylesPropertyPage=function(){return c.StudyPivotPointsHighLowStylesPropertyPage},e.exports=r},function(e,t,i){"use strict";(function(t){function o(e,t,i,o){this._prices=[],this._canvas=$("<canvas>"),this._cache=this._canvas.get(0).getContext("2d"),this.reset({font:e,fontSize:t,backColors:i,colors:o}),this._priceAxisFontSize=11}function n(e,t){this._model=e,this._source=t,this._pivots=[],this._textCache={}}function r(e,t){this._source=e,this._model=e._model,this._prices=[],this._invidated=!0,this._cache=t;var i=this;e.priceScale()&&(this._cachedFormatter=e.priceScale().formatter(),this._formatterCache=new p(function(e){return i._cachedFormatter.format(e)}))}function s(e,t,i,o){var r,s,a;for(f.call(this,e,t,i,o,new n(e,this)),r=["P","S1/R1","S2/R2","S3/R3","S4/R4","S5/R5"],s=this.properties().levelsStyle.visibility,a=0;a<r.length;a++)s[r[a]].listeners().subscribe(this,TradingView.Study.prototype.processHibernate)}var a=i(8).Point,l=i(55),c=l.parseRgb,h=l.rgbToBlackWhiteString,u=i(158),d=i(182).StudyDataWindowView,p=i(284),f=i(185),_=i(840).StandardPivotPointsPriceAxisView,m=i(114).TrendLineRenderer,g=i(181),v=i(555),y=i(11),b=i(41).CompositeRenderer,S=i(24).PlotRowSearchMode,w=i(2).propertyPages,T=i(91).LineEnd;o.prototype.remove=function(){this._canvas.remove()},o.prototype.reset=function(e){this._prices=[],this._params=e,this._cache.setFont(e.fontSize+"px "+e.font);var t=this;this._labelWidth=["P","S1","R1","S2","R2","S3","R3","S4","R4","S5","R5","/"].reduce(function(e,i){var o=t._cache.measureText(i).width;return Math.max(o,e)},0)},o.prototype.rowHeight=function(){return this._priceAxisFontSize+4},o.prototype._labelRectByIndex=function(e){return{left:0,top:Math.round(this._topByIndex(e)),width:Math.round(this._labelWidth+4),height:this._params.fontSize+8}},o.prototype.params=function(){return this._params},o.prototype._centerByIndex=function(e){return Math.round((e+.5)*(this._params.fontSize+8))},o.prototype._topByIndex=function(e){return Math.round(e*(this._params.fontSize+8))},o.prototype.setPrices=function(e){var t,i,o,n,r,s,a=8,l=!1,c=function(e,t){
return void 0===e&&void 0===t||e.formatted===t.formatted};if(e.length!==this._prices.length)l=!0;else for(t=0;t<this._prices.length;t++)if(!c(this._prices[t],e[t])){l=!0;break}if(l){for(i=this,i._cache.save(),i._cache.font=this._priceAxisFontSize+"px Arial",i._cache.restore(),o=this._labelWidth+6,n=window.hidpiCanvasRatio||1,o*=n,this._canvas.prop("width",o),r=Math.max(e.length,22)*(this._params.fontSize+a),r*=n,this._canvas.prop("height",r),this._canvas.css("width",o).css("height",r),this._prices=e,this._cache.clearRect(0,0,o,r),this._cache.save(),this._cache.translate(.5,.5),this._cache.font=this._params.fontSize+"px "+this._params.font,this._cache.textBaseline="middle",t=0;t<this._prices.length;t++)this._prices[t]&&(s=["P","S1","R1","S2","R2","S3","R3","S4","R4","S5","R5"][t],this._cache.fillStyle=this._params.backColors[t],this._cache.fillText(s,0,this._centerByIndex(t)),this._cache.fillText("/",0,this._centerByIndex(t+11)));this._prices=e,this._cache.restore()}},n.prototype.setCache=function(e){this._cache=e},n.prototype.priceAxisViews=function(e,t){return this._priceAxisViews},n.prototype.mergeLabel=function(e,t,i){var o=""+t;void 0===e[o]?(e[o]={},e[o].text=i,e[o].ids=[this.complete(i)]):(e[o].text+="/"+i,e[o].ids.push(this.complete(i)))},n.prototype.complete=function(e){return"P"===e?e:"S"+e[1]+"/R"+e[1]},n.prototype.update=function(){this._invalidated=!0},n.prototype._updateImpl=function(){var e,t,i,o,n,r,s,a,l,c,h,u,d,p,f,_,m,g;if(this._source.pricesView().prices(),this._pivots=[],this._source._nonseriesdata&&this._source._nonseriesdata.pivots&&this._source.properties().visible.value()&&(e=this._source._nonseriesdata.pivots,t=this._source._indexes,i=this._model.timeScale(),(o=this._source.priceScale())&&!o.isEmpty()&&!i.isEmpty()&&e)){if(n=i.visibleBars(),r=n.firstBar(),s=n.lastBar(),a=null,o.isPercent()){if(!this._source.ownerSource())return;a=this._source.ownerSource().firstValue()}for(l=0;l<e.length;l++)if(e[l]&&(c=t[e[l].startIndex],!((h=t[e[l].endIndex])<r||c>s))){u={},d=this._source.properties().levelsStyle.visibility,d.P.value()&&this.mergeLabel(u,e[l].p,"P"),d["S1/R1"].value()&&(this.mergeLabel(u,e[l].s1,"S1"),this.mergeLabel(u,e[l].r1,"R1")),d["S2/R2"].value()&&(this.mergeLabel(u,e[l].s2,"S2"),this.mergeLabel(u,e[l].r2,"R2")),d["S3/R3"].value()&&(this.mergeLabel(u,e[l].s3,"S3"),this.mergeLabel(u,e[l].r3,"R3")),d["S4/R4"].value()&&(this.mergeLabel(u,e[l].s4,"S4"),this.mergeLabel(u,e[l].r4,"R4")),d["S5/R5"].value()&&(this.mergeLabel(u,e[l].s5,"S5"),this.mergeLabel(u,e[l].r5,"R5")),p=i.indexToCoordinate(c),f=i.indexToCoordinate(h);for(_ in u)m=parseFloat(_),o.isPercent()&&(m=o.priceRange().convertToPercent(m,a)),g=o.priceToCoordinate(m),this._pivots.push({x1:p,x2:f,y:g,label:u[_].text,labelIds:u[_].ids})}}},n.prototype.renderer=function(){var e,t,i,o,n,r,s,l,c,h,u,d,p,f,_,g,S;for(this._invalidated&&(this._updateImpl(),this._invalidated=!1),e=new b,t=this._source.properties().levelsStyle.colors,i=this._source.properties().levelsStyle.widths,o=0;o<this._pivots.length;o++)if(n=this._pivots[o],
r=new a(n.x1,n.y),s=new a(n.x2,n.y),l={points:[r,s],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:t[n.labelIds[0]].value(),linewidth:i[n.labelIds[0]].value(),linestyle:CanvasEx.LINESTYLE_SOLID,extendleft:!1,extendright:!1,leftend:T.Normal,rightend:T.Normal},c=new m,c.setData(l),c.setHitTest(new y(y.REGULAR)),e.append(c),this._source.properties().levelsStyle.showLabels.value())for(h=n.label.split("/"),u=0,d=0;d<h.length;d++)p=["P","S1","R1","S2","R2","S3","R3","S4","R4","S5","R5"].indexOf(h[d]),d>0&&(f=this._cache._labelRectByIndex(p+11),_={left:r.x-f.width+u,top:Math.round(r.y-f.height/2),width:f.width,height:f.height},u+=f.width/2,g=this._cache._canvas.get(0),S=new v(g,f,_),e.append(S)),f=this._cache._labelRectByIndex(p),_={left:r.x-f.width+u,top:Math.round(r.y-f.height/2),width:f.width,height:f.height},u+=f.width,g=this._cache._canvas.get(0),S=new v(g,f,_),e.append(S);return e},r.prototype._updateImpl=function(){var e,t,i,o,n,r,s,a,l,c,h,u,d,f,_,m,g,v,y,b,w;if(!this._model.timeScale().isEmpty()&&!this._source.priceScale().isEmpty()&&null!==(e=this._model.timeScale().visibleBars())&&this._source._nonseriesdata&&this._source._nonseriesdata.pivots&&(this._cachedFormatter!==this._source.priceScale().formatter()&&(this._cachedFormatter=this._source.priceScale().formatter(),t=this,this._formatterCache=new p(function(e){return t._cachedFormatter.format(e)})),t=this,i=this._model.mainSeries(),o=this._source.priceScale(),null!==(n=i.bars().search(e.lastBar(),S.NearestLeft)))){for(r=n.index,s=this._source._nonseriesdata.pivots,a=this._source._indexes,l=this._source.properties(),c=0;c<s.length;c++)if(s[c]&&(h=a[s[c].startIndex],u=a[s[c].endIndex],d=l.inputs.showHistoricalPivots.value(),u>r&&h<=r||!d))for(o.properties().percentage.value()&&(f=t._source.firstValue()),_=["p","s1","r1","s2","r2","s3","r3","s4","r4","s5","r5"],this._prices=[],m=0;m<_.length;m++)g=_[m],void 0!==(v=s[c][g])&&(o.properties().percentage.value()&&(v=100*(v-f)/f),y=o.priceToCoordinate(v),b={P:"P",S1:"S1/R1",S2:"S2/R2",S3:"S3/R3",S4:"S4/R4",S5:"S5/R5",R1:"S1/R1",R2:"S2/R2",R3:"S3/R3",R4:"S4/R4",R5:"S5/R5"},w=l.levelsStyle.colors[b[g.toUpperCase()]].value(),this._prices.push({formatted:t._formatterCache.format(v),price:v,coordinate:y,color:w}));this._cache.setPrices(this._prices)}},r.prototype.update=function(){this._invidated=!0},r.prototype.prices=function(){return this._invidated&&(this._updateImpl(),this._invidated=!1),this._prices},inherit(s,f),s.prototype.lastValueData=function(e,t,i){var o=["P","S1","R1","S2","R2","S3","R3","S4","R4","S5","R5"].indexOf(e.toUpperCase()),n={noData:!0},r=this._pricesView.prices()[o];return null!==r&&void 0!==r?r:n},s.prototype.lastPriceLabelFixedCoordinate=function(e){var t=["P","S1","R1","S2","R2","S3","R3","S4","R4","S5","R5"].indexOf(e.toUpperCase());return this._priceAxisViews[t]._fixedCoordinate},s.prototype.priceLabelText=function(e){return this._metaInfo.shortDescription+":"+e.toUpperCase()},s.prototype.pricesView=function(){return this._pricesView},
s.prototype._getActualCacheParams=function(){var e={};return e.font=this.properties().font.value(),e.fontSize=this.properties().fontsize.value(),e.backColors=[this.properties().levelsStyle.colors.P.value(),this.properties().levelsStyle.colors["S1/R1"].value(),this.properties().levelsStyle.colors["S1/R1"].value(),this.properties().levelsStyle.colors["S2/R2"].value(),this.properties().levelsStyle.colors["S2/R2"].value(),this.properties().levelsStyle.colors["S3/R3"].value(),this.properties().levelsStyle.colors["S3/R3"].value(),this.properties().levelsStyle.colors["S4/R4"].value(),this.properties().levelsStyle.colors["S4/R4"].value(),this.properties().levelsStyle.colors["S5/R5"].value(),this.properties().levelsStyle.colors["S5/R5"].value()],e.colors=e.backColors.map(function(e){return"black"===h(c(e),150)?"white":"black"}),e},s.prototype.updateAllViews=function(){var e;for(f.prototype.updateAllViews.call(this),this._pricesView.update(),e=0;e<this._priceAxisViews.length;e++)this._priceAxisViews[e].update();for(e=0;e<this._paneViews.length;e++)this._paneViews[e].update()},s.prototype.paneViews=function(e){var t=f.prototype.paneViews.call(this,e);return t?t.concat(this._paneViews):this._paneViews},s.prototype.createViews=function(){var e,t,i,n,s=this._getActualCacheParams();for(this._cache&&this._cache.remove(),this._cache=new o(s.font,s.fontSize,s.backColors,s.colors),this._priceAxisViews=[],e=["P","S1","R1","S2","R2","S3","R3","S4","R4","S5","R5"],this._paneViews.length=0,t=this.properties().levelsStyle.visibility,i=0;i<e.length;i++)this._priceAxisViews.push(new _(this,{name:e[i],cache:this._cache})),n="P"===e[i].toUpperCase()?"P":"S"+e[i][1]+"/R"+e[i][1],t[n]&&t[n].value()&&this._paneViews.push(new g(this._model,this,e[i],"priceLabelText","showStudyPlotLabels"));this._dataWindowView||(this._dataWindowView=new d(this,this._model)),this._statusView||(this._statusView=new u(this,this._model.properties())),this._paneView.setCache(this._cache),this._pricesView=new r(this,this._cache)},s.prototype._postProcessGraphics=function(){},s.prototype.isVisible=function(){var e,t,i;if(!this.properties().visible.value())return!1;for(e=["P","S1/R1","S2/R2","S3/R3","S4/R4","S5/R5"],t=this.properties().levelsStyle.visibility,i=0;i<e.length;i++)if(t[e[i]].value())return!0;return!1},s.prototype.stop=function(){TradingView.Study.prototype.stop.call(this),this._cache&&this._cache.remove()},s.prototype.priceRange=function(e,i){var o,n,r,s,a,l,c,h,u;if(!this._nonseriesdata||!this._nonseriesdata.pivots||!this._indexes)return null;if(!this.priceScale())return null;for(o=this._nonseriesdata.pivots,n=this._indexes,r=null,s=0;s<o.length;s++)if(o[s]&&(a=n[o[s].startIndex],!(n[o[s].endIndex]<e||a>i)))for(l=[],c=this._properties.levelsStyle.visibility,c.P.value()&&l.push(o[s].p),c["S1/R1"].value()&&l.push(o[s].s1,o[s].r1),c["S2/R2"].value()&&l.push(o[s].s2,o[s].r2),c["S3/R3"].value()&&l.push(o[s].s3,o[s].r3),c["S4/R4"].value()&&l.push(o[s].s4,o[s].r4),c["S5/R5"].value()&&l.push(o[s].s5,o[s].r5),
h=0;h<l.length;h++)l[h]&&(null===r?r=new t(l[h],l[h]):r.apply(l[h],l[h]));return this.priceScale().isLog()&&r?new t(this.priceScale().priceToLogical(r.minValue()),this.priceScale().priceToLogical(r.maxValue())):this.priceScale().properties().percentage.value()&&r?(u=this.ownerSource().firstValue(),u?r.convertToPercents(u):null):r},s.prototype.getStylesPropertyPage=function(){return w.StudyPivotPointsStandardStylesPropertyPage},e.exports=s}).call(t,i(79))},function(e,t,i){"use strict";var o,n,r,s;Object.defineProperty(t,"__esModule",{value:!0}),o=i(6),n=i(80),r=["P","S1","R1","S2","R2","S3","R3","S4","R4","S5","R5"],s=function(e){function t(t,i){var o,n=e.call(this)||this;return n._source=t,n._data=i,o=i.name,n._completeName="P"===o.toUpperCase()?"P":"S"+o[1]+"/R"+o[1],n}return o.__extends(t,e),t.prototype._updateRendererData=function(e){var t,i,o,n,s,a,l,c,h,u;e.visible=!1,t=this._source.properties(),t.visible.value()&&(i=this._completeName,o=t.levelsStyle.visibility,o[i]&&o[i].value()&&(n=this._source.model(),s=n.timeScale(),a=this._source.priceScale(),s.isEmpty()||null===s.visibleBars()||null!==a&&a.isEmpty()||(l=this._source.nonSeriesData())&&l.pivots&&(c=this._source.pricesView().prices(),h=r.indexOf(this._data.name.toUpperCase()),(u=c[h])&&(e.background=u.color,e.color=this.generateTextColor(u.color),e.coordinate=u.coordinate,e.floatCoordinate=u.floatCoordinate,e.text=u.formatted,e.visible=!0))))},t}(n.PriceAxisView),t.StandardPivotPointsPriceAxisView=s},function(e,t,i){"use strict";(function(t){function o(e,t,i,o){var r,l,c;for(n.call(this,e,t,i,o),r=this.properties().styles,l=0;l<a.length;l++)(c=r[a[l]])&&c.plottype&&c.plottype.setValue(s.StepLine)}var n=i(34).Study,r=i(2).propertyPages,s=i(92).PlotType,a=["developingPoc","developingVAHigh","developingVALow"];inherit(o,n),o.prototype.priceRange=function(e,i){var o,n,r,s,a,l,c,h,u,d,p,f,_=this.graphics().hhists,m=this.graphics().indexes;if(!_||!_.length)return null;for(_=_[0].data,o=!1,n=null,r=null,s=null,a=0;a<_.length;a++)l=_[a],c=m[l.firstBarTime],h=m[l.lastBarTime],u=c>=e&&c<=i,d=h>=e&&h<=i,p=c<=e&&h>=i,(u||d||p)&&(o?(_[a].priceLow<n&&(n=_[a].priceLow,r=_[a].priceHigh),s=Math.max(s,_[a].priceHigh)):(n=_[a].priceLow,r=_[a].priceHigh,s=_[a].priceHigh,o=!0));return o?(f=null,f=this._properties.graphics.hhists.histBars.showValues.value()?new t(n-.8*(r-n),s):new t(n,s),this.priceScale().isLog()&&f?new t(this.priceScale().priceToLogical(f.minValue()),this.priceScale().priceToLogical(f.maxValue())):f):null},o.prototype.getStylesPropertyPage=function(){return r.StudyVolumeProfilePropertyPage},e.exports=o}).call(t,i(79))},function(e,t,i){"use strict";(function(t){function o(e,t,i,o){var r,l,c;for(n.call(this,e,t,i,o),r=this.properties().styles,l=0;l<a.length;l++)(c=r[a[l]])&&c.plottype&&c.plottype.setValue(s.StepLine)}var n=i(34).Study,r=i(2).propertyPages,s=i(92).PlotType,a=["developingPoc","developingVAHigh","developingVALow"];inherit(o,n),o.prototype.priceRange=function(e,i){var o,n,r=this.graphics().hhists;return r?(o=r[0].data[0],n=null,
n=this._properties.graphics.hhists.histBars.showValues.value()?new t(o.priceLow-.8*(o.priceHigh-o.priceLow),o.priceHigh):new t(o.priceLow,o.priceHigh),this.priceScale().isLog()&&n?new t(this.priceScale().priceToLogical(n.minValue()),this.priceScale().priceToLogical(n.maxValue())):n):null},o.prototype.getStylesPropertyPage=function(){return r.StudyVolumeProfilePropertyPage},e.exports=o}).call(t,i(79))},function(e,t,i){"use strict";function o(e,t){this._model=e,this._source=t,this._pivots=[],this._textCache={},this._invalidated=!0}function n(e,t,i,n){s.call(this,e,t,i,n,new o(e,this))}var r=i(8).Point,s=i(185),a=i(114).TrendLineRenderer,l=i(11),c=i(41).CompositeRenderer,h=i(2).propertyPages,u=i(91).LineEnd;o.prototype.update=function(){this._invalidated=!0},o.prototype.updateImpl=function(){var e,t,i,o,n,r,s,a,l,c,h,u,d;if(this._pivots=[],this._source._nonseriesdata&&this._source._nonseriesdata.zigzag&&this._source.properties().visible.value()&&(e=this._source._nonseriesdata.zigzag,t=this._source._indexes,i=this._model.timeScale(),o=this._source.priceScale(),n=this._model.mainSeries(),r=n.firstValue(),o&&!o.isEmpty()&&!i.isEmpty()&&r))for(s=0;s<e.length;s++)e[s]&&(a=t[e[s].index],l=e[s].type,null!==(c=n.bars().valueAt(a))&&(h=1===l?c[TradingView.HIGH_PLOT]:c[TradingView.LOW_PLOT],o.isPercent()&&(h=o.priceRange().convertToPercent(h,r)),u=Math.round(i.indexToCoordinate(a)),d=o.priceToCoordinate(h),this._pivots.push({x:u,y:d})))},o.prototype.renderer=function(){var e,t,i,o,n,s,h,d,p,f;for(this._invalidated&&(this.updateImpl(),this._invalidated=!1),e=new c,t=this._source.properties().color.value(),i=this._source.properties().linewidth.value(),o=1;o<this._pivots.length;o++)n=this._pivots[o],s=this._pivots[o-1],h=new r(s.x,s.y),d=new r(n.x,n.y),p={points:[h,d],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:t,linewidth:i,linestyle:CanvasEx.LINESTYLE_SOLID,extendleft:!1,extendright:!1,leftend:u.Normal,rightend:u.Normal},f=new a,f.setData(p),f.setHitTest(new l(l.REGULAR)),e.append(f);return e},inherit(n,s),n.prototype.isVisible=function(){return this.properties().visible.value()},n.prototype.getStylesPropertyPage=function(){return h.StudyZigZagStylesPropertyPage},e.exports=n},function(e,t,i){"use strict";function o(e,t){this._source=e,this._model=t,this._points=[new a(0,0)],this._lineRenderer=new C}function n(e,t){w.call(this),this._additional=void 0,this._study=e,this._model=t,this._items.push(new T("Open","")),this._items.push(new T("High","")),this._items.push(new T("Low","")),this._items.push(new T("Close","")),this._invalidated=!0,this.update()}function r(e,t,i,o){this._symbolLabelView=new x(e,this,"close","symbol","showSymbolLabels"),this._baseLineView=null,c.call(this,e,t,i,o),this._formatter=null,this._paneView=null;var n=this;this.properties().minTick.listeners().subscribe(null,function(){n._createFormatter(),n.updateAllViews(),n._model.invalidate(new E(E.FULL_UPDATE))})}
var s=i(276),a=i(8).Point,l=i(145),c=i(34).Study,h=i(24).PlotRowSearchMode,u=i(868).OverlayPriceAxisView,d=i(494),p=d.SeriesAreaPaneView,f=d.SeriesLinePaneView,_=d.SeriesHollowCandlesPaneView,m=d.SeriesCandlesPaneView,g=d.SeriesBarsPaneView,v=d.SeriesBaselinePaneView,y=d.SeriesBaselineLinePaneView,b=i(158),S=i(157),w=S.DataWindowView,T=S.DataWindowItem,P=i(273).SeriesBarColorer,C=i(156).HorizontalLineRenderer,x=i(181),E=i(40),L=i(16).PriceFormatter,I=i(2).propertyPages;o.prototype.update=function(){if(this._visible=!1,this._source.properties().showPriceLine.value()){var e=this._source.lastValueData(TradingView.CLOSE_PLOT,!0);e.noData||(this._visible=!0,this._points=[new a(0,e.coordinate)],this._color=e.color)}},o.prototype.renderer=function(){var e={};return e.width=this._model.timeScale().width(),e.height=this._source.priceScale().height(),e.points=this._points,e.color=this._color,e.linewidth=1,e.linestyle=CanvasEx.LINESTYLE_DOTTED,e.visible=this._visible,this._lineRenderer.setData(e),this._lineRenderer},inherit(n,w),n.prototype._updateImpl=function(){var e,t,i,o,n,r,a,c,u,d,p,f,_,m,g;if(this._header=this._study.title(),!this._model.timeScale().isEmpty()&&0!==this._study.data().length){if(i=!1,o=this._study.properties().style.value(),o===l.STYLE_BARS?(e=this._study.properties().barStyle.upColor.value(),t=this._study.properties().barStyle.downColor.value(),i=this._study.properties().barStyle.barColorsOnPrevClose.value()):o===l.STYLE_CANDLES?(e=this._study.properties().candleStyle.upColor.value(),t=this._study.properties().candleStyle.downColor.value(),i=this._study.properties().candleStyle.barColorsOnPrevClose.value()):o===l.STYLE_HOLLOW_CANDLES?(e=this._study.properties().hollowCandleStyle.upColor.value(),t=this._study.properties().hollowCandleStyle.downColor.value(),i=!0):o===l.STYLE_LINE?e=t=this._study.properties().lineStyle.color.value():o===l.STYLE_AREA&&(e=t=this._study.properties().areaStyle.linecolor.value()),n=this._study.series(),r=this._model.crossHairSource().appliedIndex(),void 0!==(a=n.nearestIndex(r,h.NearestLeft))){if(!(null!==(c=this._study.data().valueAt(a))&&c[TradingView.OPEN_PLOT]&&c[TradingView.HIGH_PLOT]&&c[TradingView.LOW_PLOT]&&c[TradingView.CLOSE_PLOT]))return;for(u=this._study.formatter(),this._items[0].setValue(u.format(c[TradingView.OPEN_PLOT])),this._items[1].setValue(u.format(c[TradingView.HIGH_PLOT])),this._items[2].setValue(u.format(c[TradingView.LOW_PLOT])),this._items[3].setValue(u.format(c[TradingView.CLOSE_PLOT])),o===l.STYLE_BASELINE?(p=this._study.barColorer(),f=p.barStyle(a,!1),d=null!=f.barBorderColor?f.barBorderColor:f.barColor):i&&a>=1?(_=this._study.data().valueAt(a-1),d=_[TradingView.CLOSE_PLOT]<=c[TradingView.CLOSE_PLOT]?e:t):d=c[TradingView.OPEN_PLOT]<=c[TradingView.CLOSE_PLOT]?e:t,m=0;m<4;m++)this._items[m].setColor(d)}g=s(this._study.symbolInfo()),this._additional=g?"(Data Provided by "+g+")":void 0}},n.prototype.items=function(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._items},n.prototype.update=function(){this._invalidated=!0},
n.prototype.additional=function(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._additional},inherit(r,c),r.prototype.createPlotLabels=function(e){},r.prototype._showLastValueOnPriceScale=function(){return this._model.properties().scalesProperties.showSeriesLastValue.value()},r.prototype.symbol=function(){var e,t=this.properties().inputs.symbol.value(),i=this._resolvedSymbols?this._resolvedSymbols[t]:null;return e=i?i.name:t,e.toUpperCase()},r.prototype.lastValueData=function(e,t){var i,o,n,r,s,a=c.prototype.lastValueData.call(this,"close",t);if(a.noData)return a;switch(i=this.properties(),o=a.item,i.style.value()){case l.STYLE_BARS:a.color=o[TradingView.OPEN_PLOT]<=o[TradingView.CLOSE_PLOT]?i.barStyle.upColor.value():i.barStyle.downColor.value();break;case l.STYLE_CANDLES:case l.STYLE_HOLLOW_CANDLES:a.color=o[TradingView.OPEN_PLOT]<=o[TradingView.CLOSE_PLOT]?i.candleStyle.upColor.value():i.candleStyle.downColor.value();break;case l.STYLE_LINE:a.color=i.lineStyle.color.value();break;case l.STYLE_AREA:a.color=i.areaStyle.color1.value();break;case l.STYLE_BASELINE:n=i.baselineStyle,r=this.priceScale(),s=Math.round(r.height()*(Math.abs(100-n.baseLevelPercentage.value())/100)),a.color=a.coordinate<s?i.baselineStyle.topLineColor.value():i.baselineStyle.bottomLineColor.value()}return a},r.prototype.createViews=function(){this._priceAxisViews=[],this._priceAxisViewsBase=[new u(this)],this._paneViews=[];var e=null;switch(this._properties.style.value()){case l.STYLE_BARS:e=new g(this,this._model);break;case l.STYLE_CANDLES:e=new m(this,this._model);break;case l.STYLE_HOLLOW_CANDLES:e=new _(this,this._model);break;case l.STYLE_LINE:e=new f(this,this._properties.lineStyle.priceSource.value(),this._model);break;case l.STYLE_AREA:e=new p(this,this._properties.areaStyle.priceSource.value(),this._model);break;case l.STYLE_BASELINE:e=new v(this,this._properties.baselineStyle.priceSource.value(),this._model),this._baseLineView=new y(this,this._model)}e&&this._paneViews.push(e),null!==this._baseLineView&&this._paneViews.push(this._baseLineView),this._paneViews.push(new o(this,this._model)),this._paneViews.push(this._symbolLabelView),this._dataWindowView||(this._dataWindowView=new n(this,this._model)),this._statusView||(this._statusView=new b(this)),this._priceAxisViews=[].concat(this._priceAxisViewsBase,this._hlinesPriceAsisViews,this._horizlinesPriceAsisViews)},r.prototype.barColorer=function(){return new P(this)},r.prototype.start=function(e){this._formatter=null,c.prototype.start.apply(this,arguments),this.priceScale()&&this.priceScale().updateFormatter()},r.prototype._createFormatter=function(){var e,t,i,o,n,r,s;"default"===this.properties().minTick.value()?(e=this.properties().inputs.symbol.value(),t=this._resolvedSymbols[e],this._formatter=new L(t?t.pricescale:100,t?t.minmov:1,!!t&&t.fractional)):(i=this.properties().minTick.value(),o=isNumber(i)?["100","1","false"]:i.split(","),n=parseInt(o[0]),r=parseInt(o[1]),s="true"===o[2],this._formatter=new L(n,r,s)),
this.priceScale()&&this.priceScale().updateFormatter()},r.prototype.formatter=function(){return this._formatter||this._createFormatter(),this._formatter},r.prototype._changeInputs=function(){c.prototype._changeInputs.call(this,this.inputs()),this.m_formatter=null,this.priceScale().updateFormatter()},r.prototype.title=function(){var e,t=this.properties().inputs.symbol.value(),i=this._resolvedSymbols[t];return i?(e=i.name,i.exchange&&0!==i.exchange.length&&(e+=", "+i.exchange)):e=t,e.toUpperCase()},r.prototype.bars=function(){return this.m_data},r.prototype.open=function(e){return this.bars().valueAt(e)[TradingView.OPEN_PLOT]},r.prototype.high=function(e){return this.bars().valueAt(e)[TradingView.HIGH_PLOT]},r.prototype.low=function(e){return this.bars().valueAt(e)[TradingView.LOW_PLOT]},r.prototype.close=function(e){return this.bars().valueAt(e)[TradingView.CLOSE_PLOT]},r.prototype.hl2=function(e){return(this.high(e)+this.low(e))/2},r.prototype.hlc3=function(e){return(this.high(e)+this.low(e)+this.close(e))/3},r.prototype.ohlc4=function(e){return(this.open(e)+this.high(e)+this.low(e)+this.close(e))/4},r.prototype.symbolInfo=function(){if(!this._resolvedSymbols)return null;var e=this._properties.inputs.symbol.value();return e?this._resolvedSymbols[e]:null},r.prototype.lastPriceLabelFixedCoordinate=function(){return this._priceAxisViews[0]._fixedCoordinate},r.prototype.tags=function(){var e=[],t=this.symbolInfo();return t?e.push(t.name):this._properties.inputs.symbol.value()&&e.push(this._properties.inputs.symbol.value()),e},r.prototype.getStylesPropertyPage=function(){return I.StudyOverlayStylesPropertyPage},t.OverlayDataWindowView=n,t.study_Overlay=r},function(e,t,i){"use strict";function o(e,t){n.call(this,t),this._series=e,this._series.onRestarted().subscribe(this,o.prototype.invalidate),this._series.onSymbolResolved().subscribe(this,o.prototype.invalidate),this._series.onCompleted().subscribe(this,o.prototype.invalidate),this._series.onBoxSizeChanged().subscribe(this,o.prototype.invalidate)}var n=i(480),r=i(121).getTranslatedSymbolDescription,s=i(281).generateTitleForGui;inherit(o,n),o.prototype.invalidate=function(){delete this._text,this.update()},o.prototype.getSeriesPrecision=function(){var e=4;return this._series._symbolInfo&&this._series._symbolInfo.pricescale&&(e=Math.round(Math.log(this._series._symbolInfo.pricescale)/Math.log(10))),e},o.prototype.round=function(e){var t=this.getSeriesPrecision(),i=Math.round(e*Math.pow(10,t))/Math.pow(10,t);return i||""},o.prototype.update=function(){if(!("_text"in this)){var e=this._series.symbolInfo()||{};this._bold=!1,this._size=this._props.mainSeriesProperties.statusViewStyle.fontSize.value()+"px",this._text=s({description:this._props.mainSeriesProperties.statusViewStyle.showSymbolAsDescription.value()?e.name:r({pro_name:e.pro_name,description:e.description,local_description:e.local_description,language:e.language}),exchange:this._props.mainSeriesProperties.statusViewStyle.showExchange.value()?e.exchange:null,symbol:this._series.symbol(),
interval:this._props.mainSeriesProperties.statusViewStyle.showInterval.value()?this._series.interval():null,style:this._series._properties.style.value(),inputs:this._series.getInputsProperties().state(),boxSize:this._series.data().boxSize,reversalAmount:this._series.data().reversalAmount,precision:this.getSeriesPrecision()})}},e.exports=o},function(e,t,i){"use strict";var o,n,r;Object.defineProperty(t,"__esModule",{value:!0}),o=i(6),n=i(80),r=function(e){function t(t,i){var o=e.call(this)||this;return o._source=t,o._model=i,o}return o.__extends(t,e),t.prototype._updateRendererData=function(e){var t,i,o;e.visible=!1,t=this._source,this._model.properties().scalesProperties.showSeriesPrevCloseValue.value()&&(t.isDWM()||null!==(i=t.prevClose())&&(o=this._source.properties().prevClosePriceLineColor.value(),e.background=o,e.color=this.generateTextColor(o),e.coordinate=i.coordinate,e.text=i.text,e.visible=!0))},t}(n.PriceAxisView),t.PrevCloseSeriesPriceAxisView=r},function(e,t,i){"use strict";var o,n,r,s,a,l;Object.defineProperty(t,"__esModule",{value:!0}),o=i(6),n=i(9),r=i(24),s=i(493),a=i(32),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.lastPrice=function(){return this._getSource().data().lastProjectionPrice},t.prototype._updateRendererData=function(e){var t,i,o,s,l,c,h,u,d,p,f,_,m,g,v,y,b,S,w,T,P,C;e.visible=!1,t=this._getData().model,t.properties().scalesProperties.showSeriesLastValue.value()&&(i=this._getSource(),o=i.priceScale(),s=t.timeScale(),l=this.lastPrice(),s.isEmpty()||o.isEmpty()||void 0===l||null!==(c=s.visibleBars())&&(h=c.firstBar(),u=c.lastBar(),d=i.data(),null!==(p=d.search(u,r.PlotRowSearchMode.NearestLeft))&&void 0!==(f=i.nearestIndex(h,r.PlotRowSearchMode.NearestRight))&&(_=n.ensureNotNull(d.valueAt(f))[TradingView.CLOSE_PLOT],m=l,o.properties().percentage.value()&&(m=100*(m-_)/_),g=e.background,v="",y=!1,b=i.properties(),S=b.style.value()===a.STYLE_HEIKEN_ASHI,S&&b.haStyle.showRealLastPrice.value()?(this._isCountdownEnabled()&&b.showCountdown.value()&&(v=this._countdownText()),w=i.lastValueData(TradingView.CLOSE_PLOT,!0),w.noData||w.color===e.background||(g=w.color),T=i.lastValueData(TradingView.CLOSE_PLOT,!1),w.noData||T.noData||(y=w.index===T.index)):(P=i.barColorer(),C=P.barStyle(p.index,!0),g=C.barColor,y=!0),e.background=g,e.secondLine=v,e.visible=y,e.color=this.generateTextColor(g),e.coordinate=o.priceToCoordinate(m),e.text=o.formatter().format(m))))},t}(s.SeriesPriceAxisView),t.ProjectionSeriesPriceAxisView=l},function(e,t,i){"use strict";function o(e,t){h.call(this),this._series=e,this._model=t,this._items.push(new u($.t("O",{context:"in_legend"}),"")),this._items.push(new u($.t("H",{context:"in_legend"}),"")),this._items.push(new u($.t("L",{context:"in_legend"}),"")),this._items.push(new u($.t("C",{context:"in_legend"}),"")),this._invalidated=!0,this.update()}
var n=i(55),r=n.parseRgb,s=n.distanceRgb,a=n.invertRgb,l=n.rgbToHexString,c=i(157),h=c.DataWindowView,u=c.DataWindowItem,d=i(217).translatedIntervalString,p=i(24).PlotRowSearchMode;inherit(o,h),o.prototype.update=function(){this._invalidated=!0},o.prototype._updateImpl=function(){var e,t,i,o,n,c,h,u,f,_,m,g,v;if(this._series.symbolInfo()?(this._header=[this._series.symbolInfo().name,d(this._series.interval()),this._series.symbolInfo().exchange].join(", "),this._title=this._series.symbolInfo().description):this._header=this._series.symbol(),this._items[0].setValue($.t("n/a")),this._items[1].setValue($.t("n/a")),this._items[2].setValue($.t("n/a")),this._items[3].setValue($.t("n/a")),!this._model.timeScale().isEmpty()&&0!==this._series.bars().size()&&(e=this._series.data().size()-1,t=this._model.crossHairSource().appliedIndex(),void 0!==(i=isNumber(t)?this._series.nearestIndex(t,p.NearestLeft):this._series.nearestIndex(e,p.NearestLeft))))for(o=this._series.data().valueAt(i),n=this._series.formatter(),this._items[0].setValue(n.format(o[TradingView.OPEN_PLOT])),this._items[1].setValue(n.format(o[TradingView.HIGH_PLOT])),this._items[2].setValue(n.format(o[TradingView.LOW_PLOT])),this._items[3].setValue(n.format(o[TradingView.CLOSE_PLOT])),c=this._series.barColorer(),h=c.barStyle(i,!1),u=null!=h.barBorderColor?h.barBorderColor:h.barColor,f=this._series.model().paneForSource(this._series),_=f._properties.background.value(),m=r(u),g=r(_),s(m,g)<70&&(u=l(a(m))),v=0;v<4;v++)this._items[v].setColor(u)},o.prototype.items=function(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._items},o.prototype.dump=function(){return{header:this._header,items:this._items}},o.prototype.additional=function(){if(this._series.dataPoweredBy)return"(Data Provided by "+this._series.dataPoweredBy+")"},e.exports=o},function(e,t,i){"use strict";function o(e){var t,i;if(0===e.length)return!1;if(-1===(t=e.findIndex(function(e){return l.coordinateIsValid(e.y)})))return!1;for(i=e.length-1;i>t&&!l.coordinateIsValid(e[i].y);)i--;return!(t>=i)}function n(e,t){var i,o,n,a,c,h=[],u=[],d=null;for(i=0;i<e.length;i++){if(o=e[i],n=e[i+1]||{},l.coordinateIsValid(o.y))o.y<=t&&h.push(o),o.y>=t&&u.push(o),d=o;else{if(null===d)continue;o=d}l.coordinateIsValid(n.y)&&((o.y>t&&n.y<t||o.y<t&&n.y>t)&&(Math.abs(o.x-n.x)<1?(a=new r.Point(o.x,t),h.push(a),u.push(a)):null!==(c=s.intersectLineSegments(o,n,new r.Point(o.x,t),new r.Point(n.x,t)))&&(a=o.add(n.subtract(o).scaled(c)),h.push(a),u.push(a))))}return{topItems:h,bottomItems:u}}var r,s,a,l,c,h,u;Object.defineProperty(t,"__esModule",{value:!0}),r=i(8),s=i(170),a=i(51),l=i(42),c=i(134),h=i(11),t.itemsRangeIsValid=o,t.splitItems=n,u=function(){function e(){this._data=null}return e.prototype.setData=function(e){this._data=e},e.prototype.draw=function(e){var t,i,r,s,a,l,c,h,u,d,p,f,_,m,g;null!==this._data&&(t=this._data,i=t.items,r=t.baseLevelCoordinate,s=t.bottom,a=t.bottomFillColor1,l=t.bottomFillColor2,c=t.topFillColor1,h=t.topFillColor2,u=t.topLineColor,d=t.bottomLineColor,p=t.topLineWidth,
f=t.bottomLineWidth,o(i)&&(_=n(i,r),m=_.topItems,g=_.bottomItems,e.lineCap="round",e.lineJoin="round",e.translate(.5,.5),0!==m.length&&(e.beginPath(),e.moveTo(m[0].x,r),this._makeLine(e,m,!0,0),e.closePath(),e.fillStyle=this._makeLinearGradient(e,c,h,r-s,r),e.fill(),e.beginPath(),this._makeLine(e,m,!1,0),e.lineWidth=p,e.strokeStyle=u,e.stroke()),0!==g.length&&(e.beginPath(),e.moveTo(g[0].x,r),this._makeLine(e,g,!0,1),e.closePath(),e.fillStyle=this._makeLinearGradient(e,a,l,r,r+s),e.fill(),e.beginPath(),this._makeLine(e,g,!1,1),e.lineWidth=f,e.strokeStyle=d,e.stroke())))},e.prototype.hitTest=function(e){var t,i,o,n,s,u,d,p,f,_,m;if(null===this._data)return null;for(t=this._data,i=t.items,o=t.topLineWidth,n=t.bottomLineWidth,s=l.selectionTolerance((o+n)/2),u=c.lowerbound(i,e,function(e,t){return e.x<=t.x}),d=Math.max(1,u-1),p=Math.min(i.length-1,u+1),f=d;f<=p;++f)if(_=i[f-1],m=i[f],a.distanceToSegment(new r.Point(_.x,_.y),new r.Point(m.x,m.y),new r.Point(e.x,e.y)).distance<=s)return new h(h.REGULAR);return null},e.prototype._makeLine=function(e,t,i,o){var n,r,s,a,c,h,u,d,p,f;if(null!==this._data&&-1!==(n=t.findIndex(function(e){return l.coordinateIsValid(e.y)})))for(r=this._data,s=r.barSpacing,a=r.baseLevelCoordinate,c=.25*s,u=t.length,d=n;d<u;d++)if(p=t[d],f=t[d+1]||{},l.coordinateIsValid(p.y)){if(0===o){if(h&&h.y>=a&&p.y>=a){e.moveTo(p.x,p.y);continue}}else if(h&&h.y<=a&&p.y<=a){e.moveTo(p.x,p.y);continue}if(h&&l.coordinateIsValid(h.y))e.lineTo(p.x,p.y),i&&!l.coordinateIsValid(f.y)&&e.lineTo(p.x,a);else if(f&&l.coordinateIsValid(f.y))i?(d!==n&&e.lineTo(p.x,a),e.lineTo(p.x,p.y)):e.moveTo(p.x,p.y);else if(i){if(0===d)continue;d!==n&&e.lineTo(p.x-c,a),e.lineTo(p.x-c,p.y),e.lineTo(p.x+c,p.y),e.lineTo(p.x+c,a)}else e.moveTo(p.x-c,p.y),e.lineTo(p.x+c,p.y);h=p}},e.prototype._makeLinearGradient=function(e,t,i,o,n){var r=e.createLinearGradient(0,o,0,n);return r.addColorStop(0,t),r.addColorStop(1,i),r},e}(),t.PaneRendererBaseline=u},function(e,t,i){"use strict";function o(e,t){this.m_series=e,this.m_model=t,this.m_bars=[],this._invalidated=!0,this._isMarkersEnabled=P.enabled("source_selection_markers")}function n(e,t){o.call(this,e,t)}function r(e,t){o.call(this,e,t)}function s(e,t){n.call(this,e,t)}function a(e,t){r.call(this,e,t)}function l(e,t){n.call(this,e,t)}function c(e,t){r.call(this,e,t)}function h(e,t){n.call(this,e,t)}function u(e,t){r.call(this,e,t)}function d(e,t){n.call(this,e,t)}function p(e,t){r.call(this,e,t)}var f=i(9).ensureNotNull,_=i(8).Point,m=i(155).SelectionRenderer,g=i(11),v=i(851).PaneRendererRenkoPB,y=i(852).PaneRendererKagi,b=i(853).PaneRendererPnF,S=i(41).CompositeRenderer,w=i(275),T=i(0).getLogger("Chart.JapaneseSeriesPaneView"),P=i(3);o.prototype.bars=function(){throw Error("unimplemented")},o.prototype.isProjection=function(){throw Error("unimplemented")},o.prototype.update=function(){this._invalidated=!0},o.prototype.nearestIndex=function(e,t){if(!TradingView.isInteger(e))return void T.logDebug("incorrect logicalPoint");var i=this.bars().search(e,t);return null!==i?i.index:void 0},
o.prototype._updateImpl=function(){var e,t,i,o,n,r,s,a,l,c,h,u,d,p,m,v,y,b,S,T,P=this;if(this.m_bars.length=0,(this.m_series.properties().style.value()!==TradingView.Series.STYLE_PNF||this.m_series.data().boxSize)&&!this.m_model.timeScale().isEmpty()&&!this.m_series.priceScale().isEmpty()&&null!==(e=this.m_series.getRealVisibleRange())&&0!==this.bars().size()){for(t=e.firstBar(),i=e.lastBar(),o=this.m_series.data().search(t).value[TradingView.CLOSE_PLOT];t<=i&&null===this.bars().valueAt(t);t++);if(!(t>i)&&(e=this.bars().range(t,i),n=this.m_series.priceScale(),r=this.m_series.barColorer(),s={},a=P.m_series.properties().style.value(),l=a===TradingView.Series.STYLE_KAGI||a===TradingView.Series.STYLE_PNF,c=P.isProjection(),h=f(P.m_series.data().bars().lastIndex()),e.each(function(e,t){var i,u,d,p;if(void 0!==t[TradingView.OPEN_PLOT]&&void 0!==t[TradingView.HIGH_PLOT]&&void 0!==t[TradingView.LOW_PLOT]&&void 0!==t[TradingView.CLOSE_PLOT]){if(i={},u={O:t[TradingView.OPEN_PLOT],H:t[TradingView.HIGH_PLOT],L:t[TradingView.LOW_PLOT],C:t[TradingView.CLOSE_PLOT],Adt:l?t[TradingView.ADT_PLOT]:void 0},n.properties().percentage.value())for(d in u)u[d]=100*(u[d]-o)/o;switch(i.time=Math.round(e),i.open=u.O,i.high=u.H,i.low=u.L,i.close=u.C,s.value=t,p=r.barStyle(e,c,s),s.previousValue=t,i.color=p.barColor,i.borderColor=p.barBorderColor,i.isUp=p.isBarUp,i.wickColor=p.barWickColor,a){case TradingView.Series.STYLE_PNF:i.low-=.5*P.m_series.data().boxSize,i.high+=.5*P.m_series.data().boxSize,i.additionalNum=Math.round(1+(t[TradingView.HIGH_PLOT]-t[TradingView.LOW_PLOT])/P.m_series.data().boxSize);break;case TradingView.Series.STYLE_KAGI:if(i.upColor=p.upColor,i.downColor=p.downColor,i.isTwoColorBar=p.isTwoColorBar,!isNumber(u.Adt))break;i.additionalPrice=u.Adt,c&&i.time===h&&(i.combinedWithProjection=!0)}P.m_bars.push(i)}},this),a===TradingView.Series.STYLE_PNF&&(n.properties().percentage.value()?(u=100*(500-o)/o,d=100*(0-o)/o,this.blockSize=(n.priceToCoordinate(d)-n.priceToCoordinate(u))/500*this.m_series.data().boxSize):this.blockSize=(n.priceToCoordinate(0)-n.priceToCoordinate(500))/500*this.m_series.data().boxSize),n.barPricesToCoordinates(this.m_bars),this.m_model.timeScale().barIndexesToCoordinates(this.m_bars),this.m_series===this.m_model.selectedSource()))for(p=w(t,i),this._selectionData={points:[]},this._selectionData.hittestResult=g.REGULAR,m=0;m<p.length;m++)v=p[m],null!==(y=this.m_series.bars().valueAt(v))&&(b=.5*(y[TradingView.OPEN_PLOT]+y[TradingView.CLOSE_PLOT]),n.properties().percentage.value()&&(b=100*(b-o)/o),S=this.m_model.timeScale().indexToCoordinate(v),T=this.m_series.priceScale().priceToCoordinate(b),this._selectionData.points.push(new _(S,T)))}},o.prototype.items=function(){return this.m_bars},o.prototype.dump=function(){var e={};return e.bars=this.m_bars,e},inherit(n,o),n.prototype.bars=function(){return this.m_series.bars()},n.prototype.isProjection=function(){return!1},inherit(r,o),r.prototype.bars=function(){return this.m_series.nsBars()},r.prototype.isProjection=function(){return!0},inherit(s,n),
s.prototype.renderer=function(){var e,t;return this._invalidated&&(this._updateImpl(),this._invalidated=!1),e={},e.bars=this.m_bars,e.barWidth=this.m_model.timeScale().barSpacing(),t=new S,t.append(new v(e)),this.m_series===this.m_model.selectedSource()&&this._isMarkersEnabled&&t.append(new m(this._selectionData)),t},inherit(a,r),a.prototype.renderer=function(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);var e={};return e.bars=this.m_bars,e.barWidth=this.m_model.timeScale().barSpacing(),new v(e)},inherit(l,n),l.prototype.renderer=function(){var e,t;return this._invalidated&&(this._updateImpl(),this._invalidated=!1),e={},e.bars=this.m_bars,e.barWidth=.9*this.m_model.timeScale().barSpacing(),t=new S,t.append(new v(e)),this.m_series===this.m_model.selectedSource()&&this._isMarkersEnabled&&t.append(new m(this._selectionData)),t},inherit(c,r),c.prototype.renderer=function(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);var e={};return e.bars=this.m_bars,e.barWidth=.9*this.m_model.timeScale().barSpacing(),new v(e)},inherit(h,n),h.prototype.renderer=function(){var e,t;return this._invalidated&&(this._updateImpl(),this._invalidated=!1),e={},e.bars=this.m_bars,e.barSpacing=this.m_model.timeScale().barSpacing(),t=new S,t.append(new y(e)),this.m_series===this.m_model.selectedSource()&&this._isMarkersEnabled&&t.append(new m(this._selectionData)),t},inherit(u,r),u.prototype.renderer=function(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);var e={};return e.bars=this.m_bars,e.upColor=this.upColor,e.downColor=this.downColor,e.barSpacing=this.m_model.timeScale().barSpacing(),new y(e)},inherit(d,n),d.prototype.renderer=function(){var e,t;return this._invalidated&&(this._updateImpl(),this._invalidated=!1),e={},e.bars=this.m_bars,e.blockSize=this.blockSize,e.barSpacing=this.m_model.timeScale().barSpacing(),t=new S,t.append(new b(e)),this.m_series===this.m_model.selectedSource()&&this._isMarkersEnabled&&t.append(new m(this._selectionData)),t},inherit(p,r),p.prototype.renderer=function(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);var e={};return e.bars=this.m_bars,e.blockSize=this.blockSize,e.barSpacing=this.m_model.timeScale().barSpacing(),new b(e)},t.SeriesRenkoPaneView=s,t.SeriesProjectionRenkoPaneView=a,t.SeriesPriceBreakPaneView=l,t.SeriesProjectionPriceBreakPaneView=c,t.SeriesKagiPaneView=h,t.SeriesProjectionKagiPaneView=u,t.SeriesPnFPaneView=d,t.SeriesProjectionPnFPaneView=p},function(e,t,i){"use strict";function o(e){this.bars=e.bars,this.barWidth=e.barWidth,this.barLineWidth=1}var n=i(42).selectionTolerance,r=i(11);o.prototype.draw=function(e){var t,i,o,n,r,s,a;for(e.save(),e.lineCap="butt",e.translate(.5,.5),e.lineWidth=this.barLineWidth,t=this.barWidth/2,i=0;i<this.bars.length;++i)o=this.bars[i],n=o.exactTime-t,r=o.exactTime+t-n,s=Math.round(Math.min(o.close,o.open)),a=Math.max(1,Math.round(Math.abs(o.close-o.open))),e.fillStyle=o.borderColor,e.fillRect(o.exactTime,Math.round(o.high),this.barLineWidth,Math.round(o.low-o.high)),e.fillRect(n,s,r,a),
e.fillStyle=o.color,e.fillRect(n+this.barLineWidth,s+this.barLineWidth,r-2*this.barLineWidth,a-2*this.barLineWidth);e.restore()},o.prototype.hitTest=function(e){var t,i,o,s,a=this.bars,l=.5*this.barWidth;if(0===a.length)return null;if(e.x<a[0].time-l)return null;if(e.x>a[a.length-1].time+l)return null;for(t=null,i=0;i<a.length;++i)if(o=a[i],e.x<=o.time+l){t=o;break}return s=n(this.barLineWidth),t&&t.high-s<=e.y&&e.y<=t.low+s?new r(r.REGULAR):null},t.PaneRendererRenkoPB=TradingView.PaneRendererRenkoPB=o},function(e,t,i){"use strict";function o(e){this.bars=e.bars,this.barSpacing=e.barSpacing,this.barLineWidth=Math.max(1,n.optimalBarWidth(e.barSpacing))}var n=i(42),r=i(11);o.prototype.draw=function(e){var t,i,o;for(e.save(),e.lineCap="square",e.translate(.5,.5),t=0;t<this.bars.length;++t)i=this.bars[t],o=Math.round(.5*this.barLineWidth),i.isTwoColorBar?(e.fillStyle=i.upColor,e.fillRect(Math.round(i.exactTime-o),Math.round(i.high-o),Math.round(2*o),Math.round(i.additionalPrice-i.high+o)),e.fillStyle=i.downColor,e.fillRect(Math.round(i.exactTime-o),Math.round(i.additionalPrice),Math.round(2*o),Math.round(i.low-i.additionalPrice+o))):(e.fillStyle=i.color,e.fillRect(Math.round(i.exactTime-o),Math.round(i.high-o),Math.round(2*o),Math.round(i.low-i.high)+2*o)),i.combinedWithProjection||(i.isTwoColorBar?e.fillStyle=i.isUp?i.downColor:i.upColor:e.fillStyle=i.color,e.fillRect(Math.round(i.exactTime-this.barSpacing+o),Math.round(i.open-o),Math.round(this.barSpacing-2*o+1),Math.round(2*o)));e.restore()},o.prototype.hitTest=function(e){var t,i,o,s,a=this.bars,l=.5*this.barLineWidth;if(0===a.length)return null;if(e.x<a[0].time-l)return null;if(e.x>a[a.length-1].time+l)return null;for(t=null,i=0;i<a.length;++i)if(o=a[i],e.x<=o.time+l){t=o;break}return s=n.selectionTolerance(.5*this.barLineWidth),t&&t.high-s<=e.y&&e.y<=t.low+s?new r(r.REGULAR):null},t.PaneRendererKagi=TradingView.PaneRendererKagi=o},function(e,t,i){"use strict";function o(e){this.bars=e.bars,this.barSpacing=e.barSpacing,this.blockSize=e.blockSize,this.barWidth=e.barSpacing}var n=i(42).selectionTolerance,r=i(11);o.prototype.draw=function(e){var t,i,o,n;for(e.save(),e.lineCap="butt",e.translate(.5,.5),t=0;t<this.bars.length;++t){for(i=this.bars[t],o=(i.low-i.high)/i.additionalNum,e.beginPath(),n=0;n<i.additionalNum;n++)i.isUp?(e.moveTo(Math.round(i.time-.5*this.barWidth)+.5,i.high+n*o),e.lineTo(Math.round(i.time+.5*this.barWidth)-.5,i.high+(n+1)*o),e.moveTo(Math.round(i.time+.5*this.barWidth)-.5,i.high+n*o),e.lineTo(Math.round(i.time-.5*this.barWidth)+.5,i.high+(n+1)*o)):this.drawEllipse(e,i.time-.45*this.barWidth+.5,i.high+n*o,Math.round(.9*this.barWidth),Math.round(o));e.strokeStyle=i.color,e.lineWidth=1,e.stroke()}e.restore()},o.prototype.drawEllipse=function(e,t,i,o,n){e.save(),e.translate(t+o/2,i+n/2),e.scale(o/2,n/2),e.moveTo(1,0),e.arc(0,0,.95,0,2*Math.PI,!1),e.restore()},o.prototype.hitTest=function(e){var t,i,o,s,a=this.bars,l=.5*this.barSpacing;if(0===a.length)return null;if(e.x<a[0].time-l)return null;if(e.x>a[a.length-1].time+l)return null;for(t=null,
i=0;i<a.length;++i)if(o=a[i],e.x<=o.time+l){t=o;break}return s=n(this.barWidth),t&&t.high-s<=e.y&&e.y<=t.low+s?new r(r.REGULAR):null},t.PaneRendererPnF=TradingView.PaneRendererPnF=o},function(e,t,i){"use strict";function o(){this._data=null}function n(e){this._series=e,this._invalidated=!0,this._renderer=new o}var r=i(8).Point,s=i(41).CompositeRenderer,a=i(272).DateFormatter,l=i(229).TimeFormatter;o.prototype.setData=function(e){this._data=e},o.prototype.hitTest=function(){return null},o.prototype.draw=function(e){var t,i,o,n,r,s,a,l,c,h,u,d,p,f,_,m;null!==this._data&&(t=5,i=12,o=5,n=8,r=13,s=0,e.save(),e.setFont(r+"px Arial"),c=$.t("Last available bar"),this._data.eod?s=e.measureText(c).width:(a=e.measureText(this._data.dateString||"").width,l=e.measureText(this._data.timeString||"").width,s=Math.max(a,l)),h=this._data.timeString?2:1,e.fillStyle=this._data.eod?"#FF4040":"#58A3CD",e.translate(this._data.point.x+.5,this._data.point.y+.5),u=Math.round(-s/2)-n,d=-(r+t)*h-t-i-o,p=Math.round(u+s+2*n),f=-i-o,e.beginPath(),e.moveTo(u,d),e.lineTo(p,d),e.lineTo(p,f),e.lineTo(i,f),e.lineTo(0,f+i),e.lineTo(-i,f),e.lineTo(u,f),e.fill(),e.fillStyle="#FFFFFF",e.textBaseline="top",this._data.eod?e.fillText(c,u+n,d+t):(_=u+n+(s-a)/2,e.fillText(this._data.dateString,_,d+t),this._data.timeString&&(m=u+n+(s-l)/2,e.fillText(this._data.timeString,m,d+2*t+r))),e.restore())},n.prototype.update=function(){this._invalidated=!0},n.prototype.updateImpl=function(){var e,t,i,o,n,s,c;delete this._point,delete this._dateString,delete this._timeString,delete this._eod,void 0!==(e=this._series.gotoDateResult())&&(t=this._series.model().timeScale().timePointToIndex(e.timestamp),i=this._series.bars(),o=null,t<i.firstIndex()&&null!==i.first()?(t=i.firstIndex(),o=i.first().value):t>i.lastIndex()&&null!==i.last()?(t=i.lastIndex(),o=i.last().value):o=i.valueAt(t),null!==o&&(n=this._series.priceScale().priceToCoordinate(o[TradingView.HIGH_PLOT]),s=this._series.model().timeScale().indexToCoordinate(t),this._point=new r(s,n),e.eod?this._eod=!0:(c=this._series.model().timeScale().indexToUserTime(t),this._dateString=(new a).format(c),this._series.isDWM()||(this._timeString=(new l).format(c)))))},n.prototype.renderer=function(){return this._invalidated&&(this.updateImpl(),this._invalidated=!1),this._point?(this._renderer.setData({point:this._point,dateString:this._dateString,timeString:this._timeString,eod:this._eod}),this._renderer):new s},e.exports=n},function(e,t,i){"use strict";(function(t){var o=i(655).ExchangeSession,n=function(){function e(e,t,i,o){return""===e?new h(60*t,i):"S"===e?new h(t,i):new u(i,o,t,n(e,i))}function n(e,t){switch(e){case"D":return new S(t);case"W":return new w(t);case"M":return new T(t)}return console.error("unknown dwm resolution: "+e),null}function r(e,t,i,o,n){var r,s,a,l,c,h,u,d=(new C).init("UTC",e),p=""!==t;return p?(s=i*M[t],r=M.D):(s=60*i*1e3,r=60*d.spec.findSessionEntry(0,0).length()*1e3),a=r/s,l=p?7:7-d.spec.weekEndsCount(),c=l*a,o<c?(h=o/a,n-h*M.D):(u=o/c,n-u*M.W)}function s(e,t,i,o){
if("number"!=typeof i||"number"!=typeof t||isNaN(i)||isNaN(t))throw Error("Cannot extrapolate from "+t+" to "+i);return l(e,t,function(e,t){return t>i||o&&e.length>o})}function a(e,t,i){return l(e,t,function(e,t){return e.length>=i})}function l(e,t,i){var o,n,r,s,a,l=t;for(e.moveTo(l),o=[],n=0,r=0;!i(o,l);){if(n>5)throw console.trace(["0x10",new Date(t),"->",new Date(l)]),Error("Internal error 0x10 while extrapolating.");if((s=e.indexOfBar(l))===L)l=e.startOfBar(0);else if(s===I)l=e.startOfBar(I);else{if((a=e.startOfBar(s))!==t){if(r&&r===a)throw console.trace(["0x11",new Date(t),"->",new Date(a)]),Error("Internal error 0x11 while extrapolating.");r=a,n=0,o.push(a)}l=e.startOfBar(s+1)}e.moveTo(l),n++}return o}function c(e){if(isNaN(e))return NaN;var t=this.indexOfBar(e);return t===I&&(this.moveTo(e),t=this.indexOfBar(e)),t<0?NaN:this.startOfBar(t)}function h(e,t){this.period=e,this.session=t,this.sessionStart=Number.MIN_VALUE,this.sessionEnd=Number.MIN_VALUE}function u(e,t,i,o){this.period=i,this.sessionTgt=e,this.sessionSrc=t||e,this.builder=o,this.periodStart=-Number.MAX_VALUE,this.periodEnd=-Number.MAX_VALUE,this.periodLastBarStart=-Number.MAX_VALUE}function d(e,t,i){var o=k.clone(i);return t.alignToSessionStart(o,e),k.cal_to_utc(e,o)}function p(e,t){var i=k.get_day_of_week(t)-e.firstDayOfWeek();return i<0?i+7:i}function f(e,t){var i=t+e.firstDayOfWeek();return i>k.SATURDAY?i-k.SATURDAY:i}function _(e,t){var i=k.get_day_of_year(t)-1,o=p(e,t)-i%7;return 0===o?P(i/7):(o>=0&&(o-=7),P((o+i)/7))}function m(e,t,i){var o,n=0;for(o=t;o<i;++o)n+=e.isWeekEnd(f(e,o))?1:0;return n}function g(e,t){var i=new Date(Date.UTC(t,11,31,23,59)),o=k.days_per_year(t)-v(e,i);return k.get_day_of_week(i)!==k.SUNDAY&&k.get_day_of_week(i)!==k.SATURDAY||o--,o}function v(e,t){var i,o,n=k.get_day_of_year(t)-1,r=p(e,t),s=r-n%7;return s<0&&(s+=7),i=0,n<7-s?i+=m(e,s,r):(o=0===s?0:m(e,s,7),i+=m(e,0,r)+o),i+_(e,t)*e.weekEndsCount()}function y(){}function b(e){this.sessionsSpec=e}function S(e){this.session=e}function w(e){this.session=e}function T(e){this.session=e}function P(e){return 0|e}function C(){}function x(e,t,i){var o,n,r,s,a=e.length;if(0===a)return-1;for(o=0,n=a-1,r=P((o+n)/2);;){if(0===(s=i(e[r],t))||s>0){if((n=r-1)<o)return r}else if(o=r+1,n<o)return r<a-1?r+1:-1;r=P((o+n)/2)}}function E(e,t){var i=k.utc_to_cal(t.timezone,+e),o=k.get_day_of_week(i),n=k.get_minutes_from_midnight(i),r=t.spec.findSessionEntry(o,n);return r.isOvernight()&&n>r.start()+r.length()&&o===r.dayOfWeek()-1&&(o++,n-=1440),o===r.dayOfWeek()&&n>=r.start()&&n<r.start()+r.length()}var L=-1,I=-2,A="undefined"!=typeof window?window:t,k=A.PineJsCalendar?A.PineJsCalendar:i(94),M={S:1e3,D:864e5,W:6048e5,M:2592e6};return h.prototype.alignTime=c,h.prototype.alignTimeIfPossible=function(e){var t=this.alignTime(e);return isNaN(t)?e:t},h.prototype.indexOfBar=function(e){return e<this.sessionStart?L:e>=this.sessionEnd?I:P(k.time_seconds_diff(e,this.sessionStart)/this.period)},h.prototype.startOfBar=function(e){if(e===I)return this.sessionEnd
;if(e<0)throw Error("Negative offset is not supported");return this.sessionStart+k.time_seconds(this.period*e)},h.prototype.isLastBar=function(e,t){return t>=this.sessionStart+k.time_seconds(this.period*(e+1)-1)},h.prototype.moveTo=function(e){var t=this.session.timezone,i=k.utc_to_cal(t,e),o=this.session.spec,n=o.alignToSessionStart(i,this.session.timezone);this.sessionStart=k.cal_to_utc(t,i),this.sessionEnd=this.sessionStart+k.time_minutes(n)},u.prototype.alignTime=c,u.prototype.alignTimeIfPossible=function(e){return this.tradingDayToSessionStart(e)},u.prototype.tradingDayToSessionStart=function(e){return this.moveTo(e),this.startOfBar(0)},u.prototype.indexOfBar=function(e){return e<this.periodStart?L:e>=this.periodEnd?I:0},u.prototype.startOfBar=function(e){if(e===I||e>0)return this.periodEnd;if(e===L)throw Error("PRE_SESSION is not supported");return this.periodStart},u.prototype.isLastBar=function(e,t){return t>=this.periodLastBarStart},u.prototype.moveTo=function(e){var t,i,o,n,r,s,a,l,c=k.utc_to_cal(this.sessionSrc.timezone,e);c=this.sessionSrc.spec.correctTradingDay(c,this.sessionSrc.timezone),t=this.sessionTgt.timezone,i=this.builder.indexOfPeriod(c,t),o=P(i/this.period)*this.period,n=k.get_year(c),r=this.sessionTgt.spec,s=this.builder.startOfPeriod(t,o,n),this.periodStart=d(t,r,s),a=o+this.period,l=this.builder.startOfPeriod(t,a,n),this.periodEnd=d(t,r,l),k.add_date(l,-1),this.moveToPrevWorkDay(r,l),this.periodLastBarStart=d(t,r,l),(this.periodLastBarStart<this.periodStart||this.periodLastBarStart===this.periodEnd)&&(this.periodLastBarStart=this.periodStart)},u.prototype.moveToPrevWorkDay=function(e,t){for(;e.isWeekEnd(k.get_day_of_week(t));)k.add_date(t,-1)},y.prototype.indexOfPeriod=function(e){return k.get_day_of_year(e)-1},y.prototype.startOfPeriod=function(e,t,i){var o=k.get_cal(e,i,k.JANUARY,1),n=k.add_days_considering_dst(e,o,t);return k.utc_to_cal(e,+n)},b.prototype.uber=new y,b.prototype.indexOfPeriod=function(e){return this.uber.indexOfPeriod(e)-v(this.sessionsSpec,e)},b.prototype.startOfPeriod=function(e,t,i){function o(e,t){this.weekEnds=m(e,t,7),this.calendarDays=7-t,this.businessDays=this.calendarDays-this.weekEnds}function n(e,t){var i,o=0;for(i=e;i<7&&(s.sessionsSpec.isWeekEnd(f(s.sessionsSpec,i))||!(--t<0));++i)o++;return o}function r(e,t,i){var o,n,r,a,l,c,h=0,u=i%(7-s.sessionsSpec.weekEndsCount());for(o=0,n=u-(0===e?0:t.businessDays);o<7&&n>0;++o)r=s.sessionsSpec.isWeekEnd(f(s.sessionsSpec,o)),h+=r?1:0,n-=r?0:1;return a=t.weekEnds+h,l=P((i-t.businessDays)/(7-s.sessionsSpec.weekEndsCount())),c=a+s.sessionsSpec.weekEndsCount()*l,i+c}var s,a,l,c,h;return t>=g(this.sessionsSpec,i)&&(i++,t=0),s=this,a=new Date(Date.UTC(i,k.JANUARY,1)),l=p(this.sessionsSpec,a),c=new o(this.sessionsSpec,l),h=t<c.businessDays?n(l,t):r(l,c,t),this.uber.startOfPeriod(e,h,i)},S.prototype.indexOfPeriod=function(e){return this.builder().indexOfPeriod(e)},S.prototype.startOfPeriod=function(e,t,i){return this.builder().startOfPeriod(e,t,i)},S.prototype.builder=function(){
return this._builder||(this._builder=this.session.spec.hasWeekEnds()?new b(this.session.spec):new y),this._builder},w.prototype.indexOfPeriod=function(e,t){var i=_(this.session.spec,e);return 0===i&&e<this.startOfPeriod(t,0,k.get_year(e))&&(i=-1),i},w.prototype.startOfPeriod=function(e,t,i){var o,n,r=new Date(Date.UTC(i,k.JANUARY,1)),s=p(this.session.spec,r),a=0===s?7*t:7*(t+1)-s,l=k.get_days_per_year(r);return a>l?this.startOfPeriod(e,0,i+P(a/l)):(o=k.get_cal(e,i,k.JANUARY,1),n=k.add_days_considering_dst(e,o,a),k.utc_to_cal(e,+n))},T.prototype.indexOfPeriod=function(e){return k.get_month(e)},T.prototype.startOfPeriod=function(e,t,i){var o,n,r,s;return t<0?(o=P((11-t)/12),i-=o,t+=12*o):t>k.DECEMBER&&(i++,t=k.JANUARY),n=k.get_cal_utc(i,t,1),r=p(this.session.spec,n),r>4&&(s=7-r,k.add_date(n,s)),n},C.prototype.init=function(e,t){return this.timezone="string"==typeof e?k.get_timezone(e):e,this.spec=new o(t),this},{PRE_SESSION:L,POST_SESSION:I,LASTBAR_SESSION:-3,newBarBuilder:e,Session:C,alignPeriodsBack:r,extrapolateBarsFrontByCount:a,extrapolateBarsFrontToTime:s,lower_bound:x,isTradingNow:E,numberOfFullWeeks:_,numberOfWeekEndsSinceYearStart:v,BusinessDaysBuilder:b,alignExchangeTimeToSessionStartAndReturnUTC:d}}();e.exports=n}).call(t,i(58))},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path d="M12.5 17.207L18.707 11h2l3.647-3.646-.708-.708L20.293 10h-2L12.5 15.793l-3-3-4.854 4.853.708.708L9.5 14.207z"/><path d="M9 16h1v1H9zm1 1h1v1h-1zm-1 1h1v1H9zm2 0h1v1h-1zm-1 1h1v1h-1zm-1 1h1v1H9zm2 0h1v1h-1zm-3-3h1v1H8zm-1 1h1v1H7zm-1 1h1v1H6zm2 0h1v1H8zm-1 1h1v1H7zm-2 0h1v1H5zm17-9h1v1h-1zm1-1h1v1h-1zm0 2h1v1h-1zm-1 1h1v1h-1zm-1 1h1v1h-1zm2 0h1v1h-1zm-1 1h1v1h-1zm-1 1h1v1h-1zm2 0h1v1h-1zm-1 1h1v1h-1zm-1 1h1v1h-1zm2 0h1v1h-1zm-1 1h1v1h-1zm-1 1h1v1h-1zm2 0h1v1h-1zm-5-7h1v1h-1zm2 0h1v1h-1zm1-1h1v1h-1zm-2 2h1v1h-1zm-1 1h1v1h-1zm2 0h1v1h-1zm-1 1h1v1h-1zm-1 1h1v1h-1zm2 0h1v1h-1zm-1 1h1v1h-1zm-1 1h1v1h-1zm2 0h1v1h-1zm-1 1h1v1h-1zm-2-6h1v1h-1zm-1 1h1v1h-1zm-1 1h1v1h-1zm2 0h1v1h-1zm-1 1h1v1h-1zm-1 1h1v1h-1zm2 0h1v1h-1zm-1 1h1v1h-1zm-1 1h1v1h-1zm2 0h1v1h-1zm-3-3h1v1h-1zm-1 1h1v1h-1zm-1 1h1v1h-1zm2 0h1v1h-1zm-1 1h1v1h-1z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path d="M18 6h1v16h-1z"/><path d="M18.5 18H22v1h-3.5zM15 13h3.5v1H15zm-5-6h1v16h-1z"/><path d="M10.5 9H14v1h-3.5zM7 20h3.5v1H7z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path d="M17 11v6h3v-6h-3zm-.5-1h4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-7a.5.5 0 0 1 .5-.5z"/><path d="M18 7h1v3.5h-1zm0 10.5h1V21h-1z"/><path d="M9 8v12h3V8H9zm-.5-1h4a.5.5 0 0 1 .5.5v13a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-13a.5.5 0 0 1 .5-.5z"/><path d="M10 4h1v3.5h-1zm0 16.5h1V24h-1z"/></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path d="M9 8v12h3V8H9zm-1-.502C8 7.223 8.215 7 8.498 7h4.004c.275 0 .498.22.498.498v13.004a.493.493 0 0 1-.498.498H8.498A.496.496 0 0 1 8 20.502V7.498z"/><path d="M10 4h1v3.5h-1z"/><path d="M17 6v6h3V6h-3zm-1-.5c0-.276.215-.5.498-.5h4.004c.275 0 .498.23.498.5v7c0 .276-.215.5-.498.5h-4.004a.503.503 0 0 1-.498-.5v-7z"/><path d="M18 2h1v3.5h-1z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path d="M17 11v6h3v-6h-3zm-.5-1h4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-7a.5.5 0 0 1 .5-.5z"/><path d="M18 7h1v3.5h-1zm0 10.5h1V21h-1z"/><path d="M9 8v11h3V8H9zm-.5-1h4a.5.5 0 0 1 .5.5v12a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-12a.5.5 0 0 1 .5-.5z"/><path d="M10 4h1v5h-1zm0 14h1v5h-1zM8.5 9H10v1H8.5zM11 9h1.5v1H11zm-1 1h1v1h-1zm-1.5 1H10v1H8.5zm2.5 0h1.5v1H11zm-1 1h1v1h-1zm-1.5 1H10v1H8.5zm2.5 0h1.5v1H11zm-1 1h1v1h-1zm-1.5 1H10v1H8.5zm2.5 0h1.5v1H11zm-1 1h1v1h-1zm-1.5 1H10v1H8.5zm2.5 0h1.5v1H11z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path d="M11.982 16.689L17.192 12h3.033l4.149-4.668-.748-.664L19.776 11h-2.968l-4.79 4.311L9 12.293l-4.354 4.353.708.708L9 13.707z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill="none" stroke="currentColor"><path stroke-dasharray="1,1" d="M4 14.5h22"/><path stroke-linecap="round" stroke-linejoin="round" d="M7.5 12.5l2-4 1 2 2-4 3 6"/><path stroke-linecap="round" d="M5.5 16.5l-1 2"/><path stroke-linecap="round" stroke-linejoin="round" d="M17.5 16.5l2 4 2-4m2-4l1-2-1 2z"/></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path d="M18 5v5h3V5h-3zm-1-1h5v7h-5V4zm-4 13h3v-5h-3v5zm-1-6h5v7h-5v-7zM8 24h3v-5H8v5zm-1-6h5v7H7v-7z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path d="M14.5 16a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5zm0-1a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm0 7a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5zm0-1a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm3.293-15.5l4.707 4.707.707-.707L18.5 4.793z"/><path d="M18.5 10.207L23.207 5.5l-.707-.707L17.793 9.5zm-.707 1.293l4.707 4.707.707-.707-4.707-4.707z"/><path d="M18.5 16.207l4.707-4.707-.707-.707-4.707 4.707zM5.793 17.5l4.707 4.707.707-.707L6.5 16.793z"/><path d="M6.5 22.207l4.707-4.707-.707-.707L5.793 21.5zM5.793 5.5l4.707 4.707.707-.707L6.5 4.793z"/><path d="M6.5 10.207L11.207 5.5l-.707-.707L5.793 9.5zM5.793 11.5l4.707 4.707.707-.707L6.5 10.793z"/><path d="M6.5 16.207l4.707-4.707-.707-.707L5.793 15.5z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path d="M18 24h3V12h-3v12zm-1-13h5v14h-5V11zm-4-8v7h3V3h-3zm-1-1h5v9h-5V2zM8 19h3v-7H8v7zm-1-8h5v9H7v-9z"/></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path d="M11 5h3v12h5V8h3v13h1V7h-5v9h-3V4h-5v18H7v-5H6v6h5z"/></svg>'},function(e,t){e.exports=function(e,t,i,o,n){_gaq.push(["_trackTiming",e,t,i,o,n])}},function(e,t,i){"use strict";var o,n,r;Object.defineProperty(t,"__esModule",{value:!0}),o=i(6),n=i(80),r=function(e){function t(t){var i=e.call(this)||this;return i._source=t,i}return o.__extends(t,e),t.prototype._updateRendererData=function(e){e.visible=!1;var t=this._source.lastValueData("close",!1);t.noData||(e.background=t.color,e.color=this.generateTextColor(t.color),e.coordinate=t.coordinate,e.floatCoordinate=t.floatCoordinate,e.text=t.text,e.visible=!0)},t}(n.PriceAxisView),t.OverlayPriceAxisView=r},function(e,t,i){"use strict";function o(e,t,i,o){this._symbolLabelView=new r(e,this,"compare","symbol","showSymbolLabels"),TradingView.Study.call(this,e,t,i,o);var n=this;this._properties.minTick.listeners().subscribe(null,function(){n._createFormatter()}),this.properties().minTick.listeners().subscribe(null,function(){n._model.invalidate(new s(s.FULL_UPDATE))}),this._properties.merge({skipHistogramBaseOnAutoScale:!0})}var n=i(182).DataVendorStudyDataWindowView,r=i(181),s=i(40),a=i(16).PriceFormatter,l=i(2).propertyPages;inherit(o,TradingView.Study),o.prototype.createPlotLabels=function(e){},o.prototype._showLastValueOnPriceScale=function(){return this._model.properties().scalesProperties.showSeriesLastValue.value()},o.prototype.createViews=function(){this._dataWindowView||(this._dataWindowView=new n(this,this._model)),TradingView.Study.prototype.createViews.call(this),this._paneViews.push(this._symbolLabelView)},o.prototype._createFormatter=function(){var e,t,i,o,n,r=this.properties().inputs.symbol.value(),s=this._resolvedSymbols?this._resolvedSymbols[r]:null;"default"===this.properties().minTick.value()?this._formatter=new a(s?s.pricescale:100,s?s.minmov:1,!!s&&s.fractional):(e=this.properties().minTick.value(),t=isNumber(e)?["100","1","false"]:e.split(","),i=parseInt(t[0]),o=parseInt(t[1]),n="true"===t[2],this._formatter=new a(i,o,n)),this.priceScale()&&this.priceScale().updateFormatter()},o.prototype.symbol=function(){var e,t=this.properties().inputs.symbol.value(),i=this._resolvedSymbols?this._resolvedSymbols[t]:null;return e=i?i.name:t,e.toUpperCase()},o.prototype.title=function(e){var t,i=this.properties().inputs.symbol.value(),o=this._resolvedSymbols?this._resolvedSymbols[i]:null;return o?(t=o.name,o.exchange&&0!==o.exchange.length&&(t+=", "+o.exchange)):t=i,t.toUpperCase()},o.prototype.symbolInfo=function(){if(!this._resolvedSymbols)return null;var e=this._properties.inputs.symbol.value();return e?this._resolvedSymbols[e]:null},o.prototype.lastPriceLabelFixedCoordinate=function(){return this._priceAxisViews[0]._fixedCoordinate},o.prototype.tags=function(){var e=this.symbol();return e?[e]:[]},o.prototype.getInputsPropertyPage=function(){return l.StudyCompareInputsPropertyPage},e.exports=o},function(e,t,i){"use strict";function o(e,t,i,o){n.call(this,e,t,i,o)}
var n=i(34).Study,r=i(2).propertyPages;inherit(o,n),o.prototype.getStylesPropertyPage=function(){return r.VolumePropertyPage},t.study_Volume=o},function(e,t,i){"use strict";function o(e,t,i,o){s.call(this,e,t,i,o)}var n=i(9).assert,r=i(10).clone,s=i(34).Study,a=i(24).PlotList;inherit(o,s),o.prototype.clearData=function(){s.prototype.clearData.call(this),this._underlyingData=new a(this._plotFields)},o.prototype._mergeData=function(e){var t,i;return this._invalidateLastNonEmptyPlotRowCache(),t=this._underlyingData.firstIndex(),this._underlyingData.merge(e),t!==this._underlyingData.firstIndex()&&(this.m_data=new a(this._underlyingData.plotNames())),i=this.m_data.lastIndex(),this._underlyingData.range(i,this._underlyingData.lastIndex()).each(function(e,t){return this.m_data.add(e,r(t)),!1}.bind(this)),this._plotsForStrategyProcessing().forEach(function(e){this._createStrategy(e.strategy,e.strategyIndex,e.targetIndex,i).rebuildData(this.m_data)},this),this.m_data},o.prototype._plotsForStrategyProcessing=function(){var e=["dataoffset"],t=[];return this._metaInfo.plots.forEach(function(i,o){var r,s;e.indexOf(i.type)>-1&&(r=null,this._metaInfo.plots.forEach(function(e,t){e.id===i.target&&(r=t)}),n(r>=0,"target plot not found for strategy plot "+i.id),s={strategy:i.type,strategyIndex:o,targetIndex:r},t.push(s))},this),t},o.prototype._createStrategy=function(e,t,i,n){return new o["Strategy_"+e](t,i,n)},o.Strategy_dataoffset=function(e,t,i){this._strategyPlotIndex=e,this._targetPlotIndex=t,this._startIndex=i},o.Strategy_dataoffset.prototype.rebuildData=function(e){var t=this._targetPlotIndex+1,i=this._strategyPlotIndex+1,o=null,n=null;e.range(this._startIndex||e.firstIndex(),e.lastIndex()).each(function(r,s){var a,l,c,h=s[t],u=s[i]?Math.round(s[i]):null;return s[t]=null,s[i]=null,!(!u||u>0)&&(a=r+u,l={pointIndex:a,value:h},n?n.pointIndex!==l.pointIndex&&(a>=0&&(e.valueAt(a)[t]=h),c=!1,o&&(c=o.value<=n.value&&n.value<=h||o.value>=n.value&&n.value>=h),c?n.pointIndex>=0&&(e.valueAt(n.pointIndex)[t]=null):o=n,n=l):n=l,!1)})},e.exports=o},function(e,t,i){"use strict";function o(e,t,i){n.call(this,e,t,i)}var n=i(160).LineStudyMtp;inherit(o,n),o.prototype._mtpStudyId=function(){return"mtp_tsanalysis"},o.prototype.pointsCount=function(){return 1},o.prototype._studyInputs=function(){var e,t,i=this.points();return i.length<this.pointsCount()?null:(e=i[0].index,t=this._model.mainSeries().bars().valueAt(e),null===t?null:[this.properties().inputs.displayZoneLabels.value(),1e3*t[TradingView.TIME_PLOT],this.properties().inputs.account_size.value(),this.properties().inputs.percent_risk.value(),this.properties().inputs.tickEntryOffset.value(),this.properties().inputs.tickStopOffset.value(),this.properties().inputs.minRRRatio.value(),this.properties().inputs.shouldFilterWPTZones.value(),this.properties().inputs.shouldFilterSTFTrends.value()])},e.exports=o},function(e,t,i){"use strict";function o(e,t,i){n.call(this,e,t,i),this._symbolIntervalChanged=!1,this._model.mainSeries().onSymbolIntervalChanged().subscribe(this,this.onSymbolIntervalChanged)
}var n=i(160).LineStudyMtp;inherit(o,n),o.prototype._mtpStudyId=function(){return"mtp_decisionpoint"},o.prototype.onSymbolIntervalChanged=function(){this._symbolIntervalChanged=!0},o.prototype.pointsCount=function(){return 1},o.prototype._studyInputs=function(){var e,t,i=this.points();return i.length<this.pointsCount()?null:(e=i[0].index,t=this._model.mainSeries().bars().valueAt(e),null===t?null:[this.properties().inputs.displayZoneLabels.value(),this._symbolIntervalChanged,1e3*t[TradingView.TIME_PLOT]])},o.prototype.onData=function(e){n.prototype.onData.call(this,e),this._symbolIntervalChanged=!1},e.exports=o},function(e,t,i){"use strict";function o(e,t,i){n.call(this,e,t,i)}var n=i(160).LineStudyMtp;inherit(o,n),o.prototype._mtpStudyId=function(){return"mtp_riskreward"},o.prototype.pointsCount=function(){return 3},o.getTooltipText=function(e){return e&&0!==e._points.length?1===e._points.length?"Select Stop Bar":2===e._points.length?"Select Target Point":null:"Select Entry Setup Bar"},o.prototype._studyInputs=function(){var e,t,i,o,n,r,s=this.points();return s.length<this.pointsCount()?null:(e=s[0].index,t=s[1].index,i=s[2].index,o=this._model.mainSeries().bars().valueAt(e),n=this._model.mainSeries().bars().valueAt(t),r=this._model.mainSeries().bars().valueAt(i),null===o||null===n||null===r?null:[1e3*o[TradingView.TIME_PLOT],1e3*n[TradingView.TIME_PLOT],1e3*r[TradingView.TIME_PLOT],s[2].price,this.properties().inputs.account_size.value(),this.properties().inputs.percent_risk.value(),this.properties().inputs.tickEntryOffset.value(),this.properties().inputs.tickStopOffset.value()])},e.exports=o},function(e,t,i){"use strict";(function(t,o){function n(e,i){var o=this;m.call(this),this._properties=i,this._model=e,this._dataWindowView=new u(this,e),this._priceAxisView=new h(this),this._menuView=new L(this,e),this._startMeasurePriceAxisView=new h(this),this._endMeasurePriceAxisView=new h(this),this._timeAxisView=new d(this,e),this._startMeasureTimeAxisView=new d(this,e,"measureStartX"),this._endMeasureTimeAxisView=new d(this,e,"measureEndX"),this.visible=!0,e.readOnly()?this.areLinesVisible=!0:g.cursorTool.subscribe(function(e){o.areLinesVisible="arrow"!==e},{callWithLast:!0}),this._movedDelegate=new t,this._subscribed=!1,this._model.readOnly()&&(this.visibleTrap=!0),this._selectBarMode=new I(!1),this._barSelectedDelegate=new t,this._mouseClickBoundedHandler=this._mouseClickHandler.bind(this),this._isOnHoveredChartWidget=!1}function r(e,t){this._source=e,this._pane=t,this._pipFormatter=null,this._lastSymbolInfo=null,this._horzTrenRenderer=new p,this._vertTrenRenderer=new p,this._bgRenderer=new _,this._labelRenderer=new f({})}function s(e,t,i,o){this.source=e,this.pane=t,this._horzVisible=i,this._mouseClickHandler=o}function a(e,t,i){this.source=e,this.pane=t,this._axis=i||"x"}
var l=i(8).Point,c=i(1).LineDataSource,h=i(876).CrossHairPriceAxisView,u=i(877),d=i(878),p=i(114).TrendLineRenderer,f=i(177).TextRenderer,_=i(551).RectangleRenderer,m=i(52).DataSource,g=i(110),v=i(879).PaneRendererCrossHair,y=i(880).PaneRendererCrossHairLock,b=i(41).CompositeRenderer,S=i(40),w=i(73).PercentageFormatter,T=i(574).TimeSpanFormatter,P=i(564).PipFormatter,C=i(33),x=i(91).LineEnd,E=i(172),L=i(881),I=i(22);inherit(n,m),n.prototype.index=0,n.prototype.price=NaN,n.prototype.pane=null,n.prototype.color="white",n.prototype.style="",n.prototype.customization={disableSelection:!0},n.prototype.properties=function(){return this._properties},n.prototype.moved=function(){return this._movedDelegate},n.prototype.saveOriginCoord=function(e,t){this._originX=e,this._originY=t},n.prototype.clearOriginCoord=function(){this._originX=NaN,this._originY=NaN},n.prototype.setPosition=function(e,t,i){this._subscribed||(this._model.mainSeries().onRestarted().subscribe(this,n.prototype.clearMeasure),this._subscribed=!0),this.setLockedPosition(i),this.visible=!0,this._tryToUpdateViews(e,t,i)},n.prototype.update=function(){var e,t,i,o,n;this.visible&&(e=this._priceScaleByPane(this.pane),t=this._originX||this.x,i=this._originY||this.y,o=this._model.timeScale().coordinateToIndex(t),n=NaN,null!==e&&(n=e.coordinateToPrice(i)),this._tryToUpdateViews(o,n,this.pane))},n.prototype._priceScaleByPane=function(e){return e&&!e.defaultPriceScale().isEmpty()?e.defaultPriceScale():null},n.prototype._tryToUpdateViews=function(e,t,i){this._tryToUpdateData(e,t,i)&&(this.updateAllViews(),this._movedDelegate.fire({time:this._model.timeScale().points().roughTime(this.index),price:this.price}))},n.prototype._tryToUpdateData=function(e,t,i){var o=this.x,n=this.y,r=this.price,s=this.index,a=this.pane,l=this._priceScaleByPane(i);return this.index=e,this.x=this._model.timeScale().indexToCoordinate(e),null!==l?(this.pane=i,this.price=t,this.y=l.priceToCoordinate(t)):(this.pane=null,this.price=NaN,this.y=NaN),o!==this.x||n!==this.y||s!==this.index||r!==this.price||a!==this.pane},n.prototype.setLockedPosition=function(e){delete this.lockedIndex,delete this.lockedX,e!==this._measurePane&&g.lockTimeAxis().value()&&(this.lockedIndex=this._model.timeScale().points().roughIndex(g.lockTimeAxisTime.value()),this.lockedX=this._model.timeScale().indexToCoordinate(this.lockedIndex))},n.prototype.clearPosition=function(){this.visible=!1;var e=this._model.mainSeries().bars().lastIndex();this.index=null!==e?e:NaN,this.price=NaN,this.x=NaN,this.y=NaN,this.clearOriginCoord()},n.prototype.measureStartY=function(){var e,t=this._startMeasurePoint.price,i=this._measurePane;return i.defaultPriceScale().isPercent()&&(e=i.mainDataSource().firstValue(),t=i.defaultPriceScale().priceRange().convertToPercent(t,e)),i.defaultPriceScale().priceToCoordinate(t)},n.prototype.measureStartX=function(){return this._model.timeScale().indexToCoordinate(this._startMeasurePoint.index)},n.prototype.measureEndY=function(){var e,t=this._endMeasurePoint.price,i=this._measurePane
;return i.defaultPriceScale().isPercent()&&(e=i.mainDataSource().firstValue(),t=i.defaultPriceScale().priceRange().convertToPercent(t,e)),i.defaultPriceScale().priceToCoordinate(t)},n.prototype.measureEndX=function(){return this._model.timeScale().indexToCoordinate(this._endMeasurePoint.index)},n.prototype.menuView=function(){return this._model.readOnly()?null:this._menuView},n.prototype.paneViews=function(e){var t,i,n=this._selectBarMode.value()&&this._isOnHoveredChartWidget,l=e===this.pane&&!n,c=[new s(this,e,l,this._mouseClickBoundedHandler)];return e===this._measurePane&&(this._measurePaneView||(this._measurePaneView=new r(this,e)),this._measurePaneView.update(),c.push(this._measurePaneView)),t=e===this.pane,i=!TradingView.isMobile.any()||window.screen.width>=500,t&&this._isOnHoveredChartWidget&&!this._model.readOnly()&&!n&&i&&o.enabled("chart_crosshair_menu")&&c.push(this._menuView),g.lockTimeAxis().value()&&c.push(this._timeLockPaneView=this._timeLockPaneView||new a(this,e)),c},n.prototype.dataWindowView=function(){return this._dataWindowView},n.prototype.priceAxisViews=function(e,t){var i,o;return this.visibleTrap&&this.visible&&this.pane===e&&t===e.defaultPriceScale()?(i=[],o=this._selectBarMode.value()&&this._isOnHoveredChartWidget,o||i.push(this._priceAxisView),this._startMeasurePoint&&i.push(this._startMeasurePriceAxisView),this._endMeasurePoint&&i.push(this._endMeasurePriceAxisView),i):null},n.prototype.timeAxisView=function(){if(!this.visibleTrap||!this.visible&&!g.lockTimeAxis().value())return null;var e=[this._timeAxisView];return this._startMeasurePoint&&e.push(this._startMeasureTimeAxisView),this._endMeasurePoint&&e.push(this._endMeasureTimeAxisView),e},n.prototype.updateAllViews=function(){this._priceAxisView.update(),this._startMeasurePoint&&(this._startMeasurePriceAxisView.update(),this._startMeasureTimeAxisView.update()),this._endMeasurePoint&&(this._endMeasurePriceAxisView.update(),this._endMeasureTimeAxisView.update()),this._timeAxisView.update()},n.prototype.startMeasurePoint=function(){return this._startMeasurePoint},n.prototype.startMeasuring=function(e,t){if(t.defaultPriceScale().isPercent()){var i=t.mainDataSource().firstValue();e.price=t.defaultPriceScale().priceRange().convertFromPercent(e.price,i)}this._startMeasurePoint=e,this._measurePane=t},n.prototype.finishMeasure=function(e){var t,i=this._measurePane;i.defaultPriceScale().isPercent()&&(t=i.mainDataSource().firstValue(),e.price=i.defaultPriceScale().priceRange().convertFromPercent(e.price,t)),this._endMeasurePoint=e},n.prototype.endMeasurePoint=function(){return this._endMeasurePoint},n.prototype.clearMeasure=function(e){delete this._measurePane,delete this._startMeasurePoint,delete this._endMeasurePoint,delete this._lastValidMeasurePoint,this._model.invalidate(new S(S.LIGHT_UPDATE))},n.prototype.measurePoints=function(){var e,t,i,o,n;return this.updateAllViews(),e=[this._startMeasurePoint],this._endMeasurePoint?e.push(this._endMeasurePoint):(this._measurePane===this.pane&&(this._lastValidMeasurePoint={x:this.x,y:this.y,
rawPrice:this.price,price:this.price,index:this.index}),t=this._lastValidMeasurePoint.rawPrice,i=this._measurePane,o=i.defaultPriceScale(),o.isPercent()&&!o.isEmpty()&&(n=i.mainDataSource().firstValue(),this._lastValidMeasurePoint.price=o.priceRange().convertFromPercent(t,n)),e.push(this._lastValidMeasurePoint)),e},n.prototype.currentPoint=function(){return new l(this.x,this.y)},n.prototype.appliedIndex=function(){return isFinite(this.lockedIndex)&&this.lockedIndex||this.index},n.prototype.appliedX=function(){return isFinite(this.lockedX)&&this.lockedX||this.x},n.prototype.selectBarMode=function(){return this._selectBarMode},n.prototype.toggleSelectBarMode=function(){this._setSelectBarModeState(!this._selectBarMode.value())},n.prototype.onBarSelected=function(){return this._barSelectedDelegate},n.prototype._setSelectBarModeState=function(e){this._selectBarMode.setValue(e),this._model.invalidate(new S(S.LIGHT_UPDATE))},n.prototype._mouseClickHandler=function(){var e;this._model.mainSeries().bars().contains(this.index)&&null!==(e=this._model.timeScale().indexToTimePoint(this.index))&&(this._setSelectBarModeState(!1),this._barSelectedDelegate.fire(e))},n.prototype.handleContextMenuEvent=function(){this._selectBarMode.value()&&this._setSelectBarModeState(!1)},n.prototype.setOnHoveredChartWidget=function(e){this._isOnHoveredChartWidget=e},n.prototype.isOnHoveredChartWidget=function(){return this._isOnHoveredChartWidget},r.prototype.update=function(){var e,t,i,o,n,r,s,a,c,h,u,d,p,f,_,m,g,v;if(this._source._endMeasurePoint)e=this._source._endMeasurePoint.price,t=this._source._endMeasurePoint.index;else if(this._source._measurePane===this._source.pane)e=this._source.price,t=this._source.index;else{if(!this._source._lastValidMeasurePoint)return;e=this._source._lastValidMeasurePoint.rawPrice,t=this._source._lastValidMeasurePoint.index}i=e-this._source._startMeasurePoint.price,o=t-this._source._startMeasurePoint.index,n=this._source._startMeasurePoint.price,r=this._source._measurePane,r.defaultPriceScale().isPercent()&&(s=r.mainDataSource().firstValue(),this._source._endMeasurePoint&&(e=r.defaultPriceScale().priceRange().convertToPercent(e,s)),n=r.defaultPriceScale().priceRange().convertToPercent(n,s)),a=this._source._measurePane.defaultPriceScale().formatter().format(i),this._source._startMeasurePoint.price&&(c=i/this._source._startMeasurePoint.price,a+=" ("+(new w).format(100*c)+")"),this._label=a+"\n"+$.t("{0} bars").format(o),n=this._source._model._magnet.align(n,this._source._startMeasurePoint.index,this._source._measurePane),e=this._source._model._magnet.align(e,t,this._source._measurePane),h=this._source._model.timeScale().indexToCoordinate(this._source._startMeasurePoint.index),u=this._source._model.timeScale().indexToCoordinate(t),d=this._source._measurePane.defaultPriceScale().priceToCoordinate(n),p=this._source._measurePane.defaultPriceScale().priceToCoordinate(e),this._p1=new l(h,d),this._p2=new l(u,p),f=this._source._model.timeScale().indexToUserTime(this._source._startMeasurePoint.index),
_=this._source._model.timeScale().indexToUserTime(t),m=this._pane.model().mainSeries().symbolInfo(),m&&m!==this._lastSymbolInfo&&(this._pipFormatter=new P(m.pricescale,m.minmov,m.type,m.minmove2),this._lastSymbolInfo=m),f&&_&&(g=(_.valueOf()-f.valueOf())/1e3,v=this._pipFormatter?" , "+this._pipFormatter.format(i):"",this._label=""+a+v+"\n"+$.t("{0} bars").format(o)+", "+(new T).format(g))},r.prototype.renderer=function(){var e,t,i,o,n,r,s,a,c,h,u,d,p=new b,f={};return f.points=[this._p1,this._p2],f.width=this._source._model.timeScale().width(),f.height=this._source._measurePane.defaultPriceScale().height(),f.color="#D3E7FF",f.linewidth=0,f.fillBackground=!0,f.transparency=60,f.backcolor="#BADAFF",this._bgRenderer.setData(f),p.append(this._bgRenderer),e=this._p1.add(this._p2).scaled(.5),t=new l(this._p1.x,e.y),i=new l(this._p2.x,e.y),o={points:[t,i],width:f.width,height:f.height,color:"#363c4e",linewidth:1,linestyle:CanvasEx.LINESTYLE_DASHED,extendleft:!1,extendright:!1,leftend:x.Normal,rightend:x.Arrow},this._horzTrenRenderer.setData(o),p.append(this._horzTrenRenderer),t=new l(e.x,this._p1.y),i=new l(e.x,this._p2.y),o={points:[t,i],width:f.width,height:f.height,color:"#363c4e",linewidth:1,linestyle:CanvasEx.LINESTYLE_DASHED,extendleft:!1,extendright:!1,leftend:x.Normal,rightend:x.Arrow},this._vertTrenRenderer.setData(o),p.append(this._vertTrenRenderer),n={x:0,y:10},r=function(e,t){return{points:[t],text:e,color:"#FFFFFF",horzAlign:"left",vertAlign:"middle",font:"Arial",offsetX:n.x,offsetY:n.y,bold:!1,italic:!1,fontsize:12,padding:5,highlightBorder:!1,backgroundColor:C.generateColor("#5b85bf",10),backgroundTransparency:10,backgroundVertInflate:5,backgroundHorzInflate:5,backgroundRoundRect:4}},s=.5*(this._p1.x+this._p2.x),a=this._p2.y,c=new l(s,a),h=r(this._label,c),this._labelRenderer.setData(h),u=this._labelRenderer.measure(),d={x:s+h.backgroundHorzInflate+u.textBgPadding-u.width/u.textBgPadding,y:this._p1.y>this._p2.y?c.y-u.height-2*u.textBgPadding-n.y>0?a-u.height-n.y+u.textBgPadding:n.y-2*u.textBgPadding:c.y+u.height+u.textBgPadding+n.y>f.height?f.height-u.height-n.y:a+u.textBgPadding},this._labelRenderer.setPoints([new l(d.x,d.y)]),p.append(this._labelRenderer),p},s.prototype.update=function(){},s.prototype.renderer=function(){var e,t,i,o,n,r,s={},a=this.source.visible&&this.source.areLinesVisible,l=g.lockTimeAxis().value();return s.horzLinesVisible=a&&this._horzVisible,s.vertLinesVisible=a||l,e=this.pane._model.readOnly(),t=e?defaults("chartproperties.paneProperties.crossHairProperties"):null,i=this.source.selectBarMode().value()&&this.source.isOnHoveredChartWidget(),o=TradingView.isMobile.any()&&c.isLineTool(this.source._model.currentTool())&&!i,n=o?"#a000a0":e?t.color:this.pane._model.properties().paneProperties.crossHairProperties.color.value(),r=e?t.transparency:this.pane._model.properties().paneProperties.crossHairProperties.transparency.value(),!o&&r>0&&(n=C.generateColor(n,r)),s.color=n,s.lineWidth=e?t.width:this.pane._model.properties().paneProperties.crossHairProperties.width.value(),
s.lineStyle=e?t.style:this.pane._model.properties().paneProperties.crossHairProperties.style.value(),s.drawCenter=o&&this.pane===this.source.pane,s.w=this.pane.width(),s.h=this.pane.height(),s.x=isFinite(this.source.lockedX)&&this.source.lockedX||this.source.x,s.y=this.source.y,i&&(s.x=Math.max(0,this.source.x-1),s.vertLinesVisible=!0,s.lineStyle=E.LINESTYLE_SOLID,s.mouseClickHandler=this._mouseClickHandler,s.lineWidth=2,s.color="#ff0000"),new v(s)},a.prototype.update=function(){},a.prototype.renderer=function(){var e,t,i,o,n=this.source.visible&&this.source.areLinesVisible,r=g.lockTimeAxis().value(),s=n&&this._horzVisible,a=n||r;if(("y"!==this._axis||s)&&a)return e=9,t=11,i="y"===this._axis?this.pane.width()-e/2:this.source.lockedX+1,o="y"===this._axis?this.source.y:this.pane.height()-t/2-1,new y({x:i,y:o,width:e,height:t,bodyHeight:7})},e.exports=n}).call(t,i(4),i(3))},function(e,t,i){"use strict";var o,n,r,s;Object.defineProperty(t,"__esModule",{value:!0}),o=i(6),n=i(80),r=i(16),s=function(e){function t(t){var i=e.call(this)||this;return i._defaultFormatter=new r.PriceFormatter(100),i._background="#585858",i._source=t,i}return o.__extends(t,e),t.prototype._updateRendererData=function(e){var t,i,o,n;e.visible=!1,null!==(t=this._source.pane)&&(i=t.defaultPriceScale(),this._source.visible&&!i.isEmpty()&&(n=i.mainSource(),o=n?n.formatter():this._defaultFormatter,e.background=this._background,e.color=this.generateTextColor(this._background),e.coordinate=this._source.y,e.text=o.format(this._source.price),e.visible=!0))},t}(n.PriceAxisView),t.CrossHairPriceAxisView=s},function(e,t,i){"use strict";function o(e,t){r.call(this),this._header=null,this._crossHair=e,this._model=t,this._items.push(new s("Date","")),this._items.push(new s("Time","")),this._items.push(new s("Price","")),this._defaultFormatter=new a(100)}var n=i(157),r=n.DataWindowView,s=n.DataWindowItem,a=i(16).PriceFormatter,l=i(272).DateFormatter,c=i(229).TimeFormatter;inherit(o,r),o.prototype.update=function(){var e,t,i,o,n,r,s=this._model.mainSeries().isDWM();this._items[1].setVisible(!s),this._items[0].setValue("n/a"),this._items[1].setValue("n/a"),this._items[2].setValue("n/a"),this._model.timeScale().isEmpty()||(e=this._crossHair.appliedIndex(),t=this._model.timeScale().indexToUserTime(e),null===t?(this._items[0].setValue("n/a"),s||this._items[1].setValue("n/a")):(this._items[0].setValue((new l).format(t)),s||this._items[1].setValue((new c).format(t))),(i=this._crossHair.pane)&&(o=i.defaultPriceScale(),o.isEmpty()||(n=o.mainSource(),r=n?n.formatter():this._defaultFormatter,this._items[2].setValue(r.format(this._crossHair.price)))))},e.exports=o},function(e,t,i){"use strict";function o(e,t){n.call(this),this._invalidated=!0,this._crosshair=e,this._model=t,this._renderer=new r,this._rendererData={visible:!1,background:"#585858",color:"white",text:"",width:0}}var n=i(279).TimeAxisView,r=i(280),s=i(184).DateTimeFormatter;inherit(o,n),o.prototype.update=function(){this._invalidated=!0},o.prototype._updateImpl=function(){var e,t,i=this._rendererData
;i.visible=!1,e=this._model.timeScale(),e.isEmpty()||(i.width=e.width(),i.coordinate=this._crosshair.appliedX(),(t=e.indexToUserTime(this._crosshair.appliedIndex()))&&(i.text=new s(this._model.mainSeries().isDWM()).format(t),i.visible=!0))},o.prototype.renderer=function(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._renderer.setData(this._rendererData),this._renderer},e.exports=o},function(e,t,i){"use strict";function o(e){this.data=e}var n=i(11);o.prototype.draw=function(e){var t,i,o,n,r,s=this.data.vertLinesVisible,a=this.data.horzLinesVisible;(s||a)&&this.data&&(e.lineStyle=this.data.lineStyle,e.lineWidth=this.data.lineWidth,e.strokeStyle=this.data.color,t=this.data.lineWidth%2==0?.5:0,i=this.data.x+1+t,o=this.data.y+t,n=this.data.w,r=this.data.h,s&&i>=0&&CanvasEx.drawLine(e,i,0,i,r),a&&o>=0&&CanvasEx.drawLine(e,0,o,n,o),this.data.drawCenter&&(e.beginPath(),e.arc(i,o,3,0,2*Math.PI,!0),e.fillStyle=this.data.color,e.fill()))},o.prototype.hitTest=function(e){return this.data.mouseClickHandler?new n(n.CUSTOM,{mouseClickHandler:this.data.mouseClickHandler}):null},t.PaneRendererCrossHair=TradingView.PaneRendererCrossHair=o},function(e,t,i){"use strict";function o(e){this._data=e}o.prototype._drawShackle=function(e){var t=this._data.width-3,i=t/2,o=this._data.height-this._data.bodyHeight;e.moveTo(1.5,i),e.arc(this._data.width/2,i,i,Math.PI,2*Math.PI),o>i&&(e.moveTo(1.5,i),e.lineTo(1.5,o),e.moveTo(this._data.width-1.5,i),e.lineTo(this._data.width-1.5,o))},o.prototype.draw=function(e){var t,i,o,n;e.translate(this._data.x-this._data.width/2,this._data.y-this._data.height/2),t="rgba(153,153,153,.3)",i="rgba(153,153,153,.7)",o="#777",n="rgba(255,255,255,.7)",e.strokeStyle=t,e.lineWidth=2,e.beginPath(),this._drawShackle(e),e.stroke(),e.closePath(),e.strokeStyle=i,e.lineWidth=1,e.beginPath(),e.rect(0,this._data.height-this._data.bodyHeight+.5,this._data.width,this._data.bodyHeight),e.closePath(),e.stroke(),e.translate(0,-1),e.strokeStyle=o,e.beginPath(),this._drawShackle(e),e.stroke(),e.closePath(),e.fillStyle=n,e.beginPath(),e.rect(1,this._data.height-this._data.bodyHeight+1.5,this._data.width-2,this._data.bodyHeight-2),e.fill(),e.beginPath(),e.rect(.5,this._data.height-this._data.bodyHeight+1,this._data.width-1,this._data.bodyHeight-1),e.stroke(),e.closePath(),e.fillStyle=o,e.fillRect(this._data.width/2-.5,this._data.height-this._data.bodyHeight/2,1,2)},t.PaneRendererCrossHairLock=TradingView.PaneRendererCrossHairLock=o},function(e,t,i){"use strict";(function(o){function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s,a,l,c,h,u,d,p,f,_,m,g,v,y,b,S;Object.defineProperty(t,"__esModule",{value:!0}),s=Object.assign||function(e){var t,i,o;for(t=1;t<arguments.length;t++){i=arguments[t];for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},a=function(){function e(e,t){var i,o;for(i=0;i<t.length;i++)o=t[i],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),
Object.defineProperty(e,o.key,o)}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),l=i(8),c=i(70),h=i(11),u=n(h),d=i(550),p=i(511),f=i(154),_=n(f),m=i(20),g=i(191),v=i(256),y=i(505),b=function(){function e(t){r(this,e),Object.assign(this,t)}return a(e,[{key:"hitTest",value:function(e){if(this.left&&(0,c.pointInRectangle)(e,new l.Point(this.xl,this.y),new l.Point(this.xl+this.containerWidth,this.y+this.containerHeight))||this.right&&(0,c.pointInRectangle)(e,new l.Point(this.xr,this.y),new l.Point(this.xr+this.containerWidth,this.y+this.containerHeight)))return new u.default(u.default.CUSTOM,{mouseDownHandler:this.mouseDownHandler.bind(this,e),tooltip:this.tooltip})}},{key:"drawPlus",value:function(e,t,i,o,n,r,s,a){e.fillStyle=this.background,e.fillRect(t,i,o,n),e.strokeStyle=this.color,e.beginPath(),e.moveTo(t+a,this.crossHeirY),e.lineTo(t+r,this.crossHeirY),e.moveTo(t+a+s,this.crossHeirY-s),e.lineTo(t+a+s,this.crossHeirY+s),e.stroke()}},{key:"draw",value:function(e){this.right&&this.drawPlus(e,this.xr,this.y,this.containerWidth,this.containerHeight,this.fontSize,this.plusSize,this.horzPadding),this.left&&this.drawPlus(e,this.xl,this.y,this.containerWidth,this.containerHeight,this.fontSize,this.plusSize,this.horzPadding)}}]),e}(),S=function(){function e(t,i){r(this,e),this._ch=t,this._model=i,this._data={background:"#585858",color:"white"},this._currMainDataSourceId=null,this._hasActions=!1,this._tooltipText=null,this._gaOrigin="CH menu"}return a(e,[{key:"update",value:function(){var e,t,i,o,n=this._ch.y,r=this._model.properties().scalesProperties.fontSize.value(),a=this._model.timeScale().width(),l=Math.floor(r/4.5),c=Math.ceil(r/4.5),h=Math.ceil(r/3),u=(r-h)/2,d=r+l+c,p=r+h,f=n-Math.floor(r/2)-l-.5,_=a-p-.5,m=this._ch.pane;m&&m.mainDataSource()&&m.mainDataSource().idForAlert()!==this._currMainDataSourceId&&(this._currMainDataSourceId=m.mainDataSource().idForAlert(),this._hasActions=this._hasAvailableActions(m.mainDataSource()),this._tooltipText=this._getTooltipText(m.mainDataSource())),e=m&&null!==m.m_leftPriceScale.mainSource()&&this._hasActions,t=m&&null!==m.m_rightPriceScale.mainSource()&&this._hasActions,i=a-p/2,o=this._tooltipText?{text:this._tooltipText,rect:{x:i,y:f,w:0,h:0}}:null,this._data=s({},this._data,{left:e,right:t,xl:-.5,xr:_,y:f,containerWidth:p,containerHeight:d,crossHeirY:n,fontSize:r,plusSize:u,horzPadding:h,mouseDownHandler:this._handleMouseDown.bind(this),tooltip:o})}},{key:"renderer",value:function(){return this.update(),new b(this._data)}},{key:"_hasAvailableActions",value:function(e){return this._canCreateAlert(e)||this._canTrade(e)}},{key:"_getTooltipText",value:function(e){return this._canCreateAlert(e)&&!this._canTrade(e)?$.t("Add Alert"):null}},{key:"_canCreateAlert",value:function(e){return this._model.canCreateAlertForDataSource(e)}},{key:"_canTrade",value:function(e){return e===this._model.mainSeries()&&(0,g.tradingService)()}},{key:"_handleMouseDown",value:function(e,t){var i,n,r,s,a,l,c,h=this
;return o.enabled("widget")&&o.enabled("referral_program_for_widget_owners")?void(0,y.showGoToTradingViewReferralDialog)({feature:"plusMenu"}).open():((0,m.trackEvent)(this._gaOrigin,"click"),i=t.localY,n=this._ch.pane.mainDataSource(),r=(0,g.tradingService)(),s=n===this._model.mainSeries()&&r,a=[],(l=this._model.canCreateAlertForDataSource(n))&&!s?(c=this._getValue(n,i),void this._addAlert(c,n)):(l&&a.push(this._getActionAddAlert(n,i)),void(s&&(a.length&&a.push({separator:!0}),(0,p.createTradeContext)(n,i).then(function(e){return r.chartContextMenuActions(e,{onlyMainActions:!0,gaOrigin:h._gaOrigin,moreEvents:!0})}).then(function(i){r.trackEvent(h._gaOrigin,"click");var o=(0,d.convertActionDescriptionsToActions)(a);o=o.concat(i),h._showContextMenu(o,e,t)})))))}},{key:"_getActionAddAlert",value:function(e,t){var i=this,o=this._getValue(e,t),n=this._formatValue(o,e);return{text:$.t("Add Alert")+" ("+n+")",action:function(){i._addAlert(o,e)}}}},{key:"_getValue",value:function(e,t){var i,o=e.priceScale(),n=o.coordinateToPrice(t);return o.isPercentage()&&(i=e.firstValue(),n=void 0!==i&&null!==i?o.priceRange().convertFromPercent(n,i):null),n}},{key:"_formatValue",value:function(e,t){return t.formatter().format(e)}},{key:"_addAlert",value:function(e,t){var i=this;runOrSignIn(function(){new v.MakeAlertDialog({series:t,value:e,conditionId:"cross",silent:!0}),(0,m.trackEvent)(i._gaOrigin,"alert")},{source:this._gaOrigin})}},{key:"_showContextMenu",value:function(e,t,i){var o=this;_.default.hideAll(),setTimeout(function(){_.default.createMenu(e,{reverse:o._data.xr&&Math.abs(t.x-o._data.xr)<o._data.containerWidth}).show(i)})}}]),e}(),t.default=S,e.exports=t.default}).call(t,i(3))},function(e,t,i){"use strict";(function(t){function o(e){function i(e,t){var i=e.font;return a.hasOwnProperty(i)||(a[i]={}),a[i].hasOwnProperty(t)||(a[i][t]=e.measureText(t).width),a[i][t]}function o(){var o=s.width(),a=s.height();return{draw:function(s){var c,h,u,d,p,f,_,m=e.symbolInfo();if(m&&!t.enabled("fundamental_widget")){for(s.fillStyle=n.generateColor(l.color.value(),l.transparency.value()),c=m.name,/QUANDL/.test(m.exchange)&&(h=c.split(/\//),h.length&&(c=h[h.length-1])),u=[{text:c?c+", "+r(e.interval()):"",font:"96px Verdana, Arial, sans-serif",lineHeight:114,baselineOffset:87},{text:m.description||"",font:"48px Verdana, Arial, sans-serif",lineHeight:57,baselineOffset:43.5}],d=0,p=0;p<u.length;p++)f=u[p],f.text&&(s.font=f.font,_=i(s,f.text),_>o?(f.zoom=o/_,_=o):f.zoom=1,f.offsetLeft=(o-_)/2,d+=f.lineHeight*f.zoom);for(d=Math.max((a-d)/2,0),p=0;p<u.length;p++)f=u[p],f.text&&(s.save(),s.font=f.font,s.translate(f.offsetLeft,d),s.scale(f.zoom,f.zoom),s.fillText(f.text,0,f.baselineOffset),s.restore(),d+=f.lineHeight*f.zoom)}}}}var s=null,a={},l=e.model().properties().symbolWatermarkProperties,c={renderer:o,update:function(){}};this.paneViews=function(e){return e.containsMainSeries()?(s=e,[c]):[]}}var n=i(33),r=i(217).translatedIntervalString;e.exports=o}).call(t,i(3))},function(e,t,i){"use strict";function o(){this.visible=!0,
this.horzLinesVisible=!0,this.horzLinesColor="white",this.horzLinesStyle="",this.vertLinesVisible=!0,this.vertLinesColor="white",this.vertLinesStyle=""}function n(e,t){this.source=e,this.pane=t,this._renderer=new r}function r(){this.data=null}o.prototype.paneViews=function(e){return[new n(this,e)]},n.prototype.update=function(){},n.prototype.renderer=function(){var e={};return this.pane.defaultPriceScale().isEmpty()||this.pane.timeScale().isEmpty()?null:(e.horzLinesVisible=!0,e.vertLinesVisible=!0,e.horzLinesColor=this.pane._model.properties().paneProperties.horzGridProperties.color.value(),e.vertLinesColor=this.pane._model.properties().paneProperties.vertGridProperties.color.value(),e.horzLineStyle=this.pane._model.properties().paneProperties.horzGridProperties.style.value(),e.vertLineStyle=this.pane._model.properties().paneProperties.vertGridProperties.style.value(),e.priceMarks=this.pane.defaultPriceScale().marks(),e.timeMarks=this.pane.timeScale().marks(),e.w=this.pane.width(),e.h=this.pane.height(),this._renderer.setData(e),this._renderer)},r.prototype.setData=function(e){this.data=e},r.prototype.draw=function(e){var t;if(null!==this.data){if(e.lineWidth=1,this.data.vertLinesVisible){for(e.strokeStyle=this.data.vertLinesColor,CanvasEx.setLineStyle(e,this.data.vertLineStyle),e.beginPath(),t=0;t<this.data.timeMarks.length;t++)e.moveTo(this.data.timeMarks[t].coord+1,0),e.lineTo(this.data.timeMarks[t].coord+1,this.data.h);e.stroke()}if(this.data.horzLinesVisible){for(e.strokeStyle=this.data.horzLinesColor,CanvasEx.setLineStyle(e,this.data.horzLineStyle),e.beginPath(),t=0;t<this.data.priceMarks.length;t++)e.moveTo(0,this.data.priceMarks[t].coord),e.lineTo(this.data.w,this.data.priceMarks[t].coord);e.stroke()}}},e.exports=o},function(e,t,i){"use strict";function o(e,t,i){this._magnetProperty=e,this._timeScale=t}var n=i(145);o.prototype.align=function(e,t,i){var o,r,s,a,l,c,h,u,d,p=50,f=i.defaultPriceScale(),_=f.priceToCoordinate(e),m=e;if(!this._magnetProperty.value())return m;for(o=f.dataSources(),r=null,s=0;s<o.length;s++)if(o[s]instanceof n){r=o[s];break}if(r&&(a=r.bars(),a.contains(t)&&(l=a.valueAt(t),c=[l[TradingView.OPEN_PLOT],l[TradingView.HIGH_PLOT],l[TradingView.LOW_PLOT],l[TradingView.CLOSE_PLOT]],f=r.priceScale(),!f.isEmpty()))){if(h=[],f.isPercent())for(u=r.firstValue(),s=0;s<c.length;s++)c[s]=f.priceRange().convertToPercent(c[s],u);for(s=0;s<c.length;s++)h.push({y:f.priceToCoordinate(c[s]),price:c[s]});h.sort(function(e,t){return Math.abs(e.y-_)-Math.abs(t.y-_)}),d=h[0],Math.abs(d.y-_)<p&&(m=d.price)}return m},e.exports=o},function(e,t,i){"use strict";(function(t){function o(){return[$.t("Jan"),$.t("Feb"),$.t("Mar"),$.t("Apr"),$.t("May"),$.t("Jun"),$.t("Jul"),$.t("Aug"),$.t("Sep"),$.t("Oct"),$.t("Nov"),$.t("Dec")]}function n(e){this._model=e,this._scalesProperties=e.properties().scalesProperties,this.m_width=0,this._baseIndex=null,this._defaultRightOffsetProperty=new _(S),this.m_rightOffset=S,this._defaultRightOffsetProperty.listeners().subscribe(this,function(e){this.setRightOffset(e.value())}),
this.m_points=new u,this._barSpacingChanged=new t,this.m_barSpacing=b,this.m_scrollStartPoint=null,this.m_scaleStartPoint=null,this._commonTransitionStartState=null,this.m_tickmarks=new l,this._locked=!1,this._formattedBySpan={},this._onScroll=new t}var r=i(36).clamp,s=i(495).BarsRange,a=i(284),l=i(886),c=i(40),h=i(16).numberToStringWithLeadingZero,u=i(887).TimePoints,d=i(512),p=i(0).getLogger("Chart.TimeScale"),f=i(3),_=i(37),m=null,g=50,v=f.enabled("high_density_bars")?.025:.5,y=5,b=6,S=5;n.prototype.tickMarks=function(){return this.m_tickmarks},n.prototype.reset=function(){this._visibleBarsCache=null,this.m_points=new u,this.m_scrollStartPoint=null,this.m_scaleStartPoint=null,this._clearCommonTransitionsStartState(),this.m_tickmarks.reset()},n.prototype.restoreDefault=function(){this._visibleBarsCache=null,this.setBarSpacing(b),this.resetRightOffset()},n.prototype.restoreRightOffsetPropertyToDefault=function(){this._defaultRightOffsetProperty.setValue(S)},n.prototype.baseIndex=function(){return this._baseIndex||0},n.prototype.rightOffset=function(){return this.m_rightOffset},n.prototype.defaultRightOffsetProperty=function(){return this._defaultRightOffsetProperty},n.prototype.rightOffsetForTimePoint=function(e){var t=this.timeToCoordinate(e);return null===t?null:this._rightOffsetForCoordinate(t)},n.prototype._rightOffsetForCoordinate=function(e){return(this.m_width+1-e)/this.m_barSpacing},n.prototype.scrollToRealtime=function(e,t){var i,o,n,r,s=this._defaultRightOffsetProperty.value();if(s<0&&(s=S),e)return i=this,o=this.m_rightOffset,n=this.maxRightOffset(),n>0&&s>n&&(s=n),r=this._model,void $({offset:o}).animate({offset:s},{duration:1e3,easing:"easeInOutQuint",complete:t,step:function(e){i._visibleBarsCache=null,i.m_rightOffset=e,r.recalculateAllPanes(),r.invalidate(new c(c.LIGHT_UPDATE)),r.recalcVisibleRangeStudy(r.dataSources())}});this._visibleBarsCache=null,this.m_rightOffset=s,this._correctOffset(),void 0!==t&&t()},n.prototype.points=function(){return this.m_points},n.prototype.width=function(){return this.m_width},n.prototype.setWidth=function(e){if(isFinite(e)&&!(e<=0)&&this.m_width!==e){if(this._visibleBarsCache=null,this._locked&&this.m_width){var t=this.m_barSpacing*e/this.m_width;this._tryToUpdateBarSpacing(this.m_barSpacing,t)}this.m_width=e,this._correctOffset()}},n.prototype.barSpacing=function(){return this.m_barSpacing},n.prototype.setBarSpacing=function(e){if(void 0===e)return void p.logDebug("setBarSpacing: invalid argument");this._tryToUpdateBarSpacing(this.m_barSpacing,e)&&this._correctOffset()},n.prototype._tryToUpdateBarSpacing=function(e,t){return e!==t&&(this._visibleBarsCache=null,this.m_barSpacing=t,this._barSpacingChanged.fire(e,t),!0)},n.prototype.barSpacingChanged=function(){return this._barSpacingChanged},n.prototype.correctBarSpacing=function(){this.isEmpty()||this.points().size()<this.width()/this.barSpacing()&&(this.setRightOffset(S),this.setBarSpacing(Math.min(this.width()/(this.points().size()+this.rightOffset()),g)))},n.prototype.visibleBars=function(){var e,t,i,o,n
;return this._visibleBarsCache?this._visibleBarsCache:this.isEmpty()?null:(e=this.baseIndex(),t=Math.ceil(this.m_width/this.m_barSpacing)-1,i=Math.round(this.m_rightOffset+e),o=i-t,n=new s(o,i),this._visibleBarsCache=n,n)},n.prototype.isEmpty=function(){return 0===this.m_width||0===this.m_points.size()},n.prototype.indexToCoordinate=function(e,t){var i,o,n;return this.isEmpty()?0:TradingView.isInteger(e)?(i=this.baseIndex(),o=i+this.m_rightOffset-e,n=this.m_width-(o+.5)*this.m_barSpacing,t?n:Math.round(n)):0},n.prototype.barIndexesToCoordinates=function(e){var t,i,o,n,r=this.baseIndex();for(t=0;t<e.length;t++)i=e[t].time,o=r+this.m_rightOffset-i,n=this.m_width-(o+.5)*this.m_barSpacing,e[t].time=Math.round(n),e[t].exactTime=n},n.prototype.indexesToCoordinates=function(e){var t,i,o,n=this.baseIndex(),r=n+this.m_rightOffset,s=this.m_width-r*this.m_barSpacing-.5*this.m_barSpacing;for(t=0;t<e.length;t++)i=e[t].x,o=s+i*this.m_barSpacing,e[t].x=Math.round(o)},n.prototype.coordinateToIndex=function(e){var t=this._rightOffsetForCoordinate(e),i=this.baseIndex(),o=i+this.m_rightOffset-t,n=Math.round(1e6*o)/1e6;return Math.ceil(n)},n.prototype.timeToCoordinate=function(e){function t(e){return e<=0||e>=l.m_width}var i,o,n,r=this.m_points.closestIndexLeft(e),s=this.m_points.valueAt(r),a=this.indexToCoordinate(r,!0),l=this;return t(a)?null:(i=this.barSpacing(),o=function(){var e=this.baseIndex();return this.m_points.valueAt(e)-this.m_points.valueAt(e-1)}.bind(this)(),n=Math.round(a+(e-s)/o*i)+1,t(n)?null:n)},n.prototype.alignCoordinate=function(e){if(this.isEmpty())return e;var t=this.coordinateToIndex(e);return this.indexToCoordinate(t)},n.prototype.timePointToIndex=function(e){return this.m_points.indexOf(e,!0)},n.prototype.indexToTimePoint=function(e){return this.m_points.valueAt(e)},n.prototype.indexToUserTime=function(e){return this.m_tickmarks.indexToTime(e)},n.prototype.marks=function(){var e,t,i,o,n,r,s,a,l,c,h,u;if(this.isEmpty())return null;for(e=this.m_barSpacing,t=this._scalesProperties.fontSize.value()||0,i=5*(t+4),o=Math.round(i/e),n=this.visibleBars(),r=Math.max(n.firstBar(),n.firstBar()-o),s=Math.max(n.lastBar(),n.lastBar()-o),a=this.m_tickmarks.build(e,i),l=[],c=0;c<a.length;++c)h=a[c],r<=h.index&&h.index<=s&&null!==(u=this.m_tickmarks.indexToTime(h.index))&&l.push({coord:this.indexToCoordinate(h.index),label:this.formatLabel(u,h.span),span:h.span,major:h.label>=d.DAY_SPAN?1:0});return l},n.prototype.state=function(e){var t={};return t.m_barSpacing=this.barSpacing(),t.m_rightOffset=e?this.m_rightOffset:this._defaultRightOffsetProperty.value(),e&&(t.points=this.m_points.state(),t.tickmarks=this.m_tickmarks.state(),t.width=this.m_width),t},n.prototype.restoreState=function(e,t){var i,o,n;return void 0===e.m_barSpacing?void p.logDebug("restoreState: invalid state"):void 0===e.m_rightOffset?void p.logDebug("restoreState: invalid state"):(i=e.m_barSpacing,o=e.m_rightOffset<0&&!t?S:e.m_rightOffset,n=o<0?S:Math.round(o),this._defaultRightOffsetProperty.setValue(n),this.m_rightOffset=o,
t&&(this.m_points.restoreState(e.points),this.m_tickmarks.restoreState(e.tickmarks),e.width&&(this._locked=!0,this.m_width>0&&(i*=this.m_width/e.width))),this._tryToUpdateBarSpacing(this.m_barSpacing,i),void this._correctOffset())},n.prototype.setBaseIndex=function(e){if("number"!=typeof e)return void p.logDebug("setBaseIndex: invalid argument");this._visibleBarsCache=null,this._baseIndex=e,this._correctOffset()},n.prototype.setRightOffset=function(e){if(void 0===e)return void p.logDebug("setRightOffset: invalid argument");this._visibleBarsCache=null,this.m_rightOffset=e,this._correctOffset()},n.prototype.resetRightOffset=function(){this.setRightOffset(this._defaultRightOffsetProperty.value())},n.prototype._correctOffset=function(){var e,t=this.maxRightOffset();this.m_rightOffset>t&&(this.m_rightOffset=t,this._visibleBarsCache=null),null!==(e=this.minRightOffset())&&this.m_rightOffset<e&&(this.m_rightOffset=e,this._visibleBarsCache=null)},n.prototype.minRightOffset=function(){var e=this.m_points.firstIndex(),t=this._baseIndex;return null===e||null===t?null:e-t-1+y},n.prototype.maxRightOffset=function(){return this.m_width/this.m_barSpacing-y},n.prototype.startScale=function(e){this.m_scrollStartPoint&&this.endScroll(),null===this.m_scaleStartPoint&&null===this._commonTransitionStartState&&(this.isEmpty()||(this.m_scaleStartPoint=e,this._saveCommonTransitionsStartState()))},n.prototype._saveCommonTransitionsStartState=function(){this._commonTransitionStartState={barSpacing:this.barSpacing(),rightOffset:this.rightOffset()}},n.prototype._clearCommonTransitionsStartState=function(){this._commonTransitionStartState=null},n.prototype.scaleTo=function(e){var t,i;null!==this._commonTransitionStartState&&(t=r(this.m_width-e,0,this.m_width),i=r(this.m_width-this.m_scaleStartPoint,0,this.m_width),0!==t&&0!==i&&this.setBarSpacing(this.getValidBarSpacing(this._commonTransitionStartState.barSpacing*t/i)))},n.prototype.getValidBarSpacing=function(e){return void 0===e&&(e=this.barSpacing()),e<v?v:e>g?g:e},n.prototype.isValidBarSpacing=function(e){return e>=v&&e<=g},n.prototype.endScale=function(){null!==this.m_scaleStartPoint&&(this.m_scaleStartPoint=null,this._clearCommonTransitionsStartState())},n.prototype.startScroll=function(e){null===this.m_scrollStartPoint&&null===this._commonTransitionStartState&&(this.isEmpty()||(this.m_scrollStartPoint=e,this._saveCommonTransitionsStartState()))},n.prototype.scrollTo=function(e){if(this._visibleBarsCache=null,null!==this.m_scrollStartPoint){var t=(this.m_scrollStartPoint-e)/this.barSpacing();this.m_rightOffset=this._commonTransitionStartState.rightOffset+t,this._correctOffset(),this._onScroll.fire()}},n.prototype.scrollToOffsetAnimated=function(e,t){var i,o,n,r;if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(void 0===t&&(t=400),!isFinite(t)||t<=0)throw new RangeError("animationDuration (optional) must be finite positive number");i=this,o=this.m_rightOffset,n=+new Date,r=this._model,function s(){i._visibleBarsCache=null;var a=(new Date-n)/t
;if(a>=1)return i.m_rightOffset=e,i._visibleBarsCache=null,r.recalculateAllPanes(),void r.invalidate(new c(c.LIGHT_UPDATE));i.m_rightOffset=o+(e-o)*a,r.recalculateAllPanes(),setTimeout(s,20)}()},n.prototype.endScroll=function(){null!==this.m_scrollStartPoint&&(this.m_scrollStartPoint=null,this._clearCommonTransitionsStartState())},n.prototype.update=function(e,t,i,o){this._visibleBarsCache=null,i.length>0&&this.m_points.merge(e,t,i),this.m_tickmarks.merge(o),this._correctOffset()},n.prototype.addTail=function(e,t,i){var o,n,r;for(this.m_tickmarks.removeTail(t),o=e.params,n=this.m_tickmarks.maxIndex+(i?0:1),r=0;r<o.marks.length;r++)o.marks[r].index=n+r;this.m_tickmarks.addTail(o.marks),this.m_points.addTail(o.changes,i),this.m_rightOffset-=o.changes.length},n.prototype.formatLabel=function(e,t){if(this._formattedBySpan[t])return this._formattedBySpan[t].format(e.valueOf());var i=this;return this._formattedBySpan[t]=new a(function(e){return i.formatLabelImpl(new Date(e),t)}),this._formattedBySpan[t].format(e)},n.prototype.formatLabelImpl=function(e,t){if(!(e&&e instanceof Date))return"incorrect time";var i=this._model.mainSeries().isDWM();return t<d.MINUTE_SPAN&&!i?h(e.getUTCHours(),2)+":"+h(e.getUTCMinutes(),2)+":"+h(e.getUTCSeconds(),2):t<d.DAY_SPAN&&!i?h(e.getUTCHours(),2)+":"+h(e.getUTCMinutes(),2):t<d.WEEK_SPAN?e.getUTCDate():t<d.MONTH_SPAN?e.getUTCDate():t<d.YEAR_SPAN?(m||(m=o()),m[e.getUTCMonth()]):e.getUTCFullYear()},n.prototype.normalizeBarIndex=function(e){var t=0,i=0,o=this.baseIndex();return e<this.m_points.firstIndex()?(t=this.m_points.valueAt(this.m_points.firstIndex()),i=e-this.m_points.firstIndex()):e>o?(t=this.m_points.valueAt(o),i=e-o):(t=this.m_points.valueAt(e),i=0),{time_t:t,offset:i}},n.prototype.denormalizeTimePoint=function(e){var t=this.m_points.indexOf(e.time_t);if(null!==t)return t+e.offset},n.prototype.zoomToBarsRange=function(e,t){if(!(t<=e)){var i=this.baseIndex();this.m_rightOffset=t-i,this.setBarSpacing(this.width()/(t-e+1)),this._visibleBarsCache=null}},n.prototype.canZoomIn=function(){return this.m_barSpacing<g},n.prototype.canZoomOut=function(){return this.m_barSpacing>v},n.prototype.minBarSpacing=function(){return v},n.prototype.maxBarSpacing=function(){return g},n.prototype.onScroll=function(){return this._onScroll},e.exports=n}).call(t,i(4))},function(e,t,i){"use strict";(function(t){function i(){this._marksByIndex={},this._marksBySpan=[],this.changed=new t}i.prototype.reset=function(){this._marksByIndex={},this._marksBySpan=[],delete this.minIndex,delete this.maxIndex,delete this._cache,this.changed.fire()},i.prototype.minIndex=void 0,i.prototype.maxIndex=void 0,i.prototype.merge=function(e){var t,i,o,n,r,s=this._marksBySpan,a={};for(t=0;t<e.length;t++){if(i=e[t],o=i.index,n=i.span,r=this._marksByIndex[i.index]){if(r.index===i.index&&r.span===i.span){r.time=i.time;continue}this._removeTickmark(r)}this._marksByIndex[o]=i,this.minIndex<=o||(this.minIndex=o),this.maxIndex>=o||(this.maxIndex=o),s[n]||(s[n]=[]),s[n].push(i),a[n]=!0}for(n=s.length;n--;)s[n]&&(s[n].length||delete s[n],
a[n]&&s[n].sort(this._sortByIndexAsc));delete this._cache,this.changed.fire()},i.prototype._removeTickmark=function(e){var t,i,o=e.index;this._marksByIndex[o]===e&&(delete this._marksByIndex[o],o<=this.minIndex&&this.minIndex++,o>=this.maxIndex&&this.maxIndex--,this.maxIndex<this.minIndex&&(delete this.minIndex,delete this.maxIndex),t=this._marksBySpan[e.span],-1!==(i=t.indexOf(e))&&t.splice(i,1))},i.prototype._sortByIndexAsc=function(e,t){return e.index-t.index},i.prototype.removeTail=function(e){var t,i={};this.maxIndex=0;for(t in this._marksByIndex)this._marksByIndex[t].time<e&&(i[t]=this._marksByIndex[t],this.maxIndex=Math.max(this.maxIndex,t));this._marksByIndex=i},i.prototype.addTail=function(e){for(var t=0;t<e.length;t++)e[t].index=this.maxIndex+t+1;this.merge(e)},i.prototype.indexToTime=function(e){var t=this._marksByIndex[e];return t?new Date(1e3*t.time):null},i.prototype.density=function(){var e,t=this.maxIndex-this.minIndex;if(0!==t)return e=this._marksByIndex[this.maxIndex].time-this._marksByIndex[this.minIndex].time,1e3*e/t},i.prototype.estimateLeft=function(e){var t,i=this.density();if(i)return t=1e3*this._marksByIndex[this.minIndex].time-e,t/i},i.prototype.nearestIndex=function(e){for(var t,i=this.minIndex,o=this.maxIndex;o-i>2;){if(1e3*this._marksByIndex[i].time===e)return i;if(1e3*this._marksByIndex[o].time===e)return o;t=Math.round((i+o)/2),1e3*this._marksByIndex[t].time>e?o=t:i=t}return i},i.prototype.build=function(e,t){var i,o,n,r,s,a,l,c,h,u,d,p,f,_,m=Math.ceil(t/e);if(this._maxbar===m&&this._cache)return this._cache;for(this._maxbar=m,i=[],o=this._marksBySpan.length;o--;)if(this._marksBySpan[o]){for(n=i,i=[],r=n.length,s=0,a=this._marksBySpan[o],l=a.length,c=1/0,h=-1/0,u=0;u<l;u++){for(d=a[u],p=d.index;s<r;){if(f=n[s],!((_=f.index)<p)){c=_;break}s++,i.push(f),h=_,c=1/0}c-p>=m&&p-h>=m&&(i.push(d),h=p)}for(;s<r;s++)i.push(n[s])}return this._cache=i,this._cache},i.prototype.state=function(){var e,t=[];for(e=this._marksBySpan.length;e--;)this._marksBySpan[e]&&(t=t.concat(this._marksBySpan[e]));return t=t.map(function(e){return[e.span,e.time,e.index]}),{marks:t,version:2}},i.prototype.restoreState=function(e){if(this._marksByIndex={},this._marksBySpan=[],delete this.maxIndex,delete this.minIndex,e&&e.marks&&e.marks.length)if(2===e.version){var t=e.marks.map(function(e){return{span:e[0],time:e[1],index:e[2]}});this.merge(t)}else this.merge(e.marks)},e.exports=i}).call(t,i(4))},function(e,t,i){"use strict";var o,n,r;Object.defineProperty(t,"__esModule",{value:!0}),o=i(0),n=o.getLogger("Chart.TimePoints"),r=function(){function e(){this._zoffset=0,this._items=[]}return e.prototype.clear=function(){this._zoffset=0,this._items=[]},e.prototype.size=function(){return this._items.length},e.prototype.firstIndex=function(){return this._offsetToIndex(0)},e.prototype.lastIndex=function(){return this._offsetToIndex(this._items.length-1)},e.prototype.merge=function(e,t,i){var o,r,s,a,l,c,h,u;if(0===i.length)return n.logError("merge: 'values' does not contain any time points"),[]
;if(t>this._zoffset&&e+t>0)return n.logError("merge: when the first time point index is updated, we should fill the time points starting from the first one"),[];if(0===this._items.length)return this._items=i,this._zoffset=t,[{change:"rebuild",index:this._validOffsetToIndex(0)}];if((o=e+this._zoffset)<0){if(r=Math.abs(o),i.length<r)return n.logError("merge: 'values' does not contain enough time points to fill in the new items. 'index': "+e+", previous 'zoffset': "+this._zoffset+", new 'zoffset': "+t+", 'values.length': "+i.length),[];for(this._items=Array(r).concat(this._items),this._zoffset=t,s=0;s<i.length;++s)this._items[e+s+t]=i[s];return[{change:"rebuild",index:this._validOffsetToIndex(0)}]}for(a=[],l=o;l<this._items.length&&l-o<i.length;++l)this._items[l]=i[l-o],a.push({change:"update",index:this._validOffsetToIndex(l),value:i[l-o]});if((c=o+i.length)>this._items.length)for(r=c-this._items.length,h=l;h<l+r;++h)u=this._items.length,this._items.push(i[h-o]),a.push({change:"append",index:this._validOffsetToIndex(u),value:i[h-o]});return this._zoffset=t,a},e.prototype.addTail=function(e,t){for(var i=t?1:0;i<e.length;i++)this._items.push(e[i])},e.prototype.remove=function(e){var t,i,o,n=this._indexToOffset(e);if(null===n)return[];for(t=this._items.splice(n),i=[],o=0;o<t.length;o++)i.push({change:"remove",index:e+o,value:t[o]});return i},e.prototype.valueAt=function(e){var t=this._indexToOffset(e);return null!==t?this._items[t]:null},e.prototype.indexOf=function(e,t){if(this._items.length<1)return null;if(e>this._items[this._items.length-1])return t?this._validOffsetToIndex(this._items.length-1):null;for(var i=0;i<this._items.length;++i){if(e===this._items[i])return this._validOffsetToIndex(i);if(e<this._items[i])return t?this._validOffsetToIndex(i):null}return null},e.prototype.state=function(){return{items:this._items,zoffset:this._zoffset}},e.prototype.restoreState=function(e){null!==e&&(this._items=e.items,this._zoffset=e.zoffset)},e.prototype.roughTime=function(e,t){var i,o,n,r,s,a,l,c,h,u,d,p;return void 0===t&&(t=null),null!==(i=this.valueAt(e))?i:(o=this._items,!o.length||o.length<2?null:(n=0,r=o.length-1,s=this._validOffsetToIndex(n),a=this._validOffsetToIndex(r),l=o[n],c=o[r],h=(c-l)/(a-s),e<s?(u=s-e,d=u*h,l-d):(p=500,e>a?(u=e-a)<p&&null!=t?t(c,u):(d=u*h,c+d):null)))},e.prototype.roughIndex=function(e,t){var i,o,n,r,s,a,l,c,h,u,d,p;return void 0===t&&(t=null),i=this._items,!i.length||i.length<2?null:(o=0,n=i.length-1,r=this._validOffsetToIndex(o),s=this._validOffsetToIndex(n),a=i[o],l=i[n],e>=a&&e<=l?this.closestIndexLeft(e):(c=(l-a)/(s-r),e<a?(h=a-e,u=Math.round(h/c),r-u):(d=500,e>l?(h=e-l,u=Math.trunc(h/c),u<d&&null!==t&&(p=t(l,e),p.success&&(u=p.result)),s+u):null)))},e.prototype.closestIndexLeft=function(e){var t,i,o,n,r,s,a=this._items;if(!a.length)return null;if(e!==e)return null;if(t=a.length-1,i=a[t],e>=i)return this._validOffsetToIndex(t);if(o=0,n=a[o],e<n)return null;if(e===n)return this._validOffsetToIndex(o);for(;t>o+1;)if(r=o+t>>1,(s=a[r])>e)t=r;else{
if(!(s<e))return s===e?this._validOffsetToIndex(r):null;o=r}return this._validOffsetToIndex(o)},e.prototype._validOffsetToIndex=function(e){return e-this._zoffset},e.prototype._offsetToIndex=function(e){return 0<=e&&e<this.size()?this._validOffsetToIndex(e):null},e.prototype._indexToOffset=function(e){var t=e+this._zoffset;return 0<=t&&t<this.size()?t:null},e}(),t.TimePoints=r},function(e,t,i){"use strict";function o(e,t){this.tooltips={},this.tooltipFactory=e,this.source=t}function n(e,t){this.renderer=e,this._tooltip=t,this.visible=!1}o.prototype.findOrCreateTooltip=function(e){var t=this.tooltips[e.id];return null==t&&(e.hovered||e.pinned)&&(t=this._createTooltip(),this.tooltips[e.id]=t),t},o.prototype.showPlate=function(e,t){var i=this.findOrCreateTooltip(e);null!=i&&(i._drawPlate(e,t),i.plateData=e)},o.prototype.draw=function(e,t){this.hoveredId=null;for(var i=0;i<e.length;i++)e[i].hovered&&(this.hoveredId=e[i].id);e.forEach(function(e){this.showPlate(e,t)}.bind(this))},o.prototype.endDraw=function(){var e,t,i=this;for(e in this.tooltips)this.tooltips.hasOwnProperty(e)&&(t=this.tooltips[e],t.toggleVisibility(),i.hoveredId&&t.plateData.id!==i.hoveredId&&!t.plateData.pinned&&(t.remove(),delete this.tooltips[e]))},o.prototype.removeAll=function(){var e,t;for(e in this.tooltips)this.tooltips.hasOwnProperty(e)&&(t=this.tooltips[e],t.remove());this.tooltips={}},o.prototype.removeTooltip=function(e){delete this.tooltips[e]},o.prototype._createTooltip=function(){return new n(this,this.tooltipFactory())},n.prototype._drawPlate=function(e,t){var i=this;this.visible=!0,this._tooltip.setSource(this.renderer.source),this._tooltip.showPlate(e,t),e.hovered||e.pinned||this._tooltip.hide(function(){i.renderer.removeTooltip(e.id)})},n.prototype.remove=function(){this._tooltip._removeLayout()},n.prototype.toggleVisibility=function(){this._tooltip._toggleLayout(this.visible),this.visible=!1},t.TooltipRenderer=o},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e){var t,i;if(e&&e.__esModule)return e;if(t={},null!=e)for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t,i){var o,n=2*N,r=document.createElement("canvas");return r.width=t*n,r.height=i*n,r.style.width=t+"px",r.style.height=i+"px",o=r.getContext("2d"),o.setTransform(n,0,0,n,0,0),o.drawImage(e,0,0,t,i),r}function a(e,t){return function(){i.e(15).then(function(){z=i(1245),e.call(t)}.bind(null,i)).catch(i.oe)}}function l(e){return!0}var c,h,u,d,p,f,_,m,g,v,y,b,S,w,T,P,C,x,E,L,I,A,k,M,O,D,V,R,B,N,z,F,H;Object.defineProperty(t,"__esModule",{value:!0}),t.Branding=void 0,c=function(){function e(e,t){var i,o;for(i=0;i<t.length;i++)o=t[i],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),h=i(8),u=i(70),d=i(3),p=n(d),f=i(11),_=o(f),m=i(14),g=i(33),v=i(466),y=i(165),b=i(85),
S="/static/images/widget-embed-logo/",w="site_branding",T="widget_branding",P="widget_referral_branding",C="widget_custom_branding",x="widget_custom_no_powered_branding",E="fundamental_branding",L="fundamental_custom_branding",I="fundamental_custom_no_powered_branding",A="library_branding",k="library_custom_branding",M="library_custom_no_powered_branding",O=.2,D=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,V=function(){var e,t=window.navigator.userAgent,i=t.indexOf("MSIE ");return i>0?parseInt(t.substring(i+5,t.indexOf(".",i)),10):t.indexOf("Trident/")>0&&(e=t.indexOf("rv:"),parseInt(t.substring(e+3,t.indexOf(".",e)),10))}(),R=window.urlParams||{},B=window.initData||{},N=window.hidpiCanvasRatio||1,z=null,(R.referral_id||R.no_referral_id)&&(0,v.enable)(R.referral_id||"","aggressive",R.ref_landing_page),F=function(){function e(t){var i=t.layout,o=void 0===i?w:i,n=t.symbol,s=void 0===n?"":n,l=t.model,c=t.onReadyCallback;r(this,e),this._model=l,this._logo=null,this._logoReady=!1,this._showLogo=!1,this._logoWidth=28,this._logoHeight=19,this.show=!0,this.width=100,this.height=20,this._layout=o,this._symbol=s,this._strokeColor=m.color.black255,this._fillolor=m.color.brand,this._colorOldBlue=m.color.brandDown,this._colorOldGray=m.color.black30,this._strokeOpacity=.6,this._strokeWidth=2,this._fontSize=14,this._font='px "Trebuchet MS", Tahoma, Arial, sans-serif',this._txt="TradingView",this._onReadyCallback=c,this._upscaleRatio=2,this._strokeCanv=null,this._fillCanv=null,V&&(this._init=a(this._init,this)),this._init()}return c(e,[{key:"_init",value:function(){this._checkLayout(),this.show&&(this._updateStrokeColor(),this._model.properties().paneProperties.background.subscribe(this,this._updateStrokeColor),this._model.onChartThemeLoaded().subscribe(this,this._updateStrokeColor))}},{key:"_updateStrokeColor",value:function(){var e=(0,g.getLuminance)(this._model.properties().paneProperties.background.value());this._strokeCanv=null,this._fillCanv=null,e>O?(this._strokeColor=m.color.black255,this._strokeWidth=2.5):(this._strokeColor=m.color.black0,this._strokeWidth=3)}},{key:"_checkLayout",value:function(){switch(this._layout){case T:case P:case C:case E:case L:case k:case A:this.show=!0;break;case w:case x:case I:case M:this.show=!1}switch(this._layout){case T:this._txt=$.t("{0} chart by TradingView").format(this._symbol);break;case E:this._txt=$.t("{0} financials by TradingView").format(this._symbol);break;case P:this._txt=$.t("More features on tradingview.com");break;case C:case L:this._txt=$.t("powered by ");break;case A:this._showLogo=!0,this._txt=$.t("charts by TradingView");break;case k:this._txt=$.t("powered by TradingView")}}},{key:"_drawTextStroke",value:function(e){var t,i;this._strokeCanv||(this._strokeCanv=document.createElement("canvas"),t=this._strokeCanv.getContext("2d"),i=Math.round(this._strokeWidth*this._upscaleRatio),t.font=this._fontSize*this._upscaleRatio+this._font,this._textWidth=t.measureText(this._txt).width,this._strokeCanv.width=(this._textWidth+2*i)*N,t.textBaseline="top",t.textAlign="start",
t.font=this._fontSize*this._upscaleRatio+this._font,t.strokeStyle=this._strokeColor,t.lineWidth=this._strokeWidth*this._upscaleRatio*N,t.lineJoin="round",t.strokeText(this._txt,i,i),D&&(t.lineWidth=this._strokeWidth*this._upscaleRatio*N/2,t.strokeText(this._txt,i+1.5,i),t.strokeText(this._txt,i-1.5,i))),e.save(),e.globalAlpha=this._strokeOpacity,e.scale(1/N,1/N),e.drawImage(this._strokeCanv,0,0,this._strokeCanv.width,this._strokeCanv.height,0,0,this._strokeCanv.width/this._upscaleRatio,this._strokeCanv.height/this._upscaleRatio),e.restore()}},{key:"_drawTextFill",value:function(e){var t,i;this._fillCanv||(this._fillCanv=document.createElement("canvas"),t=this._fillCanv.getContext("2d"),i=Math.round(this._strokeWidth*this._upscaleRatio),this._fillCanv.width=(this._textWidth+2*i)*N,t.textBaseline="top",t.textAlign="start",t.font=this._fontSize*this._upscaleRatio+this._font,t.fillStyle=this._fillolor,t.fillText(this._txt,i,i)),e.save(),e.scale(1/N,1/N),e.drawImage(this._fillCanv,0,0,this._fillCanv.width,this._fillCanv.height,0,0,this._fillCanv.width/this._upscaleRatio,this._fillCanv.height/this._upscaleRatio),e.restore()}},{key:"draw",value:function(e,t){var i,o;this._layout===C||this._layout===L?(i='12px "Trebuchet MS", Tahoma, Arial, sans-serif',e.font=i,o=e.measureText(this._txt).width,this.width=o+e.measureText("TradingView").width,e.save(),e.globalAlpha=.7,e.fillStyle=this._colorOldGray,e.fillText(this._txt,0,12),e.fillStyle=this._colorOldBlue,e.fillText("TradingView",o,12),e.restore()):this._showLogo&&this._logoReady?(e.drawImage(this._logo,-2,D?-2:-.5,this._logoWidth,this._logoHeight),e.save(),e.translate(this._logoWidth,0),l(t)&&(this._drawTextStroke(e),this._drawTextFill(e)),e.restore(),null!==this._strokeCanv?this.width=this._logoWidth+this._strokeCanv.width/this._upscaleRatio/N:this.width=this._logoWidth):(e.save(),e.translate(0,D?4:0),l(t)&&(this._drawTextStroke(e),this._drawTextFill(e)),e.restore(),null!==this._strokeCanv&&(this.width=this._strokeCanv.width/this._upscaleRatio/N))}}]),e}(),H=function(){function e(t){var i=t.layout,o=void 0===i?w:i,n=t.src,s=t.onReadyCallback;r(this,e),this._img=new Image,this._ready=!1,this.show=!1,this.width=0,this.height=0,this._layout=o,this._src=n,this._onReadyCallback=s,V&&(this._init=a(this._init,this)),this._init()}return c(e,[{key:"_init",value:function(){var e,t,i=this;this._checkLayout(),this.show&&(e=this._src.match(/(\w+)\.svg/),V&&e&&2===e.length?(t=e[1],this._img.src=z.fallbackImages[t],this._img.addEventListener("load",function(){var e=z.logoSizes;t in e?(i.width=e[t].width,i.height=e[t].height):(i.width=135,i.height=25),i._ready=!0,"function"==typeof i._onReadyCallback&&i._onReadyCallback()})):(this._img.src=this._src,this._img.addEventListener("load",function(){i.width=Math.round(i._img.width),i.height=Math.round(i._img.height),D&&(i._img=s(i._img,i.width,i.height)),i._ready=!0,"function"==typeof i._onReadyCallback&&i._onReadyCallback()})))}},{key:"_checkLayout",value:function(){switch(this._layout){case C:case x:case L:case I:case k:case M:this.show=!0
;break;case w:case T:case P:case E:case A:this.show=!1}}},{key:"draw",value:function(e){this._ready&&e.drawImage(this._img,0,0,this.width,this.height)}}]),e}(),t.Branding=function(){function e(t){var i,o=this;r(this,e),this._model=t,this._mainSeries=this._model.mainSeries(),this._canvasWidth=0,this._paneHeight=0,this._left=13,this._bottom=12,this._layout=w,this._needToShow=!0,this._customLogoSrc="",this._customLogoLink="",this._checkLayout(),this._layout!==C&&this._layout!==L||(this._left=8,this._bottom=5),i=function(){o._needToShow?o._layout===w?o._showBranding=window.innerWidth>=768:o._showBranding=!0:o._showBranding=!1},this._resizeHandlerDelayed=b(i,200),i(),window.addEventListener("resize",this._resizeHandlerDelayed),this._model.isSnapshot()?this._init():this._mainSeries.onSymbolResolved().subscribe(this,this._init)}return c(e,[{key:"destroy",value:function(){window.removeEventListener("resize",this._resizeHandlerDelayed)}},{key:"_init",value:function(){var e=this,t=this._mainSeries.symbolInfo()||{};this._poweredBy=new F({layout:this._layout,symbol:t.name,model:this._model,onReadyCallback:function(){return e._model.fullUpdate()}}),this._customLogo=new H({layout:this._layout,src:this._customLogoSrc,onReadyCallback:function(){return e._model.fullUpdate()}})}},{key:"_checkLayout",value:function(){var e,t,i;p.enabled("widget")?(e=B.logo||{},t=p.enabled("fundamental_widget"),this._needToShow=!(B.whitelabel||R.whitelabel||e.whitelabel),e.image?(this._customLogoSrc=S+e.image,e.no_powered_by?this._layout=t?I:x:this._layout=t?L:C):R.referral_id||R.no_referral_id?this._layout=P:this._layout=t?E:T):p.enabled("charting_library")||p.enabled("amp_terminal")||p.enabled("cqg_terminal")||p.enabled("trading_terminal")?(i=JSON.parse(R.logo)||{},i.image?(this._customLogoSrc=i.image,this._customLogoLink=i.link,this._needToShow=p.enabled("widget_logo"),p.enabled("link_to_tradingview")?this._layout=k:this._layout=M):(this._layout=A,this._needToShow=p.enabled("widget_logo"))):this._layout=w}},{key:"updateAllViews",value:function(){}},{key:"priceScale",value:function(){}},{key:"priceAxisViews",value:function(){}},{key:"onClickOutside",value:function(){}},{key:"hasContextMenu",value:function(){return!1}},{key:"hitTest",value:function(e){var t=this;return!this._showBranding||p.enabled("logo_without_link")?null:this._poweredBy&&this._layout!==w&&this._layout!==x&&this._layout!==I&&(0,u.pointInRectangle)(e,new h.Point(this._left,this._paneHeight-Math.max(this._poweredBy.height,void 0!==this._customLogo?this._customLogo.height:0)-this._bottom),new h.Point(this._left+Math.max(this._poweredBy.width,void 0!==this._customLogo?this._customLogo.width:0),this._paneHeight-this._bottom))?new _.default(_.default.CUSTOM,{mouseUpHandler:function(){window.open(t.tvUrl(),"_blank").opener=null}}):null}},{key:"tvUrl",value:function(){var e,t,i,o,n="https://www.tradingview.com/",r=this._mainSeries.symbolInfo().pro_name||"";return p.enabled("referral_program_for_widget_owners")?(e=(0,v.referenceToTradingView)(),
-1===e.indexOf("utm_source")?(n+="/"===n[n.length-1]?"?":"&",n+="utm_source="+(R.utm_source||"")+"&utm_medium="+(R.utm_medium||"")+"&utm_campaign="+(R.utm_campaign||"")+"&utm_term="+r):(e=e.slice(0,e.indexOf("utm_source")),e+="utm_source="+(R.utm_source||"")+"&utm_medium="+(R.utm_medium||"")+"&utm_campaign="+(R.utm_campaign||"")+"&utm_term="+r)):(t=this._mainSeries.symbolInfo().name||"APPL",i=this._mainSeries.symbolInfo().listed_exchange||"",o=B.customer,o||t&&(n=n.replace(/\/$/,""),n+=(0,y.getSymbolPagePath)({shortName:t,exchange:i})),n+="/"===n[n.length-1]?"?":"&",n+="utm_source="+(R.utm_source||"")+"&utm_medium="+(R.utm_medium||"")+"&utm_campaign="+(R.utm_campaign||"")+"&utm_term="+r)}},{key:"draw",value:function(e){if(this._showBranding){var t=0;this._poweredBy&&this._poweredBy.show&&(t=this._poweredBy.height,e.save(),e.translate(this._left,this._paneHeight-this._bottom-this._poweredBy.height),this._poweredBy.draw(e,this._canvasWidth),e.restore()),this._customLogo&&this._customLogo.show&&(e.save(),e.translate(this._left,this._paneHeight-this._bottom-t-this._customLogo.height),this._customLogo.draw(e),e.restore())}}},{key:"renderer",value:function(e,t){return this._paneHeight=this._pane.height(),this._canvasWidth=t,{draw:this.draw.bind(this)}}},{key:"paneViews",value:function(e){var t=p.enabled("move_logo_to_main_pane");return t&&e.isMainPane()||!t&&e.isLast()||e.isMaximized()?(this._pane=e,[{renderer:this.renderer.bind(this)}]):[]}}]),e}()},function(e,t,i){"use strict";var o,n;Object.defineProperty(t,"__esModule",{value:!0}),o=i(4),n=function(){function e(e){this._changed=new o,this._model=e}return e.prototype.getStepChangeValue=function(){return.1},e.prototype.getMinValue=function(){return 1e-7},e.prototype.getMaxValue=function(){return 9999},e.prototype.value=function(){return this._model.mainSeriesScaleRatio()},e.prototype.setValue=function(e,t){(e!==this.value()||t)&&(this._model.setMainSeriesScaleRatio(e),this._onChanged())},e.prototype.state=function(){return null},e.prototype.clone=function(){return new e(this._model)},e.prototype.listeners=function(){return this._changed},e.prototype.subscribe=function(e,t){this._changed.subscribe(e,t)},e.prototype.unsubscribe=function(e,t){this._changed.unsubscribe(e,t)},e.prototype.unsubscribeAll=function(e){this._changed.unsubscribeAll(e)},e.prototype._onChanged=function(){this._changed.fire(this)},e}(),t.MainSeriesScaleRatioProperty=n},function(e,t,i){"use strict";function o(e){"LineToolGannComplex"!==e.type||void 0!==e.version&&1!==e.version||(e.type="LineToolGannFixed")}Object.defineProperty(t,"__esModule",{value:!0}),t.migrateState=o},function(e,t,i){"use strict";function o(e){this._data=e}function n(e,t,i){if(i===CanvasEx.HHISTDIR_LEFTTORIGHT)return e+t;if(i===CanvasEx.HHISTDIR_RIGHTTOLEFT)return t+e;throw Error("Unknown direction value: "+i)}
var r=i(8),s=r.Point,a=r.equalPoints,l=i(70),c=l.pointInRectangle,h=l.pointInTriangle,u=i(170).intersectRayAndRectangle,d=i(177).TextRenderer,p=i(156).HorizontalLineRenderer,f=i(114).TrendLineRenderer,_=i(893).HorizHistogramRenderer,m=i(894).HLinesPriceAxisView,g=i(575),v=TradingView.Study,y=i(895),b=i(11),S=i(41).CompositeRenderer,w=i(153).clearRect,T=i(33),P=i(55).shiftColor,C=i(0).getLogger("Chart.StudyGraphicsPaneViews");v.graphicsZOrderPriority=function(e){switch(e){case"polygons":return-100;case"trendchannels":return-90;default:return 0}},v.StudyPaneView_horizlines=function(e,t){this._study=e,this._model=t,this._data=[]},v.StudyPaneView_horizlines.prototype.update=function(){this._invalidated=!0},v.StudyPaneView_horizlines.prototype.renderer=function(){var e,t,i;for(this._invalidated&&(this._updateViewInternal(),this._invalidated=!1),e=new S,t=0;t<this._data.length;t++)i=new f,i.setData(this._data[t]),i.setHitTest(new b(b.REGULAR)),e.append(i);return e},v.StudyPaneView_horizlines.prototype._updateViewInternal=function(){var e,t,i,o,n,r,a,l,c,h,u,d,p,f,_,m,g,v,y,b,S,w;if(this._data=[],(e=this._study.graphics().horizlines)&&(t=this._study.priceScale(),i=this._study._model.timeScale(),t&&!t.isEmpty()&&i&&!i.isEmpty()))for(o=this._study.graphics().indexes,n=this._model.timeScale().visibleBars(),r=n.firstBar(),a=n.lastBar(),l=0;l<e.length;l++)if(c=e[l],c.data&&(h=this._study.properties().graphics.horizlines[c.styleId],h.visible.value()))for(u=0;u<c.data.length;u++)d=c.data[u],p=o[d.startIndex],f=o[d.endIndex],!d.extendRight&&Math.max(p,f)<r||!d.extendLeft&&Math.min(p,f)>a||(_={},m=i.indexToCoordinate(p),g=i.indexToCoordinate(f),v=d.level,t.isPercent()&&(y=this._study.firstValue(),v=t.priceRange().convertToPercent(v,y)),b=t.priceToCoordinate(v),S=new s(m,b),w=new s(g,b),_.points=[S,w],_.extendleft=d.extendLeft,_.extendright=d.extendRight,_.width=i.width(),_.height=t.height(),_.color=h.color.value(),_.linewidth=h.width.value(),_.linestyle=h.style.value(),this._data.push(_))},v.StudyPaneView_vertlines=function(e,t){this._study=e,this._model=t,this._data=[]},v.StudyPaneView_vertlines.prototype.update=function(){this._invalidated=!0},v.StudyPaneView_vertlines.prototype.renderer=function(){var e,t,i;for(this._invalidated&&(this._updateViewInternal(),this._invalidated=!1),e=new S,t=0;t<this._data.length;t++)i=new f,i.setData(this._data[t]),i.setHitTest(new b(b.REGULAR)),e.append(i);return e},v.StudyPaneView_vertlines.prototype._updateViewInternal=function(){var e,t,i,o,n,r,a,l,c,h,u,d,p,f,_,m,g,v,y,b,S;if(this._data=[],(e=this._study.graphics().vertlines)&&(t=this._study.priceScale(),i=this._study._model.timeScale(),t&&!t.isEmpty()&&i&&!i.isEmpty()))for(o=this._study.graphics().indexes,n=this._model.timeScale().visibleBars(),r=n.firstBar(),a=n.lastBar(),l=0;l<e.length;l++)if(c=e[l],c.data&&(h=this._study.properties().graphics.vertlines[c.styleId],h.visible.value()))for(u=0;u<c.data.length;u++)d=c.data[u],p={},o[d.index]<r||o[d.index]>a||(f=i.indexToCoordinate(o[d.index])+1,_=null,
d.extendBottom?m=t.height():(v=d.startPrice,t.isPercent()&&(_=_||this._study.firstValue(),v=t.priceRange().convertToPercent(v,_)),m=t.priceToCoordinate(v)),d.extendTop?g=0:(y=d.endPrice,t.isPercent()&&(_=_||this._study.firstValue(),y=t.priceRange().convertToPercent(y,_)),g=t.priceToCoordinate(y)),b=new s(f,m),S=new s(f,g),p.points=[b,S],p.extendleft=d.extendBottom,p.extendright=d.extendTop,p.width=i.width(),p.height=t.height(),p.color=h.color.value(),p.linewidth=h.width.value(),p.linestyle=h.style.value(),this._data.push(p))},v.StudyPaneView_lines=function(e,t){this._study=e,this._model=t,this._data=[]},v.StudyPaneView_lines.prototype.update=function(){this._invalidated=!0},v.StudyPaneView_lines.prototype.renderer=function(){var e,t,i;for(this._invalidated&&(this._updateViewInternal(),this._invalidated=!1),e=new S,t=0;t<this._data.length;t++)i=new f,i.setData(this._data[t]),i.setHitTest(new b(b.REGULAR)),e.append(i);return e},v.StudyPaneView_lines.prototype._updateViewInternal=function(){var e,t,i,o,n,r,a,l,c,h,u,d,p,f,_,m,g,v,y,b,S,w,T,P,C,x;if(this._data=[],(e=this._study.graphics().lines)&&(t=this._study.priceScale(),i=this._study._model.timeScale(),t&&!t.isEmpty()&&i&&!i.isEmpty()))for(o=this._study.graphics().indexes,n=this._model.timeScale().visibleBars(),r=n.firstBar(),a=n.lastBar(),l=this._study.priceScale().height(),c=i.width(),h=0;h<e.length;h++)if(u=e[h],u.data&&(d=this._study.properties().graphics.lines[u.styleId],d.visible.value()))for(p=0;p<u.data.length;p++)f=u.data[p],_=o[f.startIndex]+(f.startOffset||0),m=o[f.endIndex]+(f.endOffset||0),!f.extendRight&&Math.max(_,m)<r||!f.extendLeft&&Math.min(_,m)>a||(g={},v=i.indexToCoordinate(_),y=i.indexToCoordinate(m),b=f.startPrice,S=f.endPrice,t.isPercent()&&(w=this._study.firstValue(),b=t.priceRange().convertToPercent(b,w),S=t.priceRange().convertToPercent(S,w)),T=t.priceToCoordinate(b),P=t.priceToCoordinate(S),C=new s(v,T),x=new s(y,P),g.points=[C,x],g.width=c,g.height=l,g.color=d.color.value(),g.linewidth=d.width.value(),g.linestyle=d.style.value(),this._data.push(g))},v.StudyPaneView_hlines=function(e,t){this._study=e,this._model=t,this._data=[],this._textData=[]},v.StudyPaneView_hlines.prototype.update=function(){this._invalidated=!0},v.StudyPaneView_hlines.prototype.renderer=function(){var e,t,i;for(this._invalidated&&(this._updateViewInternal(),this._invalidated=!1),e=new S,t=0;t<this._data.length;t++)i=new p,i.setData(this._data[t]),e.append(i);for(t=0;t<this._textData.length;t++)e.append(new d(this._textData[t],new b(b.REGULAR)));return e},v.StudyPaneView_hlines.prototype._updateViewInternal=function(){this._calcHorzLinesData(),this._calcTextData()},v.StudyPaneView_hlines.prototype._calcTextData=function(){var e,t,i,o,n,r,a,l,c,h,u,d,p,f,_;if(this._textData=[],(e=this._study.graphics().hlines)&&(t=this._study.priceScale(),i=this._study._model.timeScale(),t&&!t.isEmpty()&&i&&!i.isEmpty()))for(o=0;o<e.length;o++)if(n=e[o],n.data&&(r=this._study.properties().graphics.hlines[n.styleId],
r.enableText.value()&&r.showText.value()))for(a=0;a<n.data.length;a++)l=n.data[a],c={},c.text=void 0===l.text?"":l.text,c.color=r.color.value(),c.font="arial",c.fontsize=r.fontSize.value(),h=l.level,t.isPercent()&&(u=this._study.firstValue(),h=t.priceRange().convertToPercent(h,u)),d=t.priceToCoordinate(h),p=r.textPos.value(),p===CanvasEx.TEXTPOS_TOPLEFT||p===CanvasEx.TEXTPOS_MIDDLELEFT||p===CanvasEx.TEXTPOS_BOTTOMLEFT?(f=4,c.horzAlign="left"):p===CanvasEx.TEXTPOS_TOPCENTER||p===CanvasEx.TEXTPOS_MIDDLECENTER||p===CanvasEx.TEXTPOS_BOTTOMCENTER?(f=i.width()/2,c.horzAlign="center"):p!==CanvasEx.TEXTPOS_TOPRIGHT&&p!==CanvasEx.TEXTPOS_MIDDLERIGHT&&p!==CanvasEx.TEXTPOS_BOTTOMRIGHT||(f=i.width(),c.horzAlign="right"),p===CanvasEx.TEXTPOS_TOPLEFT||p===CanvasEx.TEXTPOS_TOPCENTER||p===CanvasEx.TEXTPOS_TOPRIGHT?(c.vertAlign="bottom",d-=4):p===CanvasEx.TEXTPOS_MIDDLELEFT||p===CanvasEx.TEXTPOS_MIDDLECENTER||p===CanvasEx.TEXTPOS_MIDDLERIGHT?(c.vertAlign="middle",d-=2):p!==CanvasEx.TEXTPOS_BOTTOMLEFT&&p!==CanvasEx.TEXTPOS_BOTTOMCENTER&&p!==CanvasEx.TEXTPOS_BOTTOMRIGHT||(c.vertAlign="top"),_=new s(f,d),c.points=[_],c.offsetX=0,c.offsetY=0,this._textData.push(c)},v.StudyPaneView_hlines.prototype._calcHorzLinesData=function(){var e,t,i,o,n,r,a,l,c,h,u,d;if(this._data=[],(e=this._study.graphics().hlines)&&(t=this._study.priceScale())&&!t.isEmpty())for(i=0;i<e.length;i++)if(o=e[i],o.data&&(n=this._study.properties().graphics.hlines[o.styleId],n.visible.value()))for(r=0;r<o.data.length;r++)a=o.data[r],l={},c=0,h=a.level,t.isPercent()&&(u=this._study.firstValue(),h=t.priceRange().convertToPercent(h,u)),d=t.priceToCoordinate(h),l.points=[new s(c,d)],l.color=n.color.value(),l.linewidth=n.width.value(),l.linestyle=n.style.value(),l.hitTestResult=b.REGULAR,this._data.push(l)},v.StudyPriceAxisView_hlines=m,TradingView.TriangleTextMarkRenderer=function(e,t){this._data=e,this._textCache=t},TradingView.TriangleTextMarkRenderer.prototype.fontStyle=function(){return(this._data.bold?"bold ":"")+(this._data.italic?"italic ":"")+this._data.fontSize+"px "+this._data.font},TradingView.TriangleTextMarkRenderer.prototype.draw=function(e){var t,i,o,n,r,s,a;if(this._data){switch(t="up"===this._data.direction?1:-1,i=this._data.point.x,"left"===this._data.halign?i-=this._data.size:"right"===this._data.halign&&(i+=this._data.size),o=this._data.point.y,e.font=this.fontStyle(),n=e.measureText(this._data.text).width,this._textCache.textWidth=n,r=this._data.fontSize,s=.65*r,a=1*r,e.save(),e.translate(i+.5,o+.5),e.beginPath(),e.moveTo(0,0),this._data.direction){case"up":case"down":e.lineTo(s,a*t),e.lineTo(.5*n+s,a*t),e.lineTo(.5*n+s,(a+1.75*r)*t),e.lineTo(.5*-n-s,(a+1.75*r)*t),e.lineTo(.5*-n-s,a*t),e.lineTo(-s,a*t),e.lineTo(0,0),e.strokeStyle=this._data.borderColor,e.stroke(),e.fillStyle=this._data.color,e.fill(),e.fillStyle=this._data.fontColor,e.fillText(this._data.text,.5*-n,t<0?t*a-.5*r:a+1.25*r);break;default:throw Error(this._data.direction+" doesn't supported by TradingView.TriangleTextMarkRenderer")}e.restore()}},
TradingView.TriangleTextMarkRenderer.prototype.hitTest=function(e){var t,i,o,n,r,a,l,h,u,d,p,f=this._textCache.textWidth,_=this._data.fontSize;switch(this._data.direction){case"up":case"down":if(t="up"===this._data.direction?1:-1,i=.65*_,o=1*_,n=this._data.point.x,"left"===this._data.halign?n-=this._data.size:"right"===this._data.halign&&(n+=this._data.size),r=this._data.point.y,a=n-.5*f-i,l=n+.5*f+i,h=r+o*t,u=r+(o+1.75*_)*t,u<h&&(r=h,h=u,u=r),c(e,new s(a,h),new s(l,u)))return new b(b.REGULAR);if(d=[],d[0]={},d[0].x=this._data.point.x,d[0].y=this._data.point.y,d[1]={},d[1].x=this._data.point.x+.65*_,d[1].y=this._data.point.y+_*t,d[2]={},d[2].x=this._data.point.x-.65*_,d[2].y=this._data.point.y+_*t,p=(e.x-d[0].x)*(d[1].y-d[0].y)-(e.y-d[0].y)*(d[1].x-d[0].x),((e.x-d[1].x)*(d[2].y-d[1].y)-(e.y-d[1].y)*(d[2].x-d[1].x))*p>0&&((e.x-d[2].x)*(d[0].y-d[2].y)-(e.y-d[2].y)*(d[0].x-d[2].x))*p>0)return new b(b.REGULAR);break;default:throw Error(this._data.direction+" doesn't supported by TradingView.TriangleTextMarkRenderer")}return null},TradingView.RectangleTextMarkRenderer=function(e,t){this._data=e,this._textCache=t},TradingView.RectangleTextMarkRenderer.prototype.fontStyle=function(){return(this._data.bold?"bold ":"")+(this._data.italic?"italic ":"")+this._data.fontSize+"px "+this._data.font},TradingView.RectangleTextMarkRenderer.prototype.draw=function(e){var t,i,o,n,r;if(this._data){switch(t=this._data.point.x,i=this._data.point.y,e.font=this.fontStyle(),o=e.measureText(this._data.text).width,this._textCache.textWidth=o,e.save(),e.translate(t+.5,i+.5),e.beginPath(),e.moveTo(0,0),n=this._data.halign,r=this._data.valign,e.textAlign=n,r){case"middle":e.textBaseline="middle";break;case"top":e.textBaseline="bottom";break;case"bottom":e.textBaseline="hanging"}e.fillStyle=this._data.fontColor,e.fillText(this._data.text,0,0),e.restore()}},TradingView.RectangleTextMarkRenderer.prototype.hitTest=function(e){var t,i,o=this._data.point.x+.5,n=this._data.point.y+.5,r=this._textCache.textWidth,a=this._data.fontSize,l=this._data.halign;switch(this._data.valign){case"middle":n-=a/2;break;case"bottom":n-=a}switch(l){case"right":o-=r;break;case"center":o-=r/2}return t=new s(o,n),i=new s(o+r,n+a),c(e,t,i)?new b(b.REGULAR):null},TradingView.CircleShapeMarkRenderer=function(e,t){this._data=e,this._textCache=t},TradingView.CircleShapeMarkRenderer.prototype.draw=function(e){var t,i,o;this._data&&(t="down"===this._data.direction?1:"up"===this._data.direction?-1:0,i=this._data.point.x,o=this._data.point.y,e.save(),e.fillStyle=this._data.color,e.beginPath(),e.arc(i+1,o+2*this._data.size*t+.5,this._data.size,0,2*Math.PI),e.closePath(),e.fill(),e.stroke(),e.restore())},TradingView.CircleShapeMarkRenderer.prototype.hitTest=function(e){var t="down"===this._data.direction?1:"up"===this._data.direction?-1:0;return Math.pow(this._data.point.x+.5-e.x,2)+Math.pow(this._data.point.y+.5+2*this._data.size*t-e.y,2)<=Math.pow(this._data.size,2)?new b(b.REGULAR):null},TradingView.SquareShapeMarkRenderer=function(e,t){this._data=e,this._textCache=t},
TradingView.SquareShapeMarkRenderer.prototype.draw=function(e){var t,i,o,n,r;this._data&&(t="down"===this._data.direction?1:"up"===this._data.direction?-1:0,i=parseInt(this._data.size),o=new s(this._data.point.x-i/2,this._data.point.y-i/2+t*i),n=new s(this._data.point.x+i/2,this._data.point.y+i/2+t*i),r=n.subtract(o),e.beginPath(),e.fillStyle=this._data.color,e.rect(o.x,o.y,r.x,r.y),e.stroke(),e.fill())},TradingView.SquareShapeMarkRenderer.prototype.hitTest=function(e){var t="down"===this._data.direction?1:"up"===this._data.direction?-1:0,i=parseInt(this._data.size),o=new s(this._data.point.x-i/2,this._data.point.y-i/2+t*i),n=new s(this._data.point.x+i/2,this._data.point.y+i/2+t*i),r=new s(Math.min(o.x,n.x),Math.min(o.y,n.y)),a=new s(Math.max(o.x,n.x),Math.max(o.y,n.y));return c(e,r,a)?new b(b.REGULAR):null},TradingView.ArrowShapeMarkRenderer=function(e,t,i){this._data=e,this._textCache=t,this._arrowDirection=i},TradingView.ArrowShapeMarkRenderer.prototype.draw=function(e){var t,i,o,n,r,s,a,l,c,h,u;if(this._data){switch(t=this._arrowDirection,i=1*this._data.size,o=this._data.color,n=this._data.point.x+1,r=this._data.point.y,s=1.1*i,t){case"up":r-=s;break;case"down":r+=s}switch(a=i/6,l=i/4,c=i/3,h=i/2,u=.6666666*i,e.save(),e.fillStyle=o,e.beginPath(),t){case"up":e.moveTo(n,r),e.lineTo(n-h,r+u),e.lineTo(n-l,r+u),e.lineTo(n,r+c),e.lineTo(n+l,r+u),e.lineTo(n+h,r+u),e.lineTo(n,r);break;case"down":e.moveTo(n,r+i),e.lineTo(n-h,r+c),e.lineTo(n-l,r+c),e.lineTo(n,r+u),e.lineTo(n+l,r+c),e.lineTo(n+h,r+c),e.lineTo(n,r+i);break;case"right":e.moveTo(n+a,r),e.lineTo(n-a,r-l),e.lineTo(n-a,r+l),e.lineTo(n+a,r);break;case"left":e.moveTo(n-a,r),e.lineTo(n+a,r-l),e.lineTo(n+a,r+l),e.lineTo(n-a,r)}e.closePath(),e.fill(),e.stroke(),e.restore()}},TradingView.ArrowShapeMarkRenderer.prototype.hitTest=function(e){var t,i,o,n,r,a,l,c=this._data.point.x,u=this._data.point.y,d=this._arrowDirection,p=1*this._data.size,f=p/2,_=1.1*p;switch(d){case"up":u-=_;break;case"down":u+=_}switch(t=p/6,i=p/4,o=p/3,f=p/2,n=.6666666*p,d){case"up":r=new s(c,u),a=new s(c+f,u+n),l=new s(c-f,u+n);break;case"down":r=new s(c,u+p),a=new s(c+f,u+o),l=new s(c-f,u+o);break;case"right":r=new s(c+t,u),a=new s(c-t,u-i),l=new s(c-t,u+i);break;case"left":r=new s(c-t,u),a=new s(c+t,u-i),l=new s(c+t,u+i)}return h(e,r,a,l)?new b(b.REGULAR):null},v.StudyPaneView_textmarks=function(e,t){this._study=e,this._model=t,this._data=[],this._textCache=[]},inherit(v.StudyPaneView_textmarks,y),v.StudyPaneView_textmarks.prototype.update=function(){this._invalidated=!0},v.StudyPaneView_textmarks.prototype.renderer=function(){var e,t;for(this._invalidated&&(this._updateViewInternal(),this._invalidated=!1),e=new S,t=0;t<this._data.length;t++)switch(this._data[t].shape){case"triangle":e.append(new TradingView.TriangleTextMarkRenderer(this._data[t],this._textCache[t]));break;case"rectangle":e.append(new TradingView.RectangleTextMarkRenderer(this._data[t],this._textCache[t]))}return e},v.StudyPaneView_textmarks.prototype._updateViewInternal=function(){var e,t,i,o,n,r,a,l,c,h,u,d,p,f,_,m,g,v,y,b,S
;if(this._data=[],(e=this._study.graphics().textmarks)&&(t=this._study.priceScale(),i=this._model.timeScale(),t&&!t.isEmpty()&&i&&!i.isEmpty()))for(o=this._study.graphics().indexes,n=this._model.timeScale().visibleBars(),r=n.firstBar(),a=n.lastBar(),l=0;l<e.length;l++)if(c=e[l],c.data&&(h=this._study.properties().graphics.textmarks[c.styleId],h.visible.value()))for(u=c.data,d=0;d<u.length;d++)if(p=u[d],f={},_=h.location.value(),m=h.shape.value(),!((g=o[p.time])<r||g>a)&&null!==this._study.series().bars().valueAt(g)){switch(g=o[p.time]+(p.offset||0),f.font=h.fontFamily.value(),f.color=T.generateColor(h.color.value(),h.transparency.value()),f.bold=h.fontBold.value(),f.fontColor=T.generateColor(h.fontColor.value(),h.transparency.value()),f.italic=h.fontItalic.value(),f.fontSize=h.fontSize.value(),f.text=p.text?p.text:"",f.halign=h.halign.value(),f.valign=void 0!==h.valign?h.valign.value():"middle",f.shape=h.shape.value(),f.size=.5*i.barSpacing(),f.borderColor="rgb(0, 0, 0)",v=50,m){case"triangle":S=this._calcCoordsForTriangleShape(_,g,v,p.price,t),f.direction=S.direction,y=Math.round(i.indexToCoordinate(g)),b=S.y;break;case"rectangle":S=this._calcCoordsForRectangleShape(_,g,p.price,t,i),y=S.x,b=S.y}f.point=new s(y,b),this._data.push(f),this._textCache.push({})}},v.StudyPaneView_textmarks.prototype._calcCoordsForTriangleShape=function(e,t,i,o,n){var r,s,a;switch(e){case CanvasEx.MARKLOC_TOP:r=n.height()-i,s="down";break;case CanvasEx.MARKLOC_BOTTOM:r=i,s="up";break;case CanvasEx.MARKLOC_ABSOLUTEDOWN:n.isPercent()&&(a=this._study.firstValue(),o=n.priceRange().convertToPercent(o,a)),r=n.priceToCoordinate(o),s="down";break;case CanvasEx.MARKLOC_ABSOLUTEUP:n.isPercent()&&(a=this._study.firstValue(),o=n.priceRange().convertToPercent(o,a)),r=n.priceToCoordinate(o),s="up";break;case CanvasEx.MARKLOC_ABOVEBAR:r=this._locationToY(e,t),s="down";break;case CanvasEx.MARKLOC_BELOWBAR:default:r=this._locationToY(e,t),s="up"}return{y:r,direction:s}},v.StudyPaneView_textmarks.prototype._calcCoordsForRectangleShape=function(e,t,i,o,n){var r,s,a=Math.round(n.indexToCoordinate(t));switch(e){case CanvasEx.MARKLOC_ABSOLUTEDOWN:case CanvasEx.MARKLOC_ABSOLUTEUP:case CanvasEx.MARKLOC_ABSOLUTE:o.isPercent()&&(s=this._study.firstValue(),i=o.priceRange().convertToPercent(i,s)),r=o.priceToCoordinate(i);break;case CanvasEx.MARKLOC_ABOVEBAR:case CanvasEx.MARKLOC_BELOWBAR:r=this._locationToY(e,t);break;case CanvasEx.MARKLOC_RIGHT:case CanvasEx.MARKLOC_LEFT:a=n.width(),o.isPercent()&&(s=this._study.firstValue(),i=o.priceRange().convertToPercent(i,s)),r=o.priceToCoordinate(i);break;default:r=this._locationToY(e,t)}return{x:a,y:r}},v.StudyPaneView_shapemarks=function(e,t){this._study=e,this._model=t,this._data=[],this._textCache=[]},inherit(v.StudyPaneView_shapemarks,y),v.StudyPaneView_shapemarks.prototype.update=function(){this._invalidated=!0},v.StudyPaneView_shapemarks.prototype.renderer=function(){var e,t;for(this._invalidated&&(this._updateViewInternal(),this._invalidated=!1),e=new S,t=0;t<this._data.length;t++)switch(this._data[t].shape){
case"circle":e.append(new TradingView.CircleShapeMarkRenderer(this._data[t],this._textCache[t]));break;case"square":e.append(new TradingView.SquareShapeMarkRenderer(this._data[t],this._textCache[t]));break;case"arrowUp":e.append(new TradingView.ArrowShapeMarkRenderer(this._data[t],this._textCache[t],"up"));break;case"arrowDown":e.append(new TradingView.ArrowShapeMarkRenderer(this._data[t],this._textCache[t],"down"));break;case"arrowRight":e.append(new TradingView.ArrowShapeMarkRenderer(this._data[t],this._textCache[t],"right"));break;case"arrowLeft":e.append(new TradingView.ArrowShapeMarkRenderer(this._data[t],this._textCache[t],"left"))}return e},v.StudyPaneView_shapemarks.prototype._updateViewInternal=function(){var e,t,i,o,n,r,a,l,c,h,u,d,p,f,_,m,g,v,y,b,S;if(this._data=[],(e=this._study.graphics().shapemarks)&&(t=this._study.priceScale(),i=this._model.timeScale(),t&&!t.isEmpty()&&i&&!i.isEmpty()))for(o=this._study.graphics().indexes,n=this._model.timeScale().visibleBars(),r=n.firstBar(),a=n.lastBar(),l=0;l<e.length;l++)if(c=e[l],c.data&&(h=this._study.properties().graphics.shapemarks[c.styleId],h.visible.value()))for(u=c.data,d=0;d<u.length;d++)if(p=u[d],!((f=o[p.time])<r||f>a)&&(_={},null!=p.time&&null!==this._study.series().bars().valueAt(f))){switch(_.color=T.generateColor(h.color.value(),h.transparency.value()),m=0,"left"===h.halign.value()?m-=i.barSpacing()/2+1:"right"===h.halign.value()&&(m+=i.barSpacing()/2+1),_.size=h.size.value(),_.shape=h.shape.value(),g=Math.round(i.indexToCoordinate(f))+m,v=p.price,t.isPercent()&&(y=this._study.firstValue(),v=t.priceRange().convertToPercent(v,y)),b=t.priceToCoordinate(v),S=h.location.value()){case CanvasEx.MARKLOC_ABSOLUTE:_.direction="";break;case CanvasEx.MARKLOC_ABSOLUTEDOWN:_.direction="down";break;case CanvasEx.MARKLOC_ABSOLUTEUP:_.direction="up";break;case CanvasEx.MARKLOC_ABOVEBAR:b=this._locationToY(S,f,Math.floor(2*_.size/i.barSpacing())+1),_.direction="up";break;case CanvasEx.MARKLOC_BELOWBAR:b=this._locationToY(S,f,Math.floor(2*_.size/i.barSpacing())+1),_.direction="down";break;default:C.logWarn("Bad location value: "+S),b=this._locationToY(CanvasEx.MARKLOC_ABSOLUTEUP,f),_.direction="up"}_.point=new s(g,b),this._data.push(_),this._textCache.push({})}},o.prototype.draw=function(e){},o.prototype.drawBackground=function(e){var t=this._data;w(e,t.x1,t.y1,t.x2-t.x1,t.y2-t.y1,T.generateColor(this._data.color,this._data.transparency))},o.prototype.hitTest=function(e){return null},v.StudyPaneView_backgrounds=function(e,t){this._study=e,this._model=t,this._data=[]},v.StudyPaneView_backgrounds.prototype.update=function(){this._invalidated=!0},v.StudyPaneView_backgrounds.prototype.renderer=function(){var e,t;for(this._invalidated&&(this._updateViewInternal(),this._invalidated=!1),e=new S,t=0;t<this._data.length;t++)e.append(new o(this._data[t]));return e},v.StudyPaneView_backgrounds.prototype._hideExtendedHours=function(e){return("inSession"===e||"outOfSession"===e)&&!this._study._series.properties().extendedHours.value()},
v.StudyPaneView_backgrounds.prototype._updateViewInternal=function(){var e,t,i,o,n,r,s,a,l,c,h,u,d,p,f,_,m,g,v,y,b;if(this._data=[],(e=this._study.graphics().backgrounds)&&(t=this._model.timeScale(),(i=this._study.priceScale())&&!i.isEmpty()&&t&&!t.isEmpty()))for(o=this._study.graphics().indexes,n=this._model.timeScale().visibleBars(),r=n.firstBar(),s=n.lastBar(),a=0;a<e.length;a++)if(l=e[a],c=l.styleId,h=l.data,u=this._study.properties().graphics.backgrounds[c],!this._hideExtendedHours(c)&&u.visible.value())for(f=0;f<h.length;f++)_=h[f],m={},g=o[_.start],(v=o[_.stop])<r||g>s||null!=_.start&&null!=_.stop&&(y=Math.ceil(t.indexToCoordinate(g,!0)-.5*t.barSpacing()),b=Math.ceil(t.indexToCoordinate(v,!0)+.5*t.barSpacing()),p===g-1&&(y=d),d=b,p=v,y<0&&b<0||y>t.width()&&b>t.width()||(m.x1=y,m.x2=b,m.y1=0,m.y2=i.height(),m.color=u.color.value(),m.transparency=u.transparency.value(),this._data.push(m)))},v.StudyPaneView_polygons=function(e,t){this._study=e,this._model=t,this._data=[]},v.StudyPaneView_polygons.prototype.update=function(){this._invalidated=!0},v.StudyPaneView_polygons.prototype.renderer=function(){var e,t,i;for(this._invalidated&&(this._updateViewInternal(),this._invalidated=!1),e=new S,t=0;t<this._data.length;t++)i=new g(new b(b.REGULAR)),i.setData(this._data[t]),e.append(i);return e},v.StudyPaneView_polygons.prototype._updateViewInternal=function(){var e,t,i,o,n,r,a,l,c,h,u,d,p,f,_,m,g,v,y,b,S,w,T;if(this._data=[],(e=this._study.graphics().polygons)&&(t=this._study.priceScale(),i=this._study._model.timeScale(),t&&!t.isEmpty()&&i&&!i.isEmpty()))for(o=this._study.graphics().indexes,n=this._model.timeScale().visibleBars(),r=n.firstBar(),a=n.lastBar(),l=0;l<e.length;l++)if(c=e[l],c.data&&(h=this._study.properties().graphics.polygons[c.styleId],100!==h.transparency.value()))for(u=0;u<c.data.length;u++){for(d=c.data[u],p=1/0,f=-1/0,_=0;d.points&&_<d.points.length;_++)m=o[d.points[_].index]+(d.points[_].offset||0),p=Math.min(p,m),f=Math.max(f,m);if(!(f<r||p>a)){for(g={},g.points=[],_=0;d.points&&_<d.points.length;_++)v=d.points[_],y=i.indexToCoordinate(o[v.index]+(v.offset||0)),b=v.level,t.isPercent()&&(S=this._study.firstValue(),b=t.priceRange().convertToPercent(b,S)),w=t.priceToCoordinate(b),T=new s(y,w),T.data=_,g.points.push(T);g.color=h.color.value(),g.backcolor=h.color.value(),g.linewidth=void 0!==h.showBorder&&h.showBorder.value()?1:0,g.linestyle=CanvasEx.LINESTYLE_SOLID,g.filled=!0,g.fillBackground=!0,g.transparency=h.transparency.value(),g.mouseTouchable=h.mouseTouchable.value(),this._data.push(g)}}},v.StudyPaneView_trendchannels=function(e,t){this._study=e,this._model=t,this._data=[]},v.StudyPaneView_trendchannels.prototype.update=function(){this._invalidated=!0},v.StudyPaneView_trendchannels.prototype.renderer=function(){var e,t,i;for(this._invalidated&&(this._updateViewInternal(),this._invalidated=!1),e=new S,t=0;t<this._data.length;t++)i=new g(new b(b.REGULAR)),i.setData(this._data[t]),e.append(i);return e},v.StudyPaneView_trendchannels.prototype._convertToYCoord=function(e){
var t=this._study.priceScale(),i=this._study.firstValue();return t.isPercent()&&(e=t.priceRange().convertToPercent(e,i)),t.priceToCoordinate(e)},v.StudyPaneView_trendchannels.prototype._updateViewInternal=function(){var e,t,i,o,n,r,l,c,h,d,p,f,_,m,g,v,y,b,S,w,T,P,C,x,E,L,I,A,k,M;if(this._data=[],(e=this._study.graphics().trendchannels)&&(t=this._study.priceScale(),i=this._study._model.timeScale(),t&&!t.isEmpty()&&i&&!i.isEmpty()))for(o=function(e,t,i,o,n,r){var l,c,h,d;return a(e,t)?[e,t]:(l=new s(0,0),c=new s(i,o),n&&(h=e.subtract(t),d=u(e,e.add(h),l,c),d?e=d:t.x=i),r&&(h=t.subtract(e),d=u(t,t.add(h),l,c),d?t=d:t.x=i),[e,t])},n=this._study.graphics().indexes,r=this._model.timeScale().visibleBars(),l=r.firstBar(),c=r.lastBar(),h=0;h<e.length;h++)if(d=e[h],d.data)for(p=this._study.properties().graphics.trendchannels[d.styleId],f=0;f<d.data.length;f++)_=d.data[f],m=n[_.startIndex],g=n[_.endIndex],Math.max(m,g)<l&&!_.extendRight||Math.min(m,g)>c&&!_.extendLeft||(v=this._convertToYCoord(_.startHighPrice),y=this._convertToYCoord(_.startLowPrice),b=this._convertToYCoord(_.endHighPrice),S=v-y,w=b-S,T=i.indexToCoordinate(m),P=i.indexToCoordinate(g),C=new s(T,v),x=new s(T,y),E=new s(P,b),L=new s(P,w),I=o(C,E,i.width(),t.height(),_.extendLeft,_.extendRight),A=o(x,L,i.width(),t.height(),_.extendLeft,_.extendRight),C=I[0],E=I[1],x=A[0],L=A[1],k={},k.points=[C,x,L,E],k.color=p.color.value(),k.backcolor=p.color.value(),k.linewidth=void 0!==p.borderWidth?p.borderWidth.value():0,k.linestyle=CanvasEx.LINESTYLE_SOLID,k.filled=!0,k.fillBackground=!0,_.transparency?(M=_.transparency+p.transparency.value(),k.transparency=Math.min(M,100)):k.transparency=p.transparency.value(),k.mouseTouchable=!0,this._data.push(k))},v.StudyPaneView_hhists=function(e,t){this._study=e,this._model=t,this._rendererData={histsByLineWidth:{},histsBySession:{}},this._textData=[],this._textRendererCache={},this._horizHistogramRenderer=new _(this._rendererData)},v.StudyPaneView_hhists.prototype.update=function(){this._invalidated=!0},v.StudyPaneView_hhists.prototype.renderer=function(){var e,t;for(this._invalidated&&(this._updateViewInternal(),this._invalidated=!1),e=new S,e.append(this._horizHistogramRenderer),t=0;t<this._textData.length;t++)e.append(new d(this._textData[t],new b(b.REGULAR)));return e},v.StudyPaneView_hhists.prototype._resetRenderersData=function(){this._rendererData.histsByLineWidth={},this._rendererData.histsBySession={},this._textData=[],this._maxHistWidth=null},v.StudyPaneView_hhists.prototype._updateColors=function(){var e=this._study.properties().graphics.hhists.histBars,t=this._study.properties().graphics.hhists.vaBars,i=T.generateColor(e.colors[0].value(),e.transparencies[0].value()),o=T.generateColor(e.colors[1].value(),e.transparencies[1].value()),n=t?T.generateColor(t.colors[0].value(),t.transparencies[0].value()):"rgba(255, 0, 0, 1)",r=t&&t.colors[1]?T.generateColor(t.colors[1].value(),t.transparencies[1].value()):n;this._colors={histBars:[i,o],vaBars:[T.blendColors(i,n),T.blendColors(o,r)]}},
v.StudyPaneView_hhists.prototype._updateViewInternal=function(){var e,t,i,o,n,r,s,a,l,c,h,u,d,p,f,_,m,g,v;if(this._resetRenderersData(),e=this._study.priceScale(),t=this._model.timeScale(),e&&!e.isEmpty()&&t&&!t.isEmpty()&&(i=this._study.graphics().hhists)&&(o=this._study.graphics().indexes,n=this._model.timeScale().visibleBars(),r=n.firstBar(),s=n.lastBar(),a=i[0],l=this._study.properties().graphics.hhists[a.styleId],l.visible.value())){this._updateColors(),c=a.shortDataObj,h=a.dataObj,u=c||h;for(d in u){for(p=u[d],f=1/0,_=-1/0,m=p.length;m--;)g=p[m],f=Math.min(f,o[g.firstBarTime]),_=Math.max(_,o[g.lastBarTime]);_<r||f>s||(v=this._findMaxRate(p),this._updateDataForRenderers(p,l,e,t,o,v,d))}}},v.StudyPaneView_hhists.prototype._updateDataForRenderers=function(e,t,i,o,r,a,l){var c,h,u,d,p,f,_,m,g,v,y,b,S,w,T,C,x,E,L,I,A,k,M=null,O=null,D={},V={},R={},B={},N=i.height(),z=i.isPercent(),F=t.percentWidth.value(),$=t.showValues.value(),H=t.location.value(),W=t.direction.value(),U=H===CanvasEx.HHISTLOC_ABSOLUTE,j=H===CanvasEx.HHISTLOC_RELATIVE,q=W===CanvasEx.HHISTDIR_LEFTTORIGHT,G=W===CanvasEx.HHISTDIR_RIGHTTOLEFT,Y=this._rendererData.histsByLineWidth,X=this._rendererData.histsBySession,K={};for(X[l]=K,f=0;f<e.length;f++){if(_=e[f],null==M&&(M=this._findActualRateLength(_.rate)),null==this._maxHistWidth&&(m=Math.abs(o.indexToCoordinate(r[_.firstBarTime])-o.indexToCoordinate(r[_.lastBarTime])),this._maxHistWidth=Math.max(F*m/100-M,0)),U&&q)d=o.indexToCoordinate(r[_.firstBarTime]),u=1,p="left";else if(U&&G)d=o.indexToCoordinate(r[_.lastBarTime]),u=-1,p="right";else if(j&&q)d=0,u=1,p="left";else{if(!j||!G)throw Error("Unknown location/direction values: "+H+"/"+W);d=o.width(),u=-1,p="right"}for(z?(g=this._study.firstValue(),c=i.priceRange().convertToPercent(_.priceHigh,g),h=i.priceRange().convertToPercent(_.priceLow,g)):(c=_.priceHigh,h=_.priceLow),y=0;y<M;y++)if(b={},b.y1=i.priceToCoordinate(c)+1,!(b.y1<0||(b.y2=i.priceToCoordinate(h)-1,b.y2>N))){if(O||(O=.6*(b.y2-b.y1)),$&&(void 0===D[y]?D[y]=_.rate[y]:D[y]+=_.rate[y]),$&&y===M-1&&O>=7.5){for(S={},w=this._study.formatter(),S.text="",T=0;T<M;T++)S.text=n(S.text,w.format(_.rate[T]),W),T!==M-1&&(S.text=n(S.text,"x",W));if(S.color=t.valuesColor.value(),S.font="arial",S.fontsize=O,S.horzAlign=p,S.vertAlign="middle",C=new s(d+3*u,b.y2-.61*(b.y2-b.y1)),S.points=[C],S.offsetX=0,S.offsetY=0,this._textData.push(S),0===f&&(v=b.y2),f===e.length-1){for(x=d+3*u,E=v+.39*(b.y2-b.y1),L={text:"",color:P(t.valuesColor.value(),1.5),font:"arial",fontsize:O,horzAlign:p,vertAlign:"middle",points:[new s(x,E)],offsetX:0,offsetY:0},T=0;T<M;T++)L.text=n(L.text,w.format(D[T]),W),T!==M-1&&(L.text=n(L.text,"x",W));this._textData.push(L)}}b.x1=0===y?d:d+u*(this._maxHistWidth*_.rate[y-1]/a),b.x2=b.x1+u*(this._maxHistWidth*_.rate[y]/a),Math.abs(b.y1-V[y])<1?(R[y]?R[y].push(b.x1):R[y]=[b.x1],B[y]?B[y].push(b.x2):B[y]=[b.x2]):((R[y]||B[y])&&(R[y].push(b.x1),B[y].push(b.x2),b.x1=Math.max.apply(null,R[y]),b.x2=Math.max.apply(null,B[y]),delete R[y],delete B[y]),V[y]=b.y1,Math.abs(b.x2-b.x1)<.5||(b.x0=d,
I=_.va?this._colors.vaBars[y]:this._colors.histBars[y],A=Math.round(b.y2-b.y1),Y[A]||(Y[A]={}),k=Y[A],k[I]?k[I].push(b):k[I]=[b],K[f]?K[f].x2<b.x2&&(K[f].x2=b.x2):K[f]={x1:d,x2:b.x2,y1:b.y1,y2:b.y2}))}}},v.StudyPaneView_hhists.prototype._findMaxRate=function(e){var t,i,o=0,n=0;for(t=0;t<e.length;t++){for(n=0,i=0;i<e[t].rate.length;i++)n+=e[t].rate[i];o=Math.max(o,n)}return o},v.StudyPaneView_hhists.prototype._findActualRateLength=function(e){var t,i,o=0;for(t=0;t<e.length&&(null!==(i=e[t])&&void 0!==i);++t)o++;return o},e.exports=v},function(e,t,i){"use strict";function o(e,t){return e.y1-1>t?1:e.y2+1<t?-1:0}var n,r,s;Object.defineProperty(t,"__esModule",{value:!0}),n=i(134),r=i(11),s=function(){function e(e){this._data=null,this._data=e}return e.prototype.hitTest=function(e){var t,i,s,a,l,c,h,u,d,p=this._data;if(null===p)return null;if(t=Object.keys(p.histsBySession),0===t.length)return null;for(i=t.length-1;i>=0;i--){s=p.histsBySession[parseInt(t[i],10)],a=[];for(l in s)s.hasOwnProperty(l)&&a.push(s[l]);if(-1!==(c=n.bSearch(a,e.y,o))&&(h=a[c],u=Math.min(h.x1,h.x2),d=Math.max(h.x1,h.x2),e.x>=u&&e.x<=d))return new r(r.REGULAR)}return null},e.prototype.draw=function(e){var t,i,o,n,r,s,a,l,c,h,u=this._data;if(null!==u){e.save();for(t in u.histsByLineWidth)if(u.histsByLineWidth.hasOwnProperty(t)){i=parseInt(t,10),o=u.histsByLineWidth[t],n=i%2==0?.5:0,r=Math.round(i/2);for(s in o)if(o.hasOwnProperty(s)){for(e.strokeStyle=s,e.lineWidth=i*(window.hidpiCanvasRatio||1),e.beginPath(),a=o[s],l=0,c=a;l<c.length;l++)h=c[l],e.moveTo(h.x1+n,h.y1+r+n),e.lineTo(h.x2+n,h.y1+r+n);e.stroke()}}e.restore()}},e}(),t.HorizHistogramRenderer=s},function(e,t,i){"use strict";var o,n,r,s,a;Object.defineProperty(t,"__esModule",{value:!0}),o=i(6),n=i(9),r=i(80),s=i(10),a=function(e){function t(t,i){var o=e.call(this)||this;return o._source=t,o._data=i,o}return o.__extends(t,e),t.prototype._updateRendererData=function(e){var t,i,o,r,a,l;if(e.visible=!1,t=this._source.priceScale(),i=this._source.properties().visible.value(),t&&!t.isEmpty()&&i&&(o=this._source.properties().graphics[this._data.lineType][this._data.styleId],o.visible&&o.visible.value()&&o.showPrice&&o.showPrice.value())){if(r=this._data.line.level,t.isPercent()){if(a=this._source.firstValue(),!s.isNumber(a))return;r=n.ensureNotNull(t.priceRange()).convertToPercent(r,a)}l=o.color.value(),e.background=l,e.color=this.generateTextColor(l),e.coordinate=t.priceToCoordinate(r),e.text=t.formatter().format(r),e.visible=!0}},t}(r.PriceAxisView),t.HLinesPriceAxisView=a},function(e,t,i){"use strict";function o(){}var n=i(36),r=n.min,s=n.max;o.prototype._locationToY=function(e,t,i){var o,n,a,l,c,h,u;switch(i||(i=0),o=[],n=this._study.priceScale(),e){case CanvasEx.MARKLOC_ABOVEBAR:a=TradingView.HIGH_PLOT;break;case CanvasEx.MARKLOC_BELOWBAR:a=TradingView.LOW_PLOT}for(l=this._study.firstValue(),i>=1&&(i-=1),c=-i;c<=i;c++)null!==(h=this._study.series().bars().valueAt(t+c))&&(u=h[a],n.isPercent()&&(u=n.priceRange().convertToPercent(u,l)),o.push(n.priceToCoordinate(u)));switch(e){
case CanvasEx.MARKLOC_ABOVEBAR:return r(o)-15;case CanvasEx.MARKLOC_BELOWBAR:return s(o)+15}},e.exports=o},function(e,t,i){"use strict";function o(e){return d.filter(function(t){return t.m===e})[0]}function n(e){var t=o(e);t&&t.cb&&$.when(t.cb()).done(function(){t.state="loaded",t.args=Array.prototype.slice.call(arguments),delete t.cb,r(t.m)})}function r(e){var t=o(e),i=function e(i){i&&!i.length||(i.shift().apply(null,t.args),e(i))},n=p[e];n&&i(n)}function s(e,t){"number"==typeof t?setTimeout(function(){return n(e)},t):!0===t&&n(e)}function a(e){return!!o(e)}function l(e,t,i){if(t){var n=o(e);n?n.cb=t:d.push({m:e,cb:t})}(void 0!==i||f)&&s(e,i)}function c(e){var t=o(e);return t&&"loaded"===t.state}function h(e,t){var i=o(e);p[e]=p[e]||[],p[e].push(t),i&&"loaded"===i.state&&r(e)}var u,d,p,f;Object.defineProperty(t,"__esModule",{value:!0}),t.isExists=a,t.load=l,t.isLoaded=c,t.onReady=h,u=5e3,d=[],p={},f=!1,setTimeout(function(){var e;for(f=!0,e=0;e<d.length;e+=1)n(d[e].m)},u)},,function(e,t,i){"use strict";(function(t){function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){var i,o;for(i=0;i<t.length;i++)o=t[i],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),s=i(49),a=o(s),l=i(57),c=i(0),h=(0,c.getLogger)("ReutersCalendar"),u=function(){function e(i){if(n(this,e),!(this instanceof e))throw Error("ChartEvents is a constructor");this.changed=new t,this.reset(i),this.pendingDfd=null,this._boundPushstreamHandler=this._pushstreamHandler.bind(this),a.default.on("chartevents-reuters",this._boundPushstreamHandler)}return r(e,[{key:"items",value:function(){return this._items}},{key:"reset",value:function(e){this.pendingDfd&&this.pendingDfd.reject(),this._items=[],this.itemsById={},this.minObtainedTimestamp=1/0,this.noResults=!1,e&&null!=e.from?this.from=+e.from:this.from=Date.now()-864e5,this._historyLimit=e&&e.historyLimit,e&&null!=e.to?this.to=e.to:this.to=this.from+this.defaultSelectionTimeAmount,this.from=this.cacheFriendlyTimestamp(this.from),this.to=this.cacheFriendlyTimestamp(this.to),this.currencyFilter=e&&e.currencyFilter?e.currencyFilter:[],e&&null!=e.minImportance&&isFinite(+e.minImportance)?this.minImportance=Math.max(-1,Math.min(1,Math.floor(e.minImportance))):this.minImportance=-1}},{key:"cacheFriendlyTimestamp",value:function(e){return e-e%36e5}},{key:"formatTimestampForRequest",value:function(e){return new Date(e).toISOString()}},{key:"requestMore",value:function(e){var t,i,o,n,r,s,a=this;return this.pendingDfd?this.pendingDfd.promise():(isFinite(this.minObtainedTimestamp)&&null!=this._historyLimit&&+new Date(this.from)<this._historyLimit&&(this.noResults=!0),this.noResults?$.Deferred().resolve({added:[],changed:[],noResults:!0}).promise():(t=$.Deferred(),this.pendingDfd=t,t.always(function(){a.pendingDfd=null}),i={},
-1!==this.minImportance&&(i.minImportance=this.minImportance),isFinite(this.minObtainedTimestamp)&&(this.to=this.from,this.from=this.from-this.defaultSelectionTimeAmount),e&&e.from&&e.from<this.minObtainedTimestamp&&(this.from=this.cacheFriendlyTimestamp(e.from)),i.from=this.formatTimestampForRequest(this.from),i.to=this.formatTimestampForRequest(this.to),this.currencyFilter.length&&(i.currencies=""+this.currencyFilter),o=Object.keys(i).map(function(e){return e+"="+i[e]}).join("&"),n=this.eventsUrl+(o?"?"+o:""),r=Date.now(),s=$.ajax({method:"GET",url:n,dataType:"json"}).done(function(e,i,o){var n,s,c=Date.now()-r;if(l.Telemetry.sendReport("calendars","chartevents_http_status",{v:o.status}),l.Telemetry.sendReport("calendars","chartevents_response_time_frame",{v:c}),t===a.pendingDfd){if(!e||!e.status||"error"===e.status)return l.Telemetry.sendReport("calendars","chartevents_error"),n=e&&e.errmsg||"invalid response",h.logError(n),void t.reject(Error(n));l.Telemetry.sendReport("calendars","chartevents_ok"),a.minObtainedTimestamp=a.from,"no_data"===e.status&&(a.noResults=!0,a.minObtainedTimestamp=-1/0),s=a._mergeItems(e.result||[]),t.resolve(s),a.changed.fire(s)}}).fail(function(e){if(t===a.pendingDfd){h.logError("ChartEvents error on request {0}".format(n),e);var i=Date.now()-r;l.Telemetry.sendReport("calendars","chartevents_error"),l.Telemetry.sendReport("calendars","chartevents_http_status",{v:e.status||400}),l.Telemetry.sendReport("calendars","chartevents_response_time_frame",{v:i})}t.reject(e)}),t.fail(function(){s.abort()}),t.promise()))}},{key:"destroy",value:function(){a.default.off("chartevents-reuters",this._boundPushstreamHandler),this._items=[],this.reset()}},{key:"_mergeItems",value:function(e){var t,i,o,n,r,s,a,l=this,c={added:[],changed:[],noResults:l.noResults},h=[];for(t=e.length;t--;)i=e[t],-1!==this.minImportance&&this.minImportance>i.importance||(i.timestamp=Date.parse(i.date),null!=this._historyLimit&&i.timestamp<this._historyLimit||h.push(i));for(o=0;o<h.length;o++)if(n=h[o],this.itemsById[n.id]){r=!1,s=this.itemsById[n.id];for(a in n)s[a]!==n[a]&&(s[a]=n[a],r=!0);r&&c.changed.push(s)}else this.itemsById[n.id]=n,this._items.push(n),c.added.push(n);return c}},{key:"_pushstreamHandler",value:function(e){var t=this._mergeItems([].concat(e));(t.changed.length||t.added.length)&&this.changed.fire(t)}},{key:"defaultSelectionTimeAmount",get:function(){return 6048e5}},{key:"eventsUrl",get:function(){return window.CHARTEVENTS_URL+"events"||"/chartevents/"}}]),e}();e.exports=u}).call(t,i(4))},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 21" width="21" height="21"><path stroke="null" d="M4.81.048C2.598.048.8 1.848.8 4.058c0 .754.225 1.445.59 2.05a10.748 10.748 0 0 1 6.38-4.695C7.033.593 5.992.046 4.81.046v.002zM16.152.046c-1.185 0-2.226.546-2.96 1.368 2.683.7 4.943 2.406 6.377 4.694.36-.605.59-1.294.59-2.05 0-2.208-1.8-4.01-4.01-4.01V.045zm-5.65 2.508c-5.087 0-9.203 4.16-9.203 9.248 0 1.987.61 3.827 1.68 5.33l-1.32 1.685a1.25 1.25 0 1 0 1.96 1.55l1.09-1.41a9.19 9.19 0 0 0 5.79 2.048c2.18 0 4.21-.74 5.78-2.004l1.05 1.37a1.25 1.25 0 1 0 1.953-1.55l-1.276-1.64c1.082-1.51 1.686-3.37 1.686-5.37 0-5.09-4.114-9.25-9.202-9.25zm0 2.368c3.785 0 6.835 3.095 6.835 6.88a6.81 6.81 0 0 1-1.822 4.646 1.24 1.24 0 0 0-.092.092 6.8 6.8 0 0 1-4.92 2.096 6.822 6.822 0 0 1-6.835-6.833c0-3.785 3.05-6.88 6.835-6.88zm-.09 1.185a.948.948 0 0 0-.138.044.948.948 0 0 0-.73.96v4.29l-1.822 1.91a.95.95 0 1 0 1.368 1.32l2.096-2.18.275-.273V7.11a.948.948 0 0 0-1.05-1z"/></svg>'},function(e,t,i){"use strict";function o(e,t,i,o,n){function r(e){return t&&t[e]?t[e]:e}function s(e,t,i,o){var n=r(t[0]);return!!e.hasOwnProperty(n)&&(t.length>1?s(e[n],t.slice(1),i):(e[n]&&e[n].setValue?e[n].setValue(i):e[n]=i,!0))}function a(e){i||_.logWarn("Path `"+e+"` does not exist.")}var l,c,h,u;if(o)for(l in o)c=l.split("."),h=r(c[0]),u=void 0!==n&&n===c[0],0!==c.length&&u&&(c=c.slice(1),h=r(c[0])),0!==c.length&&e.hasOwnProperty(h)?s(e,c,o[l])||a(l):u&&a(l)}function n(e,t,i,n){window.__defaultsOverrides&&o(e,t,i,window.__defaultsOverrides,n)}function r(){var e=/^linetool.+/;Object.keys(TradingView.defaultProperties).forEach(function(t){e.test(t)&&n(TradingView.defaultProperties[t],null,!1,t)})}function s(e,t){return t?l(e,t):a(e)}function a(e){var t,i=m(e);return window._UNIT_TESTS||(t=TradingView.clone(TVSettings.getJSON(e,null)))&&TradingView.merge(i,t),i}function l(e,t){var i,o,n=m(e);return window._UNIT_TESTS||(i=TradingView.clone(TVSettings.getJSON(e,null)),e.startsWith("study_")&&i&&d.isVersionHead(i.version)&&(o=t.updateStudyState(i,i),i=o),TradingView.merge(n,i)),n}var c=i(32),h=i(497).LineToolPitchforkStyle,u=i(485).LineToolBarsPatternMode,d=i(144),p=i(92).PlotType,f=i(91).LineEnd,_=i(0).getLogger("Chart.Defaults"),m=function(e){var t,i,o,s,a,l,d,_,m={a:function(e,t){return{color:e,visible:t}},b:function(e,t,i){return{coeff:e,color:t,visible:i}},c:function(e,t,i,o,n){return{coeff:e,color:t,visible:i,linestyle:void 0===o?CanvasEx.LINESTYLE_SOLID:o,linewidth:void 0===n?1:n}},d:function(e,t,i){return{color:e,width:i,visible:t}},e:function(e,t,i,o,n){return{color:e,visible:t,width:i,x:o,y:n}},f:function(e,t,i,o,n,r){return{coeff1:e,coeff2:t,color:i,visible:o,linestyle:void 0===n?CanvasEx.LINESTYLE_SOLID:n,linewidth:void 0===r?1:r}}};if(void 0===TradingView.defaultProperties){switch(window.locale){case"ar_AE":t="Asia/Dubai";break;case"au":t="Australia/Sydney";break;case"br":t="America/Sao_Paulo";break;case"ca":t="America/Toronto";break;case"de_DE":case"it":t="Europe/Berlin";break;case"es":t="Europe/Madrid";break;case"fa_IR":
t="Asia/Tehran";break;case"fr":case"sv_SE":t="Europe/Paris";break;case"he_IL":case"tr":t="Europe/Athens";break;case"hu_HU":case"pl":t="Europe/Warsaw";break;case"id":case"th_TH":case"vi_VN":t="Asia/Bangkok";break;case"in":t="Asia/Kolkata";break;case"ja":case"kr":t="Asia/Tokyo";break;case"ms_MY":t="Asia/Singapore";break;case"ru":t="Europe/Moscow";break;case"uk":t="Europe/London";break;case"zh_CN":case"zh_TW":t="Asia/Shanghai";break;default:t="Etc/UTC"}TradingView.defaultProperties={chartproperties:{timezone:t,dataWindowProperties:{background:"rgba( 255, 254, 206, 0.2)",border:"rgba( 96, 96, 144, 1)",font:"Verdana",fontBold:!1,fontItalic:!1,fontSize:10,transparency:80,visible:!0},paneProperties:{background:"#ffffff",gridProperties:{color:"#e1ecf2",style:CanvasEx.LINESTYLE_SOLID},vertGridProperties:{color:"#e1ecf2",style:CanvasEx.LINESTYLE_SOLID},horzGridProperties:{color:"#e1ecf2",style:CanvasEx.LINESTYLE_SOLID},crossHairProperties:{color:"rgba( 152, 152, 152, 1)",style:CanvasEx.LINESTYLE_DASHED,transparency:0,width:1},topMargin:5,bottomMargin:5,leftAxisProperties:{autoScale:!0,autoScaleDisabled:!1,lockScale:!1,percentage:!1,percentageDisabled:!1,log:!1,logDisabled:!1,alignLabels:!0},rightAxisProperties:{autoScale:!0,autoScaleDisabled:!1,lockScale:!1,percentage:!1,percentageDisabled:!1,log:!1,logDisabled:!1,alignLabels:!0},legendProperties:{showStudyArguments:!0,showStudyTitles:!0,showStudyValues:!0,showSeriesTitle:!0,showSeriesOHLC:!0,showLegend:!0}},scalesProperties:{showLeftScale:!1,showRightScale:!0,backgroundColor:"#ffffff",lineColor:"#555",textColor:"#555",fontSize:11,scaleSeriesOnly:!1,showSeriesLastValue:!0,showSeriesPrevCloseValue:!1,showStudyLastValue:!1,showSymbolLabels:!1,showStudyPlotLabels:!1},mainSeriesProperties:{style:c.STYLE_CANDLES,esdShowDividends:!0,esdShowSplits:!0,esdShowEarnings:!0,esdShowBreaks:!1,esdBreaksStyle:{color:"rgba( 235, 77, 92, 1)",style:CanvasEx.LINESTYLE_DASHED,width:1},esdFlagSize:2,showCountdown:!0,showInDataWindow:!0,visible:!0,silentIntervalChange:!1,showPriceLine:!0,priceLineWidth:1,priceLineColor:"",showPrevClosePriceLine:!1,prevClosePriceLineWidth:1,prevClosePriceLineColor:"rgba( 85, 85, 85, 1)",minTick:"default",extendedHours:!1,dividendsAdjustment:!1,sessVis:!1,statusViewStyle:{fontSize:17,showExchange:!0,showInterval:!0,showSymbolAsDescription:!1},candleStyle:{upColor:"#53b987",downColor:"#eb4d5c",drawWick:!0,drawBorder:!0,borderColor:"#378658",borderUpColor:"#53b987",borderDownColor:"#eb4d5c",wickColor:"#737375",wickUpColor:"#a9cdd3",wickDownColor:"#f5a6ae",barColorsOnPrevClose:!1},hollowCandleStyle:{upColor:"rgba( 83, 185, 135, 1)",downColor:"rgba( 255, 77, 92, 1)",drawWick:!0,drawBorder:!0,borderColor:"rgba( 55, 134, 88, 1)",borderUpColor:"rgba( 83, 185, 135, 1)",borderDownColor:"rgba( 255, 77, 92, 1)",wickColor:"rgba( 115, 115, 117, 1)",wickUpColor:"rgba( 169, 220, 195, 1)",wickDownColor:"rgba( 245, 166, 174, 1)"},haStyle:{upColor:"rgba( 83, 185, 135, 1)",downColor:"rgba( 255, 77, 92, 1)",drawWick:!0,drawBorder:!0,borderColor:"rgba( 55, 134, 88, 1)",
borderUpColor:"rgba( 83, 185, 135, 1)",borderDownColor:"rgba( 255, 77, 92, 1)",wickColor:"rgba( 115, 115, 117, 1)",wickUpColor:"rgba( 83, 185, 135, 1)",wickDownColor:"rgba( 255, 77, 92, 1)",showRealLastPrice:!1,barColorsOnPrevClose:!1,inputs:{},inputInfo:{}},barStyle:{upColor:"rgba( 83, 185, 135, 1)",downColor:"rgba( 255, 77, 92, 1)",barColorsOnPrevClose:!1,dontDrawOpen:!1},lineStyle:{color:"rgba( 60, 120, 216, 1)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1,priceSource:"close",styleType:c.STYLE_LINE_TYPE_SIMPLE},areaStyle:{color1:"rgba( 96, 96, 144, 0.5)",color2:"rgba( 1, 246, 245, 0.5)",linecolor:"rgba( 0, 148, 255, 1)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1,priceSource:"close",transparency:50},priceAxisProperties:{autoScale:!0,autoScaleDisabled:!1,lockScale:!1,percentage:!1,percentageDisabled:!1,log:!1,logDisabled:!1},renkoStyle:{upColor:"rgba( 83, 185, 135, 1)",downColor:"rgba( 255, 77, 92, 1)",borderUpColor:"rgba( 83, 185, 135, 1)",borderDownColor:"rgba( 255, 77, 92, 1)",upColorProjection:"rgba( 169, 220, 195, 1)",downColorProjection:"rgba( 245, 166, 174, 1)",borderUpColorProjection:"rgba( 169, 220, 195, 1)",borderDownColorProjection:"rgba( 245, 166, 174, 1)",wickUpColor:"rgba( 83, 185, 135, 1)",wickDownColor:"rgba( 255, 77, 92, 1)",inputs:{source:"close",boxSize:3,style:"ATR",atrLength:14,wicks:!0},inputInfo:{source:{name:"Source"},boxSize:{name:"Box size"},style:{name:"Style"},atrLength:{name:"ATR Length"},wicks:{name:"Wicks"}}},pbStyle:{upColor:"rgba( 83, 185, 135, 1)",downColor:"rgba( 255, 77, 92, 1)",borderUpColor:"rgba( 83, 185, 135, 1)",borderDownColor:"rgba( 255, 77, 92, 1)",upColorProjection:"rgba( 169, 220, 195, 1)",downColorProjection:"rgba( 245, 166, 174, 1)",borderUpColorProjection:"rgba( 169, 220, 195, 1)",borderDownColorProjection:"rgba( 245, 166, 174, 1)",inputs:{source:"close",lb:3},inputInfo:{source:{name:"Source"},lb:{name:"Number of line"}}},kagiStyle:{upColor:"rgba( 83, 185, 135, 1)",downColor:"rgba( 255, 77, 92, 1)",upColorProjection:"rgba( 169, 220, 195, 1)",downColorProjection:"rgba( 245, 166, 174, 1)",inputs:{source:"close",style:"ATR",atrLength:14,reversalAmount:1},inputInfo:{source:{name:"Source"},style:{name:"Style"},atrLength:{name:"ATR Length"},reversalAmount:{name:"Reversal amount"}}},pnfStyle:{upColor:"rgba( 83, 185, 135, 1)",downColor:"rgba( 255, 77, 92, 1)",upColorProjection:"rgba( 169, 220, 195, 1)",downColorProjection:"rgba( 245, 166, 174, 1)",inputs:{sources:"Close",reversalAmount:3,boxSize:1,style:"ATR",atrLength:14},inputInfo:{sources:{name:"Source"},boxSize:{name:"Box size"},reversalAmount:{name:"Reversal amount"},style:{name:"Style"},atrLength:{name:"ATR Length"}}},baselineStyle:{baselineColor:"rgba( 117, 134, 150, 1)",topFillColor1:"rgba( 83, 185, 135, 0.1)",topFillColor2:"rgba( 83, 185, 135, 0.1)",bottomFillColor1:"rgba( 235, 77, 92, 0.1)",bottomFillColor2:"rgba( 235, 77, 92, 0.1)",topLineColor:"rgba( 83, 185, 135, 1)",bottomLineColor:"rgba( 235, 77, 92, 1)",topLineWidth:1,bottomLineWidth:1,priceSource:"close",transparency:50,baseLevelPercentage:50}},
symbolWatermarkProperties:{color:"rgba( 85, 85, 85, 0)",transparency:100},chartEventsSourceProperties:{visible:!0,futureOnly:!0,breaks:{color:"rgba(85, 85, 85, 1)",visible:!1,style:CanvasEx.LINESTYLE_DASHED,width:1}},tradingProperties:{showPositions:!0,showOrders:!0,showExecutions:!0,extendLeft:!0,lineLength:5,lineWidth:1,lineStyle:CanvasEx.LINESTYLE_DASHED},alertsProperties:{labels:{visible:!0,color:"rgba( 215, 84, 66, 1)",highlightColor:"rgba( 255, 255, 51, 1)",hoverColor:"rgba( 245, 227, 135, 1)",line:{visible:!0,style:CanvasEx.LINESTYLE_DASHED,width:1}},fakeLabels:{visible:!0,color:"rgba( 119, 119, 119, 1)",line:{visible:!0,style:CanvasEx.LINESTYLE_DASHED,width:1}},drawingIcon:{color:"rgba( 170, 170, 170, 1)"}},editorFontsList:["Verdana","Courier New","Times New Roman","Arial"],volumePaneSize:"large"},drawings:{magnet:!1,stayInDrawingMode:!1,drawOnAllCharts:!0,crossHairColor:"rgba( 183, 183, 183, 1)",crossHairStyle:CanvasEx.LINESTYLE_DASHED,crossHairWidth:1},linetoolorder:{singleChartOnly:!0,extendLeft:"inherit",lineLength:"inherit",lineColor:"rgba( 255, 0, 0, 1)",lineTransparency:0,lineStyle:"inherit",lineWidth:"inherit",bodyBorderColor:"rgba( 255, 0, 0, 0)",bodyBorderTransparency:0,bodyBackgroundColor:"rgba( 255, 255, 255, 0.75)",bodyBackgroundTransparency:25,bodyTextColor:"rgba( 255, 0, 0, 0)",bodyTextTransparency:0,bodyFontFamily:"Verdana",bodyFontSize:7,bodyFontBold:!0,bodyFontItalic:!1,quantityBorderColor:"rgba( 255, 0, 0, 0)",quantityBorderTransparency:0,quantityBackgroundColor:"rgba( 255, 0, 0, 0.75)",quantityBackgroundTransparency:25,quantityTextColor:"rgba( 255, 255, 255, 1)",quantityTextTransparency:0,quantityFontFamily:"Verdana",quantityFontSize:7,quantityFontBold:!0,quantityFontItalic:!1,cancelButtonBorderColor:"rgba( 255, 0, 0, 1)",cancelButtonBorderTransparency:0,cancelButtonBackgroundColor:"rgba( 255, 255, 255, 0.75)",cancelButtonBackgroundTransparency:25,cancelButtonIconColor:"rgba( 255, 0, 0, 1)",cancelButtonIconTransparency:0,tooltip:""},linetoolposition:{singleChartOnly:!0,extendLeft:"inherit",lineLength:"inherit",lineColor:"rgba( 0, 113, 224, 1)",lineTransparency:0,lineStyle:"inherit",lineWidth:"inherit",bodyBorderColor:"rgba( 0, 113, 224, 1)",bodyBorderTransparency:0,bodyBackgroundColor:"rgba( 255, 255, 255, 0.75)",bodyBackgroundTransparency:25,bodyTextColor:"rgba( 0, 113, 224, 1)",bodyTextTransparency:0,bodyFontFamily:"Verdana",bodyFontSize:7,bodyFontBold:!0,bodyFontItalic:!1,quantityBorderColor:"rgba( 0, 113, 224, 1)",quantityBorderTransparency:0,quantityBackgroundColor:"rgba( 0, 113, 224, 0.75)",quantityBackgroundTransparency:25,quantityTextColor:"rgba( 255, 255, 255, 1)",quantityTextTransparency:0,quantityFontFamily:"Verdana",quantityFontSize:7,quantityFontBold:!0,quantityFontItalic:!1,reverseButtonBorderColor:"rgba( 0, 113, 224, 1)",reverseButtonBorderTransparency:0,reverseButtonBackgroundColor:"rgba( 255, 255, 255, 0.75)",reverseButtonBackgroundTransparency:25,reverseButtonIconColor:"rgba( 0, 113, 224, 1)",reverseButtonIconTransparency:0,closeButtonBorderColor:"rgba( 0, 113, 224, 1)",
closeButtonBorderTransparency:0,closeButtonBackgroundColor:"rgba( 255, 255, 255, 0.75)",closeButtonBackgroundTransparency:25,closeButtonIconColor:"rgba( 0, 113, 224, 1)",closeButtonIconTransparency:0,tooltip:""},linetoolexecution:{singleChartOnly:!0,direction:"buy",arrowHeight:8,arrowSpacing:1,arrowColor:"rgba( 0, 0, 255, 1)",arrowTransparency:0,text:"",textColor:"rgba( 0, 0, 0, 1)",textTransparency:0,fontFamily:"Verdana",fontSize:8,fontBold:!1,fontItalic:!1,tooltip:""},linetoolicon:{singleChartOnly:!0,clonable:!0,color:"rgba( 61, 133, 198, 1)",size:40,icon:61536,angle:.5*Math.PI,scale:1},linetoolbezierquadro:{clonable:!0,linecolor:"rgba( 21, 153, 128, 1)",linewidth:1,fillBackground:!1,backgroundColor:"rgba( 21, 56, 153, 0.5)",transparency:50,linestyle:CanvasEx.LINESTYLE_SOLID,extendLeft:!1,extendRight:!1,leftEnd:f.Normal,rightEnd:f.Normal},linetoolbeziercubic:{clonable:!0,linecolor:"rgba( 21, 153, 128, 1)",linewidth:1,fillBackground:!1,backgroundColor:"rgba( 21, 56, 153, 0.5)",transparency:50,linestyle:CanvasEx.LINESTYLE_SOLID,extendLeft:!1,extendRight:!1,leftEnd:f.Normal,rightEnd:f.Normal},linetooltrendline:{clonable:!0,linecolor:"rgba( 21, 153, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,extendLeft:!1,extendRight:!1,leftEnd:f.Normal,rightEnd:f.Normal,font:"Verdana",textcolor:"rgba( 21, 119, 96, 1)",fontsize:12,bold:!1,italic:!1,snapTo45Degrees:!0,alwaysShowStats:!1,showMiddlePoint:!1,showPriceRange:!1,showBarsRange:!1,showDateTimeRange:!1,showDistance:!1,showAngle:!1},linetooltimecycles:{clonable:!0,linecolor:"rgba(21, 153, 128, 1)",linewidth:1,fillBackground:!0,backgroundColor:"rgba(106, 168, 79, 0.5)",transparency:50,linestyle:CanvasEx.LINESTYLE_SOLID},linetoolsineline:{clonable:!0,linecolor:"rgba( 21, 153, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},linetooltrendangle:{singleChartOnly:!0,clonable:!0,linecolor:"rgba( 21, 153, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,snapTo45Degrees:!0,font:"Verdana",textcolor:"rgba( 21, 119, 96, 1)",fontsize:12,bold:!0,italic:!1,alwaysShowStats:!1,showMiddlePoint:!1,showPriceRange:!1,showBarsRange:!1,extendRight:!1,extendLeft:!1},linetooldisjointangle:{clonable:!0,linecolor:"rgba( 18, 159, 92, 1)",linewidth:2,linestyle:CanvasEx.LINESTYLE_SOLID,fillBackground:!0,backgroundColor:"rgba( 106, 168, 79, 0.5)",transparency:50,extendLeft:!1,extendRight:!1,leftEnd:f.Normal,rightEnd:f.Normal,font:"Verdana",textcolor:"rgba( 18, 159, 92, 1)",fontsize:12,bold:!1,italic:!1,showPrices:!1,showPriceRange:!1,showDateTimeRange:!1,showBarsRange:!1},linetoolflatbottom:{clonable:!0,linecolor:"rgba( 73, 133, 231, 1)",linewidth:2,linestyle:CanvasEx.LINESTYLE_SOLID,fillBackground:!0,backgroundColor:"rgba( 21, 56, 153, 0.5)",transparency:50,extendLeft:!1,extendRight:!1,leftEnd:f.Normal,rightEnd:f.Normal,font:"Verdana",textcolor:"rgba( 73, 133, 231, 1)",fontsize:12,bold:!1,italic:!1,showPrices:!1,showPriceRange:!1,showDateTimeRange:!1,showBarsRange:!1},linetoolfibspiral:{clonable:!0,linecolor:"rgba( 21, 153, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},
linetooldaterange:{clonable:!0,linecolor:"rgba( 88, 88, 88, 1)",linewidth:1,font:"Verdana",textcolor:"rgba( 255, 255, 255, 1)",fontsize:12,fillLabelBackground:!0,labelBackgroundColor:"rgba( 91, 133, 191, 0.9)",labelBackgroundTransparency:30,fillBackground:!0,backgroundColor:"rgba( 186, 218, 255, 0.4)",backgroundTransparency:60,drawBorder:!1,borderColor:"rgba( 102, 123, 139, 1)",extendTop:!1,extendBottom:!1},linetoolpricerange:{clonable:!0,linecolor:"rgba( 88, 88, 88, 1)",linewidth:1,font:"Verdana",textcolor:"rgba( 255, 255, 255, 1)",fontsize:12,fillLabelBackground:!0,labelBackgroundColor:"rgba( 91, 133, 191, 0.9)",labelBackgroundTransparency:30,fillBackground:!0,backgroundColor:"rgba( 186, 218, 255, 0.4)",backgroundTransparency:60,drawBorder:!1,borderColor:"rgba( 102, 123, 139, 1)",extendLeft:!1,extendRight:!1},linetooldateandpricerange:{clonable:!0,linecolor:"rgba( 88, 88, 88, 1)",linewidth:1,font:"Verdana",textcolor:"rgba( 255, 255, 255, 1)",fontsize:12,fillLabelBackground:!0,labelBackgroundColor:"rgba( 91, 133, 191, 0.9)",labelBackgroundTransparency:30,fillBackground:!0,backgroundColor:"rgba( 186, 218, 255, 0.4)",backgroundTransparency:60,drawBorder:!1,borderColor:"rgba( 102, 123, 139, 1)"},linetoolriskrewardshort:{isShort:!0,clonable:!0,linecolor:"rgba( 88, 88, 88, 1)",linewidth:1,font:"Verdana",textcolor:"rgba(255, 255, 255, 1)",fontsize:12,fillLabelBackground:!0,labelBackgroundColor:"rgba( 88, 88, 88, 1)",labelBackgroundTransparency:0,fillBackground:!0,stopBackground:"rgba( 255, 0, 0, 0.2)",profitBackground:"rgba( 0, 160, 0, 0.2)",stopBackgroundTransparency:80,profitBackgroundTransparency:80,drawBorder:!1,borderColor:"rgba( 102, 123, 139, 1)",compact:!1,riskDisplayMode:"percents",accountSize:1e3,risk:25},linetoolriskrewardlong:{isShort:!1,clonable:!0,linecolor:"rgba( 88, 88, 88, 1)",linewidth:1,font:"Verdana",textcolor:"rgba(255, 255, 255, 1)",fontsize:12,fillLabelBackground:!0,labelBackgroundColor:"rgba( 88, 88, 88, 1)",labelBackgroundTransparency:0,fillBackground:!0,stopBackground:"rgba( 255, 0, 0, 0.2)",profitBackground:"rgba( 0, 160, 0, 0.2)",stopBackgroundTransparency:80,profitBackgroundTransparency:80,drawBorder:!1,borderColor:"rgba( 102, 123, 139, 1)",compact:!1,riskDisplayMode:"percents",accountSize:1e3,risk:25},linetoolarrow:{clonable:!0,linecolor:"rgba( 111, 136, 198, 1)",linewidth:2,linestyle:CanvasEx.LINESTYLE_SOLID,extendLeft:!1,extendRight:!1,leftEnd:f.Normal,rightEnd:f.Arrow,font:"Verdana",textcolor:"rgba( 21, 119, 96, 1)",fontsize:12,bold:!1,italic:!1,alwaysShowStats:!1,showMiddlePoint:!1,showPriceRange:!1,showBarsRange:!1,showDateTimeRange:!1,showDistance:!1,showAngle:!1},linetoolray:{clonable:!0,linecolor:"rgba( 21, 153, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,extendLeft:!1,extendRight:!0,leftEnd:f.Normal,rightEnd:f.Normal,font:"Verdana",textcolor:"rgba( 21, 119, 96, 1)",fontsize:12,bold:!1,italic:!1,alwaysShowStats:!1,showMiddlePoint:!1,showPriceRange:!1,showBarsRange:!1,showDateTimeRange:!1,showDistance:!1,showAngle:!1},linetoolextended:{clonable:!0,
linecolor:"rgba( 21, 153, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,extendLeft:!0,extendRight:!0,leftEnd:f.Normal,rightEnd:f.Normal,font:"Verdana",textcolor:"rgba( 21, 119, 96, 1)",fontsize:12,bold:!1,italic:!1,alwaysShowStats:!1,showMiddlePoint:!1,showPriceRange:!1,showBarsRange:!1,showDateTimeRange:!1,showDistance:!1,showAngle:!1},linetoolhorzline:{clonable:!0,linecolor:"rgba( 128, 204, 219, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,showPrice:!0,showLabel:!1,text:"",font:"Verdana",textcolor:"rgba( 21, 119, 96, 1)",fontsize:12,bold:!1,italic:!1,horzLabelsAlign:"center",vertLabelsAlign:"top"},linetoolhorzray:{clonable:!0,linecolor:"rgba( 128, 204, 219, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,showPrice:!0,showLabel:!1,text:"",font:"Verdana",textcolor:"rgba( 21, 119, 96, 1)",fontsize:12,bold:!1,italic:!1,horzLabelsAlign:"center",vertLabelsAlign:"top"},linetoolvertline:{clonable:!0,linecolor:"rgba( 128, 204, 219, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,showTime:!0},linetoolcirclelines:{clonable:!0,trendline:{visible:!0,color:"rgba( 128, 128, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_DASHED},linecolor:"rgba( 128, 204, 219, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},linetoolfibtimezone:{horzLabelsAlign:"right",vertLabelsAlign:"bottom",clonable:!0,baselinecolor:"rgba( 128, 128, 128, 1)",linecolor:"rgba( 0, 85, 219, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,showLabels:!0,font:"Verdana",fillBackground:!1,transparency:80,trendline:{visible:!0,color:"rgba( 128, 128, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_DASHED},level1:m.c(0,"rgba( 128, 128, 128, 1)",!0),level2:m.c(1,"rgba( 0, 85, 219, 1)",!0),level3:m.c(2,"rgba( 0, 85, 219, 1)",!0),level4:m.c(3,"rgba( 0, 85, 219, 1)",!0),level5:m.c(5,"rgba( 0, 85, 219, 1)",!0),level6:m.c(8,"rgba( 0, 85, 219, 1)",!0),level7:m.c(13,"rgba( 0, 85, 219, 1)",!0),level8:m.c(21,"rgba( 0, 85, 219, 1)",!0),level9:m.c(34,"rgba( 0, 85, 219, 1)",!0),level10:m.c(55,"rgba( 0, 85, 219, 1)",!0),level11:m.c(89,"rgba( 0, 85, 219, 1)",!0),__collectibleLines:["trendline","level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11"]},linetooltext:{clonable:!0,color:"rgba( 102, 123, 139, 1)",text:$.t("Text"),font:"Verdana",fontsize:20,fillBackground:!1,backgroundColor:"rgba( 91, 133, 191, 0.9)",backgroundTransparency:70,drawBorder:!1,borderColor:"rgba( 102, 123, 139, 1)",bold:!1,italic:!1,locked:!1,fixedSize:!0,wordWrap:!1,wordWrapWidth:400},linetooltextabsolute:{singleChartOnly:!0,clonable:!0,color:"rgba( 102, 123, 139, 1)",text:$.t("Text"),font:"Verdana",fontsize:20,fillBackground:!1,backgroundColor:"rgba( 155, 190, 213, 0.3)",backgroundTransparency:70,drawBorder:!1,borderColor:"rgba( 102, 123, 139, 1)",bold:!1,italic:!1,locked:!0,wordWrap:!1,wordWrapWidth:400},linetoolballoon:{clonable:!0,color:"rgba( 102, 123, 139, 1)",backgroundColor:"rgba( 255, 254, 206, 0.7)",borderColor:"rgba( 140, 140, 140, 1)",fontWeight:"bold",fontsize:12,font:"Arial",transparency:30,text:$.t("Comment")},
linetoolbrush:{clonable:!0,linecolor:"rgba( 53, 53, 53, 1)",linewidth:2,linestyle:CanvasEx.LINESTYLE_SOLID,smooth:5,fillBackground:!1,backgroundColor:"rgba( 21, 56, 153, 0.5)",transparency:50,leftEnd:f.Normal,rightEnd:f.Normal},linetoolpolyline:{clonable:!0,linecolor:"rgba( 53, 53, 53, 1)",linewidth:2,linestyle:CanvasEx.LINESTYLE_SOLID,fillBackground:!0,backgroundColor:"rgba( 21, 56, 153, 0.5)",transparency:50,filled:!1},linetoolarrowmark:{clonable:!0,color:"rgba( 120, 120, 120, 1)",text:"",fontsize:20,font:"Verdana"},linetoolarrowmarkleft:{clonable:!0,color:"rgba( 120, 120, 120, 1)",text:"",fontsize:20,font:"Verdana"},linetoolarrowmarkup:{clonable:!0,color:"rgba( 120, 120, 120, 1)",text:"",fontsize:20,font:"Verdana"},linetoolarrowmarkright:{clonable:!0,color:"rgba( 120, 120, 120, 1)",text:"",fontsize:20,font:"Verdana"},linetoolarrowmarkdown:{clonable:!0,color:"rgba( 120, 120, 120, 1)",text:"",fontsize:20,font:"Verdana"},linetoolflagmark:{clonable:!0,color:"rgba( 255, 0, 0, 1)"},linetoolnote:{clonable:!0,markerColor:"rgba( 46, 102, 255, 1)",textColor:"rgba( 0, 0, 0, 1)",backgroundColor:"rgba( 255, 255, 255, 1)",backgroundTransparency:0,text:$.t("Text"),font:"Arial",fontSize:12,bold:!1,italic:!1,locked:!1,fixedSize:!0},linetoolnoteabsolute:{singleChartOnly:!0,clonable:!0,markerColor:"rgba( 46, 102, 255, 1)",textColor:"rgba( 0, 0, 0, 1)",backgroundColor:"rgba( 255, 255, 255, 1)",backgroundTransparency:0,text:$.t("Text"),font:"Arial",fontSize:12,bold:!1,italic:!1,locked:!0,fixedSize:!0},linetoolthumbup:{clonable:!0,color:"rgba( 0, 128, 0, 1)"},linetoolthumbdown:{clonable:!0,color:"rgba( 255, 0, 0, 1)"},linetoolpricelabel:{clonable:!0,color:"rgba( 102, 123, 139, 1)",backgroundColor:"rgba( 255, 255, 255, 0.7)",borderColor:"rgba( 140, 140, 140, 1)",fontWeight:"bold",fontsize:11,font:"Arial",transparency:30},linetoolrectangle:{clonable:!0,color:"rgba( 21, 56, 153, 1)",fillBackground:!0,backgroundColor:"rgba( 21, 56, 153, 0.5)",linewidth:1,snapTo45Degrees:!0,transparency:50},linetoolrotatedrectangle:{clonable:!0,color:"rgba( 152, 0, 255, 1)",fillBackground:!0,backgroundColor:"rgba( 142, 124, 195, 0.5)",transparency:50,linewidth:1,snapTo45Degrees:!0},linetoolellipse:{clonable:!0,color:"rgba( 153, 153, 21, 1)",fillBackground:!0,backgroundColor:"rgba( 153, 153, 21, 0.5)",transparency:50,linewidth:1},linetoolarc:{clonable:!0,color:"rgba( 153, 153, 21, 1)",fillBackground:!0,backgroundColor:"rgba( 153, 153, 21, 0.5)",transparency:50,linewidth:1},linetoolprediction:{singleChartOnly:!0,linecolor:"rgba( 28, 115, 219, 1)",linewidth:2,sourceBackColor:"rgba( 241, 241, 241, 1)",sourceTextColor:"rgba( 110, 110, 110, 1)",sourceStrokeColor:"rgba( 110, 110, 110, 1)",targetStrokeColor:"rgba( 47, 168, 255, 1)",targetBackColor:"rgba( 11, 111, 222, 1)",targetTextColor:"rgba( 255, 255, 255, 1)",successBackground:"rgba( 54, 160, 42, 0.9)",successTextColor:"rgba( 255, 255, 255, 1)",failureBackground:"rgba( 231, 69, 69, 0.5)",failureTextColor:"rgba( 255, 255, 255, 1)",intermediateBackColor:"rgba( 234, 210, 137, 1)",
intermediateTextColor:"rgba( 109, 77, 34, 1)",transparency:10,centersColor:"rgba( 32, 32, 32, 1)"},linetooltriangle:{clonable:!0,color:"rgba( 153, 21, 21, 1)",fillBackground:!0,backgroundColor:"rgba( 153, 21, 21, 0.5)",transparency:50,linewidth:1},linetoolcallout:{clonable:!0,color:"rgba( 255, 255, 255, 1)",backgroundColor:"rgba( 153, 21, 21, 0.5)",transparency:50,linewidth:2,fontsize:12,font:"Verdana",text:$.t("Text"),bordercolor:"rgba( 153, 21, 21, 1)",bold:!1,italic:!1,wordWrap:!1,wordWrapWidth:400},linetoolparallelchannel:{clonable:!0,linecolor:"rgba( 119, 52, 153, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,extendLeft:!1,extendRight:!1,fillBackground:!0,backgroundColor:"rgba( 180, 167, 214, 0.5)",transparency:50,showMidline:!1,midlinecolor:"rgba( 119, 52, 153, 1)",midlinewidth:1,midlinestyle:CanvasEx.LINESTYLE_DASHED},linetoolelliottimpulse:{degree:7,clonable:!0,showWave:!0,color:"rgba( 61, 133, 198, 1)",linewidth:1},linetoolelliotttriangle:{degree:7,clonable:!0,showWave:!0,color:"rgba( 255, 152, 0, 1)",linewidth:1},linetoolelliotttriplecombo:{degree:7,clonable:!0,showWave:!0,color:"rgba( 106, 168, 79, 1)",linewidth:1},linetoolelliottcorrection:{degree:7,clonable:!0,showWave:!0,color:"rgba( 61, 133, 198, 1)",linewidth:1},linetoolelliottdoublecombo:{degree:7,clonable:!0,showWave:!0,color:"rgba( 106, 168, 79, 1)",linewidth:1},linetoolbarspattern:{singleChartOnly:!0,color:"rgba( 80, 145, 204, 1)",clonable:!0,mode:u.Bars,mirrored:!1,flipped:!1},linetoolghostfeed:{singleChartOnly:!0,clonable:!0,averageHL:20,variance:50,candleStyle:{upColor:"#6ba583",downColor:"#d75442",drawWick:!0,drawBorder:!0,borderColor:"#378658",borderUpColor:"#225437",borderDownColor:"#5b1a13",wickColor:"#737375"},transparency:50},study:{inputs:{},styles:{},palettes:{},bands:{},area:{},graphics:{},showInDataWindow:!0,visible:!0,showStudyArguments:!0,precision:"default"},linetoolpitchfork:{clonable:!0,fillBackground:!0,transparency:80,style:h.Original,median:{visible:!0,color:"rgba( 165, 0, 0, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},level0:m.c(.25,"rgba( 160, 107, 0, 1)",!1),level1:m.c(.382,"rgba( 105, 158, 0, 1)",!1),level2:m.c(.5,"rgba( 0, 155, 0, 1)",!0),level3:m.c(.618,"rgba( 0, 153, 101, 1)",!1),level4:m.c(.75,"rgba( 0, 101, 153, 1)",!1),level5:m.c(1,"rgba( 0, 0, 153, 1)",!0),level6:m.c(1.5,"rgba( 102, 0, 153, 1)",!1),level7:m.c(1.75,"rgba( 153, 0, 102, 1)",!1),level8:m.c(2,"rgba( 165, 0, 0, 1)",!1),__collectibleLines:["median","level0","level1","level2","level3","level4","level5","level6","level7","level8"]},linetoolpitchfan:{clonable:!0,fillBackground:!0,transparency:80,median:{visible:!0,color:"rgba( 165, 0, 0, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},level0:m.c(.25,"rgba( 160, 107, 0, 1)",!1),level1:m.c(.382,"rgba( 105, 158, 0, 1)",!1),level2:m.c(.5,"rgba( 0, 155, 0, 1)",!0),level3:m.c(.618,"rgba( 0, 153, 101, 1)",!1),level4:m.c(.75,"rgba( 0, 101, 153, 1)",!1),level5:m.c(1,"rgba( 0, 0, 153, 1)",!0),level6:m.c(1.5,"rgba( 102, 0, 153, 1)",!1),level7:m.c(1.75,"rgba( 153, 0, 102, 1)",!1),
level8:m.c(2,"rgba( 165, 0, 0, 1)",!1),__collectibleLines:["median","level0","level1","level2","level3","level4","level5","level6","level7","level8"]},linetoolgannfan:{clonable:!0,showLabels:!0,font:"Verdana",fillBackground:!0,transparency:80,level1:m.f(1,8,"rgba( 160, 107, 0, 1)",!0),level2:m.f(1,4,"rgba( 105, 158, 0, 1)",!0),level3:m.f(1,3,"rgba( 0, 155, 0, 1)",!0),level4:m.f(1,2,"rgba( 0, 153, 101, 1)",!0),level5:m.f(1,1,"rgba( 128, 128, 128, 1)",!0),level6:m.f(2,1,"rgba( 0, 101, 153, 1)",!0),level7:m.f(3,1,"rgba( 0, 0, 153, 1)",!0),level8:m.f(4,1,"rgba( 102, 0, 153, 1)",!0),level9:m.f(8,1,"rgba( 165, 0, 0, 1)",!0),__collectibleLines:["level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11"]},linetoolganncomplex:{clonable:!0,fillBackground:!1,arcsBackground:{fillBackground:!0,transparency:80},reverse:!1,scaleRatio:"",showLabels:!0,labelsStyle:{font:"Verdana",fontSize:12,bold:!1,italic:!1},levels:[m.d("rgba( 128, 128, 128, 1)",!0,1),m.d("rgba( 160, 107, 0, 1)",!0,1),m.d("rgba( 105, 158, 0, 1)",!0,1),m.d("rgba( 0, 155, 0, 1)",!0,1),m.d("rgba( 0, 153, 101, 1)",!0,1),m.d("rgba( 128, 128, 128, 1)",!0,1)],fanlines:[m.e("rgba( 165, 0, 255, 1)",!1,1,8,1),m.e("rgba( 165, 0, 0, 1)",!1,1,5,1),m.e("rgba( 128, 128, 128, 1)",!1,1,4,1),m.e("rgba( 160, 107, 0, 1)",!1,1,3,1),m.e("rgba( 105, 158, 0, 1)",!0,1,2,1),m.e("rgba( 0, 155, 0, 1)",!0,1,1,1),m.e("rgba( 0, 153, 101, 1)",!0,1,1,2),m.e("rgba( 0, 153, 101, 1)",!1,1,1,3),m.e("rgba( 0, 0, 153, 1)",!1,1,1,4),m.e("rgba( 102, 0, 153, 1)",!1,1,1,5),m.e("rgba( 165, 0, 255, 1)",!1,1,1,8)],arcs:[m.e("rgba( 160, 107, 0, 1)",!0,1,1,0),m.e("rgba( 160, 107, 0, 1)",!0,1,1,1),m.e("rgba( 160, 107, 0, 1)",!0,1,1.5,0),m.e("rgba( 105, 158, 0, 1)",!0,1,2,0),m.e("rgba( 105, 158, 0, 1)",!0,1,2,1),m.e("rgba( 0, 155, 0, 1)",!0,1,3,0),m.e("rgba( 0, 155, 0, 1)",!0,1,3,1),m.e("rgba( 0, 153, 101, 1)",!0,1,4,0),m.e("rgba( 0, 153, 101, 1)",!0,1,4,1),m.e("rgba( 0, 0, 153, 1)",!0,1,5,0),m.e("rgba( 0, 0, 153, 1)",!0,1,5,1)],__collectibleLines:["trendline","levels.0","levels.1","levels.2","levels.3","levels.4","levels.5","fanlines.0","fanlines.1","fanlines.2","fanlines.3","fanlines.4","fanlines.5","fanlines.6","fanlines.7","fanlines.8","fanlines.9","fanlines.10","arcs.0","arcs.1","arcs.2","arcs.3","arcs.4","arcs.5","arcs.6","arcs.7","arcs.8","arcs.9","arcs.10"]},linetoolgannfixed:{clonable:!0,fillBackground:!1,arcsBackground:{fillBackground:!0,transparency:80},reverse:!1,levels:[m.d("rgba( 128, 128, 128, 1)",!0,1),m.d("rgba( 160, 107, 0, 1)",!0,1),m.d("rgba( 105, 158, 0, 1)",!0,1),m.d("rgba( 0, 155, 0, 1)",!0,1),m.d("rgba( 0, 153, 101, 1)",!0,1),m.d("rgba( 128, 128, 128, 1)",!0,1)],
fanlines:[m.e("rgba( 165, 0, 255, 1)",!1,1,8,1),m.e("rgba( 165, 0, 0, 1)",!1,1,5,1),m.e("rgba( 128, 128, 128, 1)",!1,1,4,1),m.e("rgba( 160, 107, 0, 1)",!1,1,3,1),m.e("rgba( 105, 158, 0, 1)",!0,1,2,1),m.e("rgba( 0, 155, 0, 1)",!0,1,1,1),m.e("rgba( 0, 153, 101, 1)",!0,1,1,2),m.e("rgba( 0, 153, 101, 1)",!1,1,1,3),m.e("rgba( 0, 0, 153, 1)",!1,1,1,4),m.e("rgba( 102, 0, 153, 1)",!1,1,1,5),m.e("rgba( 165, 0, 255, 1)",!1,1,1,8)],arcs:[m.e("rgba( 160, 107, 0, 1)",!0,1,1,0),m.e("rgba( 160, 107, 0, 1)",!0,1,1,1),m.e("rgba( 160, 107, 0, 1)",!0,1,1.5,0),m.e("rgba( 105, 158, 0, 1)",!0,1,2,0),m.e("rgba( 105, 158, 0, 1)",!0,1,2,1),m.e("rgba( 0, 155, 0, 1)",!0,1,3,0),m.e("rgba( 0, 155, 0, 1)",!0,1,3,1),m.e("rgba( 0, 153, 101, 1)",!0,1,4,0),m.e("rgba( 0, 153, 101, 1)",!0,1,4,1),m.e("rgba( 0, 0, 153, 1)",!0,1,5,0),m.e("rgba( 0, 0, 153, 1)",!0,1,5,1)],__collectibleLines:["trendline","levels.0","levels.1","levels.2","levels.3","levels.4","levels.5","fanlines.0","fanlines.1","fanlines.2","fanlines.3","fanlines.4","fanlines.5","fanlines.6","fanlines.7","fanlines.8","fanlines.9","fanlines.10","arcs.0","arcs.1","arcs.2","arcs.3","arcs.4","arcs.5","arcs.6","arcs.7","arcs.8","arcs.9","arcs.10"]},linetoolgannsquare:{clonable:!0,color:"rgba( 21, 56, 153, 0.8)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,font:"Verdana",showTopLabels:!0,showBottomLabels:!0,showLeftLabels:!0,showRightLabels:!0,fillHorzBackground:!0,horzTransparency:80,fillVertBackground:!0,vertTransparency:80,reverse:!1,fans:m.a("rgba( 128, 128, 128, 1)",!1),hlevel1:m.b(0,"rgba( 128, 128, 128, 1)",!0),hlevel2:m.b(.25,"rgba( 160, 107, 0, 1)",!0),hlevel3:m.b(.382,"rgba( 105, 158, 0, 1)",!0),hlevel4:m.b(.5,"rgba( 0, 155, 0, 1)",!0),hlevel5:m.b(.618,"rgba( 0, 153, 101, 1)",!0),hlevel6:m.b(.75,"rgba( 0, 101, 153, 1)",!0),hlevel7:m.b(1,"rgba( 128, 128, 128, 1)",!0),vlevel1:m.b(0,"rgba( 128, 128, 128, 1)",!0),vlevel2:m.b(.25,"rgba( 160, 107, 0, 1)",!0),vlevel3:m.b(.382,"rgba( 105, 158, 0, 1)",!0),vlevel4:m.b(.5,"rgba( 0, 155, 0, 1)",!0),vlevel5:m.b(.618,"rgba( 0, 153, 101, 1)",!0),vlevel6:m.b(.75,"rgba( 0, 101, 153, 1)",!0),vlevel7:m.b(1,"rgba( 128, 128, 128, 1)",!0),__collectibleLines:["fans","hlevel1","hlevel2","hlevel3","hlevel4","hlevel5","hlevel6","hlevel7","vlevel1","vlevel2","vlevel3","vlevel4","vlevel5","vlevel6","vlevel7"]},linetoolfibspeedresistancefan:{clonable:!0,fillBackground:!0,transparency:80,grid:{color:"rgba( 128, 128, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,visible:!0},linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,font:"Verdana",showTopLabels:!0,showBottomLabels:!0,showLeftLabels:!0,showRightLabels:!0,snapTo45Degrees:!0,hlevel1:m.b(0,"rgba( 128, 128, 128, 1)",!0),hlevel2:m.b(.25,"rgba( 160, 107, 0, 1)",!0),hlevel3:m.b(.382,"rgba( 105, 158, 0, 1)",!0),hlevel4:m.b(.5,"rgba( 0, 155, 0, 1)",!0),hlevel5:m.b(.618,"rgba( 0, 153, 101, 1)",!0),hlevel6:m.b(.75,"rgba( 0, 101, 153, 1)",!0),hlevel7:m.b(1,"rgba( 128, 128, 128, 1)",!0),vlevel1:m.b(0,"rgba( 128, 128, 128, 1)",!0),vlevel2:m.b(.25,"rgba( 160, 107, 0, 1)",!0),
vlevel3:m.b(.382,"rgba( 105, 158, 0, 1)",!0),vlevel4:m.b(.5,"rgba( 0, 155, 0, 1)",!0),vlevel5:m.b(.618,"rgba( 0, 153, 101, 1)",!0),vlevel6:m.b(.75,"rgba( 0, 101, 153, 1)",!0),vlevel7:m.b(1,"rgba( 128, 128, 128, 1)",!0),__collectibleLines:["trendline","hlevel1","hlevel2","hlevel3","hlevel4","hlevel5","hlevel6","hlevel7","vlevel1","vlevel2","vlevel3","vlevel4","vlevel5","vlevel6","vlevel7"]},linetoolfibretracement:{clonable:!0,showCoeffs:!0,showPrices:!0,font:"Verdana",fillBackground:!0,transparency:80,extendLines:!1,horzLabelsAlign:"left",vertLabelsAlign:"middle",reverse:!1,coeffsAsPercents:!1,trendline:{visible:!0,color:"rgba( 128, 128, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_DASHED},levelsStyle:{linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},level1:m.b(0,"rgba( 128, 128, 128, 1)",!0),level2:m.b(.236,"rgba( 204, 40, 40, 1)",!0),level3:m.b(.382,"rgba( 149, 204, 40, 1)",!0),level4:m.b(.5,"rgba( 40, 204, 40, 1)",!0),level5:m.b(.618,"rgba( 40, 204, 149, 1)",!0),level6:m.b(.786,"rgba( 40, 149, 204, 1)",!0),level7:m.b(1,"rgba( 128, 128, 128, 1)",!0),level8:m.b(1.618,"rgba( 40, 40, 204, 1)",!0),level9:m.b(2.618,"rgba( 204, 40, 40, 1)",!0),level10:m.b(3.618,"rgba( 149, 40, 204, 1)",!0),level11:m.b(4.236,"rgba( 204, 40, 149, 1)",!0),level12:m.b(1.272,"rgba( 149, 204, 40, 1)",!1),level13:m.b(1.414,"rgba( 204, 40, 40, 1)",!1),level16:m.b(2,"rgba( 40, 204, 149, 1)",!1),level14:m.b(2.272,"rgba( 149, 204, 40, 1)",!1),level15:m.b(2.414,"rgba( 40, 204, 40, 1)",!1),level17:m.b(3,"rgba( 40, 149, 204, 1)",!1),level18:m.b(3.272,"rgba( 128, 128, 128, 1)",!1),level19:m.b(3.414,"rgba( 40, 40, 204, 1)",!1),level20:m.b(4,"rgba( 204, 40, 40, 1)",!1),level21:m.b(4.272,"rgba( 149, 40, 204, 1)",!1),level22:m.b(4.414,"rgba( 204, 40, 149, 1)",!1),level23:m.b(4.618,"rgba( 149, 204, 40, 1)",!1),level24:m.b(4.764,"rgba( 40, 204, 149, 1)",!1),__collectibleLines:["trendline","level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11","level12","level13","level14","level15","level16","level17","level18","level19","level20","level21","level22","level23","level24"]},linetoolfibchannel:{clonable:!0,showCoeffs:!0,showPrices:!0,font:"Verdana",fillBackground:!0,transparency:80,extendLeft:!1,extendRight:!1,horzLabelsAlign:"left",vertLabelsAlign:"middle",coeffsAsPercents:!1,levelsStyle:{linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},level1:m.b(0,"rgba( 128, 128, 128, 1)",!0),level2:m.b(.236,"rgba( 204, 40, 40, 1)",!0),level3:m.b(.382,"rgba( 149, 204, 40, 1)",!0),level4:m.b(.5,"rgba( 40, 204, 40, 1)",!0),level5:m.b(.618,"rgba( 40, 204, 149, 1)",!0),level6:m.b(.786,"rgba( 40, 149, 204, 1)",!0),level7:m.b(1,"rgba( 128, 128, 128, 1)",!0),level8:m.b(1.618,"rgba( 40, 40, 204, 1)",!0),level9:m.b(2.618,"rgba( 204, 40, 40, 1)",!0),level10:m.b(3.618,"rgba( 149, 40, 204, 1)",!0),level11:m.b(4.236,"rgba( 204, 40, 149, 1)",!0),level12:m.b(1.272,"rgba( 149, 204, 40, 1)",!1),level13:m.b(1.414,"rgba( 204, 40, 40, 1)",!1),level16:m.b(2,"rgba( 40, 204, 149, 1)",!1),level14:m.b(2.272,"rgba( 149, 204, 40, 1)",!1),
level15:m.b(2.414,"rgba( 40, 204, 40, 1)",!1),level17:m.b(3,"rgba( 40, 149, 204, 1)",!1),level18:m.b(3.272,"rgba( 128, 128, 128, 1)",!1),level19:m.b(3.414,"rgba( 40, 40, 204, 1)",!1),level20:m.b(4,"rgba( 204, 40, 40, 1)",!1),level21:m.b(4.272,"rgba( 149, 40, 204, 1)",!1),level22:m.b(4.414,"rgba( 204, 40, 149, 1)",!1),level23:m.b(4.618,"rgba( 149, 204, 40, 1)",!1),level24:m.b(4.764,"rgba( 40, 204, 149, 1)",!1),__collectibleLines:["level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11","level12","level13","level14","level15","level16","level17","level18","level19","level20","level21","level22","level23","level24"]},linetoolprojection:{clonable:!0,showCoeffs:!0,font:"Verdana",fillBackground:!0,transparency:80,color1:"rgba( 0, 128, 0, 0.2)",color2:"rgba( 255, 0, 0, 0.2)",linewidth:1,trendline:{visible:!0,color:"rgba( 128, 128, 128, 1)",linestyle:CanvasEx.LINESTYLE_SOLID},level1:m.c(1,"rgba( 128, 128, 128, 1)",!0)},linetool5pointspattern:{clonable:!0,color:"rgba( 204, 40, 149, 1)",textcolor:"rgba( 255, 255, 255, 1)",fillBackground:!0,backgroundColor:"rgba( 204, 40, 149, 0.5)",font:"Verdana",fontsize:12,bold:!1,italic:!1,transparency:50,linewidth:1},linetoolcypherpattern:{clonable:!0,color:"#CC2895",textcolor:"#FFFFFF",fillBackground:!0,backgroundColor:"#CC2895",font:"Verdana",fontsize:12,bold:!1,italic:!1,transparency:50,linewidth:1},linetooltrianglepattern:{clonable:!0,color:"rgba( 149, 40, 255, 1)",textcolor:"rgba( 255, 255, 255, 1)",fillBackground:!0,backgroundColor:"rgba( 149, 40, 204, 0.5)",font:"Verdana",fontsize:12,bold:!1,italic:!1,transparency:50,linewidth:1},linetoolabcd:{clonable:!0,color:"rgba( 0, 155, 0, 1)",textcolor:"rgba( 255, 255, 255, 1)",font:"Verdana",fontsize:12,bold:!1,italic:!1,linewidth:2},linetoolthreedrivers:{clonable:!0,color:"rgba( 149, 40, 255, 1)",textcolor:"rgba( 255, 255, 255, 1)",fillBackground:!0,backgroundColor:"rgba( 149, 40, 204, 0.5)",font:"Verdana",fontsize:12,bold:!1,italic:!1,transparency:50,linewidth:2},linetoolheadandshoulders:{clonable:!0,color:"rgba( 69, 104, 47, 1)",textcolor:"rgba( 255, 255, 255, 1)",fillBackground:!0,backgroundColor:"rgba( 69, 168, 47, 0.5)",font:"Verdana",fontsize:12,bold:!1,italic:!1,transparency:50,linewidth:2},linetoolfibwedge:{singleChartOnly:!0,clonable:!0,showCoeffs:!0,font:"Verdana",fillBackground:!0,transparency:80,trendline:{visible:!0,color:"rgba( 128, 128, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},level1:m.c(.236,"rgba( 204, 40, 40, 1)",!0),level2:m.c(.382,"rgba( 149, 204, 40, 1)",!0),level3:m.c(.5,"rgba( 40, 204, 40, 1)",!0),level4:m.c(.618,"rgba( 40, 204, 149, 1)",!0),level5:m.c(.786,"rgba( 40, 149, 204, 1)",!0),level6:m.c(1,"rgba( 128, 128, 128, 1)",!0),level7:m.c(1.618,"rgba( 40, 40, 204, 1)",!1),level8:m.c(2.618,"rgba( 204, 40, 40, 1)",!1),level9:m.c(3.618,"rgba( 149, 40, 204, 1)",!1),level10:m.c(4.236,"rgba( 204, 40, 149, 1)",!1),level11:m.c(4.618,"rgba( 204, 40, 149, 1)",!1),
__collectibleLines:["trendline","level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11"]},linetoolfibcircles:{clonable:!0,showCoeffs:!0,font:"Verdana",fillBackground:!0,transparency:80,snapTo45Degrees:!0,coeffsAsPercents:!1,trendline:{visible:!0,color:"rgba( 128, 128, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_DASHED},level1:m.c(.236,"rgba( 204, 40, 40, 1)",!0),level2:m.c(.382,"rgba( 149, 204, 40, 1)",!0),level3:m.c(.5,"rgba( 40, 204, 40, 1)",!0),level4:m.c(.618,"rgba( 40, 204, 149, 1)",!0),level5:m.c(.786,"rgba( 40, 149, 204, 1)",!0),level6:m.c(1,"rgba( 128, 128, 128, 1)",!0),level7:m.c(1.618,"rgba( 40, 40, 204, 1)",!0),level8:m.c(2.618,"rgba( 204, 40, 40, 1)",!0),level9:m.c(3.618,"rgba( 149, 40, 204, 1)",!0),level10:m.c(4.236,"rgba( 204, 40, 149, 1)",!0),level11:m.c(4.618,"rgba( 204, 40, 149, 1)",!0),__collectibleLines:["trendline","level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11"]},linetoolfibspeedresistancearcs:{clonable:!0,showCoeffs:!0,font:"Verdana",fillBackground:!0,transparency:80,fullCircles:!1,trendline:{visible:!0,color:"rgba( 128, 128, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_DASHED},level1:m.c(.236,"rgba( 204, 40, 40, 1)",!0),level2:m.c(.382,"rgba( 149, 204, 40, 1)",!0),level3:m.c(.5,"rgba( 40, 204, 40, 1)",!0),level4:m.c(.618,"rgba( 40, 204, 149, 1)",!0),level5:m.c(.786,"rgba( 40, 149, 204, 1)",!0),level6:m.c(1,"rgba( 128, 128, 128, 1)",!0),level7:m.c(1.618,"rgba( 40, 40, 204, 1)",!0),level8:m.c(2.618,"rgba( 204, 40, 40, 1)",!0),level9:m.c(3.618,"rgba( 149, 40, 204, 1)",!0),level10:m.c(4.236,"rgba( 204, 40, 149, 1)",!0),level11:m.c(4.618,"rgba( 204, 40, 149, 1)",!0),__collectibleLines:["trendline","level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11"]},linetooltrendbasedfibextension:{clonable:!0,showCoeffs:!0,showPrices:!0,font:"Verdana",fillBackground:!0,transparency:80,extendLines:!1,horzLabelsAlign:"left",vertLabelsAlign:"middle",reverse:!1,coeffsAsPercents:!1,trendline:{visible:!0,color:"rgba( 128, 128, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_DASHED},levelsStyle:{linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},level1:m.b(0,"rgba( 128, 128, 128, 1)",!0),level2:m.b(.236,"rgba( 204, 40, 40, 1)",!0),level3:m.b(.382,"rgba( 149, 204, 40, 1)",!0),level4:m.b(.5,"rgba( 40, 204, 40, 1)",!0),level5:m.b(.618,"rgba( 40, 204, 149, 1)",!0),level6:m.b(.786,"rgba( 40, 149, 204, 1)",!0),level7:m.b(1,"rgba( 128, 128, 128, 1)",!0),level8:m.b(1.618,"rgba( 40, 40, 204, 1)",!0),level9:m.b(2.618,"rgba( 204, 40, 40, 1)",!0),level10:m.b(3.618,"rgba( 149, 40, 204, 1)",!0),level11:m.b(4.236,"rgba( 204, 40, 149, 1)",!0),level12:m.b(1.272,"rgba( 149, 204, 40, 1)",!1),level13:m.b(1.414,"rgba( 204, 40, 40, 1)",!1),level16:m.b(2,"rgba( 40, 204, 149, 1)",!1),level14:m.b(2.272,"rgba( 149, 204, 40, 1)",!1),level15:m.b(2.414,"rgba( 40, 204, 40, 1)",!1),level17:m.b(3,"rgba( 40, 149, 204, 1)",!1),level18:m.b(3.272,"rgba( 128, 128, 128, 1)",!1),
level19:m.b(3.414,"rgba( 40, 40, 204, 1)",!1),level20:m.b(4,"rgba( 204, 40, 40, 1)",!1),level21:m.b(4.272,"rgba( 149, 40, 204, 1)",!1),level22:m.b(4.414,"rgba( 204, 40, 149, 1)",!1),level23:m.b(4.618,"rgba( 149, 204, 40, 1)",!1),level24:m.b(4.764,"rgba( 40, 204, 149, 1)",!1),__collectibleLines:["trendline","level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11","level12","level13","level14","level15","level16","level17","level18","level19","level20","level21","level22","level23","level24"]},linetooltrendbasedfibtime:{clonable:!0,showCoeffs:!0,font:"Verdana",fillBackground:!0,transparency:80,horzLabelsAlign:"right",vertLabelsAlign:"bottom",trendline:{visible:!0,color:"rgba( 128, 128, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_DASHED},level1:m.c(0,"rgba( 128, 128, 128, 1)",!0),level2:m.c(.382,"rgba( 204, 40, 40, 1)",!0),level3:m.c(.5,"rgba( 149, 204, 40, 1)",!1),level4:m.c(.618,"rgba( 40, 204, 40, 1)",!0),level5:m.c(1,"rgba( 40, 204, 149, 1)",!0),level6:m.c(1.382,"rgba( 40, 149, 204, 1)",!0),level7:m.c(1.618,"rgba( 128, 128, 128, 1)",!0),level8:m.c(2,"rgba( 40, 40, 204, 1)",!0),level9:m.c(2.382,"rgba( 204, 40, 40, 1)",!0),level10:m.c(2.618,"rgba( 149, 40, 204, 1)",!0),level11:m.c(3,"rgba( 204, 40, 149, 1)",!0),__collectibleLines:["trendline","level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11"]},linetoolschiffpitchfork:{clonable:!0,fillBackground:!0,transparency:80,style:h.Schiff,median:{visible:!0,color:"rgba( 165, 0, 0, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},level0:m.c(.25,"rgba( 160, 107, 0, 1)",!1),level1:m.c(.382,"rgba( 105, 158, 0, 1)",!1),level2:m.c(.5,"rgba( 0, 155, 0, 1)",!0),level3:m.c(.618,"rgba( 0, 153, 101, 1)",!1),level4:m.c(.75,"rgba( 0, 101, 153, 1)",!1),level5:m.c(1,"rgba( 0, 0, 153, 1)",!0),level6:m.c(1.5,"rgba( 102, 0, 153, 1)",!1),level7:m.c(1.75,"rgba( 153, 0, 102, 1)",!1),level8:m.c(2,"rgba( 165, 0, 0, 1)",!1),__collectibleLines:["median","level0","level1","level2","level3","level4","level5","level6","level7","level8"]},linetoolschiffpitchfork2:{clonable:!0,fillBackground:!0,transparency:80,style:h.Schiff2,median:{visible:!0,color:"rgba( 165, 0, 0, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},level0:m.c(.25,"rgba( 160, 107, 0, 1)",!1),level1:m.c(.382,"rgba( 105, 158, 0, 1)",!1),level2:m.c(.5,"rgba( 0, 155, 0, 1)",!0),level3:m.c(.618,"rgba( 0, 153, 101, 1)",!1),level4:m.c(.75,"rgba( 0, 101, 153, 1)",!1),level5:m.c(1,"rgba( 0, 0, 153, 1)",!0),level6:m.c(1.5,"rgba( 102, 0, 153, 1)",!1),level7:m.c(1.75,"rgba( 153, 0, 102, 1)",!1),level8:m.c(2,"rgba( 165, 0, 0, 1)",!1),__collectibleLines:["median","level0","level1","level2","level3","level4","level5","level6","level7","level8"]},linetoolinsidepitchfork:{clonable:!0,fillBackground:!0,transparency:80,style:h.Inside,median:{visible:!0,color:"rgba( 165, 0, 0, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},level0:m.c(.25,"rgba( 160, 107, 0, 1)",!1),level1:m.c(.382,"rgba( 105, 158, 0, 1)",!1),level2:m.c(.5,"rgba( 0, 155, 0, 1)",!0),
level3:m.c(.618,"rgba( 0, 153, 101, 1)",!1),level4:m.c(.75,"rgba( 0, 101, 153, 1)",!1),level5:m.c(1,"rgba( 0, 0, 153, 1)",!0),level6:m.c(1.5,"rgba( 102, 0, 153, 1)",!1),level7:m.c(1.75,"rgba( 153, 0, 102, 1)",!1),level8:m.c(2,"rgba( 165, 0, 0, 1)",!1),__collectibleLines:["median","level0","level1","level2","level3","level4","level5","level6","level7","level8"]},linetool:{frozen:!1,visible:!0},linetoolvisibilities:{intervalsVisibilities:{seconds:!0,secondsFrom:1,secondsTo:59,minutes:!0,minutesFrom:1,minutesTo:59,hours:!0,hoursFrom:1,hoursTo:24,days:!0,daysFrom:1,daysTo:366,weeks:!0,months:!0}}},n(TradingView.defaultProperties.chartproperties),r()}for(void 0===TradingView.defaultProperties["study_MA@tv-basicstudies"]&&(TradingView.defaultProperties["study_MA@tv-basicstudies"]={description:"Moving Average",shortDescription:"MA",inputs:{length:9,source:"close"},styles:{MovAvg:{visible:!0,color:"rgba( 4, 150, 255, 1)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1,plottype:p.Line,histogramBase:0,title:"MA"}}}),void 0===TradingView.defaultProperties["study_ErrorOnUpdate@tv-basicstudies"]&&(TradingView.defaultProperties["study_ErrorOnUpdate@tv-basicstudies"]={description:"Error On Update",styles:{ErrorOnUpdate:{visible:!0,color:"rgba( 255, 0, 0, 1)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1,plottype:p.Line,histogramBase:0}}}),void 0===TradingView.defaultProperties["study_ErrorOnCreate@tv-basicstudies"]&&(TradingView.defaultProperties["study_ErrorOnCreate@tv-basicstudies"]={description:"Error On Create",styles:{ErrorOnUpdate:{visible:!0,color:"rgba( 0, 255, 0, 1)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1,plottype:p.Line,histogramBase:0}}}),void 0===TradingView.defaultProperties["study_ErrorOnNewBar@tv-basicstudies"]&&(TradingView.defaultProperties["study_ErrorOnNewBar@tv-basicstudies"]={description:"Error On New Bar",styles:{ErrorOnUpdate:{visible:!0,color:"rgba( 0, 0, 255, 1)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1,plottype:p.Line,histogramBase:0}}}),void 0===TradingView.defaultProperties["study_PivotPointsHighLow@tv-basicstudies"]&&(TradingView.defaultProperties["study_PivotPointsHighLow@tv-basicstudies"]={font:"Arial",fontsize:10,borderColor:"rgba( 83, 143, 31, 1)",backColor:"rgba( 240, 255, 204, 1)",textColor:"rgba( 0, 0, 0, 1)"}),void 0===TradingView.defaultProperties["study_PivotPointsStandard@tv-basicstudies"]&&(i="rgba( 212, 121, 40, 1)",o=!0,s=1,TradingView.defaultProperties["study_PivotPointsStandard@tv-basicstudies"]={_hardCodedDefaultsVersion:1,font:"Arial",fontsize:11,levelsStyle:{showLabels:!0,visibility:{P:o,"S1/R1":o,"S2/R2":o,"S3/R3":o,"S4/R4":o,"S5/R5":o},colors:{P:i,"S1/R1":i,"S2/R2":i,"S3/R3":i,"S4/R4":i,"S5/R5":i},widths:{P:s,"S1/R1":s,"S2/R2":s,"S3/R3":s,"S4/R4":s,"S5/R5":s}}}),void 0===TradingView.defaultProperties["study_ZigZag@tv-basicstudies"]&&(TradingView.defaultProperties["study_ZigZag@tv-basicstudies"]={color:"rgba( 86, 135, 29, 1)",linewidth:2}),
void 0===TradingView.defaultProperties["study_ElliottWave@tv-basicstudies"]&&(TradingView.defaultProperties["study_ElliottWave@tv-basicstudies"]={inputs:{},level0:m.a("rgba( 255, 0, 0, 1)",!1),level1:m.a("rgba( 0, 128, 0, 1)",!1),level2:m.a("rgba( 0, 0, 255, 1)",!1),level3:m.a("rgba( 255, 0, 255, 1)",!1),level4:m.a("rgba( 0, 128, 255, 1)",!0),level5:m.a("rgba( 255, 0, 0, 1)",!0),level6:m.a("rgba( 0, 128, 0, 1)",!0),level7:m.a("rgba( 0, 0, 255, 1)",!0),level8:m.a("rgba( 255, 0, 255, 1)",!0)}),void 0===TradingView.defaultProperties["study_LinearRegression@tv-basicstudies"]&&(TradingView.defaultProperties["study_LinearRegression@tv-basicstudies"]={styles:{upLine:{visible:!0,color:"rgba( 0, 0, 255, 0.3)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1},downLine:{visible:!0,color:"rgba( 0, 0, 255, 0.3)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1},baseLine:{visible:!0,color:"rgba( 255, 0, 0, 0.3)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1},extendLines:!0,showPearsons:!0,backgroundColor:"rgba( 153, 21, 21, 0.3)",transparency:70}}),void 0===TradingView.defaultProperties["study_RegressionTrend@tv-basicstudies"]&&(TradingView.defaultProperties["study_RegressionTrend@tv-basicstudies"]={linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,styles:{upLine:{visible:!0,color:"rgba( 0, 0, 255, 0.3)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1},downLine:{visible:!0,color:"rgba( 0, 0, 255, 0.3)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1},baseLine:{visible:!0,color:"rgba( 255, 0, 0, 0.3)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1},extendLines:!1,showPearsons:!0,transparency:70}}),void 0===TradingView.defaultProperties["study_Compare@tv-basicstudies"]&&(TradingView.defaultProperties["study_Compare@tv-basicstudies"]={minTick:"default"}),void 0===TradingView.defaultProperties["study_Overlay@tv-basicstudies"]&&(a="study_Overlay@tv-basicstudies",TradingView.defaultProperties[a]={style:c.STYLE_BARS,showPriceLine:!1,minTick:"default",candleStyle:{upColor:"rgba( 107, 165, 131, 1)",downColor:"rgba( 215, 84, 66, 1)",drawWick:!0,drawBorder:!0,borderColor:"rgba( 55, 134, 88, 1)",borderUpColor:"rgba( 34, 84, 55, 1)",borderDownColor:"rgba( 91, 26, 19, 1)",wickColor:"rgba( 115, 115, 117, 1)",wickUpColor:"rgba( 115, 115, 117, 1)",wickDownColor:"rgba( 115, 115, 117, 1)",barColorsOnPrevClose:!1},hollowCandleStyle:{upColor:"rgba( 107, 165, 131, 1)",downColor:"rgba( 215, 84, 66, 1)",drawWick:!0,drawBorder:!0,borderColor:"rgba( 55, 134, 88, 1)",borderUpColor:"rgba( 34, 84, 55, 1)",borderDownColor:"rgba( 91, 26, 19, 1)",wickColor:"rgba( 115, 115, 117, 1)",wickUpColor:"rgba( 115, 115, 117, 1)",wickDownColor:"rgba( 115, 115, 117, 1)",barColorsOnPrevClose:!1},barStyle:{upColor:"rgba( 107, 165, 131, 1)",downColor:"rgba( 215, 84, 66, 1)",barColorsOnPrevClose:!1,dontDrawOpen:!1},lineStyle:{color:"rgba( 3, 3, 247, 1)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1,priceSource:"close",styleType:c.STYLE_LINE_TYPE_SIMPLE},areaStyle:{color1:"rgba( 96, 96, 144, 0.5)",color2:"rgba( 1, 246, 245, 0.5)",linecolor:"rgba( 0, 148, 255, 1)",
linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1,priceSource:"close",transparency:50},baselineStyle:{baselineColor:"rgba( 117, 134, 150, 1)",topFillColor1:"rgba( 83, 185, 135, 0.1)",topFillColor2:"rgba( 83, 185, 135, 0.1)",bottomFillColor1:"rgba( 235, 77, 92, 0.1)",bottomFillColor2:"rgba( 235, 77, 92, 0.1)",topLineColor:"rgba( 83, 185, 135, 1)",bottomLineColor:"rgba( 235, 77, 92, 1)",topLineWidth:1,bottomLineWidth:1,priceSource:"close",transparency:50,baseLevelPercentage:50},styles:{open:{visible:!0,color:"rgba( 255, 0, 0, 1)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1,plottype:p.Line,histogramBase:0},high:{visible:!0,color:"rgba( 255, 0, 0, 1)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1,plottype:p.Line,histogramBase:0},low:{visible:!0,color:"rgba( 255, 0, 0, 1)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1,plottype:p.Line,histogramBase:0},close:{visible:!0,color:"rgba( 255, 0, 0, 1)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1,plottype:p.Line,histogramBase:0}}}),l=e.split("."),d=TradingView.defaultProperties,_=0;_<l.length;_++)d&&(d=d[l[_]]);return d?TradingView.clone(d):{}};s.create=function(e,t){if(t){var i=m(e);TradingView.defaultProperties[e]=$.extend(t,i)}},s.remove=function(e){TradingView.defaultProperties[e]=void 0},TradingView.saveDefaults=function(e,t){TVSettings.setJSON(e,t)},TradingView.factoryDefaults=m,window.applyDefaultOverridesToLinetools=r,window.applyDefaultsOverrides=n,window.applyPropertiesOverrides=o,window.defaults=s,t.applyDefaultOverridesToLinetools=r,t.applyDefaultsOverrides=n,t.applyPropertiesOverrides=o,t.defaults=s,t.factoryDefaults=m,t.saveDefaults=TradingView.saveDefaults},,,,,,function(e,t,i){"use strict";function o(e){return n.createDialog(Object.assign({},a,e))}var n,r,s,a;Object.defineProperty(t,"__esModule",{value:!0}),i(5),n=i(56),r={key:13,name:"yes",text:$.t("Yes"),type:"success"},s={method:"close",name:"no",text:$.t("No"),type:"default"},a={actions:[r,s],actionsWrapTemplate:'<div class="tv-dialog__section tv-dialog__section--actions tv-dialog__section--no-border">',content:$.t("Are you sure?"),contentWrapTemplate:'<div class="tv-dialog__section tv-dialog__section--no-border"><div class="tv-text"><p></p></div></div>',destroyOnClose:!0,title:$.t("Confirmation"),width:400},t.createConfirmDialog=o},function(e,t,i){"use strict";e.exports=i(951)},,,function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" width="14" height="14"><path fill-rule="evenodd" d="M10.893 9.512l.458 3.624c.014.105-.006.16-.02.176-.028.03-.109.005-.182-.03L7.812 11.73a1.973 1.973 0 0 0-.811-.16c-.302 0-.59.057-.81.16l-3.338 1.552c-.118.056-.164.051-.182.03-.014-.016-.034-.07-.02-.178L3.11 9.51c.06-.503-.162-1.18-.505-1.54L.087 5.302c-.085-.091-.09-.148-.086-.158.003-.01.04-.053.16-.077l3.621-.689c.491-.09 1.069-.506 1.315-.948L7.004 0l1.902 3.43c.246.442.824.859 1.312.947l3.617.69c.123.024.162.068.164.077.003.01-.003.066-.089.157L11.4 7.97c-.348.367-.57 1.045-.506 1.543z"/></svg>'},,function(e,t,i){"use strict";function o(e,t,i){return e*(1-i)+t*i}function n(e,t,i,r){
var s,a,l,c,h;if(r=!r||r<1e12?Date.now():r,s=r-e,a=s>=i.duration,l=o(i.from,i.to,i.easing(s/i.duration)),c=a?i.to:l,h=c-t,i.onStep(h,c),a)return void(i.onComplete&&i.onComplete());requestAnimationFrame(n.bind(null,e,c,i))}function r(e){e.from=e.from||0,e.duration=e.duration||250,e.easing=e.easing||s.easingFunc.easeOutCubic,requestAnimationFrame(n.bind(null,Date.now(),e.from,e))}Object.defineProperty(t,"__esModule",{value:!0});var s=i(14);t.doAnimate=r},,,,,,,,,,function(e,t,i){"use strict";(function(e){function o(t){var i,o,c,h,u,d,p,f,_,m,g;if(t=$.extend({},l,t),i=$(e.render(s,{tabs:t.tabs,customControls:t.customControls,customControlsAddClass:t.customControlsContainerAddClass},{additionalHeaderContent:t.additionalHeaderContent})),o=$(a),c=o,t.contentAddClass&&o.addClass(t.contentAddClass),!1!==t.withScroll&&(o=$('<div class="js-dialog__scroll-wrap tv-dialog__scroll-wrap">').append(c.addClass("tv-dialog__scroll-wrap-inner"))),h=$('<div class="tv-tabbed-dialog">').append(i).append(o),t.customControls&&i.find(".js-custom-controls").append(t.customControls),!0!==t.doNotCreatePages)for(u=0;u<t.tabs.length;++u)c.append($('<div class="tv-tabbed-dialog__tab-page">').append(t.tabs[u].page));return d=t.tabStateSaveKey,p=t.activeTab,f=t.tabsScrollBoxAddClass,_=t.tabAddClass,delete t.tabs,delete t.activeTab,delete t.customControls,delete t.tabStateSaveKey,delete t.customControlsContainerAddClass,delete t.tabsScrollBoxAddClass,delete t.tabAddClass,t.closeButtonAddClass="tv-tabbed-dialog__close",t.contentWrapTemplate=h,m=(0,r.createDialog)(t),g=new n.Tabs(i.find(".tv-tabs").get(0),c.get(0),{addLeftArrowsClass:"tv-tabbed-dialog__tabs-arrow-left",addRightArrowsClass:"tv-tabbed-dialog__tabs-arrow-right",addScrollBoxClass:f,tabClass:_,saveTab:d,activeTab:p}),m.on("afterOpen",function(){g.setActivePage(g.index(),!0,!0)}),{dialog:m,tabs:g}}var n,r,s,a,l;Object.defineProperty(t,"__esModule",{value:!0}),t.createTabbedDialog=o,n=i(237),r=i(56),i(981),s='<div class="tv-dialog__section tv-dialog__section--title tv-tabbed-dialog__header js-dialog__drag js-close-button-place"><div class="tv-tabs tv-tabbed-dialog__tabs js-dialog__drag">{{#tabs}}<div class="tv-tabs__tab">{{name}}</div>{{/tabs}}</div>{{#customControls}}<div class="js-custom-controls tv-tabbed-dialog__custom-controls {{#customControlsAddClass}}{{customControlsAddClass}}{{/customControlsAddClass}}"></div>{{/customControls}}<div class="tv-tabbed-dialog__bottom-border"></div></div>{{>additionalHeaderContent}}',a='<div class="tv-tabbed-dialog__pages-container"></div>',l={tabs:[]}}).call(t,i(21))},,,,function(e,t,i){"use strict";(function(e,o){function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s,a,l,c,h,u,d;Object.defineProperty(t,"__esModule",{value:!0}),t.CompareTab=void 0,s=function(){function e(e,t){var i,o;for(i=0;i<t.length;i++)o=t[i],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,i,o){
return i&&e(t.prototype,i),o&&e(t,o),t}}(),a=i(179),l=n(a),c=i(20),i(501),i(168),i(980),h='\n\t<div class="tv-compare-tab">\n\t\t<input type="text" class="tv-control-input js-compare-tab-input" placeholder="'+$.t("Company Comparison")+'" autocomplete="off">\n\t</div>',u='<div class="tv-compare-tab__predefines js-compare-tab-predefines"></div>',d='\n\t<div class="tv-compare-tab__predefine-cell">\n\t\t<label for="{{symbolId}}">\n\t\t\t<span class="tv-control-checkbox">\n\t\t\t\t<input class="tv-control-checkbox__input js-predefine-checkbox" type="checkbox" id="{{symbolId}}">\n\t\t\t<span class="tv-control-checkbox__box tv-compare-tab__checkbox-box">'+i(72)+'</span>\n\t\t\t<span class="tv-control-checkbox__ripple js-ripple"></span>\n\t\t\t</span>\n\t\t\t<span class="tv-control-checkbox__label tv-compare-tab__checkbox-label">{{label}}</span>\n\t\t</label>\n\t</div>',t.CompareTab=function(){function t(i,o){var n,s;r(this,t),this._chartWidgetCollection=i,this._dialog=o,this._$popup=null,this._predefines={},this._symbolAlias={},n=this._chartWidgetCollection.onWidget?{}:{SPX:$.t("S&P 500"),NDX:$.t("Nasdaq 100"),DJI:$.t("Dow 300"),NI225:$.t("Nikkei 225"),DAX:$.t("DAX"),UKX:$.t("FTSE 100")},s={IBOV:$.t("Bovespa Index"),IBXX:$.t("Brazil 100 Index"),IBXL:$.t("Brazil 50 Index"),IBRA:$.t("Brazil Broad-Based Index"),IGCX:$.t("Special Corporate Governance Stock Index"),ITAG:$.t("Special Tag-Along Stock Index"),IGNM:$.t("Novo Mercado Corporate Governance Equity Index")},this._predefines=e.enabled("bovespa_widget")?s:n,this._symbolAlias={"BATS:SPY":"AMEX:SPY","BATS:DIA":"AMEX:DIA","BATS:GLD":"AMEX:GLD","BATS:FXE":"AMEX:FXE"},this.init()}return s(t,[{key:"addCompareSymbol",value:function(e,t,i){var o,n,r,s,a,l,h=this._chartWidgetCollection.activeChartWidget.value();if(h&&(o=h.model())){for(n=o.mainSeries().interval(),r=o.studiesMetaData(),s=void 0,a=0;a<r.length;a++)"Compare@tv-basicstudies"===r[a].id&&(s=r[a]);return l={exchange:i,inputs:{symbol:e,resolution:n}},(0,c.trackEvent)("GUI","Add Compare"),o.insertStudy(s,l)}}},{key:"removeCompareSymbol",value:function(e){var t,i=this,o=this._chartWidgetCollection.activeChartWidget.value();o&&(t=o.model())&&t.dataSources().forEach(function(o){if(o._metaInfo&&"Compare@tv-basicstudies"===o._metaInfo.id){var n=o.properties().inputs.symbol.value();(n===e||i._symbolAlias[n]&&i._symbolAlias[n]===e)&&t.removeSource(o)}})}},{key:"init",value:function(){var t,i,o,n=this,r=this._chartWidgetCollection.activeChartWidget.value();r&&(t=r.model())&&(i=t.dataSources(),this.$tab=$(h),this._initSymbolSearch(),e.enabled("charting_library_base")||(this._createPredefinesList(),o=this.$tab.find(".js-compare-tab-predefines"),o.find(".js-predefine-checkbox").attr("checked",!1),Object.keys(this._predefines).forEach(function(e){var t=n._symbolToId(e),r=o.find("#"+t);i.forEach(function(t){if(t._metaInfo&&"Compare@tv-basicstudies"===t._metaInfo.id){var i=t.properties().inputs.symbol.value();(i===e||n._symbolAlias[i]&&n._symbolAlias[i]===e)&&r.attr("checked",!0)}})})))}},{key:"_initSymbolSearch",value:function(){
var e=this;this._$input=this.$tab.find(".js-compare-tab-input"),l.default.bindToInput(this._$input,{callback:function(t){return e.addCompareSymbol(t)},onPopupOpen:function(t){t.css("z-index",e._dialog.getZIndex()),e._$popup=t},onPopupClose:function(){e._$popup=null},keepFocus:!0,clearAfterAccept:!0})}},{key:"_createPredefinesList",value:function(){function e(e){var t=this;setTimeout(function(){if($(t).is(":checked")){i.addCompareSymbol(e.data.symbol)||$(t).attr("checked",!1)}else i.removeCompareSymbol(e.data.symbol)})}var t=this,i=this,n=$(u);Object.keys(this._predefines).forEach(function(i){var r=$(o.render(d,{symbolId:t._symbolToId(i),label:t._predefines[i]}));r.find(".js-predefine-checkbox").change({symbol:i},e),r.appendTo(n)}),n.appendTo(this.$tab)}},{key:"_symbolToId",value:function(e){return e.replace(/[^a-z0-9]/gi,"_")}},{key:"focus",value:function(){Modernizr.touch||this._$input.focus()}},{key:"isClickOnTab",value:function(e){return!!this._$popup&&!(this._$popup[0]!==e.target&&!this._$popup[0].contains(e.target))}}]),t}()}).call(t,i(3),i(21))},function(e,t,i){"use strict";function o(){var e=$(".publish-chart-button");0!==e.length&&(e.addClass("process"),u=setTimeout(n,3e4))}function n(){clearTimeout(u),$(".publish-chart-button").removeClass("process")}function r(e,t){!0!==t&&h.getBool("publish.showIntroText",!0)?c.createPublishIntroDialog().open().on("destroy",window.saver.publishChart.bind(window.saver,e)):window.saver.publishChart(e)}function s(e,t){window.runOrSignIn(function(){o(),l.whenVerified({showDialog:!0,source:"Publish chart"}).done(r.bind(null,e,t)).always(n)},{source:"Publish chart",sourceMeta:"Chart"})}function a(e){s(e,!0)}var l,c,h,u;Object.defineProperty(t,"__esModule",{value:!0}),i(13),l=i(194),c=i(1050),h=i(48),u=0,t.publishChart=s,t.publishChartWidget=a},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a,l;Object.defineProperty(t,"__esModule",{value:!0}),t.AddSymbolCheckbox=void 0,a=i(164),l=o(a),t.AddSymbolCheckbox=function(e){function t(e){n(this,t),e.checked=TVSettings.getBool("showAddSymbolDialog.checkboxState",!0);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.$checkbox.change(function(){setTimeout(function(){TVSettings.setValue("showAddSymbolDialog.checkboxState",i.checked)})}),i}return s(t,e),t}(l.default)},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){
var i,o,n,r,c,p,f,_,m,g,v,y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(y=$.extend({},{title:$.t("Confirm Inputs"),callback:function(e){}},y),i=null,o=(0,s.createDialog)({title:y.title,contentWrapTemplate:'<div class="tv-dialog__section tv-dialog__section--no-border"></div>',width:u,closeOnClickAtOtherDialogs:!0,destroyOnClose:!0,actionsWrapTemplate:'<div class="tv-dialog__section tv-dialog__section--actions tv-dialog__section--actions-adaptive tv-dialog__section--no-border">',isClickOutFn:function(e){var t=i.symbolSearchPopup();if(t)return t[0]!==e.target&&!t[0].contains(e.target)&&void 0},actions:[{name:"apply",type:"primary",text:$.t("Apply"),key:13}]}),d=o,n=(0,l.merge)({},t.defaults.inputs),r=0;r<t.inputs.length;++r)c=t.inputs[r],c.confirm||delete n[c.id];p=new h.default({inputs:n}),f={metaInfo:function(){return t}},_=o.$content,o.open(),i=new a.StudyInputsPropertyPage(p,e.model(),f,!0,o.zIndex),m=i.widget(),_.append(m),Array.prototype.forEach.call(_.find("select"),function(e){var t=$(e),i="tv-select-container dialog";t.hasClass("tv-select-container-fontsize")&&(i+=" tv-select-container-fontsize"),t.selectbox({speed:100,classHolder:i})}),$('input[type="text"]',_).addClass("tv-text-input inset dialog"),$("input.ticker",_).TVTicker(),o.on("action:apply",function(){(0,y.callback)(p.state()),o.close()}),g=o.$content.innerWidth()-o.$content.width(),v=m.width()+g,v>u&&o.$el.css("max-width",v),_.find("input,select").first().focus()}function r(){return d}var s,a,l,c,h,u,d;Object.defineProperty(t,"__esModule",{value:!0}),t.show=n,t.instance=r,s=i(56),a=i(524),l=i(10),c=i(37),h=o(c),i(216),u=450,d=null},,,,,,,,,function(e,t,i){"use strict";(function(e){function o(e,t){this._model=t,this._bindings=[],this._property=e,this.supportThemeSwitcher=!1}function n(e){return e.toUpperCase()}function r(e){return function(t){return t<e?e:t}}function s(e){return function(t){return t>e?e:t}}function a(e){return function(t){var i=parseInt(t,10);return k(i)?e:i}}function l(e){var t=new B;return function(i){var o=t.parse(i);return k(o)?e:o}}function c(e){var t=new B;return function(i){var o=t.parse(i);return k(o)?e():o}}function h(e,t){var i=new N(t);return function(t){var o=i.format(t);return k(o)?e:o}}function u(){return function(e){for(var t=e,i=e.replace(/[^\u0000-\u007F]/,"");i.length!==t.length;)t=i,i=t.replace(/[^\u0000-\u007F]/,"");return i}}function d(e){return function(t){return 0===t.length?e:t}}function p(e,t,i,o,n,r,s){H.call(this,e,t,o,n,r),this._transformFunction=i,this._setter=s,this._attachToControl(e,o)}function f(e,t,i,o,n){p.call(this,e,t,l(t.value()),i,o,n),this.addFormatter(function(e){return(new B).format(e)})}function _(e,t,i,o,n,r){this._subControlIds=t,H.call(this,e,i,o,n,r),this._forEachSubControl(function(e){this._attachToControl(e,o)})}function m(e,t,i,o,n,r,s){this._model=o,this._mainSeries=r,this._toIntTransformer=a(s),this._disabled=!1,H.call(this,e,t,i,o,n);var l=this;i&&e.change(function(){l.setValueToProperty(l.value())}),this._mainSeries.onBarReceived().subscribe(this,function(){
l.setValue(this.property().value())})}function g(e,t,i,o,n){H.call(this,e,t,i,o,n),i&&e.on("accept-symbol",function(e,t){this.setValueToProperty(t)}.bind(this))}function v(e,t,i,o,n,r,s,a){H.call(this,e,t,o,n,r),this._transformFunction=i,this._propertyChangedHook=a,this._setter=s;var l=this;o&&e.change(function(){l._setter?l._setter.call(l,l.value()):l.setValueToProperty(l.value())})}function y(e,t){H.call(this,e,t)}function b(e,t,i,o,n,r){if(!e.is(":checkbox, :radio"))return new w(e,t,i,o,n);H.call(this,e,t,i,o,n),this._setter=r;var s=this;i&&e.change(function(){s._setter?s._setter.call(s,s.value()):s.setValueToProperty(s.value())})}function S(e,t,i,o,n,r){H.call(this,e,t,i,o,n),this._inverted=!0===r}function w(e,t,i,o,n){H.call(this,e,t,i,o,n);var r=this;i&&e.click(function(){var e=$(this).toggleClass("active").hasClass("active");r.setValueToProperty(e)})}function T(e,t,i,o,n,r){var s,a;s=e.is("input")?e:e.find("input"),H.call(this,s,t,i,o,n),this._transparencyProperty=r,this.applyOldTransparency(),a=this,i&&s.change(function(){a.setValueToProperty(a.value())})}function P(t,i,o,n,r,s){function a(e,t){var i=c.control().slider("option","min"),o=c.control().slider("option","max"),n=c._property.value();(i<=n&&n<=o||i<t.value&&t.value<o)&&c.setValueToProperty(t.value)}function l(e,t){c.setValueToProperty(t.value)}isNumber(i.value())||(W.logWarn("Property cannot be binded to control, bad value (expect number): "+i.value()),i=new e),H.call(this,t,i,o,n,r);var c=this;o&&(s?(t.bind("slidechange",a),t.bind("slide",a)):(t.bind("slidechange",l),t.bind("slide",l))),t.bind("slidestart",function(e,t){n.beginUndoMacro(r)}),t.bind("slidestop",function(e,t){n.endUndoMacro()})}function C(e,t,i,o,n,r){b.call(this,e,t,o,n,r),this._intervalProperty=i,this._intervalProperty.listeners().subscribe(this,this.onIntervalChanged),this.onIntervalChanged()}function x(e,t,i,o,n){this._control=e,this._wv=t,this._transformFunction=i,this._undoModel=o,this._undoText=n,this._attachToControl(this._control),this._setValueBinded=this.setValue.bind(this)}function E(e,t,i,o,n,r){this._not=!!r,x.apply(this,arguments)}function L(e,t,i,o,n,r,s,a){this._propFrom=t[0],this._propTo=t[1],this._control=e,this._applyOnFly=o,this._undoModel=n,this._undoText=s,this._properties=t,this._inputsText=r,this._transformers=i;var l=this;e.slider({range:!0,min:i[0],max:i[1],values:[l._propFrom.value(),l._propTo.value()]}),this.$rangeHandleFrom=$(e.find(".ui-slider-handle")[0]).addClass("from"),this.$rangeHandleTo=$(e.find(".ui-slider-handle")[1]).addClass("to"),this.setValue(this._propFrom,0),this.setValue(this._propTo,1),a&&($(a).on("change",function(e){$(this).is(":checked")?(l._control.slider("enable"),$(l._inputsText[0]).prop("disabled",!1),$(l._inputsText[1]).prop("disabled",!1)):(l._control.slider("disable"),$(l._inputsText[0]).prop("disabled",!0),$(l._inputsText[1]).prop("disabled",!0))}),$(a).is(":checked")?(l._control.slider("enable"),$(l._inputsText[0]).prop("disabled",!1),$(l._inputsText[1]).prop("disabled",!1)):(l._control.slider("disable"),
$(l._inputsText[0]).prop("disabled",!0),$(l._inputsText[1]).prop("disabled",!0))),r&&($(r[0]).val(this._control.slider("values",0)),$(r[1]).val(this._control.slider("values",1)),e.slider({slide:function(e,t){$(r[0]).val(t.values[0]),$(r[1]).val(t.values[1])}}),$(r).each(function(){$(this).on("keydown",function(e){parseInt($(r[0]).val())<l._transformers[0]?$(r[0]).val(l._transformers[0]):parseInt($(r[1]).val())>l._transformers[1]&&$(r[1]).val(l._transformers[1]),-1!==$.inArray(e.keyCode,[46,8,9,27,13,110,190])||65===e.keyCode&&!0===e.ctrlKey||67===e.keyCode&&!0===e.ctrlKey||88===e.keyCode&&!0===e.ctrlKey||e.keyCode>=35&&e.keyCode<=39||(e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault()})}),$(r[0]).on("keyup",function(e){parseInt($(this).val())<l._transformers[0]?$(this).val(l._transformers[0]):parseInt($(this).val())>l._transformers[1]&&$(this).val(l._transformers[1]),parseInt($(this).val())>parseInt($(r[1]).val())&&$(this).val(r[1].val()),l._control.slider("values",0,$(this).val()),L.prototype.setValueToProperty.call(l,l._control.slider("values"),"from")}),$(r[1]).on("keyup",function(e){parseInt($(this).val())<l._transformers[0]?$(this).val(l._transformers[0]):parseInt($(this).val())>l._transformers[1]&&$(this).val(l._transformers[1]),parseInt($(this).val())<$(r[0]).val()&&$(this).val(r[0].val()),l._control.slider("values",1,$(this).val()),L.prototype.setValueToProperty.call(l,l._control.slider("values"),"to")})),this._propFrom.listeners().subscribe(this,L.prototype.propertyChanged),this._propTo.listeners().subscribe(this,L.prototype.propertyChanged),o&&e.on("slide",function(e,t){l.setValueToProperty(l._control.slider("values"),t.handle)}),e.slider({stop:function(e,t){r&&($(r[0]).val(l._control.slider("values",0)),$(r[1]).val(l._control.slider("values",1))),l.setValueToProperty(l._control.slider("values"),t.handle)},start:function(e,t){r&&($(r[0]).val(l._control.slider("values",0)),$(r[1]).val(l._control.slider("values",1))),l.setValueToProperty(l._control.slider("values"),t.handle)}})}function I(e,t,i,o,n,r){H.call(this,e,t,i,o,n),this._separator=r||" ";var s=this;i&&e.change(function(){s.setValueToProperty(s.value())})}var A,k,M,O,D,V,R,B,N,z,F,H,W;i(579),A=i(9).ensureNotNull,k=i(113).isNaN,M=i(55),O=M.rgba,D=M.rgbaToString,V=M.parseRgb,R=i(444).TimePointIndexSearchMode,B=i(66).NumericFormatter,N=i(455).LimitedPrecisionNumericFormatter,z=i(33),F=i(939).addColorPicker,H=i(535).Binding,W=i(0).getLogger("Chart.PropertyPage"),o.prototype.model=function(){return this._model},o.prototype.bindControl=function(e){return this._bindings.push(e),e},o.prototype.unbindControl=function(e){var t=this._bindings.indexOf(e);-1!==t&&this._bindings.splice(t,1)},o.prototype.loadData=function(){var e,t,i;for(e=0;e<this._bindings.length;e++)t=this._bindings[e],t.properties?(i=t.properties(),t.setValue(i[0],0),t.setValue(i[1],1)):t.property&&(t.transparencyProperty&&t.transparencyProperty()?t.applyOldTransparency():t.setValue(t.property().value()))},o.prototype.saveData=function(){var e,t
;for(this._model.beginUndoMacro(),e=0;e<this._bindings.length;e++)t=this._bindings[e],t.changed()&&this._model.setProperty(t.property(),t.value());this._model.endUndoMacro()},o.prototype.createColorPicker=function(e){return F(null,e)},o.prototype.createTextEditor=function(e,t){var i={};return e&&(i.width=e),t&&(i.height=t),$(document.createElement("textarea")).css(i).addClass("tv-control-input")},o.prototype.createCombo=function(e){var t=$(document.createElement("select")),i=e.reduce(function(e,t){return e.add($(document.createElement("option")).prop({value:t,text:t}))},$());return t.append(i)},o.prototype.createKeyCombo=function(e){var t=$(document.createElement("select"));return $.each(e||[],function(e,i){$(document.createElement("option")).prop({value:e,text:i}).appendTo(t)}),t},o.prototype.createFontEditor=function(e){var t=e||TradingView.factoryDefaults("chartproperties.editorFontsList");return this.createCombo(t)},o.prototype.createFontSizeEditor=function(e){var t=e||[10,11,12,14,16,20,24,28,32,40];return this.createCombo(t).addClass("tv-select-container-fontsize")},o.prototype.createSeriesMinTickEditor=function(){var e,t,i,o,n="<select><option value='default'>"+$.t("Default")+"</option>",r=[{priceScale:1,minMove:1,frac:!1},{priceScale:10,minMove:1,frac:!1},{priceScale:100,minMove:1,frac:!1},{priceScale:1e3,minMove:1,frac:!1},{priceScale:1e4,minMove:1,frac:!1},{priceScale:1e5,minMove:1,frac:!1},{priceScale:1e6,minMove:1,frac:!1},{priceScale:1e7,minMove:1,frac:!1},{priceScale:1e8,minMove:1,frac:!1},{priceScale:2,minMove:1,frac:!0},{priceScale:4,minMove:1,frac:!0},{priceScale:8,minMove:1,frac:!0},{priceScale:16,minMove:1,frac:!0},{priceScale:32,minMove:1,frac:!0},{priceScale:64,minMove:1,frac:!0},{priceScale:128,minMove:1,frac:!0},{priceScale:320,minMove:1,frac:!0}];for(e in r)t=r[e],i=t.priceScale+","+t.minMove+","+t.frac,o=t.minMove+"/"+t.priceScale,n+="<option value='"+i+"'>"+o+"</option>";return n+="</select>",$(n)},o.prototype.createPrecisionEditor=function(){var e,t="<select><option value='default'>"+$.t("Default")+"</option>";for(e=0;e<=8;e++)t+="<option value='"+e+"'>"+e+"</option>";return t+="</select>",$(t)},o.prototype.createLabeledCell=function(e,t,i){var o,n,r,s,a=null;return"number"==typeof e.valueOf()?(a=e,o=t,n=i):(o=e,n=t),o+="",r=this._labelToId(o),s=$("<td>"),$("<label>").html(o.length>0?$.t(o):"").attr("for",r).appendTo(s),a&&s.attr("colspan",a),n&&n.attr("id",r),s},o.prototype.createTableInTable=function(e){var t=$("<tr>").appendTo(e),i=$("<td>").appendTo(t);return $('<table cellpadding="0" cellspacing="0">').appendTo(i)},o.prototype._labelToId=function(e){return"control"+e.replace(/(^| )\w/g,function(e){return"-"+e.trim().toLowerCase()})+Math.floor(1e3*Math.random())},o.prototype.addRow=function(e){return $(document.createElement("tr")).appendTo(e)},o.prototype.addLabeledRow=function(e,t,i,o){var n,r=t&&t.length>0?$.t(t):"",s=$(document.createElement("tr")),a=$(document.createElement("td")).html(r);return o&&a.attr("colspan",2),i&&(n=this._labelToId(t),i.attr("id",n),
a.html('<label for="'+n+'">'+r+"</label>")),s.append(a).appendTo(e)},o.prototype.addEditorRow=function(e,t,i,o){var n=$(document.createElement("td"));return i.row=this.addLabeledRow(e,t,i,o),i.appendTo(n.appendTo(i.row)),i},o.prototype.addColorPickerRow=function(e,t){return this.addEditorRow(e,t,this.createColorPicker())},o.prototype.addOffsetEditorRow=function(e,t){var i=$("<input/>");return i.attr("type","text"),i.css("width","100px"),i.addClass("ticker"),this.addEditorRow(e,t,i)},o.prototype.addFontEditorRow=function(e,t){return this.addEditorRow(e,t,this.createFontEditor())},o.prototype.refreshStateControls=function(e,t,i){var o,n,r;for(o=0;o<t.length;o++){n=t[o],r=e[n.id];try{r.toggle(this.parseRule(n.visible,t,i))}catch(e){continue}r.attr("disabled",!this.parseRule(n.visible,t,i))}},o.prototype.parseRule=function(e,t,i){if(!e)return!0;var o=e.split("==");return!(o.length<2)&&i[o[0]].value()===o[1]},o.prototype.destroy=function(){for(var e=this._bindings.length;e--;)this._bindings[e].destroy();this._bindings.length=0},o.prototype.bindInteger=function(e,t,i,o,n){var l=[a(t.value())];void 0!==o&&l.push(r(1)),void 0!==n&&l.push(s(1e3)),this.bindControl(new p(e,t,l,!1,this.model(),i))},o.prototype.bindColor=function(e,t,i){this.bindControl(new T(e,t,!0,this.model(),i))},o.prototype.bindBoolean=function(e,t,i){this.bindControl(new b(e,t,!0,this.model(),i))},inherit(p,H),p.prototype.value=function(){var e,t=this._control.val();if(this._transformFunction)if(Array.isArray(this._transformFunction))for(e=0;e<this._transformFunction.length;e++)t=this._transformFunction[e](t);else t=this._transformFunction(t);return t},p.prototype.setValue=function(e){var t=this._control.val(),i=this._formatValue(e);t!==i&&this._control.val(i)},p.prototype.setValueToProperty=function(e){this._setter?this._setter.call(this,this.value()):this._undoModel.setProperty(this._property,e,this._undoText),this._changed=!1},inherit(f,p),inherit(_,H),_.prototype._forEachSubControl=function(e){this._subControlIds.forEach(function(t){var i="#"+t,o=this.control().find(i);e.call(this,o)},this)},_.prototype._parseSessions=function(e){var t,i,o=e.split("-",2);return 2!==o.length&&(o=["0","0"]),t=parseInt(o[0]),i=parseInt(o[1]),[Math.floor(t/100),t%100,Math.floor(i/100),i%100]},_.prototype.value=function(){var e,t,i,o=[];return this._forEachSubControl(function(e){o.push(e.val())}),e=function(e,t){return t.forEach(function(t){e=t(e)}),("0"+e).slice(-2)},t=[a(0),r(0),s(23)],i=[a(0),r(0),s(59)],e(o[0],t)+e(o[1],i)+"-"+e(o[2],t)+e(o[3],i)},_.prototype.setValue=function(e){var t=this._parseSessions(e);this._forEachSubControl(function(e){var i=e.val(),o=("0"+t[0]).slice(-2);t.shift(),i!==o&&e.val(o)})},inherit(m,H),m.prototype.value=function(){var e,t,i;return this._disabled?(this._control.attr("disabled",!0),null):(e=this._control.val(),t=this._toIntTransformer(e),t<0&&(t=0),i=this._mainSeries.bars().size(),i<=t&&(t=i-1),1e3*A(this._mainSeries.bars().valueAt(A(this._mainSeries.bars().lastIndex())-t))[TradingView.TIME_PLOT])},m.prototype.setValue=function(e){
var t,i,o;return this._disabled||null==e?void this._control.attr("disabled",!0):e<0?(this._control.val(-e),void this._property.setValue(this.value())):null===(t=this._mainSeries.data().plotValueToTimePointIndex(e/1e3,TradingView.TIME_PLOT,R.FromRight))?void(this._disabled=!0):(i=A(this._mainSeries.bars().lastIndex()),o=i-t,void(this._control.val()!==""+o&&this._control.val(o)))},inherit(g,H),g.prototype.value=function(){return this._control.val()},g.prototype.setValue=function(e){var t=this.value();e&&t!==e&&this._control.val(e)},inherit(v,H),v.prototype.value=function(){var e=this._control.val();return this._transformFunction&&(e=this._transformFunction(e)),e},v.prototype.setValue=function(e){var t,i;if(this._control.val(e),this._control.selectbox)try{t=this._control.find("[value='"+e+"']"),t.length>0&&(i=t[0],this._control.selectbox("change",i.value,i.text))}catch(e){}},v.prototype.propertyChanged=function(e){var t=e.value();"function"==typeof this._propertyChangedHook&&(t=this._propertyChangedHook(t)),this.setValue(t)},inherit(y,H),y.prototype.value=function(){return this._property.value()},y.prototype.setValue=function(e){return this._control.html(e)},inherit(b,H),b.prototype.value=function(){return this.control().is(":checked")},b.prototype.setValue=function(e){var t,i,o,n;return this.control().is(".visibility-checker")&&(e?(this.control().closest("tr").find(".slider-range").slider("enable"),this.control().closest("tr").find('input[type="text"]').each(function(){$(this).prop("disabled",!1)})):(this.control().closest("tr").find(".slider-range").slider("disable"),this.control().closest("tr").find('input[type="text"]').each(function(){$(this).prop("disabled",!0)}))),this.control().is(".visibility-switch")&&(t={opacity:e?1:.5},i=e?"enable":"disable",o=this.control().data("hides"),o?o.closest("td").css(t):(n=this.control(),n.parent().parent().data("visible",e).find("td").filter(function(){var e=$(this);return!e.find("label").length&&e.find(":checkbox").attr("id")!==n.attr("id")}).each(function(){var o=$(this);o.children().each(function(){var n=$(this);n.is(".ui-slider")?n.slider(i):n.is("select")?(n.selectbox(i),o.css(t)):n.is(".custom-select")?(n.data(i)(),o.css(t)):n.is(".tvcolorpicker-container")?(n.find("input").prop("disabled",!e),o.css(t)):(n.prop("disabled",!e),o.css(t))})}))),this.control().attr("checked",!!e)},inherit(S,H),S.prototype.value=function(){return this.control().is(":disabled")},S.prototype.setValue=function(e){return e=!!e,this._inverted&&(e=!e),this.control().parents("label").toggleClass("disabled",e),this.control().attr("disabled",e)},inherit(w,H),w.prototype.value=function(){return this.control().hasClass("active")},w.prototype.setValue=function(e){return this.control().toggleClass("active",!!e)},inherit(T,H),T.prototype.applyOldTransparency=function(){var e,t,i;this.transparencyProperty()&&(z.isHexColor(this.property().value())?(e=this.transparencyProperty().value?this.transparencyProperty().value():this.transparencyProperty(),t=V(this.property().value()),i=(100-e)/100,
this.control().val(D(O(t,i)))):this.control().val(this.property().value()),this.control().change())},T.prototype.transparencyProperty=function(){return this._transparencyProperty},T.prototype.value=function(){return this._control.val()},T.prototype.setValue=function(e){this._control.val(e),this._control.change(),this._control.color&&this._control.color.fromString(e)},inherit(P,H),P.prototype.value=function(){return this._control.slider("option","value")},P.prototype.setValue=function(e){this._control.slider("option","value",e)},inherit(C,b),C.prototype.onIntervalChanged=function(){+this._intervalProperty.value()<1440?this._control.attr({disabled:!1,checked:!!this._property.value()}):this._control.attr({disabled:!0,checked:!1})},C.prototype.value=function(){return this._control.is(":disabled")?this._property.value():b.prototype.value.call(this)},C.prototype.setValue=function(e){if(!this._control.is(":disabled"))return b.prototype.setValue.call(this,e)},C.prototype.destroy=function(){this._intervalProperty.listeners().unsubscribe(this,this.onIntervalChanged),delete this._intervalProperty,b.prototype.destroy.call(this,arguments)},x.prototype._attachToControl=function(e){var t=this;this._wv.subscribe(this._setValueBinded,{callWithLast:!0}),$(this._control).on("change",function(){t.setValueToProperty(t.value())})},x.prototype.control=function(){return this._control},x.prototype.value=function(){var e=$(this._control).val();return this._transformFunction&&(e=this._transformFunction(e)),e},x.prototype.setValue=function(e){$(this._control).val(e)},x.prototype.setValueToProperty=function(e){this._undoModel.undoHistory.setWatchedValue(this._wv,e,this._undoText)},x.prototype.watchedValue=function(){return this._wv},x.prototype.destroy=function(){this._wv.unsubscribe(this._setValueBinded)},inherit(E,x),E.prototype._attachToControl=function(e){var t=this;this._wv.subscribe(this.setValue.bind(this),{callWithLast:!0}),$(this._control).on("click",function(){t.setValueToProperty(t.value())})},E.prototype.value=function(){var e=$(this._control).attr("checked");return this._not&&(e=!e),this._transformFunction&&(e=this._transformFunction(e)),e},E.prototype.setValue=function(e){this._not&&(e=!e),$(this._control).attr("checked",!!e)},L.prototype.properties=function(){return this._properties},L.prototype.value=function(e){return this._control.slider("values",e)},L.prototype.setValue=function(e,t){this._control.slider("values",t,e.value()),this._inputsText&&$(this._inputsText[t]).val(e.value())},L.prototype.propertyChanged=function(e){this.setValue(e)},L.prototype.setValueToProperty=function(e,t){($(t).hasClass("from")||"from"===t)&&(this._undoModel.beginUndoMacro(this._undoText[0]),this._undoModel.setProperty(this._propFrom,e[0],this._undoText[0]),this._propFrom.setValue(e[0],0),this._undoModel.endUndoMacro()),($(t).hasClass("to")||"to"===t)&&(this._undoModel.beginUndoMacro(this._undoText[1]),this._undoModel.setProperty(this._propTo,e[1],this._undoText[1]),this._propTo.setValue(e[1],1),this._undoModel.endUndoMacro())},
L.prototype.destroy=function(){this._propFrom&&this._propTo&&(this._propFrom.listeners().unsubscribe(this,H.prototype.propertyChanged),this._propTo.listeners().unsubscribe(this,H.prototype.propertyChanged))},inherit(I,H),I.prototype.value=function(){var e=[];return this._control.each(function(){var t=$(this);t.is(":checked")&&e.push(t.attr("value"))}),e.join(this._separator)},I.prototype.setValue=function(e){var t=e.split(this._separator).filter(Boolean);this._control.each(function(){var e=$(this),i=-1!==t.indexOf(e.attr("value"));e.attr("checked",i),e.parents("label").toggleClass("active",i)})},t.PropertyPage=o,t.UppercaseTransformer=n,t.GreateTransformer=r,t.LessTransformer=s,t.ToIntTransformer=a,t.ToFloatTransformer=l,t.ToFloatTransformerWithDynamicDefaultValue=c,t.ToFloatLimitedPrecisionTransformer=h,t.ToAsciiTransformer=u,t.ReplaceEmptyTransformer=d,t.SimpleStringBinder=p,t.FloatBinder=f,t.SessionBinder=_,t.BarTimeBinder=m,t.SymbolBinder=g,t.SimpleComboBinder=v,t.StaticContentBinder=y,t.BooleanBinder=b,t.DisabledBinder=S,t.ColorBinding=T,t.SliderBinder=P,t.CheckboxWVBinding=E,t.RangeBinder=L}).call(t,i(37))},function(e,t,i){"use strict";function o(e){var t=s.parseRgb(e),i=t.map(function(e){return e>50?e-50:0});return s.rgbToString(i)}function n(e){var t,i,o,n=[];for(t=0,i=e;t<i.length;t++)o=i[t],null!==s.tryParseRgb(o)&&n.push(o);return n}function r(e,t){void 0===t&&(t={});var i=$('<span class="tvcolorpicker-container">');return null!==e&&i.appendTo(e),void 0!==t.addClass&&i.addClass(t.addClass),$('<div class="tvcolorpicker-transparency">').appendTo(i),$('<input class="colorpicker-widget">').tvcolorpicker({customColors:n(a.getJSON("pickerCustomColors",[])),direction:t.direction,hideTransparency:!!t.hideTransparency}).on("change",function(){$(this).css("border-color",o($(this).val()||l))}).bind("customcolorchange",function(e,t){a.setJSON("pickerCustomColors",t)}).appendTo(i),i}var s,a,l;Object.defineProperty(t,"__esModule",{value:!0}),i(13),i(977),s=i(55),a=i(48),l="#727272",t.addColorPicker=r},,,,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){function t(e,t){return window.is_authenticated?$.ajax({data:{pine_id:t,username_recip:e},dataType:"json",type:"POST",url:"/pine_perm/add/"}):$.Deferred().reject()}function i(e,t){return window.is_authenticated?$.ajax({data:{pine_id:t,username_recip:e},dataType:"json",type:"POST",url:"/pine_perm/remove/"}):$.Deferred().reject()}function o(e){return window.is_authenticated?$.ajax({data:{pine_id:e},dataType:"json",type:"POST",url:"/pine_perm/list_users/"}):$.Deferred().reject()}function n(){return window.is_authenticated?$.ajax({dataType:"json",type:"POST",url:"/pine_perm/list_scripts/"}):$.Deferred().reject()}e.add=t,e.remove=i,e.listUsers=o,e.listScripts=n}(t.PinePerm||(t.PinePerm={}))},function(e,t,i){"use strict";var o=i(53).TVXWindowEvents,n=function(){function e(){_=TVSettings.getJSON(v,[]),m=TVSettings.getJSON(y,{})}function t(){_&&(TVSettings.setJSON(v,_),TVSettings.setJSON(y,m))}function i(t){_||e()
;var i="Script$"+t+"@tv-scripting";return-1!==_.indexOf(i)}function r(i,r){var s,a;_||e(),s="Script$"+i+"@tv-scripting",-1===(a=_.indexOf(s))&&(_.push(s),null!=r&&(m[s]=r),t(),o.emit("StudyFavoritesChanged",JSON.stringify({favorites:_,favoritesExtra:m})),window.is_authenticated&&n.info([i]).done(function(e){var t,i;e&&e[0]&&e[0].imageUrl&&(t=e[0].imageUrl,i=!1,$(".agree").each(function(){var e,o=$(this);o.data("image_url")===t&&(e=o.data("controller"))&&(e.setAgree(),i=!0)}),i||$.ajax({url:"/vote-for-chart/",type:"POST",dataType:"json",data:{image_url:e[0].imageUrl,vote:1}}))}))}function s(i){var n,r;_||e(),n="Script$"+i+"@tv-scripting",-1!==(r=_.indexOf(n))&&(_.splice(r,1),delete m[n],t(),o.emit("StudyFavoritesChanged",JSON.stringify({favorites:_,favoritesExtra:m})))}function a(){b||($(document.body).on("click",".pubscript-button",function(e){var t,o,n;e.preventDefault(),t=$(this),(o=t.data("script-id-part"))&&(n=i(o),n?s(o):r(o,t.data()),c())}),o.on("StudyFavoritesChanged",function(e){var t=JSON.parse(e);_=t.favorites||t,m=t.favoritesExtra||{},c()}),loginStateChange.subscribe(null,l),b=!0),_||e(),c()}function l(){e(),c()}function c(){$(".pubscript-button").each(function(){var e=this,t=$(e).data("script-id-part");t&&h(e,!!i(t))})}function h(e,t){var i=$(e),o=i.hasClass("active");(t=1 in arguments?!!t:!o)!==o&&i.toggleClass("active",t)}function u(e){var t=$.ajax({url:"/pubscripts-suggest-json/",type:"GET",data:{search:e},dataType:"json"});return t.done(function(e){if(e&&e.results)for(var t=0;t<e.results.length;t++)g[e.results[t].scriptIdPart]=TradingView.clone(e.results[t])}),t}function d(e){var t,i,o,n=$.Deferred(),r=[],s=[];for(t=0;t<e.length;t++)i=e[t],g[i]?r.push(TradingView.clone(g[i])):s.push(i);return s.length?(o=$.ajax({url:"/pubscripts-get/",type:"POST",data:{scriptIdPart:s.join(",")},dataType:"json"}),o.done(function(e){var t,i;e=e||[];for(t in e)i=e[t],g[i.scriptIdPart]=TradingView.clone(i),r.push(i);n.resolve(r)}).fail(function(){n.reject()}),n):n.resolve(r).promise()}function p(e){e.forEach(function(e){delete g[e]})}function f(){g=[]}var _=null,m={},g={},v="studyMarket.favorites",y="studyMarket.favorites.extra",b=!1;return{initButtons:a,suggest:u,info:d,invalidateCache:p,cleanCache:f}}();e.exports=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i(13);var o=function(){function e(e){this._url="",this._cachedData=null,this._cacheComplete=!1,this._requestSend=!1,this._url=e}return e.prototype.getCachedData=function(){return this._cachedData},e.prototype.requestData=function(e){var t=this;if(!this._cacheComplete&&!this._requestSend)return this._requestSend=!0,void $.getJSON(this._url,function(i){t._requestSend=!1,t._cacheComplete=!0,t._cachedData=i,e&&e(t._cachedData)});this._cachedData&&e&&e(this._cachedData)},e.prototype.invalidate=function(){this._cachedData=null,this._cacheComplete=!1},e}();t.RequestCache=o},,,,function(e,t,i){"use strict";var o,n;Object.defineProperty(t,"__esModule",{value:!0}),o=i(20),n={filterNamesMap:{script_type:"Indicators and Strategies",
"script_type-indicators":"Indicators","script_type-strategies":"Strategies",stream:"All Markets","stream-stocks":"Stocks","stream-indices":"Indices","stream-commodities":"Commodities","stream-currencies":"Currencies","stream-bitcoin":"Bitcoin","interval-all":"All Intervals","interval-m":"Short Term","interval-h":"Medium Term","interval-dwm":"Long Term","sort-unmoderated":"Unmoderated","sort-trending":"Trending","sort-discussed":"Most Discussed","sort-viewed":"Most Viewed","sort-agreed":"Most Agreed","sort-suggested":"Suggested","sort-recent":"All Ideas","time-day":"Today","time-week":"This Week","time-month":"This Month","time-all":"All Time","by-everyone":"Everyone","by-following":"Following","by-me":"My Ideas"},goProFeaturesMap:{customIntervals:"Add Custom Interval",intradaySpread:"Inraday Spread",kagiRenko:"Japanese Intraday Chart",extendedHours:"Timezones Extended Hours",alerts:{prefix:"New Alerts Limit",widget:"Widget",chart:"Chart Header"},multipleCharts:"Multiple Charts Layout",savedChartsLimit:"Save Chart Limit",studyLimit:"Studies Limit",multipleWatchLists:{prefix:"Watchlists",new:"Create New List",rename:"Rename List",saveAs:"Save List As"},importWatchlist:"Watchlists Import Watchlist",exportWatchlist:"Watchlists Export Watchlist",BATSExchangePopup:"BATS Exchange Popup",DataQualityPopup:"Data Quality Popup",CHXEURExchangePopup:"CHXEUR Exchange Popup",FreeDelayPopup:"Free Delay Popup",proRTProduct:"Volume Profile",studyOnStudy:"Unlimited Study on Study"},trackFeature:{savedChartsLimit:!0,BATSExchangePopup:!0,CHXEURExchangePopup:!0,FreeDelayPopup:!0,DataQualityPopup:!0,intradaySpread:!0,studyOnStudy:!0},trackGoPro:function(e,t,i){i&&!t&&(t=i,i=null);var r=n.goProFeaturesMap[t];if(r){if(i){if("string"==typeof r)return;r="{0} {1}".format(r.prefix,r[i])}(0,o.trackEvent)(e,r)}}},t.default=n,e.exports=t.default},,function(e,t,i){"use strict";var o=i(945).RequestCache,n=i(0).getLogger("Chart.TVBackendAdapter"),r=function(){var e={};return e.getGlobalNotifications=function(e,t){var i={count:t};return e&&(i.lastId=e),$.ajax({url:"/global-notifications/",cache:!1,dataType:"json",type:"GET",data:i})},e.getCharts=function(e,t,i){$.getJSON("/my-charts/",{limit:i},e).fail(t)},e.removeChart=function(e,t){$.post("/deletechart/",{uid:[e]},function(e){e.error||("string"==typeof t?document.location=t:"function"==typeof t?t():window.location.reload())})},e.saveChart=function(e,t,i,o,n,r,s){$.post("/savechart/",o,r).fail(s)},e.loadChart=function(e){var t="/chart/"+e.url+"/";/^\/chart(\/|$)/.test(location.pathname)?open(t,"_blank"):location.href=t},e.removeStudyTemplate=function(e,t){$.post("/remove-study-template/",{name:e},t)},e.getStudyTemplateContent=function(e,t){$.get("/study-template/?templateName="+encodeURIComponent(e),t)},e.saveStudyTemplate=function(e,t){$.post("/save-study-template/",e,t).error(function(e){n.logError(e.responseText)})},e._templatesCache=new o("/study-templates-ext/"),e.getStudyTemplatesList=function(t){e._templatesCache.requestData(t)},e.invalidateStudyTemplatesList=function(){
e._templatesCache.invalidate()},e}();e.exports=r},function(e,t,i){"use strict";function o(e,t,i){return void 0===i&&(i="promise rejected by time-out"),new Promise(function(o,n){var r=setTimeout(function(){return n(i)},t);e.then(function(e){clearTimeout(r),o(e)}),e.catch(function(e){clearTimeout(r),n(e)})})}Object.defineProperty(t,"__esModule",{value:!0}),t.makeTimeLimited=o},,,,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 11" width="11" height="11"><path fill="none" fill-rule="evenodd" stroke="#9DB2BD" d="M10.5 6v3.5a1 1 0 0 1-1 1h-8a1 1 0 0 1-1-1v-8a1 1 0 0 1 1-1H5m5.5 0L6 5M7 .5h3.5V4"/></svg>'},function(e,t,i){"use strict";var o=i(55),n=o.rgba,r=o.areEqualRgb,s=o.areEqualRgba,a=o.normalizeHue,l=o.normalizeHsvSaturation,c=o.normalizeValue,h=o.hsv,u=o.rgbToHsv,d=o.hsvToRgb,p=o.rgbToString,f=o.rgbaToString,_=o.parseRgb,m=o.parseRgba,g=i(978);!function(e){function t(e){return""===e?e:f(m(e))}function i(e){e&&(e.join||(e=e?(""+e).split(","):[]),y=e)}function o(S){function w(t){var i=!1,o=_(t);return e.each(y,function(e,t){if(r(_(t),o))return i=!0,!1}),!i&&(y=[p(o)].concat(y.slice(0,v-1)),!0)}function T(t,i,o){var r=e(this);t=f(n(_(t),i)),P.call(this,t),r.removeData("tvcolorpicker").removeData("tvcolorpicker-custom-color"),o&&(I(),r.blur())}function P(t){var i=e(this);i.val(t),i.change(),t?i.trigger("pick-color",t):i.trigger("pick-transparent"),C.call(this,t)}function C(t){if(""===t)return void e(this).addClass("tvcolorpicker-gradient-widget");e(this).removeClass("tvcolorpicker-gradient-widget"),e(this).css({backgroundColor:t,color:t})}function x(t,i){var o,n,s,a,l,c;return i=i||{},o=this,n=e(o).val().toLowerCase(),s=document.createElement("table"),a=document.createElement("tbody"),s.appendChild(a),c=0,e.each(t,function(t,s){var h,u;c++,t%v==0&&(l=e("<tr></tr>").appendTo(a)),h=e('<td class="tvcolorpicker-cell"></td>').appendTo(l),u=e('<div class="tvcolorpicker-transparency"><div class="tvcolorpicker-swatch"></div></div>').appendTo(h).find(".tvcolorpicker-swatch").data("color",s),i.addClass&&u.addClass(i.addClass),s&&(s=s.toLowerCase(),n&&r(_(n),_(s))&&u.addClass("active"),u.css({backgroundColor:s}).data("color",s),u.bind("click",function(){T.call(o,s,A.val(),!0)}))}),e(s).addClass("tvcolorpicker-table"),c?s:e()}function E(t,i,o){var n,r=e(t).offset(),s={left:e(document).scrollLeft(),top:e(document).scrollTop()},a={width:e(t).outerWidth(),height:e(t).outerHeight()},l={width:e(window).width(),height:e(window).height()},c={width:e(i).outerWidth(),height:e(i).outerHeight()};switch("function"==typeof o.direction?o.direction():o.direction){default:case"down":n={top:r.top+a.height+o.offset,left:r.left+o.drift};break;case"right":n={top:r.top+o.drift,left:r.left+a.width+o.offset}}n.top+c.height>l.height+s.top&&(n.top=l.height-c.height+s.top),r.left+c.width>l.width&&(n.left=l.width-c.width),n.left+="px",n.top+="px",i.css(n)}function L(t){function i(e){var t=e.originalEvent,i=e.offsetX||e.layerX||t&&(t.offsetX||t.layerX)||0,o=e.offsetY||e.layerY||t&&(t.offsetY||t.layerY)||0
;k.css({left:i+"px",top:o+"px"}),H[0]=a(i/N),H[1]=l(1-o/B),D.css({backgroundColor:p(d(h(H[0],H[1],1)))}),w()}function o(t){1==t.which&&(z=!1,j.is(".opened")&&e(U).get(0).focus())}function r(t){var i=t.pageY,o=e(R),n=o.offset().top,r=i-n;return r>o.height()?o.height():r<0?0:r}function v(e){var t=r(e);V.css({top:t+"px"}),H[2]=c(1-Math.max(0,Math.min(t,B))/B),w()}function S(t){1==t.which&&(F=!1,e(document).unbind("mouseup",S),j.is(".opened")&&e(U).get(0).focus())}function w(){var e,t;$&&($=!1,j.find(".tvcolorpicker-swatch.active").removeClass("active")),e=n(d(H),A.val()),s(m(U.val().toUpperCase()),e)||(t=f(e),U.data("tvcolorpicker-custom-color",t),P.call(U,t))}var C,L,I,k,M,O,D,V,R,B,N,z,F,$,H,W=!1,U=e(this),j=e('<div class="tvcolorpicker-popup opened">'),q=e('<div class="tvcolorpicker-swatches-area"></div>').appendTo(j);return q.append(x.call(this,["rgb(0, 0, 0)","rgb(66, 66, 66)","rgb(101, 101, 101)","rgb(152, 152, 152)","rgb(182, 182, 182)","rgb(203, 203, 203)","rgb(216, 216, 216)","rgb(238, 238, 238)","rgb(242, 242, 242)","rgb(255, 255, 255)"])),q.append(x.call(this,["rgb(151, 0, 0)","rgb(255, 0, 0)","rgb(255, 152, 0)","rgb(255, 255, 0)","rgb(0, 255, 0)","rgb(0, 255, 255)","rgb(73, 133, 231)","rgb(0, 0, 255)","rgb(152, 0, 255)","rgb(255, 0, 255)"])),q.append(x.call(this,["rgb(230, 184, 175)","rgb(244, 204, 204)","rgb(252, 229, 205)","rgb(255, 242, 204)","rgb(217, 234, 211)","rgb(208, 224, 227)","rgb(201, 218, 248)","rgb(207, 226, 243)","rgb(217, 210, 233)","rgb(234, 209, 220)","rgb(221, 126, 107)","rgb(234, 153, 153)","rgb(249, 203, 156)","rgb(255, 229, 153)","rgb(182, 215, 168)","rgb(162, 196, 201)","rgb(164, 194, 244)","rgb(159, 197, 232)","rgb(180, 167, 214)","rgb(213, 166, 189)","rgb(204, 65, 37)","rgb(224, 102, 102)","rgb(246, 178, 107)","rgb(255, 217, 102)","rgb(147, 196, 125)","rgb(118, 165, 175)","rgb(109, 158, 235)","rgb(111, 168, 220)","rgb(142, 124, 195)","rgb(194, 123, 160)","rgb(166, 28, 0)","rgb(204, 0, 0)","rgb(230, 145, 56)","rgb(241, 194, 50)","rgb(106, 168, 79)","rgb(69, 129, 142)","rgb(60, 120, 216)","rgb(61, 133, 198)","rgb(103, 78, 167)","rgb(166, 77, 121)","rgb(133, 32, 12)","rgb(153, 0, 0)","rgb(180, 95, 6)","rgb(191, 144, 0)","rgb(56, 118, 29)","rgb(19, 79, 92)","rgb(17, 85, 204)","rgb(11, 83, 148)","rgb(53, 28, 117)","rgb(116, 27, 71)","rgb(91, 15, 0)","rgb(102, 0, 0)","rgb(120, 63, 4)","rgb(127, 96, 0)","rgb(39, 78, 19)","rgb(12, 52, 61)","rgb(28, 69, 135)","rgb(7, 55, 99)","rgb(32, 18, 77)","rgb(76, 17, 48)"])),C=e('<div class="tvcolorpicker-custom-area"></div>').css({display:"none"}).appendTo(j),L=e('<div class="tvcolorpicker-hsv"></div>').appendTo(C),I=e('<div class="tvcolorpicker-hs"></div>').appendTo(L),k=e('<div class="tvcolorpicker-hs-handle"></div>').appendTo(I),M=e('<div class="tvcolorpicker-hs-area"></div>').appendTo(I),O=e('<div class="tvcolorpicker-vv">').appendTo(L),D=e('<div class="tvcolorpicker-v"></div>').appendTo(O),V=e('<div class="tvcolorpicker-v-handle"></div>').appendTo(D),R=e('<div class="tvcolorpicker-v-area"></div>').appendTo(D),A=g(e(this),t.hideTransparency),
A.initEvents(),A.updateColor(),A.$el.appendTo(j),A.val(m(U.val()||b)[3]),B=I.height(),N=I.width(),z=!1,F=!1,$=!0,H=[0,0,.5],M.bind("mousedown",function(t){1==t.which&&(z=!0,e(document).bind("mouseup",o),i(t),t.preventDefault())}),M.bind("mousemove",function(e){z&&(i(e),e.preventDefault())}),e(A).on("change",function(){if(W)return void w();T.call(this,e(this).val()||b,A.val())}.bind(this)),e(A).on("afterChange",function(){e(this).focus()}.bind(this)),O.bind("mousedown",function(t){1==t.which&&(F=!0,e(document).bind("mouseup",S),v(t),t.preventDefault())}),e(document).bind("mousemove",function(e){F&&(v(e),e.preventDefault())}),e('<a class="tvcolorpicker-custom-button _tv-button">'+window.t("Custom color...")+"</a>").appendTo(j).bind("click",function(){var t,i=e(this).is(".active");i||C.css({minWidth:q.width()+"px",minHeight:q.height()+"px"}),e(this)[i?"removeClass":"addClass"]("active"),W=e(this).is(".active"),C.css({display:i?"none":"block"}),q.css({display:i?"block":"none"}),i?U.removeData("tvcolorpicker-custom-color"):(B=I.height(),N=I.width(),t=_(U.val()||b),H=u(t),k.css({left:~~(H[0]*N)+"px",top:~~((1-H[1])*B)+"px"}),V.css({top:~~((1-H[2])*B)+"px"}),D.css({backgroundColor:p(d(h(H[0],H[1],1)))}))}),j.append(e(x.call(this,y,{addClass:"tvcolorpicker-user"})).addClass("tvcolorpicker-user-swatches")),e(document.body).append(j),E(U,j,t),j}function I(){e(".tvcolorpicker-popup").removeClass("opened").remove(),e(A).off("change"),e(A).off("afterChange"),e(k).data("tvcolorpicker",null),e(k).each(function(){var t,i=e(this).data("tvcolorpicker-custom-color");i&&(w(i)&&e(this).trigger("customcolorchange",[y]),e(this).data("tvcolorpicker-custom-color",null)),t=e(this).data("tvcolorpicker-previous-color"),t&&t!=e(this).val()&&e(this).trigger("change"),e(this).removeData("tvcolorpicker-previous-color")})}var A,k;return S=e.extend({},o.options,S||{}),k=this,S&&"customColors"in S&&i(S.customColors),this.each(function(){function i(){var e=t(s.val());C.call(s,e)}var o,n,r,s=e(this);s.val(t(s.val())),o=null,n=!1,s.addClass("tvcolorpicker-widget").attr("autocomplete","off").attr("readonly",!0),r=function(){s.data("tvcolorpicker")||(I.call(s),o=L.call(s,S),s.data("tvcolorpicker-custom-color",null),s.data("tvcolorpicker",o),s.data("tvcolorpicker-previous-color",s.val()),o.bind("mousedown click",function(t){e(t.target).parents().andSelf().is(o)&&(s.focus(),n=!0,setTimeout(function(){n=!1},0))}))},s.on("touchstart",r),s.focus(r),I.call(s),s.bind("blur",function(e){n?e.stopPropagation():I.call(s)}),s.change(function(e){i()}),i()})}var v,y,b;if(!e)throw Error("This program cannot be run in DOS mode");o.setCustomColors=i,e.fn.tvcolorpicker=o,v=10,y=[],b="rgb(14, 15, 16)",o.options={direction:"down",offset:0,drift:0}}(window.jQuery)},function(e,t,i){"use strict";var o=function(){function e(e,t){this.mouseFlag=!1,this.accuracy=2,this.value=1,this.colorInput=e,this.$el=$('<div class="transparency-slider wide-slider ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all">'),t&&this.$el.hide(),
this.$gradient=$('<div class="gradient">').appendTo(this.$el),this.$roller=$('<a href="#" class="ui-slider-handle ui-state-default ui-corner-all without-shift-handle-left">').appendTo(this.$gradient)}return e.prototype.calculateRollerPosition=function(e){var t=e.pageX,i=this.$gradient.offset().left,o=t-i,n=this.$gradient.width();return o>n?100:o<0?0:~~(o/n*100)},e.prototype.toRgb=function(e){var t;return~e.indexOf("#")?e:(t=e.match(/[0-9.]+/g),t?"rgb("+t.slice(0,3).join(", ")+")":"rgb(127, 127, 127)")},e.prototype.setValue=function(e){if(1===e)return void(this.value=e);this.value=e.toFixed(this.accuracy)},e.prototype.updateRoller=function(){this.$roller.css("left",100-100*this.value+"%")},e.prototype.rollerMoveHandler=function(e){if(this.mouseFlag){var t=this.calculateRollerPosition(e);this.setValue((100-t)/100),$(this).trigger("change",[this.val()]),this.$roller.css("left",t+"%")}e.preventDefault()},e.prototype.mouseupHandler=function(e){this.mouseFlag&&(this.mouseFlag=!1,$(this).trigger("afterChange",[this.val()]))},e.prototype.initEvents=function(){var e=function(e){return this.rollerMoveHandler(e)}.bind(this),t=function(i){return $(document).off("mousemove mouseup",e),$(document).off("mouseup",t),this.mouseupHandler(i)}.bind(this);this.$el.on("mousedown",function(i){this.mouseFlag=!0,$(document).on("mousemove mouseup",e),$(document).on("mouseup",t),i.preventDefault()}.bind(this)),this.colorInput.on("change",function(e){this.updateColor()}.bind(this))},e.prototype.removeEvents=function(){},e.prototype.updateColor=function(){var e=this.colorInput.val()||"black",t=this.toRgb(e),i=["-moz-linear-gradient(left, %COLOR 0%, transparent 100%)","-webkit-gradient(linear, left top, right top, color-stop(0%,%COLOR), color-stop(100%,transparent))","-webkit-linear-gradient(left, %COLOR 0%,transparent 100%)","-o-linear-gradient(left, %COLOR 0%,transparent 100%)","linear-gradient(to right, %COLOR 0%,transparent 100%)"];$.browser.msie?this.$gradient.css("filter","progid:DXImageTransform.Microsoft.gradient(startColorstr='"+t+"', EndColor=0, GradientType=1)"):i.forEach(function(e){this.$gradient.css("background-image",e.replace(/%COLOR/,t))}.bind(this))},e.prototype.val=function(e){return void 0!==e&&(this.setValue(+e),this.updateRoller()),this.value},function(t,i){return new e(t,i)}}();e.exports=o},function(e,t,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n,r,s,a,l;Object.defineProperty(t,"__esModule",{value:!0}),t.AddCompareDialog=void 0,n=function(){function e(e,t){var i,o;for(i=0;i<t.length;i++)o=t[i],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),r=i(926),s=i(1039),a=i(922),i(1041),l=null,t.AddCompareDialog=function(){function e(t){o(this,e),this._chartWidgetCollection=t,this._$symbolSearchPopup=null,this._dialog=null,this._compareTab=new r.CompareTab(this._chartWidgetCollection,this),
this._addSymbolTab=new s.AddSymbolTab(this._chartWidgetCollection,this)}return n(e,[{key:"show",value:function(){var e,t=this,i=[];return i.push({name:$.t("Compare"),page:this._compareTab.$tab.addClass("tv-compare-dialog__tab-page")}),i.push({name:$.t("Add Symbol",{context:"compare_or_add_symbol_dialog"}),page:this._addSymbolTab.$tab.addClass("tv-compare-dialog__tab-page")}),e=(0,a.createTabbedDialog)({tabs:i,width:400,tabStateSaveKey:"CompareAddDialog.tab",destroyOnClose:!0,withScroll:!1,addClass:"tv-compare-dialog",tabsScrollBoxAddClass:"tv-compare-dialog__scroll-box",tabAddClass:"tv-compare-dialog__tab",isClickOutFn:function(e){if(t._compareTab.isClickOnTab(e)||t._addSymbolTab.isClickOnTab(e))return!1}}),l&&l.close(),this._dialog=e.dialog,this._dialog.open(),l=this._dialog,this._dialog}},{key:"getZIndex",value:function(){return this._dialog.zIndex}}]),e}()},function(e,t){},function(e,t){},,,,,function(e,t,i){"use strict";(function(t){function o(e){function i(e,t){var i,o,r=[],s=n[ot].count;for(i=0;i<s;i++)r.push(Ze[i].chartWidget.state(e,t));return o={layout:ot,charts:r},st.value()&&(o.symbolLock=1),at.value()&&(o.intervalLock=1),lt.value()&&(o.trackTimeLock=1),l.hideAllDrawings().value()&&(o.hideAllDrawings=!0),o}function o(e){var t,i=$.Deferred(),o=[],r=n[ot].count;for(t=0;t<r;t++)o.push(Ze[t].chartWidget.asyncState(e));return $.when.apply($,o).then(function(){var e,t={charts:[]};for(e=0;e<arguments.length;e++)t.charts.push(arguments[e]);i.resolve(t)}),i}function L(){if(it&&!Ie)for(var e=0;e<it.count;e++)I(e);else I(tt);Ve.trigger("chart-rect-update",Ve[0].getBoundingClientRect())}function I(e){var t,i,o=Ze[e];o&&(t=Ie?n.s.sizer(0,{width:Ee.value(),height:Le.value()},Ge,Ye):it.sizer(e,{width:Ee.value(),height:Le.value()},Ge,Ye),i={width:Math.max(Math.round(t.width||0)-2*Xe,0),height:Math.max(Math.round(t.height||0)-2*Xe,0),top:Math.max(Math.round(t.top||0),0),left:Math.max(Math.round(t.left||0),0)},o.metrics=i,o.body.value().css(i),o.width.setValue(i.width),o.height.setValue(i.height))}function A(){for(var e=0;e<Ze.length;e++)Ze[e].chartWidget.resizeSeriesControlUI()}function k(){for(var e=0;e<Ze.length;e++)Ze[e].chartWidget.tickSeriesControlClock()}function M(){for(var e=0;e<Ze.length;e++)if(!Ze[e].chartWidget||!Ze[e].chartWidget.model())return!1;return!0}function O(t){function i(){a.visible.setValue(!a.hiddenInLayout.value()&&e.resizerBridge.visible.value())}var o,n,s,a;return t=Object.assign({chartWidgetCollection:qe,isActive:0===Ze.length,barsMarksContainersFactory:D,undoHistory:De},t||{}),n=$(document.createElement("div")).addClass("chart-container").appendTo(Ve).css({position:"absolute",overflow:"hidden"}),n.on("mousedown touchstart",function(){M()&&Ke.setValue(o)}),s=Ze.length,a={alive:new f(!0),body:new f(n),width:new f,height:new f,hiddenInLayout:new f(!1),visible:new f,rdState:new _},a.rdState.pushOwner(a),Ze.push(a),I(s),a.hiddenInLayout.subscribe(i),e.resizerBridge.visible.subscribe(i),i(),Object.assign(t,a.rdState.bridge()),a.chartWidget=o=new r.ChartWidget(t),
qe.firstWidgetInitialized||o.chartWidgetInitialized.subscribe(null,function(){qe.firstWidgetInitialized=!0,A()},!0),!Je&&e.timingsEnabled&&(a.timingsMeter=new P(s+""),a.chartWidget.setTimingsMeter(a.timingsMeter)),o.createBranding(),t.containsData?o.finishInitWithoutConnect():o.connect(),B(),N(),Be.fire(o),o}function D(e){var t,i,o,n=[];return d.enabled("charting_library_base")?(i=new v(e),n.push(i),o=new y(e),n.push(o)):(t=new x(e,V),n.push(t)),n}function V(e){e=Object.assign({},e,{chartWidgetCollection:qe});var t=new E.ChartPage(e);TradingView.historyManager.push(t)}function R(e,t){var i,o,r,s;e in n||(e="s"),i=n[e].count,h.emit("layout_about_to_be_changed",e),ot=e,Ie=t,Ae.setValue(Ie),it=n[e];for(o=0;o<i||o<Ze.length;o++)r=t?tt===o:o<i,r?(Ze[o]?(Ve.append(Ze[o].body.value()),Ze[o].hiddenInLayout.setValue(!1),(s=nt.shift())&&(rt=!0,Ze[o].chartWidget.loadContent(s.content),rt=!1)):O($.extend({},ke,nt.shift()||(Ke.value()?{content:Ke.value().state()}:null)||{},0===o||st.value()?{}:{defSymbol:null})),Ze[o].body.value().toggleClass("multiple",i>1),I(o)):Ze[o]&&(Ze[o].hiddenInLayout.setValue(!0),Ze[o].body.value().detach());return B(),h.emit("layout_changed"),!0}function B(){var e,t=Math.min(it.count,Ze.length)-1;if(t<0)return void Ke.deleteValue();e=tt,e<0&&(e=0),e>t&&(e=t),Ke.setValue(Ze[e].chartWidget)}function N(){var e,t;for(e=Ze.length;e--;)t=e===tt,Ze[e].body.value().toggleClass("active",t).toggleClass("inactive",!t)}function z(){return Ze.filter(function(e){return!e.hiddenInLayout.value()}).sort(function(e,t){return e.metrics.top-t.metrics.top||e.metrics.left-t.metrics.left})}function F(){var e,t,i,o=xe.value();"s"!==o&&(e=n[o].count,Ae.value()||(Qe=z()),t=et+1,i=Qe[t],!i||t>e?(i=Qe[0],et=0):et=t,Ke.setValue(i.chartWidget),Ae.value()&&R(o,!0))}function H(e){var t=Ke.value();return!!t&&t.trySetChartStyle(e)}function W(e){var t,i,o,n;Fe!==e&&(Fe&&(Fe.modelCreated().unsubscribe(null,U),(t=Fe.model())&&(i=t.mainSeries().properties(),i.style.unsubscribe(null,j),o=t.model(),o.onSelectedSourceChanged().unsubscribe(null,q),Fe=null)),e&&(n=e.model(),n?U(n):e.modelCreated().subscribe(null,U),Fe=e))}function U(e){var t,i=e.mainSeries().properties();i.style.subscribe(null,j),j(i.style),t=e.model(),t.onSelectedSourceChanged().subscribe(null,q),q(e.selectedSource())}function j(e){Ne.setValue(e.value())}function q(e){ze.setValue(e)}function G(e){var t,i,o,n;if(e!==st.value()){if(De.beginUndoMacro("Symbol Lock"),e)for(t=Ke.value(),i=t.getSymbol(),o=0;o<Ze.length;o++)(n=Ze[o].chartWidget)!==t&&n.getSymbol()!==i&&n.setSymbol(i);De.setWatchedValue(st,e,"Symbol Lock"),De.endUndoMacro()}}function Y(e){var t,i,o,n;if(e!==at.value()){if(De.beginUndoMacro("Interval Lock"),e)for(t=Ke.value(),i=t.getResolution(),o=0;o<Ze.length;o++)(n=Ze[o].chartWidget)!==t&&n.getResolution()!==i&&n.setResolution(i);De.setWatchedValue(at,e,"Resolution Lock"),De.endUndoMacro()}}function X(e){lt.value()!==e&&De.setWatchedValue(lt,e,"Track Time")}function K(e){return xe.value()!==e&&(De.pushUndoCommand(new p(qe,e)),!0)}function J(e){
st.value()?Z(e):Ke.value().setSymbol(e)}function Z(e){var t,i,o=!1;for(t=0;t<Ze.length;t++)i=Ze[t].chartWidget,(i.model().mainSeries().properties().symbol.value()!==e||d.enabled("same_data_requery"))&&(o||(De.beginUndoMacro("Change Symbol"),o=!0),i.setSymbol(e));o&&De.endUndoMacro()}function Q(e){var t,i,o;if(!rt)if(at.value()){for(t=!1,i=0;i<Ze.length;i++)o=Ze[i].chartWidget,o.model().mainSeries().properties().interval.value()!==e&&(t||(De.beginUndoMacro("Change Resolution"),t=!0),o.setResolution(e));t&&De.endUndoMacro()}else Ke.value().setResolution(e)}function ee(e){var t,i,o;if(e&&e.onlyActiveChart||Ie)return{layout:"s",hidpiRatio:window.hidpiCanvasRatio||1,charts:[Ke.value().images()]};for(t=[],i=it.count,o=0;o<Ze.length&&o<i;o++)t.push(Ze[o].chartWidget.images());return{layout:ot,hidpiRatio:window.hidpiCanvasRatio||1,charts:t}}function te(){var e,t=[];for(e=0;e<Ze.length&&e<it.count;e++)t=t.concat(Ze[e].chartWidget.tags());return t=$.unique(t),t=$.map(t,function(e){return e.toLowerCase().replace(/\W+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")})}function ie(e,t,i,o){var n,r,s,a;if(i||ut&&!Ie)for(n=it.count,r=0;r<Ze.length&&r<n;r++)(s=Ze[r].chartWidget)!==t&&(a=s.model())&&a.model().setExternalPosition(e,o)}function oe(e,t){var i,o,n,r;if(lt.value()){for(i=it.count,De.beginUndoMacro("Sync Time"),o=0;o<Ze.length&&o<i;o++)if(n=Ze[o].chartWidget,r=n.model()){if(r.model()===t)continue;r.gotoTime(e,{centerIfVisible:!1,model:t})}De.endUndoMacro()}}function ne(){be(!1),Ze.forEach(function(e){void 0!==e.timingsMeter&&e.timingsMeter.destroy(),e.chartWidget.destroy()}),e.resizerBridge.remove(),We&&clearInterval(We),$(window).off("resize",L),$(document).off("onUpdate",L),Re.resolve()}function re(){return Re.promise()}function se(){return Be}function ae(){Oe.id.setValue(void 0),Oe.uid.setValue(void 0),Oe.name.setValue(void 0)}function le(){var t={snapshotUrl:e.snapshotUrl};(d.enabled("show_dialog_on_snapshot_ready")?u.getImageOfChart:u.getImageOfChartSilently)(qe,t,function(e){h.emit("onScreenshotReady",e)})}function ce(){for(var e=n[ot].count;e<Ze.length;e++)Ze[e].chartWidget.destroy();Ze.splice(n[ot].count)}function he(e){for(var t=0;t<Ze.length;t++)Ze[t].chartWidget.applyOverrides(e)}function ue(e){for(var t=0;t<Ze.length;t++)Ze[t].chartWidget.applyStudiesOverrides(e)}function de(){e.resizerBridge.requestFullscreen()}function pe(){e.resizerBridge.exitFullscreen()}function fe(){return Ve}function _e(e,t){(t?[{chartWidget:Ke.value()}]:Ze).forEach(function(t){var i=t.chartWidget.model().mainSeries().properties(),o=t.chartWidget.model().model().properties().paneProperties,n=i.extendedHours.value(),r=o.background.value();t.chartWidget._model.model().restoreTheme(e),i.extendedHours.value()!==n&&i.extendedHours.listeners().fire(i.extendedHours),o.background.value()!==r&&o.background.listeners().fire(o.background)})}function me(e,t){g.bind(e,function(e){e.preventDefault(),t()})}function ge(){for(var e in He)me(e,He[e])}function ve(){for(var e in He)g.unbind(e)}function ye(e){$e!==e&&($e=e,e?ge():ve())}function be(e){
if(ke.onWidget||ye(e),0!==Ze.length){for(var t=Ze.length;t--;)Ze[t].chartWidget.setActive(!1);Ze[tt].chartWidget.setActive(e)}}function Se(e){return d.enabled("charting_library_base")?e:("s"!==e&&S("multipleCharts"),"s"===e||d.enabled(w.MULTIPLE_CHARTS)&&d.getConfig(w.MULTIPLE_CHARTS).layout.indexOf(e)>=0||ke.containsData||Je?e:(T.createGoProDialog({feature:"multipleCharts"}).then(function(e){e.open()}),"s"))}function we(e){if(nt=[],e){e.charts||(e={layout:"s",charts:[e]}),ot=Se(e.layout||"s");for(var t=0;t<e.charts.length;t++)nt.push({content:e.charts[t]});e.symbolLock&&st.setValue(!0),e.intervalLock&&at.setValue(!0),e.trackTimeLock&&lt.setValue(!0),e.hideAllDrawings&&ct.setValue(!0)}xe.setValue(ot),R(ot,Ie)&&(l.init(),l.hideAllDrawings().setValue(ct.value()),nt.splice(0,nt.length))}function Te(){0===--Ue&&h.emitOnce("onChartReady")}function Pe(){return Promise.all(Ze.map(function(e){return m(e.chartWidget.modelCreated())}))}function Ce(){return Promise.all(Ze.map(function(e){return m(e.chartWidget.model().mainSeries().onSymbolResolved())}))}var xe,Ee,Le,Ie,Ae,ke,Me,Oe,De,Ve,Re,Be,Ne,ze,Fe,$e,He,We,Ue,je,qe=this,Ge=2,Ye=0,Xe=1,Ke=new f,Je=!1,Ze=[],Qe=[],et=0,tt=0,it=null,ot="s",nt=[],rt=!1,st=new f(!1),at=new f(!1),lt=new f(!1),ct=new f(!1),ht=new f(TVSettings.getBool("chart.syncCrosshair",!0)),ut=ht.value();ht.subscribe(function(e){e=!!e,ut=e,TVSettings.setValue("chart.syncCrosshair",e)}),xe=new f(ot),Ee=e.resizerBridge.width,Le=e.resizerBridge.height,Ie=!1,Ae=new f(Ie),"padding"in e&&(Ge=e.padding),"edge"in e&&(Ye=e.edge),ke=e.widgetOptions||{},ke.readOnly&&(Je=!0),Me=e.metaInfo||{},Oe={id:new f(Me.id),name:new f(Me.name),description:new f(Me.description),username:new f(Me.username),uid:new f(Me.uid)},De=a(),Ve=$(e.resizerBridge.body.value()).eq(0),Re=$.Deferred(),Be=new t,Ee.subscribe(L),Le.subscribe(L),this.updateLayout=L,Ne=new f,ze=new f,Fe=null,Ke.subscribe(function(e){var t,i;if(e){for(i=Ze.length;i--;)if(Ze[i].chartWidget===e){t=i;break}if(!isFinite(t))throw Error("Cannot make detached ChartWidget active");if(tt!==t){for(tt=t,N(),Qe.length&&(et=Qe.indexOf(Ze[tt])),i=Ze.length;i--;)Ze[i].chartWidget.setActive(!1);e.setActive(!0)}W(e)}},{callWithLast:!0}),$e=!1,He={"Alt+p":C,"Alt+s":le,Tab:F},ye(!0),Object.assign(this,{createChartWidget:O,getAll:function(){return Ze.map(function(e){return e.chartWidget})},destroy:ne,layout:xe,maximizeCurrentChart:Ae,activeChartWidget:Ke,activeChartStyle:Ne.readonly(),trySetChartStyleToActiveWidget:H,selectedSource:ze.readonly(),metaInfo:Oe,state:i,asyncState:o,readOnly:function(){return Je},lock:{symbol:st,setSymbolLockWithUndo:G,interval:at,setIntervalLockWithUndo:Y,crosshair:ht,trackTime:lt,setTrackTimeWithUndo:X},setSymbol:J,setResolution:Q,updateLayout:L,setChartLayoutWithUndo:K,resizeWidgetsUI:A,images:ee,tags:te,syncCrosshair:ie,syncScroll:oe,setSymbolAll:Z,clearChartMetaInfo:ae,onfeatures:e.onfeatures,takeScreenshot:le,loadContent:we,purgeUnusedWidgets:ce,applyOverrides:he,applyStudiesOverrides:ue,switchChart:F,startFullscreen:de,exitFullscreen:pe,destroyPromise:re,
chartWidgetCreated:se,getContainer:fe,onWidget:ke.onWidget,applyTheme:_e,setActive:be,undoHistory:De}),we(e.onfeatures?void 0:e.content),xe.subscribe(function(e){N(),R(e,!1)&&(Qe=z(),et=Qe.indexOf(Ze[tt]))}),xe.hook=function(e){return e===this.value()?e:Se(e)},Je&&(xe.writeLock=!0),Ae.subscribe(function(e){e!==Ie&&(Qe=z(),R(ot,e))}),We=setInterval(k,1e3),$(window).on("resize",L),$(document).on("onUpdate",L),d.enabled("datasource_copypaste")&&(c.init(),e.globalEvents&&($(window).on("appclip:paste",function(e){Ke.value().onAppClipboardPaste(),e.preventDefault()}),$(window).on("appclip:copy",function(e){Ke.value().onAppClipboardCopy(),e.preventDefault()}),$(window).on("appclip:cut",function(e){Ke.value().onAppClipboardCut(),e.preventDefault()}))),Ue=0,Ze.forEach(function(e){if(e){Ue++;var t=e.chartWidget;t.withModel(null,function(){if(t.model().mainSeries().bars().size()>0)Te();else{var e=function(){Te(),t.model().mainSeries().onBarReceived().unsubscribe(null,e),t.model().mainSeries().onCompleted().unsubscribe(null,e)};t.model().mainSeries().onBarReceived().subscribe(null,e),t.model().mainSeries().onCompleted().subscribe(null,e)}})}}),s()&&(je=l.tool.setValue,l.tool.setValue=function(){qe.selectedSource.value()&&qe.activeChartWidget.value().model().lineBeingCreated()&&qe.activeChartWidget.value().model().cancelCreatingLine(),je.apply(l.tool,arguments)}),Pe().then(Ce).then(function(){window.saver&&window.is_authenticated&&e.widgetOptions.justCloned&&window.saver.saveChartSilently()}).catch(b.logError.bind(b))}var n=i(539).layouts,r=i(987),s=i(35).supportTouch,a=i(1042).createUndoHistory,l=i(110),c=i(500),h=i(108),u=i(1044),d=i(3),p=i(1045).SetChartLayoutCommand,f=i(22),_=i(456).ResizerDetacherState,m=i(1046).delegateToPromise,g=i(131),v=i(1047),y=i(1048),b=i(0).getLogger("Chart.ChartWidgetCollection"),S=i(465),w=i(27).ProductFeatures,T=i(43),P=i(1049).TimingsMeter,C=i(927).publishChart,x=i(454),E=i(534);e.exports=o}).call(t,i(4))},function(e,t,i){"use strict";(function(t){function o(e){var i,o,n,r,s,a,l,c,h,u,d,p,m,g,v,y,b,S=this;this._guid=pe(),this._startSpinner(e.body.value()),this._options=e=e||{},i=e.content,o=e.readOnly,o||(G.init(),G.tool.subscribe(function(e){var t,i,o,n;S._model&&(t=e,S._model.model().setCurrentTool(t),TradingView.isMobile.any()&&(i=S._paneWidgets[0],H.isLineTool(t)&&"LineToolBrush"!==t&&!S.selectBarMode().value()?(o=.5*S._model.model().timeScale().width(),n=.5*i._state.defaultPriceScale().height(),S._model.model().setAndSaveCurrentPosition(o,n,i._state),i._updateTooltip(o,n)):i._hideTooltip()),S._model&&TradingView.isMobile.any()&&S._model.model().crossHairSource().updateAllViews())}),n=function(e,t,i){var o,n=t.mainSeries().syncModel(),r=e.mainSeries().syncModel(),s=i;return n&&r&&(o=e._createSyncPoint(n,r),s=o.sourceTimeToTargetTime(i)),e.timeScale().points().roughIndex(s,r&&r.distance.bind(r))},G.createdLineTool.subscribe(null,function(e){var t,i,o;S._model&&(t=S._model.model(),e.model!==t&&(i=t.paneForSource(S._model.model().mainSeries()),o={index:n(t,e.model,e.point.timeStamp),
price:e.point.price},S._model.createLineTool(i,o,e.linetool,e.properties,e.linkKey)))}),G.continuedLineTool.subscribe(null,function(e){var t,i,o;S._model&&(t=S._model.model(),e.model!==t&&(i={index:n(t,e.model,e.point.timeStamp),price:e.point.price},(o=S._model.lineBeingCreated())&&S._model.model().coninueCreatingLine(i,e.envState,!!e.finalState)&&e.finalState&&o.restoreExternalPoints(e.finalState)))}),G.cancelledLineTool.subscribe(null,function(e){if(S._model){var t=S._model.model();e.model!==t&&S._model.model().cancelCreatingLine()}}),G.startedMovingLineTool.subscribe(null,function(e){var t,i,o;S._model&&(t=S._model.model(),e.model!==t&&(i=t.dataSources().filter(function(t){return t.linkKey===e.linkKey})[0])&&(o={index:n(t,e.model,e.point.timeStamp),price:e.point.price},S._model.model().startMovingSource(i,o)))}),G.movedLineTool.subscribe(null,function(e){var t,i;S._model&&(t=S._model.model(),e.model!==t&&t.sourceBeingMoved()&&t.sourceBeingMoved().linkKey===e.linkKey&&(i={index:n(t,e.model,e.point.timeStamp),price:e.point.price},S._model.model().moveSource(i)))}),G.finishedMovingLineTool.subscribe(null,function(e){var t,i;S._model&&(t=S._model.model(),e.model!==t&&(i=t.sourceBeingMoved())&&(S._model.model().endMovingSource(!!e.finalState),e.finalState&&i.restoreExternalPoints(e.finalState)))}),G.startedChangingLineTool.subscribe(null,function(e){var t,i,o;S._model&&(t=S._model.model(),e.model!==t&&(i=t.dataSources().filter(function(t){return t.linkKey===e.linkKey})[0])&&(o={index:n(t,e.model,e.point.timeStamp),price:e.point.price},S._model.model().startChangingLinetool(i,o,e.pointIndex,e.envState)))}),G.changedLineTool.subscribe(null,function(e){var t,i;S._model&&(t=S._model.model(),e.model!==t&&t.lineBeingEdited()&&t.lineBeingEdited().linkKey===e.linkKey&&(i={index:n(t,e.model,e.point.timeStamp),price:e.point.price},S._model.model().changeLinePoint(i,e.envState)))}),G.finishedChangingLineTool.subscribe(null,function(e){var t,i;S._model&&(t=S._model.model(),e.model!==t&&(i=t.dataSources().filter(function(t){return t.linkKey===e.linkKey})[0],t.lineBeingEdited()&&S._model.model().endChangingLinetool(!!e.finalState),i&&e.finalState&&i.restoreExternalPoints(e.finalState)))}),G.removedLineTool.subscribe(null,function(e){var t,i;S._model&&(t=S._model.model(),e.model!==t&&(i=t.dataSources().filter(function(t){return t.linkKey===e.linkKey})[0])&&S._model.model().removeSource(i))}),G.finishedLineTool.subscribe(null,function(e){var t;S._model&&(t=S._model.model(),e.model!==t&&t.dataSources().filter(function(t){return t.linkKey===e.linkKey})[0]&&S._model.model().finishLineTool())}),G.changedLineStyle.subscribe(null,function(e){var t,i;S._model&&(t=S._model.model(),e.model!==t&&(i=t.dataSources().filter(function(t){return t.linkKey===e.linkKey})[0])&&(i.properties().merge(e.state),i.propertiesChanged()))}),G.restoredLineToolState.subscribe(null,function(e){var t,i,o;S._model&&(t=S._model.model(),e.model!==t&&(i=t.dataSources().filter(function(t){return t.linkKey===e.linkKey})[0])&&(o=$.extend({},e.state),
o.indexes=o.points.map(function(i){return{index:n(t,e.model,i.time_t),price:i.price}}),t.restoreLineToolState(i,o)))}),G.restoredLineTool.subscribe(null,function(e){if(S._model){var t=S._model.model();e.model!==t&&t.restoreSource(e.state.restorePane,e.state.paneIndex,e.state.paneState,e.state.sourceState,e.state.priceScaleName)}}),G.copiedLineTool.subscribe(null,function(e){var t,i,o,r,s,a;if(S._model&&(t=S._model.model(),e.model!==t)){if(i=t.paneForSource(t.mainSeries()),o=e.points.map(function(i){return{index:n(t,e.model,i.timeStamp),price:i.price}}),r=o[0],s=t.createLineTool(i,r,e.linetool,null,e.linkKey),t.lineBeingCreated())for(a=1;a<o.length;a++)a!==o.length-1||"LineToolBrush"!==e.linetool&&"LineToolGhostFeed"!==e.linetool||t.finishLineTool(!0),t.coninueCreatingLine(o[a],{},a<o.length-1,!0);s.properties().interval.setValue(e.state.interval),s.properties().merge(e.state),s.restoreData&&s.restoreData(e),s.propertiesChanged(),s&&e.finalState&&(s.calcIsActualSymbol(),s.restoreExternalPoints(e.finalState))}})),r=e.containsData,s=e.onWidget,a=e.onCmeWidget,a&&ye.logWarn("[ChartWidget] 'onCmeWidget' option is depricated"),l=e.widgetCustomer,c=e.timezone,h=e.withDateRanges,u=e.hideSymbolSearch,d=e.defSymbol,p=e.defInterval,m=e.defExtendedHours,g=e.defTimeframe,v=-1!==$.inArray(e.defStyle,$.map($.grep(Object.keys(f),function(e){return/^STYLE_\w+/.test(e)}),function(e){return f[e]})),y=v?e.defStyle:void 0,this._chartWidgetCollection=e.chartWidgetCollection||null,this._withDateRanges=(void 0===h?!o:!!h)&&_.enabled("timeframes_toolbar"),this._jqParent=e.body.value(),this._setContent(i),this._readOnly=o,this._containsData=r,this._defSymbol=d,this._defInterval=p,this._defTimeframe=g,this._defStyle=y,this._onWidget=!!s,this._onWidget&&(a?this._widgetCustomer="cme":l&&(this._widgetCustomer=l)),this.controlBarHeight=22,this._hideSymbolSearch=u,this._jqMainDiv=null,this._jqMainTable=null,this._paneWidgets=[],this._paneSeparators=[],this._timeAxisWidget=null,this._frameTime=30,this._model=null,this._metaInfo={},this._drawRafId=0,b=this._contentSeriesProperties(),b&&(d=b.symbol,p=b.interval),void 0===Y||Y.isValid(p)||(p=void 0),this._properties=new ne("chartproperties"),this._properties.mainSeriesProperties.merge(defaults("chartproperties.mainSeriesProperties")),this._properties.mainSeriesProperties.merge({visible:!0,symbol:d||DEFAULT_SYMBOL,shortName:"",timeframe:"",onWidget:this._onWidget,interval:p||"D",style:y,extendedHours:m,lineStyle:{styleType:TradingView.factoryDefaults("chartproperties.mainSeriesProperties.lineStyle.styleType")}}),this._containsData&&this._properties.mainSeriesProperties.merge({showCountdown:!1}),c&&ae(c)&&this._properties.timezone.setValue(c),this._tagsChanged=new t,this._modelCreated=new t,this._disconnected=new t,this._reconnectBailout=new t,this._connected=new t,this._redrawPanes=new t,this._onScroll=new t,this.chartWidgetInitialized=new t,this._studiesMetaData=[],this._studiesMigrations=[],this._chartSession=new ce(ChartApiInstance),this.lhsPriceAxisWidthChanged=new t,
this.rhsPriceAxisWidthChanged=new t,this._timingsMeter=null,this._isActive=e.isActive,this._width=e.width,this._height=e.height,e.width.subscribe(function(){S.resize()}),e.height.subscribe(function(){S.resize()}),e.visible.subscribe(this._updateTimingsMeterState.bind(this))}function n(e){return{UTC:"Etc/UTC",EST:"America/New_York",CST:"America/Chicago",PST:"America/Los_Angeles"}[e]||"exchange"}function r(e){return e.description_localized=window.t(e.description,{context:"study"}),e}var s,a,l,c,h,u,d,p,f,_,m,g,v,y,b,S,w,T,P,C,x,E,L,I,A,k,M,O,D,V,R,B,N,z,F,H,W,U,j,q,G,Y,X,K,J,Z,Q,ee,te,ie,oe,ne,re,se,ae,le,ce,he,ue,de,pe,fe,_e,me,ge,ve,ye;i(5),s=i(9).assert,a=i(988),l=i(1014),c=i(1016),h=i(446).PriceAxisWidget,u=i(1020),d=i(144),p=i(187).BarsMarksContainer,f=i(145),_=i(3),m=i(25).isFeatureEnabled,g=i(499).ActionBinder,v=i(459).showEditObjectDialog,y=i(546).showGoToDateDialog,b=i(543),S=i(96),w=i(86),T=w.ESDStudyBase,P=i(1022),C=i(1023).createGoRegistrateForUnavailableExchangesDialog,x=i(230).Version,E=i(465),L=i(541),I=i(1024).ChartIndicatorTooltip,A=i(502).check,k=i(1025).showAgreementDialog,M=i(1028).showAddServiceDialog,O=i(447).isIDCExchange,D=i(449),V=i(128).isSfFlag,R=i(38).isOpenedModals,B=i(1031).AvailableOnTVPopup,N=i(43),z=i(34).Study,F=i(231),H=i(1).LineDataSource,W=i(191).tradingService,U=i(74),j=U.Action,q=U.ActionSeparator,G=i(110),Y=i(130).Interval,X=i(1032),K=i(1037),J=i(1038).showSymbolInfoDialog,Z=i(40),Q=i(979).AddCompareDialog,ee=i(93),te=i(507),ie=i(179),oe=i(95),ne=i(7).DefaultProperty,re=i(208),se=re.availableTimezones,ae=re.timezoneIsAvailable,le=i(56).createDialog,ce=i(222).ChartSession,he=i(39),ue=i(62).unifiedSpinner,de=i(20).trackEvent,pe=i(17).guid,fe=i(153).Size,_e=i(929),me=i(255).createConfirmDialog,ge=i(123).MarketStatusIndicator,ve=i(122).DataModeIndicator,ye=i(0).getLogger("ChartWidget",{color:"#606"}),o.prototype.setTimezone=function(e){e&&ae(e)?this._properties.timezone.setValue(e):console.warn("Incorrect timezone: "+JSON.stringify(e))},o.prototype.refreshMarks=function(){this.model().barsMarksSources().forEach(function(e){e.refreshData()})},o.prototype.clearMarks=function(){this.model().barsMarksSources().forEach(function(e){e.clearMarks()})},o._nextMetadataId=1,o.prototype._onStudiesMetadata=function(e){var t,i,o,n,s;if(ye.logDebug("ChartWidget _onStudiesMetadata called"),t=this,"studies_metadata"===e.method){for(this._studiesMigrations=[],i=e.params[1].migrations,o=0;i&&o<i.length;o++)this._studiesMigrations.push(i[o]);for(n=e.params[1].metainfo,o=0;o<n.length;o++)d._verifyInputsMaxValue(n[o]);for(o=0;o<n.length;o++)r(n[o]);_.enabled("alerts")&&this.withModel(this,function(){this.model().model().setAlertsStudiesList(n)}),s=this._tvScriptsRequestDfd,s||(s=$.Deferred().resolve([])),s.done(function(e){t._onScriptSources(e,n)}).fail(function(e){t._onScriptSources([],n)})}},o._filterAuthorizedMetaInfo=function(e){var t,i,o,n,r=[];for(t=0;e&&t<e.length;++t)i=e[t],o=he.parseIdString(i.id),n=o.productId,pro.hasPackage(n)&&r.push(i);return r},o.prototype.privateMetaInfo=function(e){if(e){
return new e(he.CURRENT_METAINFO_FORMAT_VERSION).generateMetaInfo()}return[]},o.prototype._onScriptSources=function(e,t){var i,o,n,r,s,a,l,c;for(ye.logDebug("ChartWidget _onScriptSources called"),i=null,o=0;o<t.length;++o)if(n=t[o],n.id.startsWith("Script@tv-scripting-")){i=he.parseIdString(n.id).version;break}if(null!=i){for(this.studyScriptingPkgVers=i,r=0,s=0,o=0;o<e.length;++o){a=e[o],l=a&&a.scriptName,r++;try{c=he.createMetaInfoStub(a,i),t.push(c)}catch(e){ye.logError("Could not process script (skipped): "+l+" ("+e.message+")"),s++}}ye.logDebug("User's Pine Scripts loaded "+r+", skipped "+s)}else ye.logError("Could not find tv-scripting package in metadata response");for(o=0;o<t.length;o++)he.addOrReplaceStudyMetaInfo(this._studiesMetaData,t[o]);this._applyStudiesOverrides(),this._inited?this.model().model().setStudiesMetaData(this._studiesMetaData,this._studiesMigrations):(this._init(),this.chartWidgetInitialized.fire(),ye.logDebug("ChartWidget _onScriptSources done"))},o.prototype._init=function(){var e,t,i=this;this.model()&&this.model().mainSeries().clearData(),this.initColors(),this._makeDefaultGui(),e=function(){i._checkObsoleteTimezone(),i._chartSession&&i._chartSession.connected()&&i._restartModel(),this._content&&(this.initColors(),this._updateGui(),this.update());var e=i._model.mainSeries();e.marketStatus.subscribe(function(t){i.indicatorImage&&i._updateDataAndMarketStatus(t,e.status(),e.quoteData.update_mode_seconds)},{callWithLast:!0}),this._resizeHandler=function(){this._adjustSize(),this._model&&this._model.mainSeries().requestMoreData(),this.paint(),this.resizeSeriesControlUI(),this.checkCompactMode(),this.resizeIndicator()}.bind(this),this._resizeHandler(),this._jqMainDiv.appendTo(this._jqParent),this._spinner&&(this._spinner.stop(),delete this._spinner),m("chrome_canvas_fix")&&navigator.userAgent.match(/windows.+chrome/i)&&$(window).on("visibilitychange:chart_"+this._guid,function(e,t){if(t){for(var o=0;o<i._paneWidgets.length;o++)i._paneWidgets[o].hardResetCanvas();i._timeaxiswidget&&i._timeaxiswidget.hardResetCanvas(),i.paint(new Z(Z.LIGHT_UPDATE))}}),$(window).on("keydown:chart_"+this._guid,function(e){27===e.which&&e.preventDefault()}),this._containsData||this._jqMainDiv.mousewheel(function(e,t,i,o){var n,r,s,a,l;if((TradingView.onWidget()||!parent||parent===window||!parent.IS_DEMO_PAGE)&&this.model()&&!this.noScroll&&!this.model().timeScale().isEmpty())return n=e.pageX-5,r=this._paneWidgets[0].lhsPriceAxisWidget.size.w,s=this._timeAxisWidget.size.w,r&&(n=Math.max(0,n-r)),n=Math.min(n,s),a=_.enabled("right_bar_stays_on_scroll")?1:2*(n/s-.5),l=Math.min(1,Math.abs(o)),o>0?this.model().zoomIn(a,l):o<0&&this.model().zoomOut(a,l),i&&this.model().scrollChart(-80*i),!1}.bind(this)),this._initBarsMarksSources(),_.enabled("fundamental_widget")||this.initESDTimelineWidget(),this._containsData||this._createChartEventsSource(),this.setAutoScaleOnSymbolChange(),this._activateSymbolSearchHotkeys(),this.model().timeScale().onScroll().subscribe(this,function(){this._onScroll.fire()}),this._inited=!0
}.bind(this),t=this._makeDefaultModel(),void 0===t?e():t.then(e)},o.prototype._activateSymbolSearchHotkeys=function(){this.readOnly()||this._hideSymbolSearch||ie.activateKeyPressHandler()},o.prototype._checkObsoleteTimezone=function(){var e=this._properties.timezone.value();ae(e)||this._properties.timezone.setValue(n(e))},o.prototype._initBarsMarksSources=function(){var e=this;this.withModel(this,function(){this.model().barsMarksSources().forEach(function(t){t.onNeedRepaint.subscribe(e,e.paint)})})},o.prototype.initESDTimelineWidget=function(){new P(this)},o.prototype.applyAutoScaleOnNewSymbol=function(){(!this.model().mainSeries()instanceof f||!this.model().mainSeries().priceScale().isLockScale())&&this.model().mainSeries().priceScale().setAutoScale(!0)},o.prototype.setAutoScaleOnSymbolChange=function(){this.withModel(this,function(){this.model().mainSeries().properties().symbol.listeners().subscribe(this,function(){this.applyAutoScaleOnNewSymbol()})})},o.prototype.initColors=function(){this._properties.paneProperties.background.listeners().subscribe(this,o.prototype.setBackgroundColor),this._properties.paneProperties.vertGridProperties.color.listeners().subscribe(this,o.prototype.redrawPanes),this._properties.paneProperties.horzGridProperties.color.listeners().subscribe(this,o.prototype.redrawPanes),this._properties.scalesProperties.lineColor.listeners().subscribe(this,o.prototype.setScaleLineColor),this._properties.scalesProperties.textColor.listeners().subscribe(this,o.prototype.setScaleTextColor)},o.prototype.paneWidgets=function(){return this._paneWidgets},o.prototype.paneByCanvas=function(e){for(var t=0;t<this._paneWidgets.length;t++)if(this._paneWidgets[t].canvas===e||this._paneWidgets[t].top_canvas===e)return this._paneWidgets[t];return null},o.prototype.paneByState=function(e){for(var t=0;t<this._paneWidgets.length;t++)if(this._paneWidgets[t]._state===e)return this._paneWidgets[t];return null},o.prototype.priceAxisByCanvas=function(e){var t,i,o;for(t=0;t<this._paneWidgets.length;t++)if(i=this._paneWidgets[t],o=i.priceAxisByCanvas(e))return o;return null},o.prototype.timeAxisByCanvas=function(e){return e===this._timeAxisWidget.canvas||e===this._timeAxisWidget.top_canvas?this._timeAxisWidget:null},o.prototype.properties=function(){return this._properties},o.prototype.emulateCriticalError=function(){this._chartSession.removeSeries(-1,null)},o.prototype.readOnly=function(){return this._readOnly},o.prototype.onDisconnected=function(){return this._disconnected},o.prototype.onReconnectBailout=function(){return this._reconnectBailout},o.prototype.onConnected=function(){return this._connected},o.prototype.onRedrawPanes=function(){return this._redrawPanes},o.prototype.onScroll=function(){return this._onScroll},o.prototype.modelCreated=function(){return this._modelCreated},o.prototype.setResolution=function(e){if(!this._model)return void this._properties.mainSeriesProperties.merge({interval:e});var t=this._model.mainSeries().properties().interval
;this._model.setScreenChartProperty(t,e,this,window.t("Change Resolution"))},o.prototype.getResolution=function(){return this._model?this._model.mainSeries().properties().interval.value():this._properties.mainSeriesProperties.interval.value()},o.prototype._addSymbol=function(e,t){var i=this.model(),o=i.studiesMetaData(),n="study_Overlay@tv-basicstudies",r=_.enabled("use_overrides_for_overlay")&&TradingView.defaultProperties[n]&&TradingView.defaultProperties[n].style,s=r||(i.mainSeries().properties().style.value()===f.STYLE_CANDLES?f.STYLE_BARS:f.STYLE_CANDLES),a={inputs:{symbol:e},style:s},l=o.filter(function(e){return"Overlay@tv-basicstudies"===e.id})[0];i.insertStudy(l,a,t)},o.prototype.addSymbol=function(e,t){var i=Array.prototype.slice.call(arguments),o=function(){this._addSymbol.apply(this,i)}.bind(this);A(e).then(o).catch(function(e){e.errCode===D.DELAY_NOT_AVAILABLE?this._showDelayedMarketDataGoProDialog():O(e.exchange)&&(e.errCode===D.NEED_SIGN_AGREEMENT?k(e.exchange,!1):e.errCode===D.NEED_ADD_SERVICE&&M(e.exchange,!1).then(o).catch(function(e){}))}.bind(this))},o.prototype.updateActions=function(){function e(){var e,t,i=studyTemplates.plainList("custom"),o=studyTemplates.plainList("default");h.applyStudyTemplate.subActions||(h.applyStudyTemplate.subActions=[]),e=h.applyStudyTemplate.subActions,e.splice(0,e.length),t=new j({text:$.t("Save Indicator Template As..."),statName:"Save"}),t.callbacks().subscribe(studyTemplates,studyTemplates.showSaveAsDialog),e.push(t,new q),i.length||o.length?(i.length&&($.each(i,function(t,i){function o(e){return function(){return studyTemplates.deleteStudyTemplate(e),this._parentMenu._parentMenuItem._parentMenu.destroy(),!1}}var n=new j({text:i,statName:"SetStudyTemplate"});n.callbacks().subscribe(studyTemplates,function(){this.applyTemplate(i)}),n.deleteButton={action:o(n.text)},e.push(n)}),o.length&&e.push(new q)),$.each(o,function(t,i){var o=new j({text:i,statName:"SetStudyTemplateFromDefaults"});o.callbacks().subscribe(studyTemplates,function(){this.applyTemplate(i)}),e.push(o)})):e.push(new j({text:window.t("No study templates saved"),enabled:!1}))}var t,o,n,r,s,a,l,c=this,h=this.actions(),u=this._model.dataSources(),d=!1,p=!1;for(t=0,o=u.length;t<o;t++)n=u[t],TradingView.isInherited(n.constructor,H)&&n.isUserDeletable()&&(d=!0),TradingView.isInherited(n.constructor,z)&&n.removeByRemoveAllStudies()&&(p=!0),TradingView.isInherited(n.constructor,F)&&(p=!0);this._readOnly||(h.paneRemoveAllStudies&&h.paneRemoveAllStudies.setEnabled(p),h.paneRemoveAllDrawingTools&&h.paneRemoveAllDrawingTools.setEnabled(d),h.paneRemoveAllStudiesDrawingTools&&h.paneRemoveAllStudiesDrawingTools.setEnabled(p||d)),i.e(24).then(function(e){function t(e){function t(){i.e(88).then(function(e){(0,i(1335).showThemeSaveDialog)(c._model)}.bind(null,i)).catch(i.oe)}h.applyColorTheme.subActions||(h.applyColorTheme.subActions=[]);var a=h.applyColorTheme.subActions;a.splice(0,a.length),o.requestData(function(i){if(i.forEach(function(e,t){var i=new j({text:TradingView.clean(e)})
;i.callbacks().subscribe(null,function(){$.getJSON("/standard-theme/?themeName="+encodeURIComponent(e),function(t){c._chartWidgetCollection.applyTheme(JSON.parse(t.content)),r(e.toLowerCase()),s(),window.saver.saveChartSilently(),de("GUI","Themes","Switch to "+e.toLowerCase()+" theme")})}),a.push(i)}),a.sort(function(e,t){return e.text>t.text?-1:1}),window.is_authenticated){a.push(new q);var o=new j({text:window.t("Save As...")});o.callbacks().subscribe(null,t),a.push(o)}e&&e.length&&window.is_authenticated&&(a.push(new q),$.each(e,function(e,t){function i(e){return function(){var t,i=window.t("Do you really want to delete Color Theme '{0}' ?").format(e);return i=TradingView.clean(i),t=me({type:"modal",content:i}),t.on("action:yes",function(t){$.post("/remove-theme/",{name:e}).error(function(e){ye.logError(e.responseText)}),n.invalidate(),t.close()}),t.open(),this._parentMenu._parentMenuItem._parentMenu.destroy(),!1}}var o=new j({text:TradingView.clean(t)});o.callbacks().subscribe(null,function(){$.getJSON("/theme/?themeName="+encodeURIComponent(t),function(e){c._chartWidgetCollection.applyTheme(JSON.parse(e.content),!0),window.saver.saveChartSilently(),de("GUI","Themes","Switch to custom theme")})}),o.deleteButton={action:i(o.text)},a.push(o)}))})}var o=i(953).standardThemes,n=i(953).themes,r=i(236).setTheme,s=i(236).syncTheme;window.is_authenticated?n.requestData(t):t()}.bind(null,i)).catch(i.oe),window.studyTemplates&&(e(),studyTemplates.refreshStudyTemplateList(e)),r=this,s=[],a=se,l=function(e){return e.id===r.model().model().properties().timezone.value()},a.forEach(function(e){if(!e.separator){var t=new j({text:e.title,checkable:!0,checked:l(e),statName:"SetTimeZone"});t.callbacks().subscribe(this,function(){r.model().setProperty(r.model().model().properties().timezone,e.id,"Changed Time Zone")}),s.push(t)}},this),h.applyTimeZone.subActions=s,h.addToWatchlist&&(h.addToWatchlist.text=window.t("Add {0} To Watchlist").format(this.getSymbol(!0))),h.addToTextNotes&&(h.addToTextNotes.text=window.t("Add Text Note For {0}").format(this.getSymbol(!0))),this.updateActionForIntradayOnly(h.sessionBreaks)},o.prototype.actions=function(){return this._actions||this._setActions(),this._actions},o.prototype._setActions=function(){var e,t,i,n,r,s,a,l,c,h,u,d,p,f,v,b,S,w,T,P,C,x,E,L,I,A,k,M,O,D,V,R,B,N,z,F,$,H,W,U,Y,X,K,Q,oe,ne,re,se,ae,le,ce,he,ue,pe,fe,_e,me,ge,ve=this,ye=[];if(!this._readOnly){for(ye=[new j({text:window.t("Eraser"),callbackContext:"eraser",statName:"Eraser"}),new q,new j({text:window.t("Trend Line"),callbackContext:"LineToolTrendLine",statName:"LineToolTrendLine"}),new j({text:window.t("Horizontal Line"),callbackContext:"LineToolHorzLine",statName:"LineToolHorzLine"}),new j({text:window.t("Vertical Line"),callbackContext:"LineToolVertLine",statName:"LineToolVertLine"}),new j({text:window.t("Arrow"),callbackContext:"LineToolArrow",statName:"LineToolArrow"}),new j({text:window.t("Ray"),callbackContext:"LineToolRay",statName:"LineToolRay"}),new j({text:window.t("Extended"),callbackContext:"LineToolExtended",
statName:"LineToolExtended"}),new j({text:window.t("Parallel Channel"),callbackContext:"LineToolParallelChannel",statName:"LineToolParallelChannel"}),new q,new j({text:window.t("Pitchfork"),callbackContext:"LineToolPitchfork",statName:"LineToolPitchfork"}),new j({text:window.t("Schiff Pitchfork"),callbackContext:"LineToolSchiffPitchfork",statName:"LineToolSchiffPitchfork"}),new j({text:window.t("Pitchfan"),callbackContext:"LineToolPitchfan",statName:"LineToolPitchfan"}),new j({text:window.t("Gann Square"),callbackContext:"LineToolGannSquare",statName:"LineToolGannSquare"}),new j({text:window.t("Gann Fan"),callbackContext:"LineToolGannFan",statName:"LineToolGannFan"}),new j({text:window.t("Fib Retracement"),callbackContext:"LineToolFibRetracement",statName:"LineToolFibRetracement"}),new j({text:window.t("Trend-Based Fib Extension"),callbackContext:"LineToolTrendBasedFibExtension",statName:"LineToolTrendBasedFibExtension"}),new j({text:window.t("Fib Speed Resistance Fan"),callbackContext:"LineToolFibSpeedResistanceFan",statName:"LineToolFibSpeedResistanceFan"}),new j({text:window.t("Fib Time Zone"),callbackContext:"LineToolFibTimeZone",statName:"LineToolFibTimeZone"}),new j({text:window.t("Circle Lines"),callbackContext:"LineToolCircleLines",statName:"LineToolCircleLines"}),new j({text:window.t("Fib Circles"),callbackContext:"LineToolFibCircles",statName:"LineToolFibCircles"}),new j({text:window.t("Fib Speed Resistance Arcs"),callbackContext:"LineToolFibSpeedResistanceArcs",statName:"LineToolFibSpeedResistanceArcs"}),new q,new j({text:window.t("Rectangle"),callbackContext:"LineToolRectangle",statName:"LineToolRectangle"}),new j({text:window.t("Ellipse"),callbackContext:"LineToolEllipse",statName:"LineToolEllipse"}),new j({text:window.t("Triangle"),callbackContext:"LineToolTriangle",statName:"LineToolTriangle"}),new j({text:window.t("Polyline"),callbackContext:"LineToolPolyline",statName:"LineToolPolyline"}),new j({text:window.t("Arc"),callbackContext:"LineToolArc",statName:"LineToolArc"}),new q,new j({text:window.t("Text"),callbackContext:"LineToolText",statName:"LineToolText"}),new j({text:window.t("Anchored Text"),callbackContext:"LineToolTextAbsolute",statName:"LineToolTextAbsolute"}),new j({text:window.t("Balloon"),callbackContext:"LineToolBalloon",statName:"LineToolBalloon"}),new j({text:window.t("Price Label"),callbackContext:"LineToolPriceLabel",statName:"LineToolPriceLabel"}),new q,new j({text:window.t("Elliott Wave Subminuette"),callbackContext:"LineToolElliottSubminuette",statName:"LineToolElliottSubminuette"}),new j({text:window.t("Elliott Wave Minor"),callbackContext:"LineToolElliottMinor",statName:"LineToolElliottMinor"}),new j({text:window.t("Elliott Wave Circle"),callbackContext:"LineToolElliottCircle",statName:"LineToolElliottCircle"}),new j({text:window.t("Elliott Minor Retracement"),callbackContext:"LineToolElliottMinorRetr",statName:"LineToolElliottMinorRetr"}),new j({text:window.t("Elliott Major Retracement"),callbackContext:"LineToolElliottMajorRetr",statName:"LineToolElliottMajorRetr"
}),new q,new j({text:window.t("Brush"),callbackContext:"LineToolBrush",statName:"LineToolBrush"}),new q,new j({text:window.t("Forecast"),callbackContext:"LineToolPrediction",statName:"LineToolPrediction"})],ve=this,i=function(e){G.tool.setValue(e.callbackContext())},n=0;n<ye.length;n++)ye[n].callbacks().subscribe(null,i);e=new j({text:window.t("Scales Properties..."),statName:"ScalesProperties"}),t=new j({text:window.t("Timezone/Sessions Properties..."),statName:"TimezoneSessionsProperties"})}r=new j({text:window.t("Reset Chart"),shortcut:"Alt+R",statName:"ResetChart"}),r.callbacks().subscribe(this,this.GUIResetScales),s=new j({text:window.t("Undo"),shortcut:"ctrl+z"}),s.callbacks().subscribe(null,function(){de("GUI","Undo"),ve._model.undoHistory.undo()}),s.disable(),a=new j({text:window.t("Redo"),shortcut:"ctrl+y"}),a.callbacks().subscribe(null,function(){de("GUI","Redo"),ve._model.undoHistory.redo()}),a.disable(),ve.withModel(null,function(){ve._model.undoHistory.undoStack().onChange().subscribe(ve,ve.updateUndoRedo),ve._model.undoHistory.redoStack().onChange().subscribe(ve,ve.updateUndoRedo)}),l=new j({text:window.t("Loading")}),c=[l],h=new j({text:window.t("Color Theme"),subActions:c,statName:"ColorTheme"}),u=new j({text:window.t("TimeZone"),statName:"TimeZone"}),d=new j({text:window.t("Change Symbol..."),shortcut:window.t("Any Symbol"),doNotBindShortcut:!0,statName:"ChangeSymbol"}),TVSettings.setValue("symboledit.dialog_last_entry",""),d.callbacks().subscribe(this,function(){ie.showDialog({callback:this.setSymbol.bind(this)})}),p=new j({text:window.t("Change Interval..."),shortcut:window.t("Any Number"),doNotBindShortcut:!0,statName:"ChangeInterval"}),p.callbacks().subscribe(this,function(){new te({callback:function(e){ee.interval.setValue(e)}}).show()}),TradingView.onWidget()||(_.enabled("add_to_watchlist")&&(f=new j({text:window.t("Add To Watchlist"),shortcut:"Alt+W",statName:"AddToWatchlist"}),f.callbacks().subscribe(this,function(){var e,t,i=widgetbar.setPage("base");for(t=0;t<i.widgets.length;t++)if("watchlist"===i.widgets[t].type){e=i.widgets[t].widgetObject;break}e&&e.addHighlight(this.getSymbol())})),m("text_notes")&&(v=new j({text:window.t("Add To Text Notes"),shortcut:"Alt+N",statName:"AddToTextNotes"}),v.callbacks().subscribe(this,function(){var e=this;runOrSignIn(function(){TradingView.bottomWidgetBar.toggleWidget("text_notes",!0),TradingView.bottomWidgetBar._widgets.text_notes.addNote(null,e.getSymbol(!0),e.getSymbol())},{source:"Add text note in chart context menu"})}))),b=new j({text:window.t("Insert Study Template"),statName:"InserStudyTemplate"}),S=new j({shortcut:"Ctrl+Alt+Q",text:window.t("Reset Scale"),statName:"ResetScale"}),S.callbacks().subscribe(null,function(e){ve.model().resetTimeScale()}),w=new j({text:window.t("Insert Drawing Tool"),subActions:ye,statName:"InsertDravingTool"}),T=new j({text:window.t("Remove All Indicators"),statName:"RemoveAllIndicators"}),P=new j({text:window.t("Remove All Drawing Tools"),statName:"RemoveAllDrawingTools"}),C=new j({
text:window.t("All Indicators And Drawing Tools"),statName:"RemoveAllIndicatorsAndDrawingTools"}),x=new j({text:window.t("Insert Indicator..."),shortcut:"/",statName:"InsertIndicator"}),E=new j({text:window.t("Script Editor..."),statName:"ScriptEditor"}),L=new j({text:window.t("Compare or Add Symbol..."),statName:"CompareOrAddSymbol"}),I=new j({text:window.t("Compare..."),statName:"Compare"}),A=new j({text:window.t("Objects Tree..."),statName:"ObjectsTree"}),k=new j({text:window.t("Properties..."),statName:"ChartProperties",callback:function(e,t){ve.showChartProperties()}}),M=new j({text:window.t("Lock/Unlock"),statName:"ToggleLockSelectedObject"}),M.callbacks().subscribe(this,o.prototype.toggleLockSelectedObject),O=new j({text:window.t("Hide"),statName:"HideSelectedObject"}),O.callbacks().subscribe(this,o.prototype.hideSelectedObject),_.enabled("property_pages")&&(D=new j({text:window.t("Format..."),statName:"EditSelectedObject"}),D.callbacks().subscribe(this,o.prototype.editSelectedObject)),V=new j({text:window.t("Source Code..."),statName:"OpenSelectedObjectSource"}),V.callbacks().subscribe(this,this.openSelectedObjectSource),R=new j({text:window.t("Left Axis"),checkable:!0,statName:"ToggleLeftAxis"}),R.binder=new g(R,this._properties.scalesProperties.showLeftScale,this.model(),window.t("Show Left Scale")),B=new j({text:window.t("Right Axis"),checkable:!0,statName:"ToggleRightAxis"}),B.binder=new g(B,this._properties.scalesProperties.showRightScale,this.model(),window.t("Show Right Scale")),this._properties.scalesProperties.showLeftScale.listeners().subscribe(this,o.prototype._updateScalesActions),this._properties.scalesProperties.showRightScale.listeners().subscribe(this,o.prototype._updateScalesActions),N=new j({text:window.t("Scale Price Chart Only"),checkable:!0,statName:"ScalePriceChartOnly"}),N.binder=new g(N,this._properties.scalesProperties.scaleSeriesOnly,this.model(),window.t("Scale Price Chart Only")),z=this.model().model(),this._properties.scalesProperties.scaleSeriesOnly.listeners().subscribe(null,function(){z.recalculateAllPanes(),z.invalidate(new Z(Z.FULL_UPDATE))}),F=new j({text:window.t("Drawings Toolbar"),checkable:!0,statName:"ToggleDrawingToolbar"}),$=this._options.isDrawingToolbarVisible,$&&($.subscribe(function(e){F.setChecked(e)},{callWithLast:!0}),F.callbacks().subscribe(null,function(){$.setValue(!$.value())})),H=new j({text:window.t("Favorite Drawings Toolbar"),checkable:!0,statName:"ToggleFavoriteDrawingsToolbar"}),W=this._options.favoriteDrawingToolbar,W&&(W.canBeShown().subscribe(function(e){H.setEnabled(e)},{callWithLast:!0}),W.visibility().subscribe(function(e){H.setChecked(e)},{callWithLast:!0}),H.callbacks().subscribe(null,function(){W.isVisible()?W.hide():W.show()})),U=new j({text:window.t("Magnet Mode"),checkable:!0,statName:"ToggleMagnetMode"}),U.binder=new g(U,G.properties().magnet,this.model(),"Magnet"),Y=new j({text:window.t("Stay In Drawing Mode"),checkable:!0,statName:"ToggleStayInDrawingMode"}),
Y.binder=new g(Y,G.properties().stayInDrawingMode,this.model(),window.t("Stay In Drawing Mode")),X=new j({text:window.t("Sync drawings to all charts"),checkable:!0,statName:"ToggleSyncDrawings"}),X.binder=new g(X,G.properties().drawOnAllCharts,this.model(),"SyncDrawings"),K=new j({text:window.t("Lock All Drawing Tools"),checkable:!0,statName:"ToggleLockDrawings"}),K.binder=new g(K,G.lockDrawings(),this.model(),window.t("Lock drawings"),function(e){e||this.binder.setValue(!this.binder.value()),G.lockDrawings().setValue(this.binder.value())}.bind(K)),Q=new j({text:window.t("Hide All Drawing Tools"),checkable:!0,statName:"ToggleHideAllDrawingTools"}),Q.binder=new g(Q,G.hideAllDrawings(),this.model(),window.t("Hide All Drawing Tools"),function(e){e||this.binder.setValue(!this.binder.value()),G.hideAllDrawings().setValue(this.binder.value())}.bind(Q)),oe=new j({text:window.t("Hide Marks On Bars"),checkable:!0,statName:"ToggleHideMarksOnBars"}),oe.binder=new g(oe,G.hideMarksOnBars(),this.model(),window.t("Hide Marks On Bars"),function(e){e||this.binder.setValue(!this.binder.value()),G.hideMarksOnBars().setValue(this.binder.value())}.bind(oe)),ne=new j({text:window.t("Extended Hours"),checkable:!0,statName:"ToggleExtendedHours"}),ne.binder=new g(ne,this.model().mainSeries().properties().extendedHours,this.model(),window.t("Change Extended Hours")),re=new j({text:window.t("Symbol Last Value"),checkable:!0,checked:!1,statName:"ToggleSymbolLastValue"}),re.binder=new g(re,this.properties().scalesProperties.showSeriesLastValue,this.model(),window.t("Show Symbol Last Value")),se=new j({text:window.t("Symbol Prev. Close Value"),checkable:!0,checked:!1,statName:"ToggleSymbolPrevCloseValue"}),se.binder=new g(se,this.properties().scalesProperties.showSeriesPrevCloseValue,this.model(),window.t("Show Symbol Previous Close Value")),this.model().mainSeries().onRestarted().subscribe(this,function(){this.updateActionForIntradayOnly(se)}),ae=new j({text:window.t("Symbol Labels"),checkable:!0,checked:!1,statName:"ToggleSymbolLabels"}),ae.binding=new g(ae,this.properties().scalesProperties.showSymbolLabels,this.model(),"Undo Show Symbol Labels"),le=new j({text:window.t("Indicator Last Value"),checkable:!0,checked:!1,statName:"ToggleStudyLastValue"}),le.binder=new g(le,this.properties().scalesProperties.showStudyLastValue,this.model(),window.t("Show Indicator Last Value")),ce=new j({text:window.t("Indicator Labels"),checkable:!0,checked:!1,statName:"ToggleIndicatorsLabels"}),ce.binding=new g(ce,this.properties().scalesProperties.showStudyPlotLabels,this.model(),"Undo Show Indicator Labels"),he=new j({text:window.t("Countdown"),checkable:!0,checked:!1,statName:"ToggleCountdown"}),he.binder=new g(he,this.model().mainSeries().properties().showCountdown,this.model(),window.t("Show Countdown")),pe=_.enabled("go_to_date"),!TradingView.onWidget()&&pe&&(ue=new j({text:window.t("Go to Date..."),shortcut:"Alt+G",statName:"GoToDate"}),ue.callbacks().subscribe(null,function(){var e=ve._chartWidgetCollection.activeChartWidget.value();y(e.model())})),
fe=new j({text:window.t("Symbol Info..."),checkable:!1,statName:"SymbolInfo"}),fe.callbacks().subscribe(null,function(){var e=ve.model().mainSeries().symbol(),t=ve.model().mainSeries().symbolInfo();J(e,{symbolInfo:t})}),this._actions={chartProperties:k,timeScaleReset:S,chartReset:r,compareOrAdd:L,compare:I,paneObjectTree:A,insertIndicator:x,insertDrawingTool:w,applyColorTheme:h,applyStudyTemplate:b,symbolSearch:d,showSymbolInfoDialog:fe,changeInterval:p,seriesHide:O,studyHide:O,lineToggleLock:M,lineHide:O,showLeftAxis:R,showRightAxis:B,scaleSeriesOnly:N,drawingToolbarAction:F,favoriteDrawingToolbar:H,magnetAction:U,stayInDrawingModeAction:Y,syncModeAction:X,lockDrawingsAction:K,hideAllDrawingsAction:Q,hideAllMarks:oe,applyTimeZone:u,extendedHours:ne,showCountdown:he,showSeriesLastValue:re,showSeriesPrevCloseValue:se,showSymbolLabelsAction:ae,showStudyLastValue:le,showStudyPlotNamesAction:ce,undo:s,redo:a,viewSourceCode:V},e&&(this._actions.scalesProperties=e),t&&(this._actions.tmzProperties=t),f&&(this._actions.addToWatchlist=f),!TradingView.onWidget()&&_.enabled("text_notes")&&m("text_notes")&&(this._actions.addToTextNotes=v),!TradingView.onWidget()&&pe&&(this._actions.gotoDate=ue),_.enabled("charting_library_base")||(this._actions.scriptEditor=E),this.createSessionBreaksActions(),this.readOnly()||(_e=new j({text:window.t("Remove"),shortcut:"Del",statName:"RemoveSelectedObject"}),_e.callbacks().subscribe(this,function(){var e;this._chartWidgetCollection&&(e=this._chartWidgetCollection.activeChartWidget.value()),e||(e=this),e.removeSelectedSource()}),me=new j({text:window.t("Stop syncing drawing"),statName:"StopSyncingDrawing"}),me.callbacks().subscribe(this,function(){var e;this._chartWidgetCollection&&(e=this._chartWidgetCollection.activeChartWidget.value()),e||(e=this),e.unlinkSelectedLine()}),ge=new j({text:window.t("Sync drawing to all charts"),statName:"SyncDrawingToAllCharts"}),ge.callbacks().subscribe(this,function(){var e;this._chartWidgetCollection&&(e=this._chartWidgetCollection.activeChartWidget.value()),e||(e=this),e.copyLineToOtherCharts()}),this._actions.insertDrawingTool=w,this._actions.paneRemoveAllStudies=T,this._actions.paneRemoveAllDrawingTools=P,this._actions.paneRemoveAllStudiesDrawingTools=C,this._actions.seriesRemove=_e,this._actions.studyRemove=_e,this._actions.lineRemove=_e,this._actions.lineUnlink=me,this._actions.lineCopyToCharts=ge,_.enabled("property_pages")&&(this._actions.format=D),this._actions.lockDrawingsAction=K,this._actions.hideAllDrawingsAction=Q,this._actions.hideAllMarks=oe,this._actions.paneRemoveAllStudies.callbacks().subscribe(this,o.prototype.removeAllStudies),this._actions.paneRemoveAllDrawingTools.callbacks().subscribe(this,o.prototype.removeAllDrawingTools),this._actions.paneRemoveAllStudiesDrawingTools.callbacks().subscribe(this,o.prototype.removeAllStudiesDrawingTools)),this._actions.paneObjectTree.callbacks().subscribe(this,o.prototype.showSourceProperties),this._actions.chartProperties.callbacks().subscribe(this,o.prototype.showChartProperties),
this._actions.insertIndicator.callbacks().subscribe(this,o.prototype.showIndicators),this._actions.scriptEditor&&this._actions.scriptEditor.callbacks().subscribe(this,o.prototype.showScriptEditor),this._actions.compareOrAdd.callbacks().subscribe(this,o.prototype.showCompareOrAdd),this._actions.compare.callbacks().subscribe(this,o.prototype.showCompareOrAdd),this._actions.scalesProperties&&this._actions.scalesProperties.callbacks().subscribe(this,o.prototype.showScalesProperties),this._actions.tmzProperties&&this._actions.tmzProperties.callbacks().subscribe(this,o.prototype.showTimezoneProperties),this._updateScalesActions()},o.prototype.executeActionById=function(e){if("takeScreenshot"===e)return ye.logWarn('Action "takeScreenshot" is deprecated. Use method "takeScreenshot" instead'),void this._chartWidgetCollection.takeScreenshot();if(e in this._actions){var t=this._actions[e];t.checkable&&t.setChecked(!t.checked),this._actions[e].callbacks().fire(t)}else console.warn("Unknown action id: "+e)},o.prototype.getCheckableActionState=function(e){if(e in this._actions){var t=this._actions[e];if(t.checkable)return t.checked;console.warn("Action "+e+" has no state")}else console.warn("Unknown action id: "+e);return null},o.prototype._updateScalesActions=function(){if(this._actions){for(var e=0;e<this._paneWidgets.length;e++)this._paneWidgets[e].updateScalesVisibility();this._timeAxisWidget.updatePriceScalesVisibility(),this._update(new Z(Z.FULL_UPDATE))}},o.prototype.removeAllStudies=function(){this._model.removeAllStudies()},o.prototype.removeAllDrawingTools=function(){this._model.removeAllDrawingTools()},o.prototype.removeAllStudiesDrawingTools=function(){this._model.removeAllStudies(),this._model.removeAllDrawingTools()},o.prototype.model=function(){return this._model},o.prototype.defaultSymbol=function(){return this._defSymbol},o.prototype.connect=function(){this._handler=function(e){this._onData(e)}.bind(this),this._boundOnChartSessionIsConnectedChanged=this._onChartSessionIsConnectedChanged.bind(this),this._chartSession.isConnected().subscribe(this._boundOnChartSessionIsConnectedChanged),this._chartSession.criticalError().subscribe(this,this._onChartSessionCriticalError),this._chartSession.connect(this._handler)},o.prototype.finishInitWithoutConnect=function(){this._chartSession.disable(),this._init(),this.chartWidgetInitialized.fire()},o.prototype.reconnect=function(){this._chartSession.disconnect(),this._chartSession.connect()},o.prototype.update=function(){if(this._model){for(var e=0;e<this._paneWidgets.length;e++)this._paneWidgets[e].update();this._timeAxisWidget.update()}},o.prototype.paint=function(e){e||(e=new Z(Z.FULL_UPDATE));for(var t=0;t<this._paneWidgets.length;t++)this._paneWidgets[t].paint(e.invalidateForPane(t),!1);this._timeAxisWidget&&this._timeAxisWidget.paint(e.fullInvalidation()),this._redrawPanes.fire()},o.prototype._makeDefaultGui=function(){this._makeChartWidget(),this._makeLoadingScreen(),this.onWidget()&&this._makeAvailableOnTVPopup(),this._makeMasterTable(),this._makeTimeAxisWidget(),
this._adjustSize(),this._updateScalesActions(),$("*",this._jqMainTable).selectable(!1),this.update(),this.paint()},o.prototype.widget=function(){return this._jqMainDiv},o._linetoolWarningDialogShown=!1,o.prototype.restoreState=function(e,t){var n,r;if(this._adjustSize(),n=this._model.restoreState(this._content,t),this._setActions(),n&&n.lines_limit_exceeded&&!this.readOnly()){if(o._linetoolWarningDialogShown)return;r=le({type:"modal",destroyOnClose:!0,width:500,title:window.t("Warning"),content:window.t("This chart layout has more than 1000 drawings, which is a lot! This may negatively affect performance, storage and publishing. We recommend to remove some drawings to avoid potential performance issues."),actionsWrapTemplate:'<div class="tv-dialog__section tv-dialog__section--actions tv-dialog__section--actions-adaptive tv-dialog__section--no-border">',actions:[{name:"open-manage-drawings",type:"primary",text:window.t("Open Manage Drawings"),method:"close"},{name:"not-now",type:"default",text:window.t("Not Now"),method:"close"}]}),r.on("action:open-manage-drawings",function(){i.e(18).then(function(e){new(0,i(985).ObjectTreeDialog)({chartWidget:this,activeTab:1},this._model).show()}.bind(this).bind(null,i)).catch(i.oe)}.bind(this)),o._linetoolWarningDialogShown=!0,r.on("afterClose",function(){o._linetoolWarningDialogShown=!1}),r.open()}},o.prototype.redrawPanes=function(e){for(var t=0;t<this._paneWidgets.length;t++)this._paneWidgets[t].paint();this._redrawPanes.fire()},o.prototype.setBackgroundColor=function(e){this.scaleBackgroundColor=e.value();for(var t=0;t<this._paneWidgets.length;t++)this._paneWidgets[t].paint(),this._paneWidgets[t].setCursorForTool();this.update(),this.paint()},o.prototype.setScaleLineColor=function(e){this.scaleLineColor=e.value(),$.each(this._paneSeparators,function(){this.update()}),this.update(),this.paint()},o.prototype.setScaleTextColor=function(e){this.scaleTextColor=e.value(),this.update(),this.paint()},o.prototype.setTimingsMeter=function(e){this._timingsMeter=e,this._updateTimingsMeterState()},o.prototype._updateTimingsMeterState=function(){var e=this._options.visible.value();null!==this._timingsMeter&&(e?this._timingsMeter.startCollect():this._timingsMeter.stopCollect())},o.prototype._update=function(e){var t,i=e?e.fullInvalidation():Z.FULL_UPDATE;if(null!==this._timingsMeter&&this._timingsMeter.startDraw(i),i===Z.FULL_UPDATE){for(this._model?this._updateGui():this._adjustSize(),this._timeAxisWidget.update(),t=0;t<this._paneWidgets.length;t++)this._paneWidgets[t]._state=this._model.panes()[t],this._paneWidgets[t].statusWidget().updateLayout();this._dataWindowWidget&&this._dataWindowWidget.fullUpdate()}else if(i===Z.LIGHT_UPDATE){for(this._timeAxisWidget.update(),t=0;t<this._paneWidgets.length;t++)this._paneWidgets[t].statusWidget().update();this._dataWindowWidget&&this._dataWindowWidget.update()}else if(i===Z.UPDATE_CURSOR_ONLY){for(t=0;t<this._paneWidgets.length;t++)this._paneWidgets[t].statusWidget().update();this._dataWindowWidget&&this._dataWindowWidget.update()}this.paint(e),
null!==this._timingsMeter&&this._timingsMeter.stopDraw()},o.prototype._createVolumeIfNeeded=function(){var e=_.enabled("create_volume_indicator_by_default")&&this._options.addVolume,t=!this._content,i=_.enabled("charting_library_base"),o=_.enabled("create_volume_indicator_by_default_once"),n=this._content&&!this._content.loading;e&&(t||i&&n&&!o)&&this._model.mainSeries().onSymbolResolved().subscribe(this,function(){var e=this;setTimeout(function(){var t,i,o,n,r=e._model.model().mainSeries().symbolInfo();r&&(t=!r.has_no_volume,!e.containsVolume()&&t?(i=TradingView.factoryDefaults("chartproperties.volumePaneSize"),o={paneSize:i},_.enabled("hide_volume_ma")&&(o.styles={vol_ma:{visible:!1}}),e.insertStudy("Volume@tv-basicstudies",!1,_.enabled("volume_force_overlay"),void 0,o)):!t&&e.containsVolume()&&(n=e.model().dataSources().filter(function(e){return e instanceof z&&"Volume"===e.metaInfo().shortId})[0],e._model.model().removeSource(n)))},0)},o)},o.prototype.initAsFundamental=function(e){this._model.mainSeries().onSymbolResolved().subscribe(this,function(){var t=this,i=t.model();i.setProperty(i.mainSeries().properties().visible,!1),t.addFundamental(e)},!0)},o.prototype.replaceFundamental=function(e){this.addFundamental(e,!0)},o.prototype.addFundamental=function(e,t){var i=this,o=i.model(),n=he.findStudyMetaInfo(i._studiesMetaData,e.id);he.replaceWithFullStudyMetaInfoAsync(i._studiesMetaData,n).done(function(n){var r,s,a,l,c,h;t&&i.model().removeAllStudies(),i.insertStudy(e.id,!1,!0),r=o.dataSources().filter(function(t){return t instanceof z&&t.metaInfo().id===e.id})[0],s=r.properties().styles,r.getPlotFields().forEach(function(e){o.setProperty(s[e].plottype,0),o.setProperty(s[e].linewidth,3),o.setProperty(s[e].transparency,40),"seekingalpha"===i.widgetCustomer()&&o.setProperty(s[e].color,"rgba(255, 114, 0, 0.6)")}),o.setProperty(i.properties().scalesProperties.showSeriesLastValue,!1),o.setProperty(i.properties().scalesProperties.showStudyLastValue,!0),o.panes().forEach(function(e){o.move(o.mainSeries(),e,e.leftPriceScale()),o.move(r,e,e.leftPriceScale())}),e.percentage&&(a=o.mainSeries().priceScale(),l=a.properties(),o.setPercentProperty(l.percentage,!0,a),c=r.priceScale(),h=c.properties(),o.setPercentProperty(h.percentage,!0,c))})},o.prototype._createChartEventsSource=function(){var e,t;_.enabled("chart_events")&&(e=this._model.mainSeries(),t=new b(e),this._model.paneForSource(e).insertDataSource(t,null))},o.prototype._showDelayedMarketDataGoProDialog=function(){N.createGoProDialog({feature:"idcFreeUser",closeOnOutsideClick:!1}).then(function(e){e.on("afterClose",function(){ee.symbol.setValue(DEFAULT_SYMBOL,!0)}).open()})},o.prototype._restartModel=function(){var e=function(){this._model.restart()}.bind(this);A(this._model.model().mainSeries().symbol()).then(e).catch(function(t){t.errCode===D.DELAY_NOT_AVAILABLE?this._showDelayedMarketDataGoProDialog():O(t.exchange)&&(t.errCode===D.NEED_SIGN_AGREEMENT?k(t.exchange):t.errCode===D.NEED_ADD_SERVICE&&M(t.exchange,!1).then(e).catch(function(e){}))}.bind(this))},
o.prototype._makeDefaultModel=function(){function e(){return c(l._chartSession,function(e){if(!(e instanceof Z))throw Error("Invalid mask");l._invalidateMask?l._invalidateMask.merge(e):l._invalidateMask=e,l._draw_planned||(l._draw_planned=!0,l._options.visible.when(function(){var e=!document.hidden,i=l.screen&&l.screen.isShown();null!==l._timingsMeter&&e&&!i&&l._timingsMeter.startWaitingDraw(),l._drawRafId=requestAnimationFrame(t)}))},l._properties,l.readOnly(),n,l._studiesMetaData,l._studiesMigrations,l,l._options.undoHistory,l._options.barsMarksContainersFactory)}function t(){l._draw_planned=!1,l._drawRafId=0,l._inLoadingState||l._invalidateMask&&(l._invalidateMask=l._update(l._invalidateMask))}var i,n,r,s,a,l=this;if(this._content&&this._content.timeScale.points&&(i=this._content.timeScale.points.items[0],n={startDate:i}),!this._studiesMetaData)throw Error("Cannot create chart model: studies metainfo is absent");if(_.enabled("lean_chart_load")?this._model=this._model||e():this._model=e(),this._createVolumeIfNeeded(),r=function(){var e,t,i;this._model.onTagsChanged().subscribe(this,o.prototype.onModelTagsChanged),this._updateGui(),this._modelCreated.fire(this._model),this._tagsChanged.fire(),e=this._model.mainSeries(),this._defTimeframe&&e.setDefaultTimeframe(this._defTimeframe),this._model.lineCancelled().subscribe(this,this.onLineCancelled),e.onSymbolNotPermitted().subscribe(null,function(t){e.properties().symbol.setValue(t)}),e.onSymbolResolved().subscribe(this,function(e){var t=e.pro_name;t&&A(t).catch(function(e){e.errCode===D.DELAY_NOT_AVAILABLE?this._showDelayedMarketDataGoProDialog():e.errCode===D.NEED_SIGN_AGREEMENT?k(e.exchange):e.errCode===D.NEED_ADD_SERVICE&&M(e.exchange)}.bind(this))}),e.onSymbolGroupNotPermitted().subscribe(null,function(e){var t,i=function(e){ee.symbol.setValue(e,!0)};if(!_.enabled("widget")&&e&&(e=e.toLowerCase(),V(e))){if(R())return;if(!(t=C(oe.getExchange(ee.symbol.value()),"sf_rt"===e)))return;t.on("action:no",function(){i(ee.proSymbol.value()||DEFAULT_SYMBOL)}).open()}}),e.onInReplayStateChanged().subscribe(this.screen,this.screen.show),e.properties().style.unsubscribe(this,this._onChartStyleChanged),e.properties().style.subscribe(this,this._onChartStyleChanged),t=this._options,t.handleSessionErrors&&(e.chartTypeNotPermitted.subscribe(null,function(){e.properties().interval.setValue("D"),N.isOpened().then(function(e){t.muteSessionErrors||e||(E("kagiRenko"),N.createGoProDialog({feature:"kagiRenko"}).then(function(e){e.open()}))})}),e.intradaySpreadNotPermitted.subscribe(null,function(){e.properties().interval.setValue("D"),N.isOpened().then(function(e){t.muteSessionErrors||e||N.createGoProDialog({feature:"intradaySpread"}).then(function(e){e.open()})})}),e.customIntervalNotPermitted.subscribe(null,function(){e.properties().interval.setValue("D"),N.isOpened().then(function(e){t.muteSessionErrors||e||N.createGoProDialog({feature:"customIntervals"}).then(function(e){e.open()})})}),e.intradayExchangeNotPermitted.subscribe(null,function(){e.properties().interval.setValue("D"),
N.isOpened().then(function(i){if(!t.muteSessionErrors&&!i){var o=e.symbolInfo().listed_exchange;S.prototype.supportedExchangesList().forEach(function(e){e.value===o&&(o=e.name)}),N.createGoProDialog({feature:"intradayExchange"}).then(function(e){e.open()})}})}),l._options.muteSessionErrors||e.onExtendedHoursNotPermitted().subscribe(null,function(){N.isOpened().then(function(e){t.muteSessionErrors||e||(E("extendedHours"),N.createGoProDialog({feature:"extendedHours"}).then(function(e){e.open()}))})})),this._options.handleSessionErrors&&(e.requestingIntradayWhenNotSupported.subscribe(null,function(){e.properties().interval.setValue("D"),l._options.muteSessionErrors||TVDialogs.showIntervalMismatchDialog()}),e.requestingResolutionWhenNotSupported.subscribe(null,function(t){e.properties().interval.setValue(t)})),this._readOnly||this._onWidget||!(_.enabled("tv_production")||_.enabled("cqg_terminal")||_.enabled("trading_terminal"))||(i=W())&&i.registerChartWidget(l)}.bind(this),this._content){if(this.restoreState(this._content,this._containsData),_.enabled("chart_content_overrides_by_defaults"))return this._defSymbol&&(s=this.setSymbol(this._defSymbol),this.applyAutoScaleOnNewSymbol()),a=function(){return this._defInterval&&this.setResolution(this._defInterval),void 0!==this._defStyle&&this.setSeriesStyle(this._model.mainSeries(),this._defStyle),r()}.bind(this),void 0===s?a():s.then(a)}else this._setActions();return r()},o.prototype._onChartStyleChanged=function(){de("Chart","Chart Style "+this._model.mainSeries().getStyleShortName().toUpperCase())},o.prototype._updateGui=function(){this._model&&(this._makePaneWidgetsAndSeparators(),this._makeTimeAxisWidget(),$("*",this._jqMainTable).selectable(!1),this._adjustSize())},o.prototype._dateRangeResolutions=function(){return ChartApiInstance.availableTimeFrames(this._model.mainSeries().symbolInfo(),this._model.mainSeries().status())||[]},o.prototype._makeChartWidget=function(){this._jqMainDiv=$(document.createElement("div")),this._jqMainDiv.addClass("chart-widget"),this._tooltipDiv=$(document.createElement("div")).appendTo(this._jqMainDiv),this._tooltipDiv.addClass("tooltip-wrapper"),this._withDateRanges&&(!_.enabled("lean_chart_load")||!this._chartControlsBar)&&(this._chartControlsBar=$(document.createElement("div")).attr("class","chart-controls-bar").appendTo(this._jqParent),this._seriesControlWidget=new K({parent:this._chartControlsBar,chartWidget:this})),(this._options.controlBar||_.enabled("control_bar"))&&(this._controlBarNavigation=new X(this,this._jqMainDiv,!0)),this._containsData||this.createIndicatorImage()},o.prototype._makeLoadingScreen=function(){if(_.enabled("lean_chart_load")){if(this.screen)return;this.screen=new o.LoadingScreen(this,this._jqParent)}else this.screen=new o.LoadingScreen(this,this._jqMainDiv)},o.prototype._makeAvailableOnTVPopup=function(){this.available_screen||(this.available_screen=new B(this))},o.prototype._setSymbol=function(e,t){if(this._model){var i=this._model.mainSeries()
;if(!t&&i.symbolSameAsCurrent(e)&&!_.enabled("same_data_requery"))return;this._model.setSelectedSource(null),this._model.setScreenChartProperty(i.properties().symbol,e,this,"Change Symbol",_.enabled("same_data_requery"))}else this._properties.mainSeriesProperties.merge({symbol:e})},o.prototype.setSymbol=function(e,t){return this._setSymbol.apply(this,arguments)},o.prototype.getSymbol=function(e){var t;return t=this._model?this._model.mainSeries().properties():this._properties.mainSeriesProperties,t?e&&t.shortName&&t.shortName.value()?t.shortName.value():t.symbol.value():""},o.LoadingScreen=function(e,t){this._cw=e,this.$element=$('<div class="chart-loading-screen">'),this.$shield=$('<div class="chart-loading-screen-shield">').appendTo(this.$element),this.$element.appendTo(t),this._showed=!1,this._cw.withModel(this,this._connectToModel)},o.LoadingScreen.prototype._connectToModel=function(){this._cw.model().mainSeries().onDataLoaded().subscribe(this,function(e){switch(e.method){case"symbol_error":e.params[1]!==f.PERMISSION_DENIED&&this.hide();break;case"series_error":_.enabled("hide_loading_screen_on_series_error")&&this.hide();break;case"series_completed":this.hide()}})},o.LoadingScreen.prototype.show=function(){return this._cw._inLoadingState=!0,this._showed||(this._showed=!0,this._show()),$.Deferred().resolve()},o.LoadingScreen.prototype._show=function(){var e=this._cw.properties().paneProperties.background.value();this.$shield.css("background",e),this.$element.addClass("fade")},o.LoadingScreen.prototype.hide=function(){delete this._cw._inLoadingState,this._showed&&this._hide()},o.LoadingScreen.prototype._hide=function(){this._showed=!1,this.$element.removeClass("fade")},o.LoadingScreen.prototype.$canvas=null,o.LoadingScreen.prototype.context=null,o.LoadingScreen.prototype.isShown=function(){return this._showed},o.prototype._makeMasterTable=function(){this._jqMainTable=$(document.createElement("table")),this._jqMainTable.appendTo(this._jqMainDiv),this._jqMainTable.addClass("chart-markup-table"),this._jqMainTable.attr("cellpading","0"),this._jqMainTable.attr("cellspacing","0")},o.prototype.unsetActivePaneWidget=function(){this.activePaneWidget=!1},o.prototype.setActivePaneWidget=function(e){this.activePaneWidget=e},o.prototype.isMaximizedPane=function(){return!!this._maximizedPaneWidget},o.prototype.toggleMaximizePane=function(e){if(!(this._paneWidgets.length<2)){this._maximizedPaneWidget?(this._maximizedPaneWidget.state().setMaximized(!1),this._maximizedPaneWidget=null,this._paneSeparators.forEach(function(e){e.show()})):(this._maximizedPaneWidget=e,this._maximizedPaneWidget.state().setMaximized(!0),this._paneSeparators.forEach(function(e){e.hide()}));for(var t=this._paneWidgets.length;t--;)this._paneWidgets[t].updateControls();this._adjustSize(),this.updateIndicatorImagePosition()}},o.prototype._makePaneWidgetsAndSeparators=function(){var e,t,i,o,n=this._model.panes(),r=n.length,s=this._paneWidgets.length;for(e=r;e<s;e++)t=this._paneWidgets.pop(),t.jqRow.remove(),t.jqRow.find("*").remove(),t.destroy(),
(i=this._paneSeparators.pop())&&i.jqRow.remove();for(e=s;e<r;e++)t=new a(this,n[e],this._onWidget,this._options.verticalTouchScroll),t.onMouseLeave=this.unsetActivePaneWidget.bind(this),t.onMouseEnter=this.setActivePaneWidget.bind(this),this._paneWidgets.push(t),e>0&&(i=new l(this,e-1,e),this._paneSeparators.push(i),this._timeAxisWidget?i.jqRow.insertBefore(this._timeAxisWidget.jqRow):i.jqRow.appendTo(this._jqMainTable)),this._timeAxisWidget?t.jqRow.insertBefore(this._timeAxisWidget.jqRow):t.jqRow.appendTo(this._jqMainTable);for(e=0;e<r;e++)o=n[e],t=this._paneWidgets[e],t.state()!==o&&t.setState(o);for(e=r;e--;)this._paneWidgets[e].updateControls()},o.prototype._makeTimeAxisWidget=function(){this._timeAxisWidget||(this._timeAxisWidget=new u(this,this._onWidget),this._timeAxisWidget.jqRow.appendTo(this._jqMainTable))},o.prototype.insertStudyOrShowDialog=function(e,t){var i,o,n,r,s,a,l,c;this.isSymbolicStudy(e)?(i=defaults("study_"+e.id).description,o=$('<input type="text" class="symbol-edit single" placeholder="'+window.t("Symbol")+'" maxlength="30" style="text-transform: none; font-weight: normal;" autocomplete="off">'),o.css({float:"none","box-sizing":"border-box",width:"100%"}),n=null,r=le({title:i||window.t("Add Symbol"),width:400,actions:[{name:"apply",text:window.t("Apply"),type:"primary"}],content:o,isClickOutFn:function(e){if(n&&(e.target===n[0]||n[0].contains(e.target)))return!1}}),s=function(i){var o={inputs:{symbol:i}};this.model().insertStudy(e,o,!1,t),r.close()},a=ie.bindToInput(o,{callback:s.bind(this),onPopupOpen:function(e){e.css("z-index",r.zIndex),n=e},onPopupClose:function(){n=null}}),r.on("action:apply",function(){a.acceptTypeIn()}),r.open()):this.hasConfirmInputs(e)?(i=defaults("study_"+e.id).description,_e.show(this,e,{title:i,callback:function(i){this.model().insertStudy(e,i,!1,t)}.bind(this)})):z.isPointsBasedStudy(e.id)?(l=z.lineToolNameForPointsBasedStudy(e.id),G.tool.setValue(l)):(c="Volume@tv-basicstudies"===e.id,this.insertStudy(e.id,!0,c,null,null,t))},o.prototype.hasConfirmInputs=function(e){var t,i,o=e.inputs;if(void 0===o)return!1;for(t=0;t<o.length;++t)if(i=o[t],void 0!==i.confirm&&i.confirm)return!0;return!1},o.prototype.isSymbolicStudy=function(e){switch(e.id){case"Overlay@tv-basicstudies":case"CorrelationCoefficient@tv-basicstudies":return!0;default:return!1}},o.prototype.isPointsBasedStudy=function(e){return z.isPointsBasedStudy(e.id)},o.prototype.insertStudy=function(e,t,i,o,n,r){var a,l=he.findStudyMetaInfo(this._studiesMetaData,e);l=TradingView.clone(l),s(!l.isTVScriptStubToCompile,"MetaInfo stub is unexpected here!"),a=o?{inputs:o}:{},n&&(a=$.extend(a,n)),t?this._model.insertStudy(l,a,i,r):this._model.model().insertStudy(l,a,i,r)},o.prototype.insertStudyStub=function(e){return this.model().insertStudyStub(e)},o.prototype.removeStudyStub=function(e){return this.model().removeStudyStub(e)},o.prototype._adjustSize=function(){var e,t,i,o,n,r,s,a,c=this,u=0,d=0,p=0;$.each(this._paneWidgets,function(){
c._maximizedPaneWidget&&c._maximizedPaneWidget!==this||(u=Math.max(this.lhsPriceAxisWidget.optimalWidth(),u),d=Math.max(this.rhsPriceAxisWidget.optimalWidth(),d),p+=this.stretchFactor())}),e=this._width.value(),t=this._height.value(),this._chartControlsBar&&(t=Math.max(t-this.controlBarHeight,0)),i=e-u-d,o=this._paneSeparators.length,n=l.HEIGHT,r=this._timeAxisWidget.optimalHeight(),s=t-n*o-r,a=s/p,this._jqMainTable.width(e),this._jqMainTable.height(t),this._jqMainDiv.width(e),this._jqMainDiv.height(t),$.each(this._paneWidgets,function(e){c._model&&(this._state=c._model.panes()[e]);var t=c._maximizedPaneWidget?c._maximizedPaneWidget===this?s:0:Math.max(Math.round(this.stretchFactor()*a),2);this.setPriceAxisSize(h.LHS,new fe(u,t)),this.setPriceAxisSize(h.RHS,new fe(d,t)),this.setSize(new fe(i,t)),c._model&&this.state()&&c._model.setPaneHeight(this.state(),t)}),this._timeAxisWidget.setSize(new fe(i,r),new fe(u,r),new fe(d,r)),this._model&&this._model.setWidth(i),this.maxLhsPriceAxisWidth!==u&&(this.maxLhsPriceAxisWidth=u,this.lhsPriceAxisWidthChanged.fire(u)),this.maxRhsPriceAxisWidth!==d&&(this.maxRhsPriceAxisWidth=d,this.rhsPriceAxisWidthChanged.fire(d))},o.prototype._onChartSessionIsConnectedChanged=function(e){e?this._onConnection():this._onDisconnect()},o.prototype._onChartSessionCriticalError=function(e,t){this._disconnected.fire(!0)},o.prototype._onData=function(e){switch(e.method){case"reconnect_bailout":this._reconnectBailout.fire();break;default:this._model.onData(e)}},o.prototype._nextMetadataId=1,o.prototype._onConnection=function(){if(this._online=!0,this.requestMetadata(),this._model)this._restartModel(),this._updateGui(),this.update(),this.paint(),this._connected.fire();else{var e=i(112);this._tvScriptsRequestDfd=e.requestBuiltinAndUserScripts()}},o.prototype._onDisconnect=function(){this._model&&this._model.disconnect(),this._online=!1,this.update(),this.paint(),this._disconnected.fire()},o.prototype._applyStudiesOverrides=function(){he.overrideDefaults(this._studiesMetaData)},o.prototype.requestMetadata=function(){_.enabled("charting_library_base")?this._chartSession.requestMetadata("metadata_"+o._nextMetadataId,function(e){var t,i=e.params[1];for(t=0;t<i.length;++t)he.addOrReplaceStudyMetaInfo(this._studiesMetaData,r(i[t]));this._applyStudiesOverrides(),this._inited||(this._init(),this.chartWidgetInitialized.fire())}.bind(this)):this._chartSession.requestMetadata("metadata_"+o._nextMetadataId,function(e){this._onStudiesMetadata(e)}.bind(this)),o._nextMetadataId++},o.prototype.studiesMetaData=function(){return this._model.studiesMetaData()},o.prototype.getTimeScale=function(){return this._timeAxisWidget},o.prototype.setSeriesStyle=function(e,t){this._model.setProperty(e.properties().style,t)},o.prototype.showSourceProperties=function(e){var t=this;i.e(18).then(function(e){new(0,i(985).ObjectTreeDialog)({chartWidget:t},t._model).show()}.bind(null,i)).catch(i.oe)},o.prototype.showChartProperties=function(e){if(!_.enabled("show_chart_property_page"))return Promise.resolve()
;e&&e.text===window.t("Properties...")&&TVSettings.setValue("properties_dialog.active_tab.chart",window.t("Style"));var t=this;return new Promise(function(e){v(t._model.mainSeries(),t._model,{doNotCloseOnBgClick:!0}).then(function(t){e(t.isVisible()?t._dialog:null)})})},o.prototype.showScriptEditor=function(){TradingView.bottomWidgetBar&&TradingView.bottomWidgetBar.activateScriptEditorTab()},o.prototype.showCompareOrAdd=function(){new Q(this._chartWidgetCollection).show()},o.prototype.showIndicators=function(e){if(window.studyMarket)return window.studyMarket.isVisible()?void window.studyMarket.hide():(window.studyMarket.show(e),window.studyMarket)},o.prototype.showScalesProperties=function(e){v(this._model.mainSeries(),this._model,{selectScales:!0})},o.prototype.showTimezoneProperties=function(){v(this._model.mainSeries(),this._model,{selectTmz:!0})},o.prototype.removeSelectedSource=function(){var e,t=this,i=t._model.selectedSource();!i||i===t._model.mainSeries()||i===t._model.lineBeingCreated()||i instanceof p||i instanceof T||(i.hasAlert.value()&&i.isUserDeletable()?(e=me({type:"modal",content:window.t("This drawing is used in alert. If you remove the drawing, the alert will be also removed. Do you want to remove the drawing anyway?")}),e.on("action:yes",function(e){t._model.removeSelectedSource(),e.close()}),e.open()):i instanceof z&&i.hasChildren()?L(t._model.removeSelectedSource.bind(t._model)).open():t._model.removeSelectedSource())},o.prototype.unlinkSelectedLine=function(){var e=this._model.selectedSource();e instanceof H&&this._model.unlinkLine(e)},o.prototype.copyLineToOtherCharts=function(){var e=this._model.selectedSource();e instanceof H&&this._model.copyToOtherCharts(e)},o.prototype.hideSelectedObject=function(){var e=this._model.selectedSource();e&&this._model.setProperty(e.properties().visible,!1,"Hide "+e.title())},o.prototype.toggleLockSelectedObject=function(){var e,t=this._model.selectedSource();t&&(e=t.properties().frozen.value(),this._model.setProperty(t.properties().frozen,!e,(e?window.t("Unlock"):window.t("Lock"))+" "+t.title()))},o.prototype.editSelectedObject=function(e){var t=this._model.selectedSource();t&&v(t,this._model)},o.prototype.openSelectedObjectSource=function(e){var t,o,n=this._model.selectedSource();n&&n.metaInfo&&(t=n.metaInfo())&&t.scriptIdPart&&t.pine&&TradingView.bottomWidgetBar&&(o=i(112),o.getPineSourceCode(t.scriptIdPart,t.pine.version).done(function(e){var i=x.parse(e.version),o=e.lastVersionMaj?x.parse(e.lastVersionMaj):new x(0,0),n={scriptSource:e.source,scriptIdPart:t.scriptIdPart,scriptName:e.scriptName,scriptTitle:e.scriptTitle,version:e.version,isOld:!o.isZero()&&o.major()!==i.major()};TradingView.bottomWidgetBar.activateScriptEditorTab(n)}))},o.prototype.resetPriceAxisOptimalWidth=function(e){$.each(this._paneWidgets,function(){this.resetPriceAxisOptimalWidth(e)}),this._redrawPanes.fire()},o.prototype.adjustPriceAxisWidth=function(e){this.resetPriceAxisOptimalWidth(e),this._adjustSize()},o.prototype.setPriceAxisVisible=function(e,t){
$.each(this._paneWidgets,function(){this.setPriceAxisVisible(e,t)}),this._timeAxisWidget.setStubVisible(e,t),this._adjustSize(),this._redrawPanes.fire()},o.prototype.setTimeAxisVisible=function(e){this._timeAxisWidget.setVisible(e),this._adjustSize()},o.prototype.isTextTool=function(e){switch(e){case"LineToolBalloon":case"LineToolText":case"LineToolTextAbsolute":case"LineToolCallout":case"LineToolNote":case"LineToolNoteAbsolute":return!0}return!1};o.prototype.tags=function(){return this._model?this._model.calculateDefaultTags():[]},o.prototype.state=function(e,t){return this._model.state(e,t)},o.prototype.asyncState=function(e){return this._model.asyncState(e)},o.prototype.metaInfo=function(){var e=this._metaInfo;return this._model&&(e.systemTags=this._model.calculateDefaultTags()),e},o.prototype.image=function(){var e,t,i,o,n,r,s,a,l=document.createElement("canvas"),c=l.getContext("2d"),h=0,u=this._timeAxisWidget.size.h,d=this.properties().scalesProperties.lineColor.value();for(t=0;t<this._paneWidgets.length;t++)(e=this._paneWidgets[t])&&e.state()&&(e.state().recalculate(!0),0===t&&(h=e.lhsPriceAxisWidget.size.w+e.size.w+e.rhsPriceAxisWidget.size.w),u+=e.size.h);for(u+=this._paneWidgets.length-1,this._update(),i=25,o=5,l.width=h+2*o,l.height=u+i+2*o,c.fillStyle="#F2F5F8",c.fillRect(0,0,l.width,l.height),n=i+o,r=o,s=this.mainSeriesQuotesAndMetainfo(),s.ohlc&&(a="{0} O:{1} H:{2} L:{3} C:{4}".format(s.meta.symbol,s.ohlc[0],s.ohlc[1],s.ohlc[2],s.ohlc[3]),c.fillStyle="#000",c.font="12px Verdana, Arial",c.fillText(a,r,o+15)),t=0;t<this._paneWidgets.length;t++)e=this._paneWidgets[t],c.drawImage(e.lhsPriceAxisWidget.canvas,r,n),c.drawImage(e.canvas,r+e.lhsPriceAxisWidget.size.w,n),e.statusWidget().renderTo(c,r+5,n+5),c.drawImage(e.rhsPriceAxisWidget.canvas,r+e.lhsPriceAxisWidget.size.w+e.size.w,n),n+=e.size.h,t<this._paneWidgets.length-1&&(c.fillStyle=d,c.fillRect(r,n,h,1),n++);return c.drawImage(this._timeAxisWidget.lhsCanvas,r,n),c.drawImage(this._timeAxisWidget.canvas,r+e.lhsPriceAxisWidget.size.w,n),c.drawImage(this._timeAxisWidget.rhsCanvas,r+e.lhsPriceAxisWidget.size.w+e.size.w,n),c.lineWidth=1,c.strokeStyle="#000",c.strokeRect(o+.5,i+o+.5,h-1,u-1),l},o.prototype.images=function(){function e(e){var t,o,n,r,s;for(e.paint(Z.LIGHT_UPDATE,i._onWidget),t=e.image(i._onWidget),t.containsMainSeries=e.containsMainSeries(),t.studies=[],o=e.state().dataSources(),n=0;n<o.length;n++)r=o[n],s=i.properties().paneProperties.legendProperties,r instanceof z?r.properties().visible.value()&&r.statusView()&&s.showStudyTitles.value()&&s.showLegend.value()&&t.studies.push(r.statusView().text()):r instanceof f&&s.showLegend.value()&&s.showSeriesTitle.value()&&(t.mainSeriesText=r.statusView().text());return t}var t,i,o,n,r,s,a;if(TradingView.printing=!0,t=this._model.selectedSource(),this._model.setSelectedSource(null),i=this,o=[],this.isMaximizedPane())o.push(e(this._maximizedPaneWidget));else for(n=0;n<this._paneWidgets.length;n++)r=this._paneWidgets[n],o.push(e(r)),n<this._paneWidgets.length-1&&o.push(this._paneSeparators[n].image())
;return this._timeAxisWidget.paint(Z.LIGHT_UPDATE),s=this._timeAxisWidget.image(),TradingView.printing=!1,this._model.setSelectedSource(t),this._model.invalidate(new Z(Z.LIGHT_UPDATE)),a=this.mainSeriesQuotesAndMetainfo(),{panes:o,timeAxis:s,colors:{text:this.properties().scalesProperties.textColor.value(),bg:this.properties().paneProperties.background.value(),scales:this.properties().scalesProperties.lineColor.value()},meta:a.meta,ohlc:a.ohlc,quotes:a.quotes}},o.prototype.mainSeriesQuotesAndMetainfo=function(){var e,t,i,o,n,r,s,a=this._model.mainSeries();return a&&(o=function(e){return null==e?"":a.formatter().format(e)+""},n=function(e){return null==e?"":e+""},e={resolution:a.interval(),symbol:a.symbol()},r=a.symbolInfo(),r&&(e.symbol=r.full_name,e.description=r.description,e.exchange=r.exchange),s=a.bars().last(),null!==s&&(t=s.value.slice(1,5).map(o)),a.quoteData&&(i={change:o(a.quoteData.change),changePercent:n(a.quoteData.change_percent),last:o(a.quoteData.last_price)})),{meta:e,ohlc:t,quotes:i}},o.prototype.onTagsChanged=function(){return this._tagsChanged},o.prototype.onModelTagsChanged=function(){this._tagsChanged.fire()},o.prototype.destroy=function(){var e,t,i;for(0!==this._drawRafId&&cancelAnimationFrame(this._drawRafId),this._model.model().destroy(),null!==this._timingsMeter&&(this._timingsMeter.stopCollect(),this._timingsMeter=null),this._chartSession.criticalError().unsubscribe(this,this._onChartSessionCriticalError),this._chartSession.isConnected().unsubscribe(this._boundOnChartSessionIsConnectedChanged),this._chartSession.destroy(),e=0;e<this._paneWidgets.length;e++)this._paneWidgets[e].destroy();this._paneWidgets.length=0,this._controlBarNavigation&&(this._controlBarNavigation.destroy(),this._controlBarNavigation=void 0),$(window).off("visibilitychange:chart_"+this._guid),$(window).off("keydown:chart_"+this._guid);for(t in this._actions)i=this._actions[t],i.setActive(!1),i.binder&&i.binder.destroy()},o.prototype.title=function(){return window.t("Chart Properties")},o.prototype.symbolProperty=function(){return this._model.mainSeries().properties().shortName?this._model.mainSeries().properties().shortName:this._model.mainSeries().properties().symbol},o.prototype.loadContent=function(e,t){var i,o,n,r,s,a,l;for(this.screen.show(),i=this,this.isMaximizedPane()&&this.toggleMaximizePane(),o=i._model.model().dataSources(),n=0;n<o.length;n++)(r=o[n])!==i._model.mainSeries()&&i._model.model().removeSource(r,!0);for(this._model.disconnect(),i._jqMainDiv&&(i._jqMainDiv.remove(),i._jqMainDiv=null),i._timeAxisWidget=null,i._paneWidgets=[],i.activePaneWidget=!1,i._model.mainSeries().purgeSymbolInfo(),s=W(),null!==s&&s.unregisterChartWidget(this),e.loading=!0,i._setContent(e),n=0;n<e.panes.length;++n)for(l=0;l<e.panes[n].sources.length;++l)if(e.panes[n].sources[l].state.symbol){a=e.panes[n].sources[l].state;break}if(!a)throw Error("An error occured while determining main series ion the chart");i._properties.mainSeriesProperties.merge({visible:!0,symbol:a.symbol,timeframe:"",onWidget:i._onWidget,
interval:a.interval||"D",style:a.style}),i._init(),ee.interval.setValue(a.interval),i._model.undoHistory.clearStack(),i.updateSeriesControlUI()},o.prototype._setContent=function(e){e&&e.panes.forEach(function(e){e.sources=e.sources.filter(function(e){return!!e&&("MainSeries"===e.type||(!e.points||!e.points.some(function(e){return null===e.time_t||!isFinite(e.time_t)})||(ye.logNormal("Dropped invalid "+e.type+". Reason: non-numeric point time"),!1)))});var t=function(t){return e.sources&&e.sources.some(function(e){return e.id===t})};e.leftAxisSources&&(e.leftAxisSources=e.leftAxisSources.filter(t)),e.rightAxisSources&&(e.rightAxisSources=e.rightAxisSources.filter(t))}),this._content=e},o.prototype._contentSeriesProperties=function(){var e,t,i;if(this._content)for(e=this._content.panes.length;e-- >0;)for(t=this._content.panes[e].sources,i=t.length;i-- >0;)if("MainSeries"===t[i].type)return t[i].state},o.prototype.updateSeriesControlUI=function(){this._seriesControlWidget&&this._seriesControlWidget.updateUI()},o.prototype.tickSeriesControlClock=function(){this._seriesControlWidget&&this._seriesControlWidget.tickClock()},o.prototype.resizeSeriesControlUI=function(){this._seriesControlWidget&&this._seriesControlWidget.resizeUI()},o.prototype.updateUndoRedo=function(){this._model&&(this.actions().undo.setEnabled(!this._model.undoHistory.undoStack().isEmpty()),this.actions().redo.setEnabled(!this._model.undoHistory.redoStack().isEmpty()))},o.prototype.createSessionBreaksActions=function(e){var t,i=this,o=function(){t=new j({text:window.t("Session Breaks"),checkable:!0,statName:"ToggleSessionBreaks"}),t.binder=new g(t,i.model().mainSeries().sessionsStudy().properties().graphics.vertlines.sessBreaks.visible,i.model(),"Session Breaks"),i._actions.sessionBreaks=t};i.model().mainSeries().sessionsStudy()?o():i.model().mainSeries().onSessionsStudyCreated().subscribe(i,function(){o()})},o.prototype.updateActionForIntradayOnly=function(e){!e||!e instanceof j||e.setEnabled(!!this.model().mainSeries().isIntradayInterval())},o.prototype.withModel=function(e,t){this.model()?t.call(e):this.modelCreated().subscribe(e,t,!0)},o.prototype.containsVolume=function(){return this.model().dataSources().some(function(e){return e instanceof z&&"Volume"===e.metaInfo().shortId})},o.prototype.containsStudyByPredicate=function(e){return!!this._model&&this._model.dataSources().some(function(t){if(!(t instanceof z))return!1;var i=t.metaInfo();return e(i)})},o.prototype.containsStudy=function(e){return this.containsStudyByPredicate(function(t){return t.id===e||t.fullId===e})},o.prototype.containsSessions=function(){return this.model().dataSources().some(function(e){return e instanceof z&&"Sessions"===e.metaInfo().shortId})},o.prototype.isSmall=function(){return this._width.value()<550||this._height.value()<300},o.prototype.onWidget=function(){return this._onWidget},o.prototype.onCmeWidget=function(){return"cme"===this.widgetCustomer()},o.prototype.widgetCustomer=function(){return this._widgetCustomer},o.prototype.resize=function(){
this._resizeHandler&&this._jqMainDiv&&this._resizeHandler()},o.prototype.chartSession=function(){return this._chartSession},o.prototype.maxLhsPriceAxisWidth=0,o.prototype.maxRhsPriceAxisWidth=0,o.prototype.GUIResetScales=function(){de("GUI","Reset Scales");var e=this.model();e&&e.resetScales()},o.prototype.onLineCancelled=function(){G.resetToCursor()},o.prototype.createIndicatorImage=function(){var e,t=this;this.indicatorImage=this._jqParent.find(".chart-status-picture"),0===this.indicatorImage.length?this.indicatorImage=$('<span class="chart-status-picture"></span>').appendTo(this._jqParent):this.indicatorImage.html(""),!t.onWidget()&&_.enabled("show_chart_warn_message")&&(this._chartIndicatorTooltip=new I({chartWidget:t,wrapElement:t._tooltipDiv}),e=$('<span class="chart-warning"></span>').prependTo(t.indicatorImage).on("click",function(){t._chartIndicatorTooltip.toggle()}),e.on("mousedownoutside",function(){setTimeout(function(){t._chartIndicatorTooltip.hide()},200)})),_.enabled("display_market_status")&&(this.indicatorText=$('<span class="series-status-text apply-common-tooltip"><span class="js-market-status tv-market-status--series-status"></span></span>'),this.indicatorText.appendTo(this.indicatorImage),this.indicatorDot&&this.indicatorDot.stop(),this.indicatorDot=new ge({el:this.indicatorText.find(".js-market-status")[0],classSuffix:"--for-chart"}),this.indicatorDot.start(),_.enabled("display_data_mode")&&($('<span class="js-data-mode tv-data-mode--series-status"></span>').appendTo(this.indicatorText),this.dataModeIndicator&&this.dataModeIndicator.stop(),this.dataModeIndicator=new ve({el:this.indicatorText.find(".js-data-mode")[0],classSuffix:"--for-chart"}),this.dataModeIndicator.start())),t.withModel(null,function(){var e=t._model.mainSeries();e.onStatusChanged().subscribe(null,t.updateIndicatorImage.bind(t)),e.marketStatus.subscribe(t.updateIndicatorImage.bind(t)),t.updateIndicatorImage(),t.checkCompactMode(),t._model.onRearrangePanes().subscribe(null,function(){t.resetIndicatorSize(),t.resizeIndicator()})}),t.rhsPriceAxisWidthChanged.subscribe(t,t.updateIndicatorImagePosition),t.updateIndicatorImagePosition()},o.prototype.updateIndicatorImage=function(){var e,t,i,o=this,n=this._model;n&&(e=n.mainSeries(),t=e.status(),i=e.quoteData?e.quoteData.update_mode_seconds:null,!o.onWidget()&&_.enabled("show_chart_warn_message")&&this._chartIndicatorTooltip.toggleIndicator(o),o._updateDataAndMarketStatus(e.marketStatus.value(),t,i))},o.prototype.checkCompactMode=function(){this._jqMainDiv&&this._jqMainDiv.toggleClass("i-compact",this._jqMainDiv.width()<=400),this.indicatorImage&&(this._indicatorWidth=this.indicatorImage.outerWidth())},o.prototype._updateDataAndMarketStatus=function(e,t){var i,o;if(void 0!==this.indicatorText){switch(t){case f.STATUS_LOADING:case f.STATUS_RESOLVING:i="loading",this.indicatorDot.setStatus("loading");break;case f.STATUS_INVALID_SYMBOL:i="invalid",this.indicatorDot.reset();break;case f.STATUS_NO_BARS:i="forbidden";break;case f.STATUS_DELAYED:i="delayed";break
;case f.STATUS_DELAYED_STREAMING:i="delayed_streaming";break;case f.STATUS_EOD:case f.STATUS_PULSE:i="endofday";break;case f.STATUS_OFFLINE:i="connecting";break;case f.STATUS_SNAPSHOT:i="snapshot";break;case f.STATUS_READY:i="realtime";break;case f.STATUS_REPLAY:i="replay";break;default:i=t,ye.logWarn("unhandled data mode "+i)}_.enabled("display_data_mode")&&this.dataModeIndicator.setMode(i),o=["loading","invalid","replay"],!o.includes(i)&&e?this.indicatorDot.setStatus(e,!0):"invalid"===i?this.indicatorDot.setStatus("invalid",!0):"replay"===i&&this.indicatorDot.setStatus("replay"),this.resizeIndicator()}},o.prototype.resetIndicatorSize=function(){if(this._paneWidgets[0]&&this._paneWidgets[0].legendWidget)for(var e=0;e<this._paneWidgets.length;e++)this._paneWidgets[e].legendWidget.firstTitle().css("padding-right","")},o.prototype.resizeIndicator=function(){var e,t,i;this._paneWidgets[0]&&this._paneWidgets[0].legendWidget&&this._indicatorWidth&&this._paneWidgets[0].legendWidget.firstTitle().css("padding-right",this._indicatorWidth+10),_.enabled("display_market_status")&&_.enabled("display_data_mode")&&this.indicatorDot&&this.dataModeIndicator&&(this.indicatorDot.isShortModeEnabled()&&this.dataModeIndicator.isShortModeEnabled()?(e=[this.indicatorDot.getTooltipText(),this.dataModeIndicator.getTooltipText()],e=e.filter(function(e){return e}),t=e.join(", "),this.indicatorText.attr("title",t)):this.indicatorText.attr("title",""),this.indicatorText.trigger("common-tooltip-update")),this.indicatorImage&&(this._indicatorWidth=this.indicatorImage.outerWidth()),i=this._width.value(),_.enabled("display_market_status")&&this.indicatorDot&&(i>650?(this.indicatorDot.setTooltipEnabled(!1),this.indicatorDot.disableShortMode()):i>550?(this.indicatorDot.setTooltipEnabled(!1),this.indicatorDot.disableShortMode()):(this.indicatorDot.setTooltipEnabled(!1),this.indicatorDot.enableShortMode())),_.enabled("display_data_mode")&&this.dataModeIndicator&&(i>650?(this.dataModeIndicator.setTooltipEnabled(!1),this.dataModeIndicator.disableShortMode()):i>550?(this.dataModeIndicator.setTooltipEnabled(!0),this.dataModeIndicator.enableShortMode()):(this.dataModeIndicator.setTooltipEnabled(!1),this.dataModeIndicator.enableShortMode()))},o.prototype.updateIndicatorImagePosition=function(){var e=this.indicatorImage;this.indicatorImage&&e.css("marginRight",this.maxRhsPriceAxisWidth)},o.prototype._startSpinner=function(e){if(!this._spinner){var t=$(e).get(0);t&&(this._spinner=ue("",{zIndex:"auto"}).spin(t))}},o.prototype.isJustClonedChart=function(){return!!(this._options||{}).justCloned},o.prototype.getLastPaneLeftBottom=function(){var e=this._paneWidgets[this._paneWidgets.length-1].jqPane,t=e.offset();return{left:t.left,bottom:$(document.body).height()-t.top-e.height()}},o.prototype.setDataWindowWidget=function(e){this._dataWindowWidget=e},o.prototype.removeDataWindowWidget=function(){this._dataWindowWidget=null},_.enabled("datasource_copypaste")&&(o.prototype.onAppClipboardPaste=function(e,t){ye.logDebug("[[paste]]"),
this._model&&this._model.pasteSourceFromClip(e,t)},o.prototype.onAppClipboardCopy=function(e){if(e||(e=this._model.selectedSource()),e instanceof z&&e.isChildStudy())return void ye.logDebug("Can not copy child study");ye.logDebug("[[copy]]"),this._model&&this._model.copySourceToClip(e)},o.prototype.onAppClipboardCut=function(e){ye.logDebug("[[cut]]"),this._model&&this._model.cutSourceToClip(e||this._model.selectedSource())}),o.prototype.applyOverrides=function(e){applyPropertiesOverrides(this.properties(),null,!1,e),this._model&&(applyPropertiesOverrides(this._model.model().properties(),null,!1,e),applyPropertiesOverrides(this._model.mainSeries().properties(),null,!1,e,"mainSeriesProperties"))},o.prototype.applyStudiesOverrides=function(e){he.setDefaultsOverrides(e),this._applyStudiesOverrides()},o.prototype._setActionsActive=function(e){var t,i=this.actions();for(t in i)i.hasOwnProperty(t)&&this.actions()[t].setActive(e)},o.prototype.setActive=function(e){this._setActionsActive(e),this._isActive=e,this._paneWidgets.forEach(function(e){e.update()})},o.prototype.isActive=function(){return this._isActive},o.prototype.trackTime=function(){return this._chartWidgetCollection.lock.trackTime},o.prototype.id=function(){return this._guid},o.prototype.createBranding=function(){this._modelCreated.subscribe(this,function(){this._model.model().createBrandingSource()},!0)},o.prototype.selectBarMode=function(){return this._model.model().selectBarMode()},o.prototype.toggleSelectBarMode=function(){this._model.model().toggleSelectBarMode()},o.prototype.onBarSelected=function(){return this._model.model().onBarSelected()},o.prototype.trySetChartStyle=function(e){var t,i,o=this.model();return!!o&&(o.mainSeries().properties().style.value()===e||(_.enabled("charting_library_base")?(this._setChartStyle(e),!0):(t=o.model(),!t.isInReplay()||t.isSeriesStyleSupported(e)?(this._setChartStyle(e),!0):(i=me({content:window.t("Chart replay mode is not available for this chart type. Do you want to exit the replay mode?")}),i.on("action:yes",function(){i.close(),this._setChartStyle(e)}.bind(this)),i.open(),!1))))},o.prototype._setChartStyle=function(e){var t=this.model(),i=t.mainSeries().properties().style;t.setChartStyleProperty(i,e,"Change Series Style")},o.prototype.showReplayOrderConfirmationDialog=function(){return this.model().isInReplay()?new Promise(function(e,t){var i=me({content:window.t("You are in the chart replay mode. An order will be placed in real-time. Do you still want to place the order?")});i.on("action:yes",function(){e(),i.close()}),i.on("afterClose",function(){t()}),i.open()}):Promise.resolve()},e.exports.ChartWidget=o}).call(t,i(4))},function(e,t,i){"use strict";(function(t){function o(e,t,i,o){this._chart=e,this.dialog=e.dialog,this._state=t,this.verticalTouchScroll=o,this._disableContextMenu=!!i,this.lhsPriceAxisWidget=new l(this,l.LHS),this.rhsPriceAxisWidget=new l(this,l.RHS),this.jqPane=$(document.createElement("td")),this.jqPane.addClass("chart-markup-table"),this.jqPane.addClass("pane"),this._dv=$("<div>"),
this._dv.css("width","100%"),this._dv.css("height","100%"),this._dv.css("position","relative"),this._dv.css("overflow","hidden"),this._dv.appendTo(this.jqPane),this.canvas=W(this._dv,new U(16,16)),$(this.canvas).css("position","absolute"),$(this.canvas).css("z-order","2"),$(this.canvas).css("left",0),$(this.canvas).css("top",0),this.ctx=this.canvas.getContext("2d"),this.top_canvas=W(this._dv,new U(16,16)),$(this.top_canvas).css("position","absolute"),$(this.top_canvas).css("z-order","1"),$(this.top_canvas).css("left",0),$(this.top_canvas).css("top",0),this.top_ctx=this.top_canvas.getContext("2d"),this._zoomSelector=$("<div>"),this._zoomSelector.addClass("zoom-selector"),this._zoomSelector.css("display","none"),this._zoomSelector.appendTo(this._dv),this._tooltipSelector=$("<div>"),this._tooltipSelector.addClass("tooltip tooltip-selector tooltip-selector-hidden"),this._tooltipSelector.appendTo(this._dv),this.legendWidget=new a(this,this._chart.model(),this._chart._jqMainDiv),this.jqRow=$(document.createElement("tr")),this.lhsPriceAxisWidget.jqCell.appendTo(this.jqRow),this.jqPane.appendTo(this.jqRow),this.legendWidget.$el.appendTo(this._dv),this.rhsPriceAxisWidget.jqCell.appendTo(this.jqRow),this.setCursorForTool(),j($(this.top_canvas),this,!0,o),t&&!this._chart.readOnly()&&(this.paneControls=new V(this,this._chart.model(),this._dv)),this.updateScalesVisibility(),this.actions=[],this.readonlyActions=[],this._onKeyUpListener=this._onKeyUpListener.bind(this),this._lineCancelledCallback=this._lineCancelledCallback.bind(this),$(window).on("keyup.panewidget",this._onKeyUpListener),this._chart.withModel(this,this._lineCancelledCallback),this._overlays={},this._contextMenuX=0,this._contextMenuY=0,this._lockDrawingsProperty=O.lockDrawings(),this._chart.withModel(this,function(){var e=this._chart.model();e.onSimpleZoomIn().subscribe(this,this._updateCrosshairOnZoom),e.onSimpleZoomOut().subscribe(this,this._updateCrosshairOnZoom)})}var n,r,s,a,l,c,h,u,d,p,f,_,m,g,v,y,b,S,w,T,P,C,x,E,L,I,A,k,M,O,D,V,R,B,N,z,F,H,W,U,j,q,G,Y,X;i(989),i(5),n=i(8).Point,r=i(540).UndoMacroCommand,s=i(34).Study,a=i(990),l=i(446).PriceAxisWidget,c=i(446).scaleRatioForContextMenuTransformer(7),h=i(87).LineToolOrder,u=i(87).LineToolPosition,d=i(1).LineDataSource,p=i(87).LineToolBrush,f=i(187).BarsMarksContainer,_=i(20).trackEvent,m=i(25).isFeatureEnabled,g=i(459).showEditObjectDialog,v=i(499).ActionBinder,y=i(952).makeTimeLimited,b=i(86).ESDStudyBase,S=i(454),w=i(543),T=i(197),P=i(112),C=i(191).tradingService,x=i(511).createTradeContext,E=i(52).PriceDataSource,L=i(74),I=L.Action,A=L.ActionPlaceholder,k=L.ActionSeparator,M=i(154),O=i(110),D=i(11),V=i(1009),R=i(40),B=i(108),N=i(153),z=N.resizeCanvas,F=N.hardResizeCanvas,H=N.clearRect,W=N.addCanvasTo,U=N.Size,j=i(192).setMouseEventHandler,q=i(500),G=i(61),Y=i(509).PaneCursorType,X=i(0).getLogger("Chart.PaneWidget"),o.prototype.destroy=function(){$(window).off("keyup.panewidget",this._onKeyUpListener),this.legendWidget&&(this.legendWidget.destroy(),this.legendWidget.$el.remove(),delete this.legendWidget),
this.paneControls&&(this.paneControls.destroy(),delete this.paneControls),this.lhsPriceAxisWidget.destroy(),this.rhsPriceAxisWidget.destroy(),this._chart.withModel({chart:this._chart,instance:this,callback:this._hideTooltip},function(){this.chart.model().lineCancelled().unsubscribe(this.instance,this.callback)});for(var e in this)delete this[e]},o.prototype.cancelZoom=function(){this._zoomSelector.css("display","none"),delete this._firstZoomPoint},o.prototype._onKeyUpListener=function(e){if(27===e.keyCode){this._chart.model().lineBeingCreated()&&this._chart.model().cancelCreatingLine(),this._firstZoomPoint&&this.cancelZoom();this._chart.model().model().crossHairSource().clearMeasure(),this.setCursorForTool(),this._hideTooltip()}},o.prototype._lineCancelledCallback=function(){try{this._chart.model().lineCancelled().subscribe(this,this._hideTooltip)}catch(e){}},o.prototype.backgroundColor=function(){return this._chart.properties().paneProperties.background.value()},o.prototype.priceAxisByCanvas=function(e){return e===this.lhsPriceAxisWidget.canvas||e===this.lhsPriceAxisWidget.top_canvas?this.lhsPriceAxisWidget:e===this.rhsPriceAxisWidget.canvas||e===this.rhsPriceAxisWidget.top_canvas?this.rhsPriceAxisWidget:null},o.prototype.updateScalesVisibility=function(){this.lhsPriceAxisWidget.setVisible(this._chart.properties().scalesProperties.showLeftScale.value()),this.rhsPriceAxisWidget.setVisible(this._chart.properties().scalesProperties.showRightScale.value())},o.prototype.chart=function(){return this._chart},o.prototype._chartModel=function(){return this._chart.model().model()},o.prototype.state=function(){return this._state},o.prototype.setState=function(e){this._state=e},o.prototype.stretchFactor=function(){return this._state?this._state._stretchFactor:Pane.DEFAULT_STRETCH_FACTOR},o.prototype.setStretchFactor=function(e){this._state&&(this._state._stretchFactor=e)},o.prototype.mouseEnterEvent=function(e){var t=this._chart.model();t&&(t.crossHairSource().visible=!0,"function"==typeof this.onMouseEnter&&this.onMouseEnter(this))},o.prototype.isLineTool=function(e){var t=TradingView[e];return"function"==typeof t&&t.prototype instanceof d},o.prototype.hideInplaceEditor=function(){return!!this._inplaceEditor&&(this._inplaceEditor.remove(),this._inplaceEditor=void 0,!0)},o.prototype._processMouseMoveWhileZoom=function(e){var t=Math.floor(this._chart.model().timeScale().coordinateToIndex(e.localX)),i=this._chart.model().timeScale().indexToCoordinate(t)-.5*this._chart.model().timeScale().barSpacing(),o=e.localY,n=Math.abs(i-this._firstZoomPoint.x),r=Math.abs(o-this._firstZoomPoint.y);i<this._firstZoomPoint.x?this._zoomSelector.css("left",i):this._zoomSelector.css("left",this._firstZoomPoint.x),e.localY<this._firstZoomPoint.y?this._zoomSelector.css("top",e.localY):this._zoomSelector.css("top",this._firstZoomPoint.y),this._zoomSelector.width(n),this._zoomSelector.height(r)},o.prototype._finishZoom=function(e){
var t=this._state.defaultPriceScale(),i=t.coordinateToPrice(e.localY),o=Math.round(this._chart.model().timeScale().coordinateToIndex(e.localX));o!==this._firstZoomPoint.index&&this._chart.model().zoomToViewport(this._firstZoomPoint.index,o,this._firstZoomPoint.price,i,this.state()),this._zoomSelector.css("display","none"),this._firstZoomPoint=null,O.resetToCursor()},o.EvironmentState=function(e){e.shiftKey&&(this.shift=!0),e.ctrlKey&&(this.control=!0)},o.prototype.checkMovepoint=function(e){return e===D.MOVEPOINT||e===D.MOVEPOINT_BACKGROUND&&TradingView.isMobile.any()},o.prototype.mouseDownEvent=function(e){var i,r,a,l,c,h,u,p,f,_,m,g,v,y;if(document.activeElement!==document.body&&document.activeElement!==document.documentElement?document.activeElement&&document.activeElement.blur?document.activeElement.blur():document.body.focus():document.getSelection?document.getSelection().removeAllRanges():document.selection&&document.selection.clear(),B.emit("mouse_down",{clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY}),this._updateCommonTooltip(null),i=this._chart.model(),r=new o.EvironmentState(e),i.mainSeries().setGotoDateResult(),this.hideInplaceEditor(),TradingView.supportTouch()&&(this._skipFirstMove=!0),a=this._state.defaultPriceScale(),!a.isEmpty()&&!i.timeScale().isEmpty()){if(l=i.crossHairSource(),TradingView.supportTouch()&&"LineToolBrush"!==O.tool.value()||i.setAndSaveCurrentPosition(e.localX,e.localY,this._state),c=l.price,h=l.index,l.startMeasurePoint()&&l.endMeasurePoint()&&l.clearMeasure(),r.shift&&O.toolIsCursor(O.tool.value())&&O.tool.setValue("measure"),"measure"===O.tool.value()&&!l.startMeasurePoint())return void l.startMeasuring({price:c,index:h,x:e.localX,y:e.localY},this._state);if(l.startMeasurePoint()&&!l.endMeasurePoint())return l.finishMeasure({price:c,index:h,x:e.localX,y:e.localY}),void O.resetToCursor();if(this._firstZoomPoint)return void this._finishZoom(e);if("zoom"===O.tool.value()&&t.enabled("chart_zoom"))return u=i.timeScale().indexToCoordinate(h)-.5*i.timeScale().barSpacing(),this._firstZoomPoint={price:c,index:h,x:u,y:e.localY},this._zoomSelector.css("display","block"),this._zoomSelector.css("left",u),this._zoomSelector.css("top",e.localY),this._zoomSelector.width(0),void this._zoomSelector.height(0);if(!this._isSelectBarModeEnabled()&&(this.isLineTool(O.tool.value())||i.lineBeingCreated()))return void((!t.enabled("charting_library_base")||h>=0)&&this._mouseDownEventForLineTool(e,r,h,c));if(p=this.dataSourceAtPoint(e.localX,e.localY),f=p&&p.source&&p.source.customization?p.source.customization:{},p.hittest&&p.hittest.result()===D.CUSTOM&&(_=p.hittest.data().mouseDownHandler)&&_(e),!this._chart.readOnly()){if(p&&p.hittest&&p.hittest.result()===D.CUSTOM_MOVE&&(_=p.hittest.data().pressedMouseMoveHandler))return void i.startCustomMoving(p.source,new n(e.localX,e.localY),_);if(p&&!f.disableSelection&&(m=p.hittest&&p.hittest.result()>D.MOVEPOINT_BACKGROUND,m=m||p.hittest&&p.hittest.result()===D.MOVEPOINT_BACKGROUND&&TradingView.isMobile.any(),
m?i.setSelectedSource(p.source,p.hittest&&p.hittest.data()):i.setSelectedSource(null)),p.source&&"eraser"===O.tool.value()&&!f.disableErasing&&(TradingView.isInherited(p.source.constructor,d)||TradingView.isInherited(p.source.constructor,s)))return g=p.hittest.eraseMarker(),void(e.ctrlKey&&void 0!==g&&p.source.processErase?p.source.processErase(i,g):i.removeSource(p.source));if(v=p.source&&TradingView.isInherited(p.source.constructor,d)&&p.source.isLocked(),!(this._lockDrawingsProperty.value()||v)){if(p.source&&p.source.userEditEnabled&&!p.source.userEditEnabled())return;if(p.hittest&&p.hittest.result()===D.CHANGEPOINT)return a=p.source.priceScale(),c=a.coordinateToPrice(e.localY),i.startChangingLinetool(p.source,{index:h,price:c},p.hittest.data(),r),void this._updateTooltip(e.localX,e.localY);if(p.hittest&&this.checkMovepoint(p.hittest.result()))return y=p.source.properties(),r.control&&y.clonable&&y.clonable.value()?void(this._clonningAtMoveLineTool=p.source):void(p.source.isFixed&&p.source.isFixed()?i.startMovingSource(p.source,new n(e.localX,e.localY),p.hittest.data()):(a=p.source.priceScale(),c=a.coordinateToPrice(e.localY),i.startMovingSource(p.source,{index:h,price:c},p.hittest.data())))}if(p.source&&TradingView.isInherited(p.source.constructor,E)&&p.source.isDraggable())return void(this._chart.draggingSource=p.source)}p.hittest&&p.hittest.result()===D.REGULAR||(this._processing=!0)}},o.prototype.drawRightThere=function(e){var t,i;this.isLineTool(e)&&(t=this._chart.model(),i=t.crossHairSource(),t.createLineTool(this._state,{index:i.index,price:i.price},e))},o.prototype._finishTool=function(e){var t,i=this._chart.model(),o=O.tool.value();O.resetToCursor(),this._hideTooltip(),i.setSelectedSource(e),this._chart.isTextTool(o)&&(t=i.createUndoCheckpoint(),g(e,i,null,t).then(function(e){e.focusOnText()}))},o.prototype._mouseDownEventForLineTool=function(e,t,i,o){var r,s,a,l,c,h,u,d,f,_,m=this._chart.model(),g=!1,v=null,y=e.localX,b=e.localY,S=this._chart.model().model().crossHairSource(),w=O.tool.value();if(O.hideAllDrawings().setValue(!1),O.lockDrawings().setValue(!1),TradingView.supportTouch()&&this.isLineTool(w)&&"LineToolBrush"!==w&&!m.lineBeingCreated()&&(this._startTouchPoint=new n(y,b),this._initCrossHairPosition=S.currentPoint(),this._skipFirstMove=!0),!m.lineBeingCreated()||m.lineBeingCreated()instanceof p)TradingView.supportTouch()&&"LineToolBrush"!==w||(_={index:i,price:o},v=m.createLineTool(this._state,_,w),m.lineBeingCreated()||(g=!0));else if(TradingView.supportTouch()){if(this._skipFirstMove=!0,!this._startTouchPoint)return this._startTouchPoint=new n(y,b),r=m.lineBeingCreated().points(),s=r[r.length-1],a=m.timeScale().indexToCoordinate(s.index),o=s.price,l=m.lineBeingCreated().priceScale(),l.isPercent()&&(c=m.lineBeingCreated().ownerSource().firstValue(),o=l.priceRange().convertToPercent(o,c)),h=l.priceToCoordinate(o),void(this._lastDrawingPoint=new n(a,h))}else v=m.lineBeingCreated(),u=m.paneForSource(v),u!==this._state?(d=this._dv.offset(),y=e.localX+d.left,b=e.localY+d.top,
f=this._chart.paneByState(u),d=f._dv.offset(),y-=d.left,b-=d.top,o=v.priceScale().coordinateToPrice(b),i=Math.round(m.timeScale().coordinateToIndex(y)),g=m.coninueCreatingLine({index:i,price:o},t)):g=m.coninueCreatingLine({index:i,price:o},t);m.setSelectedSource(v),g?this._finishTool(v):TradingView.supportTouch()&&"LineToolBrush"!==w||this._updateTooltip(e.localX,e.localY)},o.prototype._equalsCursorCache=function(e,t){return O.toolIsCursor(e.tool)?e.tool===t.tool&&e.theme===t.theme&&e.crosshair===t.crosshair:e.tool===t.tool&&e.theme===t.theme},o.prototype._setCursorClassName=function(e){var t="";e&&(t="pane--cursor-"+e),this._currentCursorClassName!==t&&(this._currentCursorClassName&&this.jqPane.removeClass(this._currentCursorClassName),t&&this.jqPane.addClass(t),this._currentCursorClassName=t,this.jqPane.css("cursor"))},o.prototype.setCursorForTool=function(e,t){var i,o=O.tool.value();if(O.toolIsCursor(o)){if(this._chart.draggingSource||this._isScrolling||this._chart.model()&&this._chart.model().sourceBeingMoved())return void this._setCursorClassName("grabbing");if(e)return void this._setCursorClassName("pointer")}return"eraser"===o?void this._setCursorClassName("eraser"):"zoom"===o?void this._setCursorClassName("zoom-in"):"dot"===(i=O.cursorTool.value())?void this._setCursorClassName("dot"):"arrow"===i?void this._setCursorClassName("default"):void this._setCursorClassName("")},o.prototype.setDragToAnotherPaneCursor=function(){this._setCursorClassName("grabbing")},o.prototype.gestureStartEvent=function(e){this._prev_pinch_scale=1,this._pinching=!0},o.prototype.gestureChangeEvent=function(e){var t,i,o=e.center.x-5,n=this._chart.paneWidgets()[0].lhsPriceAxisWidget.size.w,r=this._chart.model().timeScale().width();n&&(o=Math.max(0,o-n)),o=Math.min(o,r),t=2*(o/r-.5),i=5*(e.scale-this._prev_pinch_scale),i>0?this._chart.model().zoomIn(t,i):i<0&&this._chart.model().zoomOut(t,-i),this._prev_pinch_scale=e.scale},o.prototype.gestureEndEvent=function(e){this._pinching=!1},o.prototype._updateCommonTooltip=function(e){var t,i,o,n=this._lastCommonTooltipData,r=null;if(e&&e.hittest&&e.hittest.result()===D.CUSTOM&&(t=e.hittest.data())&&(r=t.tooltip||null),null!=n||null!=r)return null==r?(this._lastCommonTooltipData=null,void G.hide()):void(n&&r.text===n.text&&r.rect.x===n.rect.x&&r.rect.y===n.rect.y&&r.rect.w===n.rect.w&&r.rect.h===n.rect.h||(this._lastCommonTooltipData=r,i=TradingView.clone(r),o=this.jqPane.offset(),i.rect.x+=o.left,i.rect.y+=o.top,G.show(i)))},o.prototype._processMouseMoveForCustomHandler=function(e){var t,i=this.dataSourceAtPoint(e.localX,e.localY);i.hittest&&i.hittest.result()===D.CUSTOM&&(t=i.hittest.data().mouseMoveHandler)&&t(e)},o.prototype.mouseMoveEvent=function(e){var t,i,n,r,s,a,l,c,h,u,d,p,f,_,m;if(this._processMouseMoveForCustomHandler(e),t=this._chart.model()){if(i=e.localX,n=e.localY,r=new o.EvironmentState(e),this._firstZoomPoint)return void this._processMouseMoveWhileZoom(e);if(!(this._chart.readOnly()||this._editDialog&&this._editDialog.isVisible())&&(s=O.tool.value(),a=null,l=null,c=null,
this._processing||!O.toolIsCursor(s)&&"eraser"!==s||(a=this.dataSourceAtPoint(e.localX,e.localY),h=a&&a.source,u=this._chart.model().crossHairSource(),h&&("LineToolOrder"===h.toolname||"LineToolPosition"===h.toolname||"AlertLabel"===h.toolname)?u.visibleTrap=!1:u.visibleTrap=!0,a.hittest&&a.hittest.result()>D.MOVEPOINT_BACKGROUND?(l=a.source,c=a.hittest.result(),!a.source||"eraser"===s&&a.source.constructor===TradingView.Series?t.setHoveredSource(null):t.setHoveredSource(a.source,a.hittest.data())):t.setHoveredSource(null)),this._isSelectBarModeEnabled()?this._setCursorClassName("pointer"):this.setCursorForTool(l,c),this._updateCommonTooltip(a),null!==a&&null!==a.hittest&&a.hittest.result()===D.CUSTOM_MOVE))switch(d=a.hittest.data()||{},d.cursorType){case Y.VerticalResize:this._setCursorClassName("ns-resize")}if(this._chart.readOnly()&&(a=this.dataSourceAtPoint(e.localX,e.localY),null!==a.source?t.setHoveredSource(a.source,a.hittest.data()):t.setHoveredSource(null,null)),this._chart.model().lineBeingCreated()&&(p=this._chart.model().lineBeingCreated(),(f=this._chart.model().paneForSource(p))!==this._state))return _=this._dv.offset(),i+=_.left,n+=_.top,m=this._chart.paneByState(f),_=m._dv.offset(),i-=_.left,n-=_.top,void t.setAndSaveCurrentPosition(i,n,f);s=O.tool.value(),TradingView.supportTouch()&&this.isLineTool(s)||(t.setAndSaveCurrentPosition(i,n,this._state,r),this._updateTooltip(i,n))}},o.prototype.pressedMouseMoveEvent=function(e){var i,r,s,a,l,c,h,u,f,_,m,g,v,y,b,S,w,T,P,C,x,E,L,I,A,k,M,D;if(!this._pinching){if(this._skipFirstMove?(delete this._skipFirstMove,delete this._touchMove):this._touchMove=!0,i=new o.EvironmentState(e),r=this._chart.model(),s=e.localX,a=e.localY,this._firstZoomPoint)return this._processMouseMoveWhileZoom(e),void(this._firstZoomPoint.draggingMode=!0);if(l=O.tool.value(),TradingView.supportTouch()&&this._startTouchPoint&&this.isLineTool(l)&&"LineToolBrush"!==l&&!r.lineBeingCreated()&&!this._isSelectBarModeEnabled())return c=this._initCrossHairPosition,h=new n(s,a),u=h.subtract(this._startTouchPoint),f=c.add(u),this._chart.model().setAndSaveCurrentPosition(f.x,f.y,this._state),void this._updateTooltip(f.x,f.y);if(TradingView.supportTouch()&&r.lineBeingCreated()&&!(r.lineBeingCreated()instanceof p))return void(this._startTouchPoint&&(_=r.lineBeingCreated(),m=e.localX-this._startTouchPoint.x,g=e.localY-this._startTouchPoint.y,v=this._lastDrawingPoint.x+m,y=this._lastDrawingPoint.y+g,b=this._chart.model().paneForSource(_),r.setAndSaveCurrentPosition(v,y,b),this._updateTooltip(v,y)));if(r.setAndSaveCurrentPosition(s,a,this._state,i),this._updateTooltip(s,a),S=O.tool.value(),w=this._isSelectBarModeEnabled(),(!this.isLineTool(S)||"LineToolBrush"===l||w)&&(0===e.button||Modernizr.touch)){if("LineToolBrush"===S&&!w){if(T=this._state.defaultPriceScale(),T.isEmpty())return;if(!this._chart.model().lineBeingCreated())return;return P=T.coordinateToPrice(e.localY),C=Math.round(this._chart.model().timeScale().coordinateToIndex(e.localX)),
void((!t.enabled("charting_library_base")||C>=0)&&this._chart.model().coninueCreatingLine({index:C,price:P}))}if(this._chart.draggingSource&&(x=e.target,E=this._chart.paneByCanvas(x),E&&(E!==this?E.setDragToAnotherPaneCursor():E.setCursorForTool()),L=this._chart.priceAxisByCanvas(x),L&&L.setCursor("grabbing"),(I=this._chart.timeAxisByCanvas(x))&&I.setCursor("grabbing")),r.timeScale().isEmpty())return;if(r.customMoveBeingProcessed())return void r.processCustomMove(new n(s,a));if(r.lineBeingEdited())return C=Math.round(this._chart.model().timeScale().coordinateToIndex(s)),(!t.enabled("charting_library_base")||C>=0)&&r.changeLinePoint({x:s,y:a},i),this._updateTooltip(s,a),void this.setCursorForTool();if(r.sourceBeingMoved()){if(T=r.sourceBeingMoved().priceScale(),T.isEmpty())return;if(C=this._chart.model().timeScale().coordinateToIndex(e.localX),P=T.coordinateToPrice(e.localY),A=r.sourceBeingMoved(),this.setCursorForTool(),t.enabled("charting_library_base")&&!r.sourceBeingMoved().onlyYMoving()&&(k=A.points(),0!==k.length&&k.reduce(function(e,t){return t.index<e.index?t:e}).index-((A._currentMovingPoint||A._startMovingPoint).index-C)<0))return;return TradingView.isInherited(A.constructor,d)&&A.isFixed()?void r.moveSource(new n(s,a)):void r.moveSource({index:C,price:P},i)}if(i.control&&this._clonningAtMoveLineTool)return _=this._clonningAtMoveLineTool,M=this.cloneLineTool(_,!0),D=this._chart.model().model().dataSourceForId(M),this._chart.model().setSelectedSource(D),r.startMovingSource(D,{index:this._chart.model().timeScale().coordinateToIndex(e.localX),price:_.priceScale().coordinateToPrice(e.localY)}),void(this._clonningAtMoveLineTool=null);T=this._state.defaultPriceScale(),!this._startScrollingPos&&t.enabled("chart_scroll")&&(this._startScrollingPos={x:e.clientX,y:e.clientY}),this._startScrollingPos&&(this._startScrollingPos.x===e.clientX&&this._startScrollingPos.y===e.clientY||this._isScrolling||(r.beginUndoMacro("scroll").setCustomFlag("doesnt_affect_save",!0),T.isEmpty()||r.startScrollPrice(this._state,T,e.localY),r.startScrollTime(e.localX),this._isScrolling=!0,this.setCursorForTool())),this._isScrolling&&(T.isEmpty()||r.scrollPriceTo(this._state,T,e.localY),r.scrollTimeTo(e.localX))}}},o.prototype._processMouseUpForCustomHandler=function(e){var t,i=this.dataSourceAtPoint(e.localX,e.localY);i.hittest&&i.hittest.result()===D.CUSTOM&&(t=i.hittest.data().mouseUpHandler)&&t(e)},o.prototype.mouseUpEvent=function(e){var t,i,o,n,s,a,l,c,h,u,d,f,_,m,g,v,y,b,S,w,T,P,C,x,E,L,I,A,k,M,D,V,N;if(this._processMouseUpForCustomHandler(e),this._clonningAtMoveLineTool=null,t=this,B.emit("mouse_up",{clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY}),i=this._chart.model(),o=this._touchMove,delete this._touchMove,n=O.tool.value(),TradingView.supportTouch()&&!o&&"LineToolBrush"!==n&&this.isLineTool(n)&&!i.lineBeingCreated())return s=i.crossHairSource().currentPoint(),a=this._state.defaultPriceScale(),l=a.coordinateToPrice(s.y),c=Math.round(i.timeScale().coordinateToIndex(s.x)),h={
index:c,price:l},u=i.createLineTool(this._state,h,n),i.setSelectedSource(u),i.lineBeingCreated()||this._finishTool(u),this._updateTooltip(s.x,s.y),void delete this._startTouchPoint;if(i.lineBeingCreated()&&!(i.lineBeingCreated()instanceof p)&&this._startTouchPoint)return d=!1,delete this._startTouchPoint,o||(u=i.lineBeingCreated(),f=u.points()[u.points().length-1],l=f.price,_=u.priceScale(),_.isPercent()&&(m=i.lineBeingCreated().ownerSource().firstValue(),l=_.priceRange().convertToPercent(l,m)),d=i.coninueCreatingLine({index:f.index,price:l},{}),delete this._lastDrawingPoint),void(d&&this._finishTool(u));if(this._firstZoomPoint&&this._firstZoomPoint.draggingMode)return void this._finishZoom(e);if(0===e.button||TradingView.supportTouch()){if(this._processing=!1,i=this._chart.model(),i.customMoveBeingProcessed()&&i.endCustomMoving(),i.lineBeingEdited())return i.endChangingLinetool(),void this._hideTooltip();if("LineToolBrush"===n&&!this._isSelectBarModeEnabled()){if(i.finishLineTool(),a=this._state.defaultPriceScale(),a.isEmpty())return;if(!this._chart.model().lineBeingCreated())return;return l=a.coordinateToPrice(e.localY),c=Math.round(this._chart.model().timeScale().coordinateToIndex(e.localX)),void this._chart.model().coninueCreatingLine({index:c,price:l})}if(g=i.sourceBeingMoved())return i.endMovingSource(),this._hideTooltip(),this.setCursorForTool(g),void i.invalidate(new R(R.UPDATE_CURSOR_ONLY));if(this._chart.readOnly()||(v=this.dataSourceAtPoint(e.localX,e.localY),y=this._chart.model().crossHairSource(),b=e.localX>=0&&e.localX<this.size.w,v&&v.source===y||!b||(S=t._chart.model().timeScale().coordinateToIndex(e.localX),t._chart.model().model().onSyncScrollNeeded(S))),w=this._isScrolling&&this._chart.model().undoHistory.undoStack().head()instanceof r,this._isScrolling&&(a=this._state.defaultPriceScale(),i.endScrollPrice(this._state,a),t=this,T=function(){i.endScrollTime(),i.endUndoMacro(),t._startScrollingPos=void 0,t._isScrolling=!1,t.setCursorForTool()},TradingView.supportTouch()?(P=i.timeScale().m_scrollStartPoint,C=.05*(e.localX-P),x=null,E=function(t){var o,n;null===x&&(x=t),o=.01*Math.min(100,3*(t-x)),o=Math.sqrt(o),n=e.localX+C*o,i.scrollTimeTo(n),o>=1?T():requestAnimationFrame(E)},requestAnimationFrame(E)):T()),this._chart.draggingSource)for(L=e.target,I=this._chart.paneByCanvas(L),I&&I!==this&&(A=I._state.findSuitableScale(this._chart.draggingSource),w&&(w=!1,this._chart.model().undoHistory.undo()),this._chart.model().move(this._chart.draggingSource,I._state,A)),k=this._chart.timeAxisByCanvas(L),k&&(w&&(w=!1,this._chart.model().undoHistory.undo()),this._chart.model().move(this._chart.draggingSource,null,null)),this._chart.draggingSource=null,M=this._chart.getTimeScale(),M&&M.restoreDefaultCursor(),v=this.dataSourceAtPoint(e.localX,e.localY),D=this._chart.paneWidgets(),V=0;V<D.length;V++)N=D[V],N===this&&v?N.setCursorForTool(v.source,v.hittest||null):N.setCursorForTool(),N.lhsPriceAxisWidget.restoreDefaultCursor(),N.rhsPriceAxisWidget.restoreDefaultCursor()}delete this._touchMove},
o.prototype.mouseLeaveEvent=function(e){var t=this._chart.model();t&&(TradingView.isMobile.any()||t.model().clearCurrentPosition(),t.setHoveredSource(null),this._updateCommonTooltip(null),"function"==typeof this.onMouseLeave&&this.onMouseLeave(this))},o.prototype.mouseClickEvent=function(e){var t,i=this.dataSourceAtPoint(e.localX,e.localY),o=this._chart.model(),n=i.source;this._lastClickedSource!==n&&(this._lastClickedSource&&(this._lastClickedSource.onClickOutside(e),o.chartModel().updateSource(this._lastClickedSource)),this._lastClickedSource=n),i.hittest&&i.hittest.result()===D.CUSTOM&&(t=i.hittest.data().mouseClickHandler)&&(t(e),o.chartModel().updateSource(n)),o.hoveredSource()instanceof f&&o.hoveredSource().onClicked()},o.prototype.showEditDialogForSource=function(e){if(!(this.chart().onWidget()||e.userEditEnabled&&!e.userEditEnabled())){var t=this;g(e,this._chart.model()).then(function(e){t._editDialog=e})}},o.prototype.mouseDoubleClickEvent=function(e){var t,i=!this._chart.readOnly()&&!this.isLineTool(O.tool.value())&&this.dataSourceAtPoint(e.localX,e.localY),o=i&&i.hittest&&i.source;o&&i.hittest.result()<=D.MOVEPOINT_BACKGROUND&&!TradingView.isMobile.any()&&(o=null),o&&o.customization&&o.customization.disableSelection&&(o=null),o&&o._metaInfo&&"Sessions@tv-basicstudies"===o._metaInfo.id&&(o=this._chart.model().mainSeries()),o?(t=!1,t=i.source instanceof T,t?TradingView.alertsDispatcher.openEditDialog(i.source.alert()):this.showEditDialogForSource(o)):this._chart.readOnly()||this.isLineTool(O.tool.value())||this._chart.model().lineBeingCreated()||this._chart.model().selectedSource()||this._chart.toggleMaximizePane(this)},o.prototype.showContextMenuForSource=function(e,t){e.hasContextMenu()&&(this._chart.model().setSelectedSource(e),e.constructor===TradingView.Series?this._seriesContextMenu(e).show(t):TradingView.isInherited(e.constructor,b)?this._studyEsdContextMenu(e).show(t):TradingView.isInherited(e.constructor,s)?this._studyContextMenu(e).show(t):TradingView.isInherited(e.constructor,S)?this._publishedChartsContextMenu(e).show(t):TradingView.isInherited(e.constructor,h)||TradingView.isInherited(e.constructor,u)?this._tradingDrawingsContextMenu(e).show(t):TradingView.isInherited(e.constructor,d)?this._lineContextMenu(e).then(function(e){e.show(t)}):TradingView.isInherited(e.constructor,T)&&!e.fake?this._alertLabelContextMenu(e).show(t):TradingView.isInherited(e.constructor,w)?this._chartEventsContextMenu(e).show(t):e===this._chart.model().crossHairSource()&&e.handleContextMenuEvent(t))},o.prototype.contextMenuEvent=function(e,i){var o,n,r,s;if(t.enabled("pane_context_menu")){if(this._chart.model().crossHairSource().startMeasurePoint())return void this._chart.model().crossHairSource().clearMeasure();if(!this._pinching&&(this._firstZoomPoint&&this.cancelZoom(),!this.hideInplaceEditor())){if(!O.toolIsCursor(O.tool.value())&&!this._isSelectBarModeEnabled()){if(TradingView.isMobile.any())return;return O.resetToCursor(!0),this.setCursorForTool(),this._hideTooltip(),
void(this._chart.model().lineBeingCreated()&&this._chart.model().cancelCreatingLine())}this.chart().readOnly()||this._disableContextMenu||(this._chart.model().mainSeries().createSessStudy(),this._contextMenuX=e.localX,this._contextMenuY=e.localY,o=this.dataSourceAtPoint(e.localX,e.localY),n=o?o.source:null,r=o&&o.hittest?o.hittest.result():0,s=r>=D.REGULAR||r>=D.MOVEPOINT_BACKGROUND&&TradingView.isMobile.any(),this._chart.updateActions(),null!==n&&s?this.showContextMenuForSource(n,e):(this._contextMenu(e).then(function(t){return t.show(e)}),this._chart.model().setSelectedSource(null)),this.paint())}}},o.prototype._contextMenu=function(e){function t(e){return null===e.text}var i=this;return Promise.all(this._initActions(e)).then(function(e){var o,n,r=i._customActions();for(e=e.filter(function(e){return null!==e}),r.remove.forEach(function(t){for(var i=0;i<e.length;i++)if(e[i].text===t){e.splice(i,1);break}}),o=r.top.concat(e).concat(r.bottom),n=o.length-1;n>0;n--)t(o[n])&&t(o[n-1])&&o.splice(n,1);return o.length&&t(o[0])&&o.splice(0,1),o.length&&t(o[o.length-1])&&o.splice(o.length-1,1),M.createMenu(o,{statName:"ChartContextMenu"})})},o.prototype.createRemoveMenu=function(){var e,t=this._chart.actions(),i=new I({text:window.t("Remove"),statName:"Remove"});return i.subActions||(i.subActions=[]),e=i.subActions,e.push(t.paneRemoveAllStudies,t.paneRemoveAllDrawingTools,t.paneRemoveAllStudiesDrawingTools),i},o.prototype.createDrawingMenu=function(){var e,i=this._chart.actions(),o=new I({text:window.t("Drawing Tools"),statName:"DrawingTools"});return o.subActions||(o.subActions=[]),e=o.subActions,t.enabled("left_toolbar")&&e.push(i.drawingToolbarAction),t.enabled("items_favoriting")&&e.push(i.favoriteDrawingToolbar),0!==o.subActions.length&&e.push(new k),e.push(i.magnetAction,i.stayInDrawingModeAction),t.enabled("support_multicharts")&&e.push(i.syncModeAction),e.push(new k,i.lockDrawingsAction,i.hideAllDrawingsAction,i.paneRemoveAllDrawingTools),o},o.prototype._initActions=function(e){var i,o,n,r,s,a=this,l=this._chart.actions(),c=[];return t.enabled("datasource_copypaste")&&(!(i=q.get())||"study"!==i.type&&"drawing"!==i.type||(o=new I({text:window.t("Paste %s").replace("%s",window.t(i.title||i.type)),shortcut:"Ctrl-V",statName:"Paste"}),o.callbacks().subscribe(null,function(){a._chart.onAppClipboardPaste(a.state())}),c.push(o))),t.enabled("alerts")&&(c.length&&c.push(new k),this._chartModel().canCreateAlertForDataSource(this.state().mainDataSource())&&c.push(this._createActionAddAlert({e:e}))),this.chart().onWidget()||c.push(this.createActionTrade(e).catch(function(){return null})),l.gotoDate&&c.push(l.gotoDate),c.length&&c.push(new k),c.push(l.chartReset,l.symbolSearch,l.changeInterval),n=window.widgetbar&&(!window.widgetbar._customization||window.widgetbar._customization.watchlist),n&&l.addToWatchlist&&c.push(l.addToWatchlist),t.enabled("text_notes")&&m("text_notes")&&c.push(l.addToTextNotes),t.enabled("symbol_info")&&c.push(l.showSymbolInfoDialog),
c.push(new k,this._createLockTimeAxisAction(e),new k,l.paneObjectTree,l.insertIndicator),t.enabled("charting_library_base")||c.push(l.applyStudyTemplate),t.enabled("compare_symbol")&&c.push(l.compareOrAdd),c.push(this.createDrawingMenu()),t.enabled("charting_library_base")&&c.push(l.hideAllMarks),c.push(this.createRemoveMenu(),new k),r=this._priceAxisMenu(),r&&c.push(r),s=this._timeAxisMenu(),s&&c.push(s),t.enabled("charting_library_base")||c.push(l.applyColorTheme),t.enabled("show_chart_property_page")&&c.push(l.chartProperties),pro.hasPackage("mtp-mtpredictor")&&this.state().containsMainSeries()&&c.push(new k,this._createMTPredictorActions()),c},o.prototype._customActions=function(){var e,i={top:[],bottom:[],remove:[]},o=this._chart.model(),n=o.timeScale(),r=this._state.defaultPriceScale();return t.enabled("custom_items_in_context_menu")?(e=n.isEmpty()?void 0:n.indexToUserTime(n.coordinateToIndex(this._contextMenuX)),B.emit("onContextMenu",{unixtime:e?e/1e3:void 0,price:r.isEmpty()?void 0:r.coordinateToPrice(this._contextMenuY),callback:function(e){[].concat(e).forEach(function(e){if(e.text)if(e.text.length>1&&"-"===e.text[0])i.remove.push(e.text.slice(1));else{var t;"-"===e.text?t=new k:(t=new I({text:e.text}),t.callbacks().subscribe(null,e.click)),e.position&&"top"===e.position?i.top.push(t):i.bottom.push(t)}})}}),i):i},o.prototype._timeAxisMenu=function(){if(this._chart.model().timeScale().isEmpty())return null;var e=this._chart.getTimeScale();return new I({text:window.t("Time Scale"),subActions:e.getContextMenuActions(),statName:"TimeScale"})},o.prototype.getDefaultPriceAxisWidget=function(){var e=this._state.defaultPriceScale();return e.isEmpty()?null:e===this._state.leftPriceScale?this.leftPriceAxisWidget():this.rightPriceAxisWidget()},o.prototype._priceAxisMenu=function(){var e=this.getDefaultPriceAxisWidget();return e?new I({text:window.t("Price Scale"),subActions:e.getContextMenuActions(),statName:"PriceScale"}):null},o.prototype._seriesContextMenu=function(e){var i,o,n,r,s,a=this._chart.actions(),l=e.properties().visible.value(),c=null;if(this._chart.readOnly())i=[l?a.seriesHide:this.createActionShow(e),new k,this.createActionShowCountdown(e),new k,this.createActionScaleLeft(e),this.createActionScaleRight(e),this.createActionNoScale(e)],t.enabled("countdown")||i.splice(3,1),c=M.createMenu(i);else{if(o=this._mergeContentMenuItems(e),n=[a.showSymbolInfoDialog,a.compare,l?a.seriesHide:this.createActionShow(e),this.createVisualOrderAction(e),new k,this.createActionShowCountdown(e),new k],t.enabled("countdown")||n.splice(5,2),t.enabled("compare_symbol")||n.splice(1,1),t.enabled("symbol_info")||n.splice(0,1),!this.chart().onWidget()&&t.enabled("show_chart_property_page")&&n.unshift(a.format),this._chartModel().canCreateAlertForDataSource(e)&&n.unshift(this._createActionAddAlert({series:e})),r=this.createActionLockScale(e),r&&n.push(r,new k),o.length>0){for(s=0;s<o.length;s++)n.push(o[s]);n.push(new k)}n.push(this.createActionScaleLeft(e),this.createActionScaleRight(e),this.createActionNoScale(e)),
pro.hasPackage("mtp-mtpredictor")&&n.push(new k,this._createMTPredictorActions()),c=M.createMenu(n)}return c},o.prototype.toggleLockTimeAxis=function(e,t){var i,o,n;"boolean"!=typeof t&&(t=!O.lockTimeAxis().value()),t&&(i=this._chart.model().timeScale(),o=i.coordinateToIndex(e),n=i.points().roughTime(o),O.lockTimeAxisTime.setValue(n)),O.lockTimeAxis().setValue(t)},o.prototype._createLockTimeAxisAction=function(e){var t=new I({text:window.t("Lock Cursor In Time"),checkable:!0,statName:"ToggleLockCursorInTime"}),i=O.lockTimeAxis().value();return t.setChecked(i),t.callbacks().subscribe(null,this.toggleLockTimeAxis.bind(this,e.localX,!i)),t},o.prototype._createHVLineAction=function(e,t){t="vertical"===t&&"vertical"||"horizontal";var i=new I({text:"vertical"===t?window.t("Create Vertical Line"):window.t("Create Horizontal Line"),statName:"vertical"===t?"CreateVerticalLine":"CreateHorizontalLine"});return i.callbacks().subscribe(this,function(){var i=this._chart.model().timeScale().coordinateToIndex(e.localX),o=this._state.defaultPriceScale().coordinateToPrice(e.localY),n=this._chart.model().createLineTool(this._state,{index:i,price:o},"vertical"===t&&"LineToolVertLine"||"LineToolHorzLine");this._finishTool(n)}),i},o.prototype._createMTPredictorActions=function(){var e=this,t=function(t,i,o){var n=new I({text:t});return n.callbacks().subscribe(e,function(){var e,t,n=this._chart.model(),r=n.timeScale(),s=this._state.defaultPriceScale();r.isEmpty()||s.isEmpty()||(o?(e=s.coordinateToPrice(this._contextMenuY),t=Math.round(r.coordinateToIndex(this._contextMenuX)),n.createLineTool(this._state,{index:t,price:e},i)):O.tool.setValue(i))}),n};return new I({text:window.t("MTPredictor"),subActions:[t(window.t("Apply Manual Risk/Reward"),"LineStudyMtpRiskReward",!1),t(window.t("Apply Manual Decision Point"),"LineStudyMtpDecisionPoint",!0),t(window.t("Analyze Trade Setup"),"LineStudyMtpAnalysis",!0),new I({text:window.t("Apply Elliot Wave"),subActions:[t(window.t("Apply Elliot Wave Intermediate"),"LineStudyMtpElliotWaveMain",!0),t(window.t("Apply Elliot Wave Major"),"LineStudyMtpElliotWaveMajor",!0),t(window.t("Apply Elliot Wave Minor"),"LineStudyMtpElliotWaveMinor",!0)]}),new I({text:window.t("Apply WPT Up Wave"),subActions:[t(window.t("Up Wave 1 or A"),"LineStudyMtpUpWave1OrA",!1),t(window.t("Up Wave 2 or B"),"LineStudyMtpUpWave2OrB",!1),t(window.t("Up Wave C"),"LineStudyMtpUpWaveC",!1),t(window.t("Up Wave 3"),"LineStudyMtpUpWave3",!1),t(window.t("Up Wave 4"),"LineStudyMtpUpWave4",!1),t(window.t("Up Wave 5"),"LineStudyMtpUpWave5",!1)]}),new I({text:window.t("Apply WPT Down Wave"),subActions:[t(window.t("Down Wave 1 or A"),"LineStudyMtpDownWave1OrA",!1),t(window.t("Down Wave 2 or B"),"LineStudyMtpDownWave2OrB",!1),t(window.t("Down Wave C"),"LineStudyMtpDownWaveC",!1),t(window.t("Down Wave 3"),"LineStudyMtpDownWave3",!1),t(window.t("Down Wave 4"),"LineStudyMtpDownWave4",!1),t(window.t("Down Wave 5"),"LineStudyMtpDownWave5",!1)]})]})},o.prototype.createEarningsShow=function(e){
var t=this._chart.model().mainSeries().properties().esdShowEarnings,i=new I({checkable:!0,text:window.t("Show Earnings"),enabled:!0,checked:t.value(),statName:"ToggleShowEarnings"});return i.callbacks().subscribe(this,function(e){this._chart.model().setProperty(t,e.checked,"Show Earnings")}),i},o.prototype.createDividendsShow=function(e){var t=this._chart.model().mainSeries().properties().esdShowDividends,i=new I({checkable:!0,text:window.t("Show Dividends"),enabled:!0,checked:t.value(),statName:"ToggleShowDividends"});return i.callbacks().subscribe(this,function(e){this._chart.model().setProperty(t,e.checked,"Show Dividends")}),i},o.prototype.createSplitsShow=function(e){var t=this._chart.model().mainSeries().properties().esdShowSplits,i=new I({checkable:!0,text:window.t("Show Splits"),enabled:!0,checked:t.value(),statName:"ToggleShowSplits"});return i.callbacks().subscribe(this,function(e){this._chart.model().setProperty(t,e.checked,"Show Splits")}),i},o.prototype._studyEsdContextMenu=function(e){var t=[];return this._chart.readOnly()||t.push(this.createDividendsShow(e),this.createSplitsShow(e),this.createEarningsShow(e)),M.createMenu(t)},o.prototype._studyContextMenu=function(e){var i,o,n,r,s,a=this._chart.actions(),l=e.properties().visible.value(),c=[];return e.userEditEnabled()?(i=this._chart,this._chart.readOnly()?c=[l?a.studyHide:this.createActionShow(e),new k,this.createActionScaleLeft(e),this.createActionScaleRight(e),this.createActionNoScale(e)]:(o=[],n=e.metaInfo(),n.pine&&(o=[a.viewSourceCode],a.viewSourceCode.setEnabled(!0),P.isAuthToGetPineSourceCode(n.scriptIdPart,n.pine.version).done(function(e){e||a.viewSourceCode.setEnabled(!1)}).fail(function(e){X.logError("Failed isAuthToGetPineSourceCode, reason: "+e)})),c=[],t.enabled("study_on_study")&&e.canHaveChildren()&&c.push(this.createActionAddChildStudy(e)),t.enabled("property_pages")&&c.push(a.format),c=c.concat(o),c=c.concat([l?a.studyHide:this.createActionShow(e),this.createVisualOrderAction(e),new k]),r=this._mergeContentMenuItems(e),!r.length||e.properties().linkedToSeries&&e.properties().linkedToSeries.value()||(r.push(new k),c=c.concat(r)),c.push(this.createActionScaleLeft(e),this.createActionScaleRight(e),this.createActionNoScale(e),new k),t.enabled("datasource_copypaste")&&!e.isChildStudy()&&(s=new I({text:window.t("Copy"),shortcut:"Ctrl-C",statName:"Copy"}),s.callbacks().subscribe(null,function(){i.onAppClipboardCopy(e)}),c.push(s)),c.push(a.studyRemove),this._chartModel().canCreateAlertForDataSource(e)&&c.unshift(this._createActionAddAlert({series:e}))),M.createMenu(c)):M.createMenu(c)},o.prototype.createLineToolTemplateAction=function(e){var t,i,o,n,r,s=window.lineToolPropertiesToolbar.templatesList(),a=new I({text:window.t("Templates"),statName:"Templates"});return a.subActions||(a.subActions=[]),t=a.subActions,i=new I({text:window.t("Save As..."),statName:"SaveAs"}),i.callbacks().subscribe(this,function(){s.showSaveDialog(function(t){var i=JSON.stringify(e.template());s.saveTemplate(t,i)})}),t.push(i),o=new I({
text:window.t("Apply Default"),statName:"ApplyDefault"}),o.callbacks().subscribe(this,function(){this._chart.model().restoreLineToolFactoryDefaults(e,"Load default drawing template"),window.lineToolPropertiesToolbar.onSourceChanged(e)}),t.push(o),n=$.Deferred(),s.templatesLoaded().then(function(){var e=s.getData(),t=[];0!==e.length&&t.push(new k),$.each(e,function(e,i){function o(e){return function(){var t=this.getTopLevelMenu();return t&&t.hide(),s.deleteAction(e),!0}}var n=new I({text:i,statName:"ApplyTemplate"});n.callbacks().subscribe(this,function(){s.loadTemplate(i)}),n.deleteButton={action:o(n.text)},t.push(n)}),n.resolve(t)}),r=new A(n),t.push(r),a},o.prototype._publishedChartsContextMenu=function(e){var t,i,o,n,r=this._chart.actions(),s=[];return s.push(r.lineHide),is_authenticated&&(t=new I({checked:e.properties().filter.value()===S.FILTER_NONE,checkable:!0,text:window.t("All ideas"),callbackContext:{target:e,value:S.FILTER_NONE},statName:"ToggleAllIdeas"}),i=new I({checked:e.properties().filter.value()===S.FILTER_FOLLOWING,checkable:!0,text:window.t("Ideas of the people I follow & my ideas"),callbackContext:{target:e,value:S.FILTER_FOLLOWING},statName:"ToggleIdeasOfPeopleAndUser"}),o=new I({checked:e.properties().filter.value()===S.FILTER_PRIVATE,checkable:!0,text:window.t("My ideas only"),callbackContext:{target:e,value:S.FILTER_PRIVATE},statName:"ToggleUserIdeas"}),n=function(e){var t=e.callbackContext(),i=t.target,o=t.value;i.properties().filter.setValue(o),i.updateAllViews(),i._model.updateSource(i)},t.callbacks().subscribe(null,n),i.callbacks().subscribe(null,n),o.callbacks().subscribe(null,n),s.push(new k),s.push(t),s.push(i),s.push(o)),M.createMenu(s)},o.prototype._lineContextMenu=function(e){var n=[],r=this._chart,s=r.actions(),a=this;return new Promise(function(l){i.e(25).then(function(c){var h,u,d,p,f,_=i(1326).hasStylesPropertyPage;if(r.readOnly())n.push(s.lineHide);else if(e.userEditEnabled()&&(t.enabled("alerts")&&!a.chart().onWidget()&&(e.hasAlert.value()?n.push(a._createEditAlertDrawingAction(e)):e.canHasAlert()&&n.push(a._createActionAddAlert({drawing:e}))),t.enabled("property_pages")&&_(e,r.model())&&n.push(s.format),n.push(s.paneObjectTree),t.enabled("charting_library_base")||n.push(a.createLineToolTemplateAction(e)),n.push(a.createVisualOrderAction(e),new k,s.lineHide,s.lineToggleLock),e.properties().clonable&&e.properties().clonable.value()&&(h=new I({text:window.t("Clone"),callbackContext:{target:e},shortcut:"Ctrl+Drag",doNotBindShortcut:!0,statName:"Clone"}),h.callbacks().subscribe(a,o.prototype.cloneLineTool.bind(a,e,!1)),n.push(h)),t.enabled("datasource_copypaste")&&!e.properties().blockCopying&&(u=new I({text:window.t("Copy"),shortcut:"Ctrl-C",statName:"Copy"}),u.callbacks().subscribe(null,function(){r.onAppClipboardCopy(e)}),n.push(u)),t.enabled("support_multicharts")&&(e.linkKey?n.push(s.lineUnlink):n.push(s.lineCopyToCharts)),n.push(s.lineRemove),e.additionalActions))for(n.push(new k),d=e.additionalActions(r.model()),p=0;p<d.length;p++)n.push(d[p]);f=M.createMenu(n),l(f)
}.bind(null,i)).catch(i.oe)})},o.prototype._alertLabelContextMenu=function(e){var t=e.alert(),i=[];return t.get("active")?i.push(TradingView.alertsDispatcher.actionsCreators.stopAlert(t)):i.push(TradingView.alertsDispatcher.actionsCreators.restartAlert(t)),i.push(TradingView.alertsDispatcher.actionsCreators.editAlert(t)),i.push(TradingView.alertsDispatcher.actionsCreators.deleteAlert(t)),i.push(new k),i.push(this._createAlertToggleHorzLineLabelAction(e)),i.push(new k),i.push(this._createShowGlobalAlertPropertiesLabelAction(e)),M.createMenu(i)},o.prototype._tradingDrawingsContextMenu=function(e){return M.createMenu(e.contextMenuItems())},o.prototype._chartEventsContextMenu=function(e){var i,o,n,r=[];return t.enabled("property_pages")&&(i=this._chart,o=new I({text:window.t("Format..."),enabled:!0,statName:"Format"}),o.callbacks().subscribe(this,function(e){TVSettings.setValue("properties_dialog.active_tab.chart",window.t("Events & Alerts")),i.showChartProperties()}),r.push(o)),n=new I({text:window.t("Hide Events on Chart"),enabled:!0,statName:"HideEvents"}),n.callbacks().subscribe(this,function(t){e.properties().visible.setValue(!1)}),r.push(n),M.createMenu(r)},o.prototype._createAlertToggleHorzLineLabelAction=function(e){var t=e.properties().line.visible,i=new I({checkable:!0,text:window.t("Extend Alert Line"),enabled:!0,checked:t.value(),statName:"ToggleExtendAlertLine"});return i.callbacks().subscribe(this,function(e){var i=e.checked,o=i?window.t("Show alert label line"):window.t("Hide alert label line");this._chart.model().setProperty(t,i,o)}),i.setEnabled(e.globalProperties().line.visible.value()),i},o.prototype._createShowGlobalAlertPropertiesLabelAction=function(e){var t=this.chart(),i=new I({text:window.t("Visual settings..."),statName:"VisualSettings"});return i.callbacks().subscribe(this,function(e){t.showChartProperties({selectAlertEvent:!0})}),i},o.prototype._createEditAlertDrawingAction=function(e){if(e.hasAlert.value()){var t=new I({text:window.t("Edit {0} Alert...").format(e.title()),statName:"EditAlert"});return t.callbacks().subscribe(null,function(){runOrSignIn(function(){e.editAlert()},{source:"Alert edit from pane context menu"})}),t}},o.prototype.cloneLineTool=function(e,t){return this._chart.model().cloneLineTool(e,t)},o.prototype.setPriceAxisSize=function(e,t){this._priceAxisWidget(e).setSize(t)},o.prototype.setPriceAxisVisible=function(e,t){this._priceAxisWidget(e).setVisible(t),this._cachedStatus=null},o.prototype.resetPriceAxisOptimalWidth=function(e){this._priceAxisWidget(e).resetOptimalWidth(),this._cachedStatus=null},o.prototype.setSize=function(e){this.size&&this.size.equals(e)||(this.size=e,z(this.canvas,e),z(this.top_canvas,e),this.ctx=this.canvas.getContext("2d"),this.jqPane.width(e.w),this.jqPane.height(e.h),this._cachedStatus=null,this.jqRow.toggleClass("js-hidden",0===e.h))},o.prototype.dataSourceAtPoint=function(e,t){var i,o,r,s,a,l,c,h,u,d,p,f,_,m,g,v=null,y=null;if(!this._state)return null;for(i=this._state.hitTestSources(),o=i.length;0<o--;)if(r=i[o],
s=r.paneViews(this._state))for(a=s.length;0<a--;)(l=s[a].renderer(t))&&l.hitTest&&(c=l.hitTest(new n(e,t)))&&(h=y?y.result():0,c.result()>h&&(y=c,v=r));if(this.containsMainSeries()){for(u=this._chart.model().barsMarksSources(),o=0;o<u.length;++o)for(r=u[o],s=r.paneViews(),a=0;a<s.length;a++)if(l=s[a].renderer(t),d=l.hitTest(new n(e,t))){y=d,v=r;break}p=this._chart.model().activeStrategySource().value(),f=p&&p._strategyOrdersPaneView,f&&(_=f.renderer())&&(m=_.hitTest(new n(e,t)))&&(y=m,v=p)}return null===v&&(v=this.legendWidget.dataSourceAtPoint(e,t)),g=this._chart.model().brandingSource(),g&&(m=g.hitTest(new n(e,t)))&&(y=m,v=g),{source:v,hittest:y}},o.prototype.update=function(){this.lhsPriceAxisWidget.update(),this.rhsPriceAxisWidget.update(),this.legendWidget.update(),this.paneControls&&this.paneControls.update()},o.prototype.updateControls=function(){this.paneControls&&this.paneControls.update()},o.prototype.drawBackground=function(e,t){H(e,0,0,this.size.w,this.size.h,t)},o.prototype.drawGrid=function(e){var t,i,o=this._chart.model().gridSource(),n=o.paneViews(this._state),r=this._state.height(),s=this._state.width();for(t=0;t<n.length;t++)e.save(),i=n[t].renderer(r,s),i&&i.draw(e),e.restore()},o.prototype.drawWatermark=function(e){var t,i,o=this._chart.model().watermarkSource(),n=o.paneViews(this._state),r=this._state.height(),s=this._state.width();for(t=0;t<n.length;t++)e.save(),i=n[t].renderer(r,s),i&&i.draw(e),e.restore()},o.prototype.drawBranding=function(e){var t,i,o,n,r,s=this._chart.model().brandingSource();if(s)for(t=s.paneViews(this._state),i=this._state.height(),o=this._state.width(),n=0;n<t.length;n++)(r=t[n].renderer(i,o))&&(e.save(),r.draw(e),e.restore())},o.prototype.drawCrossHair=function(e){var t=this._chart.model().crossHairSource();t.visibleTrap&&(!t.visible&&O.lockTimeAxis().value()&&(t.setLockedPosition(this._state),t.updateAllViews()),this._drawSource(t,e))},o.prototype._drawSource=function(e,t){var i,o,n,r,s=e.paneViews(this._state);if(s)for(i=this._state.height(),o=this._state.width(),n=0;n<s.length;n++)(r=s[n].renderer(i,o))&&(t.save(),r.draw(t),t.restore())},o.prototype._drawSourceStrategyOrders=function(e,t){var i,o=e._strategyOrdersPaneView;o&&(i=o.renderer())&&(t.save(),i.draw(t),t.restore())},o.prototype._drawSourceBackground=function(e,t){var i,o,n,r,s=e.paneViews(this._state);if(s)for(i=this._state.height(),o=this._state.width(),n=0;n<s.length;n++)(r=s[n].renderer(i,o))&&r.drawBackground&&(t.save(),r.drawBackground(t),t.restore())},o.prototype.drawActiveLineTool=function(e){var t,i,o=[this._chart.model().lineBeingCreated(),this._chart.model().sourceBeingMoved(),this._chart.model().lineBeingEdited()];for(t=0;t<o.length;t++)(i=o[t])&&this._chart.model().paneForSource(i)===this._state&&this._drawSource(i,e)},o.prototype.disableDrawOnTop=function(e){return e&&e.hasOwnProperty("_metaInfo")&&"Volume@tv-basicstudies"===e._metaInfo.id},o.prototype.drawSources=function(e){
var t,i,o,n,r,s=this._state.orderedSources(),a=this._state.model(),l=this._chart.model().selectedSource(),c=this._chart.model().hoveredSource(),h=a.crossHairSource(),u=[this._chart.model().lineBeingCreated(),this._chart.model().sourceBeingMoved(),this._chart.model().lineBeingEdited()];for(this.disableDrawOnTop(l)&&(l=void 0),this.disableDrawOnTop(c)&&(c=void 0),t=this._chart.model().model().panes(),i=t.length-1;i>=0;i--)t[i].createDrawingsCaches();for(i=0;i<s.length;i++)this._drawSourceBackground(s[i],e);for(i=0;i<s.length;i++)(o=s[i])!==h&&o!==l&&o!==c&&-1===u.indexOf(o)&&this._drawSource(o,e);for(n=null,l&&-1===u.indexOf(l)&&-1!==s.indexOf(l)&&(n=l,this._drawSource(l,e)),c&&c!==n&&-1===u.indexOf(c)&&-1!==s.indexOf(c)&&this._drawSource(c,e),r=this._chart.model().activeStrategySource().value(),r&&this.containsMainSeries()&&this._drawSourceStrategyOrders(r,e),i=t.length-1;i>=0;i--)t[i].clearDrawingCaches()},o.prototype.recalculatePriceScale=function(){var e,t,i,o=this._state;for(o.recalculatePriceScale(o.m_rightPriceScale),o.recalculatePriceScale(o.m_leftPriceScale),e=o.dataSources(),t=0;t<e.length;++t)i=e[t],o.isOverlay(i)&&(i instanceof d||o.recalculatePriceScale(i.priceScale()),i.updateAllViews())},o.prototype.containsMainSeries=function(){return this._state.containsMainSeries()},o.prototype.drawBarsMarks=function(e,t){var i,o;this.containsMainSeries()&&!t&&(i=this._chart.model().barsMarksSources(),o=this,i.forEach(function(t){o._drawSource(t,e)}))},o.prototype._syncOverlays=function(){var e,t,i=this._state.orderedSources(),o={},n=this;$.each(i,function(){var e,t,i=this.paneViews(n._state);if(i)for(e=0;e<i.length;e++)t=i[e],t.uid&&(o[t.uid()]=t)});for(e in this._overlays)o[e]||(this._dv.remove(this._overlays[e]),this._overlays[e]=void 0);for(e in o)this._overlays[e]||(t=o[e].overlay(),this._dv.append(t),this._overlays[e]=t)},o.prototype.hardResetCanvas=function(){this.size&&(F(this.canvas,this.size),F(this.top_canvas,this.size),this.lhsPriceAxisWidget.hardResetCanvas(),this.rhsPriceAxisWidget.hardResetCanvas())},o.prototype.paint=function(e,t){if(e&&this._chart.model())if(this.lhsPriceAxisWidget.paint(e),this.rhsPriceAxisWidget.paint(e),e===R.FULL_UPDATE&&(this._cachedStatus=null),e===R.UPDATE_CURSOR_ONLY)this.top_ctx.clearRect(-.5,-.5,this.size.w,this.size.h),this.drawCrossHair(this.top_ctx),this.drawActiveLineTool(this.top_ctx);else{var i=this.ctx;this.top_ctx.clearRect(-.5,-.5,this.size.w,this.size.h),this.drawBackground(i,this.backgroundColor()),this._state&&(this.recalculatePriceScale(),this.drawGrid(i),this.drawWatermark(i),this.drawSources(i),this.drawBarsMarks(i,t),this.drawCrossHair(this.top_ctx),this.drawActiveLineTool(this.top_ctx),this.drawBranding(i))}},o.prototype.leftPriceAxisWidget=function(){return this.lhsPriceAxisWidget},o.prototype.rightPriceAxisWidget=function(){return this.rhsPriceAxisWidget},o.prototype._priceAxisWidget=function(e){return l.isLeft(e)?this.lhsPriceAxisWidget:this.rhsPriceAxisWidget},o.prototype.statusWidget=function(){return this.legendWidget},
o.prototype.onScaleLeft=function(e){var t=e.callbackContext();-1===this._state.leftPriceScale().dataSources().indexOf(t)&&this.chart().model().move(t,this._state,this._state.leftPriceScale())},o.prototype.onScaleRight=function(e){var t=e.callbackContext();-1===this._state.rightPriceScale().dataSources().indexOf(t)&&this.chart().model().move(t,this._state,this._state.rightPriceScale())},o.prototype.onNoScale=function(e){var t=e.callbackContext();this._state.isOverlay(t)||this.chart().model().move(t,this._state,null)},o.prototype.onRiskReward=function(e){},o.prototype.createActionTrade=function(e){var t=this,i=new Promise(function(i,o){var n,r,s=C();if(!s||!s.availableBrokers().length)return i(null);n=t._state,r=n.dataSources().filter(function(e){return e instanceof TradingView.Series})[0]||t._chart.model().mainSeries(),x(r,e.localY).then(function(e){try{return s.chartContextMenuActions(e)}catch(e){X.logError(e.message)}}).then(function(e){if(!e)return void i(null);i(new I({text:window.t("Trading"),subActions:e,statName:"Trading"}))}).catch(function(){o("Unable to get Trade Context")})});return y(i,2e3,"Action trade not received")},o.prototype.createActionRiskReward=function(e){var t=new I({checkable:!1,text:window.t("Risk/Reward"),enabled:!0,statName:"RiskReward"});return t.setCallbackContext(e),t.callbacks().subscribe(this,o.prototype.onRiskReward),t},o.prototype.createActionScaleLeft=function(e){var t=new I({checkable:!0,text:window.t("Scale Left"),enabled:!0,statName:"ToggleScaleLeft"});return t.setCallbackContext(e),t.setChecked(-1!==this._state.leftPriceScale().dataSources().indexOf(e)),t.callbacks().subscribe(this,o.prototype.onScaleLeft),t},o.prototype.createActionScaleRight=function(e){var t=new I({checkable:!0,text:window.t("Scale Right"),enabled:!0,statName:"ToggleScaleRight"});return t.setCallbackContext(e),t.setChecked(-1!==this._state.rightPriceScale().dataSources().indexOf(e)),t.callbacks().subscribe(this,o.prototype.onScaleRight),t},o.prototype.createActionNoScale=function(e){var t=this._chart.model().paneForSource(e),i=t.actionNoScaleIsEnabled(e),n=new I({checkable:!0,text:window.t("Screen (No Scale)"),enabled:i,statName:"ToggleNoScale"});return n.setCallbackContext(e),n.setChecked(this._state.isOverlay(e)),n.callbacks().subscribe(this,o.prototype.onNoScale),n},o.prototype.createActionShowCountdown=function(e){var t=new I({checkable:!0,text:window.t("Show Countdown"),enabled:!0,statName:"ToggleShowCountdown"}),i=this._chart.model().mainSeries().properties();return t._binding=new v(t,i.showCountdown,this._chart.model(),t.text),t._binding.setValue(i.showCountdown.value()),t},o.prototype.createActionLockScale=function(e){var t,i,o;return e instanceof TradingView.Series?(t=c(e.priceScale(),this._chart.model().model().mainSeriesScaleRatio()),i=new I({checkable:e.priceScale().isLockScale(),text:window.t("Lock Scale")+" "+t,enabled:!0,statName:"LockScale"}),o=function(t){this._undoModel.setLockScaleProperty(this._property,t.checked,e,this._undoText)},
i._binding=new v(i,e.priceScale().properties().lockScale,this._chart.model(),"Lock Scale",o),i):null},o.prototype.createActionMergeUp=function(e){if(!this._chart.model().model().isMergeUpAvailableForSource(e))return null;var t=new I({checkable:!1,text:window.t("Merge Up"),enabled:!0,statName:"MergeUp"});return t.setCallbackContext(e),t.callbacks().subscribe(this,o.prototype.onMergeUp),t},o.prototype.onMergeUp=function(e){var t=e.callbackContext();this._chart.model().model().mergeSourceUp(t)},o.prototype.createActionUnmergeUp=function(e){if(!this._chart.model().model().isUnmergeAvailableForSource(e))return null;var t=new I({checkable:!1,text:window.t("Unmerge Up"),enabled:!0,statName:"UnmergeUp"});return t.setCallbackContext(e),t.callbacks().subscribe(this,o.prototype.onUnmergeUp),t},o.prototype.onUnmergeUp=function(e){var t=e.callbackContext();this._chart.model().model().unmergeSourceUp(t)},o.prototype.createActionMergeDown=function(e){if(!this._chart.model().model().isMergeDownAvailableForSource(e))return null;var t=new I({checkable:!1,text:window.t("Merge Down"),enabled:!0,statName:"MergeDown"});return t.setCallbackContext(e),t.callbacks().subscribe(this,o.prototype.onMergeDown),t},o.prototype.onMergeDown=function(e){var t=e.callbackContext();this._chart.model().model().mergeSourceDown(t)},o.prototype.createActionUnmergeDown=function(e){if(!this._chart.model().model().isUnmergeAvailableForSource(e))return null;var t=new I({checkable:!1,text:window.t("Unmerge Down"),enabled:!0,statName:"UnmergeDown"});return t.setCallbackContext(e),t.callbacks().subscribe(this,o.prototype.onUnmergeDown),t},o.prototype.onUnmergeDown=function(e){var t=e.callbackContext();this._chart.model().model().unmergeSourceDown(t)},o.prototype._mergeContentMenuItems=function(e){var t=[],i=this.createActionMergeUp(e);return i&&t.push(i),i=this.createActionUnmergeUp(e),i&&t.push(i),i=this.createActionMergeDown(e),i&&t.push(i),i=this.createActionUnmergeDown(e),i&&t.push(i),t},o.prototype.createActionShow=function(e){var t=new I({checkable:!0,text:window.t("Show"),enabled:!0,statName:"ToggleShow"});return t._binding=new v(t,e.properties().visible,this._chart.model(),t.text),t._binding.setValue(e.properties().visible.value()),t},o.prototype.createActionAddChildStudy=function(e){var t=new I({text:window.t("Apply Indicator on {0} ...").format(e.title(!0)),enabled:!0,statName:"ApplyIndicator"});return t.callbacks().subscribe(this,function(){var t,i,o=this._chart.showIndicators(e);o&&(t=function(){_("SOS","Apply SOS","Apply by RC menu")},i=this._chart.model().model().studyInserted(),i.subscribe(this,t),o.visibilityChanged.subscribe(this,function(e){e||i.unsubscribe(this,t)},!0))}),t},o.prototype.bringObjectForward=function(e){var t=this._chart.model().selectedSource();t&&this._chart.model().changeZOrder(t,1)},o.prototype.sendObjectToBack=function(e){var t=this._chart.model().selectedSource();t&&this._chart.model().sendToBack(t)},o.prototype.bringObjectToFront=function(e){var t=this._chart.model().selectedSource();t&&this._chart.model().bringToFront(t)},
o.prototype.sendObjectBackward=function(e){var t=this._chart.model().selectedSource();t&&this._chart.model().changeZOrder(t,-1)},o.prototype.createVisualOrderAction=function(e){var t,i,n,r,s,a,l=new I({text:window.t("Visual Order"),statName:"VisualOrder"});return l.subActions||(l.subActions=[]),t=new I({text:window.t("Bring to Front"),statName:"BringToFront"}),t.callbacks().subscribe(this,o.prototype.bringObjectToFront),l.subActions.push(t),i=new I({text:window.t("Send to Back"),statName:"SendToBack"}),i.callbacks().subscribe(this,o.prototype.sendObjectToBack),l.subActions.push(i),n=new I({text:window.t("Bring Forward"),statName:"BringForward"}),n.callbacks().subscribe(this,o.prototype.bringObjectForward),l.subActions.push(n),r=new I({text:window.t("Send Backward"),statName:"SendBackward"}),r.callbacks().subscribe(this,o.prototype.sendObjectBackward),l.subActions.push(r),s=this._chart.model().paneForSource(e),a=s.getZOrderMinMax(),i.setEnabled(!0),n.setEnabled(!0),r.setEnabled(!0),t.setEnabled(!0),e.zorder()===a.minZOrder&&(i.setEnabled(!1),r.setEnabled(!1)),e.zorder()===a.maxZOrder&&(n.setEnabled(!1),t.setEnabled(!1)),l},o.prototype._createActionAddAlert=function(e){function t(e){m.series=e}function o(e){m={drawing:e}}function n(e,t){void 0===e||null===e||TradingView.isNaN(e)||(g+=" ("+t.format(e)+") ",m.value=e)}var r,a,l,c,h,u,d,p,f,_=this._chart,m={},g=window.t("Add Alert"),v=this._state;return e.series?(e.series instanceof TradingView.Series?a=e.series.lastValueData(TradingView.CLOSE_PLOT,!0,!0):e.series instanceof s&&(l=e.series.metaInfo().plots[0].id,a=e.series.lastValueData(l,!0,!0)),a&&(r=a.price),r&&(c=(e.series.priceScale()||this._state.mainDataSource().priceScale()||_.model().mainSeries().priceScale()).formatter(),n(r,c)),t(e.series)):e.e?(h=v.defaultPriceScale(),u=h.coordinateToPrice(e.e.localY),h.isPercentage()&&(d=this._state.mainDataSource().firstValue(),u=void 0!==d?h.priceRange().convertFromPercent(u,d):null),c=this._state.mainDataSource().formatter(),n(u,c),p=v.mainDataSource(),t(p)):e.drawing&&(g+=" "+window.t("on")+" "+window.t(e.drawing.title()),o(e.drawing)),g+="...",f=new I({text:g,shortcut:"Alt+A",doNotBindShortcut:!0,statName:"AddAlert"}),f.callbacks().subscribe(null,function(){var e=i(256).MakeAlertDialog;runOrSignIn(function(){new e(m)},{source:"Alert add from pane context menu",sourceMeta:"Chart"})}),f},o.prototype.image=function(){var e={};return e.leftAxis=this.leftPriceAxisWidget().image(),e.rightAxis=this.rightPriceAxisWidget().image(),e.content=this.canvas.toDataURL(),e.contentWidth=this.size.w,e.contentHeight=this.size.h,e},o.prototype._updateTooltip=function(e,t){if(!this._rafSet){var i=this;requestAnimationFrame(function(){i._updateTooltipImpl(e,t),i._rafSet=!1}),this._rafSet=!0}},o.prototype._updateTooltipImpl=function(e,t){function i(i){function n(){return TradingView.isMobile.any()?{left:e-o._tooltipSelector.outerWidth()-16,top:t-o._tooltipSelector.outerHeight()-16}:{left:e+16,top:t+16}}TradingView[r].getTooltipText&&(i=TradingView[r].getTooltipText(l)||i),
o._tooltipSelector.html(i).removeClass("tooltip-selector-hidden").css(n())}var o,n,r,a,l,c;if(this._chart){for(o=this,n=this._chart.paneWidgets(),r=O.tool.value(),a=this._state.model(),l=a.lineBeingCreated(),c=n.length-1;c>=0;c--)n[c]._hideTooltip();this._isSelectBarModeEnabled()||(s.isStudyLineTool(r)&&!TradingView.isMobile.any()?i(window.t("Click to set a point")):TradingView.isMobile.any()&&"LineToolBrush"!==r&&o.isLineTool(r)&&!o._chart.model().lineBeingCreated()?i(window.t("1. Slide your finger to select location for first anchor<br>2. Tap anywhere to place the first anchor")):TradingView.isMobile.any()&&"LineToolBrush"!==r&&o.isLineTool(r)&&i(window.t("1. Slide your finger to select location for next anchor<br>2. Tap anywhere to place the next anchor")))}},o.prototype._hideTooltip=function(){this._tooltipSelector.addClass("tooltip-selector-hidden")},o.prototype._updateCrosshairOnZoom=function(){var e,t;O.lockTimeAxis().value()&&(e=this._chart.model(),t=e.crossHairSource(),t.setPosition(t.index,t.price,this._state))},o.prototype._isSelectBarModeEnabled=function(){return this._chart.model().crossHairSource().selectBarMode().value()},e.exports=o}).call(t,i(3))},function(e,t){},function(e,t,i){"use strict";(function(t){function o(e,i,o){function n(){c.setValue("legend.isVisibilityToggled",!0),s.unsubscribe(null,n)}var r,s;this._model=i,this._paneWidget=e,this._chart=e._chart,this._mainDiv=o,this.$el=$(document.createElement("div")).addClass("pane-legend"),this._itemsBinding=[],this._chart.properties().paneProperties.legendProperties.showStudyTitles.listeners().subscribe(this,this.updateLayout),this._chart.properties().paneProperties.legendProperties.showSeriesTitle.listeners().subscribe(this,this.updateLayout),this._chart.properties().paneProperties.legendProperties.showSeriesOHLC.listeners().subscribe(this,this.updateLayout),this._chart.properties().paneProperties.legendProperties.showStudyValues.listeners().subscribe(this,this.updateLayout),u.onPineDeleted().subscribe(this,this.updateLayout),r=this._chart.properties().scalesProperties.textColor,r.listeners().subscribe(this,function(e){this.$el.css("color",e.value())}),this.$el.css("color",r.value()),s=this._chart.properties().paneProperties.legendProperties.showLegend,t.enabled("hide_legend_by_default")&&!c.getBool("legend.isVisibilityToggled")&&(s.setValue(!1),s.subscribe(null,n)),this.updateLayout()}var n=i(34).Study,r=i(20).trackEvent,s=i(0).getLogger("Chart.LegendWidget"),a=i(33),l=i(459).showEditObjectDialog,c=i(48),h=i(230).Version,u=i(112),d=i(991),p=i(541),f=i(896),_=i(192).setMouseEventHandler;o.prototype.destroy=function(){u.onPineDeleted().unsubscribe(this,this.updateLayout)},o.prototype.contextMenuEvent=function(e,i){if(!this._model.chartModel().readOnly()&&t.enabled("legend_context_menu")){var o=i.source;this._paneWidget.showContextMenuForSource(o,e)}},o.prototype.updateLayout=function(){var e,o,n,r,s,a,l,c,h,u,d;if(this._itemsBinding.length=0,this.$el.find(".apply-common-tooltip").trigger("mouseleave"),this.$el.empty(),
(e=this._paneWidget.state())&&this._model){for(o={showStudyTitles:this._model.model().properties().paneProperties.legendProperties.showStudyTitles.value(),showSeriesTitle:this._chart.properties().paneProperties.legendProperties.showSeriesTitle.value(),showSeriesOHLC:this._chart.properties().paneProperties.legendProperties.showSeriesOHLC.value(),showStudyValues:this._chart.properties().paneProperties.legendProperties.showStudyValues.value(),showLegend:this._model.model().properties().paneProperties.legendProperties.showLegend.value()},n=this._model.mainSeries(),r=e.orderedSources().slice(),s=r.indexOf(n),s>-1&&(r.splice(s,1),r.push(n)),a=r.length-1;a>=0;a--)l=r[a],(c=l.statusView())&&(!(h=l===n)||o.showSeriesTitle||o.showSeriesOHLC||o.showStudyTitles||o.showStudyValues)&&(h&&t.enabled("fundamental_widget")||(o.showLegend||!h?(h||o.showStudyTitles||o.showStudyValues)&&o.showLegend&&(u=$("<div>").addClass("pane-legend-line pane-legend-wrap").appendTo(this.$el),u.source=l,h?(d=$('<a class="pane-legend-minbtn apply-common-tooltip apply" title="'+$.t("Hide")+'"></a>').append($(i(993)).attr({class:"expand"})),u.addClass("main").append(d.on("click touchend",this.toggleTitles.bind(this)))):u.addClass("study"),l.properties().visible.value()||u.addClass("disabled"),this._generateItemsForRow(u,c,o),_(u,this,!0)):this.$el.find(".expand-line").length||(u=$("<div>").addClass("pane-legend-line pane-legend-wrap main expand-line").appendTo(this.$el),d=$('<a class="pane-legend-minbtn apply-common-tooltip apply" title="'+$.t("Show")+'"></a>').append($(i(992)).attr({class:"expand closed"})),u.append(d.on("click touchend",this.toggleTitles.bind(this))),u.source=l,o={showStudyTitles:!1,showSeriesTitle:!1,showSeriesOHLC:o.showSeriesOHLC,showStudyValues:!1},this._generateItemsForRow(u,c,o),_(u,this,!0),this.update())));this.update()}},o.prototype._generateItemsForRow=function(e,o,r){var a,l,c,h,p,_,m,g,v,y,b,S,w,T,P,C=e.source,x=this,E=C===this._model.mainSeries();if((E&&r.showSeriesTitle||!E&&r.showStudyTitles)&&(a=$("<span>"),a.addClass("pane-legend-line apply-overflow-tooltip"),t.enabled("legend_context_menu")&&!this._chart.readOnly()||a.addClass("no-context-menu"),E&&a.addClass("main"),C.properties().visible.value()||a.addClass("disabled"),a.css({"font-weight":o.bold()?"bold":"normal","font-size":o.size()}),a.click(function(t){x.contextMenuEvent(t,e)}),a.appendTo(e),this._itemsBinding.push({value:o,cell:a,source:e.source}),!this._chart.readOnly()&&C.userEditEnabled()&&t.enabled("edit_buttons_in_legend")&&(l=$('<span class="pane-legend-icon-container">').appendTo(e),t.enabled("show_hide_button_in_legend")&&$('<a class="pane-legend-icon apply-common-tooltip icon-hide" title="'+$.t("Show/Hide")+'">').append($(i(994)).attr({width:14,height:14})).appendTo(l).on("click touchend",this._generateItemsForRow._onShowhideClick.bind(this,C)),
t.enabled("property_pages")&&(!E||t.enabled("show_chart_property_page")&&!this._chart.onWidget())&&t.enabled("format_button_in_legend")&&$('<a class="pane-legend-icon apply-common-tooltip format" title="'+$.t("Format")+'">').append($(i(995)).attr({width:14,height:14})).appendTo(l).on("click touchend",this._generateItemsForRow._onFormatClick.bind(this,C)),C instanceof n&&!this._chart.onWidget()&&t.enabled("study_buttons_in_legend")&&(c=C.metaInfo(),h=TradingView.isExistent(c.pine),h&&(p=$('<a class="pane-legend-icon apply-common-tooltip source" title="'+$.t("Show Source Code")+'">').append($(i(996)).attr({width:14,height:14})).appendTo(l).on("click touchend",this._generateItemsForRow._onViewSorceClick.bind(this,C)),f.onReady("bottom-widgetbar",function(e){var t=e.ScriptEditorWidget.loadedScriptIdPart();t&&c.scriptIdPart===t&&p.addClass("active")}),u.isAuthToGetPineSourceCode(c.scriptIdPart,c.pine.version).done(function(e){e||p.addClass("js-hidden")}).fail(function(e){s.logError("Failed isAuthToGetPineSourceCode, reason: "+e)})),t.enabled("study_on_study")&&C.canHaveChildren()&&$('<a class="pane-legend-icon apply-common-tooltip apply" title="'+$.t("Apply Indicator on {0}").format(C.title(!0))+'">').append($(i(997)).attr({width:14,height:14})).appendTo(l).on("click touchend",this._generateItemsForRow._onAddChildSourceClick.bind(this,C))),!E&&t.enabled("delete_button_in_legend")&&$('<a class="pane-legend-icon apply-common-tooltip delete" title="'+$.t("Delete")+'">').append($(i(542)).attr({width:14,height:14})).appendTo(l).on("click touchend",this._generateItemsForRow._onDeleteClick.bind(this,C)))),_=C.dataWindowView(),this.isDataWindowValuesVisible(_)&&(E&&r.showSeriesOHLC||!E&&r.showStudyValues)){for(m=[],g=[],v=$('<div class="pane-legend-item-value-container">'),t.enabled("legend_context_menu")||v.addClass("no-context-menu"),y=0;y<_.items().length;y++)b=$("<span class='pane-legend-item-value-wrap'>").appendTo(v),S=E?$("<span class='pane-legend-item-value-title pane-legend-line'>").appendTo(b):null,w=$("<span class='pane-legend-item-value pane-legend-line'>").appendTo(b),E&&(S.addClass("pane-legend-item-value-title__main"),w.addClass("pane-legend-item-value__main")),C.properties().visible.value()||(w.addClass("disabled"),S&&S.addClass("disabled")),m.push(w),S&&g.push(S);T=$("<span class='pane-legend-item-additional pane-legend-line'>").appendTo(v.appendTo(e)),this._itemsBinding.push({value:_,cell:m,titleCells:g.length?g:null,source:C,additional:T})}t.enabled("alerts")&&E&&(P=$('<span class="pane-legend-icon-container pane-legend-icon-container--separated">').appendTo(e),this.alertWidget&&this.alertWidget.destroy(),this._model.chartModel().readOnly()||(this.alertWidget=new d(P,this._model)))},o.prototype.isDataWindowValuesVisible=function(e){return this._chart.onWidget()?!!e&&!this._chart.isSmall():!!e},o.prototype._generateItemsForRow._onShowhideClick=function(e){this._model.setProperty(e.properties().visible,!e.properties().visible.value(),"Show/Hide "+e.title())},
o.prototype._generateItemsForRow._onFormatClick=function(e,t){e.userEditEnabled()&&(c.setValue("properties_dialog.active_tab.chart",$.t("Style")),l(e,this._model))},o.prototype._generateItemsForRow._onDeleteClick=function(e){e.isUserDeletable()&&(e.hasChildren()?p(this._model.removeSource.bind(this._model,e)).open():this._model.removeSource(e))},o.prototype._generateItemsForRow._onAddChildSourceClick=function(e){var t,i,o=this._chart.showIndicators(e);o&&(t=function(){r("SOS","Apply SOS","Apply by Plus SOS")},i=this._model.model().studyInserted(),i.subscribe(this,t),o.visibilityChanged.subscribe(this,function(e){e||i.unsubscribe(this,t)},!0))},o.prototype._generateItemsForRow._onViewSorceClick=function(e){var t=e.metaInfo();this._getPineSourceCode(t).done(function(e){TradingView.bottomWidgetBar&&TradingView.bottomWidgetBar.activateScriptEditorTab(e)})},o.prototype._getPineSourceCode=function(e){var t=$.Deferred();return u.getPineSourceCode(e.scriptIdPart,e.pine.version).done(function(i){var o=h.parse(i.version),n=i.lastVersionMaj?h.parse(i.lastVersionMaj):new h(0,0),r={scriptSource:i.source,scriptIdPart:e.scriptIdPart,scriptName:i.scriptName,scriptTitle:i.scriptTitle,version:i.version,isOld:!n.isZero()&&n.major()!==o.major()};t.resolve(r)}).fail(function(e){TVDialogs.showNotice($.t("Error"),$.t("Could not get Pine source code."))}),t},o.prototype.setItemEnabled=function(e,t){var i=!e.hasClass("disabled"),o=e.closest(".pane-legend-wrap");t&&!i?(e.removeClass("disabled"),o.removeClass("disabled")):!t&&i&&(e.addClass("disabled"),o.addClass("disabled"))},o.prototype.valueChanged=function(e,t,i){return e[t]!==i&&(e[t]=i,!0)},o.prototype.firstTitle=function(){return this.$el.find(".pane-legend-line.pane-legend-wrap:first-child")},o.prototype.updateTitle=function(){var e,i,o,n,r,s,a,l,c,h;for(o=this._itemsBinding.length;o--;)i=this._itemsBinding[o],Array.isArray(i.cell)||(i.last||(i.last={}),n=i.last,r=i.source,e=r.properties().visible.value(),this.valueChanged(n,"sourceVisible",e)&&this.setItemEnabled(i.cell,e),s=i.value.color(),a=r!==this._model.mainSeries()&&r===this._model.selectedSource()?"bold":"normal",l=i.value.text(),t.enabled("fundamental_widget")&&(c=this._model.mainSeries(),h=c.symbolInfo(),l=(h?h.name:c.actualSymbol())+" "+l),(this.valueChanged(n,"color",s)||this.valueChanged(n,"fontWeight",a)||this.valueChanged(n,"text",l))&&i.cell.text(TradingView.clean(l,!0)).css({color:s,"border-color":s,"font-weight":a}));this._chart.resizeIndicator()},o.prototype.update=function(e){var t,i,o,n,r,s,l,c,h,u;for(this.updateTitle(),c=this._itemsBinding.length;c--;)if(n=this._itemsBinding[c],t=n.cell,i=n.titleCells,o=n.source.properties().visible.value(),Array.isArray(t)){for(n.last||(n.last={},n.last.dwView||(n.last.dwView={})),h=n.last,r=n.value.items(),u=this.valueChanged(h,"sourceVisible",o),s=0;s<t.length;s++)l=r[s],h[s]||(h[s]={}),u&&this.setItemEnabled(t[s],o),this.valueChanged(h[s],"text",l.text())&&(t[s][0].textContent=l.text()),
l.color()&&this.valueChanged(h[s],"color",l.color())&&t[s].css("color",a.resetTransparency(l.color())),i&&(this.valueChanged(h,"sourceVisible",o)&&this.setItemEnabled(i[s],o),this.valueChanged(h[s],"title",l.title())&&(i[s][0].textContent=l.title()));n.additional&&n.value.additional&&this.valueChanged(h,"additional",n.value.additional())&&n.additional.text(n.value.additional()||"")}this._chart.resizeIndicator()},o.prototype.dataSourceAtPoint=function(e,t){return null},o.prototype.renderTo=function(e,t,i){var o,n,r,s,a,l,c;for(e.save(),e.fillStyle=this._chart.properties().scalesProperties.textColor.value(),e.textBaseline="middle",o=0,n=0;n<this._itemsBinding.length;++n)r=this._itemsBinding[n],s=r.value,a=r.source===this._model.mainSeries(),l=a?12:8,c=a?25:17,Array.isArray(r.cell)||(e.font=s.size()+" Verdana, Arial",e.fillText(s.text(),t,i+o+l),o+=c);e.restore()},o.prototype.toggleTitles=function(e){this._model.model().properties().paneProperties.legendProperties.showLegend.setValue(!this._chart.properties().paneProperties.legendProperties.showLegend.value());for(var t=this._chart._paneWidgets.length-1;t>=0;t--)this._chart._paneWidgets[t].legendWidget.updateLayout()},e.exports=o}).call(t,i(3))},function(e,t,i){"use strict";function o(e,t){function o(){a||(l=$('<div class="alert-legend-widget-counter"></div>'),a=$('<div class="apply-common-tooltip alert-legend-widget">').append($(i(899)).attr({width:12,height:12})).append(l).appendTo(e))}function n(){o(),a.removeClass("js-hidden")}function r(){a&&a.addClass("js-hidden")}function s(){var e,i,s=[],c=t.alertsList().models;for(i=0;i<c.length;i++)e=c[i],!e.isNew()&&e.get("description")&&s.push(e.get("description"));s.length?(o(),a.attr("title",s.join("\n")),l.text(s.length),n()):r()}var a,l;if(e instanceof $&&e.length&&t)return t.alertsList().on("add",s),t.alertsList().on("remove",s),t.alertsList().on("reset",s),s(),{hide:r,show:n,updateView:s,destroy:function(){a&&a.remove(),t.alertsList().off("add",s),t.alertsList().off("remove",s),t.alertsList().off("reset",s)}}}e.exports=o},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 13" width="13" height="13"><path d="M1 0v1h11V0H1zm11 1v11h1V1h-1zm0 11H1v1h11v-1zM1 12V1H0v11h1zM6 2v4H2v1h4v4h1V7h4V6H7V2H6z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 13" width="13" height="13"><path d="M1 0v1h11V0H1zm11 1v11h1V1h-1zm0 11H1v1h11v-1zM1 12V1H0v11h1zm1-6v1h9V6H2z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" width="14" height="14"><path d="M0 0v14h14V0zm7 2.69c3.018 0 5.172 3.232 5.172 4.31 0 1.077-2.154 4.31-5.172 4.31S1.828 8.08 1.828 7c0-1.077 2.154-4.31 5.172-4.31zm0 1.508C5.49 4.198 4.198 5.49 4.198 7S5.49 9.802 7 9.802 9.802 8.51 9.802 7 8.51 4.198 7 4.198zm0 1.68c.646 0 1.12.476 1.12 1.122 0 .646-.473 1.12-1.12 1.12-.646 0-1.12-.473-1.12-1.12 0-.646.473-1.12 1.12-1.12z"/></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="-2.4 120.9 14 14" width="14" height="14" enable-background="new -2.4 120.9 600 600"><path d="M-2.4 120.9v14h14v-14zm6.086 1.803H5.52v1.332c.416.1.805.258 1.166.48l.944-.935 1.297 1.297-.943.943c.215.35.38.748.48 1.164H9.8v1.837H8.463c-.1.417-.257.806-.48 1.167l.935.944-1.296 1.298-.944-.943c-.35.215-.747.38-1.164.48v1.332H3.677v-1.33c-.415-.102-.804-.258-1.165-.482l-.943.936-1.298-1.296.94-.945c-.216-.35-.38-.748-.482-1.165H-.597v-1.835H.737c.1-.416.257-.805.48-1.166l-.935-.944 1.296-1.297.944.943c.35-.215.747-.38 1.164-.48zm.912 3.053c-1.188 0-2.143.963-2.143 2.143 0 1.187.963 2.143 2.143 2.143 1.18 0 2.14-.963 2.145-2.145 0-1.188-.966-2.144-2.145-2.144z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="-2.4 120.9 14 14" width="14" height="14" enable-background="new -2.4 120.9 600 600"><path d="M-2.4 120.9v14h14v-14zm4.833 2.042h1.084v1.083H2.433c-.143 0-.18.027-.24.09-.063.062-.135.19-.187.365-.103.353-.114-.147-.114.17 0 .84.01 1.425-.157 2-.127.44-.4.836-.76 1.25.36.413.633.81.76 1.248.167.575.157 1.16.157 2.002 0 .317.01-.185.114.168.052.176.124.305.186.368s.098.09.24.09h1.085v1.082H2.433c-.398 0-.768-.166-1.01-.41-.244-.245-.372-.54-.456-.826-.167-.57-.16-.155-.16-.472 0-.84-.01-1.34-.113-1.7-.09-.31-.328-.612-.7-1.008h-.81v-1.084h.81c.372-.397.61-.7.7-1.01.104-.358.114-.857.114-1.698 0-.317-.008.1.16-.472.083-.286.21-.583.454-.828.242-.244.613-.408 1.01-.408zm3.25 0h1.084c.398 0 .768.164 1.01.408.244.245.374.542.458.828.168.57.157.155.157.472 0 .84.01 1.34.114 1.7.09.31.328.61.7 1.008h.81v1.084h-.81c-.372.397-.61.7-.7 1.01-.104.358-.114.857-.114 1.698 0 .317.01-.1-.157.472-.084.286-.214.58-.457.826-.243.244-.613.41-1.01.41H5.682v-1.083h1.084c.143 0 .18-.026.24-.09.063-.062.138-.19.19-.367.103-.353.11.15.11-.168 0-.84-.01-1.427.158-2.002.127-.44.4-.835.76-1.248-.36-.414-.633-.81-.76-1.25-.167-.575-.157-1.16-.157-2 0-.317-.008.183-.112-.17-.05-.176-.126-.303-.188-.366s-.098-.09-.24-.09H5.682v-1.082z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" width="14" height="14"><path d="M0 0v14h14V0H0zm6 3h2v3h3v2H8v3H6V8H3V6h3V3z"/></svg>'},function(e,t){},function(e,t,i){"use strict";(function(t){function o(e,t,i,o){this.reset(e,t,i,o)}var n=i(259).makeFont,r=i(258),s=t.enabled("charting_library_debug_mode");o.prototype.maxCount=200,o.prototype.reset=function(e,t,i,o){this._textWidthCache=new r(this.maxCount),this._fontSize=e,this._color=o,this._font=n(e,t,i),this._keys=[],this._hash={}},o.prototype.paintTo=function(e,t,i,o,n){var r=this.getLabelImage(e,t);"left"!==n&&(i-=r.textWidth),o-=Math.floor(r.height/2),e.drawImage(r.canvas,i,o)},o.prototype.getLabelImage=function(e,t){var i,o,n,r,a;return Object.prototype.hasOwnProperty.call(this._hash,t)?i=this._hash[t]:(this._keys.length>=this.maxCount&&(o=this._keys.shift(),delete this._hash[o]),i={text:t,textWidth:0,width:0,height:0,canvas:document.createElement("canvas")},n=Math.ceil(this._fontSize/4.5),
r=Math.round(this._fontSize/10),a=Math.ceil(this._textWidthCache.measureText(e,t)),i.textWidth=Math.round(Math.max(1,a)),i.width=Math.round(a+2*n),i.height=this._fontSize+2*n,0!==a?(this._keys.push(i.text),this._hash[i.text]=i):s&&console.log('Canvas 2d context measureText return zero width for "'+t+'" text'),i.canvas.width=i.width,i.canvas.height=i.height,e=i.canvas.getContext("2d"),e.font=this._font,e.fillStyle=this._color,e.fillText(t,0,i.height-n-r)),i},e.exports=o}).call(t,i(3))},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="#4758a9" d="M0 0h18v18H0z"/><path fill="#ffda44" d="M9 2l.3 1.1h1.2l-1 .7L10 5l-1-.7L8 5l.4-1.2-1-.7h1.3zM4 4l1.1.6.8-.9L5.8 5l1 .6-1.2.1-.1 1.2-.6-1-1.2.2.9-.9zM2 9l1.1-.4V7.4l.7 1L5 8l-.7 1 .7 1-1.1-.4-.7 1V9.2zm2 4.9l.6-1.1-.9-.9 1.2.2.5-1 .2 1.1 1.2.2-1 .6.1 1.2-.8-.9zm5 2l-.4-1.1H7.4l1-.7-.4-1.2 1 .7 1-.7-.4 1.2 1 .7H9.2zm4.8-2l-1-.6-.9.9.2-1.2-1-.6 1.1-.1.2-1.2.6 1L14 12l-.8.8zm2-5l-1 .4v1.2l-.8-1-1 .4.6-1-.7-1 1.1.4.8-1v1.3zm-2-4.9l-.5 1.1.9.8-1.2-.1-.6 1-.1-1.2-1.2-.1 1-.6-.2-1.2.9.9z"/></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="#f7f8fa" d="M0 0h18v18H0z"/><path fill="#ed5565" d="m0 14h18v4H0zm9-7h9v4H9zm0-7h9v4H9z"/><path fill="#4a89dc" d="M0 0v11h11V0z"/><path fill="#fff" d="M8.1 3.3L8 3.2l.1-.5a.4.4 0 0 0-.1-.4L7.6 2v-.2h.6a.4.4 0 0 0 .3-.2l.2-.6h.1l.2.6.3.2h.5c.2 0 .2 0 .1.2l-.4.3a.4.4 0 0 0-.1.4l.1.4c0 .2 0 .2-.1.1L9 3a.4.4 0 0 0-.4 0l-.5.3zm0 3.3c0 .1-.1 0-.1 0L8 6a.4.4 0 0 0-.1-.4l-.4-.3v-.1h.6a.4.4 0 0 0 .3-.3l.2-.5c0-.2 0-.2.1 0l.2.5.3.2h.5c.2 0 .2.1.1.2l-.4.3a.4.4 0 0 0-.1.4l.1.5s0 .1-.1 0L9 6.4a.4.4 0 0 0-.4 0l-.5.3zm0 3.4L8 9.9l.1-.5A.4.4 0 0 0 8 9l-.4-.3v-.2h.6a.4.4 0 0 0 .3-.3l.2-.5c0-.1 0-.1.1 0l.2.5c0 .2.2.3.3.3h.5c.2 0 .2 0 .1.1l-.4.4a.4.4 0 0 0-.1.4l.1.4c0 .1 0 .2-.1.1L9 9.7a.4.4 0 0 0-.4 0L8 10zM4.8 3.3c-.1 0-.2 0-.1-.1v-.5a.4.4 0 0 0 0-.4L4.3 2c-.1-.1 0-.2 0-.2h.5a.4.4 0 0 0 .3-.2l.2-.6c0-.1.1-.1.2 0l.2.5c0 .2.1.3.3.3h.5c.1 0 .2 0 0 .1l-.3.4a.4.4 0 0 0-.1.4V3c.1.1 0 .2 0 .1L5.5 3a.4.4 0 0 0-.4 0l-.4.3zm-3.4 0l-.1-.1.1-.5a.4.4 0 0 0-.1-.4L.9 2v-.2h.6a.4.4 0 0 0 .3-.2l.1-.6h.2l.2.6.3.2h.5c.2 0 .2 0 .1.2l-.4.3a.4.4 0 0 0-.1.4l.1.4c0 .2 0 .2-.1.1L2.3 3a.4.4 0 0 0-.5 0l-.4.3zm3.4 3.3c-.1.1-.2 0-.1 0V6a.4.4 0 0 0 0-.4l-.4-.3c-.1 0 0-.1 0-.1h.5a.4.4 0 0 0 .3-.3l.2-.5c0-.2.1-.2.2 0l.2.5c0 .1.1.2.3.2h.5c.1 0 .2.1 0 .2l-.3.3A.4.4 0 0 0 6 6v.5c.1 0 0 .1 0 0l-.5-.2a.4.4 0 0 0-.4 0l-.4.3zm0 3.4c-.1 0-.2 0-.1-.1v-.5a.4.4 0 0 0 0-.4l-.4-.3c-.1-.1 0-.2 0-.2h.5a.4.4 0 0 0 .3-.3l.2-.5c0-.1.1-.1.2 0l.2.5c0 .2.1.3.3.3h.5c.1 0 .2 0 0 .1l-.3.4a.4.4 0 0 0-.1.4v.4c.1.1 0 .2 0 .1l-.5-.2a.4.4 0 0 0-.4 0l-.4.3zM1.4 6.6c0 .1-.1 0-.1 0l.1-.6a.4.4 0 0 0-.1-.4l-.4-.3v-.1h.6a.4.4 0 0 0 .3-.3l.2-.5c0-.2 0-.2.1 0l.2.5.3.2h.5c.2 0 .2.1.1.2l-.4.3a.4.4 0 0 0-.1.4l.1.5s0 .1-.1 0l-.4-.2a.4.4 0 0 0-.4 0l-.5.3zm0 3.4l-.1-.1.1-.5a.4.4 0 0 0-.1-.4l-.4-.3v-.2h.6a.4.4 0 0 0 .3-.2l.2-.6c0-.1 0-.1.1 0l.2.5c0 .2.2.3.3.3h.5c.2 0 .2 0 .1.1l-.4.4a.4.4 0 0 0-.1.4l.1.4c0 .1 0 .2-.1.1l-.4-.3a.4.4 0 0 0-.4 0l-.5.4z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="#f7f8fa" d="M0 18h18V0H0z"/><circle fill="#ed5565" cx="9" cy="9" r="4"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="#4758a9" d="M0 0h18v18H0z"/><path fill="#fff" d="M0 0v3.5L4 7H0v4h3l-3 2.5V18h.5L7 12v6h4v-5.5l6 5.5h1v-3.5L14 11h4V7h-3l3-2.5V0h-.5L11 6V0H7v5.5L1 0H0z"/><path fill="#ed5565" d="M8 0v8H0v2h8v8h2v-8h8V8h-8V0H8zm10 .6L11 7h2l5-4.5v-2zM0 .8v2L5 7h2L0 .8zM5 11l-5 4.3v2L7 11H5zm6 0l7 6v-1.8L13 11h-2z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="#ed5565" d="M0 0h18v18H0z"/><path fill="#fff" d="M3 7h12v4H3zm4-4h4v12H7z"/></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="#4758a9" d="M0 0h18v18H0z"/><path fill="#fff" d="M9 4.5V0H0v9h4.5V6l3 3H9V7L6.5 4.5H9zM7 13l-1 .5v.5h-.5L5 15l-.5-1H4v-.6L3 13l1-.4V12h.5l.5-1 .5 1H6v.6zm6-.4l.3.5h.6l-.3.4.5.4-.6.1v.6l-.4-.4-.5.4V14l-.5-.1.4-.4-.2-.5.5.1zm-2.2-5.5l.2.6.6-.2-.3.5.5.4-.6.1v.6l-.4-.4-.5.4v-.6l-.5-.1.4-.4-.2-.5.5.2zm2.3-3l.2.4.6-.1-.3.5.5.4h-.6V6l-.4-.4-.5.4v-.6l-.5-.1.4-.4-.2-.5.5.1zm2 2.3l.2.5.6-.1-.3.5.5.3-.6.1v.6l-.4-.3-.5.3v-.6h-.5l.4-.4-.2-.6.5.2zM13.6 9l.2.6h.7l-.5.4.1.6-.5-.4-.5.4.2-.6-.5-.4h.6z"/><path fill="#ed5565" d="M3 1V0H1v1H0v2h1v6h2V3h6V1H3zm6 7L5 4H4l5 5V8z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="#f7f8fa" d="M0 18h18V0H0z"/><path fill="#ed5565" d="M14 18h4V0h-4zM0 18h4V0H0zm11-8l2-1-1-.5v-1l-2 1 1-2h-1L9 5 8 6.5H7l1 2-2-1v1L5 9l2 1-.5 1h2v1.5h1V11h2z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="#4758a9" d="M0 18h18V0H0z"/><path fill="#fff" d="M9 4.5V0H0v9h4.5V6l3 3H9V7L6.5 4.5H9z"/><path fill="#ed5565" d="M11 8.1l.3.6.5-.2-.2.5.4.4-.6.1v.6l-.4-.4-.4.4v-.6l-.6-.1.5-.4-.3-.5.6.2zm2 4l.3.6.5-.2-.2.5.4.4-.6.1v.6l-.4-.4-.4.4v-.6l-.6-.1.5-.4-.3-.5.6.2zm.3-7.1l.3.5.5-.1-.2.5.4.4h-.6V7l-.4-.4-.5.4v-.6l-.5-.1.5-.4-.3-.5.6.1zm2 3.4l.3.5.5-.2-.2.6.4.3-.6.1v.6l-.4-.4-.4.4v-.6h-.6l.4-.4-.2-.6.6.2zM3 1V0H1v1H0v2h1v6h2V3h6V1H3zm6 6.9L5 4H4l5 5V7.9z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="#ed5565" d="M0 0h18v18H0z"/><path fill="#fc0" d="M6.6 5.9l-4.1 3L4 4l1.6 5-4.2-3h5.1zm1.5-2.7l1.6.7-1.7.4L9.1 3 9 4.7zM10 5l1.2 1.2L9.5 6l1.5-.7-.8 1.5zm.3 2.5l.6 1.6-1.4-1h1.7l-1.3 1zm-1.2 2L9 11.2 8 9.8l1.7.6-1.7.4z"/></svg>'},function(e,t,i){"use strict";function o(e,t,i){this._model=t,this._paneWidget=e,this._chart=e._chart,this._mainDiv=i,this.jqDiv=$('<div class="pane-controls">'),this._initVisibility(),this.update(),this.jqDiv.appendTo(i)}var n=i(536);o.prototype.update=function(){var e,t,o,n,r,s,a,l;if(!this._visible||!this._chart.isActive())return void this.jqDiv[0].classList.add("pane-controls--hidden");if(this.jqDiv[0].classList.remove("pane-controls--hidden"),e=this,t=e._model,o=e._paneWidget.state(),n=t.panes().indexOf(o),this.jqDiv.toggleClass("toppane",0===n||this._chart.isMaximizedPane()),r=!1,!o.containsMainSeries()&&!this._chart.isMaximizedPane()){for(s=0,a=o.dataSources(),l=a.length;l--;)if(a[l]instanceof TradingView.Study&&++s>1){r=!0;break}a=null}n>0&&!this._chart.isMaximizedPane()?(this._$upButton||(this._$upButton=$(document.createElement("a")).addClass("pane-legend-icon up").append($(i(1010)).attr({width:14,height:14})).attr("title",$.t("Move Up")).on("click",function(){e._model.rearrangePanes(e._chart,e._model.panes().indexOf(e._paneWidget.state()),"up")})),this._$upButton.appendTo(this.jqDiv)):this._$upButton&&this._$upButton.detach(),
n<this._model.panes().length-1&&!this._chart.isMaximizedPane()?(this._$downButton||(this._$downButton=$(document.createElement("a")).addClass("pane-legend-icon down").append($(i(1011)).attr({width:14,height:14})).attr("title",$.t("Move Down")).on("click",function(){e._model.rearrangePanes(e._chart,e._model.panes().indexOf(e._paneWidget.state()),"down")})),this._$downButton.appendTo(this.jqDiv)):this._$downButton&&this._$downButton.detach(),r?(this._$closeButton||(this._$closeButton=$(document.createElement("a")).addClass("pane-legend-icon delete").append($(i(542)).attr({width:14,height:14})).attr("title",$.t("Delete")).on("click",function(){e._model.removePane(e._chart,e._model.panes().indexOf(e._paneWidget.state()))})),this._$closeButton.appendTo(this.jqDiv)):this._$closeButton&&this._$closeButton.detach(),this._model.panes().length>1&&!this._chart.isMaximizedPane()?(this._$maximizeButton||(this._$maximizeButton=$(document.createElement("a")).addClass("pane-legend-icon maximize").append($(i(1012)).attr({width:14,height:14})).attr("title",$.t("Toggle Maximize Pane")).on("click",function(){e._chart.toggleMaximizePane(e._paneWidget)})),this._$maximizeButton.appendTo(this.jqDiv)):this._$maximizeButton&&this._$maximizeButton.detach(),this._model.panes().length>1&&this._chart.isMaximizedPane()?(this._$restoreButton||(this._$restoreButton=$(document.createElement("a")).addClass("pane-legend-icon restore").append($(i(1013)).attr({width:14,height:14})).attr("title",$.t("Toggle Maximize Pane")).on("click",function(){e._chart.toggleMaximizePane(e._paneWidget)})),this._$restoreButton.appendTo(this.jqDiv)):this._$restoreButton&&this._$restoreButton.detach()},o.prototype.destroy=function(){this._visibilityProperty&&(this._visibilityProperty.unsubscribe(this,this._onVisibilityPropertyChange),this._visibilityProperty=null),this._boundMouseHandler&&(this._mainDiv[0].removeEventListener("mouseenter",this._boundMouseHandler,!1),this._mainDiv[0].removeEventListener("mouseleave",this._boundMouseHandler,!1),this._boundMouseHandler=null),this.jqDiv.remove()},o.prototype._initVisibility=function(){this._visible=!0,this._visibilityProperty=n.actualBehavior(),this._visibilityProperty.subscribe(this,this._onVisibilityPropertyChange),this._onVisibilityPropertyChange()},o.prototype._onVisibilityPropertyChange=function(){var e=this._visibilityProperty.value();"alwaysOn"===e||"alwaysOff"===e?(this._visible="alwaysOn"===e,this._boundMouseHandler&&(this._mainDiv[0].removeEventListener("mouseenter",this._boundMouseHandler),this._mainDiv[0].removeEventListener("mouseleave",this._boundMouseHandler),this._boundMouseHandler=null)):(this._boundMouseHandler||(this._boundMouseHandler=this._visibilityMouseHandler.bind(this),this._mainDiv[0].addEventListener("mouseenter",this._boundMouseHandler),this._mainDiv[0].addEventListener("mouseleave",this._boundMouseHandler)),this._visible=!1),this.update()},o.prototype._visibilityMouseHandler=function(e){this._visible="mouseenter"===e.type,this.update()},e.exports=o},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" width="14" height="14"><path d="M0 0v14h14V0zm7 2l2.8 3H8v6H6V5H4.2z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" width="14" height="14"><path d="M14 14V0H0v14zm-7-2L4.2 9H6V3h2v6h1.8z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" width="14" height="14"><path d="M0 0v14h14V0zm7 1l2.8 3H8v2.5H6V4H4.2zM6 7.5h2V10h1.8L7 13l-2.8-3H6z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" width="14" height="14"><path d="M0 0v14h14V0H0zm6 1.5h2V4h1.8L7 7l2.8 3H8v2.5H6V10H4.2L7 7 4.2 4H6V1.5z"/></svg>'},function(e,t,i){"use strict";function o(e,t,i){this.chart=e,this.paneA=e.paneWidgets()[t],this.paneB=e.paneWidgets()[i],this.jqRow=$(document.createElement("tr")),this.jqRow.height(o.HEIGHT),this.jqCell=$(document.createElement("td")),this.jqCell.appendTo(this.jqRow),this.jqCell.addClass("pane-separator"),this.jqCell.attr("colspan","3"),this.jqCell.css("background",this.chart.properties().scalesProperties.lineColor.value()),this.jqCell.click(function(){}),this.handle=$('<div class="handle">').appendTo(this.jqCell),r(this.handle,this)}var n,r;i(1015),n=i(36).clamp,r=i(192).setMouseEventHandler,o.HEIGHT=1,o.prototype.hide=function(){this.jqRow.addClass("js-hidden")},o.prototype.show=function(){this.jqRow.removeClass("js-hidden")},o.prototype.mouseDownEvent=function(e){(0===e.button||Modernizr.touch)&&(this.startY=e.pageY,this.deltaY=0,this.totalHeight=this.paneA.size.h+this.paneB.size.h,this.totalStretch=this.paneA.stretchFactor()+this.paneB.stretchFactor(),this.prevStretchA=this.paneA.stretchFactor(),this.minPaneHeight=30,this.maxPaneHeight=this.totalHeight-this.minPaneHeight,this.pixelStretchFactor=this.totalStretch/this.totalHeight)},o.prototype.pressedMouseMoveEvent=function(e){var t,i,o,r;(0===e.button||Modernizr.touch)&&(e.preventDefault(),this.deltaY=e.pageY-this.startY,t=this.paneA.size.h,i=n(t+this.deltaY,this.minPaneHeight,this.maxPaneHeight),o=i*this.pixelStretchFactor,r=this.totalStretch-o,this.paneA.setStretchFactor(o),this.paneB.setStretchFactor(r),this.chart._adjustSize(),this.paneA.size.h!==t&&(this.startY=e.pageY),this.chart.paint())},o.prototype.mouseUpEvent=function(e){(0===e.button||Modernizr.touch)&&(this.chart._model.addPaneStretchFactorUndoCommand(this.paneA._state,this.paneB._state,this.prevStretchA,this.paneA.stretchFactor()),this.startY=0,this.deltaY=0,this.totalHeight=0,this.totalStretch=0,this.minPaneHeight=0,this.maxPaneHeight=0,this.pixelStretchFactor=0)},o.prototype.update=function(){this.jqCell.css("background",this.chart.properties().scalesProperties.lineColor.value())},o.prototype.paint=function(){},o.prototype.image=function(){var e={},t=o.HEIGHT,i=this.paneA.lhsPriceAxisWidget.size.w,n=this.paneA.size.w,r=this.paneA.rhsPriceAxisWidget.size.w,s=$('<canvas width="'+i+'" height="'+t+'">')[0],a=s.getContext("2d")
;return a.fillStyle=this.chart.properties().scalesProperties.lineColor.value(),a.fillRect(0,0,i,t),e.leftAxis={content:s.toDataURL(),contentWidth:i,contentHeight:t},s=$('<canvas width="'+n+'" height="'+t+'">')[0],a=s.getContext("2d"),a.fillStyle=this.chart.properties().scalesProperties.lineColor.value(),a.fillRect(0,0,n,t),e.content=s.toDataURL(),e.contentWidth=n,e.contentHeight=t,s=$('<canvas width="'+r+'" height="'+t+'">')[0],a=s.getContext("2d"),a.fillStyle=this.chart.properties().scalesProperties.lineColor.value(),a.fillRect(0,0,r,t),e.rightAxis={content:s.toDataURL(),contentWidth:r,contentHeight:t},e},e.exports=o},function(e,t){},function(e,t,i){"use strict";function o(e,t,o,r,s,a,l,c,h,u){var d=i(1017).ChartUndoModel,p=new d(e,t,o,r,s,a,l,c,h,u);return p.model().invalidate(new n(n.FULL_UPDATE)),p}var n=i(40),r=i(39);TradingView.MAMetaInfo=function(){return new r({id:"MASimple",inputs:[{id:"length",type:"integer",defval:10},{id:"source",type:"text",defval:"close"}],plots:[{id:"MovAvg",type:"line"}],properties:[{id:"is_price_study",type:"bool",value:"true"}],palettes:{}})},TradingView.VolumeMetaInfo=function(){var e={id:"Volume",inputs:[],plots:[{id:"Volume",type:"histogram"},{id:"Color",type:"colorer",palette:"volumePalette",target:"Volume"}],properties:[{id:"is_price_study",type:"bool",value:"false"}],palettes:{volumePalette:{colors:{0:{color:"#007F0E",width:1,style:CanvasEx.LINESTYLE_SOLID,name:"Up Volume"},1:{color:"#872323",width:1,style:CanvasEx.LINESTYLE_SOLID,name:"Down Volume"}}}}};return new r(e)},TradingView.DMMetaInfo=function(){return new r({id:"DM",inputs:[{id:"ADX smoothing",max:50,min:1,type:"integer",defval:14},{id:"DI Length",max:500,min:1,type:"integer",defval:14}],plots:[{id:"ADX",type:"line"},{id:"DI_P",type:"line"},{id:"DI_N",type:"line"}],properties:[{id:"is_price_study",type:"bool",value:"false"}],palettes:{}})},TradingView.RSIMetaInfo=function(){return new r({id:"RSI",inputs:[{id:"length",type:"integer",defval:14}],plots:[{id:"RelativeStrengthIndex",type:"line"}],properties:[{id:"is_price_study",type:"bool",value:"false"}],palettes:{}})},e.exports=o},function(e,t,i){"use strict";(function(e){function o(t,i,o,n,r,s,a,l,c,h){this._chartWidget=l,this.m_model=new q(t,i,o,n,r,s,a,this,!!l._containsData,h),this.m_zoomStack=new se,this.undoHistory=c,this._onRearrangePanes=new e,this._onSimpleZoomIn=new e,this._onSimpleZoomOut=new e,this._currentCustomMoveSource=null,this.beginUndoMacro=c.beginUndoMacro.bind(c),this.endUndoMacro=c.endUndoMacro.bind(c),this.createUndoCheckpoint=c.createUndoCheckpoint.bind(c),this.undoToCheckpoint=c.undoToCheckpoint.bind(c)}function n(e,t,i,o){ae.call(this,i),this._targetObj=e,this._newValue=t,this._model=o}function r(e,t,i,o,n){ae.call(this,o),this._property=e,this._priceScale=i,this._newValue=t,this._model=n}function s(e,t,i,o,n){ae.call(this,o),this._percentage=e,this._priceScale=i,this._newValue=t,this._model=n}function a(e,t,i,o,n){ae.call(this,o),this._log=e,this._priceScale=i,this._newValue=t,this._model=n}function l(e,t,i,o,n,r){ae.call(this,o),
this._style=e,this._mainSeries=i,this._priceAxisProperties=i.properties().priceAxisProperties,this._newValue=t,this._model=n,this._chartWidget=r}function c(e,t,i,o,n,r){ae.call(this,o),this._property=e,this._mainSeries=i,this._priceScale=i.priceScale(),this._newValue=t,this._model=n,this._invalidateType=r}function h(e,t,i,o){ae.call(this,"scale price",!1),this.m_model=e,this.m_pane=t,this.m_priceScale=i,this.m_state=o,this.m_newPriceScaleState=null}function u(e,t,i){ae.call(this,i,!1),this.setCustomFlag("doesnt_affect_save",!0),this.m_model=e,this.m_state=t,this.m_newTimeScaleState=null}function d(e,t,i,o){this._model=e,this._series=t,this._oldSymbol=t.symbol(),this._oldInterval=t.interval(),this._symbol=i,this._interval=o}function p(e,t,i,o,n){ae.call(this,"Insert "+t.id),this._model=e,this._studyMetaInfo=t,this._props=i,this._isOverlay=o,this._parentSource=n}function f(e,t){ae.call(this,"Remove Source"),this._model=e,this._sourceId=t.id()}function _(e,t){ae.call(this,"Remove Drawing(s)"),this._model=e,this._linetools=t,this._statesByPaneIndexes={}}function m(e,t,i,o){this._model=e,this._oldPane=this._model.paneForSource(t),ae.call(this,this._oldPane===i?"Change Price Scale":"Move Source"),this._sourceId=t.id(),this._oldPaneIndex=e.panes().indexOf(this._oldPane),this._oldScaleName=this._oldPane.priceScaleName(t.priceScale()),this._pane=i,this._paneIndex=e.panes().indexOf(i),this._pane?this._scaleName=this._pane.priceScaleName(o):this._paneIndex=e.panes().length}function g(e,t,i){ae.call(this,"Create line "+i,!1),this._model=e,this._paneIndex=e.panes().indexOf(t),this._lineTool=i}function v(e,t,i,o){ae.call(this,"Move Drawing",!1),this._model=e,this._sourceId=t.id(),this._origPoint=i instanceof R?i.clone():TradingView.clone(i),this._pointIndex=o}function y(e,t,i){ae.call(this,"Change %1 Z order (%2)".format(t.title(),i>0?"Forward":"Backward")),this._model=e,this._sourceId=t.id(),this._shift=i}function b(e,t){ae.call(this,"Send "+t.title()+" to back"),this._model=e,this._sourceId=t.id()}function S(e,t){ae.call(this,"Bring "+t.title()+" to front"),this._model=e,this._sourceId=t.id()}function w(e,t,i){ae.call(this,"Remove pane"),this._model=e,this._index=t,this._pane=this._model.panes()[t],this._chart=i}function T(e,t,i,o){ae.call(this,"Rearrange panes"),this._model=e,this._index=t,this._direction=i,this._chart=o}function P(e,t,i,o,n,r){ae.call(this,"Zoom"),this._model=e,this._startBar=t,this._endBar=i,this._startPrice=o,this._endPrice=n,this._pane=r}function C(e,t,i){ae.call(this,"Zoom"),this._baseCmd=e,this._zoomStack=t,this._inOut=i}function x(e,t,i,o,n){ae.call(this,"",!1),this._model=e,this._paneA=t,this._paneB=i,this._prevStretchA=o,this._currStretchA=n}function E(e,t){ae.call(this,"Apply Chart Theme"),this._model=e,this._newChartProps=TradingView.factoryDefaults("chartproperties"),this._newSeriesProps=TradingView.factoryDefaults("chartproperties.mainSeriesProperties"),["candleStyle","hollowCandleStyle","haStyle"].forEach(function(e){
t.mainSourceProperties[e].wickUpColor=t.mainSourceProperties[e].wickUpColor||t.mainSourceProperties[e].wickColor,t.mainSourceProperties[e].wickDownColor=t.mainSourceProperties[e].wickDownColor||t.mainSourceProperties[e].wickColor}),t.chartProperties.paneProperties.vertGridProperties=t.chartProperties.paneProperties.vertGridProperties||t.chartProperties.paneProperties.gridProperties,t.chartProperties.paneProperties.horzGridProperties=t.chartProperties.paneProperties.horzGridProperties||t.chartProperties.paneProperties.gridProperties,t.chartProperties.paneProperties.legendProperties=this._model.properties().state().paneProperties.legendProperties,this._newChartProps=$.extend(!0,{},this._newChartProps,t.chartProperties),delete this._newChartProps.scalesProperties.showLeftScale,delete this._newChartProps.scalesProperties.showRightScale,delete this._newChartProps.scalesProperties.scaleSeriesOnly,delete this._newChartProps.scalesProperties.showSeriesLastValue,delete this._newChartProps.scalesProperties.showStudyLastValue,delete this._newChartProps.scalesProperties.showSymbolLabels,delete this._newChartProps.scalesProperties.showStudyPlotLabels,this._newSeriesProps=$.extend(!0,{},this._newSeriesProps,t.mainSourceProperties),this._newChartProps.symbolWatermarkProperties||(this._newChartProps.symbolWatermarkProperties=defaults("chartproperties.symbolWatermarkProperties"),this._newChartProps.symbolWatermarkProperties.color=this._newChartProps.scalesProperties.textColor),this._oldChartProps=e.properties().state(),delete this._oldChartProps.paneProperties.topMargin,delete this._oldChartProps.paneProperties.bottomMargin,this._oldSeriesProps=e.properties().state().mainSeriesProperties}function L(e,t,i,o){var n;o=o||"",n=o+" Study template",ae.call(this,n),this._model=e,this._oldProps=t,this._newProps=i}function I(e,t,i,o,n){ae.call(this,e),this._property=t,this._value=i,this._forceSetProperty=n,this._prevValue=t.value(),this._cw=o}function A(e,t){var i,o,n,r,s,a=t.priceScale(),l=[];for(a.isPercent()&&(i=t.firstValue()),o=0;o<e.length;o++)n={offset:e[o].offset,time_t:e[o].time_t},r=e[o].price,a.isPercent()&&(r=a.priceRange().convertToPercent(r,i)),s=a.priceToCoordinate(r),s-=40,r=a.coordinateToPrice(s),a.isPercent()&&(r=a.priceRange().convertFromPercent(r,i)),n.price=r,l.push(n);return l}function k(e,t,i){ae.call(this,"clone "+t.title()),this._model=e,this._originalSource=t,this._withoutShift=i}function M(e,t){ae.call(this,"Stop Sincing Drawing"),this._model=e,this._sourceId=t.id(),this._linkKey=t.linkKey}function O(e,t,i){ae.call(this,"Paste Drawing"),this._model=e,this._clipboardData=t,this._paneIndex=this._model.panes().indexOf(i||this._model.paneForSource(this._model.mainSeries()))}function D(e,t){ae.call(this,"Paste Indicator"),this._model=e,this._clipboardData=t}function V(e,t){ae.call(this,"Move",!1),this._origPoint=e.clone(),this._point=null,this._handler=t}
var R=i(8).Point,B=i(445),N=i(1).LineDataSource,z=i(3),F=i(197),H=i(505).showGoToTradingViewReferralDialog,W=i(465),U=i(27).ProductFeatures,j=i(43),q=i(209),G=i(110),Y=i(40),X=i(912).doAnimate,K=i(65),J=i(7),Z=J.saveDefaultProperties,Q=i(500),ee=i(145),te=i(34),ie=te.Study,oe=i(231),ne=i(17),re=i(198).createTooManyStudiesNotice,se=i(544).UndoStack,ae=i(166).UndoCommand,le=i(1018).SaveLineToolStateUndoCommand,ce=i(1019).ApplyLineToolTemplateUndoCommand,he=i(545).RestoreFactoryDefaultsUndoCommand,ue=i(545).RestoreUserDefaultsUndoCommand,de=i(0).getLogger("Chart.ChartUndoModel");inherit(o,K),o.prototype.version=function(){return this.m_model._version},o.prototype.onData=function(e){switch(e.method){case"timescale_update":var t=e.params;this.m_model.updateTimeScale(t.index,t.zoffset,t.changes,t.index_diff,t.marks,t.clear)}},o.prototype.paneForSource=function(e){return this.m_model.paneForSource(e)},o.prototype.createPane=function(e){return this.m_model.createPane(e)},o.prototype.dumpViews=function(){return this.m_model.dumpViews()},o.prototype.readOnly=function(){return this.m_model.readOnly()},o.prototype.restart=function(){this.m_model.restart()},o.prototype.disconnect=function(){this.m_model.disconnect()},o.prototype.studiesMetaData=function(){return this.m_model.studiesMetaData()},o.prototype.studyVersioning=function(){return this.m_model.studyVersioning()},o.prototype.chartModel=function(){return this.m_model},o.prototype.pushUndoCommand=function(e){this.undoHistory.pushUndoCommand(e)},o.prototype.startScalePrice=function(e,t,i){this.pushUndoCommand(new h(this.m_model,e,t,t.state())),this.chartModel().startScalePrice(e,t,i)},o.prototype.scalePriceTo=function(e,t,i){this.chartModel().scalePriceTo(e,t,i)},o.prototype.endScalePrice=function(e,t){this.chartModel().endScalePrice(e,t)},o.prototype.startScrollPrice=function(e,t,i){t.isAutoScale()||(this._initialPriceScrollState=t.state(),this._initialPriceScrollPos=i,this.chartModel().startScrollPrice(e,t,i))},o.prototype.scrollPriceTo=function(e,t,i){t.isAutoScale()||(this._initialPriceScrollPos&&Math.abs(this._initialPriceScrollPos-i)>20&&(this.pushUndoCommand(new h(this.m_model,e,t,this._initialPriceScrollState)),delete this._initialPriceScrollState,delete this._initialPriceScrollPos),this.chartModel().scrollPriceTo(e,t,i))},o.prototype.endScrollPrice=function(e,t){t.isAutoScale()||(delete this._initialPriceScrollState,delete this._initialPriceScrollPos,this.chartModel().endScrollPrice(e,t))},o.prototype.setPriceAutoScale=function(e,t,i){this.pushUndoCommand(new h(this.m_model,e,t,t.state())),this.chartModel().setPriceAutoScale(e,t,i)},o.prototype.resetPriceScale=function(e,t){this.pushUndoCommand(new h(this.m_model,e,t,t.state())),this.chartModel().resetPriceScale(e,t)},o.prototype.startScaleTime=function(e){this.pushUndoCommand(new u(this.m_model,this.m_model.timeScale().state(),"scale time")),this.chartModel().startScaleTime(e)},o.prototype.scaleTimeTo=function(e){this.chartModel().scaleTimeTo(e)},o.prototype.endScaleTime=function(){this.chartModel().endScaleTime()},
o.prototype.startScrollTime=function(e){this._initialTimeScrollState=this.m_model.timeScale().state(),this._initialTimeScrollPos=e,this.chartModel().startScrollTime(e)},o.prototype.scrollTimeTo=function(e){this._initialTimeScrollPos&&Math.abs(e-this._initialTimeScrollPos)>20&&(this.pushUndoCommand(new u(this.m_model,this._initialTimeScrollState,"scroll time")),delete this._initialTimeScrollPos,delete this._initialTimeScrollState),this.chartModel().scrollTimeTo(e)},o.prototype.gotoTime=function(e,t){var i,o,n=this.timeScale().visibleBars();if(null===n)return $.Deferred().reject().promise();i=n.firstBar(),o=this.m_model.timeScale().state(),this.chartModel().gotoTime(e,t),i!==this.timeScale().visibleBars().firstBar()&&this.pushUndoCommand(new u(this.m_model,o,"scroll time"))},o.prototype.endScrollTime=function(){this.chartModel().endScrollTime(),delete this._initialTimeScrollPos,delete this._initialTimeScrollState},o.prototype.resetTimeScale=function(){this.pushUndoCommand(new u(this.m_model,this.m_model.timeScale().state())),this.chartModel().resetTimeScale()},o.prototype.canZoomIn=function(){return this.chartModel().canZoomIn()},o.prototype.canZoomOut=function(){return this.chartModel().canZoomOut()},o.prototype.setWidth=function(e){this.m_model.setWidth(e)},o.prototype.setPaneHeight=function(e,t){this.m_model.setPaneHeight(e,t)},o.prototype.gridSource=function(){return this.m_model.gridSource()},o.prototype.watermarkSource=function(){return this.m_model.watermarkSource()},o.prototype.brandingSource=function(){return this.m_model.brandingSource()},o.prototype.addAlertsSource=function(e){return this.m_model.addAlertsSource(e)},o.prototype.alertsSources=function(){return this.m_model.alertsSources()},o.prototype.publishedChartsTimelineSource=function(){return this.m_model.publishedChartsTimelineSource()},o.prototype.barsMarksSources=function(){return this.m_model.barsMarksSources()},o.prototype.crossHairSource=function(){return this.m_model.crossHairSource()},o.prototype.model=function(){return this.m_model},o.prototype.mainSeries=function(){return this.m_model.m_mainSeries},o.prototype.mainSeriesScaleRatioProperty=function(){return this.m_model.mainSeriesScaleRatioProperty()},o.prototype.panes=function(){return this.m_model.m_panes},o.prototype.timeScale=function(){return this.m_model.timeScale()},o.prototype.setSelectedSource=function(e,t){this.m_model.setSelectedSource(e,t)},o.prototype.setHoveredSource=function(e,t){this.m_model.setHoveredSource(e,t)},o.prototype.selectedSource=function(){return this.m_model.selectedSource()},o.prototype.onSelectedSourceChanged=function(){return this.m_model.onSelectedSourceChanged()},o.prototype.hoveredSource=function(){return this.m_model.hoveredSource()},o.prototype.activeStrategySource=function(){return this.m_model.activeStrategySource()},o.prototype.invalidate=function(e){this.m_model.invalidate(e)},o.prototype.setCurrentPosition=function(e,t,i,o){this.m_model.setCurrentPosition(e,t,i,o)},o.prototype.setAndSaveCurrentPosition=function(e,t,i,o){
this.m_model.setAndSaveCurrentPosition(e,t,i,o)},o.prototype.modifySeries=function(e,t,i){var o=new d(this.m_model,e,t,i);this.pushUndoCommand(o)},o.prototype.canCreateStudy=function(e){return this.model().chartApi().chartApi().isCanCreateStudy(e)},o.prototype._isCountedStudy=function(e){return!e||!["Volume@tv-basicstudies","Compare@tv-basicstudies","Overlay@tv-basicstudies"].includes(e.id)},o.prototype.checkIfFeatureAvailable=function(e,t){var i=this.canCreateStudy(),o=t&&t instanceof ie;return!this.readOnly()&&o&&(i=this.canCreateStudy(!0)),i?!(z.enabled(U.INDICATORS_ON_CHART)&&this._isCountedStudy(e)&&this.m_model.countUserStudies({dontCountVolume:!0,dontCountOverlay:!0,dontCountCompare:!0})>=z.getConfig(U.INDICATORS_ON_CHART).limit)||(TradingView.onWidget()?void H({feature:"indicators"}).open():(W("studyLimit"),void j.createGoProDialog({feature:"studyLimit"}).then(function(e){e.open()}))):void(o?j.createGoProDialog({feature:"studyOnStudy"}).then(function(e){e.open()}):re().open())},o.prototype._insertStudy=function(e,t,i,o){var n=new p(this.m_model,e,t,i,o);return this.pushUndoCommand(n),n.insertedStudy()},o.prototype.insertStudyWithoutCheck=function(){return this._insertStudy.apply(this,arguments)},o.prototype.insertStudy=function(e,t,i,o){if(this.checkIfFeatureAvailable(e,o))return this._insertStudy(e,t,i,o)},o.prototype.setProperty=function(e,t,i){if(e&&e.value()!==t){var o=new n(e,t,i,this.m_model);this.pushUndoCommand(o),this.emitEvent("setProperty")}},o.prototype.setPercentProperty=function(e,t,i,o){if(e.value()!==t){var n=new s(e,t,i,o,this.m_model);this.pushUndoCommand(n)}},o.prototype.setLogProperty=function(e,t,i,o){if(e.value()!==t){var n=new a(e,t,i,o,this.m_model);this.pushUndoCommand(n)}},o.prototype.setAutoScaleProperty=function(e,t,i,o){if(e.value()!==t){var n=new r(e,t,i,o,this.m_model);this.pushUndoCommand(n)}},o.prototype.setChartStyleProperty=function(e,t,i){if(e.value()!==t){var o=new l(e,t,this.mainSeries(),i,this.m_model,this._chartWidget);this.pushUndoCommand(o),this.emitEvent("setChartStyleProperty")}},o.prototype.setLockScaleProperty=function(e,t,i,o){if(e.value()!==t){var n=new c(e,t,i,o,this.m_model,Y.LIGHT_UPDATE);this.pushUndoCommand(n)}},o.prototype.setScaleRatioProperty=function(e,t,i,o){if(e.value()!==t){var n=new c(e,t,i,o,this.m_model,Y.FULL_UPDATE);this.pushUndoCommand(n)}},o.prototype.setScreenChartProperty=function(e,t,i,o,n){if(n||e.value()!==t){var r=new I(o,e,t,i,n);this.pushUndoCommand(r)}},o.prototype._getSourcesTree=function(e){var t,i=[],o=this.m_model.children(e);for(t=0;t<o.length;t++)i=i.concat(this._getSourcesTree(o[t]));return i.push(e),i},o.prototype.removeSource=function(e,t){var i,o,n;if(e.isUserDeletable()){if(i=this._getSourcesTree(e),this.lineBeingCreated()===e)this.cancelCreatingLine();else{for(this.beginUndoMacro("Remove source"),o=0;o<i.length;++o)n=new f(this.m_model,i[o]),this.pushUndoCommand(n);this.endUndoMacro()}t||(1===i.length?this.emitEvent("removeSource",[i[0]]):this.emitEvent("removeSources",[i]))}},o.prototype.removeSelectedSource=function(){
var e,t=this.m_model.selectedSource();t&&t.isUserDeletable()&&(this.setSelectedSource(null),e=new f(this.m_model,t),this.pushUndoCommand(e),this.emitEvent("removeSource",[t]))},o.prototype.removeLineTools=function(e){var t,i,o=this.lineBeingCreated();o&&-1!==(t=e.indexOf(o))&&(this.cancelCreatingLine(),e.splice(t,1)),i=new _(this.m_model,e),this.pushUndoCommand(i),this.emitEvent("removeSources",[e])},o.prototype.move=function(e,t,i){var o=new m(this.m_model,e,t,i);this.pushUndoCommand(o),this.emitEvent("moveSource",[e])},o.prototype.createLineTool=function(e,t,i,o,n){var r,s;return"LineToolRegressionTrend"!==i||this.canCreateStudy()?(this._createLineCommand=new g(this.m_model,e,i),r=this._createLineCommand.startCreatingLine(t,o,n),s=this._createLineCommand.line(),r&&(this.pushUndoCommand(this._createLineCommand),delete this._createLineCommand),s):void re().open()},o.prototype.lineBeingCreated=function(){return this.m_model.lineBeingCreated()},o.prototype.paneBeingCreatedLineOn=function(){return this.m_model.paneBeingCreatedLineOn()},o.prototype.coninueCreatingLine=function(e,t,i){var o=this._createLineCommand.continueCreatingLine(e,t,i);return o&&(this.pushUndoCommand(this._createLineCommand),delete this._createLineCommand),o},o.prototype.finishLineTool=function(e){this.m_model.finishLineTool(e)},o.prototype.cancelCreatingLine=function(){this.m_model.cancelCreatingLine()},o.prototype.lineCancelled=function(){return this.m_model.lineCancelled()},o.prototype.startChangingLinetool=function(e,t,i,o){this._currentLineChangeCommand=new le(this.m_model,e,"Change "+i+"point",!1),this.m_model.startChangingLinetool(e,t,i,o)},o.prototype.lineBeingEdited=function(){return this.m_model.lineBeingEdited()},o.prototype.changeLinePoint=function(e,t){this.m_model.changeLinePoint(e,t)},o.prototype.endChangingLinetool=function(e){this.m_model.endChangingLinetool(e),this.pushUndoCommand(this._currentLineChangeCommand),this._currentLineChangeCommand=null},o.prototype.startMovingSource=function(e,t,i){this._currentLineMoveCommand=new v(this.m_model,e,t,i),this.m_model.startMovingSource(e,t,i)},o.prototype.sourceBeingMoved=function(){return this.m_model.sourceBeingMoved()},o.prototype.moveSource=function(e){this._currentLineMoveCommand.setPoint(e),this.m_model.moveSource(e)},o.prototype.endMovingSource=function(e){this.m_model.endMovingSource(e),this._currentLineMoveCommand._point&&(this.pushUndoCommand(this._currentLineMoveCommand),this._currentLineChangeCommand=null)},o.prototype.dataSources=function(){return this.m_model.dataSources()},o.prototype.orderedDataSources=function(e){return this.m_model.orderedDataSources(e)},o.prototype.dataSourceForId=function(e){return this.m_model.dataSourceForId(e)},o.prototype.state=function(e,t){return this.m_model.state(e,t)},o.prototype.asyncState=function(e){return this.m_model.asyncState(e)},o.prototype.restoreState=function(e,t){return this.m_model.restoreState(e,t)},o.prototype.calculateDefaultTags=function(){return this.m_model.calculateDefaultTags()},o.prototype.onTagsChanged=function(){
return this.m_model.onTagsChanged()},o.prototype.changeZOrder=function(e,t){var i=new y(this.m_model,e,t);this.pushUndoCommand(i),this.emitEvent("changeZOrder",[e,t])},o.prototype.sendToBack=function(e){var t=new b(this.m_model,e);this.pushUndoCommand(t),this.emitEvent("changeZOrder",[e])},o.prototype.bringToFront=function(e){var t=new S(this.m_model,e);this.pushUndoCommand(t),this.emitEvent("changeZOrder",[e])},o.prototype.removeAllStudies=function(){var e,t,i;for(this.beginUndoMacro("remove all studies"),e=this.m_model.dataSources(),t=0;t<e.length;t++)i=e[t],(TradingView.isInherited(i.constructor,ie)&&!i.isChildStudy()&&i.removeByRemoveAllStudies()||TradingView.isInherited(i.constructor,oe))&&this.removeSource(i);this.endUndoMacro()},o.prototype.removeAllDrawingTools=function(e){var t,i,o;for(this.beginUndoMacro("remove all drawing tools"),this.lineBeingCreated()&&this.cancelCreatingLine(),t=this.m_model.dataSources(),i=0;i<t.length;i++)o=t[i],TradingView.isInherited(o.constructor,N)&&o.isActualSymbol()&&o.isUserDeletable()&&(e&&e!==o._constructor||this.removeSource(o));this.endUndoMacro()},o.prototype.unlinkLine=function(e){var t=new M(this.m_model,e);this.pushUndoCommand(t)},o.prototype.copyToOtherCharts=function(e){this.m_model.copyToOtherCharts(e)},o.prototype.moveDown=function(){var e,t,i,o,n;try{this.beginUndoMacro("Move Down")}catch(e){return}e=this,t=this.m_model.mainSeries(),i=this.m_model.paneForSource(t),o=i.priceScaleForSource(t),o.setAutoScale(!1),n=o.height(),X({to:n/5,onStep:function(t){e.startScrollPrice(i,o,0),e.scrollPriceTo(i,o,t),e.endScrollPrice(i,o)},onComplete:function(){e.endUndoMacro()}})},o.prototype.moveUp=function(){var e,t,i,o,n;try{this.beginUndoMacro("Move Up")}catch(e){return}e=this,t=this.m_model.mainSeries(),i=this.m_model.paneForSource(t),o=i.priceScaleForSource(t),o.setAutoScale(!1),n=o.height(),X({to:n/5,onStep:function(t){e.startScrollPrice(i,o,t),e.scrollPriceTo(i,o,0),e.endScrollPrice(i,o)},onComplete:function(){e.endUndoMacro()}})},o.prototype.moveLeft=function(){var e,t;try{this.beginUndoMacro("Move Left")}catch(e){return}e=this.m_model.timeScale().width(),t=this,X({to:e/5,onStep:function(e){t.startScrollTime(e),t.scrollTimeTo(0),t.endScrollTime()},onComplete:function(){t.endUndoMacro()}})},o.prototype.moveRight=function(){var e,t;try{this.beginUndoMacro("Move Right")}catch(e){return}e=this.m_model.timeScale().width(),t=this,X({to:e/5,onStep:function(e){t.startScrollTime(0),t.scrollTimeTo(e),t.endScrollTime()},onComplete:function(){t.endUndoMacro()}})},o.prototype.scrollChart=function(e){z.enabled("chart_scroll")&&(this.startScrollTime(0),this.scrollTimeTo(e),this.endScrollTime())},o.prototype.scrollChartByBar=function(e){if(z.enabled("chart_scroll")){var t=e*this.m_model.timeScale().barSpacing();this.startScrollTime(0),this.scrollTimeTo(t),this.endScrollTime()}},o.prototype.zoomIn=function(e,t){var i,o,n=this.m_model.timeScale().width(),r=this;if(t=t||1,this.canZoomIn())if(e)i=t*n/10,o=i*((e+1)/2),this.startScaleTime(i),this.scaleTimeTo(0),this.endScaleTime(),
this.startScrollTime(0),this.scrollTimeTo(i-o),this.endScrollTime(),this._onSimpleZoomIn.fire();else{try{this.beginUndoMacro("Zoom In")}catch(e){return}X({to:n/5,onStep:function(e){r.startScaleTime(e),r.scaleTimeTo(0),r.endScaleTime()},onComplete:function(){r.endUndoMacro(),r._onSimpleZoomIn.fire()}})}},o.prototype.zoomOut=function(e,t){var i=this.m_model.timeScale().width(),o=this;if(t=t||1,this.canZoomOut())if(e)this.startScaleTime(0),this.scaleTimeTo(t*i/10),this.endScaleTime(),this.startScrollTime(t*(i/20-i/20*e)),this.scrollTimeTo(0),this.endScrollTime(),this._onSimpleZoomOut.fire();else{try{this.beginUndoMacro("Zoom Out")}catch(e){return}X({to:i/5,onStep:function(e){o.startScaleTime(0),o.scaleTimeTo(e),o.endScaleTime()},onComplete:function(){o.endUndoMacro(),o._onSimpleZoomOut.fire()}})}},o.prototype.resetScales=function(){var e,t;for(this.beginUndoMacro("Reset scales"),this.resetTimeScale(),e=0;e<this.panes().length;e++)t=this.panes()[e],this.resetPriceScale(t,t.leftPriceScale()),this.resetPriceScale(t,t.rightPriceScale());this.endUndoMacro(),this.m_model.recalculateAllPanes()},o.prototype.zoomToViewport=function(e,t,i,o,n){var r=new P(this.m_model,e,t,i,o,n),s=new C(r,this.m_zoomStack,!0);this.pushUndoCommand(s)},o.prototype.zoomFromViewport=function(){var e=new C(this.m_zoomStack.head(),this.m_zoomStack,!1);this.pushUndoCommand(e)},o.prototype.zoomStack=function(){return this.m_zoomStack},o.prototype.addPaneStretchFactorUndoCommand=function(e,t,i,o){var n=new x(this.m_model,e,t,i,o);this.pushUndoCommand(n)},o.prototype.restoreFactoryDefaults=function(e){var t=new he(this.m_model,e);this.pushUndoCommand(t)},o.prototype.restoreDefaults=function(e){var t=new ue(this.m_model,e);this.pushUndoCommand(t)},o.prototype.chartLoadTheme=function(e,t){var i=new E(e,t);this.pushUndoCommand(i)},o.prototype.applyLineToolTemplate=function(e,t,i){this.beginUndoMacro(i),this.saveLineToolState(e,i);var o=new ce(e,t,i);this.pushUndoCommand(o),this.saveLineToolState(e,i),this.endUndoMacro(),this.model().updateSource(e)},o.prototype.restoreLineToolFactoryDefaults=function(e,t){this.beginUndoMacro(t),this.saveLineToolState(e,t),e.restoreFactoryDefaults(),this.saveLineToolState(e,t),this.endUndoMacro()},o.prototype.studyLoadTemplate=function(e,t,i,o){var n=new L(e,t,i,o);this.pushUndoCommand(n)},o.prototype.onRearrangePanes=function(){return this._onRearrangePanes},o.prototype.onSimpleZoomIn=function(){return this._onSimpleZoomIn},o.prototype.onSimpleZoomOut=function(){return this._onSimpleZoomOut},o.prototype.loadRange=function(e){e.res!==this.m_model.mainSeries().properties().interval.value()?(this.m_model.mainSeries().setDefaultTimeframe(e.val),this.setProperty(this.m_model.mainSeries().properties().interval,e.res,"Change date range")):this.m_model.mainSeries().loadDataTo(e.val)},o.prototype.cloneLineTool=function(e,t){var i=new k(this.m_model,e,t);return this.pushUndoCommand(i),this.emitEvent("cloneLineTool"),i.clonedLineToolId()},o.prototype._preparePriceAxisProperties=function(e,t){
var i=t.lockScale.value(),o=e.style.value()===ee.STYLE_PNF;(o||i)&&(t.log.setValue(!1),t.percentage.setValue(!1)),t.logDisabled.setValue(!(!o&&!i)),t.percentageDisabled.setValue(!(!o&&!i))},o.prototype.alertsList=function(){return this.m_model.alertsList()},o.prototype.alertsListChanged=function(){return this.m_model.alertsListChanged()},o.prototype.insertStudyStub=function(e){return this.m_model.insertStudyStub(e)},o.prototype.removeStudyStub=function(e){return this.m_model.removeStudyStub(e)},o.prototype.isJustClonedChart=function(){return this._chartWidget.isJustClonedChart()},o.prototype.copySourceToClip=function(e){if(e&&!e.properties().blockCopying){var t={};if(e instanceof N)t.type="drawing",t.geometry=e.geometry();else{if(!(e instanceof ie))return!1;t.type="study"}return t.source=e.state&&e.state(),(delete t.source.alertId,delete t.source.linkKey,t.source)?(t.title=e.title&&e.title(),t.modelId=this.m_model._id,Q.set(t),!0):!1}},o.prototype.cutSourceToClip=function(e){if(!this.copySourceToClip(e))return!1;this.removeSource(e)},o.prototype.pasteLineTool=function(e,t){var i=new O(this.m_model,t,e);this.pushUndoCommand(i)},o.prototype.pasteStudy=function(e){var t=new D(this.m_model,e);this.pushUndoCommand(t)},o.prototype.pasteSourceFromClip=function(e,t){var i=Q.get();if(!i)return!1;"drawing"===i.type&&this.pasteLineTool(e,i),"study"===i.type&&this.checkIfFeatureAvailable(i.state)&&this.pasteStudy(i)},o.prototype.trackTime=function(){return this._chartWidget.trackTime()},o.prototype.isInReplay=function(){return this.m_model.isInReplay()},o.prototype.switchToReplay=function(e){this.undoHistory.clearStack(),this.m_model.switchToReplay(e)},o.prototype.switchToRealtime=function(){this.undoHistory.clearStack(),this.m_model.switchToRealtime()},o.prototype.startCustomMoving=function(e,t,i){this._currentCustomMoveCommand=new V(t,i),this._currentCustomMoveSource=e},o.prototype.customMoveBeingProcessed=function(){return null!==this._currentCustomMoveSource},o.prototype.processCustomMove=function(e){this._currentCustomMoveCommand.setPoint(e)},o.prototype.endCustomMoving=function(){null!==this._currentCustomMoveCommand.point()&&(this.pushUndoCommand(this._currentCustomMoveCommand),this._currentCustomMoveCommand=null,this._currentCustomMoveSource=null)},o.prototype.saveLineToolState=function(e,t){this.pushUndoCommand(new le(this.m_model,e,t))},inherit(n,ae),n.prototype.redo=function(){this._oldValue=this._targetObj.value(),Z(!0),this._targetObj.setValue(this._newValue),Z(!1),this._model&&(this._model.recalculateAllPanes(),this._model.invalidate(new Y(Y.LIGHT_UPDATE)))},n.prototype.undo=function(){Z(!0),this._targetObj.setValue(this._oldValue),Z(!1),this._oldValue=null,this._model&&(this._model.recalculateAllPanes(),this._model.invalidate(new Y(Y.LIGHT_UPDATE)))},inherit(r,ae),r.prototype.redo=function(){this._oldValue=this._property.value(),this._oldLockScaleValue=this._priceScale.mainSource()instanceof ee?this._priceScale.isLockScale():void 0,Z(!0),this._property.setValue(this._newValue),
this._oldLockScaleValue&&this._newValue&&this._priceScale.properties().lockScale.setValue(!1),Z(!1),this._model&&(this._model.recalculateAllPanes(),this._model.invalidate(new Y(Y.LIGHT_UPDATE)))},r.prototype.undo=function(){Z(!0),this._property.setValue(this._oldValue),this._oldLockScaleValue&&this._newValue&&this._priceScale.properties().lockScale.setValue(this._oldLockScaleValue),Z(!1),this._oldValue=null,this._model&&(this._model.recalculateAllPanes(),this._model.invalidate(new Y(Y.LIGHT_UPDATE)))},inherit(s,ae),s.prototype.redo=function(){this._oldValue=this._percentage.value(),this._oldAutoScaleValue=this._priceScale.properties().autoScale.value(),this._oldLogValue=this._priceScale.properties().log.value(),this._oldLogDisabled=this._priceScale.properties().logDisabled.value(),Z(!0),this._percentage.setValue(this._newValue),this._priceScale.properties().autoScaleDisabled.setValue(this._newValue),this._priceScale.properties().log.setValue(!1),Z(!1),this._model&&(this._model.recalculateAllPanes(),this._model.invalidate(new Y(Y.LIGHT_UPDATE)))},s.prototype.undo=function(){if(Z(!0),this._percentage.setValue(this._oldValue),this._priceScale.properties().autoScale.setValue(this._oldAutoScaleValue),this._priceScale.properties().autoScaleDisabled.setValue(this._oldValue),this._priceScale.properties().log.setValue(this._oldLogValue),!this._oldAutoScaleValue&&!this._priceScale.isLockScale()){var e=this._model.timeScale().visibleBars();this._priceScale.setPriceRange(this._priceScale.priceRange().convertFromPercents(this._priceScale.mainSource().close(e.firstBar())))}Z(!1),this._oldValue=null,this._model&&(this._model.recalculateAllPanes(),this._model.invalidate(new Y(Y.LIGHT_UPDATE)))},inherit(a,ae),a.prototype.redo=function(){this._oldValue=this._log.value(),this._oldPercValue=this._priceScale.properties().percentage.value(),this._oldPercDisabled=this._priceScale.properties().percentageDisabled.value(),Z(!0),this._log.setValue(this._newValue),this._priceScale.properties().percentage.setValue(!1),this._priceScale.properties().autoScaleDisabled.setValue(this._priceScale.properties().percentage.value()),Z(!1),this._model&&(this._model.recalculateAllPanes(),this._model.invalidate(new Y(Y.LIGHT_UPDATE)))},a.prototype.undo=function(){Z(!0),this._log.setValue(this._oldValue),this._priceScale.properties().percentage.setValue(this._oldPercValue),Z(!1),this._oldValue=null,this._model&&(this._model.recalculateAllPanes(),this._model.invalidate(new Y(Y.LIGHT_UPDATE)))},inherit(l,ae),l.prototype.redo=function(){var e=$.Deferred().resolve();this._mainSeries._properties.style===this._style&&this._model.mainSeries().isNeedRestart(this._newValue)&&(e=this._chartWidget.screen.show()),e.done(function(){this._oldValue=this._style.value(),this._oldAutoScale=this._priceAxisProperties.autoScale.value(),this._oldLogValue=this._priceAxisProperties.log.value(),this._oldLogDisabled=this._priceAxisProperties.logDisabled.value(),this._oldPercentageValue=this._priceAxisProperties.percentage.value(),
this._oldPercentageDisabled=this._priceAxisProperties.percentageDisabled.value(),Z(!0),this._style.setValue(this._newValue),this._chartWidget.model()._preparePriceAxisProperties(this._mainSeries.properties(),this._priceAxisProperties),Z(!1),this._model&&(this._model.recalculateAllPanes(),this._model.invalidate(new Y(Y.LIGHT_UPDATE)))}.bind(this))},l.prototype.undo=function(){var e=$.Deferred().resolve();this._mainSeries._properties.style===this._style&&this._model.mainSeries().isNeedRestart(this._newValue)&&(e=this._chartWidget.screen.show()),e.done(function(){Z(!0),this._style.setValue(this._oldValue),this._priceAxisProperties.log.setValue(this._oldLogValue),this._priceAxisProperties.logDisabled.setValue(this._oldLogDisabled),this._priceAxisProperties.percentage.setValue(this._oldPercentageValue),this._priceAxisProperties.percentageDisabled.setValue(this._oldPercentageDisabled),this._priceAxisProperties.autoScale.setValue(this._oldAutoScale),Z(!1),this._oldValue=null,this._model&&(this._model.recalculateAllPanes(),this._model.invalidate(new Y(Y.LIGHT_UPDATE)))}.bind(this))},inherit(c,ae),c.prototype.redo=function(){if(this._oldValue=this._property.value(),this._oldAutoScale=this._priceScale.properties().autoScale.value(),this._oldPercentage=this._priceScale.properties().percentage.value(),this._oldLog=this._priceScale.properties().log.value(),Z(!0),this._newValue&&(this._priceScale.properties().percentage.setValue(!1),this._priceScale.properties().log.setValue(!1),this._priceScale.properties().autoScale.setValue(!1),this._oldPercentage)){var e=this._model.timeScale().visibleBars();this._priceScale.setPriceRange(this._priceScale.priceRange().convertFromPercents(this._priceScale.mainSource().close(e.firstBar())))}this._property.setValue(this._newValue),Z(!1),this._model&&(this._model.recalculateAllPanes(),this._model.invalidate(new Y(this._invalidateType)))},c.prototype.undo=function(){Z(!0),this._priceScale.properties().percentage.setValue(this._oldPercentage),this._priceScale.properties().log.setValue(this._oldLog),this._priceScale.properties().autoScale.setValue(this._oldAutoScale),this._property.setValue(this._oldValue),Z(!1),this._oldValue=null,this._model&&(this._model.recalculateAllPanes(),this._model.invalidate(new Y(this._invalidateType)))},inherit(h,ae),h.prototype.undo=function(){if(null!==this.m_newPriceScaleState)return void de.logDebug("PriceScaleChangeUndoCommand.undo: Command is already undone");this.m_newPriceScaleState=this.m_priceScale.state(),this.m_model.restorePriceScaleState(this.m_pane,this.m_priceScale,this.m_state)},h.prototype.redo=function(){if(null===this.m_newPriceScaleState)return void de.logDebug("PriceScaleChangeUndoCommand.redo: Command is not undone");this.m_model.restorePriceScaleState(this.m_pane,this.m_priceScale,this.m_newPriceScaleState),this.m_newPriceScaleState=null},inherit(u,ae),u.prototype.undo=function(){if(null!==this.m_newTimeScaleState)return void de.logDebug("TimeScaleChangeUndoCommand.undo: Command is already undone")
;this.m_newTimeScaleState=this.m_model.timeScale().state(),this.m_model.restoreTimeScaleState(this.m_state)},u.prototype.redo=function(){if(null===this.m_newTimeScaleState)return void de.logDebug("TimeScaleChangeUndoCommand.redo: Command is not undone");this.m_model.restoreTimeScaleState(this.m_newTimeScaleState),this.m_newTimeScaleState=null},inherit(d,ae),d.prototype.redo=function(){this._model.modifySeries(this._series,this._symbol,this._interval)},d.prototype.undo=function(){this._model.modifySeries(this._series,this._oldSymbol,this._oldInterval)},inherit(p,ae),p.prototype.redo=function(){var e=null;return this._studyState?(e=this._model.restoreSource(this._restorePane,this._paneIndex,this._paneState,this._studyState,this._priceScaleName),this._studyId!==e.id()&&de.logError("Study was restored improperly - study ids does not match"),delete this._studyState):(e=this._model.insertStudy(this._studyMetaInfo,this._props,this._isOverlay,this._parentSource),this._studyId=e.id()),e},p.prototype.insertedStudy=function(){return this._model.dataSourceForId(this._studyId)},p.prototype.undo=function(){var e,t=this.insertedStudy();this._studyState=t.state(),e=this._model.paneForSource(t),this._paneIndex=this._model.panes().indexOf(e),this._priceScaleName=e.priceScaleName(t.priceScale()),this._paneState=e.state(),this._restorePane=this._model.removeSource(t)},inherit(f,ae),f.prototype.redo=function(){var e,t=this._model.dataSourceForId(this._sourceId);this._sourceState=t.state(),e=this._model.paneForSource(t),this._paneIndex=this._model.panes().indexOf(e),this._priceScaleName=e.priceScaleName(t.priceScale()),this._paneState=e.state(),this._restorePane=this._model.removeSource(t)},f.prototype.undo=function(){var e=this._model.restoreSource(this._restorePane,this._paneIndex,this._paneState,this._sourceState,this._priceScaleName);this._sourceId!==e.id()&&de.logError("Source was restored improperly - source ids does not match")},inherit(_,ae),_.prototype.redo=function(){var e,t,i;for(e=0;e<this._linetools.length;e++)t=this._model.paneForSource(this._linetools[e]),i=this._model.panes().indexOf(t),this._statesByPaneIndexes[i]=this._statesByPaneIndexes[i]||[],this._statesByPaneIndexes[i].push({state:this._linetools[e].state(),owner:this._linetools[e].ownerSource().id()}),t.removeDataSource(this._linetools[e]);delete this._linetools},_.prototype.undo=function(){var e,t,i,o,n,r,s;this._linetools=[];for(e in this._statesByPaneIndexes)for(t=this._model.panes()[e],i=this._statesByPaneIndexes[e],o=0;o<i.length;o++)n=i[o],r=this._model.dataSourceForId(n.owner),s=t._restoreLineTool(n.state),s.setOwnerSource(r),s.updateAllViews(),this._linetools.push(s);this._model.invalidate(new Y(Y.LIGHT_UPDATE))},inherit(m,ae),m.prototype.redo=function(){-1===this._model.panes().indexOf(this._pane)&&(this._pane=this._model.createPane(this._paneIndex)),this._model.move(this._model.dataSourceForId(this._sourceId),this._pane,this._pane.priceScaleByName(this._scaleName))},m.prototype.undo=function(){
-1===this._model.panes().indexOf(this._oldPane)&&(this._oldPane=this._model.createPane(this._oldPaneIndex)),this._model.move(this._model.dataSourceForId(this._sourceId),this._oldPane,this._oldPane.priceScaleByName(this._oldScaleName))},inherit(g,ae),g.prototype.startCreatingLine=function(e,t,i){var o,n;return this._points=[{point:e}],o=this._model.panes()[this._paneIndex],n=this._model.createLineTool(o,e,this._lineTool,t,i),this._lineId=n.id(),!this._model.lineBeingCreated()},g.prototype.continueCreatingLine=function(e,t,i){return this._points||de.logError("continueCreatingLine is called before startCreatingLine"),this._points.push({point:e,envState:t}),this._model.coninueCreatingLine(e,t,i)},g.prototype.line=function(){return this._lineId?this._model.dataSourceForId(this._lineId):null},g.prototype.undo=function(){var e=this.line();e&&(this._lineState=e.state(),this._model.removeSource(e),delete this._lineId)},g.prototype.redo=function(){this._lineState||de.logError("This command was never undone - nothing to redo");var e=this._model.restoreSource(!1,this._paneIndex,null,this._lineState,null);this._lineId=e.id(),delete this._lineState},inherit(v,ae),v.prototype.setPoint=function(e){this._point=e instanceof R?e.clone():TradingView.clone(e)},v.prototype.undo=function(){var e=this._model.dataSourceForId(this._sourceId);this._model.startMovingSource(e,this._point,this._pointIndex),this._model.moveSource(this._origPoint),this._model.endMovingSource()},v.prototype.redo=function(){var e=this._model.dataSourceForId(this._sourceId);this._model.startMovingSource(e,this._origPoint,this._pointIndex),this._model.moveSource(this._point),this._model.endMovingSource()},inherit(y,ae);y.prototype.undo=function(){var e=this._model.dataSourceForId(this._sourceId);this._model.changeZOrder(e,-this._shift)},y.prototype.redo=function(){var e=this._model.dataSourceForId(this._sourceId);this._model.changeZOrder(e,this._shift)},inherit(b,ae),b.prototype.undo=function(){var e=this._model.dataSourceForId(this._sourceId);this._model.bringToFront(e)},b.prototype.redo=function(){var e=this._model.dataSourceForId(this._sourceId);this._model.sendToBack(e)},inherit(S,ae),S.prototype.undo=function(){var e=this._model.dataSourceForId(this._sourceId);this._model.sendToBack(e)},S.prototype.redo=function(){var e=this._model.dataSourceForId(this._sourceId);this._model.bringToFront(e)},o.prototype.removePane=function(e,t){var i=new w(this,t,e);this.pushUndoCommand(i)},inherit(w,ae),w.prototype.redo=function(){this._model.panes().splice(this._index,1),this._chart._updateGui()},w.prototype.undo=function(){this._model.panes().splice(this._index,0,this._pane),this._chart._updateGui()},o.prototype.rearrangePanes=function(e,t,i){var o=new T(this,t,i,e);this.pushUndoCommand(o),this._onRearrangePanes.fire()},inherit(T,ae),T.prototype.redo=function(){var e=this._model.panes()[this._index];"up"===this._direction&&this._index>0&&(this._model.panes().splice(this._index,1),this._model.panes().splice(this._index-1,0,e)),
"down"===this._direction&&this._index<this._model.panes().length-1&&(this._model.panes().splice(this._index,1),this._model.panes().splice(this._index+1,0,e)),this._model.invalidate(new Y(Y.FULL_UPDATE))},T.prototype.undo=function(){var e;"up"===this._direction&&(e=this._model.panes()[this._index-1],this._model.panes().splice(this._index-1,1),this._model.panes().splice(this._index,0,e)),"down"===this._direction&&(e=this._model.panes()[this._index+1],this._model.panes().splice(this._index+1,1),this._model.panes().splice(this._index,0,e)),this._model.invalidate(new Y(Y.FULL_UPDATE))},inherit(P,ae),P.prototype.redo=function(){this._timeScaleState=this._model.timeScale().state(),this._priceScaleState=this._pane.defaultPriceScale().state(),this._model.zoomToViewport(this._startBar,this._endBar,this._startPrice,this._endPrice,this._pane)},P.prototype.undo=function(){this._model.timeScale().restoreState(this._timeScaleState),this._pane.defaultPriceScale().restoreState(this._priceScaleState),this._model.recalculateAllPanes(),this._model.invalidate(new Y(Y.LIGHT_UPDATE))},inherit(C,ae),C.prototype.undo=function(){if(this._inOut){if(this._baseCmd!==this._zoomStack.head())return void de.logDebug("zoom stack inconsistency");this._baseCmd.undo(),this._zoomStack.pop()}else this._baseCmd.redo(),this._zoomStack.push(this._baseCmd)},C.prototype.redo=function(){if(this._inOut)this._baseCmd.redo(),this._zoomStack.push(this._baseCmd);else{if(this._baseCmd!==this._zoomStack.head())return void de.logDebug("zoom stack inconsistency");this._baseCmd.undo(),this._zoomStack.pop()}},inherit(x,ae),x.prototype.redo=function(){var e=this._paneA._stretchFactor+this._paneB._stretchFactor;this._paneA._stretchFactor=this._currStretchA,this._paneB._stretchFactor=e-this._currStretchA,this._model.invalidate(new Y(Y.FULL_UPDATE))},x.prototype.undo=function(){var e=this._paneA._stretchFactor+this._paneB._stretchFactor;this._paneA._stretchFactor=this._prevStretchA,this._paneB._stretchFactor=e-this._prevStretchA,this._model.invalidate(new Y(Y.FULL_UPDATE))},inherit(E,ae),E.prototype._merge=function(e,t){var i=this._model;Z(!0),e&&(i.properties().paneProperties.merge(e.paneProperties),i.properties().scalesProperties.merge(e.scalesProperties),i.properties().symbolWatermarkProperties.merge(e.symbolWatermarkProperties)),i.mainSeries().properties().merge(t),i.mainSeries().properties().saveDefaults(),i.mainSeries().createPaneView(),i.mainSeries().invalidateBarStylesCache(),i._version=t.version,i.recalculateAllPanes(),i.invalidate(new Y(Y.FULL_UPDATE)),i.properties().saveDefaults(),i.properties().listeners().fire(this._properties),i.properties().scalesProperties.textColor.listeners().fire(i.properties().scalesProperties.textColor),i.properties().paneProperties.background.listeners().fire(i.properties().paneProperties.background),Z(!1)},E.prototype.undo=function(){this._merge(this._oldChartProps,this._oldSeriesProps),this._model.mainSeries().onChartStyleChanged(),this._model.updateScales(),this._model.chartThemeLoaded()},E.prototype.redo=function(){
this._merge(this._newChartProps,this._newSeriesProps),this._model.mainSeries().onChartStyleChanged(),this._model.updateScales(),this._model.chartThemeLoaded()},inherit(L,ae),L.prototype._merge=function(e){var t,i,o,n,r,s,a,l,c,h,u,d,p,f,_=this._model.model(),m=_.mainSeries();for(m.priceScale().properties().lockScale.setValue(!1),e.interval&&m.properties().interval.setValue(e.interval),t=[],i=_.panes(),o=i.length;o--;)for(n=i[o],r=n.containsMainSeries(),s=n.dataSources(),a=s.length;a--;)l=s[a],(!r||l instanceof ie||l instanceof F)&&(l.isRemovedByStudyTemplates()||t.push(l),_.removeSource(l));for(c=e.panes,h=function(e,t){return e.dataSources().some(function(e){return e.alert&&e.alert().id===t.alert.id})},o=0;o<c.length;o++){for(u=!1,d=c[o],a=0;a<d.sources.length;a++)l=d.sources[a],"MainSeries"===l.type&&(delete l.state,u=!0);if(n=null,n=u?i[o]:_.createPane(o),n.restoreState(c[o],!1,e.version),u)for(p=0;p<t.length;p++)t[p].restore&&t[p].restore(),(f=t[p])instanceof F&&!h(n,f)||n.dataSources().push(f);n.updateAlertLabelsSources()}m.priceScale().setAutoScale(!0),_._version=e.version,_.startNotStartedStudies(),_.recalculateAllPanes(),_.invalidate(new Y(Y.FULL_UPDATE))},L.prototype.undo=function(){this._merge(this._oldProps),this._model.model().mainSeries().onChartStyleChanged()},L.prototype.redo=function(){var e,t,i;this._merge(this._newProps),e=this._model.model(),e.mainSeries().onChartStyleChanged(),t=this._model.model().mainSeries().properties(),i=this._model.model().mainSeries().properties().priceAxisProperties,this._model._preparePriceAxisProperties(t,i),e._recalcVisibleRangeStudy(e.dataSources(),!0)},inherit(I,ae),I.prototype.redo=function(){this._cw.screen.show().done(function(){this._property.setValue(this._value,this._forceSetProperty)}.bind(this))},I.prototype.undo=function(){this._cw.screen.show().done(function(){this._property.setValue(this._prevValue,this._forceSetProperty)}.bind(this))},inherit(k,ae),k.prototype.redo=function(){var e,t,i,o,n,r,s,a,l,c,h;if(this._lineState)r=this._model.restoreSource(!1,this._paneIndex,null,this._lineState,null);else{for(e=this._originalSource,t=e.priceScale(),i=this._model.paneForSource(e),o=TradingView.className(e.constructor),n=e.properties().clone(),r=B.create(o,this._model,n,null,e.ownerSource()),r.setOwnerSource(e.ownerSource()),r.properties().visible._value=!0,r._fixedPoints=r._fixedPoints.concat(e._fixedPoints),s=0;s<r._fixedPoints.length;s++)r._fixedPoints[s]=r._fixedPoints[s].add(new R(20,20));a=e._timePoint,l=this._withoutShift?TradingView.clone(a):A(a,e.ownerSource()),c=e._points,h=c,r.restorePoints(l,h),r.cloneData&&r.cloneData(e),i.addDataSource(r,t),this._model.updateSource(r),r.checkAlert&&r.checkAlert(),this._paneIndex=this._model.panes().indexOf(i),G.drawOnAllCharts().value()&&this._model.copyToOtherCharts(r),this._lineState=r.state()}},k.prototype.undo=function(){this._lineState||de.logError("This command was never executed - nothing to undo");var e=this._model.dataSourceForId(this._lineState.id);this._model.removeSource(e)},
k.prototype.clonedLineToolId=function(){return this._lineState.id},inherit(M,ae),M.prototype.redo=function(){delete this._model.dataSourceForId(this._sourceId).linkKey},M.prototype.undo=function(){this._model.dataSourceForId(this._sourceId).linkKey=this._linkKey},inherit(O,ae),O.prototype.redo=function(){var e,t,i,o,n,r,s,a,l,c=this._model.panes()[this._paneIndex],h=c.dataSourceForId(this._clipboardData.source.ownerSource)||c.mainDataSource();this._sourceState||(e=!0,t=this._clipboardData.source.state.symbol,i=c.mainDataSource(),o=i.symbol?i.symbol():"",n=t===o,n&&(h instanceof ee&&(e=!1),h instanceof ie&&(e=!h.metaInfo().is_price_study)),r=TradingView.clone(this._clipboardData.source),delete r.state.symbol,e?(s=this._model,a=function(e){var t=e.x*s.timeScale().width(),i=e.y*h.priceScale().height();return new R(t,i)},r.points=this._clipboardData.geometry.map(function(e){var t,i=a(e),o=s.timeScale().coordinateToIndex(i.x),n=s.timeScale().normalizeBarIndex(o);return n.price=h.priceScale().coordinateToPrice(i.y),h.priceScale().isPercent()&&(t=h.firstValue(),n.price=h.priceScale().priceRange().convertFromPercent(n.price,t)),n})):this._model._id===this._clipboardData.modelId&&h.id()===this._clipboardData.source.ownerSource&&(r.points=A(this._clipboardData.source.points,h)),r.id=ne.guid(),this._sourceState=r),l=c._restoreLineTool(this._sourceState,null,!1),l.calcIsActualSymbol(),l.setOwnerSource(h),l.setPriceScale(h.priceScale()),h.priceScale().addDataSource(l),l.createServerPoints(),this._model.invalidate(new Y(Y.LIGHT_UPDATE,!0))},O.prototype.undo=function(){var e,t;this._sourceState||de.logError("This command was never executed - nothing to undo"),e=this._model.panes()[this._paneIndex],t=e.dataSourceForId(this._sourceState.id),this._model.removeSource(t)},inherit(D,ae),D.prototype.redo=function(){var e,t,i,o;this._sourceState||(e=TradingView.clone(this._clipboardData.source),e.id=ne.guid(),this._sourceState=e),t=null,i=null,this._sourceState.metaInfo.is_price_study?(t=this._model.paneForSource(this._model.mainSeries()),i=this._model.mainSeries().priceScale()):(t=this._model.createPane(),i=t.defaultPriceScale()),o=t._restoreStudy(this._sourceState),o.start(),o.setPriceScale(i),t.move(o,i)},D.prototype.undo=function(){this._sourceState||de.logError("This command was never executed - nothing to undo");var e=this._model.dataSourceForId(this._sourceState.id);this._model.removeSource(e)},inherit(V,ae),V.prototype.setPoint=function(e){this._point=e.clone(),this._handler(e)},V.prototype.point=function(){return this._point},V.prototype.undo=function(){this._handler(this._origPoint)},V.prototype.redo=function(){this._handler(this._point)},t.ChartUndoModel=o}).call(t,i(4))},function(e,t,i){"use strict";var o,n,r,s;Object.defineProperty(t,"__esModule",{value:!0}),o=i(6),n=i(9),r=i(166),s=function(e){function t(t,i,o,n){void 0===n&&(n=!0);var r=e.call(this,o,n)||this;return r._model=t,r._savedState=i.state(!0),r}return o.__extends(t,e),t.prototype.redo=function(){this._toggleState()},t.prototype.undo=function(){this._toggleState()},
t.prototype._getSource=function(){return n.ensureNotNull(this._model.dataSourceForId(this._savedState.id))},t.prototype._toggleState=function(){var e=this._getSource(),t=this._savedState;this._savedState=e.state(!0),this._model.restoreLineToolState(e,t)},t}(r.UndoCommand),t.SaveLineToolStateUndoCommand=s},function(e,t,i){"use strict";var o,n,r;Object.defineProperty(t,"__esModule",{value:!0}),o=i(6),n=i(166),r=function(e){function t(t,i,o){var n=e.call(this,o)||this;return n._source=t,n._newState=i,n._oldState=t.properties().state(),n}return o.__extends(t,e),t.prototype.redo=function(){this._source.applyTemplate(this._newState)},t.prototype.undo=function(){this._source.applyTemplate(this._oldState)},t}(n.UndoCommand),t.ApplyLineToolTemplateUndoCommand=r},function(e,t,i){"use strict";(function(t){function o(e,t){this.chart=e,this._properties=e.properties().scalesProperties,this.contextMenu=null,this._disableContextMenu=!!t,this.jqRow=$(document.createElement("tr")),this.jqLhsTimeAxisStub=$(document.createElement("td")),this.jqLhsTimeAxisStub.addClass("chart-markup-table"),this.jqLhsTimeAxisStub.appendTo(this.jqRow),this.jqLhsStub=$("<div>"),this.jqLhsStub.css("width","100%"),this.jqLhsStub.css("height","100%"),this.jqLhsStub.css("position","relative"),this.jqLhsStub.css("overflow","hidden"),this.jqLhsStub.appendTo(this.jqLhsTimeAxisStub),this.lhsCanvas=_(this.jqLhsStub,new m(16,16)),$(this.lhsCanvas).css("position","absolute"),$(this.lhsCanvas).css("z-order","2"),$(this.lhsCanvas).css("left",0),$(this.lhsCanvas).css("top",0),this.lhsCtx=this.lhsCanvas.getContext("2d"),this.jqCell=$(document.createElement("td")),this.jqCell.appendTo(this.jqRow),this.jqCell.addClass("chart-markup-table"),this.jqCell.addClass("time-axis"),this.jqCell.height(25),this._dv=$("<div>"),this._dv.css("width","100%"),this._dv.css("height","100%"),this._dv.css("position","relative"),this._dv.css("overflow","hidden"),this._dv.appendTo(this.jqCell),this.canvas=_(this._dv,new m(16,16)),$(this.canvas).css("position","absolute"),$(this.canvas).css("z-order","2"),$(this.canvas).css("left",0),$(this.canvas).css("top",0),this.ctx=this.canvas.getContext("2d"),this.top_canvas=_(this._dv,new m(16,16)),$(this.top_canvas).css("position","absolute"),$(this.top_canvas).css("z-order","1"),$(this.top_canvas).css("left",0),$(this.top_canvas).css("top",0),this.top_ctx=this.top_canvas.getContext("2d"),this.jqRhsTimeAxisStub=$(document.createElement("td")),this.jqRhsTimeAxisStub.addClass("chart-markup-table"),this.jqRhsTimeAxisStub.appendTo(this.jqRow),this.jqRhsStub=$("<div>"),this.jqRhsStub.css("width","100%"),this.jqRhsStub.css("height","100%"),this.jqRhsStub.css("position","relative"),this.jqRhsStub.css("overflow","hidden"),this.jqRhsStub.appendTo(this.jqRhsTimeAxisStub),this.rhsCanvas=_(this.jqRhsStub,new m(16,16)),$(this.rhsCanvas).css("position","absolute"),$(this.rhsCanvas).css("z-order","2"),$(this.rhsCanvas).css("left",0),$(this.rhsCanvas).css("top",0),this.rhsCtx=this.rhsCanvas.getContext("2d"),this.restoreDefaultCursor(),this.update(),
this._minVisibleSpan=b.MINUTE_SPAN,g(this.jqCell,this,!0),this.updatePriceScalesVisibility()}var n,r,s,a,l,c,h,u,d,p,f,_,m,g,v,y,b;i(1021),n=i(446).PriceAxisWidget,r=i(1).LineDataSource,s=i(258),a=i(74),l=a.ActionSeparator,c=i(154),h=i(40),u=i(153),d=u.resizeCanvas,p=u.hardResizeCanvas,f=u.clearRect,_=u.addCanvasTo,m=u.Size,g=i(192).setMouseEventHandler,v=i(20).trackEvent,y=i(259).makeFont,b=i(512),o.prototype._BORDER_SIZE=1,o.prototype._OFFSET_SIZE=1,o.prototype._TICK_LENGTH=3,o.prototype.backgroundColor=function(){return this.chart.properties().paneProperties.background.value()},o.prototype.lineColor=function(){return this._properties.lineColor.value()},o.prototype.textColor=function(){return this._properties.textColor.value()},o.prototype.fontSize=function(){return this._properties.fontSize.value()},o.prototype.baseFont=function(){return y(this.fontSize(),"Arial","")},o.prototype.baseBoldFont=function(){return y(this.fontSize(),"Arial","bold")},o.prototype.rendererOptions=function(){var e,t;return this._rendererOptions||(this._rendererOptions={borderSize:this._BORDER_SIZE,offsetSize:this._OFFSET_SIZE,tickLength:this._TICK_LENGTH,fontSize:NaN,font:"",widthCache:new s}),e=this._rendererOptions,e.fontSize!==this.fontSize()&&(t=this.fontSize(),e.fontSize=t,e.font=this.baseFont(),e.paddingTop=Math.ceil(Math.max(t/4.5-e.tickLength/2,0)),e.paddingBottom=Math.ceil(t/4.5),e.paddingHorizontal=Math.ceil(t/3),e.baselineOffset=Math.round(this.fontSize()/10),e.widthCache.reset()),this._rendererOptions},o.prototype.updatePriceScalesVisibility=function(){var e=this.chart.properties().scalesProperties;e.showLeftScale.value()?this.jqLhsTimeAxisStub.css("display","table-cell"):this.jqLhsTimeAxisStub.css("display","none"),e.showRightScale.value()?this.jqRhsTimeAxisStub.css("display","table-cell"):this.jqRhsTimeAxisStub.css("display","none")},o.prototype.mouseDownEvent=function(e){if(this._mousedown||!t.enabled("chart_zoom"))return!0;this._mousedown=!0;var i=this.chart.model();i.timeScale().isEmpty()||(this.setCursor("ew-resize"),i.startScaleTime(e.localX))},o.prototype.mouseDownOutsideEvent=function(e){var t=this.chart.model();!t.timeScale().isEmpty()&&this._mousedown&&(this._mousedown=!1,t.endScaleTime(),this.restoreDefaultCursor())},o.prototype.pressedMouseMoveEvent=function(e){var t,i,o=this.chart.model();o.timeScale().isEmpty()||(t=!1,i=(new Date).valueOf(),this._lastScrollScaleTime&&i-this._lastScrollScaleTime<100&&(t=!0),t||(o.scaleTimeTo(e.localX),this._lastScrollScaleTime=i))},o.prototype.mouseUpEvent=function(e){this._mousedown=!1;var t=this.chart.model();t.timeScale().isEmpty()||(t.endScaleTime(),this.restoreDefaultCursor())},o.prototype.contextMenuEvent=function(e,i){!this._disableContextMenu&&t.enabled("scales_context_menu")&&this._createContextMenu().show(e)},o.prototype._createContextMenu=function(){return c.createMenu(this.getContextMenuActions(),{statName:"TimeScaleContextMenu"})},o.prototype.getContextMenuActions=function(){var e,i,o=this.chart;return o.model().mainSeries().createSessStudy(),o.updateActions(),
e=o.actions(),i=t.enabled("charting_library_base")?[e.timeScaleReset,new l,e.applyTimeZone,e.sessionBreaks]:[e.timeScaleReset,new l,e.applyTimeZone,e.sessionBreaks,e.extendedHours],t.enabled("timezone_menu")||i.splice(2,1),t.enabled("show_chart_property_page")&&t.enabled("chart_property_page_timezone_sessions")&&e.tmzProperties&&i.push(new l,e.tmzProperties),i},o.prototype.mouseClickEvent=function(e){},o.prototype.mouseDoubleClickEvent=function(e){v("GUI","Double click time scale"),this.chart.model().resetTimeScale()},o.prototype.optimalHeight=function(){var e=this.rendererOptions();return Math.ceil(e.offsetSize+e.borderSize+e.tickLength+e.fontSize+e.paddingTop+e.paddingBottom)},o.prototype.setSize=function(e,t,i){this.size&&this.size.equals(e)||(this.lhsStubSize=t,d(this.lhsCanvas,t),this.jqLhsTimeAxisStub.width(t.w),this.jqLhsTimeAxisStub.height(t.h),this.rhsStubSize=i,d(this.rhsCanvas,i),this.jqRhsTimeAxisStub.width(i.w),this.jqRhsTimeAxisStub.height(i.h),this.size=e,d(this.canvas,e),d(this.top_canvas,e),this.lhsCanvas.getContext("2d"),this.rhsCanvas.getContext("2d"),this.canvas.getContext("2d"),this.top_canvas.getContext("2d"),this.jqCell.width(e.w),this.jqCell.height(e.h))},o.prototype._spanIndex=function(e){for(var t=[b.MINUTE_SPAN,b.HOUR_SPAN,b.DAY_SPAN,b.MONTH_SPAN,b.YEAR_SPAN],i=t.length-1;i>0;){if(t[i]<=e)return i;i--}return i},o.prototype._spanOffset=function(e,t){if(t<e)throw Error("actual span cuold not be less then base");return this._spanIndex(t)-this._spanIndex(e)},o.prototype.update=function(){var e,t;this.chart.model()&&(e=this.chart.model().timeScale().marks())&&(t=this,this._minVisibleSpan=b.YEAR_SPAN,$.each(e,function(){t._minVisibleSpan=Math.min(this.span,t._minVisibleSpan)}))},o.prototype._hightlightBackground=function(e,t){var i,o,n,r,s=this.chart.model(),a=s.timeScale(),l=t[0].index,c=t[0].index;for(i=1;i<t.length;i++)l=Math.min(l,t[i].index),c=Math.max(c,t[i].index);o=a.indexToCoordinate(l),n=a.indexToCoordinate(c),r="rgba(109, 158, 235, 0.3)",f(e,o,1,n-o,this.size.h-1,r)},o.prototype.drawBackground=function(e){var t,i,o,n,s;if(f(e,0,0,this.size.w,this.size.h,this.backgroundColor()),t=this.chart.model()){if(i=t.timeScale(),(o=t.model().selectedSource())&&o instanceof r&&!i.isEmpty()){if(n=o.axisPoints(),0===n.length)return;this._hightlightBackground(e,n)}s=t.model().crossHairSource(),s.startMeasurePoint()&&this._hightlightBackground(e,s.measurePoints())}},o.prototype.drawBorder=function(e){e.save(),e.fillStyle=this.lineColor(),e.fillRect(-.5,.5,this.size.w+.5,this._BORDER_SIZE),e.restore()},o.prototype.drawStubs=function(){var e,t=this._BORDER_SIZE,i=2*this._BORDER_SIZE,o=this.lhsCtx;f(o,0,0,this.lhsStubSize.w,this.lhsStubSize.h,this.backgroundColor()),o.fillStyle=this.lineColor(),o.fillRect(this.lhsStubSize.w-i-.5,.5,i,t),o.fillRect(this.lhsStubSize.w-i-.5,-.5,t,t),e=this.rhsCtx,f(e,0,0,this.rhsStubSize.w,this.rhsStubSize.h,this.backgroundColor()),e.fillStyle=this.lineColor(),e.fillRect(-.5,.5,i,t),e.fillRect(.5,-.5,t,t)},o.prototype.drawTickMarks=function(e){
var t,i,o,n,r,s,a,l,c,h,u,d=this.chart.model().timeScale().marks();if(d&&0!==d.length){for(t=d.reduce(function(e,t){return e.span>t.span?e:t},d[0]).span,t>30&&t<40&&(t=30),e.save(),e.strokeStyle=this.lineColor(),i=this.rendererOptions(),o=i.borderSize+i.tickLength+i.paddingTop+i.fontSize-i.baselineOffset,e.textAlign="center",e.translate(.5,.5),e.fillStyle=this.lineColor(),e.beginPath(),n=d.length;n--;)e.rect(d[n].coord,i.borderSize,1,i.tickLength);for(e.fill(),e.fillStyle=this.textColor(),r={},s=this.baseFont(),a=this.baseBoldFont(),n=0;n<d.length;n++)l=d[n].span>=t?a:s,c=r[l]||[],c.push(d[n]),r[l]=c;for(h in r)for(e.setFont(h),u=r[h],n=0;n<u.length;n++)e.fillText(u[n].label,u[n].coord,o);e.restore()}},o.prototype.drawBackLabels=function(e){var t,i,o,n,r,s,a,l;for(e.save(),t=this.chart.model().dataSources(),i=this.chart.model(),o=i.sourceBeingMoved()||i.lineBeingEdited()||i.lineBeingCreated(),n=this.rendererOptions(),r=0;r<t.length;r++)if((s=t[r])!==this.chart.model().crossHairSource()&&s!==o&&s.timeAxisViews&&(a=s.timeAxisViews()))for(l=0;l<a.length;l++)a[l].renderer().draw(e,n);e.restore()},o.prototype.drawCrossHairLabel=function(e){var t,i,o,n,r;if(this.top_ctx.clearRect(-.5,-.5,this.size.w,this.size.h),t=this.chart.model(),i=t.sourceBeingMoved()||t.lineBeingEdited()||t.lineBeingCreated(),o=this.rendererOptions(),i){if(e.save(),i.timeAxisViews&&(n=i.timeAxisViews()))for(r=0;r<n.length;r++)n[r].renderer().draw(e,o);return void e.restore()}if(e.save(),n=this.chart.model().crossHairSource().timeAxisView())for(r=0;r<n.length;r++)n[r].renderer().draw(e,o);e.restore()},n.prototype.hardResetCanvas=function(){this.size&&(p(this.canvas,this.size),p(this.top_canvas,this.size))},o.prototype.paint=function(e){if(0!==e)if(e===h.UPDATE_CURSOR_ONLY)this.drawCrossHairLabel(this.top_ctx);else{var t=this.ctx;this.drawBackground(t),this.drawBorder(t),this.drawStubs(),this.chart.model()&&(this.drawTickMarks(t),this.drawBackLabels(t),this.drawCrossHairLabel(this.top_ctx))}},o.prototype.setStubVisible=function(e,t){var i=n.isLeft(e)?this.jqLhsTimeAxisStub:this.jqRhsTimeAxisStub;t?i.css("display","table-cell"):i.css("display","none")},o.prototype.restoreDefaultCursor=function(){this.setCursor("")},o.prototype.setCursor=function(e){var t="";"grabbing"!==e&&"ew-resize"!==e||(t="time-axis--cursor-"+e),this._currentCursorClassName!==t&&(this._currentCursorClassName&&this.jqCell.removeClass(this._currentCursorClassName),t&&this.jqCell.addClass(t),this._currentCursorClassName=t,this.jqCell.css("cursor"))},o.prototype.image=function(){var e={};return e.content=this.canvas.toDataURL(),e.contentWidth=this.size.w,e.contentHeight=this.size.h,e.lhsStub={},e.lhsStub.content=this.lhsCanvas.toDataURL(),e.lhsStub.contentWidth=this.lhsStubSize.w,e.lhsStub.contentHeight=this.lhsStubSize.h,e.rhsStub={},e.rhsStub.content=this.rhsCanvas.toDataURL(),e.rhsStub.contentWidth=this.rhsStubSize.w,e.rhsStub.contentHeight=this.rhsStubSize.h,e},e.exports=o}).call(t,i(3))},function(e,t){},function(e,t,i){"use strict";(function(t){function o(e){this.chartWidget=e,
this.props=this.chartWidget.model().mainSeries().properties(),this.studies=[],this.chartWidget.withModel(this,function(){this.init()})}var n=i(86).ESDStudyBase,r=i(39),s=i(0).getLogger("Chart.ESDTimeLineWidget");o.prototype.getStudy=function(e,t){var i,o=this.chartWidget.model().dataSources().some(function(o){var n,r;return o instanceof TradingView.Study&&(n=o.metaInfo(),r=n.scriptIdPart===e,r&&t&&(i=o),r)});return t?i:!!o},o.prototype.metaInfosCache={},o.prototype.init=function(){var e,i;t.enabled("widget")&&!t.enabled("esdonwidget")||(this.studies=this.getStudies(),e={esdShowDividends:"TV_DIVIDENDS",esdShowSplits:"TV_SPLITS",esdShowEarnings:"TV_EARNINGS"},i=this,Object.keys(e).forEach(function(t){var o=e[t];i.props[t].subscribe(i,function(e){var t=i.metaInfosCache[o],n=i.getStudy(t.scriptIdPart,!0);e.value()?t&&!n&&i.insertStudy(t):t&&n&&i.chartWidget.model().chartModel().removeSource(n)})}),this.studies.forEach(function(e){var t,o;i.metaInfosCache[e.scriptIdPart]=e,t=!!n.getSettingsValue(e.scriptIdPart,i.props),o=i.getStudy(e.scriptIdPart,!0),o&&i.chartWidget.model().chartModel().removeSource(o),t&&i.insertStudy(e)}))},o.prototype.getStudies=function(){var e=this.chartWidget._studiesMetaData;return $.grep(e,function(e){if(/^TV_/.test(e.scriptIdPart))return!0})},o.prototype.insertStudy=function(e){var t,i=this.chartWidget;i&&(t=r.replaceWithFullStudyMetaInfoAsync(i.model().studiesMetaData(),e),t.done(function(e){i.insertStudy(e.id,!1,!0)}),t.fail(function(e){s.logError("Error: "+e)}))},e.exports=o}).call(t,i(3))},function(e,t,i){"use strict";function o(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i={closeOnOutsideClick:!1,mode:"signin",from:"\n\t\t\t<p>"+$.t("{0} data for {1} is only available to registered users.").format(t?$.t("Realtime"):$.t("Delayed"),e)+"</p>\n\t\t\t<p>"+$.t("Please log in or sign up to continue!")+"</p>\n\t\t",actions:[{name:"yes",type:"primary",text:$.t("Get started")},{name:"no",type:"link",text:$.t("No thanks"),class:"tv-button tv-button--link tv-button--no-padding i-float_left",method:"close"}]};return(0,n.createGoRegistrateDialog)(i)}Object.defineProperty(t,"__esModule",{value:!0}),t.createGoRegistrateForUnavailableExchangesDialog=o;var n=i(225)},function(e,t,i){"use strict";function o(e){var t,i;if(e&&e.__esModule)return e;if(t={},null!=e)for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{delayUpdate:[{line:{text:$.t("You have access to extra real-time data from {0}.").format(t.exchange),listItem:!0}},{line:$.t("We recommend you switch to it using Symbol Search.")}],delay:[{line:{text:$.t("Data delayed by {0} min.").format(t.time),listItem:!0}},{line:$.t("Want real-time data and more features?")},{link:{href:"/gopro/#markets",class:"js-delay-popup",text:b}}],chxeurUpdate:[{line:{
text:$.t("You have access to extra real-time data from {0}.").format(t.exchange),listItem:!0}},{line:$.t("We recommend you switch to it using Symbol Search.")}],batsUpdate:[{line:{text:$.t("You have access to extra real-time data from {0}.").format(t.exchange),listItem:!0}},{line:$.t("Refresh the page to switch to symbols from those exchanges.")}]}[e]}function a(e,t){var i=[],o=!1,n={BMFBOVESPA:"BOVESPA"},r=n[e.exchange]||e.exchange;return pro.offers().forEach(function(e){return o=o||e==="exchange-"+r.toLowerCase()}),i=o?s("delayUpdate",{exchange:r}):s("delay",{time:Math.round(t/60)}),{msg:i}}function l(e){var t=[],i={BME:{name:"BME",pro_offer:"exchange-bme",country:"Spanish"},EURONEXT:{name:"EURONEXT",pro_offer:"exchange-euronext_stocks",country:"European"},LSE:{name:"LSE",pro_offer:"exchange-lse",country:"UK"},LSIN:{name:"LSIN",pro_offer:"exchange-lsin",country:"UK"},SWX:{name:"SIX",pro_offer:"exchange-six",country:"Swiss"}},o=Object.keys(i).find(function(t){return e[e.length-1].includes(t)}),n=i[o];return n&&(t=window.is_authenticated&&n.pro_offer&&pro.offers().includes(n.pro_offer)?s("chxeurUpdate",{exchange:n.name}):S.chxeur),{exchange:n,msg:t}}function c(e){return window.is_authenticated&&pro.offers().includes("exchange-"+e.toLowerCase())?s("batsUpdate",{exchange:e}):S.bats}var h,u,d,p,f,_,m,g,v,y,b,S;Object.defineProperty(t,"__esModule",{value:!0}),t.ChartIndicatorTooltip=void 0,h=function(){function e(e,t){var i,o;for(i=0;i<t.length;i++)o=t[i],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),u=i(95),d=n(u),p=i(3),f=n(p),_=i(32),m=o(_),g=i(27),v=i(43),y=o(v),b=$.t("Learn more"),S={tickByTick:[{line:{text:$.t("Want tick by tick push data?"),listItem:!0}},{line:$.t("Included in any upgraded plan!")},{link:{href:"/gopro/",class:"js-tbt-popup",text:b}}],eod:[{line:{text:$.t("This is End Of Day data, updates once a day."),listItem:!0}},{line:$.t("Want real-time data and more features?")},{link:{href:"/gopro/#markets",class:"js-eod-popup",text:b}}],bats:[{line:{text:$.t("Data provided by BATS exchange."),listItem:!0}},{line:$.t("Want premium data and more features?")},{link:{href:"/gopro/#markets",class:"js-bats-popup",text:b}}],chxeur:[{line:{text:$.t("Data provided by CHXEUR exchange."),listItem:!0}},{line:$.t("Want extra data and more features?")},{link:{href:"/gopro/#markets",class:"js-chxeur-popup",text:b}}]},t.ChartIndicatorTooltip=function(){function e(t){var i=t.chartWidget,o=t.wrapElement;r(this,e),this._lollipopTooltip=null,this._chartWidget=i,this._wrapElement=o}return h(e,[{key:"_initTooltipContent",value:function(){var e,t,i,o,n,r,s,h,u,p,_,v=this._chartWidget.model();return v?(e=v.mainSeries(),t=e.status(),i=e.symbolInfo(),o=[{line:{isEmpty:!0}}],n=!0,r=[],s=t===m.STATUS_LOADING||t===m.STATUS_REPLAY,
i&&e.quoteData&&!s&&(f.default.enabled(g.ProductFeatures.TICK_BY_TICK_PUSH_DATA)||i.delay||d.default.hasEodSymbols(i.full_name)||"endofday"===e.quoteData.update_mode||"bitcoin"===i.type||(n=!1,S.tickByTick.forEach(function(e){return o.push(e)}),r.push(function(){$(".js-tbt-popup").on("click",function(e){e.preventDefault(),y.createGoProDialog({feature:"DataQualityPopup",goOnMarkets:!1}).then(function(e){e.open()})})})),i.delay&&pro.hasRealtimeForExchange(i.listed_exchange)&&(h=900,n=!1,e&&(h=e.quoteData.update_mode_seconds||h),u=a(i,h),u.msg.forEach(function(e){return o.push(e)}),r.push(function(){$(".js-delay-popup").on("click",function(e){e.preventDefault(),y.createGoProDialog({feature:"FreeDelayPopup",forceUpgradeBtn:!0,goOnMarkets:!0}).then(function(e){e.open()})})})),d.default.hasEodSymbols(i.full_name)&&(n=!1,S.eod.forEach(function(e){return o.push(e)}),r.push(function(){$(".js-eod-popup").on("click",function(e){e.preventDefault(),y.createGoProDialog({forceUpgradeBtn:!0,goOnMarkets:!0}).then(function(e){e.open()})})})),d.default.hasBatsSymbols(i.full_name)&&(n=!1,p=c(i.listed_exchange),p.forEach(function(e){return o.push(e)}),r.push(function(){$(".js-bats-popup").on("click",function(e){e.preventDefault();var t={exchange:i.listed_exchange,cost:pro.getProduct("exchange-"+i.listed_exchange.toLowerCase()).cost};y.createGoProDialog({feature:"BATSExchangePopup",forceUpgradeBtn:!0,goOnMarkets:!0,customParams:t}).then(function(e){e.open()})})})),d.default.hasChxeurSymbols(i.full_name)&&i.aliases.length&&(_=l(i.aliases),_.msg.length&&(n=!1,_.msg.forEach(function(e){return o.push(e)}),r.push(function(){$(".js-chxeur-popup").on("click",function(e){var t,i;e.preventDefault(),t=_.exchange,i={exchange:t.name,cost:pro.getProduct(t.pro_offer).cost,country:t.country},y.createGoProDialog({feature:"CHXEURExchangePopup",forceUpgradeBtn:!0,goOnMarkets:!0,customParams:i}).then(function(e){e.open()})})})))),{data:o,isEmptyResult:n,tooltipClickHandler:r}):{data:[],isEmptyResult:!0}}},{key:"show",value:function(){var e,t;this._lollipopTooltip||(e=this._chartWidget.indicatorImage,t=this,new Promise(function(e){e()}).then(function(o){var n=i(260),r=n.Tooltip,s=t._initTooltipContent();t._lollipopTooltip=new r({direction:"bottom",clickable:!0,wide:!0}),t._lollipopTooltip.show({items:[{lines:s.data,importance:"list"}],x:t._wrapElement.width()-e.width()-parseInt(e.css("marginRight"))+8,y:40,wrapElement:t._wrapElement}),s.tooltipClickHandler.forEach(function(e){return e()})}.bind(null,i)).catch(i.oe))}},{key:"hide",value:function(){this._lollipopTooltip&&(this._lollipopTooltip.hide(),this._lollipopTooltip=null)}},{key:"isOpened",value:function(){return!!this._lollipopTooltip&&this._lollipopTooltip.isOpened()}},{key:"toggle",value:function(){this.isOpened()?this.hide():this.show()}},{key:"toggleIndicator",value:function(e){var t,i;if(this._lollipopTooltip&&this.hide(),this._chartWidget=e,this._chartWidget.model()&&(t=this._chartWidget.indicatorImage))return i=t.find(".chart-warning"),
i.toggleClass("warn-exchange",!this._initTooltipContent(this._chartWidget).isEmptyResult),this._initTooltipContent(this._chartWidget).isEmptyResult}}]),e}()},function(e,t,i){"use strict";var o=i(1026).create,n=i(38).isOpenedModals,r=i(93),s=i(20).trackEvent;t.showAgreementDialog=function(e,t){if(e=e&&e.toLowerCase()){var i=function(){(t||void 0===t)&&r.symbol.setValue(DEFAULT_SYMBOL,!0)};if(n())return i();o({exchange:e}).open().on("afterOpen",function(){s("IDC Delay","Dialog Shown",e)}).on("afterClose",function(){i()}).on("action:sign-agreement",function(){window.saver.saveChartSilently(null,!1),s("IDC Delay","Go on Agreement",e)})}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i(6).__exportStar(i(1027),t)},function(e,t,i){"use strict";function o(e){var t=e.exchange,i={width:400,type:"modal",destroyOnClose:!0,closeOnEsc:!1,closeOnOutsideClick:!1,title:window.t("Exchange Agreement Need To Be Filled Out"),content:"\n\t\t\t<p>\n\t\t\t\t"+window.t("It seems that you are missing a few exchange agreements, which need to be filled out in order to get data from {0}. Please complete this simple step with a few clicks.").format(t.toUpperCase())+"\n\t\t\t</p>\n\t\t",addClass:"tv-dialog--width",actionsWrapTemplate:'<div class="tv-dialog__section tv-dialog__section--actions tv-dialog__section--actions_centered tv-dialog__section--no-border">',actions:[{name:"sign-agreement",method:"sign-agreement",type:"primary",text:window.t("Fill Out Agreement")}]},o=n.createDialog(Object.assign(i,e));return o.on("action:sign-agreement",function(t){location.href="/idc-sign-agreement/"+e.exchange.toLowerCase()+"/"}),o}Object.defineProperty(t,"__esModule",{value:!0}),i(5),i(28);var n=i(56);t.create=o},function(e,t,i){"use strict";var o=i(1029).create,n=i(38).isOpenedModals,r=i(93),s=i(20).trackEvent,a=i(64).fetch;t.showAddServiceDialog=function(e,t){return new Promise(function(i,l){var c,h;if(e=e&&e.toLowerCase()){if(c=function(){(t||void 0===t)&&r.symbol.setValue(DEFAULT_SYMBOL,!0)},n())return c();h=!1,o({exchange:e}).open().on("afterOpen",function(){s("IDC Add Delay Service","Dialog Shown",e)}).on("afterClose",function(){h||(c(),l())}).on("action:add-service",function(t){s("IDC Add Delay Service","Agreed",e),h=!0,t.destroy(),a("/idc-add-delay-service/"+e+"/",{credentials:"include"}).then(function(e){return e.json()}).then(function(t){"OK"===t.res?(pro.invalidateShopConf(),pro.updateShopConf(),i(e)):(c(),l())})})}})}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i(6).__exportStar(i(1030),t)},function(e,t,i){"use strict";function o(e){return n.createDialog(Object.assign(r,e))}var n,r;Object.defineProperty(t,"__esModule",{value:!0}),i(5),n=i(56),r={width:400,type:"modal",destroyOnClose:!0,closeOnEsc:!1,closeOnOutsideClick:!1,title:window.t("Exchange Agreement Need To Be Updated"),
content:"\n\t\t<p>\n\t\t\t"+window.t("Looks like you are trying to get data from the exchange, which is not currently included in the agreement. We can add it to the agreement on the free basis.")+"\n\t\t</p>\n\t",addClass:"tv-dialog--width",actionsWrapTemplate:'<div class="tv-dialog__section tv-dialog__section--actions tv-dialog__section--actions_centered tv-dialog__section--no-border">',actions:[{name:"add-service",method:"add-service",type:"primary",text:window.t("I agree")}]},t.create=o},function(e,t,i){"use strict";var o,n,r,s,a,l;Object.defineProperty(t,"__esModule",{value:!0}),i(5),i(28),o=i(67),n=i(165),r="AAPL",s=$.t("The symbol available only on {0}TradingView{1}."),a="https://www.tradingview.com{0}?utm_source=www.tradingview.com&utm_medium=widget&utm_campaign=chart&utm_term={2}:{1}",l=function(){function e(e){this._lastResolvedSymbol=null,this._chart=e,this._chart.withModel(this,this._connectToModel)}return e.prototype.show=function(){var e=this,t=this._getSymbol(),i=this._chart.defaultSymbol(),l=t.split(":"),c=l[0],h=l[1],u=a.format(n.getSymbolPagePath({proName:this._getProSymbol()}),h,c),d=o.createNoticeDialog({content:s.format('<a target="_blank" href="'+u+'">',"</a>")});d.on("destroy",function(){var o;o=e._lastResolvedSymbol?e._lastResolvedSymbol:i!==t?i:r,e._chart.setSymbol(o)}),d.open()},e.prototype._getProSymbol=function(){return this._chart.model().mainSeries().proSymbol()},e.prototype._getSymbol=function(){return this._chart.model().mainSeries().actualSymbol()},e.prototype._connectToModel=function(){var e=this._chart.model(),t=e.mainSeries();t.onSymbolResolved().subscribe(this,this._onSymbolResolved),t.onSymbolGroupNotPermitted().subscribe(this,this.show),t.onSymbolNotPermitted().subscribe(this,this.show)},e.prototype._onSymbolResolved=function(){this._lastResolvedSymbol=this._getSymbol()},e}(),t.AvailableOnTVPopup=l},function(e,t,i){"use strict";function o(e,t,i){this._chart=e,this._parent=t,this.zoom_active=!1,this._real=i,this._state="stop",this._controlBarVisible=!1,this._boundMouseHandler=null,this._pressedKey={},this._checkIntId=0,this.init(),i&&this.initToRealChart(),this.initHandlers()}var n=i(40),r=i(536);o.prototype.init=function(){this._widget=$('<div class="control-bar-wrapper">'),this._controlBar=$('<div class="control-bar control-bar--hidden">').append($(i(238)).attr("class","move-left-button-control-bar")).append($(i(1033)).attr("class","zoom-out-right-button-control-bar")).append($(i(1034)).attr("class","turn-button-control-bar")).append($(i(1035)).attr("class","zoom-in-button-control-bar")).append($(i(257)).attr("class","move-right-button-control-bar")).appendTo(this._widget),this._buttons={zoomIn:this._widget.find(".zoom-in-button-control-bar"),zoomOut:this._widget.find(".zoom-out-right-button-control-bar"),moveLeft:this._widget.find(".move-left-button-control-bar"),moveRight:this._widget.find(".move-right-button-control-bar"),turn:this._widget.find(".turn-button-control-bar")},this._initVisibility(),this._widget.appendTo(this._parent)},o.prototype.destroy=function(){
this._visibilityTypeProperty&&(this._visibilityTypeProperty.unsubscribe(this,this._onVisibilityTypeChange),this._visibilityTypeProperty=null),this._boundMouseHandler&&(this._parent[0].removeEventListener("mousemove",this._boundMouseHandler,!1),this._parent[0].removeEventListener("mouseleave",this._boundMouseHandler,!1),this._boundMouseHandler=null),this._boundKeydownHandler&&(this._parent[0].ownerDocument.removeEventListener("keydown",this._boundKeydownHandler),this._boundKeydownHandler=null),this._boundKeyupHandler&&(this._parent[0].ownerDocument.removeEventListener("keyup",this._boundKeyupHandler),this._boundKeyupHandler=null),clearTimeout(this._movingTimeout),this._onRHSPriceAxisWidth&&(this._chart.rhsPriceAxisWidthChanged.unsubscribe(this,this._onRHSPriceAxisWidth),this._onRHSPriceAxisWidth=null),this._chart&&this._chart.model()&&this._chart.model().model().clearInterval(this._checkIntId),this._chart=null},o.prototype._initVisibility=function(){this._visibilityTypeProperty=r.actualBehavior(),this._visibilityTypeProperty.subscribe(this,this._onVisibilityTypeChange),this._onVisibilityTypeChange()},o.prototype._onVisibilityTypeChange=function(){var e=this._visibilityTypeProperty.value();"alwaysOn"===e||"alwaysOff"===e?(this._controlBarVisible="alwaysOn"===e,this._boundMouseHandler&&(this._parent[0].removeEventListener("mousemove",this._boundMouseHandler,!1),this._parent[0].removeEventListener("mouseleave",this._boundMouseHandler,!1),this._boundMouseHandler=null)):(this._controlBarVisible=!1,this._boundMouseHandler||(this._boundMouseHandler=this._visibilityMouseHandler.bind(this),this._parent[0].addEventListener("mousemove",this._boundMouseHandler,!1),this._parent[0].addEventListener("mouseleave",this._boundMouseHandler,!1))),this._updateControlBarVisibility()},o.prototype._visibilityMouseHandler=function(e){var t,i,o,n;e.buttons||(t=this._chart.model())&&t.lineBeingCreated()||(i=!1,o=100,"mousemove"===e.type&&(n=this._widget[0].getBoundingClientRect(),i=e.clientX>=n.left-o&&e.clientX<=n.right+o&&e.clientY>=n.top-o&&e.clientY<=n.bottom+o),this._controlBarVisible!==i&&(this._controlBarVisible=i,this._rafId||(this._rafId=this._controlBar[0].ownerDocument.defaultView.requestAnimationFrame(this._updateControlBarVisibility.bind(this)))))},o.prototype._updateControlBarVisibility=function(){this._rafId=void 0,this._controlBar[0].classList.toggle("control-bar--hidden",!this._controlBarVisible)},o.prototype.initToRealChart=function(){var e=this;this._back=$(i(1036)).attr({class:"back-to-present js-hidden"}).appendTo(this._parent),this._backButtonVisible=!1,this._back.on("click",function(){e._chart.model().timeScale().scrollToRealtime(!0),e._chart.model().model()._invalidateHandler(new n(n.FULL_UPDATE))}),this._onRHSPriceAxisWidth=function(){var t=e._chart.maxRhsPriceAxisWidth+4;t&&e._back.css("marginRight",t)},this._chart.rhsPriceAxisWidthChanged.subscribe(this,this._onRHSPriceAxisWidth),this._onRHSPriceAxisWidth(),this._chart.withModel(this,function(){
this._chart&&(this._checkIntId=this._chart.model().model().setInterval(function(){e.check()},1e3))})},o.prototype.check=function(){var e=this._chart.model(),t=!!e&&e.timeScale().rightOffset()<0;t!==this._backButtonVisible&&(this._backButtonVisible=t,this._backButtonVisible?this._back.attr("class","back-to-present"):this._back.attr("class","back-to-present js-hidden"))},o.prototype._move=function(e){var t,i;"stop"===this._state&&this._chart.model().beginUndoMacro(1===e?"Move Left":"Move Right"),this._state="moving",this._moveType="animated",this._deferredFinishTimeout&&(clearTimeout(this._deferredFinishTimeout),this._deferredFinishTimeout=0),this._finishingTimeout&&(clearTimeout(this._finishingTimeout),this._finishingTimeout=0),this._startTime=+new Date,this._movingTimeout||(t=this._startTime,i=10,this._movingTimeout=setTimeout(function o(){this._moveStep.call(this,t,0,50*e,1e3),this._movingTimeout=setTimeout(o.bind(this),i)}.bind(this),i))},o.prototype._moveStep=function(e,t,i,o){var n,r,s;if(!this._chart.model().timeScale().isEmpty())return n=Date.now(),n<e&&(e=n),r=(n-e)/o,(r>1||!isFinite(r))&&(r=1),s=1-Math.pow(1-r,3),this.currentDistance=(i-t)*s+t,this._chart.model().scrollChart(this.currentDistance),r},o.prototype._finishMove=function(e){var t,i;clearTimeout(this._movingTimeout),this._movingTimeout=0,this._deferredFinishTimeout=0,t=this.currentDistance,i=+new Date,this._finishingTimeout=setTimeout(function e(){this._moveStep.call(this,i,t,0,700)<1?this._finishingTimeout=setTimeout(e.bind(this),10):(this._state="stop",this._moveType="",this._movingTimeout=0,this.currentDistance=0,this._chart.model().endUndoMacro())}.bind(this),10)},o.prototype._stopMove=function(e){"moving"===this._state&&(this._state="wait_finishing",(new Date).getTime()-this._startTime<200?this._deferredFinishTimeout=setTimeout(this._finishMove.bind(this),200-((new Date).getTime()-this._startTime)):this._finishMove())},o.prototype._moveByBar=function(e){var t,i,o,n,r=this._chart.model().timeScale();r.isEmpty()||("stop"===this._state&&this._chart.model().beginUndoMacro(1===e?"Move Left":"Move Right"),t=r.indexToCoordinate(r.visibleBars().lastBar())+r.barSpacing()/2,Math.abs(r.width()-t)>r.barSpacing()/6&&this._chart.model().scrollChart(r.width()-t),this._state="moving",this._moveType="by_bar",this._startTime=+new Date,this._movingTimeout||(i=400,o=150,n=0,this._movingTimeout=setTimeout(function t(){this._moveByBarStep(e),n++,o>100&&(o-=n/5*20),this._movingTimeout=setTimeout(t.bind(this),o)}.bind(this),i),this._moveByBarStep(e)))},o.prototype._moveByBarStep=function(e){this._chart.model().timeScale().isEmpty()||this._chart.model().scrollChartByBar(e)},o.prototype._stopMoveByBar=function(e){"moving"===this._state&&(clearTimeout(this._movingTimeout),this._movingTimeout=0,this._state="stop",this._moveType="",this._movingTimeout=0,this.currentDistance=0,this._chart.model().endUndoMacro())},o.prototype._keydownHandler=function(e){if(!e.metaKey&&!(37!==e.which&&39!==e.which||this._pressedKey[e.which]||(this._pressedKey[e.which]=!0,
$(e.target).closest("input, textarea").length))){var t=37===e.which?1:-1;e.ctrlKey||e.altKey?this._move(t):this._moveByBar(t),e.preventDefault()}},o.prototype._keyupHandler=function(e){37!==e.which&&39!==e.which||$(e.target).closest("input, textarea").length||(this._pressedKey[e.which]=!1,"by_bar"===this._moveType?this._stopMoveByBar():this._stopMove())},o.prototype.initHandlers=function(){var e=this._chart,t=Modernizr.touch?"touchstart":"mousedown",i=Modernizr.touch?"touchend":"mouseup mouseout";this._buttons.moveLeft.on(t,this._moveByBar.bind(this,1)),this._buttons.moveLeft.on(i,this._stopMoveByBar.bind(this,1)),this._buttons.moveRight.on(t,this._moveByBar.bind(this,-1)),this._buttons.moveRight.on(i,this._stopMoveByBar.bind(this,-1)),this._buttons.moveLeft.on("click",function(e){e.preventDefault()}),this._buttons.moveRight.on("click",function(e){e.preventDefault()}),this._buttons.turn.on("click",function(t){t.preventDefault(),e.GUIResetScales()}),this._buttons.zoomOut.on("click",function(t){t.preventDefault(),e.model()&&e.model().zoomOut()}),this._buttons.zoomIn.on("click",function(t){t.preventDefault(),e.model()&&e.model().zoomIn()}),this._boundKeydownHandler=this._keydownHandler.bind(this),this._parent[0].ownerDocument.addEventListener("keydown",this._boundKeydownHandler),this._boundKeyupHandler=this._keyupHandler.bind(this),this._parent[0].ownerDocument.addEventListener("keyup",this._boundKeyupHandler)},e.exports=o},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 120" width="16" height="16"><path d="M28 50h65v17H28z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="-58 -18 120 120" width="16" height="16"><path d="M31 13C23.4 5.3 12.8.5 1.1.5c-23.3 0-42.3 19-42.3 42.5s18.9 42.5 42.3 42.5c13.8 0 26-6.6 33.7-16.9l-16.5-1.8C13.5 70.4 7.5 72.5 1 72.5c-16.2 0-29.3-13.2-29.3-29.4S-15.2 13.7 1 13.7c8.1 0 15.4 3.3 20.7 8.6l-10.9 11h32.5V.5L31 13z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 140 140" width="16" height="16"><path d="M112 60H78V26H61v34H27v17h34v34h17V77h34z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.8 13.4" enable-background="new 0 0 14.8 13.4"><path d="M8 6.7L1.7 0 .1 1.7l4.7 4.9-4.8 5 1.7 1.8L8 6.7zm6.8 0L8.4 0 6.8 1.7l4.7 4.9-4.8 5 1.7 1.8 6.4-6.7z"/></svg>'},function(e,t,i){"use strict";(function(t){function o(e){var i,o,n,a,h,d=this,f=this._chartWidget=e.chartWidget;this.$parent=e.parent,this._dateRangesPopupList=[],this._goToPopupBtn=[],this._iterativeHide=[],this._timeFormatter=new r,this._currentRange=window.urlParams&&window.urlParams.range||"",this._$seriesControls=$(document.createElement("div")).attr("class","chart-controls-bar-buttons chart-series-controls").appendTo(e.parent),this._$timezoneButton=$('<a class="apply-common-tooltip" title="'+$.t("Timezone")+'"><span class="chart-controls-clock"></span><span class="chart-controls-tz"></span></a>'),t.enabled("fundamental_widget")||this._$timezoneButton.appendTo(this._$seriesControls),
!f.onWidget()&&t.enabled("timezone_menu")?u(d._$timezoneButton,function(){var e,t,i,o,n;if(f.updateActions(),e=[],!(t=f.actions())||!t.applyTimeZone||!t.applyTimeZone.subActions)return e;for(i=t.applyTimeZone.subActions,o=0;o<i.length;++o)n=i[o],e.push({action:n.enabled?n.executeCallback.bind(n):null,addClass:n.enabled?"":"special",disabled:!n.enabled,iconClass:n.checkable&&n.checked?"icon checked-icon":"unchecked-icon",svg:n.checkable&&n.checked?p:"",title:n.text});return e},{direction:"up",addClass:"context-menu",svg:!0,wrapIcon:!0}):this._$timezoneButton.addClass("disabled"),this._$timezoneClock=this._$timezoneButton.find(".chart-controls-clock"),this._$timezoneName=this._$timezoneButton.find(".chart-controls-tz"),f.onWidget()||t.enabled("charting_library_base")?this._$extendedHoursButton=null:(this._$extendedHoursButton=$(document.createElement("a")).text($.t("ext")).attr("title",$.t("The Extended Trading Hours feature is available only for intraday charts")).addClass("apply-common-tooltip").appendTo(this._$seriesControls),this._iterativeHide.push(this._$extendedHoursButton)),this._$percButton=$(document.createElement("a")).text("%").attr("title",$.t("Toggle Percentage")).addClass("apply-common-tooltip").appendTo(this._$seriesControls),t.enabled("fundamental_widget")&&(this._$percButton.css("display","inline-block"),urlParams.percentage&&this._$percButton.addClass("active")),this._iterativeHide.push(this._$percButton),this._$logButton=$(document.createElement("a")).text($.t("log")).attr("title",$.t("Toggle Log Scale")).addClass("apply-common-tooltip"),t.enabled("fundamental_widget")||this._$logButton.appendTo(this._$seriesControls),this._iterativeHide.push(this._$logButton),this._$autoScaleButton=$(document.createElement("a")).text($.t("auto",{context:"scale"})).attr("title",$.t("Toggle Auto Scale")).addClass("apply-common-tooltip"),t.enabled("fundamental_widget")||this._$autoScaleButton.appendTo(this._$seriesControls),this._iterativeHide.push(this._$autoScaleButton),i=null,t.enabled("main_series_scale_menu")&&!t.enabled("fundamental_widget")&&(i=$(document.createElement("a")).attr("title",$.t("Scales Properties")).addClass("apply-common-tooltip").appendTo(this._$seriesControls)),this._$fullscreenChartButton=$(document.createElement("a")).attr("title",$.t("Toggle Maximize Chart")).addClass("apply-common-tooltip").appendTo(this._$seriesControls),this._iterativeHide.push(this._$timezoneButton),o="http://www.w3.org/2000/svg",n=$(document.createElementNS(o,"svg")).attr({width:12,height:12}).css({fill:"currentColor",stroke:"none",margin:"1px"}),$(document.createElementNS(o,"desc")).text("SP").appendTo(n),$(document.createElementNS(o,"path")).attr({
d:"M 11.896733,5.4401 C 11.201602,5.2497118 10.287185,5.3844905 9.8529668,4.6739798 9.3680407,3.9899631 9.7713075,3.1150758 10.335646,2.6255445 10.81759,2.1397596 10.086625,1.2464141 9.5348331,1.5679918 9.0096065,2.0197899 8.3586515,2.5915907 7.6081884,2.2860159 6.8487054,2.0572252 6.6657258,1.2214292 6.6611579,0.52971682 6.6904416,-0.14270317 5.5547878,-0.19920111 5.3509206,0.33932112 5.3495604,1.0614071 5.216111,1.980668 4.4411277,2.2733721 3.718985,2.58432 3.0421913,2.0835985 2.5447076,1.6132218 2.019086,1.2075468 1.1733117,2.0525503 1.6258135,2.5522279 2.1291674,3.0522349 2.6067846,3.7947509 2.23627,4.5142319 1.9382627,5.2487851 1.0997484,5.3013165 0.42629601,5.3591295 -0.18586111,5.4121559 -0.1726988,6.614951 0.4382476,6.6606553 1.1701866,6.6354301 2.0901088,6.8653212 2.3114865,7.6677973 2.5690397,8.4182506 1.9757702,9.0009969 1.5707544,9.5375753 1.260194,10.111116 2.1887088,10.863746 2.6392394,10.30714 3.1282414,9.7691412 3.9518015,9.3917137 4.6315605,9.8249999 5.3287279,10.186762 5.2619381,11.018963 5.3869987,11.672161 5.5440075,12.215504 6.7794125,12.12358 6.6535582,11.446999 6.6654072,10.746236 6.9028479,9.8947057 7.6677558,9.6885901 8.4182253,9.4312024 9.000933,10.024446 9.5375381,10.429439 10.111007,10.739871 10.863873,9.8114259 10.307197,9.360908 9.7691358,8.8719351 9.3913098,8.0483184 9.8250144,7.3685614 10.18688,6.6714752 11.018948,6.7380091 11.672226,6.6131264 12.162952,6.4957229 11.998177,5.7860369 11.896733,5.4401 z M 5.999918,8.8061 C 4.4052236,8.8574703 3.0094365,7.3092614 3.2012542,5.7303585 3.3197775,4.2414555 4.7798203,3.0282413 6.2655218,3.2004993 7.7296227,3.3187202 8.9364572,4.7279379 8.805387,6.1941362 8.7186344,7.6148699 7.4347334,8.84471 5.999918,8.8061 z"}).appendTo(n),i&&i.append(n),a=$(document.createElementNS(o,"svg")).attr({width:12,height:12}).css({fill:"currentColor",stroke:"none",margin:"1px"}),a.get(0).setAttribute("viewBox","0 0 24 24"),$(document.createElementNS(o,"desc")).text("FS").appendTo(a),$(document.createElementNS(o,"path")).attr({d:"M0 0v9l3.5-3.5 4.5 4.5h2v-2l-4.5-4.5 3.5-3.5h-9zm15 0l3.5 3.5-4.5 4.5v2h2l4.5-4.5 3.5 3.5v-9h-9zm-7 14l-4.5 4.5-3.5-3.5v9h9l-3.5-3.5 4.5-4.5v-2h-2zm6 0v2l4.5 4.5-3.5 3.5h9v-9l-3.5 3.5-4.5-4.5h-2z"}).appendTo(a),this._$fullscreenChartButton.append(a),this._$percButton.on("click",function(e){var i,o,n,r,s;if(e.preventDefault(),i=f.model(),o=i.mainSeries(),n=o.priceScale(),r=n.properties(),t.enabled("fundamental_widget"))return i.beginUndoMacro($.t("Toggle Percentage")),s=i.dataSources().filter(function(e){return e instanceof l&&!(e instanceof c)})[0],n=s.priceScale(),r=n.properties(),$(this).toggleClass("active",!r.percentage.value()),i.setPercentProperty(r.percentage,!r.percentage.value(),n,$.t("Toggle Percentage")),void i.endUndoMacro();o.priceScale().isLockScale()||(i.beginUndoMacro($.t("Toggle Percentage")),r.log.value()&&i.setLogProperty(r.log,!1,n,$.t("Toggle Log Scale")),i.setPercentProperty(r.percentage,!r.percentage.value(),n,$.t("Toggle Percentage")),i.endUndoMacro())}),this._$logButton.on("click",function(e){var t,i,o,n
;e.preventDefault(),t=f.model(),i=t.mainSeries(),o=i.priceScale(),n=o.properties(),i.priceScale().isLockScale()||(t.beginUndoMacro($.t("Toggle Log Scale")),n.percentage.value()&&t.setPercentProperty(n.percentage,!1,o,$.t("Toggle Percentage")),t.setLogProperty(n.log,!n.log.value(),o,$.t("Toggle Log Scale")),t.endUndoMacro())}),this._$autoScaleButton.on("click",function(e){var t,i,o,n;e.preventDefault(),t=f.model(),i=t.mainSeries(),o=i.priceScale(),n=o.properties(),t.beginUndoMacro($.t("Toggle Auto Scale")),n.autoScale.value()&&n.percentage.value()&&t.setPercentProperty(n.percentage,!1,o,$.t("Toggle Percentage")),t.setAutoScaleProperty(n.autoScale,!n.autoScale.value(),o,$.t("Toggle Auto Scale")),t.endUndoMacro()}),i&&u(i,function(){var e,t,i,o,n,r,a,l=f.paneWidgets();for(e=0;e<l.length;++e)if(t=l[e],t.containsMainSeries()){if(i=[],!(o=t.getDefaultPriceAxisWidget()))return i;for(n=o.getContextMenuActions(),r=0;r<n.length;++r)a=n[r],a instanceof s?i.push({separator:!0}):i.push({action:a.enabled?a.executeCallback.bind(a):null,addClass:a.enabled?"":"special",disabled:!a.enabled,iconClass:a.checkable&&a.checked?"icon checked-icon":"unchecked-icon",svg:a.checkable&&a.checked?p:"",title:a.text});return i}return[]},{direction:"up",addClass:"context-menu",reverse:!0,svg:!0,wrapIcon:!0}),this._$extendedHoursButton&&this._$extendedHoursButton.on("click",function(e){var t,i;e.preventDefault(),t=f.model(),i=t.mainSeries().properties().extendedHours,t.setProperty(i,!i.value(),"Extended Hours")}),this._$dateRangesWrap=$(document.createElement("div")).addClass("chart-controls-bar-buttons date-range-wrapper").appendTo(e.parent),this._$dateRangesBtn=$(document.createElement("a")).addClass("date-range-btn").text($.t("Date Range")).appendTo(this._$dateRangesWrap),this._$dateRanges=$(document.createElement("div")).addClass("date-range-list").appendTo(this._$dateRangesWrap),f.withModel(null,function(){var e=f.model(),i=e.mainSeries(),o=i.priceScale();this.updateScaleButtons(),i.priceScaleChanged.subscribe(this,this.updateScaleButtons),o.properties().autoScale.subscribe(this,this.updateScaleButtons),this.updateDateRangeButtons(),i.onStatusChanged().subscribe(this,this.updateDateRangeButtons),t.enabled("update_timeframes_set_on_symbol_resolve")&&i.onSymbolResolved().subscribe(this,this.updateDateRangeButtons),i.priceScale().properties().lockScale.subscribe(this,this.updateDateRangeButtons),!TradingView.onWidget()&&t.enabled("go_to_date")&&(this.gotoDateButton(),i.onStatusChanged().subscribe(this,this.gotoDateButton)),this.updateExtendedHoursButton(),i.properties().extendedHours.subscribe(this,this.updateExtendedHoursButton),i.properties().interval.subscribe(this,this.updateExtendedHoursButton),e.model().mainSeries().onSymbolResolved().subscribe(null,this.updateTimezonesButton.bind(this)),e.model().properties().timezone.subscribe(null,this.updateTimezonesButton.bind(this))}.bind(this)),this.updateFullscreenChartButton(),h=this._chartWidget._chartWidgetCollection,h&&(h.layout.subscribe(this.updateFullscreenChartButton.bind(this)),
h.maximizeCurrentChart.subscribe(this.updateFullscreenChartButton.bind(this)),this._$fullscreenChartButton.on("click",function(){h.activeChartWidget.setValue(f),h.maximizeCurrentChart.setValue(!h.maximizeCurrentChart.value())}),this.checkTimezonesButton(h.activeChartWidget.value()),h.activeChartWidget.subscribe(this.checkTimezonesButton.bind(this))),f.onScroll().subscribe(this,this._resetCurrentRange),f.withModel(null,function(){f.model().model().onResetScales().subscribe(d,d._resetCurrentRange),f.model().mainSeries().onSymbolResolved().subscribe(d,d._resetCurrentRange),f.model().mainSeries().properties().extendedHours.subscribe(d,d._resetCurrentRange),f.model().mainSeries().onIntervalChanged().subscribe(null,function(e,t){t&&d._currentRange===t.timeframe||d._resetCurrentRange()})})}var n=i(546).showGoToDateDialog,r=i(229).TimeFormatter,s=i(74).ActionSeparator,a=i(210).parseTzOffset,l=i(34).Study,c=i(510),h=i(519),u=h.bindPopupMenu,d=h.unbindPopupMenu,p=i(72);o.prototype._resetCurrentRange=function(){this._currentRange&&(this._$dateRanges.find(".date-range-preset-btn").removeClass("active"),this._currentRange=null)},o.prototype.updateScaleButtons=function(){var e,i,o,n,r;t.enabled("fundamental_widget")||(e=this._chartWidget.model().mainSeries(),i=e.priceScale().properties(),o=i.log.value(),n=i.percentage.value(),r=i.autoScale.value(),this._$logButton.toggleClass("active",o),this._$percButton.toggleClass("active",n),this._$autoScaleButton.toggleClass("active",r))},o.prototype.updateDateRangeButtons=function(){var e,t,i,o,n,r,s=this._chartWidget,a=s.model().mainSeries().status();if(a!==TradingView.Series.STATUS_LOADING&&a!==TradingView.Series.STATUS_RESOLVING){if(e=s._dateRangeResolutions(),t=function(e,t){this._$dateRanges.find(".date-range-preset-btn").removeClass("active"),t.addClass("active"),this._currentRange=t.data("value"),s.model().loadRange(e)},this._dateRangesPopupList=[],e.length)for(this._$dateRanges.empty(),i=0;i<e.length;i++)o=e[i],n=$(document.createElement("a")).text(o.text).attr("title",o.description||o.text).addClass("date-range-preset-btn apply-common-tooltip").data("value",o.value),o.value===this._currentRange&&n.addClass("active"),r=t.bind(this,{val:o.value,res:o.targetResolution},n),n.appendTo(this._$dateRanges).click(r),this._dateRangesPopupList.push({title:o.description||o.text,action:r});this.updateTimeframePopupMenu()}},o.prototype.gotoDateButton=function(){var e,t;this._goToPopupBtn=[],this._chartWidget._dateRangeResolutions().length>0&&(e=$.t("Go to..."),t=function(){n(this._chartWidget.model())}.bind(this),$(document.createElement("a")).text(e).addClass("js-goto-date-btn apply-common-tooltip").attr("title","Alt+G").appendTo(this._$dateRanges).click(t),this._goToPopupBtn.push({title:e,action:t})),this.updateTimeframePopupMenu()},o.prototype.updateTimeframePopupMenu=function(){this._$dateRangesBtn.toggleClass("i-hidden",!(this._dateRangesPopupList.length||this._goToPopupBtn.length)),d(this._$dateRangesBtn),u(this._$dateRangesBtn,this._dateRangesPopupList.concat(this._goToPopupBtn),{
direction:"up",addClass:"date-range-popupmenu"}),this.resizeUI()},o.prototype.updateTimezonesButton=function(){var e,t,i;null!==this._chartWidget.model().mainSeries().symbolInfo()&&(e=this._chartWidget.model().model().timezone(),"exchange"===e&&(t=this._chartWidget.model().mainSeries().symbolInfo().timezone)&&(e=t),i=a(e),this.tzOffset=i.offset,this._$timezoneName.text("("+i.string+")"),this.tickClock(),this.resizeUI())},o.prototype.checkTimezonesButton=function(e){this._$timezoneButton.toggleClass("i-invisible",e!==this._chartWidget),this.resizeUI()},o.prototype.tickClock=function(){void 0!==this.tzOffset&&this._$timezoneClock.text(this._timeFormatter.format(new Date(Date.now()+this.tzOffset+1e3*ChartApiInstance.serverTimeOffset())))},o.prototype.updateExtendedHoursButton=function(){if(this._$extendedHoursButton){this._chartWidget.model().mainSeries().properties().extendedHours.value()?this._$extendedHoursButton.addClass("active"):this._$extendedHoursButton.removeClass("active"),this.resizeUI()}},o.prototype.updateFullscreenChartButton=function(){var e=this._chartWidget._chartWidgetCollection;if(!e||"s"===e.layout.value())return void this._$fullscreenChartButton.addClass("i-hidden");this._$fullscreenChartButton.removeClass("i-hidden"),this._$fullscreenChartButton.toggleClass("active",e.maximizeCurrentChart.value()),this.resizeUI()},o.prototype.updateUI=function(){this.updateScaleButtons(),this.resizeUI()},o.prototype.resizeUI=function(){var e,t,i,o,n,r,s;if(this._$seriesControls&&this._$dateRanges){for(this.$parent.addClass("i-measure"),e=this.$parent.width(),t=this._$dateRanges.width(),i=this._$dateRangesBtn.outerWidth(),o=0,this._$seriesControls.find("a").each(function(){var e=$(this);e.hasClass("i-hidden")||(o+=e.outerWidth())}),n=o,r=0;r<this._iterativeHide.length;r++)this._iterativeHide[r].hasClass("i-hidden")||(s=this._iterativeHide[r].outerWidth(),this._iterativeHide[r].toggleClass("i-compact",e-i<n),n-=s);this._$dateRangesWrap.toggleClass("i-compact",t>e-o),this.$parent.removeClass("i-measure")}},e.exports=o}).call(t,i(3))},function(e,t,i){"use strict";function o(e,t){i.e(23).then(function(o){i(984).showSymbolInfoDialog(e,t)}.bind(null,i)).catch(i.oe)}Object.defineProperty(t,"__esModule",{value:!0}),t.showSymbolInfoDialog=o},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r,s,a,l,c;Object.defineProperty(t,"__esModule",{value:!0}),t.AddSymbolTab=void 0,r=function(){function e(e,t){var i,o;for(i=0;i<t.length;i++)o=t[i],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),s=i(179),a=o(s),l=i(928),i(501),i(1040),
c='\n\t<div class="tv-add-symbol-tab">\n\t\t<input type="text" class="tv-control-input js-add-symbol-tab-input" placeholder="'+$.t("Symbol")+'" autocomplete="off">\n\t\t<div class="tv-add-symbol-tab__add-symbol-overlay js-add-symbol-tab-checkbox"></div>\n\t</div>',t.AddSymbolTab=function(){function e(t,i){n(this,e),this._chartWidgetCollection=t,this._dialog=i,this._$popup=null,this.init()}return r(e,[{key:"init",value:function(){var e=this;this.$tab=$(c),this._$input=this.$tab.find(".js-add-symbol-tab-input"),this._checkbox=new l.AddSymbolCheckbox({labelRight:$.t("Overlay the main chart"),labelAddClass:"tv-add-symbol-tab__checkbox-label",boxAddClass:"tv-add-symbol-tab__checkbox-box"}),this.$tab.find(".js-add-symbol-tab-checkbox").append(this._checkbox.$el),a.default.bindToInput(this._$input,{callback:function(t){var i=e._chartWidgetCollection.activeChartWidget.value();i&&i.addSymbol(t,e._checkbox.checked)},onPopupOpen:function(t){t.css("z-index",e._dialog.getZIndex()),e._$popup=t},onPopupClose:function(){e._$popup=null},keepFocus:!0,clearAfterAccept:!0})}},{key:"focus",value:function(){Modernizr.touch||this._$input.focus()}},{key:"isClickOnTab",value:function(e){return!!this._$popup&&!(this._$popup[0]!==e.target&&!this._$popup[0].contains(e.target))}}]),e}()},function(e,t){},function(e,t){},function(e,t,i){"use strict";function o(){function e(e){return _&&t(),_=new r.UndoMacroCommand(e)}function t(){if(_){var e=_;_=null,e.isEmpty()||a(e)}}function i(){if(m.isEmpty())return!1;var e=m.pop();return!!e&&(e.undo(),g.push(e),l.logNormal("UNDO: "+e.text()),!0)}function o(){if(g.isEmpty())return!1;var e=g.pop();return!!e&&(e.redo(),m.push(e),l.logNormal("REDO: "+e.text()),!0)}function a(e){var t,i,o;_?_.addCommand(e):(g.clear(),t=m.head(),i=t&&t.text(),m.push(e),""!==(o=e.text())&&o!==i&&l.logNormal("DO: "+o)),e.executeOnPush()&&e.redo()}function c(){return{lastActualCommand:m.isEmpty()?null:m.head()}}function h(e){for(;!m.isEmpty()&&e.lastActualCommand!==m.head();)m.pop().undo();g.clear()}function u(){return m}function d(){return g}function p(){m.clear(),g.clear()}function f(e,t,i){if(e.value()!==t){var o=new s.SetWatchedValueCommand(e,t,i);a(o),o.redo()}}var _=null,m=new n.UndoStack,g=new n.UndoStack;return{beginUndoMacro:e,clearStack:p,createUndoCheckpoint:c,endUndoMacro:t,pushUndoCommand:a,redo:o,redoStack:d,setWatchedValue:f,undo:i,undoStack:u,undoToCheckpoint:h}}var n,r,s,a,l;Object.defineProperty(t,"__esModule",{value:!0}),n=i(544),r=i(540),s=i(1043),a=i(0),l=a.getLogger("Common.UndoHistory"),t.createUndoHistory=o},function(e,t,i){"use strict";var o,n,r;Object.defineProperty(t,"__esModule",{value:!0}),o=i(6),n=i(166),r=function(e){function t(t,i,o){var n=e.call(this,o)||this;return n._wv=t,n._newValue=i,n._oldValue=t.value(),n}return o.__extends(t,e),t.prototype.redo=function(){this._wv.setValue(this._newValue)},t.prototype.undo=function(){this._wv.setValue(this._oldValue)},t}(n.UndoCommand),t.SetWatchedValueCommand=r},function(e,t,i){"use strict";function o(e,t,o){void 0===t&&(t={}),i.e(17).then(function(n){
i(498).getImageOfChart(e,t,o)}.bind(null,i)).catch(i.oe)}function n(e,t,o){void 0===t&&(t={}),i.e(17).then(function(n){i(498).getImageOfChartSilently(e,t,o)}.bind(null,i)).catch(i.oe)}Object.defineProperty(t,"__esModule",{value:!0}),t.getImageOfChart=o,t.getImageOfChartSilently=n},function(e,t,i){"use strict";var o,n,r,s;Object.defineProperty(t,"__esModule",{value:!0}),o=i(6),n=i(166),r=i(539),s=function(e){function t(t,i){var o=this,n="Change Chart Layout to "+r.layouts[i].title;return o=e.call(this,n)||this,o._chartWidgetCollection=t,o._newLayoutType=i,o._oldLayoutType=t.layout.value(),o}return o.__extends(t,e),t.prototype.redo=function(){this._chartWidgetCollection.layout.setValue(this._newLayoutType)},t.prototype.undo=function(){this._chartWidgetCollection.layout.setValue(this._oldLayoutType)},t}(n.UndoCommand),t.SetChartLayoutCommand=s},function(e,t,i){"use strict";function o(e){return new Promise(function(t,i){e.subscribe(null,t,!0)})}Object.defineProperty(t,"__esModule",{value:!0}),t.delegateToPromise=o},function(e,t,i){"use strict";function o(e){r.call(this,e);var t=this;a.hideMarksOnBars().subscribe(this,function(){t._properties.visible.setValue(!a.hideMarksOnBars().value())})}function n(e){s.call(this)}var r=i(187).BarsMarksContainer,s=i(193).BarMarkTooltip,a=i(110);inherit(o,r),o.prototype._initialize=function(e){this._properties.visible.setValue(!0)},o.prototype.userEditEnabled=function(){return!1},o.prototype._constructor="UserDefinedBarsMarks",o.prototype._plateViewData=function(e){var t={text:e.text};return"object"==typeof e.color&&(t.theme="user_defined_theme",t.overridedTheme={},t.overridedTheme.border=e.color.border,t.overridedTheme.background=e.color.background),t},o.prototype.onClicked=function(){var e=this._model.lastHittestData().id;this._marks[e].onClicked()},o.prototype.clearMarks=function(){r.prototype.clearMarks.call(this),this.onNeedRepaint.fire()},o.prototype._getData=function(e){var t,i,o,n=this._model.mainSeries().symbolInfo();n&&(t=this.roundRange(this._rangeDifference(e)),i=this,o=this._model.mainSeries().properties().interval.value(),ChartApiInstance.getMarks(n,t.start,t.end,function(t){t.forEach(function(e){i._marks[e.id]=e},i),i._loadedRange=i._rangeUnion(e,i._loadedRange),i.onNeedRepaint.fire()},o))},o.prototype._createTooltip=function(){return new n},o.prototype.updatePlateData=function(e,t){return t.barWidth=this.barWidth(),t.text=e.text,t.tooltipMargin=-1*Math.max(e.minSize/2,.4*this.barWidth()),t},o.prototype.hasContextMenu=function(){return!1},inherit(n,s),n.prototype._createLayout=function(){this._layout=$('<div class="bar-mark-tooltip"></div>'),this._layout_text=$('<div class="text"></div>').appendTo(this._layout)},n.prototype._updatePlate=function(e){this._currentId=e.id,this._layout.css("border-color",e.theme.border),this._layout.css("margin-top",e.tooltipMargin+"px"),this._layout_text.html(e.text),this._layout.append(this._layout_text)},e.exports=o},function(e,t,i){"use strict";function o(e){a.call(this,e);var t=this;l.hideMarksOnBars().subscribe(this,function(){
t._properties.visible.setValue(!l.hideMarksOnBars().value())}),this._paneView=new n(this)}function n(e,t){this.source=e,this._rendererFactory=t,this.stylesCache={},this.templatesCache={},this._lollipops={},this._createLollipops()}var r=i(8).Point,s=i(508).ESDPaneView,a=i(187).BarsMarksContainer,l=i(110),c=i(108),h=i(260).Tooltip;inherit(o,a),o.prototype._initialize=function(e){this._properties.visible.setValue(!0)},o.prototype.userEditEnabled=function(){return!1},o.prototype._constructor="UserDefinedTimescaleMarks",o.prototype._plateViewData=function(e){return{text:e.text}},o.prototype.onClicked=function(){var e=this._model.lastHittestData().id;c.emit("onTimescaleMarkClick",e)},o.prototype.clearMarks=function(){a.prototype.clearMarks.call(this),this.onNeedRepaint.fire()},o.prototype._getData=function(e){var t,i,o,n=this._model.mainSeries().symbolInfo();n&&(t=this.roundRange(this._rangeDifference(e)),i=this,o=this._model.mainSeries().properties().interval.value(),ChartApiInstance.getTimescaleMarks(n,t.start,t.end,function(t){t.forEach(function(e){i._marks[e.id]=e},i),i._loadedRange=i._rangeUnion(e,i._loadedRange),i.onNeedRepaint.fire()},o))},o.prototype.updatePlateData=function(e,t){return t.barWidth=this.barWidth(),t.text=e.text,t.tooltipMargin=-1*Math.max(e.minSize/2,.4*this.barWidth()),t},o.prototype.hasContextMenu=function(){return!1},o.prototype.paneViews=function(e){return this._properties.visible.value()?[this._paneView]:[]},o.prototype.onClickOutside=function(e){this._paneView.onClickOutside(e)},inherit(n,s),n.prototype._createLollipops=function(){var e=this.source._model.timeScale(),t=s.prototype._getY.call(this.source),i=this.source._model.lastHittestData(),o=this;$.each(this.source._marks,function(n,s){var a=s.id;o._lollipops[a]={id:a,basePoint:new r(e.indexToCoordinate(e.timePointToIndex(s.tickmark))+1,t),hovered:i&&i.id===a||a===o.getLastClickedLollipopId(),barY:null,label:s.label,color:s.color,items:s.tooltip,tooltip:o._lollipops.hasOwnProperty(a)?o._lollipops[a].tooltip:new h,visible:!0}})},n.prototype.update=function(){this._createLollipops()},n.prototype.renderer=function(){return this.update(),s.prototype.renderer.call(this)},n.prototype._generateTemplateStyle=function(e,t,i){var o,n,r=e+t+i;return r in this.stylesCache||(o={strokeStyle:t,lineWidth:1,fillStyle:"white",barLine:{lineStyle:CanvasEx.LINESTYLE_DASHED},lollipop:{width:32,height:96,circleHeight:16,radius:12,lineWidth:1.5,fillStyle:"white",strokeStyle:"#E2745B",text:{label:i,strokeStyle:t,font:"normal 12px Verdana, Arial, sans-serif"}}},n={strokeStyle:t,lollipop:{fillStyle:t,fillCircle:!0,text:{strokeStyle:"white"}}},this.stylesCache[r]="default"===e?o:$.extend(!0,{},o,n)),this.stylesCache[r]},n.prototype.getTemplate=function(e,t){var i=e+t.color+t.label;return i in this.templatesCache||(this.templatesCache[i]=this.createTemplate(this._generateTemplateStyle(e,t.color,t.label))),this.templatesCache[i]},n.prototype.getStyle=function(e,t){return this._generateTemplateStyle(e,t.color,t.label)},n.prototype.createText=function(e,t){
"string"==typeof e.items?t.addTextLine(e.items):Array.isArray(e.items)&&e.items.forEach(function(e){t.addTextLine(e)})},n.prototype.hasTooltip=function(e){return!!e.tooltip&&e.tooltip.length},e.exports=o},function(e,t,i){"use strict";function o(){return{count:0,lastTime:0,maxTime:0,totalTime:0}}function n(){return e={},e[1]=o(),e[2]=o(),e[3]=o(),e;var e}function r(e,t){e.lastTime=t,e.totalTime+=t,++e.count,t>e.maxTime&&(e.maxTime=t)}function s(e){return e.toFixed(2)}function a(e){var t,i,o,n,r=e.count;return 0===r?"no events":(t=e.totalTime/r,i=s(e.maxTime),o=s(e.lastTime),n=s(t),"count="+r+", last="+o+", max="+i+", avg="+n)}var l,c,h,u;Object.defineProperty(t,"__esModule",{value:!0}),l=i(0),c=l.getLogger("TimingsMeter.Service"),h=l.getLogger("TimingsMeter.Stats",{maxCount:160}),u=function(){function e(e){this._waitDrawStartTime=-1,this._startDrawTime=-1,this._currentDrawLevel=3,this._currentDrawItems=n(),this._currentWaitingItem=o(),this._dumpTimingsStatsInterval=0,this._logPrefix="["+e+"]"}return e.prototype.destroy=function(){this.stopCollect()},e.prototype.startCollect=function(){0!==this._dumpTimingsStatsInterval&&(c.logWarn(this._logPrefix+" Multiple start detected"),this.stopCollect()),this._clearCurrentState(),this._dumpTimingsStatsInterval=setInterval(this._dumpTimingsStats.bind(this),15e3),c.logNormal(this._logPrefix+" Collecting started")},e.prototype.stopCollect=function(){0!==this._dumpTimingsStatsInterval&&(clearInterval(this._dumpTimingsStatsInterval),this._dumpTimingsStatsInterval=0,c.logNormal(this._logPrefix+" Collecting stopped. Dumping last state..."),this._dumpTimingsStats())},e.prototype.startWaitingDraw=function(){this._waitDrawStartTime=window.performance.now()},e.prototype.startDraw=function(e){this._startDrawTime=window.performance.now(),this._currentDrawLevel=e},e.prototype.stopDraw=function(){var e,t,i=window.performance.now();-1!==this._startDrawTime&&-1!==this._waitDrawStartTime&&(e=this._startDrawTime-this._waitDrawStartTime,r(this._currentWaitingItem,e),this._waitDrawStartTime=-1,t=i-this._startDrawTime,r(this._currentDrawItems[this._currentDrawLevel],t),this._startDrawTime=-1)},e.prototype._dumpTimingsStats=function(){var e=this._logPrefix+" awaiting:"+a(this._currentWaitingItem)+"; cursor:"+a(this._currentDrawItems[1])+"; light:"+a(this._currentDrawItems[2])+"; full:"+a(this._currentDrawItems[3]);h.logNormal(e),this._clearCurrentState()},e.prototype._clearCurrentState=function(){this._currentDrawItems=n(),this._currentWaitingItem=o()},e}(),t.TimingsMeter=u},function(e,t,i){"use strict";function o(){var e=TVSettings.getBool("publish.showIntroText",!0),t={width:510,closeOnOutsideClick:!1,destroyOnClose:!0,closeButton:!1,type:"modal",contentWrapTemplate:'<div class="tv-dialog__section tv-dialog__section--no-border"><div class="tv-text tv-text--position-outside"></div></div>',actionsWrapTemplate:'<div class="tv-dialog__section tv-dialog__section--actions tv-dialog__section--actions-adaptive tv-dialog__section--no-border">',content:r,actions:[{name:"publish-intro-continue",type:"primary",
text:$.t("Continue Publishing"),method:"close",key:[13,32]},{name:"donotshow",type:"checkbox",text:$.t("Do not show this message again"),checked:!e,addClass:"tv-control-checkbox tv-control-checkbox--in-actions i-align_left i-float_left"}]};return(0,n.createDialog)(t)}var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.createPublishIntroDialog=o,n=i(56),r='<div class="tv-dialog__header tv-dialog__header--adaptive"><div class="tv-dialog__header-logo">'+i(1051)+'</div><div class="tv-dialog__header-title"><h2>'+$.t("Read Before Publishing")+"</h2></div></div><div><p>"+$.t("TradingView celebrates open communication and creative ideas. We want you to express yourself freely and use TradingView to share insights, learn from others, make friends and share the love for finance.")+"</p><p>"+$.t("Make sure you read our {0}House Rules{1} to avoid your ideas getting moderated, to see examples of good ideas and to get practical suggestions for different kinds of analyses.").format('<a href="/house-rules/" target="_blank">',"</a>")+"</p><p>"+$.t("Make sure you read {0}this article{1} for comprehensive tips on how to build reputation by engaging the community with awesome ideas.").format('<a href="http://blog.tradingview.com/?p=2328" target="_blank">',"</a>")+"</p></div>"},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 86 109" width="86" height="109"><g fill="none"><path fill="#5EC8F4" d="M50.28 80.252c-.966-.544-2.524-.548-3.496 0l-3.5 1.973c-.966.544-2.314.296-3.023-.568l-2.555-3.112c-.705-.858-2.156-1.427-3.26-1.27l-3.972.568c-1.095.157-2.263-.564-2.608-1.608l-1.28-3.87c-.344-1.044-1.49-2.094-2.575-2.347l-3.91-.914c-1.076-.252-1.906-1.35-1.853-2.447l.198-4.073c.053-1.1-.638-2.494-1.56-3.125l-3.316-2.273c-.915-.627-1.295-1.95-.85-2.956l1.647-3.725c.445-1.006.3-2.557-.325-3.47l-2.29-3.342c-.623-.912-.5-2.28.29-3.07l2.846-2.847c.784-.785 1.214-2.29.96-3.36l-.937-3.967c-.253-1.072.356-2.3 1.376-2.75l3.676-1.62c1.013-.447 1.955-1.694 2.103-2.784l.55-4.04c.148-1.09 1.156-2.014 2.27-2.063l4.01-.175c1.104-.05 2.43-.87 2.96-1.832l1.964-3.568c.53-.963 1.8-1.457 2.856-1.1l3.802 1.294c1.048.356 2.58.072 3.435-.646l3.08-2.586c.85-.713 2.22-.718 3.076 0l3.08 2.586c.85.713 2.38 1.005 3.435.646l3.802-1.293c1.048-.357 2.328.136 2.858 1.098l1.963 3.568c.53.963 1.848 1.783 2.96 1.832l4.01.175c1.106.05 2.122.974 2.27 2.063l.55 4.04c.15 1.09 1.083 2.334 2.103 2.784l3.677 1.62c1.013.447 1.63 1.68 1.376 2.75l-.94 3.966c-.252 1.07.172 2.57.962 3.36l2.845 2.846c.784.785.916 2.157.29 3.07l-2.29 3.342c-.623.91-.768 2.467-.323 3.47l1.647 3.727c.445 1.007.07 2.326-.85 2.957l-3.317 2.272c-.914.625-1.612 2.026-1.56 3.124l.2 4.073c.053 1.1-.77 2.193-1.855 2.447l-3.91.914c-1.076.252-2.23 1.304-2.575 2.348l-1.28 3.87c-.344 1.044-1.504 1.765-2.607 1.607l-3.973-.568c-1.095-.156-2.55.406-3.258 1.27l-2.557 3.112c-.705.857-2.05 1.116-3.023.568l-3.5-1.973zm4.26-42.087a6.98 6.98 0 0 1 3.476-.923c3.936 0 7.126 3.257 7.126 7.276 0 .686-.093 1.35-.266 1.978 2.07.736 3.555 2.747 3.555 5.11 0 2.99-2.37 5.41-5.298 5.41-.06 0-.122 0-.182-.002v.003H36.64v-.002c-3.852-.1-6.945-3.318-6.945-7.274 0-3.97 3.115-7.197 6.986-7.273.46-5.024 4.602-8.956 9.643-8.956 3.466 0 6.506 1.86 8.217 4.655z"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M43.416 74.333l13.07 32.498 10.09-14.385 17.204 3.307-12.65-31.454-5.028 1.176-2.53 7.653-7.938-1.135-5.107 6.218-6.995-3.943-.116.066zm-.289.162L30.123 106.83l-10.09-14.385L2.83 95.752l12.69-31.55 5.443 1.272 2.53 7.653 7.94-1.135 5.106 6.218 6.59-3.715z"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M43.532 74.267l-6.996 3.943-5.107-6.218-7.94 1.135-2.53-7.653-7.81-1.826.39-8.055-6.626-4.54 3.258-7.37-4.55-6.64 5.686-5.688-1.856-7.845 7.344-3.24 1.087-7.99 8.012-.35 3.884-7.056 7.596 2.583 6.156-5.168 6.156 5.167 7.596-2.583 3.884 7.056 8.012.35 1.087 7.99 7.344 3.24-1.855 7.845 5.685 5.688-4.55 6.64 3.26 7.37-6.628 4.54.39 8.055-7.81 1.826-2.53 7.653-7.938-1.135-5.107 6.218z"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M49.54 33.165a6.98 6.98 0 0 1 3.476-.923c3.936 0 7.126 3.257 7.126 7.276 0 .686-.093 1.35-.266 1.978 2.07.736 3.555 2.747 3.555 5.11 0 2.99-2.37 5.41-5.298 5.41-.06 0-.122 0-.182-.002v.003H31.64v-.002c-3.852-.1-6.945-3.318-6.945-7.274 0-3.97 3.115-7.197 6.986-7.273.46-5.024 4.602-8.956 9.643-8.956 3.466 0 6.506 1.86 8.217 4.655z"/></g></svg>'
},,,,,,,function(e,t,i){"use strict";(function(t,o){function n(e){if(this._freeProductIds=["tv-scripting","tv-basicstudies","tv-prostudies","Script$USER","Script$EDGR","ESD$TV"],this.packagesUpdated=new t,!e)return this._products=this._discounts={},void(this._offers=this._order=this._devIds=[]);this._products=e.products,this._discounts=e.discounts,this._offers=e.offers;var i=this._collectSubOffers();this._offers=this._offers.concat(i),this._devIds=e.devIds,this._order=e.order,this._submitStarted=!1,Object.keys(e.products).length<4?this.invalidateShopConf():this._invalidShopConf=!1,loginStateChange.subscribe(this,this.onLoginStateChange)}var r=i(64).fetch,s=i(207),a=i(205).isDelayExchange;i(1059),n.prototype._collectSubOffers=function(){var e,t,i,o,n=[];for(e=0;e<this._offers.length;++e)t=this._offers[e],(i=this._products[t])&&(o=i.subproduct_ids)&&(n=n.concat(o));return n},n.prototype.PRODUCT_TYPES={pro_plan:1,study_package:2,news_feed:3,exchange:4,connection:6},n.prototype.MARKET_DESCRIPTION_COPY=$.t("These trading products are integrated in TradingView thanks to our Partner Program for Developers. These are independent, unaffiliated studies, which are not part of TradingView subscriptions &ndash; these are separate tools that you buy if you want. Description, algorithm, support and prices are all determined by the author."),n.prototype.updateShopConf=function(){return this._shopConfPromise?this._shopConfPromise:(this._shopConfPromise=r("/market/shopconf/",{credentials:"include"}).then(function(e){return e.json()}).then(function(e){this._offers=e.offers||[];var t=this._collectSubOffers();this._offers=this._offers.concat(t),this._order=e.order&&JSON.parse(e.order)||[],this._products=e.all_products&&JSON.parse(e.all_products)||{},this._discounts=e.discounts&&JSON.parse(e.discounts)||{},this._invalidShopConf=!1,delete this._shopConfPromise,this.packagesUpdated.fire()}.bind(this)).catch(function(){delete this._shopConfPromise}.bind(this)),this._shopConfPromise)},n.prototype.invalidateShopConf=function(){this._invalidShopConf=!0},n.prototype.isInvalidShopConf=function(){return!!this._invalidShopConf},n.prototype.onLoginStateChange=function(e){e||this.updateShopConf()},n.prototype.getTrialExchanges=function(){var e=[];return this.getProductsByType(this.PRODUCT_TYPES.exchange).filter(function(e){return e.enable_on_trial&&!e.disabled}).map(function(t){return Array.prototype.push.apply(e,t.included_exchanges),t},this).filter(function(t){return!e.includes(t.exchange)})},n.prototype.getIDCExchanges=function(e){var t=this._products,i=window.initData;if(i)if(e){if(i.idc_delay_exchanges_list)return window.initData.idc_delay_exchanges_list}else if(i.idc_exchanges_list)return window.initData.idc_exchanges_list;return Object.keys(t).filter(function(i){return e?t[i].idc_service_codes_delay:t[i].idc_service_codes}).map(function(e){return t[e].exchange})},n.prototype.getProduct=function(e){var t,i;return e in this._products?this._products[e]:this.isDiscountProductId(e)?(t=this._discounts[e],i=Object.assign({discount_text_id:e
},this._products[t.product]),t.cost&&(i.cost=t.cost),t.cost_annual&&(i.cost_annual=t.cost_annual),t.cost_biennial&&(i.cost_biennial=t.cost_biennial),void 0!==t.free_months&&(i.free_months=t.free_months),void 0!==t.upgrade_from_m&&(i.upgrade_from_m=t.upgrade_from_m),i):{}},n.prototype.getDiscountProduct=function(e){return this._discounts[e]||{}},n.prototype.getProductId=function(e){return e?e.discount_text_id||e.text_id||"":""},n.prototype.isDiscountProductId=function(e){return e in this._discounts},n.prototype.getExchange=function(e){var t,i,o=this.getProductsByType(this.PRODUCT_TYPES.exchange);for(i=0;i<o.length;i+=1)if(t=o[i],t.exchange===e||t.included_exchanges&&t.included_exchanges.includes(e))return t;return{}},n.prototype.getCost=function(e,t){var i,o=0,n="cost",r="cost_annual",s="cost_biennial";if(e.free_months&&"y"===t&&(o=e.free_months),i=1,"2y"===t){if(i=24-o,e[s])return e[s]*i;if(e[r])return e[r]*i}else if("y"===t&&(i=12-o,e[r]))return e[r]*i;return e[n]?e[n]*i:e.cost*i},n.prototype.getProductsByType=function(e){return Object.keys(this._products).filter(function(t){return this._products[t].type===e},this).map(function(e){return this.getProduct(e)},this).sort(function(e,t){return t.order>e.order?-1:t.order<e.order?1:0})},n.prototype.getProPlans=function(){return this.getProductsByType(this.PRODUCT_TYPES.pro_plan).map(function(e){return e.text_id})},n.prototype.getStudies=function(){var e,t,i={};for(e=0;e<this._order.length;e++)t=this._order[e],this._products[t]&&this._products[t].type===this.PRODUCT_TYPES.study_package&&(i[t]=this._products[t]);return i},n.prototype.getSuperProduct=function(e){var t,i;for(t in this._products)if(i=this._products[t],i.subproduct_ids&&i.subproduct_ids.indexOf(e)>=0)return i.id},n.prototype.getStudiesOrder=function(){return this._order.filter(function(e){return this._products[e]&&this._products[e].type===this.PRODUCT_TYPES.study_package},this)},n.prototype.hasPackage=function(e){return this._offers.includes(e)||this._freeProductIds.includes(e)},n.prototype.userHasRealtimeForExchange=function(e){var t,i;if(e=(e||"").toLowerCase(),!(t=this.getExchange(e))||!Object.keys(t).length)return!1;if(this._offers.includes("exchange-"+t.exchange))return!0;if(t.included_exchanges)for(i=0;i<t.included_exchanges.length;i+=1)if(this._offers.includes("exchange-"+t.included_exchanges[i]))return!0;return!1},n.prototype.hasRealtimeForExchange=function(e){var t,i,o=pro.getProductsByType(pro.PRODUCT_TYPES.exchange);for(e=(e||"").toLowerCase(),i=0;i<o.length;i+=1)if(t=o[i],t.exchange===e||(t.included_exchanges||[]).includes(e))return!(t.disabled&&!t.included_exchanges);return!1},n.prototype.upgradePackage=function(e,t){s(e,t,{fixedCycle:"2y"===t})},n.prototype.visitExchangesPage=function(e){e=e||{},s("pro",user.pro_plan_billing_cycle||"y",{exchangesOnly:!0,newWindow:e.newWindow,paymentMethod:e.paymentMethod})},n.prototype.showProductDialog=function(e){var t,i=this.getProduct(e),o="";o=this.hasPackage(e)?this.prepareProductPage(i):this.prepareProductOfferPage(i),t=TVDialogs.createDialog(i.name,{
width:"600px",content:o}),this.hasPackage(e)||t.find(".js-subscribe-btn").click(function(){s(e)}),TVDialogs.positionDialog(t),TVDialogs.applyHandlers(t)},n.prototype.productPageTemplates=function(e){var t='<div class="tv-study-offer__header"><div class="tv-study-offer__main-header"><span class="tv-study-offer__name">{{offer.name}}</span></div><div class="tv-study-offer__sub-header">{{#showFirstLinks}}<a href="{{ offer.product_link }}" target="_blank" rel="nofollow">'+$.t("Website")+'</a> | <a href="{{ offer.support_link }}" target="_blank" rel="nofollow">'+$.t("Support")+'</a>{{/showFirstLinks}}{{#account}}{{#showSeparator}} | {{/showSeparator}}<a href="https://www.tradingview.com/u/{{offer.tv_account}}/" target="_blank">'+$.t("TradingView Account")+"</a>{{/account}}</div></div>",i='<div class="tv-study-offer__content"><div class="tv-study-offer__info-description">{{{offer.description}}}{{#offer.description_additional_product}}{{{offer.description_additional_product}}}{{/offer.description_additional_product}}</div>{{#showEditDescription}}<div class="tv-study-offer__buttons"><a class="tv-button tv-button--primary js-subscribe-btn" href="/u/{{username}}/#billing" target="_blank">'+$.t("Edit subscription")+'</a>{{#learnMore}}<a class="tv-button tv-button--primary" href="/market/{{offer.text_id}}/" target="_blank">'+$.t("Learn more")+'</a>{{/learnMore}}</div>{{/showEditDescription}}</div>{{#descr}}<div class="tv-study-offer__footer">{{{ descr }}}</div>{{/descr}}',o='<div class="tv-study-offer__content"><div class="tv-study-offer__info-description">{{{offer.description}}}{{#offer.description_additional_offer}}{{{offer.description_additional_offer}}}{{/offer.description_additional_offer}}</div><div class="tv-study-offer__screenshots-container js-offer-screenshots">{{#screenshots}}<a rel="{{offer.text_id}}" class="fb-start" href="/static/images/indicators/screenshots/big-{{{.}}}"><img src="/static/images/indicators/screenshots/{{{.}}}"></a>{{/screenshots}}</div><div class="tv-study-offer__buttons">{{#pro_realtime_needed}}<a class="tv-button tv-button--primary" href="/gopro/" target="_blank" onclick="TradingView.trackGoProPageTransition(\'proRTProduct\')">'+$.t("Go PRO")+'</a>{{/pro_realtime_needed}}{{^pro_realtime_needed}}<span class="tv-button tv-button--primary js-subscribe-btn">'+$.t("Subscribe for ${{ cost }}")+"/"+$.t("M",{context:"dates"})+'</span>{{#learnMore}}<a class="tv-button tv-button--primary" href="/market/{{offer.text_id}}/" target="_blank">'+$.t("Learn more")+'</a>{{/learnMore}}{{/pro_realtime_needed}}</div></div>{{#descr}}<div class="tv-study-offer__footer">{{{ descr }}}</div>{{/descr}}';return"product"===e?t+i:"offer"===e?t+o:void 0},n.prototype.prepareProductPage=function(e,t){var i,n,r,s;return t=t||"product",i=["tv-volumebyprice","tv-fxwirepro"].indexOf(e.text_id)<0,n=e.product_link!=="https://www.tradingview.com/u/"+e.tv_account+"/",r=!("tv-volumebyprice"===e.text_id&&~this._order.indexOf("tv-volumebyprice")),s={offer:e,descr:"tv-volumebyprice"===e.id?"":this.MARKET_DESCRIPTION_COPY,
logo:this.offerLogoSrc(e),username:user.username,account:e.tv_account,showSeparator:n&&e.tv_account,learnMore:i,showFirstLinks:n,showEditDescription:r},"offer"===t&&$.extend(s,{cost:(e.cost||e.cost_annual).toFixed(2),screenshots:e.screenshots,pro_realtime_needed:e.included_in_plans&&e.included_in_plans.indexOf("pro_realtime")>-1}),o.render(this.productPageTemplates(t),s)},n.prototype.prepareProductOfferPage=function(e){return this.prepareProductPage(e,"offer")},n.prototype.offerLogoSrc=function(e){return e.has_logo?"/static/images/indicators/logos/"+e.text_id+".png":null},n.prototype.offers=function(){return this._offers},n.prototype.discounts=function(){return this._discounts},n.prototype.idcDelayOffers=function(){return this._offers.filter(function(e){return a(e)})},n.prototype.devIds=function(){return this._devIds},n.prototype.hash=function(){var e,t=this._offers.slice(0),i=this._devIds.slice(0);return t.sort(),i.sort(),e={offers:t,devIds:i},JSON.stringify(e)},TradingView.Pro=n,e.exports=n}).call(t,i(4),i(21))},function(e,t){},,,function(e,t,i){"use strict";(function(e,o,n){function r(t){this._chartWidgetCollection=t,this._chartAboutToBeSavedDelegate=new e,this._chartSavedDelegate=new e,this._chartSizeLimitExceededDelegate=new e}function s(e,t,i,o){var r,s,a;o=o||{},r={wl:o.wl,images:JSON.stringify(e.images()),previews:o.previews,onWidget:o.onWidget},s=e.activeChartWidget.value().widgetCustomer(),s&&(r.customer=s),r.timezone=e.activeChartWidget.value()._properties.timezone.value(),window.urlParams&&window.urlParams.locale&&(r.language=u.locale),a=n.enabled("charting_library_base")?o.snapshotUrl||"https://www.tradingview.com/snapshot/":"/snapshot/",$.post(a,r,function(e){e?t(e):i()}).fail(function(){i()})}var a=i(112),l=i(943).PinePerm,c=i(266).record,h=i(20).trackEvent,u=i(81),d=i(43),p=i(944),f=i(907);r.prototype.chartAboutToBeSaved=function(){return this._chartAboutToBeSavedDelegate},r.prototype.chartSaved=function(){return this._chartSavedDelegate},r.prototype.chartSizeLimitExceeded=function(){return this._chartSizeLimitExceededDelegate},r.prototype.whenReadyToSave=function(e){var t,i,o=this._chartWidgetCollection,n=o.activeChartWidget.value(),r=n.model().mainSeries();r.symbolInfo()&&!r.hasDelayedSymbolIntervalChange()?e():(t=null,i=null,t=function(){r.onSymbolError().unsubscribe(null,i,!0),e()},i=function(){r.onSymbolResolved().unsubscribe(null,t,!0)},r.onSymbolResolved().subscribe(null,t,!0),r.onSymbolError().subscribe(null,i,!0))},r.prototype.saveToJSON=function(){return this._fillSavingInfo(!1,!0)},r.prototype._fillAsyncInfo=function(e,t,i){function o(t){e.content=JSON.stringify($.extend(!0,r,t)),n.resolve(e)}var n,r=JSON.parse(e.content),s=this._chartWidgetCollection;return t||(i=!0),n=$.Deferred(),i?s.asyncState(!!t).then(o):s.activeChartWidget.value().asyncState(!!t).then(o),n.promise()},r.prototype._fillSavingInfo=function(e,t,i){var o,n,r,s,a,l,c,h,u,d,p,f;if(e||(t=!0),o={publish_request_id:Math.random().toString(36).substring(2)},n=this._chartWidgetCollection,r=n.activeChartWidget.value(),
s=n.metaInfo,a=r.model().mainSeries(),l=a.properties(),c=a.symbolInfo(),s.id.value()&&(o.id=s.id.value()),o.name=s.name.value()||"",o.description=s.description.value()||"",o.resolution=a.properties().interval.value(),o.symbol_type=null!==c&&c.type||"",o.exchange=null!==c&&c.exchange||"",o.listed_exchange=null!==c&&c.listed_exchange||"",null!==c&&a.isSpread()?(h=c.legs[0],u=c.base_name[0],u=u.split(":")[1],o.symbol=h,o.short_name=u,o.expression=c.full_name):(o.symbol=null!==c&&c.ticker||l.symbol.value(),o.short_name=l.shortName.value()),null!==c){for(d=[],p=0,f=c.legs.length;p<f;p++)d.push({symbol:c.legs[p],pro_symbol:c.base_name[p]});o.legs=JSON.stringify(d)}else o.legs=JSON.stringify([]);return o.content=t?JSON.stringify(n.state(!!e,i)):JSON.stringify(r.state(!!e,i)),e&&(o.image=JSON.stringify(n.images({onlyActiveChart:!t}))),o.is_realtime=e?"0":"1",o},r.prototype.publishChart=function(e){var t,o,n,r,s,a;h("GUI","Publish Chart"),c("Chart","Publish Chart Start"),t=this,e=e||{},o=e.isPrivate||TVSettings.getBool("publishchart.private",!1),n={accessType:o?0:1,publishSource:e.publishSource,videoFilename:e.videoFilename,videoDuration:e.videoDuration},r=$(".publish-dropdown-container"),s=$(".publish-chart-button"),a={savePrivacySetting:!e.doNotSavePrivacySetting,onWidget:e.onWidget,ideaUrl:e.ideaUrl},t._ideaPublisher?t._ideaPublisher.openPublication(n,a):i.e(28).then(function(e){var o=i(1096).IdeaPublisher,l=i(941).IdeasProvider,c=i(1097).ChartInfoProvider,h=i(908).CategoriesProvider,u=new c({chartWidgetCollection:t._chartWidgetCollection}),d=new l({publish:function(e,i){return new Promise(function(o,n){var r={closeForm:function(){o()},showError:function(e){n(e)}};t.onPublish(e,$.extend({},i,r))})}}),p=new h;t._ideaPublisher=new o({chartInfoProvider:u,ideasProvider:d,categoriesProvider:p,onOpenEditor:function(){r.addClass("disabled")},onMinimizeEditor:function(){r.removeClass("disabled"),s.addClass("inprogress")},onCloseEditor:function(){r.removeClass("disabled"),s.removeClass("inprogress")}}),t._ideaPublisher.openPublication(n,a)}.bind(null,i)).catch(i.oe)},r.prototype.publishScript=function(e,t,i){var o,n,r,s,a=this;a._scriptPublisher?a._scriptPublisher.openPublication(e,t):(o=i.ScriptPublisher,n=i.ScriptsProvider,r=i.CategoriesProvider,s=new n({publish:function(e){return new Promise(function(t,i){var o={closeForm:function(){if(e&&e.scriptPublication&&e.scriptPublication.updateScriptIdPart){var i=e.scriptPublication.updateScriptIdPart;p.invalidateCache([i]),window.studyMarket&&(window.studyMarket.resetAllPages(),window.studyMarket.updateFavorites())}t()},showError:function(e){i(e)}};a.onPublish(e,o)})}}),a._scriptPublisher=new o({scriptsProvider:s,categoriesProvider:new r}),a._scriptPublisher.openPublication(e,t))},r.prototype.onPublish=function(e,t){function i(i){var n,r,s,a,l,h;d.publishInProgress=!1,n=i.responseText||i,"ok:"===n.substr(0,3)?(r=!1,t.savePrivacySetting&&(r=!e.is_public,TVSettings.setValue("publishchart.private",r)),c("Chart","{0} Published".format(void 0===e.script_type?"Chart":"Script"),{is_private:r
}),s=n.substr(3),a=JSON.parse(s),d._chartWidgetCollection.metaInfo.id.value()||d._chartWidgetCollection.metaInfo.id.setValue(a.id),t.closeForm&&t.closeForm(),d._lastPublishUrl=a.publishUrl,d.hWnd&&(l=a.publishUrl,t.ideaUrl&&(l=o.render(t.ideaUrl,{idea:a.idea})),d.hWnd.location=l)):(t.showError&&((413===i.status||/^[\d\s]*request.+large/i.test(n.trim()))&&(n=window.t("This chart layout has a lot of objects and can't be published! Please remove some drawings and/or studies from this chart layout and try to publish it again.")),h={html:!0},t.showError(n||$.t("Error occured while publishing"),h)),d.hWnd&&(d.hWnd.close(),d.hWnd=null))}var n,r,s,d=this;d.publishInProgress||(n=d._fillSavingInfo(!0,t&&t.publishAllLayout,!0),d._fillAsyncInfo(n,!0,t&&t.publishAllLayout).then(function(t){var o=e.scriptPublication,n=!(!o||!o.updateScriptIdPart),r=new Promise(function(e,t){if(o){var i;i=n?a.publishNext(o.scriptSource,o.updateScriptIdPart):a.publishNew(o.scriptSource,o.scriptProtection),i.done(function(t){n||o.scriptProtection!==TVScript.Access.ACCESS_CLOSED_NEEDS_AUTH||l.add(window.user.username,t.pineId),e(t.publishedstudyscript_id)}).fail(t)}else e()});n?r.then(function(o){var n={publishedstudyscript_id:o,description:e.description,tags:e.tags};$.ajax({url:"/script-update/",type:"post",dataType:"text",data:$.extend({},t,n),complete:i})},i):r.then(function(o){var n,r,s,a,l,c,u,d;for(o&&(e.publishedstudyscript_id=o),n=e.tags.split(","),r=e.scriptPublication?"Script":"Idea",s=0;s<n.length;s++)h(r+" Publication",r+" Tag",n[s]);e.scriptPublication?(a={open_no_auth:"Open",closed_no_auth:"Protected",closed_needs_auth:"Invite Only"},l=e.scriptPublication.scriptProtection,h("Script Publication","Script Visibility",a[l])):(c=e.is_education?"Education":"Analysis",u=["Neutral","Long","Short"],d=e.is_public?"Public":"Private",h("Idea Publication","Idea Type",c),h("Idea Publication","Idea Strategy",u[e.direction]),h("Idea Publication","Idea Privacy",d)),$.ajax({url:"/publishchart/",type:"post",dataType:"text",data:$.extend({},t,e),complete:i})},i)}),d.publishInProgress=!0,t.onWidget&&!t.ideaUrl||""!==e.name&&""!==e.description&&e.description.length<=4e3&&e.name.length<=64&&($.cookie("publish_request_id",n.publish_request_id,{path:"/"}),r="/loading/",t.ideaUrl&&(s=u.createUrlParams({ideaUrl:t.ideaUrl}),r="/loading?"+s),d.hWnd=window.open(r,"_blank")))},r.prototype._saveChart=function(e,t,i,o,n){var r=i,s=o;return r=function(e){var r,s;if("ok:"===e.substr(0,3))r=e.substr(3),s=JSON.parse(r),t.id.value()||(t.id.setValue(s.id),t.uid.setValue(s.uid)),"function"==typeof i&&i({uid:t.uid.value()},s.count||0);else if("saved_chart_limit_reached"===e||""===e){if("function"==typeof o&&o(),n.noDefaultOnFail)return;d.createGoProDialog({feature:"savedChartsLimit"}).then(function(e){e.open()})}else"function"==typeof o&&o(),$("#error").html(e);$(window).off("beforeunload.savechart")},s=function(r){if(r&&413===r.status)return this._chartSizeLimitExceededDelegate.fire(),void("function"==typeof o&&o.apply(null,arguments))
;n.retry?"function"==typeof o&&o.apply(null,arguments):(n.retry=!0,this._saveChart(e,t,i,o,n))},f.saveChart(e.name,e.short_name,e.resolution,e,t,r,s.bind(this))},r.prototype.saveChartSilently=function(e,t,i,o){var n=this._chartWidgetCollection.metaInfo,r=this._fillSavingInfo(t);if(o=o||{},o.chartName&&(r.name=o.chartName),r.name&&0!==r.name.length||!o.defaultChartName||(r.name=o.defaultChartName),!r.name)return void console.warn("Saving chart with empty name is not allowed");$(window).on("beforeunload.savechart",function(){return $.t("Your chart is being saved, please wait a moment before you leave this page.")}),this._chartAboutToBeSavedDelegate.fire(),this._saveChart(r,n,function(){this._chartWidgetCollection.metaInfo.name.setValue(r.name),this._chartSavedDelegate.fire(!0),e&&e(n)}.bind(this),function(){this._chartSavedDelegate.fire(!1),i&&i.apply(null,arguments)}.bind(this),o),$(window).off("beforeunload.savechart")},t.ChartSaver=r,t.takeSnapshot=s}).call(t,i(4),i(21),i(3))},,,,,,,,function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" width="14" height="14"><path d="M9.901 9.639c-.102-.797.218-1.775.77-2.356l1.438-1.527-2.07-.395c-.784-.142-1.615-.742-2.008-1.446L7.003 2.06 5.97 3.917c-.391.702-1.222 1.301-2 1.443l-2.08.396 1.44 1.526c.547.577.866 1.549.77 2.353l-.262 2.086 1.93-.897a2.95 2.95 0 0 1 1.233-.254c.44 0 .87.085 1.233.254l1.93.897-.263-2.082zm.992-.127l.458 3.624c.014.105-.006.16-.02.176-.028.03-.109.005-.182-.03L7.812 11.73a1.973 1.973 0 0 0-.811-.16c-.302 0-.59.057-.81.16l-3.338 1.552c-.118.056-.164.051-.182.03-.014-.016-.034-.07-.02-.178L3.11 9.51c.06-.503-.162-1.18-.505-1.54L.087 5.302c-.085-.091-.09-.148-.086-.158.003-.01.04-.053.16-.077l3.621-.689c.491-.09 1.069-.506 1.315-.948L7.004 0l1.902 3.43c.246.442.824.859 1.312.947l3.617.69c.123.024.162.068.164.077.003.01-.003.066-.089.157L11.4 7.97c-.348.367-.57 1.045-.506 1.543z"/></svg>'},,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";var o,n,r,s,a;Object.defineProperty(t,"__esModule",{value:!0}),i(13),i(5),o=i(22),n=i(456),r=i(1288),s=i(547),a=function(){function e(e){this._window=e,this._fullscreenApi=new r.FullscreenApi(e.document),this._initFullscreen()}return e.prototype.allocate=function(){var e,t,i,r=this;return this.free(),e=this._window.document,t=$("<div>",e).addClass("js-rootresizer__contents").css({position:"relative",width:"100%",height:"100%"}).prependTo(e.body),this._visibilityApi=new s.VisibilityApi(this._window.document),i={alive:new o(!0),body:new o(t),width:new o,height:new o,availWidth:new o,availHeight:new o,visible:this._visibilityApi.isVisible,fullscreen:this._fullscreenApi.isFullscreen,remove:function(){i.alive.setValue(!1)},attach:function(){i.alive.setValue(!1),r._window.close()},requestFullscreen:function(){r._requestFullscreen()},exitFullscreen:function(){r._exitFullscreen()}},i.alive.subscribe(function(e){e||i!==r._area||r.free()}),this._area=i,this._resizeHandler=function(){var e=i.body.value()[0],t=e.clientWidth,o=e.clientHeight;i.availHeight.setValue(o),i.availWidth.setValue(t),
i.height.setValue(o),i.width.setValue(t)},this._resizeHandler(),$(this._window).on("resize",this._resizeHandler),new n.ResizerDetacherState(i).bridge()},e.prototype.free=function(){if(this._resizeHandler&&($(this._window).off("resize",this._resizeHandler),this._resizeHandler=void 0),this._visibilityApi&&(this._visibilityApi.destroy(),this._visibilityApi=void 0),this._area){var e=this._area;this._area=void 0,e.alive.setValue(!1),e.body.value().remove()}},e.prototype._requestFullscreen=function(){this._fullscreenApi.enter()},e.prototype._exitFullscreen=function(){this._fullscreenApi.exit()},e.prototype._initFullscreen=function(){var e=this,t=this._window.document;this._fullscreenApi.isFullscreen.subscribe(function(i){i?(e._$exitFullscreenButton=$("<div>",t).addClass("tv-exit-fullscreen-button").text($.t("Exit Full Screen (ESC)")).on("click",function(t){t.preventDefault(),e._exitFullscreen()}).appendTo(t.body),e._onExitFullscreenEsc=function(t){27===t.keyCode&&(t.preventDefault(),e._exitFullscreen())},$(t).on("keyup",e._onExitFullscreenEsc)):(e._$exitFullscreenButton&&(e._$exitFullscreenButton.remove(),e._$exitFullscreenButton=void 0),e._onExitFullscreenEsc&&($(t).off("keyup",e._onExitFullscreenEsc),e._onExitFullscreenEsc=void 0)),e._resizeHandler&&e._resizeHandler()})},e}(),t.Root=a},,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";function o(e,t,i){t.toggleClass("i-hidden",""===e.val()),i.fire(e.val())}function n(e){var t,i,n,s=$(l);return e.addClass&&s.addClass(e.addClass),e.withoutControls&&s.addClass("tv-search-row--without-controls"),t=s.find(".js-input-control"),i=s.find(".js-reset-button"),e.placeholder&&t.attr("placeholder",e.placeholder),i[0].addEventListener("click",function(){t.val("").trigger("input").focus()}),n=new r,t.on("input propertychange",o.bind(null,t,i,n)),o(t,i,n),{$control:s,$input:t,inputChangedDelegate:n}}var r,s,a,l;Object.defineProperty(t,"__esModule",{value:!0}),r=i(4),s=i(147),a=i(1121),i(1122),l='<div class="tv-search-row"><input class="tv-search-row__input js-input-control" type="text" name="q" value="" autocomplete="off"><span class="tv-search-row__input-reset i-hidden js-reset-button">'+s+'</span><span class="tv-search-row__search-icon">'+a+"</span></div>",t.createSearchControl=n},,,,,,,function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18px" height="18px"><path fill-rule="evenodd" d="M12.5 11h-.79l-.28-.27A6.47 6.47 0 0 0 13 6.5 6.5 6.5 0 1 0 6.5 13c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L17.49 16l-4.99-5zm-6 0C4.01 11 2 8.99 2 6.5S4.01 2 6.5 2 11 4.01 11 6.5 8.99 11 6.5 11z"/></svg>'},function(e,t){},,,,,function(e,t,i){"use strict";function o(e){var t=function(i){var o=$(i.currentTarget);i.preventDefault(),i.stopPropagation(),n(function(){void 0!==e.$elem&&(e.$elem.off({click:t}),e.$elem.fancybox(e)),o.click()})};"function"!=typeof $.fancybox?void 0!==e.$elem?e.$elem.one({click:t}):n(function(){$.fancybox(e)}):void 0!==e.$elem?e.$elem.fancybox(e):$.fancybox(e)}function n(e){i.e(30).then(function(t){i(1115),e()}.bind(null,i)).catch(i.oe)}
Object.defineProperty(t,"__esModule",{value:!0}),t.lazyFancybox=o},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";(function(e,o){function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){return c||(c=new f(e)),c}var c,h=function(){function e(e,t){var i,o;for(i=0;i<t.length;i++)o=t[i],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),u=i(53),d=i(39),p=n(d),f=function(e){function t(e){r(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.FAV_KEY="studyMarket.favorites",i.FAV_EXTRA_KEY="studyMarket.favorites.extra",i.loadFavs(),u.TVXWindowEvents.on("StudyFavoritesChanged",function(e){var t=JSON.parse(e);i.set("favorites",t.favorites||t),i.set("favoritesExtra",t.favoritesExtra||{})}),loginStateChange.subscribe(null,function(){i.loadFavs()}),i}return a(t,e),h(t,[{key:"loadFavs",value:function(){var e=TVSettings.getJSON(this.FAV_KEY,[]),t=TVSettings.getJSON(this.FAV_KEY_EXTRA,{}),i=this.migrate(e,t);this.set("favorites",i.favs),this.set("favoritesExtra",i.favsExtra)}},{key:"saveFavs",value:function(){var e,t=o.clone(this.get("favorites"));t&&TVSettings.setJSON(this.FAV_KEY,t),(e=o.clone(this.get("favoritesExtra")))&&TVSettings.setJSON(this.FAV_KEY_EXTRA,e)}},{key:"isFav",value:function(e){o.clone(this.get("favorites"))||this.loadFavs();var t=this.favId(e);return-1!==o.clone(this.get("favorites")).indexOf(t)}},{key:"favorite",value:function(e,t){var i,n,r,s;o.clone(this.get("favorites"))&&o.clone(this.get("favoritesExtra"))||this.loadFavs(),i=this.favId(e),n=o.clone(this.get("favorites")),r=o.clone(this.get("favoritesExtra")),s=n.indexOf(i),-1!==s?(n.splice(s,1),delete r[i]):(n.push(i),null!=t&&(r[i]=t)),this.set("favorites",n),this.set("favoritesExtra",r),this.saveFavs(),u.TVXWindowEvents.emit("StudyFavoritesChanged",JSON.stringify({favorites:n,favoritesExtra:r}))}},{key:"migrate",value:function(e,t){var i,o,n=[],r={};for(i=0;i<e.length;i++)o=this.favId(e[i]),-1===n.indexOf(o)&&(n.push(o),r[o]=t[e[i]]);return{favs:n,favsExtra:r}}},{key:"favId",value:function(e){return p.default.cutScriptIdPart(e)||p.default.cutFullId(e)}}]),t}(e.Model);t.getFavoriteScriptsModel=l}).call(t,i(178),i(29))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";function o(e,t){var i,o,n,r,s,a,l=0;for(i=0,
o=t;i<o.length&&(n=o[i],r=n.min,s=n.max,e<r||s<r||(a=Math.min(e,s),l=Math.max(l,a),e!==l));i++);return l}function n(e){var t,i,o,n,r,s=[];if(void 0===e)return[];for(Array.isArray(e)||(e=[e]),t=0,i=e;t<i.length;t++)o=i[t],n=void 0,r=void 0,isFinite(o)?n=r=+o:(n=+o.min,r=+o.max),(n<0||isNaN(n))&&(n=0),isNaN(r)&&(r=1/0),n<=r&&r>0&&s.push({min:n,max:r});return s.sort(function(e,t){return e.min-t.min||e.max-t.max}),s}function r(e,t){if(e.length!==t.length)return!1;for(var i=e.length;i--;){if(e[i].min!==t[i].min)return!1;if(e[i].max!==t[i].max)return!1}return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.determineSize=o,t.processNegotiation=n,t.negotiationsAreEqual=r},function(e,t,i){"use strict";var o,n;Object.defineProperty(t,"__esModule",{value:!0}),o=i(22),n=function(){function e(e){var t,i,n,r,s=this;this._document=e,this.isFullscreen=new o,(t=function(){var e,t,i=["fullscreenElement","webkitFullscreenElement","mozFullscreenElement","mozFullScreenElement","msFullscreenElement"];for(e=0;e<i.length;e++)if((t=i[e])in s._document){s.isFullscreen.setValue(!!s._document[t]);break}})();for(i=0,n=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"];i<n.length;i++)r=n[i],e.addEventListener(r,t,!1)}return e.prototype.enter=function(){var e,t,i,o=this._document.documentElement;for(e=0,t=["requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen"];e<t.length;e++)if(i=t[e],"function"==typeof o[i]){o[i]();break}this.isFullscreen.setValue(!0)},e.prototype.exit=function(){var e,t,i,o=this._document;for(e=0,t=["exitFullscreen","mozCancelFullScreen","mozExitFullscreen","webkitExitFullscreen","msExitFullscreen"];e<t.length;e++)if(i=t[e],"function"==typeof o[i]){o[i]();break}this.isFullscreen.setValue(!1)},e}(),t.FullscreenApi=n},function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports={"color-active-hover-text":"color-gull-gray","color-alert-bg":"color-mirage-1","color-alert-text":"color-loblolly","color-border":"color-bright-gray","color-border-chat-fields":"color-bright-gray","color-border-hover":"color-trout-1","color-border-table":"color-bright-gray","color-brand":"color-picton-blue-1","color-brand-active":"color-curious-blue","color-brand-hover":"color-scooter","color-button-hover-bg":"color-mirage-3","color-chart-page-bg":"color-charade","color-depthrenderer-fill-style":"color-catskill-white","color-depthrenderer-stroke-style":"color-trout-1","color-disabled-border-and-color":"color-ebony-clay","color-disabled-input":"color-bright-gray","color-empty-container-message":"color-slate-gray","color-footer-chart-panel-bg":"color-mirage-3","color-highlight-new":"color-dark-slate-blue","color-icons":"color-slate-gray","color-input-bg":"color-charade","color-input-textarea-readonly":"color-trout-1","color-input-publish-bg":"color-mirage-1","color-item-active-blue":"color-blue-dianne",
"color-item-hover-active-bg":"color-charade","color-item-hover-bg":"color-ebony-clay","color-item-hover-blue":"color-blue-dianne","color-item-selected-blue":"color-blue-dianne","color-link":"color-curious-blue","color-list-item":"color-slate-gray","color-list-nth-child-bg":"color-mirage-3","color-news-highlight":"color-charade","color-pane-bg":"color-mirage-1","color-placeholder":"color-trout-2","color-popup-bg":"color-mirage-3","color-popup-menu-separator":"color-bright-gray","color-row-hover-active-bg":"color-ebony-clay","color-sb-scrollbar-body-bg":"color-trout-2","color-screener-header-bg":"color-mirage-3","color-screener-header-bg-hover":"color-ebony-clay","color-section-separator-border":"color-bright-gray","color-separator-table-chat":"color-bright-gray","color-tag-active-bg":"color-bright-gray","color-tag-hover-bg":"color-charade","color-text-regular":"color-loblolly","color-text-secondary":"color-trout-1","color-toolbar-button-text-active":"color-picton-blue-1","color-toolbar-interactive-element-text-normal":"color-slate-gray","color-toolbar-interactive-element-text-hover":"color-gull-gray","color-toolbar-opened-element-bg":"color-mirage-3","color-tooltip-bg":"color-bright-gray","color-tv-button-checked":"color-slate-gray","color-tv-dialog-caption":"color-athens-gray-2","color-tv-dropdown-item-hover-bg":"color-charade","color-underlined-text":"color-gull-gray","color-widget-pages-bg":"color-mirage-2"}},function(e,t){e.exports={"color-toolbar-button-text-active":"color-seeking-alpha-brand"}},function(e,t,i){"use strict";function o(e,t){var i,r;return void 0===t&&(t=[]),(i=n[e])?l.test(i)?i:(r=i,t.push(e),-1!==t.indexOf(r)?(console.warn("Colors definitions cycled"),i):t.length>a?(console.warn("Too many variables-link in HEX-color search: "+t[0]),null):o(r,t)):null}var n,r,s,a,l;Object.defineProperty(t,"__esModule",{value:!0}),n=i(1444),r=i(9),s={},a=Object.keys(n).length,l=/^#[0-9A-F]{6}$/i,Object.keys(n).forEach(function(e){var t=o(e);s[e]=r.ensureNotNull(t)}),t.colorsPalette=s},function(e,t){e.exports={"color-aqua-spring":"#ebf9f5","color-army-green":"#3d2c12","color-army-green-2":"#31230d","color-athens-gray-1":"#f2f3f5","color-athens-gray-2":"#f7f8fa","color-athens-gray-3":"#eceff2","color-black":"#000000","color-blue-dianne":"#21384d","color-bright-gray":"#363c4e","color-carnation":"#f04561","color-catskill-white":"#e1ecf2","color-charade":"#2f3241","color-charcoal-grey":"#323337","color-curious-blue":"#299dcd","color-dark-blue-grey":"#123440","color-dark-grey":"#292a2d","color-dark-grey-blue":"#28415a","color-dark-sky-blue":"#37a6ef","color-dark-slate-blue":"#194453","color-deep-sea-blue":"#016087","color-ebony-clay":"#262b3e","color-foam":"#d7f0fb","color-gull-gray":"#9db2bd","color-humming-bird":"#d3eef9","color-keppel-1":"#37bc9b","color-keppel-2":"#34b293","color-lavender-blush":"#ffedf0","color-loblolly":"#c5cbce","color-manatee":"#878ca8","color-mandy":"#eb4d5c","color-milk-chocolate":"#6f2626","color-mirage-1":"#131722","color-mirage-2":"#171b29","color-mirage-3":"#1c2030",
"color-mischka":"#d6d8e0","color-morning-glory":"#9addcc","color-oslo-gray":"#8b8e95","color-pale":"#fff2cf","color-pale-sky":"#6b7988","color-picton-blue-1":"#3bb3e4","color-picton-blue-2":"#41bef1","color-puerto-rico":"#3bc2a1","color-purple-brown":"#4e2934","color-purple-brown-2":"#3d2028","color-radical-red":"#ff4a68","color-regent-gray":"#8797a5","color-scooter":"#38acdb","color-silver-tree":"#53b987","color-slate-gray":"#758696","color-sundown":"#ffa4b3","color-sunglow":"#ffca3b","color-tan-hide":"#ff9850","color-trout-1":"#4c525e","color-trout-2":"#4f5966","color-violet-1":"#332738","color-violet-2":"#271d2b","color-water-blue":"#1592e6","color-white":"#ffffff","color-white-ice":"#ebf7fc","color-wild-watermelon":"#ff5773","color-active-hover-text":"color-black","color-alert-bg":"color-white","color-alert-text":"color-black","color-border-table":"color-athens-gray-3","color-brand":"color-picton-blue-1","color-brand-active":"color-curious-blue","color-brand-hover":"color-scooter","color-brand-light":"color-picton-blue-2","color-chart-page-bg":"color-athens-gray-3","color-danger":"color-radical-red","color-depthrenderer-stroke-style":"color-athens-gray-1","color-highlight-new":"color-pale","color-input-bg":"color-white","color-input-publish-bg":"color-white","color-link":"color-brand","color-list-nth-child-bg":"color-athens-gray-2","color-pane-bg":"color-white","color-popup-bg":"color-white","color-popup-menu-separator":"color-catskill-white","color-replay-data-mode":"color-radical-red","color-screener-header-bg":"color-athens-gray-2","color-success":"color-keppel-1","color-toolbar-button-text-active":"color-water-blue","color-toolbar-interactive-element-text-normal":"color-trout-1","color-toolbar-interactive-element-text-hover":"color-mirage-1","color-toolbar-opened-element-bg":"color-athens-gray-2","color-tooltip-bg":"color-ebony-clay","color-tv-dialog-caption":"color-trout-2","color-tv-dropdown-item-hover-bg":"color-athens-gray-1","color-underlined-text":"color-slate-gray","color-widget-pages-bg":"color-white","color-growing":"color-keppel-1","color-falling":"color-radical-red","color-label-long":"color-success","color-label-short":"color-danger","color-label-education":"color-sunglow","color-label-neutral":"color-gull-gray","color-collapse-tabs-border":"color-athens-gray-3","color-border":"#dadde0","color-border-chat-fields":"#c9cbcd","color-border-hover":"#c8c8c8","color-button-hover-bg":"#f2f2f2","color-depthrenderer-fill-style":"#555555","color-disabled-border-and-color":"#ececec","color-disabled-input":"#ececec","color-empty-container-message":"#8a8a8a","color-footer-chart-panel-bg":"#f1f3f6","color-icons":"#7d7d7d","color-input-textarea-readonly":"#555555","color-item-active-blue":"#eff9ff","color-item-hover-active-bg":"#f1f3f6","color-item-hover-bg":"#edf1f2","color-item-hover-blue":"#c6e9f8","color-item-selected-blue":"#eafafe","color-list-item":"#888989","color-news-highlight":"#f2f5f8","color-placeholder":"#adaeb0","color-row-hover-active-bg":"#f1f3f6","color-sb-scrollbar-body-bg":"#d8d8d8",
"color-screener-header-bg-hover":"#f1f3f6","color-section-separator-border":"#b5b7b9","color-separator-table-chat":"#eaecef","color-tag-active-bg":"#cfdce3","color-tag-hover-bg":"#dce6ea","color-text-regular":"#4a4a4a","color-text-secondary":"#b4b4b4","color-tv-button-checked":"#757575","color-seeking-alpha-brand":"#ff7200"}},,,,,,,,,,,,,,,,,,,function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M10.5 5.333h-.75V3.81C9.75 1.707 8.07 0 6 0 3.93 0 2.25 1.707 2.25 3.81v1.523H1.5c-.825 0-1.5.686-1.5 1.524v7.62C0 15.313.675 16 1.5 16h9c.825 0 1.5-.686 1.5-1.524V6.857c0-.838-.675-1.524-1.5-1.524zM6 12c-.825 0-1.5-.675-1.5-1.5S5.175 9 6 9s1.5.675 1.5 1.5S6.825 12 6 12zm2.325-6.75h-4.65v-1.5A2.326 2.326 0 0 1 6 1.425 2.326 2.326 0 0 1 8.325 3.75v1.5z"/></svg>'},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";var o,n,r,s,a;Object.defineProperty(t,"__esModule",{value:!0}),o=i(48),n=i(3),r=i(22),s=!n.enabled("hide_left_toolbar_by_default"),a=o.getBool("ChartDrawingToolbarWidget.visible",s),t.isDrawingToolbarVisible=new r(a)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";(function(e){function t(e,t){var i,o;if(t)try{i=JSON.parse(decodeURIComponent(t)),i.forEach(function(t){e.insertStudy(t.id,!1,t.overlay,t.inputs)})}catch(i){o=t.split(/\x1f/)||[],o.forEach(function(t){e.insertStudy(t,!1)})}}var o,n,r,s,a,l,c,h,u,d,p,f,_,m,g,v,y,b,S,w,T,P,C,x,E,L,I,A,k,M,O,D,V,R,B,N,z,F,H,W,U,j,q,G,Y,X,K,J,Z,Q,ee,te,ie,oe,ne,re,se,ae;if(i(433),i(1407),e.enabled("use_localstorage_for_settings")&&TVSettings.sync(),o=i(64).fetch,n=i(900),r=i(986),i(209),s=i(1062).ChartSaver,a=i(1062).takeSnapshot,l=i(1058),c=i(1986),h=i(93),u=i(95),d=i(176),p=i(203),f=i(32),_=i(1987),m=i(33),g=i(1988).EmbedFooterWidget,v=i(1989),y=i(1780).isDrawingToolbarVisible,b=i(25).isFeatureEnabled,S=i(236),w=window.initData,T=window.urlParams,P=w.defSymbol,C=w.def_extended_hours,x=w.hide_ideas,E=w.hide_ideas_button,L=w.def_interval,I=w.def_timezone,A=w.widget_is_popup,k=w.customer,M=T.style||w.def_style,O=T.range||w.def_range,D=T.enablepublishing||w.def_enable_publishing,V=T.withdateranges||w.def_withdateranges,R=w.def_save_image,B=!(T.hideIdeas||T.hideideasbutton||x||E),void 0!==T.saveimage&&(R="0"!==T.saveimage),e.resetAllProductFeatures(),e.enableProductFeatures(),e.setEnabled("header_screenshot",R?1:0),T.fundamental&&(e.setEnabled("create_volume_indicator_by_default",0),e.setEnabled("header_chart_type",0),e.setEnabled("header_compare",0),e.setEnabled("display_market_status",0),e.setEnabled("delete_button_in_legend",0),
e.setEnabled("study_buttons_in_legend",0),e.setEnabled("format_button_in_legend",0),e.setEnabled("show_hide_button_in_legend",0),e.setEnabled("fundamental_widget",1),e.setEnabled("legend_context_menu",0),E=!0,x=!0,V=!0,L="D","seekingalpha"===k&&(V=!1,e.setEnabled("header_resolutions",0),e.setEnabled("header_fullscreen_button",0))),(void 0===T.symboledit?w.def_hide_symbol_edit:!parseInt(T.symboledit))&&e.setEnabled("header_symbol_search",0),window.headerChartPanel=$(".header-chart-panel"),N=$("#footer-chart-panel"),window.pro=new l(window.shopConf),P=T.symbol||P,"cme"===T.symbology&&(P=function(e){var t,i=new u.SymbolToken(e);return i.root()?(t=c.convertSymbolDataToTV(i.root(),i.exchange(),T.venue),"ok"!==t.status?e:(t.data.symbol&&i.root(t.data.symbol),t.data.exchange&&i.exchange(t.data.exchange),""+i)):e}(P)),z=C,"1"===T.extended_hours&&(z=!0),"0"===T.extended_hours&&(z=!1),F=p(parent),H=i(1093).Root,W=i(1996).ChartPage,U=new H(window),j=new W(U.allocate()),O&&(q=ChartApiInstance.availableTimeFrames(null,f.STATUS_READY).find(function(e){return e.value===O}))&&(T.range=O,T.interval=q.targetResolution),G=x,Y=window.chartWidgetCollection=new r({resizerBridge:j.allocate({areaName:"center"}),padding:5,edge:T.padding||6,widgetOptions:{onWidget:!0,widgetCustomer:k,hideIdeas:G,controlBar:!0,addVolume:!T.hidevolume,handleSessionErrors:!0,muteSessionErrors:!e.enabled("referral_program_for_widget_owners"),defSymbol:P,defInterval:T.interval||L,defStyle:parseInt(M)||void 0,defExtendedHours:z,timezone:T.timezone||I,withDateRanges:!!V,defTimeframe:O,isDrawingToolbarVisible:y}}),window.chartWidget=Y.activeChartWidget.value(),Y.readOnly()||(window.studyMarket=new v(Y,window.user,{onWidget:!0,fundamentalsOnly:!!T.fundamental})),h.bindToChartWidgetCollection(Y),T.theme&&(K=T.theme.toLowerCase(),(J=S.themes[K])&&(S.setTheme(K),J.noChartTheme||(X=o("/standard-theme/?themeName="+encodeURIComponent(T.theme)).then(function(e){return e.json()}).then(function(e){if(e.content){var t=JSON.parse(e.content);return T.style&&(t.mainSourceProperties.style=parseInt(T.style)),T.fundamental&&(t.mainSourceProperties.visible=!1),n.applyDefaultsOverrides(t,{mainSeriesProperties:"mainSourceProperties"},!0),t}},function(){})))),chartWidget.withModel(null,function(){var e=chartWidget.model().mainSeries();Promise.resolve(X).then(function(e){e&&chartWidget.model().model().restoreTheme(e)}),e.onSymbolResolved().subscribe(e,function(){e.checkSessStudy(),t(chartWidget,T.studies)},!0),e.onDataLoaded().subscribe(this,function(e){"series_completed"===e.method&&Promise.resolve(X).then(function(){$(".loading-indicator").hide()})}),T.fundamental&&chartWidget.initAsFundamental({id:T.fundamental||"Script$EDGR_DIVIDEND_YIELD_V2@tv-scripting",percentage:T.percentage}),A&&function(){var e=$('<button class="_tv-button tv-embed-button">Cancel</button>').click(function(){window.close()}),t=$('<button class="_tv-button tv-embed-button">Save & Close</button>').click(function(){Z.saveChartSilently(function(e){F.post(window.opener,"pushChartId",e.uid.value())},!0,function(){},{
chartName:"Popup Chart: "+window.location.host})});N.append($('<div class="tv-embed-buttons-contaner"></div>').append(e,t))}()}),D&&(new g({resizerBridge:j.allocate({areaName:"footer"}),publishOptions:{onWidget:!0,publishSource:T.publishsource,ideaUrl:T.idea_url}}),$.post("/accounts/status_full/",{},function(e){e.is_authenticated&&(window.is_authenticated=!0,window.user=e.user_data)})),Z=window.saver=new s(Y),TradingView.setWidgetLogoOverlayVisibility=function(e){F.post(parent,"setLogoOverlayVisibility",{visible:!!e})},void 0===T.hidesidetoolbar||+T.hidesidetoolbar?$(".tv-side-toolbar").addClass("js-hidden"):i.e(38).then(function(e){var t=i(23),o=i(169),n=i(2259).DrawingToolbar,r=i(2260),s=j.allocate({areaName:"left"});o.render(t.createElement(n,{chartWidgetCollection:Y,forceVisible:!(void 0===T.hidesidetoolbar||+T.hidesidetoolbar),resizerBridge:s}),s.body.value()[0]),window.lineToolPropertiesToolbar=new r(Y)}.bind(null,i)).catch(i.oe),T.hidetoptoolbar||(Q=i(1998).resolveByCustomer(k),i.e(39).then(function(t){var o=i(23),n=i(169),r=i(2261).HeaderToolbar,s=j.allocate({areaName:"top"});Q.then(function(e){return e.getToolSet()}).then(function(t){n.render(o.createElement(r,{tools:t,accentScreenshot:!0,chartSaver:Z,chartApiInstance:ChartApiInstance,chartWidgetCollection:Y,defaultIntervals:Object.keys(ChartApiInstance.defaultResolutions()),ideas:B,hideProperties:!0,hideStudyTemplates:!0,resizerBridge:s,popupButton:T.showpopupbutton,studyMarket:window.studyMarket,windowMessageService:F,isFundamental:!!T.fundamental,allowedModes:e.enabled("caption_buttons_text_if_possible")?void 0:["medium"]}),s.body.value()[0])})}.bind(null,i)).catch(i.oe)),T.toolbarbg&&(ee=m.isHexColor(T.toolbarbg)?"#"+T.toolbarbg:T.toolbarbg,$("#widget-container").css("background-color",ee)),window.quoteSessionMultiplexerInstance={},window.quoteSessionMultiplexerInstance.simple=new d("simple"),window.quoteSessionMultiplexerInstance.full=new d,e.enabled("onchart_messages")&&i.e(45).then(function(e){var t=i(1781).OnChartMessages;window.onChartMessages=new t({parent:$("#chart-area"),readonly:!0,chartWidgetCollection:Y})}.bind(null,i)).catch(i.oe),!A){if(te=[],ie=[],T.watchlist&&(ie=T.watchlist.split(/\x1f/).map(function(e){return e.trim()}).filter(Boolean)),(ie.length||T.editablewatchlist)&&(oe={type:"watchlist",properties:{list:ie}},T.editablewatchlist&&(oe.readonly=!1,oe.data={hideTitleButton:!0},oe.settingsKey="onwidget.watchlist"),te.push(oe)),"details"in T&&te.push({type:"detail"}),"news"in T)if("newsvendors"in T)for(ne=T.newsvendors.split(/\x1f/),re=0;re<ne.length;re++)switch(ne[re]){case"yahoo":case"headlines":te.push({type:"news",properties:{provider:{en:"yahoo"}}});break;case"stocktwits":te.push({type:"news",properties:{provider:{en:"stocktwits"}}})}else te.push({type:"news",properties:{provider:{en:"yahoo"}}}),te.push({type:"news",properties:{provider:{en:"stocktwits"}}});"widgetbarwidth"in T&&(se=+T.widgetbarwidth),(!isFinite(se)||se<200)&&(se=200),ae=te.length?[{title:"Widgets",icon:"base",widgets:te.map(function(e){return e})}]:[],
T.hotlist&&ae.push({title:"Hotlists",icon:"hotlists",widgets:[{type:"hotlist",properties:{exchangeByLocale:{default:window.DEFAULT_EXCHANGES.en},groupByLocale:{default:"volume_gainers"}}},{type:"hotlist",properties:{exchangeByLocale:{default:window.DEFAULT_EXCHANGES.en},groupByLocale:{default:"percent_change_gainers"}}},{type:"hotlist",properties:{exchangeByLocale:{default:window.DEFAULT_EXCHANGES.en},groupByLocale:{default:"percent_change_loosers"}}}]}),T.calendar&&ae.push({title:"Calendar",icon:"calendar",widgets:[{type:"reuters_calendar",properties:{}},{type:"earnings_calendar",properties:{},isEnabled:b("earnings_calendar")}]}),ae.length&&i.e(26).then(function(e){var t;i(1247).loadWidgetBarModules=function(e){e({Watchlist:i(1351),NewsWidget:i(1352),Detail:i(1353),CalendarWidget:i(1354),ReutersCalendarWidget:i(1084),HotlistWidget:i(1355),Messages:i(1078),PublicChatsWidget:i(558),NotificationsWidgets:i(1356),NotesWidget:i(1357),AlertsManageWidget:i(1358),AlertsLogWidget:i(1359),MarketSummaryWidget:i(1360),ChatWidget:i(911)})},t=i(1361),ae.forEach(function(e){e.widgets=e.widgets.filter(function(e){return!(void 0!==e.isEnabled&&!e.isEnabled)})}),window.widgetbar=new t({resizerBridge:j.allocate({areaName:"right"}),readonly:!0,state:{width:se,pages:ae},overlayThreshold:640,showCloseButton:!0},{news:{options:{permanentProvider:!0}}})}.bind(null,i)).catch(i.oe)}chartWidget.onDisconnected().subscribe(null,function(e){$(".loading-indicator").hide(),e&&_.showCriticalErrorMessage(function(){ChartApiInstance.disconnect(),setTimeout(function(){ChartApiInstance.connect(),chartWidget.reconnect()},500)})}),chartWidget.onReconnectBailout().subscribe(null,function(){_.showDisconnectedMessage(function(){setTimeout(function(){ChartApiInstance.connect()},0)})}),$(".tv-content").bind("contextmenu",function(e){var t=$(e.originalEvent.target);if(!t.is("input")&&!t.is("textarea"))return!1}),T.whotrades&&e.setEnabled("whotrades_auth_only",!0),$(window).resize(),$(".loading-indicator").remove(),function(){var e,t=function(t){void 0!==e&&window.quoteSessionMultiplexerInstance.simple.unsubscribe("widgetQuoteListener",e),e=t,window.quoteSessionMultiplexerInstance.simple.subscribe("widgetQuoteListener",t,function(e){var t,i,o=e.values,n=["change","change_percent","last_price","original_name","short_name","exchange","description","volume"],r={};for(t=0;t<n.length;t++){if(i=n[t],!o.hasOwnProperty(i))return;r[i]=o[i]}r.volume=1e100===o.volume?void 0:o.volume,F.post(parent,"quoteUpdate",r)})};chartWidget.withModel(null,function(){var e=chartWidget.model().mainSeries();e.properties().symbol.subscribe(e,function(e){t(e.value())})}),F.on("quoteSubscribe",function(){var e=chartWidget.model().mainSeries().properties().symbol.value();t(e)}),F.on("imageURL",function(e,t){a(Y,function(e){t(e)},function(){t("")},{wl:"1"===T.whitelabel},w.cme_widget?{cme:!0}:void 0)}),F.on("chartID",function(e,t){delete chartWidget.metaInfo().id,Z.saveChartSilently(function(e){t(e.uid)},function(){t("")},!0)}),F.on("symbolInfo",function(e,t){
var i=chartWidget.model().mainSeries().symbolInfo(),o=chartWidget.model().mainSeries().properties().interval.value();t({name:i.name,exchange:i.exchange,description:i.description,type:i.type,interval:o})}),F.on("widgetReady",function(e,t){chartWidget.withModel(null,function(){var e;chartWidget.model().mainSeries().symbolInfo()?t():(e=function(){t(),chartWidget.model().mainSeries().onSymbolResolved().unsubscribe(null,e)},chartWidget.model().mainSeries().onSymbolResolved().subscribe(null,e))})})}(),window.applyStudiesOverrides=function(e){e&&window.chartWidgetCollection.applyStudiesOverrides(e)}}).call(t,i(3))},function(e,t,i){"use strict";var o={},n={XCBT:"CBOT",XNYM:"NYMEX",XCME:"CME",XCEC:"COMEX"};o.convertSymbolDataToTV=function(e,t,i){return i=2===i||"floor"===i||"pit"===i?"PIT":"GBX",t&&n[t]?{status:"ok",data:{symbol:e,exchange:n[t]+"_"+i}}:{status:"error",data:"Exchange `"+t+"` is not supported"}},e.exports=o},function(e,t,i){"use strict";function o(e,t,o,n){null===c&&(c=(0,a.createDialog)({width:o||600,closeOnOutsideClick:!1,destroyOnClose:!0,type:"modal",contentWrapTemplate:'<div class="tv-dialog__section tv-dialog__section--no-border"><div class="tv-text tv-text--position-outside"></div></div>',actionsWrapTemplate:'<div class="tv-dialog__section tv-dialog__section--actions tv-dialog__section--actions-adaptive tv-dialog__section--no-border">',title:e,content:t,actions:[{name:"reconnect",type:"primary",text:$.t("Reconnect")},{name:"report",type:"primary",text:$.t("Report a data issue")}]}).on("action:reconnect",function(e){e.close(),n()}).on("action:report",function(e){e.setDestroyOnClose(!1),e.close(),runOrSignIn(function(){i.e(33).then(function(t){new(i(950))({modal:!0}).open().on("destroy",function(){e.destroy(),n()})}.bind(null,i)).catch(i.oe)},{source:"Report data issue from disconnect dialog"})}).on("destroy",function(){c=null}).open())}function n(e){(0,l.trackEvent)("System","Disconnect");var t='<div style="text-align: justify;"><p>'+$.t("Connection to server was lost.")+"</p><p>"+$.t("How to fix:")+'</p><ol class="tv-list-plain"><li>'+$.t("Check firewall settings and make sure access to websocket is open. Then click Reconnect or press F5.")+"</li><li>"+$.t('Your browser doesn&rsquo;t support <strong>WebSocket</strong> technology and does not have <strong>Adobe Flash</strong> plugin installed.<br>Please, <a href="http://get.adobe.com/flashplayer/" target="_blank">install Flash plugin</a> or consider updating to one of these modern browsers with WebSocket support:')+'<ul class="tv-list-plain"><li><a href="http://www.google.com/chrome/" target="_blank">Chrome</a></li><li><a href="https://www.mozilla.org/en-US/firefox/new/" target="_blank">Firefox</a></li></ul></li><li>'+$.t("Server broke the connection. Click Reconnect or press F5.")+"</li></ol></div>";o($.t("Connection Is Lost"),t,void 0,e)}function r(e){"MozWebSocket"in window&&TradingView.WEB_SOCKET_WAS_CONNECTED?setTimeout(n.bind(null,e),15e3):n(e)}function s(e){(0,l.trackEvent)("System","Critical Error"),
o($.t("Oops, something went wrong"),$.t("Please report the issue or click Reconnect."),500,e)}var a,l,c;Object.defineProperty(t,"__esModule",{value:!0}),t.showDisconnectedMessage=r,t.showCriticalErrorMessage=s,a=i(56),l=i(20),c=null},function(e,t,i){"use strict";var o,n;Object.defineProperty(t,"__esModule",{value:!0}),i(5),o=i(927),i(1407),n=function(){function e(e){var t=e.resizerBridge,i=e.publishOptions;this._publishOptions=i,t.negotiateHeight(31),t.body.subscribe(this._render.bind(this),{callWithLast:!0})}return e.prototype._render=function(e){var t,i,n=this;$(e).empty().css("overflow","hidden"),t=$("<div>",e).attr("id","footer-chart-panel").addClass("publish-widget").appendTo(e),i=$("<div>",e).addClass("publish-buttons").appendTo(t),"dailyfx"===this._publishOptions.publishSource&&$('<label class="usage-help">For a guide on using Trading View charts, please click <a target="_blank" href="https://media.dailyfx.com/docs/TradingView.pdf">here</a>.</label>').appendTo(t),$('<a class="publish-chart-button"></a>').html(window.t("Publish Idea")).on("click",function(e){e.preventDefault(),o.publishChartWidget(n._publishOptions)}).addClass("apply-common-tooltip").attr("title",$.t("Publishing will share your trading idea with the financial web and the investing community so that others can comment and rate it.")).appendTo(i)},e}(),t.EmbedFooterWidget=n},function(e,t,i){"use strict";(function(t,o,n){function r(e,i,n){this.HIGHLIGHT_STUDY_NUM_FLICKS=2,this.SCROLL_TOLERANCE=10,this._BASIC_STUDIES_PACKAGE_NAME="tv-basicstudies",this._CUSTOM_STUDIES_PACKAGE_NAME="Script$USER",this._PUBLISHED_STUDIES_PACKAGE_NAME="Script$PUB",this._STANDARD_STUDIES_PACKAGE_NAME="Script$STD",this._SCRIPTING_PACKAGE_NAME="tv-scripting",this._FUNDAMENTAL_PACKAGE_NAME="Script$EDGR",this._BASIC_STUDIES_PAGE_NAME=t.enabled("plain_studymarket")?$.t("Technical Analysis"):$.t("Built-ins"),this._FUNDAMENTALS_PAGE_NAME=$.t("Fundamentals"),this._dialog=null,this._selectedStudy=null,this._keyDownListener=null,this.visibilityChanged=new o,this._chartWidgetCollection=e,this._chart=e.activeChartWidget.value(),this._options=$.extend({},this.DEFAULT_OPTIONS,n||{}),this.concretizeOptions(),this._user=i,this.setup(),pro.packagesUpdated.subscribe(this,this.onLoginStateChange),this.favsModel=C(),this.favsModel.on("change:favorites",this.updateFavorites,this),this.favsModel.on("change:favorites",this.agreeOnFavorite,this)}var s,a,l,c=i(9).assert,h=i(108),u=i(83).SidebarCustomScroll,d=i(39),p=i(56).createDialog,f=i(255).createConfirmDialog,_=i(67).createNoticeDialog,m=i(1114).createSearchControl,g=i(14),v=i(48),y=i(88),b=i(179),S=i(928).AddSymbolCheckbox,w=i(148),T=i(129),P=i(944),C=i(1254).getFavoriteScriptsModel,x=i(534),E=i(112),L=i(943).PinePerm,I=i(230).Version,A=i(207),k=i(62).unifiedSpinner,M=i(1127).lazyFancybox,O=i(929),D=i(0).getLogger("Chart.StudyMarket");i(1990),i(1991),i(1463),
s='<div class="tv-insert-indicator-dialog__body js-dialog__scroll-wrap"><div class="tv-insert-indicator-dialog__left-panel">{{^minimized}}<div id="js-search-placeholder"></div>{{/minimized}}<div class="tv-insert-indicator-dialog__left-panel-content-wrapper js-left-panel-wrapper"><div class="tv-insert-indicator-dialog__tabs-viewport js-tabs-viewport"><div class="tv-insert-indicator-dialog__tabs-container js-tabs-container"></div></div></div></div><div class="tv-insert-indicator-dialog__right-panel js-right-panel">{{#minimized}}{{#withSearch}}<div id="js-search-placeholder"></div>{{/withSearch}}{{/minimized}}<div class="tv-insert-indicator-dialog__pages js-pages"></div></div></div>',a='<div class="tv-insert-indicator-dialog__tabs-group"><div class="tv-insert-indicator-dialog__tab tv-insert-indicator-dialog__tab--group-head js-tab js-tab-head">{{title}}<span class="tv-caret"></span></div><div class="tv-insert-indicator-dialog__tabs"></div></div>',l='<div class="js-study-item tv-insert-study-item {{^withFavorites}}i-without-stars{{/withFavorites}}">{{#withFavorites}}<div class="tv-insert-study-item__favorite-icon js-favorite-icon"><span class="tv-insert-study-item__star tv-insert-study-item__star--filled">'+i(910)+'</span><span class="tv-insert-study-item__star tv-insert-study-item__star--empty">'+i(1070)+'</span></div>{{/withFavorites}}<div class="tv-insert-study-item__title"><div class="tv-insert-study-item__title-text" title="{{titleTooltip}}">{{{title}}}</div>{{#isStrategy}}<div class="tv-insert-study-item__strategy-icon">'+i(1992)+'</div>{{/isStrategy}}{{#showAccessIcon}}<div class="{{accessIconClass}} apply-common-tooltip" title="{{accessTooltip}}">'+i(1653)+'</div>{{/showAccessIcon}}</div>{{#publishedOrUserScript}}<div class="tv-insert-study-item__author {{^author}}i-empty{{/author}}"><a href="/u/{{author}}" target="_blank">{{author}}</a></div><div class="tv-insert-study-item__likes {{^likes}}i-empty{{/likes}}" title="'+$.t("Total agrees")+'">{{likes}}</div><div class="tv-insert-study-item__buttons"><div class="tv-insert-study-item__btn tv-insert-study-item__show-source-btn js-show-source-btn" title="'+$.t("Source code")+'">'+i(1993)+'</div>{{#showMoreButton}}<div class="tv-insert-study-item__btn tv-insert-study-item__show-more-btn js-show-more-btn" title="'+$.t("Read more...")+'">'+i(1994)+'</div>{{/showMoreButton}}{{#deleteButton}}<div class="tv-insert-study-item__btn tv-insert-study-item__delete-btn js-remove-study" title="'+$.t("Delete script")+'">'+i(152)+"</div>{{/deleteButton}}</div>{{/publishedOrUserScript}}</div>",r.prototype.destroy=function(){},r.prototype.setup=function(){this._initialized=!1,this._loadMore=null,this._$economyTabInput=null,this._$symbolSearchPopup=null,this._market=null,this._studies=null,this._packagesWithTabNames={},this._pages={},this._tabs={},this._subProductIds={},this.favsChanged=new o,this._previousInviteOnlyStudiesIds=[],this._options.onWidget||L.listScripts().then(function(e){this._previousInviteOnlyStudiesIds=e}.bind(this)),this.studiesReady=new $.Deferred,
this.marketPagesReady=new $.Deferred,this._pubSearchCount=[0,0,0],this._pubSearchCanLoad=[!0,!0,!0],this._pubSearchEntries=[],this._pubSearchCache=[],this._pubSearchDfd=null,this._pubSearchPageShown=!1,this._w_market_tabs=null,this._w_technical_tabs=null},r.prototype.init=function(){if(this._initialized)return void this.getStudyInfo();this.setupMarketInfo(),this.getStudyInfo(),this.setUser(this._user),this.prepareLayout(),this.attachHandlers(),this._initialized=!0},r.prototype.DEFAULT_OPTIONS={onWidget:!1,hideMarketPages:!1,selectBasicPage:!0,minimized:!1,searchKeywords:{earning:RegExp("EPS"),earnings:RegExp("EPS"),"trailing twelve months":RegExp("TTM")},popularFundamentals:[{name:$.t("Income Statement"),studies:["Script$EDGR_TOTAL_REVENUE_V2@tv-scripting","Script$EDGR_DILUTED_EPS_NET_INCOME_V2@tv-scripting","Script$EDGR_NET_INCOME_V2@tv-scripting","Script$EDGR_EBITDA_V2@tv-scripting","Script$EDGR_EBIT_V2@tv-scripting","Script$EDGR_EQUITY_EARNINGS_V2@tv-scripting"]},{name:$.t("Profitability"),studies:["Script$EDGR_GROSS_MARGIN_V2@tv-scripting","Script$EDGR_AFTER_TAX_MARGIN_V2@tv-scripting","Script$EDGR_GROSS_PROFIT_V2@tv-scripting"]},{name:$.t("Dividend"),studies:["Script$EDGR_DIVIDEND_YIELD_V2@tv-scripting","Script$EDGR_DIVIDENDS_PAID_V2@tv-scripting"]},{name:$.t("Current Valuation"),studies:["Script$EDGR_MARKET_CAP_V2@tv-scripting","Script$EDGR_PE_RATIO_V2@tv-scripting","Script$EDGR_PEG_RATIO_V2@tv-scripting","Script$EDGR_PS_RATIO_V2@tv-scripting","Script$EDGR_PRICE_BOOK_VALUE_PER_SHARE_V2@tv-scripting"]},{name:$.t("Other"),studies:["Script$EDGR_DEBT_TO_EQUITY_V2@tv-scripting","Script$EDGR_FREE_CASH_FLOW_V2@tv-scripting","Script$EDGR_PRICE_CASH_FLOW_PER_SHARE_V2@tv-scripting","Script$EDGR_RETURN_ON_EQUITY_V2@tv-scripting","Script$EDGR_ACCOUNTING_CHANGE_V2@tv-scripting","Script$EDGR_ACCOUNTS_PAYABLE_V2@tv-scripting"]}]},r.prototype._PAGE_KEY="studyMarket.page",r.prototype._ECONOMY_TAB=$.t("Economy & Symbols"),r.prototype._PUB_SEARCH_ENTRIES_ON_PAGE=20,r.prototype.onCustomScriptModified=function(){this._initialized&&(this.getStudyInfo(),this.resetCustomScriptPage(),this.loadFavorites(),this.updateFavorites(),this.updateSearchPage())},r.prototype.loadFavorites=function(){this.favsModel.loadFavs()},r.prototype.concretizeOptions=function(){t.enabled("study_market_minimized")&&(this._options.hideMarketPages=!0,this._options.selectBasicPage=!0,this._options.minimized=!0),this._options.onWidget&&(this._options.hideMarketPages=!0)},r.prototype.setupMarketInfo=function(){this._market={products:pro.getStudies(),order:pro.getStudiesOrder()},this.setupSubproductsInfo()},r.prototype.setupSubproductsInfo=function(){var e,t,i,o,n;for(this._subProductIds={},e=Object.keys(this._market.products),t=0;t<e.length;++t)if(i=this._market.products[e[t]],void 0!==i.subproduct_ids)for(o=0;o<i.subproduct_ids.length;++o)n=i.subproduct_ids[o],this._subProductIds[n]=i.id},r.prototype.getStudyInfo=function(){this._chart.withModel(this,function(){this.setupStudyInfo()})},r.prototype.setupStudyInfo=function(){
var e,t,i=this._chartWidgetCollection.activeChartWidget.value().model().studiesMetaData(),o=i.length,n=this.setupAddonsInfo();this._studies={},i=i.filter(function(e){return!this.isHidedStudy(e)},this),i.forEach(function(e){var t,i=this.getStudyPackageName(e.id);!(this._options.minimized&&i!==this._BASIC_STUDIES_PACKAGE_NAME||this._options.onWidget&&d.isScriptStrategy(e))&&(t=this.resolvePackageName(i),c(void 0!==t,"Cannot resolve packageName "+i),this._studies[t]=this._studies[t]||[],this._studies[t].push(e))}.bind(this),this),e=this._studies,t=this,n.then(function(i){var n,r,s;if(e===t._studies){for(n in i)if(n in e)for(r=0;r<i[n].length;r++){for(s=0;s<e[n].length&&e[n][s].scriptIdPart!==i[n][r].scriptIdPart;)s++;s===e[n].length&&e[n].push(i[n][r])}else e[n]=i[n];t._studies_length!==o&&(t._studies_length=o,t.setUser(t._user)),t.studiesReady.resolve()}})},r.prototype.setupAddonsInfo=function(){var e,t,i,o,n,r=[],s={};for(e in this._market.products)t=this._market.products[e],pro.hasPackage(e)&&t.subproduct_ids&&t.subproduct_ids[0]&&!t.disabled&&(i=t.subproduct_ids[0],o=i.split("$")[1],s[o]=e,r.push(E.requestPineAddons(o)));return n=this,Promise.all(r).then(function(e){return e.reduce(function(e,t){var i,o;return i=t[0].scriptIdPart.split("_")[0],o=[],n._fillScriptsMetainfo(t,o),e[s[i]]=o,e},{})})},r.prototype.resolvePackageName=function(e){return e in this._subProductIds?this._subProductIds[e]:e},r.prototype.setUser=function(e){window.is_authenticated?this.setupUserData(e):this.setAnonymous()},r.prototype.setupUserData=function(e){this._user=e,this.loadFavorites(),this.updateMarketPages()},r.prototype.setAnonymous=function(){this.setupUserData(null),this.favsChanged.fire()},r.prototype.isHidedStudy=function(e){var t;return this._options.onWidget&&(t="IchimokuCloud@tv-basicstudies"===e.id),!!e.is_hidden_study&&!t},r._breakpointDevice="phone-vertical",r.prototype._switchPagesContainer=function(e,t){this._options.minimized||(e===r._breakpointDevice?this._w_pages.detach().appendTo(this._widget.find(".js-left-panel-wrapper")):t===r._breakpointDevice&&this._w_pages.detach().appendTo(this._widget.find(".js-right-panel")))},r.prototype.prepareLayout=function(){this._widget=$(n.render(s,{withSearch:t.enabled("study_dialog_search_control"),minimized:this._options.minimized})),this._w_tabs=this._widget.find(".js-tabs-container"),this._w_pages=this._widget.find(".js-pages"),this._loadMore=null,this.preparePages(),!this._options.selectBasicPage||this._options.fundamentalsOnly||y.device===r._breakpointDevice&&!this._options.minimized?this._options.fundamentalsOnly&&(y.device!==r._breakpointDevice||this._options.minimized)?this.selectPage(this._FUNDAMENTALS_PAGE_NAME):y.device===r._breakpointDevice&&this.selectPage(""):this.selectPage(this._BASIC_STUDIES_PAGE_NAME),this._scroll=new u(this._widget.find(".js-tabs-viewport"),this._w_tabs,{showBottomShadow:!1})
;var e='<div class="tv-dialog__section tv-dialog__section--title js-dialog__drag tv-insert-indicator-dialog__title-container js-title-container"><div class="tv-insert-indicator-dialog__back-button js-back-button js-dialog__no-drag">'+i(238)+'</div><div class="js-title-text tv-dialog__title tv-insert-indicator-dialog__title-text">{{{ title }}}</div></div>';this._dialog=p({title:" ",titleTemplate:e,contentWrapTemplate:this._widget,addClass:"tv-insert-indicator-dialog "+(this._options.minimized?"i-minimized":""),width:this._options.minimized?490:842,height:580,withScroll:!1,focusFirstControl:!1,closeOnClickAtOtherDialogs:!1,isClickOutFn:function(e){var t=O.instance();if(t)return t.isEventOut(e);if(this._$symbolSearchPopup)return this._$symbolSearchPopup[0]!==e.target&&!this._$symbolSearchPopup[0].contains(e.target)&&void 0}.bind(this)}),this._dialog.on("afterClose",this._onDialogClosed.bind(this)),this._dialog.$title.find(".js-back-button").on(Modernizr.touch?"touchend":"click",this.selectPage.bind(this,"")),y.on("changeDevice",function(e,t){e===r._breakpointDevice&&this.currentPage()&&this.currentPage().hasClass("js-marketplace-page")&&this.selectPage(""),e===r._breakpointDevice&&(this._scroll.scrollToStart(),this._updateDialogTitleText()),this._switchPagesContainer(e,t)}.bind(this)),this._switchPagesContainer(y.device,""),this._showHideBackButton(),this.hide()},r.prototype.scrollHandler=function(){var e,t;if(!this._loadMore)return void this._w_pages.off("scroll.loadMoreOnEnd");e=$.map(this._w_pages.children(":visible"),function(e){return $(e).outerHeight(!0)}).reduce(function(e,t){return e+t},0),t=this._widget.find(".js-right-panel").height(),this._w_pages.scrollTop()>e-t-this.SCROLL_TOLERANCE&&(this._w_pages.off("scroll.loadMoreOnEnd"),this._loadMore())},r.prototype._updateDialogTitleText=function(){var e,t,i;if(this._dialog){if(e=""!==this._currentPageTitle,t=y.device!==r._breakpointDevice,!e||t||this._options.minimized)return void this._dialog.setTitleText(this._dialogTitleText);i=this.currentPage(),this._dialog.setTitleText(i.data("fullTitle"))}},r.prototype.currentPage=function(){return this._pages[this._currentPageTitle]},r.prototype.preparePages=function(){this.addSearchPage(),t.enabled("items_favoriting")&&this.addFavoritesPage(),this._options.minimized||this._options.onWidget||this.addInvitesOnlyPage(),this._options.fundamentalsOnly||this.prepareBasicPage(),this._options.minimized||this._options.onWidget||(this.preparePublishedScriptPage(),this.prepareCustomScriptPage()),this._options.fundamentalsOnly||this.prepareMarketPages(),this._options.minimized||this.prepareFundamentalsPage(),this._options.fundamentalsOnly||this.addEconomyPage()},r.prototype.addEconomyPage=function(){var e,t,i=this.addPage(this._ECONOMY_TAB,{withoutTopPadding:!0,noFlex:!0}),o=m({withoutControls:!0,placeholder:$.t("Symbol"),addClass:"tv-insert-indicator-dialog__economy"});this._$economyTabInput=o.$input,e=new S({labelRight:$.t("Overlay the main chart")}),this._symbolSearch=b.bindToInput(this._$economyTabInput,{keepFocus:!0,
clearAfterAccept:!0,callback:function(t){var i=this._chartWidgetCollection.activeChartWidget.value();i&&i.addSymbol(t,e.checked)}.bind(this),onPopupOpen:function(e){this._$symbolSearchPopup=e,this._$symbolSearchPopup.css("z-index",this._dialog.zIndex)}.bind(this),onPopupClose:function(){this._$symbolSearchPopup=null}.bind(this)}),i.append(o.$control),t=$('<div class="tv-insert-indicator-dialog__economy-content">'),t.append(e.$el),i.append(t)},r.prototype.addFavoritesPage=function(){this.addPage("Favorites",{localizedTitle:$.t("Favorites")}),this.loadFavorites(),this.updateFavorites()},r.prototype.addInvitesOnlyPage=function(){this.addPage("invitesOnly",{localizedTitle:$.t("Invite-Only Scripts")})},r.prototype.prepareBasicPage=function(){var e=this.addPage(this._BASIC_STUDIES_PAGE_NAME,{packageName:this._BASIC_STUDIES_PACKAGE_NAME,technical:!t.enabled("plain_studymarket")});this._basicPage=e,this.studiesReady.done(function(){this.resetBasicPage()}.bind(this))},r.prototype.prepareCustomScriptPage=function(){this.addPage("My Scripts",{packageName:this._CUSTOM_STUDIES_PACKAGE_NAME,technical:!0}),this.studiesReady.done(function(){this.resetCustomScriptPage()}.bind(this))},r.prototype.preparePublishedScriptPage=function(){var e=$.t("Public Library"),t=this.addPage(e,{packageName:this._CUSTOM_STUDIES_PACKAGE_NAME,technical:!0});this.studiesReady.done(function(){}),t.on("show-page",function(){this._onPublishedScriptPageShown()}.bind(this))},r.prototype._onPublishedScriptPageShown=function(){var e=this._getScriptType();this._pubSearchPageShown||(this._pubSearchPageShown=!0,this._pubslishedScriptsLoadMore(e))},r.prototype._pubslishedScriptsLoadMore=function(e){var t,i;this._pubslishedScriptsLoading||(t=this._widget.find(".js-right-panel"),i=k("mini").spin(t.get(0)),this._pubslishedScriptsLoading=!0,this._loadNextPubSearchPage(e).done(function(){this._pubSearchCanLoad[e]&&this._w_pages.on("scroll.loadMoreOnEnd",this.scrollHandler.bind(this)),i.stop(),this.resetPublishedScriptPage(),this._pubslishedScriptsLoading=!1}.bind(this)))},r.prototype._applyGlobalFilter=function(e){return this._parentSource&&(e=e.filter(d.canBeChild)),e},r.prototype._applyStrategiesFilter=function(e){var t=this._parentSource?"not_strategies":"none";return"not_strategies"!==t&&"only_strategies"!==t||(e=e.filter(function(e){var i=d.isScriptStrategy(e);return"not_strategies"===t?!i:i})),e},r.prototype.resetBasicPage=function(){var e,t,i=this.getPage(this._BASIC_STUDIES_PAGE_NAME);this._studies&&(e=this._studies[this._BASIC_STUDIES_PACKAGE_NAME]||[],t=this._studies[this._STANDARD_STUDIES_PACKAGE_NAME]||[],e=e.concat(t),e=this._applyStrategiesFilter(e),e=this._applyGlobalFilter(e),this.preparePageStudies(i,e))},r.prototype.resetAllPages=function(){this.resetBasicPage(),this.resetCustomScriptPage(),this.resetPublishedScriptPage(),this.resetInvitesOnlyPage()},r.prototype._fillScriptsMetainfo=function(e,t){var i,o,n;for(i=0;i<e.length;i++)o=e[i],n=d.createMetaInfoStub(o,"1"),TradingView.merge(n,d.parseIdString(n.id)),t.push(n)},
r.prototype.resetCustomScriptPage=function(){var e,t,i;this._options.minimized||this._options.onWidget||this._studies&&(e=this.getPage("My Scripts"),t=this._studies.Script$USER||[],i=$.Deferred(),E.requestUserScripts(function(e){t.splice(0,t.length),this._fillScriptsMetainfo(e,t),i.resolve(t)}.bind(this)),i.done(function(t){if(!t.length)return e.addClass("tv-insert-indicator-dialog__create-script-container"),void this.appendTVScriptBtn(e);e.removeClass("tv-insert-indicator-dialog__create-script-container"),t=this._applyStrategiesFilter(t),t=this._applyGlobalFilter(t),this.preparePageStudies(e,t)}.bind(this)))},r.prototype._createPublishedScriptMetaInfo=function(e){var t=this._chartWidgetCollection.activeChartWidget.value(),i=d.createMetaInfoStub(e,t.studyScriptingPkgVers);return i=new d(i),i.author=e.author,i.scriptName=e.scriptName,i.scriptDescription=e.description,i.agreeCount=e.agreeCount,i.imageUrl=e.imageUrl,i.weight=e.weight||0,i},r.prototype.resetPublishedScriptPage=function(){var e,t;if(!this._options.minimized&&this._pubSearchPageShown&&!this._options.onWidget){if(e=this._getScriptType(),this._pubSearchCanLoad[e]&&this._pubSearchCount[e]<this._PUB_SEARCH_ENTRIES_ON_PAGE)return void this._pubslishedScriptsLoadMore(e);t=this.getPage($.t("Public Library")),this.studiesReady.done(function(){var i,o=this._pubSearchEntries.map(function(e){return this._createPublishedScriptMetaInfo(e)},this);o=this._applyStrategiesFilter(o),o=this._applyGlobalFilter(o),i=o.filter(function(e){return null!=e.imageUrl}),this.preparePageStudies(t,i,null,!0),this._loadMore=this._pubSearchCanLoad[e]?this._pubslishedScriptsLoadMore.bind(this,e):null}.bind(this))}},r.prototype._createItemsList=function(){return $('<div class="tv-insert-indicator-dialog__items-list">')},r.prototype._createSubGroupItem=function(e){return $('<div class="tv-insert-study-item tv-insert-study-item--subgroup-header">').text(e)},r.prototype._createItemsGroup=function(e,t,i){var o,n=this._createItemsList();return this.fillStudies(n,e,i),o=$('<div class="tv-insert-indicator-dialog__subgroup">'),t.length&&o.append(this._createSubGroupItem(t)),o.append(n),o},r.prototype.prepareFundamentalsPage=function(){var e=this,t=this.addPage(this._FUNDAMENTALS_PAGE_NAME,{packageName:this._FUNDAMENTAL_PACKAGE_NAME,noFlex:!0});this.studiesReady.done(function(){function i(){function t(e){return-1!==s.indexOf(e)}function i(e){return f.filter(function(t){return e===t.id})[0]}var o,n,r=[],s=$.map(f,function(e){return e.id});for(o=0;o<e._options.popularFundamentals.length;o++)n=e._options.popularFundamentals[o],n.studies=n.studies.filter(t).map(i),n.studies.length&&r.push(n);return r}var o,n,r,s,a,l,c,h,u,d,p,f=this._studies[this._FUNDAMENTAL_PACKAGE_NAME];if(void 0!==f){if(o=t,n=i(),n.length){for(r=$('<div class="tv-insert-indicator-dialog__fundamentals-column tv-insert-indicator-dialog__fundamentals-column--all">'),s=$('<div class="tv-insert-indicator-dialog__fundamentals-column tv-insert-indicator-dialog__fundamentals-column--popular">'),
a=$('<div class="tv-insert-indicator-dialog__fundamentals-column tv-insert-indicator-dialog__fundamentals-column--popular">'),l=function(){var e,t=0;for(e=0;e<n.length;e++)t+=n[e].studies.length;return t}(),c=0,h=0;c<n.length;c++)u=n[c],d=this._createItemsGroup(u.studies,u.name,null),p=h<l/2?s:a,p.append(d),h+=u.studies.length;r.append(this._createSubGroupItem($.t("All Metrics"))),o=$("<div>"),r.append(o),t.append(s),t.append(a),t.append(r)}this.preparePageStudies(o,f)}}.bind(this))},r.prototype.appendTVScriptBtn=function(e){var t,o,n=$('<div class="tv-insert-indicator-dialog__scripts-logo">');n.append(i(1995)),t=$('<div class="tv-insert-indicator-dialog__create-script-message">'),t.text($.t("Welcome to the TradingView custom scripting engine. It allows you to create your own custom studies or modify existing. You do not have any scripts created.")),o=$('<div class="tv-button tv-button--primary">'),o.text($.t("Create your first script now!")),o.click(function(e){this.hide(),TradingView.bottomWidgetBar&&TradingView.bottomWidgetBar.activateScriptEditorTab(),e.stopPropagation()}.bind(this)),e.empty(),e.append(n),e.append(t),e.append(o)},r.prototype.prepareMarketPages=function(){this._options.hideMarketPages||this.studiesReady.done(function(){var e=this,t=this._market.order.map(function(t){return e._market.products[t]});t.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}),t.forEach(function(e){var t="tv-volumebyprice"!==e.id,i={market:t,withoutTopPadding:t,packageName:e.id,subProductIds:e.subproduct_ids||[]};e.$page=this.addPage(e.name,i)},this),this.selectPage(v.getValue(this._PAGE_KEY,this._BASIC_STUDIES_PAGE_NAME)),this.marketPagesReady.resolve()}.bind(this))},r.prototype.addSearchPage=function(){var e,t,i=m({addClass:"tv-insert-indicator-dialog__search-control"});this._tabs.search=i.$control.data("title","search"),this._pages.search=$('<div class="tv-insert-indicator-dialog__page tv-insert-indicator-dialog__page--search">').data("title","search"),this._pages.search.data("fullTitle",$.t("Search")),e=null,this._search_value=null,this._search_input=i.$input,i.inputChangedDelegate.subscribe(null,function(){e&&clearTimeout(e),e=setTimeout(function(){e=null,this.search(this._search_input.val()),this._w_pages.scrollTop(0)}.bind(this),200)}.bind(this)),this._search_input.focus(function(){this.search(this._search_input.val())}.bind(this)),t=this._widget.find("#js-search-placeholder"),t.length&&t.parent()[0].replaceChild(this._tabs.search[0],t[0]),this._w_pages.prepend(this._pages.search)},r.prototype.search=function(e,i,o){function n(e,t,i,o,n,r){e.push(t),e[e.length-1].matchPriority=o,n&&(e[e.length-1].matchIndex=i.match(r).index)}var r,s,a,l,c,h=this;(this._search_value!==e||i)&&(r=this._pages.search,s=[],a=function(e){return e.replace(/[!-\/[-^{-}]/g,"\\$&")},""!==e&&(l=e.split("").map(function(e,t){var i=a(e);return 0!==t&&(i="[/\\s-]"+i),"("+i+")"}).join("(.*?)")+"(.*)",s.push({fullMatch:RegExp("("+a(e)+")","i"),re:RegExp("^"+l,"i"),reserveRe:RegExp(l,"i"),fuzzyHighlight:!0}),
e.toLowerCase()in this.DEFAULT_OPTIONS.searchKeywords&&s.push({fullMatch:this.DEFAULT_OPTIONS.searchKeywords[e.toLowerCase()],re:this.DEFAULT_OPTIONS.searchKeywords[e.toLowerCase()],fuzzyHighlight:!1})),this._search_value=e,c=$.Deferred(),h._currentAsyncSearchDfd=c,t.enabled("plain_studymarket")?c.resolve([]):P.suggest(e).done(function(e){var t,i=[],o=e&&e.results||[];if(!$.isEmptyObject(TVScript))for(t=0;t<o.length;t++)i.push(h._createPublishedScriptMetaInfo(o[t]));c.resolve(i)}).fail(function(){c.resolve([])}),c.done(function(t){var i,o,a,l,u,d,p,f,_,m,g,v,y,b,S,w,T,P,C;if(h._currentAsyncSearchDfd===c){for(i=Object.keys(h._studies),i.indexOf(h._PUBLISHED_STUDIES_PACKAGE_NAME)<0&&i.push(h._PUBLISHED_STUDIES_PACKAGE_NAME),i.sort(),o=[h._BASIC_STUDIES_PACKAGE_NAME,h._STANDARD_STUDIES_PACKAGE_NAME,h._PUBLISHED_STUDIES_PACKAGE_NAME,h._CUSTOM_STUDIES_PACKAGE_NAME],a=o.length;a--;)l=o[a],-1!==(u=i.indexOf(l))&&(i.splice(u,1),i.unshift(l));for(d={},p=0,f=0;f<i.length;f++){for(_=i[f],m=[],g=h._studies[_],_===h._PUBLISHED_STUDIES_PACKAGE_NAME&&(g=t),a=0;a<g.length;a++)if(v=g[a],s.length)for(y=0;y<s.length;y++)b=s[y].re,b.lastIndex=0,S=s[y].fullMatch,w=v.shortDescription,w&&w.toLowerCase()===e.toLowerCase()?n(m,v,w,3,!0,S):w&&S.test(w)?n(m,v,w,2,!0,S):(w=v.description_localized||v.description||v.scriptName,S.test(w)?n(m,v,w,1,!0,S):b.test(w)&&n(m,v,w,0,!0,b));else m.push(v);if(m=h._applyGlobalFilter(m),m.length){switch(T=_,_){case h._BASIC_STUDIES_PACKAGE_NAME:case h._STANDARD_STUDIES_PACKAGE_NAME:T=h._BASIC_STUDIES_PAGE_NAME;break;case h._CUSTOM_STUDIES_PACKAGE_NAME:T=$.t("My Scripts");break;case h._PUBLISHED_STUDIES_PACKAGE_NAME:T=$.t("Public Library");break;default:_ in h._packagesWithTabNames&&(T=h._packagesWithTabNames[T])}T in d||(d[T]=[]),d[T]=d[T].concat(m),p+=m.length}}for(r.html(""),P=Object.keys(d),a=0;a<P.length;++a)T=P[a],m=d[T],s.length&&Array.prototype.sort.call(m,function(e,t){if(e.matchPriority<t.matchPriority)return 1;if(e.matchPriority>t.matchPriority)return-1;if(e.matchPriority===t.matchPriority)switch(e.matchIndex){case void 0:return 0;default:return e.matchIndex>t.matchIndex?1:e.matchIndex<t.matchIndex?-1:0}}),C=this._createItemsGroup(m,this._options.minimized?"":$.t(T),s),r.append(C),this._selectedStudy=null;0===p&&r.append('<p class="tv-insert-indicator-dialog__not-found-message">'+$.t("No indicators matched your criteria.")+"</p>")}}.bind(this))),o||this.selectPage("search")},r.prototype.updateSearchPage=function(){var e=this._search_input.val();this.search(e,!0,!0)},r.prototype.updateMarketPages=function(){$.when(this.marketPagesReady).done(function(){var e;this._market.order.forEach(function(t){if(e=this._market.products[t],pro.hasPackage(e.id)){var i=this._studies[e.id];i?(this.clearPreparedPageOffer(e.$page),this.preparePageStudies(e.$page,i,e)):D.logWarn("Subscripted study package "+e.id+" absent in metaInfo.")}else this.preparePageOffer(e.$page,e)},this)}.bind(this))},r.prototype._createOfferContentContainer=function(){return $('<div class="tv-insert-indicator-dialog__offer-content">')},
r.prototype.preparePageStudies=function(e,t,i,o){var n,r;e&&(o||(t=this.sortStudies(t)),e.empty(),n=this._createItemsList(),this.fillStudies(n,t,null),e.append(n),i&&(r=this._createOfferContentContainer(),r.append(pro.prepareProductPage(i)),e.addClass("tv-insert-indicator-dialog__page--without-top-padding tv-insert-indicator-dialog__page--offer-with-studies"),e.append(r)))},r.prototype.preparePageOffer=function(e,t){e.data("html",pro.prepareProductOfferPage(t)),e.data("offer",t)},r.prototype.clearPreparedPageOffer=function(e){e.removeData("html"),e.removeData("offer")},r.prototype.addPage=function(e,t){var i,o,n,r,s,a;return t=$.extend({},t),i=t.localizedTitle||$.t(e),o=e.toLowerCase(),n=$('<div class="tv-insert-indicator-dialog__page">').data("title",o),r=$('<div class="tv-insert-indicator-dialog__tab js-tab"></div>').text(i).data("title",o).attr("title",i),s=t.technical?$.t("Technical Analysis")+": ":"",n.data("fullTitle",s+i),r.toggleClass("tv-insert-indicator-dialog__tab--beta",!!t.beta),t.packageName&&(this._packagesWithTabNames[t.packageName]=e),this._pages[o]=n,this._tabs[o]=r,t.withoutTopPadding&&n.addClass("tv-insert-indicator-dialog__page--without-top-padding"),t.noFlex&&n.addClass("tv-insert-indicator-dialog__page--no-flex"),t.technical||t.market?(a=t.technical?this._getOrCreateTechnicalTab():this._getOrCreateMarketTab(),a.find(".tv-insert-indicator-dialog__tabs").append(r),t.market&&n.addClass("js-marketplace-page")):this._w_market_tabs?r.insertBefore(this._w_market_tabs):this._w_tabs.append(r),this._w_pages.append(n),n.toggleClass("i-hidden",o!==this._currentPageTitle),n},r.prototype._createGroupTab=function(e,t){var i=$(n.render(a,{title:e}));return i.find(".js-tab-head").on("click",function(){this._expandCollapseTabs(i,t)}.bind(this)),this._expandCollapseTabs(i,t,v.getBool(t,!0),!0),i.data("settings-open-key",t),this._w_tabs.append(i),i},r.prototype._getOrCreateMarketTab=function(){return this._w_market_tabs||(this._w_market_tabs=this._createGroupTab($.t("Marketplace Add-ons"),"studyMarket.marketTabIsOpen"),this._w_market_tabs.addClass("tv-insert-indicator-dialog__tabs-group--marketplace")),this._w_market_tabs},r.prototype._getOrCreateTechnicalTab=function(){return this._w_technical_tabs||(this._w_technical_tabs=this._createGroupTab($.t("Technical Analysis"),"studyMarket.technicalTabIsOpen")),this._w_technical_tabs},r.prototype._onDialogClosed=function(){null!==this._selectedStudy&&this._selectedStudy.removeClass("tv-insert-study-item--selected"),this._selectedStudy=null,this.visibilityChanged.fire(!1),w.removeListener("StudyMarket")},r.prototype.hide=function(){this._dialog.close()},r.prototype.show=function(e){var i,o;this.init(),i=!1,o=e instanceof TradingView.Study&&e||null,o!==this._parentSource&&(this._parentSource=o,this._dialogTitleText=this._parentSource?$.t("Apply Indicator on {0}").format(this._parentSource.title(!0)):$.t("Indicators"),i=!0),this._updateDialogTitleText(),this._widget.on("keyup.hideDialogStudy",function(e){e.which===T.ESC&&(this._widget.unbind("keyup.hideDialogStudy"),
this.hide())}.bind(this)),this._clearInput(),this.loadFavorites(),i&&this.resetAllPages(),this._scroll.scrollTo(0),this.visibilityChanged.fire(!0),this.focusAddSymbolInput(this._currentPageTitle),w.registerListener("StudyMarket",function(e){return!e.ctrlKey&&(47!==e.which&&(e.which&&e.which===T.ENTER?(e.target===this._search_input.get(0)&&this._insertStudyByShortDescription(),!0):!!e.charCode&&(!(!e.which||e.which<=32)&&(!/^(input|textarea)$/i.test(e.target.tagName)&&(e.preventDefault(),!!(TradingView.onWidget()||this._options.minimized&&!t.enabled("study_dialog_search_control"))||(this._search_input.focus(),this._search_input[0].value=String.fromCharCode(e.charCode),!0))))))}.bind(this)),this._dialog.open(),h.emit("indicators_dialog")},r.prototype.isVisible=function(){return!!this._initialized&&this._widget.is(":visible")},r.prototype.getPage=function(e){return e=e.toLowerCase(),this._pages[e]},r.prototype.focusAddSymbolInput=function(e){e===this._ECONOMY_TAB.toLowerCase()&&this._$economyTabInput&&this._$economyTabInput.focus()},r.prototype._showHideBackButton=function(){if(this._dialog&&!this._options.minimized){var e=""!==this._currentPageTitle;this._dialog.$el.find(".js-title-container").toggleClass("i-with-back-button",e)}},r.prototype.selectPage=function(e){var t,i,o,n,r,s,a;if(e=e.toLowerCase(),this.focusAddSymbolInput(e),this._currentPageTitle!==e)if(""===e||e in this._pages&&e in this._tabs&&("favorites"!==e||this.hasVisibleFavorites())){for(t in this._pages)if(i=e===t,o=this._pages[t],o.toggleClass("i-hidden",!i),this._tabs[t].toggleClass("i-active",i),i){if(o.data("html")&&(n=this._createOfferContentContainer(),n.html(o.data("html")),o.html(n),o.data("html",null)),o.trigger("show-page"),r=this._tabs[t].parents(".tv-insert-indicator-dialog__tabs-group"),0===r.length)continue;s=r.find(".js-tab-head"),this._expandCollapseTabs(r,s.data("settings-open-key"),!0,!0)}this._currentPageTitle=e,this._w_pages.scrollTop(0),v.setValue(this._PAGE_KEY,e),this._selectedStudy=null,a=""!==this._currentPageTitle,this._widget.find(".js-tabs-viewport").toggleClass("i-active",!a),this._w_pages.toggleClass("i-active",a),this._showHideBackButton(),a||this._search_input.blur(),this._updateDialogTitleText()}else this.selectPage(this._BASIC_STUDIES_PAGE_NAME)},r.prototype.attachHandlers=function(){var e=Modernizr.touch?"touchend":"click",i=this;Modernizr.touch&&this._w_pages.on("touchstart",".js-study-item",function(e){i._touchStart=$.extend({},e.originalEvent.touches[0])}),this._w_tabs.on("click",".js-tab",this._onTabClicked.bind(this)),t.enabled("items_favoriting")&&this._w_pages.on(e,".js-favorite-icon",this.toggleItem.bind(this)),this._w_pages.on(e,".js-subscribe-btn",this.subscribePackage.bind(this)),this._w_pages.on(e,".js-show-source-btn",this.viewSourceCode.bind(this)),this._w_pages.on(e,".js-show-more-btn",this.openChartPopup.bind(this)),this._w_pages.on(e,".js-remove-study",this.deleteScript.bind(this)),this._w_pages.on(e,".js-study-item",function(e){var t
;i._touchStart&&(t=i._w_pages.find(".tv-insert-study-item")[0].clientHeight,Math.abs(i._touchStart.screenY-e.originalEvent.changedTouches[0].screenY)>t)||i.insertThisStudy($(e.target).closest(".js-study-item"))}),this._w_pages.on("click",".js-offer-screenshots",function(e){e.currentTarget.getAttribute("data-fancybox-inited")||(e.currentTarget.setAttribute("data-fancybox-inited",!0),M({$elem:$(this).find("a"),type:"image",live:!1,afterShow:function(){$(".fancybox-overlay").on("click",function(e){e.stopPropagation()})}}),setTimeout(function(){$(e.target).click()},0)),e.preventDefault()})},r.prototype._onTabClicked=function(e){var t=$(e.currentTarget).data("title");t&&"search"!==t&&this.selectPage(t),e.stopPropagation()},r.prototype._expandCollapseTabs=function(e,t,i,o){var n,r=e.hasClass("i-dropped");if(void 0===i)i=!e.hasClass("i-dropped");else if(r===i&&!o)return;if(n=e.find(".tv-insert-indicator-dialog__tabs"),e.toggleClass("i-dropped",!!i),o)return void n.toggleClass("i-hidden",!i);n.removeClass("i-hidden"),n.velocity(i?"slideDown":"slideUp",{duration:g.dur/2,complete:function(){v.setValue(t,i),this._scroll.updateScroll()}.bind(this)})},r.prototype.toggleItem=function(e){var t=$(e.target).closest(".js-study-item").data("study");return this.toggleFavorite(t.id),this.toggleEverywhere(t.id),!1},r.prototype.toggleEverywhere=function(e){var t=this,i=this.isFavorite(e);this._w_pages.find(".js-study-item").filter(function(i,o){var n=$(o).data("study");return!!n&&t.favsModel.favId(n.id)===t.favsModel.favId(e)}).find(".js-favorite-icon").toggleClass("i-starred",i).attr("title",this.favTitle(i))},r.prototype.toggleFavorite=function(e){this.favsModel.favorite(e)},r.prototype.agreeOnFavorite=function(e){var t,i,o,n,r,s;if(window.is_authenticated&&(t=e.previousAttributes().favorites,i=e.attributes.favorites,t.length===i.length-1)){for(n=0;n<i.length;n++)if(r=i[n],t.indexOf(r)<0){o=r;break}o&&this.getStudyPackageName(o)===this._PUBLISHED_STUDIES_PACKAGE_NAME&&(s=TradingView.StudyMetaInfo.cutScriptIdPart(o))&&P.info([s]).done(function(e){e&&e[0]&&e[0].imageUrl&&$.ajax({url:"/vote-for-chart/",type:"POST",dataType:"json",data:{image_url:e[0].imageUrl,vote:1}})})}},r.prototype.isFavorite=function(e){return this.favsModel.isFav(e)},r.prototype._getInviteOnlyStudies=function(){var e=this,t=[];return new Promise(function(i,o){if(e._options.onWidget)return void i([]);L.listScripts().done(function(n){if(e._previousInviteOnlyStudiesIds=n,0===n.length)return void o();P.info(n).done(function(i){e.studiesReady.done(function(){var o,n;for(o=0;o<i.length;o++)n=i[o],null!=n.imageUrl&&t.push(e._createPublishedScriptMetaInfo(n))})}).done(function(){i(t)}).fail(function(){o()})}).fail(function(e){o()})})},r.prototype.resetInvitesOnlyPage=function(){var e=this;e._tabs.invitesonly&&(e._previousInviteOnlyStudiesIds&&0!==e._previousInviteOnlyStudiesIds.length?e._tabs.invitesonly.show():e._tabs.invitesonly.hide()),e._getInviteOnlyStudies().then(function(t){e._previousInviteOnlyStudies=t,e.preparePageStudies(e._pages.invitesonly,t),
e._tabs.invitesonly&&(t&&0!==t.length?e._tabs.invitesonly.show():e._tabs.invitesonly.hide())},function(){e.preparePageStudies(e._pages.invitesonly,[]),e._tabs.invitesonly&&e._tabs.invitesonly.hide()})},r.prototype.updateFavorites=function(){var e,t,i,o,n,s,a,l,c,h,u,p,f;if(this._w_pages){if(e=this,t=this.getVisibleFavorites(),i=function(){"favorites"===e._currentPageTitle&&e.selectPage(y.device===r._breakpointDevice?"":e._BASIC_STUDIES_PAGE_NAME),e._w_pages.find(".js-favorite-icon").removeClass("i-starred"),e._tabs&&e._tabs.favorites&&e._tabs.favorites.hide()},e._tabs.favorites&&0===t.length)return void i();for(o=$.Deferred(),n=[],s=[],a=0;a<t.length;a++)if(l=t[a],(c=this.getStudyPackageName(l))!==e._PUBLISHED_STUDIES_PACKAGE_NAME){for(h=this._studies[c]||[],u=0;u<h.length;u++)if(p=e.favsModel.favId(d.cutFullId(h[u].id)),f=e.favsModel.favId(l),p===f){n.push(h[u]);break}}else s.push(l);!s.length||this._options.minimized?o.resolve(n):P.info(s).done(function(e){this.studiesReady.done(function(){var t,i;for(t=0;t<e.length;t++)i=e[t],null!=i.imageUrl&&n.push(this._createPublishedScriptMetaInfo(i))}.bind(this))}.bind(this)).always(function(){o.resolve(n)}),o.done(function(e){0===e.length?i():this._tabs.favorites.show(),e=this._applyStrategiesFilter(e),this.preparePageStudies(this._pages.favorites,e),this._w_pages.find(".js-study-item").find(".js-favorite-icon").removeClass("i-starred"),t.forEach(this.toggleEverywhere,this)}.bind(this)),n&&0!==n.length&&this._tabs.favorites.show()}},r.prototype.hasVisibleFavorites=function(){return!!this.getVisibleFavorites().length},r.prototype.getVisibleFavorites=function(){return this.checkExcludePackageStudies(this.favsModel.get("favorites"))},r.prototype.viewSourceCode=function(e){e.stopPropagation(),this.hide();var t=$(e.target).closest(".js-study-item").data("study");this._getPineSourceCode(t).done(function(e){TradingView.bottomWidgetBar&&TradingView.bottomWidgetBar.activateScriptEditorTab(e)}).fail(function(e){D.logError("Could not getPineSourceCode for pineId="+t.scriptIdPart+" reason: "+e)})},r.prototype._getPineSourceCode=function(e){var t=$.Deferred();return E.getPineSourceCode(e.scriptIdPart,e.pine.version).done(function(i){var o=I.parse(i.version),n=i.lastVersionMaj?I.parse(i.lastVersionMaj):I.ZERO,r={scriptSource:i.source,scriptIdPart:e.scriptIdPart,scriptName:i.scriptName,scriptTitle:i.scriptTitle,version:i.version,isOld:!n.isZero()&&n.major()!==o.major()};t.resolve(r)}),t},r.prototype.openChartPopup=function(e){var t,i;e.stopPropagation(),e.preventDefault(),t=$(e.target).closest(".js-study-item").data("study"),i=new x.ChartPage({chartId:t.imageUrl,chartName:t.scriptName||t.description}),TradingView.historyManager.push(i)},r.prototype.deleteScript=function(e){var t,i,o;e.stopPropagation(),e.preventDefault(),t=$(e.target).closest(".js-study-item"),i=t.data("study"),o=f({content:$.t("Do you really want to delete Script '{0}' ?").format(TradingView.cleanButAmpersand(i.scriptName||i.description)),type:"modal",width:440}),o.on("action:yes",function(){
E.deletePine(i.scriptIdPart).done(function(){D.logNormal("Script has been deleted"),t.remove()}).fail(function(e){D.logError("Could not delete script "+i.scriptIdPart+", reason: "+e)}),o.close()}),o.open()},r.prototype.checkExcludePackageStudies=function(e){return e.filter(function(e){var t=this.getStudyPackageName(e);return t===this._PUBLISHED_STUDIES_PACKAGE_NAME||!!(this._studies&&this._studies[t]&&$.grep(this._studies[t],function(t){return t.id.indexOf(e)>=0}).length>0)&&(t===this._BASIC_STUDIES_PACKAGE_NAME||t===this._STANDARD_STUDIES_PACKAGE_NAME||t===this._CUSTOM_STUDIES_PACKAGE_NAME||t===this._SCRIPTING_PACKAGE_NAME||t===this._FUNDAMENTAL_PACKAGE_NAME||pro.hasPackage(t)&&t in this._studies)},this)},r.prototype.sortStudies=function(e){return e.sort(function(e,t){return e=e.scriptName||e.description_localized||e.description,t=t.scriptName||t.description_localized||t.description,e>t?1:e<t?-1:0})},r.prototype.fillStudies=function(e,t,i){var o;e.empty(),t.forEach(function(t){t?o=this.createStudyListItem(t,i):(o=document.createElement("div"),o.className="placeholder"),e.append(o)},this)},r.prototype.createStudyListItem=function(e,i){var o,r,s,a,c,h,u,p,f,_,m,g,v,y,b,S,w,T,P,C,x,E,L,I,A,k,M,O,D=e.description_localized||$.t(e.scriptName||e.description||" ",{context:"study"}),V=this.isFavorite(e.id),R=[];if(i&&D)for(o=[],i instanceof RegExp?o.push({re:i,fuzzyHighlight:!1}):$.isArray(i)&&(o=i),r=0;r<o.length;r++)if(s=o[r].fullMatch,a=o[r].reserveRe,c=o[r].re,s.lastIndex=0,c.lastIndex=0,h=s.exec(D),h?o[r].fuzzyHighlight=!1:(h=c.exec(D),!h&&a&&(h=a.exec(D)),o[r].fuzzyHighlight=!0),h)if(o[r].fuzzyHighlight)for(u=h.index,p=1;p<h.length;p++)f=h[p].length,p%2&&(R[u]=!0),u+=f;else for(_=0;_<h[0].length;_++)R[h.index+_]=!0;return m=TradingView.clean(D,!0),g=m.replace(/./g,function(e,t){if("<"===e?e="&lt;":"&"===e?e="&amp;":'"'===e&&(e="&quot;"),R[t]){if(" "===e||"-"===e||"/"===e)return R[t+1]=!0,e;e='<span class="i-match">'+e+"</span>"}return e}),v=!!e.pine,y=this.getStudyPackageName(e.id),b=v&&y===this._PUBLISHED_STUDIES_PACKAGE_NAME,S=v&&y===this._CUSTOM_STUDIES_PACKAGE_NAME,w=v&&(y===this._STANDARD_STUDIES_PACKAGE_NAME||y===this._FUNDAMENTAL_PACKAGE_NAME),T=v&&[TVScript.Access.ACCESS_CLOSED_NEEDS_AUTH,TVScript.Access.ACCESS_CLOSED_NO_AUTH].indexOf(e.pine.access)>=0,P=v&&TVScript.Access.ACCESS_CLOSED_NEEDS_AUTH===e.pine.access,C=v&&P&&void 0!==e.pine.userHaveAccess,x=v&&e.pine.userHaveAccess,E=!!e.TVScriptSourceCode,L=this.favsModel.get("favoritesExtra"),I=L&&L[e.id]&&L[e.id].isSourceCodeClosed,A=v&&!w&&!T&&(S||b||E||V&&!I),k={closed:$.t("Invite-only script. Contact the author for more information."),open:$.t("Invite-only script. You have been granted access.")},M=$(n.render(l,{publishedOrUserScript:S||b,title:g,titleTooltip:TradingView.strip_tags(m),isStrategy:d.isScriptStrategy(e),isInviteOnly:P,showAccessIcon:C,accessIconClass:x?"tv-insert-study-item__green-lock-icon":"tv-insert-study-item__red-lock-icon",accessTooltip:x?k.open:k.closed,author:e.author&&e.author.username,likes:e.agreeCount?e.agreeCount+" "+$.t("like",{
plural:"likes",count:e.agreeCount}):"",showMoreButton:!!e.imageUrl,deleteButton:!e.imageUrl&&S,withFavorites:t.enabled("items_favoriting")&&!this._options.minimized})),A||M.find(".js-show-source-btn").removeClass("js-show-source-btn").addClass("i-empty"),M.data("study",e),t.enabled("items_favoriting")&&(O=M.find(".js-favorite-icon"),O.toggleClass("i-starred",!!V),O.attr("title",this.favTitle(!!V))),t.enabled("graying_disabled_tools_enabled")&&ChartApiInstance.studiesAccessController.isToolGrayed(e.description)&&M.addClass("i-grayed"),M},r.prototype.favTitle=function(e){return e?$.t("Remove from favorites"):$.t("Add to favorites")},r.prototype.insertThisStudy=function(e){if(!e.hasClass("placeholder")){var i=e.data("study");return t.enabled("graying_disabled_tools_enabled")&&ChartApiInstance.studiesAccessController.isToolGrayed(i.description)?void h.emit("onGrayedObjectClicked",{type:"study",name:i.description}):(e.highlight(this.HIGHLIGHT_STUDY_NUM_FLICKS),this.insertStudy(i),!1)}},r.prototype.insertStudy=function(e){var i,o,n=this._chartWidgetCollection.activeChartWidget.value();if(n){if(t.enabled("fundamental_widget"))return void n.replaceFundamental(e);i=n.insertStudyStub(e.description),o=d.replaceWithFullStudyMetaInfoAsync(n.model().studiesMetaData(),e),o.done(function(e){var t;if(n.removeStudyStub(i.id())){if(this._parentSource&&!d.canBeChild(e))return t=_({type:"modal",title:$.t("Oops!"),content:$.t("This indicator cannot be applied to another indicator")}),void t.open();n.insertStudyOrShowDialog(e,this._parentSource),this._is_on_chart=!0}}.bind(this)),o.fail(function(e){D.logError("Error: "+e),i.setStatus(e)})}},r.prototype.subscribePackage=function(e){var t=$(e.target).closest(".tv-insert-indicator-dialog__page").data("offer");t&&A(t.id)},r.prototype.onLoginStateChange=function(e){e||this.setUser(window.user),P.cleanCache(),this.resetAllPages(),this.setup(),this.init()},r.prototype.getStudyList=function(e){function t(e){i.push(e)}var i,o;if(!this.studiesReady.isResolved())return[];i=[];for(o in this._studies)(o===this._BASIC_STUDIES_PACKAGE_NAME||pro.hasPackage(o))&&(this._studies[o].forEach(t),e&&i.push({separator:!0}));return e&&i.splice(i.length-1,1),i},r.prototype.getStudyPackageName=function(e){var t,i,o,n,r,s;if(e)return t=e.split("@"),(i=1===t.length)||(o=d.getPackageName(e))===this._SCRIPTING_PACKAGE_NAME?(n=t[0],i||/^(Strategy)?Script\$/.test(n)?(r=n.indexOf("_"),-1!==r?(o=n.substring(0,r),s=o.indexOf("Script$")>=0?o:"Script$"+o,pro.getSuperProduct(s)||s):/USER;/.test(n)?this._CUSTOM_STUDIES_PACKAGE_NAME:/PUB;/.test(n)?this._PUBLISHED_STUDIES_PACKAGE_NAME:/STD;/.test(n)?this._STANDARD_STUDIES_PACKAGE_NAME:n):o):o},r.prototype.selectSearchPage=function(){this.selectPage("search"),this._clearInput()},r.prototype._insertStudyByShortDescription=function(){var e,t,i,o=this._search_value;for(o=o.trim(),e=this._studies[this._BASIC_STUDIES_PACKAGE_NAME],t=0;t<e.length;t++)if(i=e[t],i.shortDescription&&i.shortDescription.toUpperCase()===o.toUpperCase()){this.insertStudy(i);break}},
r.prototype._clearInput=function(){this._search_input.val(""),"search"===this._currentPageTitle&&this._search_input.val("").trigger("input").focus()},r.prototype._getScriptType=function(){return 0},r.prototype._pubSearchEntryAlreadyLoaded=function(e){var t=e.scriptIdPart.split(";")[1];return!(this._pubSearchCache.indexOf(t)<0)||(this._pubSearchCache.push(t),!1)},r.prototype._addPubSearchResult=function(e,t){e.length&&(e.forEach(function(e){this._pubSearchEntryAlreadyLoaded(e)||(this._pubSearchEntries.push(e),this._pubSearchCount[e.scriptType]++)},this),0===t&&(this._pubSearchCount[0]+=e.length),this._pubSearchEntries.sort(function(e,t){return t.agreeCount-e.agreeCount}))},r.prototype._getPublicLibraryRequestParams=function(e){var t=this._pubSearchCount[e],i=this._PUB_SEARCH_ENTRIES_ON_PAGE;return t<this._PUB_SEARCH_ENTRIES_ON_PAGE&&(i=this._PUB_SEARCH_ENTRIES_ON_PAGE-t),{offset:t,count:i,type:e}},r.prototype._loadNextPubSearchPage=function(e){return this._pubSearchDfd?this._pubSearchDfd:(this._pubSearchDfd=$.ajax({url:"/pubscripts-library/",type:"GET",data:this._getPublicLibraryRequestParams(e),dataType:"json"}),this._pubSearchDfd.done(function(t){this._pubSearchCanLoad[e]=!!t.load_more,0!==e||t.load_more||this._pubSearchCanLoad.fill(!1),this._addPubSearchResult(t.results,e)}.bind(this)),this._pubSearchDfd.always(function(){delete this._pubSearchDfd}.bind(this)),this._pubSearchDfd)},e.exports=r}).call(t,i(3),i(4),i(21))},function(e,t){},function(e,t){},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 7"><path fill="#FF4A68" d="M3 4V0H2v4H0l2.5 3L5 4H3z"/><path fill="#37BC9B" d="M10 3v4H9V3H7l2.5-3L12 3h-2z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 11"><path d="M.313 7.192V6.091l5.462-2.618v1.559L2.166 6.645l3.609 1.634v1.559L.313 7.192zM9.434 11H7.896L11.676.944H13.2L9.433 11zm6.209-1.162V8.279l3.603-1.634-3.603-1.613V3.473l5.462 2.618v1.101l-5.462 2.646z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 3"><path d="M1.5 0C.675 0 0 .675 0 1.5S.675 3 1.5 3 3 2.325 3 1.5 2.325 0 1.5 0zM5 1.5C5 2.325 5.675 3 6.5 3S8 2.325 8 1.5 7.325 0 6.5 0 5 .675 5 1.5zm5 0c0 .825.675 1.5 1.5 1.5S13 2.325 13 1.5 12.325 0 11.5 0 10 .675 10 1.5z"/></svg>'},function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 233 128"><path d="M62.276 111.842l-.805 1.831c1.409.619 2.86.936 4.311.936v-2c-1.168 0-2.346-.257-3.506-.767zm-8.969-4.353l-.875 1.799 3.597 1.749.875-1.799-3.597-1.749zm-8.993-4.373l-.875 1.799 3.597 1.749.875-1.799-3.597-1.749zm-8.993-4.373l-.875 1.799 3.597 1.749.875-1.799-3.597-1.749zm-8.993-4.373l-.875 1.799 3.597 1.749.875-1.799-3.597-1.749zm-8.993-4.373l-.875 1.799 3.597 1.749.875-1.799-3.597-1.749zm-8.993-4.373l-.875 1.799 3.597 1.749.875-1.799-3.597-1.749zm-5.791-6.846l-1.915.578a13.905 13.905 0 0 0 1.86 3.889l1.645-1.137a11.881 11.881 0 0 1-1.59-3.329zm-.55-8.963l.017-.666-1.997-.101c-.013.255-.019.51-.019.767v3.283h2v-3.283zm3.77-8.915l-1.335-1.489a12.842 12.842 0 0 0-2.683 3.409l1.755.96a10.84 10.84 0 0 1 2.263-2.879zm8.512-4.542l-.872-1.8-3.6 1.743.872 1.8 3.6-1.743zm9-4.358l-.872-1.8-3.6 1.743.872 1.8 3.6-1.743zm9-4.358l-.872-1.8-3.6 1.743.872 1.8 3.6-1.743zm9-4.358l-.872-1.8-3.6 1.743.872 1.8 3.6-1.743zm9-4.358l-.872-1.8-3.6 1.743.872 1.8 3.6-1.743zm9-4.358l-.872-1.8-3.6 1.743.872 1.8 3.6-1.743zm6.223-2.057c.911 0 1.778.144 2.598.425l.649-1.892a9.964 9.964 0 0 0-3.25-.534c-.392.001-.782.024-1.169.068l.228 1.987c.314-.036.628-.054.944-.055zm7.917 7.114l1.983-.26a10.47 10.47 0 0 0-1.475-4.168l-1.7 1.054a8.473 8.473 0 0 1 1.192 3.374zm.076 9.832h2v-4h-2v4zm-2.65 8.744l1.56 1.252a14.49 14.49 0 0 0 2.166-3.712l-1.859-.738a12.474 12.474 0 0 1-1.867 3.198zm-7.983 4.987l.815 1.826 3.653-1.63-.815-1.826-3.653 1.63zm-9.132 4.074l.815 1.826 3.653-1.63-.815-1.826-3.653 1.63zm-9.132 4.074l.815 1.826 3.653-1.63-.815-1.826-3.653 1.63zm8.035 5.942l.824-1.822-3.645-1.648-.824 1.822 3.645 1.648zm9.112 4.12l.824-1.822-3.645-1.648-.824 1.822 3.645 1.648zm8.35 4.671l1.44-1.388a13.241 13.241 0 0 0-3.46-2.599l-.915 1.778a11.254 11.254 0 0 1 2.935 2.209zm3.4 7.98v.382h2v-.382c0-1.273-.215-2.57-.627-3.839l-1.902.618c.349 1.074.529 2.162.529 3.22zm0 10.269l-.001.103 2 .02.001-.122v-3.887h-2v3.887zm-1.676 5.3a7.505 7.505 0 0 1-2.592 2.177l.905 1.783a9.505 9.505 0 0 0 3.283-2.755l.111-.15-1.619-1.174-.088.119zm16.035 15.689l-.777 1.843c1.332.562 2.793.851 4.313.851v-2a9.072 9.072 0 0 1-3.536-.694zm-4.933-6.956l-1.996.122c.092 1.504.51 2.953 1.237 4.265l1.75-.969a8.035 8.035 0 0 1-.99-3.418zm2.642-9.187l-1.872-.704-1.408 3.744 1.872.704 1.408-3.744zm3.52-9.36l-1.872-.704-1.408 3.744 1.872.704 1.408-3.744zm3.52-9.36l-1.872-.704-1.408 3.744 1.872.704 1.408-3.744zm3.52-9.36l-1.872-.704-1.408 3.744 1.872.704 1.408-3.744zm3.52-9.36l-1.872-.704-1.408 3.744 1.872.704 1.408-3.744zm3.52-9.36l-1.872-.704-1.408 3.744 1.872.704 1.408-3.744zm3.52-9.36l-1.872-.704-1.408 3.744 1.872.704 1.408-3.744zm3.52-9.36l-1.872-.704-1.408 3.744 1.872.704 1.408-3.744zm3.52-9.36l-1.872-.704-1.408 3.744 1.872.704 1.408-3.744zm3.52-9.36l-1.872-.704-1.408 3.744 1.872.704 1.408-3.744zm3.52-9.36l-1.872-.704-1.408 3.744 1.872.704 1.408-3.744zm2.164-5.754c.391-1.042.992-2.104 1.755-3.094l-1.585-1.22c-.881 1.144-1.58 2.379-2.042 3.611l-.052.138 1.872.704.052-.138zm9.459-7.762l-.206-1.989c-1.437.149-2.845.587-4.181 1.28l.921 1.775c1.12-.581 2.287-.944 3.467-1.066zm9.876-.046v-2h-4v2h4zm7.839 3.609l.045.066 1.656-1.122-.057-.083a10.35 10.35 0 0 0-3.152-2.959l-1.035 1.711a8.37 8.37 0 0 1 2.543 2.386zm.953 8.249l-.205.55 1.874.699.204-.548c.442-1.179.683-2.416.715-3.659l-1.999-.051a9.24 9.24 0 0 1-.589 3.01zm-3.699 9.919l1.874.699 1.398-3.748-1.874-.699-1.398 3.748zm-3.494 9.37l1.874.699 1.398-3.748-1.874-.699-1.398 3.748zm-3.494 9.37l1.874.699 1.398-3.748-1.874-.699-1.398 3.748zm-3.494 9.37l1.874.699 1.398-3.748-1.874-.699-1.398 3.748zm-3.494 9.37l1.874.699 1.398-3.748-1.874-.699-1.398 3.748zm-3.494 9.37l1.874.699 1.398-3.748-1.874-.699-1.398 3.748zm-3.494 9.37l1.874.699 1.398-3.748-1.874-.699-1.398 3.748zm-3.494 9.37l1.874.699 1.398-3.748-1.874-.699-1.398 3.748zm-3.494 9.37l1.874.699 1.398-3.748-1.874-.699-1.398 3.748zm-3.494 9.37l1.874.699 1.398-3.748-1.874-.699-1.398 3.748zm-3.494 9.37l1.874.699 1.398-3.748-1.874-.699-1.398 3.748zm-5.558 7.155l.945 1.763a13.16 13.16 0 0 0 3.432-2.638l-1.466-1.361a11.184 11.184 0 0 1-2.912 2.236zm-5.421 1.371h-3.87v2h3.87l.142-.001-.022-2-.121.001zm-10.039 0v2h.169v-2h-.169zm71.887-14.26l-.967 1.751a9.032 9.032 0 0 0 4.358 1.119v-2a7.039 7.039 0 0 1-3.391-.869zm-3.781-7.423v-.221h-2v.221c0 1.439.201 2.762.593 3.956l1.9-.624c-.324-.987-.493-2.1-.493-3.332zm0-10.221h-2v4h2v-4zm3.158-8.493l-1.431-1.397a12.49 12.49 0 0 0-2.435 3.602l1.823.823a10.527 10.527 0 0 1 2.043-3.028zm8.402-4.57l-.842-1.814-3.628 1.684.842 1.814 3.628-1.684zm9.071-4.209l-.842-1.814-3.628 1.684.842 1.814 3.628-1.684zm7.444-3.454l1.977-.917-1.984-.901-1.633-.741-.827 1.821 1.633.741-.008-1.818-2.002.929.842 1.814 2.002-.929zm-10.747-6.692l-.827 1.821 3.642 1.653.827-1.821-3.642-1.653zm-9.106-4.133l-.827 1.821 3.642 1.653.827-1.821-3.642-1.653zm-7.023-5.743l-1.808.855a11.942 11.942 0 0 0 2.537 3.552l1.381-1.447a9.948 9.948 0 0 1-2.11-2.959zm-1.2-5.729v-3.666h-2v3.666l.002.295 2-.033-.002-.262zm0-10.269c0-1.113.151-2.137.44-3.065l-1.909-.596c-.351 1.124-.531 2.349-.531 3.66v.603h2v-.603zm6.967-8.287l-.104-1.997a9.122 9.122 0 0 0-4.291 1.329l1.044 1.706a7.128 7.128 0 0 1 3.35-1.037zm8.811 3.181l.873-1.799-3.598-1.747-.873 1.799 3.598 1.747zm8.996 4.367l.873-1.799-3.598-1.747-.873 1.799 3.598 1.747zm8.996 4.367l.873-1.799-3.598-1.747-.873 1.799 3.598 1.747zm8.996 4.367l.873-1.799-3.598-1.747-.873 1.799 3.598 1.747zm8.996 4.367l.873-1.799-3.598-1.747-.873 1.799 3.598 1.747zm8.996 4.367l.873-1.799-3.598-1.747-.873 1.799 3.598 1.747zm7.965 5.162l1.538-1.279a15.307 15.307 0 0 0-3.166-2.882l-1.12 1.657a13.303 13.303 0 0 1 2.748 2.504zm2.777 7.116v1.598h2v-1.598c0-.873-.101-1.744-.299-2.606l-1.949.447c.164.717.248 1.438.248 2.158zm-1.526 10.842l1.745.977a14.133 14.133 0 0 0 1.512-4.031l-1.959-.404a12.15 12.15 0 0 1-1.298 3.459zm-4.929 4.775l-2.203 1.069.873 1.8 2.204-1.069c.478-.232.942-.497 1.391-.794l-1.102-1.669c-.376.249-.764.47-1.162.664zm-11.201 5.433l.873 1.8 3.599-1.746-.873-1.8-3.599 1.746zm-8.998 4.364l.873 1.8 3.599-1.746-.873-1.8-3.599 1.746zm-8.998 4.364l.873 1.8 3.599-1.746-.873-1.8-3.599 1.746zm-8.998 4.364l.873 1.8 3.599-1.746-.873-1.8-3.599 1.746zm-8.998 4.364l.873 1.8 3.599-1.746-.873-1.8-3.599 1.746zm-6.953 3.372a9.59 9.59 0 0 1-1.934.7l.467 1.945c.781-.187 1.562-.47 2.338-.844l1.556-.755-.873-1.8-1.554.754z"/></svg>'
},function(e,t,i){"use strict";var o,n,r,s,a,l;Object.defineProperty(t,"__esModule",{value:!0}),i(13),o=i(22),n=i(456),r=i(1287),s=i(1997),a=i(3),l=function(){function e(e){var t=this;if(this._$body=$(e.body.value()),0===this._$body.size())throw Error("bridge.body.value() must be an element or not empty jQuery object");this._availableAreas=["left","dompanel","right","top","footer","bottom","center"],this._areas={},this._bridge=e,this._width=e.width,this._height=e.height,this._width.subscribe(function(){return t.recalculate()}),this._height.subscribe(function(){return t.recalculate()}),this._bridge.visible.subscribe(function(){return t._updateVisibility()}),this._bridge.fullscreen.subscribe(function(){return t._onParentFullscreenChange()}),this.recalculate()}return e.prototype.allocate=function(e){var t,i,a=this,l=e&&e.areaName;if(-1===this._availableAreas.indexOf(l))throw Error("unknown options.areaName");return this.free(l),t=this._createDOM(l),i={canNegotiate:{width:"left"===l||"right"===l||"dompanel"===l,height:"top"===l||"bottom"===l||"footer"===l},negotiations:{width:[],height:[]},remove:function(){for(var e in a._areas)a._areas[e]===i&&a.free(e)},negotiateWidth:function(e){if(i.canNegotiate.width){var t=r.processNegotiation(e);r.negotiationsAreEqual(i.negotiations.width,t)||(i.negotiations.width=t,a.recalculate())}},negotiateHeight:function(e){if(i.canNegotiate.height){var t=r.processNegotiation(e);r.negotiationsAreEqual(i.negotiations.height,t)||(i.negotiations.height=t,a.recalculate())}},requestFullscreen:function(){a._fullscreenArea||("right"!==l&&"center"!==l||(a._fullscreenArea=l),"center"===l&&a._bridge.requestFullscreen(),a._updateFullscreen())},exitFullscreen:function(){l===a._fullscreenArea&&(a._fullscreenArea=void 0,"center"===l&&a._bridge.exitFullscreen(),a._updateFullscreen())},detach:function(e){s.detachToPopup(i.rdState,Object.assign({},e,s.screenBox(i.body.value())))},width:new o,height:new o,availWidth:new o,availHeight:new o,alive:new o(!0),body:new o(t),detachable:new o(!0),visible:new o(!0),fullscreen:new o(!0),rdState:new n.ResizerDetacherState},i.rdState.pushOwner(i),this._areas[l]=i,i.rdState.owner.subscribe(function(e){var t,o,n,r=i.body.value();if(e!==i)r.empty().detach();else{for(t=null,o=a._availableAreas.indexOf(l);o--;)if(n=a._availableAreas[o],a._affectsLayout(n)){t=a._areas[n].body.value();break}t?r.insertAfter(t):r.appendTo(a._$body)}a.recalculate()},{callWithLast:!0}),i.rdState.bridge()},e.prototype.free=function(e){var t=this._areas[e];t&&(this._areas[e]=void 0,$(t.body.value()).remove(),t.alive.setValue(!1))},e.prototype.recalculate=function(){var e,t,i,o,n,s,a,l,c,h,u,d,p,f={};for(this._recalcSingleRunToken=f,e={width:this._width.value(),height:this._height.value()},t=0;t<this._availableAreas.length;t++)if(i=this._availableAreas[t],(o=this._areas[i])&&this._affectsLayout(i)){for("center"===i?(n=0,this._affectsLayout("left")&&(n+=this._areas.left.width.value()),s=0,this._affectsLayout("top")&&(s+=this._areas.top.height.value()),o.body.value().css({left:n,top:s
})):"top"!==i&&"bottom"!==i&&"footer"!==i||(n=0,this._affectsLayout("left")&&(n+=this._areas.left.width.value()),o.body.value().css({left:n})),a=void 0,a=o.canNegotiate.width&&!o.canNegotiate.height?["height","width"]:["width","height"],l=0;l<2;l++){if(c=a[l],h=void 0,u=e[c],this._fullscreenArea===i)h=u;else{if("bottom"===i&&"height"===c&&(u-=5),"right"!==i&&"dompanel"!==i||"width"!==c||(u-=300),"width"===c?o.availWidth.setValue(u):"height"===c&&o.availHeight.setValue(u),f!==this._recalcSingleRunToken)return;o.canNegotiate[c]?(h=r.determineSize(u,o.negotiations[c]),e[c]-=h):h=u}if(o.body.value().css(c,h),o[c].setValue(h),f!==this._recalcSingleRunToken)return}o.body.value().toggleClass("js-hidden",!1)}else o&&o.body.value().toggleClass("js-hidden",!0);this._affectsLayout("footer")&&(o=this._areas.footer,d=this._height.value()-o.height.value(),this._affectsLayout("bottom")&&(d-=this._areas.bottom.height.value()),o.body.value().css({top:d})),this._affectsLayout("dompanel")&&(o=this._areas.dompanel,p=0,this._affectsLayout("right")&&(p+=this._areas.right.width.value()),o.body.value().css({right:p}))},e.prototype._affectsLayout=function(e){var t,i=this._areas[e];return!!i&&(i.rdState.owner.value()===i&&((!this._fullscreenArea||this._fullscreenArea===e)&&!((this._width.value()<=567||this._height.value()<=450)&&(t=["center","top"],a.enabled("keep_left_toolbar_visible_on_small_screens")&&t.push("left"),!t.includes(e)))))},e.prototype._updateVisibility=function(){var e,t,i,o=this._bridge.visible.value();for(e=0;e<this._availableAreas.length;e++)t=this._availableAreas[e],(i=this._areas[t])&&(o&&this._affectsLayout(t)?i.visible.setValue(!0):i.visible.setValue(!1))},e.prototype._onParentFullscreenChange=function(){this._bridge.fullscreen.value()||(this._fullscreenArea=void 0,this._updateFullscreen())},e.prototype._updateFullscreen=function(){var e,t,i,o=void 0!==this._fullscreenArea;for(e=0;e<this._availableAreas.length;e++)t=this._availableAreas[e],(i=this._areas[t])&&(t!==this._fullscreenArea?i.body.value().toggleClass("js-hidden",o):i.fullscreen.setValue(o));this._updateVisibility(),this.recalculate()},e.prototype._createDOM=function(e){var t=$("<div>").addClass("layout__area--"+e).css("position","absolute");return"bottom"===e?t.css("bottom",0):t.css("top",0),"right"===e||"dompanel"===e?t.css("right",0):t.css("left",0),t},e}(),t.ChartPage=l},function(e,t,i){"use strict";function o(e,t){var i,o=Object.assign({},t),n=e.bridge().body.value();return n&&(o.useStylesFrom=n.prop("ownerDocument")),!!(i=l(o))&&(e.pushOwner(i.allocate()),!0)}function n(e){var t,i,o=$(e),n=o.offset(),r={left:+n.left,top:+n.top,width:o.width(),height:o.height()},s=o.prop("ownerDocument");return s&&(t=s.defaultView)?(i=t.innerWidth/$(s.documentElement).width(),isFinite(i)&&(r.left*=i,r.top*=i,r.width*=i,r.height*=i),r.left+=t.screenLeft||t.screenX||0,r.top+=t.screenTop||t.screenY||0,r):r}var r,s,a,l;Object.defineProperty(t,"__esModule",{value:!0}),r=i(1093),t.detachToPopup=o,t.screenBox=n,s=function(e,t){
var i,o,n,r,s,a,l=e.querySelectorAll('style, link[rel~="stylesheet"]'),c=t.createDocumentFragment();for(i=0;i<l.length;i++){for(o=l[i],n=t.createElement(o.tagName),r=0;r<o.attributes.length;r++)s=o.attributes[r],n.setAttribute(s.nodeName,s.nodeValue||"");a=o.textContent,a&&(n.textContent=a),c.appendChild(n)}return c},a=function(e,t,i){var o=function(){e&&e.removeEventListener("unload",o,!1),t&&(t.removeEventListener("unload",o,!1),t.close()),i&&i.free()};e.addEventListener("unload",o,!1),t.addEventListener("unload",o,!1)},l=function(e){var t,i,o,n,l,c,h,u,d;for(void 0===e&&(e={}),t="menubar=no,toolbar=no,location=no,personalbar=no,status=no",i=0,o=["top","left","width","height"];i<o.length;i++)n=o[i],l=+e[n],isFinite(l)&&l>=0&&(t+=","+n+"="+l);if(!(c=window.open("",e.name||"_blank",t))||c.closed)return null;h=null;try{h=c.document,h.close()}catch(e){return null}return h.open(),h.write('<!DOCTYPE html><html><head><meta http-equiv="X-UA-Compatible" content="IE=Edge" /></head><body></body></html>'),h.close(),null!=e.title&&(h.title=e.title+""),e.useStylesFrom&&(h.head.appendChild(s(e.useStylesFrom,h)),u=h.createElement("style"),u.textContent="html, body {min-width: 0 !important; max-width: none !important}",h.head.appendChild(u)),d=new r.Root(c),a(window,c,d),d}},function(e,t,i){"use strict";function o(e){return"seekingalpha"===e||"smartlab-custom"===e?i.e(36).then(i.bind(null,2258)):i.e(37).then(i.bind(null,2255))}Object.defineProperty(t,"__esModule",{value:!0}),t.resolveByCustomer=o}],[1985]);