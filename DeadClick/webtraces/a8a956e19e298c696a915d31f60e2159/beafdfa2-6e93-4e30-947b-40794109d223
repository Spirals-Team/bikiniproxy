(function(){bbc.fmtj.utils.createObject("bbc.fmtj.view");var a=function(c){var f={};var d="bbc.fmtj.view";var g="0.0.35";if(c===undefined){f=bbc.fmtj.utils.createObject(d);}else{f=c;}f.namespace=d;f.version=g;var e;var b=(function(){var s=[],t="NTABS",j="/news",x="bbc.co.uk",m=[],n,w,z;m["geographic-news-digests"]="A";m["geo-digest-england"]="B";return{initialise:o};function o(){q();p();return{manageTabContainer:r};}function p(){if(n!==undefined){return false;}gloader.load(["glow","1","glow.dom","glow.events"],{onLoad:function(A){n=A;w=A.dom;z=A.events;}});}function r(C,F){if(m[C]===undefined){return false;}var I,G,E,D,A;var B=w.get("#"+C);if(B.length<1){return false;}if(s[m[C]]!==undefined){I=s[m[C]];}else{if(F!==undefined){I=F();}}G=B.get(".tab");if(I!==undefined){E=B.get(".panel");D=w.get(G[I]);A=w.get(E[I]);G.removeClass("open");E.removeClass("open");D.addClass("open");A.addClass("open");}for(var H=0;H<G.length;H++){h(C,H,G[H]);}}function h(C,A,B){z.addListener(B,"click",function(){s[m[C]]=A;i();});}function i(){var A=u(s);if(A!==null&&A!=={}){y(t,A,8760,j,x);}else{v(t,j,x);}}function q(){var A=k(t);if(A!==null){s=l(A);}else{s=[];}}function l(C){var D=[],A=/([A-Z]*)(\d*)/ig,B=A.exec(C);while(B!=null&&B[1]!==""&&B[2]!==""){D[B[1]]=Number(B[2]);B=A.exec(C);}return D;}function u(C){var B=[],A;for(A in C){B.push(A+C[A]);}return B.join("");}function y(C,F,A,H,E,G){var B=[];if(A!==null&&A!==undefined){var D=new Date(new Date(new Date()).getTime()+A*3600000).toUTCString();B.push("; expires="+D);}if(H!==null&&H!==undefined){B.push("; path="+H);}if(E!==null&&E!==undefined){B.push("; domain="+E);}if(G!==null&&G!==undefined){B.push("; secure="+G);}document.cookie=C+"="+F+B.join("");}function k(B){var D=B+"=";var A=document.cookie.split(";");for(var C=0;C<A.length;C++){var E=A[C];while(E.charAt(0)==" "){E=E.substring(1,E.length);}if(E.indexOf(D)==0){return E.substring(D.length,E.length);}}return null;}function v(A,D,B,C){y(A,"",-1,D,B,C);}})();f.tabManager=function(i,h){if(e===undefined){e=b.initialise();}e.manageTabContainer(i,h);};f["livestats-heatmap"]=function(){bbc.fmtj.common.liveStats.initialise();};f["site-wide-alert"]=function(i,h){h.containerId=i;bbc.fmtj.apps.site_wide_alert.checkAlert(h);};f.slideshow=function(i,h){h.containerId=i;bbc.fmtj.apps.slideshow.createSlideShow(h);};f["hyper-foldout"]=function(h){if(h===undefined){return;}gloader.load(["glow","1","glow.dom","glow.anim","glow.events"],{onLoad:function(s){var o=s.dom,l=s.anim,m=s.events;var n=o.get("#"+h),r=n.get(".hyper-foldout-header"),k=n.get(".hyper-foldout-panel"),t;var u="Open Foldout",j="Close Foldout",i=n.hasClass("open");if(r.length>0){if(r.length>1){r=o.get(r[0]);}}if(k.length>0){if(k.length>1){k=o.get([k][0]);}}var p=o.create('<a href="#">'+r.html()+"</a>");var t=o.create('<span class="hyper-foldout-arrow"></span>');if(i){t.text(j);k.height("auto");}else{t.text(u);}p.append(t);r.empty();r.append(p);m.addListener(r,"click",v);function v(w){i=!i;l.slideToggle(k,0.3,{onStart:function(){if(i){n.addClass("open");}},onComplete:function(){if(i){t.text(j);}else{t.text(u);n.removeClass("open");}}});q(i);return false;}function q(x){var w=new l.Animation(0.3,{tween:s.tweens.easeBoth()},{destroyOnComplete:true});m.addListener(w,"frame",function(){var z;if(x){z=Math.floor(this.value*10)+1;}else{z=Math.floor((1-this.value)*10)+1;}for(var y=1;y<12;y++){t.removeClass("hyper-foldout-arrow-position-"+y);}t.addClass("hyper-foldout-arrow-position-"+z);});w.start();}}});};f["hide-text-input-labels"]=function(h){if(h===undefined){return;}gloader.load(["glow","1","glow.dom","glow.events"],{onLoad:function(n){var j=n.dom;var l=n.events;var i=j.get("#"+h+" input, #"+h+" textarea").filter(function(o){var p=j.get(this);var q=false;if(p.hasAttr("type")){q=(p.attr("type")=="text"||p.attr("type")=="password");}else{q=true;}return q;});if(i.length<1){return;}var m=j.get("#"+h+" label").filter(function(o){return j.get(this).hasAttr("for");});if(m.length<1){return;}l.addListener(i,"focus",k);l.addListener(i,"blur",k);l.addListener(i,"keyup",k);n.ready(function(){i.each(function(o){l.fire(this,"keyup");});});function k(p){var o=j.get(p.attachedTo);if(!o.hasAttr("id")){return;}var q=o.attr("id");if(q!==undefined){m.each(function(s){var r=j.get(this);if(r.hasAttr("for")){if(r.attr("for")==q){switch(p.type){case"focus":r.addClass("input-has-focus");break;case"blur":r.removeClass("input-has-focus");break;case"keyup":if(o.val().length>0){r.addClass("input-has-content");}else{r.removeClass("input-has-content");}break;default:break;}}}});}}}});};f["replace-form-select-with-custom-dropdown"]=function(i,h){if(i===undefined){return;}if(h===undefined){h={};}if(h.dropdownSize===undefined){h.dropdownSize=6;}gloader.load(["glow","1","glow.dom","glow.events"],{onLoad:function(p){var k=p.dom;var n=p.events;var j=k.get("#"+i+" label").filter(function(r){var q=k.get(this);return(q.hasAttr("for")?k.get("#"+q.attr("for"))[0].tagName.toUpperCase()==="SELECT":false);});var m=k.get("#"+i+" select");if(j.length<1){return;}if(m.length<1){return;}j[0].tabIndex="0";m.attr("size",h.dropdownSize).css("display","none");m[0].selectedIndex=-1;n.addListener(j,"click",function(q){m.css("display","block").css("top","0").css("top","").css("position","relative").css("position","static").css("position","");m[0].focus();return false;});n.addListener(j,"keydown",function(q){if(q.key==="UP"){if(l()!==j.text()){o();}else{if(m[0].selectedIndex>0){m[0].selectedIndex--;o();}}return false;}else{if(q.key==="DOWN"){if(l()!==j.text()){j.text(l());}else{if(m[0].selectedIndex<m[0].length-1){m[0].selectedIndex++;o();}}return false;}}});n.addListener(m,"blur",function(q){o();m.css("display","none");});n.addListener(m,"click",function(q){o();m.css("display","none");});n.addListener(m,"keydown",function(q){if(q.key==="ENTER"){o();m.css("display","none");j[0].focus();}});function o(){var q=l();if(q!==null){j.text(q);}}function l(){var q=m[0].selectedIndex;if(q<0){return null;}return k.get(k.get(m).get("option")[q]).text();}}});};f.ImageLightBox=(function(){var m={};var t,o,n,q,k,w,u,l;var i=0,r=1,p=2;return{createImageLightBox:j};function h(x){if(t!==undefined){if(typeof x==="function"){t.ready(x);}}gloader.load(["glow","1","glow.dom","glow.events","glow.anim","glow.widgets.Panel"],{async:true,onLoad:function(y){t=y;o=y.dom;n=y.dom.create;q=y.events.addListener;k=y.anim;w=y.tweens;u=y.widgets.Panel;l=y.lang.interpolate;if(typeof x==="function"){t.ready(x);}}});}function v(x){var y={};if(x===undefined){x={};}(x.imageUrl===undefined?y.imageUrl=null:y.imageUrl=x.imageUrl);(x.imageHeight===undefined?y.imageHeight=400:y.imageHeight=x.imageHeight);(x.imageWidth===undefined?y.imageWidth=600:y.imageWidth=x.imageWidth);(x.altText===undefined?y.altText="":y.altText=x.altText);(x.title===undefined?y.title=null:y.title=x.title);(x.caption===undefined?y.caption=null:y.caption=x.caption);(x.showShareTools===undefined?y.showShareTools=false:y.showShareTools=x.showShareTools);return y;}function j(z,x){m[z]={status:i};var y=v(x);y.bigPictureId=z;if(y.imageUrl===null){return false;}h(function(){var D=o.get("#"+z);var C=D.get("a");if(C.length>0){var B;if(C.hasAttr("href")){B=C.attr("href");y.storyUrl=B;var A=B.match(/\b\d+\b$/);if(A.length>0){y.storyId=A[0];}}}D.get("span").addClass("gvl3-icon").addClass("gvl3-icon-popout");q(D.get("a"),"click",s,{opts:y});m[y.bigPictureId].status=r;});}function s(y){var z=this.opts;if(m[z.bigPictureId].status!==r){return false;}if(m[z.bigPictureId].panel===undefined){var x="";if(z.showShareTools&&z.storyUrl!==undefined&&z.storyId!==undefined){x='<div id="'+z.bigPictureId+'-page-bookmark-links" class="bookmark-links-share"></div>';}m[z.bigPictureId].panel=new u(n(l('<h2 class="hd">{title}</h2> 						<div><img src="{imageUrl}" alt="{altText}" height="{imageHeight}" width="{imageWidth}" /></div> 						<div class="ft"><p>{caption}</p>'+x+"</div>",z)),{anim:"fade",className:"image-light-box",closeOnEsc:true,hideWindowedFlash:true,width:z.imageWidth+"px",theme:"none"});if(z.showShareTools&&z.storyUrl!==undefined&&z.storyId!==undefined){$render("page-bookmark-links",z.bigPictureId+"-page-bookmark-links",{useForgeShareTools:"true",position:"inline",headline:bbc.fmtj.page.siteName+" - "+z.title,storyId:z.storyId,url:z.storyUrl});}q(m[z.bigPictureId].panel,"afterShow",function(){m[z.bigPictureId].status=p;});q(m[z.bigPictureId].panel,"afterHide",function(){m[z.bigPictureId].status=r;});}m[z.bigPictureId].panel.show();return false;}})();f.DateTime=(function(){var i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];var j=["January","February","March","April","May","June","July","August","September","October","November","December"];var h=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return{rewriteTimestamps:k,DayOfWeek:i,MonthOfYear:j,MonthOfYearShort:h};function k(n){if(n.container===undefined){n.container="*";}if(n.elementType===undefined){return false;}if(n.maxMinutes===undefined){return false;}var m=glow.dom.get(n.container);var l;if(m.is(n.elementType)&&m.hasClass("timestamp")){l=m;}else{l=m.get(n.elementType+".timestamp");}l.each(function(q){var r=glow.dom.get(this);var s=r.get("span.timestamp");if(s.length>1){s=glow.dom.get(s[0]);}var o=Date.parse(s.text());if(!isNaN(o)){var t=bbc.fmtj.page.serverTime-o;if(t<0){t=0;}var p=parseInt(t/60000,10);if(p<n.maxMinutes){if(p<1){p=1;}if(n.formatter!==undefined){n.formatter(r,s,p);}}else{if(n.elseFormatter!==undefined){n.elseFormatter(r,s,p);}}}});}})();f.fitText=function(h,i){require(["jquery-1"],function(m){$=m;var k=$(h);var l=k.height();k.height("auto");var j=k.text().split(" ");while(k.height()>l&&j.length>1){k.html(j.join(" "));j.pop();j.pop();j.push(i);}k.height("");});};bbc.fmtj.components.registerNamespace(f);return f;};if(typeof gloader!="undefined"){gloader.library({name:"bbc.fmtj.view",version:"0.0.35",builder:a});}else{a(bbc.fmtj.view);}})();