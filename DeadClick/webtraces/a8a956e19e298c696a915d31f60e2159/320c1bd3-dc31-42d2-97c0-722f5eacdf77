<!DOCTYPE HTML>
<html>
<script type="text/javascript" src="//static.bbci.co.uk/frameworks/requirejs/0.12.1/sharedmodules/require.js"></script>
<script type="text/javascript">

window.validDomains = "bbc\\.co\\.uk,bbc\\.com,bbcconnectedstudio\\.co\\.uk,metabroadcast\\.com,bbcnewshq\\.com,twofourstaging\\.net,codeandtheory\\.net,thespace\\.org,plateau\\.com,bbcstore\\.com,microbit\\.co\\.uk,bbcarchdev\\.net,acropolis\\.org\\.uk,audiencesportal\\.co\\.uk,thirteenlostyears\\.co\\.uk,bbcdigitalguerrillas\\.co\\.uk,bbc-massive\\.com,britbox\\.com,bbcomtraining\\.co\\.uk,bbcrewind\\.co\\.uk,gomolearning\\.com,newslabs\\.co,bbcnewslabs\\.co\\.uk,bbccreative\\.co\\.uk,api\\.bbci\\.co\\.uk".split(",");

// Browser capability tests e.g. for Windows Phone 8 Internet Explorer
if (typeof window.JSON !== 'object') {
    document.write('<script type="text/javascript" src="json.js"></scr'+'ipt>');
}
try {
    Object.defineProperty(this, "test", {} );
} catch(e) {
    // Redirect
    window.location.href="UnsupportedError.html";
}
</script>
<style type="text/css">
.p_subtitlesContainer{pointer-events:none;z-index:9;}.errorShowing .p_subtitlesContainer{display:none !important;}html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline;}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block;}body{line-height:1;}ol,ul{list-style:none;}blockquote,q{quotes:none;}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none;}table{border-collapse:collapse;border-spacing:0;}body,html{font-family:helvetica,Arial,sans-serif;margin:0;padding:0;overflow:hidden;-ms-user-select:none;-moz-user-select:none;-webkit-user-select:none;user-select:none;}video::-webkit-media-controls-start-playback-button{display:none !important;-webkit-appearance:none;}html{height:100%;width:100%;}body{background-color:#000;margin:0;padding:0;}body.transparent{background-color:transparent;}.p_background{position:fixed;left:0;right:0;top:0;bottom:0;background-color:#000;}.p_background.transparent{background-color:transparent;}button{border-radius:0px;}button.p_cta ,button.p_button,button.p_controlBarButton{font-size:1em;outline:none;}.cta .mediaContainer:hover{cursor:pointer;}.errorShowing .mediaContainer:hover{cursor:default;}.p_accessibleHitArea{position:absolute;top:0;width:100%;height:100%;}#p_alert{width:1px;position:absolute;left:-2500px;overflow:hidden;display:none;}.p_posterEffectsContainer,.p_posterSlideEffectContainer,.p_posterEffectsContainer img{position:absolute;top:0;z-index:0;height:100%;width:100%;}.p_oldSlideImage{z-index:0 !important;}.p_newSlideImage{z-index:1 !important;}.p_onScreen{left:0;}.p_offScreenLeft{left:-100%;}.p_offScreenRight{left:100%;}.p_button{cursor:pointer;border:0;padding:0;margin:0;}.p_posterEffectsContainer{position:absolute;top:0;left:0;bottom:0;right:0;}.p_posterEffectsContainer img{height:100%;width:100%;}.mediaContainer{left:0;top:0;height:100%;width:100%;overflow:hidden;position:absolute;background-repeat:no-repeat;background-position:49.99% 49.99%;background-size:contain;}.mediaContainer video,.mediaContainer audio{background-color:black;position:absolute;left:0;top:0;height:100%;width:100%;}body.transparent .mediaContainer video,body.transparent .mediaContainer audio{background-color:transparent;}#p_swfcontainer{pointer-events:none;position:fixed;left:0px;top:0px;right:0px;bottom:0px;}.errorShowing #p_swfcontainer,.flashHidden #p_swfcontainer{left:-10000px;width:10px;}.displayCover:not(.fullscreen) .mediaContainer{background-size:cover;}.videoPositionTop .mediaContainer{background-position:0% 0%;}.videoPositionBottom .mediaContainer{background-position:0% 100%;}.displayCover:not(.fullscreen) .mediaContainer video{object-fit:cover;}.videoPositionTop .mediaContainer video{object-position:0% 0%;}.videoPositionBottom .mediaContainer video{object-position:0% 100%;}#debugMenu{color:#fff;font-size:15px;display:block;position:fixed;top:0px;left:0px;right:0px;bottom:0px;padding:10px;z-index:10;background-color:rgba(0,0,0,0.7);}.p_contextMenu{position:fixed;background-color:#fff;border:1px solid #333;border-radius:3px;max-width:350px;margin:0;padding:0;z-index:200;}.p_contextMenu li:hover{background-color:#666;color:#fff;}.p_contextMenu li{list-style:none;}.p_contextMenuItem{display:inline-block;margin:0 5px;overflow:hidden;text-overflow:ellipsis;width:calc(100% - 10px);font-size:12px;line-height:22px;cursor:pointer;white-space:nowrap;color:#000;text-decoration:none;}.p_contextMenu li:first-child{margin-top:5px;}.p_contextMenu li:last-child{margin-bottom:5px;}#p_remoteInput{position:absolute;top:40px;right:40px;padding:8px 10px;width:37px;color:#fff;letter-spacing:3px;font-weight:bold;font-size:18px;background-color:rgba(0,0,0,0.8);}.p_iconHolder{position:relative;height:100%;width:100%;}.p_cta{position:absolute;border:0;left:0;bottom:0;width:99%;display:block;width:80px;height:80px;text-decoration:none;-webkit-transition:background-color 0.4s ease-out;-moz-transition:background-color 0.4s ease-out;-o-transition:background-color 0.4s ease-out;transition:background-color 0.4s ease-out;background-color:rgba(0,0,0,0.8);background-image:url(//emp.bbci.co.uk/emp/assets/2.0.18/cta_play.png);background-repeat:no-repeat;background-position:center;background-size:52px 52px;cursor:pointer;z-index:150;}.p_cta.p_hasDuration{background-position:50% 38%;}.svg .p_svg{fill:#fff;}.svg .p_cta,.svg.minimode .p_cta{background-image:none;}.svg .p_cta .p_ctaIcon{position:absolute;top:10px;left:10px;height:60px;width:60px;}.svg .p_cta.p_hasDuration .p_ctaIcon{top:5px;}.minimode .p_cta{width:60px;height:60px;background-size:35px 35px;}.minimode.svg .p_cta .p_ctaIcon{top:10px;left:10px;height:40px;width:40px;}.minimode.svg .p_cta.p_hasDuration .p_ctaIcon{top:4px;}.minimode.audio .p_cta{background-size:22px 22px;}.minimode.audio .p_cta.p_hasDuration{background-position:50% 34%;}.p_ctaDuration{font-size:0.75rem;font-family:helvetica,Arial,sans-serif;position:absolute;bottom:8px;left:0;color:#fff;width:80px;}.minimode .p_ctaDuration{bottom:6px;width:60px;}.p_none{display:none;}.p_errorWrapper{position:absolute;z-index:150;left:0;top:0;height:100%;width:100%;}.p_errorDialog{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:100%;height:100%;text-decoration:none;vertical-align:middle;text-align:center;color:#fff;font-size:18px;line-height:24px;background-color:rgba(51,51,51,0.85);}.p_errorBackground{vertical-align:middle;width:245px;text-align:center;padding:20px;background-color:transparent;font-family:Arial,helvetica,sans-serif;}.p_errorPrimary{display:inline-block;margin-top:16px;}.p_errorPrimary a{color:#fff;font-weight:bold;}.p_errorDialog_a{display:inline-block;color:#fff;font-family:Arial,helvetica,sans-serif;width:227px;height:34px;line-height:34px;margin-top:17px;margin-bottom:10px;background-color :#191919;border:5px solid transparent;background-clip:padding-box;cursor:pointer;-webkit-transition:background-color 0.4s ease-out;-moz-transition:background-color 0.4s ease-out;-o-transition:background-color 0.4s ease-out;transition:background-color 0.4s ease-out;}.offline .p_errorDialog_a{display:none;}.p_errorSecondary{margin-top:31px;display:block;color:#fff;}.p_errorSecondary a{color:#fff;}.p_fallbackButton{height:34px;line-height:34px;width:100%;margin-top:19px;background:#191919;color:#fff;text-align:center;cursor:pointer;-webkit-transition:background-color 0.4s ease-out;-moz-transition:background-color 0.4s ease-out;-o-transition:background-color 0.4s ease-out;transition:background-color 0.4s ease-out;}.p_none.p_errorSecondary,.minimode .p_errorSecondary{display:none;}.minimode .p_errorDialog{background:rgba(51,51,51,1);}.minimode .p_errorBackground{position:absolute;left:0;height:100%;width:100%;background:none;text-align:left;padding:0;}.minimode .p_errorDialog_a{width:auto;text-align:center;margin:0 8px 0 0;padding:0 8px;float:right;position:relative;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);}.minimode .p_errorRefreshDialog_a{display:none;color:#fff;height:34px;line-height:34px;margin:0 8px 0 0;padding:0 8px;float:right;background-color :#191919;border:5px solid transparent;background-clip:padding-box;cursor:pointer;-webkit-transition:background-color 0.4s ease-out;-moz-transition:background-color 0.4s ease-out;-o-transition:background-color 0.4s ease-out;transition:background-color 0.4s ease-out;position:relative;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);}.minimode .alertIconHolder{display:inline-block;float:left;width:44px;height:100%;text-align:center;padding:0 8px;}.minimode.svg .p_alertIcon{position:relative;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);width:25.15px;height:22px;}.minimode .p_fallbackDialog .p_fallbackButton{width:245px;margin-top:12px;}.minimode div[role=alert]{display:block;overflow:hidden;position:relative;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);}.minimode .p_errorPrimary{margin:0;display:block;}@media (min-width:320px) and (max-width:599px){.p_errorDialog{font-size:16px;line-height:22px;}}@media (max-width:319px){.p_errorDialog{font-size:15px;line-height:20px;}}@media (max-width:400px){.minimode .p_errorDialog_a{display:none;}.minimode .p_errorRefreshDialog_a{display:inline-block !important;}.minimode.svg .p_refreshIcon{display:block !important;width:18px;height:18px;padding:8px 0;}.minimode .p_fallbackDialog .alertIconHolder{display:none;}.minimode .p_fallbackDialog .p_errorPrimary{padding:8px;text-align:center;}.minimode .p_fallbackDialog .p_fallbackButton{margin-right:auto;margin-left:auto;}}@media (max-width:266px){.p_errorBackground{width:100%;padding:0 8px;box-sizing:border-box;}.p_errorPrimary{width:100%;}.p_errorDialog_a{width:100%;border:0;}.alertIconHolder:not(.minimode){display:none;}.minimode .p_errorRefreshDialog_a + .alertIconHolder{display:none;}}.minimode .p_cta{background-image:url(//emp.bbci.co.uk/emp/assets/2.0.18/cta_play_minimode.png);}.p_cta.p_iplayerIcon{background-image:url(//emp.bbci.co.uk/emp/assets/2.0.18/cta_play_iplayer.png);background-size:36px 36px;}.svg .p_cta.p_iplayerIcon{background-image:none;}.minimode .p_cta .p_iplayerIcon{background-size:27px 27px;}.minimode .p_cta.p_hasDuration.p_iplayerIcon{background-position:50% 31%;}.minimode.audio .p_cta .p_iplayerIcon{background-size:23px 23px;}.audio .p_cta{background-image:url(//emp.bbci.co.uk/emp/assets/2.0.18/cta_play_audio.png);background-size:28px 28px;}.audio.svg .p_cta{background-image:none;}.audio.svg .p_cta .p_ctaIcon{top:9px;left:9px;height:62px;width:62px;}.audio.svg .p_cta.p_hasDuration .p_ctaIcon{top:4px;}.minimode.audio.svg .p_cta .p_ctaIcon{top:9px;left:7px;height:45px;width:45px;}.minimode.audio.svg .p_cta.p_hasDuration .p_ctaIcon{top:1px;}.audio .p_cta.p_iplayerIcon{background-image:url(//emp.bbci.co.uk/emp/assets/2.0.18/cta_play_audio_iplayer.png);}.audio.svg .p_cta.p_iplayerIcon{background-image:none;}.minimode.audio.svg .p_cta.p_iplayerIcon .p_ctaIcon{top:6px;left:6px;height:49px;width:49px;}.minimode.audio.svg .p_cta.p_hasDuration.p_iplayerIcon .p_ctaIcon{top:0;}@-webkit-keyframes spinner{from{-webkit-transform:rotate(0deg);}to{-webkit-transform:rotate(360deg);}}@-moz-keyframes spinner{from{-moz-transform:rotate(0deg);}to{-moz-transform:rotate(360deg);}}@keyframes spinner{from{transform:rotate(0deg);}to{transform:rotate(360deg);}}.p_spinner{position:absolute;position:fixed;pointer-events :none;z-index:10;}.p_spinner canvas{-webkit-animation-name:spinner;-webkit-animation-duration:1.1s;-webkit-animation-iteration-count:infinite;-webkit-animation-timing-function:linear;-moz-animation-name:spinner;-moz-animation-duration:1.1s;-moz-animation-iteration-count:infinite;-moz-animation-timing-function:linear;animation-name:spinner;animation-duration:1.1s;animation-iteration-count:infinite;animation-timing-function:linear;}.minimode .p_spinner{display:none !important;}#p_pluginContainer{z-index:50;overflow:hidden;}.p_playerControls{left:0;right:0;bottom:0;z-index:160;position:absolute;}.p_gradientLayer{pointer-events:none;opacity:0;left:0;right:0;bottom:0;z-index:8;position:absolute;width:100%;height:148px;background:-moz-linear-gradient(top,rgba(0,0,0,0) 0%,rgba(0,0,0,0.5) 40%,rgba(0,0,0,1) 100%);background:-webkit-linear-gradient(top,rgba(0,0,0,0) 0%,rgba(0,0,0,0.5) 40%,rgba(0,0,0,1) 100%);background:linear-gradient(to bottom,rgba(0,0,0,0) 0%,rgba(0,0,0,0.5) 40%,rgba(0,0,0,1) 100%);}.p_gradientBottomfiller{pointer-events:none;position:absolute;z-index:49;width:100%;background-color:#000000;bottom:0;}.cta .p_gradientLayer,.cta .p_gradientBottomfiller{visibility:hidden;}.p_hasMarkers:not(.p_chapterOnly):not(.p_keyMomentOnly) .p_gradientLayer{height:176px;}.noSeekingBar .p_gradientLayer{height:64px;}.minimode .p_gradientLayer{background:black;height:88px;}.minimode.transparent .p_gradientBottomfiller{background:transparent;}.minimode.transparent .p_gradientLayer{background:transparent;}.minimode.noSeekingBar .p_gradientLayer{height:44px;}.minimode:not(.p_keyMomentOnly).p_hasMarkers .p_gradientLayer{height:132px;}.minimode .p_keyMoment{bottom:50px;}.minimode.p_keyMomentOnly .p_keyMoment{bottom:6px;}@media (max-width:1044px){.fullscreen .p_playerControls{left:3.5625%;right:3.5625%;}}@media (min-width:1044px){.fullscreen .p_playerControls{left:50%;margin:0 0 0 -512px;width:1024px;}}.fadedOut{opacity:0;}.fadedIn{opacity:1;}.fadedIn,.fadedOut{-webkit-transition:opacity 0.6s ease-out;-moz-transition:opacity 0.6s ease-out;-o-transition:opacity 0.6s ease-out;transition:opacity 0.6s ease-out;}.controlsFadedOut .p_playerControls,.controlsFadedOut .p_gradientLayer,.controlsFadedOut .p_gradientBottomfiller,.controlsFadedOut .p_timeDisplay{opacity:0;}.controlsFadedIn .p_playerControls,.controlsFadedIn .p_gradientLayer,.controlsFadedIn .p_gradientBottomfiller,.controlsFadedIn .p_timeDisplay{opacity:1;}.controlsFadedIn .p_playerControls,.controlsFadedIn .p_gradientLayer,.controlsFadedIn .p_gradientBottomfiller,.controlsFadedIn .p_timeDisplay,.controlsFadedOut .p_playerControls,.controlsFadedOut .p_gradientLayer,.controlsFadedOut .p_gradientBottomfiller,.controlsFadedOut .p_timeDisplay,#p_compassContainer{-webkit-transition:opacity 0.6s ease-out;-moz-transition:opacity 0.6s ease-out;-o-transition:opacity 0.6s ease-out;transition:opacity 0.6s ease-out;}.p_playerSeekBarHolder{z-index:160;position:absolute;display:block;left:0;top:-44px;width:100%;height:44px;line-height:0;touch-action:none;}.p_bar{position:absolute;top:18px;height:6px;left:16px;cursor:pointer;}.p_seekBar{right:16px;background-color:#767676;}.p_progressBar{right:100%;transform-origin:left;-webkit-transform-origin:left;-moz-transform-origin:left;}.p_bar.p_progressBar.p_progressBarAvailable{display:none;}.seekingBarNotFullyAvailable .p_bar{cursor:default;}.seekingBarNotFullyAvailable .p_bar.p_progressBar.p_progressBarAvailable,.seekingBarNotFullyAvailable .p_progressBar{cursor:pointer;display:block;}@-webkit-keyframes progressBar{to{-webkit-transform:scale(1,1);-moz-transform:scale(1,1);transform:scale(1,1);}}@-moz-keyframes progressBar{to{-webkit-transform:scale(1,1);-moz-transform:scale(1,1);transform:scale(1,1);}}@keyframes progressBar{to{-webkit-transform:scale(1,1);-moz-transform:scale(1,1);transform:scale(1,1);}}.p_progressBarAnimate{animation-name:progressBar;-webkit-animation-name:progressBar;-moz-animation-name:progressBar;animation-timing-function:linear;-webkit-animation-timing-function:linear;-moz-animation-timing-function:linear;animation-fill-mode:forwards;-webkit-animation-fill-mode:forwards;-moz-animation-fill-mode:forwards;}.fullscreen .p_bar{left:0;}.fullscreen .p_seekBar{right:0;}.p_progressBarAvailable{opacity:0.4;}.p_timeTip{display:none;position:absolute;bottom:88px;font-size:0.75em;background-color:#fff;font-weight:bold;color:#191919;z-index:170;padding-top:1px;padding-bottom:0px;padding-left:8px;padding-right:8px;margin-top:0px;margin-bottom:0px;pointer-events:none;text-align:center;}.p_noControlBar .p_timeTip{bottom:44px;}.fullscreen .p_timeTip{top:-64px;}.p_playerControls.p_hasMarkers .p_timeTip{height:33px;top:-78px;}.p_playerControls.p_hasMarkers.p_hasThumbnails .p_timeTip{height:auto;top:auto;}.p_playerControls.p_hasMarkers.p_keyMomentOnly .p_timeTip{height:20px;top:-65px;}.p_timeTipTriangle.p_keyMomentTipTriangle{border-top:5px solid #191919;left:2px;}.p_timeTipTriangle{position:absolute;bottom:-6px;left:15px;width:0;height:0;border-left:6px solid transparent;border-right:6px solid transparent;border-top:6px solid #fff;font-size:0;line-height:0;}.p_seekThumb{position:absolute;top:14px;width:9px;height:14px;z-index:170;background:#fff;cursor:pointer;}@-webkit-keyframes seekThumb{to{-webkit-transform:translate(0,0);-moz-transform:translate(0,0);transform:translate(0,0);}}@-moz-keyframes seekThumb{to{-webkit-transform:translate(0,0);-moz-transform:translate(0,0);transform:translate(0,0);}}@keyframes seekThumb{to{-webkit-transform:translate(0,0);-moz-transform:translate(0,0);transform:translate(0,0);}}.p_seekThumbAnimate{-webkit-animation-name:seekThumb;-moz-animation-name:seekThumb;animation-name:seekThumb;-webkit-animation-timing-function:linear;-moz-animation-timing-function:linear;animation-timing-function:linear;-webkit-animation-fill-mode:forwards;-moz-animation-fill-mode:forwards;animation-fill-mode:forwards;}.p_seekThumb > .p_seekThumbLine{background-color:#191919;}.p_seekThumbLine{position:absolute;top:4px;pointer-events:none;left:4px;width:1px;height:6px;z-index:170;}.p_thumbnail{visibility:hidden;border:1px solid white;position:absolute;bottom:88px;z-index:165;background:rgba(51,51,51,0.8);opacity:0;transition:opacity 0s linear 0.4s;}.p_timeDisplay{cursor:default;float:right;right:0;margin-right:12px;text-align:center;white-space:nowrap;}.p_time{font-size:0.75em;text-align:right;display:inline-block;line-height:44px;color:#fff;}.p_timeSeparator{font-size:0.75em;padding-right:5px;padding-left:5px;width:2px;line-height:44px;color:#b3b3b3;display:inline-block;}.p_duration{color:#b3b3b3;text-align:left;}.transparent .p_timeSeparator,.transparent .p_duration{color:white;}.p_playerControlBarHolder{height:44px;line-height:0;}.stopTouch .p_playerControls{pointer-events:none;}.p_controlBarButton{position:absolute;width:44px;height:44px;font-weight:bold;display:block;text-decoration:none;text-align:center;background-repeat :no-repeat;background-color :transparent;background-position :center center;outline:0;cursor:pointer;z-index:170;}.p_controlBarButton:not(.p_buttonTouch){-webkit-transition:background-color 0.4s ease-out;-moz-transition:background-color 0.4s ease-out;-o-transition:background-color 0.4s ease-out;transition:background-color 0.4s ease-out;}.p_selected_indicator{position:absolute;height:4px;width:40px;}.p_timeDisplay.p_covered{opacity:0;}.p_subtitleButton.p_covered .p_selected_indicator{display:none;}.p_controlBarButton_on:hover .p_selected_indicator,.focusEnabled .p_controlBarButton_on:focus .p_selected_indicator{opacity:0.4;}.p_controlSeekBarThumb{position:absolute;width:38px;height:38px;z-index:170;}.p_playButton{left:0;background-image:url(//emp.bbci.co.uk/emp/assets/2.0.18/play.png);}.svg .p_playButton{background-image:none;}.svg .p_playButton .p_playIcon{position:absolute;left:5px;top:7px;width:31px;height:31px;}.p_pauseButton{left:0;background-image:url(//emp.bbci.co.uk/emp/assets/2.0.18/pause.png);}.svg .p_pauseButton{background-image:none;}.svg .p_pauseButton .p_pauseIcon{position:absolute;left:7px;top:8px;width:28px;height:28px;}.p_fullscreenButton{right:0;background-image:url(//emp.bbci.co.uk/emp/assets/2.0.18/fullscreen.png);}.p_fullscreenButtonReturn{right:0;background-size:22px 22px;background-position:center;background-repeat:no-repeat;background-image:url(//emp.bbci.co.uk/emp/assets/2.0.18/fullscreen-exit.png);}.alertIconHolder{height:22px;background-size:25.15px 22px;background-position:center;background-repeat:no-repeat;background-image:url(//emp.bbci.co.uk/emp/assets/2.0.18/alert.png);}.p_errorRefreshDialog_a{background-size:18px 18px;background-position:center;background-repeat:no-repeat;background-image:url(//emp.bbci.co.uk/emp/assets/2.0.18/refresh.png);}.p_castOverlay{position:absolute;background-color:rgba(51,51,51,0.8);height:100%;padding:0;top:0;left:0;right:0;margin:0;overflow:hidden;z-index:9;}.p_castOverlay .p_castIcon{height:100px;width:100px;position:absolute;top:0;bottom:0;left:0;right:0;margin:auto;}.fullscreen .p_messageDiv{top:35%;}.p_messageDiv{top:22%;position:absolute;width:100%;text-align:center;}.p_castMessage,.p_deviceMessage{font-family:helvetica,Arial,sans-serif;margin:0;}.p_castMessage{color:#fff;font-size:1.25em;font-weight:bold;}.p_deviceMessage{padding:8px 0 4px 0;color:#a4a4a4;font-size:1em;}.svg .p_fullscreenButton,.svg .p_fullscreenButtonReturn,.svg .alertIconHolder,.svg .p_errorRefreshDialog_a{background-image:none;}.nofullscreen .p_fullscreenButton,.nofullscreen .p_fullscreenButtonReturn{display:none;}.subtitles .p_subtitleButton{right:45px;background-image:url(//emp.bbci.co.uk/emp/assets/2.0.18/subtitles.png);}.subtitles .p_subtitleButton.p_closedCaptionsIcon{background-image:url(//emp.bbci.co.uk/emp/assets/2.0.18/closed_captions.png);}.svg .p_subtitleButton{background-image:none;}.svg .p_subtitleButton.p_closedCaptionsIcon{background-image:none;}.svg .p_subtitleButton .p_subtitlesIcon{position:absolute;left:6px;top:6px;width:32px;height:32px;}.nofullscreen.subtitles .p_subtitleButton{right:0;}.chromecast .p_chromecastButton{right:45px;background-image:url(//emp.bbci.co.uk/emp/assets/2.0.18/chromecast.png);}.picInPic .p_picInPicButton{right:45px;}.svg .p_chromecastButton,.svg .p_picInPicButton{background-image:none;}.nofullscreen.chromecast .p_chromecastButton,.nofullscreen.picInPic .p_picInPicButton{right:0;}.nofullscreen.chromecast .p_embedButton,.nofullscreen.picInPic .p_embedButton{right:45px;}.nofullscreen.chromecast.subtitles .p_chromecastButton,.nofullscreen.picInPic.subtitles .p_picInPicButton{right:45px;}.nofullscreen.subtitles .p_embedButton{right:45px;}.chromecast.subtitles .p_chromecastButton,.picInPic.subtitles .p_picInPicButton{right:90px;}.svg .p_picInPicButton{padding-left:11px;padding-top:13px;}.p_embedButton{right:45px;background-image:url(//emp.bbci.co.uk/emp/assets/2.0.18/embed.png);}.picInPic .p_embedButton,.chromecast .p_embedButton{right:90px;}.picInPic.subtitles .p_embedButton,.chromecast.subtitles .p_embedButton{right:135px;}.nofullscreen.picInPic.subtitles .p_embedButton,.nofullscreen.chromecast.subtitles .p_embedButton{right:90px;}.svg .p_embedButton{background-image:none;}.svg .p_embedButton .p_embedIcon{position:absolute;width:39px;height:39px;left:2px;top:3px;}.p_padlock{position:absolute;right:0px;background-image:url(//emp.bbci.co.uk/emp/assets/2.0.18/padlock_locked.png);background-position:center center;background-repeat:no-repeat;background-color:#d13c2c;cursor:pointer;height:30px;width:30px;top:50%;margin-top:-15px;}.svg .p_padlock,.svg .p_padlock_unlocked{background-image:none;}.svg .p_padlock .p_padlock-lockedIcon{position:absolute;top:9px;left:6px;}.p_padlock_unlocked{background-image:url(//emp.bbci.co.uk/emp/assets/2.0.18/padlock_unlocked.png);}.svg .p_padlock .p_padlock-unlockedIcon{position:absolute;top:9px;left:6px;}.p_guidance{position:absolute;height:80px;max-width:70%;padding-right:40px;display:table;margin-top:-40px;}.p_guidanceHolder{position:relative;}.svg .p_guidance .p_iconHolder{position:absolute;top:-9px;left:-6px;}.svg .p_guidanceIcon.p_svg{display:block;}.p_guidanceIcon.p_svg{display:none;}.svg .p_guidanceIcon{fill:#f00;width:30px;height:30px;}.minimode .p_guidance{height:60px;}.p_guidance.p_ctaGuidance{left:80px;bottom:0;background-color:rgba(0,0,0,0.7);}.minimode .p_guidance.p_ctaGuidance{left:60px;}.p_guidance.p_continous{height:30px;margin:8px;top:0px;width:70%;background-color:rgba(209,60,44,0.7);}.svg .p_gel-exitLinkIcon{-webkit-transition:fill 0.2s ease;transition:fill 0.2s ease;}.svg .p_gel-exitLinkIcon:hover{fill:#F54997;}#pgExit:focus{outline:none;}#pgExit:focus .p_gel-exitLinkIcon{fill:#F54997;}.svg .p_guidance-alertIcon{fill:#F5B100;top:0;left:3px;position:absolute;}.svg .p_alertIcon{width:25.15px;height:22px;}.svg .p_fullscreen-returnIcon{width:22px;height:22px;position:relative;top:50%;transform:translateY(-50%);-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);}@media (max-width:480px){.p_guidance{max-width:180px;min-width:180px;}.p_guidance.p_continous{max-width:360px;min-width:240px;}}.p_guidanceContainer{color:#fff;font-size:0.75em;font-weight:bold;padding-left:10px;display:table-cell;vertical-align:middle;line-height:15px;padding:8px;}.p_guidanceFallback{display:inline-block;margin:auto;border-radius:50%;height:15px;width:15px;background-color:#f00;position:absolute;}.svg .p_guidanceFallback{display:none;}.p_guidanceFallbackText{position:relative;left:3px;}.guidanceClose{position:absolute;top:50%;right:1px;background-image:url(//emp.bbci.co.uk/emp/assets/2.0.18/cross.png);background-position:center center;background-repeat:no-repeat;background-color:rgba(209,60,44,1);width:30px;height:30px;margin-top:-15px;cursor:pointer;}.svg .guidanceClose{background-image:none;}.svg .guidanceClose .p_crossIcon{position:absolute;left:7px;top:10px;width:28px;height:28px;}.p_guidanceText{position:relative;margin-left:20px;}.p_subtitleButton{display:none;}.subtitles .p_subtitleButton{display:block;}.p_chromecastButton,.p_picInPicButton{display:none;}.chromecast .p_chromecastButton,.picInPic .p_picInPicButton{display:block;}.p_embedButton{display:none;}.embed .p_embedButton{display:block;}.minimode.subtitles .p_embedButton{right:90px;}.minimode.nofullscreen .p_embedButton{right:0px;}.minimode.nofullscreen.subtitles .p_embedButton{right:45px;}.minimode.picInPic.nofullscreen.subtitles .p_embedButton,.minimode.chromecast.nofullscreen.subtitles .p_embedButton{right:90px;}.nofullscreen .p_embedButton{right:0px;}.subtitles .p_embedButton{right:90px;}.p_playButton.p_iplayerPlay{background-image:url(//emp.bbci.co.uk/emp/assets/2.0.18/play-iplayer.png);}.svg .p_playButton.p_iplayerPlay{background-image:none;}.p_seekBarPositionLine{display:none;position:absolute;top:0;width:1px;height:6px;background-color:#fff;z-index:1;pointer-events:none;}.p_controlBarFiller{position:absolute;width:90px;height:44px;text-align:center;left:90px;}.p_controlBarFiller.p_noVolume{left:45px;}.p_hiddenElement{left:-999em;top:0;position:absolute;}.p_button > .p_selected_background{display:none;position:absolute;height:4px;left:2px;width:40px;top:38px;background-color:#000;}.p_button.p_controlBarButton_on > .p_selected_background{display:block;}.p_chapterMarkersHolder{z-index:160;position:absolute;display:none;left:0;bottom:88px;width:100%;height:73px;line-height:0;}.p_hasMarkers .p_chapterMarkersHolder{display:block;}.p_playerControls.p_keyMomentOnly .p_chapterMarkersHolder{height:26px;}.fullscreen .p_playerControls.p_chapterOnly .p_chapterMarkersHolder{top:-88px;}.fullscreen .p_playerControls.p_keyMomentOnly .p_chapterMarkersHolder{top:-70px;}.p_playerControls.p_noControlBar .p_chapterMarkersHolder{bottom:44px;}.p_chapterMarker{position:absolute;bottom:0;height:34px;overflow:hidden;z-index:170;left:16px;background:#000;text-overflow:ellipsis;padding-right :0px;padding-left :0px;line-height:16px;font-size:0.75em;text-align:left;color:#fff;cursor:pointer;}.p_chapterMarker:focus{outline:none;}.p_chapterTip{display:none;position:absolute;bottom:44px;z-index:170;background-color:rgb(255,255,255);color:#191919;width:auto;margin-left:0;border-left-width:0;margin-right:0;border-right-width:0;max-width:144px;padding-right:8px;padding-left:8px;padding-top:12px;padding-bottom:12px;line-height:16px;font-size:0.75em;font-weight:bold;cursor:pointer;}.p_chapterMarkerText{line-height:34px;padding-left:5px;}.p_timeTipText{line-height:22px;}.p_playerControls.p_hasMarkers .p_timeTipText{line-height:34px;}.p_playerControls.p_hasMarkers.p_hasThumbnails .p_timeTipText{line-height:22px;}.p_playerControls.p_hasMarkers.p_keyMomentOnly .p_timeTipText{line-height:22px;}.p_keyMoment{position:absolute;bottom:48px;height:17px;width:15px;z-index:165;background:#191919;cursor:pointer;}.p_keyMoment.p_highlighted{background-color:white;}.p_keyMoment.p_highlighted .p_keyMomentSquare{background-color:#191919;}.p_keyMoment:focus{outline:none;}.p_keyMomentOnly .p_keyMoment{bottom:0;}.p_keyMomentSquare{position:absolute;left:5px;bottom:6px;height:5px;width:5px;z-index:170;background:#fff;cursor:pointer;}.p_volumeButton.audio{background-image:url(//emp.bbci.co.uk/emp/assets/2.0.18/audio.png);}.p_volumeButton.mute{background-image:url(//emp.bbci.co.uk/emp/assets/2.0.18/mute.png);}.svg .p_volumeButton{background-image:none;}.p_volumeControls{position:absolute;overflow:hidden;left:45px;height:44px;z-index:200;-webkit-transition:width 0.25s ease-out;-moz-transition:width 0.25s ease-out;-o-transition:width 0.25s ease-out;transition:width 0.25s ease-out;}.p_volumeControls.p_closed{width:44px;}.p_volumeControls.p_open{width:222px;}.p_volumeBarHolder{position:absolute;background-color:transparent;bottom:0px;height:44px;width:9px;}.p_volumeBar{position:absolute;bottom:8px;height:28px;width:3px;}.p_afterVolume{background-color:#A4A4A4;}.p_selectedVolume{height:32px;background-color:#fff;}.p_sliderContainer{position:absolute;width:176px;height:44px;left:44px;touch-action:none;cursor:pointer;}.p_sliderControls{position:absolute;width:132px;height:44px;touch-action:none;}.p_volumeLevel{position:absolute;width:22px;left:111px;top:24px;font-size:0.75em;text-align:center;vertical-align:middle;color:#fff;}.p_volumeControlsFiller{position:absolute;left:264px;height:44px;z-index:200;}.p_covered{background-image:none;}.p_iconHolder{-webkit-transition:opacity 0.4s ease-out;-moz-transition:opacity 0.4s ease-out;-o-transition:opacity 0.4s ease-out;transition:opacity 0.4s ease-out;}.p_covered .p_iconHolder{opacity:0;}.focusEnabled .p_padlock:focus,.p_padlock:hover,.focusEnabled .p_padlock_unlocked:focus,.p_padlock_unlocked:hover{background-color:#ff4739;}.p_paragraph,.p_playerControlBarHolder{-webkit-text-size-adjust:none;}@-moz-document url-prefix(){.p_audioIcon,.p_muteIcon,.p_fullscreen-enterIcon{position:absolute;top:0;width:44px;height:44px;}.p_audioIcon{left:1px;}.p_muteIcon{left:1px;}.p_fullscreen-enterIcon{left:0;top:0;}.svg .p_cta .p_ctaIcon{left:9px;}.svg .p_padlock .p_padlock-lockedIcon{width:30px;height:30px;}.svg .p_padlock .p_padlock-unlockedIcon{width:30px;height:30px;}.p_play-iplayerIcon{width:44px;height:44px;top:2px;}.p_closed-captionsIcon{width:44px;height:44px;top:-1px;}.minimode.svg .p_cta .p_ctaIcon{left:9px;}.svg .p_embedButton .p_embedIcon{left:2px;top:2px;}}.p_warning.p_guidance.p_continous .p_guidanceIcon,.p_ctaGuidance.p_guidance.p_warningCta .p_guidanceIcon{fill:#FFFFFF;color:black;}.p_warning.p_guidance.p_continous{background-color:rgba(51,51,51,0.85);}.p_warning.p_guidance.p_continous .guidanceClose{background-color:#404040;}.p_warning .p_guidanceFallback,.p_warningCta .p_guidanceFallback{background-color:#FFFFFF;color:black;}@media only screen and (orientation:portrait) and (height:628px) and (-webkit-device-pixel-ratio:2) and (-webkit-min-device-pixel-ratio:2),only screen and (orientation:portrait) and (height:696px),only screen and (orientation:portrait) and (height:528px){.fullscreen.ios10 .p_playerControls,.fullscreen.ios11 .p_playerControls{padding-bottom:65px;}.fullscreen.ios10 .p_timeTip,.fullscreen.ios11 .p_timeTip{bottom:153px;}}@media only screen and (orientation:portrait) and (min-height:640px) and (-webkit-device-pixel-ratio:3){.fullscreen.ios11 .p_playerControls{padding-bottom:95px;}.fullscreen.ios11 .p_timeTip{bottom:183px;}}@media only screen and (orientation :landscape) and (device-width :375px) and (device-height :812px) and (-webkit-device-pixel-ratio :3){.fullscreen.ios11 .p_playerControls{bottom:20px;left:90px;right:90px;}.fullscreen.ios11 #p_pluginContainer{position:relative;top:constant(safe-area-inset-top) !important;top:env(safe-area-inset-top) !important;left:calc(constant(safe-area-inset-left) + 25px) !important;left:calc(env(safe-area-inset-left) + 25px) !important;height:calc(100% - constant(safe-area-inset-bottom) - constant(safe-area-inset-top) - 10px ) !important ;height:calc(100% - env(safe-area-inset-bottom) - env(safe-area-inset-top) - 10px ) !important ;width:calc(100% - constant(safe-area-inset-right) - constant(safe-area-inset-left) - 50px) !important;width:calc(100% - env(safe-area-inset-right) - env(safe-area-inset-left) - 50px) !important;}}@media (max-width:365px){:not(.nofullscreen).chromecast.subtitles.embed .p_timeDisplay,:not(.nofullscreen).picInPic.subtitles.embed .p_timeDisplay{visibility:hidden;}}@media (max-width:264px){:not(.nofullscreen).chromecast.subtitles.embed .p_embedButton,:not(.nofullscreen).picInPic.subtitles.embed .p_embedButton{visibility:hidden;}}@media (max-width:220px){:not(.nofullscreen).chromecast.subtitles.embed .p_chromecastButton,:not(.nofullscreen).picInPic.subtitles.embed .p_picInPicButton{visibility:hidden;}}@media (max-width:176px){:not(.nofullscreen).chromecast.subtitles.embed .p_subtitleButton,:not(.nofullscreen).picInPic.subtitles.embed .p_subtitleButton{visibility:hidden;}}@media (max-width:323px){:not(.nofullscreen).chromecast.embed .p_timeDisplay,:not(.nofullscreen).picInPic.embed .p_timeDisplay,:not(.nofullscreen).subtitles.embed .p_timeDisplay,:not(.nofullscreen).subtitles.chromecast .p_timeDisplay,:not(.nofullscreen).subtitles.picInPic .p_timeDisplay{visibility:hidden;}}@media (max-width:220px){:not(.nofullscreen).picInPic.embed .p_embedButton,:not(.nofullscreen).chromecast.embed .p_embedButton{visibility:hidden;}}@media (max-width:176px){:not(.nofullscreen).picInPic.embed .p_picInPicButton,:not(.nofullscreen).chromecast.embed .p_chromecastButton{visibility:hidden;}}@media (max-width:220px){:not(.nofullscreen).subtitles.embed .p_embedButton{visibility:hidden;}}@media (max-width:176px){:not(.nofullscreen).subtitles.embed .p_subtitleButton{visibility:hidden;}}@media (max-width:220px){:not(.nofullscreen).subtitles.chromecast .p_chromecastButton,:not(.nofullscreen).subtitles.picInpic .p_picInPicButton{visibility:hidden;}}@media (max-width:176px){:not(.nofullscreen).subtitles.chromecast .p_subtitleButton,:not(.nofullscreen).subtitles.picInPic .p_subtitleButton{visibility:hidden;}}@media (max-width:277px){:not(.nofullscreen).embed .p_timeDisplay,:not(.nofullscreen).subtitles .p_timeDisplay,:not(.nofullscreen).chromecast .p_timeDisplay,:not(.nofullscreen).picInPic .p_timeDisplay{visibility:hidden;}}@media (max-width:176px){:not(.nofullscreen) .p_embedButton{visibility:hidden;}}@media (max-width:176px){:not(.nofullscreen).subtitles .p_subtitleButton{visibility:hidden;}}@media (max-width:176px){:not(.nofullscreen).chromecast .p_chromecastButton,:not(.nofullscreen).picInpic .p_picInPicButton{visibility:hidden;}}@media (max-width:232px){:not(.nofullscreen) .p_timeDisplay{visibility:hidden;}}@media (max-width:320px){.nofullscreen.chromecast.embed.subtitles .p_timeDisplay,.nofullscreen.picInPic.embed.subtitles .p_timeDisplay{visibility:hidden;}}@media (max-width:220px){.nofullscreen.chromecast.subtitles .p_embedButton,.nofullscreen.picInPic.subtitles .p_embedButton{visibility:hidden;}}@media (max-width:176px){.nofullscreen.chromecast.subtitles .p_chromecastButton,.nofullscreen.picInPic.subtitles .p_picInPicButton{visibility:hidden;}}@media (max-width:276px){.minimode.embed.subtitles .p_timeDisplay{visibility:hidden;}}@media (max-width:232px){.minimode.embed .p_timeDisplay,.minimode.subtitles .p_timeDisplay{visibility:hidden;}}@media (max-width:188px){.minimode .p_timeDisplay,.nofullscreen .p_timeDisplay{visibility:hidden;}}#p_threeSixtyCanvas{position:absolute;top:0;left:0;width:100%;height:100%;-ms-touch-action:none;touch-action:none;}.threeSixty .p_accessibleHitArea{display:none;}.threeSixty.cta .p_accessibleHitArea{display:block;}#p_compassContainer{width:134px;height:134px;position:absolute;top:0;left:0;background:transparent;border:0;padding:0;margin:0;outline:none;}@media (max-width:500px){#p_compassContainer{display:none;}}
</style>
<script type="text/javascript">
var DEBUG_FULL;
/*
 Copyright 2011 Abdulla Abdurakhmanov
 Original sources are available at https://code.google.com/p/x2js/

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
 */


function createElement(e,t,i,n){var a=document.createElement(e);a.className=t;if(i){a.innerHTML=i;n&&(a.firstChild.textContent=n)}return a}function updateExistingSvg(e,t,i){for(var n=e.getElementsByClassName("p_"+t+"Icon")[0],a=e.getElementsByClassName("p_iconHolder"),r=0;a.length>r;r++)a[r].style.display=a[r].firstChild==n?"block":"none";if(!n){var o=44;"fullscreen-return"==t&&(o=32);e.appendChild(Utils.generateSVG(o,o,t,"p_"+t+"Icon",i))}}function X2JS(e,t,i){function n(e){var t=e.localName;null==t&&(t=e.baseName);(null==t||""==t)&&(t=e.nodeName);return t}function a(e){return e.prefix}function r(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;"):e}function o(e){return e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/")}function s(r){if(r.nodeType==T.DOCUMENT_NODE){var l,u,d,c=r.firstChild;for(u=0,d=r.childNodes.length;d>u;u+=1)if(r.childNodes[u].nodeType!==T.COMMENT_NODE){c=r.childNodes[u];break}if(i)l=s(c);else{l={};var p=n(c);l[p]=s(c)}return l}if(r.nodeType==T.ELEMENT_NODE){var l=new Object;l.__cnt=0;for(var f=[],m=r.childNodes,g=0;m.length>g;g++){var c=m.item(g),p=n(c);l.__cnt++;if(null==l[p]){var h=s(c);if("#text"!=p||/[^\s]/.test(h)){var y={};y[p]=h;f.push(y)}l[p]=h;l[p+"_asArray"]=new Array(1);l[p+"_asArray"][0]=l[p]}else{if(null!=l[p]&&!(l[p]instanceof Array)){var v=l[p];l[p]=new Array;l[p][0]=v;l[p+"_asArray"]=l[p]}for(var E=0;null!=l[p][E];)E++;var h=s(c);if("#text"!=p||/[^\s]/.test(h)){var y={};y[p]=h;f.push(y)}l[p][E]=h}}l.__children=f;for(var P=0;r.attributes.length>P;P++){var C=r.attributes.item(P);l.__cnt++;for(var I=C.value,S=0,k=e.length;k>S;S++){var _=e[S];_.test.call(this,C)&&(I=_.converter.call(this,C.value))}l[t+C.name]=I}var w=a(r);if(null!=w&&""!=w){l.__cnt++;l.__prefix=w}1==l.__cnt&&null!=l["#text"]&&(l=l["#text"]);if(null!=l["#text"]){l.__text=l["#text"];b&&(l.__text=o(l.__text));delete l["#text"];delete l["#text_asArray"]}if(null!=l["#cdata-section"]){l.__cdata=l["#cdata-section"];delete l["#cdata-section"];delete l["#cdata-section_asArray"]}(null!=l.__text||null!=l.__cdata)&&(l.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")});return l}return r.nodeType==T.TEXT_NODE||r.nodeType==T.CDATA_SECTION_NODE?r.nodeValue:r.nodeType==T.COMMENT_NODE?null:void 0}function l(e,t,i,n){var a="<"+(null!=e&&null!=e.__prefix?e.__prefix+":":"")+t;if(null!=i)for(var r=0;i.length>r;r++){var o=i[r],s=e[o];a+=" "+o.substr(1)+"='"+s+"'"}a+=n?"/>":">";return a}function u(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function d(e,t){return-1!==e.indexOf(t,e.length-t.length)}function c(e,t){return d(t.toString(),"_asArray")||0==t.toString().indexOf("_")||e[t]instanceof Function?!0:!1}function p(e){var t=0;if(e instanceof Object)for(var i in e)c(e,i)||t++;return t}function f(e){var t=[];if(e instanceof Object)for(var i in e)-1==i.toString().indexOf("__")&&0==i.toString().indexOf("_")&&t.push(i);return t}function m(e){var t="";null!=e.__cdata&&(t+="<![CDATA["+e.__cdata+"]]>");null!=e.__text&&(t+=b?r(e.__text):e.__text);return t}function g(e){var t="";e instanceof Object?t+=m(e):null!=e&&(t+=b?r(e):e);return t}function h(e,t,i){var n="";if(0==e.length)n+=l(e,t,i,!0);else for(var a=0;e.length>a;a++){n+=l(e[a],t,f(e[a]),!1);n+=y(e[a]);n+=u(e[a],t)}return n}function y(e){var t="",i=p(e);if(i>0)for(var n in e)if(!c(e,n)){var a=e[n],r=f(a);if(null==a||void 0==a)t+=l(a,n,r,!0);else if(a instanceof Object)if(a instanceof Array)t+=h(a,n,r);else{var o=p(a);if(o>0||null!=a.__text||null!=a.__cdata){t+=l(a,n,r,!1);t+=y(a);t+=u(a,n)}else t+=l(a,n,r,!0)}else{t+=l(a,n,r,!1);t+=g(a);t+=u(a,n)}}t+=g(e);return t}(null===t||void 0===t)&&(t="_");(null===i||void 0===i)&&(i=!1);var v="1.0.11",b=!1,T={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};this.parseXmlString=function(e){var t,i,n;if(window.DOMParser){i=new window.DOMParser;try{n=i.parseFromString("<","text/xml").getElementsByTagName("parsererror")[0].namespaceURI}catch(a){}try{t=i.parseFromString(e,"text/xml");n&&t.getElementsByTagNameNS(n,"parsererror").length&&(t=void 0)}catch(a){}}else{0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2));t=new ActiveXObject("Microsoft.XMLDOM");t.async="false";t.loadXML(e)}return t};this.xml2json=function(e){return s(e)};this.xml_str2json=function(e){var t=this.parseXmlString(e);return t?this.xml2json(t):void 0};this.json2xml_str=function(e){return y(e)};this.json2xml=function(e){var t=this.json2xml_str(e);return this.parseXmlString(t)};this.getVersion=function(){return v};this.escapeMode=function(e){b=e}}function PluginManager_init(e){PluginManager.player=e;PluginManager.playerInterface=new PlayerInterface(e,new DataStore);PluginManager.loadingCount=0;PluginManager.failedArray=[]}function PluginManager_resizeFix(){var e=PluginManager.playerInterface.container;e.style.width="0px";e.style.height="0px"}function PluginManager_resizeFixEnd(){var e=PluginManager.playerInterface.container;e.style.width=window.innerWidth+"px";e.style.height=window.innerHeight+"px"}function PluginManager_resizeFixComplete(){PluginManager.playerInterface.dispatchToPlugins({type:"resize",target:PluginManager.player})}function PluginManager_isPluginLoading(){return PluginManager.playerInterface?PluginManager.waitingOnPluginLoad:!1}function checkEndOfPluginLoads(){PluginManager.loadingCount--;if(0>=PluginManager.loadingCount&&PluginManager.waitingOnPluginLoad){PluginManager.waitingOnPluginLoad=!1;PluginManager.playlistLoadedEvent&&PluginManager.player.loadPluginCompleted(PluginManager.playlistLoadedEvent)}}function getPluginErrorFunction(e,t,i,n){return function(){var a=SMPError.getError(t);a.nonPlayer=!0;a.msg=i;a.extra=n;e.dispatch(a)}}function PluginManager_loadPlugin(e,t,i){PluginManager.playerInterface.datastore.set(t);if(!PluginManager.urls[e]){PluginManager.waitingOnPluginLoad=i;PluginManager.loadingCount++;PluginManager.urls[e]=!0;var n,a=PluginManager.pluginArray,r=PluginManager.player,o=new PluginUtilities(PluginManager.playerInterface,e),s=setTimeout(function(){PluginManager.failedArray.push(e);checkEndOfPluginLoads();s=setTimeout(getPluginErrorFunction(r,SMPError.PLUGIN_LOAD_TIMEOUT,"",e),REPORT_PLUGIN_LOAD_TIMEOUT)},PLUGIN_LOAD_TIMEOUT);require([e],function(){clearTimeout(s);try{n=runPlugin(o,t)}catch(i){}if(n){a.push({plugin:n,utils:o});try{n.pluginInitialisation(o)}catch(i){r.dispatch({type:"pluginInitialisationFailed",properties:{url:e}});getPluginErrorFunction(r,SMPError.PLUGIN_INITIALISE_FAIL,i.message,e)();-1===PluginManager.failedArray.indexOf(e)&&checkEndOfPluginLoads();return}r.dispatch({type:"pluginLoaded",url:e});r.trackAction("plugin_manager","plugin_loaded",{plugin_url:e})}else{r.dispatch({type:"pluginLoadFailed",properties:{url:e}});getPluginErrorFunction(r,SMPError.PLUGIN_LOAD_FAIL,"",e)()}-1===PluginManager.failedArray.indexOf(e)&&checkEndOfPluginLoads()})}}function Sonic(e){this.canvas=e}window.delayedFunctions=[];var XD=function(){function e(e){if("null"==e)return"*";for(var t=0;validDomains.length>t;t++){var i=new RegExp("^(http[s]{0,1})://([^\\?\\&#:/]+\\."+validDomains[t]+")(:([0-9]+))?","gi");if(e.match(i)){var n=e.split(i);return n[1]+"://"+n[2]+(n[4]?":"+n[4]:"")}}return/^file:\/\/$/i.test(e)?e:""}var t=function(){var e=this;e._receiveKey="";e._url="";e._listeners={};e.receive(function(t){var i=t._data.type,n=t._data.data;if(i&&"object"==typeof e._listeners[i])for(var a=e._listeners[i],r=0;a.length>r;r++){var o=a[r];"function"==typeof o&&o.call(e,n)}})};t.prototype={_receiveKey:"",_url:"",_listeners:{},post:function(e){var t=this;try{var i=JSON.stringify(e)}catch(n){i={type:e.type}}"function"==typeof window.parent.postMessage&&window.parent.postMessage(i,t._url);return t},receive:function(t){var i=this,n=function(n){if(0!==(n.data+"").indexOf("ima://")){if("SMP.asyncDelay"!=n.data){try{n._data=JSON.parse(n.data)}catch(a){n._data={}}var r=n._data;if(r&&!i._url&&"object"==typeof r.initXD){i._url=e(n.origin);if(!i._url.length)return!1;i._receiveKey=r.initXD.receiveKey;return!0}if(n.origin!==i._url&&"*"!=i._url)return!1;if(!r.receiveKey||r.receiveKey!==i._receiveKey)return!1;t(n);return void 0}if(window.delayedFunctions.length>0){var o=window.delayedFunctions.shift();o&&o.fn.apply(o.that,o.args)}}};"undefined"!=typeof window.addEventListener?window.addEventListener("message",n,!1):window.attachEvent("onmessage",n);return i},on:function(e,t){var i=this;"undefined"==typeof i._listeners[e]&&(i._listeners[e]=[]);i._listeners[e].push(t);return i},fire:function(e,t){this.post({receiveKey:this._receiveKey,data:t,type:e})},detach:function(e){var t=this;if("undefined"!=typeof t._listeners[e]){t._listeners[e]=null;delete t._listeners[e]}return t}};return t}(),CRITICAL="critical",ERROR="error",WARNING="warning",UNKNOWN="unknown",SMPError=function(){var e={unknown:{description:"An unknown error has occurred.",secondaryText:"Please try again later.",detail:"An unknown error occurred",severity:ERROR,responsibility:UNKNOWN,recoverable:!1}},t="Application",i="External",n="Media",a=function(t,i){var n;this.code=t;t=""+t;n=e[t]||e.unknown;var a=!!n.recoverable;this.handled=!0;this.type=ERROR;this.description=n.description||"";this.severity=n.severity;this.responsibility=n.responsibility;this.recoverable=a;this.secondaryText=n.hasOwnProperty("secondaryText")?n.secondaryText:a?"":Language.tryAgainLater;this.detail=n.detail||n.description;this.msg="";this.info=i;return this};a.NON_BBC_PLAYLIST=1001;a.ERROR_LOADING_PLAYLIST=1002;a.NO_ITEMS_IN_PLAYLIST=1003;a.PROGRAMME_NOT_AVAILABLE_YET=1004;a.CONTENT_NOT_AVAILABLE_EXPIRED=1005;a.CONTENT_NOT_AVAILABLE_REGION=1006;a.MEDIATION_ERROR=1026;a.CANNOT_MAINTAIN_LOCK=1039;a.CONTENT_NOT_AV=1051;a.CONTENT_NOT_AVAILABLE=1052;a.CONTENT_NOT_AVAILABLE_GEO=1056;a.CONTENT_NOT_AVAILABLE_OTHER=1057;a.CONTENT_NOT_AVAILABLE_UNKNOWN=1058;a.CONTENT_NOT_AVAILABLE_REVOKED=1059;a.ERROR_PARSING_PLAYLIST=1060;a.CONTENT_NOT_AVAILABLE_PRE_START=1061;a.ALL_CONNECTIONS_FILTERED=1062;a.ALL_ITEMS_FILTERED=1064;a.NO_ITEMS=1065;a.NO_ITEMS_FILTERED=1066;a.MEDIASELECTOR_TIMEOUT=1068;a.ERROR_PARSING_CONFIG=1071;a.PREFERRED_PROTOCOL_NOT_AVAILABLE=1072;a.UNHANDLED_INTERNAL_ERROR=2100;a.PLAYING_FAILED_NO_INTENT=2200;a.PLAYING_STARTED_AFTER_NO_INTENT=2201;a.NETWORK_UNAVAILABLE=3025;a.MPD_LOAD_FAIL=4200;a.MPD_NO_STREAMS=4201;a.INIT_FRAGMENT_LOAD_FAIL=4202;a.STREAM_FRAGMENT_LOAD_FAIL=4203;a.PLAYING_DASH_WHEN_NOT_SUPPORTED=4204;a.DASH_MEDIASOURCE_ERROR=4205;a.MPD_GENERIC=4224;a.FRAGMENT_DOWNLOAD_INFORMATION=4225;a.MPD_PARSE_ERROR=4226;a.NO_SUPPORTED_CODECS=4227;a.NO_SUPPORTED_CODECS_FAILOVER=4228;a.DASH_EXCEPTION=4233;a.DASH_FRAGMENT_DISCARDED=4234;a.DOWNLOAD_WAS_SLOW=4237;a.DOWNLOADS_OFTEN_SLOW=4238;a.LOAD_FAILED_BUFFERING=4240;a.NO_ALTERNATIVE_MEDIA_AFTER_FAILOVER=4999;a.NO_ALTERNATIVE_MEDIA=5e3;a.FORMAT_NOT_SUITABLE=5001;a.FORMAT_NOT_DECODED=5003;a.MEDIA_ERR_ABORTED=5005;a.MEDIA_ERR_NETWORK=5007;a.MEDIA_ERR_WEIRD=5009;a.DRM_KEY=5100;a.DRM_ERROR_TIMEOUT=5101;a.DEVICE_NOT_SUPPORTED=6003;a.INIT_TIMEOUT=6004;a.DASH_INIT_TIMEOUT=6006;a.ERROR_NO_MEDIA_SRC=6011;a.PLUGIN_LOAD_FAIL=6100;a.PLUGIN_INITIALISE_FAIL=6101;a.PLUGIN_LOAD_TIMEOUT=6102;a.EMBED_NOT_ALLOWED=6500;a.SUBS_FAILED=7500;a.THUMBNAIL_FAILOVER=7501;a.LANGUAGE_FAILED=7750;a.FLASH_NOT_CREATED=8e3;a.FLASH_NOT_INITIALISED=8001;a.FLASH_NOT_INSTALLED=8005;a.FLASH_CRITICAL_ERROR=8010;a.CANT_PLAY_IN_ANDROID_BROWSER=8020;a.getError=function(e){return new a(e)};a.init=function(){e={1001:{code:1001,description:Language.defaultErrorMessage,detail:"Player attempted to load a non BBC playlist",severity:CRITICAL,responsibility:t},1002:{code:1002,description:Language.defaultErrorMessage,detail:"There was an error loading the playlist",severity:CRITICAL,responsibility:t},1003:{code:1003,description:Language.defaultErrorMessage,detail:"This content is not currently available on this device",severity:CRITICAL,responsibility:n},1004:{code:1004,description:Language.programmePreAvailability,detail:"This programme is not available to play yet",severity:CRITICAL,responsibility:n},1005:{code:1005,description:Language.contentPostAvailability,detail:"This content is no longer available",severity:CRITICAL,responsibility:n},1006:{code:1006,description:Language.programmeRegionRestriction,detail:"This content is no longer available",severity:CRITICAL,responsibility:n},1026:{code:1026,description:Language.defaultErrorMessage,detail:"The media selector request failed",severity:CRITICAL,responsibility:"MediaSelector"},1039:{code:1039,description:Language.httpsOnlyFailure,detail:"HTTPS only playback failed",severity:CRITICAL,responsibility:n,recoverable:!0,secondaryText:""},1051:{code:1051,description:Language.defaultErrorMessage,detail:"This content is not Audio or Video",severity:CRITICAL,responsibility:n},1052:{code:1052,description:Language.contentNotAvailableOnDevice,detail:"This content is not currently available on this device",severity:CRITICAL,responsibility:n},1056:{code:1056,description:Language.programmeRegionRestriction,secondaryText:"",detail:"Content not available mediaselector GEO",severity:CRITICAL,responsibility:n},1057:{code:1057,description:Language.contentNotAvailableOnDevice,detail:"Content not available OTHER",severity:CRITICAL,responsibility:n},1058:{code:1058,description:Language.contentNotAvailableOnDevice,detail:"Content not available UNKNOWN",severity:CRITICAL,responsibility:n},1059:{code:1059,description:Language.itemRevoked,detail:"Content not available revoked",severity:CRITICAL,responsibility:n},1060:{code:1060,description:Language.defaultErrorMessage,detail:"There was an error parsing the playlist",severity:CRITICAL,responsibility:n},1061:{code:1061,description:Language.programmePreAvailability,detail:"This live stream has not started yet.",severity:CRITICAL,responsibility:n,visible:!0},1062:{code:1062,description:Language.defaultErrorMessage,detail:"There were connections (from MediaSelector or hrefs), but all were filtered out",severity:CRITICAL,responsibility:n},1064:{code:1064,description:Language.defaultErrorMessage,detail:"There was an error parsing the playlist",severity:CRITICAL,responsibility:n},1065:{code:1065,description:Language.defaultErrorMessage,detail:"The playlist contained no items",severity:CRITICAL,responsibility:n},1066:{code:1066,description:Language.defaultErrorMessage,detail:"The playlist contained no items after filtering",severity:CRITICAL,responsibility:n},1068:{code:1068,description:Language.defaultErrorMessage,detail:"Mediaselector timed out (or errored)",severity:CRITICAL,responsibility:n,recoverable:!0},2100:{code:2100,description:WARNING,detail:"SMPj experienced an internal error that it did not know how to handle",severity:WARNING,responsibility:t},2200:{code:2200,description:WARNING,detail:"Playing failed, no intent",severity:WARNING,responsibility:t},2201:{code:2201,description:WARNING,detail:"Playing started, after no intent",severity:WARNING,responsibility:t},3025:{code:3025,description:Language.networkNotAvailable,detail:"Appear to be offline",severity:CRITICAL,responsibility:n,recoverable:!0},4200:{code:4200,description:Language.defaultErrorMessage,detail:"The requested stream manifest could not be loaded",severity:ERROR,responsibility:n},4201:{code:4201,description:Language.defaultErrorMessage,detail:"The manifest file contains no valid streams",severity:ERROR,responsibility:n},4202:{code:4202,description:Language.defaultErrorMessage,detail:"Failed to load headers for stream",severity:ERROR,responsibility:n},4203:{code:4203,description:Language.defaultErrorMessage,detail:"Failed to load stream fragment",severity:ERROR,responsibility:n},4204:{code:4204,description:Language.defaultErrorMessage,detail:"Attempting to play DASH connection with no MSE support",severity:ERROR,responsibility:t},4205:{code:4205,description:Language.defaultErrorMessage,detail:"DASH Reported media source error",severity:WARNING,responsibility:t},4224:{code:4224,description:"Unknown manifest error",detail:"A generic manifest error occurred",severity:ERROR,responsibility:n},4225:{code:4225,description:Language.defaultErrorMessage,detail:"Failed to load stream fragment",severity:ERROR,responsibility:n},4226:{code:4226,description:Language.defaultErrorMessage,detail:"The manifest file could not be parsed",severity:ERROR,responsibility:n},4227:{code:4227,description:Language.codecErrorMessage,detail:"Client does not support any available codecs",severity:CRITICAL,secondaryText:""},4228:{code:4228,description:Language.defaultErrorMessage,detail:"Client does not support any available codecs failover to flash",severity:ERROR},4233:{code:4233,description:"An unspecified dash.js error occurred",severity:WARNING,responsibility:t,recoverable:!0},4234:{code:4234,description:"Dash.js thought there was content in the buffer, but there was not",severity:"info",responsibility:t,recoverable:!0},4237:{code:4237,description:"Slow download",detail:"A DASH fragment took longer to download than it would to play out",severity:WARNING,responsibility:t,recoverable:!0},4238:{code:4238,description:Language.insufficientBandwidth,detail:"DASH fragments consistently took longer to download than it would to play out",severity:CRITICAL,responsibility:t,recoverable:!0},4240:{code:4240,description:Language.defaultErrorMessage,detail:"A DASH failure happened, and now we've played out the rest of the buffer.",severity:CRITICAL,responsibility:t,recoverable:!0},5000:{code:5e3,description:Language.defaultErrorMessage,detail:"No alternative media format available",severity:CRITICAL,responsibility:n},4999:{code:4999,description:Language.defaultErrorMessage,detail:"No alternative media format available after failover, probably offline",severity:CRITICAL,responsibility:n,recoverable:!0},5003:{code:5003,detail:"The format of the media resource could not be decoded (video)",severity:ERROR,responsibility:n},5004:{code:5004,detail:"The format of the media resource could not be decoded (audio)",severity:ERROR,responsibility:n},5005:{code:5005,detail:"HTML5 MEDIA_ERR_ABORTED - (video)",severity:ERROR,responsibility:n},5006:{code:5006,detail:"HTML5 MEDIA_ERR_ABORTED - (audio)",severity:ERROR,responsibility:n},5007:{code:5007,detail:"HTML5 MEDIA_ERR_NETWORK - (video)",severity:ERROR,responsibility:n},5008:{code:5008,detail:"HTML5 MEDIA_ERR_NETWORK - (audio)",severity:ERROR,responsibility:n},5009:{code:5009,detail:"The video tag fired an error event, but there was no error available on the element",severity:WARNING,responsibility:n},5010:{code:5010,detail:"The audio tag fired an error event, but there was no error available on the element",severity:WARNING,responsibility:n},5100:{code:5100,detail:"The video could not be decoded with the provided key (if any).",severity:WARNING,responsibility:i},5101:{code:5101,description:Language.defaultErrorMessage,detail:"A DRM error fired, and the timeout elapsed without it being corrected",severity:CRITICAL,responsibility:i},6003:{code:6003,description:Language.errorUnsupported,detail:"Browser does not have MSE support",severity:CRITICAL,responsibility:t},6004:{code:6004,description:Language.defaultErrorMessage,detail:"The player could not be initialised in time",severity:CRITICAL,responsibility:t},6006:{code:6006,description:Language.defaultErrorMessage,detail:"Dash.js could not be initialised in time",severity:CRITICAL,responsibility:t,recoverable:!0},6011:{code:6011,description:Language.defaultErrorMessage,detail:"No source has been found for this video",severity:ERROR,responsibility:n},6100:{code:6100,description:"Plugin load failed",severity:ERROR,responsibility:t},6102:{code:6102,description:"Plugin load timed out",severity:ERROR,responsibility:t},6101:{code:6101,description:"Plugin initialise failed",severity:ERROR,responsibility:t},6500:{code:6500,description:"This content is not available on this site. Visit the BBC site to enjoy this content.",severity:CRITICAL,responsibility:i,recoverable:!0},7500:{code:7500,detail:"There was an error loading Subtitles",severity:WARNING,responsibility:n},7501:{code:7501,detail:"Failing over thumbnail manifest",severity:WARNING,responsibility:n},7750:{code:7750,detail:"Language failed to load",severity:WARNING,responsibility:i},8000:{code:8e3,description:Language.errorFlashIsNeeded,detail:"Flash creation failed.",severity:CRITICAL,responsibility:i},8001:{code:8001,description:Language.errorFlashIsNeeded,detail:"Flash initialisation failed.",severity:CRITICAL,responsibility:i},8005:{code:8005,description:Language.errorFlashIsNeeded,detail:"Flash not installed",severity:CRITICAL,responsibility:i},8010:{code:8010,description:Language.defaultErrorMessage,detail:"Flash Error.",severity:CRITICAL,responsibility:UNKNOWN},8020:{code:8020,description:Language.errorCantPlayInBrowser,detail:"Can't play in android/kindle browser",severity:CRITICAL,responsibility:i},unknown:{description:Language.defaultErrorMessage,detail:"An unknown error occurred",severity:ERROR,responsibility:UNKNOWN},unknownCritical:{description:Language.defaultErrorMessage,detail:"An unknown error occurred",severity:CRITICAL,responsibility:UNKNOWN}}};return a}();String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var HIDDEN_PLAYER="-9999px",HIDDEN_PLAYER_MINIMODE="-9998px",HIDDEN_PLAYER_SWF="-9997px",DUPLICATE_EVENT_TIMEOUT=500,KEY_ESCAPE=27,KEY_SPACE=32,KEY_LEFT_ARROW=37,KEY_UP_ARROW=38,KEY_RIGHT_ARROW=39,KEY_DOWN_ARROW=40,KEY_HOME=36,KEY_END=35,KEY_F=70,KEY_M=77,KEY_ENTER=13,Utils=function(){function e(){}function t(t,i){return function(n){clearTimeout(et[t]);window[t]=e;i(n)}}function i(){for(var e=tt.length-1;e>=0;e--)if(!tt[e]){tt[e]=!0;return e}tt.push(!0);return tt.length-1}function n(e){var t=parseInt(e.target.getAttribute("json_id"),10);tt[t]=!1}function a(a,r){var o=i(),s="JS_callbacks"+o;window[s]=t(s,r);et[s]=setTimeout(function(){window[s]=e;r({result:"timeout"})},it);a=a.replace("{callback}",s);var l=document.createElement("script");l.type="text/javascript";l.src=a;l.setAttribute("json_id",o);l.onload=n;l.onerror=n;document.getElementsByTagName("head")[0].appendChild(l)}function r(e,t,i,n,a){o(e,t,i,n,a,!0)}function o(e,t,i,n,a,r){var o=SMPError.getError(t);o.nonPlayer=n;o.extra=i;if(a){o.morphed=!0;o.severity="error"}r?e.delayedDispatch(o):e.dispatch(o)}function s(e,t,i){var n,a,r={};if(e)for(n in t)if(t.hasOwnProperty(n)){a=t[n];n in e&&(e[n]===a||n in r&&r[n]===a)||(e[n]="object"==typeof e[n]&&null!==e[n]?s(e[n],a,i):i(a))}return e}function l(){var e=u(arguments[0]);if(e)for(var t=1;arguments.length>t;t++)arguments[t]&&(e=s(e,arguments[t],u));return e}function u(e){if(!e||"object"!=typeof e)return e;var t,i,n;if(e instanceof Array){t=[];for(i=0,n=e.length;n>i;++i)i in e&&t.push(u(e[i]))}else t={};return s(t,e,u)}function d(e,t){return e&&(e.className+"").indexOf(t)>-1}function c(e,t,i){if(e){var n=e.className;if(""!==n){n=n.replace(m(i||"",t),"").trim()+" "+t;e.className=n.trim().replace(/\s+/g," ")}else e.className=t}}function p(e,t,i){i?ut.className(e,t):ut.className(e,"",t)}function f(e,t,i,n){var a=d(e,t);a&&n?c(e,"",t):!a&&i&&c(e,t,"")}function m(e,t){var i=e+" "+t;i=i.trim().replace(/\s+/g,"\\b|\\b");return new RegExp("\\b"+i+"\\b","g")}function g(e,t,i,n){if(isNaN(e)||0>e||e>36e4)return i?"--:--":"";if(!e)return"00:00";var a=Math.floor(e/60),r=Math.floor(a/60);a=Math.floor(a%60);var o=Math.floor(e%60),s=n&&10>r?"0"+r:r;10>a&&(a="0"+a);10>o&&(o="0"+o);var l=[a,o];(r>0||t)&&l.unshift(s);t&&l.pop();return l.join(":")}function h(e,t,i){if(14e6>e)return i?g(e,!1,!0):"";var n=new Date(1e3*e+(t?36e5:0)),a=60*n.getUTCHours()*60+60*n.getUTCMinutes()+n.getUTCSeconds();return g(a,!0,i,!0)}function y(e,t,i){var n=null;if(!e)return null;e.posterRecipe&&(n=e.posterRecipe);n||(n=e.posterImg);return n&&nt.test(n)?"url("+v(n,t,i)+")":null}function v(e,t,i,n){var a;a=n?n:ut.getOffset(t,"width");(0===a||isNaN(a))&&(a=768);i&&i.densityMultiplier&&(a*=i.densityMultiplier);for(var r=at.length-1;r>0&&!(a/at[r]>.98);r--);var o=at[r]+"x"+rt[r],s=1024>=at[r]?at[r]:1536;return e.replace("{recipe}",o).replace("$recipe",o).replace("$width",s)}function b(e,t){var i=e.type;if(t.mediaItem){"playing"==i&&(e=t.mediaItem.annotateEvent(e));if("loadedmetadata"==i){var n=t.mediaConnection;if(n){e.transferFormat=n.format;e.cdn=n.supplier;e.height=t.mediaPlayer.videoHeight;e.width=t.mediaPlayer.videoWidth}}if("timeupdate"==i){var a=t.timeHelper;e.duration=a.duration;if(t.isLive){e.currentTime=a.time;e.streamStart=a.streamStart;e.latestSeek=a.latestSeek;e.earliestSeek=a.earliestSeek;e.streamEnd=a.streamEnd;e.joinTime=a.joinTime;e.livePoint=e.latestSeek}else e.currentTime=a.time}}if(ut.eventFieldData[i])for(var r=ut.eventFieldData[i],o=r.length,s=0;o>s;s++){var l=r[s];e[l]=t.mediaPlayer[l]}"volumechange"==i&&(e.volume=e.muted?0:e.volume);return e}function T(e,t){var i=t.items;if(!i||0===i.length){var n=SMPError.NO_ITEMS_IN_PLAYLIST;ot[t.noItemsReason]&&(n=ot[t.noItemsReason]);ut.callErrorFunction(e,n);return!0}return!1}function E(e,t){var i=SMPError.CONTENT_NOT_AVAILABLE_UNKNOWN;if(t.result){var n=t.result.reason;if(ot[n]){i=ot[n];n=null}}var a=t._ms6&&"360"!=t.kind;if(e.supportFallback){ut.asyncDelay(e.fallbackAsAppropriate,[],e);a=!0}else if(e.supportFallbackLocked){r(e,SMPError.CANNOT_MAINTAIN_LOCK);return!1}ut.callErrorFunction(e,i,n,!1,a);return t._ms6&&"360"!=t.kind}function P(e,t){if(t in e.style)return!0;t=t.replace(/^[a-z]/,function(e){return e.toUpperCase()});for(var i=["Webkit","Moz"],n=0;i.length>n;n++)if(i[n]+t in e.style)return!0;return!1}function C(e,t,i){for(var n=0;e.length>n;n++){var a=e[n];if(a&&a.style){a.style[t]=i;null===i&&a.style.removeProperty&&a.style.removeProperty(t);t=t.replace(/^[a-z]/,function(e){return e.toUpperCase()});a.style["webkit"+t]=i;a.style["moz"+t]=i;a.style["ms"+t]=i;a.style["o"+t]=i}}}function I(e,t){for(var i=e.cssRules.length-1;i>=0;i--)for(var n=e.cssRules[i].cssText,a=0;t.length>a;a++)if(-1!=n.indexOf(t[a])){e.deleteRule(i);break}}function S(e){e=(e+"").replace(/\D/gim," ");var t=e.split(/\s+/gim);return Date.UTC(t[0],t[1]-1,t[2],t[3],t[4],t[5])}function k(e){for(var t=0;window.validDomains.length>t;t++){var i=new RegExp("^(http[s]{0,1})://([^\\?\\&#:/]+\\."+window.validDomains[t]+")(:([0-9]+))?","gi");if(e.match(i))return!0}return!1}function _(e,t){if(e&&e.length>0)for(var i=0;e.length>i;i++)if(e[i]._id==t)return e[i];return null}function w(e,t,i){var n=[],a=[];if(e){if(t&&t.length>0)for(var r=0;e.length>r;r++)e[r]&&-1==t.indexOf(e[r].type)&&n.push(e[r]);else n=e;for(r=0;n.length>r;r++)n[r]&&-1!=st[i].indexOf(n[r].type)&&a.push(n[r])}return a}function A(e,t){var i=!1,n=function(){i=!1};return function(a){if(!i){if(t)e(a);else{if(a.button&&0!==a.button)return;var r=F(a);e(r,a)}i=!0;setTimeout(n,DUPLICATE_EVENT_TIMEOUT)}a.stopImmediatePropagation()}}function L(e,t,i,n,a){var r=document.createElement("div");r.className="p_iconHolder";i&&(r.innerHTML=['<svg focusable="false" viewbox="0 0 ',e," ",t,'" class="p_svg ',a||""," ",n||"",'"><use xlink:href="#',i,'"></use></svg>'].join(""));return r}function x(e,t,i,n){var a=n?/^((([a-zA-Z]+\:)?\/\/)|\/|[\.]{1,2}\/)/:/^([a-zA-Z]+\:)?\/\//;if(i.loading)return!1;if(e&&!e.match(a)&&0!==e.indexOf("data:")){ut.asyncDelay(t,[e]);return!1}return!0}function O(e,t,i,n,a,r){if(x(e,i,n,a)){var o=new XMLHttpRequest,s=!1;try{o.open("GET",e,!0);r&&(o.withCredentials=!0)}catch(l){if(!XDomainRequest)return;o=new XDomainRequest;s=!0;o.open("GET",e)}o.onload=function(){var a;if(s)try{a=new ActiveXObject("Microsoft.XMLDOM");a.async=!1;a.loadXML(o.responseText)}catch(r){n.loading=!1;i(e,!0)}else{a=o.responseXML;if(!a&&window.DOMParser){var l=new DOMParser;a=l.parseFromString(o.responseText,"text/xml")}}n.loading=!1;t(a)};o.onerror=function(){n.loading=!1;i(e)};n.loading=!0;o.send(null)}}function M(e,t,i,n,a){if(x(e,i,n,a)){var r=new XMLHttpRequest;r.open("GET",e,!0);r.responseType="text";r.onload=function(){n.loading=!1;t(r.response)};r.onerror=function(){n.loading=!1;i(e)};n.loading=!0;r.send(null)}}function D(e,t){var i=e.getBoundingClientRect();t=t||"left";var n=i[t];return B(e)?100*n:n}function N(e){var t=e.getBoundingClientRect();if(B(e)){t.left=100*t.left;t.top=100*t.top;t.height=100*t.height;t.width=100*t.width}return t}function R(e,t,i,n){for(var a="object"==typeof t?t:t.split(/\s+/g),r=0;a.length>r;r++)e.addEventListener(a[r],i,n)}function B(e){return e.clientWidth>e.offsetWidth}function U(e){return"click"==e.type&&0===e.clientX&&0===e.clientY}function F(e){return 0===e.clientX&&0===e.clientY?"key_press":"click"}function H(e,t){for(var i in t)t.hasOwnProperty(i)&&Object.defineProperty(e,i,t[i])}function W(e,t,i){window.delayedFunctions.push({fn:e,args:t,that:i});window.postMessage&&window.postMessage("SMP.asyncDelay","*")}function G(e){return e.connections.length>=1&&e.connections[0].mimetype?"audio"===e.connections[0].mimetype.split("/")[0]:"audio"===e.type}function V(e,t){var i=e.map(function(e,t){return{item:e,position:t}});i.sort(function(e,i){var n=t(e.item,i.item);0===n&&(n=e.position-i.position);return n});for(var n=[],a=0;i.length>a;a++)n[a]=i[a].item;return n}function j(e,t,i){return t>e?t:e>i?i:e}function q(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*new Date%16|0,i="x"==e?t:3&t|8;return i.toString(16)}).toUpperCase()}function z(e,t,i){i=!!i;if(window.PointerEvent)e.addEventListener("pointerdown",t,i);else{e.addEventListener("touchstart",function(i){t(i);e.focus();i.preventDefault()},i);e.addEventListener("mousedown",t,i)}}function Y(e,t,i){i=!!i;if(window.PointerEvent)e.addEventListener("pointerup",t,i);else{e.addEventListener("touchend",t,i);e.addEventListener("mouseup",t,i)}}function K(e,t,i){i=!!i;if(window.PointerEvent)e.addEventListener("pointermove",t,i);else{e.addEventListener("touchmove",t,i);e.addEventListener("mousemove",t,i)}}function X(e,t,i){i=!!i;window.PointerEvent?e.addEventListener("pointermove",function(e){"mouse"==e.pointerType&&t(e)},i):e.addEventListener("mousemove",t,i)}function Q(e,t,i){i=!!i;window.PointerEvent?e.addEventListener("pointerleave",function(e){"mouse"==e.pointerType&&t(e)},i):e.addEventListener("mouseleave",t,i)}function $(e){e=encodeURIComponent(e);var t=new RegExp(e+"=([^;\\s]*)","i"),i=t.exec(document.cookie);return i?decodeURIComponent(i[1]):null}function J(e,t,i){var n=new Date;n.setTime(n.getTime()+15552e6*(i?-1:1));if(!i){n.setDate(15);n.setHours(12);n.setMinutes(0);n.setSeconds(0)}var a=n.toUTCString(),r=location.hostname;-1!==r.indexOf(".bbc.co.uk")&&(r=".bbc.co.uk");-1!==r.indexOf(".bbc.com")&&(r=".bbc.com");try{document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+"; expires="+a+"; domain="+r+"; path=/"}catch(o){}}var Z={loadstart:["currentSrc","preload","networkState"],loadedmetadata:["duration","readyState"],canplay:["readyState"],canplaythrough:["readyState"],play:["paused"],pause:["paused","ended"],playing:["paused","readyState"],seeking:["seeking"],seeked:["seeking"],timeupdate:["readyState"],ended:["ended"],durationchange:["duration"],volumechange:["volume","muted"],error:["error","networkState"],waiting:["readyState"]},et={},tt=[],it=1e4,nt=new RegExp("^//|^http[s]{0,1}://","i"),at=[320,384,432,480,512,608,640,688,720,768,800,832,976,1024,1376,1920],rt=[180,216,243,270,288,342,360,387,405,432,450,468,549,576,774,1080],ot={postAvailability:SMPError.CONTENT_NOT_AVAILABLE_EXPIRED,postLiveAvailability:SMPError.CONTENT_NOT_AVAILABLE_EXPIRED,preAvailability:SMPError.PROGRAMME_NOT_AVAILABLE_YET,regionRestriction:SMPError.CONTENT_NOT_AVAILABLE_REGION,selectionunavailable:SMPError.CONTENT_NOT_AVAILABLE,geolocation:SMPError.CONTENT_NOT_AVAILABLE_GEO,other:SMPError.CONTENT_NOT_AVAILABLE_OTHER,itemRevoked:SMPError.CONTENT_NOT_AVAILABLE_REVOKED,EmptyPlaylistObject:SMPError.NO_ITEMS,EmptyPlaylistObjectFiltered:SMPError.NO_ITEMS_FILTERED,noMedia:SMPError.CONTENT_NOT_AVAILABLE,timeout:SMPError.MEDIASELECTOR_TIMEOUT,error:SMPError.MEDIATION_ERROR},st={chapter:["chapter","programme"],key:["highlight","key"]};
window.delayedFunctions=[];var lt=function(){return Date.now()};window.performance&&window.performance.now&&(lt=function(){return window.performance.now()});var ut={getActionFn:A,eventFieldData:Z,getJSON:a,getXML:O,getText:M,merge:l,clone:u,now:lt,className:c,setOrUnsetClass:p,setOrUnsetClassOnlyAfterCheck:f,hasClass:d,secondsToTime:g,epochToTime:h,callErrorFunction:o,delayedErrorFunction:r,parseISODate:S,asyncDelay:W,holdingImage:y,annotateEvent:b,deleteCssRules:I,checkCssSupport:P,applyVendorStyles:C,checkForItemsErrors:T,checkNotAvailableReason:E,isValidUrl:k,getMarkerByType:w,getItemById:_,generateSVG:L,getOffset:D,getOffsets:N,multiAddEventListener:R,isKeyboardClick:U,getActionType:F,defineProperties:H,isItemAudio:G,stableSort:V,clamp:j,sortByStart:function(e,t){return e.start-t.start},sortSimple:function(e,t){return e-t},UUID:q,doChef:v,downAction:z,upAction:Y,moveAction:K,hoverLeaveAction:Q,hoverMoveAction:X,getCookie:$,setCookie:J};return ut}(),TimeHelper=function(){function e(e){return Utils.clamp(e,0,1)}function t(e,t,i){if(i){var n=i.ignoreJoinTime?e.time:e.joinTime;if(i.accurateStartTime){e.accurateStartTime=i.accurateStartTime;e.earliestSeek=Math.max(Math.min(n,i.accurateStartTime),e.streamStart)}else i.scheduledStartTime&&(e.earliestSeek=Math.max(Math.min(n,i.scheduledStartTime),e.streamStart));if(i.accurateEndTime){e.accurateEndTime=i.accurateEndTime;e.streamEnd=i.accurateEndTime}else if(i.scheduledEndTime){e.scheduledEndTime=i.scheduledEndTime;e.streamEnd=Math.max(i.scheduledEndTime,e.latestSeek)}e.inbandEndTime&&(e.streamEnd=Math.min(e.streamEnd,e.inbandEndTime))}else t.simulcast||(e.earliestSeek=Math.max(e.joinTime,e.streamStart))}var i=-37,n=1e6,a=function(e){var t=this;t.player=e;t.reset();return t};a.prototype={reset:function(){var e=this;e.joinTime=0/0;e.streamStart=0;e.latestSeek=0;e.latestAllowableSeekTime=0;e.earliestSeek=0;e.streamEnd=0;e.time=e.player.config.startTime;e.percent=0;e.drawSeekBar=!1;e.duration=0/0;e.rewindWindowLength=0;e.hlsBaseTime=0;e.dashTimeDelta=0;e.restartedWebcast=!1;e.startTimeAvailable=!1;e.accurateStartTime=!1;e.accurateEndTime=!1;e.scheduledEndTime=!1;e.availableTime={};e.presentationTimeOffset=0;e.inbandEndTime=null;e.forcedTime=null;e.playbackTimeouts=[]},setAvailableTime:function(e){var t=this;t.availableTime=e||{};t.update(t.player.time,t.player.duration)},partialReset:function(){var e=this,t=e.player.mediaItem;e.percent=0;t&&(t.live?e.duration=0/0:e.time=e.player.config.startTime)},timeToString:function(e,t){var i=this,n=i.player.mediaItem,a=e;isNaN(a)&&(a=i.time);return!n||isNaN(a)?t?"--:--":"":n.live?Utils.epochToTime(a,i.player.config&&i.player.config.isBSTime,t):Utils.secondsToTime(a,!1,t)},getDurationOrEndString:function(){var e=this,t=e.player.mediaItem;if(t){if(!t.live&&e.duration)return Utils.secondsToTime(e.duration);if(t.live&&(e.accurateEndTime||e.scheduledEndTime&&e.scheduledEndTime>e.latestSeek))return e.timeToString(e.streamEnd)}return""},getTimeString:function(e){var t=this,i=t.player.mediaItem;return n>t.time&&i&&i.live?"":t.timeToString(e)},getTimeInfoToDisplay:function(e){var t=this,i={};i.duration=t.getDurationOrEndString();i.currentTime=t.getTimeString(e);return i},percentToTimeString:function(e,t){var i=this,n=i.percentToTime(e);return i.timeToString(n,t)},unixTimeToStreamTime:function(e){var t=this,a=t.player,r=t.player.mediaItem;if(r&&r.live&&!r.useFlash)if(a.isPlayingDash)"audio"==r.type&&e>n&&(e-=i);else{if(!t.startTimeAvailable)return e;t.hlsBaseTime=r.startTime;if(e>n){e-=t.hlsBaseTime;"audio"==r.type&&(e-=i)}}return e},streamTimeToUnixTime:function(e){var t=this,a=t.player,r=t.player.mediaItem;if(r&&r.live&&!a.isPlayingDash){if(!t.startTimeAvailable)return e;t.hlsBaseTime=r.startTime;e+=t.hlsBaseTime}r&&r.live&&"audio"==r.type&&e>n&&(e+=i);return e},timeToPercent:function(t){var i,n=this,a=n.player.mediaItem;if(!a||isNaN(Number(t))||isNaN(n.duration))return 1/0;i=a.live?(t-n.earliestSeek)/n.duration:t/n.duration;return e(i)},percentToTime:function(t){var i=this,n=i.player.mediaItem;if(!n)return 0;var a=i.duration*e(t);n.live&&(a+=i.earliestSeek);return a},update:function(i,a){var r=this,o=r.player,s=o.mediaItem,l=o.webcastData,u=s&&s.live;r.forcedTime&&(i=r.forcedTime);var d=0===o.mediaPlayer.currentTime&&u&&!o.isPlayingDash,c=u&&!o.isPlayingDash&&Device.windowsPhone;if(d||c)r.time=0;else{isNaN(i)||(r.time=i);if(s&&u)if(o.isPlayingDash){if(o.dashEvents.dashPlayer){r.earliestSeek=r.streamStart=r.streamTimeToUnixTime(o.dashEvents.dashPlayer.currentStart)+r.presentationTimeOffset+(s.simulcast?60:0);r.streamEnd=r.latestSeek=Math.max(r.streamTimeToUnixTime(o.dashEvents.dashPlayer.currentEnd)+r.presentationTimeOffset-8,isNaN(i)?0:i);isNaN(r.joinTime)&&!isNaN(r.latestSeek)&&i&&(r.joinTime=i);r.inbandEndTime&&(r.latestSeek=r.streamEnd=r.inbandEndTime);t(r,s,l);r.checkSnappedAndUpdate(i)}}else if(s.useFlash){var p=o.swf.currentTimeInfo;if(p){r.setStartTimeAvailable(!0);r.earliestSeek=r.streamStart=p.streamStart;r.streamEnd=p.streamEnd;r.latestSeek=p.latestSeek;r.joinTime=p.joinTime;t(r,s,l);r.checkSnappedAndUpdate(i)}}else{var f=o.seekable;if(r.startTimeAvailable&&1/0!=f.end){r.hlsBaseTime=s.startTime;r.earliestSeek=r.streamStart=f.start+r.hlsBaseTime+60;r.streamEnd=r.latestSeek=f.end+r.hlsBaseTime;isNaN(r.joinTime)&&i>n&&(r.joinTime=i);t(r,s,l);r.checkSnappedAndUpdate(i)}1/0==r.duration&&(r.duration=0)}else{r.duration=a;r.streamEnd=r.latestSeek=a;r.percent=e(r.time/r.duration)}var m=r.availableTime.end;m&&m>r.streamStart&&(r.latestSeek=Math.min(Math.max(m,r.time),r.streamEnd));r.latestAllowableSeekTime=Math.min(r.latestSeek,r.streamEnd);var g=r.canSeek();if(r.drawSeekBar!=g){r.drawSeekBar=g;s&&u&&r.player.delayedDispatch({type:"canPauseChange",canPause:g});r.player.ui.checkIfCanDisplaySeekBar()}for(var h=0;r.playbackTimeouts.length>h;){var y=r.playbackTimeouts[h];if(r.time>=y.time&&(y.seekover||y.time+.33>i)){var v=y.callback;r.playbackTimeouts.splice(h,1);v()}else h++}}},checkSnappedAndUpdate:function(t){var i=this,n=i.streamEnd-t,a=20;a>n&&(i.streamEnd=i.latestSeek=t);i.rewindWindowLength=i.latestSeek-i.streamStart;i.duration=i.streamEnd-i.earliestSeek;i.percent=e((t-i.earliestSeek)/i.duration)},getLatestAllowableSeekPercent:function(){var e=this,t=e.latestAllowableSeekTime;return e.timeToPercent(t)},checkIfTimeIsAvailable:function(e,t){var i=this,n=i.earliestSeek-(t?2:0);return Utils.clamp(e,n,i.latestAllowableSeekTime)},hasRewindWindow:function(){var e=this,t=e.player.mediaItem;return t&&t.live&&e.rewindWindowLength>30},canSeek:function(){var e=this,t=e.player,i=e.player.mediaItem;return i&&!i.live||i&&i.live&&!Device.inaccurateRewindWindow&&e.rewindWindowLength>90&&t.playlist.liveRewind&&t.ui.config.controls.enableLiveRewind&&(!Device.consideredForMobileLiveRewind||t.config.supportLiveRewindOnMobile)},setStartTimeAvailable:function(e){var t=this;if(t.startTimeAvailable!=e){t.startTimeAvailable=e;var i=t.player;if(i.needHlsStartTime&&e||i.isUsingGetStartDate&&e){i.timeHelper.update(i.time,i.duration);i.needHlsStartTime=!1;if(i.waitingForStartTime&&t.canSeek()){i.time=i.waitingForStartTime;i.waitingForStartTime=0}}}},setPresentationTimeOffset:function(e){var t=this;t.presentationTimeOffset=e||0},setInbandEndTime:function(e){var t=this;t.inbandEndTime=e+t.presentationTimeOffset},setPlaybackTimeout:function(e,t,i){var n=this,a={callback:e,time:t,seekover:!!i},r=-1;if("function"==typeof a.callback&&!isNaN(a.time)){r=n.playbackTimeouts.length>0?n.playbackTimeouts[n.playbackTimeouts.length-1].id+1:1;a.id=r;n.playbackTimeouts.push(a)}return r},clearPlaybackTimeout:function(e){var t=this;t.playbackTimeouts=t.playbackTimeouts.filter(function(t){return t.id!=e})}};return a}(),Device=function(){var e={requiresFakeEndedEvent:!1,requiresFakePlayEvent:!1,requiresRestartAdjustmentAtEnd:!1,supportsVideoDash:!1,supportsAudioDash:!1,needToLoadSVG:!0,supportsHls:!1,useFakeFullscreen:!1,windowsPhone:!1,android:!1,ios:!1,ipad:!1,iphone:!1,blackBerry:!1,init:function(t,i){var n=window.MediaSource?!0:!1;t=t.toLowerCase();e.windowsPhone=/windows phone/.test(t);e.android=/android/.test(t)&&!e.windowsPhone;e.ios=/(ipod|ipad|iphone)/.test(t)&&!e.windowsPhone;e.iphone=/iphone|ipod/.test(t)&&!e.windowsPhone;e.ipad=/ipad/.test(t);e.blackBerry=/blackberry/.test(t)||/playbook/.test(t)||/bb10/.test(t);e.macSafari=/safari/.test(t)&&/mac/.test(t)&&!/chrome/.test(t)&&!e.windowsPhone;e.firefox=/firefox/.test(t);e.kindle=/silk/.test(t);e.trident=/trident/.test(t);e.edge=/ edge\//.test(t);e.snowLeopard=e.macSafari&&/os x 10_6/.test(t);e.windowsWebview=e.edge&&/webview/.test(t);e.windows10Arm=/windows nt 10\.[0-9]; arm/.test(t);var a=/windows nt 5\./.test(t);e.windowsXpFirefox=e.firefox&&a;e.windowsXpChrome=window.chrome&&a;e.preWindows10IE11=e.trident&&/ nt 6./.test(t);e.opera=/opr/.test(t);e.samsung=/samsungbrowser/.test(t);if(e.firefox)var r=t.match(/firefox\/([0-9]+)/),o=r?parseInt(r[1],10):0;if(e.ios){r=t.match(/os ([0-9]+)/);var s=r?parseInt(r[1],10):0}if(e.macSafari){r=t.match(/os x ([0-9]+)\_([0-9]+)/);if(r&&r.length>=3)var l=parseInt(r[1],10),u=parseInt(r[2],10)}e.safariPreSierra=e.macSafari&&(10>l||10===l&&12>u);e.hideCursorInFullscreen=!e.ios||s>=7;var d,c=0,p=!1;if(e.android){d=10*parseFloat(t.match(/android (\d+(?:\.\d+)+)/i)[1]);d&&42>d&&(p=!0);var f=t.match(/chrome\/([0-9]+)/);if(f){c=parseInt(f[1],10);35>c&&(e.useFakeFullscreen=!0)}}e.useStartDateInHls=s>=10;e.iPhoneIos10=e.iphone&&10==s;e.iPhoneIos11=e.iphone&&11==s;e.iPhoneOutOfPagePlayback=e.iphone&&10>s;e.inaccurateRewindWindow=e.ios&&7>s;e.iPhoneNeedFullScreenMarginButton=e.iphone&&320===screen.width&&568===screen.height;e.loadStartUnreliableAudio=e.ios&&s>=6;e.requiresRestartAdjustmentAtEnd=e.iPad;e.requiresFakePlayEvent=p||e.kindle||e.blackBerry;e.requiresFakeEndedEvent=e.macSafari||p;e.supportsAutoplay=!(e.ios||e.windowsPhone||e.android||e.blackBerry);e.possiblyPreferPlainOverDash=!(e.supportsAutoplay||c>55&&d>=6);e.notWorthTryingAutoplay=!e.supportsAutoplay||e.macSafari;e.supportsMultipleMediaElements=e.supportsAutoplay;e.consideredForMobileLiveRewind=!e.supportsAutoplay;e.supportsVideoDash=n&&!e.safariPreSierra&&!e.windowsXpFirefox&&!e.preWindows10IE11&&!e.windowsXpChrome;e.supportsAudioDash=n;e.supportsHls=i||e.edge||e.windows10Arm||e.macSafari;e.preferHls=e.ios||e.blackBerry||e.windowsWebview;e.requiresDashAVC3CodecHack=e.trident||e.windowsWebview;e.noSupportForLocationHeader=e.trident;e.requiresFullscreenResizeDelay=!e.supportsAutoplay||!(e.Edge||window.chrome||e.macSafari||e.firefox||e.trident);e.supportPlayerFallback=!e.ios;e.preferVideoFallbackOverHLS=e.kindle||e.android||!e.supportsHls&&!e.macSafari;e.flashLockMatters=!(e.kindle||e.android);e.requiresManualDashPlay=e.firefox;e.requiresPageFullScreenStyles=e.edge;e.disallowHighResIcons=!1;e.animationCompensationSupported=!e.ios&&!e.edge&&!e.macSafari;e.scrubAnimation=!(e.firefox&&52>o||e.samsung||d&&44>d);e.canTabbing=!e.ios;e.webgl=function(){try{var e=document.createElement("canvas"),t="probablySupportsContext"in e?"probablySupportsContext":"supportsContext";return t in e?e[t]("webgl")||e[t]("experimental-webgl"):"WebGLRenderingContext"in window}catch(i){return!1}}()},requestFullscreen:function(e){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen&&e.mozRequestFullScreen()},exitFullscreen:function(e){e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.msExitFullscreen?e.msExitFullscreen():e.mozCancelFullScreen&&e.mozCancelFullScreen()},fullscreenEnabled:function(t){return!t||e.useFakeFullscreen?!1:t.fullscreenEnabled||t.webkitFullscreenEnabled||t.msFullscreenEnabled||t.mozFullScreenEnabled},bindToFullscreenChange:function(e,t){Utils.multiAddEventListener(e,"fullscreenchange webkitfullscreenchange MSFullscreenChange mozfullscreenchange",t)},isBrowserFullscreen:function(e){var t=e.target;if(!t)return!1;var i=t.contentDocument||t.ownerDocument;if(i){if(i.fullscreenElement||i.msFullscreenElement||i.webkitIsFullScreen||i.mozFullScreen)return!0}else if(t.msFullscreenElement)return!0;return t.webkitIsFullScreen||t.mozFullScreen},loadSVGForHighResIcon:function(t){if(e.needToLoadSVG){var i=function(){t&&(t.config.useHighResIcons=!1);Utils.className(document.body,"","svg")};e.needToLoadSVG=!1;var n="/emp/assets/2.0.18/svgicons.svg";Utils.getXML(n,function(e){e&&e.documentElement?document.body.appendChild(document.importNode(e.documentElement,!0)):i()},i,{},!0)}}};return e}(),ThumbnailScrub=function(){function e(e){var t=r.exec(e);if(t){var i=parseInt("0"+t[2],10),n=parseInt("0"+t[3],10),a=parseInt("0"+t[4],10),o=parseInt("0"+t[5],10),s=parseInt("0"+t[6],10),l=parseFloat("0"+t[7]);return l+60*s+60*o*60+24*a*60*60+30*n*24*60*60+365*i*24*60*60}return null}function t(e,t){return e.replace("$Number%04d$",("0000"+t).slice(-4))}function i(e){var t="";if(-1!==e.indexOf("/")){-1!==e.indexOf("?")&&(e=e.substring(0,e.indexOf("?")));t=e.substring(0,e.lastIndexOf("/")+1)}return t}function n(e,t,n){var a,r,o,s,l,u,d,c,p,f={},m={},g=i(n);for(c=0,p=t.length;p>c;c++){m={};a=t[c];r=a.Representation.width;o=a.Representation.height;s=a.SegmentTemplate.media;l=a.Representation.id;d=r+"x"+o;u=g+s.replace("$RepresentationID$",l);m.storyboardUrlTemplate=u;m.numberRows=a.Representation.EssentialProperty_asArray[0].value;m.numberColumns=a.Representation.EssentialProperty_asArray[1].value;m.thumbsPerBoard=m.numberRows*m.numberColumns;m.maxNumBoards=40;m.thumbInterval=a.SegmentTemplate.timescale/1e3;m.totalNumberThumbs=Math.floor(e/m.thumbInterval);m.lastBoard=Math.ceil(m.totalNumberThumbs/m.thumbsPerBoard)-1;f[d]=m}return f}function a(e,i){var n=t(e.storyboardUrlTemplate,i);if(!s[n]){s[n]=!0;var a=new Image;a.src=n}}var r=new RegExp("([+-]?)P(?:(\\d+)Y)?(?:(\\d+)M)?(?:(\\d+)D)?(?:T(?:(\\d+)H)?(?:(\\d+)M)?(?:(\\d+(?:\\.\\d+)?)S)?)?","i"),o={},s={},l=function(e){this.player=e};l.prototype={updateOverrideManifest:function(e){this.overrideManifestHref=e;this.extractManifestData()},newMediaItem:function(e){this.overrideManifestHref=null;this.connectionIndex=0;this.reset();this.mediaItem=e},extractManifestData:function(){var e=this.overrideManifestHref;if(this.mediaItem){e||(e=this.mediaItem.thumbManifestHref);if(!e){var t=this.mediaItem.thumbnailConnections;t[this.connectionIndex]&&(e=t[this.connectionIndex].href)}}this.manifestHref!=e&&(e?this._init(e):this.reset())},getThumbnailData:function(e,i,n){var r,o,s,l,u,d,c,p,f;f=i+"x"+n;r=this.thumbData[f];if(r){o=Math.min(r.totalNumberThumbs-2,Math.max(0,Math.ceil(e/r.thumbInterval)-1));s=Math.floor(o/r.thumbsPerBoard);a(r,s);s>0&&a(r,s-1);r.lastBoard>s&&a(r,s+1);l=o%r.thumbsPerBoard;d=l%r.numberColumns;u=Math.floor(l/r.numberColumns);c=t(r.storyboardUrlTemplate,s);p={storyBoardUrl:c,x:-1*d*i,y:-1*u*n};return p}},reset:function(){this.thumbData={};this.loaded=!1;this.player.ui&&this.player.ui.controls&&Utils.className(this.player.ui.controls,"","p_hasThumbnails")},_init:function(t){var i=this;i.manifestHref=t;i.thumbData={};i.loaded=!1;if(t){o[t]={};var a=function(){Utils.callErrorFunction(i.player,SMPError.THUMBNAIL_FAILOVER,i.manifestHref,!0);i.connectionIndex++;i.extractManifestData()},r=function(r){var o,s={};i.manifestXml=r;try{o=new X2JS([],"",!1);s=o.xml2json(r);i.manifestJSON=s}catch(l){a();return}if(s&&s.MPD&&s.MPD.Period){i.duration=e(s.MPD.Period.duration);i.thumbData=n(i.duration,s.MPD.Period.AdaptationSet_asArray,t);i.player.ui&&i.player.ui.controls&&Utils.className(i.player.ui.controls,"p_hasThumbnails");i.loaded=!0}else a()};Utils.getXML(t,r,a,o[t])}}};return l}(),TTMLParser=function(){function e(e){var t=new X2JS([],"",!1);N=t.xml2json(e);if(!N)throw"TTML document could not be parsed";var i="html",r=n(N,"http://www.w3.org/ns/ttml"),o=r||n(N,"http://www.w3.org/2006/10/ttaf1");o&&a(N,o);var c=N.tt;if(!c)throw"TTML document lacks tt element";var m=c.head;m||(m={});m.layout&&(B=m.layout.region_asArray);m.styling&&(R=m.styling.style_asArray);var g=c.body;if(!g)throw"TTML document lacks body element";var h=n(N.tt,"http://www.w3.org/ns/ttml#styling")||n(N.tt,"http://www.w3.org/2006/10/ttaf1#styling");if(c.hasOwnProperty(h+":extent")){var y=c[h+":extent"].split("px");if(3==y.length){tt=parseInt(y[0],10);et=parseInt(y[1],10)}}var b=E(),T=[tt/b[0],et/b[1]];V["font-size"]=f(T[1]+"px;",T);var C=[];if(B)for(var A=0;B.length>A;A++)C.push(v(Utils.clone(B[A]),T));var L=n(N.tt,"http://www.w3.org/ns/ttml#parameter")||n(N.tt,"http://www.w3.org/2006/10/ttaf1#parameter");N.tt.hasOwnProperty(L+":frameRate")&&(N.tt.frameRate=parseInt(N.tt[L+":frameRate"],10));var M=[],D=N.tt.body_asArray[0].__children;D.forEach(function(e){if(e.div){var t=e.div.p_asArray;t||(t=[]);var n=e.div.div_asArray;if(n&&n.length)for(var a=0;n.length>a;a++){var o=n[a].p_asArray,c=x(n[a]);if(o)for(var f=0;o.length>f;f++){t.push(o[f]);(c.begin||c.end)&&(o[f].parentTime=c)}}}t||(t=[]);t.forEach(function(t){var n,a;n=x(t);a=x(t.span);var o=O(t.parentTime,n);o=O(o,a);if(!isNaN(o.begin)||!isNaN(o.end))if(void 0!==t["smpte:backgroundImage"])for(var c=N.tt.head.metadata.image_asArray,f=0;c.length>f;f++)"#"+c[f]["xml:id"]==t["smpte:backgroundImage"]&&M.push({start:o.begin,end:o.end,id:c[f]["xml:id"],data:"data:image/"+c[f].imagetype.toLowerCase()+";base64, "+c[f].__text,type:"image"});else if("html"===i){F={};H={};U={};W={};var m="";(t.hasOwnProperty("id")||t.hasOwnProperty("xml:id"))&&(m=t["xml:id"]||t.id);var g=S(t,e.div,T),h=g&&g.length>0;_(g,G);var y=k(t,T),v=document.createElement("div");v.className="p_paragraph";var E=t.__children,A=I(E,T,!!r);A.className="p_cueDirUniWrapper";var L=/[^\s]/;if(!L.test(A.textContent))return;if(s("unicode-bidi",y)){A.style.cssText+=l("unicode-bidi",y);d("unicode-bidi",y)}if(s("direction",y)){A.style.cssText+=l("direction",y);d("direction",y)}if(s("padding-left",y)||s("padding-right",y))P(A,u("padding-left",y),u("padding-right",y));else{y.push("padding-left:"+.5*T[0]+"px;");y.push("padding-right:"+.5*T[0]+"px;");P(A,u("padding-left",y),u("padding-right",y))}W.left=u("padding-left",y);W.right=u("padding-right",y);if(h)s("justify-content",y)&&g.push(l("justify-content",y));else{d("text-align",y);d("justify-content",y);g.push(q.center[0]);y.push(q.center[1])}if(s("multi-row-align",y)){var D=u("multi-row-align",y);s("text-align",y)&&"auto"!=z[D]&&d("text-align",y);if(D in z){y.push(z[D]);d("multi-row-align",y)}}if(s("padding-left",y)&&s("padding-right",y)){d("padding-left",y);d("padding-right",y)}var R="";if(s("regionID",g)){var B=l("regionID",g);R=B.slice(B.indexOf(":")+1,B.length-1)}var V=[];p("justify-content",g,V);p("align-items",g,V);if(y){var j=y.join(" ");v.style.cssText=j}g&&(g=g.join(" "));v.appendChild(A);var Y=document.createElement("div");Y.appendChild(v);Y.id="subtitle_"+m;Y.style.cssText="position: absolute; margin: 0; box-sizing: border-box; pointer-events: none;"+g;0===Object.keys(U).length&&(U.defaultFontSize=T[1]/16+"em");w(v);M.push({start:o.begin,end:o.end,type:"html",cueHTMLElement:Y,regions:C,regionID:R,cueID:m,videoHeight:et,videoWidth:tt,cellResolution:b,fontSize:U||T[1]/16+"em",lineHeight:F,linePadding:H,padding:W,flexBoxAttr:V})}else{var K="",X=t.__children;X.length&&X.forEach(function(e){if(e.hasOwnProperty("span")){var t=e.span.__children;t.forEach(function(e){t.hasOwnProperty("metadata")||(e.hasOwnProperty("#text")?K+=e["#text"].replace(/[\r\n]+/gm," ").trim():"br"in e&&(K+="\n"))})}else K+=e.hasOwnProperty("br")?"\n":e["#text"].replace(/[\r\n]+/gm," ").trim()});M.push({start:o.begin,end:o.end,data:K,type:"text"})}})});return M}function t(){D=/^([0-9]+):([0-5][0-9]):([0-5][0-9])|(60)(\.([0-9])+)?$/;U={};F={};H={};W={};G={top:"85%;",left:"5%;",width:"90%;",height:"10%;","align-items":"flex-end;",overflow:"visible;","-ms-writing-mode":"lr-tb, horizontal-tb;","-webkit-writing-mode":"horizontal-tb;","-moz-writing-mode":"horizontal-tb;","writing-mode":"horizontal-tb;"};V={color:"rgb(255,255,255);",direction:"ltr;","font-family":"sans-serif;","font-style":"normal;","line-height":"normal;","font-weight":"normal;","text-align":"center;","justify-content":"center;","text-decoration":"none;","unicode-bidi":"normal;","white-space":"normal;"};j={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:"monospace, sans-serif",monospaceSerif:"monospace, serif",proportionalSansSerif:"Arial",proportionalSerif:"Times New Roman","default":"font-family: sans-serif;"};q={right:["justify-content: flex-end;","text-align: right;"],start:["justify-content: flex-start;","text-align: start;"],center:["justify-content: center;","text-align: center;"],end:["justify-content: flex-end;","text-align: end;"],left:["justify-content: flex-start;","text-align: left;"]};z={start:"text-align: start;",center:"text-align: center;",end:"text-align: end;",auto:""};Y={wrap:"white-space: normal;",noWrap:"white-space: nowrap;"};K={normal:"unicode-bidi: normal;",embed:"unicode-bidi: embed;",bidiOverride:"unicode-bidi: bidi-override;"};X={before:"align-items: flex-start;",center:"align-items: center;",after:"align-items: flex-end;"};$={lrtb:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;",rltb:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;direction: rtl;unicode-bidi: bidi-override;",tbrl:"-webkit-writing-mode: vertical-rl;writing-mode: vertical-rl;-webkit-text-orientation: upright;text-orientation: upright;",tblr:"-webkit-writing-mode: vertical-lr;writing-mode: vertical-lr;-webkit-text-orientation: upright;text-orientation: upright;",lr:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;",rl:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;direction: rtl;",tb:"-webkit-writing-mode: vertical-rl;writing-mode: vertical-rl;-webkit-text-orientation: upright;text-orientation: upright;"};Q=Utils.checkCssSupport(document.createElement("span"),"boxDecorationBreak")}function i(e){var t,i,n,a=D.test(e);if(!a)return 0/0;t=e.split(":");i=parseFloat(t[0])*J+parseFloat(t[1])*Z+parseFloat(t[2]);if(t[3]){n=N.tt.frameRate;n&&!isNaN(n)&&(i+=parseFloat(t[3])/n)}return i}function n(e,t){var i=Object.keys(e).filter(function(i){return("xmlns"===i.split(":")[0]||"xmlns"===i.split(":")[1])&&e[i]===t}).map(function(e){return e.split(":")[2]||e.split(":")[1]});return 1!=i.length?null:i[0]}function a(e,t){for(var i in e)if(e.hasOwnProperty(i)){if(("object"==typeof e[i]||e[i]instanceof Object)&&!Array.isArray(e[i]))a(e[i],t);else if(Array.isArray(e[i]))for(var n=0;e[i].length>n;n++)a(e[i][n],t);var r=i.slice(i.indexOf(t)+t.length+1);e[r]=e[i];delete e[i]}}function r(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function o(e){var t=e.slice(1),i=t.match(/.{2}/g),n=parseFloat(parseInt(parseInt(i[3],16)/255*1e3,10)/1e3),a=i.slice(0,3).map(function(e){return parseInt(e,16)});return"rgba("+a.join(",")+","+n+");"}function s(e,t){for(var i=0;t.length>i;i++){var n=t[i].split(":");if(2===n.length&&n[0].trim()===e)return!0}return!1}function l(e,t){for(var i=0;t.length>i;i++)if(t[i].indexOf(e)>-1)return t[i];return null}function u(e,t){var i=l(e,t);i&&(i=i.slice(i.indexOf(":")+1).replace(";",""));return i}function d(e,t){t.splice(t.indexOf(l(e,t)),1)}function c(e,t){for(var i=0;e.length>i;i++)for(var n=0;t.length>n;n++)e[i]&&e[i].split(":")[0].indexOf(t[n].split(":")[0])>-1&&e.splice(i,1);return e.concat(t)}function p(e,t,i){if(s(e,t)){i.push(l(e,t));d(e,t)}}function f(e,t){var i,n=e.slice(e.indexOf(":")+1,e.length);if(n.indexOf("%")>=0){var a=parseFloat(n.slice(0,n.length-1));i=a*t[1]/1600}else{if(n.indexOf("em")>=0)return n;var r;r=n.indexOf("px")>=0?parseInt(n.slice(0,n.length-2),10):parseInt(n,10);i=r/16}return i+"em;"}function m(e,t){var i=125;if(e.indexOf("%")>=0)i=parseFloat(e.slice(e.indexOf(":")+1,e.indexOf("%")));else if(e.indexOf("px")>=0){i=t/parseFloat(e.slice(e.indexOf(":")+1,e.indexOf("px")));i*=100}return i+"%;"}function g(e,t){var i=[];if("object"==typeof e){for(var n in e)if(e.hasOwnProperty(n)){var a=n.replace("ebutts:","");a=a.replace("xml:","");a=a.replace("tts:","");a=r(a);if(a!==n){e[a]=e[n];delete e[n]}}"style"in e&&(i=i.concat(y(e.style,t)));if("line-padding"in e){var s=parseFloat(e["line-padding"].slice(e["line-padding"].indexOf(":")+1,e["line-padding"].indexOf("c")));"id"in e&&(H[e.id]=s);var l=s*t[0]+"px;";i.push("padding-left:"+l);i.push("padding-right:"+l)}if("font-size"in e){var u=f(e["font-size"],t);"id"in e&&(U[e.id]=u);i.push("font-size:"+u)}if("line-height"in e)if("normal"===e["line-height"])i.push("line-height: normal;");else{var d=m(e["line-height"],t);i.push("line-height:"+d);"id"in e&&(F[e.id]=d)}if("font-family"in e){for(var c=e["font-family"].split(","),p=0;c.length>p;p++)c[p]in j&&(c[p]=j[c[p]]);i.push("font-family:"+c.join(",")+";")}if("text-align"in e&&e["text-align"]in q){i.push(q[e["text-align"]][0]);i.push(q[e["text-align"]][1])}"multi-row-align"in e&&i.push("multi-row-align:"+e["multi-row-align"]+";");var g;if("background-color"in e)if(e["background-color"].indexOf("#")>-1&&e["background-color"].length-1===8){g=o(e["background-color"]);i.push("background-color: "+g)}else i.push("background-color:"+e["background-color"]+";");if("color"in e)if(e.color.indexOf("#")>-1&&e.color.length-1===8){g=o(e.color);i.push("color: "+g)}else i.push("color:"+e.color+";");"wrap-option"in e&&i.push(e["wrap-option"]in Y?Y[e["wrap-option"]]:"white-space:"+e["wrap-option"]);"unicode-bidi"in e&&i.push(e["unicode-bidi"]in K?K[e["unicode-bidi"]]:"unicode-bidi:"+e["unicode-bidi"]);"font-style"in e&&i.push("font-style:"+e["font-style"]+";");"font-weight"in e&&i.push("font-weight:"+e["font-weight"]+";");"direction"in e&&i.push("direction:"+e.direction+";");"text-decoration"in e&&i.push("text-decoration:"+e["text-decoration"]+";");N.tt.hasOwnProperty("xml:space")&&"preserve"===N.tt["xml:space"]&&i.push("white-space: pre;");return i}}function h(e,t){for(var i=0;e.length>i;i++){var n=e[i];if(n["xml:id"]===t||n.id===t)return n}return null}function y(e,t){var i=[],n=e.match(/\S+/g);n.forEach(function(e){var n=h(R,e);if(n){var a=g(JSON.parse(JSON.stringify(n)),t);i=i.concat(a)}});return i}function v(e,t){var i=[];for(var n in e)if(e.hasOwnProperty(n)){var a=n.replace("tts:","");a=a.replace("xml:","");a=r(a);e[a]=e[n];a!==n&&delete e[n]}if("extent"in e&&"origin"in e){var o=e.extent.split(/\s/);if(L(o[0])&&L(o[1])){i.push("width: "+o[0]+";");i.push("height: "+o[1]+";")}var s=e.origin.split(/\s/);if(L(s[0])&&L(s[1])){i.push("left: "+s[0]+";");i.push("top: "+s[1]+";")}}"display-align"in e&&i.push(X[e["display-align"]]);"writing-mode"in e&&i.push($[e["writing-mode"]]);if("style"in e){var l=y(e.style,t);i=i.concat(l)}"padding"in e&&i.push("padding:"+e.padding+";");"show-background"in e&&i.push("show-background:"+e["show-background"]+";");"id"in e&&i.push("regionID:"+e.id+";");return i}function b(e,t){if(e)for(var i=0;e.length>i;i++){var n=e[i];if(n["xml:id"]===t||n.id===t)return n}return null}function T(e,t){var i=[],n=b(B,e);if(n&&(n.hasOwnProperty("origin")||n.hasOwnProperty("tts:origin"))&&(n.hasOwnProperty("extent")||n.hasOwnProperty("tts:extent"))){i=v(Utils.clone(n),t);var a=s("left",i)&&s("top",i)&&s("height",i)&&s("width",i);a||(i=[])}return i}function E(){var e=[32,15];return N.tt.hasOwnProperty("ttp:cellResolution")?N.tt["ttp:cellResolution"].split(" ").map(parseFloat):e}function P(e,t,i){if(t&&i){for(var n,a=Array.prototype.slice.call(e.children),r=function(e){e.className.indexOf("p_spanPadding")<0&&(e.className=e.className+" p_spanPadding")},o=!0,s=0;a.length>s;s++){var l=a[s];if("SPAN"===l.tagName){if(o){l.style.paddingLeft=t;r(l);o=!1}n=l}else if("BR"===l.tagName){if(n){n.style.paddingRight=i;r(l)}o=!0}}if(!o&&n){n.style.paddingRight=i;r(l)}}}function C(e){e.textContent=e.textContent.replace(/\s+/g," ");e.textContent=e.textContent.replace(/^\s|\s$/g,"")}function I(e,t,i){var n=document.createElement("div");e.forEach(function(e){if(!e.hasOwnProperty("metadata"))if(e.hasOwnProperty("span")){var a=e.span.__children;if(a&&a.length>0){var r=document.createElement("span"),o=g(Utils.clone(e.span),t);r.style.cssText=o.join(" ");i&&Q?Utils.applyVendorStyles([r],"boxDecorationBreak","clone"):r.style.display="inline-block";r.style.paddingLeft||(r.style.paddingLeft="0.25em");r.style.paddingRight||(r.style.paddingRight="0.25em");var s=function(e,t,i){e.span&&e.span.__children&&e.span.__children.forEach(s);if(!a.hasOwnProperty("metadata"))if(e.hasOwnProperty("#text")){var o=document.createTextNode(e["#text"]);C(o);r.appendChild(o)}else if("br"in e){r.hasChildNodes()&&n.appendChild(r);var l=document.createElement("br");l.className="p_lineBreak";n.appendChild(l);if(i.length>t+1){var u=document.createElement("span");u.className=r.className;u.style.cssText=r.style.cssText;r=u}else r=null}};a.forEach(s);r&&n.appendChild(r)}}else if(e.hasOwnProperty("br")){var l=document.createElement("br");l.className="p_lineBreak";n.appendChild(l)}else if(e.hasOwnProperty("#text")){var u=document.createElement("span");u.textContent=e["#text"];i&&Q?Utils.applyVendorStyles([u],"boxDecorationBreak","clone"):u.style.display="inline-block";C(u);n.appendChild(u)}});return n}function S(e,t,i){var n=[],a=e.region,r=t.region,o=e.origin||e["tts:origin"],s=e.extent||e["tts:extent"];if(o&&s){var l=s.split(/\s/);if(L(l[0])&&L(l[1])){n.push("width: "+l[0]+";");n.push("height: "+l[1]+";")}var u=o.split(/\s/);if(L(u[0])&&L(u[1])){n.push("left: "+u[0]+";");n.push("top: "+u[1]+";")}}else a?n=T(a,i):r&&(n=T(r,i));return n}function k(e,t){var i=[];i=c(i,g(N.tt.body,t));i=c(i,g(N.tt.body.div,t));i=c(i,g(e,t));_(i,V);return i}function _(e,t){for(var i in t)t.hasOwnProperty(i)&&(s(i,e)||e.push(i+":"+t[i]))}function w(e){if(e.style.cssText.indexOf("background-color")<0)for(var t=e.getElementsByClassName("p_cueDirUniWrapper"),i=0;t.length>i;i++)if(t[i].children)for(var n=0;t[i].children.length>n;n++){var a=t[i].children[n];A(a)}}function A(e){if(e.children&&e.children.length>0)for(var t=0;e.children.length>t;t++)A(e.children[t]);else e.style.cssText.indexOf("background-color")<0&&(e.style.backgroundColor="black")}function L(e){return e.match(/(100|[0-9]{1,2})(.[0-9]+)?%/)}function x(e){var t,n;if(e){t=e.begin||e["tt:begin"];n=e.end||e["tt:end"]}return{begin:i(t),end:i(n)}}function O(e,t){return{begin:isNaN(t.begin)?e&&e.begin:t.begin,end:isNaN(t.end)?e&&e.end:t.end}}var M,D,N,R,B,U,F,H,W,G,V,j,q,z,Y,K,X,Q,$,J=3600,Z=60,et=360,tt=640;M={parse:e,applyLinePadding:P};t();return M}(),SubtitlesItem=function(){var e=function(e,t,i,n){var a=this;a.live=!1;a.href=e;a.protocol=t;a.supplier=i;a.dpw=n;a.override=!1;a.captionsList=null;a.kind=/^us_closed_captions/.test(i+"")?"closedCaptions":"subtitles";return a};e.prototype={loadSubtitles:function(e,t){var i=this,n=i.href;if(i.captionsList&&i.captionsList.length>0)e(n);else{var a=function(a){i.subtitlesLoaded(a)?e(n):t(n)};Utils.getXML(n,a,t,i)}},subtitlesLoaded:function(e){var t=this,i=!1;try{var n=TTMLParser.parse(e);if(n.length>0){t.captionsList=n;i=!0}}catch(a){}return i}};return e}(),LiveSubtitlesItem=function(){function e(e,t,i){for(var n=0;i.length>n;n++)if(e.indexOf("live/"+i[n]+"/")>-1){e=e.replace(/live\/([^\/]+)\/([^\/]+)\.isml\/dash\/([^-]+)-caption/,"live/$1_txt/$2_txt.isml/dash/$3_txt-caption");break}return e+t+".m4s"}function t(e,t,i){var n="captionsList";i&&(n+="2");e[n]||(e[n]=[]);for(var a=0;t.length>a;a++)e[n].push(t[a]);e[n]=Utils.stableSort(e[n],Utils.sortByStart)}function i(t){if(t.loadQueue.length>0){var a=t.loadQueue[0];if(!(t.loadedSegments.indexOf(a.index)<0&&t.baseUrl)){t.loadQueue.shift();i(t);return!1}var r=e(t.baseUrl,a.index,t.serviceIdsForReplace);t.loadedSegments.push(a.index);var o=0,s=function(e,o){var s=e.split(/<\?xml version=\"1.0\" encoding=\"UTF-8\"\?>/i)[1],l=new DOMParser;try{var u=l.parseFromString(s,"text/xml");if(n(t,a.start,u,o)){if(t.loadedCallback){t.loadedCallback(r);t.loadedCallback=null}}else t.errorCallback(r)}catch(d){t.errorCallback(r)}t.loadQueue.shift();i(t)},l=function(){o++>3?t.errorCallback(r):setTimeout(function(){Utils.getText(r,s,l,t)},400)};Utils.getText(r,s,l,t)
}return!0}function n(e,i,n,a){var o=!0;if(n)try{var s=TTMLParser.parse(n);if(s&&s.length>0){for(var l=0;s.length>l;l++){if(3600>s[l].start){s[l].start+=i-3.84;s[l].end+=i-3.84}s[l].start+=e.timeOffset;s[l].end+=e.timeOffset}t(e,s);e.enableDesnake&&r(e.captionsList)}}catch(u){}else o=!1;return o}function a(e,t){var i=!1;0===e.cueHTMLElement.textContent.indexOf(t.cueHTMLElement.textContent)&&e.cueHTMLElement.style.left===t.cueHTMLElement.style.left&&e.cueHTMLElement.style.top===t.cueHTMLElement.style.top&&e.cueHTMLElement.style.width===t.cueHTMLElement.style.width&&e.cueHTMLElement.style.height===t.cueHTMLElement.style.height&&(i=!0);return i}function r(e){for(var t=0;e.length>t;){for(var i=!1,n=e[t],r=t-1;r>=0;r--){var o=e[r];if(!(o.end>=n.start))break;if(a(n,o)){n.start=o.start;o.desnaked=!0;e.splice(r,1);i=!0}}i||t++}}function o(e){return e.slice(-10)}var s=function(e,t,i){var n=this;n.serviceIdsForReplace=[];i&&i.serviceIds&&(n.serviceIdsForReplace=(""+i.serviceIds).split(","));n.live=!0;n.loadedSegments=[];n.unloadedSegments=[];n.captionsList=null;n.off();n.enableDesnake=!1;n.hasHLSliveSubs=!1;n.baseUrl=null;var a=e.match(/.*\/([^\/]*)\.isml/);if(a&&a.length>0){if(t){n.hasHLSliveSubs=!0;var r=a[0].replace("hls","dash");n.baseUrl=r+"/dash/"+a[1]+"-caption1=64000-"}else n.baseUrl=a[0]+"/dash/"+a[1]+"-caption1=64000-";n.timeOffset=0;if(i&&i.serviceIdOffsets){var o=[];a=(""+i.serviceIdOffsets).split(",");for(var s=0;a.length>s;s++){var l=(""+a[s]).split(":");if(2==l.length){var u=parseFloat(l[1]);isNaN(u)||o.push({id:l[0],offset:u})}}for(s=0;o.length>s;s++)n.baseUrl.indexOf("live/"+o[s].id+"/")>-1&&(n.timeOffset=o[s].offset)}}return n};s.prototype={loadSubtitles:function(e,t){var n=this;n.loadedCallback=e;n.errorCallback=t;n.active=!0;for(var a=o(n.unloadedSegments);a.length>0;){var r=a.shift();if(!r)break;n.loadQueue.push(r);1==n.loadQueue.length&&i(n)}},onFragmentLoaded:function(e,t){var n=this,a=/-([0-9]*)\.m4s/g.exec(t.url);if(2===a.length){var r={index:+a[1],start:e.start};if(n.active){n.loadQueue.push(r);1==n.loadQueue.length&&i(n)}else n.unloadedSegments.push(r)}},loadHLSsubs:function(e){var t=this,n={index:Math.floor(e/3.84),start:e-e%3.84};if(t.active){t.loadQueue.push(n);1==t.loadQueue.length&&i(t)}else t.unloadedSegments.push(n)},off:function(){var e=this;e.active=!1;e.loadQueue=[];e.loadedCallback=null;e.errorCallback=null}};return s}(),MediaItem=function(){function e(e){return"programme"==e||"radioProgramme"==e||"audio"==e||"video"==e}function t(e){return"ident"==e}function i(e){return"ident"==e||"warning"==e}function n(e){return{startTime:{get:function(){return e._startTime}},changeEvent:{get:function(){return e.annotateEvent({type:"mediaItemChanged"})}},failSilent:{get:function(){return e.failureMode==r.SILENT||e.failureMode==r.FAST_SILENT}},failFast:{get:function(){return e.failureMode==r.FAST||e.failureMode==r.FAST_SILENT}}}}function a(e,t){t.kind=e.kind;t.identifier=e.identifier;t.isLive=!!e.live;t.duration=e.duration;t.simulcast=!!e.simulcast;t.versionID=e.versionID;t.serviceID=e.serviceID;t.type=t.type||e.type;t._ms6=e._ms6;var i=e.getSubtitlesOfKind("subtitles");t.captionsURL=i.length>0?i[0].href:null;t.captionsList=e.subtitleConnections;return t}var r=function(a,o,s,l,u,d,c,p,f,m,g,h,y){var v=this;v.identifier=a;v.versionID=o;v.serviceID=s;v.vpid=l;v.id=u;v.kind=d;v.live=c;v.simulcast=p;v.type="audio"==d||"radioProgramme"==d?"audio":"video";v.itemGroup=h;v._startTime=0;v.itemAlternate=y;v.isProgramme=e(d);v.isIdent=t(d);v.isIdentOrWarning=i(d);v.connections=f;v.originalConnections=Utils.clone(f);v.thumbManifestHref=g;v.mediationAttempted=!0;v.failureMode=v.isIdent?r.FAST:r.NORMAL;v.subtitleConnections=[];v.thumbnailConnections=[];v.failedConnections=[];m&&v.subtitleConnections.push(new SubtitlesItem(m,null));Utils.defineProperties(v,n(v));return v};r.NORMAL="normal";r.FAST="fast";r.FAST_SILENT="fastsilent";r.SILENT="silent";r.prototype={annotateEvent:function(e){var t=this;a(t,e);e.mediaItem=a(t,{});return e},addFailedConnection:function(e){var t=this;t.failedConnections.push(e);setTimeout(function(){t.failedConnections=t.failedConnections.filter(function(t){return t!=e})},12e4)},getSubtitlesOfKind:function(e){var t=this;if(t.subtitleConnections.length>0){var i=t.subtitleConnections.filter(function(t){return t.kind==e});return i.length>0?i:t.subtitleConnections}return[]},getRewindWindow:function(e){var t=this;if(!t.gotWindow&&"hls"==t.connections[0].format){t.gotWindow=!0;var i=t.connections[0].href,n=i.substring(0,i.lastIndexOf("/")+1),a=new XMLHttpRequest;a.open("GET",i,!0);a.onerror=function(){};a.onload=function(){t.bitratesMap={};for(var i,r,o="",s=(a.responseText+"").split("\n"),l=0;s.length-1>l;l++)if(-1!=s[l].indexOf("#EXT-X-STREAM-INF:")){o=decodeURIComponent(s[l+1].trim());if(-1!=s[l].indexOf("BANDWIDTH=")&&-1!=s[l].indexOf("RESOLUTION=")){i=s[l].match("RESOLUTION=([0-9]*)")[1];r=Math.round(parseInt(s[l].match("BANDWIDTH=([0-9]*)")[1])/1e3);t.bitratesMap[i]=r}}if(""!==o){var u=new XMLHttpRequest;0!==o.indexOf("http")&&(o=n+o);u.open("GET",o,!0);u.onload=function(){s=(u.responseText+"").split("\n");for(var i=0,n=0;s.length-1>n;n++){var a=s[n],r=a.split("#EXT-X-PROGRAM-DATE-TIME:")[1];r&&(i||(i=Utils.parseISODate(r.trim())))}if(i){i=i.valueOf();isNaN(i)&&(i=0);t._startTime=i/1e3;e()}};u.send(null)}};a.send(null)}},startLiveHLSsubs:function(e){var t=this;if("hls"==t.connections[0].format){var i=t.connections[0].href,n=new XMLHttpRequest;n.open("GET",i,!0);n.onerror=function(){};n.onload=function(){var i=(n.responseText+"").split("\n"),a=i[3];t.liveSubsItem=new LiveSubtitlesItem(a,!0,e.config.subtitlesWorkaround);t.subtitleConnections.push(t.liveSubsItem);e.ui.Subtitles.considerHLSdelay=!0;e.ui.Subtitles.load();e.ui.updateLayout()};n.send(null)}}};return r}(),Playlist=function(){function e(){return{hasAds:{get:function(){for(var e=0;this.items.length>e;e++)if("advert"==this.items[e].kind)return!0;return!1}},mediaType:{get:function(){for(var e=0;this.items.length>e;e++)if(this.items[e].isProgramme)return this.items[e].type;return"video"}},firstProgramme:{get:function(){for(var e=0;this.items.length>e;e++)if(this.items[e].isProgramme)return e;return 0}}}}function t(e,t,i,n){if(e)for(var a=0;e.length>a;a++)if(e[a].getAttribute(t)==i)return n?e[a].getAttribute(n):e[a]}function i(e,t,i,n){var a=e.getElementsByTagName(t);return a.length?i?a[0].getAttribute(i):a[0].textContent||a[0].nodeValue:n||""}function n(e,t,i){var n=e.getAttribute(t);return n?n.toLowerCase():i}function a(e,t,i){var a=n(e,t,i);return isNaN(a)?0:a}function r(e,r){if(r.getElementsByTagName("parsererror").length)throw{message:"invalid/incomplete playlist xml"};var s=r.getElementsByTagName("link"),l=r.getElementsByTagName("item");e.id=i(r,"id");e.title=i(r,"title");e.summary=i(r,"summary");e.updated=i(r,"updated");e.noItemsReason=i(r,"noItems","reason");e.guidance=i(r,"guidance");e.warning=i(r,"warning");e.posterImg=t(s,"rel","holding","href");e.posterRecipe=t(s,"rel","holdingrecipe","href");e.alternateHref=t(s,"rel","alternate","href");if("embed"===i(r,"right","name")){var u=i(r,"right");e.embedRights=u;e.embedRight="true"==u||"allowed"==u}for(var d=r.getElementsByTagName("relatedLink"),c=0;d.length>c;c++){var p=d[c],f=i(p,"summary"),m=i(p,"title",!1,f),g=t(s,"rel","alternate","href");if(m&&g){var h=p.getElementsByTagName("link"),y=t(h,"rel","thumb"),v=y?{href:y.getAttribute("href"),width:y.getAttribute("width"),height:y.getAttribute("height")}:null;e.relatedLinks.push({title:m,summary:f,href:g,thumb:v})}}var b=!1;for(c=0;l.length>c;c++){var T=l[c],E=null,P=i(T,"id"),C=T.getAttribute("kind"),I="true"==T.getAttribute("live"),S="true"==T.getAttribute("simulcast"),k=T.getAttribute("group"),_=i(T,"alternate","id"),w="",A=[],L="",x=i(T,"mediator","identifier");if(x){E=new MediaItem(x,null,null,P,P,C,I,S,[],null,null,k,_);E.mediationAttempted=!1}else{for(var O=T.getElementsByTagName("media"),M=0;O.length>M;M++){var D=O[M];w=D.getAttribute("kind");for(var N=D.getElementsByTagName("connection"),R=0;N.length>R;R++){var B=N[R];if("audio"==w||"video"==w){"audio"==w&&"programme"==C&&(C="radioProgramme");g=B.getAttribute("href");A.push({href:g,protocol:n(B,"protocol"),mimetype:n(D,"type"),encoding:n(D,"encoding"),format:n(B,"transferFormat","plain"),supplier:n(B,"supplier"),bitrate:a(D,"bitrate")})}else"captions"==w&&(L=B.getAttribute("href"))}}if(A.length){E=new MediaItem("",null,null,null,P,C,I,S,A,L,null,k,_);E.flashAvailable=LoadBalancing.getFlashAvailable(A);E.flashAvailableUnlocked=LoadBalancing.getFlashAvailable(A,!0);LoadBalancing.validateConnections(E);E.fallbackPlaylist=e.url}}if(E){e.addItem(E);if(E.isProgramme&&!b){b=!0;e.isRadio="audio"==E.type;e.groupId=E.itemGroup;e.identifier=T.getAttribute("identifier")||"";var U=T.getElementsByTagName("masterbrand");if(U.length){U=U[0];e.masterbrand={id:U.getAttribute("id"),href:U.getAttribute("href"),title:U.textContent||U.nodeValue}}}}}o(e)}function o(e){for(var t=e.items,i=[],n={},a=0;t.length>a;a++){var r=t[a].itemGroup;if(r&&""!==r){if(!n[r]){n[r]=[];i.push(r)}n[r].push(a)}}var o=[];for(a=0;i.length>a;a++){r=i[a];var s=n[r];if(s.length>1)for(var l=0;s.length>l;l++){var u=t[s[l]];"default"!=u.itemAlternate&&o.push(s[l])}}o.sort();for(a=o.length-1;a>=0;a--)e.items.splice(o[a],1)}function s(e){e.id="";e.title="";e.summary="";e.updated="";e.posterImg="";e.noItemsReason="";e.guidance="";e.warning="";e.groupId="";e.identifier="";e.isRadio=!1;e.masterbrand={};e.relatedLinks=[];e.items=[]}function l(e,t){""===e.guidance&&t.forceGuidance&&(e.guidance=t.forceGuidance);t.overrideHoldingImage&&(e.posterRecipe=t.overrideHoldingImage);t.overrideCtaDuration&&(e.programmeDuration=t.overrideCtaDuration)}function u(e){for(var t=0;e.items.length>t;t++){var i=e.items[t];if(i.isProgramme){i.duration&&!i.live&&(e.programmeDuration=Utils.secondsToTime(i.duration));break}}}function d(e){e&&this.push({href:e.url,format:e.format,protocol:"http",supplier:e.supplier})}function c(e){return e.versionID&&(e.versionID+"").match(/^[a-z0-9_]+$/)?e.versionID:e.serviceID?e.serviceID:e.vpid&&(e.vpid+"").match(/^[a-z0-9_]+$/)?e.vpid:null}function p(e,t){return e&&t&&t.indexOf(e)>=0?!0:!1}function f(e,t,i){e.title=t.title||"";e.guidance=t.guidance||"";e.warning=t.warning||"";e.posterImg=e.holdingImageURL=t.holdingImageURL||"";e.summary=t.summary||"";e.liveRewind=t.liveRewind!==!1;e.embedRights=t.embedRights||"";e.embedRight="true"==e.embedRights||"allowed"==e.embedRights;t.masterBrandName&&(e.masterbrand={title:t.masterBrandName});if(t.items)for(var n=0;t.items.length>n;n++){var a;a=t.items[n].createdItem?t.items[n].createdItem:e.createMediaItem(t,n,i);if(a){a.simulcast&&(t.simulcast=!0);var r="0";if(i.statsObject){i.statsObject.parentPID&&(r=i.statsObject.parentPID);i.statsObject.episodePID&&(r=i.statsObject.episodePID);i.statsObject.clipPID&&(r=i.statsObject.clipPID)}var o=r;a.live&&"0"==o&&(o=a.identifier);a.itemGroup=o;e.groupId=o;e.addItem(a)}}e.queuedPlaylist=t.queuedPlaylist;e.queuedOptions=t.queuedOptions;0===e.items.length&&(e.noItemsReason=t.noItemsReason?t.noItemsReason:"EmptyPlaylistObject"+(e.filteredItem?"Filtered":""))}function m(t,i,n,a,o){var d=this;Utils.defineProperties(d,e(d));d.suppressItemKind=o.suppressItemKind;d.programmeDuration="";s(d);d.filterIdentAndWarning=o.startTime>0;if(a){f(this,a,o);u(d);l(d,o);Utils.asyncDelay(i)}else{d.url=t;var c=function(e,i){var a=i?SMPError.ERROR_PARSING_PLAYLIST:SMPError.ERROR_LOADING_PLAYLIST,r=SMPError.getError(a);r.extra=t;n(r)},p=function(e){try{r(d,e)}catch(n){c(t,!0);return}l(d,o);u(d);i()};Utils.asyncDelay(function(){Utils.getXML(t,p,c,d,!1,o.setWithCredentials)})}return d}m.prototype={getNextItem:function(e){var t=this;if(t.items)for(var i=e+1;t.items.length>i;i++)if(t.items[i]&&"advert"!==t.items[i].kind)return t.items[i];return null},addItem:function(e){var t=this,i=!1;if("advert"!=e.kind&&"ad"!=e.kind){i=t.suppressItemKind.indexOf(e.kind)>-1||t.filterIdentAndWarning&&("ident"==e.kind||"warning"==e.kind);i=i||e.mediationAttempted===!1&&("null"==e.identifier||"undefined"==e.identifier)}i?t.filteredItem=!0:t.items.push(e)},createMediaItem:function(e,t,i){var n=e.items[t],a=e.simulcast,r=c(n);if(n.serviceID&&r===n.serviceID){n.live=!0;a!==!1&&(a=!0)}if(r){var o=new MediaItem(r+"",n.versionID,n.serviceID,n.vpid,n.id,n.kind||"programme",n.live,a,[],null,null);o.preferProtocol=p(r,i.httpsVpids)?"https":null;o.mediationAttempted=!1;o.samltoken=n.samltoken;o.ceiling=n.ceiling;o.duration=n.duration;n.failureMode&&(o.failureMode=n.failureMode);return o}var s=[];n.href&&(n.href.forEach?n.href.forEach(d,s):s.push({href:n.href,format:"plain",protocol:"http"}));if(s.length>0||"advert"==n.kind||"ad"==n.kind){o=new MediaItem(null,null,null,null,n.id,n.kind||"programme",n.live,a,s,n.captionsUrl,n.thumbManifestUrl);o.duration=n.duration;n.failureMode&&(o.failureMode=n.failureMode);"ad"==n.kind&&(o.mediationAttempted=!1);LoadBalancing.validateConnections(o);return o}}};return m}(),IStats=function(){function e(e){return function(){var t=6;e.playlistTime+=10;e.playingReportCounter++;(t>=e.playingReportCounter||e.playingReportCounter%t===0)&&e.updateStats(g)}}function t(e){return"hls"==e||"dash"==e?e:"0"}function i(e){return e.isProgramme?"e":e.isIdent?"i":"0"}function n(e){return{blockUnwanted:!0,info:function(t){e.currentBitrate=t.currentBitsPerSecond},canplay:function(t){if(t._.shouldReport&&!e.hasPlayed){e.hasPlayed=!0;e.connectionCounter++;e.updateStats(b);e.updateStats(p);e.playlistTime=0;e.playingReportCounter=0}},play:function(t){e.hasPlayed&&t._.shouldReport&&e.updateStats(y)},playing:function(t){if(t._.shouldReport){e.startPlayingTimer(t);if(e.dispatchResume){e.updateStats(y);e.dispatchResume=!1}}},waiting:function(t){t._.shouldReport&&e.playingTimerRunning&&(e.dispatchResume=!0)},ended:function(){e.reset()},playlistLoaded:function(){e.reset();e.uuid=Utils.UUID()},pause:function(t){var i=e.player,n=i&&i.mediaPlayer.ended?!0:!1;e.dispatchResume=!1;if(t._.shouldReport&&!n){e.stopPlayingTimer(t);e.updateStats(h)}},timeupdate:function(t){e.seekFromTime=t._.currentTime},seeking:function(t){t._.shouldReport&&e.stopPlayingTimer(t)},seeked:function(t){e.updateStats(v);if(!t._.paused){t._.dispatch({type:E[b]});e.startPlayingTimer(t)}},playlistEnded:function(t){e.stopPlayingTimer(t);e.updateStats(f)},playerDisconnected:function(t){t._.dispatch({type:E[h]});e.reset()},playerDestroying:function(t){t._.dispatch({type:E[h]});e.reset()},error:function(t){if(4237!=t.code){e.reset();e.updateStats(m,t)}},configUpdated:function(){e.updateConfig()}}}function a(e,n){if(this.baseTemplate){var a=this.player,r=a.mediaItem||T,o=a.mediaConnection||{},s="",l=a.playlist||T;this.eventCounter++;E[e]&&a.dispatch({type:E[e],mediaItem:r,errorItem:n});P[e]&&(s=P[e]);var u=l.mediaType.charAt(0),d=this.baseTemplate.replace("{t}",e).replace("{x0s}",this.uuid).replace("{x0e}",this.eventCounter).replace("{extendedTemplate}",s).replace("{xb}",this.currentBitrate||"0").replace("{xb1}",o.bitrate?o.bitrate:"0").replace("{xc}",o.supplier?o.supplier:"0").replace("{xcc}",this.connectionCounter).replace("{i}",l.groupId).replace("{a}",u||"0").replace("{xfo}",o.encoding?o.encoding:"0").replace("{xl}",r.live?"1":"0").replace("{xmt}",i(r)).replace("{xst}",t(o.format)).replace("{xvp}",r.identifier).replace("{xz1}",a.isFullScreen?"f":"e").replace("{xta}",Math.ceil(a.time)).replace("{xtd}",1/0===a.duration?"0":Math.ceil(a.duration)).replace("{xtp}",Math.floor(this.playlistTime)).replace("{xmc}",a.consideredMobileConnection?"3g":"wifi").replace("{xtc}",Math.ceil(a.time)).replace("{xtf}",this.seekFromTime?Math.ceil(this.seekFromTime):"0");n&&(d=d.replace("{xe}",n.description).replace("{xen}",n.code).replace("{xec}",n.responsibility).replace("{xet}",n.severity));if(a.config.enableStatsReporting){this.img=new Image;this.img.src=d}}}var r="//stats.bbc.co.uk",o="/o.gif?~RS~s~RS~{siteId}~RS~t~RS~{t}~RS~i~RS~{i}~RS~p~RS~0~RS~a~RS~{a}~RS~u~RS~0~RS~r~RS~0~RS~q~RS~&x0m=0.28&x0s={x0s}&x0e={x0e}&xv1=1.8.0.SMPHTML5{extendedTemplate}~RS~z~RS~0~RS~",s="&xb={xb}&xc={xc}&xcc={xcc}&xcn=0&xct=HTMLEMP&xcs=1&xfo={xfo}&xl={xl}&xmt={xmt}&xst={xst}&xs1=0&xvp={xvp}&xvt=0&xz1={xz1}",l="&xvp={xvp}&xpt=0&xj=0&xp=0",u=s+"&xba=0&xbc=0&xby=0&xbd=0&xfc=0&xta={xta}&xtd={xtd}&xtp={xtp}&xtc={xtc}&xto=0&xmc={xmc}",d=u+"&xtf={xtf}",c=u+"&xe={xe}&xen={xen}&xec={xec}&xet={xet}",p="R_EMP_C_Open",f="emSt_End",m="R_EMP_P_Fatal",g="R_EMP_A_Playing",h="R_EMP_A_Pause",y="R_EMP_A_Resume",v="R_EMP_A_Scrub",b="emSt_Play",T={mediaType:"-",groupId:"unknown",identifier:"unknown"},E={};E[b]="SonarPlayEvent";E[p]="SonarConnectionEvent";E[h]="SonarPauseEvent";E[y]="SonarResumeEvent";E[v]="SonarSeekEvent";E[f]="SonarEndEvent";E[m]="SonarErrorEvent";var P={};P[b]=l;P[p]=s;P[h]=u;P[g]=u;P[y]=u;P[v]=d;P[f]=u;P[m]=c;var C=function(e){var t=this;this.player=e;this.uuid="unknown";this.reset();this.eventCallbacks=n(this);this.eventCounter=0;this.hasPlayed=!1;return t},I=null;C.prototype={playlistTime:0,updateStats:a,startPlayingTimer:function(){clearInterval(I);this.playingTimerRunning=!0;I=setInterval(e(this),1e4)},stopPlayingTimer:function(){this.playingTimerRunning=!1;clearInterval(I)},reset:function(){this.hasPlayed=!1;this.stopPlayingTimer();this.playingReportCounter=0;this.connectionCounter=0;this.seekFromTime=0;this.currentBitrate=0;this.dispatchResume=!1},updateConfig:function(){var e=this,t=e.player.config;e.reset();var i=t.customIStatsURL?t.customIStatsURL:r;e.baseTemplate=(i+o).replace("{siteId}",t.siteID?encodeURIComponent(t.siteID):"iPlayer")}};return C}(),INFO_INTERVAL=1e3,QOS=function(){function e(e){e&&e.lastInfoTime<Utils.now()-1e3*e.infoTimeMultiplier&&(e.infoEventObject&&e.infoEventObject.averageBufferLength!=e.lastBufferLength||e.lastInfoCurrentTime!=e.player.time.toFixed(1)||e.lastInfoBitrate!=t(e))&&i(e)}function t(e,t){var i="-";if(e.infoAdapter){var n,a=e.infoAdapter.bitrateList;n=t?e.infoAdapter.bitrateIndex:e.infoAdapter.downloadingBitrateIndex;a[n]&&(i=a[n])}return i}function i(e){if(e.infoEventObject&&e.infoAdapter){var t=e.infoAdapter.bitrateList;if(t.length){var i=[];i.push(e.getMediaType());i.push(t.join("~"));i.push(a(e).join("~"));i.push(r(e).join("~")||"-");i.push(e.infoEventObject.droppedFrames);i.push(e.infoEventObject.droppedFrames);i.push(e.timeSpentTotal.join("~"));i.push(e.droppedFramesTotal.join("~")||"-");var o=e.startupTime?e.startupTime.toFixed(0):0;e.lastBufferLength=e.infoEventObject.averageBufferLength;i.push(o);e.lastInfoCurrentTime=e.player.time.toFixed(1);i.push(n(e).join("~"));e.lastInfoTime=Utils.now();e.infoTimeMultiplier=60;var s=i.join("/");RDotReporting.trackQOSInfo(s,"baa")}}}function n(e){for(var t=[],i=Math.max(0,e.bitrateChanges.length-5);e.bitrateChanges.length>i;i++)t.push(e.bitrateChanges[i].join(","));return t}function a(e){if(!e.infoAdapter)return[];for(var t=e.infoAdapter.bitrateList,i=[],n=0;t.length>n;n++){var a=e.timeSpent[n]||0;i.push(a);e.timeSpentTotal[n]?e.timeSpentTotal[n]+=a:e.timeSpentTotal[n]=a}e.timeSpent=[];return i}function r(e){for(var t=[],i=0;e.droppedFramesArray.length>i;i++){t.push(e.droppedFramesArray[i]||0);e.droppedFramesTotal[i]?e.droppedFramesTotal[i]+=e.droppedFramesArray[i]||0:e.droppedFramesTotal[i]=e.droppedFramesArray[i]||0}e.droppedFramesArray=[];return t}function o(e){e.infoAdapter=null;e.currentFormat=null;e.timeSpent=[];e.timeSpentTotal=[];e.bitrateChanges=[];e.infoEventObject=null;e.lastInfoTime=-999999}function s(t){return{blockUnwanted:!0,error:function(e){var i=t.player.mediaItem,n={};e.extra&&"string"==typeof e.extra&&(n.bbc_smp_detail=e.extra);i&&i._ms6&&(n.bbc_smp_ms6="1");t.player.trackAction("error_"+e.code,"error",n);RDotReporting.trackError(e,i)},info:function(e){var i=t.infoAdapter&&t.infoAdapter.bitrateIndex||0,n=t.infoEventObject?t.infoEventObject.droppedFrames:0;t.timeSpent[i]?t.timeSpent[i]+=INFO_INTERVAL/1e3:t.timeSpent[i]=INFO_INTERVAL/1e3;e.droppedFrames>n&&(t.droppedFramesArray[i]?t.droppedFramesArray[i]+=e.droppedFrames-n:t.droppedFramesArray[i]=e.droppedFrames-n);t.infoEventObject=e},mediaItemChanged:function(){o(t)},changingsrc:function(e){t.currentSupplier!==e.supplier&&(t.currentSupplier=e.supplier);if(t.currentFormat!==e.format){o(t);t.currentFormat=e.format;t.infoAdapter="hls"===t.currentFormat?new p(t):"dash"===t.currentFormat?new c(t):new d(t)}},timeupdate:function(){e(t);if(!t.sentPS)if(void 0===t.firstPSTime)t.firstPSTime=t.player.time;else if(t.firstPSTime!=t.player.time){RDotReporting.trackPlaySuccess();t.sentPS=!0;t.infoAdapter&&t.infoAdapter._bitrateList&&t.infoAdapter._bitrateList()}},bitrateChanged:function(e){e.streamType==t.player.elType&&t.bitrateChanges.push([e.newIndex,t.player.time.toFixed(1)])},waiting:function(){clearInterval(t.updateTimer);clearInterval(t.sendInfoTimer);t.sendInfoTimer=setInterval(e,1e3,t)},tryingToPlay:function(){t.startupStart=Utils.now();t.startupTime=null;t.sentPS=!1;t.firstPTime=void 0;RDotReporting.trackPlayIntent()},ended:function(){t.playing=!1;clearInterval(t.updateTimer);i(t);t.infoTimeMultiplier=10},pause:function(){t.playing=!1;clearInterval(t.updateTimer);clearInterval(t.sendInfoTimer);t.sendInfoTimer=setInterval(e,1e3,t)},canplay:function(){if(!t.startupTime){t.startupTime=Utils.now()-t.startupStart;t.timeSpentBufferingStart=0;t.lastInfoTime=Utils.now()}},playlistLoading:function(){i(t);t.resetProperties()},playing:function(){clearInterval(t.sendInfoTimer);clearInterval(t.updateTimer);t.player.mediaItem&&!t.player.mediaItem.useFlash&&(t.updateTimer=setInterval(function(){l(t)},INFO_INTERVAL));t.playing=!0}}}function l(e){var t=e.player,i=t.mediaPlayer,n=e.infoAdapter;if(!(2>=i.readyState||i.paused)){var a;if(i.webkitDecodedFrameCount){a=i.webkitDecodedFrameCount;e.droppedFrames=i.webkitDroppedFrameCount;e.decodedBytes=i.webkitAudioDecodedByteCount+(i.webkitVideoDecodedByteCount?i.webkitVideoDecodedByteCount:0)}else if(i.mozParsedFrames){a=i.mozParsedFrames;e.droppedFrames=i.mozDecodedFrames-i.mozPresentedFrames}e.currentFPS=a-e.decodedFrames;(0>e.currentFPS||e.currentFPS>100)&&(e.currentFPS=0);e.maxFPS=Math.max(e.currentFPS,e.maxFPS);e.decodedFrames=a;e.averageDroppedFrames=(e.averageDroppedFrames*e.averagesCounter+e.droppedFrames)/(e.averagesCounter+1);if(n){e.averageBufferLength=(e.averageBufferLength*e.averagesCounter+n.bufferLength)/(e.averagesCounter+1);t.dispatch({audioBufferLength:n.audioBufferLength,averageBufferLength:e.averageBufferLength,averageDroppedFPS:e.averageDroppedFrames,averageMaxBandwidth:null,bufferLength:n.bufferLength,currentBitsPerSecond:n.currentBitsPerSecond,currentFPS:e.currentFPS,decodedBytes:e.decodedBytes,decodedFrames:e.decodedFrames,droppedFrames:e.droppedFrames,maxFPS:e.maxFPS,maxBandwidth:null,type:"info",videoBufferLength:n.videoBufferLength})}}}function u(e){var t=this;t.eventCallbacks=s(t);t.player=e;t.reportError=t.eventCallbacks.error;t.resetProperties();return t}var d=function(){function e(e){this.qos=e}var t=function(){};e.prototype={_audioBufferLength:t,_bitrateIndex:t,_downloadingBitrateIndex:t,_bitrateList:function(){return[]},_bufferLength:function(){var e=this.qos.player,t=0;e.mediaPlayer&&(t=e.buffered-e.mediaPlayer.currentTime);return Math.max(0,isNaN(t)?0:t)},_currentBitsPerSecond:t,_videoBufferLength:t};Utils.defineProperties(e.prototype,{audioBufferLength:{get:function(){return this._audioBufferLength()}},bitrateIndex:{get:function(){return this._bitrateIndex()}},downloadingBitrateIndex:{get:function(){return this._downloadingBitrateIndex()}},bitrateList:{get:function(){return this._bitrateListCached||this._bitrateList()}},bufferLength:{get:function(){return this._bufferLength()}},currentBitsPerSecond:{get:function(){return this._currentBitsPerSecond()}},videoBufferLength:{get:function(){return this._videoBufferLength()}}});return e}(),c=function(){function e(e){this.qos=e}e.prototype=Object.create(d.prototype);e.prototype._audioBufferLength=function(){return this.qos.player.dashEvents.bufferLevel.audio};e.prototype._downloadingBitrateIndex=function(){if(this.qos.player.dashEvents.dashPlayer){try{var e=this.qos.player.dashEvents.dashPlayer.getQualityFor(this.qos.player.elType)}catch(t){}return e}};e.prototype._bitrateIndex=function(){return this.qos.player.dashEvents.dashPlayer?this.qos.player.dashEvents.currentBitrateIndex:void 0};e.prototype._bitrateList=function(){if(!this.qos.player.dashEvents.dashPlayer)return[];var e=this.qos.player.elType;try{var t=this.qos.player.dashEvents.dashPlayer.getBitrateInfoListFor(e)}catch(i){return[]}var n=0;"video"===e&&(n=this.qos.player.consideredMobileConnection?48:96);var a=[];if(t)for(var r=0;t.length>r;r++)a.push((t[r].bitrate/1e3+n).toFixed(0));this._bitrateListCached=a;return a};e.prototype._bufferLength=function(){return Math.min(this.audioBufferLength,this.videoBufferLength||Number.POSITIVE_INFINITY)};e.prototype._currentBitsPerSecond=function(){return this.qos.player.dashEvents.currentBitsPerSecond};e.prototype._videoBufferLength=function(){return this.qos.player.dashEvents.bufferLevel.video};return e}(),p=function(){function e(e){this.qos=e}var t={mf_:{192:86,256:156,384:281,512:437,704:827,960:1604}};e.prototype=Object.create(d.prototype);e.prototype._bitrateIndex=function(){var e,t,i=this.bitrateMap,n=this.qos.player,a=n.mediaPlayer.videoWidth,r=this.bitrateList,o=this.qos.bitrateChanges;if(i){if(i.hasOwnProperty(a))for(var s=0;this.bitrateList.length>s;s++)if(r[s]==i[a]){e=r[s];t=s;break}if(!o.length||o[o.length-1][0]!==t){n.dispatch({type:"bitrateChanged",streamType:this.qos.player.elType,previousBitrate:o.length?r[o[o.length-1][0]]:0,newBitrate:e,newIndex:t});n.dispatch({type:"loadedmetadata",bitrate:e,cdn:this.qos.currentSupplier})}return t}};e.prototype._currentBitsPerSecond=function(){var e=this.bitrateList,t=this.qos.bitrateChanges;return t.length>0?e[t[t.length-1][0]]:void 0};e.prototype._bitrateList=function(){var e=this.bitrateMap,t=[];if(e){for(var i in e)e.hasOwnProperty(i)&&t.push(e[i]);return t}};Utils.defineProperties(e.prototype,{bitrateMap:{get:function(){var e=this.qos.player.mediaItem;if(e&&e.bitratesMap)return e.bitratesMap;for(var i in t)if(-1!==(this.qos.currentSupplier+"").indexOf(i))return t[i];return{}}}});return e}();u.prototype={buffering:function(){var e=this;if(0===e.timeSpentBufferingStart){e.player.dispatch({type:"SonarBufferEvent"});e.timeSpentBufferingStart=Utils.now()}},endBuffering:function(){var e=this;if(0!==e.timeSpentBufferingStart&&e.startupTime){var t=Utils.now()-e.timeSpentBufferingStart;e.timeSpentTotalBuffering+=t/1e3;e.timeSpentBufferingStart=0;e.bufferingEvents++}},resetProperties:function(){var e=this;e.currentFPS=0;e.maxFPS=0;e.decodedFrames=0;e.droppedFrames=0;e.decodedBytes=0;e.timeSpent=[];e.timeSpentTotal=[];e.timeSpentTotalBuffering=0;e.timeSpentBufferingStart=0;e.droppedFramesArray=[];e.droppedFramesTotal=[];e.infoEventObject=null;e.bufferingEvents=0;e.lastInfoTime=-999999;e.infoTimeMultiplier=10;e.bitrateChanges=[];e.averageBufferLength=0;e.averageDroppedFrames=0;e.averagesCounter=0;e.playing=!1},getMediaType:function(){var e=this,t=e.player,i="od";t.mediaItem&&(t.isLive?i=t.mediaItem.simulcast?"simulcast":"live":"programme"!=t.mediaItem.kind&&"radioProgramme"!=t.mediaItem.kind&&(i=t.mediaItem.kind||"unknown"));return t.elType+"-"+i},getInfoData:function(){var e=this,i=[],n=t(e);e.lastInfoBitrate=n;i.push(n);i.push(t(e,!0));i.push(e.bufferingEvents);i.push(e.timeSpentTotalBuffering.toFixed(1));var a=e.averageBufferLength?e.averageBufferLength.toFixed(1):"-";i.push(a);var r=e.player.timeHelper,o="-";isNaN(r.time)||(o=r.time.toFixed(1));i.push(o);var s="-";r.latestSeek?s=r.latestSeek.toFixed(1):isNaN(r.duration)||(s=r.duration);i.push(s);return i}};return u}(),DebugConsole=function(){function e(e){if((e.target==V.mediaContainer||e.target==V.mediaPlayer)&&e.changedTouches){var t=e.changedTouches[0].pageX/window.innerWidth,i=e.changedTouches[0].pageY/window.innerHeight;.25>t&&(G|=1);t>.75&&(G|=2);.25>i&&(G|=4);i>.66&&(G|=8)}}function t(e){if(e||"block"==A.style.display){w.textContent=w.title=V.build;L.textContent=L.title=E();x.textContent=x.title=_?"Error: "+_.code+(_.extra?", "+_.extra:""):"";for(var t=A.getElementsByTagName("li"),i=0;t.length>i;i++)t[i].style.display=""===t[i].textContent?"none":""}}function i(e){t(!0);A.style.display="block";var i=Utils.getOffsets(V.mediaContainer),n=i.left+i.width,a=i.top+i.height,r="touchstart"==e.type?e.targetTouches[0].pageX:e.pageX,o="touchstart"==e.type?e.targetTouches[0].pageY:e.pageY,s=a-o>Utils.getOffset(A,"height"),l=n-r>Utils.getOffset(A,"width");A.style.left=l?r+"px":"auto";A.style.right=l?"auto":"0";A.style.top=s?o+"px":"auto";A.style.bottom=s?"auto":"0"}function n(e){("keydown"!==e.type||e.keyCode===KEY_ESCAPE)&&a()}function a(){document.documentElement.removeEventListener("click",n);document.documentElement.removeEventListener("keydown",n);A.style.display="none"}function r(){A=document.createElement("ul");A.style.display="none";A.className="p_contextMenu";w=o(v);w.textContent=w.title=V.build;L=o(T);x=o(b);M=o(m);O=o(p);H=o(d);V.mediaContainer.appendChild(A);Utils.multiAddEventListener(document.documentElement,"click keydown",n,!0)}function o(e){var t=document.createElement("li");A.appendChild(t);var i=document.createElement("a");i.className="p_contextMenuItem";e&&i.addEventListener("click",e);t.appendChild(i);return i}function s(){N=document.createElement("div");N.className="p_debugConsoleLog";var e=document.getElementById("mediaContainer");e.appendChild(N);F=U=document.createElement("ul");F.className="p_consoleLogList";F.id="p_consoleList";N.appendChild(F);U.addEventListener("scroll",c);U.scrollTop=U.scrollHeight}function l(){D=!0;N.style.display="block"}function u(){N.style.display="none";document.documentElement.removeEventListener("scroll",c)}function d(e){N||s();if(D){u();D=!1}else{l();a()}e.preventDefault()}function c(){W=U.scrollTop;R=B>W}function p(e){var t=V.dashEvents;t.dashJsDebug=!t.dashJsDebug;O.textContent="Dash logging "+(t.dashJsDebug?String.fromCharCode(10003):"");e.preventDefault();a()}function f(e,t,i){e.push(t+"="+i+"\n")}function m(e){var t,i=[],n="smp_debugcollector_"+(""+Utils.now()).split(".")[0]+".log";try{f(i,"v","aaa");f(i,"ua",navigator.userAgent);f(i,"cts",Utils.now());f(i,"si",E());f(i,"cn",V.config.counterName);f(i,"eh",j.join("|"));f(i,"pr",y(V.mediaPlayer.played).join("|"));f(i,"br",y(V.mediaPlayer.buffered).join("|"));f(i,"vht",g("video").join("\n"));f(i,"aht",g("audio").join("\n"))}catch(r){i.push("ERR_EXC_DEBUG_GEN");i.push(r);i.push(r.message)}t=new Blob(i,{type:"text/plain"});if(window.navigator&&window.navigator.msSaveBlob){window.navigator.msSaveBlob(t,n);e.preventDefault()}else{e.target.href=window.URL.createObjectURL(t);e.target.download=n}a()}function g(e){var t=V.dashEvents.getHttpRequests(e);return t.map(function(e){return[e.url,e.responsecode,e.responseHeaders,h(e).join("\n"),""].join("\n")})}function h(e){return e.trace.map(function(e){return[e.s.getTime(),e.d,e.b.join("~")].join("|")})}function y(e){var t=[];if(V&&V.mediaPlayer)for(var i=0;e.length>i;i++)t.push(e.start(i).toFixed(2)+"-"+e.end(i).toFixed(2));return t}function v(e){console.log(V.mediaConnection);console.log(V.mediaItem);console.log(V.playlist);console.log(V.config);console.log(V.ui.config);console.log(V.ui.markerData);console.log(navigator.userAgent);e.preventDefault();a()}function b(e){var t="Error code : "+_.code+"\nSeverity : "+_.severity+"\nDescription : "+_.description+"\nResponsibility : "+_.responsibility+"\nDetail : "+_.detail;console.log(t);e.preventDefault();a()}function T(e){console.log(L.textContent);e.preventDefault();a()}function E(){var e=V.mediaItem&&V.mediaItem.identifier?V.mediaItem.identifier:"unknown",t="",i=V.mediaConnection;if(i){var n=I||"unknown bitrate";"flac"==S&&(n="lossless");var a=k||(i.format?i.format:"unknown format"),r=i.supplier?i.supplier:"unknown cdn";"video"==V.elType&&(t=" | "+(V.mediaPlayer&&V.mediaPlayer.videoWidth&&V.mediaPlayer.videoHeight?V.mediaPlayer.videoWidth+"x"+V.mediaPlayer.videoHeight:"unknown dimensions"));e="unknown"!=e?" | "+e:"";
return n+" | "+a+" ("+r+")"+e+t}return e}function P(e){e.targetTouches.length>2&&i(e)}function C(e){var t=!V.swf.fake&&!V.swf.ready&&!V.swf.failed;if(t||A&&"none"!=A.style.display)a();else{i(e);e.preventDefault()}}var I,S,k,_,w,A,L,x,O,M,D,N,R,B,U,F,H,W,G=0,V=null,j=[],q={player:function(t){V=t;var i=t.mediaContainer;r();Utils.multiAddEventListener(i,"touchend mouseup",e);i.addEventListener("contextmenu",C);i.addEventListener("touchstart",P)},addContextMenuItem:function(e,t,i){var n="item_"+e;z[n]||(z[n]=o(i));z[n].textContent=t},updateContextMenuItem:function(e,t){var i="item_"+e;z[i]&&(z[i].textContent=t)},eventCallbacks:{mediaItemChanged:function(){I=null;S=null;k=null;t();j=[]},loadedmetadata:function(e){var i=e.bitrate,n=e.codecs,a=e.transferFormat;i&&(I=i+"kbps");n&&(S=n);a&&(k=a);t()},info:function(e){e.currentBitsPerSecond&&(I=e.currentBitsPerSecond+"kbps")},error:function(e){if(4205!=e.code){_&&5e3==e.code?_.code=_.code+" ("+e.code+")":_=e;j.push(e.code);t()}},playlistLoading:function(){_=null;t()}}},z={};return q}(),Subtitles=function(){function e(e){return e?parseFloat(e.split("px")[0]):0}function t(e,t){return t>e.start&&e.end>t}function i(e,t){return isNaN(t.max)||isNaN(t.min)?isNaN(t.min)?e:Math.max(e,t.min):Math.min(Math.max(e,t.min),t.max)}function n(e,t){return function(i){e.currentSubItem&&e.currentSubItem.href===i&&e[t](i)}}function a(e){function t(){e.clearSubtitles()}function i(){e.clearSubtitles();e.captionsList=null;e.overrideItem=null;e.currentSubItem=null;e.failedToLoad=!1}return{blockUnwanted:!0,playlistLoading:i,playlistEnded:t,seeking:t,ended:t,error:t,mediaItemChanged:i,mediaItemInfoChanged:function(){e.failedToLoad=!1;e.load()},timeupdate:function(){e.showingSubs&&!e.player.ui.Chromecast.isCasting&&e.currentSubItem&&e.currentSubItem.captionsList&&e.checkForSubtitles(e.player.time);e.player.mediaItem.liveSubsItem&&e.player.mediaItem.liveSubsItem.hasHLSliveSubs&&e.player.mediaItem.liveSubsItem.loadHLSsubs(e.player.timeHelper.time+6)},seeked:function(){e.clearSubtitles();e.player.mediaItem.liveSubsItem&&e.player.mediaItem.liveSubsItem.hasHLSliveSubs&&e.player.mediaPlayer.paused&&e.player.mediaItem.liveSubsItem.loadHLSsubs(e.player.timeHelper.time)},playing:function(){e.player.mediaItem.liveSubsItem&&e.player.mediaItem.liveSubsItem.hasHLSliveSubs&&e.player.mediaItem.liveSubsItem.loadHLSsubs(e.player.timeHelper.time+3.84)}}}function r(e,t,i){if(e.from===t){var n=e.size;return n>i?n:i}return i}function o(e,t,i){return{top:i(e.top,t.top),bottom:i(e.bottom,t.bottom),left:i(e.left,t.left),right:i(e.right,t.right)}}function s(e,t){return{top:e.bottom-t.top,bottom:-(e.top-t.bottom),left:e.right-t.left,right:-(e.left-t.right)}}function l(e){if(e.length>0){for(var t={top:e[0].top,bottom:e[0].bottom,left:e[0].left,right:e[0].right},i=1;e.length>i;i++){var n=e[i];t.top=Math.min(t.top,n.top);t.bottom=Math.max(t.bottom,n.bottom);t.left=Math.min(t.left,n.left);t.right=Math.max(t.right,n.right)}t.width=t.right-t.left;t.height=t.bottom-t.top;return t}return void 0}function u(e,t,i){return c(e,t,function(e){return e+i})}function d(e,t,i){return c(e,t,function(e){return e*i})}function c(e,t,i){var n=parseFloat(e.slice(0,e.indexOf(t)));return i(n)+t}function p(e){if(window.screen&&window.screen.width&&window.screen.height&&e.width&&e.height){var t=window.screen.width/e.width,i=window.screen.height/e.height;return Math.min(i,t)}return 1}function f(e){return function(t){if(e.subsAvailable())if("8"==String.fromCharCode(t.charCode)){clearTimeout(v);T+=1;e.remoteInput||g(e);e.remoteInput.style.display="block";e.remoteInput.textContent="888".slice(-T);if(3==T){b=setTimeout(m,1500,e);e.toggle("shortcut_key_press")}v=setTimeout(m,3e3,e)}else{clearTimeout(v);clearTimeout(b);m(e)}}}function m(e){if(e.remoteInput){e.remoteInput.style.display="none";e.remoteInput.textContent=""}T=0}function g(e){e.remoteInput=document.createElement("div");e.remoteInput.id="p_remoteInput";e.remoteInput.style.display="none";e.player.mediaContainer.appendChild(e.remoteInput)}function h(e){var t={from:"bottom"};Utils.defineProperties(t,{size:{get:function(){var t=0;if(e.controls&&e.controls.visible){var i=0,n=e.UIinfoObject;n.markersBarVisible?i=Utils.getOffset(e.chapterMarkersHolder,"top"):n.seekBarVisible?i=Utils.getOffset(e.seekBarHolder,"top"):e.controls&&(i=Utils.getOffset(e.controls,"top"));if(i>0){var a=n.videoHeight?n.videoHeight:Utils.getOffset(e.container,"height"),r=n.videoY?n.videoY:0;t=r+a-i+10}else t=i}return t}}});return t}function y(e){var t={from:"bottom"};Utils.defineProperties(t,{size:{get:function(){if(!isNaN(e.config.subtitles.yOffset)){var t=e.UIinfoObject.videoHeight?e.UIinfoObject.videoHeight:Utils.getOffset(e.container,"height"),i=e.UIinfoObject.videoY?e.UIinfoObject.videoY:0;return t+i-e.config.subtitles.yOffset}return 0}}});return t}var v,b,T=0,E={scale:{min:.5},fontSize:{min:.5}},P=function(e){var t=this;t.player=e;t.container=document.createElement("div");t.container.style.cssText="width:100%;height:100%;display:block;position:absolute;";t.container.className="p_subtitlesContainer";t.player.mediaContainer.appendChild(t.container);t.failedToLoad=!1;t.enabled=!0;t.eventCallbacks=a(this);t.index=0;t.previousTime=0;t.subtitleMargins=[];t.currentSubtitles=[];t.leftToRight=[];t.topToBottom=[];t.currentSubItem=null;t.overrideItem=null;t.desnakeLiveSubs=!1;t.kind="subtitles";t.considerHLSdelay=!1;document.addEventListener("keypress",f(t));return t};P.prototype={subsClasses:{},showingSubs:!1,failedToLoad:!1,enabled:!0,updateConfig:function(e){var t=this;e=e.subtitles;var i=.8;e.contrast&&"number"==typeof e.contrast&&e.contrast>1&&(i=e.contrast/100);t.sizeAdjustment=1;e.sizeAdjustment&&"number"==typeof e.sizeAdjustment&&e.sizeAdjustment>0&&(t.sizeAdjustment=e.sizeAdjustment);t.container.style.opacity=i;t.kind=e.kind||"subtitles";t.subtitleMargins=[h(t.player.ui),y(t.player.ui)];if(e.margins)for(var n=0;e.margins.length>n;n++)t.subtitleMargins.push(e.margins[n]);t.desnakeLiveSubs=e.desnakeLiveSubtitles;t.currentSubItem&&t.currentSubItem.live&&(t.currentSubItem.enableDesnake=e.desnakeLiveSubtitles);e.defaultOn&&t.on();t.updatePositions()},checkForSubtitles:function(e){for(var i=this,n=0;i.currentSubtitles.length>n;)!t(i.currentSubtitles[n],e)||i.currentSubtitles[n].desnaked?i.removeSubtitle(i.currentSubtitles[n]):n++;var a=0;e>i.previousTime&&(a=i.index);var r=null;for(n=a;i.currentSubItem.captionsList.length>n;n++){var o=i.currentSubItem.captionsList[n];if(o.start>e)break;o.end>e&&i.displaySubtitle(o)}i.previousTime=e;return r},displaySubtitle:function(e){var t=this;if(e&&t.currentSubtitles.indexOf(e)<0){t.container.appendChild(e.cueHTMLElement);var i=Utils.getOffsets(e.cueHTMLElement),n=Utils.getOffsets(t.container),a=o(i,n,Utils.sortSimple);a.left/=n.width;a.right/=n.width;a.top/=n.height;a.bottom/=n.height;a.right=-a.right;a.bottom=-a.bottom;e.naturalPos=a;t.topToBottom.push(e);t.topToBottom.sort(function(e,t){return e.naturalPos.top>t.naturalPos.top?1:e.naturalPos.top===t.naturalPos.top?0:-1});t.leftToRight.push(e);t.leftToRight.sort(function(e,t){return e.naturalPos.left>t.naturalPos.left?1:e.naturalPos.left===t.naturalPos.left?0:-1});t.currentSubtitles.push(e);e.active=!0;t.updatePositions()}},removeSubtitle:function(e){var t=this,i=t.currentSubtitles.indexOf(e);if(i>=0){t.currentSubtitles.splice(i,1);t.leftToRight.splice(t.leftToRight.indexOf(e),1);t.topToBottom.splice(t.topToBottom.indexOf(e),1);t.container.removeChild(e.cueHTMLElement);e.active=!1}},clearSubtitles:function(){var e=this;e.previousTime=0;e.index=0;for(var t=e.currentSubtitles;t.length>0;)e.removeSubtitle(t[t.length-1])},showLoadErrorMessage:function(){var e=this;if(e.container){var t=document.createElement("div");Utils.className(t,"p_subs");t.innerHTML="Error Loading Subtitles";t.style.cssText="text-align:center; color:#fff; font-size:1.25em; background-color:rgba(0,0,0,1); padding:2px 8px";e.container.style.display="block";e.container.className="p_subtitles";e.container.appendChild(t);e.updatePositions();setTimeout(function(){t.parentNode&&t.parentNode.removeChild(t);t=null},5e3)}},updateSubs:function(e){var t=this;t.failedToLoad=!1;t.overrideItem=e?new SubtitlesItem(e,null):null;t.load();t.player.ui.updateLayout()},on:function(){var e=this;if(!e.showingSubs||e.considerHLSdelay){e.considerHLSdelay=!1;e.showingSubs=!0;e.container.style.display="block";e.load();e.updatePositions();e.player.ui.UIinfoObject.subtitles=!0;e.player.ui.dispatchUIInfo();e.player.dispatch({type:"subtitles",active:!0})}},off:function(){var e=this;if(e.showingSubs){e.currentSubItem&&e.currentSubItem.live&&e.currentSubItem.off();e.showingSubs=!1;e.container.style.display="none";e.clearSubtitles();e.player.ui.UIinfoObject.subtitles=!1;e.player.ui.dispatchUIInfo();e.player.dispatch({type:"subtitles",active:!1});e.player.ui.config.subtitles.defaultOn=!1}},toggle:function(e){var t=this,i="on";if(t.showingSubs){t.off();i="off"}else t.on();t.player.trackAction("subtitles_"+i,e)},subsAvailable:function(){var e=this,t=e.player.mediaItem;return(!!e.overrideItem||t&&t.subtitleConnections&&t.subtitleConnections.length>0)&&!e.failedToLoad},updatePositions:function(){var e=this;e.resizeContainer();for(var t=0;e.currentSubtitles.length>t;t++){e.resizeSubtitle(e.currentSubtitles[t]);e.positionSubtitle(e.currentSubtitles[t])}var i=[];for(t=e.topToBottom.length-1;t>=0;t--){var n=e.topToBottom[t];e.deconflictSubtitle(n,i,!1);i.push(n);for(var a=0,o=0;e.subtitleMargins.length>o;o++)a=r(e.subtitleMargins[o],"top",a);var s=n.cueHTMLElement.getElementsByClassName("p_paragraph");if(1===s.length){var l=-(Utils.getOffsets(s[0]).top-Utils.getOffsets(e.container).top-a);if(l>0){s[0].style.top=u(s[0].style.top,"px",l);for(var d=[],c=t;e.topToBottom.length>c;c++){e.deconflictSubtitle(e.topToBottom[c],d,!0);d.push(e.topToBottom[c])}}}}},deconflictSubtitle:function(e,t,i){for(var n=this,a=0;t.length>a;a++){var r=t[a],o=e.cueHTMLElement.getElementsByClassName("p_paragraph"),l=r.cueHTMLElement.getElementsByClassName("p_paragraph");if(1===o.length&&1===l.length){var d=o[0],c=l[0],p=s(Utils.getOffsets(d),Utils.getOffsets(c)),f=n.leftToRight.indexOf(e)>n.leftToRight.indexOf(r),m=f?p.right:p.left,g=i?p.bottom:p.top;m>0&&g>0&&(g>m?d.style.left=f?u(d.style.left,"px",m):u(d.style.left,"px",-m):d.style.top=i?u(d.style.top,"px",g):u(d.style.top,"px",-g))}}return!0},resizeContainer:function(){var e=this,t=e.player.ui.UIinfoObject;if(isNaN(t.videoWidth)||isNaN(t.videoHeight)){e.container.style.width="100%";e.container.style.height="100%"}else{e.container.style.width=t.videoWidth+"px";e.container.style.height=t.videoHeight+"px"}e.container.style.marginLeft=t.videoX+"px";e.container.style.marginTop=t.videoY+"px"},positionSubtitle:function(e){var t=this;if(e){for(var i={top:0,bottom:0,left:0,right:0},n=0;t.subtitleMargins.length>n;n++){var a=t.subtitleMargins[n];i.top=r(a,"top",i.top);i.bottom=r(a,"bottom",i.bottom);i.left=r(a,"left",i.left);i.right=r(a,"right",i.right)}var s=e.cueHTMLElement.getElementsByClassName("p_paragraph");if(1===s.length){var l=s[0];l.style.position="relative";l.style.top="0px";l.style.left="0px";var u=Utils.getOffsets(l),d=o(u,Utils.getOffsets(t.container),Utils.sortSimple);d.bottom=-d.bottom;d.right=-d.right;var c,p,f=o(i,d,Utils.sortSimple);f.top>0?p=f.top:f.bottom>0&&(p=-Math.min(f.bottom,-f.top));f.left>0?c=f.left:f.right>0&&(c=-Math.min(f.right,-f.left));if(p){l.style.top=p+"px";f.top-=p;f.bottom+=p}if(c){l.style.left=c+"px";f.left-=c;f.right+=c}e.marginOverflows=f}}},resizeSubtitle:function(t){var n=this;if(t){var a=Utils.getOffset(n.container,"height"),r=Utils.getOffset(n.container,"width"),s=t.videoHeight,u=t.videoWidth,c={width:r/u,height:a/s};c.height=i(c.height,E.scale);c.width=i(c.width,E.scale);var f;if(t.linePadding)for(var m=d(t.padding.left,"px",c.width*n.sizeAdjustment),g=d(t.padding.right,"px",c.width*n.sizeAdjustment),h=document.getElementsByClassName("p_cueDirUniWrapper"),y=0;h.length>y;y++)TTMLParser.applyLinePadding(h[y],m,g);if(t.fontSize)for(f in t.fontSize)if(t.fontSize.hasOwnProperty(f)){var v=t.fontSize[f].slice(0,t.fontSize[f].indexOf("em")),b=parseFloat(v)*c.height,T=.06*a/16;b=Math.max(b,T);var P=.1*a/16;b=Math.min(b,P);if(n.player.isFullScreen){var C=p({width:r,height:a});b*=Math.sqrt(C)}b*=n.sizeAdjustment;b+="em";for(var I=t.cueHTMLElement.getElementsByClassName("p_paragraph"),S=0;I.length>S;S++)I[S].style.fontSize=b}var k=t.cueHTMLElement.getElementsByClassName("p_paragraph");for(y=0;k.length>y;y++){k[y].style.width="100%";k[y].style.height="100%";var _=k[y].getElementsByTagName("span"),w=[];for(S=0;_.length>S;S++)w.push(Utils.getOffsets(_[S]));var A=l(w),L=1;Device.trident&&(L=1.05);if(A){k[y].style.width=A.width*L+"px";k[y].style.height=A.height*L+"px"}}for(y=0;k.length>y;y++){var x=k[y],O=Utils.getOffsets(x),M=Utils.getOffsets(t.cueHTMLElement),D=t.cueHTMLElement.style,N={left:e(D.paddingLeft),right:-e(D.paddingRight),top:e(D.paddingTop),bottom:-e(D.paddingBottom)};M=o(M,N,function(e,t){return e+t});M.width=M.right-M.left;M.height=M.bottom-M.top;for(S=0;t.flexBoxAttr.length>S;S++){var R=t.flexBoxAttr[S];R.indexOf("align-items")>=0?R.indexOf("flex-start")>=0?x.style.marginTop="0px":R.indexOf("center")>=0?x.style.marginTop=M.height/2-O.height/2+"px":R.indexOf("flex-end")>=0&&(x.style.marginTop=M.height-O.height+"px"):R.indexOf("justify-content")>=0&&(R.indexOf("flex-start")>=0?x.style.marginLeft="0px":R.indexOf("center")>=0?x.style.marginLeft=M.width/2-O.width/2+"px":R.indexOf("flex-end")>=0&&(x.style.marginLeft=M.width-O.width+"px"))}}}},resizeFix:function(){var e=this,t=e.container;t&&(t.style.display="none")},resizeFixEnd:function(){var e=this,t=e.container;if(t&&e.showingSubs){t.style.display="block";e.updatePositions()}},load:function(){var e,t=this;if(t.subsAvailable()&&t.showingSubs){var i=t.player.mediaItem,a=i.subtitleConnections;e=t.overrideItem;if(!e&&a){var r=a.filter(function(e){return e.kind==t.kind});e=r[0]||a[0]}if(e){e.live&&(e.enableDesnake=t.desnakeLiveSubs);t.currentSubItem=e;t.currentSubItem.loadSubtitles(n(t,"subtitlesLoaded"),n(t,"subtitlesFailed"))}}},subtitlesFailed:function(e){var t=this;t.failedToLoad=!0;t.showingSubs=!1;Utils.callErrorFunction(t.player,SMPError.SUBS_FAILED,e,!0);t.clearSubtitles();t.showLoadErrorMessage()},subtitlesLoaded:function(){var e=this;e.player.ui.UIinfoObject.subtitles=!0;e.player.ui.dispatchUIInfo();e.clearSubtitles()},onNewConnection:function(){var e=this;e.showingSubs&&!e.currentSubItem&&e.load()}};return P}(),Chromecast=function(){var e=function(e){var t=this;t.player=e;t.deviceId="";t.isAvailable=!1;t.isCasting=!1;t.isCastPlaying=!1;t.isAttemptingToCast=!1;t.isConnecting=!1;t.subtitlesEnabled=!1;t.needSetUp=!0;t.fakeTime=0;t.shortcutToProgramme=!1;t.newPlaylist=!1;t.postInterrupt=!1;t.duration=0;t.eventCallbacks={subtitles:function(e){t.subtitlesEnabled=e.active;t.isCasting&&t.player.dispatch(e.active?{type:"ccSubsOn"}:{type:"ccSubsOff"})},volumechange:function(){t.isCasting&&t.ccVolume(t.player.muted?0:t.player.volume)},seeked:function(){t.isCasting||t.player.ui.hideBuffer()},pause:function(){t.isAttemptingToCast||t.isConnecting||t.player.ui.hideBuffer()},playlistLoading:function(){if(t.isCasting){t.newPlaylist=!0;t.interrupt()}}};return t};e.prototype={toggle:function(){var e=this;if(e.isCasting)e.off();else{e.isAttemptingToCast=!0;e.on()}},on:function(){var e=this,t=e.player.mediaItem,i=e.player.ui.Subtitles,n=e.player.playlist;e.player.minimise();e.player.pause();i.showingSubs&&i.clearSubtitles();e.player.ui.hideControlBar();Utils.asyncDelay(function(){e.player.hidePlayer();e.drawCastOverlay();if(!t.isProgramme){var i=n.firstProgramme;t=n.items[i];e.shortcutToProgramme=!0}e.player.dispatch({type:"chromecast",active:!0});e.player.dispatch({type:"ccRequest",data:{mediatorIdentifer:t.identifier}})})},off:function(){var e=this;e.player.dispatch({type:"chromecast",active:!1});e.player.ui.notPlayingState();e.player.dispatch({type:"ccCancel"})},interrupt:function(){var e=this;if(e.isCasting){e.player.dispatch({type:"chromecast",active:!1});e.removeByClass("p_castOverlay");e.isCastPlaying=!1;e.isCasting=!1;e.isAttemptingToCast=!1;e.isConnecting=!1;e.needSetUp=!0;e.player.dispatch({type:"ccInterrupt"})}},stopCastAttempt:function(){var e=this;e.stopCast()},connect:function(){var e=this;e.player.mediaPlayer.pause();e.isConnecting=!0;e.isAttemptingToCast=!0;e.player.mediaPlayer.style.left=HIDDEN_PLAYER_MINIMODE;e.drawCastOverlay();e.player.ui.showBuffer()},playing:function(e){var t=this;t.isAttemptingToCast=!1;t.isCastPlaying=!0;t.player.clearFakeTimer();t.needSetUp&&t.initialSetUp(e);if(e.currentTime){t.fakeTime=e.currentTime;t.player.fakeTimeupdateTimer=setInterval(function(){t.player.dispatch({type:"timeupdate",fake:!0});t.fakeTime++;t.player.ui.updateDisplayedProgress(t.fakeTime,!1)},1e3);t.player.ui.hideBuffer();t.drawCastOverlay();t.player.ui.playingState()}else t.player.dispatch({type:"ccStopMedia"})},paused:function(){var e=this;e.isCastPlaying=!1;e.player.clearFakeTimer();e.drawCastOverlay();e.player.ui.notPlayingState()},buffering:function(){var e=this;e.player.clearFakeTimer();e.removeByClass("p_castIcon");e.player.ui.showBuffer()},stopped:function(){var e=this;if(!e.postInterrupt)if(e.newPlaylist)e.player.delayedDispatch({type:"playlistEnded"});else if(e.shortcutToProgramme){e.player.config.startTime=e.fakeTime;e.player.config.suppressItemKind="ident";e.player.pauseTimes.splice(0,0,e.player.config.startTime);e.player.loadPlaylist(e.player.playlist);e.player.startPlayback()}else e.player.time=e.fakeTime;e.stopCast()},finished:function(){var e=this,t=0;if(e.shortcutToProgramme)e.player.delayedDispatch({type:"playlistEnded"});else{e.player.time=t;e.player.delayedDispatch({type:"ended"})}e.postInterrupt&&(e.postInterrupt=!1);e.stopCast()},setCastPlayState:function(){var e=this;if(e.isCasting){if(e.isCastPlaying){e.isCastPlaying=!1;e.ccPause()}else e.ccPlay();return!0}return!1},initialSetUp:function(e){var t=this,i=t.player.ui.Subtitles,n=1;t.duration=e.castDuration?Math.floor(e.castDuration):t.player.duration;!t.subtitlesEnabled&&!i.showingSubs||e.subtitlesEnabled||t.player.dispatch({type:"ccSubsOn"});t.player.volume=n;t.player.ui.showControlBar();t.needSetUp=!1},drawCastOverlay:function(){var e,t,i,n=this,a=n.player.ui,r=createElement("div","p_castOverlay"),o=createElement("div","p_messageDiv"),s=createElement("div","p_castIcon"),l=n.deviceId;n.removeByClass("p_castOverlay");a.showPoster();if(n.isConnecting)i=Language.ccConnectingTo;else if(n.isAttemptingToCast){i=Language.ccSelectDevice;l="";updateExistingSvg(s,a.getPlayOutsidePageClass())}if(n.isCasting){i=Language.ccCastingTo;r.onclick=function(){n.setCastPlayState()};n.isCastPlaying?updateExistingSvg(s,"pause"):updateExistingSvg(s,"play")}e=createElement("p","p_castMessage",'<span class="p_text" aria-hidden="true"></span>',i);t=createElement("p","p_deviceMessage",'<span class="p_text" aria-hidden="true"></span>',l);o.appendChild(e);o.appendChild(t);r.appendChild(o);r.appendChild(s);a.container.appendChild(r)},removeByClass:function(e){var t=this,i=t.player.ui.container.getElementsByClassName(e);i.length&&i[0].parentNode.removeChild(i[0])},externalControlCheck:function(e){var t=this,i=t.player.ui.Subtitles;if(e.subtitlesEnabled&&e.subtitlesEnabled!==t.subtitlesEnabled){t.subtitlesEnabled=e.subtitlesEnabled;t.subtitlesEnabled?i.on():i.off()}if(e.floatVolume&&e.floatVolume!==t.player.volume){t.player.volume=e.floatVolume||.7;t.player.dispatch({type:"volumechange",volume:t.player.volume,muted:t.player.muted})}},stopCast:function(){var e=this;if(!e.postInterrupt){e.isCastPlaying=!1;e.isCasting=!1;e.isAttemptingToCast=!1;e.isConnecting=!1;e.needSetUp=!0;e.player.ui.notPlayingState();e.removeByClass("p_castOverlay");if(e.newPlaylist){e.newPlaylist=!1;e.postInterrupt=!0;return}if(e.shortcutToProgramme){e.shortcutToProgramme=!1;return}e.player.clearFakeTimer();e.player.mediaPlayer.style.left="0px";e.player.ui.hidePoster()}e.postInterrupt=!1},ccPlay:function(){var e=this;e.isCastPlaying=!0;e.player.dispatch({type:"ccPlay"})},ccPause:function(){var e=this;e.isCastPlaying=!1;e.player.dispatch({type:"ccPause"})},ccSeek:function(e){var t=this;if(t.isCasting){t.fakeTime=e;t.player.dispatch({type:"ccSeek",data:{seekTime:e}});return!0}return!1},ccVolume:function(e){var t=this;t.player.dispatch({type:"ccVolume",data:{floatVolume:e}})}};return e}(),PictureInPicture=function(){var e=function(e,t){var i=this;i.player=e;i.supported=!1;i.func=function(e){t.togglePiPicon(t,e)};return i};e.prototype={isSupported:function(){var e=this,t=e.player.mediaPlayer,i="function"==typeof t.operaRequestDetachedView&&"audio"!=e.player.elType,n="function"==typeof t.webkitSupportsPresentationMode&&t.webkitSupportsPresentationMode("picture-in-picture"),a=n||i;if(a){Utils.className(document.body,"picInPic","");var r=n?"webkitpresentationmodechanged":"operadetachedviewchange";t.removeEventListener(r,e.func);t.addEventListener(r,e.func)}else Utils.className(document.body,"","picInPic");e.supported=a;return a},toggle:function(){var e=this,t=e.player.mediaPlayer;if(t.webkitSetPresentationMode)t.webkitSetPresentationMode("picture-in-picture"===t.webkitPresentationMode?"inline":"picture-in-picture");else if(t.operaRequestDetachedView)if(t.operaDetachedView)t.operaReleaseDetachedView();else if(e.player.isFullScreen){e.player.minimise();setTimeout(function(){t.operaRequestDetachedView()},1500)}else t.operaRequestDetachedView()},isPlayingInPicture:function(){var e=this;return"function"==typeof e.player.mediaPlayer.operaRequestDetachedView&&e.player.mediaPlayer.operaDetachedView===!0?!0:e.player.mediaPlayer.webkitPresentationMode&&"picture-in-picture"===e.player.mediaPlayer.webkitPresentationMode?!0:!1},exitPicInPic:function(){var e=this;if(e.isPlayingInPicture()){var t=e.player.els.video;t.webkitSetPresentationMode?t.webkitSetPresentationMode("inline"):t.operaReleaseDetachedView&&t.operaReleaseDetachedView()}}};return e}(),MarkersUI=function(){function e(e,t){var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e),n=i?parseInt(i[1],16)+","+parseInt(i[2],16)+","+parseInt(i[3],16)+",":"0,0,0,",a=t?"1":"0.33";return"rgba("+n+a+")"}function t(e,t,i,n){Utils.multiAddEventListener(e,"click mouseup touchend keydown",t);n&&Utils.multiAddEventListener(e,"focus blur",n);i&&Utils.multiAddEventListener(e,"mouseover mouseout",i)}function i(){return Math.random().toString(36).substr(2,10)}function n(e,t,i){e.trackAction("marker",t,{start:Math.floor(i.start),marker_type:i.type,id:i.identifier})}function a(e,t){return Utils.getActionFn(function(i,a){if("keydown"!=a.type||a.keyCode==KEY_SPACE||a.keyCode==KEY_ENTER){n(e.ui.player,i,t);if("touchend"!=a.type||e.currentlyOver&&e.currentlyOver._id==t._id)e.seekToChapterMarker(t);else{e.markerMouseOut(e.currentlyOver,!0);e.drawMarkerTip(t);e.markerMouseOver(t)}a.preventDefault&&a.preventDefault()}})}function r(e,t){return Utils.getActionFn(function(i){n(e.ui.player,i,t);e.seekToChapterMarker(e.currentlyOver)})}function o(e,t){return function(i){if("mouseover"==i.type){e.drawMarkerTip(t);e.markerMouseOver(t)}else e.markerMouseOut(t)}}function s(e,t){return function(i){var n="focus"==i.type;if(n){e.currentlyOver=t;e.drawMarkerTip(t)}else{e.currentlyOver=null;e.markerTip.style.display="none"}Utils.setOrUnsetClass(t,"p_highlighted",n);l(t.type)&&e.fillChapters()}}function l(e){return"chapter"===e||"programme"===e}function u(e){return"key"===e||"highlight"===e}function d(e){e&&e.length>0&&e.forEach(function(e){e.startFired=!1;e.endFired=!1})}function c(e,t){if(l(t.type)){e.firstChild.textContent=t.text?t.text:t.type;e.available=t.available!==!1;e.end=t.end}else u(t.type)&&(e.text=t.text);e.description=t.description;e.start=t.start;e.type=t.type;e.identifier=t.id}var p=5e3,f=73,m=26,g=44,h="rgb(25, 25, 25)",y="rgb(255, 255, 255)",v="rgba(178,178,178,0.6)",b="rgba(255,255,255,0.6)",T=function(e){var t=this;t.chapterLastDrawTime=0;t.ui=e;t.keyTipBottom=f;t.markerDisplayHeight=0;t.storedChapterMarkers=[];t.storedKeyMoments=[];return t};T.prototype={getDefaultLeftMargin:function(){var e=this;return e.ui.player.isFullScreen?0:16},testDrawMarkers:function(e){var t=this;if(t._markerData&&0!==t._markerData.length){if(t.ui.player.isLive){var i=Utils.now();if(e||i-t.chapterLastDrawTime>p){t.chapterLastDrawTime=i;t.updateMarkers()}}t.fillChapters()}},getCurrentChapter:function(){var e=this,t=e.ui.player.timeHelper.time;if(e._markerData){for(var i=e._markerData.length-1;i>=0;i--){var n=e._markerData[i]||{},a=n.start,r=n.end;if(l(n.type)&&t>=a&&(isNaN(r)||r>=t))return n}return null}},reportProgress:function(){for(var e,t,i=this,n=Math.round(2*i.ui.player.time),a=0;i._markerData.length>a;a++){var r=i._markerData[a];e=r.start;if(n==Math.round(2*e)&&!r.startFired){r.startFired=!0;i.ui.player.delayedDispatch({type:"markerStart",id:r.id},!1)}if(i._markerData.length>0&&!isNaN(r.end)){t=r.end;if(n==Math.round(2*t)&&!r.endFired){r.endFired=!0;i.ui.player.delayedDispatch({type:"markerEnd",id:r.id},!1)}}}},resetProgress:function(){d(this._markerData)},setMarkers:function(e){var t=this;t.resetStoredMarkers();if(e&&e.length){e.sort(Utils.sortByStart);for(var n=0;e.length>n;n++){var a=e[n];a.startFired=a.endFired=!1;a._id||(a._id=a.id||i())}}t._markerData=e;Utils.className(t.ui.container,"","p_hasMarkers p_chapterOnly p_keyMomentOnly");t.updateMarkers()},updateMarkers:function(){var e=this;if(e.markersHolder)if(e.ui.config.markers.hideBelowWidth>e.ui.container.offsetWidth||!e._markerData||0===e._markerData.length||10>e.ui.seekBar.offsetWidth||!e.ui.config.markers.enabled){Utils.className(e.ui.container,"","p_hasMarkers p_chapterOnly p_keyMomentOnly");e.ui.UIinfoObject.markersBarVisible=!1;e.ui.Subtitles.updatePositions();e.ui.dispatchUIInfo()}else{for(var t=Utils.getMarkerByType(e._markerData,e.ui.config.markers.suppressMarkerKinds,"chapter"),i=Utils.getMarkerByType(e._markerData,e.ui.config.markers.suppressMarkerKinds,"key"),n=0;e.storedChapterMarkers.length>n;n++)if(e.ui.player.timeHelper.earliestSeek>=e.storedChapterMarkers[n].end){var a=e.storedChapterMarkers.splice(n,1);e.markersHolder.removeChild(a[0])}if(t.length>0){for(var r=0;t.length>r;r++){t[r].end=t.length-1>r?t[r+1].start:1/0;e.ui.player.timeHelper.streamEnd>t[r].start&&t[r].end>e.ui.player.timeHelper.earliestSeek&&e.checkChapterMarker(t[r])}if(e.storedChapterMarkers.length>0){e.fillChapters();e.updateItemsDisplayed(e.storedChapterMarkers)}}for(var o=0;e.storedKeyMoments.length>o;o++)if(e.ui.player.timeHelper.earliestSeek>=e.storedKeyMoments[o].start){a=e.storedKeyMoments.splice(o,1);e.markersHolder.removeChild(a[0])}if(i.length>0){for(var s=0;i.length>s;s++)e.ui.player.timeHelper.streamEnd>i[s].start&&i[s].start>e.ui.player.timeHelper.earliestSeek&&e.checkKeyMoment(i[s]);e.storedKeyMoments.length>0&&e.updateItemsDisplayed(e.storedKeyMoments)}e.markerDisplayHeight=0;if(0===e.storedChapterMarkers.length)if(0===e.storedKeyMoments.length)Utils.className(e.ui.container,"","p_hasMarkers p_chapterOnly p_keyMomentOnly");else{e.markerDisplayHeight=m;Utils.className(e.ui.container,"p_hasMarkers p_keyMomentOnly");e.keyTipBottom=m}else if(0===e.storedKeyMoments.length){Utils.className(e.ui.container,"p_hasMarkers p_chapterOnly");e.markerDisplayHeight=g}else{Utils.className(e.ui.container,"p_hasMarkers");e.keyTipBottom=f;e.markerDisplayHeight=f}e.markersHolder.style.height=e.markerDisplayHeight+"px";e.ui.Subtitles.updatePositions();e.ui.dispatchUIInfo()}},checkChapterMarker:function(e){var i=this,n=Utils.getItemById(i.storedChapterMarkers,e._id);if(!n){n=createElement("div","p_chapterMarker",'<span class="p_chapterMarkerText"></span>');n.setAttribute("tabIndex","8");t(n,a(i,n),o(i,n),s(i,n));n._id=e._id;c(n,e);i.storedChapterMarkers.push(n)}var r=n,l=i.ui.player.timeHelper.timeToPercent(r.start)*i.ui.seekBar.offsetWidth+i.getDefaultLeftMargin(),u=i.ui.player.timeHelper.timeToPercent(r.end)*i.ui.seekBar.offsetWidth+i.getDefaultLeftMargin(),d=Math.max(0,u-l-1);r.style.left=l+"px";r.style.width=d+"px"},checkKeyMoment:function(e){var i=this,n=Utils.getItemById(i.storedKeyMoments,e._id);if(!n){n=createElement("div","p_keyMoment");n.appendChild(createElement("div","p_keyMomentSquare"));n.appendChild(createElement("div","p_timeTipTriangle p_keyMomentTipTriangle"));n.setAttribute("tabindex","8");t(n,a(i,n),o(i,n),s(i,n));n._id=e._id;c(n,e);i.storedKeyMoments.push(n)}var r=i.ui.player.timeHelper.timeToPercent(n.start),l=r*i.ui.seekBar.offsetWidth+i.getDefaultLeftMargin()-7;n.style.left=l+"px"},updateItemsDisplayed:function(e){var t,i,n=this;if(e.length>0)for(var a=0;e.length>a;a++)if(!n.markersHolder.contains(e[a])){t=n.markersHolder.querySelectorAll(l(e[a].type)?".p_chapterMarker":".p_keyMoment");if(t.length){i=t[t.length-1];i.parentNode.insertBefore(e[a],i.nextSibling)}else n.markersHolder.appendChild(e[a])}},fillChapters:function(e){var t,i,n=this,a=n.ui.player.timeHelper.latestAllowableSeekTime;(null==e||0===e)&&(e=n.ui.player.timeHelper.time);for(var r=0;n.storedChapterMarkers.length>r;r++){var o=n.storedChapterMarkers[r],s=o==n.currentlyOver;if(r==n.storedChapterMarkers.length-1){t=e>=o.start&&o.end>=e;i=a>=o.start&&o.end>=a}else{t=e>=o.start&&o.end>e;i=a>=o.start&&o.end>a}i?n.fillLiveChapter(o,s):t?n.fillCurrentChapter(o,s):n.fillWholeChapter(o,s)}},fillCurrentChapter:function(t,i){var n,a,r,o,s,l,u=this;r=u.ui.player.timeHelper.time;n=Math.max(t.start,u.ui.player.timeHelper.earliestSeek);a=Math.min(t.end,u.ui.player.timeHelper.streamEnd);var d=(r-n)/(a-n)*100;if(i){o=y;s=b;l=h}else{o=e(u.ui.config.colour,!0);s=e(u.ui.config.colour,!1);l=u.ui.config.foreColour}u.applyBackgroundColor(t,o,s,d,l)},fillWholeChapter:function(e,t){var i=this;if(!e.available||e.start>i.ui.player.timeHelper.latestAllowableSeekTime){e.style.background=v;e.style.color=y}else if(t){e.style.background=y;e.style.color=h}else{e.style.background=h;e.style.color=y}},fillLiveChapter:function(t,i){var n,a,r,o,s,l,u,d,c=this;r=c.ui.player.timeHelper.time;o=c.ui.player.timeHelper.latestAllowableSeekTime;n=Math.max(t.start,c.ui.player.timeHelper.earliestSeek);a=Math.min(t.end,c.ui.player.timeHelper.streamEnd);var p=(o-n)/(a-n)*100;if(r>n&&a>=r){var f=(r-n)/(a-n)*100;if(i){s=y;l=b;u=v;d=h}else{s=e(c.ui.config.colour,!0);l=e(c.ui.config.colour,!1);u=v;d=c.ui.config.foreColour}c.applyBackgroundColorThree(t,s,l,u,f,p,d)}else{if(!t.available){c.fillWholeChapter(t,i);return}if(i){s=y;u=v;d=h}else{s=h;u=v;d=y}c.applyBackgroundColor(t,s,u,p,d)}},applyBackgroundColor:function(e,t,i,n,a){for(var r=["-webkit-linear-gradient(0deg, "+t+" "+n+"%, "+i+" "+n+"%)","-moz-linear-gradient(0deg, "+t+" "+n+"%, "+i+" "+n+"%)","-ms-linear-gradient(0deg, "+t+" "+n+"%, "+i+" "+n+"%)","-o-linear-gradient(0deg, "+t+" "+n+"%, "+i+" "+n+"%)"],o=0;r.length>o;o++){var s=r[o];e.style.background=s;e.style.color=a}},applyBackgroundColorThree:function(e,t,i,n,a,r,o){for(var s=["-webkit-linear-gradient(0deg, "+t+" "+a+"%, "+i+" "+a+"%, "+i+" "+r+"%, "+n+" "+r+"%)","-moz-linear-gradient(0deg, "+t+" "+a+"%, "+i+" "+a+"%, "+i+" "+r+"%, "+n+" "+r+"%)","-ms-linear-gradient(0deg, "+t+" "+a+"%, "+i+" "+a+"%, "+i+" "+r+"%, "+n+" "+r+"%)","-o-linear-gradient(0deg, "+t+" "+a+"%, "+i+" "+a+"%, "+i+" "+r+"%, "+n+" "+r+"%)"],l=0;s.length>l;l++){var u=s[l];e.style.background=u;e.style.color=o}},markerMouseOver:function(e){var t=this;t.currentlyOver=e;Utils.className(e,"p_highlighted");l(e.type)&&t.fillChapters()},markerMouseOut:function(e,t){var i=this;i.currentlyOver=null;if(e){Utils.className(e,"","p_highlighted");l(e.type)&&i.fillChapters();t||(i.markerTip.style.display="none")}},seekToChapterMarker:function(e){var t=this;if(e.start>t.ui.player.timeHelper.latestAllowableSeekTime){t.ui.player.time=t.ui.player.timeHelper.latestAllowableSeekTime;t.ui.updateDisplayedProgress(t.ui.player.timeHelper.latestAllowableSeekTime,!1)}else{t.ui.player.time=e.start;t.ui.updateDisplayedProgress(e.start,!1)}t.markerTip.style.display="none";t.currentlyOver&&t.markerMouseOut(t.currentlyOver)},drawMarkerTip:function(e){var t,i=this;
if(e.description)t=e.description;else{if(!u(e.type)){i.markerTip.style.display="none";return}t=e.text||e.type}var n=i.markerTip,a=n.firstChild.textContent;n.style.display="block";n.style.width="auto";n.firstChild.textContent=t;n.start=e.start;n.type=e.type;i.markerTip.style.bottom=(u(n.type)?i.keyTipBottom:g)+"px";var r=parseFloat(e.style.left),o=Math.floor(e.offsetWidth/2),s=o+Math.floor(r),l=Math.floor(n.offsetWidth/2),d=s-l,c=!1;if(1>d){d=1;c=!0}if(!(a==t&&Math.abs(d-parseInt(i.markerTip.style.left,10))<10)){i.markerTip.style.left=d+"px";var p=l-o,f=p+o-Math.floor(i.chapterTipTriangle.offsetWidth/2);1>f?f=1:c&&(f=n.offsetWidth>=s?s-Math.floor(i.chapterTipTriangle.offsetWidth/2):n.offsetWidth-i.chapterTipTriangle.offsetWidth);i.chapterTipTriangle.style.left=f+"px"}},resetStoredMarkers:function(){var e=this;e._markerData=[];e.storedChapterMarkers=[];e.storedKeyMoments=[];if(e.markersHolder){for(;e.markersHolder.firstChild;)e.markersHolder.removeChild(e.markersHolder.firstChild);e.markerTip=createElement("div","p_chapterTip","<span></span>");e.chapterTipTriangle=createElement("div","p_timeTipTriangle");e.markerTip.appendChild(e.chapterTipTriangle);t(e.markerTip,r(e,e.markerTip));e.markersHolder.appendChild(e.markerTip)}},resetMarkerTip:function(){var e=this;e.markerTip&&(e.markerTip.style.display="none")}};return T}(),Language=function(){function e(e,i){var n=function(n){try{i(t(n))}catch(a){Utils.callErrorFunction(window.publicApi,SMPError.LANGUAGE_FAILED,e,!0)}};Utils.getXML(e,n,n,o,!0)}function t(e){for(var t=e.getElementsByTagName("message"),i=t.length,n={},a=0;i>a;a++){var r=t[a];n[r.getAttribute("name")]=r.textContent}return n}function i(e){return o.mappings[e]?o.mappings[e]:e}function n(){var e=o[o.code];if(e)for(var t in e)e.hasOwnProperty(t)&&(o[t]=e[t]);else r(o.code)}function a(e){return e?/^[\-a-zA-Z]{1,8}$/.test(e):!1}function r(t){if(a(t)){var i=function(e){o[t]=e;n();o.updated()},r=o.path.replace("{lang}",t);e(r,i)}}var o={code:"en",mappings:{"en-GB":"en","en-gb":"en","cy-GB":"cy","cy-gb":"cy","gd-GB":"gd","gd-gb":"gd","ga-GB":"ga","ga-gb":"ga","ru-uk":"ru",zh:"zh-hans"}};o.en={networkNotAvailable:"It appears your network is not available at this time.",defaultErrorMessage:"This content doesn't seem to be working.",codecErrorMessage:"The content is not available in a compatible codec",contentNotAvailableOnDevice:"This content is not currently available on this device.",contentPostAvailability:"This live stream has ended.",tryAgainLater:"Please try again later.",tryAgain:"Try Again",programmePreAvailability:"This programme is not available to play yet.",programmeRegionRestriction:"This content is not available in your location.",itemRevoked:"This content is no longer available",httpsOnlyFailure:"The content you want to play is not available over a secure connection. It may be available over a non-secure connection. Would you like to try this?",viewThisContentOnTheBBC:"More from the BBC",insufficientBandwidth:"Sorry, you don't have enough bandwidth to play this right now.",guidanceStateOff1Text:"Turn Parental Guidance Lock on",guidanceStateOff2Text:"Visit BBC Guidance to change settings.",guidanceStateOn1Text:"Turn Parental Guidance Lock off",guidanceStateOn2Text:"Visit BBC Guidance to change settings.",volumeControlDescription:"Use the arrow keys to increase and decrease the volume",audioToolTipBuffering:"Buffering",seekBarDescription:"Use the arrow keys to forward and rewind",audioToolTipSeekBarPrefix:"Playback time is",audioToolTipSeekBarSuffix:"of",audioToolTipVolume1:"Volume level 1",audioToolTipVolume2:"Volume level 2",audioToolTipVolume3:"Volume level 3",audioToolTipVolume4:"Volume level 4",audioToolTipVolume5:"Volume level 5",audioToolTipVolume6:"Volume level 6",audioToolTipVolume7:"Volume level 7",audioToolTipVolume8:"Volume level 8",audioToolTipVolume9:"Volume level 9",audioToolTipVolume10:"Volume level 10",audioToolTipVolume11:"Volume level 11",toolTipEnterFullScreen:"Enter full screen",toolTipExitFullScreen:"Exit full screen",toolTipPause:"Pause",toolTipPlay:"Play",toolTipPlayAgain:"Play this again",toolTipSubtitlesOn:"Turn subtitles on",toolTipSubtitlesOff:"Turn subtitles off",toolTipClosedCaptionsOn:"Turn closed captions on",toolTipClosedCaptionsOff:"Turn closed captions off",toolTipEmbed:"Get embed code",toolTipMute:"Mute",toolTipUnmute:"Unmute",toolTipCTAPlay:"Play {title}",toolTipFrameMedia:"{title} Media",toolTipChromecast:"Cast this programme",toolTipStopChromecast:"Stop casting",toolTipPicInPic:"Open Picture in Picture mode",toolTipStopPicInPic:"Exit Picture in Picture mode",ccSelectDevice:"Select casting device...",ccConnectingTo:"Connecting to",ccCastingTo:"Casting to",errorFlashPlayerNotInstalled:"You need to install Flash Player to play this content.",errorFlashIsNeeded:"Sorry, you need Flash to play this.",enableFlash:"Enable it in your browser or {link}.",enableFlashShort:"Enable it or {link}.",downloadFlashLink:"download Flash Player here",errorCantPlayInBrowser:"Sorry, this won't play in your web browser.",useMediaPlayerApp:"Use BBC Media Player app",pgHeader:"Parental Guidance Lock",pgAgeConfirmation:"I am aged 16 or over",pgClose:"Close pop up",pgContinue:"Continue",pgPasswordValidationError:"Please confirm your age before continuing",pgAriaAgeConfirmCheckBox:"Age confirmation check box. Checked.",pgAriaAgeConfirmCheckBoxUnchecked:"Age confirmation check box. Check to confirm you are sixteen or over.",pgTurnOnParentalGuidance:"Turn on the Parental Guidance Lock?",pgInfoPlusDownload:"lets you set up a PIN to control access to Guidance-labelled BBC content on your chosen browser.<p>To set up your PIN choose 'Turn On'. To continue without Parental Guidance choose 'Download'.</p>",pgInfoPlusPlay:"lets you set up a PIN to control access to Guidance-labelled BBC content on your chosen browser.<p>To set up your PIN choose 'Turn On'. To continue without Parental Guidance choose 'Play'.</p>",pgInfo:"lets you set up a PIN to control access to Guidance-labelled BBC content on your chosen browser.",pgTurnOn:"Turn On",pgEnterPIN:"Please enter a four-digit PIN",pgActivateInfo:"You will need your PIN to play Guidance-labelled content",pgPINValidationError:"Your PIN must be four digits",pgAriaPINEntryDescription:"PIN entry text field",pgAriaPINPrompt:"Please enter a valid four-digit PIN",pgEnterPINPrompt:"Please enter your four-digit PIN to continue",pgManageYourPIN:"Manage your PIN",pgUnlock:"Unlock",pgIncorrectPIN:"Incorrect PIN. Please try again",pgDownload:"Download",pgActivate:"Activate",newPgTurnOnParentalGuidance:"Turn on Parental Guidance Lock?",newPgTurnOnParentalGuidancePINsection:"Turn on Parental Guidance Lock",newPgTurnOnParentalGuidanceInsertPIN:"Parental Guidance Lock",newPgTurnOn:"Turn on PG Lock",newToolTipPlay:"Play without PG Lock",findOutMore:"Find out more",notSuitableForChildMessage:"This programme may not be suitable for children. Turn on PG Lock and we'll ask you to set up a PIN to control who can watch BBC content with a Guidance label on this browser.",newPgAgeConfirmationUnder16:"I've got permission.",newUnder16WithPermission:"You're signed in as someone who's under 16. So you need permission from a parent or guardian to play this.",newPgPlay:"Play",newPgEnterPIN:"Please choose a four-digit PIN.",newPgPINvalidationError:"Your PIN must be four digits long.",newPgIncorrectPIN:"Wrong PIN. Please try again.",newPgManageYourPIN:"Manage your lock",newPgEnterPINprompt:"Please enter your four-digit PIN.",newPgActivateInfo:"You'll need this to play any content with a Guidance label.",newPgEnterPINinfo:"This programme has a Guidance label.",newAgeConfirmationTitle:"Guidance",pgUnder16PermissionValidationError:"Please confirm you have permission before continuing"};o.get=function(e,t){var i=o[e];if(!i)return"";for(var n in t)if(t.hasOwnProperty(n)){var a=t[n]||"";i=i.replace("{"+n+"}",a)}return i};o.init=function(e,t){var a=e.lang;o.path=e.path.replace(/\/\/.*?\//,"/");o.code=i(a);var r=o.en;for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s]);n();o.updated=t};return o}(),ScreenReader=function(){function e(e){a=document.getElementById("p_alert");a.innerHTML="<p></p>";a.firstChild.textContent=e;a.style.display="block"}function t(t){clearTimeout(n);n=setTimeout(e,r,t)}function i(e){if(e){clearTimeout(n);if(a){a.innerHTML="";a.style.display="none"}}else t(Language.audioToolTipBuffering)}var n,a,r=500,o={alert:t,buffering:i};return o}(),ParentalGuidance=function(){function e(e,t){var i=document.getElementById(e),n=function(){i.style.transition="0.3s";t?i.style.backgroundColor="#f54997":i.style.color="#f54997"},a=function(){i.style.transition="0.3s";t?i.style.backgroundColor="#0c101c":i.style.color="#ffffff"};i.onmouseover=i.onfocus=n;i.onmouseout=i.onblur=a}function t(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function i(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function n(e,i){L.push(e);e.setAttribute("tabindex","0");e.onkeydown=function(i){i=i||window.event;var n=i.keyCode||i.which;if(9==n||13==n){t(i);if(9==n){var a=L.length-1;A=i.shiftKey?0===A?a:A-1:A===a?0:A+1;setTimeout(function(){L[A].focus()},200)}else setTimeout(function(){e.click()},200)}};if(i){A=L.length-1;e.focus()}}function a(){A=0;L=[];n(k)}function r(e,t,i){t&&i&&i.isUnder16&&(x=!1);var n="";if(x){e.style.backgroundPosition="center";n=Language.pgAriaAgeConfirmCheckBox}else{e.style.backgroundPosition="-30px";n=Language.pgAriaAgeConfirmCheckBoxUnchecked}e.setAttribute("aria-label",n);e.textContent=e.innerText=n}function o(e,t,n,a){var r=document.getElementById("pgErrorMessage"),o=document.getElementById("needPINinfo");if(r)i(r);else{r=document.createElement("div");r.id="pgErrorMessage";var s=r.style;s.width=C.style.width;s.backgroundColor="#252833";s.filter="alpha(opacity=70)";s.opacity=.7;s.marginTop="15px";s.marginBottom="5px";s.left="-26px";s.position="relative"}n?e.insertBefore(r,e.firstChild):o?o.appendChild(r):e.appendChild(r);var l=document.createElement("div"),u=l.style;u.fontSize="14px";u.position="relative";u.width="100%";u.color="#ffffff";u.fontSize="11px";u.textAlign="center";u.paddingTop=u.paddingBottom="10px";u.lineHeight="23px";if(a.ui.config.useHighResIcons){var d=document.createElement("div");d.innerHTML=t;d.style.display="inline-block";d.style.marginLeft="5px";var c=document.createElement("div"),p=c.style;p.width=p.height="18px";p.display="inline-block";var f=Utils.generateSVG(18,18,"guidance-alert","p_guidance-alertIcon");f.style.top="4px";c.appendChild(f);l.appendChild(c);l.appendChild(d)}else l.innerHTML='<span style="display:inline-block;  background-image: url(//emp.bbci.co.uk/emp/assets/2.0.18/alert-color.png); background-repeat: no-repeat; background-size: 100% 100%; margin-right:5px; width:15px; height:13px;"></span>'+t;r.appendChild(l)}function s(e,i){if(P)return!1;e.nowShowing=!0;document.body.style.cursor="default";P=document.createElement("div");P.setAttribute("tabindex","0");P.id="parentalGuidanceBackground";P.className="smpPG";var n=P.style;n.width=n.height="5000px";n.left=n.top="-500px";n.zIndex="2147483600";n.backgroundColor="#333333";n.filter="alpha(opacity=85)";n.opacity=.85;C=document.createElement("div");C.id="guidancePopup";C.setAttribute("role","alertdialog");C.setAttribute("aria-labelledby","pgHeaderTitle");C.className="smpPG";var a=C.style;a.position=n.position="fixed";a.width="390px";a.top="50%";a.marginTop="-175px";a.marginLeft="-195px";a.left="50%";a.lineHeight="normal";a.verticalAlign="middle";a.color="white";a.fontSize="22px";a.zIndex="2147483600";a.backgroundColor="#0c101c";a.fontFamily="Arial, sans-serif";a.textAlign="left";i.appendChild(P);i.appendChild(C);C.onkeydown=function(t){t=t||window.event;var i=t.keyCode||t.which;27===i&&e.close(!1)};var r=document.createElement("div");r.id="guidanceContainer";r.style.paddingRight=r.style.paddingLeft="26px";r.style.textAlign="center";C.appendChild(r);var o=document.createElement("div");o.id="pgHeaderTitle";o.style.height="42px";o.style.position="relative";o.style.marginTop="35px";r.appendChild(o);_=document.createElement("span");_.innerHTML=Language.pgHeader;_.id="pgHeader";_.style.fontSize="26px";_.style.color="#f54997";o.appendChild(_);I=document.createElement("div");I.id="guidanceBody";I.style.position="relative";I.style.width="100%";r.appendChild(I);S=document.createElement("div");S.id="guidanceFooter";var s=S.style;s.width="100%";s.height="42px";s.bottom="0px";s.display="table";s.textAlign="center";C.appendChild(S);k=document.createElement("a");k.setAttribute("aria-label",Language.pgClose);k.id="pgExit";var l=k.style;k.title=Language.pgClose;l.position="absolute";l.right=l.top="12px";l.cursor="pointer";l.width=l.height="18px";if(e.ui.config.useHighResIcons){var u=Utils.generateSVG(18,18,"gel-exitLink","p_gel-exitLinkIcon");k.appendChild(u)}else l.backgroundImage="url(//emp.bbci.co.uk/emp/assets/2.0.18/GEL_Remove_icon.png)";l.backgroundRepeat="no-repeat";C.appendChild(k);var d=!1;setTimeout(function(){d=!0},500);k.onclick=function(i){if(d){i=i||window.event;t(i);e.player.trackAction(k,"click");e.close(!1)}};var c=function(){if(!u){l.transition="background-image 0.2s ease-in-out";l.backgroundImage="url(//emp.bbci.co.uk/emp/assets/2.0.18/GEL_Remove_icon_hover.png)"}},p=function(){if(!u){l.transition="background-image 0.2s ease-in-out";l.backgroundImage="url(//emp.bbci.co.uk/emp/assets/2.0.18/GEL_Remove_icon.png)"}};k.onmouseover=k.onfocus=c;k.onmouseout=k.onblur=p;return!0}function l(e){var t=document.createElement("div"),i=t.style;i.marginTop="-1px";i.position="absolute";i.filter="alpha(opacity=20)";i.width="100%";i.height="1px";i.backgroundColor="#252833";e.appendChild(t)}function u(t,i){function a(){if(l){t.player.trackAction(r.id,"click");u()}}var r=document.createElement("a");r.id=i.id;r.innerHTML=i.text;r.setAttribute("aria-label",i.text+" button");var o=r.style;o.cursor="pointer";try{o.display="table"}catch(s){o.display="block"}o.lineHeight="3.5";o.width="100%";o.fontSize="14px";o.color="#ffffff";S.appendChild(r);o.backgroundColor="#0c101c";e(i.id,!0);var l=!1;setTimeout(function(){l=!0},500);var u=i.clickFunction;r.onclick=a;n(r,i.focus);return r}function d(e,t,n){i(S);l(S);var a=u(e,t);if(n){a.style.borderBottom="1px solid #252833";u(e,n)}}function c(e,t){i(I);a();var s=document.createElement("div");s.id="guidanceMessage";var l=s.style;l.marginTop=e.ui.config.useHighResIcons?"0":"15px";l.marginBottom="5px";l.width="100%";l.position="relative";l.fontSize="13px";I.appendChild(s);p("newAgeConfirmationTitle");if(e.ui.config.useHighResIcons){var u=document.createElement("div");u.id="guidanceG";u.style.display="inline-block";var c=Utils.generateSVG(44,44,"guidance","p_guidanceIcon");c.style.top="10px";u.appendChild(c);s.appendChild(u)}else{var m=document.createElement("div");m.id="guidanceG";var g=m.style;g.display="inline-block";g.margin="auto";g.borderRadius="50%";g.width=g.height="15px";g.backgroundColor="red";g.position="relative";g.top="-2px";g.fontSize="12px";s.appendChild(m);var h=document.createElement("span");h.innerHTML="G";var y=h.style;y.lineHeight="normal";y.position="relative";y.left="-0.5px";y.top="1px";y.color="#ffffff";m.appendChild(h);s.appendChild(m)}var v=document.createElement("span");v.id="guidanceText";v.innerHTML=e.isUnder16?t+"</br></br>"+Language.newUnder16WithPermission:t;y=v.style;y.left="0px";y.top="16px";y.marginLeft=e.ui.config.useHighResIcons?"0":"5px";y.lineHeight="16px";y.color="#b2b7c4";s.appendChild(v);var b=document.createElement("div");b.id="ageConfirm";var T=b.style;T.width="100%";T.height="57px";T.position="relative";T.fontSize="14px";T.color="#ffffff";T.display="-ms-inline-flexbox";T.justifyContent="center";I.appendChild(b);var E=document.createElement("button");E.id="ageConfirmCheck";var P=E.style;P.background="url(//emp.bbci.co.uk/emp/assets/2.0.18/tick.png) no-repeat center";P.backgroundPosition="-30px";P.position="absolute";P.top="16px";P.height=P.width="25px";P.cursor="pointer";P.backgroundColor="#ffffff";P.borderWidth="0";P.textIndent="-9999px";P.whiteSpace="nowrap";P.overflow="hidden";b.appendChild(E);n(E,!0);r(E,!0,e);var C=document.createElement("span");C.innerHTML=e.isUnder16?Language.newPgAgeConfirmationUnder16:Language.pgAgeConfirmation;C.style.position="relative";C.style.top="20px";C.style.marginLeft="35px";b.appendChild(C);var S=!1;setTimeout(function(){S=!0},500);E.onclick=function(){if(S){x=!x;r(E)}};var k=function(){if(e.isUnder16&&x){e.player.dispatch({type:"setGuidanceSkipped",skipped:!0});e.player.dispatch({type:"setUnder16Permission",hasPermission:!0});e.close(!0)}else if(x)f(e);else{var t=e.isUnder16?Language.pgUnder16PermissionValidationError:Language.pgPasswordValidationError;o(s,t,!1,e)}},_=e.isUnder16?Language.newPgPlay:Language.pgContinue;d(e,{id:"pgAgeContinue",text:_,clickFunction:k})}function p(e){var t=document.getElementById("pgHeader");t.innerHTML=Language[e]}function f(t){i(I);a();var r=document.createElement("div");r.setAttribute("role","alertdialog");r.setAttribute("aria-labelledby","pgInfoHeader");r.setAttribute("aria-describedby","pgInfo");r.style.marginBottom="24px";I.appendChild(r);p("newPgTurnOnParentalGuidance");if(O)var o="pgInfo",s="pgUnlock";else{var l=t._intent;if("download"==l){o="pgInfoPlusDownload";s="pgDownload"}else if("play"==l){o="pgInfoPlusPlay";s="newToolTipPlay"}else{o="pgInfo";s=l}}var u=document.createElement("div");u.id="infoLinkContainer";var c=document.createElement("div");c.style.color="#b2b7c4";var f=Language.notSuitableForChildMessage+'</br> </br>  <a id="pgLink" target="_blank" style="color:#ffffff; text-decoration:none; font-size:0.9em;" href="//www.bbc.co.uk/iplayer/guidance"> <div style="display:inline-block; margin-right: 5px; color:black; font-weight:bold; width:13px; height:13px; background-color:white; border-radius:50px;">i</div>'+Language.findOutMore+"</a> ",m=document.createElement("div");m.id="pgInfo";m.style.fontSize="13px";m.style.color="#868686";m.style.marginTop="35px";r.appendChild(m);m.appendChild(u);u.style.margin=" 0 auto";u.appendChild(c);c.innerHTML=f;var g=document.getElementById("pgLink");g.setAttribute("aria-label",Language.findOutMore);g.style.outline="none";c.style.display="inline-block";u.style.textAlign="center";var y=m.getElementsByTagName("p");if(y)for(var v=0;y.length>v;v++){y[v].style.color="#868686";y[v].style.fontSize="13px"}var b=document.getElementById("pgLink"),T=!1;setTimeout(function(){T=!0},500);b.onclick=function(){return T};n(b,!0);var E=function(){if(T){t.player.dispatch({type:"setGuidanceSkipped",skipped:!0});h(t)}},P=function(){if(T){t.player.dispatch({type:"setGuidanceSkipped",skipped:!0});t.close(!0)}},C={id:"pgTurnOn",text:Language.newPgTurnOn,clickFunction:E},S={id:"toolTipPlay",text:Language[s],clickFunction:P};d(t,C,O?null:S);e("pgLink")}function m(e){var t=document.createElement("div");t.id="pinEntry";t.style.width="100%";t.style.height="40px";t.style.marginBottom="20px";e.appendChild(t);var i=document.createElement("input"),n=i.style;i.setAttribute("maxlength",4);n.letterSpacing="5px";n.display="block";n.margin="0 auto";n.height="100%";n.width="60%";n.padding="0px";n.resize="none";n.color="#868686";n.fontSize="30px";n.textAlign="center";i.setAttribute("type","password");i.pattern="[0-9]*";t.appendChild(i);return i}function g(e,t){var i=!1,n=function(e){e=e||window.event;var n=e.keyCode||e.which;13===n&&i&&setTimeout(t,300)};setTimeout(function(){i=!0},400);e.addEventListener("keyup",n)}function h(e){i(I);a();p("newPgTurnOnParentalGuidancePINsection");var t=document.createElement("div");t.id="activatePIN";t.style.marginTop="35px";t.style.fontSize="14px";t.style.color="#ffffff";I.appendChild(t);var r=document.createElement("span");r.innerHTML=Language.newPgEnterPIN;r.style.fontSize="14px";r.style.color="#ffffff";t.appendChild(r);var s=document.createElement("div");s.innerHTML='<span style="color:#b2b7c4;">'+Language.newPgActivateInfo+"</span>";s.style.marginTop="10px";s.style.marginBottom="24px";s.style.fontSize="14px";s.style.color="#868686";I.appendChild(s);w=m(I);w.setAttribute("aria-label",Language.pgAriaPINEntryDescription+"."+Language.pgAriaPINPrompt);n(w,!0);var l=function(){if(/^\d{4}$/.test(w.value)){var t=w.value;e.player.dispatch({type:"setPIN",PIN:t});e.close(!O)}else{w.value="";o(s,Language.newPgPINvalidationError,!1,e);w.focus()}},u=T(e._intent,"pgActivate");g(w,l);d(e,{id:"pgActivate",text:Language[u],clickFunction:l})}function y(t,i){var n=document.createElement("div");n.style.marginBottom="25px";n.style.width="100%";n.style.height="15px";t.appendChild(n);var a=document.createElement("a");a.setAttribute("target","_blank");a.setAttribute("href","//www.bbc.co.uk/iplayer/guidance");a.id="manageLock";a.innerHTML=i;a.style.color="#ffffff";a.style.textDecoration="none";a.style.fontSize="12px";n.appendChild(a);e("manageLock");return a}function v(e){i(I);a();p("newPgTurnOnParentalGuidanceInsertPIN");var t=document.createElement("div"),r=document.createElement("div"),o=document.createElement("span"),s=document.createElement("div");s.id="needPINinfo";t.id="enterPIN";o.innerHTML=Language.newPgEnterPINprompt;t.style.marginTop=t.style.paddingBottom="16px";t.style.width="100%";t.style.position="relative";t.style.fontSize=o.style.fontSize="14px";o.style.color="#ffffff";t.style.marginTop="5px";I.appendChild(t);t.appendChild(r);r.appendChild(o);t.appendChild(s);s.innerHTML=Language.newPgEnterPINinfo;s.style.color="rgb(134, 134, 134)";s.style.marginTop="15px";w=m(I);w.setAttribute("aria-label",Language.pgAriaPINEntryDescription+"."+Language.newPgEnterPINprompt);n(w,!0);var l=y(I,Language.newPgManageYourPIN);n(l);l.onclick=function(){return u};var u=!1;setTimeout(function(){u=!0},500);var c=function(){if(u){var t=w.value;e.isUnder16&&e.player.dispatch({type:"setUnder16Permission",hasPermission:!0});e.player.dispatch({type:"verify",verifyPIN:t,lockClicked:O})}};g(w,c);var f=T(e._intent,"pgUnlock");d(e,{id:"pgTurnOff",text:Language[f],clickFunction:c})}function b(){clearTimeout(M);M=setTimeout(E,100)}function T(e,t){return O?t:"download"==e?"pgDownload":"play"==e?"toolTipPlay":e}function E(){if(P){var e=P.style;e.left=e.top="-500px";e.height=e.width="5000px"}if(C){var t=Math.floor(window.innerWidth/2-C.offsetWidth/2);C.style.left=t+"px";var i=window.innerHeight-C.offsetHeight;if(window.innerHeight>=C.offsetHeight)var n=Math.floor(i/2);else n=2;C.style.marginTop=C.style.marginLeft="0px";C.style.top=n+"px"}}var P,C,I,S,k,_,w,A,L,x,O,M,D=function(e,t){var i=this;i.ui=e;i.player=t;i.nowShowing=!1;L=[];x=!1;i.isOver16=t.config.over16;i.isUnder16=t.config.under16;i.isOver16&&i.isUnder16&&(i.isOver16=!1);return i};D.prototype={showInPlayerGuidance:function(e,t){var i=this;if(e){O=e.lockClicked;i._intent=e.intent||"play"}var n=i.player.config.guidance,a=n.guidanceSkipped;if(s(i,t)){n.hasGuidancePIN&&n.isGuidanceLocked&&!n.under16permissionConfirmed?v(i):O&&a||i.isOver16?f(i):c(i,e.guidance);window.addEventListener("resize",E);window.addEventListener("orientationchange",b)}},guidanceLock:function(){var e=this;e.player.dispatch({type:"guidanceLocked",locked:!0})},verified:function(e){var t=this;if(e.isCorrect)t.close(!O);else{w.value="";o(_,Language.newPgIncorrectPIN,!1,t);w.focus()}},close:function(e,t){var i=this;i.nowShowing=!1;if(P){P.parentNode.removeChild(P);P=void 0}if(C){C.parentNode.removeChild(C);C=void 0}if(!t){var n=!1;if(i.player.guidanceOk){n=!0;e&&i.player.startPlayback()}i.player.delayedDispatch({type:"guidanceClosed",success:n})}window.removeEventListener("resize",E);window.removeEventListener("orientationchange",b)}};return D}(),BUFFER_SHOW_DELAY=750,UI=function(){function e(e){e=(e+"").replace("0x","#");return e}function t(e){return e&&"block"===e.style.display}function i(e){return e?"block":"none"}function n(e){if(e.controls.parentElement){var t=e.controls.parentElement.querySelector(":hover");if(!t)return!1;if(t==e.controls)return!0;var i=document.getElementById("p_pluginContainer");if(i==t){var n=i.querySelectorAll(":hover");if(n.length>0&&!Utils.hasClass(n[n.length-1],"notInteractiveContent"))return!0}return!1}}function a(e,t,i,n){var a=i||Utils.getOffset(t)-n<=0;Utils.setOrUnsetClass(t,"p_covered",a);return a}function r(e){e.enabled&&(e.fullscreenState.buffer?e.showBuffer():e.hideBuffer())}function o(e){e.forcedInactive=!0;e.fullscreenState.buffer=t(e.buffer);Device.requiresFullscreenResizeDelay&&e.hideControlBar()}function s(e){var t=e.pIp.supported,i=e.pIp.isSupported();t!=i&&e.updateLayout()}function l(e,t){if(e){Utils.className(document.body,t);return 1}Utils.className(document.body,"",t);return 0}function u(e,t,i){e.stylesheet.insertRule(".zoomEffectTransition {-webkit-transition-duration: "+t+"s; -moz-transition-duration: "+t+"s; transition-duration: "+t+"s;}",0);e.stylesheet.insertRule(".zoomEffectScale {transform: scale("+i+"); -webkit-transform: scale("+i+"); -ms-transform: scale("+i+"); -moz-transform: scale("+i+");}",0)}function d(e,t){clearTimeout(ht);ht=setTimeout(function(){e.stylesheet.insertRule(".fadeEffect {-webkit-transition: opacity "+t+"s ease-out; -moz-transition: opacity "+t+"s ease-out; transition: opacity "+t+"s ease-out; opacity: 0;}",0)},5)}function c(e,t){clearTimeout(yt);yt=setTimeout(function(){Utils.className(t,"p_onScreen","p_offScreenLeft p_offScreenRight")},5)}function p(e,t,i,n){Utils.deleteCssRules(e,t);for(var a=0;t.length>a;a++){var r=t[a];e.insertRule(".p_buttonHover."+r+", .focusEnabled ."+r+":focus { background-color: "+i+"; color: "+n+" }",0)}}function f(e){var t=getComputedStyle(e.progressBar).getPropertyValue("transform")+"";return parseFloat(t.split(",")[0].split("(")[1])}function m(e){Utils.className(e.progressBar,"","p_progressBarAnimate");Utils.className(e.seekThumb,"","p_seekThumbAnimate");h(e,null);Utils.applyVendorStyles([e.progressBar,e.seekThumb],"transform",null);if(e.progressBar){e.progressBar.style.width=null;e.progressBar.animation.cssApplied=!1;e.progressBar.animation.paused=!1;e.progressBar.animation.animating=!1}}function g(e){e.showControlBar();e.disallowFade=!0;setTimeout(function(){e.disallowFade=!1;D(e,{type:"mouse"})},250)}function h(e,t){Utils.applyVendorStyles([e.progressBar,e.seekThumb],"animationPlayState",t)}function y(e){function t(){e.mediaEnded=!1;e.waiting=!1;e.hideErrorDialog();if(e.player.isAudio){e.showPoster();e.pIp.exitPicInPic()}else e.hidePoster();e.hideBuffer();e.hideCta();e.playingState();e.dispatchUIInfo();e.updateLayout()}function i(){e.player.isAudio||e.config.poster.availableWhenSettingUp||e.hidePoster();e.showBuffer();e.hideCta();e.updateLayout();if(!Device.iPhoneOutOfPagePlayback||e.player.isAudio){e.showControlBar(!0);e.playingState();e.config.thumbnail.enabled&&e.player.thumbScrub.extractManifestData()}}return{blockUnwanted:!0,tryingToPlay:i,play:i,losingControl:function(){e.hideCta();e.hideBuffer();e.hidePoster();e.hideControlBar(!0)},mediaItemChanged:function(){m(e);e.setCta(e.player.mediaItem&&e.player.mediaItem.type);e.seekDone&&e.seekDone();e.pIp.isSupported();e.checkIfCanDisplaySeekBar();e.dispatchUIInfo()},playing:t,pause:function(){e.notPlayingState();e.updateLayout();if(e.config.poster.availableWhenPaused){e.showPoster();e.player.hidePlayer()}},waiting:function(){if("playing"==e.state){e.showBuffer();e.player.qos.buffering();e.waiting=!0;e.updateLayout()}},seeking:function(){h(e,"paused");e.showBuffer();e.markersUI.resetProgress()},seeked:function(){if(!e.isSeeking){m(e);this.timeupdate()}},playerDisconnected:function(){e.hideErrorDialog();e.player.inErrorState=!1;e.notPlayingState();e.seekDone&&e.seekDone();e.hideAllControls();e.active&&e.showCta();e.showPoster()},playlistStopped:function(){e.seekDone&&e.seekDone();e.hideAllControls();e.showCta();e.showPoster();e.hideBuffer();e.player.hidePlayer()},canPauseChange:function(){e.markersUI.testDrawMarkers(!0)},ended:function(){e.seekDone&&e.seekDone();e.resetGuidance();e.notPlayingState();m(e);e.markersUI.resetProgress()},playlistEnded:function(t){if(!t.moreQueued){e.mediaEnded=!0;e.showPoster();if(e.active)if(e.config.controls.availableOnMediaEnded||e.player.isFullScreen||e.player.mediaPlayer.webkitIsFullscreen){e.updateProgressBar(e.player.timeHelper.percent);e.showControlBar()}else{e.hideAllControls();e.showCta()}Device.iPhoneOutOfPagePlayback&&e.player.mediaPlayer.webkitExitFullscreen&&e.player.mediaPlayer.webkitExitFullscreen()}},error:function(t){switch(t.code){case SMPError.SUBS_FAILED:e.UIinfoObject.subtitles=!1;e.updateLayout();break;case SMPError.FLASH_NOT_CREATED:case SMPError.FLASH_NOT_INITIALISED:case SMPError.FLASH_NOT_INSTALLED:e.flashFallbackDialog(t,!1,null);break;case SMPError.CANT_PLAY_IN_ANDROID_BROWSER:e.flashFallbackDialog(t,!0,function(){e.player.playInBump()});break;default:t.nonPlayer||t.severity!=CRITICAL||e.drawErrorDialog(t)}},playlistLoading:function(){e.seekDone&&e.seekDone();e.readyToPlay=!1;e.hideErrorDialog();e.notPlayingState();e.showBuffer();e.hideCta();e.player.timeHelper.reset();e.updateProgressBar(0);e.updateTimeDisplay();e.hidePoster();e.container.style.backgroundImage="";e.markersUI.resetStoredMarkers();e.mediaEnded=!1},playlistLoaded:function(t){e.hideErrorDialog();e.player.timeHelper.reset();e.readyToPlay=!0;var i=e.player.playlist.mediaType;e.setCta(i);e.hitAreaUpdate();if(e.player.autoPlayNextItem){e.showBuffer();e.guidancePopUp(t.fromQueue);("audio"==i||e.config.poster.availableWhenSettingUp)&&e.showPoster()}else{e.showPoster();e.resetGuidance();e.hideBuffer();e.hideAllControls();Utils.asyncDelay(function(){if(!e.player.tryingToPlay){if(!e.player.guidanceOk&&(400>e.player.mediaContainer.clientWidth||300>e.player.mediaContainer.clientHeight)){e.player.minimise();setTimeout(function(){e.showCta()},500)}e.notPlayingState();e.showCta()}})}},beforeFullscreenEnter:function(){o(e);e.pIp.exitPicInPic()},beforeFullscreenExit:function(){o(e);Utils.className(document.body,"","fullscreen");b(e.fullscreenButton,"p_fullscreenButton",Language.toolTipEnterFullScreen,Language.toolTipEnterFullScreen,e.config.useHighResIcons&&"fullscreen-enter")},fullscreenEnter:function(){Utils.className(document.body,"fullscreen");b(e.fullscreenButton,"p_fullscreenButtonReturn",Language.toolTipExitFullScreen,Language.toolTipExitFullScreen,e.config.useHighResIcons&&"fullscreen-return");e.UIinfoObject.isFullscreen=!0;e.forcedInactive=!1;x();setTimeout(x,200);e.enabled?g(e):e.showControlBarRequired=!0},fullscreenExit:function(){e.UIinfoObject.isFullscreen=!1;Utils.deleteCssRules(e.stylesheet,[".updatedFullscreenPosition",".p_gradientBottomfiller"]);Utils.className(e.controls,"","updatedFullscreenPosition");Utils.className(e.gradientLayer,"","updatedFullscreenPosition");if(e.mediaEnded&&!e.config.controls.availableOnMediaEnded||e.inPrePlayState){e.enabled=!0;e.showPoster();e.hideAllControls();e.showCta();e.enabled=!1}clearTimeout(e.updateLayoutTimer);e.updateLayoutTimer=setTimeout(function(){e.updateLayout();e.Subtitles.updatePositions();x()},500);e.forcedInactive=!1;x();r(e)},timeupdate:function(){e.timeUpdate()},languageUpdated:function(){v(e.playOutsidePageButton,e.getPlayOutsidePageButtonClass(),e.getPlayOutsidePageButtonClass(),e.getPlayOutsidePageTurnOffText(),e.getPlayOutsidePageTurnOnText(),e.Chromecast.isAvailable);mt(e);v(e.playPauseButton,"p_pauseButton",e.playClassName,Language.toolTipPause,Language.toolTipPlay,"playing"==e.state);v(e.embedButton,"p_embedButton","p_embedButton",Language.toolTipEmbed,Language.toolTipEmbed,e.config.embed.enabled);v(e.volumeButton,"p_volumeButton mute","p_volumeButton audio",Language.toolTipUnmute,Language.toolTipMute,e.player.muted,e.config.useHighResIcons&&"mute",e.config.useHighResIcons&&"audio");e.ctaUpdate();e.hitAreaUpdate();e.updateGuidance();v(e.fullscreenButton,"p_fullscreenButton","p_fullscreenButtonReturn",Language.toolTipEnterFullScreen,Language.toolTipExitFullScreen,!e.player.isFullScreen);e.seekHelpText.textContent=Language.seekBarDescription},durationchange:function(){var t=e.player,i=t.duration;t.timeHelper.update(0/0,i);i>1&&(t._duration=i);e.dispatchUIInfo();e.checkIfCanDisplaySeekBar();e.markersUI.updateMarkers();s(e)},volumechange:function(){if(e.volumeControls){e.updateVolumeDisplay();
e.muteState(e.player.muted)}},subtitles:function(){mt(e)},guidanceHide:function(){e.resetGuidance();Utils.className(document.body,"","p_continuousGuidanceOrWarning")},chromecast:function(t){v(e.playOutsidePageButton,e.getPlayOutsidePageButtonClass()+" p_controlBarButton_on",e.getPlayOutsidePageButtonClass(),e.getPlayOutsidePageTurnOffText(),e.getPlayOutsidePageTurnOnText(),t.active)}}}function v(e,t,i,n,a,r,o,s){r?b(e,t,n,n,o):b(e,i,a,a,s)}function b(e,t,i,n,a){if(e){Utils.hasClass(e,"p_buttonHover")&&(t+=" p_buttonHover");e.setAttribute("aria-label",n);e.className="p_button p_controlBarButton "+t;e.title=i;a&&updateExistingSvg(e,a);var r=e.getElementsByClassName("p_hiddenElement")[0];r&&(r.innerHTML=i)}}function T(e){e.addEventListener("mouseover",function(){Utils.className(e,"p_buttonHover")});e.addEventListener("mouseout",function(){Utils.className(e,"","p_buttonHover")});e.addEventListener("touchstart",function(){Utils.className(e,"p_buttonHover p_buttonTouch")},{passive:!0});e.addEventListener("touchend",function(){Utils.className(e,"","p_buttonHover p_buttonTouch")})}function E(e,t,i,n,a,r,o,s){var l=createElement("button","p_button",'<span class="p_hiddenElement" aria-hidden="true"></span>',i);if(o){var u=createElement("div","p_selected_background");u.appendChild(createElement("div","p_selected_indicator"));l.appendChild(u)}l.tabIndex=a;T(l);Utils.multiAddEventListener(l,"touchend click mouseup",I(t));l.setAttribute("role","button");l.setAttribute("aria-live","polite");l.addEventListener("focusin",r.focusInButton);l.addEventListener("focusout",r.fadeControlBar);b(l,e,i,n,r.config.useHighResIcons&&s);return l}function P(e){if(Utils.hasClass(e,"p_chapterMarker")||Utils.hasClass(e,"p_keyMoment"))return!0;var t=e&&(e.tagName+"").toLowerCase();return Lt[t]}function C(e){e.preventDefault&&e.preventDefault();e.stopPropagation&&e.stopPropagation()}function I(e){return function(t){e&&e(t);C(t);return!1}}function S(e){return{seekOffset:{get:function(){return e.seekBar.offsetLeft+e.controls.offsetLeft}},active:{get:function(){return e.inError||e.forcedInactive||e.player.destroying?!1:e.readyToPlay}},inError:{get:function(){return e.player.inErrorState||e.error&&e.error.className.indexOf("p_errorDialog")>=0?!0:!1}},playClassName:{get:function(){var t="";e.config.controls.iplayerPlay&&(t="p_iplayerPlay ");return t+"p_playButton"}},markerData:{get:function(){return e.markersUI._markerData},set:function(t){e.markersUI.setMarkers(t)}},miniModeEnabled:{get:function(){if(e.config.miniMode.enabled)return!0;var t=Utils.getOffset(e.player.mediaContainer,"width"),i=Utils.getOffset(e.player.mediaContainer,"height");if(!(e.player.isAudio&&200>i&&t/i>2.5))return!1;e.config.miniMode.enabled=!0;e.updateConfig(e.config)}}}}function k(e,t){return e.config.cta.iplayer?t?"play-iplayer-audio":"play-iplayer":t?"audio":"play"}function _(e){return function(t){e.player.isFullScreen||"webkitfullscreenchange"==t.type&&e.player.mediaPlayer.webkitisfullscreen||e.player.dispatch({type:"playlistStopped"})}}function w(e){return function(){if(e.player.isFullScreen&&!P(document.activeElement)&&!e.pGuidance.nowShowing){if(!e.controls.visible){e.forcedControlsInteraction=!0;setTimeout(function(){e.forcedControlsInteraction=!1},DUPLICATE_EVENT_TIMEOUT+50)}Utils.asyncDelay(e.focusPlayPauseButton)}}}function A(e){return function(t){if(e.player.isFullScreen&&Device.canTabbing)if(!e.isControlsInteraction||document.body.contains(t.relatedTarget)&&t.relatedTarget!=document.body)e.isControlsInteraction=!0;else{Utils.asyncDelay(e.focusPlayPauseButton);e.isControlsInteraction=!1}}}function L(e){function t(t){var i="play";if(e.player.paused)e.player.requestGuidanceAndPlay();else{i="pause";e.player.pause()}e.player.trackAction(i,"shortcut_key_press");C(t)}return function(i){Utils.className(document.body,"focusEnabled");if(!i.metaKey&&!i.ctrlKey){if(i.keyCode==KEY_SPACE)e.config.controls.spaceControlsPlayback&&(i.target==document.body||Utils.hasClass(event.target,"p_accessibleHitArea")||i.target==e.seekThumb)&&t(i);else if(i.keyCode==KEY_F){e.player.trackAction(e.player.isFullScreen?"exit_full_screen":"enter_full_screen","shortcut_key_press");e.player.toggleFullscreen()}else if(i.keyCode==KEY_M){e.player.trackAction(e.player.mediaPlayer.muted?"mute":"unmute","shortcut_key_press");e.player.muted=!e.player.muted}if("MediaPlayPause"==i.code||"MediaPlayPause"==i.key)t(i);else if("MediaTrackNext"==i.code||"MediaTrackNext"==i.key){e.player.next();C(i)}else("MediaTrackPrevious"==i.code||"MediaTrackPrevious"==i.key)&&C(i)}}}function x(){Utils.className(document.body,"","focusEnabled")}function O(e,t){return function(i){var n=t==SMPError.EMBED_NOT_ALLOWED,a=n?"embed_error_navigate":"error",r=Utils.getActionType(i);if(!n){var o={playlistObject:e.player.playlist,startTime:e.player.timeHelper.time,autoplay:!0};t==SMPError.CANNOT_MAINTAIN_LOCK&&(o.maintainTheLock=!1);var s=e.markerData,l=e.player.webcastData;e.player.api.loadPlaylist2(o);e.player.api.setData({name:"SMP.markers",data:s});e.player.api.setData({name:"SMP.webcastData",data:l})}e.player.trackAction(a,r)}}function M(e){return function(){e.controlsOpenComplete=e.volumeControlsVisible}}function D(e,t){clearTimeout(e.idleTimeoutInterval);var i=t.type.substring(0,5),n="point"==i&&"mouse"!=t.pointerType||"touch"==i?e.config.controls.timeoutTouch:e.config.controls.timeout;e.Chromecast.isCasting||e.mediaEnded||(e.idleTimeoutInterval=setTimeout(function(){e.hideControlBar(!1,i)},n))}function N(e){var t,i,n,a=!1,r=function(){a=!1},o=!1,s=function(t){if(!a){e.showControlBar();e.player.isPlaying360&&e.player.threeSixty.showCompass();D(e,t);a=!0;setTimeout(r,DUPLICATE_EVENT_TIMEOUT)}},l=function(){if(!a){e.hideControlBar();a=!0;setTimeout(r,DUPLICATE_EVENT_TIMEOUT)}};return function(a){e.isControlsInteraction=!(a.target==e.player.mediaPlayer||Utils.hasClass(a.target,"notInteractiveContent"));if("keyup"!=a.type)if(e.isControlsInteraction||e.inPrePlayState||e.miniModeEnabled||!e.config.fullscreen.dblclick||"dblclick"!=a.type){if(!e.inPrePlayState&&!e.player.outOfControl||e.inPrePlayState&&e.player.isFullScreen){if("pointerdown"==a.type||"mousedown"==a.type||"touchstart"==a.type){if(e.player.isPlaying360){o=!0;t="touchstart"==a.type?a.changedTouches[0].clientX:a.clientX;i="touchstart"==a.type?a.changedTouches[0].clientY:a.clientY}return}if(!o&&("mousemove"==a.type||"pointermove"==a.type&&"mouse"==a.pointerType)){if(n&&n.clientX==a.clientX&&n.clientY==a.clientY)return;n=a;if(e.config.controls.activeStartsAt||e.player.isPlaying360){var r=a.clientY/e.container.clientHeight,u=e.config.controls.activeStartsAt?e.config.controls.activeStartsAt:.8;if(u>r)return}s(a);return}if("pointerup"==a.type||"mouseup"==a.type||"touchend"==a.type){var d="touchend"==a.type?a.changedTouches[0].clientX:a.clientX,c="touchend"==a.type?a.changedTouches[0].clientY:a.clientY;(!e.player.isPlaying360||Math.abs(d-t)<10&&Math.abs(c-i)<10)&&(!e.controls.visible||e.isControlsInteraction||e.forcedControlsInteraction?e.isControlsInteraction||s(a):l());o=!1}}}else e.player.toggleFullscreen(a.type);else{Utils.className(document.body,"focusEnabled");Utils.hasClass(a.target,"p_noShowOnKey")||s(a)}}}function R(e,t){var i,n;if(!t)return!1;if("touchmove"==e.type){i=e.changedTouches[0].pageX;n=e.changedTouches[0].pageY}else{i=e.pageX;n=e.pageY}return!t.contains(document.elementFromPoint(i-window.pageXOffset,n-window.pageYOffset))}function B(e){return Utils.getActionFn(function(t){if((e.player.paused||e.player.ended)&&"notplaying"===e.state){e.player.requestGuidanceAndPlay();e.player.trackAction("play",t)}else if("playing"===e.state){e.player.pause();e.player.trackAction("pause",t)}})}function U(e){return Utils.getActionFn(function(t){e.player.trackAction("call_to_action",t);e.player.requestGuidanceAndPlay(!1,!0);Device.trident&&setTimeout(function(){e.playPauseButton.focus();e.hideControlBar();x()},100)})}function F(e){return Utils.getActionFn(function(){e.eventCallbacks.guidanceHide()})}function H(e){return Utils.getActionFn(function(){var t=e.player.config.guidance;!t.isGuidanceLocked&&t.hasGuidancePIN?e.pGuidance.guidanceLock():e.player.guidanceShow(!0)})}function W(e){return Utils.getActionFn(function(t){var i=e.player.isFullScreen?"exit_full_screen":"enter_full_screen";e.player.toggleFullscreen(t);setTimeout(e.focusPlayPauseButton,20);e.player.trackAction(i,t)})}function G(e){return Utils.getActionFn(function(t){e.Subtitles.toggle(t);mt(e)})}function V(e){return Utils.getActionFn(function(t){e.pIp.supported&&e.config.pictureInPicture.enabled?e.pIp.toggle(t):e.Chromecast.toggle(t);v(e.playOutsidePageButton,e.getPlayOutsidePageButtonClass()+" p_controlBarButton_on",e.getPlayOutsidePageButtonClass(),e.getPlayOutsidePageTurnOffText(),e.getPlayOutsidePageTurnOnText(),e.Chromecast.isCasting)})}function j(e){return Utils.getActionFn(function(t){e.player.dispatch({type:"embed"});e.player.pause();e.player.minimise();e.player.trackAction("embed",t)})}function q(e){return Utils.getActionFn(function(t){e.player.muted=!e.player.muted;var i=e.player.mediaPlayer.muted?"mute":"unmute";e.player.trackAction(i,t)})}function z(e){return function(t){e.player.muted=!e.player.muted;var i=e.player.mediaPlayer.muted?"mute":"unmute";e.player.trackAction(i,Utils.getActionType(t))}}function Y(e){return function(t){if("mouse"==t.pointerType){var i=t.clientX,n=t.clientY;e.volumeControls.contains(document.elementFromPoint(i,n))?e.showVolumeControls(t):e.hideVolumeControls()}}}function K(e,t){return function(i){e.showVolumeControls(i,t);C(i)}}function X(e){return function(){e.hideVolumeControls()}}function Q(e,t){var i=t.changedTouches?t.changedTouches[0].clientX:t.clientX,n=Ct*Pt,a=Utils.getOffset(e.sliderContainer)+It,r=Math.max(0,Math.min(i-a,n)/n);return.5/Pt>r?0:r}function $(e){return function(t){var i,n=t.keyCode,a=Math.round(e.player.mediaPlayer.volume*Pt);e.showVolumeControls(t,!0);if(n==KEY_DOWN_ARROW||n==KEY_LEFT_ARROW)if(a>1)if(e.player.mediaPlayer.muted){e.player.muted=!1;C(t)}else{a=Math.max(0,a-1);i=!0}else{e.player.muted=!0;C(t)}if(n==KEY_UP_ARROW||n==KEY_RIGHT_ARROW)if(e.player.mediaPlayer.muted){e.player.muted=!1;C(t)}else{a=Math.min(Pt,a+1);i=!0}(n==KEY_SPACE||n==KEY_ENTER)&&(e.player.muted=!e.player.muted);if(i){C(t);e.player.volume=a/Pt}}}function J(e){return function(t){var i=t.keyCode;if(i==KEY_DOWN_ARROW||i==KEY_LEFT_ARROW||i==KEY_UP_ARROW||i==KEY_RIGHT_ARROW||i==KEY_SPACE||i==KEY_ENTER){clearTimeout(e.volumeTrackTimer);e.volumeTrackTimer=setTimeout(function(){Z(e,"key_press")},kt);C(t)}}}function Z(e,t){var i=e.player.muted?"mute":"volume_slider";e.player.trackAction(i,t,{volume:e.player.volume})}function et(e){return function(t){var i=Q(e,t);e.updateVolumeDisplay(i)}}function tt(e){return function(t){var i=window.document,n=function(){i.removeEventListener("pointermove",a);i.removeEventListener("pointerup",r)},a=function(t){R(t,e.volumeButton)&&n();C(t)},r=function(t){n();e.volumeButton.focus();if("mouse"==t.pointerType||e.controlsOpenComplete){e.player.muted=!e.player.muted;e.player.trackAction(e.player.mediaPlayer.muted?"mute":"unmute","click")}C(t)};i.addEventListener("pointermove",a);i.addEventListener("pointerup",r);C(t)}}function it(e){return function(t){function i(){if(n){r.removeEventListener("mousemove",n);r.removeEventListener("touchmove",n);r.removeEventListener("pointermove",n)}if(a){r.removeEventListener("mouseup",a);r.removeEventListener("touchend",a);r.removeEventListener("pointerup",a)}}function n(t){clearTimeout(e.volumeControlsTimer);o=!0;e.player.volume=Q(e,t);if(R(t,e.volumeControls)){i();e.volumeControlsTimer=setTimeout(X(e),100)}C(t)}function a(t){e.player.volume=Q(e,t);Z(e,o?"drag":"click");i();clearTimeout(e.volumeControlsTimer);e.volumeControlsTimer=setTimeout(X(e),e.config.controls.volumeDismissTime)}var r=window.document,o=!1;if("mousedown"==t.type){r.addEventListener("mousemove",n);r.addEventListener("mouseup",a)}else if("pointerdown"==t.type){r.addEventListener("pointermove",n);r.addEventListener("pointerup",a)}else if("touchstart"==t.type){r.addEventListener("touchmove",n);r.addEventListener("touchend",a)}e.player.volume=Q(e,t)}}function nt(e){return function(t){if(9==t.keyCode){var i=e.player.timeHelper.timeToPercent(e.player.time);e.drawTip(i);e.seekThumbHasFocus=!0}}}function at(e){return function(){e.hideTip();e.seekDone&&e.seekDone();e.seekThumbHasFocus=!1}}function rt(e){var t=function(t){e.isSeeking=!0;e.updateProgressBar(t,!0);e.updateTimeDisplay(e.player.timeHelper.percentToTime(t))};return function(i){e.seekDone||(e.seekDone=function(){e.isSeeking=!1});e.isSeeking||(e.seekToPos=e.player.timeHelper.timeToPercent(e.player.time));var n=i.keyCode;if(n==KEY_DOWN_ARROW||n==KEY_LEFT_ARROW){e.seekToPos=Math.max(0,e.seekToPos-.01);t(e.seekToPos)}if(n==KEY_UP_ARROW||n==KEY_RIGHT_ARROW){e.seekToPos=Math.min(e.seekToPos+.01,e.player.timeHelper.getLatestAllowableSeekPercent());t(e.seekToPos)}}}function ot(e){return function(t){var i=0/0,n="",a=t.keyCode;(a==KEY_DOWN_ARROW||a==KEY_LEFT_ARROW||a==KEY_UP_ARROW||a==KEY_RIGHT_ARROW)&&(i=e.player.timeHelper.percentToTime(e.seekToPos));if(a==KEY_HOME||a==KEY_END){i=a==KEY_HOME?0:e.player.timeHelper.latestAllowableSeekTime;n="shortcut_"}if(!isNaN(i)){e.seekDone&&e.seekDone();e.player.time=i;e.updateDisplayedProgress(i,!0);st(e,n+"key_press",i)}e.seekThumb.setAttribute("aria-valuetext",lt(e.player.timeHelper.timeToString(e.player.time),e.player.timeHelper.getDurationOrEndString()))}}function st(e,t,i){clearTimeout(e.seekTrackTimer);e.seekTrackTimer=setTimeout(function(){e.player.trackAction("seek_bar",t,{seek_time:i})},kt)}function lt(e,t){return Language.audioToolTipSeekBarPrefix+" "+e+" "+Language.audioToolTipSeekBarSuffix+" "+t}function ut(e){var t=!0,i=null;return function(n){if(!e.isSeeking){clearTimeout(i);i=setTimeout(function(){t=!0},500);if(t)t=!1;else{var a=e.player.timeHelper.duration;if(1>a||isNaN(a))e.hideTip();else{var r=ct(e,n.clientX);e.drawTip(r);e.seekOver=!0}}}}}function dt(e){return function(){e.isSeeking||e.hideTip();e.seekOver=!1}}function ct(e,t){var i=e.seekBar.clientWidth,n=t-Utils.getOffset(e.seekBar),a=Math.max(0,Math.min(n,i))/i,r=e.player.timeHelper.getLatestAllowableSeekPercent();a>r&&(a=r);return a}function pt(e){function t(){if(i){r.removeEventListener("mousemove",i,!0);r.removeEventListener("touchmove",i,!0);r.removeEventListener("pointermove",i,!0)}if(n){r.removeEventListener("mouseup",n,!0);r.removeEventListener("touchend",n,!0);r.removeEventListener("pointerup",n,!0)}}function i(t){var i="touch"==t.type.substr(0,5)?t.targetTouches[0].clientX:t.clientX,n=ct(e,i);s=e.player.timeHelper.percentToTime(n);if(Math.abs(a-i)>2){e.updateProgressBar(n,!0);e.updateTimeDisplay(s);o=!0}}function n(t){var i="click";if(o)i="drag";else{var n="touch"==t.type.substr(0,5)?t.changedTouches[0].clientX:t.clientX,a=ct(e,n);s=e.player.timeHelper.percentToTime(a)}e.player.time=s;var r="touchend"==t.type||"pointerup"==t.type&&"mouse"!=t.pointerType||!e.seekBarHolder.contains(t.target)||Device.ios;e.updateDisplayedProgress(s,!r);r&&e.hideTip();e.seekDone();st(e,i,Math.floor(s));if(e.player.paused&&e.mediaEnded){e.mediaEnded=!1;e.player.requestGuidanceAndPlay()}}var a,r=window.document,o=!1,s=0;e.seekDone=function(){t();e.isSeeking=!1};return function(s){a="touch"==s.type.substr(0,5)?s.targetTouches[0].clientX:s.clientX;var l=e.player.timeHelper.duration;if(!(1>l||"controlsFadedOut"==e.container.className)){e.isSeeking=!0;o=!1;e.markersUI.markerMouseOut(e.markersUI.currentlyOver);t();if("mousedown"==s.type){r.addEventListener("mousemove",i,!0);r.addEventListener("mouseup",n,!0)}else if("pointerdown"==s.type){r.addEventListener("pointermove",i,!0);r.addEventListener("pointerup",n,!0)}else{r.addEventListener("touchmove",i,!0);r.addEventListener("touchend",n,!0)}}}}function ft(e){var t=e.kind&&"closedCaptions"===e.kind;return{kind:e.kind,icon:t?"closed-captions":"subtitles",tooltipOn:t?Language.toolTipClosedCaptionsOn:Language.toolTipSubtitlesOn,tooltipOff:t?Language.toolTipClosedCaptionsOff:Language.toolTipSubtitlesOff}}function mt(e){var t=ft(e.config.subtitles);v(e.subtitlesButton,"p_subtitleButton p_controlBarButton_on","p_subtitleButton",t.tooltipOff,t.tooltipOn,e.Subtitles.showingSubs);Utils.setOrUnsetClass(e.subtitlesButton,"p_closedCaptionsIcon",t.kind&&"closedCaptions"===t.kind)}function gt(e){var t=ft(e.config.subtitles),i=E("p_subtitleButton",G(e),t.tooltipOn,t.tooltipOn,5,e,!0,t.icon);Utils.setOrUnsetClass(i,"p_closedCaptionsIcon",t.kind&&"closedCaptions"===t.kind);return i}var ht,yt,vt=0,bt=45,Tt=6,Et=9,Pt=11,Ct=9,It=6,St=220,kt=2e3,_t="-9999px 0px",wt=1e3,At={buffer:{enabled:!0,colour:"",foreColour:"#ffffff",width:50,thickness:10,top:"50%",left:"50%",forceShow:!1},poster:{enabled:!0,effects:!1},cta:{enabled:!0,visiblyHidden:!1,backgroundColour:"#808080"},errorDialog:{enabled:!0},controls:{enabled:!0,mode:"default",always:!1,availableOnMediaEnded:!1,enableLiveRewind:!0,iplayerPlay:!1,spaceControlsPlayback:!1,muteButtonOnly:!1,volumeSlider:!0,volumeDismissTime:2e3,timeout:2e3,timeoutTouch:5e3},markers:{enabled:!0,suppressMarkerKinds:[],hideBelowWidth:600},subtitles:{enabled:!0,desnakeLiveSubtitles:!0,supportLiveSubtitles:!0,defaultOn:!1,yOffset:0/0,kind:"subtitles",margins:[]},guidance:{enabled:!0,pinRequired:!1,displayContinuousGuidanceInQueuePlaylist:!0},fullscreen:{enabled:!0,dblclick:!0},embed:{enabled:!0},embedded:{enabled:!1},miniMode:{enabled:!1,backgroundColour:"#ffffff"},locale:{lang:"en",path:"/emp/translations/smp/{lang}.xml"},chromecast:{enabled:!0},thumbnail:{enabled:!0},pictureInPicture:{enabled:!0},useInPlayerGuidance:!0,mediaSessionAPI:{enabled:!0}},Lt={a:!0,button:!0},xt=function(t,i,n){var a=this;a.config=Utils.merge(At,i);a.config.colour=e(a.config.colour);a.config.foreColour=e(a.config.foreColour);a.config.alternateColour=e(a.config.alternateColour);a.config.alternateForeColour=e(a.config.alternateForeColour);a.config.miniMode.backgroundColour=e(a.config.miniMode.backgroundColour);a.config.cta.backgroundColour=e(a.config.cta.backgroundColour);a.config.useHighResIcons=a.config.useHighResIcons&&!Device.disallowHighResIcons;a.player=t;a.Chromecast=new Chromecast(t);a.Subtitles=n;Utils.defineProperties(a,S(a));Device.trident&&document.addEventListener("focusin",w(a));document.addEventListener("keyup",function(e){9==e.keyCode&&Utils.className(document.body,"focusEnabled")});document.addEventListener("focusout",A(a));document.addEventListener("touchend",x);document.addEventListener("keydown",L(a));a.seekBarWidth=0;a.UIinfoObject={subtitles:!1,controlBarVisible:!1,seekBarVisible:!1,controlsTop:0,controlsLeft:0,controlsHeight:0,controlsWidth:0,markersBarVisible:!1,isFullscreen:!1,videoX:0,videoY:0,videoWidth:0,videoHeight:0};a.markersUI=new MarkersUI(a);a.pGuidance=new ParentalGuidance(a,a.player);a.pIp=new PictureInPicture(a.player,a);a.seekThumbHasFocus=!1;a.showBufferTimer=-1;a.volumeControlsTimer=-1;a.controlbarTimer=-1;a.volumeTrackTimer=-1;a.seekTrackTimer=-1;a.needStopTouch=!1;a.warningPopUpDisplayed=!1;a.focusPlayPauseButton=function(){a.inPrePlayState&&a.cta?a.cta.focus():a.playPauseButton.focus()};a.fadeControlBar=function(e){a.disallowFade||"pointerout"==e.type&&"mouse"!=e.pointerType||document.body.contains(e.relatedTarget)||a.Chromecast.isCasting||a.mediaEnded||a.hideControlBar()};a.focusInButton=function(){a.controls&&!a.controls.visible&&a.showControlBar()};a.visiblyShowBuffer=function(){a.showBufferTimer=-1;if(a.buffer&&a.enabled&&a.config.buffer.enabled){a.buffer.style.display="block";a.isSeeking||ScreenReader.buffering()}};a.config.useHighResIcons&&Device.loadSVGForHighResIcon(a);return a};xt.prototype={initialised:!1,getSeekBarPadding:function(){var e=this;return e.player.isFullScreen?0:16},showPoster:function(){var e=this;if(e.enabled&&e.config.poster.enabled){e.container.style.backgroundPosition="";e.container.style.backgroundImage=Utils.holdingImage(e.player.playlist,e.container,e.config.poster)}},hidePoster:function(){var e=this;e.container.style.backgroundPosition=_t},resizeFixEnd:function(e){var t=this;t.updateLayout(e);clearTimeout(t.posterResizeTimer);t.posterResizeTimer=setTimeout(function(){t.container.style.backgroundImage=Utils.holdingImage(t.player.playlist,t.container,t.config.poster)},wt);t.Subtitles.resizeFixEnd();r(t);if(t.showControlBarRequired){t.showControlBarRequired=!1;g(t)}},updateBackground:function(){var e=this,t="transparent";e.miniModeEnabled&&(t=e.inPrePlayState?e.config.cta.backgroundColour:e.config.miniMode.backgroundColour);e.container.style.backgroundColor=t},showCta:function(){var e=this;e.inPrePlayState=!0;e.player.isAudio&&e.pIp.exitPicInPic();if(e.player.isFullScreen){e.showControlBar();e.guidancePopUp()}else{e.updateBackground();if(e.controls){e.controls.visible=!1;e.controls.style.clip="rect(1px,1px,1px,1px)";e.controls.style.display="none";Utils.className(e.container,"controlsFadedOut","controlsFadedIn")}if(e.cta){if(e.enabled&&e.config.cta.enabled&&!e.inError){e.ctaVisible=!0;e.cta.style.display="block";var t="";if(e.player.playlist&&""!==e.player.playlist.guidance){e.guidance.style.display="table";t=e.player.playlist.guidance}else e.guidance.style.display="none";e.guidanceBox.textContent=t;e.guidanceOrWarning();e.ctaUpdate()}else{e.cta.style.display="none";e.guidance.style.display="none"}e.cta.style.visibility=e.config.cta.visiblyHidden?"hidden":"visible";e.guidance.style.visibility=e.config.cta.visiblyHidden?"hidden":"visible"}e.hideAllControls();document.body.style.cursor="default";m(e);Utils.className(document.body,"cta");e.inError||e.player.dispatch({type:"showCta"})}},ctaUpdate:function(){var e=this;if(e.player.playlist){var t=Language.get("toolTipCTAPlay",{title:e.player.playlist.title});e.player.playlist.guidance&&(t+=", "+e.player.playlist.guidance)}else t=Language.toolTipPlay;e.cta.title=t;e.cta.setAttribute("aria-label",t)},hideCta:function(){var e=this;e.inPrePlayState=!1;e.ctaVisible=!1;e.updateBackground();if(e.cta){e.guidanceTimeout||e.warningTimeout||(e.guidance.style.display="none");e.cta.style.display="none"}(e.config.controls.always||e.player.isAudio&&!e.config.allowAudioControlsToHide)&&e.showControlBar();Utils.className(document.body,"","cta")},hitAreaUpdate:function(){var e=this;e.hitArea&&e.player.playlist&&e.hitArea.setAttribute("aria-label",Language.get("toolTipFrameMedia",{title:e.player.playlist.title}))},updatePoster:function(){var e=this;if(e.container.style.backgroundPosition!==_t){e.hidePoster();e.showPoster()}},hideEffects:function(){clearTimeout(yt);clearTimeout(ht);this.setSlideEffectVisibility(!1);this.setZoomEffectVisibility(!1)},setZoomEffectVisibility:function(e){var t=this.posterZoomImage;t&&(t.style.display=i(e))},setSlideEffectVisibility:function(e){var t=this.slideEffectImageContainer;t&&(t.style.display=i(e))},zoomInPosterImage:function(e){var t=this,i="undefined"!=typeof e.scale?e.scale:1.5,n="undefined"!=typeof e.time?e.time:1;t.setSlideEffectVisibility(!1);t.updatePoster();t.posterZoomImage.src=t.getBackgroundImageUrl();Utils.deleteCssRules(t.stylesheet,[".zoomEffectTransition",".zoomEffectScale"]);t.setZoomEffectVisibility(!0);Utils.asyncDelay(u,[t,n,i])},fadeInNewPosterImage:function(e){var t=this,i=void 0!==e.time?e.time:1;t.posterFadeEffectImage.src=t.getBackgroundImageUrl();"block"==t.posterZoomImage.style.display?Utils.className(t.posterFadeEffectImage,"zoomEffectScale","noScale"):Utils.className(t.posterFadeEffectImage,"noScale","zoomEffectScale");Utils.deleteCssRules(t.stylesheet,["fadeEffect"]);t.setSlideEffectVisibility(!1);t.setZoomEffectVisibility(!1);t.updatePoster();Utils.asyncDelay(d,[t,i])},slideInNewPosterImage:function(e){var t=this;Utils.deleteCssRules(t.stylesheet,[".slidingEffect"]);var i=t.slideEffectImageContainer.firstChild,n=t.slideEffectImageContainer.lastChild;i.src=t.getBackgroundImageUrl();Utils.className(i,"p_onScreen","p_offScreenLeft p_offScreenRight");var a=void 0!==e.time?e.time:1;t.stylesheet.insertRule(".slidingEffect {-webkit-transition: "+a+"s; -moz-transition-duration: "+a+"s; transition-duration: "+a+"s;}",0);Utils.className(n,e.leftToRight?"p_offScreenLeft":"p_offScreenRight","p_onScreen");"block"==t.posterZoomImage.style.display?Utils.className(i,"zoomEffectScale","noScale"):Utils.className(i,"noScale","zoomEffectScale");t.updatePoster();n.src=t.getBackgroundImageUrl();t.setSlideEffectVisibility(!0);Utils.asyncDelay(c,[t,n])},setCta:function(e){var t=this,i="video"===e?"audio":"video";Utils.className(document.body,e,i);t.updateCta(e)},updateCta:function(e){var t=this;if(t.config.cta.enabled){var i="duration"==t.config.cta.mode&&t.player.playlist&&""!==t.player.playlist.programmeDuration;t.cta||t.drawCta();if(t.config.cta.custom){t.cta.style.backgroundImage="url("+t.config.cta.custom+")";updateExistingSvg(t.cta)}else t.cta&&(t.cta.style.backgroundImage="");Utils.deleteCssRules(t.stylesheet,["p_cta","p_padlock"]);t.stylesheet.insertRule(".p_cta:hover, .p_cta:focus, .mediaContainer:hover .p_cta { background-color: "+t.config.colour+"; }",0);if(t.config.useHighResIcons&&!t.config.cta.custom){if(t.cta){var n=k(this,"audio"===e),a="p_ctaIcon";i&&(a+=" p_hasDuration");updateExistingSvg(t.cta,n,a)}t.stylesheet.insertRule(".svg .p_cta:hover .p_ctaIcon, .focusEnabled.svg .p_cta:focus .p_ctaIcon { fill: "+t.config.foreColour+"; }",0);t.stylesheet.insertRule(".svg .mediaContainer:hover .p_cta .p_svg, .svg .p_cta:focus .p_svg { fill: "+t.config.foreColour+"; }",0)}if(i){t.ctaDuration.textContent=t.player.playlist.programmeDuration;Utils.className(t.cta,"p_hasDuration");if(t.config.useHighResIcons){t.stylesheet.insertRule(".p_cta:hover .p_ctaDuration, .focusEnabled .p_cta:focus .p_ctaDuration { color: "+t.config.foreColour+"; }",0);t.stylesheet.insertRule(".mediaContainer:hover .p_ctaDuration, .p_cta:focus .p_ctaDuration { color: "+t.config.foreColour+"; }",0)}}else{t.ctaDuration.textContent="";Utils.className(t.cta,"","p_hasDuration")}Utils.setOrUnsetClass(t.cta,"p_iplayerIcon",t.config.cta.iplayer)}},updateGuidance:function(){var e=this;if(e.padlock&&e.player.config&&e.config.guidance.pinRequired)if(e.player.config.guidance&&e.player.config.guidance.isGuidanceLocked){e.padlock.className="p_padlock";e.padlock.title=Language.guidanceStateOn1Text;e.config.useHighResIcons&&updateExistingSvg(e.padlock,"padlock-locked")}else{e.player.config.guidance&&e.player.config.guidance.canPlay&&e.player.config.guidance.guidanceSkipped&&!e.player.config.under16&&(e.padlock.style.display="block");e.padlock.className="p_padlock p_padlock_unlocked";e.padlock.title=Language.guidanceStateOff1Text;e.config.useHighResIcons&&updateExistingSvg(e.padlock,"padlock-unlocked")}},showVolumeControls:function(e,t){var i=this;clearTimeout(i.volumeControlsTimer);i.volumeControlsVisible?"touchstart"==e.type&&(i.player.muted=!i.player.muted):i.updateControlBarDisplayForOpenVolume();t||(i.volumeControlsTimer=setTimeout(X(i),i.config.controls.volumeDismissTime))},updateControlBarDisplayForOpenVolume:function(){var e=this;e.volumeControlsVisible=!0;Utils.className(e.volumeControls,"p_open","p_closed");var t=Utils.getOffset(e.timeDisplay)<Utils.getOffset(e.volumeControls)+St-bt;if(t){var i=!1,n=Utils.getOffset(e.volumeControls)+St;e.checkFullScreenButton()&&(i=a(e,e.fullscreenButton,i,n));e.checkEmbedButton()&&(i=a(e,e.embedButton,i,n));e.checkSubtitlesButton()&&(i=a(e,e.subtitlesButton,i,n));e.checkPlayOutsidePageButton()&&(i=a(e,e.playOutsidePageButton,i,n));Utils.setOrUnsetClass(e.timeDisplay,"p_covered",t)}},hideVolumeControls:function(){var e=this;clearTimeout(e.volumeControlsTimer);if(e.volumeControlsVisible){e.volumeControlsVisible=!1;e.controlsOpenComplete=!1;Utils.className(e.volumeControls,"p_closed","p_open");Utils.className(e.fullscreenButton,"","p_covered");Utils.className(e.embedButton,"","p_covered");Utils.className(e.subtitlesButton,"","p_covered");Utils.className(e.playOutsidePageButton,"","p_covered");Utils.className(e.timeDisplay,"","p_covered");e.updateVolumeDisplay()}},updateVolumeDisplay:function(e){var t=this;if(t.sliderContainer){e="undefined"!=typeof e?Math.min(Pt,Math.ceil(Pt*e)):t.player.muted?0:Math.ceil(t.player.volume*Pt);var i=t.sliderControls.childNodes;e>i.length-1&&(e=i.length-1);for(var n=i.length-2;n>=e;n--)i[n].childNodes[0].className="p_volumeBar p_afterVolume";n>=0&&(i[n].childNodes[0].className="p_volumeBar p_selectedVolume");for(--n;n>=0;n--)i[n].childNodes[0].className="p_volumeBar p_beforeVolume";t.volumeLevelIndicator.textContent=e;t.volumeButton.setAttribute("aria-valuetext",Language.get("audioToolTipVolume"+e))}},updateEffectsContainer:function(){var e=this,t=e.posterEffectsContainer;if(e.config.poster.effects)t||e.createPosterEffectsContainer();else if(t){t.parentNode.removeChild(t);e.posterEffectsContainer=null}},drawCta:function(){var e=this;if(e.enabled&&e.config.cta.enabled&&!e.cta){var t=createElement("button","p_button p_cta",'<span class="p_hiddenElement"></span>',Language.toolTipPlay);t.tabIndex=1;e.ctaDuration=createElement("span","p_ctaDuration");t.appendChild(e.ctaDuration);e.container.appendChild(t);Utils.multiAddEventListener(t,"click mouseup",U(e));t.style.display="none";e.cta=t;e.drawHitArea();e.updateCta()}},drawGuidance:function(){var e=this;e.guidance=createElement("div","p_ctaGuidance p_guidance");e.guidance.style.display="none";var t=createElement("div","p_guidanceContainer");e.guidanceBox=createElement("span","p_guidanceText");e.guidanceBox.style.marginLeft="25px";var i=createElement("div","p_guidanceHolder"),n=createElement("span","p_guidanceFallback"),a=createElement("span","p_guidanceFallbackText");n.appendChild(a);a.textContent="G";i.appendChild(n);if(e.config.useHighResIcons){var r=Utils.generateSVG(44,44,"guidance","p_guidanceIcon");i.appendChild(r)}t.appendChild(i);i.appendChild(e.guidanceBox);e.guidance.appendChild(t);e.padlock=document.createElement("span");Utils.multiAddEventListener(e.padlock,"mouseup touchend click",H(e));e.guidance.appendChild(e.padlock);e.guidanceClose=createElement("span","guidanceClose");Utils.multiAddEventListener(e.guidanceClose,"mouseup touchend click",F(e));e.guidanceClose.style.display="none";e.guidance.appendChild(e.guidanceClose);if(e.config.useHighResIcons){r=Utils.generateSVG(44,44,"cross","p_crossIcon");e.guidanceClose.appendChild(r)}e.container.parentNode.appendChild(e.guidance);e.updateGuidance()},hideErrorDialog:function(){var e=this;if(e.error){e.enabled&&e.controls&&(e.controls.style.display="block");e.error.className="p_none";e.error=null;e.errorWrapper&&e.errorWrapper.parentNode.removeChild(e.errorWrapper);Utils.className(document.body,"","errorShowing")}},checkIfCanDisplaySeekBar:function(){var e=this;if(e.seekBarHolder){var t=e.seekBarHolder.style.display,n=i(e.player.timeHelper.drawSeekBar&&"controls"!=e.config.controls.mode.toLowerCase());if(t!=n){e.seekBarHolder.style.display=n;e.markersUI.updateMarkers();e.updateGradientAndControlsPosition();e.dispatchUIInfo()}Utils.setOrUnsetClassOnlyAfterCheck(e.container,"noSeekingBar","none"===n,"none"!==n);"block"==n&&(e.seekBarWidth=e.seekBar.clientWidth)}},createErrorDialog:function(e){var t=this;if(!t.error){var i=createElement("div","p_errorDialog"),n=createElement("div","p_errorBackground");i.appendChild(n);t.alertImageContainer=Utils.generateSVG(50.3,44,"alert","p_alertIcon");t.alertImageContainer.className+=t.miniModeEnabled?" alertIconHolder minimode":" alertIconHolder";t.errorMessageContainer=createElement("div","","<span class='p_errorPrimary'></span>");t.errorMessageContainer.setAttribute("role","alert");if(!t.miniModeEnabled){n.appendChild(t.alertImageContainer);n.appendChild(t.errorMessageContainer)}t.showPoster();t.updateErrorDialog();var a=document.createElement("a"),r=document.createElement("a");a.tabIndex=1;if(e==SMPError.EMBED_NOT_ALLOWED){a.textContent=Language.viewThisContentOnTheBBC;a.href=t.player.playlist.alternateHref;a.target="new_page"}else a.textContent=Language.tryAgain;t.refreshImageContainer=Utils.generateSVG(34,34.5,"refresh","p_refreshIcon");r.appendChild(t.refreshImageContainer);
T(a);T(r);var o=O(t,e);Utils.multiAddEventListener(a,"touchend click mouseup",o);Utils.multiAddEventListener(r,"touchend click mouseup",o);n.appendChild(a);t.errorLink=a;if(t.miniModeEnabled){n.appendChild(r);n.appendChild(t.alertImageContainer);n.appendChild(t.errorMessageContainer)}t.errorRefreshLink=r;t.errorHelpText=createElement("span","p_errorSecondary p_none");n.appendChild(t.errorHelpText);t.errorWrapper=createElement("div","p_errorWrapper");t.errorWrapper.appendChild(i);t.container.appendChild(t.errorWrapper);t.error=i}},drawErrorDialog:function(e){var t=this;t.notPlayingState();t.player.inErrorState=!0;if(t.enabled&&t.config.errorDialog.enabled){var i="";e.secondaryText&&""!==e.secondaryText&&!e.recoverable&&(i=e.secondaryText);t.drawError(e.description,e.secondaryText,e.recoverable,e.code);var n=e.description+" "+i;ScreenReader.alert(n)}},drawError:function(e,t,i,n){var a=this;a.createErrorDialog(n);var r=a.errorMessageContainer.getElementsByClassName("p_fallbackText");r.length>0&&r[0].parentNode.removeChild(r[0]);var o=a.errorMessageContainer.getElementsByClassName("p_fallbackButton");o.length>0&&o[0].parentNode.removeChild(o[0]);a.errorMessageContainer.firstChild.textContent=e;a.error.className="p_errorDialog";a.errorLink.className=i?"p_errorDialog_a":"p_none";a.errorRefreshLink.className=i?"p_errorRefreshDialog_a":"p_none";if(t){a.errorHelpText.textContent=t;Utils.className(a.errorHelpText,"","p_none")}else Utils.className(a.errorHelpText,"");a.resetGuidance();a.hideCta();a.hideAllControls(!0);a.showPoster();a.player.minimise();Utils.className(document.body,"errorShowing")},flashFallbackDialog:function(e,t,i){var n=this;n.player.inErrorState=!0;n.notPlayingState();if(n.enabled&&n.config.errorDialog.enabled){var a=Utils.getOffset(n.player.mediaContainer,"width");if(231>a){n.drawError("","",!1,!1);n.player.dispatch({type:"flashFallbackGoToBump"})}else if(t){n.drawError(e.description,"",!1,!1);Utils.className(n.error,"p_fallbackDialog");var r=document.createElement("div");r.className="p_fallbackButton";r.textContent=Language.useMediaPlayerApp;Utils.multiAddEventListener(r,"touchend click mouseup",function(e){n.player.trackAction(Utils.getActionType(e),"use_media_player_app");i()});n.errorMessageContainer.appendChild(r)}else{n.drawError(e.description,"",!1,!1);Utils.className(n.error,"p_fallbackDialog");var o=document.createElement("span");Utils.className(o,"p_fallbackText");var s=Language.enableFlash;if(n.miniModeEnabled){s=" "+(320>a?Language.enableFlashShort:s);n.errorMessageContainer.firstChild.appendChild(o)}else{Utils.className(o,"p_errorSecondary");n.errorMessageContainer.appendChild(o)}var l="https://get.adobe.com/flashplayer";o.innerHTML=s.replace("{link}","<a href='"+l+"' target='getFlash'>"+Language.downloadFlashLink+"</a>");var u=o.getElementsByTagName("a")[0];u&&Utils.multiAddEventListener(u,"touchend click mouseup",function(e){n.player.trackAction(Utils.getActionType(e),"download_flash_player")})}}},displayCover:function(){var e=this;if(e.player.els)var t=e.player.els.video.videoWidth/e.player.els.video.videoHeight,i=Math.abs(1-window.innerWidth/(window.innerHeight*t))<.05||0===window.innerWidth&&0===window.innerHeight&&Utils.hasClass(document.body,"displayCover");Utils.className(document.body,"","videoPositionTop videoPositionBottom");if(i||e.config.displayCover)Utils.className(document.body,"displayCover");else{Utils.className(document.body,"","displayCover");"top"==e.config.videoPosition?Utils.className(document.body,"videoPositionTop"):"bottom"==e.config.videoPosition&&Utils.className(document.body,"videoPositionBottom")}},initialise:function(){var e=this;e.Subtitles.updateConfig(e.config);e.markersUI.container=e.container=e.player.mediaContainer;e.enabled=!0;e.isSeeking=!1;e.previousPosterWidth=0;var t=document.createElement("style");document.getElementsByTagName("head")[0].appendChild(t);e.stylesheet=t.sheet;e.eventCallbacks=y(e);Device.iPhoneOutOfPagePlayback&&Utils.multiAddEventListener(e.player.els.video,"webkitfullscreenchange webkitendfullscreen",_(e));Device.iPhoneIos10&&Utils.className(document.body,"ios10","");Device.iPhoneIos11&&Utils.className(document.body,"ios11","");window.addEventListener("touchstart",function i(){e.needStopTouch=!0;window.removeEventListener("touchstart",i)},{passive:!0,once:!0});e.updateBackground();e.drawBufferSpinner();e.config.buffer.forceShow||(e.buffer.style.display="none");if(e.container){e.showPoster();e.drawCta();e.drawGuidance();e.drawControlBar();e.addControlBarListeners();e.displayCover();e.config.poster.effects&&e.createPosterEffectsContainer()}e.config.useHighResIcons&&Utils.className(document.body,"svg");e.fullscreenState={buffer:!1};e.initialised=!0},updateControls:function(){var e=this;Utils.deleteCssRules(e.stylesheet,["p_progressBar","p_selected_indicator","p_controlBarButton","p_beforeVolume","p_seekThumb","p_sliderControls:hover"]);e.stylesheet.insertRule(".p_controlBarButton.p_buttonHover, .focusEnabled .p_controlBarButton:focus, .p_selected_indicator { background-color: "+e.config.colour+"; }",0);e.config.useHighResIcons&&e.stylesheet.insertRule(".svg .p_controlBarButton.p_buttonHover .p_svg, .focusEnabled.svg .p_controlBarButton:focus .p_svg { fill: "+e.config.foreColour+"; }",0);e.stylesheet.insertRule(".p_progressBar { background: "+(e.config.controls.seekbarBackground?e.config.controls.seekbarBackground:e.config.colour)+" !important; }",0);e.stylesheet.insertRule(".p_beforeVolume { background-color: "+e.config.colour+" !important; }",0);e.stylesheet.insertRule(".p_sliderControls:hover .p_selectedVolume { background-color: "+e.config.foreColour+" !important; }",0);e.stylesheet.insertRule(".focusEnabled .p_seekThumb:focus { background-color: "+e.config.colour+"; }",0);e.stylesheet.insertRule(".focusEnabled .p_seekThumb:focus > .p_seekThumbLine { background-color: "+e.config.foreColour+"; }",0);if("seekbar"==e.config.controls.mode.toLowerCase()){if(e.controlsHolder){e.controlsHolder.style.display="none";Utils.className(e.controls,"p_noControlBar")}}else{if(e.controlsHolder){e.controlsHolder.style.display="block";Utils.className(e.controls,"","p_noControlBar")}e.seekBarHolder&&(e.seekBarHolder.style.display=i("controls"==e.config.controls.mode.toLowerCase()))}Utils.deleteCssRules(e.stylesheet,["p_sliderContainer"]);e.stylesheet.insertRule(".p_sliderContainer { display: "+i(!e.config.controls.muteButtonOnly)+"; }",0);Utils.deleteCssRules(e.stylesheet,["p_volumeControls"]);var t=e.config.controls.volumeSlider;Utils.setOrUnsetClass(e.controlBarFiller,"p_noVolume",!t);e.stylesheet.insertRule(".p_volumeControls { display: "+i(t)+"; }",0);v(e.playPauseButton,"p_pauseButton",e.playClassName,Language.toolTipPause,Language.toolTipPlay,"playing"==e.state)},updateErrorDialog:function(){var e=this;p(e.stylesheet,["p_fallbackButton","p_errorDialog_a","p_errorRefreshDialog_a"],e.config.colour,e.config.foreColour)},drawBufferSpinner:function(){var e=this,t=e.config.buffer;if(!e.buffer){e.buffer=createElement("div","p_spinner");var i=document.createElement("canvas");e.buffer.spinner=new Sonic(i);e.buffer.appendChild(i);e.container.appendChild(e.buffer)}var n=e.buffer.spinner;n.width=t.width;n.colour=e.config.colour;n.thickness=t.thickness;n.colourArray=t.colours?(t.colours+"").split(","):null;n.draw();var a=e.buffer.style,r=e.buffer.spinner.padding,o=t.width+r;a.width=a.height=o+"px";a.marginTop=a.marginLeft=-(o/2)+"px";a.top=t.top;a.left=t.left},createPosterEffectsContainer:function(){var e=this;if(!e.posterEffectsContainer){e.posterEffectsContainer=createElement("div","p_posterEffectsContainer");e.posterZoomImage=createElement("img","zoomEffectScale zoomEffectTransition");e.posterEffectsContainer.appendChild(e.posterZoomImage);e.slideEffectImageContainer=document.createElement("div");e.slideEffectImageContainer.appendChild(createElement("img","slidingEffect .p_oldSlideImage"));e.slideEffectImageContainer.appendChild(createElement("img","slidingEffect .p_newSlideImage"));e.posterEffectsContainer.appendChild(e.slideEffectImageContainer);e.posterFadeEffectImage=createElement("img","fadeEffect");e.posterEffectsContainer.appendChild(e.posterFadeEffectImage);e.container.insertBefore(e.posterEffectsContainer,e.hitArea)}},showBuffer:function(){var e=this;-1==e.showBufferTimer&&(e.showBufferTimer=setTimeout(e.visiblyShowBuffer,BUFFER_SHOW_DELAY));e.fullscreenState.buffer=!0},hideBuffer:function(){var e=this;clearTimeout(e.showBufferTimer);e.showBufferTimer=-1;if(e.buffer&&!e.config.buffer.forceShow){e.buffer.style.display="none";ScreenReader.buffering(!0)}e.player.qos.endBuffering();e.fullscreenState.buffer=!1},updateConfig:function(e){var t,i=this,n=0,a=!1,r=i.config.subtitles.yOffset;for(var o in e)if(e.hasOwnProperty(o)){n++;if("subtitles"==o)for(var s in e.subtitles)if("yOffset"!=s)n++;else{a=!0;t=!(e.subtitles.yOffset==r||isNaN(r)&&isNaN(e.subtitles.yOffset))}}if(0===n||1==n&&a){if(t){i.config.subtitles.yOffset=e.subtitles.yOffset;i.Subtitles.updateConfig(i.config)}}else{var l=i.player.playlistHasAudio?"audio":"video",u=i.config.buffer.forceShow,d=i.config.controls.always;i.config=Utils.merge(i.config,e);i.player.config.ui=i.config;var c=JSON.stringify(i.config);if(c!=i.lastConfigUpdate){i.lastConfigUpdate=c;i.Subtitles.updateConfig(i.config);i.drawBufferSpinner();i.config.buffer.forceShow!=u&&(i.config.buffer.forceShow?i.showBuffer():i.hideBuffer());i.config.buffer.enabled||(i.buffer.style.display="none");i.checkSubtitlesButton();i.checkEmbedButton();i.checkPlayOutsidePageButton();i.updatePoster();i.updateErrorDialog();i.updateControls();i.updateCta(l);i.updateGuidance();i.updateEffectsContainer();i.displayCover();if(i.inPrePlayState)i.showCta();else{i.hideCta();d&&i.config.controls.always===!1&&(i.config.allowAudioControlsToHide||!i.miniModeEnabled&&!i.player.isAudio)&&i.hideControlBar(!0)}if(i.controls&&!i.config.controls.enabled){i.controls.visible=!1;i.controls.style.display="none";Utils.className(i.container,"controlsFadedOut","controlsFadedIn")}var p="";if(i.miniModeEnabled){p="minimode nofullscreen";i.player.mediaPlayer&&"0px"==i.player.mediaPlayer.style.left&&(i.player.mediaPlayer.style.left=HIDDEN_PLAYER_MINIMODE)}else{i.player.mediaPlayer&&i.player.mediaPlayer.style.left==HIDDEN_PLAYER_MINIMODE&&(i.player.mediaPlayer.style.left="0px");i.config.fullscreen.enabled||(p="nofullscreen")}Utils.className(document.body,p,"minimode nofullscreen");i.checkIfCanDisplaySeekBar();i.updateLayout();i.dispatchUIInfo()}}},addControlBarListeners:function(){var e=this;if(!e.listenersAdded){var t=N(e);if(window.PointerEvent){Utils.multiAddEventListener(e.container,"pointermove pointerup dblclick",t);e.container.addEventListener("pointerout",e.fadeControlBar)}else{Utils.multiAddEventListener(e.container,"mousedown mouseleave touchmove touchstart touchend dblclick",t,!0);Utils.multiAddEventListener(document,"mousemove mouseup keyup",t,!0);Device.windowsPhone||e.container.addEventListener("mouseout",e.fadeControlBar)}e.listenersAdded=!0}},muteState:function(e){var t=this;v(t.volumeButton,"p_volumeButton mute","p_volumeButton audio",Language.toolTipUnmute,Language.toolTipMute,e,t.config.useHighResIcons&&"mute",t.config.useHighResIcons&&"audio")},updateProgressBar:function(e,t){var i=this;if(!(50>i.seekBarWidth)){var n=i.player.timeHelper;if(n.duration)i.seekThumb.style.display="block";else{e=0;i.seekThumb.style.display="none"}var a=function(t){if(p){if(isNaN(t)){t=f(i);1===t&&(t=e)}Utils.className(i.progressBar,"","p_progressBarAnimate");Utils.className(i.seekThumb,"","p_seekThumbAnimate");h(i,null);Utils.applyVendorStyles([i.progressBar,i.seekThumb],"transform",null);i.progressBar.style.right="";i.seekThumb.style.right=l+"px";i.progressBar.style.width=i.seekBarWidth+"px";Utils.applyVendorStyles([i.progressBar],"transform","scale("+t+", 1)");Utils.applyVendorStyles([i.seekThumb],"transform","translate("+-Math.round(i.seekBarWidth*(1-t)-Et/2)+"px, 0px)");i.progressBar.animation.cssApplied=!0}else{t=isNaN(t)?e:t;var n=Math.round(i.seekBarWidth*(1-t))+i.getSeekBarPadding();i.progressBar.style.right=n+"px";i.seekThumb.style.right=Math.round(n-Et/2)+"px"}},r=function(t){a(t);var r=1/u*n.duration*(1-e)+"s";Utils.applyVendorStyles([i.progressBar,i.seekThumb],"animationDuration",r);Utils.className(i.progressBar,"p_progressBarAnimate");Utils.className(i.seekThumb,"p_seekThumbAnimate");i.progressBar.animation.animating=!0},o=function(e){a(e);h(i,"paused");i.progressBar.animation.paused=!0},s=function(e){r(e);h(i,"running");i.progressBar.animation.paused=!1},l=i.getSeekBarPadding(),u=void 0===i.player.mediaPlayer.playbackRate?1:i.player.mediaPlayer.playbackRate,d=void 0===i.progressBar.animation.target||i.progressBar.animation.target!=l,c=void 0===i.progressBar.animation.width||i.progressBar.animation.animating&&i.progressBar.animation.width!=i.seekBarWidth,p=!i.player.isLive&&!i.isSeeking&&i.progressBar.animation.supported&&!i.UIinfoObject.markersBarVisible&&i.seekBarWidth/n.duration>1;if(p)if("playing"==i.state&&!i.waiting&&u>0&&1>e&&(void 0===i.player.mediaPlayer.readyState||i.player.mediaPlayer.readyState>2))if(d||c){a(e);i.progressBar.animation.target=l;i.progressBar.animation.width=i.seekBarWidth}else if(i.progressBar.animation.paused)s();else if(i.progressBar.animation.animating){var g=f(i)||0,y=Math.abs((e-g)*n.duration);if(y>.5&&!i.progressBar.animation.supportsCompensation){i.progressBar.animation.supported=!1;p=!1;m(i);a(g)}else if(y>.25&&i.progressBar.animation.supportsCompensation){o();s()}}else r(e);else if(i.progressBar.animation.animating&&!i.isSeeking&&e>0&&1>e)o();else{m(i);a(e)}else{i.progressBar.animation.cssApplied&&m(i);a(e)}var v=i.player.timeHelper.getLatestAllowableSeekPercent();if(1>v){Utils.setOrUnsetClassOnlyAfterCheck(i.container,"seekingBarNotFullyAvailable",!0,null);if(v>e){var b=Math.round(i.seekBarWidth*(1-v))+l;i.progressBarAvailable.style.right=b+"px"}}else Utils.setOrUnsetClassOnlyAfterCheck(i.container,"seekingBarNotFullyAvailable",null,!0);if(!i.seekThumbHasFocus){var T=n.percentToTimeString(e);i.seekThumb.setAttribute("aria-valuetext",lt(T,i.player.timeHelper.getDurationOrEndString()))}var E=Math.floor(n.time);if(t&&(!p||!i.seekThumbHasFocus||i.progressBar.animation.thumbnail!=E)){i.drawTip(e);i.progressBar.animation.thumbnail=E}}},hideTip:function(){this.tip.style.display="none";this.seekBarPositionLine.style.display="none";this.hideThumbnail()},drawTip:function(e){var t=this,i=t.player.timeHelper.getLatestAllowableSeekPercent();e>i&&(e=i);var n=t.controls.clientWidth,a=Math.floor(t.seekBarWidth*e);t.tip.firstChild.textContent=t.player.timeHelper.percentToTimeString(e,!0);t.tip.style.display="block";var r=Utils.getOffset(t.tip,"width"),o=a-Math.floor(r/2)+t.getSeekBarPadding(),s=Math.floor(r/2)-Tt;if(!t.player.isFullScreen)if(0>o){s+=o;o=0}else if(o+r>n){s+=o+r-n;o=n-r}t.tip.style.left=o+"px";t.tipTriangle.style.left=s+"px";t.seekBarPositionLine.style.display="block";t.seekBarPositionLine.style.left=a+"px";t.drawThumbnail(e)},drawThumbnail:function(e){var t,i,n=this,a=n.player;if(n.config.thumbnail.enabled&&a.thumbScrub.loaded){var r=n.controls.clientWidth,o=n.container.clientWidth,s=Math.floor(n.seekBarWidth*e);if(400>o){n.hideThumbnail();return}if(800>o){t=128;i=72}else if(1009>o){t=192;i=108}else{t=224;i=126}var l=t+2,u=r+l>o,d=s-Math.floor(l/2)+n.getSeekBarPadding(),c="seekbar"==n.config.controls.mode.toLowerCase()?44:88,p=n.player.timeHelper.percentToTime(e),f=n.player.thumbScrub.getThumbnailData(p,t,i);if(!f){n.hideThumbnail();return}(!n.player.isFullScreen||u)&&(d=Utils.clamp(d,0,r-l));var m=n.thumbnailDiv.style,g=t+"x"+i+f.storyBoardUrl;if(g!=n.thumbnailData){n.thumbnailData=g;m.width=t+"px";m.height=i+"px";m.backgroundImage="url("+f.storyBoardUrl+")"}m.left=d+"px";m.bottom=c+"px";m.backgroundPosition=f.x+"px "+f.y+"px";m.visibility="visible";m.opacity=1}},hideThumbnail:function(){var e=this;e.thumbnailDiv.style.visibility="hidden";e.thumbnailDiv.style.opacity=0},updateTimeDisplay:function(e){var t=this;if(t.currentTime&&t.duration){var i=t.player.timeHelper.getTimeInfoToDisplay(e),n=t.duration.textContent=i.duration;t.currentTime.textContent=i.currentTime;t.timeDisplaySeparator.style.display=""===n?"none":""}},updateDisplayedProgress:function(e,t){var i=this,n=i.player.timeHelper.timeToPercent(e);i.updateProgressBar(n,t);i.updateTimeDisplay(e);i.markersUI.fillChapters(e)},timeUpdate:function(e){var t=this;if(e||!t.isSeeking&&t.controls&&t.controls.visible){t.updateProgressBar(t.player.timeHelper.percent,t.seekThumbHasFocus&&!t.seekOver);t.updateTimeDisplay();t.markersUI.testDrawMarkers(e)}t.config.markers.reportProgress&&t.markersUI.reportProgress()},playingState:function(){var e=this;e.state="playing";b(e.playPauseButton,"p_pauseButton",Language.toolTipPause,Language.toolTipPause,e.config.useHighResIcons&&"pause")},notPlayingState:function(){var e=this;e.hideBuffer();e.state="notplaying";var t="play";e.config.controls.iplayerPlay&&(t="play-iplayer");b(e.playPauseButton,e.playClassName,Language.toolTipPlay,Language.toolTipPlay,e.config.useHighResIcons&&t)},drawHitArea:function(){var e=this,t=!1,i=function(){t=!0},n=function(n){var a="touchend"==n.type&&!t||"pointerup"==n.type&&"touch"==n.pointerType,r="touchstart"===n.type&&3===n.targetTouches.length;if("touchstart"==n.type||"pointerdown"==n.type&&"mouse"!==n.pointerType){e.hitArea.addEventListener("pointermove",i);e.hitArea.addEventListener("touchmove",i);t=r}if("touchend"==n.type&&0===n.touches.length||"pointerup"==n.type||"pointerout"==n.type){e.hitArea.removeEventListener("pointermove",i);e.hitArea.removeEventListener("touchmove",i);t=!1}if(e.ctaVisible&&e.config.cta.enabled&&(a||"mouseup"==n.type||"click"==n.type||"pointerup"==n.type&&"mouse"==n.pointerType)){if(n.button&&0!==n.button)return;e.player.requestGuidanceAndPlay()}};e.hitArea=document.createElement("div");e.hitArea.className="p_accessibleHitArea notInteractiveContent";e.hitArea.setAttribute("role","img");e.container.appendChild(e.hitArea);window.PointerEvent?Utils.multiAddEventListener(e.hitArea,"pointerup pointerdown",n):Utils.multiAddEventListener(e.hitArea,"mouseup touchstart touchend touchmove",n)},drawControlBar:function(){var e=this;if(e.enabled&&e.config.controls.enabled&&!e.controls){vt++;e.gradientLayer=createElement("div","p_gradientLayer");e.gradientBottomFiller=createElement("div","p_gradientBottomfiller");e.container.insertBefore(e.gradientLayer,e.container.childNodes[2]);e.container.insertBefore(e.gradientBottomFiller,e.container.childNodes[3]);e.controls=createElement("div","p_playerControls");e.controlsHolder=createElement("div","p_playerControlBarHolder");e.controls.appendChild(e.controlsHolder);e.seekBarHolder=createElement("div","p_playerSeekBarHolder");e.controls.appendChild(e.seekBarHolder);e.chapterMarkersHolder=createElement("div","p_chapterMarkersHolder");e.controls.appendChild(e.chapterMarkersHolder);e.markersUI.markersHolder=e.chapterMarkersHolder;e.seekBar=createElement("div","p_bar p_seekBar");e.seekBarHolder.appendChild(e.seekBar);e.seekBarPositionLine=createElement("div","p_seekBarPositionLine");e.seekBar.appendChild(e.seekBarPositionLine);e.progressBar=createElement("div","p_bar p_progressBar");e.progressBar.animation={cssApplied:!1,paused:!1,animating:!1,supported:Device.scrubAnimation&&Utils.checkCssSupport(e.container,"transform"),supportsCompensation:Device.animationCompensationSupported};e.progressBarAvailable=createElement("div","p_bar p_progressBar p_progressBarAvailable");e.seekBarHolder.appendChild(e.progressBarAvailable);e.seekBarHolder.appendChild(e.progressBar);e.seekHelpText=document.createElement("div");e.seekHelpText.id="p_seekHelpText"+vt;e.seekHelpText.style.display="none";e.seekHelpText.textContent=Language.seekBarDescription;e.seekBar.appendChild(e.seekHelpText);var t=E("p_seekThumb",null,"Seek bar","Seek bar",8,e);e.seekThumb=t;Utils.className(t,"","p_controlBarButton");t.style.display="none";t.setAttribute("role","slider");t.setAttribute("aria-control","video");t.setAttribute("aria-valuemin","0");t.setAttribute("aria-valuemax","100");t.setAttribute("aria-valuetext",lt("00:00","00:00"));t.setAttribute("aria-describedby",e.seekHelpText.id);t.addEventListener("keydown",rt(e));t.addEventListener("keyup",ot(e));Utils.multiAddEventListener(t,"keyup",nt(e));Utils.multiAddEventListener(t,"blur focusout",at(e));e.seekThumbLine=createElement("div","p_seekThumbLine");t.appendChild(e.seekThumbLine);Utils.downAction(e.seekBarHolder,pt(e),!0);Utils.hoverMoveAction(e.seekBarHolder,ut(e),!0);Utils.hoverLeaveAction(e.seekBarHolder,dt(e),!1);e.seekBarHolder.appendChild(t);e.tip=createElement("div","p_timeTip",'<span class="p_timeTipText"></span>');e.tipTriangle=createElement("div","p_timeTipTriangle");e.tip.appendChild(e.tipTriangle);e.controls.appendChild(e.tip);e.thumbnailDiv=createElement("div","p_thumbnail");e.controls.appendChild(e.thumbnailDiv);e.timeDisplay=createElement("div","p_timeDisplay");e.timeDisplay.setAttribute("aria-hidden",!0);e.timeDisplay.setAttribute("aria-live","off");e.timeDisplay.setAttribute("aria-role","timer");e.timeDisplaySeparator=createElement("span","p_timeSeparator","/");e.currentTime=createElement("span","p_time");e.duration=createElement("span","p_time p_duration");e.timeDisplay.appendChild(e.currentTime);e.timeDisplay.appendChild(e.timeDisplaySeparator);e.timeDisplay.appendChild(e.duration);e.playPauseButton=E(e.playClassName,B(e),Language.toolTipPlay,Language.toolTipPlay,2,e,!1,"play");e.playOutsidePageButton=E(e.getPlayOutsidePageButtonClass(),V(e),e.getPlayOutsidePageTurnOnText(),e.getPlayOutsidePageTurnOnText(),6,e,!0,e.getPlayOutsidePageClass());e.subtitlesButton=gt(e);e.Subtitles&&e.Subtitles.showingSubs&&mt(e);e.embedButton=E("p_embedButton",j(e),Language.toolTipEmbed,Language.toolTipEmbed,7,e,!1,"embed");e.updateControls();e.controlBarFiller=createElement("div","p_controlBarFiller");if(e.config.controls.volumeSlider){e.volumeControlsVisible=!1;e.volumeControls=createElement("div","p_closed p_volumeControls");e.volumeControls.addEventListener("transitionend",M(e));if(e.config.controls.muteButtonOnly)e.volumeButton=E("p_volumeButton",q(e),Language.toolTipMute,Language.toolTipMute,3,e,!1,"audio");else{e.volumeButton=E("p_volumeButton",null,Language.toolTipMute,Language.toolTipMute,3,e,!1,"audio");Utils.multiAddEventListener(e.volumeButton,"focus focusin",K(e,!0));e.volumeButton.addEventListener("blur",X(e));e.volumeButton.addEventListener("keydown",$(e));e.volumeButton.addEventListener("keyup",J(e));e.volumeButton.addEventListener("click",function(t){if(!Utils.isKeyboardClick(t)){clearTimeout(e.volumeControlsTimer);e.volumeControlsTimer=setTimeout(X(e),e.config.controls.volumeDismissTime)}});if(window.PointerEvent){e.volumeButton.addEventListener("pointerdown",tt(e));e.volumeControls.addEventListener("pointerout",Y(e))}else{e.volumeButton.addEventListener("click",z(e));e.volumeControls.addEventListener("mouseout",X(e));e.volumeButton.addEventListener("touchstart",K(e))}e.volumeControls.addEventListener("mousemove",K(e,!0));e.sliderContainer=createElement("div","p_sliderContainer");e.sliderContainer.tabIndex="-1";e.volumeControls.appendChild(e.sliderContainer);Utils.multiAddEventListener(e.sliderContainer,"focus focusin",function(){e.volumeButton.focus()});e.sliderContainer.addEventListener("mouseover",et(e));var i=it(e);window.PointerEvent?e.sliderContainer.addEventListener("pointerdown",i):Utils.multiAddEventListener(e.sliderContainer,"mousedown touchstart",i);e.sliderControls=createElement("div","p_sliderControls");e.sliderContainer.appendChild(e.sliderControls);for(var n=0;Pt>n;n++){var a=createElement("div","p_volumeBarHolder"),r=createElement("div","p_volumeBar");a.style.left=It+n*Ct+Math.ceil(Ct/2)+"px";a.appendChild(r);e.sliderControls.appendChild(a)}e.volumeLevelIndicator=createElement("div","p_volumeLevel");e.sliderControls.appendChild(e.volumeLevelIndicator);var o=document.createElement("div");o.id="p_volumeHelpText"+vt;o.innerHTML=Language.volumeControlDescription;o.style.display="none";e.sliderContainer.appendChild(o);e.volumeButton.setAttribute("aria-describedby",o.id);e.volumeButton.setAttribute("aria-valuemin","0");e.volumeButton.setAttribute("aria-valuemax",Pt);e.volumeButton.setAttribute("role","slider");e.updateVolumeDisplay()}e.muteState(e.player.muted);e.volumeControls.appendChild(e.volumeButton)}else Utils.className(e.controlBarFiller,"p_noVolume");e.controlsHolder.appendChild(e.playPauseButton);e.volumeControls&&e.controlsHolder.appendChild(e.volumeControls);e.controlsHolder.appendChild(e.controlBarFiller);e.controlBarFiller.appendChild(e.timeDisplay);var s="";e.miniModeEnabled?s="minimode nofullscreen":e.config.fullscreen.enabled&&(s="nofullscreen");Utils.className(document.body,s,"minimode nofullscreen");e.fullscreenButton=E("p_fullscreenButton",W(e),Language.toolTipEnterFullScreen,Language.toolTipEnterFullScreen,4,e,!1,"fullscreen-enter");e.controlsHolder.appendChild(e.fullscreenButton);e.controlsHolder.appendChild(e.subtitlesButton);e.controlsHolder.appendChild(e.embedButton);e.controlsHolder.appendChild(e.playOutsidePageButton);e.container.appendChild(e.controls);e.hideControlBar();e.controls.style.display="none";Utils.className(e.container,"controlsFadedOut","controlsFadedIn");e.updateLayout(e.container.clientWidth)}},updateGradientAndControlsPosition:function(){var e=this;if(e.player.isFullScreen&&e.controls.visible&&e.enabled){var t=window.innerWidth,i=window.innerHeight,n=i/t,a=.5625,r=148,o="3.5625%",s="3.5625%",l=Device.iPhoneOutOfPagePlayback||Device.iPhoneNeedFullScreenMarginButton;if(a>=n||e.player.isPlaying360){if(l){s="14%";o="14%"}}else{var u=Math.ceil(.035265*i),d=t*a,c=Math.floor((i-d)/2),p=u+r>c;if(p){o=c+1+"px";s=c+1+"px";if(l){s="28%";o="28%"}}}Utils.className(e.controls,"updatedFullscreenPosition");Utils.className(e.gradientLayer,"updatedFullscreenPosition");e.stylesheet.insertRule(" .p_gradientBottomfiller { height:"+o+"; }",e.stylesheet.cssRules.length);e.stylesheet.insertRule(" .updatedFullscreenPosition { bottom:"+s+"; }",e.stylesheet.cssRules.length)}},hideAllControls:function(e,t){var i=this;i.player.isPlaying360&&i.player.threeSixty.hideCompass();i.hideControlBar(e,t)},hideControlBar:function(e,t){var i=this;if(i.controls){if(!e){if(!i.controls.visible||i.config.controls.always||!i.config.allowAudioControlsToHide&&(i.miniModeEnabled||i.player.isAudio)||i.isSeeking)return;if(n(i)&&(!t||"touch"!=t.substring(0,5))||i.isControlsInteraction&&t&&"mouse"==t.substring(0,5))return}!i.player.isPlaying360&&i.player.isFullScreen&&Device.hideCursorInFullscreen&&i.player.mediaItem&&!i.player.mediaItem.useFlash&&(document.body.style.cursor="none");i.hideVolumeControls();i.controls.visible=!1;Utils.asyncDelay(function(){Utils.className(i.container,"controlsFadedOut","controlsFadedIn")});x();clearTimeout(i.controlbarTimer);i.controlbarTimer=setTimeout(function(){i.controls.style.clip="rect(1px,1px,1px,1px)";i.Subtitles.updatePositions()},800)}i.markersUI.resetMarkerTip();i.player.dispatch({type:"uiControlBarHidden"},!0);i.needStopTouch&&Utils.className(i.container,"stopTouch","")},showControlBar:function(e){var t=this;if(t.active&&(!Device.iPhoneOutOfPagePlayback||t.player.isAudio)&&!t.Chromecast.isAttemptingToCast){e||clearTimeout(t.idleTimeoutInterval);clearTimeout(t.controlbarTimer);if(!t.controls||t.controls.visible)return;if(t.enabled&&t.config.controls.enabled&&(!t.inPrePlayState||t.player.isFullScreen)){document.body.style.cursor="default";t.controls.style.display="block";t.seekBarWidth=t.seekBar.clientWidth;t.timeUpdate(!0);if(e&&!t.miniModeEnabled){t.controls.visible=!1;Utils.className(t.container,"controlsFadedOut","controlsFadedIn");t.Subtitles.updatePositions()}else{t.controls.visible=!0;t.updateGradientAndControlsPosition();Utils.asyncDelay(function(){t.controls.style.clip="";t.Subtitles.updatePositions();Utils.className(t.container,"controlsFadedIn","controlsFadedOut")});t.player.dispatch({type:"uiControlBarShown"},!0);t.needStopTouch&&setTimeout(function(){Utils.className(t.container,"","stopTouch")},150)}}t.markersUI.updateMarkers();t.checkPlayOutsidePageButton()}},updateLayout:function(e){var t=this;if(t.controlsHolder&&(t.container.clientWidth>0||e)){var i=t.config.controls.volumeSlider?2:1;t.controlBarFillerWidth=e;var n=t.controlsHolder.clientWidth;0===n&&(n=t.container.clientWidth);n>0&&(t.controlBarFillerWidth=n);i+=t.checkFullScreenButton();i+=t.checkPlayOutsidePageButton();i+=t.checkSubtitlesButton();i+=t.checkEmbedButton();t.controlBarFillerWidth=t.controlBarFillerWidth-i*bt;t.controlBarFiller.style.width=t.controlBarFillerWidth+"px";t.markersUI.updateMarkers();t.volumeControlsVisible&&t.updateControlBarDisplayForOpenVolume();t.updateGradientAndControlsPosition();t.seekBarWidth=t.seekBar.clientWidth;t.dispatchUIInfo()}t.updateProgressBar(t.player.timeHelper.percent)},checkFullScreenButton:function(){var e=this,t=e.miniModeEnabled||!e.config.fullscreen.enabled;return Math.abs(l(t,"nofullscreen")-1)},checkPlayOutsidePageButton:function(){var e=this;e.pIp.supported&&Utils.hasClass(e.playOutsidePageButton,"p_chromecastButton")&&updateExistingSvg(e.playOutsidePageButton,e.getPlayOutsidePageClass());v(e.playOutsidePageButton,e.getPlayOutsidePageButtonClass()+" p_controlBarButton_on",e.getPlayOutsidePageButtonClass(),e.getPlayOutsidePageTurnOffText(),e.getPlayOutsidePageTurnOnText(),e.Chromecast.isCasting);var t=!e.player.isPlaying360&&(e.config.chromecast.enabled&&e.Chromecast.isAvailable||e.pIp.supported&&e.config.pictureInPicture.enabled);return l(t,e.getPlayOutsidePageClass(!0))},checkSubtitlesButton:function(){var e=this,t=e.config.subtitles.enabled&&e.Subtitles.subsAvailable();return l(t,"subtitles")},checkEmbedButton:function(){var e=this,t=e.player.playlist&&e.config.embed.enabled&&e.player.playlist.embedRight;return l(t,"embed")},resetGuidance:function(){var e=this;clearTimeout(e.guidanceTimeout);e.guidanceTimeout=!1;if(e.padlock&&e.player.config){var t=e.player.config.guidance;if(t){var n=e.config.guidance.pinRequired,a=!n||n&&!t.hasGuidancePIN&&!t.guidanceSkipped||e.player.config.under16&&!e.player.config.guidance.hasGuidancePIN;e.padlock.style.display=i(!a);e.guidanceClose.style.display="none";e.guidance.style.display="none";e.guidance.className="p_ctaGuidance p_guidance";Utils.className(document.body,"","p_continuousGuidanceOrWarning")}}e.resetWarning()},resetWarning:function(){var e=this;clearTimeout(e.warningTimeout);e.warningTimeout=!1;e.warningPopUpDisplayed=!1;Utils.setOrUnsetClassOnlyAfterCheck(e.guidance,"p_warning",null,!0);Utils.setOrUnsetClassOnlyAfterCheck(e.guidance,"p_warningCta",null,!0)},guidanceOrWarning:function(){var e=this;if(""===e.player.playlist.guidance&&""!==e.player.playlist.warning){clearTimeout(e.warningTimeout);e.warningPopUpDisplayed=!0;e.padlock&&(e.padlock.style.display="none");if(e.inPrePlayState){e.guidance.style.display="table";e.guidanceBox.textContent=e.player.playlist.warning;e.guidance.className="p_ctaGuidance p_guidance p_warningCta"}}},dispatchUIInfo:function(){var e=this,i=this.UIinfoObject,n=e.player.mediaContainer.clientWidth,a=e.player.mediaContainer.clientHeight;if(!(0>=a||0>=n)){i.referenceHeight=bt-1;i.seekBarVisible=t(e.seekBarHolder);i.controlBarVisible=t(e.controlsHolder);i.markersBarVisible=Utils.hasClass(e.container,"p_hasMarkers");i.controlsHeight=i.referenceHeight*((i.seekBarVisible?1:0)+(i.controlBarVisible?1:0))+(i.markersBarVisible?e.markersUI.markerDisplayHeight:0);if(e.controls){var r=Utils.getOffsets(e.controls);if(r.width>0){i.controlsWidth=r.width;i.controlsTop=r.top;i.controlsLeft=r.left}}var o=e.player.mediaPlayer.videoWidth,s=e.player.mediaPlayer.videoHeight;if(0!==s){var l=o/s,u=n/a;if(u>l){i.videoWidth=Math.round(o*a/s);i.videoHeight=a;i.videoX=Math.round((n-i.videoWidth)/2);i.videoY=0}else{i.videoHeight=Math.round(s*n/o);i.videoWidth=n;i.videoX=0;i.videoY=Math.round((a-i.videoHeight)/2)}}if(e.initialised&&(!e.controls||i.controlsWidth>0)){var d=JSON.stringify(i);if(d!=e.lastUIinfoDispatch){var c={type:"uiinfo",properties:i};
for(var p in i)i.hasOwnProperty(p)&&(c[p]=i[p]);e.player.delayedDispatch(c);e.lastUIinfoDispatch=d}}}},getBackgroundImageUrl:function(){var e=this,t=e.container.style.backgroundImage,i=/url\(([^)]+)\)/,n=i.exec(t);return n&&n.length>=2?n[1].replace(/^"+|"+$/g,""):t},guidancePopUp:function(e){var t=this;if(t.config.guidance.enabled)if(t.config.guidance.displayContinuousGuidanceInQueuePlaylist||!e){if(t.player.playlist&&""!==t.player.playlist.guidance){t.padlock.style.display="none";t.guidance.style.visibility="visible";t.guidanceBox.textContent=t.player.playlist.guidance;t.guidance.style.display="table";t.guidance.className="p_continous p_guidance";t.guidanceClose.style.display="block";t.padlock.style.display="none";Utils.className(document.body,"p_continuousGuidanceOrWarning");clearTimeout(t.guidanceTimeout);t.guidanceTimeout=setTimeout(t.eventCallbacks.guidanceHide,1e4)}else t.guidance.style.display="none";t.promptWarningPopUp()}else t.guidance.style.display="none"},promptWarningPopUp:function(){var e=this;if(e.player.playlist&&""!==e.player.playlist.warning&&""===e.player.playlist.guidance&&!e.warningPopUpDisplayed){e.warningPopUpDisplayed=!0;e.guidance.style.visibility="visible";e.guidanceBox.textContent=e.player.playlist.warning;e.guidance.style.display="table";e.guidance.className="p_warning p_guidance p_continous";e.guidanceClose.style.display="block";e.padlock.style.display="none";Utils.className(document.body,"p_continuousGuidanceOrWarning");clearTimeout(e.warningTimeout);e.warningTimeout=setTimeout(function(){e.guidanceClose.style.display="none";e.guidance.style.display="none";Utils.className(document.body,"","p_continuousGuidanceOrWarning")},1e4)}},getPlayOutsidePageButtonClass:function(){var e=this;return e.pIp.supported?"p_picInPicButton":"p_chromecastButton"},getPlayOutsidePageClass:function(e){var t=this;return t.pIp.supported?t.pIp.isPlayingInPicture()?"picInPic-stop":"picInPic":e||"catcast"!==t.config.controls.chromecastMode?"chromecast":"catcast"},getPlayOutsidePageTurnOnText:function(){var e=this;return e.pIp.supported?Language.toolTipPicInPic:Language.toolTipChromecast},getPlayOutsidePageTurnOffText:function(){var e=this;return e.pIp.supported?Language.toolTipStopPicInPic:Language.toolTipStopChromecast},togglePiPicon:function(e){updateExistingSvg(e.playOutsidePageButton,e.getPlayOutsidePageClass());e.checkPlayOutsidePageButton();e.player.dispatch({type:e.pIp.isPlayingInPicture()?"picInPicStarted":"picInPicStopped"});var t="picInPic-stop"===e.getPlayOutsidePageClass()?"enter_picture_in_picture_mode":"exit_picture_in_picture_mode";e.player.trackAction(t,Utils.getActionType(event))}};return xt}(),API=function(){function e(e){var t=e.ui;this.onAdsProcessed=function(t){e.onAdsProcessed(t)};this.updateQuality=function(t){e.updateQuality(t)};this.updateUiConfig=function(e){t.updateConfig(e)};this.captureIntent=function(t,i){if(!i){var n=t?t.type:null;e.captureIntent(n)}};this.dispatch=function(t,i){e.dispatch(t,i)};this.updateGuidance=function(t){e.config.guidance=Utils.merge(e.config.guidance||{},t);e.ui.updateGuidance();e.dispatch({type:"guidanceUpdated"},!0)};this.next=function(){e.next()};this.queuePlaylist=function(t){if(e.playlist){e.playlist.queuedPlaylist=t.playlist;e.playlist.queuedOptions=t.options}};this.setBufferSpinner=function(e){t.setBufferSpinner(e)};this.updateConfig=function(t){e.updateConfig(t)};this.loadPlaylist2=function(t,i){e.loadingPlaylistURL=null;i=i||t.nonUserBypass;var n=t.playlistObject,a=function(){e.reset();e.resetStatsObject();e.updateConfig(t);n?e.loadPlaylistObject(n,i):t.playlist&&e.loadPlaylistUrl(t.playlist+"",i)},r="video";if(n&&n.items){var o=n.items[0];!o||"audio"!=o.kind&&"radioProgramme"!=o.kind||(r="audio")}i||!t.autoplay||e.willAutoplayWhenPlayCalled[r]||e.captureIntent(r);Utils.asyncDelay(a)};this.play=function(t,i){e.playWithUserCheck(!t||i)};this.pause=function(){e.pause()};this.stop=function(t){t&&t.destroy&&(e.destroying=!0);e.stop()};this.suspend=function(){e.suspend()};this.volume=function(t){"undefined"==typeof t||isNaN(t)||(e.volume=t);return e.volume};this.muted=function(t){e.muted=t;return e.muted};this.showSubtitles=function(t){var i=e.ui.Subtitles;t?i.on():i.off();return i.showingSubs};this.currentTime=function(t){"undefined"!=typeof t&&(e.time=t);return e.time};this.guidanceClosed=function(i){e.dispatch({type:"guidanceClosed",success:i});i?t.pGuidance.close(!1,!0):e.isFullScreen&&!e.iframeFullscreen&&e.minimise()};this.setData=function(i){if(i){var n=i.data;Utils.asyncDelay(function(){"SMP.markers"===i.name&&(t.markerData=n);if("SMP.webcastData"==i.name){e.webcastData={};if(n){e.webcastData.accurateStartTime=n.accurateStartTime;e.webcastData.accurateEndTime=n.accurateEndTime;e.webcastData.scheduledEndTime=n.scheduledEndTime;e.webcastData.scheduledStartTime=n.scheduledStartTime;e.webcastData.ignoreJoinTime=n.ignoreJoinTime}}"SMP.subtitlesHref"==i.name&&n&&t.Subtitles.updateSubs(n.url);"SMP.thumbManifestUrl"==i.name&&n&&e.thumbScrub.updateOverrideManifest(n.url);"SMP.protectionData"==i.name&&n&&e.setProtectionData(n);if("SMP.availableTime"==i.name&&n){e.timeHelper.setAvailableTime(n);e.ui.timeUpdate()}"SMP.mediaSessionAPI"!=i.name||e.dispatch({type:"setMediaSessionAPIdata",data:i})});e.dispatch({type:"setData",data:i},!0)}};this.pauseAt=function(t){t&&t.sort&&(e.pauseTimes=t.sort(Utils.sortSimple))};this.loadPlugin2=function(e){PluginManager.loadPlugin(e.url,e.data,e.waitOnPluginLoad)};this.setPoster=function(i){var n=i.url,a=i.effect;if(e.playlist){e.playlist.posterRecipe=n;if(t.config.poster.effects&&a&&a.type){switch(a.type){case"fade":t.fadeInNewPosterImage(a);break;case"slide":t.slideInNewPosterImage(a);break;case"zoom":t.zoomInPosterImage(a)}return}t.updatePoster();t.hideEffects()}};this.ccInfo=function(e){var i=t.Chromecast;e.id&&i.deviceId!==e.id&&(i.deviceId=e.id);if(i.isAvailable!==e.available||i.isCasting!==e.casting){i.isAvailable=e.available;i.isCasting&&!i.isAvailable&&i.stopCast();i.isCasting=e.casting;t.updateLayout()}if(e.state){var n=e.state.toLowerCase();"connecting"===n&&i.connect();"error"===n&&i.stopCastAttempt();i.isCasting&&"playing"===n&&i.playing(e);i.isCasting&&"paused"===n&&i.paused();i.isCasting&&"buffering"===n&&i.buffering();("stopped"===n||"idle"===n)&&i.stopped();"finished"===n&&i.finished();i.isAvailable&&i.externalControlCheck(e)}};this.PINverified=function(e){t.pGuidance.verified(e)}}return e}(),PluginUtilities=function(){function e(e){if(0!==e.indexOf("http:")&&0!==e.indexOf("https:")){var t=this.url;-1!=t.indexOf("?")&&(t=t.substring(0,t.indexOf("?")));return t.substring(0,t.lastIndexOf("/"))+"/"+e}return e}function t(e,t){if(e){var i=this.playerInterface,n=this.relativeUrl(e),a=document.getElementsByTagName("head")[0],r=document.createElement("link");r.type="text/css";r.rel="stylesheet";r.href=n;r.addEventListener("load",function(){i.dispatchToPlugins({type:"cssLoaded",path:e,url:n,id:t})});r.addEventListener("error",function(){i.dispatchToPlugins({type:"cssLoadFailed",path:e,url:n,id:t})});a.appendChild(r)}}var i=function(e,t){this.url=t;this.playerInterface=e;return this};i.prototype={loadCSS:t,relativeUrl:e};return i}(),DataStore=function(){var e=function(){};e.prototype={set:function(e){e&&"string"==typeof e.name&&""!==e.name&&"get"!=e.name&&"set"!=e.name&&(this[e.name]=e.data)},get:function(e){return this[e]}};return e}(),PlayerInterface=function(){function e(e,t,i){return{listenerObject:{get:function(){},set:function(t){e.listenerObjects.push(t)}},datastore:{get:function(){return i}},settings:{get:function(){return t.config}},uiInfo:{get:function(){return t.ui.UIinfoObject}},currentTime:{get:function(){return t.time},set:function(e){t.time=e}},canPause:{get:function(){return t.timeHelper.canSeek()}},currentItem:{get:function(){return t.mediaItem}},currentChapter:{get:function(){return t.ui.markersUI.getCurrentChapter()}},playlist:{get:function(){return!t.playlist||t.playlist.loading?null:t.playlist}},muted:{get:function(){return t.muted},set:function(e){t.muted=e}},volume:{get:function(){return t.volume},set:function(e){t.volume=e}},paused:{get:function(){return t.paused}},duration:{get:function(){return t.duration}},hasGuidancePassed:{get:function(){return t.hasGuidancePassed}},canShowControls:{get:function(){return t.ui.active&&!t.ui.inPrePlayState}},inError:{get:function(){return t.ui.inError}},isFromIdent:{get:function(){return"ident"==t.mediaItem.kind}},pluginManagerFailedArray:{get:function(){return PluginManager.failedArray}}}}function t(e){r.volume=e.target.volume}function i(){if(l){l.removeEventListener("volumechange",t);r.mediaContainer.removeChild(l);l=null}}function n(){if(r.outOfControl){if(r.resetAfterOutOfControl){if(s){r.mediaPlayer.src=s;r.mediaPlayer.load();s=null}if(Device.supportsMultipleMediaElements){r.mediaPlayer.style.left="0px";i()}}r.swf.enableMouseUIBypass();r.dispatch({type:"regainingControl"});r.outOfControl=!1}}function a(e){return function(n){var a;if(n)return r.els[e];if(!r.outOfControl){if(Device.supportsMultipleMediaElements){r.hidePlayer(e,!0);i();l=a=document.createElement(e);l.style.width="100%";l.style.height="100%";l.addEventListener("volumechange",t);r.mediaContainer.insertBefore(l,r.els[e])}else{r.selectMediaPlayer(e);r.mediaPlayer.style.left="0px";s=r.mediaPlayer.src;a=r.mediaPlayer}r.swf.disableMouseUIBypass();r.dispatch({type:"losingControl"});r.outOfControl=!0;r.tryingToPlay=!1;r.resetAfterOutOfControl=!0}return a}}var r,o,s,l,u=function(t,i){function n(e){var t={target:a};for(var i in e.properties)"type"!=i&&"target"!=i&&(t[i]=e.properties[i]);for(i in e)"_"!=i&&"target"!=i&&"properties"!=i&&(t[i]=e[i]);"setData"==e.type&&o.set(e.data);a.dispatchToPlugins(t);if("setData"==e.type){t.type="pluginData";a.dispatchToPlugins(t)}}r=t;o=i;var a=this;a.listenerObjects=[];var s=document.createElement("div");s.id="p_pluginContainer";s.className="notInteractiveContent";s.style.width=window.innerWidth+"px";s.style.height=window.innerHeight+"px";t.mediaContainer.appendChild(s);this.container=s;t.requestAllEvents(n);Utils.defineProperties(a,e(a,t,i));return a};u.prototype={callbacks:{},addEventListener:function(e,t){this.callbacks[e]||(this.callbacks[e]=[]);this.callbacks[e].push(t)},removeEventListener:function(e,t){if(this.callbacks[e])for(var i=this.callbacks[e].length-1;i>=0;i--)this.callbacks[e][i]==t&&this.callbacks[e].splice(i,1)},dispatchEvent:function(e){r.dispatch(e)},dispatchToPlugins:function(e){for(var t=e.type,i=this.listenerObjects,n=0;i.length>n;n++){var a=i[n];if(a&&a[t])try{a[t](e)}catch(r){}}var o=this.callbacks[t];if(o)for(n=o.length-1;n>=0;n--)try{o[n](e)}catch(r){}},updateUiConfig:function(e){r.ui.updateConfig(e)},loadPlaylist:function(e,t,i){var n={};t===!0||t===!1?n={autoplay:t,overideHoldingImage:i}:"object"==typeof t&&(n=t);"string"!=typeof e?n.playlistObject=e:n.playlist=e;r.api.loadPlaylist2(n,!1)},queuePlaylist:function(e,t){r.api.queuePlaylist(e,t)},setPoster:function(e){r.api.setPoster(e)},setData:function(e){r.api.setData(e)},play:function(e){r.requestGuidanceAndPlay(e===!0)},pauseAt:function(e){r.api.pauseAt(e)},stop:function(){r.api.stop()},suspend:function(){r.api.suspend()},showSubtitles:function(e){r.api.showSubtitles(e)},log:function(e){},pause:function(){r.pause()},next:function(){r.next()},toggleFullscreen:function(){r.toggleFullscreen()},addContextMenuItem:function(e,t,i){DebugConsole.addContextMenuItem(e,t,i)},updateContextMenuItem:function(e,t){DebugConsole.updateContextMenuItem(e,t)},requestVideoElement:a("video"),requestAudioElement:a("audio"),releaseVideoElement:n,releaseAudioElement:n};return u}(),PLUGIN_LOAD_TIMEOUT=4e3,REPORT_PLUGIN_LOAD_TIMEOUT=5e4,PluginManager={pluginArray:[],urls:{},playerInterface:null,mediaPlayer:null,loadPlugin:PluginManager_loadPlugin,init:PluginManager_init,resizeFix:PluginManager_resizeFix,resizeFixEnd:PluginManager_resizeFixEnd,resizeFixComplete:PluginManager_resizeFixComplete,isPluginLoading:PluginManager_isPluginLoading},PropertySplitter=function(e){return function(t){return t[e]||0===t[e]?t[e].toString():null}},PropertyCombiner=function(e,t){return function(i){for(var n=[],a=null,r=function(t){return t[e]===a},o=0;t.length>o;o++){a=t[o];n=n.concat(i.filter(r))}return n}},PropertySorter=function(e,t){return function(i){return Utils.stableSort(i,function(i,n){return t.indexOf(i[e])-t.indexOf(n[e])})}},ConnectionTree=function(){function e(t,i){for(var n=new PropertySplitter(i[0]),a=0;t._data.length>a;){var r=t._data[a],o=n(r);if(o){if(!t[o]){var s=Utils.clone(t._splitPath);s[i[0]]=o;t[o]={_data:[],_splitPath:s}}t[o]._data.push(r);t._data.splice(0,1)}else a++}if(i.length>1)for(var l in t)"_data"!=l&&"_splitPath"!=l&&t.hasOwnProperty(l)&&e(t[l],i.slice(1,i.length))}function t(e,i){var n=[];for(var a in e)if("_data"!=a&&"_splitPath"!=a&&e.hasOwnProperty(a)){var r=i.length>1?i.slice(1,i.length):[];n=n.concat(t(e[a],r))}e._data&&(n=n.concat(e._data));i[0]&&(n=i[0](n,e._splitPath));return n}var i=function(e,t){var i=this;i.splitProperties=e;i.combiners=t?t:[];i.root={_data:[],_splitPath:{}};return i};i.prototype.getCombinedConnections=function(){var e=this;return t(e.root,e.combiners)};i.prototype.addData=function(t){var i=this;i.root._data=t.slice();e(i.root,i.splitProperties)};return i}(),LoadBalancing=function(){function e(e,t){return"dash"==e&&"plain"==t?1:"dash"==t&&"plain"==e?-1:0}function t(e,t){for(var i=0;e.length>i;i++)if(!j||t){if("rtmp"==e[i].protocol||"hds"==e[i].format)return!0;if("video/x-flv"==e[i].mimetype)return!0}else if("hds"==e[i].format&&"https"==e[i].protocol)return!0;return!1}function i(e){return r(o(a(e),8*e.length))}function n(e){for(var t,i="0123456789abcdef",n="",a=0;e.length>a;a++){t=e.charCodeAt(a);n+=i.charAt(t>>>4&15)+i.charAt(15&t)}return n}function a(e){for(var t=Array(e.length>>2),i=0;t.length>i;i++)t[i]=0;for(i=0;8*e.length>i;i+=8)t[i>>5]|=(255&e.charCodeAt(i/8))<<24-i%32;return t}function r(e){for(var t="",i=0;32*e.length>i;i+=8)t+=String.fromCharCode(e[i>>5]>>>24-i%32&255);return t}function o(e,t){e[t>>5]|=128<<24-t%32;e[(t+64>>9<<4)+15]=t;for(var i=Array(80),n=1732584193,a=-271733879,r=-1732584194,o=271733878,c=-1009589776,p=0;e.length>p;p+=16){for(var f=n,m=a,g=r,h=o,y=c,v=0;80>v;v++){i[v]=16>v?e[p+v]:d(i[v-3]^i[v-8]^i[v-14]^i[v-16],1);var b=u(u(d(n,5),s(v,a,r,o)),u(u(c,i[v]),l(v)));c=o;o=r;r=d(a,30);a=n;n=b}n=u(n,f);a=u(a,m);r=u(r,g);o=u(o,h);c=u(c,y)}return Array(n,a,r,o,c)}function s(e,t,i,n){return 20>e?t&i|~t&n:40>e?t^i^n:60>e?t&i|t&n|i&n:t^i^n}function l(e){return 20>e?1518500249:40>e?1859775393:60>e?-1894007588:-899497514}function u(e,t){var i=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(i>>16);return n<<16|65535&i}function d(e,t){return e<<t|e>>>32-t}function c(e){return"/atk/"+n(i("7dff7671d0c697fedb1d905d9a121719938b92bf"+e))+"/asn/1"}function p(e,t,i){var n=e.supplier+"",a="https"===e.protocol?"_https":"";n.split("_").length<2?e.supplier=t.substring(0,1)+"_"+n+"_"+e.format+a:(2==n.split("_").length||i)&&(e.supplier=n+"_"+e.format+a)}function f(e){return!!e}function m(e){return j&&"https:"===(location.protocol+"").toLowerCase()?"https"===e.protocol:!0}function g(e,t){for(var i=0;t.length>i;i++)if(e.href===t[i].href)return!1;return!0}function h(e){return D?(e.supplier+"").indexOf(D)>-1:Device.noSupportForLocationHeader&&(e.supplier+"").indexOf("bidi_")>-1?!1:!0}function y(e){var t=e.href+"";return 0===t.indexOf("http://")||0===t.indexOf("https://")||0===t.indexOf("blob:")||0===t.indexOf("file://")}function v(e){return-1===H.indexOf(e.format?e.format:"plain")}function b(e){if("plain"===e.format){var t=U.plain,i=F.plain;return!(t&&t>e.bitrate||i&&e.bitrate>i)}return!0}function T(e){return!("dash"===e.format&&"https:"===(location.protocol+"").toLowerCase()&&0===(e.href+"").toLowerCase().indexOf("http:"))}function E(e,t){return e.dpw&&t.dpw?t.dpw-e.dpw:e.dpw?-1:t.dpw?1:e.priority-t.priority}function P(e,t){!e||!e.connections||2>e.connections.length||x(e,t)}function C(e){var t;t="https"==e.preferProtocol||"https"==V?["https","http"]:["http","https"];return t}function I(e){var t=0,i=0;if(2>e.length)return e;for(var n=0;e.length>n;n++){var a=e[n].dpw;if(a>0&&100>=a){i++;t+=a}else e[n].dpw=null}e.sort(E);if(0===t)return e;if(t>100){for(n=1;e.length>n;n++)e[n].dpw=null;e.sort(E);e[1].dpw=100-e[0].dpw;i=2}else if(100>t){for(n=0;e.length>n;n++)if(null==e[n].dpw){e[n].dpw=100-t;t=100;break}if(100>t){var r=(100-t)/2;e[0].dpw+=r;e[1].dpw+=r}}if(i>0){var o=Math.round(100*Math.random());t=0;for(n=0;e.length>n;n++){var s=e[n];t+=s.dpw;if(t>o){e.splice(n,1);e.unshift(s);break}}}return e}function S(t){if(t.backgroundVideo)return["plain"];var i=Utils.isItemAudio(t),n=Device.filterDash,a=t.flashAvailable&&Device.preferVideoFallbackOverHLS&&!i,r=["plain","hls","dash"],o=i?Device.supportsAudioDash:Device.supportsVideoDash;o&&Device.supportsHls&&!a?r=Device.preferHls?["hls","dash","plain"]:["dash","plain","hls"]:o?r=["dash","plain","hls"]:Device.supportsHls&&(r=["hls","plain","dash"]);a&&(r=r.filter(k));n&&(r=r.filter(_));q&&(r=Utils.stableSort(r,e));return r}function k(e){return"hls"!=e}function _(e){return"dash"!=e}function w(e,t){return e?e.toLowerCase():t}function A(e,t){var i=parseFloat(e);return isNaN(i)?t:i}function L(e){var t=function(t,i){return e&&i.format&&"plain"==i.format?Utils.stableSort(t,function(e,t){return e.bitrate-t.bitrate}):Utils.stableSort(t,function(e,t){return t.bitrate-e.bitrate})};return t}function x(e,t){var i=["format","protocol","bitrate"],n=[new PropertyCombiner("format",S(e)),new PropertySorter("protocol",C(e)),L(t),I],a=new ConnectionTree(i,n);a.addData(e.connections);e.connections=a.getCombinedConnections()}function O(e){if(e.subtitleConnections&&e.subtitleConnections.length>1){var t=["protocol"],i=[new PropertySorter("protocol",C(e)),I],n=new ConnectionTree(t,i);n.addData(e.subtitleConnections);e.subtitleConnections=n.getCombinedConnections()}}function M(e){if(e.thumbnailConnections&&e.thumbnailConnections.length>1){var t=["protocol"],i=[new PropertySorter("protocol",C(e)),I],n=new ConnectionTree(t,i);n.addData(e.thumbnailConnections);e.thumbnailConnections=n.getCombinedConnections()}}var D,N=0,R="/mediaselector/5/select/",B="/mediaselector/6/select/",U={},F={},H=[],W="http://open.live.bbc.co.uk/mediaselector/5/select/version/2.0/vpid/{id}/format/json/mediaset/journalism-http-mobile/jsfunc/{callback}",G=null,V="http",j=!1,q=!1,z={getFlashAvailable:t,setConfig:function(e){if(e){U=e.bitrateFloor;F=e.bitrateCeiling;H=e.suppressType;D=e.mediator&&e.mediator.fck;W=e.mediatorHref||W;G=e.samlMediatorHref||G;j=e.maintainTheLock;N=e.mediator&&e.mediator.ms6percentage;(isNaN(N)||0>N||N>1)&&(N=0);q=e.preferPlainOverDash&&Device&&Device.possiblyPreferPlainOverDash;V=e.preferProtocol||"http"}},sortThumbnailConnections:M,sortSubtitleConnections:O,validateConnections:P,mediate:function(e,i,n){if(!e.mediationRequested){e.mediationRequested=!0;var a=W.replace("{id}",e.identifier);e.samltoken&&G&&(a=G.replace("{id}",e.identifier)+"?saml_auth="+e.samltoken);isNaN(e.ceiling)||0===e.ceiling||(a=a.replace("/jsfunc","/ceiling/"+e.ceiling+"/jsfunc"));Device&&Device.supportPlayerFallback&&(a=a.replace("/jsfunc",c(e.identifier)+"/jsfunc"));if((Math.random()<=N||"360"==e.kind)&&!e._avoidms6){a=a.replace(R,B);e._ms6=!0}"https:"===(location.protocol+"").toLowerCase()&&(a=a.replace("http://","https://"));var r=Utils.now();Utils.getJSON(a,function(a){var o=[];a||(a={result:"error"});var s=a.result;e.mediationTime=Utils.now()-r;if(a.media&&a.media.length){for(var l="",u=0;a.media.length>u;u++){var d=a.media[u];l=d.kind;for(var c=0;d.connection.length>c;c++){var f=d.connection[c];if("audio"==l||"video"==l){var m={href:f.href,protocol:w(f.protocol),mimetype:w(d.type),encoding:w(d.encoding),format:w(f.transferFormat,"plain"),supplier:w(f.supplier),bitrate:A(d.bitrate,0),priority:A(f.priority),dpw:A(f.dpw)};p(m,l,e._ms6);o.push(m);e.type=l}else e.backgroundVideo||"captions"!=l?e.backgroundVideo||"thumbnails"!=l||e.thumbnailConnections.push({href:f.href,protocol:w(f.protocol),supplier:w(f.supplier),dpw:A(f.dpw),priority:A(f.priority)}):e.subtitleConnections.push(new SubtitlesItem(f.href,w(f.protocol),w(f.supplier),A(f.dpw)))}}if(o.length){e.connections=o;x(e,i);P(e,i);e.originalConnections=Utils.clone(o)}else s="noMedia";if(!e.backgroundVideo){O(e);M(e)}}e.mediationAttempted=!0;e.mediationRequested=!1;e.result={reason:s};e.flashAvailableUnlocked=t(o,!0);e.flashAvailable=Device.flashLockMatters?t(o):e.flashAvailableUnlocked;n(e)})}},pickInitialMediaConnection:function(e,t){P(e,t);var i=e.connections?e.connections:[];return i.length>0?{index:0,connection:i[0]}:{}},filter:function(e){var t=[],i=e.connections.length,n=[f,v,y,b,h,T,g,m];if(1==i&&y(e.connections[0])&&m(e.connections[0]))return!0;for(var a=0;i>a;a++){for(var r=!0,o=e.connections[a],s=0;n.length>s;s++)if(!n[s](o,t)){r=!1;break}r&&t.push(o)}e.connections=t;e.originalConnections=Utils.clone(t);return t.length>0},getAlternateMediaConnections:function(e,t){if(e.mediaItem&&!e.mediaItem.failFast&&e.mediaItem.connections&&e.mediaItem.connections.length>1){var i=e.mediaItem.connections,n=[],a=i[0];"plain"==a.format&&(t=!1);for(var r=1;i.length>r;r++)t?i[r].format!=a.format&&n.push(i[r]):e.mediaItem.failedConnections.indexOf(i[r].supplier)<0&&n.push(i[r]);if(e.mediaItem.hasSeenPlaying){var o=e.mediaConnection;if(o){var s=n[0];if(o.format!=s.format||o.protocol!=s.protocol)return}}if(n.length)return n}},switchMediaConnection:function(e,t,i){var n;n=i?Utils.clone(e.mediaItem.originalConnections):z.getAlternateMediaConnections(e,t);if(n){e.failedOver=!t;var a=n[0];e.mediaItem.connections=n;t&&(e.mediaItem.originalConnections=Utils.clone(n));e.failingOver=!0;var r=a.href;if(e.mediaItem.live&&"hls"==a.format){e.timeHelper.setStartTimeAvailable(!1);e.waitingForStartTime=e.waitingForStartTime||e.time}else{r=r+"#t="+(e.waitingForStartTime||e.time);"dash"==a.format&&(e.time>0||e.waitingForStartTime>0)&&(e.mediaItem.connections[0].href=r)}e.dispatch({type:"waiting"});e.mediaSrc(r);e.tryingToPlay&&"dash"!==a&&e.mediaPlayer.play();return!0}return!1},onAdsProcessed:function(e,t){e.mediationAttempted=!0;e.connections=[];t.error||(e.connections[0]={href:t.mediaFile.src,format:"plain"})}};return z}(),DashEvents=function(){function e(e,t){return e==t.els.video?"video":e==t.els.audio?"audio":"unknown"}function t(e){for(var t=e.Period_asArray,i=0;t.length>i;i++)for(var n=t[i].AdaptationSet_asArray,a=0;n.length>a;a++)for(var r=n[a].Representation_asArray,o=0;r.length>o;o++){var s=r[o];"video/mp4"==s.mimeType&&(s.codecs=s.codecs.replace("avc3","avc1"))}return e}function i(e,t){for(var i=e.Period_asArray,a=0;i.length>a;a++)if(!n(i[a],t?1:-1))for(var r=i[a].AdaptationSet_asArray,o=0;r.length>o;o++)n(r[o],t?1:-1)}function n(e,t){var i=e.SegmentTemplate;if(i){i.startNumber+t>0&&(i.startNumber+=t);return!0}return!1}function a(e){var t=e.Period_asArray;if(t)for(var i=0;t.length>i;i++){var n=t[i].AdaptationSet_asArray;if(n)for(var a=0;n.length>a;a++){var r=n[a].SegmentTemplate;if(r&&"presentationTimeOffset"in r){var o=r.timescale||1;return r.presentationTimeOffset/o}}}return 0}function r(e){var t=e.Period_asArray;if(t[0])for(var i=t[0].AdaptationSet_asArray,n=0;i.length>n;n++)if(i[n].InbandEventStream)return!0;return!1}function o(e,t){e.tryingToPlay&&e.mediaPlayer.paused&&(t>10||e.buffered>=e.duration)&&e.mediaPlayer.play()}function s(){G=!1;for(var e=0;W.length>e;e++)W[e].errorSettingUp()}function l(e){u(e);e.drmErrorTimeout=setTimeout(e.errorHandler,U,e.player,SMPError.DRM_ERROR_TIMEOUT)}function u(e){if(e.drmErrorTimeout){clearTimeout(e.drmErrorTimeout);e.drmErrorTimeout=null}}function d(e){if(!G){G=!0;var t=document.createElement("script");t.type="text/javascript";var i=setTimeout(s,q);t.onload=function(){clearTimeout(i);G=!1;for(var e=0;W.length>e;e++)W[e].ready()};var n="/emp/dashjs/2.6.3-7";e&&(n="/emp/dashjs/2.6.3-7");t.src=n+"/dash.all.min.js";document.body.appendChild(t)}}function c(e){function t(t){e.slowDownloadCount[t]=0}var i=e.player;return{metricAdded:{HttpList:function(n){var a=n.mediaType,r="video"==n.mediaType?3:10,o=n.value;if(o.interval&&"MediaSegment"===o.type&&0===o.quality&&o._mediaduration>2&&o.interval/1e3/o._mediaduration>1.05){if(e.canDispatchFragmentWarning){e.errorHandler(i,SMPError.DOWNLOAD_WAS_SLOW);e.canDispatchFragmentWarning=!1}clearTimeout(e.timersClearedOnReset[a]);e.timersClearedOnReset[a]=setTimeout(t,F,a);e.slowDownloadCount[a]++;if(e.slowDownloadCount[a]>r&&0===i.mediaPlayer.playbackRate){i.mediaPlayer.pause();e.delayedErrorHandler(i,SMPError.DOWNLOADS_OFTEN_SLOW,o.url)}}},BufferLevel:function(t){var n=t.mediaType,a=t.value.level/1e3;if(a!=e.bufferLevel[n]){Device.requiresManualDashPlay&&o(i,a);e.bufferLevel[n]=a}},DVRInfo:function(t){e.dashPlayer.currentStart=Math.min(t.value.range.end,t.value.range.start+30);e.dashPlayer.currentEnd=t.value.range.end;e.player.timeHelper.startTimeAvailable||e.player.timeHelper.setStartTimeAvailable(!0)}}}}function p(e){var t,i=0/0,n=function(){if(e.dashPlayer){var t=e.player.consideredMobileConnection?0:.3;if(document.hidden){i=e.dashPlayer.getMaxAllowedRepresentationRatioFor("video");(isNaN(i)||i>t)&&e.dashPlayer.setMaxAllowedRepresentationRatioFor("video",t)}else e.dashPlayer.setMaxAllowedRepresentationRatioFor("video",i)}};return function(){clearTimeout(t);var e=document.hidden?2500:100;t=setTimeout(n,e)}}function f(e){var t=e.player;return function(i){var n=e.initialBitrate.video||0,a=e.initialBitrate.audio||0;try{if(window.localStorage){!n&&localStorage.smphtml5_vbr&&(n=parseInt(localStorage.smphtml5_vbr,10));if(!a&&localStorage.smphtml5_abr){a=parseInt(localStorage.smphtml5_abr,10);t.consideredMobileConnection&&(a=Math.min(97,a))}}}catch(o){}if(a){e.dashPlayer.setInitialBitrateFor("video",n/1e3);e.dashPlayer.setInitialBitrateFor("audio",a/1e3)}else{var s=.6;if(t.config.hasOwnProperty("startingQuality"))s=t.config.startingQuality;else if(t.config.consideredMobileConnection)s=.1;else if(t.config.hasOwnProperty("quality"))switch(t.config.quality){case"hd":case"high":s=1;break;case"medium":t.mediaContainer.clientWidth>=832&&(s=1);break;case"low":s=0}e.dashPlayer.setInitialRepresentationRatioFor("video",s);e.dashPlayer.setInitialRepresentationRatioFor("audio",s)}if(t.mediaItem&&"video"==t.mediaItem.type){e.dashPlayer.setAutoSwitchQualityFor("audio",!1);t.consideredMobileConnection?e.dashPlayer.setInitialBitrateFor("audio",48):e.dashPlayer.setInitialBitrateFor("audio",97)}else e.dashPlayer.setAutoSwitchQualityFor("audio",!0);t.mediaItem&&t.mediaItem.live&&(e.isLiveWebcast=r(i.data));if(e.isLiveWebcast){var l=m(i.data);if(l.ended){e.isLiveWebcast=!1;h(e);e.player.timeHelper.setInbandEndTime(l.endTime)}else g(e)}if(e.manifestRefreshCallback){var u=e.manifestRefreshCallback;e.manifestRefreshCallback=null;u()}}}function m(e){return{ended:"static"===e.type,endTime:e.mediaPresentationDuration}}function g(e){e.webcastRefreshId||(e.webcastRefreshId=setInterval(function(){var t=e.player.timeHelper;t.latestSeek-e.player.time>H/1e3&&e.refreshManifest()},H))}function h(e){if(e.webcastRefreshId){clearInterval(e.webcastRefreshId);e.webcastRefreshId=null}}function y(e,t,i,n){e.streamingBitrate[t]={rate:i,index:n}}function v(e,t,i,n){var a=e.player,r=a.mediaConnection;a.dispatch({type:"bitrateChanged",streamType:t,previousBitrate:e.bitrate[t]?e.bitrate[t].rate:0/0,newBitrate:i,newIndex:n});e.bitrate[t]={rate:i,index:n};for(var o={all:[]},s=a.dashEvents.dashPlayer.getActiveStream().getProcessors(),l=0;s.length>l;l++){var u=s[l];if(u){var d=u.getMediaInfo();if(d){var c=new RegExp('.*codecs="(.*)"',"gim"),p=c.test(d.codec);if(p){var f=d.type;o.all.push(RegExp.$1);"all"!=f&&(o[f]=RegExp.$1)}}}}a.dispatch({type:"loadedmetadata",bitrate:e.currentBitsPerSecond,codecs:o.all.join(","),audioCodec:o.audio,videoCodec:o.video,cdn:r?r.supplier:null});try{window.localStorage&&("audio"===t?localStorage.setItem("smphtml5_abr",i):"video"===t&&localStorage.setItem("smphtml5_vbr",i))}catch(m){}e.slowDownloadCount[t]=0}function b(e,t,i){for(var n=e.dashPlayer.getBitrateInfoListFor(t),a=0;n.length>a;a++)if(n[a].qualityIndex===i)return n[a].bitrate;return-1}function T(e){return function(t){var i=t.metric;e[t.type]&&e[t.type][i]&&e[t.type][i](t)}}function E(e){return function(t){var i;switch(t.error){case"capability":e.delayedErrorHandler(e.player,SMPError.DEVICE_NOT_SUPPORTED);break;case"download":i=t.event.url;break;case"key_session":e.delayedErrorHandler(e.player,SMPError.DRM_KEY,t.event);l(e);break;case"manifestError":i=t.event&&t.event.message}var n=z[t.error];if(n){var a=n[t.event.id]||n.DEFAULT;if(a==SMPError.NO_SUPPORTED_CODECS&&e.player.config.ignoreCodecErrors)return;if(a==SMPError.STREAM_FRAGMENT_LOAD_FAIL){var r=t.event.request.mediaInfo.streamInfo.duration,o=t.event.request.startTime;if(1>r-o){e.player.endOnWaiting=!0;return}navigator.onLine===!1&&k(e,t.event.request.serviceLocation);e.canDashFailover()||e.streamFragmentErrorSent?a=SMPError.FRAGMENT_DOWNLOAD_INFORMATION:e.streamFragmentErrorSent=!0}if(a==SMPError.NO_SUPPORTED_CODECS){Utils.asyncDelay(e.reset,[],e);if(e.player.supportFallback){a=SMPError.NO_SUPPORTED_CODECS_FAILOVER;Utils.asyncDelay(e.player.fallbackAsAppropriate,[],e.player)}}e.delayedErrorHandler(e.player,a,i)}}}function P(e){return function(t){var i=t.newQuality,n=t.mediaType;y(e,n,b(e,n,i),i)}}function C(e){return function(t){var i=t.newQuality,n=t.mediaType;v(e,n,b(e,n,i),i)}}function I(e){return function(t){for(var i,n=0;e.connections.length>n;n++){var a=e.connections[n];if(a.href.indexOf(t.baseUrl.url)>=0){i=a;break}}if(i&&e.connections[0]!==i){S(e.connections,i);S(e.player.mediaItem.connections,i);e.player.dispatch({type:"changingsrc",supplier:i.supplier,encoding:i.encoding,format:i.format})}}}function S(e,t){var i=e.indexOf(t);if(i>0){e.splice(i,1);e.unshift(t)}return i>=0}function k(e,t){for(var i=e.connections.filter(function(e){return e.supplier===t}),n=e.player.mediaItem.connections,a=0;i.length>a;a++){var r=n.indexOf(i[a]);r>=0&&n.splice(r,1)}e.connections=e.connections.filter(function(e){return e.supplier!==t})}function _(e){return function(t){e.player.mediaItem.dashAlternates&&k(e,t.entry)}}function w(e){return function(){e.player.mediaItem.dashAlternates&&(e.connections=[])}}function A(e){return function(t){e.player.dispatch(t)}}function L(e){return function(t){isNaN(t.newDuration)||e.player.timeHelper.setInbandEndTime(t.newDuration)}}function x(e){if(!e.eventsInitialised){e.errorHistory=[];var t=e.player,i=e.dashPlayer,n=dashjs.MediaPlayer.events;Utils.multiAddEventListener(i,[n.METRIC_ADDED,n.METRIC_UPDATED],T(c(e)));i.addEventListener(n.STREAM_INITIALIZED,function(){for(var e=i.getBitrateInfoListFor("video")||[],n=i.getBitrateInfoListFor("audio")||[],a=[],r=[],o=0;e.length>o;o++)a.push({bitrate:e[o].bitrate,qualityIndex:e[o].qualityIndex});for(o=0;n.length>o;o++)r.push({bitrate:n[o].bitrate,qualityIndex:n[o].qualityIndex});t.dispatch({type:"streamInitialized",bitrates:a||r,audioBitrates:r})});i.addEventListener(n.MANIFEST_LOADED,f(e));i.addEventListener(n.ERROR,E(e));i.addEventListener(n.QUALITY_CHANGE_REQUESTED,P(e));i.addEventListener(n.QUALITY_CHANGE_RENDERED,C(e));i.addEventListener(n.AST_IN_FUTURE,function(i){if(i.delay>2e4){clearTimeout(e.timersClearedOnReset.AST_IN_FUTURE);e.timersClearedOnReset.AST_IN_FUTURE=setTimeout(Utils.callErrorFunction,100,t,SMPError.CONTENT_NOT_AVAILABLE_PRE_START)}});if(n.BASEURL_SELECTED){i.addEventListener(n.BASEURL_SELECTED,I(e));i.addEventListener(n.SERVICE_LOCATION_BLACKLIST_CHANGED,_(e));i.addEventListener(n.URL_RESOLUTION_FAILED,w(e))}i.addEventListener("needkey",A(e));i.addEventListener(n.MANIFEST_VALIDITY_CHANGED,L(e));e._visibilityChangeHandler=p(e);document.addEventListener("visibilitychange",e._visibilityChangeHandler);e.eventsInitialised=!0}}function O(e){for(var t=dashjs.MediaPlayer.events,i=[t.METRIC_ADDED,t.METRIC_UPDATED,t.MANIFEST_LOADED,t.ERROR,t.QUALITY_CHANGE_REQUESTED,t.QUALITY_CHANGE_RENDERED,t.AST_IN_FUTURE,t.MEDIA_FRAGMENT_LOADED,t.BASEURL_SELECTED,t.SERVICE_LOCATION_BLACKLIST_CHANGED,t.URL_RESOLUTION_FAILED,t.STREAM_INITIALIZED,t.MANIFEST_VALIDITY_CHANGED,"needkey"],n=e.dashPlayer,a=0;i.length>a;a++)n.removeEventListener(i[a]);
document.removeEventListener("visibilitychange",e._visibilityChangeHandler);e.eventsInitialised=!1}function M(e){return{currentBitsPerSecond:{get:function(){return e.bitrate?Math.round((e.bitrate.video.rate+e.bitrate.audio.rate)/1e3):0}},currentBitrateIndex:{get:function(){var t;e.bitrate&&(t=e.bitrate.video.index);isNaN(t)&&(t=e.bitrate.audio.index);return t}},dashJsDebug:{get:function(){return V},set:function(e){var t=this.dashPlayer;V=!!e;t&&t.getDebug().setLogToBrowserConsole(e)}}}}function D(e,t){if(!e.player.isLive){var i,n,a=[],r=e.connections.slice(1),o=e.connections[0];a.push({__text:t.baseUri,"dvb:priority":1,serviceLocation:o.supplier});for(var s=0;r.length>s;s++)for(var l=0;r.length>l;l++){i=r[l].href;n=i.split(".ism/");if(!n||-1==i.indexOf(".ism/"))return;if(-1==(r[l].supplier+"").indexOf("bidi")){var u=n[0]+".ism/";a.push({__text:u,"dvb:priority":s+2,"dvb:weight":r[l].dpw,serviceLocation:r[l].supplier||u})}}if(a.length){t.BaseURL_asArray=a;delete t.baseUri;e.player.mediaItem&&(e.player.mediaItem.dashAlternates=!0)}}}function N(e,t){return e.simulcast&&!Utils.isItemAudio(e)&&t}function R(e,t,i,n){var a=n.BaseURL&&n.BaseURL.__text;a||(a=n.originalUrl);if(a){var r=new LiveSubtitlesItem(a,!1,e.player.config.subtitlesWorkaround);i.subtitleConnections.push(r);var o=function(e){"video"==e.chunk.mediaInfo.type&&r.onFragmentLoaded(e.chunk,e.request)};e.dashPlayer.addEventListener(t,o);e.player.ui.Subtitles&&e.player.ui.Subtitles.onNewConnection();return!0}return!1}function B(e,t){if(e.dashPlayer){u(e);e.dashPlayer.setProtectionData(t)}}var U=1e4,F=36e4,H=6e4,W=[],G=!1;try{var V=document.cookie.indexOf("dashJsDebug=true")>-1}catch(j){}var q=1e4,z={manifestError:{parse:SMPError.MPD_PARSE_ERROR,nostreams:SMPError.MPD_NO_STREAMS,codec:SMPError.NO_SUPPORTED_CODECS,DEFAULT:SMPError.MPD_GENERIC},download:{manifest:SMPError.MPD_LOAD_FAIL,initialization:SMPError.INIT_FRAGMENT_LOAD_FAIL,content:SMPError.STREAM_FRAGMENT_LOAD_FAIL,DEFAULT:SMPError.NETWORK_UNAVAILABLE},mediasource:{DEFAULT:SMPError.DASH_MEDIASOURCE_ERROR}},Y=function(e,t,i){var n=this;W.push(n);n.player=e;n.experimentalDash=t;Utils.defineProperties(n,M(n));window.dashjs?n.ready(dashjs.MediaPlayer):d(t);this.codecRefresh=-1;this.setup();n.errorHandler=i;return this};Y.prototype={ready:function(){var e=dashjs.MediaPlayer,t=this;if(!t.dashPlayer){t.dashPlayer=e().create();t.dashPlayer.addEventListener=t.dashPlayer.on;t.dashPlayer.removeEventListener=t.dashPlayer.off;t.dashPlayer.getDebug().setLogToBrowserConsole(V);t.dashPlayer.initialize();x(t)}t.connections&&t.connections.length&&t.go()},resetSrc:function(){var e=this;e.connections=null},setSrc:function(e){var t=this;t.connections=e.filter(function(t){return t.protocol===e[0].protocol&&"dash"==t.format});(t.player.config.disableDashBaseUrlFailover||t.player.isLive)&&(t.connections=t.connections.slice(0,1));window.dashjs?t.ready(dashjs.MediaPlayer):d()},updatePortalSize:function(){var e=this;if(e.dashPlayer){clearTimeout(e.portalResizer);e.portalResizer=setTimeout(e.dashPlayer.updatePortalSize.bind(e.dashPlayer),300)}},applyLimits:function(){var e=this,t=e.player,i=t.config.lowBandwidth?0:0/0;if(e.dashPlayer){e.dashPlayer.setMaxAllowedRepresentationRatioFor("video",i);e.dashPlayer.setMaxAllowedRepresentationRatioFor("audio",i);var n=t.mediaItem&&t.mediaItem.live||"hd"==t.config.quality?0/0:2e3;if(isNaN(parseInt(t.config._dashVideoIndex)))if(t.isPlaying360){e.dashPlayer.setAutoSwitchQualityFor("video",!0);e.dashPlayer.setMaxAllowedBitrateFor("video",0/0);e.dashPlayer.setLimitBitrateByPortal(!1)}else{e.dashPlayer.setAutoSwitchQualityFor("video",!0);e.dashPlayer.setMaxAllowedBitrateFor("video",n);e.dashPlayer.setLimitBitrateByPortal(!0)}else{e.dashPlayer.setAutoSwitchQualityFor("video",!1);e.dashPlayer.setMaxAllowedBitrateFor("video",0/0);e.dashPlayer.setLimitBitrateByPortal(!1);e.dashPlayer.setQualityFor("video",t.config._dashVideoIndex)}if(isNaN(parseInt(t.config._dashAudioIndex)))t.isAudio&&e.dashPlayer.setAutoSwitchQualityFor("audio",!0);else{e.dashPlayer.setAutoSwitchQualityFor("audio",!1);e.dashPlayer.setQualityFor("audio",t.config._dashAudioIndex)}}},go:function(){var n=this,o=n.player;n.dashPlayer.reset();o.storedProtectionData&&B(n,o.storedProtectionData);n.dashPlayer.setSelectionModeForInitialTrack(o.config.lowBandwidth?"lowestBitrate":"highestBitrate");n.dashPlayer.setBufferToKeep(90);n.dashPlayer.setScheduleWhilePaused(!0);n.dashPlayer.clearDefaultUTCTimingSources();n.dashPlayer.setLimitBitrateByPortal(!0);n.dashPlayer.setPortalScale(1);n.dashPlayer.enableLastBitrateCaching(!1);n.dashPlayer.enableLastMediaSettingsCaching(!1);n.dashPlayer.useSuggestedPresentationDelay(!1);n.dashPlayer.setLiveDelay(10);n.applyLimits();if(o.config.dvbReporting){n.dashPlayer.setDefaultDVBMetricsEndpoint&&n.dashPlayer.setDefaultDVBMetricsEndpoint({"dvb:reportingUrl":RDotReporting.dvbUrl()});n.dashPlayer.disableDVBReportingResponseChecking&&n.dashPlayer.disableDVBReportingResponseChecking(!0)}n.dashPlayer.setInitialMediaSettingsFor("audio",{audioChannelConfiguration:2});n.mediaElement&&n.dashPlayer.attachView(n.mediaElement);var s=e(o.mediaPlayer,o);n.dashPlayer.retrieveManifest(n.connections[0].href,function(e){if(e&&n.connections){n.connections.length>1&&!o.config.disableDashBaseUrlFailover&&D(n,e);Device.requiresDashAVC3CodecHack&&(e=t(e));N(o.mediaItem,o.ui.config.subtitles&&o.ui.config.subtitles.supportLiveSubtitles)&&R(n,dashjs.MediaPlayer.events.MEDIA_FRAGMENT_LOADED,o.mediaItem,e);n.player.timeHelper.setPresentationTimeOffset(a(e)||0);o.mediaItem&&o.mediaItem.live&&(n.isLiveWebcast=r(e));n.isLiveWebcast?m(e).ended&&(n.isLiveWebcast=!1):o.mediaItem&&!o.isAudio&&o.mediaItem.live&&i(e,!0);n.player.waitingForChange[s]=!1;n.dashPlayer.attachSource(e);n.mediaElement||n.dashPlayer.preload()}})},reset:function(){var e=this;e.setup();e.resetSrc();if(e.codecRefresh){clearTimeout(e.codecRefresh);e.codecRefresh=-1}if(e.dashPlayer){O(e);e.dashPlayer.reset();e.dashPlayer=null}u(e);for(var t in e.timersClearedOnReset)e.timersClearedOnReset.hasOwnProperty[t]&&clearTimeout(e.timersClearedOnReset[t]);h(e)},setup:function(){var e=this;e.slowDownloadCount={video:0,audio:0};e.bitrate={video:{rate:0,index:0/0},audio:{rate:0,index:0/0}};e.bufferLevel={};e.streamingBitrate={video:{rate:0,index:0/0},audio:{rate:0,index:0/0}};e.streamFragmentErrorSent=!1;e.eventsInitialised=!1;e.canDispatchFragmentWarning=!0;e.isLiveWebcast=!1;e.initialBitrate={};e.timersClearedOnReset={};e.errorHandler=function(){}},errorSettingUp:function(){var e=this;if(e.connections&&e.connections.length){e.errorHandler(e.player,SMPError.DASH_INIT_TIMEOUT);e.mediaItem=null}},getHttpRequests:function(e){if(!this.player||!this.dashPlayer)return[];var t=this.dashPlayer,i=t.getDashMetrics(),n=t.getMetricsFor(e);return i.getHttpRequests(n)},create:function(){},refreshManifest:function(e){var t=this,i=t.dashPlayer;if(i&&"function"==typeof i.refreshManifest){i.refreshManifest();e&&!t.manifestRefreshCallback&&(t.manifestRefreshCallback=e)}},setMediaElement:function(e){var t=this;t.mediaElement=e;t.dashPlayer&&t.dashPlayer.attachView(t.mediaElement)},setInitialBitrate:function(e){var t=this;isNaN(e.audio)||(t.initialBitrate.audio=e.audio);isNaN(e.video)||(t.initialBitrate.video=e.video)},setErrorHandler:function(e){var t=this;t.errorHandler=e},delayedErrorHandler:function(e,t,i,n,a){var r=this;r.errorHandler(e,t,i,n,a,!0)},getBitrateListFor:function(e){var t=this,i=t.dashPlayer.getActiveStream();return i.getBitrateListFor(e)},canDashFailover:function(){var e=this;if(!e.connections)return!1;var t=e.connections.filter(function(e){return-1==(e.supplier+"").indexOf("bidi")});return e.connections.length>t.length+1}};return Y}(),RDotReporting=function(){function e(e){var t=(e.config.mediatorHref+"").match(/mediaset\/([^\/]+)\//);return t?t[1]:"-"}function t(t,i){l++;var n=[];n.push(t?r.replace(/e$/,t):r);n.push("av");n.push("0");n.push("-");n.push("smpj");n.push("1.2.1");n.push("smphtml5");n.push(o);n.push(d.ID);n.push(l);n.push(encodeURIComponent(a.config.counterName));var s=a.mediaConnection||{},u=s.supplier||"-",c=s.format||"-";n.push(u);n.push(c);n.push(a.elType);var p=a.mediaItem,f=p?a.mediaItem.live?"live":"ondemand":"-";n.push(f);n.push(e(a));var m=a.mediaItem?a.mediaItem.identifier:"-";n.push(m?m:"-");i||(n=n.concat(a.qos.getInfoData()));return n}function i(e){for(var i=t(),n=0;e.length>n;n++){var a=e[n];"object"==typeof a&&(a=JSON.stringify(a));i.push(encodeURIComponent(a))}return i.join("/")}function n(e){var t=new Image;t.src=e}var a,r="//r.bbci.co.uk/e",o="",s=/\W+/gim,l=0,u={_1061:97},d=function(){};d.params={};d.init=function(e,t){d.params={};a=e;d.ID=Utils.UUID();o=e.build;t&&""!==t&&(r=t.replace(/\/*$/g,""))};d.playlistLoading=function(){d.ID=Utils.UUID()};d.dvbUrl=function(){var e=[];e.push(r.replace(/e$/,"i"));e.push("bbcrd");e.push("-");e.push("smphtml5");e.push(o);e.push(a.mediaItem?a.mediaItem.identifier:"-");e.push(d.ID);e.push(a.qos.getMediaType());return e.join("/")};d.trackQOSInfo=function(e,i){if(a.config.enableRdotReporting&&e){var r=t("i");r.push(i);r.push(e);n(r.join("/"))}};d.trackPlayIntent=function(){if(a.config.enableRdotReporting){var e=t("p",!0);n(e.join("/"))}};d.trackPlaySuccess=function(){if(a.config.enableRdotReporting){var e=t("ps",!0);e.push(a.mediaItem.mediationTime?a.qos.player.mediaItem.mediationTime.toFixed(0):"~");e.push(a.qos.startupTime?a.qos.startupTime.toFixed(0):"~");n(e.join("/"))}};d.trackError=function(e,t){if(a.config.enableRdotReporting){isNaN(u["_"+e.code])&&(u["_"+e.code]=0);if(u["_"+e.code]++>=100)return;var r=[e.code+""],o=(e.severity+"").substring(0,1);t&&t._ms6&&(o+="~ms6error");e.extra&&"string"==typeof e.extra&&(o+="~"+e.extra.replace(s,"~"));r.push(o);var l=i(r);n(l);return l}};return d}(),SWF=function(){function e(e){return{currentTime:{get:function(){return e._currentTime},set:function(t){e._currentTime=t;e.call("currentTime",t)}},volume:{get:function(){return e.player.volume},set:function(t){e.call("volume",t);e.player.dispatch({type:"volumechange",volume:e.player._volume,muted:e.player._muted})}},muted:{get:function(){return e.player.muted},set:function(t){e.call("muted",t);e.player.dispatch({type:"volumechange",volume:e.player._volume,muted:e.player._muted})}},mediaConnection:{get:function(){return e._mediaConnection?e._mediaConnection:{format:"swf"}}},failed:{get:function(){return e._failed},set:function(t){if(!e.killed){e._failed=t;e.needToPause=!1;e.playOnInitialised=!1;Utils.delayedErrorFunction(e.player,e._failed,e._extraFailed)}}}}}function t(e,t){return{holdingImageURL:t,simulcast:!0,items:[{kind:"audio"==e.type?"radioProgramme":"programme",live:e.live,vpid:e.identifier,samltoken:e.samltoken,ceiling:e.ceiling}]}}function i(e,i){var n={},a=e.player.config;n.noTracking=!0;n.forceConnectionSupplier=a.mediator.fck;n.quality=a.quality;n.autoPlay=!e.noAutoplayBlocked;n.loop=a.loop;n.maintainTheLock=a.maintainTheLock;n.mediationUrl=a.mediatorHref.replace("/format/json/jsfunc/{callback}","");n.samlMediationUrl=a.samlMediatorHref.replace("/format/json/jsfunc/{callback}","");n.startTime=a.startTime;n.counterName=a.counterName;n.rdotname="smphtmlflash";n.rdotsessionid=RDotReporting.ID;n.embedPageURL=a.embedPageURL;e.player.waitingForStartTime=0;e._currentTime=a.startTime;e._needToSendPlay=!0;if(i.fallbackPlaylist){n.playlistUrl=i.fallbackPlaylist;e.call("setPlaylistOptions",n)}else{var r=t(i,e.player.ui.getBackgroundImageUrl());e.call("setPlaylistObject",{playlist:r,options:n})}}function n(e){var t=0;return function(i,n){if(i==d){var r=!1;if(!e.seenEvent){e.seenEvent=!0;r=!0}if(e._swf){if(r){var o=0;try{var s=e._swf.GetVariable("$version");o=parseInt(s.split(" ")[1],10)}catch(l){}if(c>o){e._extraFailed="version_"+o;e.failed=SMPError.FLASH_NOT_INITIALISED}}var f=n.data||{};for(var m in f)if("type"!=m){n[m]=f[m];"currentDuration"==m&&(n.duration=f[m])}switch(n.type){case"initialised":e.initialised();return;case"mediaItemChanged":e.edgeOkay=!0;e.noAutoplayBlocked=!1;clearTimeout(e.edgeReplay);e.player.mediaItem.subtitleConnections=[];if(n.captions&&n.captions.length>0){for(var g=0;n.captions.length>g;g++){var h=n.captions[g];e.player.mediaItem.subtitleConnections.push(new SubtitlesItem(h.href,h.protocol,h.identifier))}LoadBalancing.sortSubtitleConnections(e.player.mediaItem);e.player.dispatch({type:"mediaItemInfoChanged"})}return;case"error":2009==n.code&&e.call("stop");"critical"==n.severity&&(1039==n.code?Utils.delayedErrorFunction(e.player,SMPError.CANNOT_MAINTAIN_LOCK,1039):Utils.delayedErrorFunction(e.player,SMPError.FLASH_CRITICAL_ERROR,n.code+""));return;case"playlistLoaded":if(Device.edge&&!e.edgeOkay&&!e.noAutoplayBlocked){clearTimeout(e.edgeReplay);e.edgeReplay=setTimeout(function(){e.noAutoplayBlocked=!0;e.ready=!1;e._swf=null;document.getElementById(u).innerHTML="";e.playItem(e.player.mediaItem)},p)}return;case"playlistLoading":case"playlistEnded":case"uiinfo":case"showCta":case"tryingToPlay":case"screenReaderAlert":case"abort":case"uiactive":case"volumechange":return;case"pause":e.paused=!0;break;case"ended":e.paused=!0;e.ended=!0;break;case"playing":if(e._needToSendPlay){e._needToSendPlay=!1;e.player.dispatch({type:"play"})}if(e.ended){e._currentTime=0;e.ended=!1;e.player.dispatch({type:"timeupdate"})}e.paused=!1;break;case"timeupdate":e.timeupdateCount++;3==e.timeupdateCount&&e.disableMouseUIBypass();e._currentTime=n.currentTime;e.duration=n.duration;e.currentTimeInfo=n;break;case"info":n.currentBitsPerSecond=e.mediaConnection.bitrate;break;case"loadedmetadata":e._mediaConnection={bitrate:n.bitrate,supplier:n.cdn,format:n.transferFormat};e.videoWidth=n.width;e.videoHeight=n.height;e.player.dispatch({type:"changingsrc",supplier:n.cdn,encoding:n.videoCodec||n.audioCodec||"unknown",format:n.transferFormat})}e.player.dispatch(n)}else if(t++<20)setTimeout(a(i,n),100);else{e._extraFailed="repeat";e.failed=SMPError.FLASH_NOT_INITIALISED}}}}function a(e,t){return function(){window.embeddedMedia.handle(e,t)}}function r(e,t){window.embeddedMedia={handle:n(e),swf:e};var i=e.player.config,a={domId:d,jsCallbackMethod:"window.embeddedMedia.handle",isBSTime:i.isBSTime,noTracking:!0,bumpVersion:"no-bump",customRdotBaseURL:i.customRdotBaseURL,enableRdotReporting:i.enableRdotReporting,maintainTheLock:i.maintainTheLock};e._swf=o(e,u,t,a,i.swfUrl);setTimeout(function(){if(!e.seenEvent){e._extraFailed="noeventtimeout";e.failed=SMPError.FLASH_NOT_INITIALISED}},1e4);e.enableMouseUIBypass()}function o(e,t,i,n,a){var r={quality:"high",bgcolor:"000000",allowFullScreen:!1,allowScriptAccess:"always",wmode:"opaque"};for(var o in n)if(n.hasOwnProperty(o)){var l=encodeURIComponent(o),u=encodeURIComponent(n[o]);r.flashvars?r.flashvars+="&"+l+"="+u:r.flashvars=l+"="+u}var d=document.createElement("object");for(var c in r)r.hasOwnProperty(c)&&"movie"!==c.toLowerCase()&&d.appendChild(s(c,r[c]));d.setAttribute("type","application/x-shockwave-flash");d.setAttribute("data",a);d.setAttribute("id",t);d.setAttribute("height","100%");d.setAttribute("width","100%");if(i.parentNode){var p=Utils.getOffset(e.player.mediaContainer,"height");264>p&&i.parentNode.setAttribute("style","position: relative; z-index: 999;");i.parentNode.replaceChild(d,i)}return d}function s(e,t){var i=document.createElement("param");i.setAttribute("name",e);i.setAttribute("value",t);return i}var l,u="p_swfcontainer",d="htmlSWFPlayer",c=22,p=1e4,f={controls:{enabled:!1},errorDialog:{enabled:!1},buffer:{enabled:!1},cta:{visiblyHidden:!0},fullscreen:{enabled:!1,dblclick:!1},poster:{enabled:!0},guidance:{pinRequired:!1},hideDefaultErrors:!0},m=function(t){var i=this;i.player=t;i.style={};i.timeupdateCount=0;Utils.defineProperties(i,e(i))};m.prototype={playItem:function(e){var t=this;t.killed=!1;t.needToPause=!1;t.playOnInitialised=!1;if(t.ready)i(t,e);else{t.playOnInitialised=!0;if(t._swf)t.failed&&Utils.delayedErrorFunction(t.player,t.failed);else{var n=document.createElement("div");n.id=u+"_player";document.getElementById(u).appendChild(n);r(t,n)}}t.show()},stop:function(){var e=this;e.playOnInitialised=!1;e.needToPause=!1},hide:function(){Utils.className(document.body,"flashHidden")},show:function(){Utils.className(document.body,"","flashHidden")},call:function(e,t){var i=this;i._swf&&i._swf.call&&i._swf.call(e,t)},initialised:function(){var e=this;e.call("setUIOptions",f);e.call("volume",e.player.volume);e.call("muted",e.player.muted);e.ready=!0;if(e.playOnInitialised){e.playOnInitialised=!1;i(e,e.player.mediaItem);if(e.needToPause){e.needToPause=!1;e.call("pause")}}},load:function(){},kill:function(){var e=this;e.stop();e.call("stop");e.hide();e.killed=!0},play:function(){var e=this;if(e.playOnInitialised)e.needToPause=!1;else{e.show();e.player.dispatch({type:"play"});e.call("play")}},pause:function(){var e=this;e.playOnInitialised?e.needToPause=!0:e.call("pause")},enableMouseUIBypass:function(){var e=this;e.timeupdateCount=0;if(Device.edge){l=function(){e._swf.removeEventListener("mouseup",l);e.play()};e._swf.addEventListener("mouseup",l)}if(Device.edge||window.chrome&&window.chrome.runtime){e._swf.style.pointerEvents="auto";Utils.deleteCssRules(e.player.ui.stylesheet,["notInteractiveContent"]);e.player.ui.stylesheet.insertRule(".notInteractiveContent { pointer-events:none; }",0)}},disableMouseUIBypass:function(){var e=this;e._swf.style.pointerEvents="none";e._swf.parentNode.removeAttribute("style");Utils.deleteCssRules(e.player.ui.stylesheet,["notInteractiveContent"]);l&&e._swf.removeEventListener("mouseup",l)}};return m}(),MediaSessionApi=function(){function e(e){return{playing:function(){e.alreadySetFromPlayback||e.setMetadata(e.player.playlist)},mediaItemInfoChanged:function(){e.alreadySetFromPlayback=!1},setMediaSessionAPIdata:function(t){e.setMetadata(t.data)}}}var t=function(t){var i=this;i.player=t;i.alreadySetFromPlayback=!1;i.eventCallbacks=e(i);return i};t.prototype={isSupported:function(){var e=this,t=window.navigator&&navigator.mediaSession&&navigator.mediaSession.setActionHandler,i=e.player.ui.config.mediaSessionAPI.enabled;return t&&i},setMetadata:function(e){var t=this,i=window.MediaMetadata;if(t.isSupported()||!i){var n=navigator.mediaSession;t.alreadySetFromPlayback=!0;t.title=e.title||"";t.posterURL=e.posterImg||"";t.artist=e.artist||"";t.album=e.album||"";""!==t.posterURL&&(t.posterURL=Utils.doChef(t.posterURL,t.player.ui.container,t.player.ui.config.poster));n.metadata=new i({title:t.title,artist:t.artist,album:t.album,artwork:[{src:t.posterURL,sizes:"512x512",type:"image/jpg"}]});t.setControls()}},setControls:function(){var e=this,t=e.calculateSkipTime(),i=navigator.mediaSession;i.setActionHandler("seekforward",function(){e.player.mediaPlayer.currentTime=e.player.mediaPlayer.currentTime+t;e.player.trackAction("seekforward_mediaSessionApi","seekforward")});i.setActionHandler("seekbackward",function(){e.player.mediaPlayer.currentTime=e.player.mediaPlayer.currentTime-t;e.player.trackAction("seekbackward_mediaSessionApi","seekbackward")});i.setActionHandler("play",function(){e.player.mediaPlayer.play();e.player.trackAction("play_mediaSessionApi","play")});i.setActionHandler("pause",function(){e.player.mediaPlayer.pause();e.player.trackAction("pause_mediaSessionApi","pause")})},calculateSkipTime:function(){var e,t=this,i=t.player.duration;e=t.player.isLive?20:3*i/100;(0===e||isNaN(e))&&(e=10);return e}};t.isSupported=window.navigator&&navigator.mediaSession&&navigator.mediaSession.setActionHandler;return t}(),Player=function(){function e(){if(window.navigator&&navigator.plugins)for(var e=0;navigator.plugins.length>e;e++)if("Shockwave Flash"==navigator.plugins[e].name)return!0;return!1}function t(e){var t=new RegExp("^((http[s]{0,1}):)?//([^\\?\\&#:/]*)","gi");if(t.test(e)){var i=RegExp.$3;if(i){var n=document.createElement("link");n.rel="dns-prefetch";n.href="https://"+i;document.head.appendChild(n)}}}function i(e,t,i){if(e.els[t]&&e.els[t].parentNode){i&&e.els[t].pause();e.els[t].style.left=HIDDEN_PLAYER}e.swf.hide();i&&e.swf.pause();e.threeSixty&&e.threeSixty.hideCanvas();e.ui&&e.ui.Subtitles&&e.ui.Subtitles.clearSubtitles()}function n(e,t,i){if(i){if(F[e.uid])for(var n=0;F[e.uid].length>n;n++)F[e.uid][n](t)}else a(e).apply(e,[t])}function a(e,t){var i=e.uid;if(!U[i]){t&&(U[i]={callbacks:t});var n=function(t){var n=I(t.target,e);t._=e;t._queuedActions=t._queuedActions||[];var a=t.type||"unknown";if("unknown"===n||!e.outOfControl||"webkitendfullscreen"==a||"volumechange"==a){var r=[];U[i]&&(r=U[i].callbacks);var o=e.waitingForChange[n]||"unknown"!=n&&(n!=e.elType||Utils.eventFieldData[a]&&h(e));o=o||e.failingOver&&"error"!=t.type&&"waiting"!=t.type&&"loadedmetadata"!=t.type&&"canplay"!=t.type;o=o||"timeupdate"==a&&(!e.isPlaying360&&e.mediaPlayer.style.left==HIDDEN_PLAYER||e.isPlaying360&&e.threeSixty&&!e.threeSixty.showingCanvas);("volumechange"==a||"SonarUserActionEvent"==a||"SonarErrorEvent"==a||"changingsrc"==a)&&(o=!1);t.unwanted=o;if(e.playbackMightRestartLater[n]&&"play"==a){e.willAutoplayWhenPlayCalled[n]=!0;e.autoplayTimeoutRetryAttempted=!1;e.mediaItemIndex=0;e.tryingToPlay=!0;o=!1;e.playbackMightRestartLater={};Utils.delayedErrorFunction(e,SMPError.PLAYING_STARTED_AFTER_NO_INTENT)}for(var s=r.length,l=0;s>l;l++){var u=r[l]||{};if(!("function"!=typeof u[a]||u.blockUnwanted&&o)){var d=u[a](t);d&&(t=d)}}var c=t._queuedActions;delete t._queuedActions;if(o);else{t=Utils.annotateEvent(t,e);if(F[e.uid])for(l=0;F[i].length>l;l++)F[i][l](t);e.jsapiFunc(t)}e.lastEventType=a;if(c)for(l=0;c.length>l;l++)c[l]()}};if(!t)return n;U[i].func=n}return U[i].func}function r(e,t,i){for(var n in t)t.hasOwnProperty(n)&&e.addEventListener(n,i)}function o(e,t){var i=function(t){e.ignoringFullscreenChanges||(Device.isBrowserFullscreen(t)?e.maximise(!0):e.minimise(!0))};e.addedFullscreenListener=!0;Device.bindToFullscreenChange(document,i);if(t&&!Device.fullscreenEnabled(document)){console.log("XXX can't take the iframe fullscreen so disabling button");e.config.ui.fullscreen={enabled:!1,dblclick:!1}}try{Device.bindToFullscreenChange(top.document,i);e.addedFullscreenListenerTop=!0}catch(n){}}function s(e){e.preventDefault()}function l(e,t){if(!e.willAutoplayWhenPlayCalled[t]){var i=e.els[t],n=i.src;if(!n){e.waitingForChange[t]=!0;i.src=R[t];i.load&&i.load()}Device.requiresFakePlayEvent&&i.play();e.willAutoplayWhenPlayCalled[t]=!0}}function u(e){var t=e.config.experimentalDashPercentage;x=!isNaN(t)&&t>0&&1>t?Math.random()<t:!1;e.config._demiIsUK===!0&&(O=".u");e.config._demiIsUK===!1&&(O=".r");Device.init(navigator.userAgent,e.config.supportHls);var i=new IStats(e);RDotReporting.init(e,e.config.customRdotBaseURL);e.qos=new QOS(e);var n=new Subtitles(e);e.ui=new UI(e,e.config.ui,n,e.config);e.thumbScrub=new ThumbnailScrub(e);e.timeHelper=new TimeHelper(e);Language.init(e.ui.config.locale,function(){SMPError.init();e.dispatch({type:"languageUpdated"})});SMPError.init();e.ui.initialise();e.config.threeSixty&&(e.threeSixty=new ThreeSixty(e));PluginManager.init(e);e.api=new API(e);e.dashEvents={create:function(){e.dashEvents=new DashEvents(e,x,Utils.callErrorFunction)},updatePortalSize:function(){},reset:function(){},resetSrc:function(){},applyLimits:function(){}};var o=[H,e.qos.eventCallbacks,e.ui.eventCallbacks,n.eventCallbacks,i.eventCallbacks,DebugConsole.eventCallbacks,e.ui.Chromecast.eventCallbacks];e.threeSixty&&o.push(e.threeSixty.eventCallbacks);if(MediaSessionApi.isSupported){var s=new MediaSessionApi(e);o.push(s.eventCallbacks)}var l=a(e,o);r(e.els.video,Utils.eventFieldData,l);r(e.els.audio,Utils.eventFieldData,l);e.elType="unknown";var u=0===(location.href+"").indexOf("file:");e.willAutoplayWhenPlayCalled={video:u,audio:u};Utils.multiAddEventListener(window,"resize orientationchange",function(){e.fixSize(!e.isFullScreen)});Utils.multiAddEventListener(window,"online offline",function(){Utils.setOrUnsetClass(document.body,"offline",!navigator.onLine)});e.els.video.addEventListener("loadedmetadata",function(){e.ui.displayCover()});e.onlineDetected=function(){e.endOnlineDetection();(new Date).valueOf()-e.onlineDetectionStart>1e3*e.config.hibernationTime?e.stop():LoadBalancing.switchMediaConnection(e,!1,!0)};e.startOnlineDetection=function(){e.onlineDetectionStart=(new Date).valueOf();clearTimeout(e.offlineTimeout);window.addEventListener("online",e.onlineDetected);e.offlineTimeout=setTimeout(function(){e.endOnlineDetection();Utils.delayedErrorFunction(e,SMPError.NETWORK_UNAVAILABLE)},e.config.offlineAllowanceDelay)};e.endOnlineDetection=function(){clearTimeout(e.offlineTimeout);window.removeEventListener("online",e.onlineDetected)};xd.on("jsapi",d(e))}function d(e){return function(t){if("undefined"!=typeof t.call){var i=t.call;if("undefined"!=typeof t.params)var n=t.params;else n=[];n instanceof Array||(n=[n]);if("function"==typeof e.api[i]){n.push(!0);e.api[i].apply(e.api,n);return}if("function"==typeof e[i]){e[i].apply(e,n);return}}}}function c(e,t){Utils.asyncDelay(function(){t.mediationAttempted=!1;t.mediationRequested=!1;t._avoidms6=!0;t._ms6=!1;LoadBalancing.mediate(t,e.consideredMobileConnection,f(e))})}function p(e){e.swf.fake&&(e.swf=new SWF(e));e.els.video.style.left=HIDDEN_PLAYER_SWF;e.els.audio.style.left=HIDDEN_PLAYER_SWF;e.mediaPlayer=e.swf;e.swf.playItem(e.mediaItem)}function f(e,t){return t?function(t){if(e.mediaItem!==t)g(t)&&y(e,t);else{e.dispatch({type:"mediaItemInfoChanged"});P(e)}}:function(t){if(e.mediaItem==t){e.dispatch({type:"mediaItemInfoChanged"});P(e)}}}function m(e,t){if(e.playlist.items.length>e.mediaItemIndex+1)LoadBalancing.mediate(e.playlist.items[e.mediaItemIndex+1],e.consideredMobileConnection,f(e,t));else if(e.playlist.queuedPlaylist&&e.playlist.queuedPlaylist.items&&e.playlist.queuedPlaylist.items[0]){var i=e.playlist.createMediaItem(e.playlist.queuedPlaylist,0,e.config);e.playlist.queuedPlaylist.items[0].createdItem=i;LoadBalancing.mediate(i,e.consideredMobileConnection,f(e,t))}}function g(e){if(e&&e.connections.length>0&&!e.noPreload){var t=LoadBalancing.filter(e);if(t&&"dash"===e.connections[0].format)return!0}return!1}function h(e){var t=I(e.mediaPlayer,e),i=e.mediaPlayer.src.split("//");return 2==i.length?"//"+i[1]===R[t]:!1}function y(e,t){if(e.duration>0&&!h(e)&&!e.preloadCallback&&!e.preloadDashEvents){var i=Math.max(e.duration-15,.1);e.preloadCallback=e.timeHelper.setPlaybackTimeout(E.bind(null,e,t),i,!0)}}function v(e,t){var i=SMPError.getError(t);if(("critical"===i.severity||"error"===i.severity)&&e.preloadDashEvents){e.preloadDashEvents.reset();e.preloadDashEvents=null}e.preloadStoredErrors||(e.preloadStoredErrors=[]);e.preloadStoredErrors.push(i)}function b(e){return e?e.reduce(function(e,t){return e.bitrate>t.bitrate?e:t}):0/0}function T(e){var t=b(e.dashEvents.getBitrateListFor("video")),i=b(e.dashEvents.getBitrateListFor("audio")),n=e.dashEvents.streamingBitrate.video.rate,a=e.dashEvents.streamingBitrate.audio.rate;return{video:t.bitrate!==n&&0!==n?n:0/0,audio:i.bitrate!==a&&0!==a?a:0/0}}function E(e,t){e.preloadCallback=null;var i=new DashEvents(e,x,v);e.preloadDashEvents=i;i.setSrc(t.connections);e.isPlayingDash&&i.setInitialBitrate(T(e))}function P(t){var i=t.mediaItem;Device.filterDash=t.playlist&&t.playlist.hasAds&&PluginManager.pluginArray.length&&!Device.supportsMultipleMediaElements;var n=LoadBalancing.filter(i);if(n){var a=i.connections[0];if(a){if("video"==i.type){if(t.config.preferVideoInFlash&&t.supportFallbackPrefer&&e()){t.fallbackAsAppropriate();return}if(t.config.playVideoExternally){t.waitingForChange.video=!1;t.tryingToPlay&&t.requestGuidanceAndPlay();return}}S(t,i.type)&&(t.mediaPlayer.currentSrc!==a.href?t.mediaSrc(a.href):t.mediaPlayer.load());t.failedOver=!1;t.timeHelper.reset();t.clearFakeTimer();t.mediaPlayer.loop=t.config.loop;t.mediaPlayer.title=t.playlist.title;Utils.asyncDelay(m,[t,!t.config.disablePreload])}else Utils.checkNotAvailableReason(t,i)&&c(t,i)}else Utils.checkNotAvailableReason(t,i)&&c(t,i)}function C(e,t){if(e.playlist.queuedPlaylist){var i={autoplay:t};if(e.playlist.queuedOptions){i=e.playlist.queuedOptions;i.autoplay=t}e.resetStatsObject();e.updateConfig(i);e.loadPlaylist(e.playlist.queuedPlaylist,!0,!0)}}function I(e,t){return e==t.els.video?"video":e==t.els.audio?"audio":"unknown"}function S(e,t){"unknown"===e.elType&&(e.elType=e.mediaPlayer.localName||"unknown");if(t!=e.elType&&e.autoPlayNextItem&&!e.willAutoplayWhenPlayCalled[t]&&!Device.supportsAutoplay){e.autoPlayNextItem=!1;e.tryingToPlay=!1;e.autoPlayNextItem=!1;e.mediaItemIndex=-1;e.ui.eventCallbacks.playlistLoaded({});return!1}e.elType=t;e.mediaPlayer.autoplay=!1;e.mediaPlayer.loop=!1;if("audio"===t||"video"===t){e.selectMediaPlayer(t);e.mediaPlayer.autoplay=!Device.supportsAutoplay;return!0}e.tryingToPlay=!1;e.autoPlayNextItem=!1;i(e,"audio");i(e,"video");Utils.delayedErrorFunction(e,SMPError.CONTENT_NOT_AV);return!1}function k(e,t,i,a){var r,o={type:"playlistLoaded",url:t,fromQueue:a},s=function(){!r.embedRight&&e.ui&&e.ui.config.embedded.enabled===!0?l(SMPError.getError(SMPError.EMBED_NOT_ALLOWED)):e.loadingPlaylistURL==t&&w(e,o)},l=function(t){r.noItemsReason="ErrorLoadingPlaylist";e.playlist.loading=!1;PluginManager.isPluginLoading(o)||n(e,o);n(e,t)};r=e.playlist=new Playlist(t,s,l,i,e.config);e.mediationIndex=0}function _(e,t){e.state="";e.autoPlayNextItem=!1;e.mediaItemIndex=-1;e.config.autoplay&&e.guidanceOk&&(e.autoPlayNextItem=!0);try{n(e,t)}catch(i){}if(!Utils.checkForItemsErrors(e,e.playlist))if(e.autoPlayNextItem){if(!e.tryingToPlay){e.clearFakeTimer();e.tryingToPlay=!0;e.waitingForStartTime=e.config.startTime;e.cueNextMediaItem()}}else if(e.config.autoplay&&e.config.promptGuidanceWhenAutoplay){e.mediaPlayer.autoplay=!1;e.guidanceShow(!1)}}function w(e,t){if(PluginManager.isPluginLoading()){e.config.autoplay||e.ui.showPoster();PluginManager.playlistLoadedEvent=t}else{var i=e.playlist;i.loading=!1;t.playlist=i;Utils.asyncDelay(_,[e,t]);PluginManager.playlistLoadedEvent=null}}function A(e){function t(t,i){return Device.supportPlayerFallback&&!e.config.noFallback&&e.mediaItem&&e.mediaItem[t]&&!e.isPlaying360&&(i||!e.mediaItem.failSilent)}return{state:{get:function(){return e._state},set:function(t){var i=e._state;if(i!==t){e._state=t;if("busy"==i&&""===t&&e.actionFnObjAfterWaiting){var n=e.actionFnObjAfterWaiting;e.actionFnObjAfterWaiting=null;n.fn.apply(e,n.args||[])}}}},mediaItem:{get:function(){return e.playlist&&e.playlist.items?e.playlist.items[e.mediaItemIndex]:null}},isPlaying360:{get:function(){return e.mediaItem&&"360"==e.mediaItem.kind}},isNextItemPlayable:{get:function(){return e.playlist?null!=e.playlist.getNextItem(Math.max(e.mediaItemIndex,0)):!1}},continueAfterError:{get:function(){if(e.playlist){if(null!=e.playlist.getNextItem(Math.max(e.mediaItemIndex,0)))return!0;if(e.playlist.queuedPlaylist&&e.mediaItem.failSilent)return!0}return!1}},shouldReport:{get:function(){return e.mediaItem&&!e.mediaItem.isIdentOrWarning}},mediaConnection:{get:function(){var t=e.mediaItem;if(t&&t.useFlash)return e.swf.mediaConnection;var i=t&&t.connections?t.connections:[];return i[0]}},isPlayingDash:{get:function(){var t=e.mediaConnection;return t&&"dash"===t.format}},isPlayingHls:{get:function(){var t=e.mediaConnection;return t&&"hls"===t.format}},time:{get:function(){var t=e.ui.Chromecast,i=parseFloat(e.mediaPlayer.currentTime+e.timeHelper.presentationTimeOffset);i=e.timeHelper.streamTimeToUnixTime(i);t.isCasting&&(i=t.fakeTime);return isNaN(i)?0:i},set:function(t){if(!e.outOfControl&&!e.inErrorState)if(e.mediaItem){if(!e.ui.Chromecast.ccSeek(t)&&e.timeHelper.canSeek()){var i=function(){t=e.timeHelper.checkIfTimeIsAvailable(t);t==e.timeHelper.latestSeek&&(t-=.001);t=e.timeHelper.unixTimeToStreamTime(t);var i=e.mediaPlayer,n=parseFloat(i.currentTime)||0;t-=e.timeHelper.presentationTimeOffset;try{i.currentTime=t}catch(a){try{i.currentTime=n}catch(r){}}e.timeHelper.update(e.time,e.duration);e.timeHelper.forcedTime=null},n=e.timeHelper;if(e.isPlayingDash&&e.dashEvents.isLiveWebcast&&90>n.latestSeek-t&&t>e.mediaPlayer.currentTime){e.timeHelper.forcedTime=t-n.presentationTimeOffset;e.dashEvents.refreshManifest(i)
}else i()}}else e.config.startTime=t}},duration:{get:function(){var t=e.mediaItem;if(!t)return 0;var i=e.ui.Chromecast,n=0;n=i.isCasting?i.duration:e.isLive?1/0:parseFloat(e.mediaPlayer.duration);1>n&&(n=e._duration);return isNaN(n)?0:n}},isLive:{get:function(){var t=e.mediaItem;return t?t.live:!1}},isAudio:{get:function(){var t=e.mediaItem;return t?"audio"==t.type:!1}},playlistHasAudio:{get:function(){var t=[];e.playlist&&e.playlist.items&&(t=e.playlist.items);for(var i=0;t.length>i;i++)if("audio"==t[i].type)return!0;return!1}},buffered:{get:function(){var t=e.timeHelper.presentationTimeOffset,i=e.mediaPlayer,n=i.buffered;if(!n)return 0;for(var a=0;n.length>a;a++){var r=n.start(a)+t,o=n.end(a)+t;if(i.currentTime+t>=r&&o>i.currentTime+t)return o}return 0}},seekable:{get:function(){var t=e.mediaPlayer,i=t.seekable;if(!i)return{start:0,end:0};var n=1/0,a=0;if(0!==i.length||e.tryingToPlay)for(var r=0;i.length>r;r++){i.start(r)<n&&(n=i.start(r));i.end(r)>a&&(a=i.end(r))}else{e.stop();e.stoppedBecauseNoSeekableInfo=!0}return{start:n,end:a}}},paused:{get:function(){return e.mediaPlayer.paused}},ended:{get:function(){return e.mediaPlayer.ended}},volume:{get:function(){return e._volume},set:function(t){t>1&&(t=1);0>t&&(t=0);if(0===t)e.muted=!0;else if(e._volume!=t){e._volume=t;if(e.mediaPlayer){e.mediaPlayer.volume=e._volume;e.mediaPlayer.muted=!1;e._muted=!1}else{e._volume=t;e._muted=!1;e.dispatch({type:"volumechange",volume:e._volume,muted:e._muted})}}}},muted:{get:function(){return e._muted},set:function(t){if((t===!0||t===!1)&&t!=e._muted){e._muted=t;e.mediaPlayer&&e.willAutoplayWhenPlayCalled[I(e.mediaPlayer,e)]?e.mediaPlayer.muted=e._muted:e.dispatch({type:"volumechange",volume:e._volume,muted:e._muted})}}},guidanceOk:{get:function(){return e.hasGuidancePassed||!e.playlist||""===e.playlist.guidance||!e.ui.config.guidance.pinRequired}},supportFallback:{get:function(){return t("flashAvailable")}},supportFallbackPrefer:{get:function(){return t("flashAvailable",!0)}},supportFallbackLocked:{get:function(){return t("flashAvailableUnlocked")}},version:{get:function(){return"2.17.3.SMPHTML5"}},build:{get:function(){return"2.17.3.1842291"+O+(x?".x":"")}},hasGuidancePassed:{get:function(){var t=e.config.guidance;return(t.guidanceSkipped||t.guidancePINPassed)&&!t.isGuidanceLocked&&(!e.config.under16||e.config.under16&&e.under16permissionConfirmed)}},under16permissionConfirmed:{get:function(){var t=e.config.guidance;return t.under16permissionConfirmed}},consideredMobileConnection:{get:function(){return e.config.mobileNetwork?navigator.connection&&"4g"==navigator.connection.effectiveType?!1:!0:!1}},ratio:{get:function(){var t=e.mediaPlayer.videoHeight/e.mediaPlayer.videoWidth;isNaN(t)&&(t=9/16);return t}}}}function L(e,t){var i;try{i=parent.embeddedMedia.playerInstances[e].getHandleJSAPI()}catch(n){i=function(e){xd.fire("jsapi",e)}}t.jsapiFunc=function(e){var t={};for(var n in e){var a=typeof e[n];("object"!=a&&"function"!=a||e.hasOwnProperty(n))&&"_"!=n&&"srcElement"!=n&&"target"!=n&&"currentTarget"!=n&&"path"!=n&&(t[n]=e[n])}try{i(t)}catch(r){}}}var x,O="",M=0,D={video:"//emp.bbci.co.uk/emp/media/blankv2.mp4",audio:"//emp.bbci.co.uk/emp/media/blank.mp3"},N={video:"//emp.bbci.co.uk/emp/media/noise.mp4",audio:"//emp.bbci.co.uk/emp/media/noise.mp3"},R=D,B={autoplay:!1,bitrateFloor:{plain:0},bitrateCeiling:{plain:1200},isBSTime:!1,suppressItemKind:[],suppressType:[],embedPageURL:"",mediatorHref:"",samlMediatorHref:"",counterName:"smp.player.page",enableRdotReporting:!0,enableStatsReporting:!0,loop:!1,startTime:0,customRdotBaseURL:"",playVideoExternally:!1,supportLiveRewindOnMobile:!0,offlineAllowanceDelay:6e4,hibernationTime:360,guidance:{isGuidanceLocked:!1,hasGuidancePassword:!1,hasGuidancePIN:!1,guidanceSkipped:!1}},U={},F={},H={canplay:function(e){var t=e._,i=I(e.target,t);if(t.failingOver){t.failingOver=!1;t.streamFailing=!1}t.needHlsStartTime=!1;if(!t.waitingForChange[i]){if(t.mediaItem.live&&t.config.supportLiveRewindOnMobile&&t.mediaItem&&t.ui.config.controls.enableLiveRewind&&!t.isPlayingDash)if(Device.useStartDateInHls&&t.mediaPlayer.getStartDate&&t.mediaPlayer.getStartDate()){if(!t.mediaItem._startTime||t.stoppedBecauseNoSeekableInfo){t.isUsingGetStartDate=!0;t.mediaItem._startTime=new Date(t.mediaPlayer.getStartDate()).valueOf()/1e3;t.timeHelper.setStartTimeAvailable(!0);t.ui.checkIfCanDisplaySeekBar();t.mediaItem.simulcast&&!t.isAudio&&t.ui.config.subtitles&&t.ui.config.subtitles.supportLiveSubtitles&&t.mediaItem.startLiveHLSsubs(t)}}else{t.needHlsStartTime=!0;t.mediaItem.getRewindWindow(function(){t.timeHelper.setStartTimeAvailable(!0);t.ui.checkIfCanDisplaySeekBar()})}if(t.waitingForStartTime&&!t.needHlsStartTime&&(t.timeHelper.startTimeAvailable||!t.mediaItem.live)){t.time=t.waitingForStartTime;t.waitingForStartTime=0;t.config.startTime=0}if(Device.supportsAutoplay&&t.mediaPlayer.paused&&!t.playCalled&&t.tryingToPlay){t.playCalled=!0;var n=t.mediaPlayer.play();if(n&&n.then){t.discardPromise=!1;n.then(function(){t.playCalled=!1},function(){if(t.tryingToPlay&&!t.discardPromise)if(t.mediaItem.live){t.stop();t.mediaItem.subtitleConnections=[];t.ui.Subtitles.clearSubtitles()}else{t.dispatch({type:"pause"});t.playCalled=!1;t._state="";t.tryingToPlay=!1;t.autoPlayNextItem=!1;t.ui.resetGuidance();t.ui.notPlayingState();t.ui.showCta();t.ui.hideBuffer();t.ui.showPoster();t.ui.hideAllControls()}})}}}if(!t.autoplayTimeoutRetryAttempted){var a=1e4*(Device.consideredForMobileLiveRewind?3:1),r=function(){if(t.mediaItem)if(t.mediaItem.mediationRequested)t.playingTimer=setTimeout(r,a);else if(t.tryingToPlay&&t.mediaPlayer.paused){if(Device.iPhoneOutOfPagePlayback&&t.mediaPlayer.webkitIsFullscreen){t.playingTimer=setTimeout(r,a);return}Utils.delayedErrorFunction(t,SMPError.PLAYING_FAILED_NO_INTENT);t.playbackMightRestartLater[i]=!0;t._state="";t.willAutoplayWhenPlayCalled.video=!1;t.willAutoplayWhenPlayCalled.audio=!1;t.tryingToPlay=!1;t.autoPlayNextItem=!1;t.mediaItemIndex=-1;t.autoplayTimeoutRetryAttempted=!0;Device.requiresFakePlayEvent=!0;t.ui.eventCallbacks.playlistLoaded({})}};t.playingTimer=setTimeout(r,a)}},pause:function(e){var t=e._;e.unwanted||(t.tryingToPlay=!1)},timeupdate:function(e){var t=e._,i=t.time,n=t.duration,a=t.webcastData;t.timeHelper.update(i,n);if(a&&a.accurateEndTime&&t.timeHelper.time>a.accurateEndTime){t.time!=t.timeHelper.earliestSeek&&(t.time=t.timeHelper.earliestSeek);if(!t.timeHelper.restartedWebcast&&t.timeHelper.joinTime>a.accurateEndTime)t.timeHelper.restartedWebcast=!0;else if(!t.mediaPlayer.paused){t.pause();t.dispatch({type:"playlistStopped"});t.timeHelper.restartedWebcast=!0}}Device.requiresFakeEnded&&n>1&&i>=n&&t.delayedDispatch({type:"ended",fakeEnded:!0});if(!t.paused)for(var r=0;t.pauseTimes.length>r;r++)if(i>=t.pauseTimes[r]&&t.pauseTimes[r]+.33>i){t.mediaPlayer.pause();t.pauseTimes.splice(r,1)}},seeking:function(e){var t=e._,i=t.timeHelper,n=t.mediaPlayer.currentTime+i.presentationTimeOffset;if(t.mediaItem.live&&t.isPlayingDash&&4==t.mediaPlayer.readyState){var a=t.timeHelper.checkIfTimeIsAvailable(n,!0);n!=a&&(t.mediaPlayer.currentTime=a-i.presentationTimeOffset)}},playing:function(e){var t=e._;t.isPlayingDash&&t.isAudio&&Device.macSafari&&(t.mediaPlayer.currentTime+=.1);var i=I(e.target,t);t.previousElementTypeDuringChange=i;t.willAutoplayWhenPlayCalled[i]=!0;t.mediaPlayer.volume=t.volume;t.mediaPlayer.muted=t.muted;t.state="";clearTimeout(t.playingTimer);if(t.waitingForChange[i])e.target.pause();else{t.mediaItem.hasSeenPlaying=!0;t.mediaPlayer.autoplay=!1;if(0===t.pauseTimes[0]){t.mediaPlayer.pause();t.pauseTimes.splice(0,1)}t.mediaItem.useFlash?t.swf.show():t.threeSixty&&"360"==t.mediaItem.kind?t.threeSixty.showCanvas():t.mediaPlayer.style.left=t.config.miniMode&&t.ui.miniModeEnabled?HIDDEN_PLAYER_MINIMODE:"0px"}},ended:function(e){var t=e._;if("ended"!=t.lastEventType){t.tryingToPlay=!1;t.discardPromise=!0;if(t.mediaPlayer.ended||e.fakeEnded){var n=t.elType;t.cueNextMediaItem()?t.autoPlayNextItem=n===t.elType:e.fakeEnded&&(t.reloadToStart=!0);i(t,t.elType)}}},fullscreenEnter:function(e){document.documentElement.addEventListener("touchmove",s);e._.isFullScreen=!0},fullscreenExit:function(e){document.documentElement.removeEventListener("touchmove",s);e._.isFullScreen=!1},playlistLoading:function(e){var t=e._;t.webcastData=null;t.ui.markerData=[];t.inErrorState=!1;RDotReporting.playlistLoading();t.resetAfterOutOfControl=!1},playlistEnded:function(e){var t=e._;t.queueNextPlaylist(!0)},playlistStopped:function(e){var t=e._;t.tryingToPlay=!1},waiting:function(e){var t=e._;if(t.endOnWaiting){t.endOnWaiting=!1;t.reloadToStart=!0;t.delayedDispatch({type:"ended",fakeEnded:!0})}if(t.streamFailing){t.streamFailing=!1;t.tryingToPlay=!1;t.autoPlayNextItem=!1;if(t.tryReconnect){t.tryReconnect=!1;navigator.onLine===!1?t.startOnlineDetection():t.onlineDetected()}else Utils.delayedErrorFunction(t,SMPError.LOAD_FAILED_BUFFERING)}},loadedmetadata:function(e){var t=e._,i=t.playlist.items[t.mediaItemIndex+1];i&&!t.config.disablePreload&&g(i)&&y(t,i)},error:function(e){var t,i=e._,n=e.target,a=!1;if(e.handled){if(e.nonPlayer)return;if(i.continueAfterError&&e.severity==CRITICAL){e.severity="error";e.morphed=!0;Utils.asyncDelay(i.cueNextMediaItem,[],i);return}var r=!1,o=!1,s=i.failedOver?SMPError.NO_ALTERNATIVE_MEDIA_AFTER_FAILOVER:SMPError.NO_ALTERNATIVE_MEDIA;switch(e.code){case SMPError.MPD_GENERIC:case SMPError.MPD_LOAD_FAIL:case SMPError.MPD_PARSE_ERROR:case SMPError.MPD_NO_STREAMS:case SMPError.INIT_FRAGMENT_LOAD_FAIL:t=!1;a=!!LoadBalancing.getAlternateMediaConnections(i,t);r=!a;break;case SMPError.PLAYING_DASH_WHEN_NOT_SUPPORTED:case SMPError.DASH_EXCEPTION:t=!0;a=!!LoadBalancing.getAlternateMediaConnections(i,t);r=!a;if(r&&i.supportFallback){Utils.asyncDelay(i.fallbackAsAppropriate,[],i);r=!1}break;case SMPError.STREAM_FRAGMENT_LOAD_FAIL:if(!i.streamFailing){var l=i.mediaItem.dashAlternates&&i.dashEvents&&!i.config.disableDashBaseUrlFailover&&i.dashEvents.canDashFailover(),u=i.mediaItem.originalConnections.length>i.dashEvents.connections.length;t=!1;var d=!!LoadBalancing.getAlternateMediaConnections(i,t);a=d&&!l;if(navigator.onLine===!1&&(d||u)){o=!0;i.tryReconnect=!0;i.streamFailing=!0;i.onlineDetectionStart=(new Date).valueOf()}else{i.tryReconnect=!1;i.streamFailing=!a}r=i.streamFailing&&(i.mediaPlayer.paused||0===i.mediaPlayer.playbackRate||0===i.buffered);if(r&&o){r=!1;o=!1;i.startOnlineDetection()}s=SMPError.LOAD_FAILED_BUFFERING}break;case SMPError.NO_ALTERNATIVE_MEDIA:case SMPError.NO_ALTERNATIVE_MEDIA_AFTER_FAILOVER:i.tryingToPlay=!1;i.dashEvents.reset();break;case SMPError.LOAD_FAILED_BUFFERING:case SMPError.CONTENT_NOT_AVAILABLE_PRE_START:case SMPError.PLAYING_FAILED_NO_INTENT:case SMPError.FRAGMENT_DOWNLOAD_INFORMATION:case SMPError.UNHANDLED_INTERNAL_ERROR:case SMPError.DOWNLOAD_WAS_SLOW:case SMPError.DASH_INIT_TIMEOUT:case SMPError.DOWNLOADS_OFTEN_SLOW:case SMPError.NO_SUPPORTED_CODECS:case SMPError.NO_SUPPORTED_CODECS_FAILOVER:case SMPError.DASH_MEDIASOURCE_ERROR:case SMPError.NETWORK_UNAVAILABLE:break;default:e.severity==CRITICAL||e.morphed||Utils.delayedErrorFunction(i,SMPError.UNHANDLED_INTERNAL_ERROR,e.code)}if(r){i.tryingToPlay=!1;i.autoPlayNextItem=!1;Utils.delayedErrorFunction(i,s)}if(a&&!o){var c=i.mediaConnection;c&&i.mediaItem.addFailedConnection(c.supplier);e._queuedActions.push(function(){LoadBalancing.switchMediaConnection(i,t)})}else if(e.severity==CRITICAL){i.tryingToPlay=!1;i.autoPlayNextItem=!1}}else if(n==i.mediaPlayer){var p=I(n,i);if(e.handled||i.waitingForChange[p]){e.code||(e.code=i.mediaPlayer.error&&i.mediaPlayer.error.code);i.qos.reportError(e);return}var f=i.mediaPlayer.error;if("undefined"==typeof e.code&&!f)return;var m=!0,g="unknown";if(f&&"undefined"!=typeof f.code){e.code=f.code;e.connection=i.mediaConnection;if(f.code==f.MEDIA_ERR_ABORTED){g=SMPError.MEDIA_ERR_ABORTED;t=!1;if(LoadBalancing.getAlternateMediaConnections(i,t)){a=!0;m=!1}}if(f.code==f.MEDIA_ERR_NETWORK){g=SMPError.MEDIA_ERR_NETWORK;t=!1;if(LoadBalancing.getAlternateMediaConnections(i,t)){a=!0;m=!1}}if(f.code==f.MEDIA_ERR_DECODE){g=SMPError.FORMAT_NOT_DECODED;t=!1;if(LoadBalancing.getAlternateMediaConnections(i,t)){a=!0;m=!1}}if(f.code==f.MEDIA_ERR_SRC_NOT_SUPPORTED){if(""===i.mediaPlayer.src||i.mediaPlayer.src===window.location.href)return;t=!0;Device.supportsHls&&i.mediaConnection&&"hls"==i.mediaConnection.format&&(t=!1);g=SMPError.FORMAT_NOT_SUITABLE;if(LoadBalancing.getAlternateMediaConnections(i,t)){a=!0;m=!1}}}else{g=SMPError.MEDIA_ERR_WEIRD;m=!1}if(m){if(!i.continueAfterError){i.tryingToPlay=!1;i.autoPlayNextItem=!1}Utils.delayedErrorFunction(i,SMPError.NO_ALTERNATIVE_MEDIA)}"unknown"==g?m&&(g="unknownCritical"):"video"!=p&&(g+=1);var h=new SMPError(g,{connection:e.connection,playerError:f,networkState:i.mediaPlayer.networkState,mediaItem:i.mediaItem});a&&(h._queuedActions=[function(){LoadBalancing.switchMediaConnection(i,t)}]);return h}}},W=0,G=function(){var e=this;e.jsapiFunc=function(){};e.swf={fake:!0,hide:function(){},pause:function(){},kill:function(){},enableMouseUIBypass:function(){},disableMouseUIBypass:function(){}};e.mediaItemIndex=-1;e._volume=1;e._muted=!1;e._state="";e.config=B;e.playlist=null;e.els={};e.pauseTimes=[];e.tryingToPlay=!1;e.isFullScreen=!1;e.threeSixty=null;e.waitingForChange={video:!1,audio:!1};e.uid="player_"+W++;e.mediaContainer=document.getElementById("mediaContainer");e.mediaPlayer=e.els.video=e.mediaContainer.firstChild;e.els.audio=document.createElement("audio");e.els.audio.preload="metadata";i(e,"video");e.els.video.addEventListener("click",s,!1);Utils.defineProperties(e,A(e));return e};G.prototype={init:function(e){var i=e.player.vars,a=e.id,r=this;r.playbackMightRestartLater={};L(a,r);r.updateConfig(i,!0);o(r,i.insideIframe);u(r);t(r.config.mediatorHref);t(r.config.samlMediatorHref);r.firstPlaylist=!0;n(r,{type:"initialised",version:r.version});return r},cueNextMediaItem:function(e){var t=this;t.playbackMightRestartLater={};0>t.mediaItemIndex?t.mediaItemIndex=0:t.mediaItemIndex++;var i=t.mediaItem;if(i){if("advert"==i.kind){t.autoPlayNextItem=!0;return t.cueNextMediaItem()}t.reset(!0);t.delayedDispatch(i.changeEvent);t.thumbScrub.newMediaItem(i);if(!e){t.tryingToPlay=!0;t.delayedDispatch({type:"tryingToPlay"})}t.config.alwaysUseFlashPlayer&&(i.useFlash=!0);if(i.useFlash){t.autoPlayNextItem=!e;Utils.asyncDelay(p,[t])}else{if(!i.mediationAttempted){if("ad"==i.kind){t.dispatch({type:"requestAd"});return i}Utils.asyncDelay(LoadBalancing.mediate,[i,t.consideredMobileConnection,f(t)],LoadBalancing);return i}t.autoPlayNextItem=!e;Utils.asyncDelay(f(t),[i])}}else{t.mediaItemIndex-=1;t.mediaConnection&&t.mediaPlayer.currentSrc==t.mediaConnection.href&&(t.reloadToStart=!0);t.delayedDispatch({type:"playlistEnded",moreQueued:!(!t.playlist||!t.playlist.queuedPlaylist)})}},mediaSrc:function(e){var t=this,i=t.mediaItem.connections[0];n(t,{type:"changingsrc",supplier:i.supplier,encoding:i.encoding,format:i.format});t.streamFailing=!1;if(t.isPlayingDash){if(t.isAudio?Device.supportsAudioDash:Device.supportsVideoDash){if(t.preloadDashEvents){t.dashEvents.reset();t.dashEvents=t.preloadDashEvents;t.preloadDashEvents=null;t.dashEvents.setErrorHandler(Utils.callErrorFunction);t.dashEvents.setMediaElement(t.mediaPlayer)}else{t.dashEvents.create();t.dashEvents.reset();t.dashEvents.setErrorHandler(Utils.callErrorFunction);t.dashEvents.setMediaElement(t.mediaPlayer);t.dashEvents.setSrc(t.mediaItem.connections)}t.dashEvents.applyLimits()}else if(!LoadBalancing.getAlternateMediaConnections(t,!0)){t.tryingToPlay=!1;t.autoPlayNextItem=!1;Utils.callErrorFunction(t,SMPError.PLAYING_DASH_WHEN_NOT_SUPPORTED)}}else{t.dashEvents.resetSrc();var a=I(t.mediaPlayer,t);t.waitingForChange[a]=!1;t.mediaPlayer.src=e;t.mediaPlayer.load();Device.requiresFakePlayEvent&&t.mediaPlayer.play();t._duration=0}if(t.preloadStoredErrors){for(var r=0;t.preloadStoredErrors.length>r;r++){var o=t.preloadStoredErrors[r];t.qos.reportError(o)}t.preloadStoredErrors=null}},startPlayback:function(e){var t=this;if(!(t.outOfControl||t.inErrorState||t.tryingToPlay||t.ui.Chromecast.setCastPlayState())){t.clearFakeTimer();t.tryingToPlay=!0;t.playCalled=!1;t.state="busy";var i=t.playlist;!e&&i&&l(t,i.mediaType);t.waitingForStartTime=isNaN(t.config.startTime)?0:t.config.startTime;if(-1==t.mediaItemIndex&&i&&i.items.length>0)t.cueNextMediaItem()&&(t.autoPlayNextItem=!0);else{var n=t.mediaPlayer;if(!t.reloadToStart){Device.requiresRestartAdjustmentAtEnd&&n.currentTime==n.duration&&(n.currentTime=.1);if(t.mediaConnection)n.play();else{t.tryingToPlay=!0;t.autoPlayNextItem=!0;Utils.asyncDelay(P,[t])}return!0}t.reloadToStart=!1;n.load();t.mediaItem&&(t.mediaItem.gotWindow=!1);t.mediaItemIndex=t.mediaItemIndex-1;t.cueNextMediaItem()&&(t.autoPlayNextItem=!0)}}},next:function(){var e=this,t=!e.ui.inPrePlayState;if(e.isNextItemPlayable){0>e.mediaItemIndex&&(e.mediaItemIndex=0);e.cueNextMediaItem(!t)}else e.queueNextPlaylist(t)},pause:function(){var e=this;if(!e.ui.Chromecast.setCastPlayState())if("busy"!=e.state)if(e.timeHelper.canSeek()){e.tryingToPlay=!1;e.autoPlayNextItem=!1;e.mediaPlayer.pause();if(e.timeHelper.hasRewindWindow()){e.clearFakeTimer();e.fakeTimeupdateTimer=setInterval(function(){n(e,{type:"timeupdate",fake:!0})},1e3)}}else e.stop();else e.actionFnObjAfterWaiting={fn:e.pause,args:null}},suspend:function(){var e=this;if(e.mediaItem.useFlash&&e.swf.ready)e.swf.call("suspend");else{e.pause();Utils.asyncDelay(e.stop,[],e)}},stop:function(){var e=this;e.tryingToPlay=!1;e.autoPlayNextItem=!1;e.waitingForChange[e.elType]=!1;e.reloadToStart=!0;e.clearFakeTimer();e.timeHelper.reset();e.timeHelper.setStartTimeAvailable(!1);e.destroying?n(e,{type:"playerDestroying"}):n(e,{type:"playerDisconnected"});i(e,e.elType,!0);e.dashEvents.reset()},hidePlayer:function(e,t){var n=this;e||(e=n.elType);i(n,e,t)},toggleFullscreen:function(){var e=this;e.isFullScreen?e.minimise():e.maximise()},selectMediaPlayer:function(e){var t=this,n="video"===e?"audio":"video";t.mediaPlayer=t.els[e];t.mediaPlayer.volume=t.volume;t.mediaPlayer.muted=t.muted;t.els[e].parentNode||t.mediaContainer.insertBefore(t.els[e],t.mediaContainer.firstChild);i(t,n)},maximise:function(e){var t=this;t.ui.enabled=!1;setTimeout(function(){t.ui.enabled=!0},2e3);t.ignoringFullscreenChanges=!0;setTimeout(function(){t.ignoringFullscreenChanges=!1},400);var i=function(){t.pageFullScreenStylesNeeded=!0;n(t,{type:"beforeFullscreenEnter",applyPageFullScreen:t.pageFullScreenStylesNeeded});if(Device.requiresFullscreenResizeDelay){t.mediaContainer.style.height="0px";t.mediaContainer.style.width="0px"}};if(!t.isFullScreen&&t.ui.config.fullscreen.enabled){if(e)n(t,{type:"beforeFullscreenEnter"});else if(Device.fullscreenEnabled(document)){t.pageFullScreenStylesNeeded=Device.requiresPageFullScreenStyles;n(t,{type:"beforeFullscreenEnter",applyPageFullScreen:t.pageFullScreenStylesNeeded});Device.requestFullscreen(document.documentElement);t.iframeFullscreen=!0}else{i();t.addedFullscreenListenerTop&&Device.fullscreenEnabled(top.document)&&Device.requestFullscreen(top.document.documentElement)}n(t,{type:"fullscreenEnter"})}},minimise:function(e){var t=this;if(t.isFullScreen){t.ui.enabled=!1;t.ignoringFullscreenChanges=!0;setTimeout(function(){t.ignoringFullscreenChanges=!1},400);var i=function(){n(t,{type:"beforeFullscreenExit",applyPageFullScreen:t.pageFullScreenStylesNeeded});t.pageFullScreenStylesNeeded=!1;t.els.video.style.height="";t.els.video.style.top="";if(Device.requiresFullscreenResizeDelay){t.mediaContainer.style.height="0px";t.mediaContainer.style.width="0px";clearTimeout(t.fsTimeout);t.fsTimeout=setTimeout(function(){t.mediaContainer.style.height="";t.mediaContainer.style.width=""},500)}else{t.mediaContainer.style.height="";t.mediaContainer.style.width=""}};if(e)i();else if(Device.fullscreenEnabled(document)){i();Device.exitFullscreen(document);t.iframeFullscreen=!1}else{i();t.addedFullscreenListenerTop&&Device.fullscreenEnabled(top.document)&&Device.exitFullscreen(top.document)}n(t,{type:"fullscreenExit"});setTimeout(function(){t.ui.enabled=!0;if(t.ui.pGuidance.nowShowing&&(400>t.mediaContainer.clientWidth||400>t.mediaContainer.clientHeight)){t.ui.pGuidance.close();t.guidanceShow(!1)}},500)}},requestGuidanceAndPlay:function(e){var t=this;if(t.guidanceOk){!e&&t.ui.inPrePlayState&&t.dispatch({type:"userPlay"});t.dispatch({type:"playRequested"},!0);if(t.config.playVideoExternally&&!t.playlistHasAudio){t.playInBump();return}t.startPlayback(e)}else{t.mediaPlayer.autoplay=!1;t.guidanceShow(!1)}},guidanceShow:function(e){var t=this;n(t,{type:"guidanceShown"});var i={type:"guidanceShow",guidance:t.playlist.guidance,title:t.playlist.title,lockClicked:e};if(400>t.mediaContainer.clientWidth||400>t.mediaContainer.clientHeight||!t.ui.config.useInPlayerGuidance){t.iframeFullscreen&&t.minimise();n(t,i)}else t.ui.pGuidance.showInPlayerGuidance(i,t.mediaContainer)},loadPlaylistUrl:function(e,t){var i=this;Utils.isValidUrl(e)?i.loadingPlaylistURL==e&&i.playlist.loading||i.loadPlaylist(e,t):Utils.callErrorFunction(i,SMPError.NON_BBC_PLAYLIST)},loadPlaylistObject:function(e,t){var i=this;i.loadPlaylist(e,t)},loadPlaylist:function(e,t,i){var a=this,r=e,o=null,s=!1;if("object"==typeof e){r="playlist_"+M++;o=e;s=!0}else(e+"").match(/(^[a-zA-Z]+\:)?\/\//)&&(s=!0);a.loadingPlaylistURL=r;n(a,{type:"playlistLoading",url:r,statsObject:a.config.statsObject});a.reset();a.actionFnObjAfterWaiting=null;a.state="busy";if(s){k(a,r,o,i);if(t)a.willAutoplayWhenPlayCalled[a.playlist.mediaType]||a.firstPlaylist&&Device.notWorthTryingAutoplay&&(a.config.autoplay=!1);else if(a.config.autoplay){l(a,a.playlist.mediaType);a.dispatch({type:"playRequested"},!0)}}else{a.delayedDispatch(SMPError.getError(SMPError.NO_ITEMS));Utils.asyncDelay(function(){a.loadingPlaylistURL===r&&n(a,{type:"playlistLoaded",url:r,fromQueue:i,playlist:e})})}i||a.unsetGuidanceSkippedIfUnder16();a.firstPlaylist=!1},reset:function(e){var t=this;t.swf.kill();t.streamFailing=!1;t.autoplayTimeoutRetryAttempted=!1;t.failingOver=!1;t.failedOver=!1;t.inErrorState=!1;t.reloadToStart=!1;t.endOnWaiting=!1;t.clearFakeTimer();clearTimeout(t.playingTimer);i(t,t.elType,!0);t.mediaPlayer.playbackRate=1;t.dashEvents.reset();t.elType="unknown";t.tryingToPlay=!1;if(!e){if(t.preloadDashEvents){t.preloadDashEvents.reset();t.preloadDashEvents=null}t.preloadStoredErrors&&(t.preloadStoredErrors=null)}if(t.preloadCallback){t.timeHelper.clearPlaybackTimeout(t.preloadCallback);t.preloadCallback=null}},playWithUserCheck:function(e){var t=this;e&&t.playlist&&!t.willAutoplayWhenPlayCalled[t.playlist.mediaType]&&Device.notWorthTryingAutoplay||t.requestGuidanceAndPlay(e)},queueNextPlaylist:function(e){var t=this;t.playlist&&t.playlist.queuedPlaylist&&Utils.asyncDelay(C,[t,e])},resetStatsObject:function(){var e=this,t=e.config.statsObject;if(t){t.parentPID=void 0;t.parentPIDType=void 0;t.episodePID=void 0;t.clipPID=void 0;t.playlistLabels=void 0}},fallbackAsAppropriate:function(){var t=this;if(Device.android||Device.kindle)Utils.callErrorFunction(t,SMPError.CANT_PLAY_IN_ANDROID_BROWSER);else if(e()){if(t.mediaItem){t.mediaItem.useFlash=!0;Utils.asyncDelay(p,[t])}}else Utils.callErrorFunction(t,SMPError.FLASH_NOT_INSTALLED)},requestAllEvents:function(e){F[this.uid]||(F[this.uid]=[]);F[this.uid].push(e)},trackAction:function(e,t,i){this.dispatch({type:"SonarUserActionEvent",controlId:e,actionType:t,labels:i})},dispatch:function(e,t){n(this,e,t)},delayedDispatch:function(e,t){var i=this;Utils.asyncDelay(n,[i,e,t])},clearFakeTimer:function(){var e=this;if(e.fakeTimeupdateTimer){clearInterval(e.fakeTimeupdateTimer);e.fakeTimeupdateTimer=null}},updateQuality:function(e){var t=this;t.updateConfig(e);t.dashEvents.applyLimits();t.swf.ready&&t.swf.call("updateQuality",e)},onAdsProcessed:function(e){LoadBalancing.onAdsProcessed(this.mediaItem,e);P(this)},captureIntent:function(e){"audio"!==e&&(e="video");l(this,e)},updateConfig:function(e,t){var i=this,a=i.config.uiClass;e.counterName!==i.config.counterName&&(t||n(i,{type:"statsConfigChanged",counterName:e.counterName}));i.config=Utils.merge(i.config,e);i.pauseTimes=[];i.config.suppressItemKind&&i.config.suppressItemKind.length&&"string"==typeof i.config.suppressItemKind&&(i.config.suppressItemKind=i.config.suppressItemKind.replace(/\s+/gim,"").split(","));if(i.config.noTracking){i.config.enableStatsReporting=!1;i.config.enableRdotReporting=!1}"false"==i.config.autoplay&&(i.config.autoplay=!1);i.config.forceAutoplayAttempt&&(i.willAutoplayWhenPlayCalled={video:!0,audio:!0});i.config.uiClass&&i.config.uiClass!=a&&Utils.className(document.body,i.config.uiClass,a);i.config.preferPlainOverDash&&Device.possiblyPreferPlainOverDash||Device.preferHls||!Device.supportsAudioDash&&!Device.supportsVideoDash||i.config.delayEmbed||i.dashEvents.create();i.config.startTime=i.config.startTime||0;if(!i.config.preferProtocol){var r=i.config.preferHttpsPercentage;(isNaN(r)||0>r||r>1)&&(r=0);i.config.preferProtocol=Math.random()<=r?"https":"https:"===(location.protocol+"").toLowerCase()?"https":"http"}LoadBalancing.setConfig(i.config);R=i.config.liveEnvironment?D:N;t||n(i,{type:"configUpdated"})},playInBump:function(){var e=this;e.elType="video";e.waitingForChange.video=!1;e.dispatch({type:"playInBump"});setTimeout(function(){e.dispatch({type:"playlistStopped",target:e.mediaPlayer})},1e3)},fixSize:function(e){var t=this,i=document.getElementsByTagName("html")[0];i.style.backgroundColor="black";t.mediaContainer.style.backgroundSize=Math.abs(16/9-window.innerWidth/window.innerHeight)<.2?"cover":"contain";clearTimeout(t.resizeTimer);if(!e&&Device.requiresFullscreenResizeDelay){t.ui.enabled=!1;PluginManager.resizeFix();t.ui.Subtitles.resizeFix();t.mediaContainer.style.width="0px";t.mediaContainer.style.height="0px";t.resizeTimer=setTimeout(function(){var e=window.innerHeight,n=window.innerWidth;t.ui.enabled=!0;t.mediaContainer.style.height=e+"px";t.mediaContainer.style.width=n+"px";PluginManager.resizeFixEnd();Utils.deleteCssRules(t.ui.stylesheet,[".fullscreen #p_playerControls"]);var a=Math.round(t.ratio*n);a>e&&(a=e);if(n>e&&t.ui.controls){var r=.015625*n,o=Math.round((e-a)/2+a-r),s=t.ui.stylesheet.cssRules.length;t.ui.stylesheet.insertRule(".fullscreen #p_playerControls { top: "+(o-t.ui.controls.clientHeight)+"px; }",s)}t.els.video.style.height=a+"px";t.els.video.style.top=Math.round((window.innerHeight-a)/2)+"px";t.ui.resizeFixEnd();PluginManager.resizeFixComplete();t.dashEvents.updatePortalSize();i.style.backgroundColor="transparent"},1e3)}else{t.ui.enabled=!0;PluginManager.resizeFixEnd();t.ui.resizeFixEnd(window.innerWidth);t.ui.displayCover();PluginManager.resizeFixComplete();t.dashEvents.updatePortalSize();i.style.backgroundColor="transparent"}},loadPluginCompleted:function(e){w(this,e)},setProtectionData:function(e){var t=this;t.storedProtectionData=e;t.dashEvents&&t.dashEvents.src&&t.dashEvents.dashPlayer&&t.dashEvents.go()},unsetGuidanceSkippedIfUnder16:function(){var e=this;if(e.config.under16){e.config.guidance.hasGuidancePIN||e.dispatch({type:"setGuidanceSkipped",skipped:!1});e.dispatch({type:"setUnder16Permission",hasPermission:!1})}}};return G}();Sonic.prototype={draw:function(){var e=this.canvas.getContext("2d");this.padding=2*(Math.ceil(this.thickness/2)+1);var t=this.canvas.width=this.canvas.height=this.width+this.padding;e.clearRect(0,0,t,t);e.lineWidth=this.thickness;var i=t/2,n=Math.floor((t-this.thickness)/2)-1,a=Math.PI/22.5,r=this.colourArray;if(r&&r.length>0)for(var o=0;40>o;o++){e.beginPath();e.globalAlpha=o/40;e.arc(i,i,n,(o+1)*a,o*a,!0);e.strokeStyle=r[o%r.length];e.stroke()}else{e.strokeStyle=this.colour;for(o=0;25>o;o++){e.beginPath();e.globalAlpha=o/250;e.arc(i,i,n,0,o*a,!0);e.stroke()}}}};try{-1!==location.host.indexOf("bbc.co.uk")&&(document.domain="bbc.co.uk");-1!==location.host.indexOf("bbc.com")&&(document.domain="bbc.com");-1!==location.host.indexOf("britbox.com")&&(document.domain="britbox.com")}catch(e){}document.addEventListener("dragover",function(e){e.preventDefault();e.stopPropagation()});document.addEventListener("drop",function(e){e.preventDefault();e.stopPropagation()});xd=new XD;window.bootstrap=function(e){xd.detach("bootstrap");e.requireMap||(e.requireMap={});require({paths:e.requireMap});window.publicApi=new Player;DebugConsole.player(window.publicApi);if(e.player.vars.threeSixty){var t="/emp/html360Component/1.1.0/html360Component.min.js";require([t],function(){window.publicApi.init(e)})}else window.publicApi.init(e)};xd.on("bootstrap",window.bootstrap);define("iframe.js",function(){});
</script>
<body class="video">
<div id="p_background"></div>
<div id="p_alert" role="alert"></div>
<!-- be sure that DOM elements are positioned after the flash container -->
<div id="mediaContainer" class="mediaContainer"><video webkit-playsinline playsinline preload="metadata"></video><div id="p_swfcontainer"></div></div>
</body>
</html>