YUI.add("squarespace-gallery-slideshow",function(F){F.namespace("Squarespace");var R="Next";var H="Prev";var K="swipe";var J="fade";var N=1.5056179775280898;var P="outside";var Q="inside";var L=50;var I="dotted";var V="paginated";var C="textual";var M="arrows";var G="prev-next";var C="textual";var U="custom";var O="hidden";var T="[CS]";var S="[TS]";var A="[PS]";var B="[NS]";F.Squarespace.GallerySlideShow=Class.create({initialize:function(c){this.params=c;this.scriptId=c.scriptId;this.currentSlide=0;this.isAnimating=false;this.maxSlides=(this.params.slideTransition==K)?3:this.params.gallery.pictures.length;this.gallery=this.params.gallery;this.slides=this.params.gallery.pictures;this.totalSlides=this.params.loadCount;this.autoPlay=this.params.navigation.autoPlayEnabled;this.autoPlayConfigured=false;this.autoSizeWidth=this.params.autoSizeWidth;this.descriptionStyle=this.params.descriptionStyle;this.slideStyle=this.params.slideStyle;this.aspectX=this.params.aspectX;this.aspectY=this.params.aspectY;this.slideNavigation=this.params.slideNavigation;this.slideNavigationPos=this.params.slideNavigationPos;this.slideTransition=this.params.slideTransition;this.slideIndicator=this.params.slideIndicator;this.TEMPLATE_SLIDE_INDICATOR_TEXTUAL=this.params.textualIndicator;var d=F.one(this.params.targetElement);this.calculateFrameHeight(d);d.addClass("squarespace-slideshow-wrapper");d.addClass(this.slideNavigationPos);var X="";if(this.slideNavigation!="disabled"){X='<div id="frwd-'+c.scriptId+'" class="frwd fnav '+this.slideNavigation+'"></div>'+'<div id="ffwd-'+c.scriptId+'" class="ffwd fnav '+this.slideNavigation+'"></div>';}if(this.slideTransition==K){d.append(F.Node.create('<div class="squarespace-slideshow" style="width:'+this.slideWidth+"px; height:"+(this.slideHeight-1)+'px;">'+'<div id="squarespace-slideshow-frame-'+c.scriptId+'" class="squarespace-slideshow-frame" style="width:'+this.slideWidth+'px;">'+'<div id="squarespace-slideshow-animated-frame-'+c.scriptId+'" style="width:'+(this.slideWidth*3)+"px; height:"+this.slideHeight+"px; margin-left:-"+this.slideWidth+'px;" class="squarespace-slideshow-animated-frame type-swipe"></div>'+'<div id="squarespace-slideshow-description-wrapper-'+c.scriptId+'" class="squarespace-slideshow-description-wrapper" style="display:none">'+'<div class="squarespace-slideshow-container"></div>'+'<div class="squarespace-slideshow-description-content">'+'<div class="squarespace-slideshow-title"><span></span></div>'+'<div class="squarespace-slideshow-description"><span></span></div>'+"</div>"+"</div>"+"</div>"+X+'<div style="width:'+this.slideWidth+'px;" class="squarespace-slideshow-indicator-wrapper slide-indicator-type-'+this.slideIndicator+'">'+'<div id="slide-indicator-box-'+c.scriptId+'" class="slide-indicator-box"></div>'+"</div>"+"</div>"));}else{if(this.slideTransition==J){d.append(F.Node.create('<div class="squarespace-slideshow" style="width:'+this.slideWidth+"px; height:"+(this.slideHeight-1)+'px;">'+'<div id="squarespace-slideshow-frame-'+c.scriptId+'" class="squarespace-slideshow-frame" style="width:'+this.slideWidth+'px;">'+'<div id="squarespace-slideshow-animated-frame-'+c.scriptId+'" style="width:'+this.slideWidth+"px; height:"+this.slideHeight+'px;" class="squarespace-slideshow-animated-frame type-fade"></div>'+'<div id="squarespace-slideshow-description-wrapper-'+c.scriptId+'" class="squarespace-slideshow-description-wrapper" style="display:none">'+'<div class="squarespace-slideshow-container"></div>'+'<div class="squarespace-slideshow-description-content">'+'<div class="squarespace-slideshow-title"><span></span></div>'+'<div class="squarespace-slideshow-description"><span></span></div>'+"</div>"+"</div>"+"</div>"+X+'<div style="width:'+this.slideWidth+'px;" class="squarespace-slideshow-indicator-wrapper slide-indicator-type-'+this.slideIndicator+'">'+'<div id="slide-indicator-box-'+c.scriptId+'" class="slide-indicator-box"></div>'+"</div>"+"</div>"));}}var a=this;if(this.slideNavigation!="disabled"){F.one("#frwd-"+c.scriptId).on("click",function(){a.stopAutoplay(a);a.prevSlide(a);},a);F.one("#ffwd-"+c.scriptId).on("click",function(){a.stopAutoplay(a);a.nextSlide(a);},a);}F.one("#squarespace-slideshow-frame-"+c.scriptId).on("click",function(f){a.onFrameClicked(f,a);},a);var W=0;for(W=0;W<this.maxSlides;W++){var Z;if(this.slideTransition==K){if(W===0){Z=this.getPrevSlideIndex();}else{if(W===1){Z=this.currentSlide;}else{Z=this.getNextSlideIndex();}}}else{if(this.slideTransition==J){Z=W;}}var b=F.one("#squarespace-slideshow-animated-frame-"+c.scriptId);b.append(F.Node.create('<div id="sf-'+c.scriptId+"-sl-"+Z+'" style="width:'+this.slideWidth+"px; height:"+this.slideHeight+'px;" class="sf"></div>'));this.loadIndex(Z,this);}this.initializeSlideIndicators(a,c.scriptId);},simulateClick:function(Z){var X=document.getElementById(Z);if(X.click){X.click();}else{var W=X.ownerDocument.createEvent("MouseEvents");W.initMouseEvent("click",true,true,X.ownerDocument.defaultView,1,0,0,0,0,false,false,false,false,0,null);X.dispatchEvent(W);}},resolveTextualSlideIndicator:function(a){if(a.TEMPLATE_SLIDE_INDICATOR_TEXTUAL){var b=a.params.scriptId;var W="frwd-"+b;var X="ffwd-"+b;var Z=a.TEMPLATE_SLIDE_INDICATOR_TEXTUAL.replace(T,"<span class='slide-indicator-value'>"+(a.currentSlide+1)+"</span>").replace(S,"<span class='slide-indicator-value'>"+a.totalSlides+"</span>").replace(A,"si-prev-"+b+'" class="slide-indicator-prev" onclick="Y.Squarespace.GallerySlideShow.prototype.simulateClick(\''+W+"');").replace(B,"si-next-"+b+'" class="slide-indicator-next" onclick="Y.Squarespace.GallerySlideShow.prototype.simulateClick(\''+X+"');");return("<span class='slide-indicator-textual'>"+Z+"</span>");}return"";},setPaginatedSlideIndicators:function(h){if(h.slideIndicator!=V){return ;}if(h.totalSlides<=7){return ;}var X=h.scriptId;var e=F.one("#slide-indicator-box-"+X);e.set("innerHTML","");var Z=4;var j=this.totalSlides-4;var g=h.currentSlide+1;for(var f=0;f<this.totalSlides;f++){var i=this.totalSlides;var c=(f==0);var d=(f==(i-1));var k;if(g<=Z){k=(f<(Z+1));ellipses1=Z+1;ellipses2=null;}else{if(g>Z&&g<=j){k=((f>=(g-2))&&(f<=(g)));ellipses1=1;ellipses2=i-2;}else{k=(f>=j-1);ellipses1=2;ellipses2=null;}}var b;var a="si-"+X+"-"+f;var W=(f==g-1)?"slide-indicator active":"slide-indicator";if(f==0){W+=" si-first";}else{if(f==(i-1)){W+=" si-last";}}if(c||k||d){b=F.Node.create('<a id="'+a+'" rel="'+f+'" class="'+W+'">'+(f+1)+"</a>");e.append(b);F.one("#"+a).on("click",function(){h.jumpToSlide(h,this);},h);}else{if((f==ellipses1)||(f==ellipses2)){b=F.Node.create('<span class="pagination-ellipsis">...</span>');e.append(b);}}}},initializeSlideIndicators:function(c,e){var X=F.one("#slide-indicator-box-"+e);var W=0;var a=0;if(this.slideIndicator==O){return ;}else{if(this.slideIndicator==V){if(this.totalSlides<=7){for(W=0;W<this.totalSlides;W++){var d="si-"+e+"-"+W;var Z=(W==0)?"slide-indicator active si-first":"slide-indicator";if(W==(this.totalSlides-1)){Z+=" si-last";}var b=F.Node.create('<a id="'+d+'" rel="'+W+'" class="'+Z+'">'+(W+1)+"</a>");X.append(b);F.one("#"+d).on("click",function(){c.jumpToSlide(c,this);},c);}}else{c.setPaginatedSlideIndicators(c);}}else{if(this.slideIndicator==I){for(W=0;W<this.totalSlides;W++){var d="si-"+e+"-"+W;var Z=(W==0)?"slide-indicator active si-first":"slide-indicator";if(W==(this.totalSlides-1)){Z+=" si-last";}var b=F.Node.create('<a id="'+d+'" rel="'+W+'" class="'+Z+'"></a>');X.append(b);a+=b.get("clientWidth");F.one("#"+d).on("click",function(){c.jumpToSlide(c,this);},c);}if((a>this.slideWidth)&&(this.slideWidth>0)){a=this.slideWidth;}X.setStyle("width",a+"px");}else{X.set("innerHTML",c.resolveTextualSlideIndicator(c));}}}},jumpToSlide:function(W,Z){W.stopAutoplay(W);var e=parseInt(Z.get("rel"));var i,X,b;var o,g,h;var r=W.scriptId;F.all("#slide-indicator-box-"+r+" .slide-indicator").removeClass("active");Z.addClass("active");if(e===W.currentSlide){return ;}else{if((e===W.getNextSlideIndex())&&(W.slideTransition==K)){W.nextSlide(W);}else{if((e===W.getPrevSlideIndex())&&(W.slideTransition==K)){W.prevSlide(W);}else{if(W.slideTransition==K){var j=(e>W.currentSlide)?true:false;var q=(e>W.currentSlide)?R:H;var k="sf-"+r+"-sl-";g=(j)?W.getPrevSlideIndex():W.getNextSlideIndex();h=(j)?W.getNextSlideIndex():W.getPrevSlideIndex();o=W.currentSlide;X=F.one("#"+k+g);b=F.one("#"+k+h);i=F.one("#"+k+o);if(j){X.set("id",k+W.getPrevSlideIndex(e-1));b.set("id",k+e);i.set("id",k+W.getPrevSlideIndex(e));}else{var l=e+2;var m=e+1;if(l==-1){l=W.totalSlides-1;}if(m==W.totalSlides-1){m=0;}X.set("id",k+l);b.set("id",k+e);i.set("id",k+m);}F.one("#"+k+e+" .slide-content").remove(true);W.loadIndex(e);W.currentSlide=(j)?e-1:e+1;W.animateSwipe(q,this.onSlideJumped,W);}else{if(W.slideTransition==J){var a="sf-"+r+"-sl-";var c=F.one("#"+a+W.currentSlide);var f=F.one("#"+a+W.currentSlide+" .slide-content");var d=new F.Anim({node:f,to:{opacity:0},duration:W.params.navigation.fadeDuration});d.on("end",function(){c.removeClass("active");});d.run();W.currentSlide=e-1;if(W.currentSlide==-1){W.currentSlide=W.totalSlides-1;}W.animateFade(R,this.onSlideAnimated,W);}}}}}},onSlideJumped:function(Z){var b=Z.scriptId;var a="sf-"+b+"-sl-";var X=Z.getPrevSlideIndex();var W=Z.getNextSlideIndex();F.one("#"+a+X+" .slide-content").remove(true);Z.loadIndex(X);F.one("#"+a+W+" .slide-content").remove(true);Z.loadIndex(W);Z.onSlideAnimated(Z);},calculateFrameHeight:function(W){if(this.autoSizeWidth!=null&&this.autoSizeWidth!=0){this.slideWidth=this.autoSizeWidth;}else{if(W.ancestor("#contentWrapper")){if(W.ancestor(".journal-entry")){var a;var d=0;for(var f=0;f<2;f++){if(f==0){a=F.one(".journal-entry-wrapper");}else{a=F.one(".journal-entry");}d+=this.validNumber(parseInt(a.getStyle("marginLeft")));d+=this.validNumber(parseInt(a.getStyle("marginRight")));d+=this.validNumber(parseInt(a.getStyle("paddingLeft")));d+=this.validNumber(parseInt(a.getStyle("paddingRight")));d+=this.validNumber(parseInt(a.getStyle("borderLeftWidth")));d+=this.validNumber(parseInt(a.getStyle("borderRightWidth")));}var Z=this.validNumber(parseInt(F.one(".journal-entry-wrapper").get("offsetWidth")));this.slideWidth=Z-d;}else{var g=F.one("#content");var b=this.validNumber(parseInt(g.getStyle("marginLeft")));var l=this.validNumber(parseInt(g.getStyle("marginRight")));var j=this.validNumber(parseInt(g.getStyle("paddingLeft")));var h=this.validNumber(parseInt(g.getStyle("paddingRight")));var Z=this.validNumber(parseInt(g.get("clientWidth")));this.slideWidth=Z-b-l-j-h;}}else{if(W.ancestor("#sidebar1Wrapper")||W.ancestor("#sidebar2Wrapper")){var k=F.one(".section");var X=this.validNumber(parseInt(k.getStyle("marginLeft")));var c=this.validNumber(parseInt(k.getStyle("marginRight")));var e=this.validNumber(parseInt(k.getStyle("paddingLeft")));var m=this.validNumber(parseInt(k.getStyle("paddingRight")));var Z=(W.ancestor("#sidebar1Wrapper"))?this.validNumber(parseInt(F.one("#sidebar1").get("clientWidth"))):this.validNumber(parseInt(F.one("#sidebar2").get("clientWidth")));this.slideWidth=Z-X-c-e-m;}}}if(this.slideNavigationPos=="outside"){this.slideWidth-=(L*2);}if(this.slideStyle==="horizontal"){this.slideHeight=Math.round(this.slideWidth/N);}else{if(this.slideStyle==="square"){this.slideHeight=this.slideWidth;}else{if(this.slideStyle==="aspect"){this.slideHeight=Math.round(this.slideWidth/(this.aspectX/this.aspectY));}else{this.slideHeight=Math.round(this.slideWidth/N);}}}},validNumber:function(W){if(W){return W;}else{return 0;}},start:function(X){F.all("#squarespace-slideshow-animated-frame-"+this.params.scriptId+" .sf").removeClass("active");F.one("#squarespace-slideshow-animated-frame-"+this.params.scriptId+" #sf-"+this.params.scriptId+"-sl-"+this.currentSlide).addClass("active");if(!this.autoPlayConfigured&&this.autoPlay){var W=this;if(this.slideTransition==K){W.tId=F.later((W.params.navigation.slideDelay*1000),"",function(){W.animateSwipe(R,W.onSlideAnimated,W);},W,true);}else{if(this.slideTransition==J){W.tId=F.later((W.params.navigation.slideDelay*1000),"",function(){W.animateFade(R,W.onSlideAnimated,W);},W,true);}}this.autoPlayConfigured=true;}if(this.descriptionStyle!="hidden"){this.animateDescription(this.descriptionStyle,this.currentSlide,this.params.scriptId);}if(X){X();}},animateDescription:function(X,W,d){var Z=this.slides[W];var c=F.one("#squarespace-slideshow-description-wrapper-"+d);c.setStyles({"display":"block","opacity":"0"});if(X=="title"||X=="both"){var b=F.one("#squarespace-slideshow-description-wrapper-"+d+" .squarespace-slideshow-title span");b.set("innerHTML",unescape(Z.title));}if(X=="description"||X=="both"){var a=F.one("#squarespace-slideshow-description-wrapper-"+d+" .squarespace-slideshow-description span");a.set("innerHTML",unescape(Z.description));}new F.Anim({node:c,to:{opacity:1},duration:0.4}).run();},loadIndex:function(W,a){var Z=this.slides[W];roundNumber=function(c,d){return Math.round(c*Math.pow(10,d))/Math.pow(10,d);};imageLoaded=function(f,c,d,k){var e=F.one(f);var m=f.width;var i=f.height;var g,j;if(c==="horizontal"||c==="aspect"){var l=d/m;j=l*i;e.setStyles({"width":d+"px","height":"auto","left":"0px","top":-Math.round(((j-k)/2)*Math.pow(10,2))/Math.pow(10,2)+"px"});}else{if(c==="square"){if(m>=i){var l=k/i;g=l*m;e.setStyles({"width":"auto","height":k+"px","left":-Math.round(((g-d)/2)*Math.pow(10,2))/Math.pow(10,2)+"px","top":"0px"});}else{if(i>m){var l=d/m;j=l*i;e.setStyles({"width":d+"px","height":"auto","left":"0px","top":-Math.round(((j-k)/2)*Math.pow(10,2))/Math.pow(10,2)+"px"});}}}}};var X=F.one("#squarespace-slideshow-animated-frame-"+this.params.scriptId+" #sf-"+this.params.scriptId+"-sl-"+W);var b=F.Node.create("<img onload='imageLoaded(this, \""+this.slideStyle+'", "'+this.slideWidth+'", "'+this.slideHeight+"\")' class='slide-content'>");b.set("src","/picture/"+Z.fileName+"?pictureId="+Z.id);X.append(b);},isStyleModeActive:function(){if(Squarespace.EditingEnvironment){return Squarespace.EditingEnvironment.CURRENT_EDITING_MODE=="style";}return false;},prevSlide:function(W){if(W.isAnimating){return ;}if(W.slideTransition==K){W.animateSwipe(H,this.onSlideAnimated,W);}else{if(W.slideTransition==J){W.animateFade(H,this.onSlideAnimated,W);}}W.stopAutoplay(W);},nextSlide:function(W){if(W.isAnimating){return ;}if(W.slideTransition==K){W.animateSwipe(R,this.onSlideAnimated,W);}else{if(W.slideTransition==J){W.animateFade(R,this.onSlideAnimated,W);}}},onSlideAnimated:function(Z){var a=Z.params.scriptId;if(Z.slideIndicator==V||Z.slideIndicator==I){var X=F.all("#slide-indicator-box-"+a+" .slide-indicator").removeClass("active");F.one("#si-"+a+"-"+Z.currentSlide).addClass("active");}else{var W=F.one("#slide-indicator-box-"+a);W.set("innerHTML",Z.resolveTextualSlideIndicator(Z));}Z.setPaginatedSlideIndicators(Z);},onFrameClicked:function(Z,X){if(X.isStyleModeActive()){return ;}if(Z.target.hasClass("slide-content")){var W=X.gallery.pictures[X.currentSlide].linkUrl;if(W&&W!=""){var a=X.gallery.pictures[X.currentSlide].isExternalLink;if(a){window.open(unescape(W));}else{location=unescape(W);}}}X.stopAutoplay(X);},urlCheck:function(X){var W=new RegExp();W.compile("^[A-Za-z]+://[A-Za-z0-9-_]+\\.[A-Za-z0-9-_%&?/.=]+$");if(!W.test(X)){return false;}return true;},stopAutoplay:function(W){if(W.tId){W.tId.cancel();}},animateSwipe:function(f,g,c){if(c.isStyleModeActive()){return ;}var X=c.params.scriptId;var W=c.params.navigation;var a=parseInt(F.one("#squarespace-slideshow-animated-frame-"+X).getStyle("marginLeft"));var e=(f===R)?a-parseInt(c.slideWidth):a+parseInt(c.slideWidth);var Z=(f===R)?c.getPrevSlideIndex():c.getNextSlideIndex();var b=(f===R)?c.getNextSlideIndex():c.getPrevSlideIndex();var d=(f===R)?true:false;F.one("#squarespace-slideshow-animated-frame-"+X+" #sf-"+X+"-sl-"+b).addClass("active");c.a=new F.Anim({node:"#squarespace-slideshow-animated-frame-"+X,to:{marginLeft:e},duration:W.duration,easing:W.easing});c.a.on("start",function(){new F.Anim({node:F.one("#squarespace-slideshow-description-wrapper-"+X),to:{opacity:0},duration:0.3}).run();c.isAnimating=true;});c.a.on("end",function(){F.all("#squarespace-slideshow-animated-frame-"+X+" #sf-"+X+"-sl-"+Z+" .slide-content").remove();var j;if(d){j=F.one("#squarespace-slideshow-animated-frame-"+X).append(F.one("#sf-"+X+"-sl-"+Z));}else{var h=document.getElementById(F.one("#squarespace-slideshow-animated-frame-"+X).get("id"));var i=document.getElementById(F.one("#squarespace-slideshow-animated-frame-"+X+" #sf-"+X+"-sl-"+Z).get("id"));h.insertBefore(i,h.childNodes[0]);j=F.one("#squarespace-slideshow-animated-frame-"+X+" #sf-"+X+"-sl-"+Z);}c.currentSlide=b;b=(f===R)?c.getNextSlideIndex():c.getPrevSlideIndex();j.set("id","sf-"+X+"-sl-"+b);F.one("#squarespace-slideshow-animated-frame-"+X).setStyle("marginLeft","-"+c.slideWidth+"px");c.loadIndex(b,c);c.start(function(){if(g){g(c);}});c.isAnimating=false;},c);c.a.run();},animateFade:function(g,h,f){if(f.isStyleModeActive()){return ;}var X=f.params.scriptId;var W=f.params.navigation;var d=(g===R)?f.getNextSlideIndex():f.getPrevSlideIndex();var e="sf-"+X+"-sl-";var Z=F.one("#"+e+f.currentSlide);var c=F.one("#"+e+f.currentSlide+" .slide-content");var b=F.one("#"+e+d);var a=F.one("#"+e+d+" .slide-content");f.a=new F.Anim({node:c,to:{opacity:0},duration:W.fadeDuration});f.a.on("start",function(){new F.Anim({node:F.one("#squarespace-slideshow-description-wrapper-"+X),to:{opacity:0},duration:0.3}).run();new F.Anim({node:a,to:{opacity:1},duration:W.fadeDuration}).run();f.isAnimating=true;});f.a.on("end",function(){Z.removeClass("active");b.addClass("active");if(f.descriptionStyle!="hidden"){f.animateDescription(f.descriptionStyle,d,X);}f.isAnimating=false;if(h){h(f);}});f.a.run();f.currentSlide=d;},getPrevSlideIndex:function(W){var X;if(W){X=W;}else{X=this.currentSlide;}if(X>0){return(X-=1);}else{return this.totalSlides-1;}},getNextSlideIndex:function(W){var X;if(W){X=W;}else{X=this.currentSlide;}if(X<this.totalSlides-1){return(X+=1);}else{return 0;}}});});YUI().use("node","event","*",function(A){Y=A;Y.startGallerySlideShow=function(C){var C=Y.one("#"+C);var G=C.get("value");var B=Base64.decode(G);var F=YAHOO.lang.JSON.parse(B);new Y.Squarespace.GallerySlideShow({targetElement:"#squarespace-slideshow-wrapper-"+F.scriptId,pictures:F.gallery.pictures,gallery:F.gallery,scriptId:F.scriptId,descriptionStyle:F.descriptionStyle,slideStyle:F.slideStyle,aspectX:F.aspectX,aspectY:F.aspectY,slideNavigation:F.slideNavigation,slideTransition:F.slideTransition,loadCount:F.loadCount,navigation:{autoPlayEnabled:F.autoPlayEnabled,slideDelay:F.slideDelay,duration:0.5,easing:Y.Easing.easeOutStrong,fadeDuration:1}}).start();};});E.onDOMReady(function(){var B=D.getElementsByClassName("ss-slideshow-v2");if(B.length>0){for(var A=0;A<B.length;A++){var C=D.getAttribute(B[A],"rel");Squarespace.SlideshowDAO.getSlideshow(C,true,Squarespace.SlideshowDAO.createSlideshow);}}});Squarespace.SlideshowDAO={cacheScriptIds:function(A){this.cache=new Array();for(key in A){this.cache.push(key);}},_contains:function(C,B){var A=C.length;while(A--){if(C[A]===B){return true;}}return false;},sync:function(C,B){if(!C){this.remove(null,B);}else{var A=new Array();for(key in C){A.push(key);}for(key in this.cache){if(!this._contains(A,this.cache[key])){this.remove(this.cache[key],null);}}}},escapePictureContent:function(A){for(picId in A){var B=A[picId];for(var C in B){B[C]=escape(B[C]);}}},save:function(B,C){B.params.gallery.title=escape(B.params.gallery.title);this.escapePictureContent(B.params.gallery.pictures);var A="SS_AUTHKEY="+Squarespace.Constants.SS_AUTHKEY+"&params="+escape(YAHOO.lang.JSON.stringify(B.params))+"&configId="+B.configId+"&gallery="+YAHOO.lang.JSON.stringify(window.parent.Squarespace.SlideShowPreview.getGalleryConfiguration())+"&scriptId="+B.scriptId+"&token="+window.parent.Squarespace.ConfigurationTray.getToken();YAHOO.util.Connect.asyncRequest("POST","/process/admin/CreateOrModifySlideshow",{timeout:10000,failure:function(F){alert(Squarespace.Constants.NO_SAVE_WARNING);},success:function(F){var G=F.responseText;C[B.scriptId]='<div id="squarespace-slideshow-wrapper-'+B.scriptId+'" rel="'+G+'" class="ss-slideshow-v2"></div>';}},A);},remove:function(C,A){var B="SS_AUTHKEY="+Squarespace.Constants.SS_AUTHKEY;if(C){B+="&scriptId="+C;}if(A){B+="&token="+A;}YAHOO.util.Connect.asyncRequest("POST","/process/admin/RemoveSlideshow",{timeout:10000,failure:function(F){alert(Squarespace.Constants.NO_SAVE_WARNING);},success:function(F){}},B);},getSlideshow:function(C,A,B){if(C==""){return ;}YAHOO.util.Connect.asyncRequest("GET","/display/GetSlideshow?configId="+C+"&filterActive="+A,{timeout:10000,failure:function(F){return null;},success:function(G){if(G.responseText){var F=YAHOO.lang.JSON.parse(G.responseText);if(B&&F){B(F);}}}});},createSlideshow:function(B){var F=B.params;var A=B.gallery;new Y.Squarespace.GallerySlideShow({targetElement:"#squarespace-slideshow-wrapper-"+B.scriptId,pictures:A.pictures,gallery:A,scriptId:B.scriptId,descriptionStyle:F.descriptionStyle,slideStyle:F.slideStyle,aspectX:F.aspectX,aspectY:F.aspectY,autoSizeWidth:F.autoSizeWidth,slideNavigation:F.slideNavigation,slideNavigationPos:F.slideNavigationPos,slideTransition:F.slideTransition,loadCount:F.loadCount,slideIndicator:F.slideIndicator,textualIndicator:F.textualIndicator,navigation:{autoPlayEnabled:(F.autoPlayEnabled==="true"),slideDelay:F.slideDelay,duration:0.5,easing:Y.Easing.easeOutStrong,fadeDuration:1}}).start();if(Squarespace.equalColumnHeightEnabled){var C=this;YAHOO.lang.later(50,this,function(){Squarespace.EqualColumnHeight.enable(C);});}}};