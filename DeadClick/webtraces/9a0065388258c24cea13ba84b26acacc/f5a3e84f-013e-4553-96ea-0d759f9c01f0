/*!************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2011 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/
(function(s7sdk){if(!s7sdk.Point2D){s7sdk.Point2D=function Point2D(x,y){this.x=x==null?0:x;this.y=y==null?0:y};s7sdk.Point2D.prototype.clone=function(){return new s7sdk.Point2D(this.x,this.y)};s7sdk.Point2D.prototype.getLength=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))};s7sdk.Point2D.prototype.add=function(point){return new s7sdk.Point2D(this.x+point.x,this.y+point.y)};s7sdk.Point2D.prototype.subtract=function(point){return new s7sdk.Point2D(this.x-point.x,this.y-point.y)};s7sdk.Point2D.prototype.negate=function(){return new s7sdk.Point2D(-this.x,-this.y)};s7sdk.Point2D.prototype.scale=function(value){return new s7sdk.Point2D(this.x*value,this.y*value)};s7sdk.Point2D.prototype.toString=function(){return""+this.x+", "+this.y};s7sdk.Point2D.prototype.equals=function(value){return this.x==value.x&&this.y==value.y}}if(!s7sdk.Rectangle){s7sdk.Rectangle=function(x,y,width,height){this.x=!x||typeof(x)=="undefined"?0:x;this.y=!y||typeof(y)=="undefined"?0:y;this.width=!width||typeof(width)=="undefined"?0:width;this.height=!height||typeof(height)=="undefined"?0:height};s7sdk.Rectangle.prototype.containsRect=function(rect){if(rect.x<this.x){return false}if(rect.y<this.y){return false}if(rect.width+rect.x>this.width+this.x){return false}if(rect.height+rect.y>this.height+this.y){return false}return true};s7sdk.Rectangle.prototype.containsPoint=function(x,y){if(x<this.x){return false}if(y<this.y){return false}if(x>this.width+this.x){return false}if(y>this.height+this.y){return false}return true};s7sdk.Rectangle.prototype.isEmpty=function(){with(this){if(width>0&&height>0){return false}return true}};s7sdk.Rectangle.prototype.equals=function(rect){if(rect.x!=this.x){return false}if(rect.y!=this.y){return false}if(rect.width!=this.width){return false}if(rect.height!=this.height){return false}return true};s7sdk.Rectangle.prototype.intersection=function(rect){var rectDest=new s7sdk.Rectangle(0,0,0,0);rectDest.x=Math.max(this.x,rect.x);rectDest.y=Math.max(this.y,rect.y);var right=Math.min(this.x+this.width,rect.x+rect.width);var bottom=Math.min(this.y+this.height,rect.y+rect.height);rectDest.width=right>rectDest.x?right-rectDest.x:0;rectDest.height=bottom>rectDest.y?bottom-rectDest.y:0;return rectDest};s7sdk.Rectangle.prototype.topLeft=function(){return new s7sdk.Point2D(this.x,this.y)};s7sdk.Rectangle.prototype.bottomRight=function(){return new s7sdk.Point2D(this.x+this.width,this.y+this.height)};s7sdk.Rectangle.prototype.toString=function(){with(this){return"s7sdk.Rectangle "+x+", "+y+", "+width+", "+height}};s7sdk.Rectangle.prototype.getLeft=function(){return this.x};s7sdk.Rectangle.prototype.getRight=function(){return this.x+this.width};s7sdk.Rectangle.prototype.getTop=function(){return this.y};s7sdk.Rectangle.prototype.getBottom=function(){return this.y+this.height}}if(!s7sdk.Matrix2D){s7sdk.Matrix2D=function(a,b,c,d,tx,ty){this.a=a==null?1:a;this.b=b==null?0:b;this.c=c==null?0:c;this.d=d==null?1:d;this.tx=tx==null?0:tx;this.ty=ty==null?0:ty};s7sdk.Matrix2D.prototype.clone=function(){return new s7sdk.Matrix2D(this.a,this.b,this.c,this.d,this.tx,this.ty)};s7sdk.Matrix2D.prototype.translate=function(dx,dy){this.tx+=dx;this.ty+=dy};s7sdk.Matrix2D.prototype.scale=function(sx,sy){this.a*=sx;this.b*=sy;this.c*=sx;this.d*=sy;this.tx*=sx;this.ty*=sy};s7sdk.Matrix2D.prototype.transformPoint=function(p){var p_out=p.clone();p_out.x=this.a*p.x+this.c*p.y+this.tx;p_out.y=this.b*p.x+this.d*p.y+this.ty;return p_out};s7sdk.Matrix2D.prototype.transformRect=function(rect){var tL=this.transformPoint(rect.topLeft());var bR=this.transformPoint(rect.bottomRight());return new s7sdk.Rectangle(tL.x,tL.y,bR.x-tL.x,bR.y-tL.y)};s7sdk.Matrix2D.prototype.invert=function(){var det=this.a*this.d-this.b*this.c;if(det==0){throw new Error("Matrix is not inversible")}var m=this.clone();this.a=m.d/det;this.b=-m.b/det;this.c=-m.c/det;this.d=m.a/det;this.tx=(m.ty*m.c-m.tx*m.d)/det;this.ty=(m.tx*m.b-m.ty*m.a)/det};s7sdk.Matrix2D.prototype.concat=function(m2){var m1=this.clone();this.a=m2.a*m1.a+m2.c*m1.b;this.b=m2.b*m1.a+m2.d*m1.b;this.c=m2.a*m1.c+m2.c*m1.d;this.d=m2.b*m1.c+m2.d*m1.d;this.ty=m2.b*m1.tx+m2.d*m1.ty+m2.ty;this.tx=m2.a*m1.tx+m2.c*m1.ty+m2.tx};s7sdk.Matrix2D.prototype.toString=function(){with(this){return"Matrix2D("+a+", "+b+", "+c+", "+d+", "+tx+", "+ty+")"}}}if(!s7sdk.TileAddress){s7sdk.TileAddress=function(w,h,idx,pos_x,pos_y){this.w=w;this.h=h;this.idx=idx;this.pos_x=pos_x;this.pos_y=pos_y};s7sdk.TileAddress.prototype.x=function(){return this.pos_x};s7sdk.TileAddress.prototype.y=function(){return this.pos_y}}})(s7getCurrentNameSpace());