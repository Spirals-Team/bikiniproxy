/*!************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2011 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/
(function(b){b.pkg("s7sdk.set");b.Util.require("s7sdk.event.Event");b.Util.require("s7sdk.common.Thumb");if(!b.set.SetIndicatorControl){b.set.SetIndicatorControl=function(c){arguments.callee.superclass.apply(this,[c,b.set.SetIndicatorControl.NS,c.constructor,b.set.SetIndicator.RESTRICTED_STYLES])};b.set.SetIndicatorControl.prototype.setModifier=function(g){var m=null;var l=null;var j=this.component.getModifiers();var c=this.getWidth();var f=this.getHeight();for(var e in j){var d=e.toLowerCase();if(!g[d]){continue}l=g[d];switch(d){case"mode":m=this.component.mode;this.superclass.prototype.setModifier.apply(this,[g]);this.component.resize(c,f);this.dispatchEvent(new b.event.ControlComponentEvent(b.event.ControlComponentEvent.NOTF_CONTROLCOMPONENT_MODIFIERUPDATED,{oldvalue:JSON.stringify(m),newvalue:JSON.stringify(l),property:d},false));break;case"autohide":m=this.component.autohide;this.superclass.prototype.setModifier.apply(this,[g]);this.component.resize(c,f);this.dispatchEvent(new b.event.ControlComponentEvent(b.event.ControlComponentEvent.NOTF_CONTROLCOMPONENT_MODIFIERUPDATED,{oldvalue:JSON.stringify(m),newvalue:JSON.stringify(l),property:d},false));break;default:break}}};b.set.SetIndicatorControl.prototype.rebuild=function(c){var e=this.component.numberOfPages;var d=this.component.getSelectedPage();this.superproto.rebuild.apply(this,[c]);this.component.setNumberOfPages(e);this.component.setSelectedPage(d)};b.set.SetIndicatorControl.NS="s7sdk.set.SetIndicatorControl"}b.Class.inherits(b.set.SetIndicatorControl.NS,"s7sdk.ControlComponent");if(!b.set.SetIndicator){b.set.SetIndicator=function SetIndicator(c,e,d){var f=!!arguments[3];d=(typeof d=="string"&&d.length)?d:"SetIndicator_"+b.Util.createUniqueId();b.Logger.log(b.Logger.CONFIG,"s7sdk.set.SetIndicator constructor - containerd: %0, settings: %1 , compId: %2",c,e,d);arguments.callee.superclass.apply(this,[d,c,"div",b.set.SetIndicator.COMPONENT_STYLE,e,!f]);this.numberOfPages=this.allowableNumberOfPages=-1;this.selectedPage=0;this.container=this.getParent();this.componentContainer=null;this.hint="";this.toolTip_=null;this.createElement();this.attachToContainer();this.width=parseInt(b.Util.css.getCss("s7setindicator","width",d,null,this.getParent(),{mode:this.mode}));this.height=parseInt(b.Util.css.getCss("s7setindicator","height",d,null,this.getParent(),{mode:this.mode}));this.resize(this.width,this.height);this.build();if(!f){return new b.set.SetIndicatorControl(this)}else{return this}};b.Class.inherits("s7sdk.set.SetIndicator","s7sdk.UIComponent");b.set.SetIndicator.prototype.modifiers={mode:{params:["mode"],defaults:["dotted"],ranges:[["dotted","numeric"]]},autohide:{params:["enabled","limit"],defaults:[false,-1],ranges:[,"-1:"]}};b.set.SetIndicator.RESTRICTED_STYLES={s7setindicator:["width","height"]};b.set.SetIndicator.prototype.symbols={TOOLTIP:""};b.set.SetIndicator.COMPONENT_STYLE="s7setindicator";b.set.SetIndicator.STATE="state";b.set.SetIndicator.SELECTED="selected";b.set.SetIndicator.UN_SELECTED="unselected";b.set.SetIndicator.COMPONENT_CONTAINER="s7setcontainer";b.set.SetIndicator.PAGE_INDICATOR="s7dot";b.set.SetIndicator.MODE="mode";b.set.SetIndicator.DOTTED="dotted";b.set.SetIndicator.NUMERIC="numeric";b.set.SetIndicator.prototype.addEventListener=function(e,d,c){b.Logger.log(b.Logger.FINE,"s7sdk.set.SetIndicator.addEventListener - type: %0, handler: %1, useCapture: %2",e,d.toString().substring(0,d.toString().indexOf("(")),c);this.superproto.addEventListener.apply(this,[e,d,c])};b.set.SetIndicator.prototype.setSelectedPage=function(d){b.Logger.log(b.Logger.FINE,"s7sdk.set.SetIndicator.setSelectedPage - page: %0",d);if((d!=this.selectedPage)&&(d<this.numberOfPages)){var e=this.selectedPage;this.selectedPage=d;var c=document.getElementById(this.getId()+"_sContainer"+e);var f=document.getElementById(this.getId()+"_sContainer"+this.selectedPage);b.Util.css.setCSSAttributeSelector(f,b.set.SetIndicator.STATE,b.set.SetIndicator.SELECTED);b.Util.css.setCSSAttributeSelector(c,b.set.SetIndicator.STATE,b.set.SetIndicator.UN_SELECTED);this.dispatchEvent(new b.event.SwatchEvent(b.event.SwatchEvent.SWATCH_PAGE_CHANGE,d,false))}};b.set.SetIndicator.prototype.getSelectedPage=function(){return this.selectedPage};b.set.SetIndicator.prototype.getNumberOfPages=function(){return this.numberOfPages};b.set.SetIndicator.prototype.getAllowableNumberOfPages=function(){var c=Math.floor(this.getWidth()/this.getDotSize().w);this.allowableNumberOfPages=c;return this.allowableNumberOfPages};b.set.SetIndicator.prototype.getDotSize=function(){var l={state:b.set.SetIndicator.SELECTED};var m=parseInt(b.Util.css.getCss("s7dot","width",this.id,"s7setindicator[mode='"+this.mode+"']",this.obj,l));var k=parseInt(b.Util.css.getCss("s7dot","height",this.id,"s7setindicator[mode='"+this.mode+"']",this.obj,l));var e=0;var c=0;var g=0;var d=0;var j=["margin-left","margin-right"];var h=["margin-top","margin-bottom"];for(var f=0;f<j.length;f++){g=parseFloat(b.Util.css.getCss("s7dot",j[f],this.id,"s7setindicator[mode='"+this.mode+"']",this.obj,l));if(b.Util.isNumber(g)){e+=g}}for(var f=0;f<h.length;f++){d=parseFloat(b.Util.css.getCss("s7dot",h[f],this.id,"s7setindicator[mode='"+this.mode+"']",this.obj,l));if(b.Util.isNumber(d)){c+=d}}e=isNaN(e)?0:e;c=isNaN(c)?0:c;return{w:m+e,h:k+c}};b.set.SetIndicator.prototype.setNumberOfPages=function(c){b.Logger.log(b.Logger.FINE,"s7sdk.set.SetIndicator.setNumberOfPages - pages: %0",c);if(c!=this.numberOfPages){this.numberOfPages=c;this.selectedPage=0;this.build()}};b.set.SetIndicator.prototype.clearAll=function(){if(this.componentContainer==null){return}this.obj.removeChild(this.componentContainer)};b.set.SetIndicator.prototype.build=function(){var g=0;this.clearAll();var d=b.Util.createObj(null,"div");this.width=parseInt(b.Util.css.getCss("s7setindicator","width",this.id,null,this.container,{mode:this.mode}));this.height=parseInt(b.Util.css.getCss("s7setindicator","height",this.id,null,this.container,{mode:this.mode}));this.componentContainer=d;this.hint=this.getLocalizedText("TOOLTIP");if(this.hint&&this.hint.length){if(b.browser.name!=="ie"){if(this.toolTip_==null){this.toolTip_=new b.SimpleToolTip(this.obj,this.hint)}}}for(var c=0;c<this.numberOfPages;c++){var f=b.Util.createObj(null,"div");f.className=b.set.SetIndicator.PAGE_INDICATOR;if(this.selectedPage==g){b.Util.css.setCSSAttributeSelector(f,b.set.SetIndicator.STATE,b.set.SetIndicator.SELECTED)}else{b.Util.css.setCSSAttributeSelector(f,b.set.SetIndicator.STATE,b.set.SetIndicator.UN_SELECTED)}g++;f.id=this.getId()+"_sContainer"+c;f.setAttribute("pageNumber",c);if(this.mode==b.set.SetIndicator.NUMERIC&&!(b.browser.supportsTouch())){f.innerHTML=c+1}else{}var e=this;if(b.browser.supportsTouch()){}else{f.addEventListener("click",function(h){e.setSelectedPage(parseInt(h.target.getAttribute("pageNumber")))})}this.componentContainer.appendChild(f)}if(this.mode==b.set.SetIndicator.NUMERIC&&!(b.browser.supportsTouch())){b.Util.css.setCSSAttributeSelector(this.obj,b.set.SetIndicator.MODE,b.set.SetIndicator.NUMERIC)}else{b.Util.css.setCSSAttributeSelector(this.obj,b.set.SetIndicator.MODE,b.set.SetIndicator.DOTTED)}this.obj.appendChild(this.componentContainer);this.validateVisibility()};b.set.SetIndicator.prototype.validateVisibility=function(){var c=this.getAllowableNumberOfPages();if(this.autohide.enabled&&this.autohide.limit!=-1){if(this.numberOfPages>this.autohide.limit||this.numberOfPages>c){this.obj.style.display="none"}}else{if(this.autohide.enabled){if(this.numberOfPages>c){this.obj.style.display="none"}}}};b.set.SetIndicator.prototype.getWidth=function(){return this.obj.width||this.width};b.set.SetIndicator.prototype.getHeight=function(){return this.obj.height||this.height};b.set.SetIndicator.prototype.resize=function(c,d){if(c>0&&d>0){this.width=c;this.height=d;this.obj.style.height=this.height+"px";this.obj.style.width=this.width+"px"}this.setNumberOfPages(this.numberOfPages);this.validateVisibility();b.UIComponent.prototype.resize.apply(this,[c,d])};b.set.SetIndicator.prototype.hide=function(){b.Util.fade(this.obj,true,0.3,"block")};b.set.SetIndicator.prototype.show=function(){b.Util.fade(this.obj,false,0.3,"block")};b.set.SetIndicator.prototype.createElement=function(){b.UIComponent.prototype.createElement.apply(this,[]);this.obj.className=b.set.SetIndicator.COMPONENT_STYLE};b.set.SetIndicator.prototype.setCSS=function(e,d,c){if(this.isRestrictedCSSProperty(b.set.SetIndicator.RESTRICTED_STYLES,d)){throw new Error("You cannot set "+e+" : "+d+" CSS property for this component ")}else{this.superproto.setCSS.apply(this,[e,d,c])}};b.set.SetIndicator.prototype.setModifier=function(c){throw new Error("Trying to use setModifier on the Core class (SetIndicator) is unsupported! Please refer to SDK documentation on using setModifier.")};b.set.SetIndicator.prototype.dispose=function(){this.cleanUp();if(this.obj){if(this.obj.parentElement){this.obj.parentElement.removeChild(this.obj)}}};b.set.SetIndicator.prototype.cleanUp=function(c){if(this.obj){b.Util.removeTags(this.obj);this.obj.style.cssText=""}};b.SetIndicator=b.set.SetIndicator;(function a(){var i=b.Util.css.createCssRuleText;var f=b.Util.css.createCssImgUrlText;var h=b.Util.css.createCssAnimationText;var g=b.browser&&b.browser.name=="ie"&&b.browser.version.major<=8;var e={width:"400px",height:"22px","text-align":"center","-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","border-radius":"0px","font-family":"Helvetica, sans-serif","font-size":"11px"};var c={display:"inline-block",width:"10px",height:"10px","margin-left":"2px","margin-right":"2px","margin-top":"6px","margin-bottom":"2px","border-radius":"6px","background-color":"#d5d3d3"};if(g){c["*display"]="inline";c.zoom="1"}var d=i(".s7setindicator",e)+i(".s7setindicator .s7dot",c)+i(".s7setindicator .s7dot[state='selected']",{"background-color":"#939393"})+i(".s7setindicator .s7dot[state='unselected']",{"background-color":"#d5d3d3;"})+i(".s7setindicator[mode='numeric'] .s7dot",{cursor:"default",width:"18px",height:"18px","line-height":"18px","margin-top":"2px","border-radius":"9px"});b.Util.css.addDefaultCSS(d,"SetIndicator")})()}})(s7getCurrentNameSpace());